var _Q=Object.defineProperty;var bQ=(n,e,t)=>e in n?_Q(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pn=(n,e,t)=>bQ(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Al(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function GB(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var o4={exports:{}},Ov={},s4={exports:{}},vs={},M7;function xQ(){if(M7)return vs;M7=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),B=Symbol.iterator;function O(Fe){return Fe===null||typeof Fe!="object"?null:(Fe=B&&Fe[B]||Fe["@@iterator"],typeof Fe=="function"?Fe:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,j={};function N(Fe,He,bt){this.props=Fe,this.context=He,this.refs=j,this.updater=bt||T}N.prototype.isReactComponent={},N.prototype.setState=function(Fe,He){if(typeof Fe!="object"&&typeof Fe!="function"&&Fe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Fe,He,"setState")},N.prototype.forceUpdate=function(Fe){this.updater.enqueueForceUpdate(this,Fe,"forceUpdate")};function q(){}q.prototype=N.prototype;function H(Fe,He,bt){this.props=Fe,this.context=He,this.refs=j,this.updater=bt||T}var oe=H.prototype=new q;oe.constructor=H,F(oe,N.prototype),oe.isPureReactComponent=!0;var ne=Array.isArray,$=Object.prototype.hasOwnProperty,te={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function ie(Fe,He,bt){var Yt,gt={},Lt=null,Kt=null;if(He!=null)for(Yt in He.ref!==void 0&&(Kt=He.ref),He.key!==void 0&&(Lt=""+He.key),He)$.call(He,Yt)&&!G.hasOwnProperty(Yt)&&(gt[Yt]=He[Yt]);var Ue=arguments.length-2;if(Ue===1)gt.children=bt;else if(1<Ue){for(var Pe=Array(Ue),Be=0;Be<Ue;Be++)Pe[Be]=arguments[Be+2];gt.children=Pe}if(Fe&&Fe.defaultProps)for(Yt in Ue=Fe.defaultProps,Ue)gt[Yt]===void 0&&(gt[Yt]=Ue[Yt]);return{$$typeof:n,type:Fe,key:Lt,ref:Kt,props:gt,_owner:te.current}}function he(Fe,He){return{$$typeof:n,type:Fe.type,key:He,ref:Fe.ref,props:Fe.props,_owner:Fe._owner}}function pe(Fe){return typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===n}function Ee(Fe){var He={"=":"=0",":":"=2"};return"$"+Fe.replace(/[=:]/g,function(bt){return He[bt]})}var me=/\/+/g;function Se(Fe,He){return typeof Fe=="object"&&Fe!==null&&Fe.key!=null?Ee(""+Fe.key):He.toString(36)}function De(Fe,He,bt,Yt,gt){var Lt=typeof Fe;(Lt==="undefined"||Lt==="boolean")&&(Fe=null);var Kt=!1;if(Fe===null)Kt=!0;else switch(Lt){case"string":case"number":Kt=!0;break;case"object":switch(Fe.$$typeof){case n:case e:Kt=!0}}if(Kt)return Kt=Fe,gt=gt(Kt),Fe=Yt===""?"."+Se(Kt,0):Yt,ne(gt)?(bt="",Fe!=null&&(bt=Fe.replace(me,"$&/")+"/"),De(gt,He,bt,"",function(Be){return Be})):gt!=null&&(pe(gt)&&(gt=he(gt,bt+(!gt.key||Kt&&Kt.key===gt.key?"":(""+gt.key).replace(me,"$&/")+"/")+Fe)),He.push(gt)),1;if(Kt=0,Yt=Yt===""?".":Yt+":",ne(Fe))for(var Ue=0;Ue<Fe.length;Ue++){Lt=Fe[Ue];var Pe=Yt+Se(Lt,Ue);Kt+=De(Lt,He,bt,Pe,gt)}else if(Pe=O(Fe),typeof Pe=="function")for(Fe=Pe.call(Fe),Ue=0;!(Lt=Fe.next()).done;)Lt=Lt.value,Pe=Yt+Se(Lt,Ue++),Kt+=De(Lt,He,bt,Pe,gt);else if(Lt==="object")throw He=String(Fe),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Fe).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.");return Kt}function be(Fe,He,bt){if(Fe==null)return Fe;var Yt=[],gt=0;return De(Fe,Yt,"","",function(Lt){return He.call(bt,Lt,gt++)}),Yt}function at(Fe){if(Fe._status===-1){var He=Fe._result;He=He(),He.then(function(bt){(Fe._status===0||Fe._status===-1)&&(Fe._status=1,Fe._result=bt)},function(bt){(Fe._status===0||Fe._status===-1)&&(Fe._status=2,Fe._result=bt)}),Fe._status===-1&&(Fe._status=0,Fe._result=He)}if(Fe._status===1)return Fe._result.default;throw Fe._result}var Ze={current:null},Je={transition:null},We={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Je,ReactCurrentOwner:te};function Me(){throw Error("act(...) is not supported in production builds of React.")}return vs.Children={map:be,forEach:function(Fe,He,bt){be(Fe,function(){He.apply(this,arguments)},bt)},count:function(Fe){var He=0;return be(Fe,function(){He++}),He},toArray:function(Fe){return be(Fe,function(He){return He})||[]},only:function(Fe){if(!pe(Fe))throw Error("React.Children.only expected to receive a single React element child.");return Fe}},vs.Component=N,vs.Fragment=t,vs.Profiler=i,vs.PureComponent=H,vs.StrictMode=r,vs.Suspense=f,vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=We,vs.act=Me,vs.cloneElement=function(Fe,He,bt){if(Fe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Fe+".");var Yt=F({},Fe.props),gt=Fe.key,Lt=Fe.ref,Kt=Fe._owner;if(He!=null){if(He.ref!==void 0&&(Lt=He.ref,Kt=te.current),He.key!==void 0&&(gt=""+He.key),Fe.type&&Fe.type.defaultProps)var Ue=Fe.type.defaultProps;for(Pe in He)$.call(He,Pe)&&!G.hasOwnProperty(Pe)&&(Yt[Pe]=He[Pe]===void 0&&Ue!==void 0?Ue[Pe]:He[Pe])}var Pe=arguments.length-2;if(Pe===1)Yt.children=bt;else if(1<Pe){Ue=Array(Pe);for(var Be=0;Be<Pe;Be++)Ue[Be]=arguments[Be+2];Yt.children=Ue}return{$$typeof:n,type:Fe.type,key:gt,ref:Lt,props:Yt,_owner:Kt}},vs.createContext=function(Fe){return Fe={$$typeof:a,_currentValue:Fe,_currentValue2:Fe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Fe.Provider={$$typeof:s,_context:Fe},Fe.Consumer=Fe},vs.createElement=ie,vs.createFactory=function(Fe){var He=ie.bind(null,Fe);return He.type=Fe,He},vs.createRef=function(){return{current:null}},vs.forwardRef=function(Fe){return{$$typeof:o,render:Fe}},vs.isValidElement=pe,vs.lazy=function(Fe){return{$$typeof:x,_payload:{_status:-1,_result:Fe},_init:at}},vs.memo=function(Fe,He){return{$$typeof:y,type:Fe,compare:He===void 0?null:He}},vs.startTransition=function(Fe){var He=Je.transition;Je.transition={};try{Fe()}finally{Je.transition=He}},vs.unstable_act=Me,vs.useCallback=function(Fe,He){return Ze.current.useCallback(Fe,He)},vs.useContext=function(Fe){return Ze.current.useContext(Fe)},vs.useDebugValue=function(){},vs.useDeferredValue=function(Fe){return Ze.current.useDeferredValue(Fe)},vs.useEffect=function(Fe,He){return Ze.current.useEffect(Fe,He)},vs.useId=function(){return Ze.current.useId()},vs.useImperativeHandle=function(Fe,He,bt){return Ze.current.useImperativeHandle(Fe,He,bt)},vs.useInsertionEffect=function(Fe,He){return Ze.current.useInsertionEffect(Fe,He)},vs.useLayoutEffect=function(Fe,He){return Ze.current.useLayoutEffect(Fe,He)},vs.useMemo=function(Fe,He){return Ze.current.useMemo(Fe,He)},vs.useReducer=function(Fe,He,bt){return Ze.current.useReducer(Fe,He,bt)},vs.useRef=function(Fe){return Ze.current.useRef(Fe)},vs.useState=function(Fe){return Ze.current.useState(Fe)},vs.useSyncExternalStore=function(Fe,He,bt){return Ze.current.useSyncExternalStore(Fe,He,bt)},vs.useTransition=function(){return Ze.current.useTransition()},vs.version="18.3.1",vs}var S7;function ja(){return S7||(S7=1,s4.exports=xQ()),s4.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E7;function wQ(){if(E7)return Ov;E7=1;var n=ja(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,f,y){var x,B={},O=null,T=null;y!==void 0&&(O=""+y),f.key!==void 0&&(O=""+f.key),f.ref!==void 0&&(T=f.ref);for(x in f)r.call(f,x)&&!s.hasOwnProperty(x)&&(B[x]=f[x]);if(o&&o.defaultProps)for(x in f=o.defaultProps,f)B[x]===void 0&&(B[x]=f[x]);return{$$typeof:e,type:o,key:O,ref:T,props:B,_owner:i.current}}return Ov.Fragment=t,Ov.jsx=a,Ov.jsxs=a,Ov}var B7;function MQ(){return B7||(B7=1,o4.exports=wQ()),o4.exports}var ue=MQ(),ui=ja();const nr=Al(ui);var eL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},C6=nr.createContext&&nr.createContext(eL),SQ=["attr","size","title"];function EQ(n,e){if(n==null)return{};var t=BQ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function BQ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function p2(){return p2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},p2.apply(this,arguments)}function O7(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function m2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O7(Object(t),!0).forEach(function(r){OQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O7(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function OQ(n,e,t){return e=IQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IQ(n){var e=kQ(n,"string");return typeof e=="symbol"?e:e+""}function kQ(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tL(n){return n&&n.map((e,t)=>nr.createElement(e.tag,m2({key:t},e.attr),tL(e.child)))}function Hl(n){return e=>nr.createElement(TQ,p2({attr:m2({},n.attr)},e),tL(n.child))}function TQ(n){var e=t=>{var{attr:r,size:i,title:s}=n,a=EQ(n,SQ),o=i||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),nr.createElement("svg",p2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:f,style:m2(m2({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&nr.createElement("title",null,s),n.children)};return C6!==void 0?nr.createElement(C6.Consumer,null,t=>e(t)):e(eL)}var ab={},a4={exports:{}},hh={},l4={exports:{}},u4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I7;function PQ(){return I7||(I7=1,function(n){function e(Je,We){var Me=Je.length;Je.push(We);e:for(;0<Me;){var Fe=Me-1>>>1,He=Je[Fe];if(0<i(He,We))Je[Fe]=We,Je[Me]=He,Me=Fe;else break e}}function t(Je){return Je.length===0?null:Je[0]}function r(Je){if(Je.length===0)return null;var We=Je[0],Me=Je.pop();if(Me!==We){Je[0]=Me;e:for(var Fe=0,He=Je.length,bt=He>>>1;Fe<bt;){var Yt=2*(Fe+1)-1,gt=Je[Yt],Lt=Yt+1,Kt=Je[Lt];if(0>i(gt,Me))Lt<He&&0>i(Kt,gt)?(Je[Fe]=Kt,Je[Lt]=Me,Fe=Lt):(Je[Fe]=gt,Je[Yt]=Me,Fe=Yt);else if(Lt<He&&0>i(Kt,Me))Je[Fe]=Kt,Je[Lt]=Me,Fe=Lt;else break e}}return We}function i(Je,We){var Me=Je.sortIndex-We.sortIndex;return Me!==0?Me:Je.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var f=[],y=[],x=1,B=null,O=3,T=!1,F=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(Je){for(var We=t(y);We!==null;){if(We.callback===null)r(y);else if(We.startTime<=Je)r(y),We.sortIndex=We.expirationTime,e(f,We);else break;We=t(y)}}function ne(Je){if(j=!1,oe(Je),!F)if(t(f)!==null)F=!0,at($);else{var We=t(y);We!==null&&Ze(ne,We.startTime-Je)}}function $(Je,We){F=!1,j&&(j=!1,q(ie),ie=-1),T=!0;var Me=O;try{for(oe(We),B=t(f);B!==null&&(!(B.expirationTime>We)||Je&&!Ee());){var Fe=B.callback;if(typeof Fe=="function"){B.callback=null,O=B.priorityLevel;var He=Fe(B.expirationTime<=We);We=n.unstable_now(),typeof He=="function"?B.callback=He:B===t(f)&&r(f),oe(We)}else r(f);B=t(f)}if(B!==null)var bt=!0;else{var Yt=t(y);Yt!==null&&Ze(ne,Yt.startTime-We),bt=!1}return bt}finally{B=null,O=Me,T=!1}}var te=!1,G=null,ie=-1,he=5,pe=-1;function Ee(){return!(n.unstable_now()-pe<he)}function me(){if(G!==null){var Je=n.unstable_now();pe=Je;var We=!0;try{We=G(!0,Je)}finally{We?Se():(te=!1,G=null)}}else te=!1}var Se;if(typeof H=="function")Se=function(){H(me)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,be=De.port2;De.port1.onmessage=me,Se=function(){be.postMessage(null)}}else Se=function(){N(me,0)};function at(Je){G=Je,te||(te=!0,Se())}function Ze(Je,We){ie=N(function(){Je(n.unstable_now())},We)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Je){Je.callback=null},n.unstable_continueExecution=function(){F||T||(F=!0,at($))},n.unstable_forceFrameRate=function(Je){0>Je||125<Je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<Je?Math.floor(1e3/Je):5},n.unstable_getCurrentPriorityLevel=function(){return O},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(Je){switch(O){case 1:case 2:case 3:var We=3;break;default:We=O}var Me=O;O=We;try{return Je()}finally{O=Me}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Je,We){switch(Je){case 1:case 2:case 3:case 4:case 5:break;default:Je=3}var Me=O;O=Je;try{return We()}finally{O=Me}},n.unstable_scheduleCallback=function(Je,We,Me){var Fe=n.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Fe+Me:Fe):Me=Fe,Je){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=Me+He,Je={id:x++,callback:We,priorityLevel:Je,startTime:Me,expirationTime:He,sortIndex:-1},Me>Fe?(Je.sortIndex=Me,e(y,Je),t(f)===null&&Je===t(y)&&(j?(q(ie),ie=-1):j=!0,Ze(ne,Me-Fe))):(Je.sortIndex=He,e(f,Je),F||T||(F=!0,at($))),Je},n.unstable_shouldYield=Ee,n.unstable_wrapCallback=function(Je){var We=O;return function(){var Me=O;O=We;try{return Je.apply(this,arguments)}finally{O=Me}}}}(u4)),u4}var k7;function KQ(){return k7||(k7=1,l4.exports=PQ()),l4.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T7;function DQ(){if(T7)return hh;T7=1;var n=ja(),e=KQ();function t(m){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+m,R=1;R<arguments.length;R++)C+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+m+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,C){a(m,C),a(m+"Capture",C)}function a(m,C){for(i[m]=C,m=0;m<C.length;m++)r.add(C[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},B={};function O(m){return f.call(B,m)?!0:f.call(x,m)?!1:y.test(m)?B[m]=!0:(x[m]=!0,!1)}function T(m,C,R,Q){if(R!==null&&R.type===0)return!1;switch(typeof C){case"function":case"symbol":return!0;case"boolean":return Q?!1:R!==null?!R.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function F(m,C,R,Q){if(C===null||typeof C>"u"||T(m,C,R,Q))return!0;if(Q)return!1;if(R!==null)switch(R.type){case 3:return!C;case 4:return C===!1;case 5:return isNaN(C);case 6:return isNaN(C)||1>C}return!1}function j(m,C,R,Q,le,ge,tt){this.acceptsBooleans=C===2||C===3||C===4,this.attributeName=Q,this.attributeNamespace=le,this.mustUseProperty=R,this.propertyName=m,this.type=C,this.sanitizeURL=ge,this.removeEmptyString=tt}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){N[m]=new j(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var C=m[0];N[C]=new j(C,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){N[m]=new j(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){N[m]=new j(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){N[m]=new j(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){N[m]=new j(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){N[m]=new j(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){N[m]=new j(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){N[m]=new j(m,5,!1,m.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function H(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var C=m.replace(q,H);N[C]=new j(C,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var C=m.replace(q,H);N[C]=new j(C,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var C=m.replace(q,H);N[C]=new j(C,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){N[m]=new j(m,1,!1,m.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){N[m]=new j(m,1,!1,m.toLowerCase(),null,!0,!0)});function oe(m,C,R,Q){var le=N.hasOwnProperty(C)?N[C]:null;(le!==null?le.type!==0:Q||!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(F(C,R,le,Q)&&(R=null),Q||le===null?O(C)&&(R===null?m.removeAttribute(C):m.setAttribute(C,""+R)):le.mustUseProperty?m[le.propertyName]=R===null?le.type===3?!1:"":R:(C=le.attributeName,Q=le.attributeNamespace,R===null?m.removeAttribute(C):(le=le.type,R=le===3||le===4&&R===!0?"":""+R,Q?m.setAttributeNS(Q,C,R):m.setAttribute(C,R))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),te=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),Ze=Symbol.for("react.offscreen"),Je=Symbol.iterator;function We(m){return m===null||typeof m!="object"?null:(m=Je&&m[Je]||m["@@iterator"],typeof m=="function"?m:null)}var Me=Object.assign,Fe;function He(m){if(Fe===void 0)try{throw Error()}catch(R){var C=R.stack.trim().match(/\n( *(at )?)/);Fe=C&&C[1]||""}return`
`+Fe+m}var bt=!1;function Yt(m,C){if(!m||bt)return"";bt=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(xn){var Q=xn}Reflect.construct(m,[],C)}else{try{C.call()}catch(xn){Q=xn}m.call(C.prototype)}else{try{throw Error()}catch(xn){Q=xn}m()}}catch(xn){if(xn&&Q&&typeof xn.stack=="string"){for(var le=xn.stack.split(`
`),ge=Q.stack.split(`
`),tt=le.length-1,It=ge.length-1;1<=tt&&0<=It&&le[tt]!==ge[It];)It--;for(;1<=tt&&0<=It;tt--,It--)if(le[tt]!==ge[It]){if(tt!==1||It!==1)do if(tt--,It--,0>It||le[tt]!==ge[It]){var Wt=`
`+le[tt].replace(" at new "," at ");return m.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",m.displayName)),Wt}while(1<=tt&&0<=It);break}}}finally{bt=!1,Error.prepareStackTrace=R}return(m=m?m.displayName||m.name:"")?He(m):""}function gt(m){switch(m.tag){case 5:return He(m.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return m=Yt(m.type,!1),m;case 11:return m=Yt(m.type.render,!1),m;case 1:return m=Yt(m.type,!0),m;default:return""}}function Lt(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case G:return"Fragment";case te:return"Portal";case he:return"Profiler";case ie:return"StrictMode";case Se:return"Suspense";case De:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case Ee:return(m.displayName||"Context")+".Consumer";case pe:return(m._context.displayName||"Context")+".Provider";case me:var C=m.render;return m=m.displayName,m||(m=C.displayName||C.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case be:return C=m.displayName||null,C!==null?C:Lt(m.type)||"Memo";case at:C=m._payload,m=m._init;try{return Lt(m(C))}catch{}}return null}function Kt(m){var C=m.type;switch(m.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=C.render,m=m.displayName||m.name||"",C.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lt(C);case 8:return C===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function Ue(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Pe(m){var C=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(C==="checkbox"||C==="radio")}function Be(m){var C=Pe(m)?"checked":"value",R=Object.getOwnPropertyDescriptor(m.constructor.prototype,C),Q=""+m[C];if(!m.hasOwnProperty(C)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var le=R.get,ge=R.set;return Object.defineProperty(m,C,{configurable:!0,get:function(){return le.call(this)},set:function(tt){Q=""+tt,ge.call(this,tt)}}),Object.defineProperty(m,C,{enumerable:R.enumerable}),{getValue:function(){return Q},setValue:function(tt){Q=""+tt},stopTracking:function(){m._valueTracker=null,delete m[C]}}}}function it(m){m._valueTracker||(m._valueTracker=Be(m))}function _t(m){if(!m)return!1;var C=m._valueTracker;if(!C)return!0;var R=C.getValue(),Q="";return m&&(Q=Pe(m)?m.checked?"true":"false":m.value),m=Q,m!==R?(C.setValue(m),!0):!1}function ft(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Ut(m,C){var R=C.checked;return Me({},C,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:R??m._wrapperState.initialChecked})}function rn(m,C){var R=C.defaultValue==null?"":C.defaultValue,Q=C.checked!=null?C.checked:C.defaultChecked;R=Ue(C.value!=null?C.value:R),m._wrapperState={initialChecked:Q,initialValue:R,controlled:C.type==="checkbox"||C.type==="radio"?C.checked!=null:C.value!=null}}function Dt(m,C){C=C.checked,C!=null&&oe(m,"checked",C,!1)}function _n(m,C){Dt(m,C);var R=Ue(C.value),Q=C.type;if(R!=null)Q==="number"?(R===0&&m.value===""||m.value!=R)&&(m.value=""+R):m.value!==""+R&&(m.value=""+R);else if(Q==="submit"||Q==="reset"){m.removeAttribute("value");return}C.hasOwnProperty("value")?tn(m,C.type,R):C.hasOwnProperty("defaultValue")&&tn(m,C.type,Ue(C.defaultValue)),C.checked==null&&C.defaultChecked!=null&&(m.defaultChecked=!!C.defaultChecked)}function qn(m,C,R){if(C.hasOwnProperty("value")||C.hasOwnProperty("defaultValue")){var Q=C.type;if(!(Q!=="submit"&&Q!=="reset"||C.value!==void 0&&C.value!==null))return;C=""+m._wrapperState.initialValue,R||C===m.value||(m.value=C),m.defaultValue=C}R=m.name,R!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,R!==""&&(m.name=R)}function tn(m,C,R){(C!=="number"||ft(m.ownerDocument)!==m)&&(R==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+R&&(m.defaultValue=""+R))}var rr=Array.isArray;function Dn(m,C,R,Q){if(m=m.options,C){C={};for(var le=0;le<R.length;le++)C["$"+R[le]]=!0;for(R=0;R<m.length;R++)le=C.hasOwnProperty("$"+m[R].value),m[R].selected!==le&&(m[R].selected=le),le&&Q&&(m[R].defaultSelected=!0)}else{for(R=""+Ue(R),C=null,le=0;le<m.length;le++){if(m[le].value===R){m[le].selected=!0,Q&&(m[le].defaultSelected=!0);return}C!==null||m[le].disabled||(C=m[le])}C!==null&&(C.selected=!0)}}function pn(m,C){if(C.dangerouslySetInnerHTML!=null)throw Error(t(91));return Me({},C,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Zn(m,C){var R=C.value;if(R==null){if(R=C.children,C=C.defaultValue,R!=null){if(C!=null)throw Error(t(92));if(rr(R)){if(1<R.length)throw Error(t(93));R=R[0]}C=R}C==null&&(C=""),R=C}m._wrapperState={initialValue:Ue(R)}}function dr(m,C){var R=Ue(C.value),Q=Ue(C.defaultValue);R!=null&&(R=""+R,R!==m.value&&(m.value=R),C.defaultValue==null&&m.defaultValue!==R&&(m.defaultValue=R)),Q!=null&&(m.defaultValue=""+Q)}function vr(m){var C=m.textContent;C===m._wrapperState.initialValue&&C!==""&&C!==null&&(m.value=C)}function Jn(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(m,C){return m==null||m==="http://www.w3.org/1999/xhtml"?Jn(C):m==="http://www.w3.org/2000/svg"&&C==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ce,fe=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(C,R,Q,le){MSApp.execUnsafeLocalFunction(function(){return m(C,R,Q,le)})}:m}(function(m,C){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=C;else{for(ce=ce||document.createElement("div"),ce.innerHTML="<svg>"+C.valueOf().toString()+"</svg>",C=ce.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;C.firstChild;)m.appendChild(C.firstChild)}});function nt(m,C){if(C){var R=m.firstChild;if(R&&R===m.lastChild&&R.nodeType===3){R.nodeValue=C;return}}m.textContent=C}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(m){Ht.forEach(function(C){C=C+m.charAt(0).toUpperCase()+m.substring(1),St[C]=St[m]})});function sn(m,C,R){return C==null||typeof C=="boolean"||C===""?"":R||typeof C!="number"||C===0||St.hasOwnProperty(m)&&St[m]?(""+C).trim():C+"px"}function tr(m,C){m=m.style;for(var R in C)if(C.hasOwnProperty(R)){var Q=R.indexOf("--")===0,le=sn(R,C[R],Q);R==="float"&&(R="cssFloat"),Q?m.setProperty(R,le):m[R]=le}}var Oe=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function se(m,C){if(C){if(Oe[m]&&(C.children!=null||C.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(C.dangerouslySetInnerHTML!=null){if(C.children!=null)throw Error(t(60));if(typeof C.dangerouslySetInnerHTML!="object"||!("__html"in C.dangerouslySetInnerHTML))throw Error(t(61))}if(C.style!=null&&typeof C.style!="object")throw Error(t(62))}}function ve(m,C){if(m.indexOf("-")===-1)return typeof C.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p=null;function Ne(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ye=null,rt=null,ct=null;function dt(m){if(m=mi(m)){if(typeof Ye!="function")throw Error(t(280));var C=m.stateNode;C&&(C=os(C),Ye(m.stateNode,m.type,C))}}function qt(m){rt?ct?ct.push(m):ct=[m]:rt=m}function Gt(){if(rt){var m=rt,C=ct;if(ct=rt=null,dt(m),C)for(m=0;m<C.length;m++)dt(C[m])}}function jt(m,C){return m(C)}function xt(){}var Tn=!1;function On(m,C,R){if(Tn)return m(C,R);Tn=!0;try{return jt(m,C,R)}finally{Tn=!1,(rt!==null||ct!==null)&&(xt(),Gt())}}function gr(m,C){var R=m.stateNode;if(R===null)return null;var Q=os(R);if(Q===null)return null;R=Q[C];e:switch(C){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(m=m.type,Q=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!Q;break e;default:m=!1}if(m)return null;if(R&&typeof R!="function")throw Error(t(231,C,typeof R));return R}var Er=!1;if(o)try{var on={};Object.defineProperty(on,"passive",{get:function(){Er=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{Er=!1}function Rn(m,C,R,Q,le,ge,tt,It,Wt){var xn=Array.prototype.slice.call(arguments,3);try{C.apply(R,xn)}catch(Ar){this.onError(Ar)}}var er=!1,Xr=null,Ur=!1,Dr=null,ur={onError:function(m){er=!0,Xr=m}};function go(m,C,R,Q,le,ge,tt,It,Wt){er=!1,Xr=null,Rn.apply(ur,arguments)}function Sa(m,C,R,Q,le,ge,tt,It,Wt){if(go.apply(this,arguments),er){if(er){var xn=Xr;er=!1,Xr=null}else throw Error(t(198));Ur||(Ur=!0,Dr=xn)}}function Yi(m){var C=m,R=m;if(m.alternate)for(;C.return;)C=C.return;else{m=C;do C=m,C.flags&4098&&(R=C.return),m=C.return;while(m)}return C.tag===3?R:null}function Ci(m){if(m.tag===13){var C=m.memoizedState;if(C===null&&(m=m.alternate,m!==null&&(C=m.memoizedState)),C!==null)return C.dehydrated}return null}function oo(m){if(Yi(m)!==m)throw Error(t(188))}function Ro(m){var C=m.alternate;if(!C){if(C=Yi(m),C===null)throw Error(t(188));return C!==m?null:m}for(var R=m,Q=C;;){var le=R.return;if(le===null)break;var ge=le.alternate;if(ge===null){if(Q=le.return,Q!==null){R=Q;continue}break}if(le.child===ge.child){for(ge=le.child;ge;){if(ge===R)return oo(le),m;if(ge===Q)return oo(le),C;ge=ge.sibling}throw Error(t(188))}if(R.return!==Q.return)R=le,Q=ge;else{for(var tt=!1,It=le.child;It;){if(It===R){tt=!0,R=le,Q=ge;break}if(It===Q){tt=!0,Q=le,R=ge;break}It=It.sibling}if(!tt){for(It=ge.child;It;){if(It===R){tt=!0,R=ge,Q=le;break}if(It===Q){tt=!0,Q=ge,R=le;break}It=It.sibling}if(!tt)throw Error(t(189))}}if(R.alternate!==Q)throw Error(t(190))}if(R.tag!==3)throw Error(t(188));return R.stateNode.current===R?m:C}function Pi(m){return m=Ro(m),m!==null?Na(m):null}function Na(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var C=Na(m);if(C!==null)return C;m=m.sibling}return null}var Ea=e.unstable_scheduleCallback,rs=e.unstable_cancelCallback,aa=e.unstable_shouldYield,cl=e.unstable_requestPaint,Ao=e.unstable_now,Uu=e.unstable_getCurrentPriorityLevel,Zl=e.unstable_ImmediatePriority,so=e.unstable_UserBlockingPriority,Tr=e.unstable_NormalPriority,tl=e.unstable_LowPriority,Os=e.unstable_IdlePriority,ea=null,qe=null;function wt(m){if(qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(ea,m,void 0,(m.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:or,Yn=Math.log,hn=Math.LN2;function or(m){return m>>>=0,m===0?32:31-(Yn(m)/hn|0)|0}var Ki=64,yo=4194304;function _s(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Fs(m,C){var R=m.pendingLanes;if(R===0)return 0;var Q=0,le=m.suspendedLanes,ge=m.pingedLanes,tt=R&268435455;if(tt!==0){var It=tt&~le;It!==0?Q=_s(It):(ge&=tt,ge!==0&&(Q=_s(ge)))}else tt=R&~le,tt!==0?Q=_s(tt):ge!==0&&(Q=_s(ge));if(Q===0)return 0;if(C!==0&&C!==Q&&!(C&le)&&(le=Q&-Q,ge=C&-C,le>=ge||le===16&&(ge&4194240)!==0))return C;if(Q&4&&(Q|=R&16),C=m.entangledLanes,C!==0)for(m=m.entanglements,C&=Q;0<C;)R=31-vn(C),le=1<<R,Q|=m[R],C&=~le;return Q}function OA(m,C){switch(m){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ei(m,C){for(var R=m.suspendedLanes,Q=m.pingedLanes,le=m.expirationTimes,ge=m.pendingLanes;0<ge;){var tt=31-vn(ge),It=1<<tt,Wt=le[tt];Wt===-1?(!(It&R)||It&Q)&&(le[tt]=OA(It,C)):Wt<=C&&(m.expiredLanes|=It),ge&=~It}}function Mi(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function nl(){var m=Ki;return Ki<<=1,!(Ki&4194240)&&(Ki=64),m}function Ai(m){for(var C=[],R=0;31>R;R++)C.push(m);return C}function la(m,C,R){m.pendingLanes|=C,C!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,C=31-vn(C),m[C]=R}function rc(m,C){var R=m.pendingLanes&~C;m.pendingLanes=C,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=C,m.mutableReadLanes&=C,m.entangledLanes&=C,C=m.entanglements;var Q=m.eventTimes;for(m=m.expirationTimes;0<R;){var le=31-vn(R),ge=1<<le;C[le]=0,Q[le]=-1,m[le]=-1,R&=~ge}}function Ba(m,C){var R=m.entangledLanes|=C;for(m=m.entanglements;R;){var Q=31-vn(R),le=1<<Q;le&C|m[Q]&C&&(m[Q]|=C),R&=~le}}var Rr=0;function $i(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var vo,yu,Mo,Gs,Qs,zu=!1,bl=[],co=null,Oo=null,Zo=null,Oa=new Map,Ss=new Map,Ia=[],ta="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IA(m,C){switch(m){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":Oo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Oa.delete(C.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(C.pointerId)}}function ho(m,C,R,Q,le,ge){return m===null||m.nativeEvent!==ge?(m={blockedOn:C,domEventName:R,eventSystemFlags:Q,nativeEvent:ge,targetContainers:[le]},C!==null&&(C=mi(C),C!==null&&yu(C)),m):(m.eventSystemFlags|=Q,C=m.targetContainers,le!==null&&C.indexOf(le)===-1&&C.push(le),m)}function Xl(m,C,R,Q,le){switch(C){case"focusin":return co=ho(co,m,C,R,Q,le),!0;case"dragenter":return Oo=ho(Oo,m,C,R,Q,le),!0;case"mouseover":return Zo=ho(Zo,m,C,R,Q,le),!0;case"pointerover":var ge=le.pointerId;return Oa.set(ge,ho(Oa.get(ge)||null,m,C,R,Q,le)),!0;case"gotpointercapture":return ge=le.pointerId,Ss.set(ge,ho(Ss.get(ge)||null,m,C,R,Q,le)),!0}return!1}function zi(m){var C=ko(m.target);if(C!==null){var R=Yi(C);if(R!==null){if(C=R.tag,C===13){if(C=Ci(R),C!==null){m.blockedOn=C,Qs(m.priority,function(){Mo(R)});return}}else if(C===3&&R.stateNode.current.memoizedState.isDehydrated){m.blockedOn=R.tag===3?R.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Yr(m){if(m.blockedOn!==null)return!1;for(var C=m.targetContainers;0<C.length;){var R=ti(m.domEventName,m.eventSystemFlags,C[0],m.nativeEvent);if(R===null){R=m.nativeEvent;var Q=new R.constructor(R.type,R);p=Q,R.target.dispatchEvent(Q),p=null}else return C=mi(R),C!==null&&yu(C),m.blockedOn=R,!1;C.shift()}return!0}function Jl(m,C,R){Yr(m)&&R.delete(C)}function Vi(){zu=!1,co!==null&&Yr(co)&&(co=null),Oo!==null&&Yr(Oo)&&(Oo=null),Zo!==null&&Yr(Zo)&&(Zo=null),Oa.forEach(Jl),Ss.forEach(Jl)}function ao(m,C){m.blockedOn===C&&(m.blockedOn=null,zu||(zu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vi)))}function Di(m){function C(le){return ao(le,m)}if(0<bl.length){ao(bl[0],m);for(var R=1;R<bl.length;R++){var Q=bl[R];Q.blockedOn===m&&(Q.blockedOn=null)}}for(co!==null&&ao(co,m),Oo!==null&&ao(Oo,m),Zo!==null&&ao(Zo,m),Oa.forEach(C),Ss.forEach(C),R=0;R<Ia.length;R++)Q=Ia[R],Q.blockedOn===m&&(Q.blockedOn=null);for(;0<Ia.length&&(R=Ia[0],R.blockedOn===null);)zi(R),R.blockedOn===null&&Ia.shift()}var J=ne.ReactCurrentBatchConfig,Ie=!0;function st(m,C,R,Q){var le=Rr,ge=J.transition;J.transition=null;try{Rr=1,Kr(m,C,R,Q)}finally{Rr=le,J.transition=ge}}function $t(m,C,R,Q){var le=Rr,ge=J.transition;J.transition=null;try{Rr=4,Kr(m,C,R,Q)}finally{Rr=le,J.transition=ge}}function Kr(m,C,R,Q){if(Ie){var le=ti(m,C,R,Q);if(le===null)Ed(m,C,Q,$n,R),IA(m,Q);else if(Xl(le,m,C,R,Q))Q.stopPropagation();else if(IA(m,Q),C&4&&-1<ta.indexOf(m)){for(;le!==null;){var ge=mi(le);if(ge!==null&&vo(ge),ge=ti(m,C,R,Q),ge===null&&Ed(m,C,Q,$n,R),ge===le)break;le=ge}le!==null&&Q.stopPropagation()}else Ed(m,C,Q,null,R)}}var $n=null;function ti(m,C,R,Q){if($n=null,m=Ne(Q),m=ko(m),m!==null)if(C=Yi(m),C===null)m=null;else if(R=C.tag,R===13){if(m=Ci(C),m!==null)return m;m=null}else if(R===3){if(C.stateNode.current.memoizedState.isDehydrated)return C.tag===3?C.stateNode.containerInfo:null;m=null}else C!==m&&(m=null);return $n=m,null}function ci(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uu()){case Zl:return 1;case so:return 4;case Tr:case tl:return 16;case Os:return 536870912;default:return 16}default:return 16}}var Br=null,xr=null,ji=null;function Xi(){if(ji)return ji;var m,C=xr,R=C.length,Q,le="value"in Br?Br.value:Br.textContent,ge=le.length;for(m=0;m<R&&C[m]===le[m];m++);var tt=R-m;for(Q=1;Q<=tt&&C[R-Q]===le[ge-Q];Q++);return ji=le.slice(m,1<Q?1-Q:void 0)}function Ei(m){var C=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&C===13&&(m=13)):m=C,m===10&&(m=13),32<=m||m===13?m:0}function Wr(){return!0}function So(){return!1}function Ri(m){function C(R,Q,le,ge,tt){this._reactName=R,this._targetInst=le,this.type=Q,this.nativeEvent=ge,this.target=tt,this.currentTarget=null;for(var It in m)m.hasOwnProperty(It)&&(R=m[It],this[It]=R?R(ge):ge[It]);return this.isDefaultPrevented=(ge.defaultPrevented!=null?ge.defaultPrevented:ge.returnValue===!1)?Wr:So,this.isPropagationStopped=So,this}return Me(C.prototype,{preventDefault:function(){this.defaultPrevented=!0;var R=this.nativeEvent;R&&(R.preventDefault?R.preventDefault():typeof R.returnValue!="unknown"&&(R.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var R=this.nativeEvent;R&&(R.stopPropagation?R.stopPropagation():typeof R.cancelBubble!="unknown"&&(R.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),C}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=Ri(ds),Wa=Me({},ds,{view:0,detail:0}),vu=Ri(Wa),qs,$d,ga,xl=Me({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cf,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==ga&&(ga&&m.type==="mousemove"?(qs=m.screenX-ga.screenX,$d=m.screenY-ga.screenY):$d=qs=0,ga=m),qs)},movementY:function(m){return"movementY"in m?m.movementY:$d}}),Vc=Ri(xl),ju=Me({},xl,{dataTransfer:0}),Vd=Ri(ju),Cu=Me({},Wa,{relatedTarget:0}),Ls=Ri(Cu),kA=Me({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),gd=Ri(kA),Hd=Me({},ds,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Bc=Ri(Hd),Oc=Me({},ds,{data:0}),ep=Ri(Oc),yd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function na(m){var C=this.nativeEvent;return C.getModifierState?C.getModifierState(m):(m=ic[m])?!!C[m]:!1}function cf(){return na}var xh=Me({},Wa,{key:function(m){if(m.key){var C=yd[m.key]||m.key;if(C!=="Unidentified")return C}return m.type==="keypress"?(m=Ei(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Kp[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cf,charCode:function(m){return m.type==="keypress"?Ei(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Ei(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),vd=Ri(xh),df=Me({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=Ri(df),hf=Me({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cf}),oc=Ri(hf),wh=Me({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),ff=Ri(wh),Mh=Me({},xl,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Sh=Ri(Mh),wl=[9,13,27,32],Eh=o&&"CompositionEvent"in window,Nu=null;o&&"documentMode"in document&&(Nu=document.documentMode);var AA=o&&"TextEvent"in window&&!Nu,Hc=o&&(!Eh||Nu&&8<Nu&&11>=Nu),Bh=" ",Oh=!1;function Wu(m,C){switch(m){case"keyup":return wl.indexOf(C.keyCode)!==-1;case"keydown":return C.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cA(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Ul=!1;function Zc(m,C){switch(m){case"compositionend":return cA(C);case"keypress":return C.which!==32?null:(Oh=!0,Bh);case"textInput":return m=C.data,m===Bh&&Oh?null:m;default:return null}}function pf(m,C){if(Ul)return m==="compositionend"||!Eh&&Wu(m,C)?(m=Xi(),ji=xr=Br=null,Ul=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(C.ctrlKey||C.altKey||C.metaKey)||C.ctrlKey&&C.altKey){if(C.char&&1<C.char.length)return C.char;if(C.which)return String.fromCharCode(C.which)}return null;case"compositionend":return Hc&&C.locale!=="ko"?null:C.data;default:return null}}var mf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C==="input"?!!mf[m.type]:C==="textarea"}function _d(m,C,R,Q){qt(Q),C=td(C,"onChange"),0<C.length&&(R=new ma("onChange","change",null,R,Q),m.push({event:R,listeners:C}))}var ua=null,rl=null;function Xo(m){Dh(m,0)}function Ih(m){var C=ii(m);if(_t(C))return m}function vm(m,C){if(m==="change")return C}var bd=!1;if(o){var _u;if(o){var kh="oninput"in document;if(!kh){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),kh=typeof gf.oninput=="function"}_u=kh}else _u=!1;bd=_u&&(!document.documentMode||9<document.documentMode)}function Ic(){ua&&(ua.detachEvent("onpropertychange",Xd),rl=ua=null)}function Xd(m){if(m.propertyName==="value"&&Ih(rl)){var C=[];_d(C,rl,m,Ne(m)),On(Xo,C)}}function Th(m,C,R){m==="focusin"?(Ic(),ua=C,rl=R,ua.attachEvent("onpropertychange",Xd)):m==="focusout"&&Ic()}function Ph(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Ih(rl)}function eu(m,C){if(m==="click")return Ih(C)}function Jt(m,C){if(m==="input"||m==="change")return Ih(C)}function En(m,C){return m===C&&(m!==0||1/m===1/C)||m!==m&&C!==C}var ln=typeof Object.is=="function"?Object.is:En;function Fr(m,C){if(ln(m,C))return!0;if(typeof m!="object"||m===null||typeof C!="object"||C===null)return!1;var R=Object.keys(m),Q=Object.keys(C);if(R.length!==Q.length)return!1;for(Q=0;Q<R.length;Q++){var le=R[Q];if(!f.call(C,le)||!ln(m[le],C[le]))return!1}return!0}function Bi(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function fo(m,C){var R=Bi(m);m=0;for(var Q;R;){if(R.nodeType===3){if(Q=m+R.textContent.length,m<=C&&Q>=C)return{node:R,offset:C-m};m=Q}e:{for(;R;){if(R.nextSibling){R=R.nextSibling;break e}R=R.parentNode}R=void 0}R=Bi(R)}}function ra(m,C){return m&&C?m===C?!0:m&&m.nodeType===3?!1:C&&C.nodeType===3?ra(m,C.parentNode):"contains"in m?m.contains(C):m.compareDocumentPosition?!!(m.compareDocumentPosition(C)&16):!1:!1}function is(){for(var m=window,C=ft();C instanceof m.HTMLIFrameElement;){try{var R=typeof C.contentWindow.location.href=="string"}catch{R=!1}if(R)m=C.contentWindow;else break;C=ft(m.document)}return C}function TA(m){var C=m&&m.nodeName&&m.nodeName.toLowerCase();return C&&(C==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||C==="textarea"||m.contentEditable==="true")}function yf(m){var C=is(),R=m.focusedElem,Q=m.selectionRange;if(C!==R&&R&&R.ownerDocument&&ra(R.ownerDocument.documentElement,R)){if(Q!==null&&TA(R)){if(C=Q.start,m=Q.end,m===void 0&&(m=C),"selectionStart"in R)R.selectionStart=C,R.selectionEnd=Math.min(m,R.value.length);else if(m=(C=R.ownerDocument||document)&&C.defaultView||window,m.getSelection){m=m.getSelection();var le=R.textContent.length,ge=Math.min(Q.start,le);Q=Q.end===void 0?ge:Math.min(Q.end,le),!m.extend&&ge>Q&&(le=Q,Q=ge,ge=le),le=fo(R,ge);var tt=fo(R,Q);le&&tt&&(m.rangeCount!==1||m.anchorNode!==le.node||m.anchorOffset!==le.offset||m.focusNode!==tt.node||m.focusOffset!==tt.offset)&&(C=C.createRange(),C.setStart(le.node,le.offset),m.removeAllRanges(),ge>Q?(m.addRange(C),m.extend(tt.node,tt.offset)):(C.setEnd(tt.node,tt.offset),m.addRange(C)))}}for(C=[],m=R;m=m.parentNode;)m.nodeType===1&&C.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<C.length;R++)m=C[R],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Gu=o&&"documentMode"in document&&11>=document.documentMode,bu=null,xu=null,zl=null,Qu=!1;function lo(m,C,R){var Q=R.window===R?R.document:R.nodeType===9?R:R.ownerDocument;Qu||bu==null||bu!==ft(Q)||(Q=bu,"selectionStart"in Q&&TA(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),zl&&Fr(zl,Q)||(zl=Q,Q=td(xu,"onSelect"),0<Q.length&&(C=new ma("onSelect","select",null,C,R),m.push({event:C,listeners:Q}),C.target=bu)))}function Io(m,C){var R={};return R[m.toLowerCase()]=C.toLowerCase(),R["Webkit"+m]="webkit"+C,R["Moz"+m]="moz"+C,R}var xd={animationend:Io("Animation","AnimationEnd"),animationiteration:Io("Animation","AnimationIteration"),animationstart:Io("Animation","AnimationStart"),transitionend:Io("Transition","TransitionEnd")},wd={},tu={};o&&(tu=document.createElement("div").style,"AnimationEvent"in window||(delete xd.animationend.animation,delete xd.animationiteration.animation,delete xd.animationstart.animation),"TransitionEvent"in window||delete xd.transitionend.transition);function dA(m){if(wd[m])return wd[m];if(!xd[m])return m;var C=xd[m],R;for(R in C)if(C.hasOwnProperty(R)&&R in tu)return wd[m]=C[R];return m}var jl=dA("animationend"),sc=dA("animationiteration"),hA=dA("animationstart"),nu=dA("transitionend"),Xc=new Map,Md="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ga(m,C){Xc.set(m,C),s(C,[m])}for(var Jc=0;Jc<Md.length;Jc++){var Sd=Md[Jc],ac=Sd.toLowerCase(),Kh=Sd[0].toUpperCase()+Sd.slice(1);Ga(ac,"on"+Kh)}Ga(jl,"onAnimationEnd"),Ga(sc,"onAnimationIteration"),Ga(hA,"onAnimationStart"),Ga("dblclick","onDoubleClick"),Ga("focusin","onFocus"),Ga("focusout","onBlur"),Ga(nu,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ed=new Set("cancel close invalid load scroll toggle".split(" ").concat(qu));function lc(m,C,R){var Q=m.type||"unknown-event";m.currentTarget=R,Sa(Q,C,void 0,m),m.currentTarget=null}function Dh(m,C){C=(C&4)!==0;for(var R=0;R<m.length;R++){var Q=m[R],le=Q.event;Q=Q.listeners;e:{var ge=void 0;if(C)for(var tt=Q.length-1;0<=tt;tt--){var It=Q[tt],Wt=It.instance,xn=It.currentTarget;if(It=It.listener,Wt!==ge&&le.isPropagationStopped())break e;lc(le,It,xn),ge=Wt}else for(tt=0;tt<Q.length;tt++){if(It=Q[tt],Wt=It.instance,xn=It.currentTarget,It=It.listener,Wt!==ge&&le.isPropagationStopped())break e;lc(le,It,xn),ge=Wt}}}if(Ur)throw m=Dr,Ur=!1,Dr=null,m}function hs(m,C){var R=C[Rh];R===void 0&&(R=C[Rh]=new Set);var Q=m+"__bubble";R.has(Q)||(Jd(C,m,2,!1),R.add(Q))}function kc(m,C,R){var Q=0;C&&(Q|=4),Jd(R,m,Q,C)}var PA="_reactListening"+Math.random().toString(36).slice(2);function Yu(m){if(!m[PA]){m[PA]=!0,r.forEach(function(R){R!=="selectionchange"&&(ed.has(R)||kc(R,!1,m),kc(R,!0,m))});var C=m.nodeType===9?m:m.ownerDocument;C===null||C[PA]||(C[PA]=!0,kc("selectionchange",!1,C))}}function Jd(m,C,R,Q){switch(ci(C)){case 1:var le=st;break;case 4:le=$t;break;default:le=Kr}R=le.bind(null,C,R,m),le=void 0,!Er||C!=="touchstart"&&C!=="touchmove"&&C!=="wheel"||(le=!0),Q?le!==void 0?m.addEventListener(C,R,{capture:!0,passive:le}):m.addEventListener(C,R,!0):le!==void 0?m.addEventListener(C,R,{passive:le}):m.addEventListener(C,R,!1)}function Ed(m,C,R,Q,le){var ge=Q;if(!(C&1)&&!(C&2)&&Q!==null)e:for(;;){if(Q===null)return;var tt=Q.tag;if(tt===3||tt===4){var It=Q.stateNode.containerInfo;if(It===le||It.nodeType===8&&It.parentNode===le)break;if(tt===4)for(tt=Q.return;tt!==null;){var Wt=tt.tag;if((Wt===3||Wt===4)&&(Wt=tt.stateNode.containerInfo,Wt===le||Wt.nodeType===8&&Wt.parentNode===le))return;tt=tt.return}for(;It!==null;){if(tt=ko(It),tt===null)return;if(Wt=tt.tag,Wt===5||Wt===6){Q=ge=tt;continue e}It=It.parentNode}}Q=Q.return}On(function(){var xn=ge,Ar=Ne(R),Cr=[];e:{var ir=Xc.get(m);if(ir!==void 0){var qr=ma,oi=m;switch(m){case"keypress":if(Ei(R)===0)break e;case"keydown":case"keyup":qr=vd;break;case"focusin":oi="focus",qr=Ls;break;case"focusout":oi="blur",qr=Ls;break;case"beforeblur":case"afterblur":qr=Ls;break;case"click":if(R.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qr=Vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qr=Vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qr=oc;break;case jl:case sc:case hA:qr=gd;break;case nu:qr=ff;break;case"scroll":qr=vu;break;case"wheel":qr=Sh;break;case"copy":case"cut":case"paste":qr=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qr=Cd}var ai=(C&4)!==0,vl=!ai&&m==="scroll",cn=ai?ir!==null?ir+"Capture":null:ir;ai=[];for(var Xt=xn,dn;Xt!==null;){dn=Xt;var _r=dn.stateNode;if(dn.tag===5&&_r!==null&&(dn=_r,cn!==null&&(_r=gr(Xt,cn),_r!=null&&ai.push(uc(Xt,_r,dn)))),vl)break;Xt=Xt.return}0<ai.length&&(ir=new qr(ir,oi,null,R,Ar),Cr.push({event:ir,listeners:ai}))}}if(!(C&7)){e:{if(ir=m==="mouseover"||m==="pointerover",qr=m==="mouseout"||m==="pointerout",ir&&R!==p&&(oi=R.relatedTarget||R.fromElement)&&(ko(oi)||oi[wu]))break e;if((qr||ir)&&(ir=Ar.window===Ar?Ar:(ir=Ar.ownerDocument)?ir.defaultView||ir.parentWindow:window,qr?(oi=R.relatedTarget||R.toElement,qr=xn,oi=oi?ko(oi):null,oi!==null&&(vl=Yi(oi),oi!==vl||oi.tag!==5&&oi.tag!==6)&&(oi=null)):(qr=null,oi=xn),qr!==oi)){if(ai=Vc,_r="onMouseLeave",cn="onMouseEnter",Xt="mouse",(m==="pointerout"||m==="pointerover")&&(ai=Cd,_r="onPointerLeave",cn="onPointerEnter",Xt="pointer"),vl=qr==null?ir:ii(qr),dn=oi==null?ir:ii(oi),ir=new ai(_r,Xt+"leave",qr,R,Ar),ir.target=vl,ir.relatedTarget=dn,_r=null,ko(Ar)===xn&&(ai=new ai(cn,Xt+"enter",oi,R,Ar),ai.target=dn,ai.relatedTarget=vl,_r=ai),vl=_r,qr&&oi)t:{for(ai=qr,cn=oi,Xt=0,dn=ai;dn;dn=KA(dn))Xt++;for(dn=0,_r=cn;_r;_r=KA(_r))dn++;for(;0<Xt-dn;)ai=KA(ai),Xt--;for(;0<dn-Xt;)cn=KA(cn),dn--;for(;Xt--;){if(ai===cn||cn!==null&&ai===cn.alternate)break t;ai=KA(ai),cn=KA(cn)}ai=null}else ai=null;qr!==null&&Oi(Cr,ir,qr,ai,!1),oi!==null&&vl!==null&&Oi(Cr,vl,oi,ai,!0)}}e:{if(ir=xn?ii(xn):window,qr=ir.nodeName&&ir.nodeName.toLowerCase(),qr==="select"||qr==="input"&&ir.type==="file")var si=vm;else if(Zd(ir))if(bd)si=Jt;else{si=Ph;var Ii=Th}else(qr=ir.nodeName)&&qr.toLowerCase()==="input"&&(ir.type==="checkbox"||ir.type==="radio")&&(si=eu);if(si&&(si=si(m,xn))){_d(Cr,si,R,Ar);break e}Ii&&Ii(m,ir,xn),m==="focusout"&&(Ii=ir._wrapperState)&&Ii.controlled&&ir.type==="number"&&tn(ir,"number",ir.value)}switch(Ii=xn?ii(xn):window,m){case"focusin":(Zd(Ii)||Ii.contentEditable==="true")&&(bu=Ii,xu=xn,zl=null);break;case"focusout":zl=xu=bu=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,lo(Cr,R,Ar);break;case"selectionchange":if(Gu)break;case"keydown":case"keyup":lo(Cr,R,Ar)}var ki;if(Eh)e:{switch(m){case"compositionstart":var Ni="onCompositionStart";break e;case"compositionend":Ni="onCompositionEnd";break e;case"compositionupdate":Ni="onCompositionUpdate";break e}Ni=void 0}else Ul?Wu(m,R)&&(Ni="onCompositionEnd"):m==="keydown"&&R.keyCode===229&&(Ni="onCompositionStart");Ni&&(Hc&&R.locale!=="ko"&&(Ul||Ni!=="onCompositionStart"?Ni==="onCompositionEnd"&&Ul&&(ki=Xi()):(Br=Ar,xr="value"in Br?Br.value:Br.textContent,Ul=!0)),Ii=td(xn,Ni),0<Ii.length&&(Ni=new ep(Ni,m,null,R,Ar),Cr.push({event:Ni,listeners:Ii}),ki?Ni.data=ki:(ki=cA(R),ki!==null&&(Ni.data=ki)))),(ki=AA?Zc(m,R):pf(m,R))&&(xn=td(xn,"onBeforeInput"),0<xn.length&&(Ar=new ep("onBeforeInput","beforeinput",null,R,Ar),Cr.push({event:Ar,listeners:xn}),Ar.data=ki))}Dh(Cr,C)})}function uc(m,C,R){return{instance:m,listener:C,currentTarget:R}}function td(m,C){for(var R=C+"Capture",Q=[];m!==null;){var le=m,ge=le.stateNode;le.tag===5&&ge!==null&&(le=ge,ge=gr(m,R),ge!=null&&Q.unshift(uc(m,ge,le)),ge=gr(m,C),ge!=null&&Q.push(uc(m,ge,le))),m=m.return}return Q}function KA(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function Oi(m,C,R,Q,le){for(var ge=C._reactName,tt=[];R!==null&&R!==Q;){var It=R,Wt=It.alternate,xn=It.stateNode;if(Wt!==null&&Wt===Q)break;It.tag===5&&xn!==null&&(It=xn,le?(Wt=gr(R,ge),Wt!=null&&tt.unshift(uc(R,Wt,It))):le||(Wt=gr(R,ge),Wt!=null&&tt.push(uc(R,Wt,It)))),R=R.return}tt.length!==0&&m.push({event:C,listeners:tt})}var Us=/\r\n?/g,fA=/\u0000|\uFFFD/g;function Bd(m){return(typeof m=="string"?m:""+m).replace(Us,`
`).replace(fA,"")}function nd(m,C,R){if(C=Bd(C),Bd(m)!==C&&R)throw Error(t(425))}function Tc(){}var DA=null,dl=null;function pA(m,C){return m==="textarea"||m==="noscript"||typeof C.children=="string"||typeof C.children=="number"||typeof C.dangerouslySetInnerHTML=="object"&&C.dangerouslySetInnerHTML!==null&&C.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,Ac=typeof clearTimeout=="function"?clearTimeout:void 0,$u=typeof Promise=="function"?Promise:void 0,Od=typeof queueMicrotask=="function"?queueMicrotask:typeof $u<"u"?function(m){return $u.resolve(null).then(m).catch(rd)}:hl;function rd(m){setTimeout(function(){throw m})}function RA(m,C){var R=C,Q=0;do{var le=R.nextSibling;if(m.removeChild(R),le&&le.nodeType===8)if(R=le.data,R==="/$"){if(Q===0){m.removeChild(le),Di(C);return}Q--}else R!=="$"&&R!=="$?"&&R!=="$!"||Q++;R=le}while(R);Di(C)}function cc(m){for(;m!=null;m=m.nextSibling){var C=m.nodeType;if(C===1||C===3)break;if(C===8){if(C=m.data,C==="$"||C==="$!"||C==="$?")break;if(C==="/$")return null}}return m}function Vu(m){m=m.previousSibling;for(var C=0;m;){if(m.nodeType===8){var R=m.data;if(R==="$"||R==="$!"||R==="$?"){if(C===0)return m;C--}else R==="/$"&&C++}m=m.previousSibling}return null}var Hu=Math.random().toString(36).slice(2),FA="__reactFiber$"+Hu,Pc="__reactProps$"+Hu,wu="__reactContainer$"+Hu,Rh="__reactEvents$"+Hu,ot="__reactListeners$"+Hu,LA="__reactHandles$"+Hu;function ko(m){var C=m[FA];if(C)return C;for(var R=m.parentNode;R;){if(C=R[wu]||R[FA]){if(R=C.alternate,C.child!==null||R!==null&&R.child!==null)for(m=Vu(m);m!==null;){if(R=m[FA])return R;m=Vu(m)}return C}m=R,R=m.parentNode}return null}function mi(m){return m=m[FA]||m[wu],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function ii(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function os(m){return m[Pc]||null}var mA=[],eh=-1;function ka(m){return{current:m}}function zs(m){0>eh||(m.current=mA[eh],mA[eh]=null,eh--)}function Es(m,C){eh++,mA[eh]=m.current,m.current=C}var Kc={},ia=ka(Kc),Aa=ka(!1),hr=Kc;function Id(m,C){var R=m.type.contextTypes;if(!R)return Kc;var Q=m.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===C)return Q.__reactInternalMemoizedMaskedChildContext;var le={},ge;for(ge in R)le[ge]=C[ge];return Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=C,m.__reactInternalMemoizedMaskedChildContext=le),le}function ya(m){return m=m.childContextTypes,m!=null}function kd(){zs(Aa),zs(ia)}function Td(m,C,R){if(ia.current!==Kc)throw Error(t(168));Es(ia,C),Es(Aa,R)}function dc(m,C,R){var Q=m.stateNode;if(C=C.childContextTypes,typeof Q.getChildContext!="function")return R;Q=Q.getChildContext();for(var le in Q)if(!(le in C))throw Error(t(108,Kt(m)||"Unknown",le));return Me({},R,Q)}function ru(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Kc,hr=ia.current,Es(ia,m),Es(Aa,Aa.current),!0}function Ji(m,C,R){var Q=m.stateNode;if(!Q)throw Error(t(169));R?(m=dc(m,C,hr),Q.__reactInternalMemoizedMergedChildContext=m,zs(Aa),zs(ia),Es(ia,m)):zs(Aa),Es(Aa,R)}var fl=null,Fh=!1,Dc=!1;function UA(m){fl===null?fl=[m]:fl.push(m)}function Rc(m){Fh=!0,UA(m)}function zA(){if(!Dc&&fl!==null){Dc=!0;var m=0,C=Rr;try{var R=fl;for(Rr=1;m<R.length;m++){var Q=R[m];do Q=Q(!0);while(Q!==null)}fl=null,Fh=!1}catch(le){throw fl!==null&&(fl=fl.slice(m+1)),Ea(Zl,zA),le}finally{Rr=C,Dc=!1}}return null}var hc=[],bs=0,Fo=null,iu=0,Qa=[],qa=0,Nl=null,Lo=1,Mu="";function fc(m,C){hc[bs++]=iu,hc[bs++]=Fo,Fo=m,iu=C}function th(m,C,R){Qa[qa++]=Lo,Qa[qa++]=Mu,Qa[qa++]=Nl,Nl=m;var Q=Lo;m=Mu;var le=32-vn(Q)-1;Q&=~(1<<le),R+=1;var ge=32-vn(C)+le;if(30<ge){var tt=le-le%5;ge=(Q&(1<<tt)-1).toString(32),Q>>=tt,le-=tt,Lo=1<<32-vn(C)+le|R<<le|Q,Mu=ge+m}else Lo=1<<ge|R<<le|Q,Mu=m}function jA(m){m.return!==null&&(fc(m,1),th(m,1,0))}function pc(m){for(;m===Fo;)Fo=hc[--bs],hc[bs]=null,iu=hc[--bs],hc[bs]=null;for(;m===Nl;)Nl=Qa[--qa],Qa[qa]=null,Mu=Qa[--qa],Qa[qa]=null,Lo=Qa[--qa],Qa[qa]=null}var Ta=null,xs=null,fs=!1,Pr=null;function Hr(m,C){var R=xA(5,null,null,0);R.elementType="DELETED",R.stateNode=C,R.return=m,C=m.deletions,C===null?(m.deletions=[R],m.flags|=16):C.push(R)}function NA(m,C){switch(m.tag){case 5:var R=m.type;return C=C.nodeType!==1||R.toLowerCase()!==C.nodeName.toLowerCase()?null:C,C!==null?(m.stateNode=C,Ta=m,xs=cc(C.firstChild),!0):!1;case 6:return C=m.pendingProps===""||C.nodeType!==3?null:C,C!==null?(m.stateNode=C,Ta=m,xs=null,!0):!1;case 13:return C=C.nodeType!==8?null:C,C!==null?(R=Nl!==null?{id:Lo,overflow:Mu}:null,m.memoizedState={dehydrated:C,treeContext:R,retryLane:1073741824},R=xA(18,null,null,0),R.stateNode=C,R.return=m,m.child=R,Ta=m,xs=null,!0):!1;default:return!1}}function Su(m){return(m.mode&1)!==0&&(m.flags&128)===0}function pl(m){if(fs){var C=xs;if(C){var R=C;if(!NA(m,C)){if(Su(m))throw Error(t(418));C=cc(R.nextSibling);var Q=Ta;C&&NA(m,C)?Hr(Q,R):(m.flags=m.flags&-4097|2,fs=!1,Ta=m)}}else{if(Su(m))throw Error(t(418));m.flags=m.flags&-4097|2,fs=!1,Ta=m}}}function ou(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Ta=m}function Pd(m){if(m!==Ta)return!1;if(!fs)return ou(m),fs=!0,!1;var C;if((C=m.tag!==3)&&!(C=m.tag!==5)&&(C=m.type,C=C!=="head"&&C!=="body"&&!pA(m.type,m.memoizedProps)),C&&(C=xs)){if(Su(m))throw gA(),Error(t(418));for(;C;)Hr(m,C),C=cc(C.nextSibling)}if(ou(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,C=0;m;){if(m.nodeType===8){var R=m.data;if(R==="/$"){if(C===0){xs=cc(m.nextSibling);break e}C--}else R!=="$"&&R!=="$!"&&R!=="$?"||C++}m=m.nextSibling}xs=null}}else xs=Ta?cc(m.stateNode.nextSibling):null;return!0}function gA(){for(var m=xs;m;)m=cc(m.nextSibling)}function mc(){xs=Ta=null,fs=!1}function Ml(m){Pr===null?Pr=[m]:Pr.push(m)}var ys=ne.ReactCurrentBatchConfig;function Ys(m,C,R){if(m=R.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(t(309));var Q=R.stateNode}if(!Q)throw Error(t(147,m));var le=Q,ge=""+m;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===ge?C.ref:(C=function(tt){var It=le.refs;tt===null?delete It[ge]:It[ge]=tt},C._stringRef=ge,C)}if(typeof m!="string")throw Error(t(284));if(!R._owner)throw Error(t(290,m))}return m}function id(m,C){throw m=Object.prototype.toString.call(C),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":m))}function Kd(m){var C=m._init;return C(m._payload)}function yA(m){function C(cn,Xt){if(m){var dn=cn.deletions;dn===null?(cn.deletions=[Xt],cn.flags|=16):dn.push(Xt)}}function R(cn,Xt){if(!m)return null;for(;Xt!==null;)C(cn,Xt),Xt=Xt.sibling;return null}function Q(cn,Xt){for(cn=new Map;Xt!==null;)Xt.key!==null?cn.set(Xt.key,Xt):cn.set(Xt.index,Xt),Xt=Xt.sibling;return cn}function le(cn,Xt){return cn=_c(cn,Xt),cn.index=0,cn.sibling=null,cn}function ge(cn,Xt,dn){return cn.index=dn,m?(dn=cn.alternate,dn!==null?(dn=dn.index,dn<Xt?(cn.flags|=2,Xt):dn):(cn.flags|=2,Xt)):(cn.flags|=1048576,Xt)}function tt(cn){return m&&cn.alternate===null&&(cn.flags|=2),cn}function It(cn,Xt,dn,_r){return Xt===null||Xt.tag!==6?(Xt=u0(dn,cn.mode,_r),Xt.return=cn,Xt):(Xt=le(Xt,dn),Xt.return=cn,Xt)}function Wt(cn,Xt,dn,_r){var si=dn.type;return si===G?Ar(cn,Xt,dn.props.children,_r,dn.key):Xt!==null&&(Xt.elementType===si||typeof si=="object"&&si!==null&&si.$$typeof===at&&Kd(si)===Xt.type)?(_r=le(Xt,dn.props),_r.ref=Ys(cn,Xt,dn),_r.return=cn,_r):(_r=l0(dn.type,dn.key,dn.props,null,cn.mode,_r),_r.ref=Ys(cn,Xt,dn),_r.return=cn,_r)}function xn(cn,Xt,dn,_r){return Xt===null||Xt.tag!==4||Xt.stateNode.containerInfo!==dn.containerInfo||Xt.stateNode.implementation!==dn.implementation?(Xt=Ag(dn,cn.mode,_r),Xt.return=cn,Xt):(Xt=le(Xt,dn.children||[]),Xt.return=cn,Xt)}function Ar(cn,Xt,dn,_r,si){return Xt===null||Xt.tag!==7?(Xt=Ap(dn,cn.mode,_r,si),Xt.return=cn,Xt):(Xt=le(Xt,dn),Xt.return=cn,Xt)}function Cr(cn,Xt,dn){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Xt=u0(""+Xt,cn.mode,dn),Xt.return=cn,Xt;if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case $:return dn=l0(Xt.type,Xt.key,Xt.props,null,cn.mode,dn),dn.ref=Ys(cn,null,Xt),dn.return=cn,dn;case te:return Xt=Ag(Xt,cn.mode,dn),Xt.return=cn,Xt;case at:var _r=Xt._init;return Cr(cn,_r(Xt._payload),dn)}if(rr(Xt)||We(Xt))return Xt=Ap(Xt,cn.mode,dn,null),Xt.return=cn,Xt;id(cn,Xt)}return null}function ir(cn,Xt,dn,_r){var si=Xt!==null?Xt.key:null;if(typeof dn=="string"&&dn!==""||typeof dn=="number")return si!==null?null:It(cn,Xt,""+dn,_r);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case $:return dn.key===si?Wt(cn,Xt,dn,_r):null;case te:return dn.key===si?xn(cn,Xt,dn,_r):null;case at:return si=dn._init,ir(cn,Xt,si(dn._payload),_r)}if(rr(dn)||We(dn))return si!==null?null:Ar(cn,Xt,dn,_r,null);id(cn,dn)}return null}function qr(cn,Xt,dn,_r,si){if(typeof _r=="string"&&_r!==""||typeof _r=="number")return cn=cn.get(dn)||null,It(Xt,cn,""+_r,si);if(typeof _r=="object"&&_r!==null){switch(_r.$$typeof){case $:return cn=cn.get(_r.key===null?dn:_r.key)||null,Wt(Xt,cn,_r,si);case te:return cn=cn.get(_r.key===null?dn:_r.key)||null,xn(Xt,cn,_r,si);case at:var Ii=_r._init;return qr(cn,Xt,dn,Ii(_r._payload),si)}if(rr(_r)||We(_r))return cn=cn.get(dn)||null,Ar(Xt,cn,_r,si,null);id(Xt,_r)}return null}function oi(cn,Xt,dn,_r){for(var si=null,Ii=null,ki=Xt,Ni=Xt=0,Tl=null;ki!==null&&Ni<dn.length;Ni++){ki.index>Ni?(Tl=ki,ki=null):Tl=ki.sibling;var ws=ir(cn,ki,dn[Ni],_r);if(ws===null){ki===null&&(ki=Tl);break}m&&ki&&ws.alternate===null&&C(cn,ki),Xt=ge(ws,Xt,Ni),Ii===null?si=ws:Ii.sibling=ws,Ii=ws,ki=Tl}if(Ni===dn.length)return R(cn,ki),fs&&fc(cn,Ni),si;if(ki===null){for(;Ni<dn.length;Ni++)ki=Cr(cn,dn[Ni],_r),ki!==null&&(Xt=ge(ki,Xt,Ni),Ii===null?si=ki:Ii.sibling=ki,Ii=ki);return fs&&fc(cn,Ni),si}for(ki=Q(cn,ki);Ni<dn.length;Ni++)Tl=qr(ki,cn,Ni,dn[Ni],_r),Tl!==null&&(m&&Tl.alternate!==null&&ki.delete(Tl.key===null?Ni:Tl.key),Xt=ge(Tl,Xt,Ni),Ii===null?si=Tl:Ii.sibling=Tl,Ii=Tl);return m&&ki.forEach(function(ld){return C(cn,ld)}),fs&&fc(cn,Ni),si}function ai(cn,Xt,dn,_r){var si=We(dn);if(typeof si!="function")throw Error(t(150));if(dn=si.call(dn),dn==null)throw Error(t(151));for(var Ii=si=null,ki=Xt,Ni=Xt=0,Tl=null,ws=dn.next();ki!==null&&!ws.done;Ni++,ws=dn.next()){ki.index>Ni?(Tl=ki,ki=null):Tl=ki.sibling;var ld=ir(cn,ki,ws.value,_r);if(ld===null){ki===null&&(ki=Tl);break}m&&ki&&ld.alternate===null&&C(cn,ki),Xt=ge(ld,Xt,Ni),Ii===null?si=ld:Ii.sibling=ld,Ii=ld,ki=Tl}if(ws.done)return R(cn,ki),fs&&fc(cn,Ni),si;if(ki===null){for(;!ws.done;Ni++,ws=dn.next())ws=Cr(cn,ws.value,_r),ws!==null&&(Xt=ge(ws,Xt,Ni),Ii===null?si=ws:Ii.sibling=ws,Ii=ws);return fs&&fc(cn,Ni),si}for(ki=Q(cn,ki);!ws.done;Ni++,ws=dn.next())ws=qr(ki,cn,Ni,ws.value,_r),ws!==null&&(m&&ws.alternate!==null&&ki.delete(ws.key===null?Ni:ws.key),Xt=ge(ws,Xt,Ni),Ii===null?si=ws:Ii.sibling=ws,Ii=ws);return m&&ki.forEach(function(m1){return C(cn,m1)}),fs&&fc(cn,Ni),si}function vl(cn,Xt,dn,_r){if(typeof dn=="object"&&dn!==null&&dn.type===G&&dn.key===null&&(dn=dn.props.children),typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case $:e:{for(var si=dn.key,Ii=Xt;Ii!==null;){if(Ii.key===si){if(si=dn.type,si===G){if(Ii.tag===7){R(cn,Ii.sibling),Xt=le(Ii,dn.props.children),Xt.return=cn,cn=Xt;break e}}else if(Ii.elementType===si||typeof si=="object"&&si!==null&&si.$$typeof===at&&Kd(si)===Ii.type){R(cn,Ii.sibling),Xt=le(Ii,dn.props),Xt.ref=Ys(cn,Ii,dn),Xt.return=cn,cn=Xt;break e}R(cn,Ii);break}else C(cn,Ii);Ii=Ii.sibling}dn.type===G?(Xt=Ap(dn.props.children,cn.mode,_r,dn.key),Xt.return=cn,cn=Xt):(_r=l0(dn.type,dn.key,dn.props,null,cn.mode,_r),_r.ref=Ys(cn,Xt,dn),_r.return=cn,cn=_r)}return tt(cn);case te:e:{for(Ii=dn.key;Xt!==null;){if(Xt.key===Ii)if(Xt.tag===4&&Xt.stateNode.containerInfo===dn.containerInfo&&Xt.stateNode.implementation===dn.implementation){R(cn,Xt.sibling),Xt=le(Xt,dn.children||[]),Xt.return=cn,cn=Xt;break e}else{R(cn,Xt);break}else C(cn,Xt);Xt=Xt.sibling}Xt=Ag(dn,cn.mode,_r),Xt.return=cn,cn=Xt}return tt(cn);case at:return Ii=dn._init,vl(cn,Xt,Ii(dn._payload),_r)}if(rr(dn))return oi(cn,Xt,dn,_r);if(We(dn))return ai(cn,Xt,dn,_r);id(cn,dn)}return typeof dn=="string"&&dn!==""||typeof dn=="number"?(dn=""+dn,Xt!==null&&Xt.tag===6?(R(cn,Xt.sibling),Xt=le(Xt,dn),Xt.return=cn,cn=Xt):(R(cn,Xt),Xt=u0(dn,cn.mode,_r),Xt.return=cn,cn=Xt),tt(cn)):R(cn,Xt)}return vl}var js=yA(!0),Fc=yA(!1),Eu=ka(null),Ya=null,Zu=null,Lc=null;function Bu(){Lc=Zu=Ya=null}function va(m){var C=Eu.current;zs(Eu),m._currentValue=C}function $s(m,C,R){for(;m!==null;){var Q=m.alternate;if((m.childLanes&C)!==C?(m.childLanes|=C,Q!==null&&(Q.childLanes|=C)):Q!==null&&(Q.childLanes&C)!==C&&(Q.childLanes|=C),m===R)break;m=m.return}}function su(m,C){Ya=m,Lc=Zu=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&C&&(Ol=!0),m.firstContext=null)}function au(m){var C=m._currentValue;if(Lc!==m)if(m={context:m,memoizedValue:C,next:null},Zu===null){if(Ya===null)throw Error(t(308));Zu=m,Ya.dependencies={lanes:0,firstContext:m}}else Zu=Zu.next=m;return C}var WA=null;function lu(m){WA===null?WA=[m]:WA.push(m)}function Uc(m,C,R,Q){var le=C.interleaved;return le===null?(R.next=R,lu(C)):(R.next=le.next,le.next=R),C.interleaved=R,vA(m,Q)}function vA(m,C){m.lanes|=C;var R=m.alternate;for(R!==null&&(R.lanes|=C),R=m,m=m.return;m!==null;)m.childLanes|=C,R=m.alternate,R!==null&&(R.childLanes|=C),R=m,m=m.return;return R.tag===3?R.stateNode:null}var Sl=!1;function Dd(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I(m,C){m=m.updateQueue,C.updateQueue===m&&(C.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function l(m,C){return{eventTime:m,lane:C,tag:0,payload:null,callback:null,next:null}}function c(m,C,R){var Q=m.updateQueue;if(Q===null)return null;if(Q=Q.shared,vi&2){var le=Q.pending;return le===null?C.next=C:(C.next=le.next,le.next=C),Q.pending=C,vA(m,R)}return le=Q.interleaved,le===null?(C.next=C,lu(Q)):(C.next=le.next,le.next=C),Q.interleaved=C,vA(m,R)}function _(m,C,R){if(C=C.updateQueue,C!==null&&(C=C.shared,(R&4194240)!==0)){var Q=C.lanes;Q&=m.pendingLanes,R|=Q,C.lanes=R,Ba(m,R)}}function w(m,C){var R=m.updateQueue,Q=m.alternate;if(Q!==null&&(Q=Q.updateQueue,R===Q)){var le=null,ge=null;if(R=R.firstBaseUpdate,R!==null){do{var tt={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};ge===null?le=ge=tt:ge=ge.next=tt,R=R.next}while(R!==null);ge===null?le=ge=C:ge=ge.next=C}else le=ge=C;R={baseState:Q.baseState,firstBaseUpdate:le,lastBaseUpdate:ge,shared:Q.shared,effects:Q.effects},m.updateQueue=R;return}m=R.lastBaseUpdate,m===null?R.firstBaseUpdate=C:m.next=C,R.lastBaseUpdate=C}function P(m,C,R,Q){var le=m.updateQueue;Sl=!1;var ge=le.firstBaseUpdate,tt=le.lastBaseUpdate,It=le.shared.pending;if(It!==null){le.shared.pending=null;var Wt=It,xn=Wt.next;Wt.next=null,tt===null?ge=xn:tt.next=xn,tt=Wt;var Ar=m.alternate;Ar!==null&&(Ar=Ar.updateQueue,It=Ar.lastBaseUpdate,It!==tt&&(It===null?Ar.firstBaseUpdate=xn:It.next=xn,Ar.lastBaseUpdate=Wt))}if(ge!==null){var Cr=le.baseState;tt=0,Ar=xn=Wt=null,It=ge;do{var ir=It.lane,qr=It.eventTime;if((Q&ir)===ir){Ar!==null&&(Ar=Ar.next={eventTime:qr,lane:0,tag:It.tag,payload:It.payload,callback:It.callback,next:null});e:{var oi=m,ai=It;switch(ir=C,qr=R,ai.tag){case 1:if(oi=ai.payload,typeof oi=="function"){Cr=oi.call(qr,Cr,ir);break e}Cr=oi;break e;case 3:oi.flags=oi.flags&-65537|128;case 0:if(oi=ai.payload,ir=typeof oi=="function"?oi.call(qr,Cr,ir):oi,ir==null)break e;Cr=Me({},Cr,ir);break e;case 2:Sl=!0}}It.callback!==null&&It.lane!==0&&(m.flags|=64,ir=le.effects,ir===null?le.effects=[It]:ir.push(It))}else qr={eventTime:qr,lane:ir,tag:It.tag,payload:It.payload,callback:It.callback,next:null},Ar===null?(xn=Ar=qr,Wt=Cr):Ar=Ar.next=qr,tt|=ir;if(It=It.next,It===null){if(It=le.shared.pending,It===null)break;ir=It,It=ir.next,ir.next=null,le.lastBaseUpdate=ir,le.shared.pending=null}}while(!0);if(Ar===null&&(Wt=Cr),le.baseState=Wt,le.firstBaseUpdate=xn,le.lastBaseUpdate=Ar,C=le.shared.interleaved,C!==null){le=C;do tt|=le.lane,le=le.next;while(le!==C)}else ge===null&&(le.shared.lanes=0);Gl|=tt,m.lanes=tt,m.memoizedState=Cr}}function z(m,C,R){if(m=C.effects,C.effects=null,m!==null)for(C=0;C<m.length;C++){var Q=m[C],le=Q.callback;if(le!==null){if(Q.callback=null,Q=R,typeof le!="function")throw Error(t(191,le));le.call(Q)}}}var Y={},ee=ka(Y),ae=ka(Y),xe=ka(Y);function ke(m){if(m===Y)throw Error(t(174));return m}function Ke(m,C){switch(Es(xe,C),Es(ae,m),Es(ee,Y),m=C.nodeType,m){case 9:case 11:C=(C=C.documentElement)?C.namespaceURI:Qe(null,"");break;default:m=m===8?C.parentNode:C,C=m.namespaceURI||null,m=m.tagName,C=Qe(C,m)}zs(ee),Es(ee,C)}function $e(){zs(ee),zs(ae),zs(xe)}function Xe(m){ke(xe.current);var C=ke(ee.current),R=Qe(C,m.type);C!==R&&(Es(ae,m),Es(ee,R))}function pt(m){ae.current===m&&(zs(ee),zs(ae))}var ut=ka(0);function mt(m){for(var C=m;C!==null;){if(C.tag===13){var R=C.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||R.data==="$?"||R.data==="$!"))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if(C.flags&128)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var vt=[];function Bt(){for(var m=0;m<vt.length;m++)vt[m]._workInProgressVersionPrimary=null;vt.length=0}var kt=ne.ReactCurrentDispatcher,Rt=ne.ReactCurrentBatchConfig,zt=0,Tt=null,nn=null,Zt=null,Mn=!1,Bn=!1,yn=0,In=0;function Nn(){throw Error(t(321))}function Fn(m,C){if(C===null)return!1;for(var R=0;R<C.length&&R<m.length;R++)if(!ln(m[R],C[R]))return!1;return!0}function pr(m,C,R,Q,le,ge){if(zt=ge,Tt=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,kt.current=m===null||m.memoizedState===null?tp:sd,m=R(Q,le),Bn){ge=0;do{if(Bn=!1,yn=0,25<=ge)throw Error(t(301));ge+=1,Zt=nn=null,C.updateQueue=null,kt.current=bA,m=R(Q,le)}while(Bn)}if(kt.current=od,C=nn!==null&&nn.next!==null,zt=0,Zt=nn=Tt=null,Mn=!1,C)throw Error(t(300));return m}function Ti(){var m=yn!==0;return yn=0,m}function Gi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Tt.memoizedState=Zt=m:Zt=Zt.next=m,Zt}function Uo(){if(nn===null){var m=Tt.alternate;m=m!==null?m.memoizedState:null}else m=nn.next;var C=Zt===null?Tt.memoizedState:Zt.next;if(C!==null)Zt=C,nn=m;else{if(m===null)throw Error(t(310));nn=m,m={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},Zt===null?Tt.memoizedState=Zt=m:Zt=Zt.next=m}return Zt}function Si(m,C){return typeof C=="function"?C(m):C}function ps(m){var C=Uo(),R=C.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=m;var Q=nn,le=Q.baseQueue,ge=R.pending;if(ge!==null){if(le!==null){var tt=le.next;le.next=ge.next,ge.next=tt}Q.baseQueue=le=ge,R.pending=null}if(le!==null){ge=le.next,Q=Q.baseState;var It=tt=null,Wt=null,xn=ge;do{var Ar=xn.lane;if((zt&Ar)===Ar)Wt!==null&&(Wt=Wt.next={lane:0,action:xn.action,hasEagerState:xn.hasEagerState,eagerState:xn.eagerState,next:null}),Q=xn.hasEagerState?xn.eagerState:m(Q,xn.action);else{var Cr={lane:Ar,action:xn.action,hasEagerState:xn.hasEagerState,eagerState:xn.eagerState,next:null};Wt===null?(It=Wt=Cr,tt=Q):Wt=Wt.next=Cr,Tt.lanes|=Ar,Gl|=Ar}xn=xn.next}while(xn!==null&&xn!==ge);Wt===null?tt=Q:Wt.next=It,ln(Q,C.memoizedState)||(Ol=!0),C.memoizedState=Q,C.baseState=tt,C.baseQueue=Wt,R.lastRenderedState=Q}if(m=R.interleaved,m!==null){le=m;do ge=le.lane,Tt.lanes|=ge,Gl|=ge,le=le.next;while(le!==m)}else le===null&&(R.lanes=0);return[C.memoizedState,R.dispatch]}function To(m){var C=Uo(),R=C.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=m;var Q=R.dispatch,le=R.pending,ge=C.memoizedState;if(le!==null){R.pending=null;var tt=le=le.next;do ge=m(ge,tt.action),tt=tt.next;while(tt!==le);ln(ge,C.memoizedState)||(Ol=!0),C.memoizedState=ge,C.baseQueue===null&&(C.baseState=ge),R.lastRenderedState=ge}return[ge,Q]}function Po(){}function Co(m,C){var R=Tt,Q=Uo(),le=C(),ge=!ln(Q.memoizedState,le);if(ge&&(Q.memoizedState=le,Ol=!0),Q=Q.queue,ca(es.bind(null,R,Q,m),[m]),Q.getSnapshot!==C||ge||Zt!==null&&Zt.memoizedState.tag&1){if(R.flags|=2048,Pa(9,Jo.bind(null,R,Q,le,C),void 0,null),ms===null)throw Error(t(349));zt&30||il(R,C,le)}return le}function il(m,C,R){m.flags|=16384,m={getSnapshot:C,value:R},C=Tt.updateQueue,C===null?(C={lastEffect:null,stores:null},Tt.updateQueue=C,C.stores=[m]):(R=C.stores,R===null?C.stores=[m]:R.push(m))}function Jo(m,C,R,Q){C.value=R,C.getSnapshot=Q,ol(C)&&CA(m)}function es(m,C,R){return R(function(){ol(C)&&CA(m)})}function ol(m){var C=m.getSnapshot;m=m.value;try{var R=C();return!ln(m,R)}catch{return!0}}function CA(m){var C=vA(m,1);C!==null&&ad(C,m,1,-1)}function uu(m){var C=Gi();return typeof m=="function"&&(m=m()),C.memoizedState=C.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:m},C.queue=m,m=m.dispatch=gc.bind(null,Tt,m),[C.memoizedState,m]}function Pa(m,C,R,Q){return m={tag:m,create:C,destroy:R,deps:Q,next:null},C=Tt.updateQueue,C===null?(C={lastEffect:null,stores:null},Tt.updateQueue=C,C.lastEffect=m.next=m):(R=C.lastEffect,R===null?C.lastEffect=m.next=m:(Q=R.next,R.next=m,m.next=Q,C.lastEffect=m)),m}function El(){return Uo().memoizedState}function GA(m,C,R,Q){var le=Gi();Tt.flags|=m,le.memoizedState=Pa(1|C,R,void 0,Q===void 0?null:Q)}function _A(m,C,R,Q){var le=Uo();Q=Q===void 0?null:Q;var ge=void 0;if(nn!==null){var tt=nn.memoizedState;if(ge=tt.destroy,Q!==null&&Fn(Q,tt.deps)){le.memoizedState=Pa(C,R,ge,Q);return}}Tt.flags|=m,le.memoizedState=Pa(1|C,R,ge,Q)}function QA(m,C){return GA(8390656,8,m,C)}function ca(m,C){return _A(2048,8,m,C)}function Bl(m,C){return _A(4,2,m,C)}function Ka(m,C){return _A(4,4,m,C)}function Au(m,C){if(typeof C=="function")return m=m(),C(m),function(){C(null)};if(C!=null)return m=m(),C.current=m,function(){C.current=null}}function ss(m,C,R){return R=R!=null?R.concat([m]):null,_A(4,4,Au.bind(null,C,m),R)}function as(){}function Ou(m,C){var R=Uo();C=C===void 0?null:C;var Q=R.memoizedState;return Q!==null&&C!==null&&Fn(C,Q[1])?Q[0]:(R.memoizedState=[m,C],m)}function Vs(m,C){var R=Uo();C=C===void 0?null:C;var Q=R.memoizedState;return Q!==null&&C!==null&&Fn(C,Q[1])?Q[0]:(m=m(),R.memoizedState=[m,C],m)}function nh(m,C,R){return zt&21?(ln(R,C)||(R=nl(),Tt.lanes|=R,Gl|=R,m.baseState=!0),C):(m.baseState&&(m.baseState=!1,Ol=!0),m.memoizedState=R)}function vf(m,C){var R=Rr;Rr=R!==0&&4>R?R:4,m(!0);var Q=Rt.transition;Rt.transition={};try{m(!1),C()}finally{Rr=R,Rt.transition=Q}}function rh(){return Uo().memoizedState}function Dp(m,C,R){var Q=Wh(m);if(R={lane:Q,action:R,hasEagerState:!1,eagerState:null,next:null},yc(m))Ca(C,R);else if(R=Uc(m,C,R,Q),R!==null){var le=tA();ad(R,m,Q,le),Xu(R,C,Q)}}function gc(m,C,R){var Q=Wh(m),le={lane:Q,action:R,hasEagerState:!1,eagerState:null,next:null};if(yc(m))Ca(C,le);else{var ge=m.alternate;if(m.lanes===0&&(ge===null||ge.lanes===0)&&(ge=C.lastRenderedReducer,ge!==null))try{var tt=C.lastRenderedState,It=ge(tt,R);if(le.hasEagerState=!0,le.eagerState=It,ln(It,tt)){var Wt=C.interleaved;Wt===null?(le.next=le,lu(C)):(le.next=Wt.next,Wt.next=le),C.interleaved=le;return}}catch{}finally{}R=Uc(m,C,le,Q),R!==null&&(le=tA(),ad(R,m,Q,le),Xu(R,C,Q))}}function yc(m){var C=m.alternate;return m===Tt||C!==null&&C===Tt}function Ca(m,C){Bn=Mn=!0;var R=m.pending;R===null?C.next=C:(C.next=R.next,R.next=C),m.pending=C}function Xu(m,C,R){if(R&4194240){var Q=C.lanes;Q&=m.pendingLanes,R|=Q,C.lanes=R,Ba(m,R)}}var od={readContext:au,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},tp={readContext:au,useCallback:function(m,C){return Gi().memoizedState=[m,C===void 0?null:C],m},useContext:au,useEffect:QA,useImperativeHandle:function(m,C,R){return R=R!=null?R.concat([m]):null,GA(4194308,4,Au.bind(null,C,m),R)},useLayoutEffect:function(m,C){return GA(4194308,4,m,C)},useInsertionEffect:function(m,C){return GA(4,2,m,C)},useMemo:function(m,C){var R=Gi();return C=C===void 0?null:C,m=m(),R.memoizedState=[m,C],m},useReducer:function(m,C,R){var Q=Gi();return C=R!==void 0?R(C):C,Q.memoizedState=Q.baseState=C,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:C},Q.queue=m,m=m.dispatch=Dp.bind(null,Tt,m),[Q.memoizedState,m]},useRef:function(m){var C=Gi();return m={current:m},C.memoizedState=m},useState:uu,useDebugValue:as,useDeferredValue:function(m){return Gi().memoizedState=m},useTransition:function(){var m=uu(!1),C=m[0];return m=vf.bind(null,m[1]),Gi().memoizedState=m,[C,m]},useMutableSource:function(){},useSyncExternalStore:function(m,C,R){var Q=Tt,le=Gi();if(fs){if(R===void 0)throw Error(t(407));R=R()}else{if(R=C(),ms===null)throw Error(t(349));zt&30||il(Q,C,R)}le.memoizedState=R;var ge={value:R,getSnapshot:C};return le.queue=ge,QA(es.bind(null,Q,ge,m),[m]),Q.flags|=2048,Pa(9,Jo.bind(null,Q,ge,R,C),void 0,null),R},useId:function(){var m=Gi(),C=ms.identifierPrefix;if(fs){var R=Mu,Q=Lo;R=(Q&~(1<<32-vn(Q)-1)).toString(32)+R,C=":"+C+"R"+R,R=yn++,0<R&&(C+="H"+R.toString(32)),C+=":"}else R=In++,C=":"+C+"r"+R.toString(32)+":";return m.memoizedState=C},unstable_isNewReconciler:!1},sd={readContext:au,useCallback:Ou,useContext:au,useEffect:ca,useImperativeHandle:ss,useInsertionEffect:Bl,useLayoutEffect:Ka,useMemo:Vs,useReducer:ps,useRef:El,useState:function(){return ps(Si)},useDebugValue:as,useDeferredValue:function(m){var C=Uo();return nh(C,nn.memoizedState,m)},useTransition:function(){var m=ps(Si)[0],C=Uo().memoizedState;return[m,C]},useMutableSource:Po,useSyncExternalStore:Co,useId:rh,unstable_isNewReconciler:!1},bA={readContext:au,useCallback:Ou,useContext:au,useEffect:ca,useImperativeHandle:ss,useInsertionEffect:Bl,useLayoutEffect:Ka,useMemo:Vs,useReducer:To,useRef:El,useState:function(){return To(Si)},useDebugValue:as,useDeferredValue:function(m){var C=Uo();return nn===null?C.memoizedState=m:nh(C,nn.memoizedState,m)},useTransition:function(){var m=To(Si)[0],C=Uo().memoizedState;return[m,C]},useMutableSource:Po,useSyncExternalStore:Co,useId:rh,unstable_isNewReconciler:!1};function ml(m,C){if(m&&m.defaultProps){C=Me({},C),m=m.defaultProps;for(var R in m)C[R]===void 0&&(C[R]=m[R]);return C}return C}function Cf(m,C,R,Q){C=m.memoizedState,R=R(Q,C),R=R==null?C:Me({},C,R),m.memoizedState=R,m.lanes===0&&(m.updateQueue.baseState=R)}var np={isMounted:function(m){return(m=m._reactInternals)?Yi(m)===m:!1},enqueueSetState:function(m,C,R){m=m._reactInternals;var Q=tA(),le=Wh(m),ge=l(Q,le);ge.payload=C,R!=null&&(ge.callback=R),C=c(m,ge,le),C!==null&&(ad(C,m,le,Q),_(C,m,le))},enqueueReplaceState:function(m,C,R){m=m._reactInternals;var Q=tA(),le=Wh(m),ge=l(Q,le);ge.tag=1,ge.payload=C,R!=null&&(ge.callback=R),C=c(m,ge,le),C!==null&&(ad(C,m,le,Q),_(C,m,le))},enqueueForceUpdate:function(m,C){m=m._reactInternals;var R=tA(),Q=Wh(m),le=l(R,Q);le.tag=2,C!=null&&(le.callback=C),C=c(m,le,Q),C!==null&&(ad(C,m,Q,R),_(C,m,Q))}};function rp(m,C,R,Q,le,ge,tt){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(Q,ge,tt):C.prototype&&C.prototype.isPureReactComponent?!Fr(R,Q)||!Fr(le,ge):!0}function ih(m,C,R){var Q=!1,le=Kc,ge=C.contextType;return typeof ge=="object"&&ge!==null?ge=au(ge):(le=ya(C)?hr:ia.current,Q=C.contextTypes,ge=(Q=Q!=null)?Id(m,le):Kc),C=new C(R,ge),m.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=np,m.stateNode=C,C._reactInternals=m,Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=le,m.__reactInternalMemoizedMaskedChildContext=ge),C}function Lh(m,C,R,Q){m=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps(R,Q),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps(R,Q),C.state!==m&&np.enqueueReplaceState(C,C.state,null)}function oh(m,C,R,Q){var le=m.stateNode;le.props=R,le.state=m.memoizedState,le.refs={},Dd(m);var ge=C.contextType;typeof ge=="object"&&ge!==null?le.context=au(ge):(ge=ya(C)?hr:ia.current,le.context=Id(m,ge)),le.state=m.memoizedState,ge=C.getDerivedStateFromProps,typeof ge=="function"&&(Cf(m,C,ge,R),le.state=m.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof le.getSnapshotBeforeUpdate=="function"||typeof le.UNSAFE_componentWillMount!="function"&&typeof le.componentWillMount!="function"||(C=le.state,typeof le.componentWillMount=="function"&&le.componentWillMount(),typeof le.UNSAFE_componentWillMount=="function"&&le.UNSAFE_componentWillMount(),C!==le.state&&np.enqueueReplaceState(le,le.state,null),P(m,R,le,Q),le.state=m.memoizedState),typeof le.componentDidMount=="function"&&(m.flags|=4194308)}function sh(m,C){try{var R="",Q=C;do R+=gt(Q),Q=Q.return;while(Q);var le=R}catch(ge){le=`
Error generating stack: `+ge.message+`
`+ge.stack}return{value:m,source:C,stack:le,digest:null}}function ah(m,C,R){return{value:m,source:null,stack:R??null,digest:C??null}}function Rd(m,C){try{console.error(C.value)}catch(R){setTimeout(function(){throw R})}}var _f=typeof WeakMap=="function"?WeakMap:Map;function lh(m,C,R){R=l(-1,R),R.tag=3,R.payload={element:null};var Q=C.value;return R.callback=function(){t0||(t0=!0,lp=Q),Rd(m,C)},R}function bf(m,C,R){R=l(-1,R),R.tag=3;var Q=m.type.getDerivedStateFromError;if(typeof Q=="function"){var le=C.value;R.payload=function(){return Q(le)},R.callback=function(){Rd(m,C)}}var ge=m.stateNode;return ge!==null&&typeof ge.componentDidCatch=="function"&&(R.callback=function(){Rd(m,C),typeof Q!="function"&&(Nh===null?Nh=new Set([this]):Nh.add(this));var tt=C.stack;this.componentDidCatch(C.value,{componentStack:tt!==null?tt:""})}),R}function ip(m,C,R){var Q=m.pingCache;if(Q===null){Q=m.pingCache=new _f;var le=new Set;Q.set(C,le)}else le=Q.get(C),le===void 0&&(le=new Set,Q.set(C,le));le.has(R)||(le.add(R),m=mv.bind(null,m,C,R),C.then(m,m))}function Cm(m){do{var C;if((C=m.tag===13)&&(C=m.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return m;m=m.return}while(m!==null);return null}function Fd(m,C,R,Q,le){return m.mode&1?(m.flags|=65536,m.lanes=le,m):(m===C?m.flags|=65536:(m.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(C=l(-1,1),C.tag=2,c(R,C,1))),R.lanes|=1),m)}var xf=ne.ReactCurrentOwner,Ol=!1;function cu(m,C,R,Q){C.child=m===null?Fc(C,null,R,Q):js(C,m.child,R,Q)}function Rp(m,C,R,Q,le){R=R.render;var ge=C.ref;return su(C,le),Q=pr(m,C,R,Q,ge,le),R=Ti(),m!==null&&!Ol?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~le,Iu(m,C,le)):(fs&&R&&jA(C),C.flags|=1,cu(m,C,Q,le),C.child)}function Fp(m,C,R,Q,le){if(m===null){var ge=R.type;return typeof ge=="function"&&!qh(ge)&&ge.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(C.tag=15,C.type=ge,qo(m,C,ge,Q,le)):(m=l0(R.type,null,Q,C,C.mode,le),m.ref=C.ref,m.return=C,C.child=m)}if(ge=m.child,!(m.lanes&le)){var tt=ge.memoizedProps;if(R=R.compare,R=R!==null?R:Fr,R(tt,Q)&&m.ref===C.ref)return Iu(m,C,le)}return C.flags|=1,m=_c(ge,Q),m.ref=C.ref,m.return=C,C.child=m}function qo(m,C,R,Q,le){if(m!==null){var ge=m.memoizedProps;if(Fr(ge,Q)&&m.ref===C.ref)if(Ol=!1,C.pendingProps=Q=ge,(m.lanes&le)!==0)m.flags&131072&&(Ol=!0);else return C.lanes=m.lanes,Iu(m,C,le)}return uh(m,C,R,Q,le)}function Uh(m,C,R){var Q=C.pendingProps,le=Q.children,ge=m!==null?m.memoizedState:null;if(Q.mode==="hidden")if(!(C.mode&1))C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(ku,Bs),Bs|=R;else{if(!(R&1073741824))return m=ge!==null?ge.baseLanes|R:R,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:m,cachePool:null,transitions:null},C.updateQueue=null,Es(ku,Bs),Bs|=m,null;C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ge!==null?ge.baseLanes:R,Es(ku,Bs),Bs|=Q}else ge!==null?(Q=ge.baseLanes|R,C.memoizedState=null):Q=R,Es(ku,Bs),Bs|=Q;return cu(m,C,le,R),C.child}function du(m,C){var R=C.ref;(m===null&&R!==null||m!==null&&m.ref!==R)&&(C.flags|=512,C.flags|=2097152)}function uh(m,C,R,Q,le){var ge=ya(R)?hr:ia.current;return ge=Id(C,ge),su(C,le),R=pr(m,C,R,Q,ge,le),Q=Ti(),m!==null&&!Ol?(C.updateQueue=m.updateQueue,C.flags&=-2053,m.lanes&=~le,Iu(m,C,le)):(fs&&Q&&jA(C),C.flags|=1,cu(m,C,R,le),C.child)}function Ju(m,C,R,Q,le){if(ya(R)){var ge=!0;ru(C)}else ge=!1;if(su(C,le),C.stateNode===null)Lp(m,C),ih(C,R,Q),oh(C,R,Q,le),Q=!0;else if(m===null){var tt=C.stateNode,It=C.memoizedProps;tt.props=It;var Wt=tt.context,xn=R.contextType;typeof xn=="object"&&xn!==null?xn=au(xn):(xn=ya(R)?hr:ia.current,xn=Id(C,xn));var Ar=R.getDerivedStateFromProps,Cr=typeof Ar=="function"||typeof tt.getSnapshotBeforeUpdate=="function";Cr||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(It!==Q||Wt!==xn)&&Lh(C,tt,Q,xn),Sl=!1;var ir=C.memoizedState;tt.state=ir,P(C,Q,tt,le),Wt=C.memoizedState,It!==Q||ir!==Wt||Aa.current||Sl?(typeof Ar=="function"&&(Cf(C,R,Ar,Q),Wt=C.memoizedState),(It=Sl||rp(C,R,It,Q,ir,Wt,xn))?(Cr||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount()),typeof tt.componentDidMount=="function"&&(C.flags|=4194308)):(typeof tt.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=Q,C.memoizedState=Wt),tt.props=Q,tt.state=Wt,tt.context=xn,Q=It):(typeof tt.componentDidMount=="function"&&(C.flags|=4194308),Q=!1)}else{tt=C.stateNode,I(m,C),It=C.memoizedProps,xn=C.type===C.elementType?It:ml(C.type,It),tt.props=xn,Cr=C.pendingProps,ir=tt.context,Wt=R.contextType,typeof Wt=="object"&&Wt!==null?Wt=au(Wt):(Wt=ya(R)?hr:ia.current,Wt=Id(C,Wt));var qr=R.getDerivedStateFromProps;(Ar=typeof qr=="function"||typeof tt.getSnapshotBeforeUpdate=="function")||typeof tt.UNSAFE_componentWillReceiveProps!="function"&&typeof tt.componentWillReceiveProps!="function"||(It!==Cr||ir!==Wt)&&Lh(C,tt,Q,Wt),Sl=!1,ir=C.memoizedState,tt.state=ir,P(C,Q,tt,le);var oi=C.memoizedState;It!==Cr||ir!==oi||Aa.current||Sl?(typeof qr=="function"&&(Cf(C,R,qr,Q),oi=C.memoizedState),(xn=Sl||rp(C,R,xn,Q,ir,oi,Wt)||!1)?(Ar||typeof tt.UNSAFE_componentWillUpdate!="function"&&typeof tt.componentWillUpdate!="function"||(typeof tt.componentWillUpdate=="function"&&tt.componentWillUpdate(Q,oi,Wt),typeof tt.UNSAFE_componentWillUpdate=="function"&&tt.UNSAFE_componentWillUpdate(Q,oi,Wt)),typeof tt.componentDidUpdate=="function"&&(C.flags|=4),typeof tt.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof tt.componentDidUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=1024),C.memoizedProps=Q,C.memoizedState=oi),tt.props=Q,tt.state=oi,tt.context=Wt,Q=xn):(typeof tt.componentDidUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=4),typeof tt.getSnapshotBeforeUpdate!="function"||It===m.memoizedProps&&ir===m.memoizedState||(C.flags|=1024),Q=!1)}return wf(m,C,R,Q,ge,le)}function wf(m,C,R,Q,le,ge){du(m,C);var tt=(C.flags&128)!==0;if(!Q&&!tt)return le&&Ji(C,R,!1),Iu(m,C,ge);Q=C.stateNode,xf.current=C;var It=tt&&typeof R.getDerivedStateFromError!="function"?null:Q.render();return C.flags|=1,m!==null&&tt?(C.child=js(C,m.child,null,ge),C.child=js(C,null,It,ge)):cu(m,C,It,ge),C.memoizedState=Q.state,le&&Ji(C,R,!0),C.child}function op(m){var C=m.stateNode;C.pendingContext?Td(m,C.pendingContext,C.pendingContext!==C.context):C.context&&Td(m,C.context,!1),Ke(m,C.containerInfo)}function zc(m,C,R,Q,le){return mc(),Ml(le),C.flags|=256,cu(m,C,R,Q),C.child}var Mf={dehydrated:null,treeContext:null,retryLane:0};function Sf(m){return{baseLanes:m,cachePool:null,transitions:null}}function Ef(m,C,R){var Q=C.pendingProps,le=ut.current,ge=!1,tt=(C.flags&128)!==0,It;if((It=tt)||(It=m!==null&&m.memoizedState===null?!1:(le&2)!==0),It?(ge=!0,C.flags&=-129):(m===null||m.memoizedState!==null)&&(le|=1),Es(ut,le&1),m===null)return pl(C),m=C.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(C.mode&1?m.data==="$!"?C.lanes=8:C.lanes=1073741824:C.lanes=1,null):(tt=Q.children,m=Q.fallback,ge?(Q=C.mode,ge=C.child,tt={mode:"hidden",children:tt},!(Q&1)&&ge!==null?(ge.childLanes=0,ge.pendingProps=tt):ge=Mm(tt,Q,0,null),m=Ap(m,Q,R,null),ge.return=C,m.return=C,ge.sibling=m,C.child=ge,C.child.memoizedState=Sf(R),C.memoizedState=Mf,m):Ld(C,tt));if(le=m.memoizedState,le!==null&&(It=le.dehydrated,It!==null))return xi(m,C,tt,Q,It,le,R);if(ge){ge=Q.fallback,tt=C.mode,le=m.child,It=le.sibling;var Wt={mode:"hidden",children:Q.children};return!(tt&1)&&C.child!==le?(Q=C.child,Q.childLanes=0,Q.pendingProps=Wt,C.deletions=null):(Q=_c(le,Wt),Q.subtreeFlags=le.subtreeFlags&14680064),It!==null?ge=_c(It,ge):(ge=Ap(ge,tt,R,null),ge.flags|=2),ge.return=C,Q.return=C,Q.sibling=ge,C.child=Q,Q=ge,ge=C.child,tt=m.child.memoizedState,tt=tt===null?Sf(R):{baseLanes:tt.baseLanes|R,cachePool:null,transitions:tt.transitions},ge.memoizedState=tt,ge.childLanes=m.childLanes&~R,C.memoizedState=Mf,Q}return ge=m.child,m=ge.sibling,Q=_c(ge,{mode:"visible",children:Q.children}),!(C.mode&1)&&(Q.lanes=R),Q.return=C,Q.sibling=null,m!==null&&(R=C.deletions,R===null?(C.deletions=[m],C.flags|=16):R.push(m)),C.child=Q,C.memoizedState=null,Q}function Ld(m,C){return C=Mm({mode:"visible",children:C},m.mode,0,null),C.return=m,m.child=C}function jc(m,C,R,Q){return Q!==null&&Ml(Q),js(C,m.child,null,R),m=Ld(C,C.pendingProps.children),m.flags|=2,C.memoizedState=null,m}function xi(m,C,R,Q,le,ge,tt){if(R)return C.flags&256?(C.flags&=-257,Q=ah(Error(t(422))),jc(m,C,tt,Q)):C.memoizedState!==null?(C.child=m.child,C.flags|=128,null):(ge=Q.fallback,le=C.mode,Q=Mm({mode:"visible",children:Q.children},le,0,null),ge=Ap(ge,le,tt,null),ge.flags|=2,Q.return=C,ge.return=C,Q.sibling=ge,C.child=Q,C.mode&1&&js(C,m.child,null,tt),C.child.memoizedState=Sf(tt),C.memoizedState=Mf,ge);if(!(C.mode&1))return jc(m,C,tt,null);if(le.data==="$!"){if(Q=le.nextSibling&&le.nextSibling.dataset,Q)var It=Q.dgst;return Q=It,ge=Error(t(419)),Q=ah(ge,Q,void 0),jc(m,C,tt,Q)}if(It=(tt&m.childLanes)!==0,Ol||It){if(Q=ms,Q!==null){switch(tt&-tt){case 4:le=2;break;case 16:le=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:le=32;break;case 536870912:le=268435456;break;default:le=0}le=le&(Q.suspendedLanes|tt)?0:le,le!==0&&le!==ge.retryLane&&(ge.retryLane=le,vA(m,le),ad(Q,m,le,-1))}return xm(),Q=ah(Error(t(421))),jc(m,C,tt,Q)}return le.data==="$?"?(C.flags|=128,C.child=m.child,C=$A.bind(null,m),le._reactRetry=C,null):(m=ge.treeContext,xs=cc(le.nextSibling),Ta=C,fs=!0,Pr=null,m!==null&&(Qa[qa++]=Lo,Qa[qa++]=Mu,Qa[qa++]=Nl,Lo=m.id,Mu=m.overflow,Nl=C),C=Ld(C,Q.children),C.flags|=4096,C)}function vc(m,C,R){m.lanes|=C;var Q=m.alternate;Q!==null&&(Q.lanes|=C),$s(m.return,C,R)}function zo(m,C,R,Q,le){var ge=m.memoizedState;ge===null?m.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:Q,tail:R,tailMode:le}:(ge.isBackwards=C,ge.rendering=null,ge.renderingStartTime=0,ge.last=Q,ge.tail=R,ge.tailMode=le)}function Ud(m,C,R){var Q=C.pendingProps,le=Q.revealOrder,ge=Q.tail;if(cu(m,C,Q.children,R),Q=ut.current,Q&2)Q=Q&1|2,C.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=C.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&vc(m,R,C);else if(m.tag===19)vc(m,R,C);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===C)break e;for(;m.sibling===null;){if(m.return===null||m.return===C)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Q&=1}if(Es(ut,Q),!(C.mode&1))C.memoizedState=null;else switch(le){case"forwards":for(R=C.child,le=null;R!==null;)m=R.alternate,m!==null&&mt(m)===null&&(le=R),R=R.sibling;R=le,R===null?(le=C.child,C.child=null):(le=R.sibling,R.sibling=null),zo(C,!1,le,R,ge);break;case"backwards":for(R=null,le=C.child,C.child=null;le!==null;){if(m=le.alternate,m!==null&&mt(m)===null){C.child=le;break}m=le.sibling,le.sibling=R,R=le,le=m}zo(C,!0,R,null,ge);break;case"together":zo(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function Lp(m,C){!(C.mode&1)&&m!==null&&(m.alternate=null,C.alternate=null,C.flags|=2)}function Iu(m,C,R){if(m!==null&&(C.dependencies=m.dependencies),Gl|=C.lanes,!(R&C.childLanes))return null;if(m!==null&&C.child!==m.child)throw Error(t(153));if(C.child!==null){for(m=C.child,R=_c(m,m.pendingProps),C.child=R,R.return=C;m.sibling!==null;)m=m.sibling,R=R.sibling=_c(m,m.pendingProps),R.return=C;R.sibling=null}return C.child}function e0(m,C,R){switch(C.tag){case 3:op(C),mc();break;case 5:Xe(C);break;case 1:ya(C.type)&&ru(C);break;case 4:Ke(C,C.stateNode.containerInfo);break;case 10:var Q=C.type._context,le=C.memoizedProps.value;Es(Eu,Q._currentValue),Q._currentValue=le;break;case 13:if(Q=C.memoizedState,Q!==null)return Q.dehydrated!==null?(Es(ut,ut.current&1),C.flags|=128,null):R&C.child.childLanes?Ef(m,C,R):(Es(ut,ut.current&1),m=Iu(m,C,R),m!==null?m.sibling:null);Es(ut,ut.current&1);break;case 19:if(Q=(R&C.childLanes)!==0,m.flags&128){if(Q)return Ud(m,C,R);C.flags|=128}if(le=C.memoizedState,le!==null&&(le.rendering=null,le.tail=null,le.lastEffect=null),Es(ut,ut.current),Q)break;return null;case 22:case 23:return C.lanes=0,Uh(m,C,R)}return Iu(m,C,R)}var gl,_m,Da,sp;gl=function(m,C){for(var R=C.child;R!==null;){if(R.tag===5||R.tag===6)m.appendChild(R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===C)break;for(;R.sibling===null;){if(R.return===null||R.return===C)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},_m=function(){},Da=function(m,C,R,Q){var le=m.memoizedProps;if(le!==Q){m=C.stateNode,ke(ee.current);var ge=null;switch(R){case"input":le=Ut(m,le),Q=Ut(m,Q),ge=[];break;case"select":le=Me({},le,{value:void 0}),Q=Me({},Q,{value:void 0}),ge=[];break;case"textarea":le=pn(m,le),Q=pn(m,Q),ge=[];break;default:typeof le.onClick!="function"&&typeof Q.onClick=="function"&&(m.onclick=Tc)}se(R,Q);var tt;R=null;for(xn in le)if(!Q.hasOwnProperty(xn)&&le.hasOwnProperty(xn)&&le[xn]!=null)if(xn==="style"){var It=le[xn];for(tt in It)It.hasOwnProperty(tt)&&(R||(R={}),R[tt]="")}else xn!=="dangerouslySetInnerHTML"&&xn!=="children"&&xn!=="suppressContentEditableWarning"&&xn!=="suppressHydrationWarning"&&xn!=="autoFocus"&&(i.hasOwnProperty(xn)?ge||(ge=[]):(ge=ge||[]).push(xn,null));for(xn in Q){var Wt=Q[xn];if(It=le!=null?le[xn]:void 0,Q.hasOwnProperty(xn)&&Wt!==It&&(Wt!=null||It!=null))if(xn==="style")if(It){for(tt in It)!It.hasOwnProperty(tt)||Wt&&Wt.hasOwnProperty(tt)||(R||(R={}),R[tt]="");for(tt in Wt)Wt.hasOwnProperty(tt)&&It[tt]!==Wt[tt]&&(R||(R={}),R[tt]=Wt[tt])}else R||(ge||(ge=[]),ge.push(xn,R)),R=Wt;else xn==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,It=It?It.__html:void 0,Wt!=null&&It!==Wt&&(ge=ge||[]).push(xn,Wt)):xn==="children"?typeof Wt!="string"&&typeof Wt!="number"||(ge=ge||[]).push(xn,""+Wt):xn!=="suppressContentEditableWarning"&&xn!=="suppressHydrationWarning"&&(i.hasOwnProperty(xn)?(Wt!=null&&xn==="onScroll"&&hs("scroll",m),ge||It===Wt||(ge=[])):(ge=ge||[]).push(xn,Wt))}R&&(ge=ge||[]).push("style",R);var xn=ge;(C.updateQueue=xn)&&(C.flags|=4)}},sp=function(m,C,R,Q){R!==Q&&(C.flags|=4)};function ap(m,C){if(!fs)switch(m.tailMode){case"hidden":C=m.tail;for(var R=null;C!==null;)C.alternate!==null&&(R=C),C=C.sibling;R===null?m.tail=null:R.sibling=null;break;case"collapsed":R=m.tail;for(var Q=null;R!==null;)R.alternate!==null&&(Q=R),R=R.sibling;Q===null?C||m.tail===null?m.tail=null:m.tail.sibling=null:Q.sibling=null}}function Wl(m){var C=m.alternate!==null&&m.alternate.child===m.child,R=0,Q=0;if(C)for(var le=m.child;le!==null;)R|=le.lanes|le.childLanes,Q|=le.subtreeFlags&14680064,Q|=le.flags&14680064,le.return=m,le=le.sibling;else for(le=m.child;le!==null;)R|=le.lanes|le.childLanes,Q|=le.subtreeFlags,Q|=le.flags,le.return=m,le=le.sibling;return m.subtreeFlags|=Q,m.childLanes=R,C}function Ah(m,C,R){var Q=C.pendingProps;switch(pc(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(C),null;case 1:return ya(C.type)&&kd(),Wl(C),null;case 3:return Q=C.stateNode,$e(),zs(Aa),zs(ia),Bt(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(m===null||m.child===null)&&(Pd(C)?C.flags|=4:m===null||m.memoizedState.isDehydrated&&!(C.flags&256)||(C.flags|=1024,Pr!==null&&(eg(Pr),Pr=null))),_m(m,C),Wl(C),null;case 5:pt(C);var le=ke(xe.current);if(R=C.type,m!==null&&C.stateNode!=null)Da(m,C,R,Q,le),m.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!Q){if(C.stateNode===null)throw Error(t(166));return Wl(C),null}if(m=ke(ee.current),Pd(C)){Q=C.stateNode,R=C.type;var ge=C.memoizedProps;switch(Q[FA]=C,Q[Pc]=ge,m=(C.mode&1)!==0,R){case"dialog":hs("cancel",Q),hs("close",Q);break;case"iframe":case"object":case"embed":hs("load",Q);break;case"video":case"audio":for(le=0;le<qu.length;le++)hs(qu[le],Q);break;case"source":hs("error",Q);break;case"img":case"image":case"link":hs("error",Q),hs("load",Q);break;case"details":hs("toggle",Q);break;case"input":rn(Q,ge),hs("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ge.multiple},hs("invalid",Q);break;case"textarea":Zn(Q,ge),hs("invalid",Q)}se(R,ge),le=null;for(var tt in ge)if(ge.hasOwnProperty(tt)){var It=ge[tt];tt==="children"?typeof It=="string"?Q.textContent!==It&&(ge.suppressHydrationWarning!==!0&&nd(Q.textContent,It,m),le=["children",It]):typeof It=="number"&&Q.textContent!==""+It&&(ge.suppressHydrationWarning!==!0&&nd(Q.textContent,It,m),le=["children",""+It]):i.hasOwnProperty(tt)&&It!=null&&tt==="onScroll"&&hs("scroll",Q)}switch(R){case"input":it(Q),qn(Q,ge,!0);break;case"textarea":it(Q),vr(Q);break;case"select":case"option":break;default:typeof ge.onClick=="function"&&(Q.onclick=Tc)}Q=le,C.updateQueue=Q,Q!==null&&(C.flags|=4)}else{tt=le.nodeType===9?le:le.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Jn(R)),m==="http://www.w3.org/1999/xhtml"?R==="script"?(m=tt.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof Q.is=="string"?m=tt.createElement(R,{is:Q.is}):(m=tt.createElement(R),R==="select"&&(tt=m,Q.multiple?tt.multiple=!0:Q.size&&(tt.size=Q.size))):m=tt.createElementNS(m,R),m[FA]=C,m[Pc]=Q,gl(m,C,!1,!1),C.stateNode=m;e:{switch(tt=ve(R,Q),R){case"dialog":hs("cancel",m),hs("close",m),le=Q;break;case"iframe":case"object":case"embed":hs("load",m),le=Q;break;case"video":case"audio":for(le=0;le<qu.length;le++)hs(qu[le],m);le=Q;break;case"source":hs("error",m),le=Q;break;case"img":case"image":case"link":hs("error",m),hs("load",m),le=Q;break;case"details":hs("toggle",m),le=Q;break;case"input":rn(m,Q),le=Ut(m,Q),hs("invalid",m);break;case"option":le=Q;break;case"select":m._wrapperState={wasMultiple:!!Q.multiple},le=Me({},Q,{value:void 0}),hs("invalid",m);break;case"textarea":Zn(m,Q),le=pn(m,Q),hs("invalid",m);break;default:le=Q}se(R,le),It=le;for(ge in It)if(It.hasOwnProperty(ge)){var Wt=It[ge];ge==="style"?tr(m,Wt):ge==="dangerouslySetInnerHTML"?(Wt=Wt?Wt.__html:void 0,Wt!=null&&fe(m,Wt)):ge==="children"?typeof Wt=="string"?(R!=="textarea"||Wt!=="")&&nt(m,Wt):typeof Wt=="number"&&nt(m,""+Wt):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?Wt!=null&&ge==="onScroll"&&hs("scroll",m):Wt!=null&&oe(m,ge,Wt,tt))}switch(R){case"input":it(m),qn(m,Q,!1);break;case"textarea":it(m),vr(m);break;case"option":Q.value!=null&&m.setAttribute("value",""+Ue(Q.value));break;case"select":m.multiple=!!Q.multiple,ge=Q.value,ge!=null?Dn(m,!!Q.multiple,ge,!1):Q.defaultValue!=null&&Dn(m,!!Q.multiple,Q.defaultValue,!0);break;default:typeof le.onClick=="function"&&(m.onclick=Tc)}switch(R){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(C.flags|=4)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return Wl(C),null;case 6:if(m&&C.stateNode!=null)sp(m,C,m.memoizedProps,Q);else{if(typeof Q!="string"&&C.stateNode===null)throw Error(t(166));if(R=ke(xe.current),ke(ee.current),Pd(C)){if(Q=C.stateNode,R=C.memoizedProps,Q[FA]=C,(ge=Q.nodeValue!==R)&&(m=Ta,m!==null))switch(m.tag){case 3:nd(Q.nodeValue,R,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&nd(Q.nodeValue,R,(m.mode&1)!==0)}ge&&(C.flags|=4)}else Q=(R.nodeType===9?R:R.ownerDocument).createTextNode(Q),Q[FA]=C,C.stateNode=Q}return Wl(C),null;case 13:if(zs(ut),Q=C.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(fs&&xs!==null&&C.mode&1&&!(C.flags&128))gA(),mc(),C.flags|=98560,ge=!1;else if(ge=Pd(C),Q!==null&&Q.dehydrated!==null){if(m===null){if(!ge)throw Error(t(318));if(ge=C.memoizedState,ge=ge!==null?ge.dehydrated:null,!ge)throw Error(t(317));ge[FA]=C}else mc(),!(C.flags&128)&&(C.memoizedState=null),C.flags|=4;Wl(C),ge=!1}else Pr!==null&&(eg(Pr),Pr=null),ge=!0;if(!ge)return C.flags&65536?C:null}return C.flags&128?(C.lanes=R,C):(Q=Q!==null,Q!==(m!==null&&m.memoizedState!==null)&&Q&&(C.child.flags|=8192,C.mode&1&&(m===null||ut.current&1?_o===0&&(_o=3):xm())),C.updateQueue!==null&&(C.flags|=4),Wl(C),null);case 4:return $e(),_m(m,C),m===null&&Yu(C.stateNode.containerInfo),Wl(C),null;case 10:return va(C.type._context),Wl(C),null;case 17:return ya(C.type)&&kd(),Wl(C),null;case 19:if(zs(ut),ge=C.memoizedState,ge===null)return Wl(C),null;if(Q=(C.flags&128)!==0,tt=ge.rendering,tt===null)if(Q)ap(ge,!1);else{if(_o!==0||m!==null&&m.flags&128)for(m=C.child;m!==null;){if(tt=mt(m),tt!==null){for(C.flags|=128,ap(ge,!1),Q=tt.updateQueue,Q!==null&&(C.updateQueue=Q,C.flags|=4),C.subtreeFlags=0,Q=R,R=C.child;R!==null;)ge=R,m=Q,ge.flags&=14680066,tt=ge.alternate,tt===null?(ge.childLanes=0,ge.lanes=m,ge.child=null,ge.subtreeFlags=0,ge.memoizedProps=null,ge.memoizedState=null,ge.updateQueue=null,ge.dependencies=null,ge.stateNode=null):(ge.childLanes=tt.childLanes,ge.lanes=tt.lanes,ge.child=tt.child,ge.subtreeFlags=0,ge.deletions=null,ge.memoizedProps=tt.memoizedProps,ge.memoizedState=tt.memoizedState,ge.updateQueue=tt.updateQueue,ge.type=tt.type,m=tt.dependencies,ge.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),R=R.sibling;return Es(ut,ut.current&1|2),C.child}m=m.sibling}ge.tail!==null&&Ao()>Of&&(C.flags|=128,Q=!0,ap(ge,!1),C.lanes=4194304)}else{if(!Q)if(m=mt(tt),m!==null){if(C.flags|=128,Q=!0,R=m.updateQueue,R!==null&&(C.updateQueue=R,C.flags|=4),ap(ge,!0),ge.tail===null&&ge.tailMode==="hidden"&&!tt.alternate&&!fs)return Wl(C),null}else 2*Ao()-ge.renderingStartTime>Of&&R!==1073741824&&(C.flags|=128,Q=!0,ap(ge,!1),C.lanes=4194304);ge.isBackwards?(tt.sibling=C.child,C.child=tt):(R=ge.last,R!==null?R.sibling=tt:C.child=tt,ge.last=tt)}return ge.tail!==null?(C=ge.tail,ge.rendering=C,ge.tail=C.sibling,ge.renderingStartTime=Ao(),C.sibling=null,R=ut.current,Es(ut,Q?R&1|2:R&1),C):(Wl(C),null);case 22:case 23:return ng(),Q=C.memoizedState!==null,m!==null&&m.memoizedState!==null!==Q&&(C.flags|=8192),Q&&C.mode&1?Bs&1073741824&&(Wl(C),C.subtreeFlags&6&&(C.flags|=8192)):Wl(C),null;case 24:return null;case 25:return null}throw Error(t(156,C.tag))}function A(m,C){switch(pc(C),C.tag){case 1:return ya(C.type)&&kd(),m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 3:return $e(),zs(Aa),zs(ia),Bt(),m=C.flags,m&65536&&!(m&128)?(C.flags=m&-65537|128,C):null;case 5:return pt(C),null;case 13:if(zs(ut),m=C.memoizedState,m!==null&&m.dehydrated!==null){if(C.alternate===null)throw Error(t(340));mc()}return m=C.flags,m&65536?(C.flags=m&-65537|128,C):null;case 19:return zs(ut),null;case 4:return $e(),null;case 10:return va(C.type._context),null;case 22:case 23:return ng(),null;case 24:return null;default:return null}}var g=!1,E=!1,S=typeof WeakSet=="function"?WeakSet:Set,D=null;function Z(m,C){var R=m.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(Q){sl(m,C,Q)}else R.current=null}function Ae(m,C,R){try{R()}catch(Q){sl(m,C,Q)}}var Ce=!1;function Te(m,C){if(DA=Ie,m=is(),TA(m)){if("selectionStart"in m)var R={start:m.selectionStart,end:m.selectionEnd};else e:{R=(R=m.ownerDocument)&&R.defaultView||window;var Q=R.getSelection&&R.getSelection();if(Q&&Q.rangeCount!==0){R=Q.anchorNode;var le=Q.anchorOffset,ge=Q.focusNode;Q=Q.focusOffset;try{R.nodeType,ge.nodeType}catch{R=null;break e}var tt=0,It=-1,Wt=-1,xn=0,Ar=0,Cr=m,ir=null;t:for(;;){for(var qr;Cr!==R||le!==0&&Cr.nodeType!==3||(It=tt+le),Cr!==ge||Q!==0&&Cr.nodeType!==3||(Wt=tt+Q),Cr.nodeType===3&&(tt+=Cr.nodeValue.length),(qr=Cr.firstChild)!==null;)ir=Cr,Cr=qr;for(;;){if(Cr===m)break t;if(ir===R&&++xn===le&&(It=tt),ir===ge&&++Ar===Q&&(Wt=tt),(qr=Cr.nextSibling)!==null)break;Cr=ir,ir=Cr.parentNode}Cr=qr}R=It===-1||Wt===-1?null:{start:It,end:Wt}}else R=null}R=R||{start:0,end:0}}else R=null;for(dl={focusedElem:m,selectionRange:R},Ie=!1,D=C;D!==null;)if(C=D,m=C.child,(C.subtreeFlags&1028)!==0&&m!==null)m.return=C,D=m;else for(;D!==null;){C=D;try{var oi=C.alternate;if(C.flags&1024)switch(C.tag){case 0:case 11:case 15:break;case 1:if(oi!==null){var ai=oi.memoizedProps,vl=oi.memoizedState,cn=C.stateNode,Xt=cn.getSnapshotBeforeUpdate(C.elementType===C.type?ai:ml(C.type,ai),vl);cn.__reactInternalSnapshotBeforeUpdate=Xt}break;case 3:var dn=C.stateNode.containerInfo;dn.nodeType===1?dn.textContent="":dn.nodeType===9&&dn.documentElement&&dn.removeChild(dn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(_r){sl(C,C.return,_r)}if(m=C.sibling,m!==null){m.return=C.return,D=m;break}D=C.return}return oi=Ce,Ce=!1,oi}function je(m,C,R){var Q=C.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var le=Q=Q.next;do{if((le.tag&m)===m){var ge=le.destroy;le.destroy=void 0,ge!==void 0&&Ae(C,R,ge)}le=le.next}while(le!==Q)}}function yt(m,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var R=C=C.next;do{if((R.tag&m)===m){var Q=R.create;R.destroy=Q()}R=R.next}while(R!==C)}}function Mt(m){var C=m.ref;if(C!==null){var R=m.stateNode;switch(m.tag){case 5:m=R;break;default:m=R}typeof C=="function"?C(m):C.current=m}}function en(m){var C=m.alternate;C!==null&&(m.alternate=null,en(C)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(C=m.stateNode,C!==null&&(delete C[FA],delete C[Pc],delete C[Rh],delete C[ot],delete C[LA])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Qt(m){return m.tag===5||m.tag===3||m.tag===4}function wn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Qt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Ln(m,C,R){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?R.nodeType===8?R.parentNode.insertBefore(m,C):R.insertBefore(m,C):(R.nodeType===8?(C=R.parentNode,C.insertBefore(m,R)):(C=R,C.appendChild(m)),R=R._reactRootContainer,R!=null||C.onclick!==null||(C.onclick=Tc));else if(Q!==4&&(m=m.child,m!==null))for(Ln(m,C,R),m=m.sibling;m!==null;)Ln(m,C,R),m=m.sibling}function sr(m,C,R){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,C?R.insertBefore(m,C):R.appendChild(m);else if(Q!==4&&(m=m.child,m!==null))for(sr(m,C,R),m=m.sibling;m!==null;)sr(m,C,R),m=m.sibling}var Vn=null,wr=!1;function yr(m,C,R){for(R=R.child;R!==null;)Or(m,C,R),R=R.sibling}function Or(m,C,R){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(ea,R)}catch{}switch(R.tag){case 5:E||Z(R,C);case 6:var Q=Vn,le=wr;Vn=null,yr(m,C,R),Vn=Q,wr=le,Vn!==null&&(wr?(m=Vn,R=R.stateNode,m.nodeType===8?m.parentNode.removeChild(R):m.removeChild(R)):Vn.removeChild(R.stateNode));break;case 18:Vn!==null&&(wr?(m=Vn,R=R.stateNode,m.nodeType===8?RA(m.parentNode,R):m.nodeType===1&&RA(m,R),Di(m)):RA(Vn,R.stateNode));break;case 4:Q=Vn,le=wr,Vn=R.stateNode.containerInfo,wr=!0,yr(m,C,R),Vn=Q,wr=le;break;case 0:case 11:case 14:case 15:if(!E&&(Q=R.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){le=Q=Q.next;do{var ge=le,tt=ge.destroy;ge=ge.tag,tt!==void 0&&(ge&2||ge&4)&&Ae(R,C,tt),le=le.next}while(le!==Q)}yr(m,C,R);break;case 1:if(!E&&(Z(R,C),Q=R.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=R.memoizedProps,Q.state=R.memoizedState,Q.componentWillUnmount()}catch(It){sl(R,C,It)}yr(m,C,R);break;case 21:yr(m,C,R);break;case 22:R.mode&1?(E=(Q=E)||R.memoizedState!==null,yr(m,C,R),E=Q):yr(m,C,R);break;default:yr(m,C,R)}}function ni(m){var C=m.updateQueue;if(C!==null){m.updateQueue=null;var R=m.stateNode;R===null&&(R=m.stateNode=new S),C.forEach(function(Q){var le=lg.bind(null,m,Q);R.has(Q)||(R.add(Q),Q.then(le,le))})}}function zr(m,C){var R=C.deletions;if(R!==null)for(var Q=0;Q<R.length;Q++){var le=R[Q];try{var ge=m,tt=C,It=tt;e:for(;It!==null;){switch(It.tag){case 5:Vn=It.stateNode,wr=!1;break e;case 3:Vn=It.stateNode.containerInfo,wr=!0;break e;case 4:Vn=It.stateNode.containerInfo,wr=!0;break e}It=It.return}if(Vn===null)throw Error(t(160));Or(ge,tt,le),Vn=null,wr=!1;var Wt=le.alternate;Wt!==null&&(Wt.return=null),le.return=null}catch(xn){sl(le,C,xn)}}if(C.subtreeFlags&12854)for(C=C.child;C!==null;)Zi(C,m),C=C.sibling}function Zi(m,C){var R=m.alternate,Q=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(zr(C,m),jo(m),Q&4){try{je(3,m,m.return),yt(3,m)}catch(ai){sl(m,m.return,ai)}try{je(5,m,m.return)}catch(ai){sl(m,m.return,ai)}}break;case 1:zr(C,m),jo(m),Q&512&&R!==null&&Z(R,R.return);break;case 5:if(zr(C,m),jo(m),Q&512&&R!==null&&Z(R,R.return),m.flags&32){var le=m.stateNode;try{nt(le,"")}catch(ai){sl(m,m.return,ai)}}if(Q&4&&(le=m.stateNode,le!=null)){var ge=m.memoizedProps,tt=R!==null?R.memoizedProps:ge,It=m.type,Wt=m.updateQueue;if(m.updateQueue=null,Wt!==null)try{It==="input"&&ge.type==="radio"&&ge.name!=null&&Dt(le,ge),ve(It,tt);var xn=ve(It,ge);for(tt=0;tt<Wt.length;tt+=2){var Ar=Wt[tt],Cr=Wt[tt+1];Ar==="style"?tr(le,Cr):Ar==="dangerouslySetInnerHTML"?fe(le,Cr):Ar==="children"?nt(le,Cr):oe(le,Ar,Cr,xn)}switch(It){case"input":_n(le,ge);break;case"textarea":dr(le,ge);break;case"select":var ir=le._wrapperState.wasMultiple;le._wrapperState.wasMultiple=!!ge.multiple;var qr=ge.value;qr!=null?Dn(le,!!ge.multiple,qr,!1):ir!==!!ge.multiple&&(ge.defaultValue!=null?Dn(le,!!ge.multiple,ge.defaultValue,!0):Dn(le,!!ge.multiple,ge.multiple?[]:"",!1))}le[Pc]=ge}catch(ai){sl(m,m.return,ai)}}break;case 6:if(zr(C,m),jo(m),Q&4){if(m.stateNode===null)throw Error(t(162));le=m.stateNode,ge=m.memoizedProps;try{le.nodeValue=ge}catch(ai){sl(m,m.return,ai)}}break;case 3:if(zr(C,m),jo(m),Q&4&&R!==null&&R.memoizedState.isDehydrated)try{Di(C.containerInfo)}catch(ai){sl(m,m.return,ai)}break;case 4:zr(C,m),jo(m);break;case 13:zr(C,m),jo(m),le=m.child,le.flags&8192&&(ge=le.memoizedState!==null,le.stateNode.isHidden=ge,!ge||le.alternate!==null&&le.alternate.memoizedState!==null||(Bf=Ao())),Q&4&&ni(m);break;case 22:if(Ar=R!==null&&R.memoizedState!==null,m.mode&1?(E=(xn=E)||Ar,zr(C,m),E=xn):zr(C,m),jo(m),Q&8192){if(xn=m.memoizedState!==null,(m.stateNode.isHidden=xn)&&!Ar&&m.mode&1)for(D=m,Ar=m.child;Ar!==null;){for(Cr=D=Ar;D!==null;){switch(ir=D,qr=ir.child,ir.tag){case 0:case 11:case 14:case 15:je(4,ir,ir.return);break;case 1:Z(ir,ir.return);var oi=ir.stateNode;if(typeof oi.componentWillUnmount=="function"){Q=ir,R=ir.return;try{C=Q,oi.props=C.memoizedProps,oi.state=C.memoizedState,oi.componentWillUnmount()}catch(ai){sl(Q,R,ai)}}break;case 5:Z(ir,ir.return);break;case 22:if(ir.memoizedState!==null){Va(Cr);continue}}qr!==null?(qr.return=ir,D=qr):Va(Cr)}Ar=Ar.sibling}e:for(Ar=null,Cr=m;;){if(Cr.tag===5){if(Ar===null){Ar=Cr;try{le=Cr.stateNode,xn?(ge=le.style,typeof ge.setProperty=="function"?ge.setProperty("display","none","important"):ge.display="none"):(It=Cr.stateNode,Wt=Cr.memoizedProps.style,tt=Wt!=null&&Wt.hasOwnProperty("display")?Wt.display:null,It.style.display=sn("display",tt))}catch(ai){sl(m,m.return,ai)}}}else if(Cr.tag===6){if(Ar===null)try{Cr.stateNode.nodeValue=xn?"":Cr.memoizedProps}catch(ai){sl(m,m.return,ai)}}else if((Cr.tag!==22&&Cr.tag!==23||Cr.memoizedState===null||Cr===m)&&Cr.child!==null){Cr.child.return=Cr,Cr=Cr.child;continue}if(Cr===m)break e;for(;Cr.sibling===null;){if(Cr.return===null||Cr.return===m)break e;Ar===Cr&&(Ar=null),Cr=Cr.return}Ar===Cr&&(Ar=null),Cr.sibling.return=Cr.return,Cr=Cr.sibling}}break;case 19:zr(C,m),jo(m),Q&4&&ni(m);break;case 21:break;default:zr(C,m),jo(m)}}function jo(m){var C=m.flags;if(C&2){try{e:{for(var R=m.return;R!==null;){if(Qt(R)){var Q=R;break e}R=R.return}throw Error(t(160))}switch(Q.tag){case 5:var le=Q.stateNode;Q.flags&32&&(nt(le,""),Q.flags&=-33);var ge=wn(m);sr(m,ge,le);break;case 3:case 4:var tt=Q.stateNode.containerInfo,It=wn(m);Ln(m,It,tt);break;default:throw Error(t(161))}}catch(Wt){sl(m,m.return,Wt)}m.flags&=-3}C&4096&&(m.flags&=-4097)}function $a(m,C,R){D=m,oa(m)}function oa(m,C,R){for(var Q=(m.mode&1)!==0;D!==null;){var le=D,ge=le.child;if(le.tag===22&&Q){var tt=le.memoizedState!==null||g;if(!tt){var It=le.alternate,Wt=It!==null&&It.memoizedState!==null||E;It=g;var xn=E;if(g=tt,(E=Wt)&&!xn)for(D=le;D!==null;)tt=D,Wt=tt.child,tt.tag===22&&tt.memoizedState!==null?ba(le):Wt!==null?(Wt.return=tt,D=Wt):ba(le);for(;ge!==null;)D=ge,oa(ge),ge=ge.sibling;D=le,g=It,E=xn}_a(m)}else le.subtreeFlags&8772&&ge!==null?(ge.return=le,D=ge):_a(m)}}function _a(m){for(;D!==null;){var C=D;if(C.flags&8772){var R=C.alternate;try{if(C.flags&8772)switch(C.tag){case 0:case 11:case 15:E||yt(5,C);break;case 1:var Q=C.stateNode;if(C.flags&4&&!E)if(R===null)Q.componentDidMount();else{var le=C.elementType===C.type?R.memoizedProps:ml(C.type,R.memoizedProps);Q.componentDidUpdate(le,R.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ge=C.updateQueue;ge!==null&&z(C,ge,Q);break;case 3:var tt=C.updateQueue;if(tt!==null){if(R=null,C.child!==null)switch(C.child.tag){case 5:R=C.child.stateNode;break;case 1:R=C.child.stateNode}z(C,tt,R)}break;case 5:var It=C.stateNode;if(R===null&&C.flags&4){R=It;var Wt=C.memoizedProps;switch(C.type){case"button":case"input":case"select":case"textarea":Wt.autoFocus&&R.focus();break;case"img":Wt.src&&(R.src=Wt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(C.memoizedState===null){var xn=C.alternate;if(xn!==null){var Ar=xn.memoizedState;if(Ar!==null){var Cr=Ar.dehydrated;Cr!==null&&Di(Cr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}E||C.flags&512&&Mt(C)}catch(ir){sl(C,C.return,ir)}}if(C===m){D=null;break}if(R=C.sibling,R!==null){R.return=C.return,D=R;break}D=C.return}}function Va(m){for(;D!==null;){var C=D;if(C===m){D=null;break}var R=C.sibling;if(R!==null){R.return=C.return,D=R;break}D=C.return}}function ba(m){for(;D!==null;){var C=D;try{switch(C.tag){case 0:case 11:case 15:var R=C.return;try{yt(4,C)}catch(Wt){sl(C,R,Wt)}break;case 1:var Q=C.stateNode;if(typeof Q.componentDidMount=="function"){var le=C.return;try{Q.componentDidMount()}catch(Wt){sl(C,le,Wt)}}var ge=C.return;try{Mt(C)}catch(Wt){sl(C,ge,Wt)}break;case 5:var tt=C.return;try{Mt(C)}catch(Wt){sl(C,tt,Wt)}}}catch(Wt){sl(C,C.return,Wt)}if(C===m){D=null;break}var It=C.sibling;if(It!==null){It.return=C.return,D=It;break}D=C.return}}var hu=Math.ceil,Ra=ne.ReactCurrentDispatcher,Fa=ne.ReactCurrentOwner,ls=ne.ReactCurrentBatchConfig,vi=0,ms=null,Ns=null,da=0,Bs=0,ku=ka(0),_o=0,zh=null,Gl=0,eA=0,Cc=0,yl=null,Il=null,Bf=0,Of=1/0,jh=null,t0=!1,lp=null,Nh=null,n0=!1,If=null,qA=0,bm=0,J0=null,r0=-1,Up=0;function tA(){return vi&6?Ao():r0!==-1?r0:r0=Ao()}function Wh(m){return m.mode&1?vi&2&&da!==0?da&-da:ys.transition!==null?(Up===0&&(Up=nl()),Up):(m=Rr,m!==0||(m=window.event,m=m===void 0?16:ci(m.type)),m):1}function ad(m,C,R,Q){if(50<bm)throw bm=0,J0=null,Error(t(185));la(m,R,Q),(!(vi&2)||m!==ms)&&(m===ms&&(!(vi&2)&&(eA|=R),_o===4&&kf(m,da)),YA(m,Q),R===1&&vi===0&&!(C.mode&1)&&(Of=Ao()+500,Fh&&zA()))}function YA(m,C){var R=m.callbackNode;ei(m,C);var Q=Fs(m,m===ms?da:0);if(Q===0)R!==null&&rs(R),m.callbackNode=null,m.callbackPriority=0;else if(C=Q&-Q,m.callbackPriority!==C){if(R!=null&&rs(R),C===1)m.tag===0?Rc(A1.bind(null,m)):UA(A1.bind(null,m)),Od(function(){!(vi&6)&&zA()}),R=null;else{switch($i(Q)){case 1:R=Zl;break;case 4:R=so;break;case 16:R=Tr;break;case 536870912:R=Os;break;default:R=Tr}R=Qh(R,i0.bind(null,m))}m.callbackPriority=C,m.callbackNode=R}}function i0(m,C){if(r0=-1,Up=0,vi&6)throw Error(t(327));var R=m.callbackNode;if(Np()&&m.callbackNode!==R)return null;var Q=Fs(m,m===ms?da:0);if(Q===0)return null;if(Q&30||Q&m.expiredLanes||C)C=wm(m,Q);else{C=Q;var le=vi;vi|=2;var ge=rg();(ms!==m||da!==C)&&(jh=null,Of=Ao()+500,up(m,C));do try{ig();break}catch(It){jp(m,It)}while(!0);Bu(),Ra.current=ge,vi=le,Ns!==null?C=0:(ms=null,da=0,C=_o)}if(C!==0){if(C===2&&(le=Mi(m),le!==0&&(Q=le,C=zp(m,le))),C===1)throw R=zh,up(m,0),kf(m,Q),YA(m,Ao()),R;if(C===6)kf(m,Q);else{if(le=m.current.alternate,!(Q&30)&&!u1(le)&&(C=wm(m,Q),C===2&&(ge=Mi(m),ge!==0&&(Q=ge,C=zp(m,ge))),C===1))throw R=zh,up(m,0),kf(m,Q),YA(m,Ao()),R;switch(m.finishedWork=le,m.finishedLanes=Q,C){case 0:case 1:throw Error(t(345));case 2:Gh(m,Il,jh);break;case 3:if(kf(m,Q),(Q&130023424)===Q&&(C=Bf+500-Ao(),10<C)){if(Fs(m,0)!==0)break;if(le=m.suspendedLanes,(le&Q)!==Q){tA(),m.pingedLanes|=m.suspendedLanes&le;break}m.timeoutHandle=hl(Gh.bind(null,m,Il,jh),C);break}Gh(m,Il,jh);break;case 4:if(kf(m,Q),(Q&4194240)===Q)break;for(C=m.eventTimes,le=-1;0<Q;){var tt=31-vn(Q);ge=1<<tt,tt=C[tt],tt>le&&(le=tt),Q&=~ge}if(Q=le,Q=Ao()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*hu(Q/1960))-Q,10<Q){m.timeoutHandle=hl(Gh.bind(null,m,Il,jh),Q);break}Gh(m,Il,jh);break;case 5:Gh(m,Il,jh);break;default:throw Error(t(329))}}}return YA(m,Ao()),m.callbackNode===R?i0.bind(null,m):null}function zp(m,C){var R=yl;return m.current.memoizedState.isDehydrated&&(up(m,C).flags|=256),m=wm(m,C),m!==2&&(C=Il,Il=R,C!==null&&eg(C)),m}function eg(m){Il===null?Il=m:Il.push.apply(Il,m)}function u1(m){for(var C=m;;){if(C.flags&16384){var R=C.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var Q=0;Q<R.length;Q++){var le=R[Q],ge=le.getSnapshot;le=le.value;try{if(!ln(ge(),le))return!1}catch{return!1}}}if(R=C.child,C.subtreeFlags&16384&&R!==null)R.return=C,C=R;else{if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function kf(m,C){for(C&=~Cc,C&=~eA,m.suspendedLanes|=C,m.pingedLanes&=~C,m=m.expirationTimes;0<C;){var R=31-vn(C),Q=1<<R;m[R]=-1,C&=~Q}}function A1(m){if(vi&6)throw Error(t(327));Np();var C=Fs(m,0);if(!(C&1))return YA(m,Ao()),null;var R=wm(m,C);if(m.tag!==0&&R===2){var Q=Mi(m);Q!==0&&(C=Q,R=zp(m,Q))}if(R===1)throw R=zh,up(m,0),kf(m,C),YA(m,Ao()),R;if(R===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=C,Gh(m,Il,jh),YA(m,Ao()),null}function tg(m,C){var R=vi;vi|=1;try{return m(C)}finally{vi=R,vi===0&&(Of=Ao()+500,Fh&&zA())}}function Tf(m){If!==null&&If.tag===0&&!(vi&6)&&Np();var C=vi;vi|=1;var R=ls.transition,Q=Rr;try{if(ls.transition=null,Rr=1,m)return m()}finally{Rr=Q,ls.transition=R,vi=C,!(vi&6)&&zA()}}function ng(){Bs=ku.current,zs(ku)}function up(m,C){m.finishedWork=null,m.finishedLanes=0;var R=m.timeoutHandle;if(R!==-1&&(m.timeoutHandle=-1,Ac(R)),Ns!==null)for(R=Ns.return;R!==null;){var Q=R;switch(pc(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&kd();break;case 3:$e(),zs(Aa),zs(ia),Bt();break;case 5:pt(Q);break;case 4:$e();break;case 13:zs(ut);break;case 19:zs(ut);break;case 10:va(Q.type._context);break;case 22:case 23:ng()}R=R.return}if(ms=m,Ns=m=_c(m.current,null),da=Bs=C,_o=0,zh=null,Cc=eA=Gl=0,Il=yl=null,WA!==null){for(C=0;C<WA.length;C++)if(R=WA[C],Q=R.interleaved,Q!==null){R.interleaved=null;var le=Q.next,ge=R.pending;if(ge!==null){var tt=ge.next;ge.next=le,Q.next=tt}R.pending=Q}WA=null}return m}function jp(m,C){do{var R=Ns;try{if(Bu(),kt.current=od,Mn){for(var Q=Tt.memoizedState;Q!==null;){var le=Q.queue;le!==null&&(le.pending=null),Q=Q.next}Mn=!1}if(zt=0,Zt=nn=Tt=null,Bn=!1,yn=0,Fa.current=null,R===null||R.return===null){_o=1,zh=C,Ns=null;break}e:{var ge=m,tt=R.return,It=R,Wt=C;if(C=da,It.flags|=32768,Wt!==null&&typeof Wt=="object"&&typeof Wt.then=="function"){var xn=Wt,Ar=It,Cr=Ar.tag;if(!(Ar.mode&1)&&(Cr===0||Cr===11||Cr===15)){var ir=Ar.alternate;ir?(Ar.updateQueue=ir.updateQueue,Ar.memoizedState=ir.memoizedState,Ar.lanes=ir.lanes):(Ar.updateQueue=null,Ar.memoizedState=null)}var qr=Cm(tt);if(qr!==null){qr.flags&=-257,Fd(qr,tt,It,ge,C),qr.mode&1&&ip(ge,xn,C),C=qr,Wt=xn;var oi=C.updateQueue;if(oi===null){var ai=new Set;ai.add(Wt),C.updateQueue=ai}else oi.add(Wt);break e}else{if(!(C&1)){ip(ge,xn,C),xm();break e}Wt=Error(t(426))}}else if(fs&&It.mode&1){var vl=Cm(tt);if(vl!==null){!(vl.flags&65536)&&(vl.flags|=256),Fd(vl,tt,It,ge,C),Ml(sh(Wt,It));break e}}ge=Wt=sh(Wt,It),_o!==4&&(_o=2),yl===null?yl=[ge]:yl.push(ge),ge=tt;do{switch(ge.tag){case 3:ge.flags|=65536,C&=-C,ge.lanes|=C;var cn=lh(ge,Wt,C);w(ge,cn);break e;case 1:It=Wt;var Xt=ge.type,dn=ge.stateNode;if(!(ge.flags&128)&&(typeof Xt.getDerivedStateFromError=="function"||dn!==null&&typeof dn.componentDidCatch=="function"&&(Nh===null||!Nh.has(dn)))){ge.flags|=65536,C&=-C,ge.lanes|=C;var _r=bf(ge,It,C);w(ge,_r);break e}}ge=ge.return}while(ge!==null)}og(R)}catch(si){C=si,Ns===R&&R!==null&&(Ns=R=R.return);continue}break}while(!0)}function rg(){var m=Ra.current;return Ra.current=od,m===null?od:m}function xm(){(_o===0||_o===3||_o===2)&&(_o=4),ms===null||!(Gl&268435455)&&!(eA&268435455)||kf(ms,da)}function wm(m,C){var R=vi;vi|=2;var Q=rg();(ms!==m||da!==C)&&(jh=null,up(m,C));do try{kl();break}catch(le){jp(m,le)}while(!0);if(Bu(),vi=R,Ra.current=Q,Ns!==null)throw Error(t(261));return ms=null,da=0,_o}function kl(){for(;Ns!==null;)c1(Ns)}function ig(){for(;Ns!==null&&!aa();)c1(Ns)}function c1(m){var C=ug(m.alternate,m,Bs);m.memoizedProps=m.pendingProps,C===null?og(m):Ns=C,Fa.current=null}function og(m){var C=m;do{var R=C.alternate;if(m=C.return,C.flags&32768){if(R=A(R,C),R!==null){R.flags&=32767,Ns=R;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{_o=6,Ns=null;return}}else if(R=Ah(R,C,Bs),R!==null){Ns=R;return}if(C=C.sibling,C!==null){Ns=C;return}Ns=C=m}while(C!==null);_o===0&&(_o=5)}function Gh(m,C,R){var Q=Rr,le=ls.transition;try{ls.transition=null,Rr=1,sg(m,C,R,Q)}finally{ls.transition=le,Rr=Q}return null}function sg(m,C,R,Q){do Np();while(If!==null);if(vi&6)throw Error(t(327));R=m.finishedWork;var le=m.finishedLanes;if(R===null)return null;if(m.finishedWork=null,m.finishedLanes=0,R===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ge=R.lanes|R.childLanes;if(rc(m,ge),m===ms&&(Ns=ms=null,da=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||n0||(n0=!0,Qh(Tr,function(){return Np(),null})),ge=(R.flags&15990)!==0,R.subtreeFlags&15990||ge){ge=ls.transition,ls.transition=null;var tt=Rr;Rr=1;var It=vi;vi|=4,Fa.current=null,Te(m,R),Zi(R,m),yf(dl),Ie=!!DA,dl=DA=null,m.current=R,$a(R),cl(),vi=It,Rr=tt,ls.transition=ge}else m.current=R;if(n0&&(n0=!1,If=m,qA=le),ge=m.pendingLanes,ge===0&&(Nh=null),wt(R.stateNode),YA(m,Ao()),C!==null)for(Q=m.onRecoverableError,R=0;R<C.length;R++)le=C[R],Q(le.value,{componentStack:le.stack,digest:le.digest});if(t0)throw t0=!1,m=lp,lp=null,m;return qA&1&&m.tag!==0&&Np(),ge=m.pendingLanes,ge&1?m===J0?bm++:(bm=0,J0=m):bm=0,zA(),null}function Np(){if(If!==null){var m=$i(qA),C=ls.transition,R=Rr;try{if(ls.transition=null,Rr=16>m?16:m,If===null)var Q=!1;else{if(m=If,If=null,qA=0,vi&6)throw Error(t(331));var le=vi;for(vi|=4,D=m.current;D!==null;){var ge=D,tt=ge.child;if(D.flags&16){var It=ge.deletions;if(It!==null){for(var Wt=0;Wt<It.length;Wt++){var xn=It[Wt];for(D=xn;D!==null;){var Ar=D;switch(Ar.tag){case 0:case 11:case 15:je(8,Ar,ge)}var Cr=Ar.child;if(Cr!==null)Cr.return=Ar,D=Cr;else for(;D!==null;){Ar=D;var ir=Ar.sibling,qr=Ar.return;if(en(Ar),Ar===xn){D=null;break}if(ir!==null){ir.return=qr,D=ir;break}D=qr}}}var oi=ge.alternate;if(oi!==null){var ai=oi.child;if(ai!==null){oi.child=null;do{var vl=ai.sibling;ai.sibling=null,ai=vl}while(ai!==null)}}D=ge}}if(ge.subtreeFlags&2064&&tt!==null)tt.return=ge,D=tt;else e:for(;D!==null;){if(ge=D,ge.flags&2048)switch(ge.tag){case 0:case 11:case 15:je(9,ge,ge.return)}var cn=ge.sibling;if(cn!==null){cn.return=ge.return,D=cn;break e}D=ge.return}}var Xt=m.current;for(D=Xt;D!==null;){tt=D;var dn=tt.child;if(tt.subtreeFlags&2064&&dn!==null)dn.return=tt,D=dn;else e:for(tt=Xt;D!==null;){if(It=D,It.flags&2048)try{switch(It.tag){case 0:case 11:case 15:yt(9,It)}}catch(si){sl(It,It.return,si)}if(It===tt){D=null;break e}var _r=It.sibling;if(_r!==null){_r.return=It.return,D=_r;break e}D=It.return}}if(vi=le,zA(),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(ea,m)}catch{}Q=!0}return Q}finally{Rr=R,ls.transition=C}}return!1}function o0(m,C,R){C=sh(R,C),C=lh(m,C,1),m=c(m,C,1),C=tA(),m!==null&&(la(m,1,C),YA(m,C))}function sl(m,C,R){if(m.tag===3)o0(m,m,R);else for(;C!==null;){if(C.tag===3){o0(C,m,R);break}else if(C.tag===1){var Q=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Nh===null||!Nh.has(Q))){m=sh(R,m),m=bf(C,m,1),C=c(C,m,1),m=tA(),C!==null&&(la(C,1,m),YA(C,m));break}}C=C.return}}function mv(m,C,R){var Q=m.pingCache;Q!==null&&Q.delete(C),C=tA(),m.pingedLanes|=m.suspendedLanes&R,ms===m&&(da&R)===R&&(_o===4||_o===3&&(da&130023424)===da&&500>Ao()-Bf?up(m,0):Cc|=R),YA(m,C)}function ag(m,C){C===0&&(m.mode&1?(C=yo,yo<<=1,!(yo&130023424)&&(yo=4194304)):C=1);var R=tA();m=vA(m,C),m!==null&&(la(m,C,R),YA(m,R))}function $A(m){var C=m.memoizedState,R=0;C!==null&&(R=C.retryLane),ag(m,R)}function lg(m,C){var R=0;switch(m.tag){case 13:var Q=m.stateNode,le=m.memoizedState;le!==null&&(R=le.retryLane);break;case 19:Q=m.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(C),ag(m,R)}var ug;ug=function(m,C,R){if(m!==null)if(m.memoizedProps!==C.pendingProps||Aa.current)Ol=!0;else{if(!(m.lanes&R)&&!(C.flags&128))return Ol=!1,e0(m,C,R);Ol=!!(m.flags&131072)}else Ol=!1,fs&&C.flags&1048576&&th(C,iu,C.index);switch(C.lanes=0,C.tag){case 2:var Q=C.type;Lp(m,C),m=C.pendingProps;var le=Id(C,ia.current);su(C,R),le=pr(null,C,Q,m,le,R);var ge=Ti();return C.flags|=1,typeof le=="object"&&le!==null&&typeof le.render=="function"&&le.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,ya(Q)?(ge=!0,ru(C)):ge=!1,C.memoizedState=le.state!==null&&le.state!==void 0?le.state:null,Dd(C),le.updater=np,C.stateNode=le,le._reactInternals=C,oh(C,Q,m,R),C=wf(null,C,Q,!0,ge,R)):(C.tag=0,fs&&ge&&jA(C),cu(null,C,le,R),C=C.child),C;case 16:Q=C.elementType;e:{switch(Lp(m,C),m=C.pendingProps,le=Q._init,Q=le(Q._payload),C.type=Q,le=C.tag=a0(Q),m=ml(Q,m),le){case 0:C=uh(null,C,Q,m,R);break e;case 1:C=Ju(null,C,Q,m,R);break e;case 11:C=Rp(null,C,Q,m,R);break e;case 14:C=Fp(null,C,Q,ml(Q.type,m),R);break e}throw Error(t(306,Q,""))}return C;case 0:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ml(Q,le),uh(m,C,Q,le,R);case 1:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ml(Q,le),Ju(m,C,Q,le,R);case 3:e:{if(op(C),m===null)throw Error(t(387));Q=C.pendingProps,ge=C.memoizedState,le=ge.element,I(m,C),P(C,Q,null,R);var tt=C.memoizedState;if(Q=tt.element,ge.isDehydrated)if(ge={element:Q,isDehydrated:!1,cache:tt.cache,pendingSuspenseBoundaries:tt.pendingSuspenseBoundaries,transitions:tt.transitions},C.updateQueue.baseState=ge,C.memoizedState=ge,C.flags&256){le=sh(Error(t(423)),C),C=zc(m,C,Q,R,le);break e}else if(Q!==le){le=sh(Error(t(424)),C),C=zc(m,C,Q,R,le);break e}else for(xs=cc(C.stateNode.containerInfo.firstChild),Ta=C,fs=!0,Pr=null,R=Fc(C,null,Q,R),C.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(mc(),Q===le){C=Iu(m,C,R);break e}cu(m,C,Q,R)}C=C.child}return C;case 5:return Xe(C),m===null&&pl(C),Q=C.type,le=C.pendingProps,ge=m!==null?m.memoizedProps:null,tt=le.children,pA(Q,le)?tt=null:ge!==null&&pA(Q,ge)&&(C.flags|=32),du(m,C),cu(m,C,tt,R),C.child;case 6:return m===null&&pl(C),null;case 13:return Ef(m,C,R);case 4:return Ke(C,C.stateNode.containerInfo),Q=C.pendingProps,m===null?C.child=js(C,null,Q,R):cu(m,C,Q,R),C.child;case 11:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ml(Q,le),Rp(m,C,Q,le,R);case 7:return cu(m,C,C.pendingProps,R),C.child;case 8:return cu(m,C,C.pendingProps.children,R),C.child;case 12:return cu(m,C,C.pendingProps.children,R),C.child;case 10:e:{if(Q=C.type._context,le=C.pendingProps,ge=C.memoizedProps,tt=le.value,Es(Eu,Q._currentValue),Q._currentValue=tt,ge!==null)if(ln(ge.value,tt)){if(ge.children===le.children&&!Aa.current){C=Iu(m,C,R);break e}}else for(ge=C.child,ge!==null&&(ge.return=C);ge!==null;){var It=ge.dependencies;if(It!==null){tt=ge.child;for(var Wt=It.firstContext;Wt!==null;){if(Wt.context===Q){if(ge.tag===1){Wt=l(-1,R&-R),Wt.tag=2;var xn=ge.updateQueue;if(xn!==null){xn=xn.shared;var Ar=xn.pending;Ar===null?Wt.next=Wt:(Wt.next=Ar.next,Ar.next=Wt),xn.pending=Wt}}ge.lanes|=R,Wt=ge.alternate,Wt!==null&&(Wt.lanes|=R),$s(ge.return,R,C),It.lanes|=R;break}Wt=Wt.next}}else if(ge.tag===10)tt=ge.type===C.type?null:ge.child;else if(ge.tag===18){if(tt=ge.return,tt===null)throw Error(t(341));tt.lanes|=R,It=tt.alternate,It!==null&&(It.lanes|=R),$s(tt,R,C),tt=ge.sibling}else tt=ge.child;if(tt!==null)tt.return=ge;else for(tt=ge;tt!==null;){if(tt===C){tt=null;break}if(ge=tt.sibling,ge!==null){ge.return=tt.return,tt=ge;break}tt=tt.return}ge=tt}cu(m,C,le.children,R),C=C.child}return C;case 9:return le=C.type,Q=C.pendingProps.children,su(C,R),le=au(le),Q=Q(le),C.flags|=1,cu(m,C,Q,R),C.child;case 14:return Q=C.type,le=ml(Q,C.pendingProps),le=ml(Q.type,le),Fp(m,C,Q,le,R);case 15:return qo(m,C,C.type,C.pendingProps,R);case 17:return Q=C.type,le=C.pendingProps,le=C.elementType===Q?le:ml(Q,le),Lp(m,C),C.tag=1,ya(Q)?(m=!0,ru(C)):m=!1,su(C,R),ih(C,Q,le),oh(C,Q,le,R),wf(null,C,Q,!0,m,R);case 19:return Ud(m,C,R);case 22:return Uh(m,C,R)}throw Error(t(156,C.tag))};function Qh(m,C){return Ea(m,C)}function s0(m,C,R,Q){this.tag=m,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xA(m,C,R,Q){return new s0(m,C,R,Q)}function qh(m){return m=m.prototype,!(!m||!m.isReactComponent)}function a0(m){if(typeof m=="function")return qh(m)?1:0;if(m!=null){if(m=m.$$typeof,m===me)return 11;if(m===be)return 14}return 2}function _c(m,C){var R=m.alternate;return R===null?(R=xA(m.tag,C,m.key,m.mode),R.elementType=m.elementType,R.type=m.type,R.stateNode=m.stateNode,R.alternate=m,m.alternate=R):(R.pendingProps=C,R.type=m.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=m.flags&14680064,R.childLanes=m.childLanes,R.lanes=m.lanes,R.child=m.child,R.memoizedProps=m.memoizedProps,R.memoizedState=m.memoizedState,R.updateQueue=m.updateQueue,C=m.dependencies,R.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},R.sibling=m.sibling,R.index=m.index,R.ref=m.ref,R}function l0(m,C,R,Q,le,ge){var tt=2;if(Q=m,typeof m=="function")qh(m)&&(tt=1);else if(typeof m=="string")tt=5;else e:switch(m){case G:return Ap(R.children,le,ge,C);case ie:tt=8,le|=8;break;case he:return m=xA(12,R,C,le|2),m.elementType=he,m.lanes=ge,m;case Se:return m=xA(13,R,C,le),m.elementType=Se,m.lanes=ge,m;case De:return m=xA(19,R,C,le),m.elementType=De,m.lanes=ge,m;case Ze:return Mm(R,le,ge,C);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case pe:tt=10;break e;case Ee:tt=9;break e;case me:tt=11;break e;case be:tt=14;break e;case at:tt=16,Q=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return C=xA(tt,R,C,le),C.elementType=m,C.type=Q,C.lanes=ge,C}function Ap(m,C,R,Q){return m=xA(7,m,Q,C),m.lanes=R,m}function Mm(m,C,R,Q){return m=xA(22,m,Q,C),m.elementType=Ze,m.lanes=R,m.stateNode={isHidden:!1},m}function u0(m,C,R){return m=xA(6,m,null,C),m.lanes=R,m}function Ag(m,C,R){return C=xA(4,m.children!==null?m.children:[],m.key,C),C.lanes=R,C.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},C}function d1(m,C,R,Q,le){this.tag=C,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ai(0),this.expirationTimes=Ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.identifierPrefix=Q,this.onRecoverableError=le,this.mutableSourceEagerHydrationData=null}function A0(m,C,R,Q,le,ge,tt,It,Wt){return m=new d1(m,C,R,It,Wt),C===1?(C=1,ge===!0&&(C|=8)):C=0,ge=xA(3,null,null,C),m.current=ge,ge.stateNode=m,ge.memoizedState={element:Q,isDehydrated:R,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dd(ge),m}function cg(m,C,R){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:Q==null?null:""+Q,children:m,containerInfo:C,implementation:R}}function c0(m){if(!m)return Kc;m=m._reactInternals;e:{if(Yi(m)!==m||m.tag!==1)throw Error(t(170));var C=m;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(ya(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(t(171))}if(m.tag===1){var R=m.type;if(ya(R))return dc(m,R,C)}return C}function h1(m,C,R,Q,le,ge,tt,It,Wt){return m=A0(R,Q,!0,m,le,ge,tt,It,Wt),m.context=c0(null),R=m.current,Q=tA(),le=Wh(R),ge=l(Q,le),ge.callback=C??null,c(R,ge,le),m.current.lanes=le,la(m,le,Q),YA(m,Q),m}function Sm(m,C,R,Q){var le=C.current,ge=tA(),tt=Wh(le);return R=c0(R),C.context===null?C.context=R:C.pendingContext=R,C=l(ge,tt),C.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(C.callback=Q),m=c(le,C,tt),m!==null&&(ad(m,le,tt,ge),_(m,le,tt)),tt}function d0(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function f1(m,C){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var R=m.retryLane;m.retryLane=R!==0&&R<C?R:C}}function dg(m,C){f1(m,C),(m=m.alternate)&&f1(m,C)}var p1=typeof reportError=="function"?reportError:function(m){console.error(m)};function hg(m){this._internalRoot=m}Wp.prototype.render=hg.prototype.render=function(m){var C=this._internalRoot;if(C===null)throw Error(t(409));Sm(m,C,null,null)},Wp.prototype.unmount=hg.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var C=m.containerInfo;Tf(function(){Sm(null,m,null,null)}),C[wu]=null}};function Wp(m){this._internalRoot=m}Wp.prototype.unstable_scheduleHydration=function(m){if(m){var C=Gs();m={blockedOn:null,target:m,priority:C};for(var R=0;R<Ia.length&&C!==0&&C<Ia[R].priority;R++);Ia.splice(R,0,m),R===0&&zi(m)}};function Em(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Pf(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function zd(){}function Kf(m,C,R,Q,le){if(le){if(typeof Q=="function"){var ge=Q;Q=function(){var xn=d0(tt);ge.call(xn)}}var tt=h1(C,Q,m,0,null,!1,!1,"",zd);return m._reactRootContainer=tt,m[wu]=tt.current,Yu(m.nodeType===8?m.parentNode:m),Tf(),tt}for(;le=m.lastChild;)m.removeChild(le);if(typeof Q=="function"){var It=Q;Q=function(){var xn=d0(Wt);It.call(xn)}}var Wt=A0(m,0,!1,null,null,!1,!1,"",zd);return m._reactRootContainer=Wt,m[wu]=Wt.current,Yu(m.nodeType===8?m.parentNode:m),Tf(function(){Sm(C,Wt,R,Q)}),Wt}function Bm(m,C,R,Q,le){var ge=R._reactRootContainer;if(ge){var tt=ge;if(typeof le=="function"){var It=le;le=function(){var Wt=d0(tt);It.call(Wt)}}Sm(C,tt,m,le)}else tt=Kf(R,C,m,le,Q);return d0(tt)}vo=function(m){switch(m.tag){case 3:var C=m.stateNode;if(C.current.memoizedState.isDehydrated){var R=_s(C.pendingLanes);R!==0&&(Ba(C,R|1),YA(C,Ao()),!(vi&6)&&(Of=Ao()+500,zA()))}break;case 13:Tf(function(){var Q=vA(m,1);if(Q!==null){var le=tA();ad(Q,m,1,le)}}),dg(m,1)}},yu=function(m){if(m.tag===13){var C=vA(m,134217728);if(C!==null){var R=tA();ad(C,m,134217728,R)}dg(m,134217728)}},Mo=function(m){if(m.tag===13){var C=Wh(m),R=vA(m,C);if(R!==null){var Q=tA();ad(R,m,C,Q)}dg(m,C)}},Gs=function(){return Rr},Qs=function(m,C){var R=Rr;try{return Rr=m,C()}finally{Rr=R}},Ye=function(m,C,R){switch(C){case"input":if(_n(m,R),C=R.name,R.type==="radio"&&C!=null){for(R=m;R.parentNode;)R=R.parentNode;for(R=R.querySelectorAll("input[name="+JSON.stringify(""+C)+'][type="radio"]'),C=0;C<R.length;C++){var Q=R[C];if(Q!==m&&Q.form===m.form){var le=os(Q);if(!le)throw Error(t(90));_t(Q),_n(Q,le)}}}break;case"textarea":dr(m,R);break;case"select":C=R.value,C!=null&&Dn(m,!!R.multiple,C,!1)}},jt=tg,xt=Tf;var Gp={usingClientEntryPoint:!1,Events:[mi,ii,os,qt,Gt,tg]},Om={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gv={bundleType:Om.bundleType,version:Om.version,rendererPackageName:Om.rendererPackageName,rendererConfig:Om.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Pi(m),m===null?null:m.stateNode},findFiberByHostInstance:Om.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cp.isDisabled&&cp.supportsFiber)try{ea=cp.inject(gv),qe=cp}catch{}}return hh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gp,hh.createPortal=function(m,C){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Em(C))throw Error(t(200));return cg(m,C,null,R)},hh.createRoot=function(m,C){if(!Em(m))throw Error(t(299));var R=!1,Q="",le=p1;return C!=null&&(C.unstable_strictMode===!0&&(R=!0),C.identifierPrefix!==void 0&&(Q=C.identifierPrefix),C.onRecoverableError!==void 0&&(le=C.onRecoverableError)),C=A0(m,1,!1,null,null,R,!1,Q,le),m[wu]=C.current,Yu(m.nodeType===8?m.parentNode:m),new hg(C)},hh.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var C=m._reactInternals;if(C===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=Pi(C),m=m===null?null:m.stateNode,m},hh.flushSync=function(m){return Tf(m)},hh.hydrate=function(m,C,R){if(!Pf(C))throw Error(t(200));return Bm(null,m,C,!0,R)},hh.hydrateRoot=function(m,C,R){if(!Em(m))throw Error(t(405));var Q=R!=null&&R.hydratedSources||null,le=!1,ge="",tt=p1;if(R!=null&&(R.unstable_strictMode===!0&&(le=!0),R.identifierPrefix!==void 0&&(ge=R.identifierPrefix),R.onRecoverableError!==void 0&&(tt=R.onRecoverableError)),C=h1(C,null,m,1,R??null,le,!1,ge,tt),m[wu]=C.current,Yu(m),Q)for(m=0;m<Q.length;m++)R=Q[m],le=R._getVersion,le=le(R._source),C.mutableSourceEagerHydrationData==null?C.mutableSourceEagerHydrationData=[R,le]:C.mutableSourceEagerHydrationData.push(R,le);return new Wp(C)},hh.render=function(m,C,R){if(!Pf(C))throw Error(t(200));return Bm(null,m,C,!1,R)},hh.unmountComponentAtNode=function(m){if(!Pf(m))throw Error(t(40));return m._reactRootContainer?(Tf(function(){Bm(null,null,m,!1,function(){m._reactRootContainer=null,m[wu]=null})}),!0):!1},hh.unstable_batchedUpdates=tg,hh.unstable_renderSubtreeIntoContainer=function(m,C,R,Q){if(!Pf(R))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return Bm(m,C,R,!1,Q)},hh.version="18.3.1-next-f1338f8080-20240426",hh}var P7;function o_(){if(P7)return a4.exports;P7=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),a4.exports=DQ(),a4.exports}var K7;function RQ(){if(K7)return ab;K7=1;var n=o_();return ab.createRoot=n.createRoot,ab.hydrateRoot=n.hydrateRoot,ab}var FQ=RQ();const LQ="modulepreload",UQ=function(n){return"/maputnik/"+n},D7={},w1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=UQ(f),f in D7)return;D7[f]=!0;const y=f.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const B=document.createElement("link");if(B.rel=y?"stylesheet":LQ,y||(B.as="script"),B.crossOrigin="",B.href=f,o&&B.setAttribute("nonce",o),document.head.appendChild(B),y)return new Promise((O,T)=>{B.addEventListener("load",O),B.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},zQ=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Do=n=>typeof n=="string",Iv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},R7=n=>n==null?"":""+n,jQ=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},NQ=/###/g,F7=n=>n&&n.indexOf("###")>-1?n.replace(NQ,"."):n,L7=n=>!n||Do(n),uC=(n,e,t)=>{const r=Do(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(L7(n))return{};const s=F7(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return L7(n)?{}:{obj:n,k:F7(r[i])}},U7=(n,e,t)=>{const{obj:r,k:i}=uC(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=uC(n,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=uC(n,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},WQ=(n,e,t,r)=>{const{obj:i,k:s}=uC(n,e,Object);i[s]=i[s]||[],i[s].push(t)},g2=(n,e)=>{const{obj:t,k:r}=uC(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},GQ=(n,e,t)=>{const r=g2(n,t);return r!==void 0?r:g2(e,t)},nL=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Do(n[r])||n[r]instanceof String||Do(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):nL(n[r],e[r],t):n[r]=e[r]);return n},M1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var QQ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const qQ=n=>Do(n)?n.replace(/[&<>"'\/]/g,e=>QQ[e]):n;class YQ{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const $Q=[" ",",","?","!",";"],VQ=new YQ(20),HQ=(n,e,t)=>{e=e||"",t=t||"";const r=$Q.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const i=VQ.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(n);if(!s){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(s=!0)}return s},_6=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,o="";for(let f=s;f<r.length;++f)if(f!==s&&(o+=t),o+=r[f],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&f<r.length-1)continue;s+=f-s+1;break}i=a}return i},y2=n=>n==null?void 0:n.replace("_","-"),ZQ={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class v2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||ZQ,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(Do(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new v2(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new v2(this.logger,e)}}var nm=new v2;class Ex{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,f]=a;for(let y=0;y<f;y++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,f]=a;for(let y=0;y<f;y++)o.apply(o,[e,...r])})}}class z7 extends Ex{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var y,x;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):Do(r)&&s?o.push(...r.split(s)):o.push(r)));const f=g2(this.data,o);return!f&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),f||!a||!Do(r)?f:_6((x=(y=this.data)==null?void 0:y[e])==null?void 0:x[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),U7(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Do(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let f=g2(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?nL(f,r,s):f={...f,...r},U7(this.data,o,f),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var rL={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,t,r,i))??e}),e}};const j7={},N7=n=>!Do(n)&&typeof n!="boolean"&&typeof n!="number";class C2 extends Ex{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),jQ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=nm.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!HQ(e,r,i);if(a&&!o){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:Do(s)?[s]:s};const y=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(y[0])>-1)&&(s=y.shift()),e=y.join(i)}return{key:e,namespaces:Do(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),f=o[o.length-1],y=t.lng||this.language,x=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((y==null?void 0:y.toLowerCase())==="cimode"){if(x){const Ee=t.nsSeparator||this.options.nsSeparator;return i?{res:`${f}${Ee}${a}`,usedKey:a,exactUsedKey:a,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(t)}:`${f}${Ee}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:y,usedNS:f,usedParams:this.getUsedParamsDetails(t)}:a}const B=this.resolve(e,t);let O=B==null?void 0:B.res;const T=(B==null?void 0:B.usedKey)||a,F=(B==null?void 0:B.exactUsedKey)||a,j=["[object Number]","[object Function]","[object RegExp]"],N=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,H=t.count!==void 0&&!Do(t.count),oe=C2.hasDefaultValue(t),ne=H?this.pluralResolver.getSuffix(y,t.count,t):"",$=t.ordinal&&H?this.pluralResolver.getSuffix(y,t.count,{ordinal:!1}):"",te=H&&!t.ordinal&&t.count===0,G=te&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${ne}`]||t[`defaultValue${$}`]||t.defaultValue;let ie=O;q&&!O&&oe&&(ie=G);const he=N7(ie),pe=Object.prototype.toString.apply(ie);if(q&&ie&&he&&j.indexOf(pe)<0&&!(Do(N)&&Array.isArray(ie))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(T,ie,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(B.res=Ee,B.usedParams=this.getUsedParamsDetails(t),B):Ee}if(s){const Ee=Array.isArray(ie),me=Ee?[]:{},Se=Ee?F:T;for(const De in ie)if(Object.prototype.hasOwnProperty.call(ie,De)){const be=`${Se}${s}${De}`;oe&&!O?me[De]=this.translate(be,{...t,defaultValue:N7(G)?G[De]:void 0,joinArrays:!1,ns:o}):me[De]=this.translate(be,{...t,joinArrays:!1,ns:o}),me[De]===be&&(me[De]=ie[De])}O=me}}else if(q&&Do(N)&&Array.isArray(O))O=O.join(N),O&&(O=this.extendTranslation(O,e,t,r));else{let Ee=!1,me=!1;!this.isValidLookup(O)&&oe&&(Ee=!0,O=G),this.isValidLookup(O)||(me=!0,O=a);const De=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:O,be=oe&&G!==O&&this.options.updateMissing;if(me||Ee||be){if(this.logger.log(be?"updateKey":"missingKey",y,f,a,be?G:O),s){const We=this.resolve(a,{...t,keySeparator:!1});We&&We.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let at=[];const Ze=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ze&&Ze[0])for(let We=0;We<Ze.length;We++)at.push(Ze[We]);else this.options.saveMissingTo==="all"?at=this.languageUtils.toResolveHierarchy(t.lng||this.language):at.push(t.lng||this.language);const Je=(We,Me,Fe)=>{var bt;const He=oe&&Fe!==O?Fe:De;this.options.missingKeyHandler?this.options.missingKeyHandler(We,f,Me,He,be,t):(bt=this.backendConnector)!=null&&bt.saveMissing&&this.backendConnector.saveMissing(We,f,Me,He,be,t),this.emit("missingKey",We,f,Me,O)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?at.forEach(We=>{const Me=this.pluralResolver.getSuffixes(We,t);te&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Me.indexOf(`${this.options.pluralSeparator}zero`)<0&&Me.push(`${this.options.pluralSeparator}zero`),Me.forEach(Fe=>{Je([We],a+Fe,t[`defaultValue${Fe}`]||G)})}):Je(at,a,G))}O=this.extendTranslation(O,e,t,B,r),me&&O===a&&this.options.appendNamespaceToMissingKey&&(O=`${f}:${a}`),(me||Ee)&&this.options.parseMissingKeyHandler&&(O=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}:${a}`:a,Ee?O:void 0))}return i?(B.res=O,B.usedParams=this.getUsedParamsDetails(t),B):O}extendTranslation(e,t,r,i,s){var y,x;var a=this;if((y=this.i18nFormat)!=null&&y.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const B=Do(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let O;if(B){const F=e.match(this.interpolator.nestingRegexp);O=F&&F.length}let T=r.replace&&!Do(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(T={...this.options.interpolation.defaultVariables,...T}),e=this.interpolator.interpolate(e,T,r.lng||this.language||i.usedLng,r),B){const F=e.match(this.interpolator.nestingRegexp),j=F&&F.length;O<j&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var F=arguments.length,j=new Array(F),N=0;N<F;N++)j[N]=arguments[N];return(s==null?void 0:s[0])===j[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${j[0]} in key: ${t[0]}`),null):a.translate(...j,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,f=Do(o)?[o]:o;return e!=null&&(f!=null&&f.length)&&r.applyPostProcessor!==!1&&(e=rL.handle(f,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,o;return Do(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(r))return;const y=this.extractFromKey(f,t),x=y.key;i=x;let B=y.namespaces;this.options.fallbackNS&&(B=B.concat(this.options.fallbackNS));const O=t.count!==void 0&&!Do(t.count),T=O&&!t.ordinal&&t.count===0,F=t.context!==void 0&&(Do(t.context)||typeof t.context=="number")&&t.context!=="",j=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);B.forEach(N=>{var q,H;this.isValidLookup(r)||(o=N,!j7[`${j[0]}-${N}`]&&((q=this.utils)!=null&&q.hasLoadedNamespace)&&!((H=this.utils)!=null&&H.hasLoadedNamespace(o))&&(j7[`${j[0]}-${N}`]=!0,this.logger.warn(`key "${i}" for languages "${j.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(oe=>{var te;if(this.isValidLookup(r))return;a=oe;const ne=[x];if((te=this.i18nFormat)!=null&&te.addLookupKeys)this.i18nFormat.addLookupKeys(ne,x,oe,N,t);else{let G;O&&(G=this.pluralResolver.getSuffix(oe,t.count,t));const ie=`${this.options.pluralSeparator}zero`,he=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(O&&(ne.push(x+G),t.ordinal&&G.indexOf(he)===0&&ne.push(x+G.replace(he,this.options.pluralSeparator)),T&&ne.push(x+ie)),F){const pe=`${x}${this.options.contextSeparator}${t.context}`;ne.push(pe),O&&(ne.push(pe+G),t.ordinal&&G.indexOf(he)===0&&ne.push(pe+G.replace(he,this.options.pluralSeparator)),T&&ne.push(pe+ie))}}let $;for(;$=ne.pop();)this.isValidLookup(r)||(s=$,r=this.getResource(oe,N,$,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Do(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class W7{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=nm.create("languageUtils")}getScriptPartFromCode(e){if(e=y2(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=y2(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Do(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Do(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Do(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Do(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}const G7={zero:0,one:1,two:2,few:3,many:4,other:5},Q7={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class XQ{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=nm.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=y2(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Q7;if(!e.match(/-|_/))return Q7;const f=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(f,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>G7[i]-G7[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const q7=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=GQ(n,e,t);return!s&&i&&Do(t)&&(s=_6(n,t,r),s===void 0&&(s=_6(e,t,r))),s},A4=n=>n.replace(/\$/g,"$$$$");class JQ{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=nm.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:f,formatSeparator:y,unescapeSuffix:x,unescapePrefix:B,nestingPrefix:O,nestingPrefixEscaped:T,nestingSuffix:F,nestingSuffixEscaped:j,nestingOptionsSeparator:N,maxReplaces:q,alwaysFormat:H}=e.interpolation;this.escape=t!==void 0?t:qQ,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?M1(s):a||"{{",this.suffix=o?M1(o):f||"}}",this.formatSeparator=y||",",this.unescapePrefix=x?"":B||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=O?M1(O):T||M1("$t("),this.nestingSuffix=F?M1(F):j||M1(")"),this.nestingOptionsSeparator=N||",",this.maxReplaces=q||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var T;let s,a,o;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},y=F=>{if(F.indexOf(this.formatSeparator)<0){const H=q7(t,f,F,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(H,void 0,r,{...i,...t,interpolationkey:F}):H}const j=F.split(this.formatSeparator),N=j.shift().trim(),q=j.join(this.formatSeparator).trim();return this.format(q7(t,f,N,this.options.keySeparator,this.options.ignoreJSONStructure),q,r,{...i,...t,interpolationkey:N})};this.resetRegExp();const x=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,B=((T=i==null?void 0:i.interpolation)==null?void 0:T.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:F=>A4(F)},{regex:this.regexp,safeValue:F=>this.escapeValue?A4(this.escape(F)):A4(F)}].forEach(F=>{for(o=0;s=F.regex.exec(e);){const j=s[1].trim();if(a=y(j),a===void 0)if(typeof x=="function"){const q=x(e,s,i);a=Do(q)?q:""}else if(i&&Object.prototype.hasOwnProperty.call(i,j))a="";else if(B){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),a="";else!Do(a)&&!this.useRawValueToEscape&&(a=R7(a));const N=F.safeValue(a);if(e=e.replace(s[0],N),B?(F.regex.lastIndex+=a.length,F.regex.lastIndex-=s[0].length):F.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(f,y)=>{const x=this.nestingOptionsSeparator;if(f.indexOf(x)<0)return f;const B=f.split(new RegExp(`${x}[ ]*{`));let O=`{${B[1]}`;f=B[0],O=this.interpolate(O,a);const T=O.match(/'/g),F=O.match(/"/g);(((T==null?void 0:T.length)??0)%2===0&&!F||F.length%2!==0)&&(O=O.replace(/'/g,'"'));try{a=JSON.parse(O),y&&(a={...y,...a})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,j),`${f}${x}${O}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,f};for(;i=this.nestingRegexp.exec(e);){let f=[];a={...r},a=a.replace&&!Do(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let y=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const x=i[1].split(this.formatSeparator).map(B=>B.trim());i[1]=x.shift(),f=x,y=!0}if(s=t(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!Do(s))return s;Do(s)||(s=R7(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),y&&(s=f.reduce((x,B)=>this.format(x,B,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const eq=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...f]=a.split(":"),y=f.join(":").trim().replace(/^'+|'+$/g,""),x=o.trim();t[x]||(t[x]=y),y==="false"&&(t[x]=!1),y==="true"&&(t[x]=!0),isNaN(y)||(t[x]=parseInt(y,10))}})}return{formatName:e,formatOptions:t}},S1=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=e[a];return o||(o=n(y2(r),i),e[a]=o),o(t)}};class tq{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=nm.create("formatter"),this.options=e,this.formats={number:S1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:S1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:S1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:S1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:S1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=S1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(f=>f.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,f)=>{var B;const{formatName:y,formatOptions:x}=eq(f);if(this.formats[y]){let O=o;try{const T=((B=i==null?void 0:i.formatParams)==null?void 0:B[i.interpolationkey])||{},F=T.locale||T.lng||i.locale||i.lng||r;O=this.formats[y](o,F,{...x,...i,...T})}catch(T){this.logger.warn(T)}return O}else this.logger.warn(`there was no format function for ${y}`);return o},e)}}const nq=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class rq extends Ex{constructor(e,t,r){var s,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=nm.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},a={},o={},f={};return e.forEach(y=>{let x=!0;t.forEach(B=>{const O=`${y}|${B}`;!r.reload&&this.store.hasResourceBundle(y,B)?this.state[O]=2:this.state[O]<0||(this.state[O]===1?a[O]===void 0&&(a[O]=!0):(this.state[O]=1,x=!1,a[O]===void 0&&(a[O]=!0),s[O]===void 0&&(s[O]=!0),f[B]===void 0&&(f[B]=!0)))}),x||(o[y]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(f)}}loaded(e,t,r){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(f=>{WQ(f.loaded,[s],a),nq(f,e),t&&f.errors.push(t),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(y=>{o[y]||(o[y]={});const x=f.loaded[y];x.length&&x.forEach(B=>{o[y][B]===void 0&&(o[y][B]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(f=>!f.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(y,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const B=this.waitingReads.shift();this.read(B.lng,B.ns,B.fcName,B.tried,B.wait,B.callback)}if(y&&x&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,a)},s);return}a(y,x)},f=this.backend[r].bind(this.backend);if(f.length===2){try{const y=f(e,t);y&&typeof y.then=="function"?y.then(x=>o(null,x)).catch(o):o(null,y)}catch(y){o(y)}return}return f(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Do(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Do(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,r,i,s){var f,y,x,B,O;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((y=(f=this.services)==null?void 0:f.utils)!=null&&y.hasLoadedNamespace&&!((B=(x=this.services)==null?void 0:x.utils)!=null&&B.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((O=this.backend)!=null&&O.create){const T={...a,isUpdate:s},F=this.backend.create.bind(this.backend);if(F.length<6)try{let j;F.length===5?j=F(e,t,r,i,T):j=F(e,t,r,i),j&&typeof j.then=="function"?j.then(N=>o(null,N)).catch(o):o(null,j)}catch(j){o(j)}else F(e,t,r,i,o,T)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const Y7=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Do(n[1])&&(e.defaultValue=n[1]),Do(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),$7=n=>{var e,t;return Do(n.ns)&&(n.ns=[n.ns]),Do(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Do(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},lb=()=>{},iq=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class MC extends Ex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=$7(e),this.services={},this.logger=nm,this.modules={external:[]},iq(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Do(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=Y7();this.options={...i,...this.options,...$7(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?nm.init(s(this.modules.logger),this.options):nm.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=tq;const B=new W7(this.options);this.store=new z7(this.options.resources,this.options);const O=this.services;O.logger=nm,O.resourceStore=this.store,O.languageUtils=B,O.pluralResolver=new XQ(B,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),x&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(O.formatter=s(x),O.formatter.init(O,this.options),this.options.interpolation.format=O.formatter.format.bind(O.formatter)),O.interpolator=new JQ(this.options),O.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},O.backendConnector=new rq(s(this.modules.backend),O.resourceStore,O,this.options),O.backendConnector.on("*",function(T){for(var F=arguments.length,j=new Array(F>1?F-1:0),N=1;N<F;N++)j[N-1]=arguments[N];e.emit(T,...j)}),this.modules.languageDetector&&(O.languageDetector=s(this.modules.languageDetector),O.languageDetector.init&&O.languageDetector.init(O,this.options.detection,this.options)),this.modules.i18nFormat&&(O.i18nFormat=s(this.modules.i18nFormat),O.i18nFormat.init&&O.i18nFormat.init(this)),this.translator=new C2(this.services,this.options),this.translator.on("*",function(T){for(var F=arguments.length,j=new Array(F>1?F-1:0),N=1;N<F;N++)j[N-1]=arguments[N];e.emit(T,...j)}),this.modules.external.forEach(T=>{T.init&&T.init(this)})}if(this.format=this.options.interpolation.format,r||(r=lb),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=function(){return e.store[x](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=function(){return e.store[x](...arguments),e}});const f=Iv(),y=()=>{const x=(B,O)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(O),r(B,O)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?y():setTimeout(y,0),f}loadResources(e){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lb;const i=Do(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],f=y=>{if(!y||y==="cimode")return;this.services.languageUtils.toResolveHierarchy(y).forEach(B=>{B!=="cimode"&&o.indexOf(B)<0&&o.push(B)})};i?f(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(x=>f(x)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,y=>f(y)),this.services.backendConnector.load(o,this.options.ns,y=>{!y&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(y)})}else r(null)}reloadResources(e,t,r){const i=Iv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=lb),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&rL.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=Iv();this.emit("languageChanging",e);const s=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},a=(f,y)=>{y?(s(y),this.translator.changeLanguage(y),this.isLanguageChangingTo=void 0,this.emit("languageChanged",y),this.logger.log("languageChanged",y)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(f,function(){return r.t(...arguments)})},o=f=>{var x,B;!e&&!f&&this.services.languageDetector&&(f=[]);const y=Do(f)?f:this.services.languageUtils.getBestMatchFromCodes(f);y&&(this.language||s(y),this.translator.language||this.translator.changeLanguage(y),(B=(x=this.services.languageDetector)==null?void 0:x.cacheUserLanguage)==null||B.call(x,y)),this.loadResources(y,O=>{a(O,y)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(a,o){let f;if(typeof o!="object"){for(var y=arguments.length,x=new Array(y>2?y-2:0),B=2;B<y;B++)x[B-2]=arguments[B];f=i.options.overloadTranslationOptionHandler([a,o].concat(x))}else f={...o};f.lng=f.lng||s.lng,f.lngs=f.lngs||s.lngs,f.ns=f.ns||s.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||r||s.keyPrefix);const O=i.options.keySeparator||".";let T;return f.keyPrefix&&Array.isArray(a)?T=a.map(F=>`${f.keyPrefix}${O}${F}`):T=f.keyPrefix?`${f.keyPrefix}${O}${a}`:a,i.t(T,f)};return Do(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,f)=>{const y=this.services.backendConnector.state[`${o}|${f}`];return y===-1||y===0||y===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const r=Iv();return this.options.ns?(Do(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Iv();Do(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new W7(Y7());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new MC(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lb;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new MC(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((f,y)=>(f[y]={...this.store.data[y]},Object.keys(f[y]).reduce((x,B)=>(x[B]={...f[y][B]},x),{})),{});s.store=new z7(o,i),s.services.resourceStore=s.store}return s.translator=new C2(s.services,i),s.translator.on("*",function(o){for(var f=arguments.length,y=new Array(f>1?f-1:0),x=1;x<f;x++)y[x-1]=arguments[x];s.emit(o,...y)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const $c=MC.createInstance();$c.createInstance=MC.createInstance;$c.createInstance;$c.dir;$c.init;$c.loadResources;$c.reloadResources;$c.use;$c.changeLanguage;$c.getFixedT;$c.t;$c.exists;$c.setDefaultNamespace;$c.hasLoadedNamespace;$c.loadNamespaces;$c.loadLanguages;const{slice:oq,forEach:sq}=[];function aq(n){return sq.call(oq.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}const V7=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,lq=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!V7.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!V7.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},H7={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=lq(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var uq={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return H7.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&H7.create(t,n,r,i,s)}},Aq={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let o=0;o<a.length;o++){const f=a[o].indexOf("=");f>0&&a[o].substring(0,f)===e&&(t=a[o].substring(f+1))}}return t}};let E1=null;const Z7=()=>{if(E1!==null)return E1;try{if(E1=typeof window<"u"&&window.localStorage!==null,!E1)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{E1=!1}return E1};var cq={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&Z7())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&Z7()&&window.localStorage.setItem(t,n)}};let B1=null;const X7=()=>{if(B1!==null)return B1;try{if(B1=typeof window<"u"&&window.sessionStorage!==null,!B1)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{B1=!1}return B1};var dq={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&X7())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&X7()&&window.sessionStorage.setItem(t,n)}},hq={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},fq={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},pq={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},mq={name:"subdomain",lookup(n){var i,s;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let iL=!1;try{document.cookie,iL=!0}catch{}const oL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];iL||oL.splice(1,1);const gq=()=>({order:oL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class sL{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=aq(t,this.options||{},gq()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(uq),this.addDetector(Aq),this.addDetector(cq),this.addDetector(dq),this.addDetector(hq),this.addDetector(fq),this.addDetector(pq),this.addDetector(mq)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}sL.type="languageDetector";var yq=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var a=e(r,i);a&&typeof a.then=="function"?a.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,a)}catch(o){s(o)}return}e(r,i,s);return}s(null,e[r]&&e[r][i])}}},c4,J7;function vq(){return J7||(J7=1,c4={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),c4}var Cq=vq();const _q=Al(Cq);var bq=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function eI(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(_q[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(bq),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var a=s[1].trim(),o=[a,""];a.indexOf("=")>-1&&(o=a.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var xq=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,wq=/^\s*$/,Mq=Object.create(null);function aL(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(aL,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var Sq={parse:function(n,e){e||(e={}),e.components||(e.components=Mq);var t,r=[],i=[],s=-1,a=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(xq,function(f,y){if(a){if(f!=="</"+t.name+">")return;a=!1}var x,B=f.charAt(1)!=="/",O=f.startsWith("<!--"),T=y+f.length,F=n.charAt(T);if(O){var j=eI(f);return s<0?(r.push(j),r):((x=i[s]).children.push(j),r)}if(B&&(s++,(t=eI(f)).type==="tag"&&e.components[t.name]&&(t.type="component",a=!0),t.voidElement||a||!F||F==="<"||t.children.push({type:"text",content:n.slice(T,n.indexOf("<",T))}),s===0&&r.push(t),(x=i[s-1])&&x.children.push(t),i[s]=t),(!B||t.voidElement)&&(s>-1&&(t.voidElement||t.name===f.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!a&&F!=="<"&&F)){x=s===-1?r:i[s].children;var N=n.indexOf("<",T),q=n.slice(T,N===-1?void 0:N);wq.test(q)&&(q=" "),(N>-1&&s+x.length>=0||q!==" ")&&x.push({type:"text",content:q})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+aL("",t)},"")}};const Jb=(n,e,t,r)=>{var s,a,o,f;const i=[t,{code:e,...r||{}}];if((a=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&a.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);lf(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(f=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&f.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},tI={},SC=(n,e,t,r)=>{lf(t)&&tI[t]||(lf(t)&&(tI[t]=new Date),Jb(n,e,t,r))},lL=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},b6=(n,e,t)=>{n.loadNamespaces(e,lL(n,t))},nI=(n,e,t,r)=>{if(lf(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return b6(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,lL(n,r))},Eq=(n,e,t={})=>!e.languages||!e.languages.length?(SC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),Bq=n=>n.displayName||n.name||(lf(n)&&n.length>0?n:"Unknown"),lf=n=>typeof n=="string",kg=n=>typeof n=="object"&&n!==null,Oq=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Iq={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},kq=n=>Iq[n],Tq=n=>n.replace(Oq,kq);let x6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Tq};const Pq=(n={})=>{x6={...x6,...n}},uL=()=>x6;let AL;const Kq=n=>{AL=n},QB=()=>AL,d4=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},h4=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?hy(e):e},Dq=n=>Array.isArray(n)&&n.every(ui.isValidElement),hy=n=>Array.isArray(n)?n:[n],Rq=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},cL=(n,e,t,r)=>{if(!n)return"";let i="";const s=hy(n),a=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,f)=>{if(lf(o)){i+=`${o}`;return}if(ui.isValidElement(o)){const{props:y,type:x}=o,B=Object.keys(y).length,O=a.indexOf(x)>-1,T=y.children;if(!T&&O&&!B){i+=`<${x}/>`;return}if(!T&&(!O||B)||y.i18nIsDynamicList){i+=`<${f}></${f}>`;return}if(O&&B===1&&lf(T)){i+=`<${x}>${T}</${x}>`;return}const F=cL(T,e,t,r);i+=`<${f}>${F}</${f}>`;return}if(o===null){Jb(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(kg(o)){const{format:y,...x}=o,B=Object.keys(x);if(B.length===1){const O=y?`${B[0]}, ${y}`:B[0];i+=`{{${O}}}`;return}Jb(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}Jb(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},Fq=(n,e,t,r,i,s)=>{if(e==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(a.map(N=>`<${N}`).join("|")).test(e);if(!n&&!o&&!s)return[e];const f={},y=N=>{hy(N).forEach(H=>{lf(H)||(d4(H)?y(h4(H)):kg(H)&&!ui.isValidElement(H)&&Object.assign(f,H))})};y(n);const x=Sq.parse(`<0>${e}</0>`),B={...f,...i},O=(N,q,H)=>{var $;const oe=h4(N),ne=F(oe,q.children,H);return Dq(oe)&&ne.length===0||($=N.props)!=null&&$.i18nIsDynamicList?oe:ne},T=(N,q,H,oe,ne)=>{N.dummy?(N.children=q,H.push(ui.cloneElement(N,{key:oe},ne?void 0:q))):H.push(...ui.Children.map([N],$=>{const te={...$.props};return delete te.i18nIsDynamicList,ui.createElement($.type,{...te,key:oe,ref:$.ref},ne?null:q)}))},F=(N,q,H)=>{const oe=hy(N);return hy(q).reduce(($,te,G)=>{var he,pe;const ie=((pe=(he=te.children)==null?void 0:he[0])==null?void 0:pe.content)&&t.services.interpolator.interpolate(te.children[0].content,B,t.language);if(te.type==="tag"){let Ee=oe[parseInt(te.name,10)];H.length===1&&!Ee&&(Ee=H[0][te.name]),Ee||(Ee={});const me=Object.keys(te.attrs).length!==0?Rq({props:te.attrs},Ee):Ee,Se=ui.isValidElement(me),De=Se&&d4(te,!0)&&!te.voidElement,be=o&&kg(me)&&me.dummy&&!Se,at=kg(n)&&Object.hasOwnProperty.call(n,te.name);if(lf(me)){const Ze=t.services.interpolator.interpolate(me,B,t.language);$.push(Ze)}else if(d4(me)||De){const Ze=O(me,te,H);T(me,Ze,$,G)}else if(be){const Ze=F(oe,te.children,H);T(me,Ze,$,G)}else if(Number.isNaN(parseFloat(te.name)))if(at){const Ze=O(me,te,H);T(me,Ze,$,G,te.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(te.name)>-1)if(te.voidElement)$.push(ui.createElement(te.name,{key:`${te.name}-${G}`}));else{const Ze=F(oe,te.children,H);$.push(ui.createElement(te.name,{key:`${te.name}-${G}`},Ze))}else if(te.voidElement)$.push(`<${te.name} />`);else{const Ze=F(oe,te.children,H);$.push(`<${te.name}>${Ze}</${te.name}>`)}else if(kg(me)&&!Se){const Ze=te.children[0]?ie:null;Ze&&$.push(Ze)}else T(me,ie,$,G,te.children.length!==1||!ie)}else if(te.type==="text"){const Ee=r.transWrapTextNodes,me=s?r.unescape(t.services.interpolator.interpolate(te.content,B,t.language)):t.services.interpolator.interpolate(te.content,B,t.language);Ee?$.push(ui.createElement(Ee,{key:`${te.name}-${G}`},me)):$.push(me)}return $},[])},j=F([{dummy:!0,children:n||[]}],x,hy(n||[]));return h4(j[0])},dL=(n,e,t)=>{const r=n.key||e,i=ui.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return ui.createElement(ui.Fragment,null,i)}return ui.createElement(s)},Lq=(n,e)=>n.map((t,r)=>dL(t,r,e)),Uq=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:dL(n[r],r,e)})}),t},zq=(n,e,t,r)=>n?Array.isArray(n)?Lq(n,e):kg(n)?Uq(n,e):(SC(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function jq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:f,ns:y,i18n:x,t:B,shouldUnescape:O,...T}){var me,Se,De,be,at,Ze;const F=x||QB();if(!F)return SC(F,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const j=B||F.t.bind(F)||(Je=>Je),N={...uL(),...(me=F.options)==null?void 0:me.react};let q=y||j.ns||((Se=F.options)==null?void 0:Se.defaultNS);q=lf(q)?[q]:q||["translation"];const H=cL(n,N,F,r),oe=o||H||N.transEmptyNodeValue||r,{hashTransKey:ne}=N,$=r||(ne?ne(H||oe):H||oe);(be=(De=F.options)==null?void 0:De.interpolation)!=null&&be.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...F.options.interpolation.defaultVariables}:{...F.options.interpolation.defaultVariables});const te=a||e!==void 0&&!((Ze=(at=F.options)==null?void 0:at.interpolation)!=null&&Ze.alwaysFormat)||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},G={...s,context:i||s.context,count:e,...a,...te,defaultValue:oe,ns:q},ie=$?j($,G):oe,he=zq(f,ie,F,r),pe=Fq(he||n,ie,F,N,G,O),Ee=t??N.defaultTransParent;return Ee?ui.createElement(Ee,T,pe):pe}const Nq={type:"3rdParty",init(n){Pq(n.options.react),Kq(n)}},hL=ui.createContext();class Wq{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function U0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:f,ns:y,i18n:x,t:B,shouldUnescape:O,...T}){var H;const{i18n:F,defaultNS:j}=ui.useContext(hL)||{},N=x||F||QB(),q=B||(N==null?void 0:N.t.bind(N));return jq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:a,defaults:o,components:f,ns:y||(q==null?void 0:q.ns)||j||((H=N==null?void 0:N.options)==null?void 0:H.defaultNS),i18n:N,t:B,shouldUnescape:O,...T})}const Gq=(n,e)=>{const t=ui.useRef();return ui.useEffect(()=>{t.current=n},[n,e]),t.current},fL=(n,e,t,r)=>n.getFixedT(e,t,r),Qq=(n,e,t,r)=>ui.useCallback(fL(n,e,t,r),[n,e,t,r]),qq=(n,e={})=>{var ne,$,te,G;const{i18n:t}=e,{i18n:r,defaultNS:i}=ui.useContext(hL)||{},s=t||r||QB();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Wq),!s){SC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ie=(pe,Ee)=>lf(Ee)?Ee:kg(Ee)&&lf(Ee.defaultValue)?Ee.defaultValue:Array.isArray(pe)?pe[pe.length-1]:pe,he=[ie,{},!1];return he.t=ie,he.i18n={},he.ready=!1,he}(ne=s.options.react)!=null&&ne.wait&&SC(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...uL(),...s.options.react,...e},{useSuspense:o,keyPrefix:f}=a;let y=i||(($=s.options)==null?void 0:$.defaultNS);y=lf(y)?[y]:y||["translation"],(G=(te=s.reportNamespaces).addUsedNamespaces)==null||G.call(te,y);const x=(s.isInitialized||s.initializedStoreOnce)&&y.every(ie=>Eq(ie,s,a)),B=Qq(s,e.lng||null,a.nsMode==="fallback"?y:y[0],f),O=()=>B,T=()=>fL(s,e.lng||null,a.nsMode==="fallback"?y:y[0],f),[F,j]=ui.useState(O);let N=y.join();e.lng&&(N=`${e.lng}${N}`);const q=Gq(N),H=ui.useRef(!0);ui.useEffect(()=>{const{bindI18n:ie,bindI18nStore:he}=a;H.current=!0,!x&&!o&&(e.lng?nI(s,e.lng,y,()=>{H.current&&j(T)}):b6(s,y,()=>{H.current&&j(T)})),x&&q&&q!==N&&H.current&&j(T);const pe=()=>{H.current&&j(T)};return ie&&(s==null||s.on(ie,pe)),he&&(s==null||s.store.on(he,pe)),()=>{H.current=!1,s&&(ie==null||ie.split(" ").forEach(Ee=>s.off(Ee,pe))),he&&s&&he.split(" ").forEach(Ee=>s.store.off(Ee,pe))}},[s,N]),ui.useEffect(()=>{H.current&&x&&j(O)},[s,f,x]);const oe=[F,s,x];if(oe.t=F,oe.i18n=s,oe.ready=x,x||!x&&!o)return oe;throw new Promise(ie=>{e.lng?nI(s,e.lng,y,()=>ie()):b6(s,y,()=>ie())})},Ws=(n,e={})=>function(r){function i({forwardedRef:a,...o}){const[f,y,x]=qq(n,{...o,keyPrefix:e.keyPrefix}),B={...o,t:f,i18n:y,tReady:x};return e.withRef&&a?B.ref=a:!e.withRef&&a&&(B.forwardedRef=a),ui.createElement(r,B)}i.displayName=`withI18nextTranslation(${Bq(r)})`,i.WrappedComponent=r;const s=(a,o)=>ui.createElement(i,Object.assign({},a,{forwardedRef:o}));return e.withRef?ui.forwardRef(s):i};function Xa(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="f69d9d8f41edfbc571efe934ba014df41eed434c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f69d9d8f41edfbc571efe934ba014df41eed434c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Xa=function(){return a},a}Xa();const pL=(Xa().s[0]++,{de:"Deutsch",en:"English",fr:"Français",he:"עברית",it:"Italiano",ja:"日本語",zh:"简体中文"});Xa().s[1]++;$c.use(sL).use(yq((n,e)=>(Xa().f[0]++,Xa().s[2]++,n==="en"?(Xa().b[0][0]++,Xa().s[3]++,{}):(Xa().b[0][1]++,Xa().s[4]++,zQ(Object.assign({"./locales/de/translation.json":()=>(Xa().f[1]++,Xa().s[5]++,w1(()=>import("./translation-BA-hEPLm.js"),[])),"./locales/fr/translation.json":()=>(Xa().f[2]++,Xa().s[6]++,w1(()=>import("./translation-J1EAmmGD.js"),[])),"./locales/he/translation.json":()=>(Xa().f[3]++,Xa().s[7]++,w1(()=>import("./translation-B80Cngny.js"),[])),"./locales/it/translation.json":()=>(Xa().f[4]++,Xa().s[8]++,w1(()=>import("./translation-Ckdsp6Ku.js"),[])),"./locales/ja/translation.json":()=>(Xa().f[5]++,Xa().s[9]++,w1(()=>import("./translation-C8OpQe1w.js"),[])),"./locales/zh/translation.json":()=>(Xa().f[6]++,Xa().s[10]++,w1(()=>import("./translation-zqWUd59b.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(Nq).init({supportedLngs:Object.keys(pL),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Xa().f[7]++,Xa().s[11]++,n[0]==="en"){Xa().b[1][0]++,Xa().s[12]++;return}else Xa().b[1][1]++;Xa().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var ub={exports:{}},rI;function Yq(){return rI||(rI=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(a){if(a===void 0){console.error("Autobind error: No context provided.");return}var o=Object.getPrototypeOf(a);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(o),r.forEach(function(f){var y=Object.getOwnPropertyDescriptor(o,f);if(y===void 0){console.warn('Autobind: "'+f+'" method not found in class.');return}t.indexOf(f)!==-1||typeof y.value!="function"||Object.defineProperty(o,f,s(o,f,y))})}function s(a,o,f){var y=f.value;return{configurable:!0,get:function(){if(this===a||this.hasOwnProperty(o))return y;var B=y.bind(this);return Object.defineProperty(this,o,{value:B,configurable:!0,writable:!0}),B}}}n.exports=e.default}(ub,ub.exports)),ub.exports}var f4,iI;function $q(){return iI||(iI=1,f4=Yq()),f4}var Vq=$q();const Hq=Al(Vq);var Wv={exports:{}};Wv.exports;var oI;function Zq(){return oI||(oI=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",f="[object Date]",y="[object Error]",x="[object Function]",B="[object GeneratorFunction]",O="[object Map]",T="[object Number]",F="[object Object]",j="[object Promise]",N="[object RegExp]",q="[object Set]",H="[object String]",oe="[object Symbol]",ne="[object WeakMap]",$="[object ArrayBuffer]",te="[object DataView]",G="[object Float32Array]",ie="[object Float64Array]",he="[object Int8Array]",pe="[object Int16Array]",Ee="[object Int32Array]",me="[object Uint8Array]",Se="[object Uint8ClampedArray]",De="[object Uint16Array]",be="[object Uint32Array]",at=/[\\^$.*+?()[\]{}|]/g,Ze=/\w*$/,Je=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,Me={};Me[s]=Me[a]=Me[$]=Me[te]=Me[o]=Me[f]=Me[G]=Me[ie]=Me[he]=Me[pe]=Me[Ee]=Me[O]=Me[T]=Me[F]=Me[N]=Me[q]=Me[H]=Me[oe]=Me[me]=Me[Se]=Me[De]=Me[be]=!0,Me[y]=Me[x]=Me[ne]=!1;var Fe=typeof window=="object"&&window&&window.Object===Object&&window,He=typeof self=="object"&&self&&self.Object===Object&&self,bt=Fe||He||Function("return this")(),Yt=e&&!e.nodeType&&e,gt=Yt&&!0&&n&&!n.nodeType&&n,Lt=gt&&gt.exports===Yt;function Kt(J,Ie){return J.set(Ie[0],Ie[1]),J}function Ue(J,Ie){return J.add(Ie),J}function Pe(J,Ie){for(var st=-1,$t=J?J.length:0;++st<$t&&Ie(J[st],st,J)!==!1;);return J}function Be(J,Ie){for(var st=-1,$t=Ie.length,Kr=J.length;++st<$t;)J[Kr+st]=Ie[st];return J}function it(J,Ie,st,$t){for(var Kr=-1,$n=J?J.length:0;++Kr<$n;)st=Ie(st,J[Kr],Kr,J);return st}function _t(J,Ie){for(var st=-1,$t=Array(J);++st<J;)$t[st]=Ie(st);return $t}function ft(J,Ie){return J==null?void 0:J[Ie]}function Ut(J){var Ie=!1;if(J!=null&&typeof J.toString!="function")try{Ie=!!(J+"")}catch{}return Ie}function rn(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t,Kr){st[++Ie]=[Kr,$t]}),st}function Dt(J,Ie){return function(st){return J(Ie(st))}}function _n(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t){st[++Ie]=$t}),st}var qn=Array.prototype,tn=Function.prototype,rr=Object.prototype,Dn=bt["__core-js_shared__"],pn=function(){var J=/[^.]+$/.exec(Dn&&Dn.keys&&Dn.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Zn=tn.toString,dr=rr.hasOwnProperty,vr=rr.toString,Jn=RegExp("^"+Zn.call(dr).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=Lt?bt.Buffer:void 0,ce=bt.Symbol,fe=bt.Uint8Array,nt=Dt(Object.getPrototypeOf,Object),St=Object.create,Ht=rr.propertyIsEnumerable,sn=qn.splice,tr=Object.getOwnPropertySymbols,Oe=Qe?Qe.isBuffer:void 0,se=Dt(Object.keys,Object),ve=Rr(bt,"DataView"),p=Rr(bt,"Map"),Ne=Rr(bt,"Promise"),Ye=Rr(bt,"Set"),rt=Rr(bt,"WeakMap"),ct=Rr(Object,"create"),dt=Oo(ve),qt=Oo(p),Gt=Oo(Ne),jt=Oo(Ye),xt=Oo(rt),Tn=ce?ce.prototype:void 0,On=Tn?Tn.valueOf:void 0;function gr(J){var Ie=-1,st=J?J.length:0;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Er(){this.__data__=ct?ct(null):{}}function on(J){return this.has(J)&&delete this.__data__[J]}function Rn(J){var Ie=this.__data__;if(ct){var st=Ie[J];return st===r?void 0:st}return dr.call(Ie,J)?Ie[J]:void 0}function er(J){var Ie=this.__data__;return ct?Ie[J]!==void 0:dr.call(Ie,J)}function Xr(J,Ie){var st=this.__data__;return st[J]=ct&&Ie===void 0?r:Ie,this}gr.prototype.clear=Er,gr.prototype.delete=on,gr.prototype.get=Rn,gr.prototype.has=er,gr.prototype.set=Xr;function Ur(J){var Ie=-1,st=J?J.length:0;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Dr(){this.__data__=[]}function ur(J){var Ie=this.__data__,st=tl(Ie,J);if(st<0)return!1;var $t=Ie.length-1;return st==$t?Ie.pop():sn.call(Ie,st,1),!0}function go(J){var Ie=this.__data__,st=tl(Ie,J);return st<0?void 0:Ie[st][1]}function Sa(J){return tl(this.__data__,J)>-1}function Yi(J,Ie){var st=this.__data__,$t=tl(st,J);return $t<0?st.push([J,Ie]):st[$t][1]=Ie,this}Ur.prototype.clear=Dr,Ur.prototype.delete=ur,Ur.prototype.get=go,Ur.prototype.has=Sa,Ur.prototype.set=Yi;function Ci(J){var Ie=-1,st=J?J.length:0;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function oo(){this.__data__={hash:new gr,map:new(p||Ur),string:new gr}}function Ro(J){return Ba(this,J).delete(J)}function Pi(J){return Ba(this,J).get(J)}function Na(J){return Ba(this,J).has(J)}function Ea(J,Ie){return Ba(this,J).set(J,Ie),this}Ci.prototype.clear=oo,Ci.prototype.delete=Ro,Ci.prototype.get=Pi,Ci.prototype.has=Na,Ci.prototype.set=Ea;function rs(J){this.__data__=new Ur(J)}function aa(){this.__data__=new Ur}function cl(J){return this.__data__.delete(J)}function Ao(J){return this.__data__.get(J)}function Uu(J){return this.__data__.has(J)}function Zl(J,Ie){var st=this.__data__;if(st instanceof Ur){var $t=st.__data__;if(!p||$t.length<t-1)return $t.push([J,Ie]),this;st=this.__data__=new Ci($t)}return st.set(J,Ie),this}rs.prototype.clear=aa,rs.prototype.delete=cl,rs.prototype.get=Ao,rs.prototype.has=Uu,rs.prototype.set=Zl;function so(J,Ie){var st=Ia(J)||Ss(J)?_t(J.length,String):[],$t=st.length,Kr=!!$t;for(var $n in J)dr.call(J,$n)&&!(Kr&&($n=="length"||Qs($n,$t)))&&st.push($n);return st}function Tr(J,Ie,st){var $t=J[Ie];(!(dr.call(J,Ie)&&Oa($t,st))||st===void 0&&!(Ie in J))&&(J[Ie]=st)}function tl(J,Ie){for(var st=J.length;st--;)if(Oa(J[st][0],Ie))return st;return-1}function Os(J,Ie){return J&&Ai(Ie,Vi(Ie),J)}function ea(J,Ie,st,$t,Kr,$n,ti){var ci;if($t&&(ci=$n?$t(J,Kr,$n,ti):$t(J)),ci!==void 0)return ci;if(!Yr(J))return J;var Br=Ia(J);if(Br){if(ci=yu(J),!Ie)return nl(J,ci)}else{var xr=vo(J),ji=xr==x||xr==B;if(ho(J))return or(J,Ie);if(xr==F||xr==s||ji&&!$n){if(Ut(J))return $n?J:{};if(ci=Mo(ji?{}:J),!Ie)return la(J,Os(ci,J))}else{if(!Me[xr])return $n?J:{};ci=Gs(J,xr,ea,Ie)}}ti||(ti=new rs);var Xi=ti.get(J);if(Xi)return Xi;if(ti.set(J,ci),!Br)var Ei=st?rc(J):Vi(J);return Pe(Ei||J,function(Wr,So){Ei&&(So=Wr,Wr=J[So]),Tr(ci,So,ea(Wr,Ie,st,$t,So,J,ti))}),ci}function qe(J){return Yr(J)?St(J):{}}function wt(J,Ie,st){var $t=Ie(J);return Ia(J)?$t:Be($t,st(J))}function vn(J){return vr.call(J)}function Yn(J){if(!Yr(J)||bl(J))return!1;var Ie=Xl(J)||Ut(J)?Jn:Je;return Ie.test(Oo(J))}function hn(J){if(!co(J))return se(J);var Ie=[];for(var st in Object(J))dr.call(J,st)&&st!="constructor"&&Ie.push(st);return Ie}function or(J,Ie){if(Ie)return J.slice();var st=new J.constructor(J.length);return J.copy(st),st}function Ki(J){var Ie=new J.constructor(J.byteLength);return new fe(Ie).set(new fe(J)),Ie}function yo(J,Ie){var st=Ie?Ki(J.buffer):J.buffer;return new J.constructor(st,J.byteOffset,J.byteLength)}function _s(J,Ie,st){var $t=Ie?st(rn(J),!0):rn(J);return it($t,Kt,new J.constructor)}function Fs(J){var Ie=new J.constructor(J.source,Ze.exec(J));return Ie.lastIndex=J.lastIndex,Ie}function OA(J,Ie,st){var $t=Ie?st(_n(J),!0):_n(J);return it($t,Ue,new J.constructor)}function ei(J){return On?Object(On.call(J)):{}}function Mi(J,Ie){var st=Ie?Ki(J.buffer):J.buffer;return new J.constructor(st,J.byteOffset,J.length)}function nl(J,Ie){var st=-1,$t=J.length;for(Ie||(Ie=Array($t));++st<$t;)Ie[st]=J[st];return Ie}function Ai(J,Ie,st,$t){st||(st={});for(var Kr=-1,$n=Ie.length;++Kr<$n;){var ti=Ie[Kr],ci=void 0;Tr(st,ti,ci===void 0?J[ti]:ci)}return st}function la(J,Ie){return Ai(J,$i(J),Ie)}function rc(J){return wt(J,Vi,$i)}function Ba(J,Ie){var st=J.__data__;return zu(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function Rr(J,Ie){var st=ft(J,Ie);return Yn(st)?st:void 0}var $i=tr?Dt(tr,Object):ao,vo=vn;(ve&&vo(new ve(new ArrayBuffer(1)))!=te||p&&vo(new p)!=O||Ne&&vo(Ne.resolve())!=j||Ye&&vo(new Ye)!=q||rt&&vo(new rt)!=ne)&&(vo=function(J){var Ie=vr.call(J),st=Ie==F?J.constructor:void 0,$t=st?Oo(st):void 0;if($t)switch($t){case dt:return te;case qt:return O;case Gt:return j;case jt:return q;case xt:return ne}return Ie});function yu(J){var Ie=J.length,st=J.constructor(Ie);return Ie&&typeof J[0]=="string"&&dr.call(J,"index")&&(st.index=J.index,st.input=J.input),st}function Mo(J){return typeof J.constructor=="function"&&!co(J)?qe(nt(J)):{}}function Gs(J,Ie,st,$t){var Kr=J.constructor;switch(Ie){case $:return Ki(J);case o:case f:return new Kr(+J);case te:return yo(J,$t);case G:case ie:case he:case pe:case Ee:case me:case Se:case De:case be:return Mi(J,$t);case O:return _s(J,$t,st);case T:case H:return new Kr(J);case N:return Fs(J);case q:return OA(J,$t,st);case oe:return ei(J)}}function Qs(J,Ie){return Ie=Ie??i,!!Ie&&(typeof J=="number"||We.test(J))&&J>-1&&J%1==0&&J<Ie}function zu(J){var Ie=typeof J;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?J!=="__proto__":J===null}function bl(J){return!!pn&&pn in J}function co(J){var Ie=J&&J.constructor,st=typeof Ie=="function"&&Ie.prototype||rr;return J===st}function Oo(J){if(J!=null){try{return Zn.call(J)}catch{}try{return J+""}catch{}}return""}function Zo(J){return ea(J,!0,!0)}function Oa(J,Ie){return J===Ie||J!==J&&Ie!==Ie}function Ss(J){return IA(J)&&dr.call(J,"callee")&&(!Ht.call(J,"callee")||vr.call(J)==s)}var Ia=Array.isArray;function ta(J){return J!=null&&zi(J.length)&&!Xl(J)}function IA(J){return Jl(J)&&ta(J)}var ho=Oe||Di;function Xl(J){var Ie=Yr(J)?vr.call(J):"";return Ie==x||Ie==B}function zi(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=i}function Yr(J){var Ie=typeof J;return!!J&&(Ie=="object"||Ie=="function")}function Jl(J){return!!J&&typeof J=="object"}function Vi(J){return ta(J)?so(J):hn(J)}function ao(){return[]}function Di(){return!1}n.exports=Zo}(Wv,Wv.exports)),Wv.exports}var Xq=Zq();const sI=Al(Xq);var p4,aI;function Jq(){if(aI)return p4;aI=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,o=Object.prototype,f=o.toString;function y(j,N,q){return j===j&&(q!==void 0&&(j=j<=q?j:q),N!==void 0&&(j=j>=N?j:N)),j}function x(j){var N=typeof j;return!!j&&(N=="object"||N=="function")}function B(j){return!!j&&typeof j=="object"}function O(j){return typeof j=="symbol"||B(j)&&f.call(j)==e}function T(j){if(typeof j=="number")return j;if(O(j))return n;if(x(j)){var N=typeof j.valueOf=="function"?j.valueOf():j;j=x(N)?N+"":N}if(typeof j!="string")return j===0?j:+j;j=j.replace(t,"");var q=i.test(j);return q||s.test(j)?a(j.slice(2),q?2:8):r.test(j)?n:+j}function F(j,N,q){return q===void 0&&(q=N,N=void 0),q!==void 0&&(q=T(q),q=q===q?q:0),N!==void 0&&(N=T(N),N=N===N?N:0),y(T(j),N,q)}return p4=F,p4}var eY=Jq();const lI=Al(eY);var m4={},kv={},uI;function tY(){if(uI)return kv;uI=1,kv.byteLength=o,kv.toByteArray=y,kv.fromByteArray=O;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(T){var F=T.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=T.indexOf("=");j===-1&&(j=F);var N=j===F?0:4-j%4;return[j,N]}function o(T){var F=a(T),j=F[0],N=F[1];return(j+N)*3/4-N}function f(T,F,j){return(F+j)*3/4-j}function y(T){var F,j=a(T),N=j[0],q=j[1],H=new t(f(T,N,q)),oe=0,ne=q>0?N-4:N,$;for($=0;$<ne;$+=4)F=e[T.charCodeAt($)]<<18|e[T.charCodeAt($+1)]<<12|e[T.charCodeAt($+2)]<<6|e[T.charCodeAt($+3)],H[oe++]=F>>16&255,H[oe++]=F>>8&255,H[oe++]=F&255;return q===2&&(F=e[T.charCodeAt($)]<<2|e[T.charCodeAt($+1)]>>4,H[oe++]=F&255),q===1&&(F=e[T.charCodeAt($)]<<10|e[T.charCodeAt($+1)]<<4|e[T.charCodeAt($+2)]>>2,H[oe++]=F>>8&255,H[oe++]=F&255),H}function x(T){return n[T>>18&63]+n[T>>12&63]+n[T>>6&63]+n[T&63]}function B(T,F,j){for(var N,q=[],H=F;H<j;H+=3)N=(T[H]<<16&16711680)+(T[H+1]<<8&65280)+(T[H+2]&255),q.push(x(N));return q.join("")}function O(T){for(var F,j=T.length,N=j%3,q=[],H=16383,oe=0,ne=j-N;oe<ne;oe+=H)q.push(B(T,oe,oe+H>ne?ne:oe+H));return N===1?(F=T[j-1],q.push(n[F>>2]+n[F<<4&63]+"==")):N===2&&(F=(T[j-2]<<8)+T[j-1],q.push(n[F>>10]+n[F>>4&63]+n[F<<2&63]+"=")),q.join("")}return kv}var Ab={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var AI;function nY(){return AI||(AI=1,Ab.read=function(n,e,t,r,i){var s,a,o=i*8-r-1,f=(1<<o)-1,y=f>>1,x=-7,B=t?i-1:0,O=t?-1:1,T=n[e+B];for(B+=O,s=T&(1<<-x)-1,T>>=-x,x+=o;x>0;s=s*256+n[e+B],B+=O,x-=8);for(a=s&(1<<-x)-1,s>>=-x,x+=r;x>0;a=a*256+n[e+B],B+=O,x-=8);if(s===0)s=1-y;else{if(s===f)return a?NaN:(T?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-y}return(T?-1:1)*a*Math.pow(2,s-r)},Ab.write=function(n,e,t,r,i,s){var a,o,f,y=s*8-i-1,x=(1<<y)-1,B=x>>1,O=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=r?0:s-1,F=r?1:-1,j=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=x):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+B>=1?e+=O/f:e+=O*Math.pow(2,1-B),e*f>=2&&(a++,f/=2),a+B>=x?(o=0,a=x):a+B>=1?(o=(e*f-1)*Math.pow(2,i),a=a+B):(o=e*Math.pow(2,B-1)*Math.pow(2,i),a=0));i>=8;n[t+T]=o&255,T+=F,o/=256,i-=8);for(a=a<<i|o,y+=i;y>0;n[t+T]=a&255,T+=F,a/=256,y-=8);n[t+T-F]|=j*128}),Ab}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var cI;function rY(){return cI||(cI=1,function(n){const e=tY(),t=nY(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=H,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const Qe=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(Qe,ce),Qe.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(Qe){if(Qe>i)throw new RangeError('The value "'+Qe+'" is invalid for option "size"');const ce=new Uint8Array(Qe);return Object.setPrototypeOf(ce,o.prototype),ce}function o(Qe,ce,fe){if(typeof Qe=="number"){if(typeof ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(Qe)}return f(Qe,ce,fe)}o.poolSize=8192;function f(Qe,ce,fe){if(typeof Qe=="string")return O(Qe,ce);if(ArrayBuffer.isView(Qe))return F(Qe);if(Qe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Qe);if(pn(Qe,ArrayBuffer)||Qe&&pn(Qe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pn(Qe,SharedArrayBuffer)||Qe&&pn(Qe.buffer,SharedArrayBuffer)))return j(Qe,ce,fe);if(typeof Qe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const nt=Qe.valueOf&&Qe.valueOf();if(nt!=null&&nt!==Qe)return o.from(nt,ce,fe);const St=N(Qe);if(St)return St;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Qe[Symbol.toPrimitive]=="function")return o.from(Qe[Symbol.toPrimitive]("string"),ce,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Qe)}o.from=function(Qe,ce,fe){return f(Qe,ce,fe)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function y(Qe){if(typeof Qe!="number")throw new TypeError('"size" argument must be of type number');if(Qe<0)throw new RangeError('The value "'+Qe+'" is invalid for option "size"')}function x(Qe,ce,fe){return y(Qe),Qe<=0?a(Qe):ce!==void 0?typeof fe=="string"?a(Qe).fill(ce,fe):a(Qe).fill(ce):a(Qe)}o.alloc=function(Qe,ce,fe){return x(Qe,ce,fe)};function B(Qe){return y(Qe),a(Qe<0?0:q(Qe)|0)}o.allocUnsafe=function(Qe){return B(Qe)},o.allocUnsafeSlow=function(Qe){return B(Qe)};function O(Qe,ce){if((typeof ce!="string"||ce==="")&&(ce="utf8"),!o.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);const fe=oe(Qe,ce)|0;let nt=a(fe);const St=nt.write(Qe,ce);return St!==fe&&(nt=nt.slice(0,St)),nt}function T(Qe){const ce=Qe.length<0?0:q(Qe.length)|0,fe=a(ce);for(let nt=0;nt<ce;nt+=1)fe[nt]=Qe[nt]&255;return fe}function F(Qe){if(pn(Qe,Uint8Array)){const ce=new Uint8Array(Qe);return j(ce.buffer,ce.byteOffset,ce.byteLength)}return T(Qe)}function j(Qe,ce,fe){if(ce<0||Qe.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(Qe.byteLength<ce+(fe||0))throw new RangeError('"length" is outside of buffer bounds');let nt;return ce===void 0&&fe===void 0?nt=new Uint8Array(Qe):fe===void 0?nt=new Uint8Array(Qe,ce):nt=new Uint8Array(Qe,ce,fe),Object.setPrototypeOf(nt,o.prototype),nt}function N(Qe){if(o.isBuffer(Qe)){const ce=q(Qe.length)|0,fe=a(ce);return fe.length===0||Qe.copy(fe,0,0,ce),fe}if(Qe.length!==void 0)return typeof Qe.length!="number"||Zn(Qe.length)?a(0):T(Qe);if(Qe.type==="Buffer"&&Array.isArray(Qe.data))return T(Qe.data)}function q(Qe){if(Qe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Qe|0}function H(Qe){return+Qe!=Qe&&(Qe=0),o.alloc(+Qe)}o.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==o.prototype},o.compare=function(ce,fe){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),pn(fe,Uint8Array)&&(fe=o.from(fe,fe.offset,fe.byteLength)),!o.isBuffer(ce)||!o.isBuffer(fe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===fe)return 0;let nt=ce.length,St=fe.length;for(let Ht=0,sn=Math.min(nt,St);Ht<sn;++Ht)if(ce[Ht]!==fe[Ht]){nt=ce[Ht],St=fe[Ht];break}return nt<St?-1:St<nt?1:0},o.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ce,fe){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return o.alloc(0);let nt;if(fe===void 0)for(fe=0,nt=0;nt<ce.length;++nt)fe+=ce[nt].length;const St=o.allocUnsafe(fe);let Ht=0;for(nt=0;nt<ce.length;++nt){let sn=ce[nt];if(pn(sn,Uint8Array))Ht+sn.length>St.length?(o.isBuffer(sn)||(sn=o.from(sn)),sn.copy(St,Ht)):Uint8Array.prototype.set.call(St,sn,Ht);else if(o.isBuffer(sn))sn.copy(St,Ht);else throw new TypeError('"list" argument must be an Array of Buffers');Ht+=sn.length}return St};function oe(Qe,ce){if(o.isBuffer(Qe))return Qe.length;if(ArrayBuffer.isView(Qe)||pn(Qe,ArrayBuffer))return Qe.byteLength;if(typeof Qe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Qe);const fe=Qe.length,nt=arguments.length>2&&arguments[2]===!0;if(!nt&&fe===0)return 0;let St=!1;for(;;)switch(ce){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return _n(Qe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe*2;case"hex":return fe>>>1;case"base64":return rr(Qe).length;default:if(St)return nt?-1:_n(Qe).length;ce=(""+ce).toLowerCase(),St=!0}}o.byteLength=oe;function ne(Qe,ce,fe){let nt=!1;if((ce===void 0||ce<0)&&(ce=0),ce>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0,ce>>>=0,fe<=ce))return"";for(Qe||(Qe="utf8");;)switch(Qe){case"hex":return We(this,ce,fe);case"utf8":case"utf-8":return De(this,ce,fe);case"ascii":return Ze(this,ce,fe);case"latin1":case"binary":return Je(this,ce,fe);case"base64":return Se(this,ce,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,ce,fe);default:if(nt)throw new TypeError("Unknown encoding: "+Qe);Qe=(Qe+"").toLowerCase(),nt=!0}}o.prototype._isBuffer=!0;function $(Qe,ce,fe){const nt=Qe[ce];Qe[ce]=Qe[fe],Qe[fe]=nt}o.prototype.swap16=function(){const ce=this.length;if(ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let fe=0;fe<ce;fe+=2)$(this,fe,fe+1);return this},o.prototype.swap32=function(){const ce=this.length;if(ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let fe=0;fe<ce;fe+=4)$(this,fe,fe+3),$(this,fe+1,fe+2);return this},o.prototype.swap64=function(){const ce=this.length;if(ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let fe=0;fe<ce;fe+=8)$(this,fe,fe+7),$(this,fe+1,fe+6),$(this,fe+2,fe+5),$(this,fe+3,fe+4);return this},o.prototype.toString=function(){const ce=this.length;return ce===0?"":arguments.length===0?De(this,0,ce):ne.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ce){if(!o.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce?!0:o.compare(this,ce)===0},o.prototype.inspect=function(){let ce="";const fe=n.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,fe).replace(/(.{2})/g,"$1 ").trim(),this.length>fe&&(ce+=" ... "),"<Buffer "+ce+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(ce,fe,nt,St,Ht){if(pn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),!o.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(fe===void 0&&(fe=0),nt===void 0&&(nt=ce?ce.length:0),St===void 0&&(St=0),Ht===void 0&&(Ht=this.length),fe<0||nt>ce.length||St<0||Ht>this.length)throw new RangeError("out of range index");if(St>=Ht&&fe>=nt)return 0;if(St>=Ht)return-1;if(fe>=nt)return 1;if(fe>>>=0,nt>>>=0,St>>>=0,Ht>>>=0,this===ce)return 0;let sn=Ht-St,tr=nt-fe;const Oe=Math.min(sn,tr),se=this.slice(St,Ht),ve=ce.slice(fe,nt);for(let p=0;p<Oe;++p)if(se[p]!==ve[p]){sn=se[p],tr=ve[p];break}return sn<tr?-1:tr<sn?1:0};function te(Qe,ce,fe,nt,St){if(Qe.length===0)return-1;if(typeof fe=="string"?(nt=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),fe=+fe,Zn(fe)&&(fe=St?0:Qe.length-1),fe<0&&(fe=Qe.length+fe),fe>=Qe.length){if(St)return-1;fe=Qe.length-1}else if(fe<0)if(St)fe=0;else return-1;if(typeof ce=="string"&&(ce=o.from(ce,nt)),o.isBuffer(ce))return ce.length===0?-1:G(Qe,ce,fe,nt,St);if(typeof ce=="number")return ce=ce&255,typeof Uint8Array.prototype.indexOf=="function"?St?Uint8Array.prototype.indexOf.call(Qe,ce,fe):Uint8Array.prototype.lastIndexOf.call(Qe,ce,fe):G(Qe,[ce],fe,nt,St);throw new TypeError("val must be string, number or Buffer")}function G(Qe,ce,fe,nt,St){let Ht=1,sn=Qe.length,tr=ce.length;if(nt!==void 0&&(nt=String(nt).toLowerCase(),nt==="ucs2"||nt==="ucs-2"||nt==="utf16le"||nt==="utf-16le")){if(Qe.length<2||ce.length<2)return-1;Ht=2,sn/=2,tr/=2,fe/=2}function Oe(ve,p){return Ht===1?ve[p]:ve.readUInt16BE(p*Ht)}let se;if(St){let ve=-1;for(se=fe;se<sn;se++)if(Oe(Qe,se)===Oe(ce,ve===-1?0:se-ve)){if(ve===-1&&(ve=se),se-ve+1===tr)return ve*Ht}else ve!==-1&&(se-=se-ve),ve=-1}else for(fe+tr>sn&&(fe=sn-tr),se=fe;se>=0;se--){let ve=!0;for(let p=0;p<tr;p++)if(Oe(Qe,se+p)!==Oe(ce,p)){ve=!1;break}if(ve)return se}return-1}o.prototype.includes=function(ce,fe,nt){return this.indexOf(ce,fe,nt)!==-1},o.prototype.indexOf=function(ce,fe,nt){return te(this,ce,fe,nt,!0)},o.prototype.lastIndexOf=function(ce,fe,nt){return te(this,ce,fe,nt,!1)};function ie(Qe,ce,fe,nt){fe=Number(fe)||0;const St=Qe.length-fe;nt?(nt=Number(nt),nt>St&&(nt=St)):nt=St;const Ht=ce.length;nt>Ht/2&&(nt=Ht/2);let sn;for(sn=0;sn<nt;++sn){const tr=parseInt(ce.substr(sn*2,2),16);if(Zn(tr))return sn;Qe[fe+sn]=tr}return sn}function he(Qe,ce,fe,nt){return Dn(_n(ce,Qe.length-fe),Qe,fe,nt)}function pe(Qe,ce,fe,nt){return Dn(qn(ce),Qe,fe,nt)}function Ee(Qe,ce,fe,nt){return Dn(rr(ce),Qe,fe,nt)}function me(Qe,ce,fe,nt){return Dn(tn(ce,Qe.length-fe),Qe,fe,nt)}o.prototype.write=function(ce,fe,nt,St){if(fe===void 0)St="utf8",nt=this.length,fe=0;else if(nt===void 0&&typeof fe=="string")St=fe,nt=this.length,fe=0;else if(isFinite(fe))fe=fe>>>0,isFinite(nt)?(nt=nt>>>0,St===void 0&&(St="utf8")):(St=nt,nt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ht=this.length-fe;if((nt===void 0||nt>Ht)&&(nt=Ht),ce.length>0&&(nt<0||fe<0)||fe>this.length)throw new RangeError("Attempt to write outside buffer bounds");St||(St="utf8");let sn=!1;for(;;)switch(St){case"hex":return ie(this,ce,fe,nt);case"utf8":case"utf-8":return he(this,ce,fe,nt);case"ascii":case"latin1":case"binary":return pe(this,ce,fe,nt);case"base64":return Ee(this,ce,fe,nt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,ce,fe,nt);default:if(sn)throw new TypeError("Unknown encoding: "+St);St=(""+St).toLowerCase(),sn=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(Qe,ce,fe){return ce===0&&fe===Qe.length?e.fromByteArray(Qe):e.fromByteArray(Qe.slice(ce,fe))}function De(Qe,ce,fe){fe=Math.min(Qe.length,fe);const nt=[];let St=ce;for(;St<fe;){const Ht=Qe[St];let sn=null,tr=Ht>239?4:Ht>223?3:Ht>191?2:1;if(St+tr<=fe){let Oe,se,ve,p;switch(tr){case 1:Ht<128&&(sn=Ht);break;case 2:Oe=Qe[St+1],(Oe&192)===128&&(p=(Ht&31)<<6|Oe&63,p>127&&(sn=p));break;case 3:Oe=Qe[St+1],se=Qe[St+2],(Oe&192)===128&&(se&192)===128&&(p=(Ht&15)<<12|(Oe&63)<<6|se&63,p>2047&&(p<55296||p>57343)&&(sn=p));break;case 4:Oe=Qe[St+1],se=Qe[St+2],ve=Qe[St+3],(Oe&192)===128&&(se&192)===128&&(ve&192)===128&&(p=(Ht&15)<<18|(Oe&63)<<12|(se&63)<<6|ve&63,p>65535&&p<1114112&&(sn=p))}}sn===null?(sn=65533,tr=1):sn>65535&&(sn-=65536,nt.push(sn>>>10&1023|55296),sn=56320|sn&1023),nt.push(sn),St+=tr}return at(nt)}const be=4096;function at(Qe){const ce=Qe.length;if(ce<=be)return String.fromCharCode.apply(String,Qe);let fe="",nt=0;for(;nt<ce;)fe+=String.fromCharCode.apply(String,Qe.slice(nt,nt+=be));return fe}function Ze(Qe,ce,fe){let nt="";fe=Math.min(Qe.length,fe);for(let St=ce;St<fe;++St)nt+=String.fromCharCode(Qe[St]&127);return nt}function Je(Qe,ce,fe){let nt="";fe=Math.min(Qe.length,fe);for(let St=ce;St<fe;++St)nt+=String.fromCharCode(Qe[St]);return nt}function We(Qe,ce,fe){const nt=Qe.length;(!ce||ce<0)&&(ce=0),(!fe||fe<0||fe>nt)&&(fe=nt);let St="";for(let Ht=ce;Ht<fe;++Ht)St+=dr[Qe[Ht]];return St}function Me(Qe,ce,fe){const nt=Qe.slice(ce,fe);let St="";for(let Ht=0;Ht<nt.length-1;Ht+=2)St+=String.fromCharCode(nt[Ht]+nt[Ht+1]*256);return St}o.prototype.slice=function(ce,fe){const nt=this.length;ce=~~ce,fe=fe===void 0?nt:~~fe,ce<0?(ce+=nt,ce<0&&(ce=0)):ce>nt&&(ce=nt),fe<0?(fe+=nt,fe<0&&(fe=0)):fe>nt&&(fe=nt),fe<ce&&(fe=ce);const St=this.subarray(ce,fe);return Object.setPrototypeOf(St,o.prototype),St};function Fe(Qe,ce,fe){if(Qe%1!==0||Qe<0)throw new RangeError("offset is not uint");if(Qe+ce>fe)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=this[ce],Ht=1,sn=0;for(;++sn<fe&&(Ht*=256);)St+=this[ce+sn]*Ht;return St},o.prototype.readUintBE=o.prototype.readUIntBE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=this[ce+--fe],Ht=1;for(;fe>0&&(Ht*=256);)St+=this[ce+--fe]*Ht;return St},o.prototype.readUint8=o.prototype.readUInt8=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,1,this.length),this[ce]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,2,this.length),this[ce]|this[ce+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,2,this.length),this[ce]<<8|this[ce+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+this[ce+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),this[ce]*16777216+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},o.prototype.readBigUInt64LE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=fe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24,Ht=this[++ce]+this[++ce]*2**8+this[++ce]*2**16+nt*2**24;return BigInt(St)+(BigInt(Ht)<<BigInt(32))}),o.prototype.readBigUInt64BE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=fe*2**24+this[++ce]*2**16+this[++ce]*2**8+this[++ce],Ht=this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+nt;return(BigInt(St)<<BigInt(32))+BigInt(Ht)}),o.prototype.readIntLE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=this[ce],Ht=1,sn=0;for(;++sn<fe&&(Ht*=256);)St+=this[ce+sn]*Ht;return Ht*=128,St>=Ht&&(St-=Math.pow(2,8*fe)),St},o.prototype.readIntBE=function(ce,fe,nt){ce=ce>>>0,fe=fe>>>0,nt||Fe(ce,fe,this.length);let St=fe,Ht=1,sn=this[ce+--St];for(;St>0&&(Ht*=256);)sn+=this[ce+--St]*Ht;return Ht*=128,sn>=Ht&&(sn-=Math.pow(2,8*fe)),sn},o.prototype.readInt8=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,1,this.length),this[ce]&128?(255-this[ce]+1)*-1:this[ce]},o.prototype.readInt16LE=function(ce,fe){ce=ce>>>0,fe||Fe(ce,2,this.length);const nt=this[ce]|this[ce+1]<<8;return nt&32768?nt|4294901760:nt},o.prototype.readInt16BE=function(ce,fe){ce=ce>>>0,fe||Fe(ce,2,this.length);const nt=this[ce+1]|this[ce]<<8;return nt&32768?nt|4294901760:nt},o.prototype.readInt32LE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},o.prototype.readInt32BE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},o.prototype.readBigInt64LE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=this[ce+4]+this[ce+5]*2**8+this[ce+6]*2**16+(nt<<24);return(BigInt(St)<<BigInt(32))+BigInt(fe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24)}),o.prototype.readBigInt64BE=vr(function(ce){ce=ce>>>0,ft(ce,"offset");const fe=this[ce],nt=this[ce+7];(fe===void 0||nt===void 0)&&Ut(ce,this.length-8);const St=(fe<<24)+this[++ce]*2**16+this[++ce]*2**8+this[++ce];return(BigInt(St)<<BigInt(32))+BigInt(this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+nt)}),o.prototype.readFloatLE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),t.read(this,ce,!0,23,4)},o.prototype.readFloatBE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,4,this.length),t.read(this,ce,!1,23,4)},o.prototype.readDoubleLE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,8,this.length),t.read(this,ce,!0,52,8)},o.prototype.readDoubleBE=function(ce,fe){return ce=ce>>>0,fe||Fe(ce,8,this.length),t.read(this,ce,!1,52,8)};function He(Qe,ce,fe,nt,St,Ht){if(!o.isBuffer(Qe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>St||ce<Ht)throw new RangeError('"value" argument is out of bounds');if(fe+nt>Qe.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,nt=nt>>>0,!St){const tr=Math.pow(2,8*nt)-1;He(this,ce,fe,nt,tr,0)}let Ht=1,sn=0;for(this[fe]=ce&255;++sn<nt&&(Ht*=256);)this[fe+sn]=ce/Ht&255;return fe+nt},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,nt=nt>>>0,!St){const tr=Math.pow(2,8*nt)-1;He(this,ce,fe,nt,tr,0)}let Ht=nt-1,sn=1;for(this[fe+Ht]=ce&255;--Ht>=0&&(sn*=256);)this[fe+Ht]=ce/sn&255;return fe+nt},o.prototype.writeUint8=o.prototype.writeUInt8=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,1,255,0),this[fe]=ce&255,fe+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,65535,0),this[fe]=ce&255,this[fe+1]=ce>>>8,fe+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,65535,0),this[fe]=ce>>>8,this[fe+1]=ce&255,fe+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,4294967295,0),this[fe+3]=ce>>>24,this[fe+2]=ce>>>16,this[fe+1]=ce>>>8,this[fe]=ce&255,fe+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,4294967295,0),this[fe]=ce>>>24,this[fe+1]=ce>>>16,this[fe+2]=ce>>>8,this[fe+3]=ce&255,fe+4};function bt(Qe,ce,fe,nt,St){_t(ce,nt,St,Qe,fe,7);let Ht=Number(ce&BigInt(4294967295));Qe[fe++]=Ht,Ht=Ht>>8,Qe[fe++]=Ht,Ht=Ht>>8,Qe[fe++]=Ht,Ht=Ht>>8,Qe[fe++]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Qe[fe++]=sn,sn=sn>>8,Qe[fe++]=sn,sn=sn>>8,Qe[fe++]=sn,sn=sn>>8,Qe[fe++]=sn,fe}function Yt(Qe,ce,fe,nt,St){_t(ce,nt,St,Qe,fe,7);let Ht=Number(ce&BigInt(4294967295));Qe[fe+7]=Ht,Ht=Ht>>8,Qe[fe+6]=Ht,Ht=Ht>>8,Qe[fe+5]=Ht,Ht=Ht>>8,Qe[fe+4]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Qe[fe+3]=sn,sn=sn>>8,Qe[fe+2]=sn,sn=sn>>8,Qe[fe+1]=sn,sn=sn>>8,Qe[fe]=sn,fe+8}o.prototype.writeBigUInt64LE=vr(function(ce,fe=0){return bt(this,ce,fe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=vr(function(ce,fe=0){return Yt(this,ce,fe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,!St){const Oe=Math.pow(2,8*nt-1);He(this,ce,fe,nt,Oe-1,-Oe)}let Ht=0,sn=1,tr=0;for(this[fe]=ce&255;++Ht<nt&&(sn*=256);)ce<0&&tr===0&&this[fe+Ht-1]!==0&&(tr=1),this[fe+Ht]=(ce/sn>>0)-tr&255;return fe+nt},o.prototype.writeIntBE=function(ce,fe,nt,St){if(ce=+ce,fe=fe>>>0,!St){const Oe=Math.pow(2,8*nt-1);He(this,ce,fe,nt,Oe-1,-Oe)}let Ht=nt-1,sn=1,tr=0;for(this[fe+Ht]=ce&255;--Ht>=0&&(sn*=256);)ce<0&&tr===0&&this[fe+Ht+1]!==0&&(tr=1),this[fe+Ht]=(ce/sn>>0)-tr&255;return fe+nt},o.prototype.writeInt8=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,1,127,-128),ce<0&&(ce=255+ce+1),this[fe]=ce&255,fe+1},o.prototype.writeInt16LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,32767,-32768),this[fe]=ce&255,this[fe+1]=ce>>>8,fe+2},o.prototype.writeInt16BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,2,32767,-32768),this[fe]=ce>>>8,this[fe+1]=ce&255,fe+2},o.prototype.writeInt32LE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,2147483647,-2147483648),this[fe]=ce&255,this[fe+1]=ce>>>8,this[fe+2]=ce>>>16,this[fe+3]=ce>>>24,fe+4},o.prototype.writeInt32BE=function(ce,fe,nt){return ce=+ce,fe=fe>>>0,nt||He(this,ce,fe,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[fe]=ce>>>24,this[fe+1]=ce>>>16,this[fe+2]=ce>>>8,this[fe+3]=ce&255,fe+4},o.prototype.writeBigInt64LE=vr(function(ce,fe=0){return bt(this,ce,fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=vr(function(ce,fe=0){return Yt(this,ce,fe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function gt(Qe,ce,fe,nt,St,Ht){if(fe+nt>Qe.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function Lt(Qe,ce,fe,nt,St){return ce=+ce,fe=fe>>>0,St||gt(Qe,ce,fe,4),t.write(Qe,ce,fe,nt,23,4),fe+4}o.prototype.writeFloatLE=function(ce,fe,nt){return Lt(this,ce,fe,!0,nt)},o.prototype.writeFloatBE=function(ce,fe,nt){return Lt(this,ce,fe,!1,nt)};function Kt(Qe,ce,fe,nt,St){return ce=+ce,fe=fe>>>0,St||gt(Qe,ce,fe,8),t.write(Qe,ce,fe,nt,52,8),fe+8}o.prototype.writeDoubleLE=function(ce,fe,nt){return Kt(this,ce,fe,!0,nt)},o.prototype.writeDoubleBE=function(ce,fe,nt){return Kt(this,ce,fe,!1,nt)},o.prototype.copy=function(ce,fe,nt,St){if(!o.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(nt||(nt=0),!St&&St!==0&&(St=this.length),fe>=ce.length&&(fe=ce.length),fe||(fe=0),St>0&&St<nt&&(St=nt),St===nt||ce.length===0||this.length===0)return 0;if(fe<0)throw new RangeError("targetStart out of bounds");if(nt<0||nt>=this.length)throw new RangeError("Index out of range");if(St<0)throw new RangeError("sourceEnd out of bounds");St>this.length&&(St=this.length),ce.length-fe<St-nt&&(St=ce.length-fe+nt);const Ht=St-nt;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(fe,nt,St):Uint8Array.prototype.set.call(ce,this.subarray(nt,St),fe),Ht},o.prototype.fill=function(ce,fe,nt,St){if(typeof ce=="string"){if(typeof fe=="string"?(St=fe,fe=0,nt=this.length):typeof nt=="string"&&(St=nt,nt=this.length),St!==void 0&&typeof St!="string")throw new TypeError("encoding must be a string");if(typeof St=="string"&&!o.isEncoding(St))throw new TypeError("Unknown encoding: "+St);if(ce.length===1){const sn=ce.charCodeAt(0);(St==="utf8"&&sn<128||St==="latin1")&&(ce=sn)}}else typeof ce=="number"?ce=ce&255:typeof ce=="boolean"&&(ce=Number(ce));if(fe<0||this.length<fe||this.length<nt)throw new RangeError("Out of range index");if(nt<=fe)return this;fe=fe>>>0,nt=nt===void 0?this.length:nt>>>0,ce||(ce=0);let Ht;if(typeof ce=="number")for(Ht=fe;Ht<nt;++Ht)this[Ht]=ce;else{const sn=o.isBuffer(ce)?ce:o.from(ce,St),tr=sn.length;if(tr===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ht=0;Ht<nt-fe;++Ht)this[Ht+fe]=sn[Ht%tr]}return this};const Ue={};function Pe(Qe,ce,fe){Ue[Qe]=class extends fe{constructor(){super(),Object.defineProperty(this,"message",{value:ce.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Qe}]`,this.stack,delete this.name}get code(){return Qe}set code(St){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:St,writable:!0})}toString(){return`${this.name} [${Qe}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(Qe){return Qe?`${Qe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(Qe,ce){return`The "${Qe}" argument must be of type number. Received type ${typeof ce}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(Qe,ce,fe){let nt=`The value of "${Qe}" is out of range.`,St=fe;return Number.isInteger(fe)&&Math.abs(fe)>2**32?St=Be(String(fe)):typeof fe=="bigint"&&(St=String(fe),(fe>BigInt(2)**BigInt(32)||fe<-(BigInt(2)**BigInt(32)))&&(St=Be(St)),St+="n"),nt+=` It must be ${ce}. Received ${St}`,nt},RangeError);function Be(Qe){let ce="",fe=Qe.length;const nt=Qe[0]==="-"?1:0;for(;fe>=nt+4;fe-=3)ce=`_${Qe.slice(fe-3,fe)}${ce}`;return`${Qe.slice(0,fe)}${ce}`}function it(Qe,ce,fe){ft(ce,"offset"),(Qe[ce]===void 0||Qe[ce+fe]===void 0)&&Ut(ce,Qe.length-(fe+1))}function _t(Qe,ce,fe,nt,St,Ht){if(Qe>fe||Qe<ce){const sn=typeof ce=="bigint"?"n":"";let tr;throw ce===0||ce===BigInt(0)?tr=`>= 0${sn} and < 2${sn} ** ${(Ht+1)*8}${sn}`:tr=`>= -(2${sn} ** ${(Ht+1)*8-1}${sn}) and < 2 ** ${(Ht+1)*8-1}${sn}`,new Ue.ERR_OUT_OF_RANGE("value",tr,Qe)}it(nt,St,Ht)}function ft(Qe,ce){if(typeof Qe!="number")throw new Ue.ERR_INVALID_ARG_TYPE(ce,"number",Qe)}function Ut(Qe,ce,fe){throw Math.floor(Qe)!==Qe?(ft(Qe,fe),new Ue.ERR_OUT_OF_RANGE("offset","an integer",Qe)):ce<0?new Ue.ERR_BUFFER_OUT_OF_BOUNDS:new Ue.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ce}`,Qe)}const rn=/[^+/0-9A-Za-z-_]/g;function Dt(Qe){if(Qe=Qe.split("=")[0],Qe=Qe.trim().replace(rn,""),Qe.length<2)return"";for(;Qe.length%4!==0;)Qe=Qe+"=";return Qe}function _n(Qe,ce){ce=ce||1/0;let fe;const nt=Qe.length;let St=null;const Ht=[];for(let sn=0;sn<nt;++sn){if(fe=Qe.charCodeAt(sn),fe>55295&&fe<57344){if(!St){if(fe>56319){(ce-=3)>-1&&Ht.push(239,191,189);continue}else if(sn+1===nt){(ce-=3)>-1&&Ht.push(239,191,189);continue}St=fe;continue}if(fe<56320){(ce-=3)>-1&&Ht.push(239,191,189),St=fe;continue}fe=(St-55296<<10|fe-56320)+65536}else St&&(ce-=3)>-1&&Ht.push(239,191,189);if(St=null,fe<128){if((ce-=1)<0)break;Ht.push(fe)}else if(fe<2048){if((ce-=2)<0)break;Ht.push(fe>>6|192,fe&63|128)}else if(fe<65536){if((ce-=3)<0)break;Ht.push(fe>>12|224,fe>>6&63|128,fe&63|128)}else if(fe<1114112){if((ce-=4)<0)break;Ht.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,fe&63|128)}else throw new Error("Invalid code point")}return Ht}function qn(Qe){const ce=[];for(let fe=0;fe<Qe.length;++fe)ce.push(Qe.charCodeAt(fe)&255);return ce}function tn(Qe,ce){let fe,nt,St;const Ht=[];for(let sn=0;sn<Qe.length&&!((ce-=2)<0);++sn)fe=Qe.charCodeAt(sn),nt=fe>>8,St=fe%256,Ht.push(St),Ht.push(nt);return Ht}function rr(Qe){return e.toByteArray(Dt(Qe))}function Dn(Qe,ce,fe,nt){let St;for(St=0;St<nt&&!(St+fe>=ce.length||St>=Qe.length);++St)ce[St+fe]=Qe[St];return St}function pn(Qe,ce){return Qe instanceof ce||Qe!=null&&Qe.constructor!=null&&Qe.constructor.name!=null&&Qe.constructor.name===ce.name}function Zn(Qe){return Qe!==Qe}const dr=function(){const Qe="0123456789abcdef",ce=new Array(256);for(let fe=0;fe<16;++fe){const nt=fe*16;for(let St=0;St<16;++St)ce[nt+St]=Qe[fe]+Qe[St]}return ce}();function vr(Qe){return typeof BigInt>"u"?Jn:Qe}function Jn(){throw new Error("BigInt not supported")}}(m4)),m4}var iY=rY();const oY=Al(iY);var g4,dI;function sY(){if(dI)return g4;dI=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,o=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/[\\^$.*+?()[\]{}|]/g,x=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,O=typeof window=="object"&&window&&window.Object===Object&&window,T=typeof self=="object"&&self&&self.Object===Object&&self,F=O||T||Function("return this")();function j(se,ve){return se==null?void 0:se[ve]}function N(se){var ve=!1;if(se!=null&&typeof se.toString!="function")try{ve=!!(se+"")}catch{}return ve}var q=Array.prototype,H=Function.prototype,oe=Object.prototype,ne=F["__core-js_shared__"],$=function(){var se=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return se?"Symbol(src)_1."+se:""}(),te=H.toString,G=oe.hasOwnProperty,ie=oe.toString,he=RegExp("^"+te.call(G).replace(y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pe=F.Symbol,Ee=q.splice,me=rr(F,"Map"),Se=rr(Object,"create"),De=pe?pe.prototype:void 0,be=De?De.toString:void 0;function at(se){var ve=-1,p=se?se.length:0;for(this.clear();++ve<p;){var Ne=se[ve];this.set(Ne[0],Ne[1])}}function Ze(){this.__data__=Se?Se(null):{}}function Je(se){return this.has(se)&&delete this.__data__[se]}function We(se){var ve=this.__data__;if(Se){var p=ve[se];return p===e?void 0:p}return G.call(ve,se)?ve[se]:void 0}function Me(se){var ve=this.__data__;return Se?ve[se]!==void 0:G.call(ve,se)}function Fe(se,ve){var p=this.__data__;return p[se]=Se&&ve===void 0?e:ve,this}at.prototype.clear=Ze,at.prototype.delete=Je,at.prototype.get=We,at.prototype.has=Me,at.prototype.set=Fe;function He(se){var ve=-1,p=se?se.length:0;for(this.clear();++ve<p;){var Ne=se[ve];this.set(Ne[0],Ne[1])}}function bt(){this.__data__=[]}function Yt(se){var ve=this.__data__,p=Ut(ve,se);if(p<0)return!1;var Ne=ve.length-1;return p==Ne?ve.pop():Ee.call(ve,p,1),!0}function gt(se){var ve=this.__data__,p=Ut(ve,se);return p<0?void 0:ve[p][1]}function Lt(se){return Ut(this.__data__,se)>-1}function Kt(se,ve){var p=this.__data__,Ne=Ut(p,se);return Ne<0?p.push([se,ve]):p[Ne][1]=ve,this}He.prototype.clear=bt,He.prototype.delete=Yt,He.prototype.get=gt,He.prototype.has=Lt,He.prototype.set=Kt;function Ue(se){var ve=-1,p=se?se.length:0;for(this.clear();++ve<p;){var Ne=se[ve];this.set(Ne[0],Ne[1])}}function Pe(){this.__data__={hash:new at,map:new(me||He),string:new at}}function Be(se){return tn(this,se).delete(se)}function it(se){return tn(this,se).get(se)}function _t(se){return tn(this,se).has(se)}function ft(se,ve){return tn(this,se).set(se,ve),this}Ue.prototype.clear=Pe,Ue.prototype.delete=Be,Ue.prototype.get=it,Ue.prototype.has=_t,Ue.prototype.set=ft;function Ut(se,ve){for(var p=se.length;p--;)if(ce(se[p][0],ve))return p;return-1}function rn(se,ve){ve=Dn(ve,se)?[ve]:qn(ve);for(var p=0,Ne=ve.length;se!=null&&p<Ne;)se=se[vr(ve[p++])];return p&&p==Ne?se:void 0}function Dt(se){if(!St(se)||Zn(se))return!1;var ve=nt(se)||N(se)?he:B;return ve.test(Jn(se))}function _n(se){if(typeof se=="string")return se;if(sn(se))return be?be.call(se):"";var ve=se+"";return ve=="0"&&1/se==-1/0?"-0":ve}function qn(se){return fe(se)?se:dr(se)}function tn(se,ve){var p=se.__data__;return pn(ve)?p[typeof ve=="string"?"string":"hash"]:p.map}function rr(se,ve){var p=j(se,ve);return Dt(p)?p:void 0}function Dn(se,ve){if(fe(se))return!1;var p=typeof se;return p=="number"||p=="symbol"||p=="boolean"||se==null||sn(se)?!0:a.test(se)||!s.test(se)||ve!=null&&se in Object(ve)}function pn(se){var ve=typeof se;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?se!=="__proto__":se===null}function Zn(se){return!!$&&$ in se}var dr=Qe(function(se){se=tr(se);var ve=[];return o.test(se)&&ve.push(""),se.replace(f,function(p,Ne,Ye,rt){ve.push(Ye?rt.replace(x,"$1"):Ne||p)}),ve});function vr(se){if(typeof se=="string"||sn(se))return se;var ve=se+"";return ve=="0"&&1/se==-1/0?"-0":ve}function Jn(se){if(se!=null){try{return te.call(se)}catch{}try{return se+""}catch{}}return""}function Qe(se,ve){if(typeof se!="function"||ve&&typeof ve!="function")throw new TypeError(n);var p=function(){var Ne=arguments,Ye=ve?ve.apply(this,Ne):Ne[0],rt=p.cache;if(rt.has(Ye))return rt.get(Ye);var ct=se.apply(this,Ne);return p.cache=rt.set(Ye,ct),ct};return p.cache=new(Qe.Cache||Ue),p}Qe.Cache=Ue;function ce(se,ve){return se===ve||se!==se&&ve!==ve}var fe=Array.isArray;function nt(se){var ve=St(se)?ie.call(se):"";return ve==t||ve==r}function St(se){var ve=typeof se;return!!se&&(ve=="object"||ve=="function")}function Ht(se){return!!se&&typeof se=="object"}function sn(se){return typeof se=="symbol"||Ht(se)&&ie.call(se)==i}function tr(se){return se==null?"":_n(se)}function Oe(se,ve,p){var Ne=se==null?void 0:rn(se,ve);return Ne===void 0?p:Ne}return g4=Oe,g4}var aY=sY();const lY=Al(aY);var Gv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var uY=Gv.exports,hI;function AY(){return hI||(hI=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",y=500,x="__lodash_placeholder__",B=1,O=2,T=4,F=1,j=2,N=1,q=2,H=4,oe=8,ne=16,$=32,te=64,G=128,ie=256,he=512,pe=30,Ee="...",me=800,Se=16,De=1,be=2,at=3,Ze=1/0,Je=9007199254740991,We=17976931348623157e292,Me=NaN,Fe=4294967295,He=Fe-1,bt=Fe>>>1,Yt=[["ary",G],["bind",N],["bindKey",q],["curry",oe],["curryRight",ne],["flip",he],["partial",$],["partialRight",te],["rearg",ie]],gt="[object Arguments]",Lt="[object Array]",Kt="[object AsyncFunction]",Ue="[object Boolean]",Pe="[object Date]",Be="[object DOMException]",it="[object Error]",_t="[object Function]",ft="[object GeneratorFunction]",Ut="[object Map]",rn="[object Number]",Dt="[object Null]",_n="[object Object]",qn="[object Promise]",tn="[object Proxy]",rr="[object RegExp]",Dn="[object Set]",pn="[object String]",Zn="[object Symbol]",dr="[object Undefined]",vr="[object WeakMap]",Jn="[object WeakSet]",Qe="[object ArrayBuffer]",ce="[object DataView]",fe="[object Float32Array]",nt="[object Float64Array]",St="[object Int8Array]",Ht="[object Int16Array]",sn="[object Int32Array]",tr="[object Uint8Array]",Oe="[object Uint8ClampedArray]",se="[object Uint16Array]",ve="[object Uint32Array]",p=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,Ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rt=/&(?:amp|lt|gt|quot|#39);/g,ct=/[&<>"']/g,dt=RegExp(rt.source),qt=RegExp(ct.source),Gt=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,Tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,On=/^\w*$/,gr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/[\\^$.*+?()[\]{}|]/g,on=RegExp(Er.source),Rn=/^\s+/,er=/\s/,Xr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ur=/\{\n\/\* \[wrapped with (.+)\] \*/,Dr=/,? & /,ur=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,go=/[()=,{}\[\]\/\s]/,Sa=/\\(\\)?/g,Yi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ci=/\w*$/,oo=/^[-+]0x[0-9a-f]+$/i,Ro=/^0b[01]+$/i,Pi=/^\[object .+?Constructor\]$/,Na=/^0o[0-7]+$/i,Ea=/^(?:0|[1-9]\d*)$/,rs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,aa=/($^)/,cl=/['\n\r\u2028\u2029\\]/g,Ao="\\ud800-\\udfff",Uu="\\u0300-\\u036f",Zl="\\ufe20-\\ufe2f",so="\\u20d0-\\u20ff",Tr=Uu+Zl+so,tl="\\u2700-\\u27bf",Os="a-z\\xdf-\\xf6\\xf8-\\xff",ea="\\xac\\xb1\\xd7\\xf7",qe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wt="\\u2000-\\u206f",vn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yn="A-Z\\xc0-\\xd6\\xd8-\\xde",hn="\\ufe0e\\ufe0f",or=ea+qe+wt+vn,Ki="['’]",yo="["+Ao+"]",_s="["+or+"]",Fs="["+Tr+"]",OA="\\d+",ei="["+tl+"]",Mi="["+Os+"]",nl="[^"+Ao+or+OA+tl+Os+Yn+"]",Ai="\\ud83c[\\udffb-\\udfff]",la="(?:"+Fs+"|"+Ai+")",rc="[^"+Ao+"]",Ba="(?:\\ud83c[\\udde6-\\uddff]){2}",Rr="[\\ud800-\\udbff][\\udc00-\\udfff]",$i="["+Yn+"]",vo="\\u200d",yu="(?:"+Mi+"|"+nl+")",Mo="(?:"+$i+"|"+nl+")",Gs="(?:"+Ki+"(?:d|ll|m|re|s|t|ve))?",Qs="(?:"+Ki+"(?:D|LL|M|RE|S|T|VE))?",zu=la+"?",bl="["+hn+"]?",co="(?:"+vo+"(?:"+[rc,Ba,Rr].join("|")+")"+bl+zu+")*",Oo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Zo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Oa=bl+zu+co,Ss="(?:"+[ei,Ba,Rr].join("|")+")"+Oa,Ia="(?:"+[rc+Fs+"?",Fs,Ba,Rr,yo].join("|")+")",ta=RegExp(Ki,"g"),IA=RegExp(Fs,"g"),ho=RegExp(Ai+"(?="+Ai+")|"+Ia+Oa,"g"),Xl=RegExp([$i+"?"+Mi+"+"+Gs+"(?="+[_s,$i,"$"].join("|")+")",Mo+"+"+Qs+"(?="+[_s,$i+yu,"$"].join("|")+")",$i+"?"+yu+"+"+Gs,$i+"+"+Qs,Zo,Oo,OA,Ss].join("|"),"g"),zi=RegExp("["+vo+Ao+Tr+hn+"]"),Yr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vi=-1,ao={};ao[fe]=ao[nt]=ao[St]=ao[Ht]=ao[sn]=ao[tr]=ao[Oe]=ao[se]=ao[ve]=!0,ao[gt]=ao[Lt]=ao[Qe]=ao[Ue]=ao[ce]=ao[Pe]=ao[it]=ao[_t]=ao[Ut]=ao[rn]=ao[_n]=ao[rr]=ao[Dn]=ao[pn]=ao[vr]=!1;var Di={};Di[gt]=Di[Lt]=Di[Qe]=Di[ce]=Di[Ue]=Di[Pe]=Di[fe]=Di[nt]=Di[St]=Di[Ht]=Di[sn]=Di[Ut]=Di[rn]=Di[_n]=Di[rr]=Di[Dn]=Di[pn]=Di[Zn]=Di[tr]=Di[Oe]=Di[se]=Di[ve]=!0,Di[it]=Di[_t]=Di[vr]=!1;var J={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},st={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kr=parseFloat,$n=parseInt,ti=typeof window=="object"&&window&&window.Object===Object&&window,ci=typeof self=="object"&&self&&self.Object===Object&&self,Br=ti||ci||Function("return this")(),xr=e&&!e.nodeType&&e,ji=xr&&!0&&n&&!n.nodeType&&n,Xi=ji&&ji.exports===xr,Ei=Xi&&ti.process,Wr=function(){try{var Jt=ji&&ji.require&&ji.require("util").types;return Jt||Ei&&Ei.binding&&Ei.binding("util")}catch{}}(),So=Wr&&Wr.isArrayBuffer,Ri=Wr&&Wr.isDate,ds=Wr&&Wr.isMap,ma=Wr&&Wr.isRegExp,Wa=Wr&&Wr.isSet,vu=Wr&&Wr.isTypedArray;function qs(Jt,En,ln){switch(ln.length){case 0:return Jt.call(En);case 1:return Jt.call(En,ln[0]);case 2:return Jt.call(En,ln[0],ln[1]);case 3:return Jt.call(En,ln[0],ln[1],ln[2])}return Jt.apply(En,ln)}function $d(Jt,En,ln,Fr){for(var Bi=-1,fo=Jt==null?0:Jt.length;++Bi<fo;){var ra=Jt[Bi];En(Fr,ra,ln(ra),Jt)}return Fr}function ga(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length;++ln<Fr&&En(Jt[ln],ln,Jt)!==!1;);return Jt}function xl(Jt,En){for(var ln=Jt==null?0:Jt.length;ln--&&En(Jt[ln],ln,Jt)!==!1;);return Jt}function Vc(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length;++ln<Fr;)if(!En(Jt[ln],ln,Jt))return!1;return!0}function ju(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length,Bi=0,fo=[];++ln<Fr;){var ra=Jt[ln];En(ra,ln,Jt)&&(fo[Bi++]=ra)}return fo}function Vd(Jt,En){var ln=Jt==null?0:Jt.length;return!!ln&&na(Jt,En,0)>-1}function Cu(Jt,En,ln){for(var Fr=-1,Bi=Jt==null?0:Jt.length;++Fr<Bi;)if(ln(En,Jt[Fr]))return!0;return!1}function Ls(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length,Bi=Array(Fr);++ln<Fr;)Bi[ln]=En(Jt[ln],ln,Jt);return Bi}function kA(Jt,En){for(var ln=-1,Fr=En.length,Bi=Jt.length;++ln<Fr;)Jt[Bi+ln]=En[ln];return Jt}function gd(Jt,En,ln,Fr){var Bi=-1,fo=Jt==null?0:Jt.length;for(Fr&&fo&&(ln=Jt[++Bi]);++Bi<fo;)ln=En(ln,Jt[Bi],Bi,Jt);return ln}function Hd(Jt,En,ln,Fr){var Bi=Jt==null?0:Jt.length;for(Fr&&Bi&&(ln=Jt[--Bi]);Bi--;)ln=En(ln,Jt[Bi],Bi,Jt);return ln}function Bc(Jt,En){for(var ln=-1,Fr=Jt==null?0:Jt.length;++ln<Fr;)if(En(Jt[ln],ln,Jt))return!0;return!1}var Oc=df("length");function ep(Jt){return Jt.split("")}function yd(Jt){return Jt.match(ur)||[]}function Kp(Jt,En,ln){var Fr;return ln(Jt,function(Bi,fo,ra){if(En(Bi,fo,ra))return Fr=fo,!1}),Fr}function ic(Jt,En,ln,Fr){for(var Bi=Jt.length,fo=ln+(Fr?1:-1);Fr?fo--:++fo<Bi;)if(En(Jt[fo],fo,Jt))return fo;return-1}function na(Jt,En,ln){return En===En?Ih(Jt,En,ln):ic(Jt,xh,ln)}function cf(Jt,En,ln,Fr){for(var Bi=ln-1,fo=Jt.length;++Bi<fo;)if(Fr(Jt[Bi],En))return Bi;return-1}function xh(Jt){return Jt!==Jt}function vd(Jt,En){var ln=Jt==null?0:Jt.length;return ln?wh(Jt,En)/ln:Me}function df(Jt){return function(En){return En==null?t:En[Jt]}}function Cd(Jt){return function(En){return Jt==null?t:Jt[En]}}function hf(Jt,En,ln,Fr,Bi){return Bi(Jt,function(fo,ra,is){ln=Fr?(Fr=!1,fo):En(ln,fo,ra,is)}),ln}function oc(Jt,En){var ln=Jt.length;for(Jt.sort(En);ln--;)Jt[ln]=Jt[ln].value;return Jt}function wh(Jt,En){for(var ln,Fr=-1,Bi=Jt.length;++Fr<Bi;){var fo=En(Jt[Fr]);fo!==t&&(ln=ln===t?fo:ln+fo)}return ln}function ff(Jt,En){for(var ln=-1,Fr=Array(Jt);++ln<Jt;)Fr[ln]=En(ln);return Fr}function Mh(Jt,En){return Ls(En,function(ln){return[ln,Jt[ln]]})}function Sh(Jt){return Jt&&Jt.slice(0,kh(Jt)+1).replace(Rn,"")}function wl(Jt){return function(En){return Jt(En)}}function Eh(Jt,En){return Ls(En,function(ln){return Jt[ln]})}function Nu(Jt,En){return Jt.has(En)}function AA(Jt,En){for(var ln=-1,Fr=Jt.length;++ln<Fr&&na(En,Jt[ln],0)>-1;);return ln}function Hc(Jt,En){for(var ln=Jt.length;ln--&&na(En,Jt[ln],0)>-1;);return ln}function Bh(Jt,En){for(var ln=Jt.length,Fr=0;ln--;)Jt[ln]===En&&++Fr;return Fr}var Oh=Cd(J),Wu=Cd(Ie);function cA(Jt){return"\\"+$t[Jt]}function Ul(Jt,En){return Jt==null?t:Jt[En]}function Zc(Jt){return zi.test(Jt)}function pf(Jt){return Yr.test(Jt)}function mf(Jt){for(var En,ln=[];!(En=Jt.next()).done;)ln.push(En.value);return ln}function Zd(Jt){var En=-1,ln=Array(Jt.size);return Jt.forEach(function(Fr,Bi){ln[++En]=[Bi,Fr]}),ln}function _d(Jt,En){return function(ln){return Jt(En(ln))}}function ua(Jt,En){for(var ln=-1,Fr=Jt.length,Bi=0,fo=[];++ln<Fr;){var ra=Jt[ln];(ra===En||ra===x)&&(Jt[ln]=x,fo[Bi++]=ln)}return fo}function rl(Jt){var En=-1,ln=Array(Jt.size);return Jt.forEach(function(Fr){ln[++En]=Fr}),ln}function Xo(Jt){var En=-1,ln=Array(Jt.size);return Jt.forEach(function(Fr){ln[++En]=[Fr,Fr]}),ln}function Ih(Jt,En,ln){for(var Fr=ln-1,Bi=Jt.length;++Fr<Bi;)if(Jt[Fr]===En)return Fr;return-1}function vm(Jt,En,ln){for(var Fr=ln+1;Fr--;)if(Jt[Fr]===En)return Fr;return Fr}function bd(Jt){return Zc(Jt)?Ic(Jt):Oc(Jt)}function _u(Jt){return Zc(Jt)?Xd(Jt):ep(Jt)}function kh(Jt){for(var En=Jt.length;En--&&er.test(Jt.charAt(En)););return En}var gf=Cd(st);function Ic(Jt){for(var En=ho.lastIndex=0;ho.test(Jt);)++En;return En}function Xd(Jt){return Jt.match(ho)||[]}function Th(Jt){return Jt.match(Xl)||[]}var Ph=function Jt(En){En=En==null?Br:eu.defaults(Br.Object(),En,eu.pick(Br,Jl));var ln=En.Array,Fr=En.Date,Bi=En.Error,fo=En.Function,ra=En.Math,is=En.Object,TA=En.RegExp,yf=En.String,Gu=En.TypeError,bu=ln.prototype,xu=fo.prototype,zl=is.prototype,Qu=En["__core-js_shared__"],lo=xu.toString,Io=zl.hasOwnProperty,xd=0,wd=function(){var b=/[^.]+$/.exec(Qu&&Qu.keys&&Qu.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),tu=zl.toString,dA=lo.call(is),jl=Br._,sc=TA("^"+lo.call(Io).replace(Er,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hA=Xi?En.Buffer:t,nu=En.Symbol,Xc=En.Uint8Array,Md=hA?hA.allocUnsafe:t,Ga=_d(is.getPrototypeOf,is),Jc=is.create,Sd=zl.propertyIsEnumerable,ac=bu.splice,Kh=nu?nu.isConcatSpreadable:t,qu=nu?nu.iterator:t,ed=nu?nu.toStringTag:t,lc=function(){try{var b=Ud(is,"defineProperty");return b({},"",{}),b}catch{}}(),Dh=En.clearTimeout!==Br.clearTimeout&&En.clearTimeout,hs=Fr&&Fr.now!==Br.Date.now&&Fr.now,kc=En.setTimeout!==Br.setTimeout&&En.setTimeout,PA=ra.ceil,Yu=ra.floor,Jd=is.getOwnPropertySymbols,Ed=hA?hA.isBuffer:t,uc=En.isFinite,td=bu.join,KA=_d(is.keys,is),Oi=ra.max,Us=ra.min,fA=Fr.now,Bd=En.parseInt,nd=ra.random,Tc=bu.reverse,DA=Ud(En,"DataView"),dl=Ud(En,"Map"),pA=Ud(En,"Promise"),hl=Ud(En,"Set"),Ac=Ud(En,"WeakMap"),$u=Ud(is,"create"),Od=Ac&&new Ac,rd={},RA=Va(DA),cc=Va(dl),Vu=Va(pA),Hu=Va(hl),FA=Va(Ac),Pc=nu?nu.prototype:t,wu=Pc?Pc.valueOf:t,Rh=Pc?Pc.toString:t;function ot(b){if(La(b)&&!Eo(b)&&!(b instanceof ii)){if(b instanceof mi)return b;if(Io.call(b,"__wrapped__"))return hu(b)}return new mi(b)}var LA=function(){function b(){}return function(k){if(!Pl(k))return{};if(Jc)return Jc(k);b.prototype=k;var V=new b;return b.prototype=t,V}}();function ko(){}function mi(b,k){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=t}ot.templateSettings={escape:Gt,evaluate:jt,interpolate:xt,variable:"",imports:{_:ot}},ot.prototype=ko.prototype,ot.prototype.constructor=ot,mi.prototype=LA(ko.prototype),mi.prototype.constructor=mi;function ii(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function os(){var b=new ii(this.__wrapped__);return b.__actions__=Ca(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Ca(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Ca(this.__views__),b}function mA(){if(this.__filtered__){var b=new ii(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function eh(){var b=this.__wrapped__.value(),k=this.__dir__,V=Eo(b),ye=k<0,Ve=V?b.length:0,ht=_m(0,Ve,this.__views__),Pt=ht.start,Vt=ht.end,an=Vt-Pt,Hn=ye?Vt:Pt-1,Xn=this.__iteratees__,mr=Xn.length,$r=0,wi=Us(an,this.__takeCount__);if(!V||!ye&&Ve==an&&wi==an)return Pa(b,this.__actions__);var eo=[];e:for(;an--&&$r<wi;){Hn+=k;for(var us=-1,to=b[Hn];++us<mr;){var Ms=Xn[us],Is=Ms.iteratee,Xh=Ms.type,Wd=Is(to);if(Xh==be)to=Wd;else if(!Wd){if(Xh==De)continue e;break e}}eo[$r++]=to}return eo}ii.prototype=LA(ko.prototype),ii.prototype.constructor=ii;function ka(b){var k=-1,V=b==null?0:b.length;for(this.clear();++k<V;){var ye=b[k];this.set(ye[0],ye[1])}}function zs(){this.__data__=$u?$u(null):{},this.size=0}function Es(b){var k=this.has(b)&&delete this.__data__[b];return this.size-=k?1:0,k}function Kc(b){var k=this.__data__;if($u){var V=k[b];return V===f?t:V}return Io.call(k,b)?k[b]:t}function ia(b){var k=this.__data__;return $u?k[b]!==t:Io.call(k,b)}function Aa(b,k){var V=this.__data__;return this.size+=this.has(b)?0:1,V[b]=$u&&k===t?f:k,this}ka.prototype.clear=zs,ka.prototype.delete=Es,ka.prototype.get=Kc,ka.prototype.has=ia,ka.prototype.set=Aa;function hr(b){var k=-1,V=b==null?0:b.length;for(this.clear();++k<V;){var ye=b[k];this.set(ye[0],ye[1])}}function Id(){this.__data__=[],this.size=0}function ya(b){var k=this.__data__,V=Ta(k,b);if(V<0)return!1;var ye=k.length-1;return V==ye?k.pop():ac.call(k,V,1),--this.size,!0}function kd(b){var k=this.__data__,V=Ta(k,b);return V<0?t:k[V][1]}function Td(b){return Ta(this.__data__,b)>-1}function dc(b,k){var V=this.__data__,ye=Ta(V,b);return ye<0?(++this.size,V.push([b,k])):V[ye][1]=k,this}hr.prototype.clear=Id,hr.prototype.delete=ya,hr.prototype.get=kd,hr.prototype.has=Td,hr.prototype.set=dc;function ru(b){var k=-1,V=b==null?0:b.length;for(this.clear();++k<V;){var ye=b[k];this.set(ye[0],ye[1])}}function Ji(){this.size=0,this.__data__={hash:new ka,map:new(dl||hr),string:new ka}}function fl(b){var k=vc(this,b).delete(b);return this.size-=k?1:0,k}function Fh(b){return vc(this,b).get(b)}function Dc(b){return vc(this,b).has(b)}function UA(b,k){var V=vc(this,b),ye=V.size;return V.set(b,k),this.size+=V.size==ye?0:1,this}ru.prototype.clear=Ji,ru.prototype.delete=fl,ru.prototype.get=Fh,ru.prototype.has=Dc,ru.prototype.set=UA;function Rc(b){var k=-1,V=b==null?0:b.length;for(this.__data__=new ru;++k<V;)this.add(b[k])}function zA(b){return this.__data__.set(b,f),this}function hc(b){return this.__data__.has(b)}Rc.prototype.add=Rc.prototype.push=zA,Rc.prototype.has=hc;function bs(b){var k=this.__data__=new hr(b);this.size=k.size}function Fo(){this.__data__=new hr,this.size=0}function iu(b){var k=this.__data__,V=k.delete(b);return this.size=k.size,V}function Qa(b){return this.__data__.get(b)}function qa(b){return this.__data__.has(b)}function Nl(b,k){var V=this.__data__;if(V instanceof hr){var ye=V.__data__;if(!dl||ye.length<i-1)return ye.push([b,k]),this.size=++V.size,this;V=this.__data__=new ru(ye)}return V.set(b,k),this.size=V.size,this}bs.prototype.clear=Fo,bs.prototype.delete=iu,bs.prototype.get=Qa,bs.prototype.has=qa,bs.prototype.set=Nl;function Lo(b,k){var V=Eo(b),ye=!V&&ud(b),Ve=!V&&!ye&&Qp(b),ht=!V&&!ye&&!Ve&&Df(b),Pt=V||ye||Ve||ht,Vt=Pt?ff(b.length,yf):[],an=Vt.length;for(var Hn in b)(k||Io.call(b,Hn))&&!(Pt&&(Hn=="length"||Ve&&(Hn=="offset"||Hn=="parent")||ht&&(Hn=="buffer"||Hn=="byteLength"||Hn=="byteOffset")||E(Hn,an)))&&Vt.push(Hn);return Vt}function Mu(b){var k=b.length;return k?b[Mn(0,k-1)]:t}function fc(b,k){return $a(Ca(b),Su(k,0,b.length))}function th(b){return $a(Ca(b))}function jA(b,k,V){(V!==t&&!ch(b[k],V)||V===t&&!(k in b))&&Hr(b,k,V)}function pc(b,k,V){var ye=b[k];(!(Io.call(b,k)&&ch(ye,V))||V===t&&!(k in b))&&Hr(b,k,V)}function Ta(b,k){for(var V=b.length;V--;)if(ch(b[V][0],k))return V;return-1}function xs(b,k,V,ye){return Ml(b,function(Ve,ht,Pt){k(ye,Ve,V(Ve),Pt)}),ye}function fs(b,k){return b&&Xu(k,fn(k),b)}function Pr(b,k){return b&&Xu(k,jn(k),b)}function Hr(b,k,V){k=="__proto__"&&lc?lc(b,k,{configurable:!0,enumerable:!0,value:V,writable:!0}):b[k]=V}function NA(b,k){for(var V=-1,ye=k.length,Ve=ln(ye),ht=b==null;++V<ye;)Ve[V]=ht?t:Le(b,k[V]);return Ve}function Su(b,k,V){return b===b&&(V!==t&&(b=b<=V?b:V),k!==t&&(b=b>=k?b:k)),b}function pl(b,k,V,ye,Ve,ht){var Pt,Vt=k&B,an=k&O,Hn=k&T;if(V&&(Pt=Ve?V(b,ye,Ve,ht):V(b)),Pt!==t)return Pt;if(!Pl(b))return b;var Xn=Eo(b);if(Xn){if(Pt=ap(b),!Vt)return Ca(b,Pt)}else{var mr=gl(b),$r=mr==_t||mr==ft;if(Qp(b))return ss(b,Vt);if(mr==_n||mr==gt||$r&&!Ve){if(Pt=an||$r?{}:Wl(b),!Vt)return an?tp(b,Pr(Pt,b)):od(b,fs(Pt,b))}else{if(!Di[mr])return Ve?b:{};Pt=Ah(b,mr,Vt)}}ht||(ht=new bs);var wi=ht.get(b);if(wi)return wi;ht.set(b,Pt),C1(b)?b.forEach(function(to){Pt.add(pl(to,k,V,to,b,ht))}):nA(b)&&b.forEach(function(to,Ms){Pt.set(Ms,pl(to,k,V,Ms,b,ht))});var eo=Hn?an?Sf:Mf:an?jn:fn,us=Xn?t:eo(b);return ga(us||b,function(to,Ms){us&&(Ms=to,to=b[Ms]),pc(Pt,Ms,pl(to,k,V,Ms,b,ht))}),Pt}function ou(b){var k=fn(b);return function(V){return Pd(V,b,k)}}function Pd(b,k,V){var ye=V.length;if(b==null)return!ye;for(b=is(b);ye--;){var Ve=V[ye],ht=k[Ve],Pt=b[Ve];if(Pt===t&&!(Ve in b)||!ht(Pt))return!1}return!0}function gA(b,k,V){if(typeof b!="function")throw new Gu(a);return ni(function(){b.apply(t,V)},k)}function mc(b,k,V,ye){var Ve=-1,ht=Vd,Pt=!0,Vt=b.length,an=[],Hn=k.length;if(!Vt)return an;V&&(k=Ls(k,wl(V))),ye?(ht=Cu,Pt=!1):k.length>=i&&(ht=Nu,Pt=!1,k=new Rc(k));e:for(;++Ve<Vt;){var Xn=b[Ve],mr=V==null?Xn:V(Xn);if(Xn=ye||Xn!==0?Xn:0,Pt&&mr===mr){for(var $r=Hn;$r--;)if(k[$r]===mr)continue e;an.push(Xn)}else ht(k,mr,ye)||an.push(Xn)}return an}var Ml=ml(Ya),ys=ml(Zu,!0);function Ys(b,k){var V=!0;return Ml(b,function(ye,Ve,ht){return V=!!k(ye,Ve,ht),V}),V}function id(b,k,V){for(var ye=-1,Ve=b.length;++ye<Ve;){var ht=b[ye],Pt=k(ht);if(Pt!=null&&(Vt===t?Pt===Pt&&!Ad(Pt):V(Pt,Vt)))var Vt=Pt,an=ht}return an}function Kd(b,k,V,ye){var Ve=b.length;for(V=Ko(V),V<0&&(V=-V>Ve?0:Ve+V),ye=ye===t||ye>Ve?Ve:Ko(ye),ye<0&&(ye+=Ve),ye=V>ye?0:Z_(ye);V<ye;)b[V++]=k;return b}function yA(b,k){var V=[];return Ml(b,function(ye,Ve,ht){k(ye,Ve,ht)&&V.push(ye)}),V}function js(b,k,V,ye,Ve){var ht=-1,Pt=b.length;for(V||(V=g),Ve||(Ve=[]);++ht<Pt;){var Vt=b[ht];k>0&&V(Vt)?k>1?js(Vt,k-1,V,ye,Ve):kA(Ve,Vt):ye||(Ve[Ve.length]=Vt)}return Ve}var Fc=Cf(),Eu=Cf(!0);function Ya(b,k){return b&&Fc(b,k,fn)}function Zu(b,k){return b&&Eu(b,k,fn)}function Lc(b,k){return ju(k,function(V){return dh(b[V])})}function Bu(b,k){k=ca(k,b);for(var V=0,ye=k.length;b!=null&&V<ye;)b=b[_a(k[V++])];return V&&V==ye?b:t}function va(b,k,V){var ye=k(b);return Eo(b)?ye:kA(ye,V(b))}function $s(b){return b==null?b===t?dr:Dt:ed&&ed in is(b)?Lp(b):Ln(b)}function su(b,k){return b>k}function au(b,k){return b!=null&&Io.call(b,k)}function WA(b,k){return b!=null&&k in is(b)}function lu(b,k,V){return b>=Us(k,V)&&b<Oi(k,V)}function Uc(b,k,V){for(var ye=V?Cu:Vd,Ve=b[0].length,ht=b.length,Pt=ht,Vt=ln(ht),an=1/0,Hn=[];Pt--;){var Xn=b[Pt];Pt&&k&&(Xn=Ls(Xn,wl(k))),an=Us(Xn.length,an),Vt[Pt]=!V&&(k||Ve>=120&&Xn.length>=120)?new Rc(Pt&&Xn):t}Xn=b[0];var mr=-1,$r=Vt[0];e:for(;++mr<Ve&&Hn.length<an;){var wi=Xn[mr],eo=k?k(wi):wi;if(wi=V||wi!==0?wi:0,!($r?Nu($r,eo):ye(Hn,eo,V))){for(Pt=ht;--Pt;){var us=Vt[Pt];if(!(us?Nu(us,eo):ye(b[Pt],eo,V)))continue e}$r&&$r.push(eo),Hn.push(wi)}}return Hn}function vA(b,k,V,ye){return Ya(b,function(Ve,ht,Pt){k(ye,V(Ve),ht,Pt)}),ye}function Sl(b,k,V){k=ca(k,b),b=Vn(b,k);var ye=b==null?b:b[_a(qA(k))];return ye==null?t:qs(ye,b,V)}function Dd(b){return La(b)&&$s(b)==gt}function I(b){return La(b)&&$s(b)==Qe}function l(b){return La(b)&&$s(b)==Pe}function c(b,k,V,ye,Ve){return b===k?!0:b==null||k==null||!La(b)&&!La(k)?b!==b&&k!==k:_(b,k,V,ye,c,Ve)}function _(b,k,V,ye,Ve,ht){var Pt=Eo(b),Vt=Eo(k),an=Pt?Lt:gl(b),Hn=Vt?Lt:gl(k);an=an==gt?_n:an,Hn=Hn==gt?_n:Hn;var Xn=an==_n,mr=Hn==_n,$r=an==Hn;if($r&&Qp(b)){if(!Qp(k))return!1;Pt=!0,Xn=!1}if($r&&!Xn)return ht||(ht=new bs),Pt||Df(b)?Ju(b,k,V,ye,Ve,ht):wf(b,k,an,V,ye,Ve,ht);if(!(V&F)){var wi=Xn&&Io.call(b,"__wrapped__"),eo=mr&&Io.call(k,"__wrapped__");if(wi||eo){var us=wi?b.value():b,to=eo?k.value():k;return ht||(ht=new bs),Ve(us,to,V,ye,ht)}}return $r?(ht||(ht=new bs),op(b,k,V,ye,Ve,ht)):!1}function w(b){return La(b)&&gl(b)==Ut}function P(b,k,V,ye){var Ve=V.length,ht=Ve,Pt=!ye;if(b==null)return!ht;for(b=is(b);Ve--;){var Vt=V[Ve];if(Pt&&Vt[2]?Vt[1]!==b[Vt[0]]:!(Vt[0]in b))return!1}for(;++Ve<ht;){Vt=V[Ve];var an=Vt[0],Hn=b[an],Xn=Vt[1];if(Pt&&Vt[2]){if(Hn===t&&!(an in b))return!1}else{var mr=new bs;if(ye)var $r=ye(Hn,Xn,an,b,k,mr);if(!($r===t?c(Xn,Hn,F|j,ye,mr):$r))return!1}}return!0}function z(b){if(!Pl(b)||Ce(b))return!1;var k=dh(b)?sc:Pi;return k.test(Va(b))}function Y(b){return La(b)&&$s(b)==rr}function ee(b){return La(b)&&gl(b)==Dn}function ae(b){return La(b)&&v1(b.length)&&!!ao[$s(b)]}function xe(b){return typeof b=="function"?b:b==null?Za:typeof b=="object"?Eo(b)?ut(b[0],b[1]):pt(b):x7(b)}function ke(b){if(!je(b))return KA(b);var k=[];for(var V in is(b))Io.call(b,V)&&V!="constructor"&&k.push(V);return k}function Ke(b){if(!Pl(b))return wn(b);var k=je(b),V=[];for(var ye in b)ye=="constructor"&&(k||!Io.call(b,ye))||V.push(ye);return V}function $e(b,k){return b<k}function Xe(b,k){var V=-1,ye=Nc(b)?ln(b.length):[];return Ml(b,function(Ve,ht,Pt){ye[++V]=k(Ve,ht,Pt)}),ye}function pt(b){var k=zo(b);return k.length==1&&k[0][2]?Mt(k[0][0],k[0][1]):function(V){return V===b||P(V,b,k)}}function ut(b,k){return D(b)&&yt(k)?Mt(_a(b),k):function(V){var ye=Le(V,b);return ye===t&&ye===k?Ot(V,b):c(k,ye,F|j)}}function mt(b,k,V,ye,Ve){b!==k&&Fc(k,function(ht,Pt){if(Ve||(Ve=new bs),Pl(ht))vt(b,k,Pt,V,mt,ye,Ve);else{var Vt=ye?ye(yr(b,Pt),ht,Pt+"",b,k,Ve):t;Vt===t&&(Vt=ht),jA(b,Pt,Vt)}},jn)}function vt(b,k,V,ye,Ve,ht,Pt){var Vt=yr(b,V),an=yr(k,V),Hn=Pt.get(an);if(Hn){jA(b,V,Hn);return}var Xn=ht?ht(Vt,an,V+"",b,k,Pt):t,mr=Xn===t;if(mr){var $r=Eo(an),wi=!$r&&Qp(an),eo=!$r&&!wi&&Df(an);Xn=an,$r||wi||eo?Eo(Vt)?Xn=Vt:Ql(Vt)?Xn=Ca(Vt):wi?(mr=!1,Xn=ss(an,!0)):eo?(mr=!1,Xn=vf(an,!0)):Xn=[]:p0(an)||ud(an)?(Xn=Vt,ud(Vt)?Xn=u(Vt):(!Pl(Vt)||dh(Vt))&&(Xn=Wl(an))):mr=!1}mr&&(Pt.set(an,Xn),Ve(Xn,an,ye,ht,Pt),Pt.delete(an)),jA(b,V,Xn)}function Bt(b,k){var V=b.length;if(V)return k+=k<0?V:0,E(k,V)?b[k]:t}function kt(b,k,V){k.length?k=Ls(k,function(ht){return Eo(ht)?function(Pt){return Bu(Pt,ht.length===1?ht[0]:ht)}:ht}):k=[Za];var ye=-1;k=Ls(k,wl(xi()));var Ve=Xe(b,function(ht,Pt,Vt){var an=Ls(k,function(Hn){return Hn(ht)});return{criteria:an,index:++ye,value:ht}});return oc(Ve,function(ht,Pt){return Dp(ht,Pt,V)})}function Rt(b,k){return zt(b,k,function(V,ye){return Ot(b,ye)})}function zt(b,k,V){for(var ye=-1,Ve=k.length,ht={};++ye<Ve;){var Pt=k[ye],Vt=Bu(b,Pt);V(Vt,Pt)&&pr(ht,ca(Pt,b),Vt)}return ht}function Tt(b){return function(k){return Bu(k,b)}}function nn(b,k,V,ye){var Ve=ye?cf:na,ht=-1,Pt=k.length,Vt=b;for(b===k&&(k=Ca(k)),V&&(Vt=Ls(b,wl(V)));++ht<Pt;)for(var an=0,Hn=k[ht],Xn=V?V(Hn):Hn;(an=Ve(Vt,Xn,an,ye))>-1;)Vt!==b&&ac.call(Vt,an,1),ac.call(b,an,1);return b}function Zt(b,k){for(var V=b?k.length:0,ye=V-1;V--;){var Ve=k[V];if(V==ye||Ve!==ht){var ht=Ve;E(Ve)?ac.call(b,Ve,1):ol(b,Ve)}}return b}function Mn(b,k){return b+Yu(nd()*(k-b+1))}function Bn(b,k,V,ye){for(var Ve=-1,ht=Oi(PA((k-b)/(V||1)),0),Pt=ln(ht);ht--;)Pt[ye?ht:++Ve]=b,b+=V;return Pt}function yn(b,k){var V="";if(!b||k<1||k>Je)return V;do k%2&&(V+=b),k=Yu(k/2),k&&(b+=b);while(k);return V}function In(b,k){return zr(sr(b,k,Za),b+"")}function Nn(b){return Mu(Cl(b))}function Fn(b,k){var V=Cl(b);return $a(V,Su(k,0,V.length))}function pr(b,k,V,ye){if(!Pl(b))return b;k=ca(k,b);for(var Ve=-1,ht=k.length,Pt=ht-1,Vt=b;Vt!=null&&++Ve<ht;){var an=_a(k[Ve]),Hn=V;if(an==="__proto__"||an==="constructor"||an==="prototype")return b;if(Ve!=Pt){var Xn=Vt[an];Hn=ye?ye(Xn,an,Vt):t,Hn===t&&(Hn=Pl(Xn)?Xn:E(k[Ve+1])?[]:{})}pc(Vt,an,Hn),Vt=Vt[an]}return b}var Ti=Od?function(b,k){return Od.set(b,k),b}:Za,Gi=lc?function(b,k){return lc(b,"toString",{configurable:!0,enumerable:!1,value:Bv(k),writable:!0})}:Za;function Uo(b){return $a(Cl(b))}function Si(b,k,V){var ye=-1,Ve=b.length;k<0&&(k=-k>Ve?0:Ve+k),V=V>Ve?Ve:V,V<0&&(V+=Ve),Ve=k>V?0:V-k>>>0,k>>>=0;for(var ht=ln(Ve);++ye<Ve;)ht[ye]=b[ye+k];return ht}function ps(b,k){var V;return Ml(b,function(ye,Ve,ht){return V=k(ye,Ve,ht),!V}),!!V}function To(b,k,V){var ye=0,Ve=b==null?ye:b.length;if(typeof k=="number"&&k===k&&Ve<=bt){for(;ye<Ve;){var ht=ye+Ve>>>1,Pt=b[ht];Pt!==null&&!Ad(Pt)&&(V?Pt<=k:Pt<k)?ye=ht+1:Ve=ht}return Ve}return Po(b,k,Za,V)}function Po(b,k,V,ye){var Ve=0,ht=b==null?0:b.length;if(ht===0)return 0;k=V(k);for(var Pt=k!==k,Vt=k===null,an=Ad(k),Hn=k===t;Ve<ht;){var Xn=Yu((Ve+ht)/2),mr=V(b[Xn]),$r=mr!==t,wi=mr===null,eo=mr===mr,us=Ad(mr);if(Pt)var to=ye||eo;else Hn?to=eo&&(ye||$r):Vt?to=eo&&$r&&(ye||!wi):an?to=eo&&$r&&!wi&&(ye||!us):wi||us?to=!1:to=ye?mr<=k:mr<k;to?Ve=Xn+1:ht=Xn}return Us(ht,He)}function Co(b,k){for(var V=-1,ye=b.length,Ve=0,ht=[];++V<ye;){var Pt=b[V],Vt=k?k(Pt):Pt;if(!V||!ch(Vt,an)){var an=Vt;ht[Ve++]=Pt===0?0:Pt}}return ht}function il(b){return typeof b=="number"?b:Ad(b)?Me:+b}function Jo(b){if(typeof b=="string")return b;if(Eo(b))return Ls(b,Jo)+"";if(Ad(b))return Rh?Rh.call(b):"";var k=b+"";return k=="0"&&1/b==-1/0?"-0":k}function es(b,k,V){var ye=-1,Ve=Vd,ht=b.length,Pt=!0,Vt=[],an=Vt;if(V)Pt=!1,Ve=Cu;else if(ht>=i){var Hn=k?null:Rp(b);if(Hn)return rl(Hn);Pt=!1,Ve=Nu,an=new Rc}else an=k?[]:Vt;e:for(;++ye<ht;){var Xn=b[ye],mr=k?k(Xn):Xn;if(Xn=V||Xn!==0?Xn:0,Pt&&mr===mr){for(var $r=an.length;$r--;)if(an[$r]===mr)continue e;k&&an.push(mr),Vt.push(Xn)}else Ve(an,mr,V)||(an!==Vt&&an.push(mr),Vt.push(Xn))}return Vt}function ol(b,k){return k=ca(k,b),b=Vn(b,k),b==null||delete b[_a(qA(k))]}function CA(b,k,V,ye){return pr(b,k,V(Bu(b,k)),ye)}function uu(b,k,V,ye){for(var Ve=b.length,ht=ye?Ve:-1;(ye?ht--:++ht<Ve)&&k(b[ht],ht,b););return V?Si(b,ye?0:ht,ye?ht+1:Ve):Si(b,ye?ht+1:0,ye?Ve:ht)}function Pa(b,k){var V=b;return V instanceof ii&&(V=V.value()),gd(k,function(ye,Ve){return Ve.func.apply(Ve.thisArg,kA([ye],Ve.args))},V)}function El(b,k,V){var ye=b.length;if(ye<2)return ye?es(b[0]):[];for(var Ve=-1,ht=ln(ye);++Ve<ye;)for(var Pt=b[Ve],Vt=-1;++Vt<ye;)Vt!=Ve&&(ht[Ve]=mc(ht[Ve]||Pt,b[Vt],k,V));return es(js(ht,1),k,V)}function GA(b,k,V){for(var ye=-1,Ve=b.length,ht=k.length,Pt={};++ye<Ve;){var Vt=ye<ht?k[ye]:t;V(Pt,b[ye],Vt)}return Pt}function _A(b){return Ql(b)?b:[]}function QA(b){return typeof b=="function"?b:Za}function ca(b,k){return Eo(b)?b:D(b,k)?[b]:oa(v(b))}var Bl=In;function Ka(b,k,V){var ye=b.length;return V=V===t?ye:V,!k&&V>=ye?b:Si(b,k,V)}var Au=Dh||function(b){return Br.clearTimeout(b)};function ss(b,k){if(k)return b.slice();var V=b.length,ye=Md?Md(V):new b.constructor(V);return b.copy(ye),ye}function as(b){var k=new b.constructor(b.byteLength);return new Xc(k).set(new Xc(b)),k}function Ou(b,k){var V=k?as(b.buffer):b.buffer;return new b.constructor(V,b.byteOffset,b.byteLength)}function Vs(b){var k=new b.constructor(b.source,Ci.exec(b));return k.lastIndex=b.lastIndex,k}function nh(b){return wu?is(wu.call(b)):{}}function vf(b,k){var V=k?as(b.buffer):b.buffer;return new b.constructor(V,b.byteOffset,b.length)}function rh(b,k){if(b!==k){var V=b!==t,ye=b===null,Ve=b===b,ht=Ad(b),Pt=k!==t,Vt=k===null,an=k===k,Hn=Ad(k);if(!Vt&&!Hn&&!ht&&b>k||ht&&Pt&&an&&!Vt&&!Hn||ye&&Pt&&an||!V&&an||!Ve)return 1;if(!ye&&!ht&&!Hn&&b<k||Hn&&V&&Ve&&!ye&&!ht||Vt&&V&&Ve||!Pt&&Ve||!an)return-1}return 0}function Dp(b,k,V){for(var ye=-1,Ve=b.criteria,ht=k.criteria,Pt=Ve.length,Vt=V.length;++ye<Pt;){var an=rh(Ve[ye],ht[ye]);if(an){if(ye>=Vt)return an;var Hn=V[ye];return an*(Hn=="desc"?-1:1)}}return b.index-k.index}function gc(b,k,V,ye){for(var Ve=-1,ht=b.length,Pt=V.length,Vt=-1,an=k.length,Hn=Oi(ht-Pt,0),Xn=ln(an+Hn),mr=!ye;++Vt<an;)Xn[Vt]=k[Vt];for(;++Ve<Pt;)(mr||Ve<ht)&&(Xn[V[Ve]]=b[Ve]);for(;Hn--;)Xn[Vt++]=b[Ve++];return Xn}function yc(b,k,V,ye){for(var Ve=-1,ht=b.length,Pt=-1,Vt=V.length,an=-1,Hn=k.length,Xn=Oi(ht-Vt,0),mr=ln(Xn+Hn),$r=!ye;++Ve<Xn;)mr[Ve]=b[Ve];for(var wi=Ve;++an<Hn;)mr[wi+an]=k[an];for(;++Pt<Vt;)($r||Ve<ht)&&(mr[wi+V[Pt]]=b[Ve++]);return mr}function Ca(b,k){var V=-1,ye=b.length;for(k||(k=ln(ye));++V<ye;)k[V]=b[V];return k}function Xu(b,k,V,ye){var Ve=!V;V||(V={});for(var ht=-1,Pt=k.length;++ht<Pt;){var Vt=k[ht],an=ye?ye(V[Vt],b[Vt],Vt,V,b):t;an===t&&(an=b[Vt]),Ve?Hr(V,Vt,an):pc(V,Vt,an)}return V}function od(b,k){return Xu(b,Iu(b),k)}function tp(b,k){return Xu(b,e0(b),k)}function sd(b,k){return function(V,ye){var Ve=Eo(V)?$d:xs,ht=k?k():{};return Ve(V,b,xi(ye,2),ht)}}function bA(b){return In(function(k,V){var ye=-1,Ve=V.length,ht=Ve>1?V[Ve-1]:t,Pt=Ve>2?V[2]:t;for(ht=b.length>3&&typeof ht=="function"?(Ve--,ht):t,Pt&&S(V[0],V[1],Pt)&&(ht=Ve<3?t:ht,Ve=1),k=is(k);++ye<Ve;){var Vt=V[ye];Vt&&b(k,Vt,ye,ht)}return k})}function ml(b,k){return function(V,ye){if(V==null)return V;if(!Nc(V))return b(V,ye);for(var Ve=V.length,ht=k?Ve:-1,Pt=is(V);(k?ht--:++ht<Ve)&&ye(Pt[ht],ht,Pt)!==!1;);return V}}function Cf(b){return function(k,V,ye){for(var Ve=-1,ht=is(k),Pt=ye(k),Vt=Pt.length;Vt--;){var an=Pt[b?Vt:++Ve];if(V(ht[an],an,ht)===!1)break}return k}}function np(b,k,V){var ye=k&N,Ve=Lh(b);function ht(){var Pt=this&&this!==Br&&this instanceof ht?Ve:b;return Pt.apply(ye?V:this,arguments)}return ht}function rp(b){return function(k){k=v(k);var V=Zc(k)?_u(k):t,ye=V?V[0]:k.charAt(0),Ve=V?Ka(V,1).join(""):k.slice(1);return ye[b]()+Ve}}function ih(b){return function(k){return gd(ib(gu(k).replace(ta,"")),b,"")}}function Lh(b){return function(){var k=arguments;switch(k.length){case 0:return new b;case 1:return new b(k[0]);case 2:return new b(k[0],k[1]);case 3:return new b(k[0],k[1],k[2]);case 4:return new b(k[0],k[1],k[2],k[3]);case 5:return new b(k[0],k[1],k[2],k[3],k[4]);case 6:return new b(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new b(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var V=LA(b.prototype),ye=b.apply(V,k);return Pl(ye)?ye:V}}function oh(b,k,V){var ye=Lh(b);function Ve(){for(var ht=arguments.length,Pt=ln(ht),Vt=ht,an=jc(Ve);Vt--;)Pt[Vt]=arguments[Vt];var Hn=ht<3&&Pt[0]!==an&&Pt[ht-1]!==an?[]:ua(Pt,an);if(ht-=Hn.length,ht<V)return Ol(b,k,Rd,Ve.placeholder,t,Pt,Hn,t,t,V-ht);var Xn=this&&this!==Br&&this instanceof Ve?ye:b;return qs(Xn,this,Pt)}return Ve}function sh(b){return function(k,V,ye){var Ve=is(k);if(!Nc(k)){var ht=xi(V,3);k=fn(k),V=function(Vt){return ht(Ve[Vt],Vt,Ve)}}var Pt=b(k,V,ye);return Pt>-1?Ve[ht?k[Pt]:Pt]:t}}function ah(b){return zc(function(k){var V=k.length,ye=V,Ve=mi.prototype.thru;for(b&&k.reverse();ye--;){var ht=k[ye];if(typeof ht!="function")throw new Gu(a);if(Ve&&!Pt&&Ld(ht)=="wrapper")var Pt=new mi([],!0)}for(ye=Pt?ye:V;++ye<V;){ht=k[ye];var Vt=Ld(ht),an=Vt=="wrapper"?Ef(ht):t;an&&Ae(an[0])&&an[1]==(G|oe|$|ie)&&!an[4].length&&an[9]==1?Pt=Pt[Ld(an[0])].apply(Pt,an[3]):Pt=ht.length==1&&Ae(ht)?Pt[Vt]():Pt.thru(ht)}return function(){var Hn=arguments,Xn=Hn[0];if(Pt&&Hn.length==1&&Eo(Xn))return Pt.plant(Xn).value();for(var mr=0,$r=V?k[mr].apply(this,Hn):Xn;++mr<V;)$r=k[mr].call(this,$r);return $r}})}function Rd(b,k,V,ye,Ve,ht,Pt,Vt,an,Hn){var Xn=k&G,mr=k&N,$r=k&q,wi=k&(oe|ne),eo=k&he,us=$r?t:Lh(b);function to(){for(var Ms=arguments.length,Is=ln(Ms),Xh=Ms;Xh--;)Is[Xh]=arguments[Xh];if(wi)var Wd=jc(to),Jh=Bh(Is,Wd);if(ye&&(Is=gc(Is,ye,Ve,wi)),ht&&(Is=yc(Is,ht,Pt,wi)),Ms-=Jh,wi&&Ms<Hn){var oA=ua(Is,Wd);return Ol(b,k,Rd,to.placeholder,V,Is,oA,Vt,an,Hn-Ms)}var fp=mr?V:this,Tm=$r?fp[b]:b;return Ms=Is.length,Vt?Is=wr(Is,Vt):eo&&Ms>1&&Is.reverse(),Xn&&an<Ms&&(Is.length=an),this&&this!==Br&&this instanceof to&&(Tm=us||Lh(Tm)),Tm.apply(fp,Is)}return to}function _f(b,k){return function(V,ye){return vA(V,b,k(ye),{})}}function lh(b,k){return function(V,ye){var Ve;if(V===t&&ye===t)return k;if(V!==t&&(Ve=V),ye!==t){if(Ve===t)return ye;typeof V=="string"||typeof ye=="string"?(V=Jo(V),ye=Jo(ye)):(V=il(V),ye=il(ye)),Ve=b(V,ye)}return Ve}}function bf(b){return zc(function(k){return k=Ls(k,wl(xi())),In(function(V){var ye=this;return b(k,function(Ve){return qs(Ve,ye,V)})})})}function ip(b,k){k=k===t?" ":Jo(k);var V=k.length;if(V<2)return V?yn(k,b):k;var ye=yn(k,PA(b/bd(k)));return Zc(k)?Ka(_u(ye),0,b).join(""):ye.slice(0,b)}function Cm(b,k,V,ye){var Ve=k&N,ht=Lh(b);function Pt(){for(var Vt=-1,an=arguments.length,Hn=-1,Xn=ye.length,mr=ln(Xn+an),$r=this&&this!==Br&&this instanceof Pt?ht:b;++Hn<Xn;)mr[Hn]=ye[Hn];for(;an--;)mr[Hn++]=arguments[++Vt];return qs($r,Ve?V:this,mr)}return Pt}function Fd(b){return function(k,V,ye){return ye&&typeof ye!="number"&&S(k,V,ye)&&(V=ye=t),k=Yh(k),V===t?(V=k,k=0):V=Yh(V),ye=ye===t?k<V?1:-1:Yh(ye),Bn(k,V,ye,b)}}function xf(b){return function(k,V){return typeof k=="string"&&typeof V=="string"||(k=d(k),V=d(V)),b(k,V)}}function Ol(b,k,V,ye,Ve,ht,Pt,Vt,an,Hn){var Xn=k&oe,mr=Xn?Pt:t,$r=Xn?t:Pt,wi=Xn?ht:t,eo=Xn?t:ht;k|=Xn?$:te,k&=~(Xn?te:$),k&H||(k&=-4);var us=[b,k,Ve,wi,mr,eo,$r,Vt,an,Hn],to=V.apply(t,us);return Ae(b)&&Or(to,us),to.placeholder=ye,Zi(to,b,k)}function cu(b){var k=ra[b];return function(V,ye){if(V=d(V),ye=ye==null?0:Us(Ko(ye),292),ye&&uc(V)){var Ve=(v(V)+"e").split("e"),ht=k(Ve[0]+"e"+(+Ve[1]+ye));return Ve=(v(ht)+"e").split("e"),+(Ve[0]+"e"+(+Ve[1]-ye))}return k(V)}}var Rp=hl&&1/rl(new hl([,-0]))[1]==Ze?function(b){return new hl(b)}:n4;function Fp(b){return function(k){var V=gl(k);return V==Ut?Zd(k):V==Dn?Xo(k):Mh(k,b(k))}}function qo(b,k,V,ye,Ve,ht,Pt,Vt){var an=k&q;if(!an&&typeof b!="function")throw new Gu(a);var Hn=ye?ye.length:0;if(Hn||(k&=-97,ye=Ve=t),Pt=Pt===t?Pt:Oi(Ko(Pt),0),Vt=Vt===t?Vt:Ko(Vt),Hn-=Ve?Ve.length:0,k&te){var Xn=ye,mr=Ve;ye=Ve=t}var $r=an?t:Ef(b),wi=[b,k,V,ye,Ve,Xn,mr,ht,Pt,Vt];if($r&&Qt(wi,$r),b=wi[0],k=wi[1],V=wi[2],ye=wi[3],Ve=wi[4],Vt=wi[9]=wi[9]===t?an?0:b.length:Oi(wi[9]-Hn,0),!Vt&&k&(oe|ne)&&(k&=-25),!k||k==N)var eo=np(b,k,V);else k==oe||k==ne?eo=oh(b,k,Vt):(k==$||k==(N|$))&&!Ve.length?eo=Cm(b,k,V,ye):eo=Rd.apply(t,wi);var us=$r?Ti:Or;return Zi(us(eo,wi),b,k)}function Uh(b,k,V,ye){return b===t||ch(b,zl[V])&&!Io.call(ye,V)?k:b}function du(b,k,V,ye,Ve,ht){return Pl(b)&&Pl(k)&&(ht.set(k,b),mt(b,k,t,du,ht),ht.delete(k)),b}function uh(b){return p0(b)?t:b}function Ju(b,k,V,ye,Ve,ht){var Pt=V&F,Vt=b.length,an=k.length;if(Vt!=an&&!(Pt&&an>Vt))return!1;var Hn=ht.get(b),Xn=ht.get(k);if(Hn&&Xn)return Hn==k&&Xn==b;var mr=-1,$r=!0,wi=V&j?new Rc:t;for(ht.set(b,k),ht.set(k,b);++mr<Vt;){var eo=b[mr],us=k[mr];if(ye)var to=Pt?ye(us,eo,mr,k,b,ht):ye(eo,us,mr,b,k,ht);if(to!==t){if(to)continue;$r=!1;break}if(wi){if(!Bc(k,function(Ms,Is){if(!Nu(wi,Is)&&(eo===Ms||Ve(eo,Ms,V,ye,ht)))return wi.push(Is)})){$r=!1;break}}else if(!(eo===us||Ve(eo,us,V,ye,ht))){$r=!1;break}}return ht.delete(b),ht.delete(k),$r}function wf(b,k,V,ye,Ve,ht,Pt){switch(V){case ce:if(b.byteLength!=k.byteLength||b.byteOffset!=k.byteOffset)return!1;b=b.buffer,k=k.buffer;case Qe:return!(b.byteLength!=k.byteLength||!ht(new Xc(b),new Xc(k)));case Ue:case Pe:case rn:return ch(+b,+k);case it:return b.name==k.name&&b.message==k.message;case rr:case pn:return b==k+"";case Ut:var Vt=Zd;case Dn:var an=ye&F;if(Vt||(Vt=rl),b.size!=k.size&&!an)return!1;var Hn=Pt.get(b);if(Hn)return Hn==k;ye|=j,Pt.set(b,k);var Xn=Ju(Vt(b),Vt(k),ye,Ve,ht,Pt);return Pt.delete(b),Xn;case Zn:if(wu)return wu.call(b)==wu.call(k)}return!1}function op(b,k,V,ye,Ve,ht){var Pt=V&F,Vt=Mf(b),an=Vt.length,Hn=Mf(k),Xn=Hn.length;if(an!=Xn&&!Pt)return!1;for(var mr=an;mr--;){var $r=Vt[mr];if(!(Pt?$r in k:Io.call(k,$r)))return!1}var wi=ht.get(b),eo=ht.get(k);if(wi&&eo)return wi==k&&eo==b;var us=!0;ht.set(b,k),ht.set(k,b);for(var to=Pt;++mr<an;){$r=Vt[mr];var Ms=b[$r],Is=k[$r];if(ye)var Xh=Pt?ye(Is,Ms,$r,k,b,ht):ye(Ms,Is,$r,b,k,ht);if(!(Xh===t?Ms===Is||Ve(Ms,Is,V,ye,ht):Xh)){us=!1;break}to||(to=$r=="constructor")}if(us&&!to){var Wd=b.constructor,Jh=k.constructor;Wd!=Jh&&"constructor"in b&&"constructor"in k&&!(typeof Wd=="function"&&Wd instanceof Wd&&typeof Jh=="function"&&Jh instanceof Jh)&&(us=!1)}return ht.delete(b),ht.delete(k),us}function zc(b){return zr(sr(b,t,Cc),b+"")}function Mf(b){return va(b,fn,Iu)}function Sf(b){return va(b,jn,e0)}var Ef=Od?function(b){return Od.get(b)}:n4;function Ld(b){for(var k=b.name+"",V=rd[k],ye=Io.call(rd,k)?V.length:0;ye--;){var Ve=V[ye],ht=Ve.func;if(ht==null||ht==b)return Ve.name}return k}function jc(b){var k=Io.call(ot,"placeholder")?ot:b;return k.placeholder}function xi(){var b=ot.iteratee||hp;return b=b===hp?xe:b,arguments.length?b(arguments[0],arguments[1]):b}function vc(b,k){var V=b.__data__;return Z(k)?V[typeof k=="string"?"string":"hash"]:V.map}function zo(b){for(var k=fn(b),V=k.length;V--;){var ye=k[V],Ve=b[ye];k[V]=[ye,Ve,yt(Ve)]}return k}function Ud(b,k){var V=Ul(b,k);return z(V)?V:t}function Lp(b){var k=Io.call(b,ed),V=b[ed];try{b[ed]=t;var ye=!0}catch{}var Ve=tu.call(b);return ye&&(k?b[ed]=V:delete b[ed]),Ve}var Iu=Jd?function(b){return b==null?[]:(b=is(b),ju(Jd(b),function(k){return Sd.call(b,k)}))}:r4,e0=Jd?function(b){for(var k=[];b;)kA(k,Iu(b)),b=Ga(b);return k}:r4,gl=$s;(DA&&gl(new DA(new ArrayBuffer(1)))!=ce||dl&&gl(new dl)!=Ut||pA&&gl(pA.resolve())!=qn||hl&&gl(new hl)!=Dn||Ac&&gl(new Ac)!=vr)&&(gl=function(b){var k=$s(b),V=k==_n?b.constructor:t,ye=V?Va(V):"";if(ye)switch(ye){case RA:return ce;case cc:return Ut;case Vu:return qn;case Hu:return Dn;case FA:return vr}return k});function _m(b,k,V){for(var ye=-1,Ve=V.length;++ye<Ve;){var ht=V[ye],Pt=ht.size;switch(ht.type){case"drop":b+=Pt;break;case"dropRight":k-=Pt;break;case"take":k=Us(k,b+Pt);break;case"takeRight":b=Oi(b,k-Pt);break}}return{start:b,end:k}}function Da(b){var k=b.match(Ur);return k?k[1].split(Dr):[]}function sp(b,k,V){k=ca(k,b);for(var ye=-1,Ve=k.length,ht=!1;++ye<Ve;){var Pt=_a(k[ye]);if(!(ht=b!=null&&V(b,Pt)))break;b=b[Pt]}return ht||++ye!=Ve?ht:(Ve=b==null?0:b.length,!!Ve&&v1(Ve)&&E(Pt,Ve)&&(Eo(b)||ud(b)))}function ap(b){var k=b.length,V=new b.constructor(k);return k&&typeof b[0]=="string"&&Io.call(b,"index")&&(V.index=b.index,V.input=b.input),V}function Wl(b){return typeof b.constructor=="function"&&!je(b)?LA(Ga(b)):{}}function Ah(b,k,V){var ye=b.constructor;switch(k){case Qe:return as(b);case Ue:case Pe:return new ye(+b);case ce:return Ou(b,V);case fe:case nt:case St:case Ht:case sn:case tr:case Oe:case se:case ve:return vf(b,V);case Ut:return new ye;case rn:case pn:return new ye(b);case rr:return Vs(b);case Dn:return new ye;case Zn:return nh(b)}}function A(b,k){var V=k.length;if(!V)return b;var ye=V-1;return k[ye]=(V>1?"& ":"")+k[ye],k=k.join(V>2?", ":" "),b.replace(Xr,`{
/* [wrapped with `+k+`] */
`)}function g(b){return Eo(b)||ud(b)||!!(Kh&&b&&b[Kh])}function E(b,k){var V=typeof b;return k=k??Je,!!k&&(V=="number"||V!="symbol"&&Ea.test(b))&&b>-1&&b%1==0&&b<k}function S(b,k,V){if(!Pl(V))return!1;var ye=typeof k;return(ye=="number"?Nc(V)&&E(k,V.length):ye=="string"&&k in V)?ch(V[k],b):!1}function D(b,k){if(Eo(b))return!1;var V=typeof b;return V=="number"||V=="symbol"||V=="boolean"||b==null||Ad(b)?!0:On.test(b)||!Tn.test(b)||k!=null&&b in is(k)}function Z(b){var k=typeof b;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?b!=="__proto__":b===null}function Ae(b){var k=Ld(b),V=ot[k];if(typeof V!="function"||!(k in ii.prototype))return!1;if(b===V)return!0;var ye=Ef(V);return!!ye&&b===ye[0]}function Ce(b){return!!wd&&wd in b}var Te=Qu?dh:i4;function je(b){var k=b&&b.constructor,V=typeof k=="function"&&k.prototype||zl;return b===V}function yt(b){return b===b&&!Pl(b)}function Mt(b,k){return function(V){return V==null?!1:V[b]===k&&(k!==t||b in is(V))}}function en(b){var k=_r(b,function(ye){return V.size===y&&V.clear(),ye}),V=k.cache;return k}function Qt(b,k){var V=b[1],ye=k[1],Ve=V|ye,ht=Ve<(N|q|G),Pt=ye==G&&V==oe||ye==G&&V==ie&&b[7].length<=k[8]||ye==(G|ie)&&k[7].length<=k[8]&&V==oe;if(!(ht||Pt))return b;ye&N&&(b[2]=k[2],Ve|=V&N?0:H);var Vt=k[3];if(Vt){var an=b[3];b[3]=an?gc(an,Vt,k[4]):Vt,b[4]=an?ua(b[3],x):k[4]}return Vt=k[5],Vt&&(an=b[5],b[5]=an?yc(an,Vt,k[6]):Vt,b[6]=an?ua(b[5],x):k[6]),Vt=k[7],Vt&&(b[7]=Vt),ye&G&&(b[8]=b[8]==null?k[8]:Us(b[8],k[8])),b[9]==null&&(b[9]=k[9]),b[0]=k[0],b[1]=Ve,b}function wn(b){var k=[];if(b!=null)for(var V in is(b))k.push(V);return k}function Ln(b){return tu.call(b)}function sr(b,k,V){return k=Oi(k===t?b.length-1:k,0),function(){for(var ye=arguments,Ve=-1,ht=Oi(ye.length-k,0),Pt=ln(ht);++Ve<ht;)Pt[Ve]=ye[k+Ve];Ve=-1;for(var Vt=ln(k+1);++Ve<k;)Vt[Ve]=ye[Ve];return Vt[k]=V(Pt),qs(b,this,Vt)}}function Vn(b,k){return k.length<2?b:Bu(b,Si(k,0,-1))}function wr(b,k){for(var V=b.length,ye=Us(k.length,V),Ve=Ca(b);ye--;){var ht=k[ye];b[ye]=E(ht,V)?Ve[ht]:t}return b}function yr(b,k){if(!(k==="constructor"&&typeof b[k]=="function")&&k!="__proto__")return b[k]}var Or=jo(Ti),ni=kc||function(b,k){return Br.setTimeout(b,k)},zr=jo(Gi);function Zi(b,k,V){var ye=k+"";return zr(b,A(ye,ba(Da(ye),V)))}function jo(b){var k=0,V=0;return function(){var ye=fA(),Ve=Se-(ye-V);if(V=ye,Ve>0){if(++k>=me)return arguments[0]}else k=0;return b.apply(t,arguments)}}function $a(b,k){var V=-1,ye=b.length,Ve=ye-1;for(k=k===t?ye:k;++V<k;){var ht=Mn(V,Ve),Pt=b[ht];b[ht]=b[V],b[V]=Pt}return b.length=k,b}var oa=en(function(b){var k=[];return b.charCodeAt(0)===46&&k.push(""),b.replace(gr,function(V,ye,Ve,ht){k.push(Ve?ht.replace(Sa,"$1"):ye||V)}),k});function _a(b){if(typeof b=="string"||Ad(b))return b;var k=b+"";return k=="0"&&1/b==-1/0?"-0":k}function Va(b){if(b!=null){try{return lo.call(b)}catch{}try{return b+""}catch{}}return""}function ba(b,k){return ga(Yt,function(V){var ye="_."+V[0];k&V[1]&&!Vd(b,ye)&&b.push(ye)}),b.sort()}function hu(b){if(b instanceof ii)return b.clone();var k=new mi(b.__wrapped__,b.__chain__);return k.__actions__=Ca(b.__actions__),k.__index__=b.__index__,k.__values__=b.__values__,k}function Ra(b,k,V){(V?S(b,k,V):k===t)?k=1:k=Oi(Ko(k),0);var ye=b==null?0:b.length;if(!ye||k<1)return[];for(var Ve=0,ht=0,Pt=ln(PA(ye/k));Ve<ye;)Pt[ht++]=Si(b,Ve,Ve+=k);return Pt}function Fa(b){for(var k=-1,V=b==null?0:b.length,ye=0,Ve=[];++k<V;){var ht=b[k];ht&&(Ve[ye++]=ht)}return Ve}function ls(){var b=arguments.length;if(!b)return[];for(var k=ln(b-1),V=arguments[0],ye=b;ye--;)k[ye-1]=arguments[ye];return kA(Eo(V)?Ca(V):[V],js(k,1))}var vi=In(function(b,k){return Ql(b)?mc(b,js(k,1,Ql,!0)):[]}),ms=In(function(b,k){var V=qA(k);return Ql(V)&&(V=t),Ql(b)?mc(b,js(k,1,Ql,!0),xi(V,2)):[]}),Ns=In(function(b,k){var V=qA(k);return Ql(V)&&(V=t),Ql(b)?mc(b,js(k,1,Ql,!0),t,V):[]});function da(b,k,V){var ye=b==null?0:b.length;return ye?(k=V||k===t?1:Ko(k),Si(b,k<0?0:k,ye)):[]}function Bs(b,k,V){var ye=b==null?0:b.length;return ye?(k=V||k===t?1:Ko(k),k=ye-k,Si(b,0,k<0?0:k)):[]}function ku(b,k){return b&&b.length?uu(b,xi(k,3),!0,!0):[]}function _o(b,k){return b&&b.length?uu(b,xi(k,3),!0):[]}function zh(b,k,V,ye){var Ve=b==null?0:b.length;return Ve?(V&&typeof V!="number"&&S(b,k,V)&&(V=0,ye=Ve),Kd(b,k,V,ye)):[]}function Gl(b,k,V){var ye=b==null?0:b.length;if(!ye)return-1;var Ve=V==null?0:Ko(V);return Ve<0&&(Ve=Oi(ye+Ve,0)),ic(b,xi(k,3),Ve)}function eA(b,k,V){var ye=b==null?0:b.length;if(!ye)return-1;var Ve=ye-1;return V!==t&&(Ve=Ko(V),Ve=V<0?Oi(ye+Ve,0):Us(Ve,ye-1)),ic(b,xi(k,3),Ve,!0)}function Cc(b){var k=b==null?0:b.length;return k?js(b,1):[]}function yl(b){var k=b==null?0:b.length;return k?js(b,Ze):[]}function Il(b,k){var V=b==null?0:b.length;return V?(k=k===t?1:Ko(k),js(b,k)):[]}function Bf(b){for(var k=-1,V=b==null?0:b.length,ye={};++k<V;){var Ve=b[k];ye[Ve[0]]=Ve[1]}return ye}function Of(b){return b&&b.length?b[0]:t}function jh(b,k,V){var ye=b==null?0:b.length;if(!ye)return-1;var Ve=V==null?0:Ko(V);return Ve<0&&(Ve=Oi(ye+Ve,0)),na(b,k,Ve)}function t0(b){var k=b==null?0:b.length;return k?Si(b,0,-1):[]}var lp=In(function(b){var k=Ls(b,_A);return k.length&&k[0]===b[0]?Uc(k):[]}),Nh=In(function(b){var k=qA(b),V=Ls(b,_A);return k===qA(V)?k=t:V.pop(),V.length&&V[0]===b[0]?Uc(V,xi(k,2)):[]}),n0=In(function(b){var k=qA(b),V=Ls(b,_A);return k=typeof k=="function"?k:t,k&&V.pop(),V.length&&V[0]===b[0]?Uc(V,t,k):[]});function If(b,k){return b==null?"":td.call(b,k)}function qA(b){var k=b==null?0:b.length;return k?b[k-1]:t}function bm(b,k,V){var ye=b==null?0:b.length;if(!ye)return-1;var Ve=ye;return V!==t&&(Ve=Ko(V),Ve=Ve<0?Oi(ye+Ve,0):Us(Ve,ye-1)),k===k?vm(b,k,Ve):ic(b,xh,Ve,!0)}function J0(b,k){return b&&b.length?Bt(b,Ko(k)):t}var r0=In(Up);function Up(b,k){return b&&b.length&&k&&k.length?nn(b,k):b}function tA(b,k,V){return b&&b.length&&k&&k.length?nn(b,k,xi(V,2)):b}function Wh(b,k,V){return b&&b.length&&k&&k.length?nn(b,k,t,V):b}var ad=zc(function(b,k){var V=b==null?0:b.length,ye=NA(b,k);return Zt(b,Ls(k,function(Ve){return E(Ve,V)?+Ve:Ve}).sort(rh)),ye});function YA(b,k){var V=[];if(!(b&&b.length))return V;var ye=-1,Ve=[],ht=b.length;for(k=xi(k,3);++ye<ht;){var Pt=b[ye];k(Pt,ye,b)&&(V.push(Pt),Ve.push(ye))}return Zt(b,Ve),V}function i0(b){return b==null?b:Tc.call(b)}function zp(b,k,V){var ye=b==null?0:b.length;return ye?(V&&typeof V!="number"&&S(b,k,V)?(k=0,V=ye):(k=k==null?0:Ko(k),V=V===t?ye:Ko(V)),Si(b,k,V)):[]}function eg(b,k){return To(b,k)}function u1(b,k,V){return Po(b,k,xi(V,2))}function kf(b,k){var V=b==null?0:b.length;if(V){var ye=To(b,k);if(ye<V&&ch(b[ye],k))return ye}return-1}function A1(b,k){return To(b,k,!0)}function tg(b,k,V){return Po(b,k,xi(V,2),!0)}function Tf(b,k){var V=b==null?0:b.length;if(V){var ye=To(b,k,!0)-1;if(ch(b[ye],k))return ye}return-1}function ng(b){return b&&b.length?Co(b):[]}function up(b,k){return b&&b.length?Co(b,xi(k,2)):[]}function jp(b){var k=b==null?0:b.length;return k?Si(b,1,k):[]}function rg(b,k,V){return b&&b.length?(k=V||k===t?1:Ko(k),Si(b,0,k<0?0:k)):[]}function xm(b,k,V){var ye=b==null?0:b.length;return ye?(k=V||k===t?1:Ko(k),k=ye-k,Si(b,k<0?0:k,ye)):[]}function wm(b,k){return b&&b.length?uu(b,xi(k,3),!1,!0):[]}function kl(b,k){return b&&b.length?uu(b,xi(k,3)):[]}var ig=In(function(b){return es(js(b,1,Ql,!0))}),c1=In(function(b){var k=qA(b);return Ql(k)&&(k=t),es(js(b,1,Ql,!0),xi(k,2))}),og=In(function(b){var k=qA(b);return k=typeof k=="function"?k:t,es(js(b,1,Ql,!0),t,k)});function Gh(b){return b&&b.length?es(b):[]}function sg(b,k){return b&&b.length?es(b,xi(k,2)):[]}function Np(b,k){return k=typeof k=="function"?k:t,b&&b.length?es(b,t,k):[]}function o0(b){if(!(b&&b.length))return[];var k=0;return b=ju(b,function(V){if(Ql(V))return k=Oi(V.length,k),!0}),ff(k,function(V){return Ls(b,df(V))})}function sl(b,k){if(!(b&&b.length))return[];var V=o0(b);return k==null?V:Ls(V,function(ye){return qs(k,t,ye)})}var mv=In(function(b,k){return Ql(b)?mc(b,k):[]}),ag=In(function(b){return El(ju(b,Ql))}),$A=In(function(b){var k=qA(b);return Ql(k)&&(k=t),El(ju(b,Ql),xi(k,2))}),lg=In(function(b){var k=qA(b);return k=typeof k=="function"?k:t,El(ju(b,Ql),t,k)}),ug=In(o0);function Qh(b,k){return GA(b||[],k||[],pc)}function s0(b,k){return GA(b||[],k||[],pr)}var xA=In(function(b){var k=b.length,V=k>1?b[k-1]:t;return V=typeof V=="function"?(b.pop(),V):t,sl(b,V)});function qh(b){var k=ot(b);return k.__chain__=!0,k}function a0(b,k){return k(b),b}function _c(b,k){return k(b)}var l0=zc(function(b){var k=b.length,V=k?b[0]:0,ye=this.__wrapped__,Ve=function(ht){return NA(ht,b)};return k>1||this.__actions__.length||!(ye instanceof ii)||!E(V)?this.thru(Ve):(ye=ye.slice(V,+V+(k?1:0)),ye.__actions__.push({func:_c,args:[Ve],thisArg:t}),new mi(ye,this.__chain__).thru(function(ht){return k&&!ht.length&&ht.push(t),ht}))});function Ap(){return qh(this)}function Mm(){return new mi(this.value(),this.__chain__)}function u0(){this.__values__===t&&(this.__values__=b1(this.value()));var b=this.__index__>=this.__values__.length,k=b?t:this.__values__[this.__index__++];return{done:b,value:k}}function Ag(){return this}function d1(b){for(var k,V=this;V instanceof ko;){var ye=hu(V);ye.__index__=0,ye.__values__=t,k?Ve.__wrapped__=ye:k=ye;var Ve=ye;V=V.__wrapped__}return Ve.__wrapped__=b,k}function A0(){var b=this.__wrapped__;if(b instanceof ii){var k=b;return this.__actions__.length&&(k=new ii(this)),k=k.reverse(),k.__actions__.push({func:_c,args:[i0],thisArg:t}),new mi(k,this.__chain__)}return this.thru(i0)}function cg(){return Pa(this.__wrapped__,this.__actions__)}var c0=sd(function(b,k,V){Io.call(b,V)?++b[V]:Hr(b,V,1)});function h1(b,k,V){var ye=Eo(b)?Vc:Ys;return V&&S(b,k,V)&&(k=t),ye(b,xi(k,3))}function Sm(b,k){var V=Eo(b)?ju:yA;return V(b,xi(k,3))}var d0=sh(Gl),f1=sh(eA);function dg(b,k){return js(Gp(b,k),1)}function p1(b,k){return js(Gp(b,k),Ze)}function hg(b,k,V){return V=V===t?1:Ko(V),js(Gp(b,k),V)}function Wp(b,k){var V=Eo(b)?ga:Ml;return V(b,xi(k,3))}function Em(b,k){var V=Eo(b)?xl:ys;return V(b,xi(k,3))}var Pf=sd(function(b,k,V){Io.call(b,V)?b[V].push(k):Hr(b,V,[k])});function zd(b,k,V,ye){b=Nc(b)?b:Cl(b),V=V&&!ye?Ko(V):0;var Ve=b.length;return V<0&&(V=Oi(Ve+V,0)),m0(b)?V<=Ve&&b.indexOf(k,V)>-1:!!Ve&&na(b,k,V)>-1}var Kf=In(function(b,k,V){var ye=-1,Ve=typeof k=="function",ht=Nc(b)?ln(b.length):[];return Ml(b,function(Pt){ht[++ye]=Ve?qs(k,Pt,V):Sl(Pt,k,V)}),ht}),Bm=sd(function(b,k,V){Hr(b,V,k)});function Gp(b,k){var V=Eo(b)?Ls:Xe;return V(b,xi(k,3))}function Om(b,k,V,ye){return b==null?[]:(Eo(k)||(k=k==null?[]:[k]),V=ye?t:V,Eo(V)||(V=V==null?[]:[V]),kt(b,k,V))}var gv=sd(function(b,k,V){b[V?0:1].push(k)},function(){return[[],[]]});function cp(b,k,V){var ye=Eo(b)?gd:hf,Ve=arguments.length<3;return ye(b,xi(k,4),V,Ve,Ml)}function m(b,k,V){var ye=Eo(b)?Hd:hf,Ve=arguments.length<3;return ye(b,xi(k,4),V,Ve,ys)}function C(b,k){var V=Eo(b)?ju:yA;return V(b,si(xi(k,3)))}function R(b){var k=Eo(b)?Mu:Nn;return k(b)}function Q(b,k,V){(V?S(b,k,V):k===t)?k=1:k=Ko(k);var ye=Eo(b)?fc:Fn;return ye(b,k)}function le(b){var k=Eo(b)?th:Uo;return k(b)}function ge(b){if(b==null)return 0;if(Nc(b))return m0(b)?bd(b):b.length;var k=gl(b);return k==Ut||k==Dn?b.size:ke(b).length}function tt(b,k,V){var ye=Eo(b)?Bc:ps;return V&&S(b,k,V)&&(k=t),ye(b,xi(k,3))}var It=In(function(b,k){if(b==null)return[];var V=k.length;return V>1&&S(b,k[0],k[1])?k=[]:V>2&&S(k[0],k[1],k[2])&&(k=[k[0]]),kt(b,js(k,1),[])}),Wt=hs||function(){return Br.Date.now()};function xn(b,k){if(typeof k!="function")throw new Gu(a);return b=Ko(b),function(){if(--b<1)return k.apply(this,arguments)}}function Ar(b,k,V){return k=V?t:k,k=b&&k==null?b.length:k,qo(b,G,t,t,t,t,k)}function Cr(b,k){var V;if(typeof k!="function")throw new Gu(a);return b=Ko(b),function(){return--b>0&&(V=k.apply(this,arguments)),b<=1&&(k=t),V}}var ir=In(function(b,k,V){var ye=N;if(V.length){var Ve=ua(V,jc(ir));ye|=$}return qo(b,ye,k,V,Ve)}),qr=In(function(b,k,V){var ye=N|q;if(V.length){var Ve=ua(V,jc(qr));ye|=$}return qo(k,ye,b,V,Ve)});function oi(b,k,V){k=V?t:k;var ye=qo(b,oe,t,t,t,t,t,k);return ye.placeholder=oi.placeholder,ye}function ai(b,k,V){k=V?t:k;var ye=qo(b,ne,t,t,t,t,t,k);return ye.placeholder=ai.placeholder,ye}function vl(b,k,V){var ye,Ve,ht,Pt,Vt,an,Hn=0,Xn=!1,mr=!1,$r=!0;if(typeof b!="function")throw new Gu(a);k=d(k)||0,Pl(V)&&(Xn=!!V.leading,mr="maxWait"in V,ht=mr?Oi(d(V.maxWait)||0,k):ht,$r="trailing"in V?!!V.trailing:$r);function wi(oA){var fp=ye,Tm=Ve;return ye=Ve=t,Hn=oA,Pt=b.apply(Tm,fp),Pt}function eo(oA){return Hn=oA,Vt=ni(Ms,k),Xn?wi(oA):Pt}function us(oA){var fp=oA-an,Tm=oA-Hn,w7=k-fp;return mr?Us(w7,ht-Tm):w7}function to(oA){var fp=oA-an,Tm=oA-Hn;return an===t||fp>=k||fp<0||mr&&Tm>=ht}function Ms(){var oA=Wt();if(to(oA))return Is(oA);Vt=ni(Ms,us(oA))}function Is(oA){return Vt=t,$r&&ye?wi(oA):(ye=Ve=t,Pt)}function Xh(){Vt!==t&&Au(Vt),Hn=0,ye=an=Ve=Vt=t}function Wd(){return Vt===t?Pt:Is(Wt())}function Jh(){var oA=Wt(),fp=to(oA);if(ye=arguments,Ve=this,an=oA,fp){if(Vt===t)return eo(an);if(mr)return Au(Vt),Vt=ni(Ms,k),wi(an)}return Vt===t&&(Vt=ni(Ms,k)),Pt}return Jh.cancel=Xh,Jh.flush=Wd,Jh}var cn=In(function(b,k){return gA(b,1,k)}),Xt=In(function(b,k,V){return gA(b,d(k)||0,V)});function dn(b){return qo(b,he)}function _r(b,k){if(typeof b!="function"||k!=null&&typeof k!="function")throw new Gu(a);var V=function(){var ye=arguments,Ve=k?k.apply(this,ye):ye[0],ht=V.cache;if(ht.has(Ve))return ht.get(Ve);var Pt=b.apply(this,ye);return V.cache=ht.set(Ve,Pt)||ht,Pt};return V.cache=new(_r.Cache||ru),V}_r.Cache=ru;function si(b){if(typeof b!="function")throw new Gu(a);return function(){var k=arguments;switch(k.length){case 0:return!b.call(this);case 1:return!b.call(this,k[0]);case 2:return!b.call(this,k[0],k[1]);case 3:return!b.call(this,k[0],k[1],k[2])}return!b.apply(this,k)}}function Ii(b){return Cr(2,b)}var ki=Bl(function(b,k){k=k.length==1&&Eo(k[0])?Ls(k[0],wl(xi())):Ls(js(k,1),wl(xi()));var V=k.length;return In(function(ye){for(var Ve=-1,ht=Us(ye.length,V);++Ve<ht;)ye[Ve]=k[Ve].call(this,ye[Ve]);return qs(b,this,ye)})}),Ni=In(function(b,k){var V=ua(k,jc(Ni));return qo(b,$,t,k,V)}),Tl=In(function(b,k){var V=ua(k,jc(Tl));return qo(b,te,t,k,V)}),ws=zc(function(b,k){return qo(b,ie,t,t,t,k)});function ld(b,k){if(typeof b!="function")throw new Gu(a);return k=k===t?k:Ko(k),In(b,k)}function m1(b,k){if(typeof b!="function")throw new Gu(a);return k=k==null?0:Oi(Ko(k),0),In(function(V){var ye=V[k],Ve=Ka(V,0,k);return ye&&kA(Ve,ye),qs(b,this,Ve)})}function yv(b,k,V){var ye=!0,Ve=!0;if(typeof b!="function")throw new Gu(a);return Pl(V)&&(ye="leading"in V?!!V.leading:ye,Ve="trailing"in V?!!V.trailing:Ve),vl(b,k,{leading:ye,maxWait:k,trailing:Ve})}function D_(b){return Ar(b,1)}function jd(b,k){return Ni(QA(k),b)}function h0(){if(!arguments.length)return[];var b=arguments[0];return Eo(b)?b:[b]}function R_(b){return pl(b,T)}function F_(b,k){return k=typeof k=="function"?k:t,pl(b,T,k)}function L_(b){return pl(b,B|T)}function U_(b,k){return k=typeof k=="function"?k:t,pl(b,B|T,k)}function z_(b,k){return k==null||Pd(b,k,fn(k))}function ch(b,k){return b===k||b!==b&&k!==k}var G3=xf(su),j_=xf(function(b,k){return b>=k}),ud=Dd(function(){return arguments}())?Dd:function(b){return La(b)&&Io.call(b,"callee")&&!Sd.call(b,"callee")},Eo=ln.isArray,N_=So?wl(So):I;function Nc(b){return b!=null&&v1(b.length)&&!dh(b)}function Ql(b){return La(b)&&Nc(b)}function Q3(b){return b===!0||b===!1||La(b)&&$s(b)==Ue}var Qp=Ed||i4,W_=Ri?wl(Ri):l;function fg(b){return La(b)&&b.nodeType===1&&!p0(b)}function G_(b){if(b==null)return!0;if(Nc(b)&&(Eo(b)||typeof b=="string"||typeof b.splice=="function"||Qp(b)||Df(b)||ud(b)))return!b.length;var k=gl(b);if(k==Ut||k==Dn)return!b.size;if(je(b))return!ke(b).length;for(var V in b)if(Io.call(b,V))return!1;return!0}function g1(b,k){return c(b,k)}function Q_(b,k,V){V=typeof V=="function"?V:t;var ye=V?V(b,k):t;return ye===t?c(b,k,t,V):!!ye}function f0(b){if(!La(b))return!1;var k=$s(b);return k==it||k==Be||typeof b.message=="string"&&typeof b.name=="string"&&!p0(b)}function y1(b){return typeof b=="number"&&uc(b)}function dh(b){if(!Pl(b))return!1;var k=$s(b);return k==_t||k==ft||k==Kt||k==tn}function q_(b){return typeof b=="number"&&b==Ko(b)}function v1(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=Je}function Pl(b){var k=typeof b;return b!=null&&(k=="object"||k=="function")}function La(b){return b!=null&&typeof b=="object"}var nA=ds?wl(ds):w;function qp(b,k){return b===k||P(b,k,zo(k))}function vv(b,k,V){return V=typeof V=="function"?V:t,P(b,k,zo(k),V)}function Y_(b){return _v(b)&&b!=+b}function $_(b){if(Te(b))throw new Bi(s);return z(b)}function Cv(b){return b===null}function q3(b){return b==null}function _v(b){return typeof b=="number"||La(b)&&$s(b)==rn}function p0(b){if(!La(b)||$s(b)!=_n)return!1;var k=Ga(b);if(k===null)return!0;var V=Io.call(k,"constructor")&&k.constructor;return typeof V=="function"&&V instanceof V&&lo.call(V)==dA}var bv=ma?wl(ma):Y;function V_(b){return q_(b)&&b>=-9007199254740991&&b<=Je}var C1=Wa?wl(Wa):ee;function m0(b){return typeof b=="string"||!Eo(b)&&La(b)&&$s(b)==pn}function Ad(b){return typeof b=="symbol"||La(b)&&$s(b)==Zn}var Df=vu?wl(vu):ae;function xv(b){return b===t}function H_(b){return La(b)&&gl(b)==vr}function wv(b){return La(b)&&$s(b)==Jn}var _1=xf($e),pg=xf(function(b,k){return b<=k});function b1(b){if(!b)return[];if(Nc(b))return m0(b)?_u(b):Ca(b);if(qu&&b[qu])return mf(b[qu]());var k=gl(b),V=k==Ut?Zd:k==Dn?rl:Cl;return V(b)}function Yh(b){if(!b)return b===0?b:0;if(b=d(b),b===Ze||b===-1/0){var k=b<0?-1:1;return k*We}return b===b?b:0}function Ko(b){var k=Yh(b),V=k%1;return k===k?V?k-V:k:0}function Z_(b){return b?Su(Ko(b),0,Fe):0}function d(b){if(typeof b=="number")return b;if(Ad(b))return Me;if(Pl(b)){var k=typeof b.valueOf=="function"?b.valueOf():b;b=Pl(k)?k+"":k}if(typeof b!="string")return b===0?b:+b;b=Sh(b);var V=Ro.test(b);return V||Na.test(b)?$n(b.slice(2),V?2:8):oo.test(b)?Me:+b}function u(b){return Xu(b,jn(b))}function h(b){return b?Su(Ko(b),-9007199254740991,Je):b===0?b:0}function v(b){return b==null?"":Jo(b)}var M=bA(function(b,k){if(je(k)||Nc(k)){Xu(k,fn(k),b);return}for(var V in k)Io.call(k,V)&&pc(b,V,k[V])}),K=bA(function(b,k){Xu(k,jn(k),b)}),U=bA(function(b,k,V,ye){Xu(k,jn(k),b,ye)}),W=bA(function(b,k,V,ye){Xu(k,fn(k),b,ye)}),X=zc(NA);function re(b,k){var V=LA(b);return k==null?V:fs(V,k)}var de=In(function(b,k){b=is(b);var V=-1,ye=k.length,Ve=ye>2?k[2]:t;for(Ve&&S(k[0],k[1],Ve)&&(ye=1);++V<ye;)for(var ht=k[V],Pt=jn(ht),Vt=-1,an=Pt.length;++Vt<an;){var Hn=Pt[Vt],Xn=b[Hn];(Xn===t||ch(Xn,zl[Hn])&&!Io.call(b,Hn))&&(b[Hn]=ht[Hn])}return b}),_e=In(function(b){return b.push(t,du),qs(jr,t,b)});function Re(b,k){return Kp(b,xi(k,3),Ya)}function ze(b,k){return Kp(b,xi(k,3),Zu)}function Ge(b,k){return b==null?b:Fc(b,xi(k,3),jn)}function et(b,k){return b==null?b:Eu(b,xi(k,3),jn)}function At(b,k){return b&&Ya(b,xi(k,3))}function Ct(b,k){return b&&Zu(b,xi(k,3))}function Nt(b){return b==null?[]:Lc(b,fn(b))}function Et(b){return b==null?[]:Lc(b,jn(b))}function Le(b,k,V){var ye=b==null?t:Bu(b,k);return ye===t?V:ye}function lt(b,k){return b!=null&&sp(b,k,au)}function Ot(b,k){return b!=null&&sp(b,k,WA)}var An=_f(function(b,k,V){k!=null&&typeof k.toString!="function"&&(k=tu.call(k)),b[k]=V},Bv(Za)),zn=_f(function(b,k,V){k!=null&&typeof k.toString!="function"&&(k=tu.call(k)),Io.call(b,k)?b[k].push(V):b[k]=[V]},xi),Cn=In(Sl);function fn(b){return Nc(b)?Lo(b):ke(b)}function jn(b){return Nc(b)?Lo(b,!0):Ke(b)}function Wn(b,k){var V={};return k=xi(k,3),Ya(b,function(ye,Ve,ht){Hr(V,k(ye,Ve,ht),ye)}),V}function cr(b,k){var V={};return k=xi(k,3),Ya(b,function(ye,Ve,ht){Hr(V,Ve,k(ye,Ve,ht))}),V}var kn=bA(function(b,k,V){mt(b,k,V)}),jr=bA(function(b,k,V,ye){mt(b,k,V,ye)}),gi=zc(function(b,k){var V={};if(b==null)return V;var ye=!1;k=Ls(k,function(ht){return ht=ca(ht,b),ye||(ye=ht.length>1),ht}),Xu(b,Sf(b),V),ye&&(V=pl(V,B|O|T,uh));for(var Ve=k.length;Ve--;)ol(V,k[Ve]);return V});function di(b,k){return No(b,si(xi(k)))}var Zr=zc(function(b,k){return b==null?{}:Rt(b,k)});function No(b,k){if(b==null)return{};var V=Ls(Sf(b),function(ye){return[ye]});return k=xi(k),zt(b,V,function(ye,Ve){return k(ye,Ve[0])})}function al(b,k,V){k=ca(k,b);var ye=-1,Ve=k.length;for(Ve||(Ve=1,b=t);++ye<Ve;){var ht=b==null?t:b[_a(k[ye])];ht===t&&(ye=Ve,ht=V),b=dh(ht)?ht.call(b):ht}return b}function fu(b,k,V){return b==null?b:pr(b,k,V)}function wA(b,k,V,ye){return ye=typeof ye=="function"?ye:t,b==null?b:pr(b,k,V,ye)}var cd=Fp(fn),bc=Fp(jn);function rA(b,k,V){var ye=Eo(b),Ve=ye||Qp(b)||Df(b);if(k=xi(k,4),V==null){var ht=b&&b.constructor;Ve?V=ye?new ht:[]:Pl(b)?V=dh(ht)?LA(Ga(b)):{}:V={}}return(Ve?ga:Ya)(b,function(Pt,Vt,an){return k(V,Pt,Vt,an)}),V}function Ha(b,k){return b==null?!0:ol(b,k)}function Tu(b,k,V){return b==null?b:CA(b,k,QA(V))}function iA(b,k,V,ye){return ye=typeof ye=="function"?ye:t,b==null?b:CA(b,k,QA(V),ye)}function Cl(b){return b==null?[]:Eh(b,fn(b))}function xc(b){return b==null?[]:Eh(b,jn(b))}function Nd(b,k,V){return V===t&&(V=k,k=t),V!==t&&(V=d(V),V=V===V?V:0),k!==t&&(k=d(k),k=k===k?k:0),Su(d(b),k,V)}function Pu(b,k,V){return k=Yh(k),V===t?(V=k,k=0):V=Yh(V),b=d(b),lu(b,k,V)}function Wc(b,k,V){if(V&&typeof V!="boolean"&&S(b,k,V)&&(k=V=t),V===t&&(typeof k=="boolean"?(V=k,k=t):typeof b=="boolean"&&(V=b,b=t)),b===t&&k===t?(b=0,k=1):(b=Yh(b),k===t?(k=b,b=0):k=Yh(k)),b>k){var ye=b;b=k,k=ye}if(V||b%1||k%1){var Ve=nd();return Us(b+Ve*(k-b+Kr("1e-"+((Ve+"").length-1))),k)}return Mn(b,k)}var pu=ih(function(b,k,V){return k=k.toLowerCase(),b+(V?mu(k):k)});function mu(b){return Ev(v(b).toLowerCase())}function gu(b){return b=v(b),b&&b.replace(rs,Oh).replace(IA,"")}function ql(b,k,V){b=v(b),k=Jo(k);var ye=b.length;V=V===t?ye:Su(Ko(V),0,ye);var Ve=V;return V-=k.length,V>=0&&b.slice(V,Ve)==k}function xa(b){return b=v(b),b&&qt.test(b)?b.replace(ct,Wu):b}function $h(b){return b=v(b),b&&on.test(b)?b.replace(Er,"\\$&"):b}var g0=ih(function(b,k,V){return b+(V?"-":"")+k.toLowerCase()}),Vh=ih(function(b,k,V){return b+(V?" ":"")+k.toLowerCase()}),Y3=rp("toLowerCase");function y0(b,k,V){b=v(b),k=Ko(k);var ye=k?bd(b):0;if(!k||ye>=k)return b;var Ve=(k-ye)/2;return ip(Yu(Ve),V)+b+ip(PA(Ve),V)}function Im(b,k,V){b=v(b),k=Ko(k);var ye=k?bd(b):0;return k&&ye<k?b+ip(k-ye,V):b}function v0(b,k,V){b=v(b),k=Ko(k);var ye=k?bd(b):0;return k&&ye<k?ip(k-ye,V)+b:b}function C0(b,k,V){return V||k==null?k=0:k&&(k=+k),Bd(v(b).replace(Rn,""),k||0)}function _0(b,k,V){return(V?S(b,k,V):k===t)?k=1:k=Ko(k),yn(v(b),k)}function X_(){var b=arguments,k=v(b[0]);return b.length<3?k:k.replace(b[1],b[2])}var J_=ih(function(b,k,V){return b+(V?"_":"")+k.toLowerCase()});function eb(b,k,V){return V&&typeof V!="number"&&S(b,k,V)&&(k=V=t),V=V===t?Fe:V>>>0,V?(b=v(b),b&&(typeof k=="string"||k!=null&&!bv(k))&&(k=Jo(k),!k&&Zc(b))?Ka(_u(b),0,V):b.split(k,V)):[]}var tb=ih(function(b,k,V){return b+(V?" ":"")+Ev(k)});function Mv(b,k,V){return b=v(b),V=V==null?0:Su(Ko(V),0,b.length),k=Jo(k),b.slice(V,V+k.length)==k}function Sv(b,k,V){var ye=ot.templateSettings;V&&S(b,k,V)&&(k=t),b=v(b),k=U({},k,ye,Uh);var Ve=U({},k.imports,ye.imports,Uh),ht=fn(Ve),Pt=Eh(Ve,ht),Vt,an,Hn=0,Xn=k.interpolate||aa,mr="__p += '",$r=TA((k.escape||aa).source+"|"+Xn.source+"|"+(Xn===xt?Yi:aa).source+"|"+(k.evaluate||aa).source+"|$","g"),wi="//# sourceURL="+(Io.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vi+"]")+`
`;b.replace($r,function(to,Ms,Is,Xh,Wd,Jh){return Is||(Is=Xh),mr+=b.slice(Hn,Jh).replace(cl,cA),Ms&&(Vt=!0,mr+=`' +
__e(`+Ms+`) +
'`),Wd&&(an=!0,mr+=`';
`+Wd+`;
__p += '`),Is&&(mr+=`' +
((__t = (`+Is+`)) == null ? '' : __t) +
'`),Hn=Jh+to.length,to}),mr+=`';
`;var eo=Io.call(k,"variable")&&k.variable;if(!eo)mr=`with (obj) {
`+mr+`
}
`;else if(go.test(eo))throw new Bi(o);mr=(an?mr.replace(p,""):mr).replace(Ne,"$1").replace(Ye,"$1;"),mr="function("+(eo||"obj")+`) {
`+(eo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vt?", __e = _.escape":"")+(an?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+mr+`return __p
}`;var us=ob(function(){return fo(ht,wi+"return "+mr).apply(t,Pt)});if(us.source=mr,f0(us))throw us;return us}function dp(b){return v(b).toLowerCase()}function nb(b){return v(b).toUpperCase()}function rb(b,k,V){if(b=v(b),b&&(V||k===t))return Sh(b);if(!b||!(k=Jo(k)))return b;var ye=_u(b),Ve=_u(k),ht=AA(ye,Ve),Pt=Hc(ye,Ve)+1;return Ka(ye,ht,Pt).join("")}function $3(b,k,V){if(b=v(b),b&&(V||k===t))return b.slice(0,kh(b)+1);if(!b||!(k=Jo(k)))return b;var ye=_u(b),Ve=Hc(ye,_u(k))+1;return Ka(ye,0,Ve).join("")}function V3(b,k,V){if(b=v(b),b&&(V||k===t))return b.replace(Rn,"");if(!b||!(k=Jo(k)))return b;var ye=_u(b),Ve=AA(ye,_u(k));return Ka(ye,Ve).join("")}function H3(b,k){var V=pe,ye=Ee;if(Pl(k)){var Ve="separator"in k?k.separator:Ve;V="length"in k?Ko(k.length):V,ye="omission"in k?Jo(k.omission):ye}b=v(b);var ht=b.length;if(Zc(b)){var Pt=_u(b);ht=Pt.length}if(V>=ht)return b;var Vt=V-bd(ye);if(Vt<1)return ye;var an=Pt?Ka(Pt,0,Vt).join(""):b.slice(0,Vt);if(Ve===t)return an+ye;if(Pt&&(Vt+=an.length-Vt),bv(Ve)){if(b.slice(Vt).search(Ve)){var Hn,Xn=an;for(Ve.global||(Ve=TA(Ve.source,v(Ci.exec(Ve))+"g")),Ve.lastIndex=0;Hn=Ve.exec(Xn);)var mr=Hn.index;an=an.slice(0,mr===t?Vt:mr)}}else if(b.indexOf(Jo(Ve),Vt)!=Vt){var $r=an.lastIndexOf(Ve);$r>-1&&(an=an.slice(0,$r))}return an+ye}function Z3(b){return b=v(b),b&&dt.test(b)?b.replace(rt,gf):b}var X3=ih(function(b,k,V){return b+(V?" ":"")+k.toUpperCase()}),Ev=rp("toUpperCase");function ib(b,k,V){return b=v(b),k=V?t:k,k===t?pf(b)?Th(b):yd(b):b.match(k)||[]}var ob=In(function(b,k){try{return qs(b,t,k)}catch(V){return f0(V)?V:new Bi(V)}}),Hh=zc(function(b,k){return ga(k,function(V){V=_a(V),Hr(b,V,ir(b[V],b))}),b});function x1(b){var k=b==null?0:b.length,V=xi();return b=k?Ls(b,function(ye){if(typeof ye[1]!="function")throw new Gu(a);return[V(ye[0]),ye[1]]}):[],In(function(ye){for(var Ve=-1;++Ve<k;){var ht=b[Ve];if(qs(ht[0],this,ye))return qs(ht[1],this,ye)}})}function sb(b){return ou(pl(b,B))}function Bv(b){return function(){return b}}function J3(b,k){return b==null||b!==b?k:b}var e4=ah(),VA=ah(!0);function Za(b){return b}function hp(b){return xe(typeof b=="function"?b:pl(b,B))}function Zh(b){return pt(pl(b,B))}function km(b,k){return ut(b,pl(k,B))}var Rf=In(function(b,k){return function(V){return Sl(V,b,k)}}),QG=In(function(b,k){return function(V){return Sl(b,V,k)}});function t4(b,k,V){var ye=fn(k),Ve=Lc(k,ye);V==null&&!(Pl(k)&&(Ve.length||!ye.length))&&(V=k,k=b,b=this,Ve=Lc(k,fn(k)));var ht=!(Pl(V)&&"chain"in V)||!!V.chain,Pt=dh(b);return ga(Ve,function(Vt){var an=k[Vt];b[Vt]=an,Pt&&(b.prototype[Vt]=function(){var Hn=this.__chain__;if(ht||Hn){var Xn=b(this.__wrapped__),mr=Xn.__actions__=Ca(this.__actions__);return mr.push({func:an,args:arguments,thisArg:b}),Xn.__chain__=Hn,Xn}return an.apply(b,kA([this.value()],arguments))})}),b}function qG(){return Br._===this&&(Br._=jl),this}function n4(){}function YG(b){return b=Ko(b),In(function(k){return Bt(k,b)})}var $G=bf(Ls),VG=bf(Vc),HG=bf(Bc);function x7(b){return D(b)?df(_a(b)):Tt(b)}function ZG(b){return function(k){return b==null?t:Bu(b,k)}}var XG=Fd(),JG=Fd(!0);function r4(){return[]}function i4(){return!1}function eQ(){return{}}function tQ(){return""}function nQ(){return!0}function rQ(b,k){if(b=Ko(b),b<1||b>Je)return[];var V=Fe,ye=Us(b,Fe);k=xi(k),b-=Fe;for(var Ve=ff(ye,k);++V<b;)k(V);return Ve}function iQ(b){return Eo(b)?Ls(b,_a):Ad(b)?[b]:Ca(oa(v(b)))}function oQ(b){var k=++xd;return v(b)+k}var sQ=lh(function(b,k){return b+k},0),aQ=cu("ceil"),lQ=lh(function(b,k){return b/k},1),uQ=cu("floor");function AQ(b){return b&&b.length?id(b,Za,su):t}function cQ(b,k){return b&&b.length?id(b,xi(k,2),su):t}function dQ(b){return vd(b,Za)}function hQ(b,k){return vd(b,xi(k,2))}function fQ(b){return b&&b.length?id(b,Za,$e):t}function pQ(b,k){return b&&b.length?id(b,xi(k,2),$e):t}var mQ=lh(function(b,k){return b*k},1),gQ=cu("round"),yQ=lh(function(b,k){return b-k},0);function vQ(b){return b&&b.length?wh(b,Za):0}function CQ(b,k){return b&&b.length?wh(b,xi(k,2)):0}return ot.after=xn,ot.ary=Ar,ot.assign=M,ot.assignIn=K,ot.assignInWith=U,ot.assignWith=W,ot.at=X,ot.before=Cr,ot.bind=ir,ot.bindAll=Hh,ot.bindKey=qr,ot.castArray=h0,ot.chain=qh,ot.chunk=Ra,ot.compact=Fa,ot.concat=ls,ot.cond=x1,ot.conforms=sb,ot.constant=Bv,ot.countBy=c0,ot.create=re,ot.curry=oi,ot.curryRight=ai,ot.debounce=vl,ot.defaults=de,ot.defaultsDeep=_e,ot.defer=cn,ot.delay=Xt,ot.difference=vi,ot.differenceBy=ms,ot.differenceWith=Ns,ot.drop=da,ot.dropRight=Bs,ot.dropRightWhile=ku,ot.dropWhile=_o,ot.fill=zh,ot.filter=Sm,ot.flatMap=dg,ot.flatMapDeep=p1,ot.flatMapDepth=hg,ot.flatten=Cc,ot.flattenDeep=yl,ot.flattenDepth=Il,ot.flip=dn,ot.flow=e4,ot.flowRight=VA,ot.fromPairs=Bf,ot.functions=Nt,ot.functionsIn=Et,ot.groupBy=Pf,ot.initial=t0,ot.intersection=lp,ot.intersectionBy=Nh,ot.intersectionWith=n0,ot.invert=An,ot.invertBy=zn,ot.invokeMap=Kf,ot.iteratee=hp,ot.keyBy=Bm,ot.keys=fn,ot.keysIn=jn,ot.map=Gp,ot.mapKeys=Wn,ot.mapValues=cr,ot.matches=Zh,ot.matchesProperty=km,ot.memoize=_r,ot.merge=kn,ot.mergeWith=jr,ot.method=Rf,ot.methodOf=QG,ot.mixin=t4,ot.negate=si,ot.nthArg=YG,ot.omit=gi,ot.omitBy=di,ot.once=Ii,ot.orderBy=Om,ot.over=$G,ot.overArgs=ki,ot.overEvery=VG,ot.overSome=HG,ot.partial=Ni,ot.partialRight=Tl,ot.partition=gv,ot.pick=Zr,ot.pickBy=No,ot.property=x7,ot.propertyOf=ZG,ot.pull=r0,ot.pullAll=Up,ot.pullAllBy=tA,ot.pullAllWith=Wh,ot.pullAt=ad,ot.range=XG,ot.rangeRight=JG,ot.rearg=ws,ot.reject=C,ot.remove=YA,ot.rest=ld,ot.reverse=i0,ot.sampleSize=Q,ot.set=fu,ot.setWith=wA,ot.shuffle=le,ot.slice=zp,ot.sortBy=It,ot.sortedUniq=ng,ot.sortedUniqBy=up,ot.split=eb,ot.spread=m1,ot.tail=jp,ot.take=rg,ot.takeRight=xm,ot.takeRightWhile=wm,ot.takeWhile=kl,ot.tap=a0,ot.throttle=yv,ot.thru=_c,ot.toArray=b1,ot.toPairs=cd,ot.toPairsIn=bc,ot.toPath=iQ,ot.toPlainObject=u,ot.transform=rA,ot.unary=D_,ot.union=ig,ot.unionBy=c1,ot.unionWith=og,ot.uniq=Gh,ot.uniqBy=sg,ot.uniqWith=Np,ot.unset=Ha,ot.unzip=o0,ot.unzipWith=sl,ot.update=Tu,ot.updateWith=iA,ot.values=Cl,ot.valuesIn=xc,ot.without=mv,ot.words=ib,ot.wrap=jd,ot.xor=ag,ot.xorBy=$A,ot.xorWith=lg,ot.zip=ug,ot.zipObject=Qh,ot.zipObjectDeep=s0,ot.zipWith=xA,ot.entries=cd,ot.entriesIn=bc,ot.extend=K,ot.extendWith=U,t4(ot,ot),ot.add=sQ,ot.attempt=ob,ot.camelCase=pu,ot.capitalize=mu,ot.ceil=aQ,ot.clamp=Nd,ot.clone=R_,ot.cloneDeep=L_,ot.cloneDeepWith=U_,ot.cloneWith=F_,ot.conformsTo=z_,ot.deburr=gu,ot.defaultTo=J3,ot.divide=lQ,ot.endsWith=ql,ot.eq=ch,ot.escape=xa,ot.escapeRegExp=$h,ot.every=h1,ot.find=d0,ot.findIndex=Gl,ot.findKey=Re,ot.findLast=f1,ot.findLastIndex=eA,ot.findLastKey=ze,ot.floor=uQ,ot.forEach=Wp,ot.forEachRight=Em,ot.forIn=Ge,ot.forInRight=et,ot.forOwn=At,ot.forOwnRight=Ct,ot.get=Le,ot.gt=G3,ot.gte=j_,ot.has=lt,ot.hasIn=Ot,ot.head=Of,ot.identity=Za,ot.includes=zd,ot.indexOf=jh,ot.inRange=Pu,ot.invoke=Cn,ot.isArguments=ud,ot.isArray=Eo,ot.isArrayBuffer=N_,ot.isArrayLike=Nc,ot.isArrayLikeObject=Ql,ot.isBoolean=Q3,ot.isBuffer=Qp,ot.isDate=W_,ot.isElement=fg,ot.isEmpty=G_,ot.isEqual=g1,ot.isEqualWith=Q_,ot.isError=f0,ot.isFinite=y1,ot.isFunction=dh,ot.isInteger=q_,ot.isLength=v1,ot.isMap=nA,ot.isMatch=qp,ot.isMatchWith=vv,ot.isNaN=Y_,ot.isNative=$_,ot.isNil=q3,ot.isNull=Cv,ot.isNumber=_v,ot.isObject=Pl,ot.isObjectLike=La,ot.isPlainObject=p0,ot.isRegExp=bv,ot.isSafeInteger=V_,ot.isSet=C1,ot.isString=m0,ot.isSymbol=Ad,ot.isTypedArray=Df,ot.isUndefined=xv,ot.isWeakMap=H_,ot.isWeakSet=wv,ot.join=If,ot.kebabCase=g0,ot.last=qA,ot.lastIndexOf=bm,ot.lowerCase=Vh,ot.lowerFirst=Y3,ot.lt=_1,ot.lte=pg,ot.max=AQ,ot.maxBy=cQ,ot.mean=dQ,ot.meanBy=hQ,ot.min=fQ,ot.minBy=pQ,ot.stubArray=r4,ot.stubFalse=i4,ot.stubObject=eQ,ot.stubString=tQ,ot.stubTrue=nQ,ot.multiply=mQ,ot.nth=J0,ot.noConflict=qG,ot.noop=n4,ot.now=Wt,ot.pad=y0,ot.padEnd=Im,ot.padStart=v0,ot.parseInt=C0,ot.random=Wc,ot.reduce=cp,ot.reduceRight=m,ot.repeat=_0,ot.replace=X_,ot.result=al,ot.round=gQ,ot.runInContext=Jt,ot.sample=R,ot.size=ge,ot.snakeCase=J_,ot.some=tt,ot.sortedIndex=eg,ot.sortedIndexBy=u1,ot.sortedIndexOf=kf,ot.sortedLastIndex=A1,ot.sortedLastIndexBy=tg,ot.sortedLastIndexOf=Tf,ot.startCase=tb,ot.startsWith=Mv,ot.subtract=yQ,ot.sum=vQ,ot.sumBy=CQ,ot.template=Sv,ot.times=rQ,ot.toFinite=Yh,ot.toInteger=Ko,ot.toLength=Z_,ot.toLower=dp,ot.toNumber=d,ot.toSafeInteger=h,ot.toString=v,ot.toUpper=nb,ot.trim=rb,ot.trimEnd=$3,ot.trimStart=V3,ot.truncate=H3,ot.unescape=Z3,ot.uniqueId=oQ,ot.upperCase=X3,ot.upperFirst=Ev,ot.each=Wp,ot.eachRight=Em,ot.first=Of,t4(ot,function(){var b={};return Ya(ot,function(k,V){Io.call(ot.prototype,V)||(b[V]=k)}),b}(),{chain:!1}),ot.VERSION=r,ga(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){ot[b].placeholder=ot}),ga(["drop","take"],function(b,k){ii.prototype[b]=function(V){V=V===t?1:Oi(Ko(V),0);var ye=this.__filtered__&&!k?new ii(this):this.clone();return ye.__filtered__?ye.__takeCount__=Us(V,ye.__takeCount__):ye.__views__.push({size:Us(V,Fe),type:b+(ye.__dir__<0?"Right":"")}),ye},ii.prototype[b+"Right"]=function(V){return this.reverse()[b](V).reverse()}}),ga(["filter","map","takeWhile"],function(b,k){var V=k+1,ye=V==De||V==at;ii.prototype[b]=function(Ve){var ht=this.clone();return ht.__iteratees__.push({iteratee:xi(Ve,3),type:V}),ht.__filtered__=ht.__filtered__||ye,ht}}),ga(["head","last"],function(b,k){var V="take"+(k?"Right":"");ii.prototype[b]=function(){return this[V](1).value()[0]}}),ga(["initial","tail"],function(b,k){var V="drop"+(k?"":"Right");ii.prototype[b]=function(){return this.__filtered__?new ii(this):this[V](1)}}),ii.prototype.compact=function(){return this.filter(Za)},ii.prototype.find=function(b){return this.filter(b).head()},ii.prototype.findLast=function(b){return this.reverse().find(b)},ii.prototype.invokeMap=In(function(b,k){return typeof b=="function"?new ii(this):this.map(function(V){return Sl(V,b,k)})}),ii.prototype.reject=function(b){return this.filter(si(xi(b)))},ii.prototype.slice=function(b,k){b=Ko(b);var V=this;return V.__filtered__&&(b>0||k<0)?new ii(V):(b<0?V=V.takeRight(-b):b&&(V=V.drop(b)),k!==t&&(k=Ko(k),V=k<0?V.dropRight(-k):V.take(k-b)),V)},ii.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},ii.prototype.toArray=function(){return this.take(Fe)},Ya(ii.prototype,function(b,k){var V=/^(?:filter|find|map|reject)|While$/.test(k),ye=/^(?:head|last)$/.test(k),Ve=ot[ye?"take"+(k=="last"?"Right":""):k],ht=ye||/^find/.test(k);Ve&&(ot.prototype[k]=function(){var Pt=this.__wrapped__,Vt=ye?[1]:arguments,an=Pt instanceof ii,Hn=Vt[0],Xn=an||Eo(Pt),mr=function(Ms){var Is=Ve.apply(ot,kA([Ms],Vt));return ye&&$r?Is[0]:Is};Xn&&V&&typeof Hn=="function"&&Hn.length!=1&&(an=Xn=!1);var $r=this.__chain__,wi=!!this.__actions__.length,eo=ht&&!$r,us=an&&!wi;if(!ht&&Xn){Pt=us?Pt:new ii(this);var to=b.apply(Pt,Vt);return to.__actions__.push({func:_c,args:[mr],thisArg:t}),new mi(to,$r)}return eo&&us?b.apply(this,Vt):(to=this.thru(mr),eo?ye?to.value()[0]:to.value():to)})}),ga(["pop","push","shift","sort","splice","unshift"],function(b){var k=bu[b],V=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",ye=/^(?:pop|shift)$/.test(b);ot.prototype[b]=function(){var Ve=arguments;if(ye&&!this.__chain__){var ht=this.value();return k.apply(Eo(ht)?ht:[],Ve)}return this[V](function(Pt){return k.apply(Eo(Pt)?Pt:[],Ve)})}}),Ya(ii.prototype,function(b,k){var V=ot[k];if(V){var ye=V.name+"";Io.call(rd,ye)||(rd[ye]=[]),rd[ye].push({name:k,func:V})}}),rd[Rd(t,q).name]=[{name:"wrapper",func:t}],ii.prototype.clone=os,ii.prototype.reverse=mA,ii.prototype.value=eh,ot.prototype.at=l0,ot.prototype.chain=Ap,ot.prototype.commit=Mm,ot.prototype.next=u0,ot.prototype.plant=d1,ot.prototype.reverse=A0,ot.prototype.toJSON=ot.prototype.valueOf=ot.prototype.value=cg,ot.prototype.first=ot.prototype.head,qu&&(ot.prototype[qu]=Ag),ot},eu=Ph();ji?((ji.exports=eu)._=eu,xr._=eu):Br._=eu}).call(uY)}(Gv,Gv.exports)),Gv.exports}var Bx=AY();const w6=Al(Bx);function cY(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var y4,fI;function dY(){if(fI)return y4;fI=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return y4=n,y4}var hY=dY();const pI=Al(hY);var rf=Uint8Array,fy=Uint16Array,fY=Int32Array,mL=new rf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gL=new rf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pY=new rf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yL=function(n,e){for(var t=new fy(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new fY(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},vL=yL(mL,2),CL=vL.b,mY=vL.r;CL[28]=258,mY[258]=28;var gY=yL(gL,0),yY=gY.b,M6=new fy(32768);for(var Fl=0;Fl<32768;++Fl){var b0=(Fl&43690)>>1|(Fl&21845)<<1;b0=(b0&52428)>>2|(b0&13107)<<2,b0=(b0&61680)>>4|(b0&3855)<<4,M6[Fl]=((b0&65280)>>8|(b0&255)<<8)>>1}var AC=function(n,e,t){for(var r=n.length,i=0,s=new fy(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new fy(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new fy(1<<e);var f=15-e;for(i=0;i<r;++i)if(n[i])for(var y=i<<4|n[i],x=e-n[i],B=a[n[i]-1]++<<x,O=B|(1<<x)-1;B<=O;++B)o[M6[B]>>f]=y}else for(o=new fy(r),i=0;i<r;++i)n[i]&&(o[i]=M6[a[n[i]-1]++]>>15-n[i]);return o},s_=new rf(288);for(var Fl=0;Fl<144;++Fl)s_[Fl]=8;for(var Fl=144;Fl<256;++Fl)s_[Fl]=9;for(var Fl=256;Fl<280;++Fl)s_[Fl]=7;for(var Fl=280;Fl<288;++Fl)s_[Fl]=8;var _L=new rf(32);for(var Fl=0;Fl<32;++Fl)_L[Fl]=5;var vY=AC(s_,9,1),CY=AC(_L,5,1),v4=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},pp=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},C4=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},_Y=function(n){return(n+7)/8|0},bY=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new rf(n.subarray(e,t))},xY=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ef=function(n,e,t){var r=new Error(e||xY[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,ef),!t)throw r;return r},qB=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new rf(0);var a=!t,o=a||e.i!=2,f=e.i;a&&(t=new rf(i*3));var y=function(it){var _t=t.length;if(it>_t){var ft=new rf(Math.max(_t*2,it));ft.set(t),t=ft}},x=e.f||0,B=e.p||0,O=e.b||0,T=e.l,F=e.d,j=e.m,N=e.n,q=i*8;do{if(!T){x=pp(n,B,1);var H=pp(n,B+1,3);if(B+=3,H)if(H==1)T=vY,F=CY,j=9,N=5;else if(H==2){var te=pp(n,B,31)+257,G=pp(n,B+10,15)+4,ie=te+pp(n,B+5,31)+1;B+=14;for(var he=new rf(ie),pe=new rf(19),Ee=0;Ee<G;++Ee)pe[pY[Ee]]=pp(n,B+Ee*3,7);B+=G*3;for(var me=v4(pe),Se=(1<<me)-1,De=AC(pe,me,1),Ee=0;Ee<ie;){var be=De[pp(n,B,Se)];B+=be&15;var oe=be>>4;if(oe<16)he[Ee++]=oe;else{var at=0,Ze=0;for(oe==16?(Ze=3+pp(n,B,3),B+=2,at=he[Ee-1]):oe==17?(Ze=3+pp(n,B,7),B+=3):oe==18&&(Ze=11+pp(n,B,127),B+=7);Ze--;)he[Ee++]=at}}var Je=he.subarray(0,te),We=he.subarray(te);j=v4(Je),N=v4(We),T=AC(Je,j,1),F=AC(We,N,1)}else ef(1);else{var oe=_Y(B)+4,ne=n[oe-4]|n[oe-3]<<8,$=oe+ne;if($>i){f&&ef(0);break}o&&y(O+ne),t.set(n.subarray(oe,$),O),e.b=O+=ne,e.p=B=$*8,e.f=x;continue}if(B>q){f&&ef(0);break}}o&&y(O+131072);for(var Me=(1<<j)-1,Fe=(1<<N)-1,He=B;;He=B){var at=T[C4(n,B)&Me],bt=at>>4;if(B+=at&15,B>q){f&&ef(0);break}if(at||ef(2),bt<256)t[O++]=bt;else if(bt==256){He=B,T=null;break}else{var Yt=bt-254;if(bt>264){var Ee=bt-257,gt=mL[Ee];Yt=pp(n,B,(1<<gt)-1)+CL[Ee],B+=gt}var Lt=F[C4(n,B)&Fe],Kt=Lt>>4;Lt||ef(3),B+=Lt&15;var We=yY[Kt];if(Kt>3){var gt=gL[Kt];We+=C4(n,B)&(1<<gt)-1,B+=gt}if(B>q){f&&ef(0);break}o&&y(O+131072);var Ue=O+Yt;if(O<We){var Pe=s-We,Be=Math.min(We,Ue);for(Pe+O<0&&ef(3);O<Be;++O)t[O]=r[Pe+O]}for(;O<Ue;++O)t[O]=t[O-We]}}e.l=T,e.p=He,e.b=O,e.f=x,T&&(x=1,e.m=j,e.d=F,e.n=N)}while(!x);return O!=t.length&&a?bY(t,0,O):t.subarray(0,O)},wY=new rf(0),MY=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&ef(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},SY=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},EY=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&ef(6,"invalid zlib data"),(n[1]>>5&1)==1&&ef(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function BY(n,e){return qB(n,{i:2},e,e)}function OY(n,e){var t=MY(n);return t+8>n.length&&ef(6,"invalid gzip data"),qB(n.subarray(t,-8),{i:2},new rf(SY(n)),e)}function IY(n,e){return qB(n.subarray(EY(n),-4),{i:2},e,e)}function kY(n,e){return n[0]==31&&n[1]==139&&n[2]==8?OY(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?BY(n,e):IY(n,e)}var TY=typeof TextDecoder<"u"&&new TextDecoder,PY=0;try{TY.decode(wY,{stream:!0}),PY=1}catch{}var KY=Object.defineProperty,cC=Math.pow,Ja=(n,e)=>KY(n,"name",{value:e,configurable:!0}),Mc=(n,e,t)=>new Promise((r,i)=>{var s=f=>{try{o(t.next(f))}catch(y){i(y)}},a=f=>{try{o(t.throw(f))}catch(y){i(y)}},o=f=>f.done?r(f.value):Promise.resolve(f.value).then(s,a);o((t=t.apply(n,e)).next())});Ja((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:Ja((s,a)=>{let o=document.createElement("img"),f=new AbortController,y=f.signal;return o.cancel=()=>{f.abort()},t||(n.getHeader().then(x=>{x.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):x.tileType===2?r="image/png":x.tileType===3?r="image/jpeg":x.tileType===4?r="image/webp":x.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,y).then(x=>{if(x){let B=new Blob([x.data],{type:r}),O=window.URL.createObjectURL(B);o.src=O,o.cancel=void 0,a(void 0,o)}}).catch(x=>{if(x.name!=="AbortError")throw x}),o},"createTile"),_removeTile:Ja(function(s){let a=this._tiles[s];a&&(a.el.cancel&&a.el.cancel(),a.el.width=0,a.el.height=0,a.el.deleted=!0,L.DomUtil.remove(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var DY=Ja(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:Ja(()=>r.abort(),"cancel")}},"v3compat"),bL=class{constructor(e){this.tilev4=Ja((t,r)=>Mc(this,null,function*(){if(t.type==="json"){let T=t.url.substr(10),F=this.tiles.get(T);if(F||(F=new E6(T),this.tiles.set(T,F)),this.metadata)return{data:yield F.getTileJson(t.url)};let j=yield F.getHeader();return(j.minLon>=j.maxLon||j.minLat>=j.maxLat)&&console.error(`Bounds of PMTiles archive ${j.minLon},${j.minLat},${j.maxLon},${j.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:j.minZoom,maxzoom:j.maxZoom,bounds:[j.minLon,j.minLat,j.maxLon,j.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let a=s[1],o=this.tiles.get(a);o||(o=new E6(a),this.tiles.set(a,o));let f=s[2],y=s[3],x=s[4],B=yield o.getHeader(),O=yield o==null?void 0:o.getZxy(+f,+y,+x,r.signal);if(O)return{data:new Uint8Array(O.data),cacheControl:O.cacheControl,expires:O.expires};if(B.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=DY(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Ja(bL,"Protocol");var RY=bL;function xL(n,e){return(e>>>0)*4294967296+(n>>>0)}Ja(xL,"toNum");function wL(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return xL(n,i);throw new Error("Expected varint not more than 10 bytes")}Ja(wL,"readVarintRemainder");function ry(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,wL(r,n))}Ja(ry,"readVarint");function YB(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}Ja(YB,"rotate");function ML(n,e){let t=cC(2,n),r=e,i=e,s=e,a=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),YB(o,a,r,i),a[0]+=o*r,a[1]+=o*i,s=s/4,o*=2;return[n,a[0],a[1]]}Ja(ML,"idOnLevel");var FY=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function SL(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>cC(2,n)-1||t>cC(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=FY[n],i=cC(2,n),s=0,a=0,o=0,f=[e,t],y=i/2;for(;y>0;)s=(f[0]&y)>0?1:0,a=(f[1]&y)>0?1:0,o+=y*y*(3*s^a),YB(y,f,s,a),y=y/2;return r+o}Ja(SL,"zxyToTileId");function LY(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return ML(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}Ja(LY,"tileIdToZxy");var UY=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(UY||{});function Ox(n,e){return Mc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return kY(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}Ja(Ox,"defaultDecompress");var zY=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(zY||{});function EL(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Ja(EL,"tileTypeExt");var jY=127;function BL(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}Ja(BL,"findTile");var NY=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return Mc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Ja(NY,"FileSource");var OL=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return Mc(this,null,function*(){let s,a;r?a=r:(s=new AbortController,a=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let f;this.mustReload?f="reload":this.chromeWindowsNoCache&&(f="no-store");let y=yield fetch(this.url,{signal:a,cache:f,headers:o});if(e===0&&y.status===416){let O=y.headers.get("Content-Range");if(!O||!O.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let T=+O.substr(8);y=yield fetch(this.url,{signal:a,cache:"reload",headers:{range:`bytes=0-${T-1}`}})}let x=y.headers.get("Etag");if(x!=null&&x.startsWith("W/")&&(x=null),y.status===416||i&&x&&x!==i)throw this.mustReload=!0,new S6(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(y.status>=300)throw new Error(`Bad response code: ${y.status}`);let B=y.headers.get("Content-Length");if(y.status===200&&(!B||+B>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield y.arrayBuffer(),etag:x||void 0,cacheControl:y.headers.get("Cache-Control")||void 0,expires:y.headers.get("Expires")||void 0}})}};Ja(OL,"FetchSource");var WY=OL;function Lf(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*cC(2,32)+r}Ja(Lf,"getUint64");function IL(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Lf(t,8),rootDirectoryLength:Lf(t,16),jsonMetadataOffset:Lf(t,24),jsonMetadataLength:Lf(t,32),leafDirectoryOffset:Lf(t,40),leafDirectoryLength:Lf(t,48),tileDataOffset:Lf(t,56),tileDataLength:Lf(t,64),numAddressedTiles:Lf(t,72),numTileEntries:Lf(t,80),numTileContents:Lf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Ja(IL,"bytesToHeader");function $B(n){let e={buf:new Uint8Array(n),pos:0},t=ry(e),r=[],i=0;for(let s=0;s<t;s++){let a=ry(e);r.push({tileId:i+a,offset:0,length:0,runLength:1}),i+=a}for(let s=0;s<t;s++)r[s].runLength=ry(e);for(let s=0;s<t;s++)r[s].length=ry(e);for(let s=0;s<t;s++){let a=ry(e);a===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=a-1}return r}Ja($B,"deserializeIndex");var kL=class extends Error{};Ja(kL,"EtagMismatch");var S6=kL;function VB(n,e){return Mc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,jY),i=IL(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),a=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=$B(yield e(s,i.internalCompression));return[i,[a,o.length,o]]})}Ja(VB,"getHeaderAndRoot");function HB(n,e,t,r,i){return Mc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),a=yield e(s.data,i.internalCompression),o=$B(a);if(o.length===0)throw new Error("Empty directory is invalid");return o})}Ja(HB,"getDirectory");var GY=class{constructor(e=100,t=!0,r=Ox){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Mc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield VB(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return Mc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(s);if(a)return a.lastUsed=this.counter++,a.data;let o=yield HB(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return Mc(this,null,function*(){this.cache.delete(e.getKey())})}};Ja(GY,"ResolvedValueCache");var TL=class{constructor(e=100,t=!0,r=Ox){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Mc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,a)=>{VB(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{a(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return Mc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,a=this.cache.get(s);if(a)return a.lastUsed=this.counter++,yield a.data;let o=new Promise((f,y)=>{HB(e,this.decompress,t,r,i).then(x=>{f(x),this.prune()}).catch(x=>{y(x)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return Mc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(a=>{i(),this.invalidations.delete(t)}).catch(a=>{s(a)})});this.invalidations.set(t,r)})}};Ja(TL,"SharedPromiseCache");var QY=TL,PL=class{constructor(e,t,r){typeof e=="string"?this.source=new WY(e):this.source=e,r?this.decompress=r:this.decompress=Ox,t?this.cache=t:this.cache=new QY}getHeader(){return Mc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return Mc(this,null,function*(){let s=SL(e,t,r),a=yield this.cache.getHeader(this.source);if(e<a.minZoom||e>a.maxZoom)return;let o=a.rootDirectoryOffset,f=a.rootDirectoryLength;for(let y=0;y<=3;y++){let x=yield this.cache.getDirectory(this.source,o,f,a),B=BL(x,s);if(B){if(B.runLength>0){let O=yield this.source.getBytes(a.tileDataOffset+B.offset,B.length,i,a.etag);return{data:yield this.decompress(O.data,a.tileCompression),cacheControl:O.cacheControl,expires:O.expires}}o=a.leafDirectoryOffset+B.offset,f=B.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return Mc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof S6)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return Mc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return Mc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof S6)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Mc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=EL(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Ja(PL,"PMTiles");var E6=PL,qY=8,YY={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},$Y={"*":{type:"source"}},VY=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],HY={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},ZY={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},XY={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},JY={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},e$={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},t$={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},n$={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},r$=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],i$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},o$={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},s$={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},a$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},l$={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},u$={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},A$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},c$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},d$={type:"array",value:"*"},h$={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},f$={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},p$={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},m$={type:"array",value:"*",minimum:1},g$={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},y$={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},v$={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},C$={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},_$=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],b$={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},x$={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},w$={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},M$={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},S$={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},E$={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},B$={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},O$={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},I$={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},k$={"*":{type:"string"}},Ps={$version:qY,$root:YY,sources:$Y,source:VY,source_vector:HY,source_raster:ZY,source_raster_dem:XY,source_geojson:JY,source_video:e$,source_image:t$,layer:n$,layout:r$,layout_background:i$,layout_fill:o$,layout_circle:s$,layout_heatmap:a$,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:l$,layout_symbol:u$,layout_raster:A$,layout_hillshade:c$,filter:d$,filter_operator:h$,geometry_type:f$,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:p$,expression:m$,light:g$,sky:y$,terrain:v$,projection:C$,paint:_$,paint_fill:b$,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:x$,paint_circle:w$,paint_heatmap:M$,paint_symbol:S$,paint_raster:E$,paint_hillshade:B$,paint_background:O$,transition:I$,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:k$};const T$=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function P$(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return T$.forEach(r=>{r in e&&(t[r]=e[r])}),t}function K$(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=P$(n[t],e[n[t].ref]));return n}function wa(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!wa(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!wa(n[r],e[r]))return!1;return!0}return n===e}function zf(n,e){n.push(e)}function KL(n,e,t){zf(t,{command:"addSource",args:[n,e[n]]})}function DL(n,e,t){zf(e,{command:"removeSource",args:[n]}),t[n]=!0}function D$(n,e,t,r){DL(n,t,r),KL(n,e,t)}function R$(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!wa(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!wa(n[t][r],e[t][r]))return!1;return!0}function F$(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||DL(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?wa(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&R$(n,e,i)?zf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):D$(i,e,t,r)):KL(i,e,t))}function cb(n,e,t,r,i,s){n=n||{},e=e||{};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(wa(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]}));for(const a in e)!Object.prototype.hasOwnProperty.call(e,a)||Object.prototype.hasOwnProperty.call(n,a)||wa(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]})}function mI(n){return n.id}function gI(n,e){return n[e.id]=e,n}function L$(n,e,t){n=n||[],e=e||[];const r=n.map(mI),i=e.map(mI),s=n.reduce(gI,{}),a=e.reduce(gI,{}),o=r.slice(),f=Object.create(null);let y,x,B,O,T;for(let F=0,j=0;F<r.length;F++)y=r[F],Object.prototype.hasOwnProperty.call(a,y)?j++:(zf(t,{command:"removeLayer",args:[y]}),o.splice(o.indexOf(y,j),1));for(let F=0,j=0;F<i.length;F++)y=i[i.length-1-F],o[o.length-1-F]!==y&&(Object.prototype.hasOwnProperty.call(s,y)?(zf(t,{command:"removeLayer",args:[y]}),o.splice(o.lastIndexOf(y,o.length-j),1)):j++,O=o[o.length-F],zf(t,{command:"addLayer",args:[a[y],O]}),o.splice(o.length-F,0,y),f[y]=!0);for(let F=0;F<i.length;F++)if(y=i[F],x=s[y],B=a[y],!(f[y]||wa(x,B))){if(!wa(x.source,B.source)||!wa(x["source-layer"],B["source-layer"])||!wa(x.type,B.type)){zf(t,{command:"removeLayer",args:[y]}),O=o[o.lastIndexOf(y)+1],zf(t,{command:"addLayer",args:[B,O]});continue}cb(x.layout,B.layout,t,y,null,"setLayoutProperty"),cb(x.paint,B.paint,t,y,null,"setPaintProperty"),wa(x.filter,B.filter)||zf(t,{command:"setFilter",args:[y,B.filter]}),(!wa(x.minzoom,B.minzoom)||!wa(x.maxzoom,B.maxzoom))&&zf(t,{command:"setLayerZoomRange",args:[y,B.minzoom,B.maxzoom]});for(T in x)Object.prototype.hasOwnProperty.call(x,T)&&(T==="layout"||T==="paint"||T==="filter"||T==="metadata"||T==="minzoom"||T==="maxzoom"||(T.indexOf("paint.")===0?cb(x[T],B[T],t,y,T.slice(6),"setPaintProperty"):wa(x[T],B[T])||zf(t,{command:"setLayerProperty",args:[y,T,B[T]]})));for(T in B)!Object.prototype.hasOwnProperty.call(B,T)||Object.prototype.hasOwnProperty.call(x,T)||T==="layout"||T==="paint"||T==="filter"||T==="metadata"||T==="minzoom"||T==="maxzoom"||(T.indexOf("paint.")===0?cb(x[T],B[T],t,y,T.slice(6),"setPaintProperty"):wa(x[T],B[T])||zf(t,{command:"setLayerProperty",args:[y,T,B[T]]}))}}function U$(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!wa(n.version,e.version))return[{command:"setStyle",args:[e]}];wa(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),wa(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),wa(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),wa(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),wa(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),wa(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),wa(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),wa(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),wa(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),wa(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),wa(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),wa(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),wa(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];F$(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(a=>{"source"in a&&r[a.source]?t.push({command:"removeLayer",args:[a.id]}):s.push(a)}),t=t.concat(i),L$(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class Sr{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function jy(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class em extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}let z$=class RL{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new RL(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const Ix={kind:"null"},kr={kind:"number"},As={kind:"string"},Yo={kind:"boolean"},am={kind:"color"},kx={kind:"projectionDefinition"},My={kind:"object"},Vo={kind:"value"},j$={kind:"error"},Tx={kind:"collator"},Px={kind:"formatted"},Kx={kind:"padding"},a_={kind:"resolvedImage"},Dx={kind:"variableAnchorOffsetCollection"};function of(n,e){return{kind:"array",itemType:n,N:e}}function $l(n){if(n.kind==="array"){const e=$l(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const N$=[Ix,kr,As,Yo,am,kx,Px,My,of(Vo),Kx,a_,Dx];function EC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!EC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of N$)if(!EC(t,e))return null}}return`Expected ${$l(n)} but found ${$l(e)} instead.`}function ZB(n,e){return e.some(t=>t.kind===n.kind)}function Ug(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function O1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const FL=.96422,LL=1,UL=.82521,zL=4/29,Sy=6/29,jL=3*Sy*Sy,W$=Sy*Sy*Sy,G$=Math.PI/180,Q$=180/Math.PI;function NL(n){return n=n%360,n<0&&(n+=360),n}function WL([n,e,t,r]){n=_4(n),e=_4(e),t=_4(t);let i,s;const a=b4((.2225045*n+.7168786*e+.0606169*t)/LL);n===e&&e===t?i=s=a:(i=b4((.4360747*n+.3850649*e+.1430804*t)/FL),s=b4((.0139322*n+.0971045*e+.7141733*t)/UL));const o=116*a-16;return[o<0?0:o,500*(i-a),200*(a-s),r]}function _4(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function b4(n){return n>W$?Math.pow(n,1/3):n/jL+zL}function GL([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,a=isNaN(t)?i:i-t/200;return i=LL*w4(i),s=FL*w4(s),a=UL*w4(a),[x4(3.1338561*s-1.6168667*i-.4906146*a),x4(-.9787684*s+1.9161415*i+.033454*a),x4(.0719453*s-.2289914*i+1.4052427*a),r]}function x4(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function w4(n){return n>Sy?n*n*n:jL*(n-zL)}function q$(n){const[e,t,r,i]=WL(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?NL(Math.atan2(r,t)*Q$):NaN,s,e,i]}function Y$([n,e,t,r]){return n=isNaN(n)?0:n*G$,GL([t,Math.cos(n)*e,Math.sin(n)*e,r])}function $$([n,e,t,r]){n=NL(n),e/=100,t/=100;function i(s){const a=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(a-3,9-a,1))}return[i(0),i(8),i(4),r]}function V$(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=H$[n];if(e){const[i,s,a]=e;return[i/255,s/255,a/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let a=1;return[db(n.slice(a,a+=s)),db(n.slice(a,a+=s)),db(n.slice(a,a+=s)),db(n.slice(a,a+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[a,o,f,y,x,B,O,T,F,j,N,q]=s,H=[y||" ",O||" ",j].join("");if(H==="  "||H==="  /"||H===",,"||H===",,,"){const oe=[f,B,F].join(""),ne=oe==="%%%"?100:oe===""?255:0;if(ne){const $=[iy(+o/ne,0,1),iy(+x/ne,0,1),iy(+T/ne,0,1),N?yI(+N,q):1];if(vI($))return $}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,a,o,f,y,x,B,O]=r,T=[a||" ",f||" ",x].join("");if(T==="  "||T==="  /"||T===",,"||T===",,,"){const F=[+s,iy(+o,0,100),iy(+y,0,100),B?yI(+B,O):1];if(vI(F))return $$(F)}}}function db(n){return parseInt(n.padEnd(2,n),16)/255}function yI(n,e){return iy(e?n/100:n,0,1)}function iy(n,e,t){return Math.min(Math.max(e,n),t)}function vI(n){return!n.some(Number.isNaN)}const H$={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function z0(n,e,t){return n+t*(e-n)}function BC(n,e,t){return n.map((r,i)=>z0(r,e[i],t))}function Z$(n){return n==="rgb"||n==="hcl"||n==="lab"}let Ll=class oy{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof oy)return e;if(typeof e!="string")return;const t=V$(e);if(t)return new oy(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",q$(this.rgb))}get lab(){return this.overwriteGetter("lab",WL(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,a,o,f]=BC(e.rgb,t.rgb,r);return new oy(s,a,o,f,!1)}case"hcl":{const[s,a,o,f]=e.hcl,[y,x,B,O]=t.hcl;let T,F;if(!isNaN(s)&&!isNaN(y)){let oe=y-s;y>s&&oe>180?oe-=360:y<s&&s-y>180&&(oe+=360),T=s+r*oe}else isNaN(s)?isNaN(y)?T=NaN:(T=y,(o===1||o===0)&&(F=x)):(T=s,(B===1||B===0)&&(F=a));const[j,N,q,H]=Y$([T,F??z0(a,x,r),z0(o,B,r),z0(f,O,r)]);return new oy(j,N,q,H,!1)}case"lab":{const[s,a,o,f]=GL(BC(e.lab,t.lab,r));return new oy(s,a,o,f,!1)}}}};Ll.black=new Ll(0,0,0,1);Ll.white=new Ll(1,1,1,1);Ll.transparent=new Ll(0,0,0,0);Ll.red=new Ll(1,0,0,1);let XB=class{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const X$=["bottom","center","top"];let B6=class{constructor(e,t,r,i,s,a){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=a}},ev=class e2{constructor(e){this.sections=e}static fromString(e){return new e2([new B6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof e2?e:e2.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}};class Yd{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Yd)return e;if(typeof e=="number")return new Yd([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Yd(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Yd(BC(e.values,t.values,r))}}let uA=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const J$=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Yf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Yf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!J$.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Yf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new uA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const a=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new uA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);a.push(i[o]);const[f,y]=i[o+1],[x,B]=s[o+1];a.push([z0(f,x,r),z0(y,B,r)])}return new Yf(a)}}let e1=class QL{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new QL({name:e,available:!1}):null}};class Nf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Nf(e,t,r)}static parse(e){if(e instanceof Nf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Nf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Nf(e.from,e.to,e.transition);if(typeof e=="string")return new Nf(e,e,1)}}function qL(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function OC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Nf||n instanceof Ll||n instanceof XB||n instanceof ev||n instanceof Yd||n instanceof Yf||n instanceof e1)return!0;if(Array.isArray(n)){for(const e of n)if(!OC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!OC(n[e]))return!1;return!0}else return!1}function tc(n){if(n===null)return Ix;if(typeof n=="string")return As;if(typeof n=="boolean")return Yo;if(typeof n=="number")return kr;if(n instanceof Ll)return am;if(n instanceof Nf)return kx;if(n instanceof XB)return Tx;if(n instanceof ev)return Px;if(n instanceof Yd)return Kx;if(n instanceof Yf)return Dx;if(n instanceof e1)return a_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=tc(r);if(!t)t=i;else{if(t===i)continue;t=Vo;break}}return of(t||Vo,e)}else return My}function dC(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Ll||n instanceof Nf||n instanceof ev||n instanceof Yd||n instanceof Yf||n instanceof e1?n.toString():JSON.stringify(n)}let _2=class YL{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!OC(e[1]))return t.error("invalid value");const r=e[1];let i=tc(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new YL(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const hb={string:As,number:kr,boolean:Yo,object:My};let Um=class $L{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const y=e[1];if(typeof y!="string"||!(y in hb)||y==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=hb[y],r++}else o=Vo;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);f=e[2],r++}i=of(o,f)}else{if(!hb[s])throw new Error(`Types doesn't contain name = ${s}`);i=hb[s]}const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Vo);if(!o)return null;a.push(o)}return new $L(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(EC(this.type,tc(r))){if(t===this.args.length-1)throw new uA(`Expected value to be of type ${$l(this.type)}, but found ${$l(tc(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const CI={"to-boolean":Yo,"to-color":am,"to-number":kr,"to-string":As};let py=class VL{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!CI[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=CI[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,Vo);if(!o)return null;s.push(o)}return new VL(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Ll)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=qL(t[0],t[1],t[2],t[3]),!r))return new Ll(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new uA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Yd.parse(t);if(i)return i}throw new uA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Yf.parse(t);if(i)return i}throw new uA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new uA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return ev.fromString(dC(this.args[0].evaluate(e)));case"resolvedImage":return e1.fromString(dC(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return dC(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const eV=["Unknown","Point","LineString","Polygon"];let HL=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?eV[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ll.parse(e)),t}},ZL=class XL{constructor(e,t,r=[],i,s=new z$,a=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=a,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new Um(s,[i]):a==="coerce"?new py(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,f=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&f.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&(f.kind==="string"||f.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(f.kind==="value"||f.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="padding"&&(f.kind==="value"||f.kind==="number"||f.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="variableAnchorOffsetCollection"&&(f.kind==="value"||f.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,f))return null}if(!(a instanceof _2)&&a.type.kind!=="resolvedImage"&&this._isConstant(a)){const o=new HL;try{a=new _2(a.type,a.evaluate(o))}catch(f){return this.error(f.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new XL(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new em(r,e))}checkSubtype(e,t){const r=EC(e,t);return r&&this.error(r),r}},JL=class eU{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new eU(r,i):null}outputDefined(){return this.result.outputDefined()}},tU=class nU{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new nU(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},tV=class rU{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,kr),i=t.parse(e[2],2,of(t.expectedType||Vo));if(!r||!i)return null;const s=i.type;return new rU(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new uA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new uA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new uA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},nV=class iU{constructor(e,t){this.type=Yo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,Vo);return!r||!i?null:ZB(r.type,[Yo,As,kr,Ix,Vo])?new iU(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$l(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Ug(t,["boolean","string","number","null"]))throw new uA(`Expected first argument to be of type boolean, string, number or null, but found ${$l(tc(t))} instead.`);if(!Ug(r,["string","array"]))throw new uA(`Expected second argument to be of type array or string, but found ${$l(tc(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},rV=class O6{constructor(e,t,r){this.type=kr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,Vo);if(!r||!i)return null;if(!ZB(r.type,[Yo,As,kr,Ix,Vo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$l(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,kr);return s?new O6(r,i,s):null}else return new O6(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Ug(t,["boolean","string","number","null"]))throw new uA(`Expected first argument to be of type boolean, string, number or null, but found ${$l(tc(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Ug(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(Ug(r,["array"]))return r.indexOf(t,i);throw new uA(`Expected second argument to be of type array or string, but found ${$l(tc(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},iV=class oU{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let y=2;y<e.length-1;y+=2){let x=e[y];const B=e[y+1];Array.isArray(x)||(x=[x]);const O=t.concat(y);if(x.length===0)return O.error("Expected at least one branch label.");for(const F of x){if(typeof F!="number"&&typeof F!="string")return O.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof F=="number"&&Math.floor(F)!==F)return O.error("Numeric branch labels must be integer values.");if(!r)r=tc(F);else if(O.checkSubtype(r,tc(F)))return null;if(typeof s[String(F)]<"u")return O.error("Branch labels must be unique.");s[String(F)]=a.length}const T=t.parse(B,y,i);if(!T)return null;i=i||T.type,a.push(T)}const o=t.parse(e[1],1,Vo);if(!o)return null;const f=t.parse(e[e.length-1],e.length-1,i);return!f||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new oU(r,i,o,s,a,f)}evaluate(e){const t=this.input.evaluate(e);return(tc(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},oV=class sU{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,Yo);if(!o)return null;const f=t.parse(e[a+1],a+1,r);if(!f)return null;i.push([o,f]),r=r||f.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new sU(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},sV=class I6{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Vo),i=t.parse(e[2],2,kr);if(!r||!i)return null;if(!ZB(r.type,[of(Vo),As,Vo]))return t.error(`Expected first argument to be of type array or string, but found ${$l(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,kr);return s?new I6(r.type,r,i,s):null}else return new I6(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Ug(t,["string"]))return[...t].slice(r,i).join("");if(Ug(t,["array"]))return t.slice(r,i);throw new uA(`Expected first argument to be of type array or string, but found ${$l(tc(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function Rx(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new uA("Input is not a number.");return 0}let aU=class lU{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,kr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],f=e[a+1],y=a,x=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const B=t.parse(f,x,s);if(!B)return null;s=s||B.type,i.push([o,B])}return new lU(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Rx(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function aV(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var M4,_I;function lV(){if(_I)return M4;_I=1,M4=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}var o=0,f=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:f=r,r=(f-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},M4}var uV=lV(),AV=aV(uV);let Nm=class k6{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=S4(t,e.base,r,i);else if(e.name==="linear")s=S4(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new AV(a[0],a[1],a[2],a[3]).solve(S4(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const y=i[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:y}}else if(i[0]==="cubic-bezier"){const y=i.slice(1);if(y.length!==4||y.some(x=>typeof x!="number"||x<0||x>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:y}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,kr),!s)return null;const o=[];let f=null;r==="interpolate-hcl"||r==="interpolate-lab"?f=am:t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(let y=0;y<a.length;y+=2){const x=a[y],B=a[y+1],O=y+3,T=y+4;if(typeof x!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(o.length&&o[o.length-1][0]>=x)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const F=t.parse(B,T,f);if(!F)return null;f=f||F.type,o.push([x,F])}return!O1(f,kr)&&!O1(f,kx)&&!O1(f,am)&&!O1(f,Kx)&&!O1(f,Dx)&&!O1(f,of(kr))?t.error(`Type ${$l(f)} is not interpolatable.`):new k6(f,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Rx(t,i),o=t[a],f=t[a+1],y=k6.interpolationFactor(this.interpolation,i,o,f),x=r[a].evaluate(e),B=r[a+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return z0(x,B,y);case"color":return Ll.interpolate(x,B,y);case"padding":return Yd.interpolate(x,B,y);case"variableAnchorOffsetCollection":return Yf.interpolate(x,B,y);case"array":return BC(x,B,y);case"projectionDefinition":return Nf.interpolate(x,B,y)}case"interpolate-hcl":return Ll.interpolate(x,B,y,"hcl");case"interpolate-lab":return Ll.interpolate(x,B,y,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function S4(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const cV={color:Ll.interpolate,number:z0,padding:Yd.interpolate,variableAnchorOffsetCollection:Yf.interpolate,array:BC};let uU=class T6{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const f=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!f)return null;r=r||f.type,s.push(f)}if(!r)throw new Error("No output type");return i&&s.some(o=>EC(i,o.type))?new T6(Vo,s):new T6(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof e1&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function bI(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function dV(n,e,t){return e===t}function hV(n,e,t){return e!==t}function fV(n,e,t){return e<t}function pV(n,e,t){return e>t}function mV(n,e,t){return e<=t}function gV(n,e,t){return e>=t}function AU(n,e,t,r){return r.compare(e,t)===0}function yV(n,e,t,r){return!AU(n,e,t,r)}function vV(n,e,t,r){return r.compare(e,t)<0}function CV(n,e,t,r){return r.compare(e,t)>0}function _V(n,e,t,r){return r.compare(e,t)<=0}function bV(n,e,t,r){return r.compare(e,t)>=0}function tv(n,e,t){const r=n!=="=="&&n!=="!=";return class cU{constructor(s,a,o){this.type=Yo,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let f=a.parse(s[1],1,Vo);if(!f)return null;if(!bI(o,f.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${$l(f.type)}'.`);let y=a.parse(s[2],2,Vo);if(!y)return null;if(!bI(o,y.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${$l(y.type)}'.`);if(f.type.kind!==y.type.kind&&f.type.kind!=="value"&&y.type.kind!=="value")return a.error(`Cannot compare types '${$l(f.type)}' and '${$l(y.type)}'.`);r&&(f.type.kind==="value"&&y.type.kind!=="value"?f=new Um(y.type,[f]):f.type.kind!=="value"&&y.type.kind==="value"&&(y=new Um(f.type,[y])));let x=null;if(s.length===4){if(f.type.kind!=="string"&&y.type.kind!=="string"&&f.type.kind!=="value"&&y.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(x=a.parse(s[3],3,Tx),!x)return null}return new cU(f,y,x)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const f=tc(a),y=tc(o);if(f.kind!==y.kind||!(f.kind==="string"||f.kind==="number"))throw new uA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${f.kind}, ${y.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const f=tc(a),y=tc(o);if(f.kind!=="string"||y.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const xV=tv("==",dV,AU),wV=tv("!=",hV,yV),MV=tv("<",fV,vV),SV=tv(">",pV,CV),EV=tv("<=",mV,_V),BV=tv(">=",gV,bV);let dU=class hU{constructor(e,t,r){this.type=Tx,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Yo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Yo);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,As),!a)?null:new hU(i,s,a)}evaluate(e){return new XB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},OV=class fU{constructor(e,t,r,i,s){this.type=As,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,kr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,As),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,As),!a))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,kr),!o))return null;let f=null;return i["max-fraction-digits"]&&(f=t.parse(i["max-fraction-digits"],1,kr),!f)?null:new fU(r,s,a,o,f)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},IV=class pU{constructor(e){this.type=Px,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let f=null;if(o["font-scale"]&&(f=t.parse(o["font-scale"],1,kr),!f))return null;let y=null;if(o["text-font"]&&(y=t.parse(o["text-font"],1,of(As)),!y))return null;let x=null;if(o["text-color"]&&(x=t.parse(o["text-color"],1,am),!x))return null;let B=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!X$.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(B=t.parse(o["vertical-align"],1,As),!B)return null}const O=i[i.length-1];O.scale=f,O.font=y,O.textColor=x,O.verticalAlign=B}else{const f=t.parse(e[a],1,Vo);if(!f)return null;const y=f.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:f,scale:null,font:null,textColor:null,verticalAlign:null})}}return new pU(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return tc(i)===a_?new B6("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new B6(dC(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new ev(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},kV=class mU{constructor(e){this.type=a_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,As);return r?new mU(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=e1.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}},TV=class gU{constructor(e){this.type=kr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${$l(r.type)} instead.`):new gU(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new uA(`Expected value to be of type string or array, but found ${$l(tc(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const lm=8192;function PV(n,e){const t=KV(n[0]),r=RV(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*lm),Math.round(r*i*lm)]}function JB(n,e){const t=Math.pow(2,e.z),r=(n[0]/lm+e.x)/t,i=(n[1]/lm+e.y)/t;return[DV(r),FV(i)]}function KV(n){return(180+n)/360}function DV(n){return n*360-180}function RV(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function FV(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function l_(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function IC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function LV(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function UV(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function Fx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return WV(s,i)===0?!1:!!(xI(n,e,t,r)&&xI(t,r,n,e))}function zV(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Fx(n,e,r[i],r[i+1]))return!0;return!1}function nv(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(UV(n,i[s],i[s+1]))return t;LV(n,i[s],i[s+1])&&(r=!r)}return r}function jV(n,e){for(const t of e)if(nv(n,t))return!0;return!1}function yU(n,e){for(const t of n)if(!nv(t,e))return!1;for(let t=0;t<n.length-1;++t)if(zV(n[t],n[t+1],e))return!1;return!0}function NV(n,e){for(const t of e)if(yU(n,t))return!0;return!1}function WV(n,e){return n[0]*e[1]-n[1]*e[0]}function xI(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],f=r[0]-t[0],y=r[1]-t[1],x=i*y-f*s,B=a*y-f*o;return x>0&&B<0||x<0&&B>0}function e8(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=PV(n[i][a],t);l_(e,o),s.push(o)}r.push(s)}return r}function vU(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=e8(n[i],e,t);r.push(s)}return r}function CU(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}l_(e,n)}function GV(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function wI(n,e,t,r){const i=Math.pow(2,r.z)*lm,s=[r.x*lm,r.y*lm],a=[];for(const o of n)for(const f of o){const y=[f.x+s[0],f.y+s[1]];CU(y,e,t,i),a.push(y)}return a}function MI(n,e,t,r){const i=Math.pow(2,r.z)*lm,s=[r.x*lm,r.y*lm],a=[];for(const o of n){const f=[];for(const y of o){const x=[y.x+s[0],y.y+s[1]];l_(e,x),f.push(x)}a.push(f)}if(e[2]-e[0]<=i/2){GV(e);for(const o of a)for(const f of o)CU(f,e,t,i)}return a}function QV(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=e8(e.coordinates,r,i),a=wI(n.geometry(),t,r,i);if(!IC(t,r))return!1;for(const o of a)if(!nv(o,s))return!1}if(e.type==="MultiPolygon"){const s=vU(e.coordinates,r,i),a=wI(n.geometry(),t,r,i);if(!IC(t,r))return!1;for(const o of a)if(!jV(o,s))return!1}return!0}function qV(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=e8(e.coordinates,r,i),a=MI(n.geometry(),t,r,i);if(!IC(t,r))return!1;for(const o of a)if(!yU(o,s))return!1}if(e.type==="MultiPolygon"){const s=vU(e.coordinates,r,i),a=MI(n.geometry(),t,r,i);if(!IC(t,r))return!1;for(const o of a)if(!NV(o,s))return!1}return!0}let t8=class t2{constructor(e,t){this.type=Yo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(OC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:a,coordinates:o}=s.geometry;a==="Polygon"&&i.push(o),a==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new t2(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new t2(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new t2(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return QV(e,this.geometries);if(e.geometryType()==="LineString")return qV(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}};class _U{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,a=t[s];if(r(i,a)>=0)break;t[e]=a,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let a=(e<<1)+1;const o=a+1;if(o<this.length&&r(t[o],t[a])<0&&(a=o),r(t[a],s)>=0)break;t[e]=t[a],e=a}t[e]=s}}function YV(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const a of n){const o=$V(a);o!==0&&(a.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[a]):i.push(a))}return i&&r.push(i),r}function $V(n){let e=0;for(let t=0,r=n.length,i=r-1,s,a;t<r;i=t++)s=n[t],a=n[i],e+=(a.x-s.x)*(s.y+a.y);return e}const VV=6378.137,SI=1/298.257223563,EI=SI*(2-SI),BI=Math.PI/180;class n8{constructor(e){const t=BI*VV*1e3,r=Math.cos(e*BI),i=1/(1-EI*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-EI)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,a,o;for(let f=0;f<e.length-1;f++){let y=e[f][0],x=e[f][1],B=this.wrap(e[f+1][0]-y)*this.kx,O=(e[f+1][1]-x)*this.ky,T=0;(B!==0||O!==0)&&(T=(this.wrap(t[0]-y)*this.kx*B+(t[1]-x)*this.ky*O)/(B*B+O*O),T>1?(y=e[f+1][0],x=e[f+1][1]):T>0&&(y+=B/this.kx*T,x+=O/this.ky*T)),B=this.wrap(t[0]-y)*this.kx,O=(t[1]-x)*this.ky;const F=B*B+O*O;F<r&&(r=F,i=y,s=x,a=f,o=T)}return{point:[i,s],index:a,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const P6=100,K6=50;function bU(n,e){return e[0]-n[0]}function b2(n){return n[1]-n[0]+1}function $m(n,e){return n[1]>=n[0]&&n[1]<e}function D6(n,e){if(n[0]>n[1])return[null,null];const t=b2(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function R6(n,e){if(!$m(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)l_(t,n[r]);return t}function F6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)l_(e,r);return e}function OI(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function r8(n,e,t){if(!OI(n)||!OI(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function Tg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function i8(n,e,t,r,i){const s=Math.min(Tg(n,[t,r],i),Tg(e,[t,r],i)),a=Math.min(Tg(t,[n,e],i),Tg(r,[n,e],i));return Math.min(s,a)}function HV(n,e,t,r,i){if(!($m(e,n.length)&&$m(r,t.length)))return 1/0;let a=1/0;for(let o=e[0];o<e[1];++o){const f=n[o],y=n[o+1];for(let x=r[0];x<r[1];++x){const B=t[x],O=t[x+1];if(Fx(f,y,B,O))return 0;a=Math.min(a,i8(f,y,B,O,i))}}return a}function ZV(n,e,t,r,i){if(!($m(e,n.length)&&$m(r,t.length)))return NaN;let a=1/0;for(let o=e[0];o<=e[1];++o)for(let f=r[0];f<=r[1];++f)if(a=Math.min(a,i.distance(n[o],t[f])),a===0)return a;return a}function XV(n,e,t){if(nv(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],a=i[i.length-1];if(s!==a&&(r=Math.min(r,Tg(n,[a,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function JV(n,e,t,r){if(!$m(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(nv(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const a=n[s],o=n[s+1];for(const f of t)for(let y=0,x=f.length,B=x-1;y<x;B=y++){const O=f[B],T=f[y];if(Fx(a,o,O,T))return 0;i=Math.min(i,i8(a,o,O,T,r))}}return i}function II(n,e){for(const t of n)for(const r of t)if(nv(r,e,!0))return!0;return!1}function eH(n,e,t,r=1/0){const i=F6(n),s=F6(e);if(r!==1/0&&r8(i,s,t)>=r)return r;if(IC(i,s)){if(II(n,e))return 0}else if(II(e,n))return 0;let a=1/0;for(const o of n)for(let f=0,y=o.length,x=y-1;f<y;x=f++){const B=o[x],O=o[f];for(const T of e)for(let F=0,j=T.length,N=j-1;F<j;N=F++){const q=T[N],H=T[F];if(Fx(B,O,q,H))return 0;a=Math.min(a,i8(B,O,q,H,t))}}return a}function kI(n,e,t,r,i,s){if(!s)return;const a=r8(R6(r,s),i,t);a<e&&n.push([a,s,[0,0]])}function fb(n,e,t,r,i,s,a){if(!s||!a)return;const o=r8(R6(r,s),R6(i,a),t);o<e&&n.push([o,s,a])}function x2(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const a=new _U([[0,[0,n.length-1],[0,0]]],bU),o=F6(t);for(;a.length>0;){const f=a.pop();if(f[0]>=s)continue;const y=f[1],x=e?K6:P6;if(b2(y)<=x){if(!$m(y,n.length))return NaN;if(e){const B=JV(n,y,t,r);if(isNaN(B)||B===0)return B;s=Math.min(s,B)}else for(let B=y[0];B<=y[1];++B){const O=XV(n[B],t,r);if(s=Math.min(s,O),s===0)return 0}}else{const B=D6(y,e);kI(a,s,r,n,o,B[0]),kI(a,s,r,n,o,B[1])}}return s}function w2(n,e,t,r,i,s=1/0){let a=Math.min(s,i.distance(n[0],t[0]));if(a===0)return a;const o=new _U([[0,[0,n.length-1],[0,t.length-1]]],bU);for(;o.length>0;){const f=o.pop();if(f[0]>=a)continue;const y=f[1],x=f[2],B=e?K6:P6,O=r?K6:P6;if(b2(y)<=B&&b2(x)<=O){if(!$m(y,n.length)&&$m(x,t.length))return NaN;let T;if(e&&r)T=HV(n,y,t,x,i),a=Math.min(a,T);else if(e&&!r){const F=n.slice(y[0],y[1]+1);for(let j=x[0];j<=x[1];++j)if(T=Tg(t[j],F,i),a=Math.min(a,T),a===0)return a}else if(!e&&r){const F=t.slice(x[0],x[1]+1);for(let j=y[0];j<=y[1];++j)if(T=Tg(n[j],F,i),a=Math.min(a,T),a===0)return a}else T=ZV(n,y,t,x,i),a=Math.min(a,T)}else{const T=D6(y,e),F=D6(x,r);fb(o,a,i,n,t,T[0],F[0]),fb(o,a,i,n,t,T[0],F[1]),fb(o,a,i,n,t,T[1],F[0]),fb(o,a,i,n,t,T[1],F[1])}}return a}function tH(n,e){const t=n.geometry(),r=t.flat().map(a=>JB([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new n8(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,w2(r,!1,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,w2(r,!1,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,x2(r,!1,a.coordinates,i,s));break}if(s===0)return s}return s}function nH(n,e){const t=n.geometry(),r=t.flat().map(a=>JB([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new n8(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,w2(r,!0,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,w2(r,!0,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,x2(r,!0,a.coordinates,i,s));break}if(s===0)return s}return s}function rH(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=YV(t).map(a=>a.map(o=>o.map(f=>JB([f.x,f.y],n.canonical)))),i=new n8(r[0][0][0][1]);let s=1/0;for(const a of e)for(const o of r){switch(a.type){case"Point":s=Math.min(s,x2([a.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,x2(a.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,eH(o,a.coordinates,i,s));break}if(s===0)return s}return s}function E4(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class zg{constructor(e,t){this.type=kr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(OC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new zg(r,r.features.map(i=>E4(i.geometry)).flat());if(r.type==="Feature")return new zg(r,E4(r.geometry));if("type"in r&&"coordinates"in r)return new zg(r,E4(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return tH(e,this.geometries);if(e.geometryType()==="LineString")return nH(e,this.geometries);if(e.geometryType()==="Polygon")return rH(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const o8={"==":xV,"!=":wV,">":SV,"<":MV,">=":BV,"<=":EV,array:Um,at:tV,boolean:Um,case:oV,coalesce:uU,collator:dU,format:IV,image:kV,in:nV,"index-of":rV,interpolate:Nm,"interpolate-hcl":Nm,"interpolate-lab":Nm,length:TV,let:JL,literal:_2,match:iV,number:Um,"number-format":OV,object:Um,slice:sV,step:aU,string:Um,"to-boolean":py,"to-color":py,"to-number":py,"to-string":py,var:tU,within:t8,distance:zg};let rv=class Qv{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=Qv.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([y])=>!Array.isArray(y)||y.length===e.length-1);let f=null;for(const[y,x]of o){f=new ZL(t.registry,M2,t.path,null,t.scope);const B=[];let O=!1;for(let T=1;T<e.length;T++){const F=e[T],j=Array.isArray(y)?y[T-1]:y.type,N=f.parse(F,1+B.length,j);if(!N){O=!0;break}B.push(N)}if(!O){if(Array.isArray(y)&&y.length!==B.length){f.error(`Expected ${y.length} arguments, but found ${B.length} instead.`);continue}for(let T=0;T<B.length;T++){const F=Array.isArray(y)?y[T]:y.type,j=B[T];f.concat(T+1).checkSubtype(F,j.type)}if(f.errors.length===0)return new Qv(r,s,x,B)}}if(o.length===1)t.errors.push(...f.errors);else{const x=(o.length?o:a).map(([O])=>oH(O)).join(" | "),B=[];for(let O=1;O<e.length;O++){const T=t.parse(e[O],1+B.length);if(!T)return null;B.push($l(T.type))}t.error(`Expected arguments of type ${x}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){Qv.definitions=t;for(const r in t)e[r]=Qv}};function TI(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=qL(e,t,r,s);if(a)throw new uA(a);return new Ll(e/255,t/255,r/255,s,!1)}function PI(n,e){return n in e}function B4(n,e){const t=e[n];return typeof t>"u"?null:t}function iH(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function mg(n){return{type:n}}rv.register(o8,{error:[j$,[As],(n,[e])=>{throw new uA(e.evaluate(n))}],typeof:[As,[Vo],(n,[e])=>$l(tc(e.evaluate(n)))],"to-rgba":[of(kr,4),[am],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[am,[kr,kr,kr],TI],rgba:[am,[kr,kr,kr,kr],TI],has:{type:Yo,overloads:[[[As],(n,[e])=>PI(e.evaluate(n),n.properties())],[[As,My],(n,[e,t])=>PI(e.evaluate(n),t.evaluate(n))]]},get:{type:Vo,overloads:[[[As],(n,[e])=>B4(e.evaluate(n),n.properties())],[[As,My],(n,[e,t])=>B4(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Vo,[As],(n,[e])=>B4(e.evaluate(n),n.featureState||{})],properties:[My,[],n=>n.properties()],"geometry-type":[As,[],n=>n.geometryType()],id:[Vo,[],n=>n.id()],zoom:[kr,[],n=>n.globals.zoom],"heatmap-density":[kr,[],n=>n.globals.heatmapDensity||0],"line-progress":[kr,[],n=>n.globals.lineProgress||0],accumulated:[Vo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[kr,mg(kr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[kr,mg(kr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:kr,overloads:[[[kr,kr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[kr],(n,[e])=>-e.evaluate(n)]]},"/":[kr,[kr,kr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[kr,[kr,kr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[kr,[],()=>Math.LN2],pi:[kr,[],()=>Math.PI],e:[kr,[],()=>Math.E],"^":[kr,[kr,kr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[kr,[kr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))],log2:[kr,[kr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[kr,[kr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[kr,[kr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[kr,[kr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[kr,[kr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[kr,[kr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[kr,[kr],(n,[e])=>Math.atan(e.evaluate(n))],min:[kr,mg(kr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[kr,mg(kr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[kr,[kr],(n,[e])=>Math.abs(e.evaluate(n))],round:[kr,[kr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[kr,[kr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[kr,[kr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Yo,[As,Vo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Yo,[Vo],(n,[e])=>n.id()===e.value],"filter-type-==":[Yo,[As],(n,[e])=>n.geometryType()===e.value],"filter-<":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Yo,[As,Vo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Yo,[Vo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Yo,[Vo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Yo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Yo,[of(As)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Yo,[of(Vo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Yo,[As,of(Vo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Yo,[As,of(Vo)],(n,[e,t])=>iH(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Yo,overloads:[[[Yo,Yo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[mg(Yo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Yo,overloads:[[[Yo,Yo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[mg(Yo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Yo,[Yo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Yo,[As],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[As,[As],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[As,[As],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[As,mg(Vo),(n,e)=>e.map(t=>dC(t.evaluate(n))).join("")],"resolved-locale":[As,[Tx],(n,[e])=>e.evaluate(n).resolvedLocale()]});function oH(n){return Array.isArray(n)?`(${n.map($l).join(", ")})`:`(${$l(n.type)}...)`}function M2(n){if(n instanceof tU)return M2(n.boundExpression);if(n instanceof rv&&n.name==="error")return!1;if(n instanceof dU)return!1;if(n instanceof t8)return!1;if(n instanceof zg)return!1;const e=n instanceof py||n instanceof Um;let t=!0;return n.eachChild(r=>{e?t=t&&M2(r):t=t&&r instanceof _2}),t?Lx(n)&&Ux(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Lx(n){if(n instanceof rv){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof t8||n instanceof zg)return!1;let e=!0;return n.eachChild(t=>{e&&!Lx(t)&&(e=!1)}),e}function kC(n){if(n instanceof rv&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!kC(t)&&(e=!1)}),e}function Ux(n,e){if(n instanceof rv&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!Ux(r,e)&&(t=!1)}),t}function L6(n){return{result:"success",value:n}}function sy(n){return{result:"error",value:n}}function S2(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function xU(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function s8(n){return!!n.expression&&n.expression.interpolated}function Ks(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function u_(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function sH(n){return n}function a8(n,e){const t=e.type==="color",r=n.stops&&typeof n.stops[0][0]=="object",i=r||n.property!==void 0,s=r||!i,a=n.type||(s8(e)?"exponential":"interval");if(t||e.type==="padding"){const x=t?Ll.parse:Yd.parse;n=jy({},n),n.stops&&(n.stops=n.stops.map(B=>[B[0],x(B[1])])),n.default?n.default=x(n.default):n.default=x(e.default)}if(n.colorSpace&&!Z$(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);let o,f,y;if(a==="exponential")o=KI;else if(a==="interval")o=lH;else if(a==="categorical"){o=aH,f=Object.create(null);for(const x of n.stops)f[x[0]]=x[1];y=typeof n.stops[0][0]}else if(a==="identity")o=uH;else throw new Error(`Unknown function type "${a}"`);if(r){const x={},B=[];for(let F=0;F<n.stops.length;F++){const j=n.stops[F],N=j[0].zoom;x[N]===void 0&&(x[N]={zoom:N,type:n.type,property:n.property,default:n.default,stops:[]},B.push(N)),x[N].stops.push([j[0].value,j[1]])}const O=[];for(const F of B)O.push([x[F].zoom,a8(x[F],e)]);const T={name:"linear"};return{kind:"composite",interpolationType:T,interpolationFactor:Nm.interpolationFactor.bind(void 0,T),zoomStops:O.map(F=>F[0]),evaluate({zoom:F},j){return KI({stops:O,base:n.base},e,F).evaluate(F,j)}}}else if(s){const x=a==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:x,interpolationFactor:Nm.interpolationFactor.bind(void 0,x),zoomStops:n.stops.map(B=>B[0]),evaluate:({zoom:B})=>o(n,e,B,f,y)}}else return{kind:"source",evaluate(x,B){const O=B&&B.properties?B.properties[n.property]:void 0;return O===void 0?A_(n.default,e.default):o(n,e,O,f,y)}}}function A_(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function aH(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return A_(s,n.default,e.default)}function lH(n,e,t){if(Ks(t)!=="number")return A_(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=Rx(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function KI(n,e,t){const r=n.base!==void 0?n.base:1;if(Ks(t)!=="number")return A_(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=Rx(n.stops.map(x=>x[0]),t),a=AH(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],f=n.stops[s+1][1],y=cV[e.type]||sH;return typeof o.evaluate=="function"?{evaluate(...x){const B=o.evaluate.apply(void 0,x),O=f.evaluate.apply(void 0,x);if(!(B===void 0||O===void 0))return y(B,O,a,n.colorSpace)}}:y(o,f,a,n.colorSpace)}function uH(n,e,t){switch(e.type){case"color":t=Ll.parse(t);break;case"formatted":t=ev.fromString(t.toString());break;case"resolvedImage":t=e1.fromString(t.toString());break;case"padding":t=Yd.parse(t);break;default:Ks(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return A_(t,n.default,e.default)}function AH(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}let wU=class{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new HL,this._defaultValue=t?fH(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new uA(`Expected value to be one of ${Object.keys(this._enumValues).map(f=>JSON.stringify(f)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}};function c_(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in o8}function l8(n,e){const t=new ZL(o8,M2,[],e?hH(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?L6(new wU(r,e)):sy(t.errors)}let U6=class{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!kC(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}},z6=class{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!kC(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Nm.interpolationFactor(this.interpolationType,e,t,r):0}};function cH(n){return n._styleExpression!==void 0}function u8(n,e){const t=l8(n,e);if(t.result==="error")return t;const r=t.value.expression,i=Lx(r);if(!i&&!S2(e))return sy([new em("","data expressions not supported")]);const s=Ux(r,["zoom"]);if(!s&&!xU(e))return sy([new em("","zoom expressions not supported")]);const a=n2(r);if(!a&&!s)return sy([new em("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof em)return sy([a]);if(a instanceof Nm&&!s8(e))return sy([new em("",'"interpolate" expressions cannot be used with this property')]);if(!a)return L6(i?new U6("constant",t.value):new U6("source",t.value));const o=a instanceof Nm?a.interpolation:void 0;return L6(i?new z6("camera",t.value,a.labels,o):new z6("composite",t.value,a.labels,o))}class zx{constructor(e,t){this._parameters=e,this._specification=t,jy(this,a8(this._parameters,this._specification))}static deserialize(e){return new zx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function dH(n,e){if(u_(n))return new zx(n,e);if(c_(n)){const t=u8(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Ll.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Yd.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=Yf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Nf.parse(n)),{kind:"constant",evaluate:()=>t}}}function n2(n){let e=null;if(n instanceof JL)e=n2(n.result);else if(n instanceof uU){for(const t of n.args)if(e=n2(t),e)break}else(n instanceof aU||n instanceof Nm)&&n.input instanceof rv&&n.input.name==="zoom"&&(e=n);return e instanceof em||n.eachChild(t=>{const r=n2(t);r instanceof em?e=r:!e&&r?e=new em("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new em("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function hH(n){const e={color:am,string:As,number:kr,enum:As,boolean:Yo,formatted:Px,padding:Kx,projectionDefinition:kx,resolvedImage:a_,variableAnchorOffsetCollection:Dx};return n.type==="array"?of(e[n.value]||Vo,n.length):e[n.type]}function fH(n){return n.type==="color"&&u_(n.default)?new Ll(0,0,0,0):n.type==="color"?Ll.parse(n.default)||null:n.type==="padding"?Yd.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?Yf.parse(n.default)||null:n.type==="projectionDefinition"?Nf.parse(n.default)||null:n.default===void 0?null:n.default}function jx(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!jx(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function hC(n,e={}){if(jx(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return mH(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(a=>{const o={},f=hC(a,o),y=pH(o);return y===!0?f:["case",y,f,!1]})]}case"all":{const[,...i]=t,s=i.map(a=>hC(a,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",hC(["any",...i],{})]}case"in":{const[,i,...s]=t;return DI(i,s)}case"!in":{const[,i,...s]=t;return DI(i,s,!0)}case"has":return RI(t[1]);case"!has":return["!",RI(t[1])];default:return!0}}function pH(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function mH(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function DI(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const a of e)if(typeof a!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const a=e.sort().filter((o,f)=>f===0||e[f-1]!==o);return["match",r,a,!t,t]}return t?["all",...e.map(a=>["!=",r,a])]:["any",...e.map(a=>["==",r,a])]}function RI(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function TC(n){return typeof n=="object"?["literal",n]:n}function MU(n,e){let t=n.stops;if(!t)return gH(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],SU(a[1])]:[a[0],TC(a[1])]),r?yH(n,e,t):s?CH(n,e,t):j6(n,e,t)}function gH(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,TC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function A8(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function yH(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const f=t[o],y=f[0].zoom;r[y]===void 0&&(r[y]={zoom:y,type:n.type,property:n.property,default:n.default},i[y]=[],s.push(y)),i[y].push([f[0].value,f[1]])}if(d8({},e)==="exponential"){const o=[A8(n),["linear"],["zoom"]];for(const f of s){const y=j6(r[f],e,i[f]);Ey(o,f,y,!1)}return o}else{const o=["step",["zoom"]];for(const f of s){const y=j6(r[f],e,i[f]);Ey(o,f,y,!0)}return c8(o),o}}function vH(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function FI(n,e){const t=TC(vH(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function j6(n,e,t){const r=d8(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(FI(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)Ey(s,a[0],a[1],!1);return s.push(FI(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)Ey(s,a[0],a[1],!0);return c8(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,TC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[A8(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)Ey(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,TC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function CH(n,e,t,r=["zoom"]){const i=d8(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[A8(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)Ey(s,o[0],o[1],a);return c8(s),s}function c8(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function Ey(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function d8(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function SU(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function _H(n){for(let e=0;e<Ps.layout.length;e++)for(const t in Ps[Ps.layout[e]])if(t===n)return Ps[Ps.layout[e]][t];for(let e=0;e<Ps.paint.length;e++)for(const t in Ps[Ps.paint[e]])if(t===n)return Ps[Ps.paint[e]][t];return null}function bH(n,e){for(const t in n.sources)e(n.sources[t])}function fC(n,e){for(const t of n.layers)e(t)}function h8(n,e,t){function r(i,s){const a=i[s];a&&Object.keys(a).forEach(o=>{t({path:[i.id,s,o],key:o,value:a[o],reference:_H(o),set(f){a[o]=f}})})}fC(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function EU(n){const e=n.key,t=n.value;return t?[new Sr(e,t,"constants have been deprecated as of v8")]:[]}function Ru(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function qg(n){if(Array.isArray(n))return n.map(qg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=qg(n[t]);return e}return Ru(n)}function Gf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,a=n.styleSpec,o=n.validateSpec;let f=[];const y=Ks(t);if(y!=="object")return[new Sr(e,t,`object expected, ${y} found`)];for(const x in t){const B=x.split(".")[0],O=r[B]||r["*"];let T;if(i[B])T=i[B];else if(r[B])T=o;else if(i["*"])T=i["*"];else if(r["*"])T=o;else{f.push(new Sr(e,t[x],`unknown property "${x}"`));continue}f=f.concat(T({key:(e&&`${e}.`)+x,value:t[x],valueSpec:O,style:s,styleSpec:a,object:t,objectKey:x,validateSpec:o},t))}for(const x in r)i[x]||r[x].required&&r[x].default===void 0&&t[x]===void 0&&f.push(new Sr(e,t,`missing required property "${x}"`));return f}function f8(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.key,o=n.arrayElementValidator||r;if(Ks(e)!=="array")return[new Sr(a,e,`array expected, ${Ks(e)} found`)];if(t.length&&e.length!==t.length)return[new Sr(a,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Sr(a,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let f={type:t.value,values:t.values};s.$version<7&&(f.function=t.function),Ks(t.value)==="object"&&(f=t.value);let y=[];for(let x=0;x<e.length;x++)y=y.concat(o({array:e,arrayIndex:x,value:e[x],valueSpec:f,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${a}[${x}]`}));return y}function p8(n){const e=n.key,t=n.value,r=n.valueSpec;let i=Ks(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new Sr(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new Sr(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new Sr(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function BU(n){const e=n.valueSpec,t=Ru(n.value.type);let r,i={},s,a;const o=t!=="categorical"&&n.value.property===void 0,f=!o,y=Ks(n.value.stops)==="array"&&Ks(n.value.stops[0])==="array"&&Ks(n.value.stops[0][0])==="object",x=Gf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:B,default:F}});return t==="identity"&&o&&x.push(new Sr(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&x.push(new Sr(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!s8(n.valueSpec)&&x.push(new Sr(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(f&&!S2(n.valueSpec)?x.push(new Sr(n.key,n.value,"property functions not supported")):o&&!xU(n.valueSpec)&&x.push(new Sr(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||y)&&n.value.property===void 0&&x.push(new Sr(n.key,n.value,'"property" property is required')),x;function B(j){if(t==="identity")return[new Sr(j.key,j.value,'identity function may not have a "stops" property')];let N=[];const q=j.value;return N=N.concat(f8({key:j.key,value:q,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:O})),Ks(q)==="array"&&q.length===0&&N.push(new Sr(j.key,q,"array must have at least one stop")),N}function O(j){let N=[];const q=j.value,H=j.key;if(Ks(q)!=="array")return[new Sr(H,q,`array expected, ${Ks(q)} found`)];if(q.length!==2)return[new Sr(H,q,`array length 2 expected, length ${q.length} found`)];if(y){if(Ks(q[0])!=="object")return[new Sr(H,q,`object expected, ${Ks(q[0])} found`)];if(q[0].zoom===void 0)return[new Sr(H,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new Sr(H,q,"object stop key must have value")];if(a&&a>Ru(q[0].zoom))return[new Sr(H,q[0].zoom,"stop zoom values must appear in ascending order")];Ru(q[0].zoom)!==a&&(a=Ru(q[0].zoom),s=void 0,i={}),N=N.concat(Gf({key:`${H}[0]`,value:q[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:p8,value:T}}))}else N=N.concat(T({key:`${H}[0]`,value:q[0],valueSpec:{},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},q));return c_(qg(q[1]))?N.concat([new Sr(`${H}[1]`,q[1],"expressions are not allowed in function stops.")]):N.concat(j.validateSpec({key:`${H}[1]`,value:q[1],valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function T(j,N){const q=Ks(j.value),H=Ru(j.value),oe=j.value!==null?j.value:N;if(!r)r=q;else if(q!==r)return[new Sr(j.key,oe,`${q} stop domain type must match previous stop domain type ${r}`)];if(q!=="number"&&q!=="string"&&q!=="boolean")return[new Sr(j.key,oe,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&t!=="categorical"){let ne=`number expected, ${q} found`;return S2(e)&&t===void 0&&(ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Sr(j.key,oe,ne)]}return t==="categorical"&&q==="number"&&(!isFinite(H)||Math.floor(H)!==H)?[new Sr(j.key,oe,`integer expected, found ${H}`)]:t!=="categorical"&&q==="number"&&s!==void 0&&H<s?[new Sr(j.key,oe,"stop domain values must appear in ascending order")]:(s=H,t==="categorical"&&H in i?[new Sr(j.key,oe,"stop domain values must be unique")]:(i[H]=!0,[]))}function F(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}function Ny(n){const e=(n.expressionContext==="property"?u8:l8)(qg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new Sr(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Sr(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!kC(t))return[new Sr(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!kC(t))return[new Sr(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Ux(t,["zoom","feature-state"]))return[new Sr(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Lx(t))return[new Sr(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xH(n){const e=n.value,t=n.key,r=Ks(e);return r!=="boolean"?[new Sr(t,e,`boolean expected, ${r} found`)]:[]}function wH(n){const e=n.key,t=n.value,r=Ks(t);return r!=="string"?[new Sr(e,t,`color expected, ${r} found`)]:Ll.parse(String(t))?[]:[new Sr(e,t,`color expected, "${t}" found`)]}function PC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(Ru(t))===-1&&i.push(new Sr(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(Ru(t))===-1&&i.push(new Sr(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function m8(n){return jx(qg(n.value))?Ny(jy({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):OU(n)}function OU(n){const e=n.value,t=n.key;if(Ks(e)!=="array")return[new Sr(t,e,`array expected, ${Ks(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new Sr(t,e,"filter array must have at least 1 element")];switch(s=s.concat(PC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ru(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Ru(e[1])==="$type"&&s.push(new Sr(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new Sr(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Ks(e[1]),i!=="string"&&s.push(new Sr(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Ks(e[a]),Ru(e[1])==="$type"?s=s.concat(PC({key:`${t}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new Sr(`${t}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let a=1;a<e.length;a++)s=s.concat(OU({key:`${t}[${a}]`,value:e[a],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=Ks(e[1]),e.length!==2?s.push(new Sr(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new Sr(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function IU(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.value,o=n.objectKey,f=s[`${e}_${n.layerType}`];if(!f)return[];const y=o.match(/^(.*)-transition$/);if(e==="paint"&&y&&f[y[1]]&&f[y[1]].transition)return r({key:t,value:a,valueSpec:s.transition,style:i,styleSpec:s});const x=n.valueSpec||f[o];if(!x)return[new Sr(t,a,`unknown property "${o}"`)];let B;if(Ks(a)==="string"&&S2(x)&&!x.tokens&&(B=/^{([^}]+)}$/.exec(a)))return[new Sr(t,a,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const O=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&O.push(new Sr(t,a,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&u_(qg(a))&&Ru(a.type)==="identity"&&O.push(new Sr(t,a,'"text-font" does not support identity functions'))),O.concat(r({key:n.key,value:a,valueSpec:x,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function kU(n){return IU(n,"paint")}function TU(n){return IU(n,"layout")}function PU(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;!t.type&&!t.ref&&e.push(new Sr(r,t,'either "type" or "ref" is required'));let a=Ru(t.type);const o=Ru(t.ref);if(t.id){const f=Ru(t.id);for(let y=0;y<n.arrayIndex;y++){const x=i.layers[y];Ru(x.id)===f&&e.push(new Sr(r,t.id,`duplicate layer id "${t.id}", previously used at line ${x.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(y=>{y in t&&e.push(new Sr(r,t[y],`"${y}" is prohibited for ref layers`))});let f;i.layers.forEach(y=>{Ru(y.id)===o&&(f=y)}),f?f.ref?e.push(new Sr(r,t.ref,"ref cannot reference another ref layer")):a=Ru(f.type):e.push(new Sr(r,t.ref,`ref layer "${o}" not found`))}else if(a!=="background")if(!t.source)e.push(new Sr(r,t,'missing required property "source"'));else{const f=i.sources&&i.sources[t.source],y=f&&Ru(f.type);f?y==="vector"&&a==="raster"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a raster source`)):y!=="raster-dem"&&a==="hillshade"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):y==="raster"&&a!=="raster"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a vector source`)):y==="vector"&&!t["source-layer"]?e.push(new Sr(r,t,`layer "${t.id}" must specify a "source-layer"`)):y==="raster-dem"&&a!=="hillshade"?e.push(new Sr(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):a==="line"&&t.paint&&t.paint["line-gradient"]&&(y!=="geojson"||!f.lineMetrics)&&e.push(new Sr(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Sr(r,t.source,`source "${t.source}" not found`))}return e=e.concat(Gf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:m8,layout(f){return Gf({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(y){return TU(jy({layerType:a},y))}}})},paint(f){return Gf({layer:t,key:f.key,value:f.value,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*"(y){return kU(jy({layerType:a},y))}}})}}})),e}function Yg(n){const e=n.value,t=n.key,r=Ks(e);return r!=="string"?[new Sr(t,e,`string expected, ${r} found`)]:[]}function MH(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,a=n.style;let o=[];const f=Ks(r);if(r===void 0)return o;if(f!=="object")return o.push(new Sr("source_raster_dem",r,`object expected, ${f} found`)),o;const x=Ru(r.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],O=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const T in r)!x&&B.includes(T)?o.push(new Sr(T,r[T],`In "${t}": "${T}" is only valid when "encoding" is set to "custom". ${O} encoding found`)):s[T]?o=o.concat(n.validateSpec({key:T,value:r[T],valueSpec:s[T],validateSpec:n.validateSpec,style:a,styleSpec:i})):o.push(new Sr(T,r[T],`unknown property "${T}"`));return o}const LI={promoteId:SH};function KU(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new Sr(t,e,'"type" is required')];const a=Ru(e.type);let o;switch(a){case"vector":case"raster":return o=Gf({key:t,value:e,valueSpec:r[`source_${a.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:LI,validateSpec:s}),o;case"raster-dem":return o=MH({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=Gf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:LI}),e.cluster)for(const f in e.clusterProperties){const[y,x]=e.clusterProperties[f],B=typeof y=="string"?[y,["accumulated"],["get",f]]:y;o.push(...Ny({key:`${t}.${f}.map`,value:x,validateSpec:s,expressionContext:"cluster-map"})),o.push(...Ny({key:`${t}.${f}.reduce`,value:B,validateSpec:s,expressionContext:"cluster-reduce"}))}return o;case"video":return Gf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return Gf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new Sr(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return PC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:s,styleSpec:r})}}function SH({key:n,value:e}){if(Ks(e)==="string")return Yg({key:n,value:e});{const t=[];for(const r in e)t.push(...Yg({key:`${n}.${r}`,value:e[r]}));return t}}function DU(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const a=Ks(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Sr("light",e,`object expected, ${a} found`)]),s;for(const o in e){const f=o.match(/^(.*)-transition$/);f&&r[f[1]]&&r[f[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Sr(o,e[o],`unknown property "${o}"`)])}return s}function RU(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=Ks(e);if(e===void 0)return[];if(s!=="object")return[new Sr("sky",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return a}function FU(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const a=Ks(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Sr("terrain",e,`object expected, ${a} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return s}function EH(n){return Yg(n).length===0?[]:Ny(n)}function BH(n){return Yg(n).length===0?[]:Ny(n)}function OH(n){const e=n.key,t=n.value;if(Ks(t)==="array"){if(t.length<1||t.length>4)return[new Sr(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let a=0;a<t.length;a++)s=s.concat(n.validateSpec({key:`${e}[${a}]`,value:t[a],validateSpec:n.validateSpec,valueSpec:i}));return s}else return p8({key:e,value:t,valueSpec:{}})}function IH(n){const e=n.key,t=n.value,r=Ks(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new Sr(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let a=0;a<t.length;a+=2)s=s.concat(PC({key:`${e}[${a}]`,value:t[a],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(f8({key:`${e}[${a+1}]`,value:t[a+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function LU(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const a in t){t[a].id&&i.includes(t[a].id)&&e.push(new Sr(r,t,`all the sprites' ids must be unique, but ${t[a].id} is duplicated`)),i.push(t[a].id),t[a].url&&s.includes(t[a].url)&&e.push(new Sr(r,t,`all the sprites' URLs must be unique, but ${t[a].url} is duplicated`)),s.push(t[a].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Gf({key:`${r}[${a}]`,value:t[a],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Yg({key:r,value:t})}function kH(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=Ks(e);if(e===void 0)return[];if(s!=="object")return[new Sr("projection",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return a}function TH(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=Ks(t);return r==="array"&&!KH(t)&&!PH(t)?[new Sr(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new Sr(e,t,`projection expected, invalid type "${r}" found`)]}function PH(n){return!!["interpolate","step","literal"].includes(n[0])}function KH(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}const UI={"*"(){return[]},array:f8,boolean:xH,number:p8,color:wH,constants:EU,enum:PC,filter:m8,function:BU,layer:PU,object:Gf,source:KU,light:DU,sky:RU,terrain:FU,projection:kH,projectionDefinition:TH,string:Yg,formatted:EH,resolvedImage:BH,padding:OH,variableAnchorOffsetCollection:IH,sprite:LU};function pC(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=pC,t.expression&&u_(Ru(e))?BU(n):t.expression&&c_(qg(e))?Ny(n):t.type&&UI[t.type]?UI[t.type](n):Gf(jy({},n,{valueSpec:t.type?r[t.type]:t}))}function UU(n){const e=n.value,t=n.key,r=Yg(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new Sr(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new Sr(t,e,'"glyphs" url must include a "{range}" token'))),r}function Xf(n,e=Ps){let t=[];return t=t.concat(pC({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:pC,objectElementValidators:{glyphs:UU,"*"(){return[]}}})),n.constants&&(t=t.concat(EU({key:"constants",value:n.constants,style:n,styleSpec:e,validateSpec:pC}))),zU(t)}Xf.source=gm(mm(KU));Xf.sprite=gm(mm(LU));Xf.glyphs=gm(mm(UU));Xf.light=gm(mm(DU));Xf.sky=gm(mm(RU));Xf.terrain=gm(mm(FU));Xf.layer=gm(mm(PU));Xf.filter=gm(mm(m8));Xf.paintProperty=gm(mm(kU));Xf.layoutProperty=gm(mm(TU));function mm(n){return function(e){return n({...e,validateSpec:pC})}}function zU(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function gm(n){return function(...e){return zU(n.apply(this,e))}}const DH=/("(?:[^\\"]|\\.)*")|[:,]/g;function RH(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,f){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const y=JSON.stringify(a,i);if(y===void 0)return y;const x=r-o.length-f;if(y.length<=x){const B=y.replace(DH,(O,T)=>T||`${O} `);if(B.length<=x)return B}if(i!=null&&(a=JSON.parse(y),i=void 0),typeof a=="object"&&a!==null){const B=o+t,O=[];let T=0,F,j;if(Array.isArray(a)){F="[",j="]";const{length:N}=a;for(;T<N;T++)O.push(s(a[T],B,T===N-1?0:1)||"null")}else{F="{",j="}";const N=Object.keys(a),{length:q}=N;for(;T<q;T++){const H=N[T],oe=`${JSON.stringify(H)}: `,ne=s(a[H],B,oe.length+(T===q-1?0:1));ne!==void 0&&O.push(oe+ne)}}if(O.length>0)return[F,t+O.join(`,
${B}`),j].join(`
${o}`)}return y}(n,"",0)}function zI(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function jU(n,e=2){return n=zI(n,Ps.$root),n.layers&&(n.layers=n.layers.map(t=>zI(t,Ps.layer))),RH(n,{indent:e})}function O4(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function jI(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function N6(n,e){return typeof e=="string"&&e[0]==="@"?N6(n,n.constants[e]):e}function FH(n){return Array.isArray(n.stops)}function Tv(n,e,t){n[t]=n[e],delete n[e]}function LH(n){n.version=8,bH(n,i=>{i.type==="video"&&i.url!==void 0&&Tv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),fC(n,i=>{O4(i,s=>{s["symbol-min-distance"]!==void 0&&Tv(s,"symbol-min-distance","symbol-spacing")}),jI(i,s=>{s["background-image"]!==void 0&&Tv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&Tv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&Tv(s,"fill-image","fill-pattern")})}),h8(n,{paint:!0,layout:!0},i=>{const s=N6(n,i.value);FH(s)&&s.stops.forEach(a=>{a[1]=N6(n,a[1])}),i.set(s)}),delete n.constants,fC(n,i=>{O4(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),jI(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(a){return a.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(a=>{a[1]=s(a[1])}),i;throw new Error("unexpected font value")}fC(n,i=>{O4(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function UH(n){const e=[];return fC(n,t=>{t.filter&&(t.filter=hC(t.filter))}),h8(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{c_(r)||(typeof r=="object"&&!Array.isArray(r)?(s(MU(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(SU(r)))}),n}function zH(n){return JSON.parse(jH(JSON.stringify(n)))}function jH(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,a,o]=r.slice(1);return[s,a]=[s,a].map(f=>f.endsWith("%")?f:`${parseFloat(f)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,a,o].filter(Boolean).join(",")})"`}return e})}function NH(n){let e=!1;if(n.version===7&&(n=LH(n),e=!0),n.version===8&&(e=!!UH(n),e=!0),h8(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(zH(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const WH={StyleExpression:wU,StylePropertyFunction:zx,ZoomConstantExpression:U6,ZoomDependentExpression:z6,createExpression:l8,createPropertyExpression:u8,isExpression:c_,isExpressionFilter:jx,isZoomExpression:cH,normalizePropertyExpression:dH},GH={convertFunction:MU,createFunction:a8,isFunction:u_};var Nx=o_();const QH=Al(Nx);var r2={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.1.0/LICENSE.txt
 */var qH=r2.exports,NI;function YH(){return NI||(NI=1,function(n,e){(function(t,r){n.exports=r()})(qH,function(){var t={},r={};function i(a,o,f){if(r[a]=f,a==="index"){var y="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",x={};return r.shared(x),r.index(t,x),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([y],{type:"text/javascript"}))),t}}i("shared",["exports"],function(a){function o(d,u,h,v){return new(h||(h=Promise))(function(M,K){function U(re){try{X(v.next(re))}catch(de){K(de)}}function W(re){try{X(v.throw(re))}catch(de){K(de)}}function X(re){var de;re.done?M(re.value):(de=re.value,de instanceof h?de:new h(function(_e){_e(de)})).then(U,W)}X((v=v.apply(d,u||[])).next())})}function f(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var y,x;function B(){if(x)return y;function d(u,h){this.x=u,this.y=h}return x=1,y=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,h){return this.clone()._rotateAround(u,h)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var h=u.x-this.x,v=u.y-this.y;return h*h+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,h){return Math.atan2(this.x*h-this.y*u,this.x*u+this.y*h)},_matMult:function(u){var h=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=h,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var h=Math.cos(u),v=Math.sin(u),M=v*this.x+h*this.y;return this.x=h*this.x-v*this.y,this.y=M,this},_rotateAround:function(u,h){var v=Math.cos(u),M=Math.sin(u),K=h.y+M*(this.x-h.x)+v*(this.y-h.y);return this.x=h.x+v*(this.x-h.x)-M*(this.y-h.y),this.y=K,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(u){return u instanceof d?u:Array.isArray(u)?new d(u[0],u[1]):u},y}typeof SuppressedError=="function"&&SuppressedError;var O,T,F=f(B()),j=function(){if(T)return O;function d(u,h,v,M){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(M-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=M}return T=1,O=d,d.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,M=0;M<8;M++){var K=this.sampleCurveX(v)-u;if(Math.abs(K)<h)return v;var U=this.sampleCurveDerivativeX(v);if(Math.abs(U)<1e-6)break;v-=K/U}var W=0,X=1;for(v=u,M=0;M<20&&(K=this.sampleCurveX(v),!(Math.abs(K-u)<h));M++)u>K?W=v:X=v,v=.5*(X-W)+W;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},O}(),N=f(j);let q,H;function oe(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function ne(){if(H==null&&(H=!1,oe())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let v=0;v<5*5;v++){const M=4*v;u.fillStyle=`rgb(${M},${M+1},${M+2})`,u.fillRect(v%5,Math.floor(v/5),1,1)}const h=u.getImageData(0,0,5,5).data;for(let v=0;v<5*5*4;v++)if(v%4!=3&&h[v]!==v){H=!0;break}}}return H||!1}var $,te=1e-6,G=typeof Float32Array<"u"?Float32Array:Array;function ie(){var d=new G(9);return G!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function he(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function pe(){var d=new G(3);return G!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function Ee(d,u,h){var v=new G(3);return v[0]=d,v[1]=u,v[2]=h,v}function me(d,u,h){var v=u[0],M=u[1],K=u[2],U=u[3];return d[0]=h[0]*v+h[4]*M+h[8]*K+h[12]*U,d[1]=h[1]*v+h[5]*M+h[9]*K+h[13]*U,d[2]=h[2]*v+h[6]*M+h[10]*K+h[14]*U,d[3]=h[3]*v+h[7]*M+h[11]*K+h[15]*U,d}function Se(){var d=new G(4);return G!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function De(){var d=new G(2);return G!=Float32Array&&(d[0]=0,d[1]=0),d}function be(d,u){var h=new G(2);return h[0]=d,h[1]=u,h}Math.hypot||(Math.hypot=function(){for(var d=0,u=arguments.length;u--;)d+=arguments[u]*arguments[u];return Math.sqrt(d)}),pe(),$=new G(4),G!=Float32Array&&($[0]=0,$[1]=0,$[2]=0,$[3]=0),pe(),Ee(1,0,0),Ee(0,1,0),Se(),Se(),ie(),De();const at=8192;function Ze(d,u,h){return u*(at/(d.tileSize*Math.pow(2,h-d.tileID.overscaledZ)))}function Je(d,u){return(d%u+u)%u}function We(d,u,h){return d*(1-h)+u*h}function Me(d){if(d<=0)return 0;if(d>=1)return 1;const u=d*d,h=u*d;return 4*(d<.5?h:3*(d-u)+h-.75)}function Fe(d,u,h,v){const M=new N(d,u,h,v);return K=>M.solve(K)}const He=Fe(.25,.1,.25,1);function bt(d,u,h){return Math.min(h,Math.max(u,d))}function Yt(d,u,h){const v=h-u,M=((d-u)%v+v)%v+u;return M===u?h:M}function gt(d,...u){for(const h of u)for(const v in h)d[v]=h[v];return d}let Lt=1;function Kt(d,u,h){const v={};for(const M in d)v[M]=u.call(this,d[M],M,d);return v}function Ue(d,u,h){const v={};for(const M in d)u.call(this,d[M],M,d)&&(v[M]=d[M]);return v}function Pe(d){return Array.isArray(d)?d.map(Pe):typeof d=="object"&&d?Kt(d,Pe):d}const Be={};function it(d){Be[d]||(typeof console<"u"&&console.warn(d),Be[d]=!0)}function _t(d,u,h){return(h.y-d.y)*(u.x-d.x)>(u.y-d.y)*(h.x-d.x)}function ft(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let Ut=null;function rn(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _n(d,u,h,v,M){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const K=new VideoFrame(d,{timestamp:0});try{const U=K==null?void 0:K.format;if(!U||!U.startsWith("BGR")&&!U.startsWith("RGB"))throw new Error(`Unrecognized format ${U}`);const W=U.startsWith("BGR"),X=new Uint8ClampedArray(v*M*4);if(yield K.copyTo(X,function(re,de,_e,Re,ze){const Ge=4*Math.max(1,0),et=(Math.max(0,_e)-_e)*Re*4+Ge,At=4*Re,Ct=Math.max(0,de),Nt=Math.max(0,_e);return{rect:{x:Ct,y:Nt,width:Math.min(re.width,de+Re)-Ct,height:Math.min(re.height,_e+ze)-Nt},layout:[{offset:et,stride:At}]}}(d,u,h,v,M)),W)for(let re=0;re<X.length;re+=4){const de=X[re];X[re]=X[re+2],X[re+2]=de}return X}finally{K.close()}})}let qn,tn;function rr(d){return d/Math.PI*180}const Dn="AbortError";function pn(){return new Error(Dn)}const Zn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function dr(d){return Zn.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const vr="global-dispatcher";class Jn extends Error{constructor(u,h,v,M){super(`AJAXError: ${h} (${u}): ${v}`),this.status=u,this.statusText=h,this.url=v,this.body=M}}const Qe=()=>ft(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ce=function(d,u){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const v=dr(d.url);if(v)return v(d,u);if(ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:vr},u)}if(!(/^file:/.test(h=d.url)||/^file:/.test(Qe())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(v,M){return o(this,void 0,void 0,function*(){const K=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:Qe(),signal:M.signal});let U,W;v.type!=="json"||K.headers.has("Accept")||K.headers.set("Accept","application/json");try{U=yield fetch(K)}catch(re){throw new Jn(0,re.message,v.url,new Blob)}if(!U.ok){const re=yield U.blob();throw new Jn(U.status,U.statusText,v.url,re)}W=v.type==="arrayBuffer"||v.type==="image"?U.arrayBuffer():v.type==="json"?U.json():U.text();const X=yield W;if(M.signal.aborted)throw pn();return{data:X,cacheControl:U.headers.get("Cache-Control"),expires:U.headers.get("Expires")}})}(d,u);if(ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:vr},u)}var h;return function(v,M){return new Promise((K,U)=>{var W;const X=new XMLHttpRequest;X.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(X.responseType="arraybuffer");for(const re in v.headers)X.setRequestHeader(re,v.headers[re]);v.type==="json"&&(X.responseType="text",!((W=v.headers)===null||W===void 0)&&W.Accept||X.setRequestHeader("Accept","application/json")),X.withCredentials=v.credentials==="include",X.onerror=()=>{U(new Error(X.statusText))},X.onload=()=>{if(!M.signal.aborted)if((X.status>=200&&X.status<300||X.status===0)&&X.response!==null){let re=X.response;if(v.type==="json")try{re=JSON.parse(X.response)}catch(de){return void U(de)}K({data:re,cacheControl:X.getResponseHeader("Cache-Control"),expires:X.getResponseHeader("Expires")})}else{const re=new Blob([X.response],{type:X.getResponseHeader("Content-Type")});U(new Jn(X.status,X.statusText,v.url,re))}},M.signal.addEventListener("abort",()=>{X.abort(),U(pn())}),X.send(v.body)})}(d,u)};function fe(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const u=new URL(d),h=window.location;return u.protocol===h.protocol&&u.host===h.host}function nt(d,u,h){h[d]&&h[d].indexOf(u)!==-1||(h[d]=h[d]||[],h[d].push(u))}function St(d,u,h){if(h&&h[d]){const v=h[d].indexOf(u);v!==-1&&h[d].splice(v,1)}}class Ht{constructor(u,h={}){gt(this,h),this.type=u}}class sn extends Ht{constructor(u,h={}){super("error",gt({error:u},h))}}class tr{on(u,h){return this._listeners=this._listeners||{},nt(u,h,this._listeners),{unsubscribe:()=>{this.off(u,h)}}}off(u,h){return St(u,h,this._listeners),St(u,h,this._oneTimeListeners),this}once(u,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},nt(u,h,this._oneTimeListeners),this):new Promise(v=>this.once(u,v))}fire(u,h){typeof u=="string"&&(u=new Ht(u,h||{}));const v=u.type;if(this.listens(v)){u.target=this;const M=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const W of M)W.call(this,u);const K=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const W of K)St(v,W,this._oneTimeListeners),W.call(this,u);const U=this._eventedParent;U&&(gt(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),U.fire(u))}else u instanceof sn&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,h){return this._eventedParent=u,this._eventedParentData=h,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const se=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ve(d,u){const h={};for(const v in d)v!=="ref"&&(h[v]=d[v]);return se.forEach(v=>{v in u&&(h[v]=u[v])}),h}function p(d,u){if(Array.isArray(d)){if(!Array.isArray(u)||d.length!==u.length)return!1;for(let h=0;h<d.length;h++)if(!p(d[h],u[h]))return!1;return!0}if(typeof d=="object"&&d!==null&&u!==null){if(typeof u!="object"||Object.keys(d).length!==Object.keys(u).length)return!1;for(const h in d)if(!p(d[h],u[h]))return!1;return!0}return d===u}function Ne(d,u){d.push(u)}function Ye(d,u,h){Ne(h,{command:"addSource",args:[d,u[d]]})}function rt(d,u,h){Ne(u,{command:"removeSource",args:[d]}),h[d]=!0}function ct(d,u,h,v){rt(d,h,v),Ye(d,u,h)}function dt(d,u,h){let v;for(v in d[h])if(Object.prototype.hasOwnProperty.call(d[h],v)&&v!=="data"&&!p(d[h][v],u[h][v]))return!1;for(v in u[h])if(Object.prototype.hasOwnProperty.call(u[h],v)&&v!=="data"&&!p(d[h][v],u[h][v]))return!1;return!0}function qt(d,u,h,v,M,K){d=d||{},u=u||{};for(const U in d)Object.prototype.hasOwnProperty.call(d,U)&&(p(d[U],u[U])||h.push({command:K,args:[v,U,u[U],M]}));for(const U in u)Object.prototype.hasOwnProperty.call(u,U)&&!Object.prototype.hasOwnProperty.call(d,U)&&(p(d[U],u[U])||h.push({command:K,args:[v,U,u[U],M]}))}function Gt(d){return d.id}function jt(d,u){return d[u.id]=u,d}class xt{constructor(u,h,v,M){this.message=(u?`${u}: `:"")+v,M&&(this.identifier=M),h!=null&&h.__line__&&(this.line=h.__line__)}}function Tn(d,...u){for(const h of u)for(const v in h)d[v]=h[v];return d}class On extends Error{constructor(u,h){super(h),this.message=h,this.key=u}}class gr{constructor(u,h=[]){this.parent=u,this.bindings={};for(const[v,M]of h)this.bindings[v]=M}concat(u){return new gr(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Er={kind:"null"},on={kind:"number"},Rn={kind:"string"},er={kind:"boolean"},Xr={kind:"color"},Ur={kind:"projectionDefinition"},Dr={kind:"object"},ur={kind:"value"},go={kind:"collator"},Sa={kind:"formatted"},Yi={kind:"padding"},Ci={kind:"resolvedImage"},oo={kind:"variableAnchorOffsetCollection"};function Ro(d,u){return{kind:"array",itemType:d,N:u}}function Pi(d){if(d.kind==="array"){const u=Pi(d.itemType);return typeof d.N=="number"?`array<${u}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${u}>`}return d.kind}const Na=[Er,on,Rn,er,Xr,Ur,Sa,Dr,Ro(ur),Yi,Ci,oo];function Ea(d,u){if(u.kind==="error")return null;if(d.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Ea(d.itemType,u.itemType))&&(typeof d.N!="number"||d.N===u.N))return null}else{if(d.kind===u.kind)return null;if(d.kind==="value"){for(const h of Na)if(!Ea(h,u))return null}}return`Expected ${Pi(d)} but found ${Pi(u)} instead.`}function rs(d,u){return u.some(h=>h.kind===d.kind)}function aa(d,u){return u.some(h=>h==="null"?d===null:h==="array"?Array.isArray(d):h==="object"?d&&!Array.isArray(d)&&typeof d=="object":h===typeof d)}function cl(d,u){return d.kind==="array"&&u.kind==="array"?d.itemType.kind===u.itemType.kind&&typeof d.N=="number":d.kind===u.kind}const Ao=.96422,Uu=.82521,Zl=4/29,so=6/29,Tr=3*so*so,tl=so*so*so,Os=Math.PI/180,ea=180/Math.PI;function qe(d){return(d%=360)<0&&(d+=360),d}function wt([d,u,h,v]){let M,K;const U=Yn((.2225045*(d=vn(d))+.7168786*(u=vn(u))+.0606169*(h=vn(h)))/1);d===u&&u===h?M=K=U:(M=Yn((.4360747*d+.3850649*u+.1430804*h)/Ao),K=Yn((.0139322*d+.0971045*u+.7141733*h)/Uu));const W=116*U-16;return[W<0?0:W,500*(M-U),200*(U-K),v]}function vn(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Yn(d){return d>tl?Math.pow(d,1/3):d/Tr+Zl}function hn([d,u,h,v]){let M=(d+16)/116,K=isNaN(u)?M:M+u/500,U=isNaN(h)?M:M-h/200;return M=1*Ki(M),K=Ao*Ki(K),U=Uu*Ki(U),[or(3.1338561*K-1.6168667*M-.4906146*U),or(-.9787684*K+1.9161415*M+.033454*U),or(.0719453*K-.2289914*M+1.4052427*U),v]}function or(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function Ki(d){return d>so?d*d*d:Tr*(d-Zl)}function yo(d){return parseInt(d.padEnd(2,d),16)/255}function _s(d,u){return Fs(u?d/100:d,0,1)}function Fs(d,u,h){return Math.min(Math.max(u,d),h)}function OA(d){return!d.some(Number.isNaN)}const ei={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Mi(d,u,h){return d+h*(u-d)}function nl(d,u,h){return d.map((v,M)=>Mi(v,u[M],h))}class Ai{constructor(u,h,v,M=1,K=!0){this.r=u,this.g=h,this.b=v,this.a=M,K||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[u,h,v,M]))}static parse(u){if(u instanceof Ai)return u;if(typeof u!="string")return;const h=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=ei[v];if(M){const[U,W,X]=M;return[U/255,W/255,X/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const U=v.length<6?1:2;let W=1;return[yo(v.slice(W,W+=U)),yo(v.slice(W,W+=U)),yo(v.slice(W,W+=U)),yo(v.slice(W,W+U)||"ff")]}if(v.startsWith("rgb")){const U=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(U){const[W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt]=U,Et=[de||" ",ze||" ",At].join("");if(Et==="  "||Et==="  /"||Et===",,"||Et===",,,"){const Le=[re,Re,et].join(""),lt=Le==="%%%"?100:Le===""?255:0;if(lt){const Ot=[Fs(+X/lt,0,1),Fs(+_e/lt,0,1),Fs(+Ge/lt,0,1),Ct?_s(+Ct,Nt):1];if(OA(Ot))return Ot}}return}}const K=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(K){const[U,W,X,re,de,_e,Re,ze,Ge]=K,et=[X||" ",de||" ",Re].join("");if(et==="  "||et==="  /"||et===",,"||et===",,,"){const At=[+W,Fs(+re,0,100),Fs(+_e,0,100),ze?_s(+ze,Ge):1];if(OA(At))return function([Ct,Nt,Et,Le]){function lt(Ot){const An=(Ot+Ct/30)%12,zn=Nt*Math.min(Et,1-Et);return Et-zn*Math.max(-1,Math.min(An-3,9-An,1))}return Ct=qe(Ct),Nt/=100,Et/=100,[lt(0),lt(8),lt(4),Le]}(At)}}}(u);return h?new Ai(...h,!1):void 0}get rgb(){const{r:u,g:h,b:v,a:M}=this,K=M||1/0;return this.overwriteGetter("rgb",[u/K,h/K,v/K,M])}get hcl(){return this.overwriteGetter("hcl",function(u){const[h,v,M,K]=wt(u),U=Math.sqrt(v*v+M*M);return[Math.round(1e4*U)?qe(Math.atan2(M,v)*ea):NaN,U,h,K]}(this.rgb))}get lab(){return this.overwriteGetter("lab",wt(this.rgb))}overwriteGetter(u,h){return Object.defineProperty(this,u,{value:h}),h}toString(){const[u,h,v,M]=this.rgb;return`rgba(${[u,h,v].map(K=>Math.round(255*K)).join(",")},${M})`}static interpolate(u,h,v,M="rgb"){switch(M){case"rgb":{const[K,U,W,X]=nl(u.rgb,h.rgb,v);return new Ai(K,U,W,X,!1)}case"hcl":{const[K,U,W,X]=u.hcl,[re,de,_e,Re]=h.hcl;let ze,Ge;if(isNaN(K)||isNaN(re))isNaN(K)?isNaN(re)?ze=NaN:(ze=re,W!==1&&W!==0||(Ge=de)):(ze=K,_e!==1&&_e!==0||(Ge=U));else{let Et=re-K;re>K&&Et>180?Et-=360:re<K&&K-re>180&&(Et+=360),ze=K+v*Et}const[et,At,Ct,Nt]=function([Et,Le,lt,Ot]){return Et=isNaN(Et)?0:Et*Os,hn([lt,Math.cos(Et)*Le,Math.sin(Et)*Le,Ot])}([ze,Ge??Mi(U,de,v),Mi(W,_e,v),Mi(X,Re,v)]);return new Ai(et,At,Ct,Nt,!1)}case"lab":{const[K,U,W,X]=hn(nl(u.lab,h.lab,v));return new Ai(K,U,W,X,!1)}}}}Ai.black=new Ai(0,0,0,1),Ai.white=new Ai(1,1,1,1),Ai.transparent=new Ai(0,0,0,0),Ai.red=new Ai(1,0,0,1);class la{constructor(u,h,v){this.sensitivity=u?h?"variant":"case":h?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,h){return this.collator.compare(u,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const rc=["bottom","center","top"];class Ba{constructor(u,h,v,M,K,U){this.text=u,this.image=h,this.scale=v,this.fontStack=M,this.textColor=K,this.verticalAlign=U}}class Rr{constructor(u){this.sections=u}static fromString(u){return new Rr([new Ba(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof Rr?u:Rr.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class $i{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof $i)return u;if(typeof u=="number")return new $i([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const h of u)if(typeof h!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new $i(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){return new $i(nl(u.values,h.values,v))}}class vo{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const yu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mo{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Mo)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let h=0;h<u.length;h+=2){const v=u[h],M=u[h+1];if(typeof v!="string"||!yu.has(v)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new Mo(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){const M=u.values,K=h.values;if(M.length!==K.length)throw new vo(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${h.toString()}`);const U=[];for(let W=0;W<M.length;W+=2){if(M[W]!==K[W])throw new vo(`Cannot interpolate values containing mismatched anchors. from[${W}]: ${M[W]}, to[${W}]: ${K[W]}`);U.push(M[W]);const[X,re]=M[W+1],[de,_e]=K[W+1];U.push([Mi(X,de,v),Mi(re,_e,v)])}return new Mo(U)}}class Gs{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Gs({name:u,available:!1}):null}}class Qs{constructor(u,h,v){this.from=u,this.to=h,this.transition=v}static interpolate(u,h,v){return new Qs(u,h,v)}static parse(u){return u instanceof Qs?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Qs(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Qs(u.from,u.to,u.transition):typeof u=="string"?new Qs(u,u,1):void 0}}function zu(d,u,h,v){return typeof d=="number"&&d>=0&&d<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof h=="number"&&h>=0&&h<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[d,u,h,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[d,u,h,v]:[d,u,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function bl(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Qs||d instanceof Ai||d instanceof la||d instanceof Rr||d instanceof $i||d instanceof Mo||d instanceof Gs)return!0;if(Array.isArray(d)){for(const u of d)if(!bl(u))return!1;return!0}if(typeof d=="object"){for(const u in d)if(!bl(d[u]))return!1;return!0}return!1}function co(d){if(d===null)return Er;if(typeof d=="string")return Rn;if(typeof d=="boolean")return er;if(typeof d=="number")return on;if(d instanceof Ai)return Xr;if(d instanceof Qs)return Ur;if(d instanceof la)return go;if(d instanceof Rr)return Sa;if(d instanceof $i)return Yi;if(d instanceof Mo)return oo;if(d instanceof Gs)return Ci;if(Array.isArray(d)){const u=d.length;let h;for(const v of d){const M=co(v);if(h){if(h===M)continue;h=ur;break}h=M}return Ro(h||ur,u)}return Dr}function Oo(d){const u=typeof d;return d===null?"":u==="string"||u==="number"||u==="boolean"?String(d):d instanceof Ai||d instanceof Qs||d instanceof Rr||d instanceof $i||d instanceof Mo||d instanceof Gs?d.toString():JSON.stringify(d)}class Zo{constructor(u,h){this.type=u,this.value=h}static parse(u,h){if(u.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!bl(u[1]))return h.error("invalid value");const v=u[1];let M=co(v);const K=h.expectedType;return M.kind!=="array"||M.N!==0||!K||K.kind!=="array"||typeof K.N=="number"&&K.N!==0||(M=K),new Zo(M,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Oa={string:Rn,number:on,boolean:er,object:Dr};class Ss{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v,M=1;const K=u[0];if(K==="array"){let W,X;if(u.length>2){const re=u[1];if(typeof re!="string"||!(re in Oa)||re==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);W=Oa[re],M++}else W=ur;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return h.error('The length argument to "array" must be a positive integer literal',2);X=u[2],M++}v=Ro(W,X)}else{if(!Oa[K])throw new Error(`Types doesn't contain name = ${K}`);v=Oa[K]}const U=[];for(;M<u.length;M++){const W=h.parse(u[M],M,ur);if(!W)return null;U.push(W)}return new Ss(v,U)}evaluate(u){for(let h=0;h<this.args.length;h++){const v=this.args[h].evaluate(u);if(!Ea(this.type,co(v)))return v;if(h===this.args.length-1)throw new vo(`Expected value to be of type ${Pi(this.type)}, but found ${Pi(co(v))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Ia={"to-boolean":er,"to-color":Xr,"to-number":on,"to-string":Rn};class ta{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[0];if(!Ia[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&u.length!==2)return h.error("Expected one argument.");const M=Ia[v],K=[];for(let U=1;U<u.length;U++){const W=h.parse(u[U],U,ur);if(!W)return null;K.push(W)}return new ta(M,K)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let h,v;for(const M of this.args){if(h=M.evaluate(u),v=null,h instanceof Ai)return h;if(typeof h=="string"){const K=u.parseColor(h);if(K)return K}else if(Array.isArray(h)&&(v=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:zu(h[0],h[1],h[2],h[3]),!v))return new Ai(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new vo(v||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const v of this.args){h=v.evaluate(u);const M=$i.parse(h);if(M)return M}throw new vo(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const v of this.args){h=v.evaluate(u);const M=Mo.parse(h);if(M)return M}throw new vo(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const v of this.args){if(h=v.evaluate(u),h===null)return 0;const M=Number(h);if(!isNaN(M))return M}throw new vo(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Rr.fromString(Oo(this.args[0].evaluate(u)));case"resolvedImage":return Gs.fromString(Oo(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Oo(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const IA=["Unknown","Point","LineString","Polygon"];class ho{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?IA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let h=this._parseColorCache[u];return h||(h=this._parseColorCache[u]=Ai.parse(u)),h}}class Xl{constructor(u,h,v=[],M,K=new gr,U=[]){this.registry=u,this.path=v,this.key=v.map(W=>`[${W}]`).join(""),this.scope=K,this.errors=U,this.expectedType=M,this._isConstant=h}parse(u,h,v,M,K={}){return h?this.concat(h,v,M)._parse(u,K):this._parse(u,K)}_parse(u,h){function v(M,K,U){return U==="assert"?new Ss(K,[M]):U==="coerce"?new ta(K,[M]):M}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=u[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const K=this.registry[M];if(K){let U=K.parse(u,this);if(!U)return null;if(this.expectedType){const W=this.expectedType,X=U.type;if(W.kind!=="string"&&W.kind!=="number"&&W.kind!=="boolean"&&W.kind!=="object"&&W.kind!=="array"||X.kind!=="value")if(W.kind!=="projectionDefinition"||X.kind!=="string"&&X.kind!=="array")if(W.kind!=="color"&&W.kind!=="formatted"&&W.kind!=="resolvedImage"||X.kind!=="value"&&X.kind!=="string")if(W.kind!=="padding"||X.kind!=="value"&&X.kind!=="number"&&X.kind!=="array")if(W.kind!=="variableAnchorOffsetCollection"||X.kind!=="value"&&X.kind!=="array"){if(this.checkSubtype(W,X))return null}else U=v(U,W,h.typeAnnotation||"coerce");else U=v(U,W,h.typeAnnotation||"coerce");else U=v(U,W,h.typeAnnotation||"coerce");else U=v(U,W,h.typeAnnotation||"coerce");else U=v(U,W,h.typeAnnotation||"assert")}if(!(U instanceof Zo)&&U.type.kind!=="resolvedImage"&&this._isConstant(U)){const W=new ho;try{U=new Zo(U.type,U.evaluate(W))}catch(X){return this.error(X.message),null}}return U}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,h,v){const M=typeof u=="number"?this.path.concat(u):this.path,K=v?this.scope.concat(v):this.scope;return new Xl(this.registry,this._isConstant,M,h||null,K,this.errors)}error(u,...h){const v=`${this.key}${h.map(M=>`[${M}]`).join("")}`;this.errors.push(new On(v,u))}checkSubtype(u,h){const v=Ea(u,h);return v&&this.error(v),v}}class zi{constructor(u,h){this.type=h.type,this.bindings=[].concat(u),this.result=h}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const h of this.bindings)u(h[1]);u(this.result)}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const v=[];for(let K=1;K<u.length-1;K+=2){const U=u[K];if(typeof U!="string")return h.error(`Expected string, but found ${typeof U} instead.`,K);if(/[^a-zA-Z0-9_]/.test(U))return h.error("Variable names must contain only alphanumeric characters or '_'.",K);const W=h.parse(u[K+1],K+1);if(!W)return null;v.push([U,W])}const M=h.parse(u[u.length-1],u.length-1,h.expectedType,v);return M?new zi(v,M):null}outputDefined(){return this.result.outputDefined()}}class Yr{constructor(u,h){this.type=h.type,this.name=u,this.boundExpression=h}static parse(u,h){if(u.length!==2||typeof u[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const v=u[1];return h.scope.has(v)?new Yr(v,h.scope.get(v)):h.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Jl{constructor(u,h,v){this.type=u,this.index=h,this.input=v}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,on),M=h.parse(u[2],2,Ro(h.expectedType||ur));return v&&M?new Jl(M.type.itemType,v,M):null}evaluate(u){const h=this.index.evaluate(u),v=this.input.evaluate(u);if(h<0)throw new vo(`Array index out of bounds: ${h} < 0.`);if(h>=v.length)throw new vo(`Array index out of bounds: ${h} > ${v.length-1}.`);if(h!==Math.floor(h))throw new vo(`Array index must be an integer, but found ${h} instead.`);return v[h]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Vi{constructor(u,h){this.type=er,this.needle=u,this.haystack=h}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,ur),M=h.parse(u[2],2,ur);return v&&M?rs(v.type,[er,Rn,on,Er,ur])?new Vi(v,M):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(v.type)} instead`):null}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!v)return!1;if(!aa(h,["boolean","string","number","null"]))throw new vo(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(co(h))} instead.`);if(!aa(v,["string","array"]))throw new vo(`Expected second argument to be of type array or string, but found ${Pi(co(v))} instead.`);return v.indexOf(h)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class ao{constructor(u,h,v){this.type=on,this.needle=u,this.haystack=h,this.fromIndex=v}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,ur),M=h.parse(u[2],2,ur);if(!v||!M)return null;if(!rs(v.type,[er,Rn,on,Er,ur]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(v.type)} instead`);if(u.length===4){const K=h.parse(u[3],3,on);return K?new ao(v,M,K):null}return new ao(v,M)}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!aa(h,["boolean","string","number","null"]))throw new vo(`Expected first argument to be of type boolean, string, number or null, but found ${Pi(co(h))} instead.`);let M;if(this.fromIndex&&(M=this.fromIndex.evaluate(u)),aa(v,["string"])){const K=v.indexOf(h,M);return K===-1?-1:[...v.slice(0,K)].length}if(aa(v,["array"]))return v.indexOf(h,M);throw new vo(`Expected second argument to be of type array or string, but found ${Pi(co(v))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class Di{constructor(u,h,v,M,K,U){this.inputType=u,this.type=h,this.input=v,this.cases=M,this.outputs=K,this.otherwise=U}static parse(u,h){if(u.length<5)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return h.error("Expected an even number of arguments.");let v,M;h.expectedType&&h.expectedType.kind!=="value"&&(M=h.expectedType);const K={},U=[];for(let re=2;re<u.length-1;re+=2){let de=u[re];const _e=u[re+1];Array.isArray(de)||(de=[de]);const Re=h.concat(re);if(de.length===0)return Re.error("Expected at least one branch label.");for(const Ge of de){if(typeof Ge!="number"&&typeof Ge!="string")return Re.error("Branch labels must be numbers or strings.");if(typeof Ge=="number"&&Math.abs(Ge)>Number.MAX_SAFE_INTEGER)return Re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ge=="number"&&Math.floor(Ge)!==Ge)return Re.error("Numeric branch labels must be integer values.");if(v){if(Re.checkSubtype(v,co(Ge)))return null}else v=co(Ge);if(K[String(Ge)]!==void 0)return Re.error("Branch labels must be unique.");K[String(Ge)]=U.length}const ze=h.parse(_e,re,M);if(!ze)return null;M=M||ze.type,U.push(ze)}const W=h.parse(u[1],1,ur);if(!W)return null;const X=h.parse(u[u.length-1],u.length-1,M);return X?W.type.kind!=="value"&&h.concat(1).checkSubtype(v,W.type)?null:new Di(v,M,W,K,U,X):null}evaluate(u){const h=this.input.evaluate(u);return(co(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class J{constructor(u,h,v){this.type=u,this.branches=h,this.otherwise=v}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return h.error("Expected an odd number of arguments.");let v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const M=[];for(let U=1;U<u.length-1;U+=2){const W=h.parse(u[U],U,er);if(!W)return null;const X=h.parse(u[U+1],U+1,v);if(!X)return null;M.push([W,X]),v=v||X.type}const K=h.parse(u[u.length-1],u.length-1,v);if(!K)return null;if(!v)throw new Error("Can't infer output type");return new J(v,M,K)}evaluate(u){for(const[h,v]of this.branches)if(h.evaluate(u))return v.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[h,v]of this.branches)u(h),u(v);u(this.otherwise)}outputDefined(){return this.branches.every(([u,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Ie{constructor(u,h,v,M){this.type=u,this.input=h,this.beginIndex=v,this.endIndex=M}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,ur),M=h.parse(u[2],2,on);if(!v||!M)return null;if(!rs(v.type,[Ro(ur),Rn,ur]))return h.error(`Expected first argument to be of type array or string, but found ${Pi(v.type)} instead`);if(u.length===4){const K=h.parse(u[3],3,on);return K?new Ie(v.type,v,M,K):null}return new Ie(v.type,v,M)}evaluate(u){const h=this.input.evaluate(u),v=this.beginIndex.evaluate(u);let M;if(this.endIndex&&(M=this.endIndex.evaluate(u)),aa(h,["string"]))return[...h].slice(v,M).join("");if(aa(h,["array"]))return h.slice(v,M);throw new vo(`Expected first argument to be of type array or string, but found ${Pi(co(h))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function st(d,u){const h=d.length-1;let v,M,K=0,U=h,W=0;for(;K<=U;)if(W=Math.floor((K+U)/2),v=d[W],M=d[W+1],v<=u){if(W===h||u<M)return W;K=W+1}else{if(!(v>u))throw new vo("Input is not a number.");U=W-1}return 0}class $t{constructor(u,h,v){this.type=u,this.input=h,this.labels=[],this.outputs=[];for(const[M,K]of v)this.labels.push(M),this.outputs.push(K)}static parse(u,h){if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");const v=h.parse(u[1],1,on);if(!v)return null;const M=[];let K=null;h.expectedType&&h.expectedType.kind!=="value"&&(K=h.expectedType);for(let U=1;U<u.length;U+=2){const W=U===1?-1/0:u[U],X=u[U+1],re=U,de=U+1;if(typeof W!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(M.length&&M[M.length-1][0]>=W)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const _e=h.parse(X,de,K);if(!_e)return null;K=K||_e.type,M.push([W,_e])}return new $t(K,v,M)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const M=this.input.evaluate(u);if(M<=h[0])return v[0].evaluate(u);const K=h.length;return M>=h[K-1]?v[K-1].evaluate(u):v[st(h,M)].evaluate(u)}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Kr(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var $n,ti,ci=function(){if(ti)return $n;function d(u,h,v,M){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(M-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=M}return ti=1,$n=d,d.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,M=0;M<8;M++){var K=this.sampleCurveX(v)-u;if(Math.abs(K)<h)return v;var U=this.sampleCurveDerivativeX(v);if(Math.abs(U)<1e-6)break;v-=K/U}var W=0,X=1;for(v=u,M=0;M<20&&(K=this.sampleCurveX(v),!(Math.abs(K-u)<h));M++)u>K?W=v:X=v,v=.5*(X-W)+W;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},$n}(),Br=Kr(ci);class xr{constructor(u,h,v,M,K){this.type=u,this.operator=h,this.interpolation=v,this.input=M,this.labels=[],this.outputs=[];for(const[U,W]of K)this.labels.push(U),this.outputs.push(W)}static interpolationFactor(u,h,v,M){let K=0;if(u.name==="exponential")K=ji(h,u.base,v,M);else if(u.name==="linear")K=ji(h,1,v,M);else if(u.name==="cubic-bezier"){const U=u.controlPoints;K=new Br(U[0],U[1],U[2],U[3]).solve(ji(h,1,v,M))}return K}static parse(u,h){let[v,M,K,...U]=u;if(!Array.isArray(M)||M.length===0)return h.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const re=M[1];if(typeof re!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:re}}else{if(M[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const re=M.slice(1);if(re.length!==4||re.some(de=>typeof de!="number"||de<0||de>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:re}}}if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(K=h.parse(K,2,on),!K)return null;const W=[];let X=null;v==="interpolate-hcl"||v==="interpolate-lab"?X=Xr:h.expectedType&&h.expectedType.kind!=="value"&&(X=h.expectedType);for(let re=0;re<U.length;re+=2){const de=U[re],_e=U[re+1],Re=re+3,ze=re+4;if(typeof de!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Re);if(W.length&&W[W.length-1][0]>=de)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Re);const Ge=h.parse(_e,ze,X);if(!Ge)return null;X=X||Ge.type,W.push([de,Ge])}return cl(X,on)||cl(X,Ur)||cl(X,Xr)||cl(X,Yi)||cl(X,oo)||cl(X,Ro(on))?new xr(X,v,M,K,W):h.error(`Type ${Pi(X)} is not interpolatable.`)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const M=this.input.evaluate(u);if(M<=h[0])return v[0].evaluate(u);const K=h.length;if(M>=h[K-1])return v[K-1].evaluate(u);const U=st(h,M),W=xr.interpolationFactor(this.interpolation,M,h[U],h[U+1]),X=v[U].evaluate(u),re=v[U+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Mi(X,re,W);case"color":return Ai.interpolate(X,re,W);case"padding":return $i.interpolate(X,re,W);case"variableAnchorOffsetCollection":return Mo.interpolate(X,re,W);case"array":return nl(X,re,W);case"projectionDefinition":return Qs.interpolate(X,re,W)}case"interpolate-hcl":return Ai.interpolate(X,re,W,"hcl");case"interpolate-lab":return Ai.interpolate(X,re,W,"lab")}}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function ji(d,u,h,v){const M=v-h,K=d-h;return M===0?0:u===1?K/M:(Math.pow(u,K)-1)/(Math.pow(u,M)-1)}const Xi={color:Ai.interpolate,number:Mi,padding:$i.interpolate,variableAnchorOffsetCollection:Mo.interpolate,array:nl};class Ei{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v=null;const M=h.expectedType;M&&M.kind!=="value"&&(v=M);const K=[];for(const W of u.slice(1)){const X=h.parse(W,1+K.length,v,void 0,{typeAnnotation:"omit"});if(!X)return null;v=v||X.type,K.push(X)}if(!v)throw new Error("No output type");const U=M&&K.some(W=>Ea(M,W.type));return new Ei(U?ur:v,K)}evaluate(u){let h,v=null,M=0;for(const K of this.args)if(M++,v=K.evaluate(u),v&&v instanceof Gs&&!v.available&&(h||(h=v.name),v=null,M===this.args.length&&(v=h)),v!==null)break;return v}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function Wr(d,u){return d==="=="||d==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function So(d,u,h,v){return v.compare(u,h)===0}function Ri(d,u,h){const v=d!=="=="&&d!=="!=";return class NU{constructor(K,U,W){this.type=er,this.lhs=K,this.rhs=U,this.collator=W,this.hasUntypedArgument=K.type.kind==="value"||U.type.kind==="value"}static parse(K,U){if(K.length!==3&&K.length!==4)return U.error("Expected two or three arguments.");const W=K[0];let X=U.parse(K[1],1,ur);if(!X)return null;if(!Wr(W,X.type))return U.concat(1).error(`"${W}" comparisons are not supported for type '${Pi(X.type)}'.`);let re=U.parse(K[2],2,ur);if(!re)return null;if(!Wr(W,re.type))return U.concat(2).error(`"${W}" comparisons are not supported for type '${Pi(re.type)}'.`);if(X.type.kind!==re.type.kind&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error(`Cannot compare types '${Pi(X.type)}' and '${Pi(re.type)}'.`);v&&(X.type.kind==="value"&&re.type.kind!=="value"?X=new Ss(re.type,[X]):X.type.kind!=="value"&&re.type.kind==="value"&&(re=new Ss(X.type,[re])));let de=null;if(K.length===4){if(X.type.kind!=="string"&&re.type.kind!=="string"&&X.type.kind!=="value"&&re.type.kind!=="value")return U.error("Cannot use collator to compare non-string types.");if(de=U.parse(K[3],3,go),!de)return null}return new NU(X,re,de)}evaluate(K){const U=this.lhs.evaluate(K),W=this.rhs.evaluate(K);if(v&&this.hasUntypedArgument){const X=co(U),re=co(W);if(X.kind!==re.kind||X.kind!=="string"&&X.kind!=="number")throw new vo(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${X.kind}, ${re.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const X=co(U),re=co(W);if(X.kind!=="string"||re.kind!=="string")return u(K,U,W)}return this.collator?h(K,U,W,this.collator.evaluate(K)):u(K,U,W)}eachChild(K){K(this.lhs),K(this.rhs),this.collator&&K(this.collator)}outputDefined(){return!0}}}const ds=Ri("==",function(d,u,h){return u===h},So),ma=Ri("!=",function(d,u,h){return u!==h},function(d,u,h,v){return!So(0,u,h,v)}),Wa=Ri("<",function(d,u,h){return u<h},function(d,u,h,v){return v.compare(u,h)<0}),vu=Ri(">",function(d,u,h){return u>h},function(d,u,h,v){return v.compare(u,h)>0}),qs=Ri("<=",function(d,u,h){return u<=h},function(d,u,h,v){return v.compare(u,h)<=0}),$d=Ri(">=",function(d,u,h){return u>=h},function(d,u,h,v){return v.compare(u,h)>=0});class ga{constructor(u,h,v){this.type=go,this.locale=v,this.caseSensitive=u,this.diacriticSensitive=h}static parse(u,h){if(u.length!==2)return h.error("Expected one argument.");const v=u[1];if(typeof v!="object"||Array.isArray(v))return h.error("Collator options argument must be an object.");const M=h.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,er);if(!M)return null;const K=h.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,er);if(!K)return null;let U=null;return v.locale&&(U=h.parse(v.locale,1,Rn),!U)?null:new ga(M,K,U)}evaluate(u){return new la(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class xl{constructor(u,h,v,M,K){this.type=Rn,this.number=u,this.locale=h,this.currency=v,this.minFractionDigits=M,this.maxFractionDigits=K}static parse(u,h){if(u.length!==3)return h.error("Expected two arguments.");const v=h.parse(u[1],1,on);if(!v)return null;const M=u[2];if(typeof M!="object"||Array.isArray(M))return h.error("NumberFormat options argument must be an object.");let K=null;if(M.locale&&(K=h.parse(M.locale,1,Rn),!K))return null;let U=null;if(M.currency&&(U=h.parse(M.currency,1,Rn),!U))return null;let W=null;if(M["min-fraction-digits"]&&(W=h.parse(M["min-fraction-digits"],1,on),!W))return null;let X=null;return M["max-fraction-digits"]&&(X=h.parse(M["max-fraction-digits"],1,on),!X)?null:new xl(v,K,U,W,X)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Vc{constructor(u){this.type=Sa,this.sections=u}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[1];if(!Array.isArray(v)&&typeof v=="object")return h.error("First argument must be an image or text section.");const M=[];let K=!1;for(let U=1;U<=u.length-1;++U){const W=u[U];if(K&&typeof W=="object"&&!Array.isArray(W)){K=!1;let X=null;if(W["font-scale"]&&(X=h.parse(W["font-scale"],1,on),!X))return null;let re=null;if(W["text-font"]&&(re=h.parse(W["text-font"],1,Ro(Rn)),!re))return null;let de=null;if(W["text-color"]&&(de=h.parse(W["text-color"],1,Xr),!de))return null;let _e=null;if(W["vertical-align"]){if(typeof W["vertical-align"]=="string"&&!rc.includes(W["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${W["vertical-align"]}' instead.`);if(_e=h.parse(W["vertical-align"],1,Rn),!_e)return null}const Re=M[M.length-1];Re.scale=X,Re.font=re,Re.textColor=de,Re.verticalAlign=_e}else{const X=h.parse(u[U],1,ur);if(!X)return null;const re=X.type.kind;if(re!=="string"&&re!=="value"&&re!=="null"&&re!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");K=!0,M.push({content:X,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Vc(M)}evaluate(u){return new Rr(this.sections.map(h=>{const v=h.content.evaluate(u);return co(v)===Ci?new Ba("",v,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(u):null):new Ba(Oo(v),null,h.scale?h.scale.evaluate(u):null,h.font?h.font.evaluate(u).join(","):null,h.textColor?h.textColor.evaluate(u):null,h.verticalAlign?h.verticalAlign.evaluate(u):null)}))}eachChild(u){for(const h of this.sections)u(h.content),h.scale&&u(h.scale),h.font&&u(h.font),h.textColor&&u(h.textColor),h.verticalAlign&&u(h.verticalAlign)}outputDefined(){return!1}}class ju{constructor(u){this.type=Ci,this.input=u}static parse(u,h){if(u.length!==2)return h.error("Expected two arguments.");const v=h.parse(u[1],1,Rn);return v?new ju(v):h.error("No image name provided.")}evaluate(u){const h=this.input.evaluate(u),v=Gs.fromString(h);return v&&u.availableImages&&(v.available=u.availableImages.indexOf(h)>-1),v}eachChild(u){u(this.input)}outputDefined(){return!1}}class Vd{constructor(u){this.type=on,this.input=u}static parse(u,h){if(u.length!==2)return h.error(`Expected 1 argument, but found ${u.length-1} instead.`);const v=h.parse(u[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Pi(v.type)} instead.`):new Vd(v):null}evaluate(u){const h=this.input.evaluate(u);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new vo(`Expected value to be of type string or array, but found ${Pi(co(h))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Cu=8192;function Ls(d,u){const h=(180+d[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,M=Math.pow(2,u.z);return[Math.round(h*M*Cu),Math.round(v*M*Cu)]}function kA(d,u){const h=Math.pow(2,u.z);return[(M=(d[0]/Cu+u.x)/h,360*M-180),(v=(d[1]/Cu+u.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,M}function gd(d,u){d[0]=Math.min(d[0],u[0]),d[1]=Math.min(d[1],u[1]),d[2]=Math.max(d[2],u[0]),d[3]=Math.max(d[3],u[1])}function Hd(d,u){return!(d[0]<=u[0]||d[2]>=u[2]||d[1]<=u[1]||d[3]>=u[3])}function Bc(d,u,h){const v=d[0]-u[0],M=d[1]-u[1],K=d[0]-h[0],U=d[1]-h[1];return v*U-K*M==0&&v*K<=0&&M*U<=0}function Oc(d,u,h,v){return(M=[v[0]-h[0],v[1]-h[1]])[0]*(K=[u[0]-d[0],u[1]-d[1]])[1]-M[1]*K[0]!=0&&!(!cf(d,u,h,v)||!cf(h,v,d,u));var M,K}function ep(d,u,h){for(const v of h)for(let M=0;M<v.length-1;++M)if(Oc(d,u,v[M],v[M+1]))return!0;return!1}function yd(d,u,h=!1){let v=!1;for(const W of u)for(let X=0;X<W.length-1;X++){if(Bc(d,W[X],W[X+1]))return h;(K=W[X])[1]>(M=d)[1]!=(U=W[X+1])[1]>M[1]&&M[0]<(U[0]-K[0])*(M[1]-K[1])/(U[1]-K[1])+K[0]&&(v=!v)}var M,K,U;return v}function Kp(d,u){for(const h of u)if(yd(d,h))return!0;return!1}function ic(d,u){for(const h of d)if(!yd(h,u))return!1;for(let h=0;h<d.length-1;++h)if(ep(d[h],d[h+1],u))return!1;return!0}function na(d,u){for(const h of u)if(ic(d,h))return!0;return!1}function cf(d,u,h,v){const M=v[0]-h[0],K=v[1]-h[1],U=(d[0]-h[0])*K-M*(d[1]-h[1]),W=(u[0]-h[0])*K-M*(u[1]-h[1]);return U>0&&W<0||U<0&&W>0}function xh(d,u,h){const v=[];for(let M=0;M<d.length;M++){const K=[];for(let U=0;U<d[M].length;U++){const W=Ls(d[M][U],h);gd(u,W),K.push(W)}v.push(K)}return v}function vd(d,u,h){const v=[];for(let M=0;M<d.length;M++){const K=xh(d[M],u,h);v.push(K)}return v}function df(d,u,h,v){if(d[0]<h[0]||d[0]>h[2]){const M=.5*v;let K=d[0]-h[0]>M?-v:h[0]-d[0]>M?v:0;K===0&&(K=d[0]-h[2]>M?-v:h[2]-d[0]>M?v:0),d[0]+=K}gd(u,d)}function Cd(d,u,h,v){const M=Math.pow(2,v.z)*Cu,K=[v.x*Cu,v.y*Cu],U=[];for(const W of d)for(const X of W){const re=[X.x+K[0],X.y+K[1]];df(re,u,h,M),U.push(re)}return U}function hf(d,u,h,v){const M=Math.pow(2,v.z)*Cu,K=[v.x*Cu,v.y*Cu],U=[];for(const X of d){const re=[];for(const de of X){const _e=[de.x+K[0],de.y+K[1]];gd(u,_e),re.push(_e)}U.push(re)}if(u[2]-u[0]<=M/2){(W=u)[0]=W[1]=1/0,W[2]=W[3]=-1/0;for(const X of U)for(const re of X)df(re,u,h,M)}var W;return U}class oc{constructor(u,h){this.type=er,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(bl(u[1])){const v=u[1];if(v.type==="FeatureCollection"){const M=[];for(const K of v.features){const{type:U,coordinates:W}=K.geometry;U==="Polygon"&&M.push(W),U==="MultiPolygon"&&M.push(...W)}if(M.length)return new oc(v,{type:"MultiPolygon",coordinates:M})}else if(v.type==="Feature"){const M=v.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new oc(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new oc(v,v)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const M=[1/0,1/0,-1/0,-1/0],K=[1/0,1/0,-1/0,-1/0],U=h.canonicalID();if(v.type==="Polygon"){const W=xh(v.coordinates,K,U),X=Cd(h.geometry(),M,K,U);if(!Hd(M,K))return!1;for(const re of X)if(!yd(re,W))return!1}if(v.type==="MultiPolygon"){const W=vd(v.coordinates,K,U),X=Cd(h.geometry(),M,K,U);if(!Hd(M,K))return!1;for(const re of X)if(!Kp(re,W))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const M=[1/0,1/0,-1/0,-1/0],K=[1/0,1/0,-1/0,-1/0],U=h.canonicalID();if(v.type==="Polygon"){const W=xh(v.coordinates,K,U),X=hf(h.geometry(),M,K,U);if(!Hd(M,K))return!1;for(const re of X)if(!ic(re,W))return!1}if(v.type==="MultiPolygon"){const W=vd(v.coordinates,K,U),X=hf(h.geometry(),M,K,U);if(!Hd(M,K))return!1;for(const re of X)if(!na(re,W))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let wh=class{constructor(d=[],u=(h,v)=>h<v?-1:h>v?1:0){if(this.data=d,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:u,compare:h}=this,v=u[d];for(;d>0;){const M=d-1>>1,K=u[M];if(h(v,K)>=0)break;u[d]=K,d=M}u[d]=v}_down(d){const{data:u,compare:h}=this,v=this.length>>1,M=u[d];for(;d<v;){let K=1+(d<<1);const U=K+1;if(U<this.length&&h(u[U],u[K])<0&&(K=U),h(u[K],M)>=0)break;u[d]=u[K],d=K}u[d]=M}};function ff(d,u,h=0,v=d.length-1,M=Sh){for(;v>h;){if(v-h>600){const X=v-h+1,re=u-h+1,de=Math.log(X),_e=.5*Math.exp(2*de/3),Re=.5*Math.sqrt(de*_e*(X-_e)/X)*(re-X/2<0?-1:1);ff(d,u,Math.max(h,Math.floor(u-re*_e/X+Re)),Math.min(v,Math.floor(u+(X-re)*_e/X+Re)),M)}const K=d[u];let U=h,W=v;for(Mh(d,h,u),M(d[v],K)>0&&Mh(d,h,v);U<W;){for(Mh(d,U,W),U++,W--;M(d[U],K)<0;)U++;for(;M(d[W],K)>0;)W--}M(d[h],K)===0?Mh(d,h,W):(W++,Mh(d,W,v)),W<=u&&(h=W+1),u<=W&&(v=W-1)}}function Mh(d,u,h){const v=d[u];d[u]=d[h],d[h]=v}function Sh(d,u){return d<u?-1:d>u?1:0}function wl(d,u){if(d.length<=1)return[d];const h=[];let v,M;for(const K of d){const U=Nu(K);U!==0&&(K.area=Math.abs(U),M===void 0&&(M=U<0),M===U<0?(v&&h.push(v),v=[K]):v.push(K))}if(v&&h.push(v),u>1)for(let K=0;K<h.length;K++)h[K].length<=u||(ff(h[K],u,1,h[K].length-1,Eh),h[K]=h[K].slice(0,u));return h}function Eh(d,u){return u.area-d.area}function Nu(d){let u=0;for(let h,v,M=0,K=d.length,U=K-1;M<K;U=M++)h=d[M],v=d[U],u+=(v.x-h.x)*(h.y+v.y);return u}const AA=1/298.257223563,Hc=AA*(2-AA),Bh=Math.PI/180;class Oh{constructor(u){const h=6378.137*Bh*1e3,v=Math.cos(u*Bh),M=1/(1-Hc*(1-v*v)),K=Math.sqrt(M);this.kx=h*K*v,this.ky=h*K*M*(1-Hc)}distance(u,h){const v=this.wrap(u[0]-h[0])*this.kx,M=(u[1]-h[1])*this.ky;return Math.sqrt(v*v+M*M)}pointOnLine(u,h){let v,M,K,U,W=1/0;for(let X=0;X<u.length-1;X++){let re=u[X][0],de=u[X][1],_e=this.wrap(u[X+1][0]-re)*this.kx,Re=(u[X+1][1]-de)*this.ky,ze=0;_e===0&&Re===0||(ze=(this.wrap(h[0]-re)*this.kx*_e+(h[1]-de)*this.ky*Re)/(_e*_e+Re*Re),ze>1?(re=u[X+1][0],de=u[X+1][1]):ze>0&&(re+=_e/this.kx*ze,de+=Re/this.ky*ze)),_e=this.wrap(h[0]-re)*this.kx,Re=(h[1]-de)*this.ky;const Ge=_e*_e+Re*Re;Ge<W&&(W=Ge,v=re,M=de,K=X,U=ze)}return{point:[v,M],index:K,t:Math.max(0,Math.min(1,U))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Wu(d,u){return u[0]-d[0]}function cA(d){return d[1]-d[0]+1}function Ul(d,u){return d[1]>=d[0]&&d[1]<u}function Zc(d,u){if(d[0]>d[1])return[null,null];const h=cA(d);if(u){if(h===2)return[d,null];const M=Math.floor(h/2);return[[d[0],d[0]+M],[d[0]+M,d[1]]]}if(h===1)return[d,null];const v=Math.floor(h/2)-1;return[[d[0],d[0]+v],[d[0]+v+1,d[1]]]}function pf(d,u){if(!Ul(u,d.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let v=u[0];v<=u[1];++v)gd(h,d[v]);return h}function mf(d){const u=[1/0,1/0,-1/0,-1/0];for(const h of d)for(const v of h)gd(u,v);return u}function Zd(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function _d(d,u,h){if(!Zd(d)||!Zd(u))return NaN;let v=0,M=0;return d[2]<u[0]&&(v=u[0]-d[2]),d[0]>u[2]&&(v=d[0]-u[2]),d[1]>u[3]&&(M=d[1]-u[3]),d[3]<u[1]&&(M=u[1]-d[3]),h.distance([0,0],[v,M])}function ua(d,u,h){const v=h.pointOnLine(u,d);return h.distance(d,v.point)}function rl(d,u,h,v,M){const K=Math.min(ua(d,[h,v],M),ua(u,[h,v],M)),U=Math.min(ua(h,[d,u],M),ua(v,[d,u],M));return Math.min(K,U)}function Xo(d,u,h,v,M){if(!Ul(u,d.length)||!Ul(v,h.length))return 1/0;let K=1/0;for(let U=u[0];U<u[1];++U){const W=d[U],X=d[U+1];for(let re=v[0];re<v[1];++re){const de=h[re],_e=h[re+1];if(Oc(W,X,de,_e))return 0;K=Math.min(K,rl(W,X,de,_e,M))}}return K}function Ih(d,u,h,v,M){if(!Ul(u,d.length)||!Ul(v,h.length))return NaN;let K=1/0;for(let U=u[0];U<=u[1];++U)for(let W=v[0];W<=v[1];++W)if(K=Math.min(K,M.distance(d[U],h[W])),K===0)return K;return K}function vm(d,u,h){if(yd(d,u,!0))return 0;let v=1/0;for(const M of u){const K=M[0],U=M[M.length-1];if(K!==U&&(v=Math.min(v,ua(d,[U,K],h)),v===0))return v;const W=h.pointOnLine(M,d);if(v=Math.min(v,h.distance(d,W.point)),v===0)return v}return v}function bd(d,u,h,v){if(!Ul(u,d.length))return NaN;for(let K=u[0];K<=u[1];++K)if(yd(d[K],h,!0))return 0;let M=1/0;for(let K=u[0];K<u[1];++K){const U=d[K],W=d[K+1];for(const X of h)for(let re=0,de=X.length,_e=de-1;re<de;_e=re++){const Re=X[_e],ze=X[re];if(Oc(U,W,Re,ze))return 0;M=Math.min(M,rl(U,W,Re,ze,v))}}return M}function _u(d,u){for(const h of d)for(const v of h)if(yd(v,u,!0))return!0;return!1}function kh(d,u,h,v=1/0){const M=mf(d),K=mf(u);if(v!==1/0&&_d(M,K,h)>=v)return v;if(Hd(M,K)){if(_u(d,u))return 0}else if(_u(u,d))return 0;let U=1/0;for(const W of d)for(let X=0,re=W.length,de=re-1;X<re;de=X++){const _e=W[de],Re=W[X];for(const ze of u)for(let Ge=0,et=ze.length,At=et-1;Ge<et;At=Ge++){const Ct=ze[At],Nt=ze[Ge];if(Oc(_e,Re,Ct,Nt))return 0;U=Math.min(U,rl(_e,Re,Ct,Nt,h))}}return U}function gf(d,u,h,v,M,K){if(!K)return;const U=_d(pf(v,K),M,h);U<u&&d.push([U,K,[0,0]])}function Ic(d,u,h,v,M,K,U){if(!K||!U)return;const W=_d(pf(v,K),pf(M,U),h);W<u&&d.push([W,K,U])}function Xd(d,u,h,v,M=1/0){let K=Math.min(v.distance(d[0],h[0][0]),M);if(K===0)return K;const U=new wh([[0,[0,d.length-1],[0,0]]],Wu),W=mf(h);for(;U.length>0;){const X=U.pop();if(X[0]>=K)continue;const re=X[1],de=u?50:100;if(cA(re)<=de){if(!Ul(re,d.length))return NaN;if(u){const _e=bd(d,re,h,v);if(isNaN(_e)||_e===0)return _e;K=Math.min(K,_e)}else for(let _e=re[0];_e<=re[1];++_e){const Re=vm(d[_e],h,v);if(K=Math.min(K,Re),K===0)return 0}}else{const _e=Zc(re,u);gf(U,K,v,d,W,_e[0]),gf(U,K,v,d,W,_e[1])}}return K}function Th(d,u,h,v,M,K=1/0){let U=Math.min(K,M.distance(d[0],h[0]));if(U===0)return U;const W=new wh([[0,[0,d.length-1],[0,h.length-1]]],Wu);for(;W.length>0;){const X=W.pop();if(X[0]>=U)continue;const re=X[1],de=X[2],_e=u?50:100,Re=v?50:100;if(cA(re)<=_e&&cA(de)<=Re){if(!Ul(re,d.length)&&Ul(de,h.length))return NaN;let ze;if(u&&v)ze=Xo(d,re,h,de,M),U=Math.min(U,ze);else if(u&&!v){const Ge=d.slice(re[0],re[1]+1);for(let et=de[0];et<=de[1];++et)if(ze=ua(h[et],Ge,M),U=Math.min(U,ze),U===0)return U}else if(!u&&v){const Ge=h.slice(de[0],de[1]+1);for(let et=re[0];et<=re[1];++et)if(ze=ua(d[et],Ge,M),U=Math.min(U,ze),U===0)return U}else ze=Ih(d,re,h,de,M),U=Math.min(U,ze)}else{const ze=Zc(re,u),Ge=Zc(de,v);Ic(W,U,M,d,h,ze[0],Ge[0]),Ic(W,U,M,d,h,ze[0],Ge[1]),Ic(W,U,M,d,h,ze[1],Ge[0]),Ic(W,U,M,d,h,ze[1],Ge[1])}}return U}function Ph(d){return d.type==="MultiPolygon"?d.coordinates.map(u=>({type:"Polygon",coordinates:u})):d.type==="MultiLineString"?d.coordinates.map(u=>({type:"LineString",coordinates:u})):d.type==="MultiPoint"?d.coordinates.map(u=>({type:"Point",coordinates:u})):[d]}class eu{constructor(u,h){this.type=on,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(bl(u[1])){const v=u[1];if(v.type==="FeatureCollection")return new eu(v,v.features.map(M=>Ph(M.geometry)).flat());if(v.type==="Feature")return new eu(v,Ph(v.geometry));if("type"in v&&"coordinates"in v)return new eu(v,Ph(v))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const M=h.geometry(),K=M.flat().map(X=>kA([X.x,X.y],h.canonical));if(M.length===0)return NaN;const U=new Oh(K[0][1]);let W=1/0;for(const X of v){switch(X.type){case"Point":W=Math.min(W,Th(K,!1,[X.coordinates],!1,U,W));break;case"LineString":W=Math.min(W,Th(K,!1,X.coordinates,!0,U,W));break;case"Polygon":W=Math.min(W,Xd(K,!1,X.coordinates,U,W))}if(W===0)return W}return W}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const M=h.geometry(),K=M.flat().map(X=>kA([X.x,X.y],h.canonical));if(M.length===0)return NaN;const U=new Oh(K[0][1]);let W=1/0;for(const X of v){switch(X.type){case"Point":W=Math.min(W,Th(K,!0,[X.coordinates],!1,U,W));break;case"LineString":W=Math.min(W,Th(K,!0,X.coordinates,!0,U,W));break;case"Polygon":W=Math.min(W,Xd(K,!0,X.coordinates,U,W))}if(W===0)return W}return W}(u,this.geometries);if(u.geometryType()==="Polygon")return function(h,v){const M=h.geometry();if(M.length===0||M[0].length===0)return NaN;const K=wl(M,0).map(X=>X.map(re=>re.map(de=>kA([de.x,de.y],h.canonical)))),U=new Oh(K[0][0][0][1]);let W=1/0;for(const X of v)for(const re of K){switch(X.type){case"Point":W=Math.min(W,Xd([X.coordinates],!1,re,U,W));break;case"LineString":W=Math.min(W,Xd(X.coordinates,!0,re,U,W));break;case"Polygon":W=Math.min(W,kh(re,X.coordinates,U,W))}if(W===0)return W}return W}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Jt={"==":ds,"!=":ma,">":vu,"<":Wa,">=":$d,"<=":qs,array:Ss,at:Jl,boolean:Ss,case:J,coalesce:Ei,collator:ga,format:Vc,image:ju,in:Vi,"index-of":ao,interpolate:xr,"interpolate-hcl":xr,"interpolate-lab":xr,length:Vd,let:zi,literal:Zo,match:Di,number:Ss,"number-format":xl,object:Ss,slice:Ie,step:$t,string:Ss,"to-boolean":ta,"to-color":ta,"to-number":ta,"to-string":ta,var:Yr,within:oc,distance:eu};class En{constructor(u,h,v,M){this.name=u,this.type=h,this._evaluate=v,this.args=M}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,h){const v=u[0],M=En.definitions[v];if(!M)return h.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const K=Array.isArray(M)?M[0]:M.type,U=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,W=U.filter(([re])=>!Array.isArray(re)||re.length===u.length-1);let X=null;for(const[re,de]of W){X=new Xl(h.registry,ra,h.path,null,h.scope);const _e=[];let Re=!1;for(let ze=1;ze<u.length;ze++){const Ge=u[ze],et=Array.isArray(re)?re[ze-1]:re.type,At=X.parse(Ge,1+_e.length,et);if(!At){Re=!0;break}_e.push(At)}if(!Re)if(Array.isArray(re)&&re.length!==_e.length)X.error(`Expected ${re.length} arguments, but found ${_e.length} instead.`);else{for(let ze=0;ze<_e.length;ze++){const Ge=Array.isArray(re)?re[ze]:re.type,et=_e[ze];X.concat(ze+1).checkSubtype(Ge,et.type)}if(X.errors.length===0)return new En(v,K,de,_e)}}if(W.length===1)h.errors.push(...X.errors);else{const re=(W.length?W:U).map(([_e])=>{return Re=_e,Array.isArray(Re)?`(${Re.map(Pi).join(", ")})`:`(${Pi(Re.type)}...)`;var Re}).join(" | "),de=[];for(let _e=1;_e<u.length;_e++){const Re=h.parse(u[_e],1+de.length);if(!Re)return null;de.push(Pi(Re.type))}h.error(`Expected arguments of type ${re}, but found (${de.join(", ")}) instead.`)}return null}static register(u,h){En.definitions=h;for(const v in h)u[v]=En}}function ln(d,[u,h,v,M]){u=u.evaluate(d),h=h.evaluate(d),v=v.evaluate(d);const K=M?M.evaluate(d):1,U=zu(u,h,v,K);if(U)throw new vo(U);return new Ai(u/255,h/255,v/255,K,!1)}function Fr(d,u){return d in u}function Bi(d,u){const h=u[d];return h===void 0?null:h}function fo(d){return{type:d}}function ra(d){if(d instanceof Yr)return ra(d.boundExpression);if(d instanceof En&&d.name==="error"||d instanceof ga||d instanceof oc||d instanceof eu)return!1;const u=d instanceof ta||d instanceof Ss;let h=!0;return d.eachChild(v=>{h=u?h&&ra(v):h&&v instanceof Zo}),!!h&&is(d)&&yf(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function is(d){if(d instanceof En&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof oc||d instanceof eu)return!1;let u=!0;return d.eachChild(h=>{u&&!is(h)&&(u=!1)}),u}function TA(d){if(d instanceof En&&d.name==="feature-state")return!1;let u=!0;return d.eachChild(h=>{u&&!TA(h)&&(u=!1)}),u}function yf(d,u){if(d instanceof En&&u.indexOf(d.name)>=0)return!1;let h=!0;return d.eachChild(v=>{h&&!yf(v,u)&&(h=!1)}),h}function Gu(d){return{result:"success",value:d}}function bu(d){return{result:"error",value:d}}function xu(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function zl(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Qu(d){return!!d.expression&&d.expression.interpolated}function lo(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Io(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function xd(d){return d}function wd(d,u){const h=u.type==="color",v=d.stops&&typeof d.stops[0][0]=="object",M=v||!(v||d.property!==void 0),K=d.type||(Qu(u)?"exponential":"interval");if(h||u.type==="padding"){const de=h?Ai.parse:$i.parse;(d=Tn({},d)).stops&&(d.stops=d.stops.map(_e=>[_e[0],de(_e[1])])),d.default=de(d.default?d.default:u.default)}if(d.colorSpace&&(U=d.colorSpace)!=="rgb"&&U!=="hcl"&&U!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var U;let W,X,re;if(K==="exponential")W=sc;else if(K==="interval")W=jl;else if(K==="categorical"){W=dA,X=Object.create(null);for(const de of d.stops)X[de[0]]=de[1];re=typeof d.stops[0][0]}else{if(K!=="identity")throw new Error(`Unknown function type "${K}"`);W=hA}if(v){const de={},_e=[];for(let Ge=0;Ge<d.stops.length;Ge++){const et=d.stops[Ge],At=et[0].zoom;de[At]===void 0&&(de[At]={zoom:At,type:d.type,property:d.property,default:d.default,stops:[]},_e.push(At)),de[At].stops.push([et[0].value,et[1]])}const Re=[];for(const Ge of _e)Re.push([de[Ge].zoom,wd(de[Ge],u)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:xr.interpolationFactor.bind(void 0,ze),zoomStops:Re.map(Ge=>Ge[0]),evaluate:({zoom:Ge},et)=>sc({stops:Re,base:d.base},u,Ge).evaluate(Ge,et)}}if(M){const de=K==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:xr.interpolationFactor.bind(void 0,de),zoomStops:d.stops.map(_e=>_e[0]),evaluate:({zoom:_e})=>W(d,u,_e,X,re)}}return{kind:"source",evaluate(de,_e){const Re=_e&&_e.properties?_e.properties[d.property]:void 0;return Re===void 0?tu(d.default,u.default):W(d,u,Re,X,re)}}}function tu(d,u,h){return d!==void 0?d:u!==void 0?u:h!==void 0?h:void 0}function dA(d,u,h,v,M){return tu(typeof h===M?v[h]:void 0,d.default,u.default)}function jl(d,u,h){if(lo(h)!=="number")return tu(d.default,u.default);const v=d.stops.length;if(v===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[v-1][0])return d.stops[v-1][1];const M=st(d.stops.map(K=>K[0]),h);return d.stops[M][1]}function sc(d,u,h){const v=d.base!==void 0?d.base:1;if(lo(h)!=="number")return tu(d.default,u.default);const M=d.stops.length;if(M===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[M-1][0])return d.stops[M-1][1];const K=st(d.stops.map(de=>de[0]),h),U=function(de,_e,Re,ze){const Ge=ze-Re,et=de-Re;return Ge===0?0:_e===1?et/Ge:(Math.pow(_e,et)-1)/(Math.pow(_e,Ge)-1)}(h,v,d.stops[K][0],d.stops[K+1][0]),W=d.stops[K][1],X=d.stops[K+1][1],re=Xi[u.type]||xd;return typeof W.evaluate=="function"?{evaluate(...de){const _e=W.evaluate.apply(void 0,de),Re=X.evaluate.apply(void 0,de);if(_e!==void 0&&Re!==void 0)return re(_e,Re,U,d.colorSpace)}}:re(W,X,U,d.colorSpace)}function hA(d,u,h){switch(u.type){case"color":h=Ai.parse(h);break;case"formatted":h=Rr.fromString(h.toString());break;case"resolvedImage":h=Gs.fromString(h.toString());break;case"padding":h=$i.parse(h);break;default:lo(h)===u.type||u.type==="enum"&&u.values[h]||(h=void 0)}return tu(h,d.default,u.default)}En.register(Jt,{error:[{kind:"error"},[Rn],(d,[u])=>{throw new vo(u.evaluate(d))}],typeof:[Rn,[ur],(d,[u])=>Pi(co(u.evaluate(d)))],"to-rgba":[Ro(on,4),[Xr],(d,[u])=>{const[h,v,M,K]=u.evaluate(d).rgb;return[255*h,255*v,255*M,K]}],rgb:[Xr,[on,on,on],ln],rgba:[Xr,[on,on,on,on],ln],has:{type:er,overloads:[[[Rn],(d,[u])=>Fr(u.evaluate(d),d.properties())],[[Rn,Dr],(d,[u,h])=>Fr(u.evaluate(d),h.evaluate(d))]]},get:{type:ur,overloads:[[[Rn],(d,[u])=>Bi(u.evaluate(d),d.properties())],[[Rn,Dr],(d,[u,h])=>Bi(u.evaluate(d),h.evaluate(d))]]},"feature-state":[ur,[Rn],(d,[u])=>Bi(u.evaluate(d),d.featureState||{})],properties:[Dr,[],d=>d.properties()],"geometry-type":[Rn,[],d=>d.geometryType()],id:[ur,[],d=>d.id()],zoom:[on,[],d=>d.globals.zoom],"heatmap-density":[on,[],d=>d.globals.heatmapDensity||0],"line-progress":[on,[],d=>d.globals.lineProgress||0],accumulated:[ur,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[on,fo(on),(d,u)=>{let h=0;for(const v of u)h+=v.evaluate(d);return h}],"*":[on,fo(on),(d,u)=>{let h=1;for(const v of u)h*=v.evaluate(d);return h}],"-":{type:on,overloads:[[[on,on],(d,[u,h])=>u.evaluate(d)-h.evaluate(d)],[[on],(d,[u])=>-u.evaluate(d)]]},"/":[on,[on,on],(d,[u,h])=>u.evaluate(d)/h.evaluate(d)],"%":[on,[on,on],(d,[u,h])=>u.evaluate(d)%h.evaluate(d)],ln2:[on,[],()=>Math.LN2],pi:[on,[],()=>Math.PI],e:[on,[],()=>Math.E],"^":[on,[on,on],(d,[u,h])=>Math.pow(u.evaluate(d),h.evaluate(d))],sqrt:[on,[on],(d,[u])=>Math.sqrt(u.evaluate(d))],log10:[on,[on],(d,[u])=>Math.log(u.evaluate(d))/Math.LN10],ln:[on,[on],(d,[u])=>Math.log(u.evaluate(d))],log2:[on,[on],(d,[u])=>Math.log(u.evaluate(d))/Math.LN2],sin:[on,[on],(d,[u])=>Math.sin(u.evaluate(d))],cos:[on,[on],(d,[u])=>Math.cos(u.evaluate(d))],tan:[on,[on],(d,[u])=>Math.tan(u.evaluate(d))],asin:[on,[on],(d,[u])=>Math.asin(u.evaluate(d))],acos:[on,[on],(d,[u])=>Math.acos(u.evaluate(d))],atan:[on,[on],(d,[u])=>Math.atan(u.evaluate(d))],min:[on,fo(on),(d,u)=>Math.min(...u.map(h=>h.evaluate(d)))],max:[on,fo(on),(d,u)=>Math.max(...u.map(h=>h.evaluate(d)))],abs:[on,[on],(d,[u])=>Math.abs(u.evaluate(d))],round:[on,[on],(d,[u])=>{const h=u.evaluate(d);return h<0?-Math.round(-h):Math.round(h)}],floor:[on,[on],(d,[u])=>Math.floor(u.evaluate(d))],ceil:[on,[on],(d,[u])=>Math.ceil(u.evaluate(d))],"filter-==":[er,[Rn,ur],(d,[u,h])=>d.properties()[u.value]===h.value],"filter-id-==":[er,[ur],(d,[u])=>d.id()===u.value],"filter-type-==":[er,[Rn],(d,[u])=>d.geometryType()===u.value],"filter-<":[er,[Rn,ur],(d,[u,h])=>{const v=d.properties()[u.value],M=h.value;return typeof v==typeof M&&v<M}],"filter-id-<":[er,[ur],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h<v}],"filter->":[er,[Rn,ur],(d,[u,h])=>{const v=d.properties()[u.value],M=h.value;return typeof v==typeof M&&v>M}],"filter-id->":[er,[ur],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h>v}],"filter-<=":[er,[Rn,ur],(d,[u,h])=>{const v=d.properties()[u.value],M=h.value;return typeof v==typeof M&&v<=M}],"filter-id-<=":[er,[ur],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h<=v}],"filter->=":[er,[Rn,ur],(d,[u,h])=>{const v=d.properties()[u.value],M=h.value;return typeof v==typeof M&&v>=M}],"filter-id->=":[er,[ur],(d,[u])=>{const h=d.id(),v=u.value;return typeof h==typeof v&&h>=v}],"filter-has":[er,[ur],(d,[u])=>u.value in d.properties()],"filter-has-id":[er,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[er,[Ro(Rn)],(d,[u])=>u.value.indexOf(d.geometryType())>=0],"filter-id-in":[er,[Ro(ur)],(d,[u])=>u.value.indexOf(d.id())>=0],"filter-in-small":[er,[Rn,Ro(ur)],(d,[u,h])=>h.value.indexOf(d.properties()[u.value])>=0],"filter-in-large":[er,[Rn,Ro(ur)],(d,[u,h])=>function(v,M,K,U){for(;K<=U;){const W=K+U>>1;if(M[W]===v)return!0;M[W]>v?U=W-1:K=W+1}return!1}(d.properties()[u.value],h.value,0,h.value.length-1)],all:{type:er,overloads:[[[er,er],(d,[u,h])=>u.evaluate(d)&&h.evaluate(d)],[fo(er),(d,u)=>{for(const h of u)if(!h.evaluate(d))return!1;return!0}]]},any:{type:er,overloads:[[[er,er],(d,[u,h])=>u.evaluate(d)||h.evaluate(d)],[fo(er),(d,u)=>{for(const h of u)if(h.evaluate(d))return!0;return!1}]]},"!":[er,[er],(d,[u])=>!u.evaluate(d)],"is-supported-script":[er,[Rn],(d,[u])=>{const h=d.globals&&d.globals.isSupportedScript;return!h||h(u.evaluate(d))}],upcase:[Rn,[Rn],(d,[u])=>u.evaluate(d).toUpperCase()],downcase:[Rn,[Rn],(d,[u])=>u.evaluate(d).toLowerCase()],concat:[Rn,fo(ur),(d,u)=>u.map(h=>Oo(h.evaluate(d))).join("")],"resolved-locale":[Rn,[go],(d,[u])=>u.evaluate(d).resolvedLocale()]});class nu{constructor(u,h){var v;this.expression=u,this._warningHistory={},this._evaluator=new ho,this._defaultValue=h?(v=h).type==="color"&&Io(v.default)?new Ai(0,0,0,0):v.type==="color"?Ai.parse(v.default)||null:v.type==="padding"?$i.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Mo.parse(v.default)||null:v.type==="projectionDefinition"?Qs.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(u,h,v,M,K,U){return this._evaluator.globals=u,this._evaluator.feature=h,this._evaluator.featureState=v,this._evaluator.canonical=M,this._evaluator.availableImages=K||null,this._evaluator.formattedSection=U,this.expression.evaluate(this._evaluator)}evaluate(u,h,v,M,K,U){this._evaluator.globals=u,this._evaluator.feature=h||null,this._evaluator.featureState=v||null,this._evaluator.canonical=M,this._evaluator.availableImages=K||null,this._evaluator.formattedSection=U||null;try{const W=this.expression.evaluate(this._evaluator);if(W==null||typeof W=="number"&&W!=W)return this._defaultValue;if(this._enumValues&&!(W in this._enumValues))throw new vo(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(W)} instead.`);return W}catch(W){return this._warningHistory[W.message]||(this._warningHistory[W.message]=!0,typeof console<"u"&&console.warn(W.message)),this._defaultValue}}}function Xc(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Jt}function Md(d,u){const h=new Xl(Jt,ra,[],u?function(M){const K={color:Xr,string:Rn,number:on,enum:Rn,boolean:er,formatted:Sa,padding:Yi,projectionDefinition:Ur,resolvedImage:Ci,variableAnchorOffsetCollection:oo};return M.type==="array"?Ro(K[M.value]||ur,M.length):K[M.type]}(u):void 0),v=h.parse(d,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Gu(new nu(v,u)):bu(h.errors)}class Ga{constructor(u,h){this.kind=u,this._styleExpression=h,this.isStateDependent=u!=="constant"&&!TA(h.expression)}evaluateWithoutErrorHandling(u,h,v,M,K,U){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,M,K,U)}evaluate(u,h,v,M,K,U){return this._styleExpression.evaluate(u,h,v,M,K,U)}}class Jc{constructor(u,h,v,M){this.kind=u,this.zoomStops=v,this._styleExpression=h,this.isStateDependent=u!=="camera"&&!TA(h.expression),this.interpolationType=M}evaluateWithoutErrorHandling(u,h,v,M,K,U){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,M,K,U)}evaluate(u,h,v,M,K,U){return this._styleExpression.evaluate(u,h,v,M,K,U)}interpolationFactor(u,h,v){return this.interpolationType?xr.interpolationFactor(this.interpolationType,u,h,v):0}}function Sd(d,u){const h=Md(d,u);if(h.result==="error")return h;const v=h.value.expression,M=is(v);if(!M&&!xu(u))return bu([new On("","data expressions not supported")]);const K=yf(v,["zoom"]);if(!K&&!zl(u))return bu([new On("","zoom expressions not supported")]);const U=Kh(v);return U||K?U instanceof On?bu([U]):U instanceof xr&&!Qu(u)?bu([new On("",'"interpolate" expressions cannot be used with this property')]):Gu(U?new Jc(M?"camera":"composite",h.value,U.labels,U instanceof xr?U.interpolation:void 0):new Ga(M?"constant":"source",h.value)):bu([new On("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ac{constructor(u,h){this._parameters=u,this._specification=h,Tn(this,wd(this._parameters,this._specification))}static deserialize(u){return new ac(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function Kh(d){let u=null;if(d instanceof zi)u=Kh(d.result);else if(d instanceof Ei){for(const h of d.args)if(u=Kh(h),u)break}else(d instanceof $t||d instanceof xr)&&d.input instanceof En&&d.input.name==="zoom"&&(u=d);return u instanceof On||d.eachChild(h=>{const v=Kh(h);v instanceof On?u=v:!u&&v?u=new On("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&v&&u!==v&&(u=new On("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function qu(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const u of d.slice(1))if(!qu(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const ed={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function lc(d){if(d==null)return{filter:()=>!0,needGeometry:!1};qu(d)||(d=kc(d));const u=Md(d,ed);if(u.result==="error")throw new Error(u.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,v,M)=>u.value.evaluate(h,v,{},M),needGeometry:hs(d)}}function Dh(d,u){return d<u?-1:d>u?1:0}function hs(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let u=1;u<d.length;u++)if(hs(d[u]))return!0;return!1}function kc(d){if(!d)return!0;const u=d[0];return d.length<=1?u!=="any":u==="=="?PA(d[1],d[2],"=="):u==="!="?Ed(PA(d[1],d[2],"==")):u==="<"||u===">"||u==="<="||u===">="?PA(d[1],d[2],u):u==="any"?(h=d.slice(1),["any"].concat(h.map(kc))):u==="all"?["all"].concat(d.slice(1).map(kc)):u==="none"?["all"].concat(d.slice(1).map(kc).map(Ed)):u==="in"?Yu(d[1],d.slice(2)):u==="!in"?Ed(Yu(d[1],d.slice(2))):u==="has"?Jd(d[1]):u!=="!has"||Ed(Jd(d[1]));var h}function PA(d,u,h){switch(d){case"$type":return[`filter-type-${h}`,u];case"$id":return[`filter-id-${h}`,u];default:return[`filter-${h}`,d,u]}}function Yu(d,u){if(u.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(h=>typeof h!=typeof u[0])?["filter-in-large",d,["literal",u.sort(Dh)]]:["filter-in-small",d,["literal",u]]}}function Jd(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Ed(d){return["!",d]}function uc(d){const u=typeof d;if(u==="number"||u==="boolean"||u==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let M="[";for(const K of d)M+=`${uc(K)},`;return`${M}]`}const h=Object.keys(d).sort();let v="{";for(let M=0;M<h.length;M++)v+=`${JSON.stringify(h[M])}:${uc(d[h[M]])},`;return`${v}}`}function td(d){let u="";for(const h of se)u+=`/${uc(d[h])}`;return u}function KA(d){const u=d.value;return u?[new xt(d.key,u,"constants have been deprecated as of v8")]:[]}function Oi(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Us(d){if(Array.isArray(d))return d.map(Us);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const u={};for(const h in d)u[h]=Us(d[h]);return u}return Oi(d)}function fA(d){const u=d.key,h=d.value,v=d.valueSpec||{},M=d.objectElementValidators||{},K=d.style,U=d.styleSpec,W=d.validateSpec;let X=[];const re=lo(h);if(re!=="object")return[new xt(u,h,`object expected, ${re} found`)];for(const de in h){const _e=de.split(".")[0],Re=v[_e]||v["*"];let ze;if(M[_e])ze=M[_e];else if(v[_e])ze=W;else if(M["*"])ze=M["*"];else{if(!v["*"]){X.push(new xt(u,h[de],`unknown property "${de}"`));continue}ze=W}X=X.concat(ze({key:(u&&`${u}.`)+de,value:h[de],valueSpec:Re,style:K,styleSpec:U,object:h,objectKey:de,validateSpec:W},h))}for(const de in v)M[de]||v[de].required&&v[de].default===void 0&&h[de]===void 0&&X.push(new xt(u,h,`missing required property "${de}"`));return X}function Bd(d){const u=d.value,h=d.valueSpec,v=d.style,M=d.styleSpec,K=d.key,U=d.arrayElementValidator||d.validateSpec;if(lo(u)!=="array")return[new xt(K,u,`array expected, ${lo(u)} found`)];if(h.length&&u.length!==h.length)return[new xt(K,u,`array length ${h.length} expected, length ${u.length} found`)];if(h["min-length"]&&u.length<h["min-length"])return[new xt(K,u,`array length at least ${h["min-length"]} expected, length ${u.length} found`)];let W={type:h.value,values:h.values};M.$version<7&&(W.function=h.function),lo(h.value)==="object"&&(W=h.value);let X=[];for(let re=0;re<u.length;re++)X=X.concat(U({array:u,arrayIndex:re,value:u[re],valueSpec:W,validateSpec:d.validateSpec,style:v,styleSpec:M,key:`${K}[${re}]`}));return X}function nd(d){const u=d.key,h=d.value,v=d.valueSpec;let M=lo(h);return M==="number"&&h!=h&&(M="NaN"),M!=="number"?[new xt(u,h,`number expected, ${M} found`)]:"minimum"in v&&h<v.minimum?[new xt(u,h,`${h} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&h>v.maximum?[new xt(u,h,`${h} is greater than the maximum value ${v.maximum}`)]:[]}function Tc(d){const u=d.valueSpec,h=Oi(d.value.type);let v,M,K,U={};const W=h!=="categorical"&&d.value.property===void 0,X=!W,re=lo(d.value.stops)==="array"&&lo(d.value.stops[0])==="array"&&lo(d.value.stops[0][0])==="object",de=fA({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(ze){if(h==="identity")return[new xt(ze.key,ze.value,'identity function may not have a "stops" property')];let Ge=[];const et=ze.value;return Ge=Ge.concat(Bd({key:ze.key,value:et,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:_e})),lo(et)==="array"&&et.length===0&&Ge.push(new xt(ze.key,et,"array must have at least one stop")),Ge},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return h==="identity"&&W&&de.push(new xt(d.key,d.value,'missing required property "property"')),h==="identity"||d.value.stops||de.push(new xt(d.key,d.value,'missing required property "stops"')),h==="exponential"&&d.valueSpec.expression&&!Qu(d.valueSpec)&&de.push(new xt(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(X&&!xu(d.valueSpec)?de.push(new xt(d.key,d.value,"property functions not supported")):W&&!zl(d.valueSpec)&&de.push(new xt(d.key,d.value,"zoom functions not supported"))),h!=="categorical"&&!re||d.value.property!==void 0||de.push(new xt(d.key,d.value,'"property" property is required')),de;function _e(ze){let Ge=[];const et=ze.value,At=ze.key;if(lo(et)!=="array")return[new xt(At,et,`array expected, ${lo(et)} found`)];if(et.length!==2)return[new xt(At,et,`array length 2 expected, length ${et.length} found`)];if(re){if(lo(et[0])!=="object")return[new xt(At,et,`object expected, ${lo(et[0])} found`)];if(et[0].zoom===void 0)return[new xt(At,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new xt(At,et,"object stop key must have value")];if(K&&K>Oi(et[0].zoom))return[new xt(At,et[0].zoom,"stop zoom values must appear in ascending order")];Oi(et[0].zoom)!==K&&(K=Oi(et[0].zoom),M=void 0,U={}),Ge=Ge.concat(fA({key:`${At}[0]`,value:et[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:nd,value:Re}}))}else Ge=Ge.concat(Re({key:`${At}[0]`,value:et[0],valueSpec:{},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},et));return Xc(Us(et[1]))?Ge.concat([new xt(`${At}[1]`,et[1],"expressions are not allowed in function stops.")]):Ge.concat(ze.validateSpec({key:`${At}[1]`,value:et[1],valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Re(ze,Ge){const et=lo(ze.value),At=Oi(ze.value),Ct=ze.value!==null?ze.value:Ge;if(v){if(et!==v)return[new xt(ze.key,Ct,`${et} stop domain type must match previous stop domain type ${v}`)]}else v=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new xt(ze.key,Ct,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&h!=="categorical"){let Nt=`number expected, ${et} found`;return xu(u)&&h===void 0&&(Nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(ze.key,Ct,Nt)]}return h!=="categorical"||et!=="number"||isFinite(At)&&Math.floor(At)===At?h!=="categorical"&&et==="number"&&M!==void 0&&At<M?[new xt(ze.key,Ct,"stop domain values must appear in ascending order")]:(M=At,h==="categorical"&&At in U?[new xt(ze.key,Ct,"stop domain values must be unique")]:(U[At]=!0,[])):[new xt(ze.key,Ct,`integer expected, found ${At}`)]}}function DA(d){const u=(d.expressionContext==="property"?Sd:Md)(Us(d.value),d.valueSpec);if(u.result==="error")return u.value.map(v=>new xt(`${d.key}${v.key}`,d.value,v.message));const h=u.value.expression||u.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!h.outputDefined())return[new xt(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!TA(h))return[new xt(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!TA(h))return[new xt(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!yf(h,["zoom","feature-state"]))return[new xt(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!is(h))return[new xt(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dl(d){const u=d.key,h=d.value,v=d.valueSpec,M=[];return Array.isArray(v.values)?v.values.indexOf(Oi(h))===-1&&M.push(new xt(u,h,`expected one of [${v.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(v.values).indexOf(Oi(h))===-1&&M.push(new xt(u,h,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(h)} found`)),M}function pA(d){return qu(Us(d.value))?DA(Tn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):hl(d)}function hl(d){const u=d.value,h=d.key;if(lo(u)!=="array")return[new xt(h,u,`array expected, ${lo(u)} found`)];const v=d.styleSpec;let M,K=[];if(u.length<1)return[new xt(h,u,"filter array must have at least 1 element")];switch(K=K.concat(dl({key:`${h}[0]`,value:u[0],valueSpec:v.filter_operator,style:d.style,styleSpec:d.styleSpec})),Oi(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Oi(u[1])==="$type"&&K.push(new xt(h,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&K.push(new xt(h,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(M=lo(u[1]),M!=="string"&&K.push(new xt(`${h}[1]`,u[1],`string expected, ${M} found`)));for(let U=2;U<u.length;U++)M=lo(u[U]),Oi(u[1])==="$type"?K=K.concat(dl({key:`${h}[${U}]`,value:u[U],valueSpec:v.geometry_type,style:d.style,styleSpec:d.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&K.push(new xt(`${h}[${U}]`,u[U],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let U=1;U<u.length;U++)K=K.concat(hl({key:`${h}[${U}]`,value:u[U],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":M=lo(u[1]),u.length!==2?K.push(new xt(h,u,`filter array for "${u[0]}" operator must have 2 elements`)):M!=="string"&&K.push(new xt(`${h}[1]`,u[1],`string expected, ${M} found`))}return K}function Ac(d,u){const h=d.key,v=d.validateSpec,M=d.style,K=d.styleSpec,U=d.value,W=d.objectKey,X=K[`${u}_${d.layerType}`];if(!X)return[];const re=W.match(/^(.*)-transition$/);if(u==="paint"&&re&&X[re[1]]&&X[re[1]].transition)return v({key:h,value:U,valueSpec:K.transition,style:M,styleSpec:K});const de=d.valueSpec||X[W];if(!de)return[new xt(h,U,`unknown property "${W}"`)];let _e;if(lo(U)==="string"&&xu(de)&&!de.tokens&&(_e=/^{([^}]+)}$/.exec(U)))return[new xt(h,U,`"${W}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_e[1])} }\`.`)];const Re=[];return d.layerType==="symbol"&&(W==="text-field"&&M&&!M.glyphs&&Re.push(new xt(h,U,'use of "text-field" requires a style "glyphs" property')),W==="text-font"&&Io(Us(U))&&Oi(U.type)==="identity"&&Re.push(new xt(h,U,'"text-font" does not support identity functions'))),Re.concat(v({key:d.key,value:U,valueSpec:de,style:M,styleSpec:K,expressionContext:"property",propertyType:u,propertyKey:W}))}function $u(d){return Ac(d,"paint")}function Od(d){return Ac(d,"layout")}function rd(d){let u=[];const h=d.value,v=d.key,M=d.style,K=d.styleSpec;h.type||h.ref||u.push(new xt(v,h,'either "type" or "ref" is required'));let U=Oi(h.type);const W=Oi(h.ref);if(h.id){const X=Oi(h.id);for(let re=0;re<d.arrayIndex;re++){const de=M.layers[re];Oi(de.id)===X&&u.push(new xt(v,h.id,`duplicate layer id "${h.id}", previously used at line ${de.id.__line__}`))}}if("ref"in h){let X;["type","source","source-layer","filter","layout"].forEach(re=>{re in h&&u.push(new xt(v,h[re],`"${re}" is prohibited for ref layers`))}),M.layers.forEach(re=>{Oi(re.id)===W&&(X=re)}),X?X.ref?u.push(new xt(v,h.ref,"ref cannot reference another ref layer")):U=Oi(X.type):u.push(new xt(v,h.ref,`ref layer "${W}" not found`))}else if(U!=="background")if(h.source){const X=M.sources&&M.sources[h.source],re=X&&Oi(X.type);X?re==="vector"&&U==="raster"?u.push(new xt(v,h.source,`layer "${h.id}" requires a raster source`)):re!=="raster-dem"&&U==="hillshade"?u.push(new xt(v,h.source,`layer "${h.id}" requires a raster-dem source`)):re==="raster"&&U!=="raster"?u.push(new xt(v,h.source,`layer "${h.id}" requires a vector source`)):re!=="vector"||h["source-layer"]?re==="raster-dem"&&U!=="hillshade"?u.push(new xt(v,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):U!=="line"||!h.paint||!h.paint["line-gradient"]||re==="geojson"&&X.lineMetrics||u.push(new xt(v,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new xt(v,h,`layer "${h.id}" must specify a "source-layer"`)):u.push(new xt(v,h.source,`source "${h.source}" not found`))}else u.push(new xt(v,h,'missing required property "source"'));return u=u.concat(fA({key:v,value:h,valueSpec:K.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${v}.type`,value:h.type,valueSpec:K.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:h,objectKey:"type"}),filter:pA,layout:X=>fA({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>Od(Tn({layerType:U},re))}}),paint:X=>fA({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>$u(Tn({layerType:U},re))}})}})),u}function RA(d){const u=d.value,h=d.key,v=lo(u);return v!=="string"?[new xt(h,u,`string expected, ${v} found`)]:[]}const cc={promoteId:function({key:d,value:u}){if(lo(u)==="string")return RA({key:d,value:u});{const h=[];for(const v in u)h.push(...RA({key:`${d}.${v}`,value:u[v]}));return h}}};function Vu(d){const u=d.value,h=d.key,v=d.styleSpec,M=d.style,K=d.validateSpec;if(!u.type)return[new xt(h,u,'"type" is required')];const U=Oi(u.type);let W;switch(U){case"vector":case"raster":return W=fA({key:h,value:u,valueSpec:v[`source_${U.replace("-","_")}`],style:d.style,styleSpec:v,objectElementValidators:cc,validateSpec:K}),W;case"raster-dem":return W=function(X){var re;const de=(re=X.sourceName)!==null&&re!==void 0?re:"",_e=X.value,Re=X.styleSpec,ze=Re.source_raster_dem,Ge=X.style;let et=[];const At=lo(_e);if(_e===void 0)return et;if(At!=="object")return et.push(new xt("source_raster_dem",_e,`object expected, ${At} found`)),et;const Ct=Oi(_e.encoding)==="custom",Nt=["redFactor","greenFactor","blueFactor","baseShift"],Et=X.value.encoding?`"${X.value.encoding}"`:"Default";for(const Le in _e)!Ct&&Nt.includes(Le)?et.push(new xt(Le,_e[Le],`In "${de}": "${Le}" is only valid when "encoding" is set to "custom". ${Et} encoding found`)):ze[Le]?et=et.concat(X.validateSpec({key:Le,value:_e[Le],valueSpec:ze[Le],validateSpec:X.validateSpec,style:Ge,styleSpec:Re})):et.push(new xt(Le,_e[Le],`unknown property "${Le}"`));return et}({sourceName:h,value:u,style:d.style,styleSpec:v,validateSpec:K}),W;case"geojson":if(W=fA({key:h,value:u,valueSpec:v.source_geojson,style:M,styleSpec:v,validateSpec:K,objectElementValidators:cc}),u.cluster)for(const X in u.clusterProperties){const[re,de]=u.clusterProperties[X],_e=typeof re=="string"?[re,["accumulated"],["get",X]]:re;W.push(...DA({key:`${h}.${X}.map`,value:de,validateSpec:K,expressionContext:"cluster-map"})),W.push(...DA({key:`${h}.${X}.reduce`,value:_e,validateSpec:K,expressionContext:"cluster-reduce"}))}return W;case"video":return fA({key:h,value:u,valueSpec:v.source_video,style:M,validateSpec:K,styleSpec:v});case"image":return fA({key:h,value:u,valueSpec:v.source_image,style:M,validateSpec:K,styleSpec:v});case"canvas":return[new xt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dl({key:`${h}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,validateSpec:K,styleSpec:v})}}function Hu(d){const u=d.value,h=d.styleSpec,v=h.light,M=d.style;let K=[];const U=lo(u);if(u===void 0)return K;if(U!=="object")return K=K.concat([new xt("light",u,`object expected, ${U} found`)]),K;for(const W in u){const X=W.match(/^(.*)-transition$/);K=K.concat(X&&v[X[1]]&&v[X[1]].transition?d.validateSpec({key:W,value:u[W],valueSpec:h.transition,validateSpec:d.validateSpec,style:M,styleSpec:h}):v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],validateSpec:d.validateSpec,style:M,styleSpec:h}):[new xt(W,u[W],`unknown property "${W}"`)])}return K}function FA(d){const u=d.value,h=d.styleSpec,v=h.sky,M=d.style,K=lo(u);if(u===void 0)return[];if(K!=="object")return[new xt("sky",u,`object expected, ${K} found`)];let U=[];for(const W in u)U=U.concat(v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],style:M,styleSpec:h}):[new xt(W,u[W],`unknown property "${W}"`)]);return U}function Pc(d){const u=d.value,h=d.styleSpec,v=h.terrain,M=d.style;let K=[];const U=lo(u);if(u===void 0)return K;if(U!=="object")return K=K.concat([new xt("terrain",u,`object expected, ${U} found`)]),K;for(const W in u)K=K.concat(v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],validateSpec:d.validateSpec,style:M,styleSpec:h}):[new xt(W,u[W],`unknown property "${W}"`)]);return K}function wu(d){let u=[];const h=d.value,v=d.key;if(Array.isArray(h)){const M=[],K=[];for(const U in h)h[U].id&&M.includes(h[U].id)&&u.push(new xt(v,h,`all the sprites' ids must be unique, but ${h[U].id} is duplicated`)),M.push(h[U].id),h[U].url&&K.includes(h[U].url)&&u.push(new xt(v,h,`all the sprites' URLs must be unique, but ${h[U].url} is duplicated`)),K.push(h[U].url),u=u.concat(fA({key:`${v}[${U}]`,value:h[U],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return u}return RA({key:v,value:h})}const Rh={"*":()=>[],array:Bd,boolean:function(d){const u=d.value,h=d.key,v=lo(u);return v!=="boolean"?[new xt(h,u,`boolean expected, ${v} found`)]:[]},number:nd,color:function(d){const u=d.key,h=d.value,v=lo(h);return v!=="string"?[new xt(u,h,`color expected, ${v} found`)]:Ai.parse(String(h))?[]:[new xt(u,h,`color expected, "${h}" found`)]},constants:KA,enum:dl,filter:pA,function:Tc,layer:rd,object:fA,source:Vu,light:Hu,sky:FA,terrain:Pc,projection:function(d){const u=d.value,h=d.styleSpec,v=h.projection,M=d.style,K=lo(u);if(u===void 0)return[];if(K!=="object")return[new xt("projection",u,`object expected, ${K} found`)];let U=[];for(const W in u)U=U.concat(v[W]?d.validateSpec({key:W,value:u[W],valueSpec:v[W],style:M,styleSpec:h}):[new xt(W,u[W],`unknown property "${W}"`)]);return U},projectionDefinition:function(d){const u=d.key;let h=d.value;h=h instanceof String?h.valueOf():h;const v=lo(h);return v!=="array"||function(M){return Array.isArray(M)&&M.length===3&&typeof M[0]=="string"&&typeof M[1]=="string"&&typeof M[2]=="number"}(h)||function(M){return!!["interpolate","step","literal"].includes(M[0])}(h)?["array","string"].includes(v)?[]:[new xt(u,h,`projection expected, invalid type "${v}" found`)]:[new xt(u,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:RA,formatted:function(d){return RA(d).length===0?[]:DA(d)},resolvedImage:function(d){return RA(d).length===0?[]:DA(d)},padding:function(d){const u=d.key,h=d.value;if(lo(h)==="array"){if(h.length<1||h.length>4)return[new xt(u,h,`padding requires 1 to 4 values; ${h.length} values found`)];const v={type:"number"};let M=[];for(let K=0;K<h.length;K++)M=M.concat(d.validateSpec({key:`${u}[${K}]`,value:h[K],validateSpec:d.validateSpec,valueSpec:v}));return M}return nd({key:u,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(d){const u=d.key,h=d.value,v=lo(h),M=d.styleSpec;if(v!=="array"||h.length<1||h.length%2!=0)return[new xt(u,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let K=[];for(let U=0;U<h.length;U+=2)K=K.concat(dl({key:`${u}[${U}]`,value:h[U],valueSpec:M.layout_symbol["text-anchor"]})),K=K.concat(Bd({key:`${u}[${U+1}]`,value:h[U+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:M}));return K},sprite:wu};function ot(d){const u=d.value,h=d.valueSpec,v=d.styleSpec;return d.validateSpec=ot,h.expression&&Io(Oi(u))?Tc(d):h.expression&&Xc(Us(u))?DA(d):h.type&&Rh[h.type]?Rh[h.type](d):fA(Tn({},d,{valueSpec:h.type?v[h.type]:h}))}function LA(d){const u=d.value,h=d.key,v=RA(d);return v.length||(u.indexOf("{fontstack}")===-1&&v.push(new xt(h,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&v.push(new xt(h,u,'"glyphs" url must include a "{range}" token'))),v}function ko(d,u=Oe){let h=[];return h=h.concat(ot({key:"",value:d,valueSpec:u.$root,styleSpec:u,style:d,validateSpec:ot,objectElementValidators:{glyphs:LA,"*":()=>[]}})),d.constants&&(h=h.concat(KA({key:"constants",value:d.constants,style:d,styleSpec:u,validateSpec:ot}))),ii(h)}function mi(d){return function(u){return d({...u,validateSpec:ot})}}function ii(d){return[].concat(d).sort((u,h)=>u.line-h.line)}function os(d){return function(...u){return ii(d.apply(this,u))}}ko.source=os(mi(Vu)),ko.sprite=os(mi(wu)),ko.glyphs=os(mi(LA)),ko.light=os(mi(Hu)),ko.sky=os(mi(FA)),ko.terrain=os(mi(Pc)),ko.layer=os(mi(rd)),ko.filter=os(mi(pA)),ko.paintProperty=os(mi($u)),ko.layoutProperty=os(mi(Od));const mA=ko,eh=mA.light,ka=mA.sky,zs=mA.paintProperty,Es=mA.layoutProperty;function Kc(d,u){let h=!1;if(u&&u.length)for(const v of u)d.fire(new sn(new Error(v.message))),h=!0;return h}class ia{constructor(u,h,v){const M=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const U=new Int32Array(this.arrayBuffer);u=U[0],this.d=(h=U[1])+2*(v=U[2]);for(let X=0;X<this.d*this.d;X++){const re=U[3+X],de=U[3+X+1];M.push(re===de?null:U.subarray(re,de))}const W=U[3+M.length+1];this.keys=U.subarray(U[3+M.length],W),this.bboxes=U.subarray(W),this.insert=this._insertReadonly}else{this.d=h+2*v;for(let U=0;U<this.d*this.d;U++)M.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=u,this.padding=v,this.scale=h/u,this.uid=0;const K=v/h*u;this.min=-K,this.max=u+K}insert(u,h,v,M,K){this._forEachCell(h,v,M,K,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(M),this.bboxes.push(K)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,h,v,M,K,U){this.cells[K].push(U)}query(u,h,v,M,K){const U=this.min,W=this.max;if(u<=U&&h<=U&&W<=v&&W<=M&&!K)return Array.prototype.slice.call(this.keys);{const X=[];return this._forEachCell(u,h,v,M,this._queryCell,X,{},K),X}}_queryCell(u,h,v,M,K,U,W,X){const re=this.cells[K];if(re!==null){const de=this.keys,_e=this.bboxes;for(let Re=0;Re<re.length;Re++){const ze=re[Re];if(W[ze]===void 0){const Ge=4*ze;(X?X(_e[Ge+0],_e[Ge+1],_e[Ge+2],_e[Ge+3]):u<=_e[Ge+2]&&h<=_e[Ge+3]&&v>=_e[Ge+0]&&M>=_e[Ge+1])?(W[ze]=!0,U.push(de[ze])):W[ze]=!1}}}}_forEachCell(u,h,v,M,K,U,W,X){const re=this._convertToCellCoord(u),de=this._convertToCellCoord(h),_e=this._convertToCellCoord(v),Re=this._convertToCellCoord(M);for(let ze=re;ze<=_e;ze++)for(let Ge=de;Ge<=Re;Ge++){const et=this.d*Ge+ze;if((!X||X(this._convertFromCellCoord(ze),this._convertFromCellCoord(Ge),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(Ge+1)))&&K.call(this,u,h,v,M,et,U,W,X))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,h=3+this.cells.length+1+1;let v=0;for(let U=0;U<this.cells.length;U++)v+=this.cells[U].length;const M=new Int32Array(h+v+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let K=h;for(let U=0;U<u.length;U++){const W=u[U];M[3+U]=K,M.set(W,K),K+=W.length}return M[3+u.length]=K,M.set(this.keys,K),K+=this.keys.length,M[3+u.length+1]=K,M.set(this.bboxes,K),K+=this.bboxes.length,M.buffer}static serialize(u,h){const v=u.toArrayBuffer();return h&&h.push(v),{buffer:v}}static deserialize(u){return new ia(u.buffer)}}const Aa={};function hr(d,u,h={}){if(Aa[d])throw new Error(`${d} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:d,writeable:!1}),Aa[d]={klass:u,omit:h.omit||[],shallow:h.shallow||[]}}hr("Object",Object),hr("TransferableGridIndex",ia),hr("Color",Ai),hr("Error",Error),hr("AJAXError",Jn),hr("ResolvedImage",Gs),hr("StylePropertyFunction",ac),hr("StyleExpression",nu,{omit:["_evaluator"]}),hr("ZoomDependentExpression",Jc),hr("ZoomConstantExpression",Ga),hr("CompoundExpression",En,{omit:["_evaluate"]});for(const d in Jt)Jt[d]._classRegistryKey||hr(`Expression_${d}`,Jt[d]);function Id(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function ya(d){return d.$name||d.constructor._classRegistryKey}function kd(d){return!function(u){if(u===null||typeof u!="object")return!1;const h=ya(u);return!(!h||h==="Object")}(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Id(d)||rn(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function Td(d,u){if(kd(d))return(Id(d)||rn(d))&&u&&u.push(d),ArrayBuffer.isView(d)&&u&&u.push(d.buffer),d instanceof ImageData&&u&&u.push(d.data.buffer),d;if(Array.isArray(d)){const K=[];for(const U of d)K.push(Td(U,u));return K}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const h=ya(d);if(!h)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!Aa[h])throw new Error(`${h} is not registered.`);const{klass:v}=Aa[h],M=v.serialize?v.serialize(d,u):{};if(v.serialize){if(u&&M===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const K in d){if(!d.hasOwnProperty(K)||Aa[h].omit.indexOf(K)>=0)continue;const U=d[K];M[K]=Aa[h].shallow.indexOf(K)>=0?U:Td(U,u)}d instanceof Error&&(M.message=d.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(M.$name=h),M}function dc(d){if(kd(d))return d;if(Array.isArray(d))return d.map(dc);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const u=ya(d)||"Object";if(!Aa[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:h}=Aa[u];if(!h)throw new Error(`can't deserialize unregistered class ${u}`);if(h.deserialize)return h.deserialize(d);const v=Object.create(h.prototype);for(const M of Object.keys(d)){if(M==="$name")continue;const K=d[M];v[M]=Aa[u].shallow.indexOf(M)>=0?K:dc(K)}return v}class ru{constructor(){this.first=!0}update(u,h){const v=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=h),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=v,!0))}}const Ji={"Latin-1 Supplement":d=>d>=128&&d<=255,"Hangul Jamo":d=>d>=4352&&d<=4607,Khmer:d=>d>=6016&&d<=6143,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Katakana:d=>d>=12448&&d<=12543,Kanbun:d=>d>=12688&&d<=12703,"CJK Strokes":d=>d>=12736&&d<=12783,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"Private Use Area":d=>d>=57344&&d<=63743,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function fl(d){for(const u of d)if(hc(u.charCodeAt(0)))return!0;return!1}function Fh(d){for(const u of d)if(!Rc(u.charCodeAt(0)))return!1;return!0}function Dc(d){const u=d.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(u.join("|"),"u")}const UA=Dc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Rc(d){return!UA.test(String.fromCodePoint(d))}const zA=Dc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function hc(d){return!(d!==746&&d!==747&&(d<4352||!(Ji["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Ji["CJK Compatibility"](d)||Ji["CJK Strokes"](d)||!(!Ji["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Ji["Enclosed CJK Letters and Months"](d)||Ji["Ideographic Description Characters"](d)||Ji.Kanbun(d)||Ji.Katakana(d)&&d!==12540||!(!Ji["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Ji["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Ji["Vertical Forms"](d)||Ji["Yijing Hexagram Symbols"](d)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(d))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(d))||zA.test(String.fromCodePoint(d)))))}function bs(d){return!(hc(d)||function(u){return!!(Ji["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Ji["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Ji["Letterlike Symbols"](u)||Ji["Number Forms"](u)||Ji["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Ji["Control Pictures"](u)&&u!==9251||Ji["Optical Character Recognition"](u)||Ji["Enclosed Alphanumerics"](u)||Ji["Geometric Shapes"](u)||Ji["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Ji["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Ji["CJK Symbols and Punctuation"](u)||Ji.Katakana(u)||Ji["Private Use Area"](u)||Ji["CJK Compatibility Forms"](u)||Ji["Small Form Variants"](u)||Ji["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(d))}const Fo=Dc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function iu(d){return Fo.test(String.fromCodePoint(d))}function Qa(d,u){return!(!u&&iu(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Ji.Khmer(d))}function qa(d){for(const u of d)if(iu(u.charCodeAt(0)))return!0;return!1}const Nl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(Nl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,u){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const h=d.pluginURL,v=new Promise(K=>{this.loadScriptResolve=K});u(h);const M=new Promise(K=>setTimeout(()=>K(),this.TIMEOUT));if(yield Promise.race([v,M]),this.isParsed()){const K={pluginStatus:"loaded",pluginURL:h};return this.setState(K),K}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class Lo{constructor(u,h){this.zoom=u,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ru,this.transition={})}isSupportedScript(u){return function(h,v){for(const M of h)if(!Qa(M.charCodeAt(0),v))return!1;return!0}(u,Nl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,h=u-Math.floor(u),v=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*h}}}class Mu{constructor(u,h){this.property=u,this.value=h,this.expression=function(v,M){if(Io(v))return new ac(v,M);if(Xc(v)){const K=Sd(v,M);if(K.result==="error")throw new Error(K.value.map(U=>`${U.key}: ${U.message}`).join(", "));return K.value}{let K=v;return M.type==="color"&&typeof v=="string"?K=Ai.parse(v):M.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?K=Mo.parse(v):M.type==="projectionDefinition"&&typeof v=="string"&&(K=Qs.parse(v)):K=$i.parse(v),{kind:"constant",evaluate:()=>K}}}(h===void 0?u.specification.default:h,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,h,v){return this.property.possiblyEvaluate(this,u,h,v)}}class fc{constructor(u){this.property=u,this.value=new Mu(u,void 0)}transitioned(u,h){return new jA(this.property,this.value,h,gt({},u.transition,this.transition),u.now)}untransitioned(){return new jA(this.property,this.value,null,{},0)}}class th{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Pe(this._values[u].value.value)}setValue(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new fc(this._values[u].property)),this._values[u].value=new Mu(this._values[u].property,h===null?void 0:Pe(h))}getTransition(u){return Pe(this._values[u].transition)}setTransition(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new fc(this._values[u].property)),this._values[u].transition=Pe(h)||void 0}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v);const M=this.getTransition(h);M!==void 0&&(u[`${h}-transition`]=M)}return u}transitioned(u,h){const v=new pc(this._properties);for(const M of Object.keys(this._values))v._values[M]=this._values[M].transitioned(u,h._values[M]);return v}untransitioned(){const u=new pc(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].untransitioned();return u}}class jA{constructor(u,h,v,M,K){this.property=u,this.value=h,this.begin=K+M.delay||0,this.end=this.begin+M.duration||0,u.specification.transition&&(M.delay||M.duration)&&(this.prior=v)}possiblyEvaluate(u,h,v){const M=u.now||0,K=this.value.possiblyEvaluate(u,h,v),U=this.prior;if(U){if(M>this.end)return this.prior=null,K;if(this.value.isDataDriven())return this.prior=null,K;if(M<this.begin)return U.possiblyEvaluate(u,h,v);{const W=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(U.possiblyEvaluate(u,h,v),K,Me(W))}}return K}}class pc{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,h,v){const M=new fs(this._properties);for(const K of Object.keys(this._values))M._values[K]=this._values[K].possiblyEvaluate(u,h,v);return M}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Ta{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Pe(this._values[u].value)}setValue(u,h){this._values[u]=new Mu(this._values[u].property,h===null?void 0:Pe(h))}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v)}return u}possiblyEvaluate(u,h,v){const M=new fs(this._properties);for(const K of Object.keys(this._values))M._values[K]=this._values[K].possiblyEvaluate(u,h,v);return M}}class xs{constructor(u,h,v){this.property=u,this.value=h,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,h,v,M){return this.property.evaluate(this.value,this.parameters,u,h,v,M)}}class fs{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Pr{constructor(u){this.specification=u}possiblyEvaluate(u,h){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(h)}interpolate(u,h,v){const M=Xi[this.specification.type];return M?M(u,h,v):u}}class Hr{constructor(u,h){this.specification=u,this.overrides=h}possiblyEvaluate(u,h,v,M){return new xs(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(h,null,{},v,M)}:u.expression,h)}interpolate(u,h,v){if(u.value.kind!=="constant"||h.value.kind!=="constant")return u;if(u.value.value===void 0||h.value.value===void 0)return new xs(this,{kind:"constant",value:void 0},u.parameters);const M=Xi[this.specification.type];if(M){const K=M(u.value.value,h.value.value,v);return new xs(this,{kind:"constant",value:K},u.parameters)}return u}evaluate(u,h,v,M,K,U){return u.kind==="constant"?u.value:u.evaluate(h,v,M,K,U)}}class NA extends Hr{possiblyEvaluate(u,h,v,M){if(u.value===void 0)return new xs(this,{kind:"constant",value:void 0},h);if(u.expression.kind==="constant"){const K=u.expression.evaluate(h,null,{},v,M),U=u.property.specification.type==="resolvedImage"&&typeof K!="string"?K.name:K,W=this._calculate(U,U,U,h);return new xs(this,{kind:"constant",value:W},h)}if(u.expression.kind==="camera"){const K=this._calculate(u.expression.evaluate({zoom:h.zoom-1}),u.expression.evaluate({zoom:h.zoom}),u.expression.evaluate({zoom:h.zoom+1}),h);return new xs(this,{kind:"constant",value:K},h)}return new xs(this,u.expression,h)}evaluate(u,h,v,M,K,U){if(u.kind==="source"){const W=u.evaluate(h,v,M,K,U);return this._calculate(W,W,W,h)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(h.zoom)-1},v,M),u.evaluate({zoom:Math.floor(h.zoom)},v,M),u.evaluate({zoom:Math.floor(h.zoom)+1},v,M),h):u.value}_calculate(u,h,v,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class Su{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,M){if(u.value!==void 0){if(u.expression.kind==="constant"){const K=u.expression.evaluate(h,null,{},v,M);return this._calculate(K,K,K,h)}return this._calculate(u.expression.evaluate(new Lo(Math.floor(h.zoom-1),h)),u.expression.evaluate(new Lo(Math.floor(h.zoom),h)),u.expression.evaluate(new Lo(Math.floor(h.zoom+1),h)),h)}}_calculate(u,h,v,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class pl{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,M){return!!u.expression.evaluate(h,null,{},v,M)}interpolate(){return!1}}class ou{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in u){const v=u[h];v.specification.overridable&&this.overridableProperties.push(h);const M=this.defaultPropertyValues[h]=new Mu(v,void 0),K=this.defaultTransitionablePropertyValues[h]=new fc(v);this.defaultTransitioningPropertyValues[h]=K.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=M.possiblyEvaluate({})}}}hr("DataDrivenProperty",Hr),hr("DataConstantProperty",Pr),hr("CrossFadedDataDrivenProperty",NA),hr("CrossFadedProperty",Su),hr("ColorRampProperty",pl);const Pd="-transition";class gA extends tr{constructor(u,h){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),h.layout&&(this._unevaluatedLayout=new Ta(h.layout)),h.paint)){this._transitionablePaint=new th(h.paint);for(const v in u.paint)this.setPaintProperty(v,u.paint[v],{validate:!1});for(const v in u.layout)this.setLayoutProperty(v,u.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fs(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,h,v={}){h!=null&&this._validate(Es,`layers.${this.id}.layout.${u}`,u,h,v)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,h):this.visibility=h)}getPaintProperty(u){return u.endsWith(Pd)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,h,v={}){if(h!=null&&this._validate(zs,`layers.${this.id}.paint.${u}`,u,h,v))return!1;if(u.endsWith(Pd))return this._transitionablePaint.setTransition(u.slice(0,-11),h||void 0),!1;{const M=this._transitionablePaint._values[u],K=M.property.specification["property-type"]==="cross-faded-data-driven",U=M.value.isDataDriven(),W=M.value;this._transitionablePaint.setValue(u,h),this._handleSpecialPaintPropertyUpdate(u);const X=this._transitionablePaint._values[u].value;return X.isDataDriven()||U||K||this._handleOverridablePaintPropertyUpdate(u,W,X)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,h,v){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,h){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,h)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Ue(u,(h,v)=>!(h===void 0||v==="layout"&&!Object.keys(h).length||v==="paint"&&!Object.keys(h).length))}_validate(u,h,v,M,K={}){return(!K||K.validate!==!1)&&Kc(this,u.call(mA,{key:h,layerType:this.type,objectKey:v,value:M,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const h=this.paint.get(u);if(h instanceof xs&&xu(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const mc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ml{constructor(u,h){this._structArray=u,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ys{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,h){return u._trim(),h&&(u.isTransferred=!0,h.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const h=Object.create(this.prototype);return h.arrayBuffer=u.arrayBuffer,h.length=u.length,h.capacity=u.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ys(d,u=1){let h=0,v=0;return{members:d.map(M=>{const K=mc[M.type].BYTES_PER_ELEMENT,U=h=id(h,Math.max(u,K)),W=M.components||1;return v=Math.max(v,K),h+=K*W,{name:M.name,type:M.type,components:W,offset:U}}),size:id(h,Math.max(v,u)),alignment:u}}function id(d,u){return Math.ceil(d/u)*u}class Kd extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const M=2*u;return this.int16[M+0]=h,this.int16[M+1]=v,u}}Kd.prototype.bytesPerElement=4,hr("StructArrayLayout2i4",Kd);class yA extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,h,v)}emplace(u,h,v,M){const K=3*u;return this.int16[K+0]=h,this.int16[K+1]=v,this.int16[K+2]=M,u}}yA.prototype.bytesPerElement=6,hr("StructArrayLayout3i6",yA);class js extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,M){const K=this.length;return this.resize(K+1),this.emplace(K,u,h,v,M)}emplace(u,h,v,M,K){const U=4*u;return this.int16[U+0]=h,this.int16[U+1]=v,this.int16[U+2]=M,this.int16[U+3]=K,u}}js.prototype.bytesPerElement=8,hr("StructArrayLayout4i8",js);class Fc extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,M,K,U)}emplace(u,h,v,M,K,U,W){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.int16[X+2]=M,this.int16[X+3]=K,this.int16[X+4]=U,this.int16[X+5]=W,u}}Fc.prototype.bytesPerElement=12,hr("StructArrayLayout2i4i12",Fc);class Eu extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,M,K,U)}emplace(u,h,v,M,K,U,W){const X=4*u,re=8*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.uint8[re+4]=M,this.uint8[re+5]=K,this.uint8[re+6]=U,this.uint8[re+7]=W,u}}Eu.prototype.bytesPerElement=8,hr("StructArrayLayout2i4ub8",Eu);class Ya extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const M=2*u;return this.float32[M+0]=h,this.float32[M+1]=v,u}}Ya.prototype.bytesPerElement=8,hr("StructArrayLayout2f8",Ya);class Zu extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U,W,X,re,de){const _e=this.length;return this.resize(_e+1),this.emplace(_e,u,h,v,M,K,U,W,X,re,de)}emplace(u,h,v,M,K,U,W,X,re,de,_e){const Re=10*u;return this.uint16[Re+0]=h,this.uint16[Re+1]=v,this.uint16[Re+2]=M,this.uint16[Re+3]=K,this.uint16[Re+4]=U,this.uint16[Re+5]=W,this.uint16[Re+6]=X,this.uint16[Re+7]=re,this.uint16[Re+8]=de,this.uint16[Re+9]=_e,u}}Zu.prototype.bytesPerElement=20,hr("StructArrayLayout10ui20",Zu);class Lc extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U,W,X,re,de,_e,Re){const ze=this.length;return this.resize(ze+1),this.emplace(ze,u,h,v,M,K,U,W,X,re,de,_e,Re)}emplace(u,h,v,M,K,U,W,X,re,de,_e,Re,ze){const Ge=12*u;return this.int16[Ge+0]=h,this.int16[Ge+1]=v,this.int16[Ge+2]=M,this.int16[Ge+3]=K,this.uint16[Ge+4]=U,this.uint16[Ge+5]=W,this.uint16[Ge+6]=X,this.uint16[Ge+7]=re,this.int16[Ge+8]=de,this.int16[Ge+9]=_e,this.int16[Ge+10]=Re,this.int16[Ge+11]=ze,u}}Lc.prototype.bytesPerElement=24,hr("StructArrayLayout4i4ui4i24",Lc);class Bu extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,h,v)}emplace(u,h,v,M){const K=3*u;return this.float32[K+0]=h,this.float32[K+1]=v,this.float32[K+2]=M,u}}Bu.prototype.bytesPerElement=12,hr("StructArrayLayout3f12",Bu);class va extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint32[1*u+0]=h,u}}va.prototype.bytesPerElement=4,hr("StructArrayLayout1ul4",va);class $s extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U,W,X,re){const de=this.length;return this.resize(de+1),this.emplace(de,u,h,v,M,K,U,W,X,re)}emplace(u,h,v,M,K,U,W,X,re,de){const _e=10*u,Re=5*u;return this.int16[_e+0]=h,this.int16[_e+1]=v,this.int16[_e+2]=M,this.int16[_e+3]=K,this.int16[_e+4]=U,this.int16[_e+5]=W,this.uint32[Re+3]=X,this.uint16[_e+8]=re,this.uint16[_e+9]=de,u}}$s.prototype.bytesPerElement=20,hr("StructArrayLayout6i1ul2ui20",$s);class su extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,M,K,U)}emplace(u,h,v,M,K,U,W){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=v,this.int16[X+2]=M,this.int16[X+3]=K,this.int16[X+4]=U,this.int16[X+5]=W,u}}su.prototype.bytesPerElement=12,hr("StructArrayLayout2i2i2i12",su);class au extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K){const U=this.length;return this.resize(U+1),this.emplace(U,u,h,v,M,K)}emplace(u,h,v,M,K,U){const W=4*u,X=8*u;return this.float32[W+0]=h,this.float32[W+1]=v,this.float32[W+2]=M,this.int16[X+6]=K,this.int16[X+7]=U,u}}au.prototype.bytesPerElement=16,hr("StructArrayLayout2f1f2i16",au);class WA extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U){const W=this.length;return this.resize(W+1),this.emplace(W,u,h,v,M,K,U)}emplace(u,h,v,M,K,U,W){const X=16*u,re=4*u,de=8*u;return this.uint8[X+0]=h,this.uint8[X+1]=v,this.float32[re+1]=M,this.float32[re+2]=K,this.int16[de+6]=U,this.int16[de+7]=W,u}}WA.prototype.bytesPerElement=16,hr("StructArrayLayout2ub2f2i16",WA);class lu extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,h,v)}emplace(u,h,v,M){const K=3*u;return this.uint16[K+0]=h,this.uint16[K+1]=v,this.uint16[K+2]=M,u}}lu.prototype.bytesPerElement=6,hr("StructArrayLayout3ui6",lu);class Uc extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct)}emplace(u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt){const Et=24*u,Le=12*u,lt=48*u;return this.int16[Et+0]=h,this.int16[Et+1]=v,this.uint16[Et+2]=M,this.uint16[Et+3]=K,this.uint32[Le+2]=U,this.uint32[Le+3]=W,this.uint32[Le+4]=X,this.uint16[Et+10]=re,this.uint16[Et+11]=de,this.uint16[Et+12]=_e,this.float32[Le+7]=Re,this.float32[Le+8]=ze,this.uint8[lt+36]=Ge,this.uint8[lt+37]=et,this.uint8[lt+38]=At,this.uint32[Le+10]=Ct,this.int16[Et+22]=Nt,u}}Uc.prototype.bytesPerElement=48,hr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Uc);class vA extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et,Le,lt,Ot,An,zn,Cn,fn,jn,Wn){const cr=this.length;return this.resize(cr+1),this.emplace(cr,u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et,Le,lt,Ot,An,zn,Cn,fn,jn,Wn)}emplace(u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et,Le,lt,Ot,An,zn,Cn,fn,jn,Wn,cr){const kn=32*u,jr=16*u;return this.int16[kn+0]=h,this.int16[kn+1]=v,this.int16[kn+2]=M,this.int16[kn+3]=K,this.int16[kn+4]=U,this.int16[kn+5]=W,this.int16[kn+6]=X,this.int16[kn+7]=re,this.uint16[kn+8]=de,this.uint16[kn+9]=_e,this.uint16[kn+10]=Re,this.uint16[kn+11]=ze,this.uint16[kn+12]=Ge,this.uint16[kn+13]=et,this.uint16[kn+14]=At,this.uint16[kn+15]=Ct,this.uint16[kn+16]=Nt,this.uint16[kn+17]=Et,this.uint16[kn+18]=Le,this.uint16[kn+19]=lt,this.uint16[kn+20]=Ot,this.uint16[kn+21]=An,this.uint16[kn+22]=zn,this.uint32[jr+12]=Cn,this.float32[jr+13]=fn,this.float32[jr+14]=jn,this.uint16[kn+30]=Wn,this.uint16[kn+31]=cr,u}}vA.prototype.bytesPerElement=64,hr("StructArrayLayout8i15ui1ul2f2ui64",vA);class Sl extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.float32[1*u+0]=h,u}}Sl.prototype.bytesPerElement=4,hr("StructArrayLayout1f4",Sl);class Dd extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,h,v)}emplace(u,h,v,M){const K=3*u;return this.uint16[6*u+0]=h,this.float32[K+1]=v,this.float32[K+2]=M,u}}Dd.prototype.bytesPerElement=12,hr("StructArrayLayout1ui2f12",Dd);class I extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const M=this.length;return this.resize(M+1),this.emplace(M,u,h,v)}emplace(u,h,v,M){const K=4*u;return this.uint32[2*u+0]=h,this.uint16[K+2]=v,this.uint16[K+3]=M,u}}I.prototype.bytesPerElement=8,hr("StructArrayLayout1ul2ui8",I);class l extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const M=2*u;return this.uint16[M+0]=h,this.uint16[M+1]=v,u}}l.prototype.bytesPerElement=4,hr("StructArrayLayout2ui4",l);class c extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint16[1*u+0]=h,u}}c.prototype.bytesPerElement=2,hr("StructArrayLayout1ui2",c);class _ extends ys{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,M){const K=this.length;return this.resize(K+1),this.emplace(K,u,h,v,M)}emplace(u,h,v,M,K){const U=4*u;return this.float32[U+0]=h,this.float32[U+1]=v,this.float32[U+2]=M,this.float32[U+3]=K,u}}_.prototype.bytesPerElement=16,hr("StructArrayLayout4f16",_);class w extends Ml{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new F(this.anchorPointX,this.anchorPointY)}}w.prototype.size=20;class P extends $s{get(u){return new w(this,u)}}hr("CollisionBoxArray",P);class z extends Ml{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}z.prototype.size=48;class Y extends Uc{get(u){return new z(this,u)}}hr("PlacedSymbolArray",Y);class ee extends Ml{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ee.prototype.size=64;class ae extends vA{get(u){return new ee(this,u)}}hr("SymbolInstanceArray",ae);class xe extends Sl{getoffsetX(u){return this.float32[1*u+0]}}hr("GlyphOffsetArray",xe);class ke extends yA{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}hr("SymbolLineVertexArray",ke);class Ke extends Ml{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ke.prototype.size=12;class $e extends Dd{get(u){return new Ke(this,u)}}hr("TextAnchorOffsetArray",$e);class Xe extends Ml{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Xe.prototype.size=8;class pt extends I{get(u){return new Xe(this,u)}}hr("FeatureIndexArray",pt);class ut extends Kd{}class mt extends Kd{}class vt extends Kd{}class Bt extends Fc{}class kt extends Eu{}class Rt extends Ya{}class zt extends Zu{}class Tt extends Lc{}class nn extends Bu{}class Zt extends va{}class Mn extends su{}class Bn extends WA{}class yn extends lu{}class In extends l{}const Nn=Ys([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fn}=Nn;class pr{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,h,v,M){const K=this.segments[this.segments.length-1];return u>pr.MAX_VERTEX_ARRAY_LENGTH&&it(`Max vertices per segment is ${pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${pr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!K||K.vertexLength+u>pr.MAX_VERTEX_ARRAY_LENGTH||K.sortKey!==M?this.createNewSegment(h,v,M):K}createNewSegment(u,h,v){const M={vertexOffset:u.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(M.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(M),M}getOrCreateLatestSegment(u,h,v){return this.prepareSegment(0,u,h,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const h in u.vaos)u.vaos[h].destroy()}static simpleSegment(u,h,v,M){return new pr([{vertexOffset:u,primitiveOffset:h,vertexLength:v,primitiveLength:M,vaos:{},sortKey:0}])}}function Ti(d,u){return 256*(d=bt(Math.floor(d),0,255))+bt(Math.floor(u),0,255)}pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hr("SegmentVector",pr);const Gi=Ys([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Uo,Si,ps,To={exports:{}},Po={exports:{}},Co={exports:{}},il=function(){if(ps)return To.exports;ps=1;var d=(Uo||(Uo=1,Po.exports=function(h,v){var M,K,U,W,X,re,de,_e;for(K=h.length-(M=3&h.length),U=v,X=3432918353,re=461845907,_e=0;_e<K;)de=255&h.charCodeAt(_e)|(255&h.charCodeAt(++_e))<<8|(255&h.charCodeAt(++_e))<<16|(255&h.charCodeAt(++_e))<<24,++_e,U=27492+(65535&(W=5*(65535&(U=(U^=de=(65535&(de=(de=(65535&de)*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295)<<13|U>>>19))+((5*(U>>>16)&65535)<<16)&4294967295))+((58964+(W>>>16)&65535)<<16);switch(de=0,M){case 3:de^=(255&h.charCodeAt(_e+2))<<16;case 2:de^=(255&h.charCodeAt(_e+1))<<8;case 1:U^=de=(65535&(de=(de=(65535&(de^=255&h.charCodeAt(_e)))*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295}return U^=h.length,U=2246822507*(65535&(U^=U>>>16))+((2246822507*(U>>>16)&65535)<<16)&4294967295,U=3266489909*(65535&(U^=U>>>13))+((3266489909*(U>>>16)&65535)<<16)&4294967295,(U^=U>>>16)>>>0}),Po.exports),u=(Si||(Si=1,Co.exports=function(h,v){for(var M,K=h.length,U=v^K,W=0;K>=4;)M=1540483477*(65535&(M=255&h.charCodeAt(W)|(255&h.charCodeAt(++W))<<8|(255&h.charCodeAt(++W))<<16|(255&h.charCodeAt(++W))<<24))+((1540483477*(M>>>16)&65535)<<16),U=1540483477*(65535&U)+((1540483477*(U>>>16)&65535)<<16)^(M=1540483477*(65535&(M^=M>>>24))+((1540483477*(M>>>16)&65535)<<16)),K-=4,++W;switch(K){case 3:U^=(255&h.charCodeAt(W+2))<<16;case 2:U^=(255&h.charCodeAt(W+1))<<8;case 1:U=1540483477*(65535&(U^=255&h.charCodeAt(W)))+((1540483477*(U>>>16)&65535)<<16)}return U=1540483477*(65535&(U^=U>>>13))+((1540483477*(U>>>16)&65535)<<16),(U^=U>>>15)>>>0}),Co.exports);return To.exports=d,To.exports.murmur3=d,To.exports.murmur2=u,To.exports}(),Jo=f(il);class es{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,h,v,M){this.ids.push(ol(u)),this.positions.push(h,v,M)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ol(u);let v=0,M=this.ids.length-1;for(;v<M;){const U=v+M>>1;this.ids[U]>=h?M=U:v=U+1}const K=[];for(;this.ids[v]===h;)K.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return K}static serialize(u,h){const v=new Float64Array(u.ids),M=new Uint32Array(u.positions);return CA(v,M,0,v.length-1),h&&h.push(v.buffer,M.buffer),{ids:v,positions:M}}static deserialize(u){const h=new es;return h.ids=u.ids,h.positions=u.positions,h.indexed=!0,h}}function ol(d){const u=+d;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:Jo(String(d))}function CA(d,u,h,v){for(;h<v;){const M=d[h+v>>1];let K=h-1,U=v+1;for(;;){do K++;while(d[K]<M);do U--;while(d[U]>M);if(K>=U)break;uu(d,K,U),uu(u,3*K,3*U),uu(u,3*K+1,3*U+1),uu(u,3*K+2,3*U+2)}U-h<v-U?(CA(d,u,h,U),h=U+1):(CA(d,u,U+1,v),v=U)}}function uu(d,u,h){const v=d[u];d[u]=d[h],d[h]=v}hr("FeaturePositionMap",es);class Pa{constructor(u,h){this.gl=u.gl,this.location=h}}class El extends Pa{constructor(u,h){super(u,h),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class GA extends Pa{constructor(u,h){super(u,h),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class _A extends Pa{constructor(u,h){super(u,h),this.current=Ai.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const QA=new Float32Array(16);function ca(d){return[Ti(255*d.r,255*d.g),Ti(255*d.b,255*d.a)]}class Bl{constructor(u,h,v){this.value=u,this.uniformNames=h.map(M=>`u_${M}`),this.type=v}setUniform(u,h,v){u.set(v.constantOr(this.value))}getBinding(u,h,v){return this.type==="color"?new _A(u,h):new El(u,h)}}class Ka{constructor(u,h){this.uniformNames=h.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=u.tlbr}setUniform(u,h,v,M){const K=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;K&&u.set(K)}getBinding(u,h,v){return v.substr(0,9)==="u_pattern"?new GA(u,h):new El(u,h)}}class Au{constructor(u,h,v,M){this.expression=u,this.type=v,this.maxValue=0,this.paintVertexAttributes=h.map(K=>({name:`a_${K}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(u,h,v,M,K){const U=this.paintVertexArray.length,W=this.expression.evaluate(new Lo(0),h,{},M,[],K);this.paintVertexArray.resize(u),this._setPaintValue(U,u,W)}updatePaintArray(u,h,v,M){const K=this.expression.evaluate({zoom:0},v,M);this._setPaintValue(u,h,K)}_setPaintValue(u,h,v){if(this.type==="color"){const M=ca(v);for(let K=u;K<h;K++)this.paintVertexArray.emplace(K,M[0],M[1])}else{for(let M=u;M<h;M++)this.paintVertexArray.emplace(M,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ss{constructor(u,h,v,M,K,U){this.expression=u,this.uniformNames=h.map(W=>`u_${W}_t`),this.type=v,this.useIntegerZoom=M,this.zoom=K,this.maxValue=0,this.paintVertexAttributes=h.map(W=>({name:`a_${W}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new U}populatePaintArray(u,h,v,M,K){const U=this.expression.evaluate(new Lo(this.zoom),h,{},M,[],K),W=this.expression.evaluate(new Lo(this.zoom+1),h,{},M,[],K),X=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(X,u,U,W)}updatePaintArray(u,h,v,M){const K=this.expression.evaluate({zoom:this.zoom},v,M),U=this.expression.evaluate({zoom:this.zoom+1},v,M);this._setPaintValue(u,h,K,U)}_setPaintValue(u,h,v,M){if(this.type==="color"){const K=ca(v),U=ca(M);for(let W=u;W<h;W++)this.paintVertexArray.emplace(W,K[0],K[1],U[0],U[1])}else{for(let K=u;K<h;K++)this.paintVertexArray.emplace(K,v,M);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(M))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,h){const v=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,M=bt(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);u.set(M)}getBinding(u,h,v){return new El(u,h)}}class as{constructor(u,h,v,M,K,U){this.expression=u,this.type=h,this.useIntegerZoom=v,this.zoom=M,this.layerId=U,this.zoomInPaintVertexArray=new K,this.zoomOutPaintVertexArray=new K}populatePaintArray(u,h,v){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(M,u,h.patterns&&h.patterns[this.layerId],v)}updatePaintArray(u,h,v,M,K){this._setPaintValues(u,h,v.patterns&&v.patterns[this.layerId],K)}_setPaintValues(u,h,v,M){if(!M||!v)return;const{min:K,mid:U,max:W}=v,X=M[K],re=M[U],de=M[W];if(X&&re&&de)for(let _e=u;_e<h;_e++)this.zoomInPaintVertexArray.emplace(_e,re.tl[0],re.tl[1],re.br[0],re.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],re.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(_e,re.tl[0],re.tl[1],re.br[0],re.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],re.pixelRatio,de.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Gi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Gi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ou{constructor(u,h,v){this.binders={},this._buffers=[];const M=[];for(const K in u.paint._values){if(!v(K))continue;const U=u.paint.get(K);if(!(U instanceof xs&&xu(U.property.specification)))continue;const W=nh(K,u.type),X=U.value,re=U.property.specification.type,de=U.property.useIntegerZoom,_e=U.property.specification["property-type"],Re=_e==="cross-faded"||_e==="cross-faded-data-driven";if(X.kind==="constant")this.binders[K]=Re?new Ka(X.value,W):new Bl(X.value,W,re),M.push(`/u_${K}`);else if(X.kind==="source"||Re){const ze=vf(K,re,"source");this.binders[K]=Re?new as(X,re,de,h,ze,u.id):new Au(X,W,re,ze),M.push(`/a_${K}`)}else{const ze=vf(K,re,"composite");this.binders[K]=new ss(X,W,re,de,h,ze),M.push(`/z_${K}`)}}this.cacheKey=M.sort().join("")}getMaxValue(u){const h=this.binders[u];return h instanceof Au||h instanceof ss?h.maxValue:0}populatePaintArrays(u,h,v,M,K){for(const U in this.binders){const W=this.binders[U];(W instanceof Au||W instanceof ss||W instanceof as)&&W.populatePaintArray(u,h,v,M,K)}}setConstantPatternPositions(u,h){for(const v in this.binders){const M=this.binders[v];M instanceof Ka&&M.setConstantPatternPositions(u,h)}}updatePaintArrays(u,h,v,M,K){let U=!1;for(const W in u){const X=h.getPositions(W);for(const re of X){const de=v.feature(re.index);for(const _e in this.binders){const Re=this.binders[_e];if((Re instanceof Au||Re instanceof ss||Re instanceof as)&&Re.expression.isStateDependent===!0){const ze=M.paint.get(_e);Re.expression=ze.value,Re.updatePaintArray(re.start,re.end,de,u[W],K),U=!0}}}}return U}defines(){const u=[];for(const h in this.binders){const v=this.binders[h];(v instanceof Bl||v instanceof Ka)&&u.push(...v.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return u}getBinderAttributes(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof Au||v instanceof ss)for(let M=0;M<v.paintVertexAttributes.length;M++)u.push(v.paintVertexAttributes[M].name);else if(v instanceof as)for(let M=0;M<Gi.members.length;M++)u.push(Gi.members[M].name)}return u}getBinderUniforms(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof Bl||v instanceof Ka||v instanceof ss)for(const M of v.uniformNames)u.push(M)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,h){const v=[];for(const M in this.binders){const K=this.binders[M];if(K instanceof Bl||K instanceof Ka||K instanceof ss){for(const U of K.uniformNames)if(h[U]){const W=K.getBinding(u,h[U],U);v.push({name:U,property:M,binding:W})}}}return v}setUniforms(u,h,v,M){for(const{name:K,property:U,binding:W}of h)this.binders[U].setUniform(W,M,v.get(U),K)}updatePaintBuffers(u){this._buffers=[];for(const h in this.binders){const v=this.binders[h];if(u&&v instanceof as){const M=u.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(v instanceof Au||v instanceof ss)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(u){for(const h in this.binders){const v=this.binders[h];(v instanceof Au||v instanceof ss||v instanceof as)&&v.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const h=this.binders[u];(h instanceof Au||h instanceof ss||h instanceof as)&&h.destroy()}}}class Vs{constructor(u,h,v=()=>!0){this.programConfigurations={};for(const M of u)this.programConfigurations[M.id]=new Ou(M,h,v);this.needsUpload=!1,this._featureMap=new es,this._bufferOffset=0}populatePaintArrays(u,h,v,M,K,U){for(const W in this.programConfigurations)this.programConfigurations[W].populatePaintArrays(u,h,M,K,U);h.id!==void 0&&this._featureMap.add(h.id,v,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,h,v,M){for(const K of v)this.needsUpload=this.programConfigurations[K.id].updatePaintArrays(u,this._featureMap,h,K,M)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function nh(d,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${u}-`,"").replace(/-/g,"_")]}function vf(d,u,h){const v={color:{source:Ya,composite:_},number:{source:Sl,composite:Ya}},M=function(K){return{"line-pattern":{source:zt,composite:zt},"fill-pattern":{source:zt,composite:zt},"fill-extrusion-pattern":{source:zt,composite:zt}}[K]}(d);return M&&M[h]||v[u][h]}hr("ConstantBinder",Bl),hr("CrossFadedConstantBinder",Ka),hr("SourceExpressionBinder",Au),hr("CrossFadedCompositeBinder",as),hr("CompositeExpressionBinder",ss),hr("ProgramConfiguration",Ou,{omit:["_buffers"]}),hr("ProgramConfigurationSet",Vs);const rh=Math.pow(2,14)-1,Dp=-rh-1;function gc(d){const u=at/d.extent,h=d.loadGeometry();for(let v=0;v<h.length;v++){const M=h[v];for(let K=0;K<M.length;K++){const U=M[K],W=Math.round(U.x*u),X=Math.round(U.y*u);U.x=bt(W,Dp,rh),U.y=bt(X,Dp,rh),(W<U.x||W>U.x+1||X<U.y||X>U.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function yc(d,u){return{type:d.type,id:d.id,properties:d.properties,geometry:u?gc(d):[]}}const Ca=-32768;function Xu(d,u,h,v,M){d.emplaceBack(Ca+8*u+v,Ca+8*h+M)}class od{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new mt,this.indexArray=new yn,this.segments=new pr,this.programConfigurations=new Vs(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){const M=this.layers[0],K=[];let U=null,W=!1,X=M.type==="heatmap";if(M.type==="circle"){const de=M;U=de.layout.get("circle-sort-key"),W=!U.isConstant(),X=X||de.paint.get("circle-pitch-alignment")==="map"}const re=X?h.subdivisionGranularity.circle:1;for(const{feature:de,id:_e,index:Re,sourceLayerIndex:ze}of u){const Ge=this.layers[0]._featureFilter.needGeometry,et=yc(de,Ge);if(!this.layers[0]._featureFilter.filter(new Lo(this.zoom),et,v))continue;const At=W?U.evaluate(et,{},v):void 0,Ct={id:_e,properties:de.properties,type:de.type,sourceLayerIndex:ze,index:Re,geometry:Ge?et.geometry:gc(de),patterns:{},sortKey:At};K.push(Ct)}W&&K.sort((de,_e)=>de.sortKey-_e.sortKey);for(const de of K){const{geometry:_e,index:Re,sourceLayerIndex:ze}=de,Ge=u[Re].feature;this.addFeature(de,_e,Re,v,re),h.featureIndex.insert(Ge,_e,Re,ze,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Fn),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,h,v,M,K=1){let U;switch(K){case 1:U=[0,7];break;case 3:U=[0,2,5,7];break;case 5:U=[0,1,3,4,6,7];break;case 7:U=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${K}; valid values are 1, 3, 5, 7.`)}const W=U.length;for(const X of h)for(const re of X){const de=re.x,_e=re.y;if(de<0||de>=at||_e<0||_e>=at)continue;const Re=this.segments.prepareSegment(W*W,this.layoutVertexArray,this.indexArray,u.sortKey),ze=Re.vertexLength;for(let Ge=0;Ge<W;Ge++)for(let et=0;et<W;et++)Xu(this.layoutVertexArray,de,_e,U[et],U[Ge]);for(let Ge=0;Ge<W-1;Ge++)for(let et=0;et<W-1;et++){const At=ze+Ge*W+et,Ct=ze+(Ge+1)*W+et;this.indexArray.emplaceBack(At,Ct+1,At+1),this.indexArray.emplaceBack(At,Ct,Ct+1)}Re.vertexLength+=W*W,Re.primitiveLength+=(W-1)*(W-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,{},M)}}function tp(d,u){for(let h=0;h<d.length;h++)if(oh(u,d[h]))return!0;for(let h=0;h<u.length;h++)if(oh(d,u[h]))return!0;return!!Cf(d,u)}function sd(d,u,h){return!!oh(d,u)||!!rp(u,d,h)}function bA(d,u){if(d.length===1)return Lh(u,d[0]);for(let h=0;h<u.length;h++){const v=u[h];for(let M=0;M<v.length;M++)if(oh(d,v[M]))return!0}for(let h=0;h<d.length;h++)if(Lh(u,d[h]))return!0;for(let h=0;h<u.length;h++)if(Cf(d,u[h]))return!0;return!1}function ml(d,u,h){if(d.length>1){if(Cf(d,u))return!0;for(let v=0;v<u.length;v++)if(rp(u[v],d,h))return!0}for(let v=0;v<d.length;v++)if(rp(d[v],u,h))return!0;return!1}function Cf(d,u){if(d.length===0||u.length===0)return!1;for(let h=0;h<d.length-1;h++){const v=d[h],M=d[h+1];for(let K=0;K<u.length-1;K++)if(np(v,M,u[K],u[K+1]))return!0}return!1}function np(d,u,h,v){return _t(d,h,v)!==_t(u,h,v)&&_t(d,u,h)!==_t(d,u,v)}function rp(d,u,h){const v=h*h;if(u.length===1)return d.distSqr(u[0])<v;for(let M=1;M<u.length;M++)if(ih(d,u[M-1],u[M])<v)return!0;return!1}function ih(d,u,h){const v=u.distSqr(h);if(v===0)return d.distSqr(u);const M=((d.x-u.x)*(h.x-u.x)+(d.y-u.y)*(h.y-u.y))/v;return d.distSqr(M<0?u:M>1?h:h.sub(u)._mult(M)._add(u))}function Lh(d,u){let h,v,M,K=!1;for(let U=0;U<d.length;U++){h=d[U];for(let W=0,X=h.length-1;W<h.length;X=W++)v=h[W],M=h[X],v.y>u.y!=M.y>u.y&&u.x<(M.x-v.x)*(u.y-v.y)/(M.y-v.y)+v.x&&(K=!K)}return K}function oh(d,u){let h=!1;for(let v=0,M=d.length-1;v<d.length;M=v++){const K=d[v],U=d[M];K.y>u.y!=U.y>u.y&&u.x<(U.x-K.x)*(u.y-K.y)/(U.y-K.y)+K.x&&(h=!h)}return h}function sh(d,u,h){const v=h[0],M=h[2];if(d.x<v.x&&u.x<v.x||d.x>M.x&&u.x>M.x||d.y<v.y&&u.y<v.y||d.y>M.y&&u.y>M.y)return!1;const K=_t(d,u,h[0]);return K!==_t(d,u,h[1])||K!==_t(d,u,h[2])||K!==_t(d,u,h[3])}function ah(d,u,h){const v=u.paint.get(d).value;return v.kind==="constant"?v.value:h.programConfigurations.get(u.id).getMaxValue(d)}function Rd(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function _f(d,u,h,v,M){if(!u[0]&&!u[1])return d;const K=F.convert(u)._mult(M);h==="viewport"&&K._rotate(-v);const U=[];for(let W=0;W<d.length;W++)U.push(d[W].sub(K));return U}let lh,bf;hr("CircleBucket",od,{omit:["layers"]});var ip={get paint(){return bf=bf||new ou({"circle-radius":new Hr(Oe.paint_circle["circle-radius"]),"circle-color":new Hr(Oe.paint_circle["circle-color"]),"circle-blur":new Hr(Oe.paint_circle["circle-blur"]),"circle-opacity":new Hr(Oe.paint_circle["circle-opacity"]),"circle-translate":new Pr(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Pr(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pr(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pr(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hr(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hr(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hr(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return lh=lh||new ou({"circle-sort-key":new Hr(Oe.layout_circle["circle-sort-key"])})}};class Cm extends gA{constructor(u){super(u,ip)}createBucket(u){return new od(u)}queryRadius(u){const h=u;return ah("circle-radius",this,h)+ah("circle-stroke-width",this,h)+Rd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:M,transform:K,pixelsToTileUnits:U,pixelPosMatrix:W}){const X=_f(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-K.bearingInRadians,U),re=this.paint.get("circle-radius").evaluate(h,v)+this.paint.get("circle-stroke-width").evaluate(h,v),de=this.paint.get("circle-pitch-alignment")==="map",_e=de?X:function(ze,Ge){return ze.map(et=>Fd(et,Ge))}(X,W),Re=de?re*U:re;for(const ze of M)for(const Ge of ze){const et=de?Ge:Fd(Ge,W);let At=Re;const Ct=me([],[Ge.x,Ge.y,0,1],W);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?At*=Ct[3]/K.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(At*=K.cameraToCenterDistance/Ct[3]),sd(_e,et,At))return!0}return!1}}function Fd(d,u){const h=me([],[d.x,d.y,0,1],u);return new F(h[0]/h[3],h[1]/h[3])}class xf extends od{}let Ol;hr("HeatmapBucket",xf,{omit:["layers"]});var cu={get paint(){return Ol=Ol||new ou({"heatmap-radius":new Hr(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hr(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pr(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new pl(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pr(Oe.paint_heatmap["heatmap-opacity"])})}};function Rp(d,{width:u,height:h},v,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==u*h*v)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${u*h*v}`)}else M=new Uint8Array(u*h*v);return d.width=u,d.height=h,d.data=M,d}function Fp(d,{width:u,height:h},v){if(u===d.width&&h===d.height)return;const M=Rp({},{width:u,height:h},v);qo(d,M,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,u),height:Math.min(d.height,h)},v),d.width=u,d.height=h,d.data=M.data}function qo(d,u,h,v,M,K){if(M.width===0||M.height===0)return u;if(M.width>d.width||M.height>d.height||h.x>d.width-M.width||h.y>d.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>u.width||M.height>u.height||v.x>u.width-M.width||v.y>u.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const U=d.data,W=u.data;if(U===W)throw new Error("srcData equals dstData, so image is already copied");for(let X=0;X<M.height;X++){const re=((h.y+X)*d.width+h.x)*K,de=((v.y+X)*u.width+v.x)*K;for(let _e=0;_e<M.width*K;_e++)W[de+_e]=U[re+_e]}return u}class Uh{constructor(u,h){Rp(this,u,1,h)}resize(u){Fp(this,u,1)}clone(){return new Uh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,M,K){qo(u,h,v,M,K,1)}}class du{constructor(u,h){Rp(this,u,4,h)}resize(u){Fp(this,u,4)}replace(u,h){h?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new du({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,M,K){qo(u,h,v,M,K,4)}}function uh(d){const u={},h=d.resolution||256,v=d.clips?d.clips.length:1,M=d.image||new du({width:h,height:v});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const K=(U,W,X)=>{u[d.evaluationKey]=X;const re=d.expression.evaluate(u);M.data[U+W+0]=Math.floor(255*re.r/re.a),M.data[U+W+1]=Math.floor(255*re.g/re.a),M.data[U+W+2]=Math.floor(255*re.b/re.a),M.data[U+W+3]=Math.floor(255*re.a)};if(d.clips)for(let U=0,W=0;U<v;++U,W+=4*h)for(let X=0,re=0;X<h;X++,re+=4){const de=X/(h-1),{start:_e,end:Re}=d.clips[U];K(W,re,_e*(1-de)+Re*de)}else for(let U=0,W=0;U<h;U++,W+=4)K(0,W,U/(h-1));return M}hr("AlphaImage",Uh),hr("RGBAImage",du);const Ju="big-fb";class wf extends gA{createBucket(u){return new xf(u)}constructor(u){super(u,cu),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=uh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ju)&&this.heatmapFbos.delete(Ju)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let op;var zc={get paint(){return op=op||new ou({"hillshade-illumination-direction":new Pr(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pr(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pr(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pr(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pr(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pr(Oe.paint_hillshade["hillshade-accent-color"])})}};class Mf extends gA{constructor(u){super(u,zc)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Sf=Ys([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ef}=Sf;function Ld(d,u,h){const v=h.patternDependencies;let M=!1;for(const K of u){const U=K.paint.get(`${d}-pattern`);U.isConstant()||(M=!0);const W=U.constantOr(null);W&&(M=!0,v[W.to]=!0,v[W.from]=!0)}return M}function jc(d,u,h,v,M){const K=M.patternDependencies;for(const U of u){const W=U.paint.get(`${d}-pattern`).value;if(W.kind!=="constant"){let X=W.evaluate({zoom:v-1},h,{},M.availableImages),re=W.evaluate({zoom:v},h,{},M.availableImages),de=W.evaluate({zoom:v+1},h,{},M.availableImages);X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,de=de&&de.name?de.name:de,K[X]=!0,K[re]=!0,K[de]=!0,h.patterns[U.id]={min:X,mid:re,max:de}}}return h}function xi(d,u,h,v,M){let K;if(M===function(U,W,X,re){let de=0;for(let _e=W,Re=X-re;_e<X;_e+=re)de+=(U[Re]-U[_e])*(U[_e+1]+U[Re+1]),Re=_e;return de}(d,u,h,v)>0)for(let U=u;U<h;U+=v)K=Te(U/v|0,d[U],d[U+1],K);else for(let U=h-v;U>=u;U-=v)K=Te(U/v|0,d[U],d[U+1],K);return K&&E(K,K.next)&&(je(K),K=K.next),K}function vc(d,u){if(!d)return d;u||(u=d);let h,v=d;do if(h=!1,v.steiner||!E(v,v.next)&&g(v.prev,v,v.next)!==0)v=v.next;else{if(je(v),v=u=v.prev,v===v.next)break;h=!0}while(h||v!==u);return u}function zo(d,u,h,v,M,K,U){if(!d)return;!U&&K&&function(X,re,de,_e){let Re=X;do Re.z===0&&(Re.z=sp(Re.x,Re.y,re,de,_e)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next;while(Re!==X);Re.prevZ.nextZ=null,Re.prevZ=null,function(ze){let Ge,et=1;do{let At,Ct=ze;ze=null;let Nt=null;for(Ge=0;Ct;){Ge++;let Et=Ct,Le=0;for(let Ot=0;Ot<et&&(Le++,Et=Et.nextZ,Et);Ot++);let lt=et;for(;Le>0||lt>0&&Et;)Le!==0&&(lt===0||!Et||Ct.z<=Et.z)?(At=Ct,Ct=Ct.nextZ,Le--):(At=Et,Et=Et.nextZ,lt--),Nt?Nt.nextZ=At:ze=At,At.prevZ=Nt,Nt=At;Ct=Et}Nt.nextZ=null,et*=2}while(Ge>1)}(Re)}(d,v,M,K);let W=d;for(;d.prev!==d.next;){const X=d.prev,re=d.next;if(K?Lp(d,v,M,K):Ud(d))u.push(X.i,d.i,re.i),je(d),d=re.next,W=re.next;else if((d=re)===W){U?U===1?zo(d=Iu(vc(d),u),u,h,v,M,K,2):U===2&&e0(d,u,h,v,M,K):zo(vc(d),u,h,v,M,K,1);break}}}function Ud(d){const u=d.prev,h=d,v=d.next;if(g(u,h,v)>=0)return!1;const M=u.x,K=h.x,U=v.x,W=u.y,X=h.y,re=v.y,de=Math.min(M,K,U),_e=Math.min(W,X,re),Re=Math.max(M,K,U),ze=Math.max(W,X,re);let Ge=v.next;for(;Ge!==u;){if(Ge.x>=de&&Ge.x<=Re&&Ge.y>=_e&&Ge.y<=ze&&Ah(M,W,K,X,U,re,Ge.x,Ge.y)&&g(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.next}return!0}function Lp(d,u,h,v){const M=d.prev,K=d,U=d.next;if(g(M,K,U)>=0)return!1;const W=M.x,X=K.x,re=U.x,de=M.y,_e=K.y,Re=U.y,ze=Math.min(W,X,re),Ge=Math.min(de,_e,Re),et=Math.max(W,X,re),At=Math.max(de,_e,Re),Ct=sp(ze,Ge,u,h,v),Nt=sp(et,At,u,h,v);let Et=d.prevZ,Le=d.nextZ;for(;Et&&Et.z>=Ct&&Le&&Le.z<=Nt;){if(Et.x>=ze&&Et.x<=et&&Et.y>=Ge&&Et.y<=At&&Et!==M&&Et!==U&&Ah(W,de,X,_e,re,Re,Et.x,Et.y)&&g(Et.prev,Et,Et.next)>=0||(Et=Et.prevZ,Le.x>=ze&&Le.x<=et&&Le.y>=Ge&&Le.y<=At&&Le!==M&&Le!==U&&Ah(W,de,X,_e,re,Re,Le.x,Le.y)&&g(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Et&&Et.z>=Ct;){if(Et.x>=ze&&Et.x<=et&&Et.y>=Ge&&Et.y<=At&&Et!==M&&Et!==U&&Ah(W,de,X,_e,re,Re,Et.x,Et.y)&&g(Et.prev,Et,Et.next)>=0)return!1;Et=Et.prevZ}for(;Le&&Le.z<=Nt;){if(Le.x>=ze&&Le.x<=et&&Le.y>=Ge&&Le.y<=At&&Le!==M&&Le!==U&&Ah(W,de,X,_e,re,Re,Le.x,Le.y)&&g(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function Iu(d,u){let h=d;do{const v=h.prev,M=h.next.next;!E(v,M)&&S(v,h,h.next,M)&&Ae(v,M)&&Ae(M,v)&&(u.push(v.i,h.i,M.i),je(h),je(h.next),h=d=M),h=h.next}while(h!==d);return vc(h)}function e0(d,u,h,v,M,K){let U=d;do{let W=U.next.next;for(;W!==U.prev;){if(U.i!==W.i&&A(U,W)){let X=Ce(U,W);return U=vc(U,U.next),X=vc(X,X.next),zo(U,u,h,v,M,K,0),void zo(X,u,h,v,M,K,0)}W=W.next}U=U.next}while(U!==d)}function gl(d,u){let h=d.x-u.x;return h===0&&(h=d.y-u.y,h===0)&&(h=(d.next.y-d.y)/(d.next.x-d.x)-(u.next.y-u.y)/(u.next.x-u.x)),h}function _m(d,u){const h=function(M,K){let U=K;const W=M.x,X=M.y;let re,de=-1/0;if(E(M,U))return U;do{if(E(M,U.next))return U.next;if(X<=U.y&&X>=U.next.y&&U.next.y!==U.y){const et=U.x+(X-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(et<=W&&et>de&&(de=et,re=U.x<U.next.x?U:U.next,et===W))return re}U=U.next}while(U!==K);if(!re)return null;const _e=re,Re=re.x,ze=re.y;let Ge=1/0;U=re;do{if(W>=U.x&&U.x>=Re&&W!==U.x&&Wl(X<ze?W:de,X,Re,ze,X<ze?de:W,X,U.x,U.y)){const et=Math.abs(X-U.y)/(W-U.x);Ae(U,M)&&(et<Ge||et===Ge&&(U.x>re.x||U.x===re.x&&Da(re,U)))&&(re=U,Ge=et)}U=U.next}while(U!==_e);return re}(d,u);if(!h)return u;const v=Ce(h,d);return vc(v,v.next),vc(h,h.next)}function Da(d,u){return g(d.prev,d,u.prev)<0&&g(u.next,d,d.next)<0}function sp(d,u,h,v,M){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-h)*M|0)|d<<8))|d<<4))|d<<2))|d<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-v)*M|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function ap(d){let u=d,h=d;do(u.x<h.x||u.x===h.x&&u.y<h.y)&&(h=u),u=u.next;while(u!==d);return h}function Wl(d,u,h,v,M,K,U,W){return(M-U)*(u-W)>=(d-U)*(K-W)&&(d-U)*(v-W)>=(h-U)*(u-W)&&(h-U)*(K-W)>=(M-U)*(v-W)}function Ah(d,u,h,v,M,K,U,W){return!(d===U&&u===W)&&Wl(d,u,h,v,M,K,U,W)}function A(d,u){return d.next.i!==u.i&&d.prev.i!==u.i&&!function(h,v){let M=h;do{if(M.i!==h.i&&M.next.i!==h.i&&M.i!==v.i&&M.next.i!==v.i&&S(M,M.next,h,v))return!0;M=M.next}while(M!==h);return!1}(d,u)&&(Ae(d,u)&&Ae(u,d)&&function(h,v){let M=h,K=!1;const U=(h.x+v.x)/2,W=(h.y+v.y)/2;do M.y>W!=M.next.y>W&&M.next.y!==M.y&&U<(M.next.x-M.x)*(W-M.y)/(M.next.y-M.y)+M.x&&(K=!K),M=M.next;while(M!==h);return K}(d,u)&&(g(d.prev,d,u.prev)||g(d,u.prev,u))||E(d,u)&&g(d.prev,d,d.next)>0&&g(u.prev,u,u.next)>0)}function g(d,u,h){return(u.y-d.y)*(h.x-u.x)-(u.x-d.x)*(h.y-u.y)}function E(d,u){return d.x===u.x&&d.y===u.y}function S(d,u,h,v){const M=Z(g(d,u,h)),K=Z(g(d,u,v)),U=Z(g(h,v,d)),W=Z(g(h,v,u));return M!==K&&U!==W||!(M!==0||!D(d,h,u))||!(K!==0||!D(d,v,u))||!(U!==0||!D(h,d,v))||!(W!==0||!D(h,u,v))}function D(d,u,h){return u.x<=Math.max(d.x,h.x)&&u.x>=Math.min(d.x,h.x)&&u.y<=Math.max(d.y,h.y)&&u.y>=Math.min(d.y,h.y)}function Z(d){return d>0?1:d<0?-1:0}function Ae(d,u){return g(d.prev,d,d.next)<0?g(d,u,d.next)>=0&&g(d,d.prev,u)>=0:g(d,u,d.prev)<0||g(d,d.next,u)<0}function Ce(d,u){const h=yt(d.i,d.x,d.y),v=yt(u.i,u.x,u.y),M=d.next,K=u.prev;return d.next=u,u.prev=d,h.next=M,M.prev=h,v.next=h,h.prev=v,K.next=v,v.prev=K,v}function Te(d,u,h,v){const M=yt(d,u,h);return v?(M.next=v.next,M.prev=v,v.next.prev=M,v.next=M):(M.prev=M,M.next=M),M}function je(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function yt(d,u,h){return{i:d,x:u,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Mt{constructor(u,h){if(h>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=h}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class en{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}en.noSubdivision=new en({fill:new Mt(0,0),line:new Mt(0,0),tile:new Mt(0,0),stencil:new Mt(0,0),circle:1}),hr("SubdivisionGranularityExpression",Mt),hr("SubdivisionGranularitySetting",en);const Qt=-32768,wn=32767;class Ln{constructor(u,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=at/u,this._canonical=h}_getKey(u,h){return(u+=32768)<<16|(h+=32768)<<0}_vertexToIndex(u,h){if(u<-32768||h<-32768||u>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(u),M=0|Math.round(h),K=this._getKey(v,M);if(this._vertexDictionary.has(K))return this._vertexDictionary.get(K);const U=this._vertexBuffer.length/2;return this._vertexDictionary.set(K,U),this._vertexBuffer.push(v,M),U}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(M,K){const U=[];for(let W=0;W<K.length;W+=3){const X=K[W],re=K[W+1],de=K[W+2],_e=M[2*X],Re=M[2*X+1];(M[2*re]-_e)*(M[2*de+1]-Re)-(M[2*re+1]-Re)*(M[2*de]-_e)>0?(U.push(X),U.push(de),U.push(re)):(U.push(X),U.push(re),U.push(de))}return U}(this._vertexBuffer,u);const h=[],v=u.length;for(let M=0;M<v;M+=3){const K=[u[M+0],u[M+1],u[M+2]],U=[this._vertexBuffer[2*u[M+0]+0],this._vertexBuffer[2*u[M+0]+1],this._vertexBuffer[2*u[M+1]+0],this._vertexBuffer[2*u[M+1]+1],this._vertexBuffer[2*u[M+2]+0],this._vertexBuffer[2*u[M+2]+1]];let W=1/0,X=1/0,re=-1/0,de=-1/0;for(let et=0;et<3;et++){const At=U[2*et],Ct=U[2*et+1];W=Math.min(W,At),re=Math.max(re,At),X=Math.min(X,Ct),de=Math.max(de,Ct)}if(W===re||X===de)continue;const _e=Math.floor(W/this._granularityCellSize),Re=Math.ceil(re/this._granularityCellSize),ze=Math.floor(X/this._granularityCellSize),Ge=Math.ceil(de/this._granularityCellSize);if(_e!==Re||ze!==Ge)for(let et=ze;et<Ge;et++){const At=this._scanlineGenerateVertexRingForCellRow(et,U,K);wr(this._vertexBuffer,At,h)}else h.push(...K)}return h}_scanlineGenerateVertexRingForCellRow(u,h,v){const M=u*this._granularityCellSize,K=M+this._granularityCellSize,U=[];for(let W=0;W<3;W++){const X=h[2*W],re=h[2*W+1],de=h[2*(W+1)%6],_e=h[(2*(W+1)+1)%6],Re=h[2*(W+2)%6],ze=h[(2*(W+2)+1)%6],Ge=de-X,et=_e-re,At=Ge===0,Ct=et===0,Nt=(M-re)/et,Et=(K-re)/et,Le=Math.min(Nt,Et),lt=Math.max(Nt,Et);if(!Ct&&(Le>=1||lt<=0)||Ct&&(re<M||re>K)){_e>=M&&_e<=K&&U.push(v[(W+1)%3]);continue}!Ct&&Le>0&&U.push(this._vertexToIndex(X+Ge*Le,re+et*Le));const Ot=X+Ge*Math.max(Le,0),An=X+Ge*Math.min(lt,1);At||this._generateIntraEdgeVertices(U,X,re,de,_e,Ot,An),!Ct&&lt<1&&U.push(this._vertexToIndex(X+Ge*lt,re+et*lt)),(Ct||_e>=M&&_e<=K)&&U.push(v[(W+1)%3]),!Ct&&(_e<=M||_e>=K)&&this._generateInterEdgeVertices(U,X,re,de,_e,Re,ze,An,M,K)}return U}_generateIntraEdgeVertices(u,h,v,M,K,U,W){const X=M-h,re=K-v,de=re===0,_e=de?Math.min(h,M):Math.min(U,W),Re=de?Math.max(h,M):Math.max(U,W),ze=Math.floor(_e/this._granularityCellSize)+1,Ge=Math.ceil(Re/this._granularityCellSize)-1;if(de?h<M:U<W)for(let et=ze;et<=Ge;et++){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,v+re*(At-h)/X))}else for(let et=Ge;et>=ze;et--){const At=et*this._granularityCellSize;u.push(this._vertexToIndex(At,v+re*(At-h)/X))}}_generateInterEdgeVertices(u,h,v,M,K,U,W,X,re,de){const _e=K-v,Re=U-M,ze=W-K,Ge=(re-K)/ze,et=(de-K)/ze,At=Math.min(Ge,et),Ct=Math.max(Ge,et),Nt=M+Re*At;let Et=Math.floor(Math.min(Nt,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(Nt,X)/this._granularityCellSize)-1,lt=X<Nt;const Ot=ze===0;if(Ot&&(W===re||W===de))return;if(Ot||At>=1||Ct<=0){const zn=v-W,Cn=U+(h-U)*Math.min((re-W)/zn,(de-W)/zn);Et=Math.floor(Math.min(Cn,X)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(Cn,X)/this._granularityCellSize)-1,lt=X<Cn}const An=_e>0?de:re;if(lt)for(let zn=Et;zn<=Le;zn++)u.push(this._vertexToIndex(zn*this._granularityCellSize,An));else for(let zn=Le;zn>=Et;zn--)u.push(this._vertexToIndex(zn*this._granularityCellSize,An))}_generateOutline(u){const h=[];for(const v of u){const M=Vn(v,this._granularity,!0),K=this._pointArrayToIndices(M),U=[];for(let W=1;W<K.length;W++)U.push(K[W-1]),U.push(K[W]);h.push(U)}return h}_handlePoles(u){let h=!1,v=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(h||v)&&this._fillPoles(u,h,v)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let h=0;h<u.length;h+=2){const v=u[h+1];v===Qt&&(u[h+1]=-32767),v===wn&&(u[h+1]=32766)}}_generatePoleQuad(u,h,v,M,K,U){M>K!=(U===Qt)?(u.push(h),u.push(v),u.push(this._vertexToIndex(M,U)),u.push(v),u.push(this._vertexToIndex(K,U)),u.push(this._vertexToIndex(M,U))):(u.push(v),u.push(h),u.push(this._vertexToIndex(M,U)),u.push(this._vertexToIndex(K,U)),u.push(v),u.push(this._vertexToIndex(M,U)))}_fillPoles(u,h,v){const M=this._vertexBuffer,K=at,U=u.length;for(let W=2;W<U;W+=3){const X=u[W-2],re=u[W-1],de=u[W],_e=M[2*X],Re=M[2*X+1],ze=M[2*re],Ge=M[2*re+1],et=M[2*de],At=M[2*de+1];h&&(Re===0&&Ge===0&&this._generatePoleQuad(u,X,re,_e,ze,Qt),Ge===0&&At===0&&this._generatePoleQuad(u,re,de,ze,et,Qt),At===0&&Re===0&&this._generatePoleQuad(u,de,X,et,_e,Qt)),v&&(Re===K&&Ge===K&&this._generatePoleQuad(u,X,re,_e,ze,wn),Ge===K&&At===K&&this._generatePoleQuad(u,re,de,ze,et,wn),At===K&&Re===K&&this._generatePoleQuad(u,de,X,et,_e,wn))}}_initializeVertices(u){for(let h=0;h<u.length;h+=2)this._vertexToIndex(u[h],u[h+1])}subdividePolygonInternal(u,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:M}=function(W){const X=[],re=[];for(const de of W)if(de.length!==0){de!==W[0]&&X.push(re.length/2);for(let _e=0;_e<de.length;_e++)re.push(de[_e].x),re.push(de[_e].y)}return{flattened:re,holeIndices:X}}(u);let K;this._initializeVertices(v);try{const W=function(re,de,_e=2){const Re=de&&de.length,ze=Re?de[0]*_e:re.length;let Ge=xi(re,0,ze,_e,!0);const et=[];if(!Ge||Ge.next===Ge.prev)return et;let At,Ct,Nt;if(Re&&(Ge=function(Et,Le,lt,Ot){const An=[];for(let zn=0,Cn=Le.length;zn<Cn;zn++){const fn=xi(Et,Le[zn]*Ot,zn<Cn-1?Le[zn+1]*Ot:Et.length,Ot,!1);fn===fn.next&&(fn.steiner=!0),An.push(ap(fn))}An.sort(gl);for(let zn=0;zn<An.length;zn++)lt=_m(An[zn],lt);return lt}(re,de,Ge,_e)),re.length>80*_e){At=1/0,Ct=1/0;let Et=-1/0,Le=-1/0;for(let lt=_e;lt<ze;lt+=_e){const Ot=re[lt],An=re[lt+1];Ot<At&&(At=Ot),An<Ct&&(Ct=An),Ot>Et&&(Et=Ot),An>Le&&(Le=An)}Nt=Math.max(Et-At,Le-Ct),Nt=Nt!==0?32767/Nt:0}return zo(Ge,et,_e,At,Ct,Nt,0),et}(v,M),X=this._convertIndices(v,W);K=this._subdivideTrianglesScanline(X)}catch(W){console.error(W)}let U=[];return h&&(U=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(K),{verticesFlattened:this._vertexBuffer,indicesTriangles:K,indicesLineList:U}}_convertIndices(u,h){const v=[];for(let M=0;M<h.length;M++)v.push(this._vertexToIndex(u[2*h[M]],u[2*h[M]+1]));return v}_pointArrayToIndices(u){const h=[];for(let v=0;v<u.length;v++){const M=u[v];h.push(this._vertexToIndex(M.x,M.y))}return h}}function sr(d,u,h,v=!0){return new Ln(h,u).subdividePolygonInternal(d,v)}function Vn(d,u,h=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const v=d[0],M=d[d.length-1],K=h&&(v.x!==M.x||v.y!==M.y);if(u<2)return K?[...d,d[0]]:[...d];const U=Math.floor(at/u),W=[];W.push(new F(d[0].x,d[0].y));const X=d.length,re=K?X:X-1;for(let de=0;de<re;de++){const _e=d[de],Re=de<X-1?d[de+1]:d[0],ze=_e.x,Ge=_e.y,et=Re.x,At=Re.y,Ct=ze!==et,Nt=Ge!==At;if(!Ct&&!Nt)continue;const Et=et-ze,Le=At-Ge,lt=Math.abs(Et),Ot=Math.abs(Le);let An=ze,zn=Ge;for(;;){const fn=Et>0?(Math.floor(An/U)+1)*U:(Math.ceil(An/U)-1)*U,jn=Le>0?(Math.floor(zn/U)+1)*U:(Math.ceil(zn/U)-1)*U,Wn=Math.abs(An-fn),cr=Math.abs(zn-jn),kn=Math.abs(An-et),jr=Math.abs(zn-At),gi=Ct?Wn/lt:Number.POSITIVE_INFINITY,di=Nt?cr/Ot:Number.POSITIVE_INFINITY;if((kn<=Wn||!Ct)&&(jr<=cr||!Nt))break;if(gi<di&&Ct||!Nt){An=fn,zn+=Le*gi;const Zr=new F(An,Math.round(zn));W[W.length-1].x===Zr.x&&W[W.length-1].y===Zr.y||W.push(Zr)}else{An+=Et*di,zn=jn;const Zr=new F(Math.round(An),zn);W[W.length-1].x===Zr.x&&W[W.length-1].y===Zr.y||W.push(Zr)}}const Cn=new F(et,At);W[W.length-1].x===Cn.x&&W[W.length-1].y===Cn.y||W.push(Cn)}return W}function wr(d,u,h){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,M=d[2*u[0]];for(let X=1;X<u.length;X++){const re=d[2*u[X]];re<M&&(M=re,v=X)}const K=u.length;let U=v,W=(U+1)%K;for(;;){const X=U-1>=0?U-1:K-1,re=(W+1)%K,de=d[2*u[X]],_e=d[2*u[re]],Re=d[2*u[U]],ze=d[2*u[U]+1],Ge=d[2*u[W]+1];let et=!1;if(de<_e)et=!0;else if(de>_e)et=!1;else{const At=Ge-ze,Ct=-(d[2*u[W]]-Re),Nt=ze<Ge?1:-1;((de-Re)*At+(d[2*u[X]+1]-ze)*Ct)*Nt>((_e-Re)*At+(d[2*u[re]+1]-ze)*Ct)*Nt&&(et=!0)}if(et){const At=u[X],Ct=u[U],Nt=u[W];At!==Ct&&At!==Nt&&Ct!==Nt&&h.push(Nt,Ct,At),U--,U<0&&(U=K-1)}else{const At=u[re],Ct=u[U],Nt=u[W];At!==Ct&&At!==Nt&&Ct!==Nt&&h.push(Nt,Ct,At),W++,W>=K&&(W=0)}if(X===re)break}}function yr(d,u,h,v,M,K,U,W,X){const re=M.length/2,de=U&&W&&X;if(re<pr.MAX_VERTEX_ARRAY_LENGTH){const _e=u.prepareSegment(re,h,v),Re=_e.vertexLength;for(let et=0;et<K.length;et+=3)v.emplaceBack(Re+K[et],Re+K[et+1],Re+K[et+2]);let ze,Ge;_e.vertexLength+=re,_e.primitiveLength+=K.length/3,de&&(Ge=U.prepareSegment(re,h,W),ze=Ge.vertexLength,Ge.vertexLength+=re);for(let et=0;et<M.length;et+=2)d(M[et],M[et+1]);if(de)for(let et=0;et<X.length;et++){const At=X[et];for(let Ct=1;Ct<At.length;Ct+=2)W.emplaceBack(ze+At[Ct-1],ze+At[Ct]);Ge.primitiveLength+=At.length/2}}else(function(_e,Re,ze,Ge,et,At){const Ct=[];for(let Ot=0;Ot<Ge.length/2;Ot++)Ct.push(-1);const Nt={count:0};let Et=0,Le=_e.getOrCreateLatestSegment(Re,ze),lt=Le.vertexLength;for(let Ot=2;Ot<et.length;Ot+=3){const An=et[Ot-2],zn=et[Ot-1],Cn=et[Ot];let fn=Ct[An]<Et,jn=Ct[zn]<Et,Wn=Ct[Cn]<Et;Le.vertexLength+((fn?1:0)+(jn?1:0)+(Wn?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(Le=_e.createNewSegment(Re,ze),Et=Nt.count,fn=!0,jn=!0,Wn=!0,lt=0);const cr=Or(Ct,Ge,At,Nt,An,fn,Le),kn=Or(Ct,Ge,At,Nt,zn,jn,Le),jr=Or(Ct,Ge,At,Nt,Cn,Wn,Le);ze.emplaceBack(lt+cr-Et,lt+kn-Et,lt+jr-Et),Le.primitiveLength++}})(u,h,v,M,K,d),de&&function(_e,Re,ze,Ge,et,At){const Ct=[];for(let Ot=0;Ot<Ge.length/2;Ot++)Ct.push(-1);const Nt={count:0};let Et=0,Le=_e.getOrCreateLatestSegment(Re,ze),lt=Le.vertexLength;for(let Ot=0;Ot<et.length;Ot++){const An=et[Ot];for(let zn=1;zn<et[Ot].length;zn+=2){const Cn=An[zn-1],fn=An[zn];let jn=Ct[Cn]<Et,Wn=Ct[fn]<Et;Le.vertexLength+((jn?1:0)+(Wn?1:0))>pr.MAX_VERTEX_ARRAY_LENGTH&&(Le=_e.createNewSegment(Re,ze),Et=Nt.count,jn=!0,Wn=!0,lt=0);const cr=Or(Ct,Ge,At,Nt,Cn,jn,Le),kn=Or(Ct,Ge,At,Nt,fn,Wn,Le);ze.emplaceBack(lt+cr-Et,lt+kn-Et),Le.primitiveLength++}}}(U,h,W,M,X,d),u.forceNewSegmentOnNextPrepare(),U==null||U.forceNewSegmentOnNextPrepare()}function Or(d,u,h,v,M,K,U){if(K){const W=v.count;return h(u[2*M],u[2*M+1]),d[M]=v.count,v.count++,U.vertexLength++,W}return d[M]}class ni{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vt,this.indexArray=new yn,this.indexArray2=new In,this.programConfigurations=new Vs(u.layers,u.zoom),this.segments=new pr,this.segments2=new pr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=Ld("fill",this.layers,h);const M=this.layers[0].layout.get("fill-sort-key"),K=!M.isConstant(),U=[];for(const{feature:W,id:X,index:re,sourceLayerIndex:de}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=yc(W,_e);if(!this.layers[0]._featureFilter.filter(new Lo(this.zoom),Re,v))continue;const ze=K?M.evaluate(Re,{},v,h.availableImages):void 0,Ge={id:X,properties:W.properties,type:W.type,sourceLayerIndex:de,index:re,geometry:_e?Re.geometry:gc(W),patterns:{},sortKey:ze};U.push(Ge)}K&&U.sort((W,X)=>W.sortKey-X.sortKey);for(const W of U){const{geometry:X,index:re,sourceLayerIndex:de}=W;if(this.hasPattern){const _e=jc("fill",this.layers,W,this.zoom,h);this.patternFeatures.push(_e)}else this.addFeature(W,X,re,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ef),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,h,v,M,K,U){for(const W of wl(h,500)){const X=sr(W,M,U.fill.getGranularityForZoomLevel(M.z)),re=this.layoutVertexArray;yr((de,_e)=>{re.emplaceBack(de,_e)},this.segments,this.layoutVertexArray,this.indexArray,X.verticesFlattened,X.indicesTriangles,this.segments2,this.indexArray2,X.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,M)}}let zr,Zi;hr("FillBucket",ni,{omit:["layers","patternFeatures"]});var jo={get paint(){return Zi=Zi||new ou({"fill-antialias":new Pr(Oe.paint_fill["fill-antialias"]),"fill-opacity":new Hr(Oe.paint_fill["fill-opacity"]),"fill-color":new Hr(Oe.paint_fill["fill-color"]),"fill-outline-color":new Hr(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Pr(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Pr(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new NA(Oe.paint_fill["fill-pattern"])})},get layout(){return zr=zr||new ou({"fill-sort-key":new Hr(Oe.layout_fill["fill-sort-key"])})}};class $a extends gA{constructor(u){super(u,jo)}recalculate(u,h){super.recalculate(u,h);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new ni(u)}queryRadius(){return Rd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:h,transform:v,pixelsToTileUnits:M}){return bA(_f(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,M),h)}isTileClipped(){return!0}}const oa=Ys([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),_a=Ys([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Va}=oa;var ba,hu,Ra,Fa,ls,vi,ms,Ns={};function da(){if(hu)return ba;hu=1;var d=B();function u(M,K,U,W,X){this.properties={},this.extent=U,this.type=0,this._pbf=M,this._geometry=-1,this._keys=W,this._values=X,M.readFields(h,this,K)}function h(M,K,U){M==1?K.id=U.readVarint():M==2?function(W,X){for(var re=W.readVarint()+W.pos;W.pos<re;){var de=X._keys[W.readVarint()],_e=X._values[W.readVarint()];X.properties[de]=_e}}(U,K):M==3?K.type=U.readVarint():M==4&&(K._geometry=U.pos)}function v(M){for(var K,U,W=0,X=0,re=M.length,de=re-1;X<re;de=X++)W+=((U=M[de]).x-(K=M[X]).x)*(K.y+U.y);return W}return ba=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var K,U=M.readVarint()+M.pos,W=1,X=0,re=0,de=0,_e=[];M.pos<U;){if(X<=0){var Re=M.readVarint();W=7&Re,X=Re>>3}if(X--,W===1||W===2)re+=M.readSVarint(),de+=M.readSVarint(),W===1&&(K&&_e.push(K),K=[]),K.push(new d(re,de));else{if(W!==7)throw new Error("unknown command "+W);K&&K.push(K[0].clone())}}return K&&_e.push(K),_e},u.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var K=M.readVarint()+M.pos,U=1,W=0,X=0,re=0,de=1/0,_e=-1/0,Re=1/0,ze=-1/0;M.pos<K;){if(W<=0){var Ge=M.readVarint();U=7&Ge,W=Ge>>3}if(W--,U===1||U===2)(X+=M.readSVarint())<de&&(de=X),X>_e&&(_e=X),(re+=M.readSVarint())<Re&&(Re=re),re>ze&&(ze=re);else if(U!==7)throw new Error("unknown command "+U)}return[de,Re,_e,ze]},u.prototype.toGeoJSON=function(M,K,U){var W,X,re=this.extent*Math.pow(2,U),de=this.extent*M,_e=this.extent*K,Re=this.loadGeometry(),ze=u.types[this.type];function Ge(Ct){for(var Nt=0;Nt<Ct.length;Nt++){var Et=Ct[Nt];Ct[Nt]=[360*(Et.x+de)/re-180,360/Math.PI*Math.atan(Math.exp((180-360*(Et.y+_e)/re)*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(W=0;W<Re.length;W++)et[W]=Re[W][0];Ge(Re=et);break;case 2:for(W=0;W<Re.length;W++)Ge(Re[W]);break;case 3:for(Re=function(Ct){var Nt=Ct.length;if(Nt<=1)return[Ct];for(var Et,Le,lt=[],Ot=0;Ot<Nt;Ot++){var An=v(Ct[Ot]);An!==0&&(Le===void 0&&(Le=An<0),Le===An<0?(Et&&lt.push(Et),Et=[Ct[Ot]]):Et.push(Ct[Ot]))}return Et&&lt.push(Et),lt}(Re),W=0;W<Re.length;W++)for(X=0;X<Re[W].length;X++)Ge(Re[W][X])}Re.length===1?Re=Re[0]:ze="Multi"+ze;var At={type:"Feature",geometry:{type:ze,coordinates:Re},properties:this.properties};return"id"in this&&(At.id=this.id),At},ba}function Bs(){if(Fa)return Ra;Fa=1;var d=da();function u(v,M){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=v,this._keys=[],this._values=[],this._features=[],v.readFields(h,this,M),this.length=this._features.length}function h(v,M,K){v===15?M.version=K.readVarint():v===1?M.name=K.readString():v===5?M.extent=K.readVarint():v===2?M._features.push(K.pos):v===3?M._keys.push(K.readString()):v===4&&M._values.push(function(U){for(var W=null,X=U.readVarint()+U.pos;U.pos<X;){var re=U.readVarint()>>3;W=re===1?U.readString():re===2?U.readFloat():re===3?U.readDouble():re===4?U.readVarint64():re===5?U.readVarint():re===6?U.readSVarint():re===7?U.readBoolean():null}return W}(K))}return Ra=u,u.prototype.feature=function(v){if(v<0||v>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[v];var M=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,M,this.extent,this._keys,this._values)},Ra}function ku(){return ms||(ms=1,Ns.VectorTile=function(){if(vi)return ls;vi=1;var d=Bs();function u(h,v,M){if(h===3){var K=new d(M,M.readVarint()+M.pos);K.length&&(v[K.name]=K)}}return ls=function(h,v){this.layers=h.readFields(u,{},v)},ls}(),Ns.VectorTileFeature=da(),Ns.VectorTileLayer=Bs()),Ns}var _o=f(ku());const zh=_o.VectorTileFeature.types,Gl=Math.pow(2,13);function eA(d,u,h,v,M,K,U,W){d.emplaceBack(u,h,2*Math.floor(v*Gl)+U,M*Gl*2,K*Gl*2,Math.round(W))}class Cc{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Bt,this.centroidVertexArray=new ut,this.indexArray=new yn,this.programConfigurations=new Vs(u.layers,u.zoom),this.segments=new pr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.features=[],this.hasPattern=Ld("fill-extrusion",this.layers,h);for(const{feature:M,id:K,index:U,sourceLayerIndex:W}of u){const X=this.layers[0]._featureFilter.needGeometry,re=yc(M,X);if(!this.layers[0]._featureFilter.filter(new Lo(this.zoom),re,v))continue;const de={id:K,sourceLayerIndex:W,index:U,geometry:X?re.geometry:gc(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(jc("fill-extrusion",this.layers,de,this.zoom,h)):this.addFeature(de,de.geometry,U,v,{},h.subdivisionGranularity),h.featureIndex.insert(M,de.geometry,U,W,this.index,!0)}}addFeatures(u,h,v){for(const M of this.features){const{geometry:K}=M;this.addFeature(M,K,M.index,h,v,u.subdivisionGranularity)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Va),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,_a.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,h,v,M,K,U){for(const W of wl(h,500)){const X={x:0,y:0,sampleCount:0},re=this.layoutVertexArray.length;this.processPolygon(X,M,u,W,U);const de=this.layoutVertexArray.length-re,_e=Math.floor(X.x/X.sampleCount),Re=Math.floor(X.y/X.sampleCount);for(let ze=0;ze<de;ze++)this.centroidVertexArray.emplaceBack(_e,Re)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,M)}processPolygon(u,h,v,M,K){if(M.length<1||Bf(M[0]))return;for(const _e of M)_e.length!==0&&yl(u,_e);const U={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},W=K.fill.getGranularityForZoomLevel(h.z),X=zh[v.type]==="Polygon";for(const _e of M){if(_e.length===0||Bf(_e))continue;const Re=Vn(_e,W,X);this._generateSideFaces(Re,U)}if(!X)return;const re=sr(M,h,W,!1),de=this.layoutVertexArray;yr((_e,Re)=>{eA(de,_e,Re,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,re.verticesFlattened,re.indicesTriangles)}_generateSideFaces(u,h){let v=0;for(let M=1;M<u.length;M++){const K=u[M],U=u[M-1];if(Il(K,U))continue;h.segment.vertexLength+4>pr.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const W=K.sub(U)._perp()._unit(),X=U.dist(K);v+X>32768&&(v=0),eA(this.layoutVertexArray,K.x,K.y,W.x,W.y,0,0,v),eA(this.layoutVertexArray,K.x,K.y,W.x,W.y,0,1,v),v+=X,eA(this.layoutVertexArray,U.x,U.y,W.x,W.y,0,0,v),eA(this.layoutVertexArray,U.x,U.y,W.x,W.y,0,1,v);const re=h.segment.vertexLength;this.indexArray.emplaceBack(re,re+2,re+1),this.indexArray.emplaceBack(re+1,re+2,re+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function yl(d,u){for(let h=0;h<u.length;h++){const v=u[h];h===u.length-1&&u[0].x===v.x&&u[0].y===v.y||(d.x+=v.x,d.y+=v.y,d.sampleCount++)}}function Il(d,u){return d.x===u.x&&(d.x<0||d.x>at)||d.y===u.y&&(d.y<0||d.y>at)}function Bf(d){return d.every(u=>u.x<0)||d.every(u=>u.x>at)||d.every(u=>u.y<0)||d.every(u=>u.y>at)}let Of;hr("FillExtrusionBucket",Cc,{omit:["layers","features"]});var jh={get paint(){return Of=Of||new ou({"fill-extrusion-opacity":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hr(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new NA(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hr(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hr(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pr(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class t0 extends gA{constructor(u){super(u,jh)}createBucket(u){return new Cc(u)}queryRadius(){return Rd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:M,transform:K,pixelsToTileUnits:U,pixelPosMatrix:W}){const X=_f(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-K.bearingInRadians,U),re=this.paint.get("fill-extrusion-height").evaluate(h,v),de=this.paint.get("fill-extrusion-base").evaluate(h,v),_e=function(ze,Ge,et){const At=[];for(const Ct of ze){const Nt=[Ct.x,Ct.y,0,1];me(Nt,Nt,Ge),At.push(new F(Nt[0]/Nt[3],Nt[1]/Nt[3]))}return At}(X,W),Re=function(ze,Ge,et,At){const Ct=[],Nt=[],Et=At[8]*Ge,Le=At[9]*Ge,lt=At[10]*Ge,Ot=At[11]*Ge,An=At[8]*et,zn=At[9]*et,Cn=At[10]*et,fn=At[11]*et;for(const jn of ze){const Wn=[],cr=[];for(const kn of jn){const jr=kn.x,gi=kn.y,di=At[0]*jr+At[4]*gi+At[12],Zr=At[1]*jr+At[5]*gi+At[13],No=At[2]*jr+At[6]*gi+At[14],al=At[3]*jr+At[7]*gi+At[15],fu=No+lt,wA=al+Ot,cd=di+An,bc=Zr+zn,rA=No+Cn,Ha=al+fn,Tu=new F((di+Et)/wA,(Zr+Le)/wA);Tu.z=fu/wA,Wn.push(Tu);const iA=new F(cd/Ha,bc/Ha);iA.z=rA/Ha,cr.push(iA)}Ct.push(Wn),Nt.push(cr)}return[Ct,Nt]}(M,de,re,W);return function(ze,Ge,et){let At=1/0;bA(et,Ge)&&(At=Nh(et,Ge[0]));for(let Ct=0;Ct<Ge.length;Ct++){const Nt=Ge[Ct],Et=ze[Ct];for(let Le=0;Le<Nt.length-1;Le++){const lt=Nt[Le],Ot=[lt,Nt[Le+1],Et[Le+1],Et[Le],lt];tp(et,Ot)&&(At=Math.min(At,Nh(et,Ot)))}}return At!==1/0&&At}(Re[0],Re[1],_e)}}function lp(d,u){return d.x*u.x+d.y*u.y}function Nh(d,u){if(d.length===1){let h=0;const v=u[h++];let M;for(;!M||v.equals(M);)if(M=u[h++],!M)return 1/0;for(;h<u.length;h++){const K=u[h],U=d[0],W=M.sub(v),X=K.sub(v),re=U.sub(v),de=lp(W,W),_e=lp(W,X),Re=lp(X,X),ze=lp(re,W),Ge=lp(re,X),et=de*Re-_e*_e,At=(Re*ze-_e*Ge)/et,Ct=(de*Ge-_e*ze)/et,Nt=v.z*(1-At-Ct)+M.z*At+K.z*Ct;if(isFinite(Nt))return Nt}return 1/0}{let h=1/0;for(const v of u)h=Math.min(h,v.z);return h}}const n0=Ys([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:If}=n0,qA=Ys([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:bm}=qA,J0=_o.VectorTileFeature.types,r0=Math.cos(Math.PI/180*37.5),Up=Math.pow(2,14)/.5;class tA{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new kt,this.layoutVertexArray2=new Rt,this.indexArray=new yn,this.programConfigurations=new Vs(u.layers,u.zoom),this.segments=new pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=Ld("line",this.layers,h);const M=this.layers[0].layout.get("line-sort-key"),K=!M.isConstant(),U=[];for(const{feature:W,id:X,index:re,sourceLayerIndex:de}of u){const _e=this.layers[0]._featureFilter.needGeometry,Re=yc(W,_e);if(!this.layers[0]._featureFilter.filter(new Lo(this.zoom),Re,v))continue;const ze=K?M.evaluate(Re,{},v):void 0,Ge={id:X,properties:W.properties,type:W.type,sourceLayerIndex:de,index:re,geometry:_e?Re.geometry:gc(W),patterns:{},sortKey:ze};U.push(Ge)}K&&U.sort((W,X)=>W.sortKey-X.sortKey);for(const W of U){const{geometry:X,index:re,sourceLayerIndex:de}=W;if(this.hasPattern){const _e=jc("line",this.layers,W,this.zoom,h);this.patternFeatures.push(_e)}else this.addFeature(W,X,re,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,bm)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,If),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,h,v,M,K,U){const W=this.layers[0].layout,X=W.get("line-join").evaluate(u,{}),re=W.get("line-cap"),de=W.get("line-miter-limit"),_e=W.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Re of h)this.addLine(Re,u,X,re,de,_e,M,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,K,M)}addLine(u,h,v,M,K,U,W,X){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Vn(u,W?X.line.getGranularityForZoomLevel(W.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Et=0;Et<u.length-1;Et++)this.totalDistance+=u[Et].dist(u[Et+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const re=J0[h.type]==="Polygon";let de=u.length;for(;de>=2&&u[de-1].equals(u[de-2]);)de--;let _e=0;for(;_e<de-1&&u[_e].equals(u[_e+1]);)_e++;if(de<(re?3:2))return;v==="bevel"&&(K=1.05);const Re=this.overscaling<=16?15*at/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let Ge,et,At,Ct,Nt;this.e1=this.e2=-1,re&&(Ge=u[de-2],Nt=u[_e].sub(Ge)._unit()._perp());for(let Et=_e;Et<de;Et++){if(At=Et===de-1?re?u[_e+1]:void 0:u[Et+1],At&&u[Et].equals(At))continue;Nt&&(Ct=Nt),Ge&&(et=Ge),Ge=u[Et],Nt=At?At.sub(Ge)._unit()._perp():Ct,Ct=Ct||Nt;let Le=Ct.add(Nt);Le.x===0&&Le.y===0||Le._unit();const lt=Ct.x*Nt.x+Ct.y*Nt.y,Ot=Le.x*Nt.x+Le.y*Nt.y,An=Ot!==0?1/Ot:1/0,zn=2*Math.sqrt(2-2*Ot),Cn=Ot<r0&&et&&At,fn=Ct.x*Nt.y-Ct.y*Nt.x>0;if(Cn&&Et>_e){const cr=Ge.dist(et);if(cr>2*Re){const kn=Ge.sub(Ge.sub(et)._mult(Re/cr)._round());this.updateDistance(et,kn),this.addCurrentVertex(kn,Ct,0,0,ze),et=kn}}const jn=et&&At;let Wn=jn?v:re?"butt":M;if(jn&&Wn==="round"&&(An<U?Wn="miter":An<=2&&(Wn="fakeround")),Wn==="miter"&&An>K&&(Wn="bevel"),Wn==="bevel"&&(An>2&&(Wn="flipbevel"),An<K&&(Wn="miter")),et&&this.updateDistance(et,Ge),Wn==="miter")Le._mult(An),this.addCurrentVertex(Ge,Le,0,0,ze);else if(Wn==="flipbevel"){if(An>100)Le=Nt.mult(-1);else{const cr=An*Ct.add(Nt).mag()/Ct.sub(Nt).mag();Le._perp()._mult(cr*(fn?-1:1))}this.addCurrentVertex(Ge,Le,0,0,ze),this.addCurrentVertex(Ge,Le.mult(-1),0,0,ze)}else if(Wn==="bevel"||Wn==="fakeround"){const cr=-Math.sqrt(An*An-1),kn=fn?cr:0,jr=fn?0:cr;if(et&&this.addCurrentVertex(Ge,Ct,kn,jr,ze),Wn==="fakeround"){const gi=Math.round(180*zn/Math.PI/20);for(let di=1;di<gi;di++){let Zr=di/gi;if(Zr!==.5){const al=Zr-.5;Zr+=Zr*al*(Zr-1)*((1.0904+lt*(lt*(3.55645-1.43519*lt)-3.2452))*al*al+(.848013+lt*(.215638*lt-1.06021)))}const No=Nt.sub(Ct)._mult(Zr)._add(Ct)._unit()._mult(fn?-1:1);this.addHalfVertex(Ge,No.x,No.y,!1,fn,0,ze)}}At&&this.addCurrentVertex(Ge,Nt,-kn,-jr,ze)}else if(Wn==="butt")this.addCurrentVertex(Ge,Le,0,0,ze);else if(Wn==="square"){const cr=et?1:-1;this.addCurrentVertex(Ge,Le,cr,cr,ze)}else Wn==="round"&&(et&&(this.addCurrentVertex(Ge,Ct,0,0,ze),this.addCurrentVertex(Ge,Ct,1,1,ze,!0)),At&&(this.addCurrentVertex(Ge,Nt,-1,-1,ze,!0),this.addCurrentVertex(Ge,Nt,0,0,ze)));if(Cn&&Et<de-1){const cr=Ge.dist(At);if(cr>2*Re){const kn=Ge.add(At.sub(Ge)._mult(Re/cr)._round());this.updateDistance(Ge,kn),this.addCurrentVertex(kn,Nt,0,0,ze),Ge=kn}}}}addCurrentVertex(u,h,v,M,K,U=!1){const W=h.y*M-h.x,X=-h.y-h.x*M;this.addHalfVertex(u,h.x+h.y*v,h.y-h.x*v,U,!1,v,K),this.addHalfVertex(u,W,X,U,!0,-M,K),this.distance>Up/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,h,v,M,K,U))}addHalfVertex({x:u,y:h},v,M,K,U,W,X){const re=.5*(this.lineClips?this.scaledDistance*(Up-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(K?1:0),(h<<1)+(U?1:0),Math.round(63*v)+128,Math.round(63*M)+128,1+(W===0?0:W<0?-1:1)|(63&re)<<2,re>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const de=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,de,this.e2),X.primitiveLength++),U?this.e2=de:this.e1=de}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,h){this.distance+=u.dist(h),this.updateScaledDistance()}}let Wh,ad;hr("LineBucket",tA,{omit:["layers","patternFeatures"]});var YA={get paint(){return ad=ad||new ou({"line-opacity":new Hr(Oe.paint_line["line-opacity"]),"line-color":new Hr(Oe.paint_line["line-color"]),"line-translate":new Pr(Oe.paint_line["line-translate"]),"line-translate-anchor":new Pr(Oe.paint_line["line-translate-anchor"]),"line-width":new Hr(Oe.paint_line["line-width"]),"line-gap-width":new Hr(Oe.paint_line["line-gap-width"]),"line-offset":new Hr(Oe.paint_line["line-offset"]),"line-blur":new Hr(Oe.paint_line["line-blur"]),"line-dasharray":new Su(Oe.paint_line["line-dasharray"]),"line-pattern":new NA(Oe.paint_line["line-pattern"]),"line-gradient":new pl(Oe.paint_line["line-gradient"])})},get layout(){return Wh=Wh||new ou({"line-cap":new Pr(Oe.layout_line["line-cap"]),"line-join":new Hr(Oe.layout_line["line-join"]),"line-miter-limit":new Pr(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Pr(Oe.layout_line["line-round-limit"]),"line-sort-key":new Hr(Oe.layout_line["line-sort-key"])})}};class i0 extends Hr{possiblyEvaluate(u,h){return h=new Lo(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(u,h)}evaluate(u,h,v,M){return h=gt({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(u,h,v,M)}}let zp;class eg extends gA{constructor(u){super(u,YA),this.gradientVersion=0,zp||(zp=new i0(YA.paint.properties["line-width"].specification),zp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof $t,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,h){super.recalculate(u,h),this.paint._values["line-floorwidth"]=zp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new tA(u)}queryRadius(u){const h=u,v=u1(ah("line-width",this,h),ah("line-gap-width",this,h)),M=ah("line-offset",this,h);return v/2+Math.abs(M)+Rd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:M,transform:K,pixelsToTileUnits:U}){const W=_f(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-K.bearingInRadians,U),X=U/2*u1(this.paint.get("line-width").evaluate(h,v),this.paint.get("line-gap-width").evaluate(h,v)),re=this.paint.get("line-offset").evaluate(h,v);return re&&(M=function(de,_e){const Re=[];for(let ze=0;ze<de.length;ze++){const Ge=de[ze],et=[];for(let At=0;At<Ge.length;At++){const Ct=Ge[At-1],Nt=Ge[At],Et=Ge[At+1],Le=At===0?new F(0,0):Nt.sub(Ct)._unit()._perp(),lt=At===Ge.length-1?new F(0,0):Et.sub(Nt)._unit()._perp(),Ot=Le._add(lt)._unit(),An=Ot.x*lt.x+Ot.y*lt.y;An!==0&&Ot._mult(1/An),et.push(Ot._mult(_e)._add(Nt))}Re.push(et)}return Re}(M,re*U)),function(de,_e,Re){for(let ze=0;ze<_e.length;ze++){const Ge=_e[ze];if(de.length>=3){for(let et=0;et<Ge.length;et++)if(oh(de,Ge[et]))return!0}if(ml(de,Ge,Re))return!0}return!1}(W,M,X)}isTileClipped(){return!0}}function u1(d,u){return u>0?u+2*d:d}const kf=Ys([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),A1=Ys([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ys([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const tg=Ys([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ys([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Tf=Ys([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ng=Ys([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function up(d,u,h){return d.sections.forEach(v=>{v.text=function(M,K,U){const W=K.layout.get("text-transform").evaluate(U,{});return W==="uppercase"?M=M.toLocaleUpperCase():W==="lowercase"&&(M=M.toLocaleLowerCase()),Nl.applyArabicShaping&&(M=Nl.applyArabicShaping(M)),M}(v.text,u,h)}),d}Ys([{name:"triangle",components:3,type:"Uint16"}]),Ys([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ys([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ys([{type:"Float32",name:"offsetX"}]),Ys([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ys([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const jp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var rg,xm,wm,kl=24,ig={};function c1(){return rg||(rg=1,ig.read=function(d,u,h,v,M){var K,U,W=8*M-v-1,X=(1<<W)-1,re=X>>1,de=-7,_e=h?M-1:0,Re=h?-1:1,ze=d[u+_e];for(_e+=Re,K=ze&(1<<-de)-1,ze>>=-de,de+=W;de>0;K=256*K+d[u+_e],_e+=Re,de-=8);for(U=K&(1<<-de)-1,K>>=-de,de+=v;de>0;U=256*U+d[u+_e],_e+=Re,de-=8);if(K===0)K=1-re;else{if(K===X)return U?NaN:1/0*(ze?-1:1);U+=Math.pow(2,v),K-=re}return(ze?-1:1)*U*Math.pow(2,K-v)},ig.write=function(d,u,h,v,M,K){var U,W,X,re=8*K-M-1,de=(1<<re)-1,_e=de>>1,Re=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,ze=v?0:K-1,Ge=v?1:-1,et=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(W=isNaN(u)?1:0,U=de):(U=Math.floor(Math.log(u)/Math.LN2),u*(X=Math.pow(2,-U))<1&&(U--,X*=2),(u+=U+_e>=1?Re/X:Re*Math.pow(2,1-_e))*X>=2&&(U++,X/=2),U+_e>=de?(W=0,U=de):U+_e>=1?(W=(u*X-1)*Math.pow(2,M),U+=_e):(W=u*Math.pow(2,_e-1)*Math.pow(2,M),U=0));M>=8;d[h+ze]=255&W,ze+=Ge,W/=256,M-=8);for(U=U<<M|W,re+=M;re>0;d[h+ze]=255&U,ze+=Ge,U/=256,re-=8);d[h+ze-Ge]|=128*et}),ig}function og(){if(wm)return xm;wm=1,xm=u;var d=c1();function u(Le){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Le)?Le:new Uint8Array(Le||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var h=4294967296,v=1/h,M=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function K(Le){return Le.type===u.Bytes?Le.readVarint()+Le.pos:Le.pos+1}function U(Le,lt,Ot){return Ot?4294967296*lt+(Le>>>0):4294967296*(lt>>>0)+(Le>>>0)}function W(Le,lt,Ot){var An=lt<=16383?1:lt<=2097151?2:lt<=268435455?3:Math.floor(Math.log(lt)/(7*Math.LN2));Ot.realloc(An);for(var zn=Ot.pos-1;zn>=Le;zn--)Ot.buf[zn+An]=Ot.buf[zn]}function X(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeVarint(Le[Ot])}function re(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeSVarint(Le[Ot])}function de(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeFloat(Le[Ot])}function _e(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeDouble(Le[Ot])}function Re(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeBoolean(Le[Ot])}function ze(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeFixed32(Le[Ot])}function Ge(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeSFixed32(Le[Ot])}function et(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeFixed64(Le[Ot])}function At(Le,lt){for(var Ot=0;Ot<Le.length;Ot++)lt.writeSFixed64(Le[Ot])}function Ct(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+16777216*Le[lt+3]}function Nt(Le,lt,Ot){Le[Ot]=lt,Le[Ot+1]=lt>>>8,Le[Ot+2]=lt>>>16,Le[Ot+3]=lt>>>24}function Et(Le,lt){return(Le[lt]|Le[lt+1]<<8|Le[lt+2]<<16)+(Le[lt+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Le,lt,Ot){for(Ot=Ot||this.length;this.pos<Ot;){var An=this.readVarint(),zn=An>>3,Cn=this.pos;this.type=7&An,Le(zn,lt,this),this.pos===Cn&&this.skip(An)}return lt},readMessage:function(Le,lt){return this.readFields(Le,lt,this.readVarint()+this.pos)},readFixed32:function(){var Le=Ct(this.buf,this.pos);return this.pos+=4,Le},readSFixed32:function(){var Le=Et(this.buf,this.pos);return this.pos+=4,Le},readFixed64:function(){var Le=Ct(this.buf,this.pos)+Ct(this.buf,this.pos+4)*h;return this.pos+=8,Le},readSFixed64:function(){var Le=Ct(this.buf,this.pos)+Et(this.buf,this.pos+4)*h;return this.pos+=8,Le},readFloat:function(){var Le=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Le},readDouble:function(){var Le=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Le},readVarint:function(Le){var lt,Ot,An=this.buf;return lt=127&(Ot=An[this.pos++]),Ot<128?lt:(lt|=(127&(Ot=An[this.pos++]))<<7,Ot<128?lt:(lt|=(127&(Ot=An[this.pos++]))<<14,Ot<128?lt:(lt|=(127&(Ot=An[this.pos++]))<<21,Ot<128?lt:function(zn,Cn,fn){var jn,Wn,cr=fn.buf;if(jn=(112&(Wn=cr[fn.pos++]))>>4,Wn<128||(jn|=(127&(Wn=cr[fn.pos++]))<<3,Wn<128)||(jn|=(127&(Wn=cr[fn.pos++]))<<10,Wn<128)||(jn|=(127&(Wn=cr[fn.pos++]))<<17,Wn<128)||(jn|=(127&(Wn=cr[fn.pos++]))<<24,Wn<128)||(jn|=(1&(Wn=cr[fn.pos++]))<<31,Wn<128))return U(zn,jn,Cn);throw new Error("Expected varint not more than 10 bytes")}(lt|=(15&(Ot=An[this.pos]))<<28,Le,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Le=this.readVarint();return Le%2==1?(Le+1)/-2:Le/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Le=this.readVarint()+this.pos,lt=this.pos;return this.pos=Le,Le-lt>=12&&M?function(Ot,An,zn){return M.decode(Ot.subarray(An,zn))}(this.buf,lt,Le):function(Ot,An,zn){for(var Cn="",fn=An;fn<zn;){var jn,Wn,cr,kn=Ot[fn],jr=null,gi=kn>239?4:kn>223?3:kn>191?2:1;if(fn+gi>zn)break;gi===1?kn<128&&(jr=kn):gi===2?(192&(jn=Ot[fn+1]))==128&&(jr=(31&kn)<<6|63&jn)<=127&&(jr=null):gi===3?(Wn=Ot[fn+2],(192&(jn=Ot[fn+1]))==128&&(192&Wn)==128&&((jr=(15&kn)<<12|(63&jn)<<6|63&Wn)<=2047||jr>=55296&&jr<=57343)&&(jr=null)):gi===4&&(Wn=Ot[fn+2],cr=Ot[fn+3],(192&(jn=Ot[fn+1]))==128&&(192&Wn)==128&&(192&cr)==128&&((jr=(15&kn)<<18|(63&jn)<<12|(63&Wn)<<6|63&cr)<=65535||jr>=1114112)&&(jr=null)),jr===null?(jr=65533,gi=1):jr>65535&&(jr-=65536,Cn+=String.fromCharCode(jr>>>10&1023|55296),jr=56320|1023&jr),Cn+=String.fromCharCode(jr),fn+=gi}return Cn}(this.buf,lt,Le)},readBytes:function(){var Le=this.readVarint()+this.pos,lt=this.buf.subarray(this.pos,Le);return this.pos=Le,lt},readPackedVarint:function(Le,lt){if(this.type!==u.Bytes)return Le.push(this.readVarint(lt));var Ot=K(this);for(Le=Le||[];this.pos<Ot;)Le.push(this.readVarint(lt));return Le},readPackedSVarint:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSVarint());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSVarint());return Le},readPackedBoolean:function(Le){if(this.type!==u.Bytes)return Le.push(this.readBoolean());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readBoolean());return Le},readPackedFloat:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFloat());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFloat());return Le},readPackedDouble:function(Le){if(this.type!==u.Bytes)return Le.push(this.readDouble());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readDouble());return Le},readPackedFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed32());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed32());return Le},readPackedSFixed32:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed32());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed32());return Le},readPackedFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readFixed64());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readFixed64());return Le},readPackedSFixed64:function(Le){if(this.type!==u.Bytes)return Le.push(this.readSFixed64());var lt=K(this);for(Le=Le||[];this.pos<lt;)Le.push(this.readSFixed64());return Le},skip:function(Le){var lt=7&Le;if(lt===u.Varint)for(;this.buf[this.pos++]>127;);else if(lt===u.Bytes)this.pos=this.readVarint()+this.pos;else if(lt===u.Fixed32)this.pos+=4;else{if(lt!==u.Fixed64)throw new Error("Unimplemented type: "+lt);this.pos+=8}},writeTag:function(Le,lt){this.writeVarint(Le<<3|lt)},realloc:function(Le){for(var lt=this.length||16;lt<this.pos+Le;)lt*=2;if(lt!==this.length){var Ot=new Uint8Array(lt);Ot.set(this.buf),this.buf=Ot,this.length=lt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Le){this.realloc(4),Nt(this.buf,Le,this.pos),this.pos+=4},writeSFixed32:function(Le){this.realloc(4),Nt(this.buf,Le,this.pos),this.pos+=4},writeFixed64:function(Le){this.realloc(8),Nt(this.buf,-1&Le,this.pos),Nt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeSFixed64:function(Le){this.realloc(8),Nt(this.buf,-1&Le,this.pos),Nt(this.buf,Math.floor(Le*v),this.pos+4),this.pos+=8},writeVarint:function(Le){(Le=+Le||0)>268435455||Le<0?function(lt,Ot){var An,zn;if(lt>=0?(An=lt%4294967296|0,zn=lt/4294967296|0):(zn=~(-lt/4294967296),4294967295^(An=~(-lt%4294967296))?An=An+1|0:(An=0,zn=zn+1|0)),lt>=18446744073709552e3||lt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ot.realloc(10),function(Cn,fn,jn){jn.buf[jn.pos++]=127&Cn|128,Cn>>>=7,jn.buf[jn.pos++]=127&Cn|128,Cn>>>=7,jn.buf[jn.pos++]=127&Cn|128,Cn>>>=7,jn.buf[jn.pos++]=127&Cn|128,jn.buf[jn.pos]=127&(Cn>>>=7)}(An,0,Ot),function(Cn,fn){var jn=(7&Cn)<<4;fn.buf[fn.pos++]|=jn|((Cn>>>=3)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn|((Cn>>>=7)?128:0),Cn&&(fn.buf[fn.pos++]=127&Cn)))))}(zn,Ot)}(Le,this):(this.realloc(4),this.buf[this.pos++]=127&Le|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=127&(Le>>>=7)|(Le>127?128:0),Le<=127||(this.buf[this.pos++]=Le>>>7&127))))},writeSVarint:function(Le){this.writeVarint(Le<0?2*-Le-1:2*Le)},writeBoolean:function(Le){this.writeVarint(!!Le)},writeString:function(Le){Le=String(Le),this.realloc(4*Le.length),this.pos++;var lt=this.pos;this.pos=function(An,zn,Cn){for(var fn,jn,Wn=0;Wn<zn.length;Wn++){if((fn=zn.charCodeAt(Wn))>55295&&fn<57344){if(!jn){fn>56319||Wn+1===zn.length?(An[Cn++]=239,An[Cn++]=191,An[Cn++]=189):jn=fn;continue}if(fn<56320){An[Cn++]=239,An[Cn++]=191,An[Cn++]=189,jn=fn;continue}fn=jn-55296<<10|fn-56320|65536,jn=null}else jn&&(An[Cn++]=239,An[Cn++]=191,An[Cn++]=189,jn=null);fn<128?An[Cn++]=fn:(fn<2048?An[Cn++]=fn>>6|192:(fn<65536?An[Cn++]=fn>>12|224:(An[Cn++]=fn>>18|240,An[Cn++]=fn>>12&63|128),An[Cn++]=fn>>6&63|128),An[Cn++]=63&fn|128)}return Cn}(this.buf,Le,this.pos);var Ot=this.pos-lt;Ot>=128&&W(lt,Ot,this),this.pos=lt-1,this.writeVarint(Ot),this.pos+=Ot},writeFloat:function(Le){this.realloc(4),d.write(this.buf,Le,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Le){this.realloc(8),d.write(this.buf,Le,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Le){var lt=Le.length;this.writeVarint(lt),this.realloc(lt);for(var Ot=0;Ot<lt;Ot++)this.buf[this.pos++]=Le[Ot]},writeRawMessage:function(Le,lt){this.pos++;var Ot=this.pos;Le(lt,this);var An=this.pos-Ot;An>=128&&W(Ot,An,this),this.pos=Ot-1,this.writeVarint(An),this.pos+=An},writeMessage:function(Le,lt,Ot){this.writeTag(Le,u.Bytes),this.writeRawMessage(lt,Ot)},writePackedVarint:function(Le,lt){lt.length&&this.writeMessage(Le,X,lt)},writePackedSVarint:function(Le,lt){lt.length&&this.writeMessage(Le,re,lt)},writePackedBoolean:function(Le,lt){lt.length&&this.writeMessage(Le,Re,lt)},writePackedFloat:function(Le,lt){lt.length&&this.writeMessage(Le,de,lt)},writePackedDouble:function(Le,lt){lt.length&&this.writeMessage(Le,_e,lt)},writePackedFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,ze,lt)},writePackedSFixed32:function(Le,lt){lt.length&&this.writeMessage(Le,Ge,lt)},writePackedFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,et,lt)},writePackedSFixed64:function(Le,lt){lt.length&&this.writeMessage(Le,At,lt)},writeBytesField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeBytes(lt)},writeFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFixed32(lt)},writeSFixed32Field:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeSFixed32(lt)},writeFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeFixed64(lt)},writeSFixed64Field:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeSFixed64(lt)},writeVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeVarint(lt)},writeSVarintField:function(Le,lt){this.writeTag(Le,u.Varint),this.writeSVarint(lt)},writeStringField:function(Le,lt){this.writeTag(Le,u.Bytes),this.writeString(lt)},writeFloatField:function(Le,lt){this.writeTag(Le,u.Fixed32),this.writeFloat(lt)},writeDoubleField:function(Le,lt){this.writeTag(Le,u.Fixed64),this.writeDouble(lt)},writeBooleanField:function(Le,lt){this.writeVarintField(Le,!!lt)}},xm}var Gh=f(og());const sg=3;function Np(d,u,h){d===1&&h.readMessage(o0,u)}function o0(d,u,h){if(d===3){const{id:v,bitmap:M,width:K,height:U,left:W,top:X,advance:re}=h.readMessage(sl,{});u.push({id:v,bitmap:new Uh({width:K+2*sg,height:U+2*sg},M),metrics:{width:K,height:U,left:W,top:X,advance:re}})}}function sl(d,u,h){d===1?u.id=h.readVarint():d===2?u.bitmap=h.readBytes():d===3?u.width=h.readVarint():d===4?u.height=h.readVarint():d===5?u.left=h.readSVarint():d===6?u.top=h.readSVarint():d===7&&(u.advance=h.readVarint())}const mv=sg;function ag(d){let u=0,h=0;for(const U of d)u+=U.w*U.h,h=Math.max(h,U.w);d.sort((U,W)=>W.h-U.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),h),h:1/0}];let M=0,K=0;for(const U of d)for(let W=v.length-1;W>=0;W--){const X=v[W];if(!(U.w>X.w||U.h>X.h)){if(U.x=X.x,U.y=X.y,K=Math.max(K,U.y+U.h),M=Math.max(M,U.x+U.w),U.w===X.w&&U.h===X.h){const re=v.pop();W<v.length&&(v[W]=re)}else U.h===X.h?(X.x+=U.w,X.w-=U.w):U.w===X.w?(X.y+=U.h,X.h-=U.h):(v.push({x:X.x+U.w,y:X.y,w:X.w-U.w,h:U.h}),X.y+=U.h,X.h-=U.h);break}}return{w:M,h:K,fill:u/(M*K)||0}}const $A=1;class lg{constructor(u,{pixelRatio:h,version:v,stretchX:M,stretchY:K,content:U,textFitWidth:W,textFitHeight:X}){this.paddedRect=u,this.pixelRatio=h,this.stretchX=M,this.stretchY=K,this.content=U,this.version=v,this.textFitWidth=W,this.textFitHeight=X}get tl(){return[this.paddedRect.x+$A,this.paddedRect.y+$A]}get br(){return[this.paddedRect.x+this.paddedRect.w-$A,this.paddedRect.y+this.paddedRect.h-$A]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*$A)/this.pixelRatio,(this.paddedRect.h-2*$A)/this.pixelRatio]}}class ug{constructor(u,h){const v={},M={};this.haveRenderCallbacks=[];const K=[];this.addImages(u,v,K),this.addImages(h,M,K);const{w:U,h:W}=ag(K),X=new du({width:U||1,height:W||1});for(const re in u){const de=u[re],_e=v[re].paddedRect;du.copy(de.data,X,{x:0,y:0},{x:_e.x+$A,y:_e.y+$A},de.data)}for(const re in h){const de=h[re],_e=M[re].paddedRect,Re=_e.x+$A,ze=_e.y+$A,Ge=de.data.width,et=de.data.height;du.copy(de.data,X,{x:0,y:0},{x:Re,y:ze},de.data),du.copy(de.data,X,{x:0,y:et-1},{x:Re,y:ze-1},{width:Ge,height:1}),du.copy(de.data,X,{x:0,y:0},{x:Re,y:ze+et},{width:Ge,height:1}),du.copy(de.data,X,{x:Ge-1,y:0},{x:Re-1,y:ze},{width:1,height:et}),du.copy(de.data,X,{x:0,y:0},{x:Re+Ge,y:ze},{width:1,height:et})}this.image=X,this.iconPositions=v,this.patternPositions=M}addImages(u,h,v){for(const M in u){const K=u[M],U={x:0,y:0,w:K.data.width+2*$A,h:K.data.height+2*$A};v.push(U),h[M]=new lg(U,K),K.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(u,h){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in u.updatedImages)this.patchUpdatedImage(this.iconPositions[v],u.getImage(v),h),this.patchUpdatedImage(this.patternPositions[v],u.getImage(v),h)}patchUpdatedImage(u,h,v){if(!u||!h||u.version===h.version)return;u.version=h.version;const[M,K]=u.tl;v.update(h.data,void 0,{x:M,y:K})}}var Qh;hr("ImagePosition",lg),hr("ImageAtlas",ug),a.ai=void 0,(Qh=a.ai||(a.ai={}))[Qh.none=0]="none",Qh[Qh.horizontal=1]="horizontal",Qh[Qh.vertical=2]="vertical",Qh[Qh.horizontalOnly=3]="horizontalOnly";const s0=-17;class xA{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,h,v){const M=new xA;return M.scale=u||1,M.fontStack=h,M.verticalAlign=v||"bottom",M}static forImage(u,h){const v=new xA;return v.imageName=u,v.verticalAlign=h||"bottom",v}}class qh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,h){const v=new qh;for(let M=0;M<u.sections.length;M++){const K=u.sections[M];K.image?v.addImageSection(K):v.addTextSection(K,h)}return v}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let h="";for(let v=0;v<u.length;v++){const M=u.charCodeAt(v+1)||null,K=u.charCodeAt(v-1)||null;h+=M&&bs(M)&&!jp[u[v+1]]||K&&bs(K)&&!jp[u[v-1]]||!jp[u[v]]?u[v]:jp[u[v]]}return h}(this.text)}trim(){let u=0;for(let v=0;v<this.text.length&&_c[this.text.charCodeAt(v)];v++)u++;let h=this.text.length;for(let v=this.text.length-1;v>=0&&v>=u&&_c[this.text.charCodeAt(v)];v--)h--;this.text=this.text.substring(u,h),this.sectionIndex=this.sectionIndex.slice(u,h)}substring(u,h){const v=new qh;return v.text=this.text.substring(u,h),v.sectionIndex=this.sectionIndex.slice(u,h),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,h)=>Math.max(u,this.sections[h].scale),0)}getMaxImageSize(u){let h=0,v=0;for(let M=0;M<this.length();M++){const K=this.getSection(M);if(K.imageName){const U=u[K.imageName];if(!U)continue;const W=U.displaySize;h=Math.max(h,W[0]),v=Math.max(v,W[1])}}return{maxImageWidth:h,maxImageHeight:v}}addTextSection(u,h){this.text+=u.text,this.sections.push(xA.forText(u.scale,u.fontStack||h,u.verticalAlign));const v=this.sections.length-1;for(let M=0;M<u.text.length;++M)this.sectionIndex.push(v)}addImageSection(u){const h=u.image?u.image.name:"";if(h.length===0)return void it("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(xA.forImage(h,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function a0(d,u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge){const et=qh.fromFeature(d,M);let At;_e===a.ai.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Ct,processStyledBidirectionalText:Nt}=Nl;if(Ct&&et.sections.length===1){At=[];const lt=Ct(et.toString(),cg(et,re,K,u,v,ze));for(const Ot of lt){const An=new qh;An.text=Ot,An.sections=et.sections;for(let zn=0;zn<Ot.length;zn++)An.sectionIndex.push(0);At.push(An)}}else if(Nt){At=[];const lt=Nt(et.text,et.sectionIndex,cg(et,re,K,u,v,ze));for(const Ot of lt){const An=new qh;An.text=Ot[0],An.sectionIndex=Ot[1],An.sections=et.sections,At.push(An)}}else At=function(lt,Ot){const An=[],zn=lt.text;let Cn=0;for(const fn of Ot)An.push(lt.substring(Cn,fn)),Cn=fn;return Cn<zn.length&&An.push(lt.substring(Cn,zn.length)),An}(et,cg(et,re,K,u,v,ze));const Et=[],Le={positionedLines:Et,text:et.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:_e,iconsInText:!1,verticalizable:!1};return function(lt,Ot,An,zn,Cn,fn,jn,Wn,cr,kn,jr,gi){let di=0,Zr=0,No=0,al=0;const fu=Wn==="right"?1:Wn==="left"?0:.5,wA=kl/gi;let cd=0;for(const Ha of Cn){Ha.trim();const Tu=Ha.getMaxScale(),iA={positionedGlyphs:[],lineOffset:0};lt.positionedLines[cd]=iA;const Cl=iA.positionedGlyphs;let xc=0;if(!Ha.length()){Zr+=fn,++cd;continue}const Nd=h1(zn,Ha,wA);for(let Wc=0;Wc<Ha.length();Wc++){const pu=Ha.getSection(Wc),mu=Ha.getSectionIndex(Wc),gu=Ha.getCharCode(Wc),ql=d0(cr,jr,gu);let xa;if(pu.imageName){if(lt.iconsInText=!0,pu.scale=pu.scale*wA,xa=dg(pu,ql,Tu,Nd,zn),!xa)continue;xc=Math.max(xc,xa.imageOffset)}else if(xa=f1(pu,gu,ql,Nd,Ot,An),!xa)continue;const{rect:$h,metrics:g0,baselineOffset:Vh}=xa;Cl.push({glyph:gu,imageName:pu.imageName,x:di,y:Zr+Vh+s0,vertical:ql,scale:pu.scale,fontStack:pu.fontStack,sectionIndex:mu,metrics:g0,rect:$h}),ql?(lt.verticalizable=!0,di+=(pu.imageName?g0.advance:kl)*pu.scale+kn):di+=g0.advance*pu.scale+kn}Cl.length!==0&&(No=Math.max(di-kn,No),p1(Cl,0,Cl.length-1,fu)),di=0,iA.lineOffset=Math.max(xc,(Tu-1)*kl);const Pu=fn*Tu+xc;Zr+=Pu,al=Math.max(Pu,al),++cd}const{horizontalAlign:bc,verticalAlign:rA}=c0(jn);(function(Ha,Tu,iA,Cl,xc,Nd,Pu,Wc,pu){const mu=(Tu-iA)*xc;let gu=0;gu=Nd!==Pu?-Wc*Cl-s0:-Cl*pu*Pu+.5*Pu;for(const ql of Ha)for(const xa of ql.positionedGlyphs)xa.x+=mu,xa.y+=gu})(lt.positionedLines,fu,bc,rA,No,al,fn,Zr,Cn.length),lt.top+=-rA*Zr,lt.bottom=lt.top+Zr,lt.left+=-bc*No,lt.right=lt.left+No}(Le,u,h,v,At,U,W,X,_e,re,Re,Ge),!function(lt){for(const Ot of lt)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(Et)&&Le}const _c={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},l0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Ap={40:!0};function Mm(d,u,h,v,M,K){if(u.imageName){const U=v[u.imageName];return U?U.displaySize[0]*u.scale*kl/K+M:0}{const U=h[u.fontStack],W=U&&U[d];return W?W.metrics.advance*u.scale+M:0}}function u0(d,u,h,v){const M=Math.pow(d-u,2);return v?d<u?M/2:2*M:M+Math.abs(h)*h}function Ag(d,u,h){let v=0;return d===10&&(v-=1e4),h&&(v+=150),d!==40&&d!==65288||(v+=50),u!==41&&u!==65289||(v+=50),v}function d1(d,u,h,v,M,K){let U=null,W=u0(u,h,M,K);for(const X of v){const re=u0(u-X.x,h,M,K)+X.badness;re<=W&&(U=X,W=re)}return{index:d,x:u,priorBreak:U,badness:W}}function A0(d){return d?A0(d.priorBreak).concat(d.index):[]}function cg(d,u,h,v,M,K){if(!d)return[];const U=[],W=function(_e,Re,ze,Ge,et,At){let Ct=0;for(let Nt=0;Nt<_e.length();Nt++){const Et=_e.getSection(Nt);Ct+=Mm(_e.getCharCode(Nt),Et,Ge,et,Re,At)}return Ct/Math.max(1,Math.ceil(Ct/ze))}(d,u,h,v,M,K),X=d.text.indexOf("​")>=0;let re=0;for(let _e=0;_e<d.length();_e++){const Re=d.getSection(_e),ze=d.getCharCode(_e);if(_c[ze]||(re+=Mm(ze,Re,v,M,u,K)),_e<d.length()-1){const Ge=!((de=ze)<11904)&&(!!Ji["CJK Compatibility Forms"](de)||!!Ji["CJK Compatibility"](de)||!!Ji["CJK Strokes"](de)||!!Ji["CJK Symbols and Punctuation"](de)||!!Ji["Enclosed CJK Letters and Months"](de)||!!Ji["Halfwidth and Fullwidth Forms"](de)||!!Ji["Ideographic Description Characters"](de)||!!Ji["Vertical Forms"](de)||zA.test(String.fromCodePoint(de)));(l0[ze]||Ge||Re.imageName||_e!==d.length()-2&&Ap[d.getCharCode(_e+1)])&&U.push(d1(_e+1,re,W,U,Ag(ze,d.getCharCode(_e+1),Ge&&X),!1))}}var de;return A0(d1(d.length(),re,W,U,0,!0))}function c0(d){let u=.5,h=.5;switch(d){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:u,verticalAlign:h}}function h1(d,u,h){const v=u.getMaxScale()*kl,{maxImageWidth:M,maxImageHeight:K}=u.getMaxImageSize(d),U=Math.max(v,K*h);return{verticalLineContentWidth:Math.max(v,M*h),horizontalLineContentHeight:U}}function Sm(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function d0(d,u,h){return!(d===a.ai.horizontal||!u&&!hc(h)||u&&(_c[h]||(v=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(v)))));var v}function f1(d,u,h,v,M,K){const U=K[d.fontStack],W=function(re,de,_e,Re){if(re&&re.rect)return re;const ze=de[_e.fontStack],Ge=ze&&ze[Re];return Ge?{rect:null,metrics:Ge.metrics}:null}(U&&U[u],M,d,u);if(W===null)return null;let X;if(h)X=v.verticalLineContentWidth-d.scale*kl;else{const re=Sm(d.verticalAlign);X=(v.horizontalLineContentHeight-d.scale*kl)*re}return{rect:W.rect,metrics:W.metrics,baselineOffset:X}}function dg(d,u,h,v,M){const K=M[d.imageName];if(!K)return null;const U=K.paddedRect,W=K.displaySize,X={width:W[0],height:W[1],left:$A,top:-3,advance:u?W[1]:W[0]};let re;if(u)re=v.verticalLineContentWidth-W[1]*d.scale;else{const de=Sm(d.verticalAlign);re=(v.horizontalLineContentHeight-W[1]*d.scale)*de}return{rect:U,metrics:X,baselineOffset:re,imageOffset:(u?W[0]:W[1])*d.scale-kl*h}}function p1(d,u,h,v){if(v===0)return;const M=d[h],K=(d[h].x+M.metrics.advance*M.scale)*v;for(let U=u;U<=h;U++)d[U].x-=K}function hg(d,u,h){const{horizontalAlign:v,verticalAlign:M}=c0(h),K=u[0]-d.displaySize[0]*v,U=u[1]-d.displaySize[1]*M;return{image:d,top:U,bottom:U+d.displaySize[1],left:K,right:K+d.displaySize[0]}}function Wp(d){var u,h;let v=d.left,M=d.top,K=d.right-v,U=d.bottom-M;const W=(u=d.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",X=(h=d.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",re=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(X==="proportional"){if(W==="stretchOnly"&&K/U<re||W==="proportional"){const de=Math.ceil(U*re);v*=de/K,K=de}}else if(W==="proportional"&&X==="stretchOnly"&&re!==0&&K/U>re){const de=Math.ceil(K/re);M*=de/U,U=de}return{x1:v,y1:M,x2:v+K,y2:M+U}}function Em(d,u,h,v,M,K){const U=d.image;let W;if(U.content){const At=U.content,Ct=U.pixelRatio||1;W=[At[0]/Ct,At[1]/Ct,U.displaySize[0]-At[2]/Ct,U.displaySize[1]-At[3]/Ct]}const X=u.left*K,re=u.right*K;let de,_e,Re,ze;h==="width"||h==="both"?(ze=M[0]+X-v[3],_e=M[0]+re+v[1]):(ze=M[0]+(X+re-U.displaySize[0])/2,_e=ze+U.displaySize[0]);const Ge=u.top*K,et=u.bottom*K;return h==="height"||h==="both"?(de=M[1]+Ge-v[0],Re=M[1]+et+v[2]):(de=M[1]+(Ge+et-U.displaySize[1])/2,Re=de+U.displaySize[1]),{image:U,top:de,right:_e,bottom:Re,left:ze,collisionPadding:W}}const Pf=255,zd=128,Kf=Pf*zd;function Bm(d,u){const{expression:h}=u;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Lo(d+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:M}=h;let K=0;for(;K<v.length&&v[K]<=d;)K++;K=Math.max(0,K-1);let U=K;for(;U<v.length&&v[U]<d+1;)U++;U=Math.min(v.length-1,U);const W=v[K],X=v[U];return h.kind==="composite"?{kind:"composite",minZoom:W,maxZoom:X,interpolationType:M}:{kind:"camera",minZoom:W,maxZoom:X,minSize:h.evaluate(new Lo(W)),maxSize:h.evaluate(new Lo(X)),interpolationType:M}}}function Gp(d,u,h){let v="never";const M=d.get(u);return M?v=M:d.get(h)&&(v="always"),v}const Om=_o.VectorTileFeature.types,gv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cp(d,u,h,v,M,K,U,W,X,re,de,_e,Re){const ze=W?Math.min(Kf,Math.round(W[0])):0,Ge=W?Math.min(Kf,Math.round(W[1])):0;d.emplaceBack(u,h,Math.round(32*v),Math.round(32*M),K,U,(ze<<1)+(X?1:0),Ge,16*re,16*de,256*_e,256*Re)}function m(d,u,h){d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h)}function C(d){for(const u of d.sections)if(qa(u.text))return!0;return!1}class R{constructor(u){this.layoutVertexArray=new Tt,this.indexArray=new yn,this.programConfigurations=u,this.segments=new pr,this.dynamicLayoutVertexArray=new nn,this.opacityVertexArray=new Zt,this.hasVisibleVertices=!1,this.placedSymbolArray=new Y}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,h,v,M){this.isEmpty()||(v&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,kf.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,A1.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,gv,!0),this.opacityVertexBuffer.itemSize=1),(v||M)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}hr("SymbolBuffers",R);class Q{constructor(u,h,v){this.layoutVertexArray=new u,this.layoutAttributes=h,this.indexArray=new v,this.segments=new pr,this.collisionVertexArray=new Bn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,tg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}hr("CollisionBuffers",Q);class le{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(U=>U.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bm(this.zoom,h["text-size"]),this.iconSizeData=Bm(this.zoom,h["icon-size"]);const v=this.layers[0].layout,M=v.get("symbol-sort-key"),K=v.get("symbol-z-order");this.canOverlap=Gp(v,"text-overlap","text-allow-overlap")!=="never"||Gp(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=K!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(K==="viewport-y"||K==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(U=>a.ai[U])),this.stateDependentLayerIds=this.layers.filter(U=>U.isStateDependent()).map(U=>U.id),this.sourceID=u.sourceID}createArrays(){this.text=new R(new Vs(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new R(new Vs(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new xe,this.lineVertexArray=new ke,this.symbolInstances=new ae,this.textAnchorOffsets=new $e}calculateGlyphDependencies(u,h,v,M,K){for(let U=0;U<u.length;U++)if(h[u.charCodeAt(U)]=!0,(v||M)&&K){const W=jp[u.charAt(U)];W&&(h[W.charCodeAt(0)]=!0)}}populate(u,h,v){const M=this.layers[0],K=M.layout,U=K.get("text-font"),W=K.get("text-field"),X=K.get("icon-image"),re=(W.value.kind!=="constant"||W.value.value instanceof Rr&&!W.value.value.isEmpty()||W.value.value.toString().length>0)&&(U.value.kind!=="constant"||U.value.value.length>0),de=X.value.kind!=="constant"||!!X.value.value||Object.keys(X.parameters).length>0,_e=K.get("symbol-sort-key");if(this.features=[],!re&&!de)return;const Re=h.iconDependencies,ze=h.glyphDependencies,Ge=h.availableImages,et=new Lo(this.zoom);for(const{feature:At,id:Ct,index:Nt,sourceLayerIndex:Et}of u){const Le=M._featureFilter.needGeometry,lt=yc(At,Le);if(!M._featureFilter.filter(et,lt,v))continue;let Ot,An;if(Le||(lt.geometry=gc(At)),re){const Cn=M.getValueAndResolveTokens("text-field",lt,v,Ge),fn=Rr.factory(Cn),jn=this.hasRTLText=this.hasRTLText||C(fn);(!jn||Nl.getRTLTextPluginStatus()==="unavailable"||jn&&Nl.isParsed())&&(Ot=up(fn,M,lt))}if(de){const Cn=M.getValueAndResolveTokens("icon-image",lt,v,Ge);An=Cn instanceof Gs?Cn:Gs.fromString(Cn)}if(!Ot&&!An)continue;const zn=this.sortFeaturesByKey?_e.evaluate(lt,{},v):void 0;if(this.features.push({id:Ct,text:Ot,icon:An,index:Nt,sourceLayerIndex:Et,geometry:lt.geometry,properties:At.properties,type:Om[At.type],sortKey:zn}),An&&(Re[An.name]=!0),Ot){const Cn=U.evaluate(lt,{},v).join(","),fn=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const jn of Ot.sections)if(jn.image)Re[jn.image.name]=!0;else{const Wn=fl(Ot.toString()),cr=jn.fontStack||Cn,kn=ze[cr]=ze[cr]||{};this.calculateGlyphDependencies(jn.text,kn,fn,this.allowVerticalPlacement,Wn)}}}K.get("symbol-placement")==="line"&&(this.features=function(At){const Ct={},Nt={},Et=[];let Le=0;function lt(Cn){Et.push(At[Cn]),Le++}function Ot(Cn,fn,jn){const Wn=Nt[Cn];return delete Nt[Cn],Nt[fn]=Wn,Et[Wn].geometry[0].pop(),Et[Wn].geometry[0]=Et[Wn].geometry[0].concat(jn[0]),Wn}function An(Cn,fn,jn){const Wn=Ct[fn];return delete Ct[fn],Ct[Cn]=Wn,Et[Wn].geometry[0].shift(),Et[Wn].geometry[0]=jn[0].concat(Et[Wn].geometry[0]),Wn}function zn(Cn,fn,jn){const Wn=jn?fn[0][fn[0].length-1]:fn[0][0];return`${Cn}:${Wn.x}:${Wn.y}`}for(let Cn=0;Cn<At.length;Cn++){const fn=At[Cn],jn=fn.geometry,Wn=fn.text?fn.text.toString():null;if(!Wn){lt(Cn);continue}const cr=zn(Wn,jn),kn=zn(Wn,jn,!0);if(cr in Nt&&kn in Ct&&Nt[cr]!==Ct[kn]){const jr=An(cr,kn,jn),gi=Ot(cr,kn,Et[jr].geometry);delete Ct[cr],delete Nt[kn],Nt[zn(Wn,Et[gi].geometry,!0)]=gi,Et[jr].geometry=null}else cr in Nt?Ot(cr,kn,jn):kn in Ct?An(cr,kn,jn):(lt(Cn),Ct[cr]=Le-1,Nt[kn]=Le-1)}return Et.filter(Cn=>Cn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((At,Ct)=>At.sortKey-Ct.sortKey)}update(u,h,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,h,this.layers,v),this.icon.programConfigurations.updatePaintArrays(u,h,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,h){const v=this.lineVertexArray.length;if(u.segment!==void 0){let M=u.dist(h[u.segment+1]),K=u.dist(h[u.segment]);const U={};for(let W=u.segment+1;W<h.length;W++)U[W]={x:h[W].x,y:h[W].y,tileUnitDistanceFromAnchor:M},W<h.length-1&&(M+=h[W+1].dist(h[W]));for(let W=u.segment||0;W>=0;W--)U[W]={x:h[W].x,y:h[W].y,tileUnitDistanceFromAnchor:K},W>0&&(K+=h[W-1].dist(h[W]));for(let W=0;W<h.length;W++){const X=U[W];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(u,h,v,M,K,U,W,X,re,de,_e,Re){const ze=u.indexArray,Ge=u.layoutVertexArray,et=u.segments.prepareSegment(4*h.length,Ge,ze,this.canOverlap?U.sortKey:void 0),At=this.glyphOffsetArray.length,Ct=et.vertexLength,Nt=this.allowVerticalPlacement&&W===a.ai.vertical?Math.PI/2:0,Et=U.text&&U.text.sections;for(let Le=0;Le<h.length;Le++){const{tl:lt,tr:Ot,bl:An,br:zn,tex:Cn,pixelOffsetTL:fn,pixelOffsetBR:jn,minFontScaleX:Wn,minFontScaleY:cr,glyphOffset:kn,isSDF:jr,sectionIndex:gi}=h[Le],di=et.vertexLength,Zr=kn[1];cp(Ge,X.x,X.y,lt.x,Zr+lt.y,Cn.x,Cn.y,v,jr,fn.x,fn.y,Wn,cr),cp(Ge,X.x,X.y,Ot.x,Zr+Ot.y,Cn.x+Cn.w,Cn.y,v,jr,jn.x,fn.y,Wn,cr),cp(Ge,X.x,X.y,An.x,Zr+An.y,Cn.x,Cn.y+Cn.h,v,jr,fn.x,jn.y,Wn,cr),cp(Ge,X.x,X.y,zn.x,Zr+zn.y,Cn.x+Cn.w,Cn.y+Cn.h,v,jr,jn.x,jn.y,Wn,cr),m(u.dynamicLayoutVertexArray,X,Nt),ze.emplaceBack(di,di+2,di+1),ze.emplaceBack(di+1,di+2,di+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kn[0]),Le!==h.length-1&&gi===h[Le+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ge.length,U,U.index,{},Re,Et&&Et[gi])}u.placedSymbolArray.emplaceBack(X.x,X.y,At,this.glyphOffsetArray.length-At,Ct,re,de,X.segment,v?v[0]:0,v?v[1]:0,M[0],M[1],W,0,!1,0,_e)}_addCollisionDebugVertex(u,h,v,M,K,U){return h.emplaceBack(0,0),u.emplaceBack(v.x,v.y,M,K,Math.round(U.x),Math.round(U.y))}addCollisionDebugVertices(u,h,v,M,K,U,W){const X=K.segments.prepareSegment(4,K.layoutVertexArray,K.indexArray),re=X.vertexLength,de=K.layoutVertexArray,_e=K.collisionVertexArray,Re=W.anchorX,ze=W.anchorY;this._addCollisionDebugVertex(de,_e,U,Re,ze,new F(u,h)),this._addCollisionDebugVertex(de,_e,U,Re,ze,new F(v,h)),this._addCollisionDebugVertex(de,_e,U,Re,ze,new F(v,M)),this._addCollisionDebugVertex(de,_e,U,Re,ze,new F(u,M)),X.vertexLength+=4;const Ge=K.indexArray;Ge.emplaceBack(re,re+1),Ge.emplaceBack(re+1,re+2),Ge.emplaceBack(re+2,re+3),Ge.emplaceBack(re+3,re),X.primitiveLength+=4}addDebugCollisionBoxes(u,h,v,M){for(let K=u;K<h;K++){const U=this.collisionBoxArray.get(K);this.addCollisionDebugVertices(U.x1,U.y1,U.x2,U.y2,M?this.textCollisionBox:this.iconCollisionBox,U.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Q(Mn,Tf.members,In),this.iconCollisionBox=new Q(Mn,Tf.members,In);for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(u,h,v,M,K,U,W,X,re){const de={};for(let _e=h;_e<v;_e++){const Re=u.get(_e);de.textBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.textFeatureIndex=Re.featureIndex;break}for(let _e=M;_e<K;_e++){const Re=u.get(_e);de.verticalTextBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.verticalTextFeatureIndex=Re.featureIndex;break}for(let _e=U;_e<W;_e++){const Re=u.get(_e);de.iconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.iconFeatureIndex=Re.featureIndex;break}for(let _e=X;_e<re;_e++){const Re=u.get(_e);de.verticalIconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},de.verticalIconFeatureIndex=Re.featureIndex;break}return de}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const v=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,h){const v=u.placedSymbolArray.get(h),M=v.vertexStartIndex+4*v.numGlyphs;for(let K=v.vertexStartIndex;K<M;K+=4)u.indexArray.emplaceBack(K,K+2,K+1),u.indexArray.emplaceBack(K+1,K+2,K+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(u),v=Math.cos(u),M=[],K=[],U=[];for(let W=0;W<this.symbolInstances.length;++W){U.push(W);const X=this.symbolInstances.get(W);M.push(0|Math.round(h*X.anchorX+v*X.anchorY)),K.push(X.featureIndex)}return U.sort((W,X)=>M[W]-M[X]||K[X]-K[W]),U}addToSortKeyRanges(u,h){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===h?v.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const v=this.symbolInstances.get(h);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((M,K,U)=>{M>=0&&U.indexOf(M)===K&&this.addIndicesForPlacedSymbol(this.text,M)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ge,tt;hr("SymbolBucket",le,{omit:["layers","collisionBoxArray","features","compareText"]}),le.MAX_GLYPHS=65535,le.addDynamicAttributes=m;var It={get paint(){return tt=tt||new ou({"icon-opacity":new Hr(Oe.paint_symbol["icon-opacity"]),"icon-color":new Hr(Oe.paint_symbol["icon-color"]),"icon-halo-color":new Hr(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hr(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hr(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Pr(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pr(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hr(Oe.paint_symbol["text-opacity"]),"text-color":new Hr(Oe.paint_symbol["text-color"],{runtimeType:Xr,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Hr(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new Hr(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new Hr(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Pr(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Pr(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return ge=ge||new ou({"symbol-placement":new Pr(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Pr(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pr(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hr(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pr(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pr(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Pr(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Pr(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pr(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pr(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hr(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Pr(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pr(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hr(Oe.layout_symbol["icon-image"]),"icon-rotate":new Hr(Oe.layout_symbol["icon-rotate"]),"icon-padding":new Hr(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Pr(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new Hr(Oe.layout_symbol["icon-offset"]),"icon-anchor":new Hr(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pr(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pr(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pr(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new Hr(Oe.layout_symbol["text-field"]),"text-font":new Hr(Oe.layout_symbol["text-font"]),"text-size":new Hr(Oe.layout_symbol["text-size"]),"text-max-width":new Hr(Oe.layout_symbol["text-max-width"]),"text-line-height":new Pr(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new Hr(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new Hr(Oe.layout_symbol["text-justify"]),"text-radial-offset":new Hr(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pr(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Hr(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Hr(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Pr(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Pr(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new Hr(Oe.layout_symbol["text-rotate"]),"text-padding":new Pr(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Pr(Oe.layout_symbol["text-keep-upright"]),"text-transform":new Hr(Oe.layout_symbol["text-transform"]),"text-offset":new Hr(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Pr(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Pr(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Pr(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Pr(Oe.layout_symbol["text-optional"])})}};class Wt{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Er,this.defaultValue=u}evaluate(u){if(u.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(u.formattedSection))return h.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hr("FormatSectionOverride",Wt,{omit:["defaultValue"]});class xn extends gA{constructor(u){super(u,It)}recalculate(u,h){if(super.recalculate(u,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const M=[];for(const K of v)M.indexOf(K)<0&&M.push(K);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,h,v,M){const K=this.layout.get(u).evaluate(h,{},v,M),U=this._unevaluatedLayout._values[u];return U.isDataDriven()||Xc(U.value)||!K?K:function(W,X){return X.replace(/{([^{}]+)}/g,(re,de)=>W&&de in W?String(W[de]):"")}(h.properties,K)}createBucket(u){return new le(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of It.paint.overridableProperties){if(!xn.hasPaintOverride(this.layout,u))continue;const h=this.paint.get(u),v=new Wt(h),M=new nu(v,h.property.specification);let K=null;K=h.value.kind==="constant"||h.value.kind==="source"?new Ga("source",M):new Jc("composite",M,h.value.zoomStops),this.paint._values[u]=new xs(h.property,K,h.parameters)}}_handleOverridablePaintPropertyUpdate(u,h,v){return!(!this.layout||h.isDataDriven()||v.isDataDriven())&&xn.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,h){const v=u.get("text-field"),M=It.paint.properties[h];let K=!1;const U=W=>{for(const X of W)if(M.overrides&&M.overrides.hasOverride(X))return void(K=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Rr)U(v.value.value.sections);else if(v.value.kind==="source"){const W=re=>{K||(re instanceof Zo&&co(re.value)===Sa?U(re.value.sections):re instanceof Vc?U(re.sections):re.eachChild(W))},X=v.value;X._styleExpression&&W(X._styleExpression.expression)}return K}}let Ar;var Cr={get paint(){return Ar=Ar||new ou({"background-color":new Pr(Oe.paint_background["background-color"]),"background-pattern":new Su(Oe.paint_background["background-pattern"]),"background-opacity":new Pr(Oe.paint_background["background-opacity"])})}};class ir extends gA{constructor(u){super(u,Cr)}}let qr;var oi={get paint(){return qr=qr||new ou({"raster-opacity":new Pr(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pr(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pr(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pr(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Pr(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Pr(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Pr(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Pr(Oe.paint_raster["raster-fade-duration"])})}};class ai extends gA{constructor(u){super(u,oi)}}class vl extends gA{constructor(u){super(u,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class cn{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Xt=63710088e-1;class dn{constructor(u,h){if(isNaN(u)||isNaN(h))throw new Error(`Invalid LngLat object: (${u}, ${h})`);if(this.lng=+u,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dn(Yt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const h=Math.PI/180,v=this.lat*h,M=u.lat*h,K=Math.sin(v)*Math.sin(M)+Math.cos(v)*Math.cos(M)*Math.cos((u.lng-this.lng)*h);return Xt*Math.acos(Math.min(K,1))}static convert(u){if(u instanceof dn)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new dn(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new dn(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const _r=2*Math.PI*Xt;function si(d){return _r*Math.cos(d*Math.PI/180)}function Ii(d){return(180+d)/360}function ki(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function Ni(d,u){return d/si(u)}function Tl(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function ws(d,u){return d*si(Tl(u))}class ld{constructor(u,h,v=0){this.x=+u,this.y=+h,this.z=+v}static fromLngLat(u,h=0){const v=dn.convert(u);return new ld(Ii(v.lng),ki(v.lat),Ni(h,v.lat))}toLngLat(){return new dn(360*this.x-180,Tl(this.y))}toAltitude(){return ws(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/_r*(u=Tl(this.y),1/Math.cos(u*Math.PI/180));var u}}function m1(d,u,h){var v=2*Math.PI*6378137/256/Math.pow(2,h);return[d*v-2*Math.PI*6378137/2,u*v-2*Math.PI*6378137/2]}class yv{constructor(u,h,v){if(!function(M,K,U){return!(M<0||M>25||U<0||U>=Math.pow(2,M)||K<0||K>=Math.pow(2,M))}(u,h,v))throw new Error(`x=${h}, y=${v}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=h,this.y=v,this.key=h0(0,u,u,h,v)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,h,v){const M=(U=this.y,W=this.z,X=m1(256*(K=this.x),256*(U=Math.pow(2,W)-U-1),W),re=m1(256*(K+1),256*(U+1),W),X[0]+","+X[1]+","+re[0]+","+re[1]);var K,U,W,X,re;const de=function(_e,Re,ze){let Ge,et="";for(let At=_e;At>0;At--)Ge=1<<At-1,et+=(Re&Ge?1:0)+(ze&Ge?2:0);return et}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,de).replace(/{bbox-epsg-3857}/g,M)}isChildOf(u){const h=this.z-u.z;return h>0&&u.x===this.x>>h&&u.y===this.y>>h}getTilePoint(u){const h=Math.pow(2,this.z);return new F((u.x*h-this.x)*at,(u.y*h-this.y)*at)}toString(){return`${this.z}/${this.x}/${this.y}`}}class D_{constructor(u,h){this.wrap=u,this.canonical=h,this.key=h0(u,h.z,h.z,h.x,h.y)}}class jd{constructor(u,h,v,M,K){if(this.terrainRttPosMatrix32f=null,u<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${v}`);this.overscaledZ=u,this.wrap=h,this.canonical=new yv(v,+M,+K),this.key=h0(h,u,v,M,K)}clone(){return new jd(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-u;return u>this.canonical.z?new jd(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jd(u,this.wrap,u,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(u,h){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-u;return u>this.canonical.z?h0(this.wrap*+h,u,this.canonical.z,this.canonical.x,this.canonical.y):h0(this.wrap*+h,u,u,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const h=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>h&&u.canonical.y===this.canonical.y>>h}children(u){if(this.overscaledZ>=u)return[new jd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,v=2*this.canonical.x,M=2*this.canonical.y;return[new jd(h,this.wrap,h,v,M),new jd(h,this.wrap,h,v+1,M),new jd(h,this.wrap,h,v,M+1),new jd(h,this.wrap,h,v+1,M+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new jd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new jd(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new D_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new ld(u.x-this.wrap,u.y))}}function h0(d,u,h,v,M){(d*=2)<0&&(d=-1*d-1);const K=1<<h;return(K*K*d+K*M+v).toString(36)+h.toString(36)+u.toString(36)}hr("CanonicalTileID",yv),hr("OverscaledTileID",jd,{omit:["terrainRttPosMatrix32f"]});class R_{constructor(u,h,v,M=1,K=1,U=1,W=0){if(this.uid=u,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void it(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const X=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=K,this.blueFactor=U,this.baseShift=W;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let re=0;re<X;re++)this.data[this._idx(-1,re)]=this.data[this._idx(0,re)],this.data[this._idx(X,re)]=this.data[this._idx(X-1,re)],this.data[this._idx(re,-1)]=this.data[this._idx(re,0)],this.data[this._idx(re,X)]=this.data[this._idx(re,X-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(X,-1)]=this.data[this._idx(X-1,0)],this.data[this._idx(-1,X)]=this.data[this._idx(0,X-1)],this.data[this._idx(X,X)]=this.data[this._idx(X-1,X-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let re=0;re<X;re++)for(let de=0;de<X;de++){const _e=this.get(re,de);_e>this.max&&(this.max=_e),_e<this.min&&(this.min=_e)}}get(u,h){const v=new Uint8Array(this.data.buffer),M=4*this._idx(u,h);return this.unpack(v[M],v[M+1],v[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,h){if(u<-1||u>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(u+1)}unpack(u,h,v){return u*this.redFactor+h*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new du({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,h,v){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let M=h*this.dim,K=h*this.dim+this.dim,U=v*this.dim,W=v*this.dim+this.dim;switch(h){case-1:M=K-1;break;case 1:K=M+1}switch(v){case-1:U=W-1;break;case 1:W=U+1}const X=-h*this.dim,re=-v*this.dim;for(let de=U;de<W;de++)for(let _e=M;_e<K;_e++)this.data[this._idx(_e,de)]=u.data[this._idx(_e+X,de+re)]}}hr("DEMData",R_);class F_{constructor(u){this._stringToNumber={},this._numberToString=[];for(let h=0;h<u.length;h++){const v=u[h];this._stringToNumber[v]=h,this._numberToString[h]=v}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class L_{constructor(u,h,v,M,K){this.type="Feature",this._vectorTileFeature=u,u._z=h,u._x=v,u._y=M,this.properties=u.properties,this.id=K}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(u[h]=this[h]);return u}}class U_{constructor(u,h){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new ia(at,16,0),this.grid3D=new ia(at,16,0),this.featureIndexArray=new pt,this.promoteId=h}insert(u,h,v,M,K,U){const W=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,M,K);const X=U?this.grid3D:this.grid;for(let re=0;re<h.length;re++){const de=h[re],_e=[1/0,1/0,-1/0,-1/0];for(let Re=0;Re<de.length;Re++){const ze=de[Re];_e[0]=Math.min(_e[0],ze.x),_e[1]=Math.min(_e[1],ze.y),_e[2]=Math.max(_e[2],ze.x),_e[3]=Math.max(_e[3],ze.y)}_e[0]<at&&_e[1]<at&&_e[2]>=0&&_e[3]>=0&&X.insert(W,_e[0],_e[1],_e[2],_e[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new _o.VectorTile(new Gh(this.rawTileData)).layers,this.sourceLayerCoder=new F_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,h,v,M){this.loadVTLayers();const K=u.params,U=at/u.tileSize/u.scale,W=lc(K.filter),X=u.queryGeometry,re=u.queryPadding*U,de=ch(X),_e=this.grid.query(de.minX-re,de.minY-re,de.maxX+re,de.maxY+re),Re=ch(u.cameraQueryGeometry),ze=this.grid3D.query(Re.minX-re,Re.minY-re,Re.maxX+re,Re.maxY+re,(At,Ct,Nt,Et)=>function(Le,lt,Ot,An,zn){for(const fn of Le)if(lt<=fn.x&&Ot<=fn.y&&An>=fn.x&&zn>=fn.y)return!0;const Cn=[new F(lt,Ot),new F(lt,zn),new F(An,zn),new F(An,Ot)];if(Le.length>2){for(const fn of Cn)if(oh(Le,fn))return!0}for(let fn=0;fn<Le.length-1;fn++)if(sh(Le[fn],Le[fn+1],Cn))return!0;return!1}(u.cameraQueryGeometry,At-re,Ct-re,Nt+re,Et+re));for(const At of ze)_e.push(At);_e.sort(G3);const Ge={};let et;for(let At=0;At<_e.length;At++){const Ct=_e[At];if(Ct===et)continue;et=Ct;const Nt=this.featureIndexArray.get(Ct);let Et=null;this.loadMatchingFeature(Ge,Nt.bucketIndex,Nt.sourceLayerIndex,Nt.featureIndex,W,K.layers,K.availableImages,h,v,M,(Le,lt,Ot)=>(Et||(Et=gc(Le)),lt.queryIntersectsFeature({queryGeometry:X,feature:Le,featureState:Ot,geometry:Et,zoom:this.z,transform:u.transform,pixelsToTileUnits:U,pixelPosMatrix:u.pixelPosMatrix})))}return Ge}loadMatchingFeature(u,h,v,M,K,U,W,X,re,de,_e){const Re=this.bucketLayerIDs[h];if(U&&!Re.some(At=>U.has(At)))return;const ze=this.sourceLayerCoder.decode(v),Ge=this.vtLayers[ze].feature(M);if(K.needGeometry){const At=yc(Ge,!0);if(!K.filter(new Lo(this.tileID.overscaledZ),At,this.tileID.canonical))return}else if(!K.filter(new Lo(this.tileID.overscaledZ),Ge))return;const et=this.getId(Ge,ze);for(let At=0;At<Re.length;At++){const Ct=Re[At];if(U&&!U.has(Ct))continue;const Nt=X[Ct];if(!Nt)continue;let Et={};et&&de&&(Et=de.getState(Nt.sourceLayer||"_geojsonTileLayer",et));const Le=gt({},re[Ct]);Le.paint=z_(Le.paint,Nt.paint,Ge,Et,W),Le.layout=z_(Le.layout,Nt.layout,Ge,Et,W);const lt=!_e||_e(Ge,Nt,Et);if(!lt)continue;const Ot=new L_(Ge,this.z,this.x,this.y,et);Ot.layer=Le;let An=u[Ct];An===void 0&&(An=u[Ct]=[]),An.push({featureIndex:M,feature:Ot,intersectionZ:lt})}}lookupSymbolFeatures(u,h,v,M,K,U,W,X){const re={};this.loadVTLayers();const de=lc(K);for(const _e of u)this.loadMatchingFeature(re,v,M,_e,de,U,W,X,h);return re}hasLayer(u){for(const h of this.bucketLayerIDs)for(const v of h)if(u===v)return!0;return!1}getId(u,h){var v;let M=u.id;return this.promoteId&&(M=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof M=="boolean"&&(M=Number(M)),M===void 0&&(!((v=u.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(M=Number(u.properties.cluster_id))),M}}function z_(d,u,h,v,M){return Kt(d,(K,U)=>{const W=u instanceof fs?u.get(U):null;return W&&W.evaluate?W.evaluate(h,v,M):W})}function ch(d){let u=1/0,h=1/0,v=-1/0,M=-1/0;for(const K of d)u=Math.min(u,K.x),h=Math.min(h,K.y),v=Math.max(v,K.x),M=Math.max(M,K.y);return{minX:u,minY:h,maxX:v,maxY:M}}function G3(d,u){return u-d}function j_(d,u,h,v,M){const K=[];for(let U=0;U<d.length;U++){const W=d[U];let X;for(let re=0;re<W.length-1;re++){let de=W[re],_e=W[re+1];de.x<u&&_e.x<u||(de.x<u?de=new F(u,de.y+(u-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x<u&&(_e=new F(u,de.y+(u-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y<h&&_e.y<h||(de.y<h?de=new F(de.x+(h-de.y)/(_e.y-de.y)*(_e.x-de.x),h)._round():_e.y<h&&(_e=new F(de.x+(h-de.y)/(_e.y-de.y)*(_e.x-de.x),h)._round()),de.x>=v&&_e.x>=v||(de.x>=v?de=new F(v,de.y+(v-de.x)/(_e.x-de.x)*(_e.y-de.y))._round():_e.x>=v&&(_e=new F(v,de.y+(v-de.x)/(_e.x-de.x)*(_e.y-de.y))._round()),de.y>=M&&_e.y>=M||(de.y>=M?de=new F(de.x+(M-de.y)/(_e.y-de.y)*(_e.x-de.x),M)._round():_e.y>=M&&(_e=new F(de.x+(M-de.y)/(_e.y-de.y)*(_e.x-de.x),M)._round()),X&&de.equals(X[X.length-1])||(X=[de],K.push(X)),X.push(_e)))))}}return K}hr("FeatureIndex",U_,{omit:["rawTileData","sourceLayerCoder"]});class ud extends F{constructor(u,h,v,M){super(u,h),this.angle=v,M!==void 0&&(this.segment=M)}clone(){return new ud(this.x,this.y,this.angle,this.segment)}}function Eo(d,u,h,v,M){if(u.segment===void 0||h===0)return!0;let K=u,U=u.segment+1,W=0;for(;W>-h/2;){if(U--,U<0)return!1;W-=d[U].dist(K),K=d[U]}W+=d[U].dist(d[U+1]),U++;const X=[];let re=0;for(;W<h/2;){const de=d[U],_e=d[U+1];if(!_e)return!1;let Re=d[U-1].angleTo(de)-de.angleTo(_e);for(Re=Math.abs((Re+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:W,angleDelta:Re}),re+=Re;W-X[0].distance>v;)re-=X.shift().angleDelta;if(re>M)return!1;U++,W+=de.dist(_e)}return!0}function N_(d){let u=0;for(let h=0;h<d.length-1;h++)u+=d[h].dist(d[h+1]);return u}function Nc(d,u,h){return d?.6*u*h:0}function Ql(d,u){return Math.max(d?d.right-d.left:0,u?u.right-u.left:0)}function Q3(d,u,h,v,M,K){const U=Nc(h,M,K),W=Ql(h,v)*K;let X=0;const re=N_(d)/2;for(let de=0;de<d.length-1;de++){const _e=d[de],Re=d[de+1],ze=_e.dist(Re);if(X+ze>re){const Ge=(re-X)/ze,et=Xi.number(_e.x,Re.x,Ge),At=Xi.number(_e.y,Re.y,Ge),Ct=new ud(et,At,Re.angleTo(_e),de);return Ct._round(),!U||Eo(d,Ct,W,U,u)?Ct:void 0}X+=ze}}function Qp(d,u,h,v,M,K,U,W,X){const re=Nc(v,K,U),de=Ql(v,M),_e=de*U,Re=d[0].x===0||d[0].x===X||d[0].y===0||d[0].y===X;return u-_e<u/4&&(u=_e+u/4),W_(d,Re?u/2*W%u:(de/2+2*K)*U*W%u,u,re,h,_e,Re,!1,X)}function W_(d,u,h,v,M,K,U,W,X){const re=K/2,de=N_(d);let _e=0,Re=u-h,ze=[];for(let Ge=0;Ge<d.length-1;Ge++){const et=d[Ge],At=d[Ge+1],Ct=et.dist(At),Nt=At.angleTo(et);for(;Re+h<_e+Ct;){Re+=h;const Et=(Re-_e)/Ct,Le=Xi.number(et.x,At.x,Et),lt=Xi.number(et.y,At.y,Et);if(Le>=0&&Le<X&&lt>=0&&lt<X&&Re-re>=0&&Re+re<=de){const Ot=new ud(Le,lt,Nt,Ge);Ot._round(),v&&!Eo(d,Ot,K,v,M)||ze.push(Ot)}}_e+=Ct}return W||ze.length||U||(ze=W_(d,_e/2,h,v,M,K,U,!0,X)),ze}hr("Anchor",ud);const fg=$A;function G_(d,u,h,v){const M=[],K=d.image,U=K.pixelRatio,W=K.paddedRect.w-2*fg,X=K.paddedRect.h-2*fg;let re={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const de=K.stretchX||[[0,W]],_e=K.stretchY||[[0,X]],Re=(kn,jr)=>kn+jr[1]-jr[0],ze=de.reduce(Re,0),Ge=_e.reduce(Re,0),et=W-ze,At=X-Ge;let Ct=0,Nt=ze,Et=0,Le=Ge,lt=0,Ot=et,An=0,zn=At;if(K.content&&v){const kn=K.content,jr=kn[2]-kn[0],gi=kn[3]-kn[1];(K.textFitWidth||K.textFitHeight)&&(re=Wp(d)),Ct=g1(de,0,kn[0]),Et=g1(_e,0,kn[1]),Nt=g1(de,kn[0],kn[2]),Le=g1(_e,kn[1],kn[3]),lt=kn[0]-Ct,An=kn[1]-Et,Ot=jr-Nt,zn=gi-Le}const Cn=re.x1,fn=re.y1,jn=re.x2-Cn,Wn=re.y2-fn,cr=(kn,jr,gi,di)=>{const Zr=f0(kn.stretch-Ct,Nt,jn,Cn),No=y1(kn.fixed-lt,Ot,kn.stretch,ze),al=f0(jr.stretch-Et,Le,Wn,fn),fu=y1(jr.fixed-An,zn,jr.stretch,Ge),wA=f0(gi.stretch-Ct,Nt,jn,Cn),cd=y1(gi.fixed-lt,Ot,gi.stretch,ze),bc=f0(di.stretch-Et,Le,Wn,fn),rA=y1(di.fixed-An,zn,di.stretch,Ge),Ha=new F(Zr,al),Tu=new F(wA,al),iA=new F(wA,bc),Cl=new F(Zr,bc),xc=new F(No/U,fu/U),Nd=new F(cd/U,rA/U),Pu=u*Math.PI/180;if(Pu){const mu=Math.sin(Pu),gu=Math.cos(Pu),ql=[gu,-mu,mu,gu];Ha._matMult(ql),Tu._matMult(ql),Cl._matMult(ql),iA._matMult(ql)}const Wc=kn.stretch+kn.fixed,pu=jr.stretch+jr.fixed;return{tl:Ha,tr:Tu,bl:Cl,br:iA,tex:{x:K.paddedRect.x+fg+Wc,y:K.paddedRect.y+fg+pu,w:gi.stretch+gi.fixed-Wc,h:di.stretch+di.fixed-pu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xc,pixelOffsetBR:Nd,minFontScaleX:Ot/U/jn,minFontScaleY:zn/U/Wn,isSDF:h}};if(v&&(K.stretchX||K.stretchY)){const kn=Q_(de,et,ze),jr=Q_(_e,At,Ge);for(let gi=0;gi<kn.length-1;gi++){const di=kn[gi],Zr=kn[gi+1];for(let No=0;No<jr.length-1;No++)M.push(cr(di,jr[No],Zr,jr[No+1]))}}else M.push(cr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:W+1},{fixed:0,stretch:X+1}));return M}function g1(d,u,h){let v=0;for(const M of d)v+=Math.max(u,Math.min(h,M[1]))-Math.max(u,Math.min(h,M[0]));return v}function Q_(d,u,h){const v=[{fixed:-1,stretch:0}];for(const[M,K]of d){const U=v[v.length-1];v.push({fixed:M-U.stretch,stretch:U.stretch}),v.push({fixed:M-U.stretch,stretch:U.stretch+(K-M)})}return v.push({fixed:u+fg,stretch:h}),v}function f0(d,u,h,v){return d/u*h+v}function y1(d,u,h,v){return d-u*h/v}class dh{constructor(u,h,v,M,K,U,W,X,re,de){var _e;if(this.boxStartIndex=u.length,re){let Re=U.top,ze=U.bottom;const Ge=U.collisionPadding;Ge&&(Re-=Ge[1],ze+=Ge[3]);let et=ze-Re;et>0&&(et=Math.max(10,et),this.circleDiameter=et)}else{const Re=!((_e=U.image)===null||_e===void 0)&&_e.content&&(U.image.textFitWidth||U.image.textFitHeight)?Wp(U):{x1:U.left,y1:U.top,x2:U.right,y2:U.bottom};Re.y1=Re.y1*W-X[0],Re.y2=Re.y2*W+X[2],Re.x1=Re.x1*W-X[3],Re.x2=Re.x2*W+X[1];const ze=U.collisionPadding;if(ze&&(Re.x1-=ze[0]*W,Re.y1-=ze[1]*W,Re.x2+=ze[2]*W,Re.y2+=ze[3]*W),de){const Ge=new F(Re.x1,Re.y1),et=new F(Re.x2,Re.y1),At=new F(Re.x1,Re.y2),Ct=new F(Re.x2,Re.y2),Nt=de*Math.PI/180;Ge._rotate(Nt),et._rotate(Nt),At._rotate(Nt),Ct._rotate(Nt),Re.x1=Math.min(Ge.x,et.x,At.x,Ct.x),Re.x2=Math.max(Ge.x,et.x,At.x,Ct.x),Re.y1=Math.min(Ge.y,et.y,At.y,Ct.y),Re.y2=Math.max(Ge.y,et.y,At.y,Ct.y)}u.emplaceBack(h.x,h.y,Re.x1,Re.y1,Re.x2,Re.y2,v,M,K)}this.boxEndIndex=u.length}}class q_{constructor(u=[],h=(v,M)=>v<M?-1:v>M?1:0){if(this.data=u,this.length=this.data.length,this.compare=h,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:h,compare:v}=this,M=h[u];for(;u>0;){const K=u-1>>1,U=h[K];if(v(M,U)>=0)break;h[u]=U,u=K}h[u]=M}_down(u){const{data:h,compare:v}=this,M=this.length>>1,K=h[u];for(;u<M;){let U=1+(u<<1);const W=U+1;if(W<this.length&&v(h[W],h[U])<0&&(U=W),v(h[U],K)>=0)break;h[u]=h[U],u=U}h[u]=K}}function v1(d,u=1,h=!1){let v=1/0,M=1/0,K=-1/0,U=-1/0;const W=d[0];for(let ze=0;ze<W.length;ze++){const Ge=W[ze];(!ze||Ge.x<v)&&(v=Ge.x),(!ze||Ge.y<M)&&(M=Ge.y),(!ze||Ge.x>K)&&(K=Ge.x),(!ze||Ge.y>U)&&(U=Ge.y)}const X=Math.min(K-v,U-M);let re=X/2;const de=new q_([],Pl);if(X===0)return new F(v,M);for(let ze=v;ze<K;ze+=X)for(let Ge=M;Ge<U;Ge+=X)de.push(new La(ze+re,Ge+re,re,d));let _e=function(ze){let Ge=0,et=0,At=0;const Ct=ze[0];for(let Nt=0,Et=Ct.length,Le=Et-1;Nt<Et;Le=Nt++){const lt=Ct[Nt],Ot=Ct[Le],An=lt.x*Ot.y-Ot.x*lt.y;et+=(lt.x+Ot.x)*An,At+=(lt.y+Ot.y)*An,Ge+=3*An}return new La(et/Ge,At/Ge,0,ze)}(d),Re=de.length;for(;de.length;){const ze=de.pop();(ze.d>_e.d||!_e.d)&&(_e=ze,h&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Re)),ze.max-_e.d<=u||(re=ze.h/2,de.push(new La(ze.p.x-re,ze.p.y-re,re,d)),de.push(new La(ze.p.x+re,ze.p.y-re,re,d)),de.push(new La(ze.p.x-re,ze.p.y+re,re,d)),de.push(new La(ze.p.x+re,ze.p.y+re,re,d)),Re+=4)}return h&&(console.log(`num probes: ${Re}`),console.log(`best distance: ${_e.d}`)),_e.p}function Pl(d,u){return u.max-d.max}function La(d,u,h,v){this.p=new F(d,u),this.h=h,this.d=function(M,K){let U=!1,W=1/0;for(let X=0;X<K.length;X++){const re=K[X];for(let de=0,_e=re.length,Re=_e-1;de<_e;Re=de++){const ze=re[de],Ge=re[Re];ze.y>M.y!=Ge.y>M.y&&M.x<(Ge.x-ze.x)*(M.y-ze.y)/(Ge.y-ze.y)+ze.x&&(U=!U),W=Math.min(W,ih(M,ze,Ge))}}return(U?1:-1)*Math.sqrt(W)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var nA;a.av=void 0,(nA=a.av||(a.av={}))[nA.center=1]="center",nA[nA.left=2]="left",nA[nA.right=3]="right",nA[nA.top=4]="top",nA[nA.bottom=5]="bottom",nA[nA["top-left"]=6]="top-left",nA[nA["top-right"]=7]="top-right",nA[nA["bottom-left"]=8]="bottom-left",nA[nA["bottom-right"]=9]="bottom-right";const qp=7,vv=Number.POSITIVE_INFINITY;function Y_(d,u){return u[1]!==vv?function(h,v,M){let K=0,U=0;switch(v=Math.abs(v),M=Math.abs(M),h){case"top-right":case"top-left":case"top":U=M-qp;break;case"bottom-right":case"bottom-left":case"bottom":U=-M+qp}switch(h){case"top-right":case"bottom-right":case"right":K=-v;break;case"top-left":case"bottom-left":case"left":K=v}return[K,U]}(d,u[0],u[1]):function(h,v){let M=0,K=0;v<0&&(v=0);const U=v/Math.SQRT2;switch(h){case"top-right":case"top-left":K=U-qp;break;case"bottom-right":case"bottom-left":K=-U+qp;break;case"bottom":K=-v+qp;break;case"top":K=v-qp}switch(h){case"top-right":case"bottom-right":M=-U;break;case"top-left":case"bottom-left":M=U;break;case"left":M=v;break;case"right":M=-v}return[M,K]}(d,u[0])}function $_(d,u,h){var v;const M=d.layout,K=(v=M.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(u,{},h);if(K){const W=K.values,X=[];for(let re=0;re<W.length;re+=2){const de=X[re]=W[re],_e=W[re+1].map(Re=>Re*kl);de.startsWith("top")?_e[1]-=qp:de.startsWith("bottom")&&(_e[1]+=qp),X[re+1]=_e}return new Mo(X)}const U=M.get("text-variable-anchor");if(U){let W;W=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(u,{},h)*kl,vv]:M.get("text-offset").evaluate(u,{},h).map(re=>re*kl);const X=[];for(const re of U)X.push(re,Y_(re,W));return new Mo(X)}return null}function Cv(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function q3(d,u,h,v,M,K,U,W,X,re,de,_e){let Re=K.textMaxSize.evaluate(u,{});Re===void 0&&(Re=U);const ze=d.layers[0].layout,Ge=ze.get("icon-offset").evaluate(u,{},de),et=p0(h.horizontal),At=U/24,Ct=d.tilePixelRatio*At,Nt=d.tilePixelRatio*Re/24,Et=d.tilePixelRatio*W,Le=d.tilePixelRatio*ze.get("symbol-spacing"),lt=ze.get("text-padding")*d.tilePixelRatio,Ot=function(gi,di,Zr,No=1){const al=gi.get("icon-padding").evaluate(di,{},Zr),fu=al&&al.values;return[fu[0]*No,fu[1]*No,fu[2]*No,fu[3]*No]}(ze,u,de,d.tilePixelRatio),An=ze.get("text-max-angle")/180*Math.PI,zn=ze.get("text-rotation-alignment")!=="viewport"&&ze.get("symbol-placement")!=="point",Cn=ze.get("icon-rotation-alignment")==="map"&&ze.get("symbol-placement")!=="point",fn=ze.get("symbol-placement"),jn=Le/2,Wn=ze.get("icon-text-fit");let cr;v&&Wn!=="none"&&(d.allowVerticalPlacement&&h.vertical&&(cr=Em(v,h.vertical,Wn,ze.get("icon-text-fit-padding"),Ge,At)),et&&(v=Em(v,et,Wn,ze.get("icon-text-fit-padding"),Ge,At)));const kn=de?_e.line.getGranularityForZoomLevel(de.z):1,jr=(gi,di)=>{di.x<0||di.x>=at||di.y<0||di.y>=at||function(Zr,No,al,fu,wA,cd,bc,rA,Ha,Tu,iA,Cl,xc,Nd,Pu,Wc,pu,mu,gu,ql,xa,$h,g0,Vh,Y3){const y0=Zr.addToLineVertexArray(No,al);let Im,v0,C0,_0,X_=0,J_=0,eb=0,tb=0,Mv=-1,Sv=-1;const dp={};let nb=Jo("");if(Zr.allowVerticalPlacement&&fu.vertical){const VA=rA.layout.get("text-rotate").evaluate(xa,{},Vh)+90;C0=new dh(Ha,No,Tu,iA,Cl,fu.vertical,xc,Nd,Pu,VA),bc&&(_0=new dh(Ha,No,Tu,iA,Cl,bc,pu,mu,Pu,VA))}if(wA){const VA=rA.layout.get("icon-rotate").evaluate(xa,{}),Za=rA.layout.get("icon-text-fit")!=="none",hp=G_(wA,VA,g0,Za),Zh=bc?G_(bc,VA,g0,Za):void 0;v0=new dh(Ha,No,Tu,iA,Cl,wA,pu,mu,!1,VA),X_=4*hp.length;const km=Zr.iconSizeData;let Rf=null;km.kind==="source"?(Rf=[zd*rA.layout.get("icon-size").evaluate(xa,{})],Rf[0]>Kf&&it(`${Zr.layerIds[0]}: Value for "icon-size" is >= ${Pf}. Reduce your "icon-size".`)):km.kind==="composite"&&(Rf=[zd*$h.compositeIconSizes[0].evaluate(xa,{},Vh),zd*$h.compositeIconSizes[1].evaluate(xa,{},Vh)],(Rf[0]>Kf||Rf[1]>Kf)&&it(`${Zr.layerIds[0]}: Value for "icon-size" is >= ${Pf}. Reduce your "icon-size".`)),Zr.addSymbols(Zr.icon,hp,Rf,ql,gu,xa,a.ai.none,No,y0.lineStartIndex,y0.lineLength,-1,Vh),Mv=Zr.icon.placedSymbolArray.length-1,Zh&&(J_=4*Zh.length,Zr.addSymbols(Zr.icon,Zh,Rf,ql,gu,xa,a.ai.vertical,No,y0.lineStartIndex,y0.lineLength,-1,Vh),Sv=Zr.icon.placedSymbolArray.length-1)}const rb=Object.keys(fu.horizontal);for(const VA of rb){const Za=fu.horizontal[VA];if(!Im){nb=Jo(Za.text);const Zh=rA.layout.get("text-rotate").evaluate(xa,{},Vh);Im=new dh(Ha,No,Tu,iA,Cl,Za,xc,Nd,Pu,Zh)}const hp=Za.positionedLines.length===1;if(eb+=_v(Zr,No,Za,cd,rA,Pu,xa,Wc,y0,fu.vertical?a.ai.horizontal:a.ai.horizontalOnly,hp?rb:[VA],dp,Mv,$h,Vh),hp)break}fu.vertical&&(tb+=_v(Zr,No,fu.vertical,cd,rA,Pu,xa,Wc,y0,a.ai.vertical,["vertical"],dp,Sv,$h,Vh));const $3=Im?Im.boxStartIndex:Zr.collisionBoxArray.length,V3=Im?Im.boxEndIndex:Zr.collisionBoxArray.length,H3=C0?C0.boxStartIndex:Zr.collisionBoxArray.length,Z3=C0?C0.boxEndIndex:Zr.collisionBoxArray.length,X3=v0?v0.boxStartIndex:Zr.collisionBoxArray.length,Ev=v0?v0.boxEndIndex:Zr.collisionBoxArray.length,ib=_0?_0.boxStartIndex:Zr.collisionBoxArray.length,ob=_0?_0.boxEndIndex:Zr.collisionBoxArray.length;let Hh=-1;const x1=(VA,Za)=>VA&&VA.circleDiameter?Math.max(VA.circleDiameter,Za):Za;Hh=x1(Im,Hh),Hh=x1(C0,Hh),Hh=x1(v0,Hh),Hh=x1(_0,Hh);const sb=Hh>-1?1:0;sb&&(Hh*=Y3/kl),Zr.glyphOffsetArray.length>=le.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xa.sortKey!==void 0&&Zr.addToSortKeyRanges(Zr.symbolInstances.length,xa.sortKey);const Bv=$_(rA,xa,Vh),[J3,e4]=function(VA,Za){const hp=VA.length,Zh=Za==null?void 0:Za.values;if((Zh==null?void 0:Zh.length)>0)for(let km=0;km<Zh.length;km+=2){const Rf=Zh[km+1];VA.emplaceBack(a.av[Zh[km]],Rf[0],Rf[1])}return[hp,VA.length]}(Zr.textAnchorOffsets,Bv);Zr.symbolInstances.emplaceBack(No.x,No.y,dp.right>=0?dp.right:-1,dp.center>=0?dp.center:-1,dp.left>=0?dp.left:-1,dp.vertical||-1,Mv,Sv,nb,$3,V3,H3,Z3,X3,Ev,ib,ob,Tu,eb,tb,X_,J_,sb,0,xc,Hh,J3,e4)}(d,di,gi,h,v,M,cr,d.layers[0],d.collisionBoxArray,u.index,u.sourceLayerIndex,d.index,Ct,[lt,lt,lt,lt],zn,X,Et,Ot,Cn,Ge,u,K,re,de,U)};if(fn==="line")for(const gi of j_(u.geometry,0,0,at,at)){const di=Vn(gi,kn),Zr=Qp(di,Le,An,h.vertical||et,v,24,Nt,d.overscaling,at);for(const No of Zr)et&&bv(d,et.text,jn,No)||jr(di,No)}else if(fn==="line-center"){for(const gi of u.geometry)if(gi.length>1){const di=Vn(gi,kn),Zr=Q3(di,An,h.vertical||et,v,24,Nt);Zr&&jr(di,Zr)}}else if(u.type==="Polygon")for(const gi of wl(u.geometry,0)){const di=v1(gi,16);jr(Vn(gi[0],kn,!0),new ud(di.x,di.y,0))}else if(u.type==="LineString")for(const gi of u.geometry){const di=Vn(gi,kn);jr(di,new ud(di[0].x,di[0].y,0))}else if(u.type==="Point")for(const gi of u.geometry)for(const di of gi)jr([di],new ud(di.x,di.y,0))}function _v(d,u,h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge){const et=function(Nt,Et,Le,lt,Ot,An,zn,Cn){const fn=lt.layout.get("text-rotate").evaluate(An,{})*Math.PI/180,jn=[];for(const Wn of Et.positionedLines)for(const cr of Wn.positionedGlyphs){if(!cr.rect)continue;const kn=cr.rect||{};let jr=mv+1,gi=!0,di=1,Zr=0;const No=(Ot||Cn)&&cr.vertical,al=cr.metrics.advance*cr.scale/2;if(Cn&&Et.verticalizable&&(Zr=Wn.lineOffset/2-(cr.imageName?-(kl-cr.metrics.width*cr.scale)/2:(cr.scale-1)*kl)),cr.imageName){const mu=zn[cr.imageName];gi=mu.sdf,di=mu.pixelRatio,jr=$A/di}const fu=Ot?[cr.x+al,cr.y]:[0,0];let wA=Ot?[0,0]:[cr.x+al+Le[0],cr.y+Le[1]-Zr],cd=[0,0];No&&(cd=wA,wA=[0,0]);const bc=cr.metrics.isDoubleResolution?2:1,rA=(cr.metrics.left-jr)*cr.scale-al+wA[0],Ha=(-cr.metrics.top-jr)*cr.scale+wA[1],Tu=rA+kn.w/bc*cr.scale/di,iA=Ha+kn.h/bc*cr.scale/di,Cl=new F(rA,Ha),xc=new F(Tu,Ha),Nd=new F(rA,iA),Pu=new F(Tu,iA);if(No){const mu=new F(-al,al-s0),gu=-Math.PI/2,ql=kl/2-al,xa=new F(5-s0-ql,-(cr.imageName?ql:0)),$h=new F(...cd);Cl._rotateAround(gu,mu)._add(xa)._add($h),xc._rotateAround(gu,mu)._add(xa)._add($h),Nd._rotateAround(gu,mu)._add(xa)._add($h),Pu._rotateAround(gu,mu)._add(xa)._add($h)}if(fn){const mu=Math.sin(fn),gu=Math.cos(fn),ql=[gu,-mu,mu,gu];Cl._matMult(ql),xc._matMult(ql),Nd._matMult(ql),Pu._matMult(ql)}const Wc=new F(0,0),pu=new F(0,0);jn.push({tl:Cl,tr:xc,bl:Nd,br:Pu,tex:kn,writingMode:Et.writingMode,glyphOffset:fu,sectionIndex:cr.sectionIndex,isSDF:gi,pixelOffsetTL:Wc,pixelOffsetBR:pu,minFontScaleX:0,minFontScaleY:0})}return jn}(0,h,W,M,K,U,v,d.allowVerticalPlacement),At=d.textSizeData;let Ct=null;At.kind==="source"?(Ct=[zd*M.layout.get("text-size").evaluate(U,{})],Ct[0]>Kf&&it(`${d.layerIds[0]}: Value for "text-size" is >= ${Pf}. Reduce your "text-size".`)):At.kind==="composite"&&(Ct=[zd*ze.compositeTextSizes[0].evaluate(U,{},Ge),zd*ze.compositeTextSizes[1].evaluate(U,{},Ge)],(Ct[0]>Kf||Ct[1]>Kf)&&it(`${d.layerIds[0]}: Value for "text-size" is >= ${Pf}. Reduce your "text-size".`)),d.addSymbols(d.text,et,Ct,W,K,U,re,u,X.lineStartIndex,X.lineLength,Re,Ge);for(const Nt of de)_e[Nt]=d.text.placedSymbolArray.length-1;return 4*et.length}function p0(d){for(const u in d)return d[u];return null}function bv(d,u,h,v){const M=d.compareText;if(u in M){const K=M[u];for(let U=K.length-1;U>=0;U--)if(v.dist(K[U])<h)return!0}else M[u]=[];return M[u].push(v),!1}const V_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class C1{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,v]=new Uint8Array(u,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=v>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const K=V_[15&v];if(!K)throw new Error("Unrecognized array type.");const[U]=new Uint16Array(u,2,1),[W]=new Uint32Array(u,4,1);return new C1(W,U,K,u)}constructor(u,h=64,v=Float64Array,M){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=v,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const K=V_.indexOf(this.ArrayType),U=2*u*this.ArrayType.BYTES_PER_ELEMENT,W=u*this.IndexArrayType.BYTES_PER_ELEMENT,X=(8-W%8)%8;if(K<0)throw new Error(`Unexpected typed array class: ${v}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+W+X,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+U+W+X),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+W+X,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+K]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=u)}add(u,h){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=u,this.coords[this._pos++]=h,v}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return m0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,h,v,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:K,coords:U,nodeSize:W}=this,X=[0,K.length-1,0],re=[];for(;X.length;){const de=X.pop()||0,_e=X.pop()||0,Re=X.pop()||0;if(_e-Re<=W){for(let At=Re;At<=_e;At++){const Ct=U[2*At],Nt=U[2*At+1];Ct>=u&&Ct<=v&&Nt>=h&&Nt<=M&&re.push(K[At])}continue}const ze=Re+_e>>1,Ge=U[2*ze],et=U[2*ze+1];Ge>=u&&Ge<=v&&et>=h&&et<=M&&re.push(K[ze]),(de===0?u<=Ge:h<=et)&&(X.push(Re),X.push(ze-1),X.push(1-de)),(de===0?v>=Ge:M>=et)&&(X.push(ze+1),X.push(_e),X.push(1-de))}return re}within(u,h,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:K,nodeSize:U}=this,W=[0,M.length-1,0],X=[],re=v*v;for(;W.length;){const de=W.pop()||0,_e=W.pop()||0,Re=W.pop()||0;if(_e-Re<=U){for(let At=Re;At<=_e;At++)H_(K[2*At],K[2*At+1],u,h)<=re&&X.push(M[At]);continue}const ze=Re+_e>>1,Ge=K[2*ze],et=K[2*ze+1];H_(Ge,et,u,h)<=re&&X.push(M[ze]),(de===0?u-v<=Ge:h-v<=et)&&(W.push(Re),W.push(ze-1),W.push(1-de)),(de===0?u+v>=Ge:h+v>=et)&&(W.push(ze+1),W.push(_e),W.push(1-de))}return X}}function m0(d,u,h,v,M,K){if(M-v<=h)return;const U=v+M>>1;Ad(d,u,U,v,M,K),m0(d,u,h,v,U-1,1-K),m0(d,u,h,U+1,M,1-K)}function Ad(d,u,h,v,M,K){for(;M>v;){if(M-v>600){const re=M-v+1,de=h-v+1,_e=Math.log(re),Re=.5*Math.exp(2*_e/3),ze=.5*Math.sqrt(_e*Re*(re-Re)/re)*(de-re/2<0?-1:1);Ad(d,u,h,Math.max(v,Math.floor(h-de*Re/re+ze)),Math.min(M,Math.floor(h+(re-de)*Re/re+ze)),K)}const U=u[2*h+K];let W=v,X=M;for(Df(d,u,v,h),u[2*M+K]>U&&Df(d,u,v,M);W<X;){for(Df(d,u,W,X),W++,X--;u[2*W+K]<U;)W++;for(;u[2*X+K]>U;)X--}u[2*v+K]===U?Df(d,u,v,X):(X++,Df(d,u,X,M)),X<=h&&(v=X+1),h<=X&&(M=X-1)}}function Df(d,u,h,v){xv(d,h,v),xv(u,2*h,2*v),xv(u,2*h+1,2*v+1)}function xv(d,u,h){const v=d[u];d[u]=d[h],d[h]=v}function H_(d,u,h,v){const M=d-h,K=u-v;return M*M+K*K}var wv;a.ce=void 0,(wv=a.ce||(a.ce={})).create="create",wv.load="load",wv.fullLoad="fullLoad";let _1=null,pg=[];const b1=1e3/60,Yh="loadTime",Ko="fullLoadTime",Z_={mark(d){performance.mark(d)},frame(d){const u=d;_1!=null&&pg.push(u-_1),_1=u},clearMetrics(){_1=null,pg=[],performance.clearMeasures(Yh),performance.clearMeasures(Ko);for(const d in a.ce)performance.clearMarks(a.ce[d])},getPerformanceMetrics(){performance.measure(Yh,a.ce.create,a.ce.load),performance.measure(Ko,a.ce.create,a.ce.fullLoad);const d=performance.getEntriesByName(Yh)[0].duration,u=performance.getEntriesByName(Ko)[0].duration,h=pg.length,v=1/(pg.reduce((K,U)=>K+U,0)/h/1e3),M=pg.filter(K=>K>b1).reduce((K,U)=>K+(U-b1)/b1,0);return{loadTime:d,fullLoadTime:u,fps:v,percentDroppedFrames:M/(h+M)*100,totalFrames:h}}};a.$=xt,a.A=G,a.B=ka,a.C=function(d){if(Ut==null){const u=d.navigator?d.navigator.userAgent:null;Ut=!!d.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Ut},a.D=Pr,a.E=tr,a.F=class{constructor(d,u){this.target=d,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new cn(()=>this.process()),this.subscription=function(h,v,M,K){return h.addEventListener(v,M,!1),{unsubscribe:()=>{h.removeEventListener(v,M,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=ft(self)?d:window}registerMessageHandler(d,u){this.messageHandlers[d]=u}sendAsync(d,u){return new Promise((h,v)=>{const M=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[M]={resolve:h,reject:v},u&&u.signal.addEventListener("abort",()=>{delete this.resolveRejects[M];const W={id:M,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(W)},{once:!0});const K=[],U=Object.assign(Object.assign({},d),{id:M,sourceMapId:this.mapId,origin:location.origin,data:Td(d.data,K)});this.target.postMessage(U,{transfer:K})})}receive(d){const u=d.data,h=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[h];const v=this.abortControllers[h];return delete this.abortControllers[h],void(v&&v.abort())}if(ft(self)||u.mustQueue)return this.tasks[h]=u,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,u)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),u=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(d,u)}processTask(d,u){return o(this,void 0,void 0,function*(){if(u.type==="<response>"){const M=this.resolveRejects[d];return delete this.resolveRejects[d],M?void(u.error?M.reject(dc(u.error)):M.resolve(dc(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=dc(u.data),v=new AbortController;this.abortControllers[d]=v;try{const M=yield this.messageHandlers[u.type](u.sourceMapId,h,v);this.completeTask(d,null,M)}catch(M){this.completeTask(d,M)}})}completeTask(d,u,h){const v=[];delete this.abortControllers[d];const M={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Td(u):null,data:Td(h,v)};this.target.postMessage(M,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.G=vr,a.H=function(){var d=new G(16);return G!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},a.I=lg,a.J=function(d,u,h){var v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et=h[0],At=h[1],Ct=h[2];return u===d?(d[12]=u[0]*et+u[4]*At+u[8]*Ct+u[12],d[13]=u[1]*et+u[5]*At+u[9]*Ct+u[13],d[14]=u[2]*et+u[6]*At+u[10]*Ct+u[14],d[15]=u[3]*et+u[7]*At+u[11]*Ct+u[15]):(M=u[1],K=u[2],U=u[3],W=u[4],X=u[5],re=u[6],de=u[7],_e=u[8],Re=u[9],ze=u[10],Ge=u[11],d[0]=v=u[0],d[1]=M,d[2]=K,d[3]=U,d[4]=W,d[5]=X,d[6]=re,d[7]=de,d[8]=_e,d[9]=Re,d[10]=ze,d[11]=Ge,d[12]=v*et+W*At+_e*Ct+u[12],d[13]=M*et+X*At+Re*Ct+u[13],d[14]=K*et+re*At+ze*Ct+u[14],d[15]=U*et+de*At+Ge*Ct+u[15]),d},a.K=function(d,u,h){var v=h[0],M=h[1],K=h[2];return d[0]=u[0]*v,d[1]=u[1]*v,d[2]=u[2]*v,d[3]=u[3]*v,d[4]=u[4]*M,d[5]=u[5]*M,d[6]=u[6]*M,d[7]=u[7]*M,d[8]=u[8]*K,d[9]=u[9]*K,d[10]=u[10]*K,d[11]=u[11]*K,d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},a.L=function(d,u,h){var v=u[0],M=u[1],K=u[2],U=u[3],W=u[4],X=u[5],re=u[6],de=u[7],_e=u[8],Re=u[9],ze=u[10],Ge=u[11],et=u[12],At=u[13],Ct=u[14],Nt=u[15],Et=h[0],Le=h[1],lt=h[2],Ot=h[3];return d[0]=Et*v+Le*W+lt*_e+Ot*et,d[1]=Et*M+Le*X+lt*Re+Ot*At,d[2]=Et*K+Le*re+lt*ze+Ot*Ct,d[3]=Et*U+Le*de+lt*Ge+Ot*Nt,d[4]=(Et=h[4])*v+(Le=h[5])*W+(lt=h[6])*_e+(Ot=h[7])*et,d[5]=Et*M+Le*X+lt*Re+Ot*At,d[6]=Et*K+Le*re+lt*ze+Ot*Ct,d[7]=Et*U+Le*de+lt*Ge+Ot*Nt,d[8]=(Et=h[8])*v+(Le=h[9])*W+(lt=h[10])*_e+(Ot=h[11])*et,d[9]=Et*M+Le*X+lt*Re+Ot*At,d[10]=Et*K+Le*re+lt*ze+Ot*Ct,d[11]=Et*U+Le*de+lt*Ge+Ot*Nt,d[12]=(Et=h[12])*v+(Le=h[13])*W+(lt=h[14])*_e+(Ot=h[15])*et,d[13]=Et*M+Le*X+lt*Re+Ot*At,d[14]=Et*K+Le*re+lt*ze+Ot*Ct,d[15]=Et*U+Le*de+lt*Ge+Ot*Nt,d},a.M=function(d,u){const h={};for(let v=0;v<u.length;v++){const M=u[v];M in d&&(h[M]=d[M])}return h},a.N=dn,a.O=Ii,a.P=F,a.Q=ki,a.R=du,a.S=jd,a.T=th,a.U=oe,a.V=ne,a.W=_n,a.X=at,a.Y=ld,a.Z=yv,a._=o,a.a=Zn,a.a$=function(){return new Float64Array(16)},a.a0=d=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(h=>{u.onloadstart=()=>{h(u)};for(const v of d){const M=window.document.createElement("source");fe(v)||(u.crossOrigin="Anonymous"),M.src=v,u.appendChild(M)}})},a.a1=function(){return Lt++},a.a2=P,a.a3=le,a.a4=lc,a.a5=yc,a.a6=L_,a.a7=function(d){const u={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,v,M,K)=>{const U=M||K;return u[v]=!U||U.toLowerCase(),""}),u["max-age"]){const h=parseInt(u["max-age"],10);isNaN(h)?delete u["max-age"]:u["max-age"]=h}return u},a.a8=function(d){return Math.log(d)/Math.LN2},a.a9=function(d){var u=d[0],h=d[1];return u*u+h*h},a.aA=Ys,a.aB=en,a.aC=ut,a.aD=pr,a.aE=yn,a.aF=85.051129,a.aG=function(d){return Math.pow(2,d)},a.aH=Ni,a.aI=Yt,a.aJ=rr,a.aK=ws,a.aL=function(d,u,h){return d[0]=u[0]*h,d[1]=u[1]*h,d[2]=u[2]*h,d},a.aM=function(d,u,h){return d[0]=u[0]+h[0],d[1]=u[1]+h[1],d[2]=u[2]+h[2],d},a.aN=function(d){var u=new G(3);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u},a.aO=function(d,u,h){return d[0]=u[0]*h[0],d[1]=u[1]*h[1],d[2]=u[2]*h[2],d[3]=u[3]*h[3],d},a.aP=function(d,u,h){return d[0]=u[0]-h[0],d[1]=u[1]-h[1],d[2]=u[2]-h[2],d},a.aQ=function(d,u){var h=u[0],v=u[1],M=u[2],K=h*h+v*v+M*M;return K>0&&(K=1/Math.sqrt(K)),d[0]=u[0]*K,d[1]=u[1]*K,d[2]=u[2]*K,d},a.aR=function(d,u,h){var v=u[0],M=u[1],K=u[2],U=h[0],W=h[1],X=h[2];return d[0]=M*X-K*W,d[1]=K*U-v*X,d[2]=v*W-M*U,d},a.aS=function(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]},a.aT=D_,a.aU=h0,a.aV=function(d,u,h,v,M){var K,U=1/Math.tan(u/2);return d[0]=U/h,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=U,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,M!=null&&M!==1/0?(d[10]=(M+v)*(K=1/(v-M)),d[14]=2*M*v*K):(d[10]=-1,d[14]=-2*v),d},a.aW=function(d){var u=new G(16);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=d[6],u[7]=d[7],u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},a.aX=function(d,u,h){var v=Math.sin(h),M=Math.cos(h),K=u[0],U=u[1],W=u[2],X=u[3],re=u[4],de=u[5],_e=u[6],Re=u[7];return u!==d&&(d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[0]=K*M+re*v,d[1]=U*M+de*v,d[2]=W*M+_e*v,d[3]=X*M+Re*v,d[4]=re*M-K*v,d[5]=de*M-U*v,d[6]=_e*M-W*v,d[7]=Re*M-X*v,d},a.aY=function(d,u,h){var v=Math.sin(h),M=Math.cos(h),K=u[4],U=u[5],W=u[6],X=u[7],re=u[8],de=u[9],_e=u[10],Re=u[11];return u!==d&&(d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[4]=K*M+re*v,d[5]=U*M+de*v,d[6]=W*M+_e*v,d[7]=X*M+Re*v,d[8]=re*M-K*v,d[9]=de*M-U*v,d[10]=_e*M-W*v,d[11]=Re*M-X*v,d},a.aZ=function(){const d=new Float32Array(16);return he(d),d},a.a_=function(){const d=new Float64Array(16);return he(d),d},a.aa=function(d){return d*Math.PI/180},a.ab=bt,a.ac=function(d,u){const h=[];for(const v in d)v in u||h.push(v);return h},a.ad=De,a.ae=function(d){return Math.hypot(d[0],d[1])},a.af=function(d){return d[0]=0,d[1]=0,d},a.ag=function(d,u,h){return d[0]=u[0]*h,d[1]=u[1]*h,d},a.ah=function(d,u){let h=0,v=0;if(d.kind==="constant")v=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:M,minZoom:K,maxZoom:U}=d,W=M?bt(xr.interpolationFactor(M,u,K,U),0,1):0;d.kind==="camera"?v=Xi.number(d.minSize,d.maxSize,W):h=W}return{uSizeT:h,uSize:v}},a.aj=function(d,{uSize:u,uSizeT:h},{lowerSize:v,upperSize:M}){return d.kind==="source"?v/zd:d.kind==="composite"?Xi.number(v/zd,M/zd,h):u},a.ak=m,a.al=me,a.am=function(d,u,h,v){const M=u.y-d.y,K=u.x-d.x,U=v.y-h.y,W=v.x-h.x,X=U*K-W*M;if(X===0)return null;const re=(W*(d.y-h.y)-U*(d.x-h.x))/X;return new F(d.x+re*K,d.y+re*M)},a.an=function(d,u){var h=u[0],v=u[1],M=u[2],K=u[3],U=u[4],W=u[5],X=u[6],re=u[7],de=u[8],_e=u[9],Re=u[10],ze=u[11],Ge=u[12],et=u[13],At=u[14],Ct=u[15],Nt=h*W-v*U,Et=h*X-M*U,Le=h*re-K*U,lt=v*X-M*W,Ot=v*re-K*W,An=M*re-K*X,zn=de*et-_e*Ge,Cn=de*At-Re*Ge,fn=de*Ct-ze*Ge,jn=_e*At-Re*et,Wn=_e*Ct-ze*et,cr=Re*Ct-ze*At,kn=Nt*cr-Et*Wn+Le*jn+lt*fn-Ot*Cn+An*zn;return kn?(d[0]=(W*cr-X*Wn+re*jn)*(kn=1/kn),d[1]=(M*Wn-v*cr-K*jn)*kn,d[2]=(et*An-At*Ot+Ct*lt)*kn,d[3]=(Re*Ot-_e*An-ze*lt)*kn,d[4]=(X*fn-U*cr-re*Cn)*kn,d[5]=(h*cr-M*fn+K*Cn)*kn,d[6]=(At*Le-Ge*An-Ct*Et)*kn,d[7]=(de*An-Re*Le+ze*Et)*kn,d[8]=(U*Wn-W*fn+re*zn)*kn,d[9]=(v*fn-h*Wn-K*zn)*kn,d[10]=(Ge*Ot-et*Le+Ct*Nt)*kn,d[11]=(_e*Le-de*Ot-ze*Nt)*kn,d[12]=(W*Cn-U*jn-X*zn)*kn,d[13]=(h*jn-v*Cn+M*zn)*kn,d[14]=(et*Et-Ge*lt-At*Nt)*kn,d[15]=(de*lt-_e*Et+Re*Nt)*kn,d):null},a.ao=j_,a.ap=tp,a.aq=he,a.ar=function(d){let u=1/0,h=1/0,v=-1/0,M=-1/0;for(const K of d)u=Math.min(u,K.x),h=Math.min(h,K.y),v=Math.max(v,K.x),M=Math.max(M,K.y);return[u,h,v,M]},a.as=kl,a.at=Ze,a.au=function(d,u,h,v,M=!1){if(!h[0]&&!h[1])return[0,0];const K=M?v==="map"?-d.bearingInRadians:0:v==="viewport"?d.bearingInRadians:0;if(K){const U=Math.sin(K),W=Math.cos(K);h=[h[0]*W-h[1]*U,h[0]*U+h[1]*W]}return[M?h[0]:Ze(u,h[0],d.zoom),M?h[1]:Ze(u,h[1],d.zoom)]},a.aw=Gp,a.ax=Cv,a.ay=c0,a.az=C1,a.b=rn,a.b$=d=>d.type==="line",a.b0=function(d,u,h){const v=new Float64Array(4);return function(M,K,U,W){var X=.5*Math.PI/180;K*=X,U*=X,W*=X;var re=Math.sin(K),de=Math.cos(K),_e=Math.sin(U),Re=Math.cos(U),ze=Math.sin(W),Ge=Math.cos(W);M[0]=re*Re*Ge-de*_e*ze,M[1]=de*_e*Ge+re*Re*ze,M[2]=de*Re*ze-re*_e*Ge,M[3]=de*Re*Ge+re*_e*ze}(v,d,u-90,h),v},a.b1=function(d,u,h,v){var M,K,U,W,X,re=u[0],de=u[1],_e=u[2],Re=u[3],ze=h[0],Ge=h[1],et=h[2],At=h[3];return(K=re*ze+de*Ge+_e*et+Re*At)<0&&(K=-K,ze=-ze,Ge=-Ge,et=-et,At=-At),1-K>te?(M=Math.acos(K),U=Math.sin(M),W=Math.sin((1-v)*M)/U,X=Math.sin(v*M)/U):(W=1-v,X=v),d[0]=W*re+X*ze,d[1]=W*de+X*Ge,d[2]=W*_e+X*et,d[3]=W*Re+X*At,d},a.b2=function(d){const u=new Float64Array(9);var h,v,M,K,U,W,X,re,de,_e,Re,ze,Ge,et,At,Ct,Nt,Et;_e=(M=(v=d)[0])*(X=M+M),Re=(K=v[1])*X,Ge=(U=v[2])*X,et=U*(re=K+K),Ct=(W=v[3])*X,Nt=W*re,Et=W*(de=U+U),(h=u)[0]=1-(ze=K*re)-(At=U*de),h[3]=Re-Et,h[6]=Ge+Nt,h[1]=Re+Et,h[4]=1-_e-At,h[7]=et-Ct,h[2]=Ge-Nt,h[5]=et+Ct,h[8]=1-_e-ze;const Le=rr(-Math.asin(bt(u[2],-1,1)));let lt,Ot;return Math.hypot(u[5],u[8])<.001?(lt=0,Ot=-rr(Math.atan2(u[3],u[4]))):(lt=rr(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Ot=rr(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:lt,pitch:Le+90,bearing:Ot}},a.b3=function(d,u){return d.roll==u.roll&&d.pitch==u.pitch&&d.bearing==u.bearing},a.b4=Ai,a.b5=El,a.b6=Qt,a.b7=wn,a.b8=Mt,a.b9=We,a.bA=Kt,a.bB=Ue,a.bC=class extends Pa{constructor(d,u){super(d,u),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},a.bD=class extends Pa{constructor(d,u){super(d,u),this.current=QA}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let u=1;u<16;u++)if(d[u]!==this.current[u]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},a.bE=GA,a.bF=_A,a.bG=class extends Pa{constructor(d,u){super(d,u),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},a.bH=class extends Pa{constructor(d,u){super(d,u),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},a.bI=ie,a.bJ=function(d,u){var h=Math.sin(u),v=Math.cos(u);return d[0]=v,d[1]=h,d[2]=0,d[3]=-h,d[4]=v,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},a.bK=function(d,u,h){var v=u[0],M=u[1],K=u[2];return d[0]=v*h[0]+M*h[3]+K*h[6],d[1]=v*h[1]+M*h[4]+K*h[7],d[2]=v*h[2]+M*h[5]+K*h[8],d},a.bL=function(d,u,h,v,M,K,U){var W=1/(u-h),X=1/(v-M),re=1/(K-U);return d[0]=-2*W,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*X,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*re,d[11]=0,d[12]=(u+h)*W,d[13]=(M+v)*X,d[14]=(U+K)*re,d[15]=1,d},a.bM=class extends au{},a.bN=ng,a.bO=class extends lu{},a.bP=Ju,a.bQ=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},a.bR=uh,a.bS=function(d,u,h){var v=u[0],M=u[1],K=u[2],U=h[3]*v+h[7]*M+h[11]*K+h[15];return d[0]=(h[0]*v+h[4]*M+h[8]*K+h[12])/(U=U||1),d[1]=(h[1]*v+h[5]*M+h[9]*K+h[13])/U,d[2]=(h[2]*v+h[6]*M+h[10]*K+h[14])/U,d},a.bT=class extends js{},a.bU=class extends c{},a.bV=function(d,u){return d[0]===u[0]&&d[1]===u[1]&&d[2]===u[2]&&d[3]===u[3]&&d[4]===u[4]&&d[5]===u[5]&&d[6]===u[6]&&d[7]===u[7]&&d[8]===u[8]&&d[9]===u[9]&&d[10]===u[10]&&d[11]===u[11]&&d[12]===u[12]&&d[13]===u[13]&&d[14]===u[14]&&d[15]===u[15]},a.bW=function(d,u){var h=d[0],v=d[1],M=d[2],K=d[3],U=d[4],W=d[5],X=d[6],re=d[7],de=d[8],_e=d[9],Re=d[10],ze=d[11],Ge=d[12],et=d[13],At=d[14],Ct=d[15],Nt=u[0],Et=u[1],Le=u[2],lt=u[3],Ot=u[4],An=u[5],zn=u[6],Cn=u[7],fn=u[8],jn=u[9],Wn=u[10],cr=u[11],kn=u[12],jr=u[13],gi=u[14],di=u[15];return Math.abs(h-Nt)<=te*Math.max(1,Math.abs(h),Math.abs(Nt))&&Math.abs(v-Et)<=te*Math.max(1,Math.abs(v),Math.abs(Et))&&Math.abs(M-Le)<=te*Math.max(1,Math.abs(M),Math.abs(Le))&&Math.abs(K-lt)<=te*Math.max(1,Math.abs(K),Math.abs(lt))&&Math.abs(U-Ot)<=te*Math.max(1,Math.abs(U),Math.abs(Ot))&&Math.abs(W-An)<=te*Math.max(1,Math.abs(W),Math.abs(An))&&Math.abs(X-zn)<=te*Math.max(1,Math.abs(X),Math.abs(zn))&&Math.abs(re-Cn)<=te*Math.max(1,Math.abs(re),Math.abs(Cn))&&Math.abs(de-fn)<=te*Math.max(1,Math.abs(de),Math.abs(fn))&&Math.abs(_e-jn)<=te*Math.max(1,Math.abs(_e),Math.abs(jn))&&Math.abs(Re-Wn)<=te*Math.max(1,Math.abs(Re),Math.abs(Wn))&&Math.abs(ze-cr)<=te*Math.max(1,Math.abs(ze),Math.abs(cr))&&Math.abs(Ge-kn)<=te*Math.max(1,Math.abs(Ge),Math.abs(kn))&&Math.abs(et-jr)<=te*Math.max(1,Math.abs(et),Math.abs(jr))&&Math.abs(At-gi)<=te*Math.max(1,Math.abs(At),Math.abs(gi))&&Math.abs(Ct-di)<=te*Math.max(1,Math.abs(Ct),Math.abs(di))},a.bX=function(d,u){return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},a.bY=d=>d.type==="symbol",a.bZ=d=>d.type==="circle",a.b_=d=>d.type==="heatmap",a.ba=Me,a.bb=Qs,a.bc=function(d,u,h,v,M){return We(v,M,bt((d-u)/(h-u),0,1))},a.bd=Je,a.be=function(){return new Float64Array(4)},a.bf=function(){return new Float64Array(3)},a.bg=function(d,u,h,v){var M=[],K=[];return M[0]=u[0]-h[0],M[1]=u[1]-h[1],M[2]=u[2]-h[2],K[0]=M[0]*Math.cos(v)-M[1]*Math.sin(v),K[1]=M[0]*Math.sin(v)+M[1]*Math.cos(v),K[2]=M[2],d[0]=K[0]+h[0],d[1]=K[1]+h[1],d[2]=K[2]+h[2],d},a.bh=function(d,u,h,v){var M=[],K=[];return M[0]=u[0]-h[0],M[1]=u[1]-h[1],M[2]=u[2]-h[2],K[0]=M[0],K[1]=M[1]*Math.cos(v)-M[2]*Math.sin(v),K[2]=M[1]*Math.sin(v)+M[2]*Math.cos(v),d[0]=K[0]+h[0],d[1]=K[1]+h[1],d[2]=K[2]+h[2],d},a.bi=function(d,u,h,v){var M=[],K=[];return M[0]=u[0]-h[0],M[1]=u[1]-h[1],M[2]=u[2]-h[2],K[0]=M[2]*Math.sin(v)+M[0]*Math.cos(v),K[1]=M[1],K[2]=M[2]*Math.cos(v)-M[0]*Math.sin(v),d[0]=K[0]+h[0],d[1]=K[1]+h[1],d[2]=K[2]+h[2],d},a.bj=function(d,u,h){var v=Math.sin(h),M=Math.cos(h),K=u[0],U=u[1],W=u[2],X=u[3],re=u[8],de=u[9],_e=u[10],Re=u[11];return u!==d&&(d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[0]=K*M-re*v,d[1]=U*M-de*v,d[2]=W*M-_e*v,d[3]=X*M-Re*v,d[8]=K*v+re*M,d[9]=U*v+de*M,d[10]=W*v+_e*M,d[11]=X*v+Re*M,d},a.bk=function(d,u){const h=Je(d,360),v=Je(u,360),M=v-h,K=v>h?M-360:M+360;return Math.abs(M)<Math.abs(K)?M:K},a.bl=function(d){return d[0]=0,d[1]=0,d[2]=0,d},a.bm=function(d,u,h,v){const M=Math.sqrt(d*d+u*u),K=Math.sqrt(h*h+v*v);d/=M,u/=M,h/=K,v/=K;const U=Math.acos(d*h+u*v);return-u*h+d*v>0?U:-U},a.bn=function(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]},a.bo=Xt,a.bp=function(d,u){const h=Je(d,2*Math.PI),v=Je(u,2*Math.PI);return Math.min(Math.abs(h-v),Math.abs(h-v+2*Math.PI),Math.abs(h-v-2*Math.PI))},a.bq=function(d){return Math.hypot(d[0],d[1],d[2])},a.br=function(){const d={},u=Oe.$version;for(const h in Oe.$root){const v=Oe.$root[h];if(v.required){let M=null;M=h==="version"?u:v.type==="array"?[]:{},M!=null&&(d[h]=M)}}return d},a.bs=ru,a.bt=Qe,a.bu=function(d){d=d.slice();const u=Object.create(null);for(let h=0;h<d.length;h++)u[d[h].id]=d[h];for(let h=0;h<d.length;h++)"ref"in d[h]&&(d[h]=ve(d[h],u[d[h].ref]));return d},a.bv=function(d){if(d.type==="custom")return new vl(d);switch(d.type){case"background":return new ir(d);case"circle":return new Cm(d);case"fill":return new $a(d);case"fill-extrusion":return new t0(d);case"heatmap":return new wf(d);case"hillshade":return new Mf(d);case"line":return new eg(d);case"raster":return new ai(d);case"symbol":return new xn(d)}},a.bw=Pe,a.bx=function(d,u){if(!d)return[{command:"setStyle",args:[u]}];let h=[];try{if(!p(d.version,u.version))return[{command:"setStyle",args:[u]}];p(d.center,u.center)||h.push({command:"setCenter",args:[u.center]}),p(d.centerAltitude,u.centerAltitude)||h.push({command:"setCenterAltitude",args:[u.centerAltitude]}),p(d.zoom,u.zoom)||h.push({command:"setZoom",args:[u.zoom]}),p(d.bearing,u.bearing)||h.push({command:"setBearing",args:[u.bearing]}),p(d.pitch,u.pitch)||h.push({command:"setPitch",args:[u.pitch]}),p(d.roll,u.roll)||h.push({command:"setRoll",args:[u.roll]}),p(d.sprite,u.sprite)||h.push({command:"setSprite",args:[u.sprite]}),p(d.glyphs,u.glyphs)||h.push({command:"setGlyphs",args:[u.glyphs]}),p(d.transition,u.transition)||h.push({command:"setTransition",args:[u.transition]}),p(d.light,u.light)||h.push({command:"setLight",args:[u.light]}),p(d.terrain,u.terrain)||h.push({command:"setTerrain",args:[u.terrain]}),p(d.sky,u.sky)||h.push({command:"setSky",args:[u.sky]}),p(d.projection,u.projection)||h.push({command:"setProjection",args:[u.projection]});const v={},M=[];(function(U,W,X,re){let de;for(de in W=W||{},U=U||{})Object.prototype.hasOwnProperty.call(U,de)&&(Object.prototype.hasOwnProperty.call(W,de)||rt(de,X,re));for(de in W)Object.prototype.hasOwnProperty.call(W,de)&&(Object.prototype.hasOwnProperty.call(U,de)?p(U[de],W[de])||(U[de].type==="geojson"&&W[de].type==="geojson"&&dt(U,W,de)?Ne(X,{command:"setGeoJSONSourceData",args:[de,W[de].data]}):ct(de,W,X,re)):Ye(de,W,X))})(d.sources,u.sources,M,v);const K=[];d.layers&&d.layers.forEach(U=>{"source"in U&&v[U.source]?h.push({command:"removeLayer",args:[U.id]}):K.push(U)}),h=h.concat(M),function(U,W,X){W=W||[];const re=(U=U||[]).map(Gt),de=W.map(Gt),_e=U.reduce(jt,{}),Re=W.reduce(jt,{}),ze=re.slice(),Ge=Object.create(null);let et,At,Ct,Nt,Et;for(let Le=0,lt=0;Le<re.length;Le++)et=re[Le],Object.prototype.hasOwnProperty.call(Re,et)?lt++:(Ne(X,{command:"removeLayer",args:[et]}),ze.splice(ze.indexOf(et,lt),1));for(let Le=0,lt=0;Le<de.length;Le++)et=de[de.length-1-Le],ze[ze.length-1-Le]!==et&&(Object.prototype.hasOwnProperty.call(_e,et)?(Ne(X,{command:"removeLayer",args:[et]}),ze.splice(ze.lastIndexOf(et,ze.length-lt),1)):lt++,Nt=ze[ze.length-Le],Ne(X,{command:"addLayer",args:[Re[et],Nt]}),ze.splice(ze.length-Le,0,et),Ge[et]=!0);for(let Le=0;Le<de.length;Le++)if(et=de[Le],At=_e[et],Ct=Re[et],!Ge[et]&&!p(At,Ct))if(p(At.source,Ct.source)&&p(At["source-layer"],Ct["source-layer"])&&p(At.type,Ct.type)){for(Et in qt(At.layout,Ct.layout,X,et,null,"setLayoutProperty"),qt(At.paint,Ct.paint,X,et,null,"setPaintProperty"),p(At.filter,Ct.filter)||Ne(X,{command:"setFilter",args:[et,Ct.filter]}),p(At.minzoom,Ct.minzoom)&&p(At.maxzoom,Ct.maxzoom)||Ne(X,{command:"setLayerZoomRange",args:[et,Ct.minzoom,Ct.maxzoom]}),At)Object.prototype.hasOwnProperty.call(At,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?qt(At[Et],Ct[Et],X,et,Et.slice(6),"setPaintProperty"):p(At[Et],Ct[Et])||Ne(X,{command:"setLayerProperty",args:[et,Et,Ct[Et]]}));for(Et in Ct)Object.prototype.hasOwnProperty.call(Ct,Et)&&!Object.prototype.hasOwnProperty.call(At,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?qt(At[Et],Ct[Et],X,et,Et.slice(6),"setPaintProperty"):p(At[Et],Ct[Et])||Ne(X,{command:"setLayerProperty",args:[et,Et,Ct[Et]]}))}else Ne(X,{command:"removeLayer",args:[et]}),Nt=ze[ze.lastIndexOf(et)+1],Ne(X,{command:"addLayer",args:[Ct,Nt]})}(K,u.layers,h)}catch(v){console.warn("Unable to compute style diff:",v),h=[{command:"setStyle",args:[u]}]}return h},a.by=function(d){const u=[],h=d.id;return h===void 0&&u.push({message:`layers.${h}: missing required property "id"`}),d.render===void 0&&u.push({message:`layers.${h}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&u.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),u},a.bz=function d(u,h){if(Array.isArray(u)){if(!Array.isArray(h)||u.length!==h.length)return!1;for(let v=0;v<u.length;v++)if(!d(u[v],h[v]))return!1;return!0}if(typeof u=="object"&&u!==null&&h!==null){if(typeof h!="object"||Object.keys(u).length!==Object.keys(h).length)return!1;for(const v in u)if(!d(u[v],h[v]))return!1;return!0}return u===h},a.c=pn,a.c0=d=>d.type==="fill",a.c1=d=>d.type==="fill-extrusion",a.c2=d=>d.type==="hillshade",a.c3=d=>d.type==="raster",a.c4=d=>d.type==="background",a.c5=d=>d.type==="custom",a.c6=Fe,a.c7=function(d,u,h){const v=be(u.x-h.x,u.y-h.y),M=be(d.x-h.x,d.y-h.y);var K,U;return rr(Math.atan2(v[0]*M[1]-v[1]*M[0],(K=v)[0]*(U=M)[0]+K[1]*U[1]))},a.c8=He,a.c9=function(d,u,h){var v=u[0],M=u[1];return d[0]=h[0]*v+h[4]*M+h[12],d[1]=h[1]*v+h[5]*M+h[13],d},a.cA=og,a.cB=Md,a.cC=Nl,a.ca=function(d,u){const{x:h,y:v}=ld.fromLngLat(u);return!(d<0||d>25||v<0||v>=1||h<0||h>=1)},a.cb=function(d,u){return d[0]=u[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=u[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=u[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},a.cc=class extends yA{},a.cd=Z_,a.cf=function(d){return d.message===Dn},a.cg=Jn,a.ch=function(d,u){Zn.REGISTERED_PROTOCOLS[d]=u},a.ci=function(d){delete Zn.REGISTERED_PROTOCOLS[d]},a.cj=function(d,u){const h={};for(let M=0;M<d.length;M++){const K=u&&u[d[M].id]||td(d[M]);u&&(u[d[M].id]=K);let U=h[K];U||(U=h[K]=[]),U.push(d[M])}const v=[];for(const M in h)v.push(h[M]);return v},a.ck=hr,a.cl=F_,a.cm=U_,a.cn=ug,a.co=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=at/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const u=d.bucket.layers[0],h=u.layout,v=u._unevaluatedLayout._values,M={layoutIconSize:v["icon-size"].possiblyEvaluate(new Lo(d.bucket.zoom+1),d.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Lo(d.bucket.zoom+1),d.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Lo(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=d.bucket.textSizeData;M.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Lo(re),d.canonical),v["text-size"].possiblyEvaluate(new Lo(de),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=d.bucket.iconSizeData;M.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Lo(re),d.canonical),v["icon-size"].possiblyEvaluate(new Lo(de),d.canonical)]}const K=h.get("text-line-height")*kl,U=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",W=h.get("text-keep-upright"),X=h.get("text-size");for(const re of d.bucket.features){const de=h.get("text-font").evaluate(re,{},d.canonical).join(","),_e=X.evaluate(re,{},d.canonical),Re=M.layoutTextSize.evaluate(re,{},d.canonical),ze=M.layoutIconSize.evaluate(re,{},d.canonical),Ge={horizontal:{},vertical:void 0},et=re.text;let At,Ct=[0,0];if(et){const Le=et.toString(),lt=h.get("text-letter-spacing").evaluate(re,{},d.canonical)*kl,Ot=Fh(Le)?lt:0,An=h.get("text-anchor").evaluate(re,{},d.canonical),zn=$_(u,re,d.canonical);if(!zn){const Wn=h.get("text-radial-offset").evaluate(re,{},d.canonical);Ct=Wn?Y_(An,[Wn*kl,vv]):h.get("text-offset").evaluate(re,{},d.canonical).map(cr=>cr*kl)}let Cn=U?"center":h.get("text-justify").evaluate(re,{},d.canonical);const fn=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(re,{},d.canonical)*kl:1/0,jn=()=>{d.bucket.allowVerticalPlacement&&fl(Le)&&(Ge.vertical=a0(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,fn,K,An,"left",Ot,Ct,a.ai.vertical,!0,Re,_e))};if(!U&&zn){const Wn=new Set;if(Cn==="auto")for(let kn=0;kn<zn.values.length;kn+=2)Wn.add(Cv(zn.values[kn]));else Wn.add(Cn);let cr=!1;for(const kn of Wn)if(!Ge.horizontal[kn])if(cr)Ge.horizontal[kn]=Ge.horizontal[0];else{const jr=a0(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,fn,K,"center",kn,Ot,Ct,a.ai.horizontal,!1,Re,_e);jr&&(Ge.horizontal[kn]=jr,cr=jr.positionedLines.length===1)}jn()}else{Cn==="auto"&&(Cn=Cv(An));const Wn=a0(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,fn,K,An,Cn,Ot,Ct,a.ai.horizontal,!1,Re,_e);Wn&&(Ge.horizontal[Cn]=Wn),jn(),fl(Le)&&U&&W&&(Ge.vertical=a0(et,d.glyphMap,d.glyphPositions,d.imagePositions,de,fn,K,An,Cn,Ot,Ct,a.ai.vertical,!1,Re,_e))}}let Nt=!1;if(re.icon&&re.icon.name){const Le=d.imageMap[re.icon.name];Le&&(At=hg(d.imagePositions[re.icon.name],h.get("icon-offset").evaluate(re,{},d.canonical),h.get("icon-anchor").evaluate(re,{},d.canonical)),Nt=!!Le.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Nt:d.bucket.sdfIcons!==Nt&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==d.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const Et=p0(Ge.horizontal)||Ge.vertical;d.bucket.iconsInText=!!Et&&Et.iconsInText,(Et||At)&&q3(d.bucket,re,Ge,At,d.imageMap,M,Re,ze,Ct,Nt,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},a.cp=tA,a.cq=ni,a.cr=Cc,a.cs=_o,a.ct=Gh,a.cu=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},a.cv=function(d,u,h,v,M){return o(this,void 0,void 0,function*(){if(ne())try{return yield _n(d,u,h,v,M)}catch{}return function(K,U,W,X,re){const de=K.width,_e=K.height;qn&&tn||(qn=new OffscreenCanvas(de,_e),tn=qn.getContext("2d",{willReadFrequently:!0})),qn.width=de,qn.height=_e,tn.drawImage(K,0,0,de,_e);const Re=tn.getImageData(U,W,X,re);return tn.clearRect(0,0,de,_e),Re.data}(d,u,h,v,M)})},a.cw=R_,a.cx=f,a.cy=B,a.cz=ku,a.d=d=>o(void 0,void 0,void 0,function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(u)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=gt,a.f=d=>new Promise((u,h)=>{const v=new Image;v.onload=()=>{u(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=Dt})},v.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(d)],{type:"image/png"});v.src=d.byteLength?URL.createObjectURL(M):Dt}),a.g=dr,a.h=(d,u)=>ce(gt(d,{type:"json"}),u),a.i=ft,a.j=sn,a.k=Ht,a.l=(d,u)=>ce(gt(d,{type:"arrayBuffer"}),u),a.m=ce,a.n=function(d){return new Gh(d).readFields(Np,[])},a.o=Uh,a.p=ag,a.q=ou,a.r=eh,a.s=fe,a.t=Kc,a.u=mA,a.v=Oe,a.w=it,a.x=function([d,u,h]){return u+=90,u*=Math.PI/180,h*=Math.PI/180,{x:d*Math.cos(u)*Math.sin(h),y:d*Math.sin(u)*Math.sin(h),z:d*Math.cos(h)}},a.y=Xi,a.z=Lo}),i("worker",["./shared"],function(a){class o{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ve){for(const Ne of se){this._layerConfigs[Ne.id]=Ne;const Ye=this._layers[Ne.id]=a.bv(Ne);Ye._featureFilter=a.a4(Ye.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of ve)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const p=a.cj(Object.values(this._layerConfigs),this.keyCache);for(const Ne of p){const Ye=Ne.map(jt=>this._layers[jt.id]),rt=Ye[0];if(rt.visibility==="none")continue;const ct=rt.source||"";let dt=this.familiesBySource[ct];dt||(dt=this.familiesBySource[ct]={});const qt=rt.sourceLayer||"_geojsonTileLayer";let Gt=dt[qt];Gt||(Gt=dt[qt]=[]),Gt.push(Ye)}}}class f{constructor(se){const ve={},p=[];for(const ct in se){const dt=se[ct],qt=ve[ct]={};for(const Gt in dt){const jt=dt[+Gt];if(!jt||jt.bitmap.width===0||jt.bitmap.height===0)continue;const xt={x:0,y:0,w:jt.bitmap.width+2,h:jt.bitmap.height+2};p.push(xt),qt[Gt]={rect:xt,metrics:jt.metrics}}}const{w:Ne,h:Ye}=a.p(p),rt=new a.o({width:Ne||1,height:Ye||1});for(const ct in se){const dt=se[ct];for(const qt in dt){const Gt=dt[+qt];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const jt=ve[ct][qt].rect;a.o.copy(Gt.bitmap,rt,{x:0,y:0},{x:jt.x+1,y:jt.y+1},Gt.bitmap)}}this.image=rt,this.positions=ve}}a.ck("GlyphAtlas",f);class y{constructor(se){this.tileID=new a.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,ve,p,Ne,Ye){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new a.a2;const rt=new a.cl(Object.keys(se.layers).sort()),ct=new a.cm(this.tileID,this.promoteId);ct.bucketLayerIDs=[];const dt={},qt={featureIndex:ct,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:p,subdivisionGranularity:Ye},Gt=ve.familiesBySource[this.source];for(const Dr in Gt){const ur=se.layers[Dr];if(!ur)continue;ur.version===1&&a.w(`Vector tile source "${this.source}" layer "${Dr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const go=rt.encode(Dr),Sa=[];for(let Yi=0;Yi<ur.length;Yi++){const Ci=ur.feature(Yi),oo=ct.getId(Ci,Dr);Sa.push({feature:Ci,id:oo,index:Yi,sourceLayerIndex:go})}for(const Yi of Gt[Dr]){const Ci=Yi[0];Ci.source!==this.source&&a.w(`layer.source = ${Ci.source} does not equal this.source = ${this.source}`),Ci.minzoom&&this.zoom<Math.floor(Ci.minzoom)||Ci.maxzoom&&this.zoom>=Ci.maxzoom||Ci.visibility!=="none"&&(x(Yi,this.zoom,p),(dt[Ci.id]=Ci.createBucket({index:ct.bucketLayerIDs.length,layers:Yi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:go,sourceID:this.source})).populate(Sa,qt,this.tileID.canonical),ct.bucketLayerIDs.push(Yi.map(oo=>oo.id)))}}const jt=a.bA(qt.glyphDependencies,Dr=>Object.keys(Dr).map(Number));this.inFlightDependencies.forEach(Dr=>Dr==null?void 0:Dr.abort()),this.inFlightDependencies=[];let xt=Promise.resolve({});if(Object.keys(jt).length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),xt=Ne.sendAsync({type:"GG",data:{stacks:jt,source:this.source,tileID:this.tileID,type:"glyphs"}},Dr)}const Tn=Object.keys(qt.iconDependencies);let On=Promise.resolve({});if(Tn.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),On=Ne.sendAsync({type:"GI",data:{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"}},Dr)}const gr=Object.keys(qt.patternDependencies);let Er=Promise.resolve({});if(gr.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),Er=Ne.sendAsync({type:"GI",data:{icons:gr,source:this.source,tileID:this.tileID,type:"patterns"}},Dr)}const[on,Rn,er]=yield Promise.all([xt,On,Er]),Xr=new f(on),Ur=new a.cn(Rn,er);for(const Dr in dt){const ur=dt[Dr];ur instanceof a.a3?(x(ur.layers,this.zoom,p),a.co({bucket:ur,glyphMap:on,glyphPositions:Xr.positions,imageMap:Rn,imagePositions:Ur.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:qt.subdivisionGranularity})):ur.hasPattern&&(ur instanceof a.cp||ur instanceof a.cq||ur instanceof a.cr)&&(x(ur.layers,this.zoom,p),ur.addFeatures(qt,this.tileID.canonical,Ur.patternPositions))}return this.status="done",{buckets:Object.values(dt).filter(Dr=>!Dr.isEmpty()),featureIndex:ct,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Xr.image,imageAtlas:Ur,glyphMap:this.returnDependencies?on:null,iconMap:this.returnDependencies?Rn:null,glyphPositions:this.returnDependencies?Xr.positions:null}})}}function x(Oe,se,ve){const p=new a.z(se);for(const Ne of Oe)Ne.recalculate(p,ve)}class B{constructor(se,ve,p){this.actor=se,this.layerIndex=ve,this.availableImages=p,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ve){return a._(this,void 0,void 0,function*(){const p=yield a.l(se.request,ve);try{return{vectorTile:new a.cs.VectorTile(new a.ct(p.data)),rawData:p.data,cacheControl:p.cacheControl,expires:p.expires}}catch(Ne){const Ye=new Uint8Array(p.data);let rt=`Unable to parse the tile at ${se.request.url}, `;throw rt+=Ye[0]===31&&Ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.message}`,new Error(rt)}})}loadTile(se){return a._(this,void 0,void 0,function*(){const ve=se.uid,p=!!(se&&se.request&&se.request.collectResourceTiming)&&new a.cu(se.request),Ne=new y(se);this.loading[ve]=Ne;const Ye=new AbortController;Ne.abort=Ye;try{const rt=yield this.loadVectorTile(se,Ye);if(delete this.loading[ve],!rt)return null;const ct=rt.rawData,dt={};rt.expires&&(dt.expires=rt.expires),rt.cacheControl&&(dt.cacheControl=rt.cacheControl);const qt={};if(p){const jt=p.finish();jt&&(qt.resourceTiming=JSON.parse(JSON.stringify(jt)))}Ne.vectorTile=rt.vectorTile;const Gt=Ne.parse(rt.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);this.loaded[ve]=Ne,this.fetching[ve]={rawTileData:ct,cacheControl:dt,resourceTiming:qt};try{const jt=yield Gt;return a.e({rawTileData:ct.slice(0)},jt,dt,qt)}finally{delete this.fetching[ve]}}catch(rt){throw delete this.loading[ve],Ne.status="done",this.loaded[ve]=Ne,rt}})}reloadTile(se){return a._(this,void 0,void 0,function*(){const ve=se.uid;if(!this.loaded||!this.loaded[ve])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const p=this.loaded[ve];if(p.showCollisionBoxes=se.showCollisionBoxes,p.status==="parsing"){const Ne=yield p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity);let Ye;if(this.fetching[ve]){const{rawTileData:rt,cacheControl:ct,resourceTiming:dt}=this.fetching[ve];delete this.fetching[ve],Ye=a.e({rawTileData:rt.slice(0)},Ne,ct,dt)}else Ye=Ne;return Ye}if(p.status==="done"&&p.vectorTile)return p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,se.subdivisionGranularity)})}abortTile(se){return a._(this,void 0,void 0,function*(){const ve=this.loading,p=se.uid;ve&&ve[p]&&ve[p].abort&&(ve[p].abort.abort(),delete ve[p])})}removeTile(se){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class O{constructor(){this.loaded={}}loadTile(se){return a._(this,void 0,void 0,function*(){const{uid:ve,encoding:p,rawImageData:Ne,redFactor:Ye,greenFactor:rt,blueFactor:ct,baseShift:dt}=se,qt=Ne.width+2,Gt=Ne.height+2,jt=a.b(Ne)?new a.R({width:qt,height:Gt},yield a.cv(Ne,-1,-1,qt,Gt)):Ne,xt=new a.cw(ve,jt,p,Ye,rt,ct,dt);return this.loaded=this.loaded||{},this.loaded[ve]=xt,xt})}removeTile(se){const ve=this.loaded,p=se.uid;ve&&ve[p]&&delete ve[p]}}var T,F,j=function(){if(F)return T;function Oe(ve,p){if(ve.length!==0){se(ve[0],p);for(var Ne=1;Ne<ve.length;Ne++)se(ve[Ne],!p)}}function se(ve,p){for(var Ne=0,Ye=0,rt=0,ct=ve.length,dt=ct-1;rt<ct;dt=rt++){var qt=(ve[rt][0]-ve[dt][0])*(ve[dt][1]+ve[rt][1]),Gt=Ne+qt;Ye+=Math.abs(Ne)>=Math.abs(qt)?Ne-Gt+qt:qt-Gt+Ne,Ne=Gt}Ne+Ye>=0!=!!p&&ve.reverse()}return F=1,T=function ve(p,Ne){var Ye,rt=p&&p.type;if(rt==="FeatureCollection")for(Ye=0;Ye<p.features.length;Ye++)ve(p.features[Ye],Ne);else if(rt==="GeometryCollection")for(Ye=0;Ye<p.geometries.length;Ye++)ve(p.geometries[Ye],Ne);else if(rt==="Feature")ve(p.geometry,Ne);else if(rt==="Polygon")Oe(p.coordinates,Ne);else if(rt==="MultiPolygon")for(Ye=0;Ye<p.coordinates.length;Ye++)Oe(p.coordinates[Ye],Ne);return p}}(),N=a.cx(j);const q=a.cs.VectorTileFeature.prototype.toGeoJSON;class H{constructor(se){this._feature=se,this.extent=a.X,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const ve of this._feature.geometry)se.push([new a.P(ve[0],ve[1])]);return se}{const se=[];for(const ve of this._feature.geometry){const p=[];for(const Ne of ve)p.push(new a.P(Ne[0],Ne[1]));se.push(p)}return se}}toGeoJSON(se,ve,p){return q.call(this,se,ve,p)}}class oe{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.X,this.length=se.length,this._features=se}feature(se){return new H(this._features[se])}}var ne,$,te,G={exports:{}},ie=function(){if(te)return G.exports;te=1;var Oe=a.cA(),se=function(){if($)return ne;$=1;var Gt=a.cy(),jt=a.cz().VectorTileFeature;function xt(On,gr){this.options=gr||{},this.features=On,this.length=On.length}function Tn(On,gr){this.id=typeof On.id=="number"?On.id:void 0,this.type=On.type,this.rawGeometry=On.type===1?[On.geometry]:On.geometry,this.properties=On.tags,this.extent=gr||4096}return ne=xt,xt.prototype.feature=function(On){return new Tn(this.features[On],this.options.extent)},Tn.prototype.loadGeometry=function(){var On=this.rawGeometry;this.geometry=[];for(var gr=0;gr<On.length;gr++){for(var Er=On[gr],on=[],Rn=0;Rn<Er.length;Rn++)on.push(new Gt(Er[Rn][0],Er[Rn][1]));this.geometry.push(on)}return this.geometry},Tn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var On=this.geometry,gr=1/0,Er=-1/0,on=1/0,Rn=-1/0,er=0;er<On.length;er++)for(var Xr=On[er],Ur=0;Ur<Xr.length;Ur++){var Dr=Xr[Ur];gr=Math.min(gr,Dr.x),Er=Math.max(Er,Dr.x),on=Math.min(on,Dr.y),Rn=Math.max(Rn,Dr.y)}return[gr,on,Er,Rn]},Tn.prototype.toGeoJSON=jt.prototype.toGeoJSON,ne}();function ve(Gt){var jt=new Oe;return function(xt,Tn){for(var On in xt.layers)Tn.writeMessage(3,p,xt.layers[On])}(Gt,jt),jt.finish()}function p(Gt,jt){var xt;jt.writeVarintField(15,Gt.version||1),jt.writeStringField(1,Gt.name||""),jt.writeVarintField(5,Gt.extent||4096);var Tn={keys:[],values:[],keycache:{},valuecache:{}};for(xt=0;xt<Gt.length;xt++)Tn.feature=Gt.feature(xt),jt.writeMessage(2,Ne,Tn);var On=Tn.keys;for(xt=0;xt<On.length;xt++)jt.writeStringField(3,On[xt]);var gr=Tn.values;for(xt=0;xt<gr.length;xt++)jt.writeMessage(4,qt,gr[xt])}function Ne(Gt,jt){var xt=Gt.feature;xt.id!==void 0&&jt.writeVarintField(1,xt.id),jt.writeMessage(2,Ye,Gt),jt.writeVarintField(3,xt.type),jt.writeMessage(4,dt,xt)}function Ye(Gt,jt){var xt=Gt.feature,Tn=Gt.keys,On=Gt.values,gr=Gt.keycache,Er=Gt.valuecache;for(var on in xt.properties){var Rn=xt.properties[on],er=gr[on];if(Rn!==null){er===void 0&&(Tn.push(on),gr[on]=er=Tn.length-1),jt.writeVarint(er);var Xr=typeof Rn;Xr!=="string"&&Xr!=="boolean"&&Xr!=="number"&&(Rn=JSON.stringify(Rn));var Ur=Xr+":"+Rn,Dr=Er[Ur];Dr===void 0&&(On.push(Rn),Er[Ur]=Dr=On.length-1),jt.writeVarint(Dr)}}}function rt(Gt,jt){return(jt<<3)+(7&Gt)}function ct(Gt){return Gt<<1^Gt>>31}function dt(Gt,jt){for(var xt=Gt.loadGeometry(),Tn=Gt.type,On=0,gr=0,Er=xt.length,on=0;on<Er;on++){var Rn=xt[on],er=1;Tn===1&&(er=Rn.length),jt.writeVarint(rt(1,er));for(var Xr=Tn===3?Rn.length-1:Rn.length,Ur=0;Ur<Xr;Ur++){Ur===1&&Tn!==1&&jt.writeVarint(rt(2,Xr-1));var Dr=Rn[Ur].x-On,ur=Rn[Ur].y-gr;jt.writeVarint(ct(Dr)),jt.writeVarint(ct(ur)),On+=Dr,gr+=ur}Tn===3&&jt.writeVarint(rt(7,1))}}function qt(Gt,jt){var xt=typeof Gt;xt==="string"?jt.writeStringField(1,Gt):xt==="boolean"?jt.writeBooleanField(7,Gt):xt==="number"&&(Gt%1!=0?jt.writeDoubleField(3,Gt):Gt<0?jt.writeSVarintField(6,Gt):jt.writeVarintField(5,Gt))}return G.exports=ve,G.exports.fromVectorTileJs=ve,G.exports.fromGeojsonVt=function(Gt,jt){jt=jt||{};var xt={};for(var Tn in Gt)xt[Tn]=new se(Gt[Tn].features,jt),xt[Tn].name=Tn,xt[Tn].version=jt.version,xt[Tn].extent=jt.extent;return ve({layers:xt})},G.exports.GeoJSONWrapper=se,G.exports}(),he=a.cx(ie);const pe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},Ee=Math.fround||(me=new Float32Array(1),Oe=>(me[0]=+Oe,me[0]));var me;const Se=3,De=5,be=6;class at{constructor(se){this.options=Object.assign(Object.create(pe),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ve,minZoom:p,maxZoom:Ne}=this.options;ve&&console.time("total time");const Ye=`prepare ${se.length} points`;ve&&console.time(Ye),this.points=se;const rt=[];for(let dt=0;dt<se.length;dt++){const qt=se[dt];if(!qt.geometry)continue;const[Gt,jt]=qt.geometry.coordinates,xt=Ee(We(Gt)),Tn=Ee(Me(jt));rt.push(xt,Tn,1/0,dt,-1,1),this.options.reduce&&rt.push(0)}let ct=this.trees[Ne+1]=this._createTree(rt);ve&&console.timeEnd(Ye);for(let dt=Ne;dt>=p;dt--){const qt=+Date.now();ct=this.trees[dt]=this._createTree(this._cluster(ct,dt)),ve&&console.log("z%d: %d clusters in %dms",dt,ct.numItems,+Date.now()-qt)}return ve&&console.timeEnd("total time"),this}getClusters(se,ve){let p=((se[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,se[1]));let Ye=se[2]===180?180:((se[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)p=-180,Ye=180;else if(p>Ye){const jt=this.getClusters([p,Ne,180,rt],ve),xt=this.getClusters([-180,Ne,Ye,rt],ve);return jt.concat(xt)}const ct=this.trees[this._limitZoom(ve)],dt=ct.range(We(p),Me(rt),We(Ye),Me(Ne)),qt=ct.data,Gt=[];for(const jt of dt){const xt=this.stride*jt;Gt.push(qt[xt+De]>1?Ze(qt,xt,this.clusterProps):this.points[qt[xt+Se]])}return Gt}getChildren(se){const ve=this._getOriginId(se),p=this._getOriginZoom(se),Ne="No cluster with the specified id.",Ye=this.trees[p];if(!Ye)throw new Error(Ne);const rt=Ye.data;if(ve*this.stride>=rt.length)throw new Error(Ne);const ct=this.options.radius/(this.options.extent*Math.pow(2,p-1)),dt=Ye.within(rt[ve*this.stride],rt[ve*this.stride+1],ct),qt=[];for(const Gt of dt){const jt=Gt*this.stride;rt[jt+4]===se&&qt.push(rt[jt+De]>1?Ze(rt,jt,this.clusterProps):this.points[rt[jt+Se]])}if(qt.length===0)throw new Error(Ne);return qt}getLeaves(se,ve,p){const Ne=[];return this._appendLeaves(Ne,se,ve=ve||10,p=p||0,0),Ne}getTile(se,ve,p){const Ne=this.trees[this._limitZoom(se)],Ye=Math.pow(2,se),{extent:rt,radius:ct}=this.options,dt=ct/rt,qt=(p-dt)/Ye,Gt=(p+1+dt)/Ye,jt={features:[]};return this._addTileFeatures(Ne.range((ve-dt)/Ye,qt,(ve+1+dt)/Ye,Gt),Ne.data,ve,p,Ye,jt),ve===0&&this._addTileFeatures(Ne.range(1-dt/Ye,qt,1,Gt),Ne.data,Ye,p,Ye,jt),ve===Ye-1&&this._addTileFeatures(Ne.range(0,qt,dt/Ye,Gt),Ne.data,-1,p,Ye,jt),jt.features.length?jt:null}getClusterExpansionZoom(se){let ve=this._getOriginZoom(se)-1;for(;ve<=this.options.maxZoom;){const p=this.getChildren(se);if(ve++,p.length!==1)break;se=p[0].properties.cluster_id}return ve}_appendLeaves(se,ve,p,Ne,Ye){const rt=this.getChildren(ve);for(const ct of rt){const dt=ct.properties;if(dt&&dt.cluster?Ye+dt.point_count<=Ne?Ye+=dt.point_count:Ye=this._appendLeaves(se,dt.cluster_id,p,Ne,Ye):Ye<Ne?Ye++:se.push(ct),se.length===p)break}return Ye}_createTree(se){const ve=new a.az(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let p=0;p<se.length;p+=this.stride)ve.add(se[p],se[p+1]);return ve.finish(),ve.data=se,ve}_addTileFeatures(se,ve,p,Ne,Ye,rt){for(const ct of se){const dt=ct*this.stride,qt=ve[dt+De]>1;let Gt,jt,xt;if(qt)Gt=Je(ve,dt,this.clusterProps),jt=ve[dt],xt=ve[dt+1];else{const gr=this.points[ve[dt+Se]];Gt=gr.properties;const[Er,on]=gr.geometry.coordinates;jt=We(Er),xt=Me(on)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(jt*Ye-p)),Math.round(this.options.extent*(xt*Ye-Ne))]],tags:Gt};let On;On=qt||this.options.generateId?ve[dt+Se]:this.points[ve[dt+Se]].id,On!==void 0&&(Tn.id=On),rt.features.push(Tn)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ve){const{radius:p,extent:Ne,reduce:Ye,minPoints:rt}=this.options,ct=p/(Ne*Math.pow(2,ve)),dt=se.data,qt=[],Gt=this.stride;for(let jt=0;jt<dt.length;jt+=Gt){if(dt[jt+2]<=ve)continue;dt[jt+2]=ve;const xt=dt[jt],Tn=dt[jt+1],On=se.within(dt[jt],dt[jt+1],ct),gr=dt[jt+De];let Er=gr;for(const on of On){const Rn=on*Gt;dt[Rn+2]>ve&&(Er+=dt[Rn+De])}if(Er>gr&&Er>=rt){let on,Rn=xt*gr,er=Tn*gr,Xr=-1;const Ur=((jt/Gt|0)<<5)+(ve+1)+this.points.length;for(const Dr of On){const ur=Dr*Gt;if(dt[ur+2]<=ve)continue;dt[ur+2]=ve;const go=dt[ur+De];Rn+=dt[ur]*go,er+=dt[ur+1]*go,dt[ur+4]=Ur,Ye&&(on||(on=this._map(dt,jt,!0),Xr=this.clusterProps.length,this.clusterProps.push(on)),Ye(on,this._map(dt,ur)))}dt[jt+4]=Ur,qt.push(Rn/Er,er/Er,1/0,Ur,-1,Er),Ye&&qt.push(Xr)}else{for(let on=0;on<Gt;on++)qt.push(dt[jt+on]);if(Er>1)for(const on of On){const Rn=on*Gt;if(!(dt[Rn+2]<=ve)){dt[Rn+2]=ve;for(let er=0;er<Gt;er++)qt.push(dt[Rn+er])}}}}return qt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ve,p){if(se[ve+De]>1){const rt=this.clusterProps[se[ve+be]];return p?Object.assign({},rt):rt}const Ne=this.points[se[ve+Se]].properties,Ye=this.options.map(Ne);return p&&Ye===Ne?Object.assign({},Ye):Ye}}function Ze(Oe,se,ve){return{type:"Feature",id:Oe[se+Se],properties:Je(Oe,se,ve),geometry:{type:"Point",coordinates:[(p=Oe[se],360*(p-.5)),Fe(Oe[se+1])]}};var p}function Je(Oe,se,ve){const p=Oe[se+De],Ne=p>=1e4?`${Math.round(p/1e3)}k`:p>=1e3?Math.round(p/100)/10+"k":p,Ye=Oe[se+be],rt=Ye===-1?{}:Object.assign({},ve[Ye]);return Object.assign(rt,{cluster:!0,cluster_id:Oe[se+Se],point_count:p,point_count_abbreviated:Ne})}function We(Oe){return Oe/360+.5}function Me(Oe){const se=Math.sin(Oe*Math.PI/180),ve=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ve<0?0:ve>1?1:ve}function Fe(Oe){const se=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function He(Oe,se,ve,p){let Ne=p;const Ye=se+(ve-se>>1);let rt,ct=ve-se;const dt=Oe[se],qt=Oe[se+1],Gt=Oe[ve],jt=Oe[ve+1];for(let xt=se+3;xt<ve;xt+=3){const Tn=bt(Oe[xt],Oe[xt+1],dt,qt,Gt,jt);if(Tn>Ne)rt=xt,Ne=Tn;else if(Tn===Ne){const On=Math.abs(xt-Ye);On<ct&&(rt=xt,ct=On)}}Ne>p&&(rt-se>3&&He(Oe,se,rt,p),Oe[rt+2]=Ne,ve-rt>3&&He(Oe,rt,ve,p))}function bt(Oe,se,ve,p,Ne,Ye){let rt=Ne-ve,ct=Ye-p;if(rt!==0||ct!==0){const dt=((Oe-ve)*rt+(se-p)*ct)/(rt*rt+ct*ct);dt>1?(ve=Ne,p=Ye):dt>0&&(ve+=rt*dt,p+=ct*dt)}return rt=Oe-ve,ct=se-p,rt*rt+ct*ct}function Yt(Oe,se,ve,p){const Ne={id:Oe??null,type:se,geometry:ve,tags:p,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")gt(Ne,ve);else if(se==="Polygon")gt(Ne,ve[0]);else if(se==="MultiLineString")for(const Ye of ve)gt(Ne,Ye);else if(se==="MultiPolygon")for(const Ye of ve)gt(Ne,Ye[0]);return Ne}function gt(Oe,se){for(let ve=0;ve<se.length;ve+=3)Oe.minX=Math.min(Oe.minX,se[ve]),Oe.minY=Math.min(Oe.minY,se[ve+1]),Oe.maxX=Math.max(Oe.maxX,se[ve]),Oe.maxY=Math.max(Oe.maxY,se[ve+1])}function Lt(Oe,se,ve,p){if(!se.geometry)return;const Ne=se.geometry.coordinates;if(Ne&&Ne.length===0)return;const Ye=se.geometry.type,rt=Math.pow(ve.tolerance/((1<<ve.maxZoom)*ve.extent),2);let ct=[],dt=se.id;if(ve.promoteId?dt=se.properties[ve.promoteId]:ve.generateId&&(dt=p||0),Ye==="Point")Kt(Ne,ct);else if(Ye==="MultiPoint")for(const qt of Ne)Kt(qt,ct);else if(Ye==="LineString")Ue(Ne,ct,rt,!1);else if(Ye==="MultiLineString"){if(ve.lineMetrics){for(const qt of Ne)ct=[],Ue(qt,ct,rt,!1),Oe.push(Yt(dt,"LineString",ct,se.properties));return}Pe(Ne,ct,rt,!1)}else if(Ye==="Polygon")Pe(Ne,ct,rt,!0);else{if(Ye!=="MultiPolygon"){if(Ye==="GeometryCollection"){for(const qt of se.geometry.geometries)Lt(Oe,{id:dt,geometry:qt,properties:se.properties},ve,p);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const qt of Ne){const Gt=[];Pe(qt,Gt,rt,!0),ct.push(Gt)}}Oe.push(Yt(dt,Ye,ct,se.properties))}function Kt(Oe,se){se.push(Be(Oe[0]),it(Oe[1]),0)}function Ue(Oe,se,ve,p){let Ne,Ye,rt=0;for(let dt=0;dt<Oe.length;dt++){const qt=Be(Oe[dt][0]),Gt=it(Oe[dt][1]);se.push(qt,Gt,0),dt>0&&(rt+=p?(Ne*Gt-qt*Ye)/2:Math.sqrt(Math.pow(qt-Ne,2)+Math.pow(Gt-Ye,2))),Ne=qt,Ye=Gt}const ct=se.length-3;se[2]=1,He(se,0,ct,ve),se[ct+2]=1,se.size=Math.abs(rt),se.start=0,se.end=se.size}function Pe(Oe,se,ve,p){for(let Ne=0;Ne<Oe.length;Ne++){const Ye=[];Ue(Oe[Ne],Ye,ve,p),se.push(Ye)}}function Be(Oe){return Oe/360+.5}function it(Oe){const se=Math.sin(Oe*Math.PI/180),ve=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ve<0?0:ve>1?1:ve}function _t(Oe,se,ve,p,Ne,Ye,rt,ct){if(p/=se,Ye>=(ve/=se)&&rt<p)return Oe;if(rt<ve||Ye>=p)return null;const dt=[];for(const qt of Oe){const Gt=qt.geometry;let jt=qt.type;const xt=Ne===0?qt.minX:qt.minY,Tn=Ne===0?qt.maxX:qt.maxY;if(xt>=ve&&Tn<p){dt.push(qt);continue}if(Tn<ve||xt>=p)continue;let On=[];if(jt==="Point"||jt==="MultiPoint")ft(Gt,On,ve,p,Ne);else if(jt==="LineString")Ut(Gt,On,ve,p,Ne,!1,ct.lineMetrics);else if(jt==="MultiLineString")Dt(Gt,On,ve,p,Ne,!1);else if(jt==="Polygon")Dt(Gt,On,ve,p,Ne,!0);else if(jt==="MultiPolygon")for(const gr of Gt){const Er=[];Dt(gr,Er,ve,p,Ne,!0),Er.length&&On.push(Er)}if(On.length){if(ct.lineMetrics&&jt==="LineString"){for(const gr of On)dt.push(Yt(qt.id,jt,gr,qt.tags));continue}jt!=="LineString"&&jt!=="MultiLineString"||(On.length===1?(jt="LineString",On=On[0]):jt="MultiLineString"),jt!=="Point"&&jt!=="MultiPoint"||(jt=On.length===3?"Point":"MultiPoint"),dt.push(Yt(qt.id,jt,On,qt.tags))}}return dt.length?dt:null}function ft(Oe,se,ve,p,Ne){for(let Ye=0;Ye<Oe.length;Ye+=3){const rt=Oe[Ye+Ne];rt>=ve&&rt<=p&&_n(se,Oe[Ye],Oe[Ye+1],Oe[Ye+2])}}function Ut(Oe,se,ve,p,Ne,Ye,rt){let ct=rn(Oe);const dt=Ne===0?qn:tn;let qt,Gt,jt=Oe.start;for(let Er=0;Er<Oe.length-3;Er+=3){const on=Oe[Er],Rn=Oe[Er+1],er=Oe[Er+2],Xr=Oe[Er+3],Ur=Oe[Er+4],Dr=Ne===0?on:Rn,ur=Ne===0?Xr:Ur;let go=!1;rt&&(qt=Math.sqrt(Math.pow(on-Xr,2)+Math.pow(Rn-Ur,2))),Dr<ve?ur>ve&&(Gt=dt(ct,on,Rn,Xr,Ur,ve),rt&&(ct.start=jt+qt*Gt)):Dr>p?ur<p&&(Gt=dt(ct,on,Rn,Xr,Ur,p),rt&&(ct.start=jt+qt*Gt)):_n(ct,on,Rn,er),ur<ve&&Dr>=ve&&(Gt=dt(ct,on,Rn,Xr,Ur,ve),go=!0),ur>p&&Dr<=p&&(Gt=dt(ct,on,Rn,Xr,Ur,p),go=!0),!Ye&&go&&(rt&&(ct.end=jt+qt*Gt),se.push(ct),ct=rn(Oe)),rt&&(jt+=qt)}let xt=Oe.length-3;const Tn=Oe[xt],On=Oe[xt+1],gr=Ne===0?Tn:On;gr>=ve&&gr<=p&&_n(ct,Tn,On,Oe[xt+2]),xt=ct.length-3,Ye&&xt>=3&&(ct[xt]!==ct[0]||ct[xt+1]!==ct[1])&&_n(ct,ct[0],ct[1],ct[2]),ct.length&&se.push(ct)}function rn(Oe){const se=[];return se.size=Oe.size,se.start=Oe.start,se.end=Oe.end,se}function Dt(Oe,se,ve,p,Ne,Ye){for(const rt of Oe)Ut(rt,se,ve,p,Ne,Ye,!1)}function _n(Oe,se,ve,p){Oe.push(se,ve,p)}function qn(Oe,se,ve,p,Ne,Ye){const rt=(Ye-se)/(p-se);return _n(Oe,Ye,ve+(Ne-ve)*rt,1),rt}function tn(Oe,se,ve,p,Ne,Ye){const rt=(Ye-ve)/(Ne-ve);return _n(Oe,se+(p-se)*rt,Ye,1),rt}function rr(Oe,se){const ve=[];for(let p=0;p<Oe.length;p++){const Ne=Oe[p],Ye=Ne.type;let rt;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")rt=Dn(Ne.geometry,se);else if(Ye==="MultiLineString"||Ye==="Polygon"){rt=[];for(const ct of Ne.geometry)rt.push(Dn(ct,se))}else if(Ye==="MultiPolygon"){rt=[];for(const ct of Ne.geometry){const dt=[];for(const qt of ct)dt.push(Dn(qt,se));rt.push(dt)}}ve.push(Yt(Ne.id,Ye,rt,Ne.tags))}return ve}function Dn(Oe,se){const ve=[];ve.size=Oe.size,Oe.start!==void 0&&(ve.start=Oe.start,ve.end=Oe.end);for(let p=0;p<Oe.length;p+=3)ve.push(Oe[p]+se,Oe[p+1],Oe[p+2]);return ve}function pn(Oe,se){if(Oe.transformed)return Oe;const ve=1<<Oe.z,p=Oe.x,Ne=Oe.y;for(const Ye of Oe.features){const rt=Ye.geometry,ct=Ye.type;if(Ye.geometry=[],ct===1)for(let dt=0;dt<rt.length;dt+=2)Ye.geometry.push(Zn(rt[dt],rt[dt+1],se,ve,p,Ne));else for(let dt=0;dt<rt.length;dt++){const qt=[];for(let Gt=0;Gt<rt[dt].length;Gt+=2)qt.push(Zn(rt[dt][Gt],rt[dt][Gt+1],se,ve,p,Ne));Ye.geometry.push(qt)}}return Oe.transformed=!0,Oe}function Zn(Oe,se,ve,p,Ne,Ye){return[Math.round(ve*(Oe*p-Ne)),Math.round(ve*(se*p-Ye))]}function dr(Oe,se,ve,p,Ne){const Ye=se===Ne.maxZoom?0:Ne.tolerance/((1<<se)*Ne.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:Oe.length,source:null,x:ve,y:p,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ct of Oe)vr(rt,ct,Ye,Ne);return rt}function vr(Oe,se,ve,p){const Ne=se.geometry,Ye=se.type,rt=[];if(Oe.minX=Math.min(Oe.minX,se.minX),Oe.minY=Math.min(Oe.minY,se.minY),Oe.maxX=Math.max(Oe.maxX,se.maxX),Oe.maxY=Math.max(Oe.maxY,se.maxY),Ye==="Point"||Ye==="MultiPoint")for(let ct=0;ct<Ne.length;ct+=3)rt.push(Ne[ct],Ne[ct+1]),Oe.numPoints++,Oe.numSimplified++;else if(Ye==="LineString")Jn(rt,Ne,Oe,ve,!1,!1);else if(Ye==="MultiLineString"||Ye==="Polygon")for(let ct=0;ct<Ne.length;ct++)Jn(rt,Ne[ct],Oe,ve,Ye==="Polygon",ct===0);else if(Ye==="MultiPolygon")for(let ct=0;ct<Ne.length;ct++){const dt=Ne[ct];for(let qt=0;qt<dt.length;qt++)Jn(rt,dt[qt],Oe,ve,!0,qt===0)}if(rt.length){let ct=se.tags||null;if(Ye==="LineString"&&p.lineMetrics){ct={};for(const qt in se.tags)ct[qt]=se.tags[qt];ct.mapbox_clip_start=Ne.start/Ne.size,ct.mapbox_clip_end=Ne.end/Ne.size}const dt={geometry:rt,type:Ye==="Polygon"||Ye==="MultiPolygon"?3:Ye==="LineString"||Ye==="MultiLineString"?2:1,tags:ct};se.id!==null&&(dt.id=se.id),Oe.features.push(dt)}}function Jn(Oe,se,ve,p,Ne,Ye){const rt=p*p;if(p>0&&se.size<(Ne?rt:p))return void(ve.numPoints+=se.length/3);const ct=[];for(let dt=0;dt<se.length;dt+=3)(p===0||se[dt+2]>rt)&&(ve.numSimplified++,ct.push(se[dt],se[dt+1])),ve.numPoints++;Ne&&function(dt,qt){let Gt=0;for(let jt=0,xt=dt.length,Tn=xt-2;jt<xt;Tn=jt,jt+=2)Gt+=(dt[jt]-dt[Tn])*(dt[jt+1]+dt[Tn+1]);if(Gt>0===qt)for(let jt=0,xt=dt.length;jt<xt/2;jt+=2){const Tn=dt[jt],On=dt[jt+1];dt[jt]=dt[xt-2-jt],dt[jt+1]=dt[xt-1-jt],dt[xt-2-jt]=Tn,dt[xt-1-jt]=On}}(ct,Ye),Oe.push(ct)}const Qe={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ce{constructor(se,ve){const p=(ve=this.options=function(Ye,rt){for(const ct in rt)Ye[ct]=rt[ct];return Ye}(Object.create(Qe),ve)).debug;if(p&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=function(Ye,rt){const ct=[];if(Ye.type==="FeatureCollection")for(let dt=0;dt<Ye.features.length;dt++)Lt(ct,Ye.features[dt],rt,dt);else Lt(ct,Ye.type==="Feature"?Ye:{geometry:Ye},rt);return ct}(se,ve);this.tiles={},this.tileCoords=[],p&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=function(Ye,rt){const ct=rt.buffer/rt.extent;let dt=Ye;const qt=_t(Ye,1,-1-ct,ct,0,-1,2,rt),Gt=_t(Ye,1,1-ct,2+ct,0,-1,2,rt);return(qt||Gt)&&(dt=_t(Ye,1,-ct,1+ct,0,-1,2,rt)||[],qt&&(dt=rr(qt,1).concat(dt)),Gt&&(dt=dt.concat(rr(Gt,-1)))),dt}(Ne,ve),Ne.length&&this.splitTile(Ne,0,0,0),p&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ve,p,Ne,Ye,rt,ct){const dt=[se,ve,p,Ne],qt=this.options,Gt=qt.debug;for(;dt.length;){Ne=dt.pop(),p=dt.pop(),ve=dt.pop(),se=dt.pop();const jt=1<<ve,xt=fe(ve,p,Ne);let Tn=this.tiles[xt];if(!Tn&&(Gt>1&&console.time("creation"),Tn=this.tiles[xt]=dr(se,ve,p,Ne,qt),this.tileCoords.push({z:ve,x:p,y:Ne}),Gt)){Gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,p,Ne,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const go=`z${ve}`;this.stats[go]=(this.stats[go]||0)+1,this.total++}if(Tn.source=se,Ye==null){if(ve===qt.indexMaxZoom||Tn.numPoints<=qt.indexMaxPoints)continue}else{if(ve===qt.maxZoom||ve===Ye)continue;if(Ye!=null){const go=Ye-ve;if(p!==rt>>go||Ne!==ct>>go)continue}}if(Tn.source=null,se.length===0)continue;Gt>1&&console.time("clipping");const On=.5*qt.buffer/qt.extent,gr=.5-On,Er=.5+On,on=1+On;let Rn=null,er=null,Xr=null,Ur=null,Dr=_t(se,jt,p-On,p+Er,0,Tn.minX,Tn.maxX,qt),ur=_t(se,jt,p+gr,p+on,0,Tn.minX,Tn.maxX,qt);se=null,Dr&&(Rn=_t(Dr,jt,Ne-On,Ne+Er,1,Tn.minY,Tn.maxY,qt),er=_t(Dr,jt,Ne+gr,Ne+on,1,Tn.minY,Tn.maxY,qt),Dr=null),ur&&(Xr=_t(ur,jt,Ne-On,Ne+Er,1,Tn.minY,Tn.maxY,qt),Ur=_t(ur,jt,Ne+gr,Ne+on,1,Tn.minY,Tn.maxY,qt),ur=null),Gt>1&&console.timeEnd("clipping"),dt.push(Rn||[],ve+1,2*p,2*Ne),dt.push(er||[],ve+1,2*p,2*Ne+1),dt.push(Xr||[],ve+1,2*p+1,2*Ne),dt.push(Ur||[],ve+1,2*p+1,2*Ne+1)}}getTile(se,ve,p){se=+se,ve=+ve,p=+p;const Ne=this.options,{extent:Ye,debug:rt}=Ne;if(se<0||se>24)return null;const ct=1<<se,dt=fe(se,ve=ve+ct&ct-1,p);if(this.tiles[dt])return pn(this.tiles[dt],Ye);rt>1&&console.log("drilling down to z%d-%d-%d",se,ve,p);let qt,Gt=se,jt=ve,xt=p;for(;!qt&&Gt>0;)Gt--,jt>>=1,xt>>=1,qt=this.tiles[fe(Gt,jt,xt)];return qt&&qt.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",Gt,jt,xt),console.time("drilling down")),this.splitTile(qt.source,Gt,jt,xt,se,ve,p),rt>1&&console.timeEnd("drilling down"),this.tiles[dt]?pn(this.tiles[dt],Ye):null):null}}function fe(Oe,se,ve){return 32*((1<<Oe)*ve+se)+Oe}function nt(Oe,se){return se?Oe.properties[se]:Oe.id}function St(Oe,se){if(Oe==null)return!0;if(Oe.type==="Feature")return nt(Oe,se)!=null;if(Oe.type==="FeatureCollection"){const ve=new Set;for(const p of Oe.features){const Ne=nt(p,se);if(Ne==null||ve.has(Ne))return!1;ve.add(Ne)}return!0}return!1}function Ht(Oe,se){const ve=new Map;if(Oe!=null)if(Oe.type==="Feature")ve.set(nt(Oe,se),Oe);else for(const p of Oe.features)ve.set(nt(p,se),p);return ve}class sn extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ve){return a._(this,void 0,void 0,function*(){const p=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ne=this._geoJSONIndex.getTile(p.z,p.x,p.y);if(!Ne)return null;const Ye=new oe(Ne.features);let rt=he(Ye);return rt.byteOffset===0&&rt.byteLength===rt.buffer.byteLength||(rt=new Uint8Array(rt)),{vectorTile:Ye,rawData:rt.buffer}})}loadData(se){return a._(this,void 0,void 0,function*(){var ve;(ve=this._pendingRequest)===null||ve===void 0||ve.abort();const p=!!(se&&se.request&&se.request.collectResourceTiming)&&new a.cu(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new at(function({superclusterOptions:rt,clusterProperties:ct}){if(!ct||!rt)return rt;const dt={},qt={},Gt={accumulated:null,zoom:0},jt={properties:null},xt=Object.keys(ct);for(const Tn of xt){const[On,gr]=ct[Tn],Er=a.cB(gr),on=a.cB(typeof On=="string"?[On,["accumulated"],["get",Tn]]:On);dt[Tn]=Er.value,qt[Tn]=on.value}return rt.map=Tn=>{jt.properties=Tn;const On={};for(const gr of xt)On[gr]=dt[gr].evaluate(Gt,jt);return On},rt.reduce=(Tn,On)=>{jt.properties=On;for(const gr of xt)Gt.accumulated=Tn[gr],Tn[gr]=qt[gr].evaluate(Gt,jt)},rt}(se)).load((yield this._pendingData).features):(Ne=yield this._pendingData,new ce(Ne,se.geojsonVtOptions)),this.loaded={};const Ye={};if(p){const rt=p.finish();rt&&(Ye.resourceTiming={},Ye.resourceTiming[se.source]=JSON.parse(JSON.stringify(rt)))}return Ye}catch(Ye){if(delete this._pendingRequest,a.cf(Ye))return{abandoned:!0};throw Ye}var Ne})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ve=this.loaded;return ve&&ve[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ve){return a._(this,void 0,void 0,function*(){let p=yield this.loadGeoJSON(se,ve);if(delete this._pendingRequest,typeof p!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(N(p,!0),se.filter){const Ne=a.cB(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(rt=>`${rt.key}: ${rt.message}`).join(", "));p={type:"FeatureCollection",features:p.features.filter(rt=>Ne.value.evaluate({zoom:0},rt))}}return p})}loadGeoJSON(se,ve){return a._(this,void 0,void 0,function*(){const{promoteId:p}=se;if(se.request){const Ne=yield a.h(se.request,ve);return this._dataUpdateable=St(Ne.data,p)?Ht(Ne.data,p):void 0,Ne.data}if(typeof se.data=="string")try{const Ne=JSON.parse(se.data);return this._dataUpdateable=St(Ne,p)?Ht(Ne,p):void 0,Ne}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ne,Ye,rt){var ct,dt,qt,Gt;if(Ye.removeAll&&Ne.clear(),Ye.remove)for(const jt of Ye.remove)Ne.delete(jt);if(Ye.add)for(const jt of Ye.add){const xt=nt(jt,rt);xt!=null&&Ne.set(xt,jt)}if(Ye.update)for(const jt of Ye.update){let xt=Ne.get(jt.id);if(xt==null)continue;const Tn=!jt.removeAllProperties&&(((ct=jt.removeProperties)===null||ct===void 0?void 0:ct.length)>0||((dt=jt.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0);if((jt.newGeometry||jt.removeAllProperties||Tn)&&(xt=Object.assign({},xt),Ne.set(jt.id,xt),Tn&&(xt.properties=Object.assign({},xt.properties))),jt.newGeometry&&(xt.geometry=jt.newGeometry),jt.removeAllProperties)xt.properties={};else if(((qt=jt.removeProperties)===null||qt===void 0?void 0:qt.length)>0)for(const On of jt.removeProperties)Object.prototype.hasOwnProperty.call(xt.properties,On)&&delete xt.properties[On];if(((Gt=jt.addOrUpdateProperties)===null||Gt===void 0?void 0:Gt.length)>0)for(const{key:On,value:gr}of jt.addOrUpdateProperties)xt.properties[On]=gr}}(this._dataUpdateable,se.dataDiff,p),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class tr{constructor(se){this.self=se,this.actor=new a.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ve,p)=>{if(this.externalWorkerSourceTypes[ve])throw new Error(`Worker source with name "${ve}" already registered.`);this.externalWorkerSourceTypes[ve]=p},this.self.addProtocol=a.ch,this.self.removeProtocol=a.ci,this.self.registerRTLTextPlugin=ve=>{a.cC.setMethods(ve)},this.actor.registerMessageHandler("LDT",(ve,p)=>this._getDEMWorkerSource(ve,p.source).loadTile(p)),this.actor.registerMessageHandler("RDT",(ve,p)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ve,p.source).removeTile(p)})),this.actor.registerMessageHandler("GCEZ",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterExpansionZoom(p)})),this.actor.registerMessageHandler("GCC",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterChildren(p)})),this.actor.registerMessageHandler("GCL",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterLeaves(p)})),this.actor.registerMessageHandler("LD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadData(p)),this.actor.registerMessageHandler("GD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).getData()),this.actor.registerMessageHandler("LT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadTile(p)),this.actor.registerMessageHandler("RT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).reloadTile(p)),this.actor.registerMessageHandler("AT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).abortTile(p)),this.actor.registerMessageHandler("RMT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).removeTile(p)),this.actor.registerMessageHandler("RS",(ve,p)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[ve]||!this.workerSources[ve][p.type]||!this.workerSources[ve][p.type][p.source])return;const Ne=this.workerSources[ve][p.type][p.source];delete this.workerSources[ve][p.type][p.source],Ne.removeSource!==void 0&&Ne.removeSource(p)})),this.actor.registerMessageHandler("RM",ve=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[ve],delete this.availableImages[ve],delete this.workerSources[ve],delete this.demWorkerSources[ve]})),this.actor.registerMessageHandler("SR",(ve,p)=>a._(this,void 0,void 0,function*(){this.referrer=p})),this.actor.registerMessageHandler("SRPS",(ve,p)=>this._syncRTLPluginState(ve,p)),this.actor.registerMessageHandler("IS",(ve,p)=>a._(this,void 0,void 0,function*(){this.self.importScripts(p)})),this.actor.registerMessageHandler("SI",(ve,p)=>this._setImages(ve,p)),this.actor.registerMessageHandler("UL",(ve,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ve).update(p.layers,p.removedIds)})),this.actor.registerMessageHandler("SL",(ve,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ve).replace(p)}))}_setImages(se,ve){return a._(this,void 0,void 0,function*(){this.availableImages[se]=ve;for(const p in this.workerSources[se]){const Ne=this.workerSources[se][p];for(const Ye in Ne)Ne[Ye].availableImages=ve}})}_syncRTLPluginState(se,ve){return a._(this,void 0,void 0,function*(){return yield a.cC.syncState(ve,this.self.importScripts)})}_getAvailableImages(se){let ve=this.availableImages[se];return ve||(ve=[]),ve}_getLayerIndex(se){let ve=this.layerIndexes[se];return ve||(ve=this.layerIndexes[se]=new o),ve}_getWorkerSource(se,ve,p){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ve]||(this.workerSources[se][ve]={}),!this.workerSources[se][ve][p]){const Ne={sendAsync:(Ye,rt)=>(Ye.targetMapId=se,this.actor.sendAsync(Ye,rt))};switch(ve){case"vector":this.workerSources[se][ve][p]=new B(Ne,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ve][p]=new sn(Ne,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ve][p]=new this.externalWorkerSourceTypes[ve](Ne,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ve][p]}_getDEMWorkerSource(se,ve){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ve]||(this.demWorkerSources[se][ve]=new O),this.demWorkerSources[se][ve]}}return a.i(self)&&(self.worker=new tr(self)),tr}),i("index",["exports","./shared"],function(a,o){var f="5.1.0";function y(){var I=new o.A(4);return o.A!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I}let x,B;const O={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(I,l,c){const _=requestAnimationFrame(l);I.signal.addEventListener("abort",()=>{cancelAnimationFrame(_),c(o.c())})},frameAsync(I){return new Promise((l,c)=>{this.frame(I,l,c)})},getImageData(I,l=0){return this.getImageCanvasContext(I).getImageData(-l,-l,I.width+2*l,I.height+2*l)},getImageCanvasContext(I){const l=window.document.createElement("canvas"),c=l.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return l.width=I.width,l.height=I.height,c.drawImage(I,0,0,I.width,I.height),c},resolveURL:I=>(x||(x=document.createElement("a")),x.href=I,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class T{static testProp(l){if(!T.docStyle)return l[0];for(let c=0;c<l.length;c++)if(l[c]in T.docStyle)return l[c];return l[0]}static create(l,c,_){const w=window.document.createElement(l);return c!==void 0&&(w.className=c),_&&_.appendChild(w),w}static createNS(l,c){return window.document.createElementNS(l,c)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(l,c){l.style[T.transformProp]=c}static addEventListener(l,c,_,w={}){l.addEventListener(c,_,"passive"in w?w:w.capture)}static removeEventListener(l,c,_,w={}){l.removeEventListener(c,_,"passive"in w?w:w.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(l){const c=l.getBoundingClientRect();return{x:c.width/l.offsetWidth||1,y:c.height/l.offsetHeight||1,boundingClientRect:c}}static getPoint(l,c,_){const w=c.boundingClientRect;return new o.P((_.clientX-w.left)/c.x-l.clientLeft,(_.clientY-w.top)/c.y-l.clientTop)}static mousePos(l,c){const _=T.getScale(l);return T.getPoint(l,_,c)}static touchPos(l,c){const _=[],w=T.getScale(l);for(let P=0;P<c.length;P++)_.push(T.getPoint(l,w,c[P]));return _}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const c=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),_=c.querySelectorAll("script");for(const w of _)w.remove();return T.clean(c),c.innerHTML}static isPossiblyDangerous(l,c){const _=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!_.includes("javascript:")&&!_.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const c=l.children;for(const _ of c)T.removeAttributes(_),T.clean(_)}static removeAttributes(l){for(const{name:c,value:_}of l.attributes)T.isPossiblyDangerous(c,_)&&l.removeAttribute(c)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const F={supported:!1,testSupport:function(I){!q&&N&&(H?oe(I):j=I)}};let j,N,q=!1,H=!1;function oe(I){const l=I.createTexture();I.bindTexture(I.TEXTURE_2D,l);try{if(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,N),I.isContextLost())return;F.supported=!0}catch{}I.deleteTexture(l),q=!0}var ne;typeof document<"u"&&(N=document.createElement("img"),N.onload=()=>{j&&oe(j),j=null,H=!0},N.onerror=()=>{q=!0,j=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(I){let l,c,_,w;I.resetRequestQueue=()=>{l=[],c=0,_=0,w={}},I.addThrottleControl=ee=>{const ae=_++;return w[ae]=ee,ae},I.removeThrottleControl=ee=>{delete w[ee],z()},I.getImage=(ee,ae,xe=!0)=>new Promise((ke,Ke)=>{F.supported&&(ee.headers||(ee.headers={}),ee.headers.accept="image/webp,*/*"),o.e(ee,{type:"image"}),l.push({abortController:ae,requestParameters:ee,supportImageRefresh:xe,state:"queued",onError:$e=>{Ke($e)},onSuccess:$e=>{ke($e)}}),z()});const P=ee=>o._(this,void 0,void 0,function*(){ee.state="running";const{requestParameters:ae,supportImageRefresh:xe,onError:ke,onSuccess:Ke,abortController:$e}=ee,Xe=xe===!1&&!o.i(self)&&!o.g(ae.url)&&(!ae.headers||Object.keys(ae.headers).reduce((mt,vt)=>mt&&vt==="accept",!0));c++;const pt=Xe?Y(ae,$e):o.m(ae,$e);try{const mt=yield pt;delete ee.abortController,ee.state="completed",mt.data instanceof HTMLImageElement||o.b(mt.data)?Ke(mt):mt.data&&Ke({data:yield(ut=mt.data,typeof createImageBitmap=="function"?o.d(ut):o.f(ut)),cacheControl:mt.cacheControl,expires:mt.expires})}catch(mt){delete ee.abortController,ke(mt)}finally{c--,z()}var ut}),z=()=>{const ee=(()=>{for(const ae of Object.keys(w))if(w[ae]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let ae=c;ae<ee&&l.length>0;ae++){const xe=l.shift();xe.abortController.signal.aborted?ae--:P(xe)}},Y=(ee,ae)=>new Promise((xe,ke)=>{const Ke=new Image,$e=ee.url,Xe=ee.credentials;Xe&&Xe==="include"?Ke.crossOrigin="use-credentials":(Xe&&Xe==="same-origin"||!o.s($e))&&(Ke.crossOrigin="anonymous"),ae.signal.addEventListener("abort",()=>{Ke.src="",ke(o.c())}),Ke.fetchPriority="high",Ke.onload=()=>{Ke.onerror=Ke.onload=null,xe({data:Ke})},Ke.onerror=()=>{Ke.onerror=Ke.onload=null,ae.signal.aborted||ke(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Ke.src=$e})}(ne||(ne={})),ne.resetRequestQueue();class ${constructor(l){this._transformRequestFn=l}transformRequest(l,c){return this._transformRequestFn&&this._transformRequestFn(l,c)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function te(I){const l=[];if(typeof I=="string")l.push({id:"default",url:I});else if(I&&I.length>0){const c=[];for(const{id:_,url:w}of I){const P=`${_}${w}`;c.indexOf(P)===-1&&(c.push(P),l.push({id:_,url:w}))}}return l}function G(I,l,c){try{const _=new URL(I);return _.pathname+=`${l}${c}`,_.toString()}catch{throw new Error(`Invalid sprite URL "${I}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class ie{constructor(l,c,_,w){this.context=l,this.format=_,this.texture=l.gl.createTexture(),this.update(c,w)}update(l,c,_){const{width:w,height:P}=l,z=!(this.size&&this.size[0]===w&&this.size[1]===P||_),{context:Y}=this,{gl:ee}=Y;if(this.useMipmap=!!(c&&c.useMipmap),ee.bindTexture(ee.TEXTURE_2D,this.texture),Y.pixelStoreUnpackFlipY.set(!1),Y.pixelStoreUnpack.set(1),Y.pixelStoreUnpackPremultiplyAlpha.set(this.format===ee.RGBA&&(!c||c.premultiply!==!1)),z)this.size=[w,P],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?ee.texImage2D(ee.TEXTURE_2D,0,this.format,this.format,ee.UNSIGNED_BYTE,l):ee.texImage2D(ee.TEXTURE_2D,0,this.format,w,P,0,this.format,ee.UNSIGNED_BYTE,l.data);else{const{x:ae,y:xe}=_||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?ee.texSubImage2D(ee.TEXTURE_2D,0,ae,xe,ee.RGBA,ee.UNSIGNED_BYTE,l):ee.texSubImage2D(ee.TEXTURE_2D,0,ae,xe,w,P,ee.RGBA,ee.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ee.generateMipmap(ee.TEXTURE_2D)}bind(l,c,_){const{context:w}=this,{gl:P}=w;P.bindTexture(P.TEXTURE_2D,this.texture),_!==P.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=P.LINEAR),l!==this.filter&&(P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,l),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,_||l),this.filter=l),c!==this.wrap&&(P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,c),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function he(I){const{userImage:l}=I;return!!(l&&l.render&&l.render())&&(I.data.replace(new Uint8Array(l.data.buffer)),!0)}class pe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:c,promiseResolve:_}of this.requestors)_(this._getImagesForIds(c));this.requestors=[]}}getImage(l){const c=this.images[l];if(c&&!c.data&&c.spriteData){const _=c.spriteData;c.data=new o.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),c.spriteData=null}return c}addImage(l,c){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,c)&&(this.images[l]=c)}_validate(l,c){let _=!0;const w=c.data||c.spriteData;return this._validateStretch(c.stretchX,w&&w.width)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(c.stretchY,w&&w.height)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,c){if(!l)return!0;let _=0;for(const w of l){if(w[0]<_||w[1]<w[0]||c<w[1])return!1;_=w[1]}return!0}_validateContent(l,c){if(!l)return!0;if(l.length!==4)return!1;const _=c.spriteData,w=_&&_.width||c.data.width,P=_&&_.height||c.data.height;return!(l[0]<0||w<l[0]||l[1]<0||P<l[1]||l[2]<0||w<l[2]||l[3]<0||P<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,c,_=!0){const w=this.getImage(l);if(_&&(w.data.width!==c.data.width||w.data.height!==c.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=w.version+1,this.images[l]=c,this.updatedImages[l]=!0}removeImage(l){const c=this.images[l];delete this.images[l],delete this.patterns[l],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((c,_)=>{let w=!0;if(!this.isLoaded())for(const P of l)this.images[P]||(w=!1);this.isLoaded()||w?c(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:c})})}_getImagesForIds(l){const c={};for(const _ of l){let w=this.getImage(_);w||(this.fire(new o.k("styleimagemissing",{id:_})),w=this.getImage(_)),w?c[_]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:o.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:l,height:c}=this.atlasImage;return{width:l,height:c}}getPattern(l){const c=this.patterns[l],_=this.getImage(l);if(!_)return null;if(c&&c.position.version===_.version)return c.position;if(c)c.position.version=_.version;else{const w={w:_.data.width+2,h:_.data.height+2,x:0,y:0},P=new o.I(w,_);this.patterns[l]={bin:w,position:P}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const c=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ie(l,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const P in this.patterns)l.push(this.patterns[P].bin);const{w:c,h:_}=o.p(l),w=this.atlasImage;w.resize({width:c||1,height:_||1});for(const P in this.patterns){const{bin:z}=this.patterns[P],Y=z.x+1,ee=z.y+1,ae=this.getImage(P).data,xe=ae.width,ke=ae.height;o.R.copy(ae,w,{x:0,y:0},{x:Y,y:ee},{width:xe,height:ke}),o.R.copy(ae,w,{x:0,y:ke-1},{x:Y,y:ee-1},{width:xe,height:1}),o.R.copy(ae,w,{x:0,y:0},{x:Y,y:ee+ke},{width:xe,height:1}),o.R.copy(ae,w,{x:xe-1,y:0},{x:Y-1,y:ee},{width:1,height:ke}),o.R.copy(ae,w,{x:0,y:0},{x:Y+xe,y:ee},{width:1,height:ke})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const c of l){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const _=this.getImage(c);_||o.w(`Image with ID: "${c}" was not found`),he(_)&&this.updateImage(c,_)}}}const Ee=1e20;function me(I,l,c,_,w,P,z,Y,ee){for(let ae=l;ae<l+_;ae++)Se(I,c*P+ae,P,w,z,Y,ee);for(let ae=c;ae<c+w;ae++)Se(I,ae*P+l,1,_,z,Y,ee)}function Se(I,l,c,_,w,P,z){P[0]=0,z[0]=-1e20,z[1]=Ee,w[0]=I[l];for(let Y=1,ee=0,ae=0;Y<_;Y++){w[Y]=I[l+Y*c];const xe=Y*Y;do{const ke=P[ee];ae=(w[Y]-w[ke]+xe-ke*ke)/(Y-ke)/2}while(ae<=z[ee]&&--ee>-1);ee++,P[ee]=Y,z[ee]=ae,z[ee+1]=Ee}for(let Y=0,ee=0;Y<_;Y++){for(;z[ee+1]<Y;)ee++;const ae=P[ee],xe=Y-ae;I[l+Y*c]=w[ae]+xe*xe}}class De{constructor(l,c){this.requestManager=l,this.localIdeographFontFamily=c,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return o._(this,void 0,void 0,function*(){const c=[];for(const P in l)for(const z of l[P])c.push(this._getAndCacheGlyphsPromise(P,z));const _=yield Promise.all(c),w={};for(const{stack:P,id:z,glyph:Y}of _)w[P]||(w[P]={}),w[P][z]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics};return w})}_getAndCacheGlyphsPromise(l,c){return o._(this,void 0,void 0,function*(){let _=this.entries[l];_||(_=this.entries[l]={glyphs:{},requests:{},ranges:{}});let w=_.glyphs[c];if(w!==void 0)return{stack:l,id:c,glyph:w};if(w=this._tinySDF(_,l,c),w)return _.glyphs[c]=w,{stack:l,id:c,glyph:w};const P=Math.floor(c/256);if(256*P>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[P])return{stack:l,id:c,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[P]){const Y=De.loadGlyphRange(l,P,this.url,this.requestManager);_.requests[P]=Y}const z=yield _.requests[P];for(const Y in z)this._doesCharSupportLocalGlyph(+Y)||(_.glyphs[+Y]=z[+Y]);return _.ranges[P]=!0,{stack:l,id:c,glyph:z[c]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,c,_){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(_))return;let P=l.tinySDF;if(!P){let Y="400";/bold/i.test(c)?Y="900":/medium/i.test(c)?Y="500":/light/i.test(c)&&(Y="200"),P=l.tinySDF=new De.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:w,fontWeight:Y})}const z=P.draw(String.fromCharCode(_));return{id:_,bitmap:new o.o({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}}De.loadGlyphRange=function(I,l,c,_){return o._(this,void 0,void 0,function*(){const w=256*l,P=w+255,z=_.transformRequest(c.replace("{fontstack}",I).replace("{range}",`${w}-${P}`),"Glyphs"),Y=yield o.l(z,new AbortController);if(!Y||!Y.data)throw new Error(`Could not load glyph range. range: ${l}, ${w}-${P}`);const ee={};for(const ae of o.n(Y.data))ee[ae.id]=ae;return ee})},De.TinySDF=class{constructor({fontSize:I=24,buffer:l=3,radius:c=8,cutoff:_=.25,fontFamily:w="sans-serif",fontWeight:P="normal",fontStyle:z="normal"}={}){this.buffer=l,this.cutoff=_,this.radius=c;const Y=this.size=I+4*l,ee=this._createCanvas(Y),ae=this.ctx=ee.getContext("2d",{willReadFrequently:!0});ae.font=`${z} ${P} ${I}px ${w}`,ae.textBaseline="alphabetic",ae.textAlign="left",ae.fillStyle="black",this.gridOuter=new Float64Array(Y*Y),this.gridInner=new Float64Array(Y*Y),this.f=new Float64Array(Y),this.z=new Float64Array(Y+1),this.v=new Uint16Array(Y)}_createCanvas(I){const l=document.createElement("canvas");return l.width=l.height=I,l}draw(I){const{width:l,actualBoundingBoxAscent:c,actualBoundingBoxDescent:_,actualBoundingBoxLeft:w,actualBoundingBoxRight:P}=this.ctx.measureText(I),z=Math.ceil(c),Y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(P-w))),ee=Math.min(this.size-this.buffer,z+Math.ceil(_)),ae=Y+2*this.buffer,xe=ee+2*this.buffer,ke=Math.max(ae*xe,0),Ke=new Uint8ClampedArray(ke),$e={data:Ke,width:ae,height:xe,glyphWidth:Y,glyphHeight:ee,glyphTop:z,glyphLeft:0,glyphAdvance:l};if(Y===0||ee===0)return $e;const{ctx:Xe,buffer:pt,gridInner:ut,gridOuter:mt}=this;Xe.clearRect(pt,pt,Y,ee),Xe.fillText(I,pt,pt+z);const vt=Xe.getImageData(pt,pt,Y,ee);mt.fill(Ee,0,ke),ut.fill(0,0,ke);for(let Bt=0;Bt<ee;Bt++)for(let kt=0;kt<Y;kt++){const Rt=vt.data[4*(Bt*Y+kt)+3]/255;if(Rt===0)continue;const zt=(Bt+pt)*ae+kt+pt;if(Rt===1)mt[zt]=0,ut[zt]=Ee;else{const Tt=.5-Rt;mt[zt]=Tt>0?Tt*Tt:0,ut[zt]=Tt<0?Tt*Tt:0}}me(mt,0,0,ae,xe,ae,this.f,this.v,this.z),me(ut,pt,pt,Y,ee,ae,this.f,this.v,this.z);for(let Bt=0;Bt<ke;Bt++){const kt=Math.sqrt(mt[Bt])-Math.sqrt(ut[Bt]);Ke[Bt]=Math.round(255-255*(kt/this.radius+this.cutoff))}return $e}};class be{constructor(){this.specification=o.v.light.position}possiblyEvaluate(l,c){return o.x(l.expression.evaluate(c))}interpolate(l,c,_){return{x:o.y.number(l.x,c.x,_),y:o.y.number(l.y,c.y,_),z:o.y.number(l.z,c.z,_)}}}let at;class Ze extends o.E{constructor(l){super(),at=at||new o.q({anchor:new o.D(o.v.light.anchor),position:new be,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(at),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,c={}){if(!this._validate(o.r,l,c))for(const _ in l){const w=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,_){return(!_||_.validate!==!1)&&o.t(this,l.call(o.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Je=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class We extends o.E{constructor(l){super(),this._transitionable=new o.T(Je),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(l,c={}){if(!this._validate(o.B,l,c)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in l){const w=l[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),w):this._transitionable.setValue(_,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,_={}){return(_==null?void 0:_.validate)!==!1&&o.t(this,l.call(o.u,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Me{constructor(l,c){this.width=l,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,c){const _=l.join(",")+String(c);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(l,c)),this.dashEntry[_]}getDashRanges(l,c,_){const w=[];let P=l.length%2==1?-l[l.length-1]*_:0,z=l[0]*_,Y=!0;w.push({left:P,right:z,isDash:Y,zeroLength:l[0]===0});let ee=l[0];for(let ae=1;ae<l.length;ae++){Y=!Y;const xe=l[ae];P=ee*_,ee+=xe,z=ee*_,w.push({left:P,right:z,isDash:Y,zeroLength:xe===0})}return w}addRoundDash(l,c,_){const w=c/2;for(let P=-_;P<=_;P++){const z=this.width*(this.nextRow+_+P);let Y=0,ee=l[Y];for(let ae=0;ae<this.width;ae++){ae/ee.right>1&&(ee=l[++Y]);const xe=Math.abs(ae-ee.left),ke=Math.abs(ae-ee.right),Ke=Math.min(xe,ke);let $e;const Xe=P/_*(w+1);if(ee.isDash){const pt=w-Math.abs(Xe);$e=Math.sqrt(Ke*Ke+pt*pt)}else $e=w-Math.sqrt(Ke*Ke+Xe*Xe);this.data[z+ae]=Math.max(0,Math.min(255,$e+128))}}}addRegularDash(l){for(let Y=l.length-1;Y>=0;--Y){const ee=l[Y],ae=l[Y+1];ee.zeroLength?l.splice(Y,1):ae&&ae.isDash===ee.isDash&&(ae.left=ee.left,l.splice(Y,1))}const c=l[0],_=l[l.length-1];c.isDash===_.isDash&&(c.left=_.left-this.width,_.right=c.right+this.width);const w=this.width*this.nextRow;let P=0,z=l[P];for(let Y=0;Y<this.width;Y++){Y/z.right>1&&(z=l[++P]);const ee=Math.abs(Y-z.left),ae=Math.abs(Y-z.right),xe=Math.min(ee,ae);this.data[w+Y]=Math.max(0,Math.min(255,(z.isDash?xe:-xe)+128))}}addDash(l,c){const _=c?7:0,w=2*_+1;if(this.nextRow+w>this.height)return o.w("LineAtlas out of space"),null;let P=0;for(let Y=0;Y<l.length;Y++)P+=l[Y];if(P!==0){const Y=this.width/P,ee=this.getDashRanges(l,this.width,Y);c?this.addRoundDash(ee,Y,_):this.addRegularDash(ee)}const z={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:P};return this.nextRow+=w,this.dirty=!0,z}bind(l){const c=l.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const bt=Math.floor(O.hardwareConcurrency/2);let Yt,gt;function Lt(){return Yt||(Yt=new He),Yt}He.workerCount=o.C(globalThis)?Math.max(Math.min(bt,3),1):1;class Kt{constructor(l,c){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=c;const _=this.workerPool.acquire(c);for(let w=0;w<_.length;w++){const P=new o.F(_[w],c);P.name=`Worker ${w}`,this.actors.push(P)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,c){const _=[];for(const w of this.actors)_.push(w.sendAsync({type:l,data:c}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,c){for(const _ of this.actors)_.registerMessageHandler(l,c)}}function Ue(){return gt||(gt=new Kt(Lt(),o.G),gt.registerMessageHandler("GR",(I,l,c)=>o.m(l,c))),gt}function Pe(I,l){const c=o.H();return o.J(c,c,[1,1,0]),o.K(c,c,[.5*I.width,.5*I.height,1]),I.calculatePosMatrix?o.L(c,c,I.calculatePosMatrix(l.toUnwrapped())):c}function Be(I,l,c,_,w,P){var z;const Y=function(ke,Ke,$e){if(ke)for(const Xe of ke){const pt=Ke[Xe];if(pt&&pt.source===$e&&pt.type==="fill-extrusion")return!0}else for(const Xe in Ke){const pt=Ke[Xe];if(pt.source===$e&&pt.type==="fill-extrusion")return!0}return!1}((z=w==null?void 0:w.layers)!==null&&z!==void 0?z:null,l,I.id),ee=P.maxPitchScaleFactor(),ae=I.tilesIn(_,ee,Y);ae.sort(it);const xe=[];for(const ke of ae)xe.push({wrappedTileID:ke.tileID.wrapped().key,queryResults:ke.tile.queryRenderedFeatures(l,c,I._state,ke.queryGeometry,ke.cameraQueryGeometry,ke.scale,w,P,ee,Pe(I.transform,ke.tileID))});return function(ke,Ke){for(const $e in ke)for(const Xe of ke[$e])_t(Xe,Ke);return ke}(function(ke){const Ke={},$e={};for(const Xe of ke){const pt=Xe.queryResults,ut=Xe.wrappedTileID,mt=$e[ut]=$e[ut]||{};for(const vt in pt){const Bt=pt[vt],kt=mt[vt]=mt[vt]||{},Rt=Ke[vt]=Ke[vt]||[];for(const zt of Bt)kt[zt.featureIndex]||(kt[zt.featureIndex]=!0,Rt.push(zt))}}return Ke}(xe),I)}function it(I,l){const c=I.tileID,_=l.tileID;return c.overscaledZ-_.overscaledZ||c.canonical.y-_.canonical.y||c.wrap-_.wrap||c.canonical.x-_.canonical.x}function _t(I,l){const c=I.feature,_=l.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=_}function ft(I,l,c){return o._(this,void 0,void 0,function*(){let _=I;if(I.url?_=(yield o.h(l.transformRequest(I.url,"Source"),c)).data:yield O.frameAsync(c),!_)return null;const w=o.M(o.e(_,I),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(w.vectorLayerIds=_.vector_layers.map(P=>P.id)),w})}class Ut{constructor(l,c){l&&(c?this.setSouthWest(l).setNorthEast(c):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}extend(l){const c=this._sw,_=this._ne;let w,P;if(l instanceof o.N)w=l,P=l;else{if(!(l instanceof Ut))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Ut.convert(l)):this.extend(o.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(o.N.convert(l)):this;if(w=l._sw,P=l._ne,!w||!P)return this}return c||_?(c.lng=Math.min(w.lng,c.lng),c.lat=Math.min(w.lat,c.lat),_.lng=Math.max(P.lng,_.lng),_.lat=Math.max(P.lat,_.lat)):(this._sw=new o.N(w.lng,w.lat),this._ne=new o.N(P.lng,P.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:c,lat:_}=o.N.convert(l);let w=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&w}static convert(l){return l instanceof Ut?l:l&&new Ut(l)}static fromLngLat(l,c=0){const _=360*c/40075017,w=_/Math.cos(Math.PI/180*l.lat);return new Ut(new o.N(l.lng-w,l.lat-_),new o.N(l.lng+w,l.lat+_))}adjustAntiMeridian(){const l=new o.N(this._sw.lng,this._sw.lat),c=new o.N(this._ne.lng,this._ne.lat);return new Ut(l,l.lng>c.lng?new o.N(c.lng+360,c.lat):c)}}class rn{constructor(l,c,_){this.bounds=Ut.convert(this.validateBounds(l)),this.minzoom=c||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const c=Math.pow(2,l.z),_=Math.floor(o.O(this.bounds.getWest())*c),w=Math.floor(o.Q(this.bounds.getNorth())*c),P=Math.ceil(o.O(this.bounds.getEast())*c),z=Math.ceil(o.Q(this.bounds.getSouth())*c);return l.x>=_&&l.x<P&&l.y>=w&&l.y<z}}class Dt extends o.E{constructor(l,c,_,w){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(o.e(this,l),l.bounds&&(this.tileBounds=new rn(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new o.j(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(c,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};_.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((P,z)=>{l.reloadPromise={resolve:P,reject:z}})}else l.actor=this.dispatcher.getActor(),w="LT";l.abortController=new AbortController;try{const P=yield l.actor.sendAsync({type:w,data:_},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,P)}catch(P){if(delete l.abortController,l.aborted)return;if(P&&P.status!==404)throw P;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,c){if(c&&c.resourceTiming&&(l.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&l.setExpiryData(c),l.loadVectorData(c,this.map.painter),l.reloadPromise){const _=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(_.resolve).catch(_.reject)}}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class _n extends o.E{constructor(l,c,_,w){super(),this.id=l,this.dispatcher=_,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.M(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(l=!1){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new rn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(c){this._tileJSONRequest=null,this.fire(new o.j(c))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return o.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const _=yield ne.getImage(this.map._requestManager.transformRequest(c,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&l.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const w=this.map.painter.context,P=w.gl,z=_.data;l.texture=this.map.painter.getTileTexture(z.width),l.texture?l.texture.update(z,{useMipmap:!0}):(l.texture=new ie(w,z,P.RGBA,{useMipmap:!0}),l.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(_){if(delete l.abortController,l.aborted)l.state="unloaded";else if(_)throw l.state="errored",_}})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class qn extends _n{constructor(l,c,_,w){super(l,c,_,w),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(c,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const w=yield ne.getImage(_,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(w&&w.data){const P=w.data;this.map._refreshExpiredTiles&&w.cacheControl&&w.expires&&l.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const z=o.b(P)&&o.U()?P:yield this.readImageNow(P),Y={type:this.type,uid:l.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const ee=yield l.actor.sendAsync({type:"LDT",data:Y});l.dem=ee,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(w){if(delete l.abortController,l.aborted)l.state="unloaded";else if(w)throw l.state="errored",w}})}readImageNow(l){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.V()){const c=l.width+2,_=l.height+2;try{return new o.R({width:c,height:_},yield o.W(l,-1,-1,c,_))}catch{}}return O.getImageData(l,1)})}_getNeighboringTiles(l){const c=l.canonical,_=Math.pow(2,c.z),w=(c.x-1+_)%_,P=c.x===0?l.wrap-1:l.wrap,z=(c.x+1+_)%_,Y=c.x+1===_?l.wrap+1:l.wrap,ee={};return ee[new o.S(l.overscaledZ,P,c.z,w,c.y).key]={backfilled:!1},ee[new o.S(l.overscaledZ,Y,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(ee[new o.S(l.overscaledZ,P,c.z,w,c.y-1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,Y,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<_&&(ee[new o.S(l.overscaledZ,P,c.z,w,c.y+1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},ee[new o.S(l.overscaledZ,Y,c.z,z,c.y+1).key]={backfilled:!1}),ee}unloadTile(l){return o._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class tn extends o.E{constructor(l,c,_,w){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(w),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.X,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(o.X/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return o._(this,void 0,void 0,function*(){const l=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,c,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:c,offset:_}})}_updateWorkerData(l){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);l?c.dataDiff=l:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(O.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||_.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let w=null;_.resourceTiming&&_.resourceTiming[this.id]&&(w=_.resourceTiming[this.id].slice(0));const P={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&o.e(P,{resourceTiming:w}),this.fire(new o.k("data",Object.assign(Object.assign({},P),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},P),{sourceDataType:"content"})))}catch(_){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(_))}})}loaded(){return this._pendingLoads===0}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.actor?"RT":"LT";l.actor=this.actor;const _={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const w=yield this.actor.sendAsync({type:c,data:_},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(w,this.map.painter,c==="RT")})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class rr extends o.E{constructor(l,c,_,w){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=_,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=c}load(l){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,l&&(this.coordinates=l),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.j(c))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const c=l.map(o.Y.fromLngLat);var _;return this.tileID=function(w){let P=1/0,z=1/0,Y=-1/0,ee=-1/0;for(const Ke of w)P=Math.min(P,Ke.x),z=Math.min(z,Ke.y),Y=Math.max(Y,Ke.x),ee=Math.max(ee,Ke.y);const ae=Math.max(Y-P,ee-z),xe=Math.max(0,Math.floor(-Math.log(ae)/Math.LN2)),ke=Math.pow(2,xe);return new o.Z(xe,Math.floor((P+Y)/2*ke),Math.floor((z+ee)/2*ke))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((_=this.tileCoords)[1].x-_[0].x)*(_[2].y-_[0].y)-(_[1].y-_[0].y)*(_[2].x-_[0].x)<0,this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,c=l.gl;this.texture||(this.texture=new ie(l,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const w in this.tiles){const P=this.tiles[w];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Dn extends rr{constructor(l,c,_,w){super(l,c,_,w),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const c of l.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a0(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const c=this.video.seekable;l<c.start(0)||l>c.end(0)?this.fire(new o.j(new o.$(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,c=l.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new ie(l,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let _=!1;for(const w in this.tiles){const P=this.tiles[w];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pn extends rr{constructor(l,c,_,w){super(l,c,_,w),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(P=>!Array.isArray(P)||P.length!==2||P.some(z=>typeof z!="number"))||this.fire(new o.j(new o.$(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.$(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.$(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,_=c.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ie(c,this.canvas,_.RGBA,{premultiply:!0});let w=!1;for(const P in this.tiles){const z=this.tiles[P];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,w=!0)}w&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Zn={},dr=I=>{switch(I){case"geojson":return tn;case"image":return rr;case"raster":return _n;case"raster-dem":return qn;case"vector":return Dt;case"video":return Dn;case"canvas":return pn}return Zn[I]},vr="RTLPluginLoaded";class Jn extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ue()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return o._(this,arguments,void 0,function*(c,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=O.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(vr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Qe=null;function ce(){return Qe||(Qe=new Jn),Qe}class fe{constructor(l,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=o.a1(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const c=l+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,c,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(w,P){const z={};if(!P)return z;for(const Y of w){const ee=Y.layerIds.map(ae=>P.getLayer(ae)).filter(Boolean);if(ee.length!==0){Y.layers=ee,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(ae=>ee.filter(xe=>xe.id===ae)[0]));for(const ae of ee)z[ae.id]=Y}}return z}(l.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const P=this.buckets[w];if(P instanceof o.a3){if(this.hasSymbolBuckets=!0,!_)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const P=this.buckets[w];if(P instanceof o.a3&&P.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const P=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(w).queryRadius(P))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new o.a2}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const _ in this.buckets){const w=this.buckets[_];w.uploadPending()&&w.upload(l)}const c=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ie(l,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ie(l,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,c,_,w,P,z,Y,ee,ae,xe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:P,scale:z,tileSize:this.tileSize,pixelPosMatrix:xe,transform:ee,params:Y,queryPadding:this.queryPadding*ae},l,c,_):{}}querySourceFeatures(l,c){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const w=_.loadVTLayers(),P=c&&c.sourceLayer?c.sourceLayer:"",z=w._geojsonTileLayer||w[P];if(!z)return;const Y=o.a4(c&&c.filter),{z:ee,x:ae,y:xe}=this.tileID.canonical,ke={z:ee,x:ae,y:xe};for(let Ke=0;Ke<z.length;Ke++){const $e=z.feature(Ke);if(Y.needGeometry){const ut=o.a5($e,!0);if(!Y.filter(new o.z(this.tileID.overscaledZ),ut,this.tileID.canonical))continue}else if(!Y.filter(new o.z(this.tileID.overscaledZ),$e))continue;const Xe=_.getId($e,P),pt=new o.a6($e,ee,ae,xe,Xe);pt.tile=ke,l.push(pt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const c=this.expirationTime;if(l.cacheControl){const _=o.a7(l.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const _=Date.now();let w=!1;if(this.expirationTime>_)w=!1;else if(c)if(this.expirationTime<c)w=!0;else{const P=this.expirationTime-c;P?this.expirationTime=_+Math.max(P,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!c.style.hasLayer(w))continue;const P=this.buckets[w],z=P.layers[0].sourceLayer||"_geojsonTileLayer",Y=_[z],ee=l[z];if(!Y||!ee||Object.keys(ee).length===0)continue;P.update(ee,Y,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ae=c&&c.style&&c.style.getLayer(w);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(P)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=O.now()+l}setDependencies(l,c){const _={};for(const w of c)_[w]=!0;this.dependencies[l]=_}hasDependency(l,c){for(const _ of l){const w=this.dependencies[_];if(w){for(const P of c)if(w[P])return!0}}return!1}}class nt{constructor(l,c){this.max=l,this.onRemove=c,this.reset()}reset(){for(const l in this.data)for(const c of this.data[l])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(l,c,_){const w=l.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const P={value:c,timeout:void 0};if(_!==void 0&&(P.timeout=setTimeout(()=>{this.remove(l,P)},_)),this.data[w].push(P),this.order.push(w),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const c=this.data[l].shift();return c.timeout&&clearTimeout(c.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),c.value}getByKey(l){const c=this.data[l];return c?c[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,c){if(!this.has(l))return this;const _=l.wrapped().key,w=c===void 0?0:this.data[_].indexOf(c),P=this.data[_][w];return this.data[_].splice(w,1),P.timeout&&clearTimeout(P.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(P.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(l){const c=[];for(const _ in this.data)for(const w of this.data[_])l(w.value)||c.push(w);for(const _ of c)this.remove(_.value.tileID,_)}}class St{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,c,_){const w=String(c);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][w]=this.stateChanges[l][w]||{},o.e(this.stateChanges[l][w],_),this.deletedStates[l]===null){this.deletedStates[l]={};for(const P in this.state[l])P!==w&&(this.deletedStates[l][P]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][w]===null){this.deletedStates[l][w]={};for(const P in this.state[l][w])_[P]||(this.deletedStates[l][w][P]=null)}else for(const P in _)this.deletedStates[l]&&this.deletedStates[l][w]&&this.deletedStates[l][w][P]===null&&delete this.deletedStates[l][w][P]}removeFeatureState(l,c,_){if(this.deletedStates[l]===null)return;const w=String(c);if(this.deletedStates[l]=this.deletedStates[l]||{},_&&c!==void 0)this.deletedStates[l][w]!==null&&(this.deletedStates[l][w]=this.deletedStates[l][w]||{},this.deletedStates[l][w][_]=null);else if(c!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][w])for(_ in this.deletedStates[l][w]={},this.stateChanges[l][w])this.deletedStates[l][w][_]=null;else this.deletedStates[l][w]=null;else this.deletedStates[l]=null}getState(l,c){const _=String(c),w=o.e({},(this.state[l]||{})[_],(this.stateChanges[l]||{})[_]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const P=this.deletedStates[l][c];if(P===null)return{};for(const z in P)delete w[z]}return w}initializeTileState(l,c){l.setFeatureState(this.state,c)}coalesceChanges(l,c){const _={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const P={};for(const z in this.stateChanges[w])this.state[w][z]||(this.state[w][z]={}),o.e(this.state[w][z],this.stateChanges[w][z]),P[z]=this.state[w][z];_[w]=P}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const P={};if(this.deletedStates[w]===null)for(const z in this.state[w])P[z]={},this.state[w][z]={};else for(const z in this.deletedStates[w]){if(this.deletedStates[w][z]===null)this.state[w][z]={};else for(const Y of Object.keys(this.deletedStates[w][z]))delete this.state[w][z][Y];P[z]=this.state[w][z]}_[w]=_[w]||{},o.e(_[w],P)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const w in l)l[w].setFeatureState(_,c)}}function Ht(I,l,c){const _=l.intersectsFrustum(I);if(!c)return _;const w=l.intersectsPlane(c);return _===0||w===0?0:_===2&&w===2?2:1}function sn(I,l,c,_,w){let P=I;const z=Math.atan(l/c),Y=Math.hypot(l,c);return P=I+o.a8(_/Y/Math.max(.5,Math.cos(o.aa(w/2)))),P+=1*o.a8(Math.cos(z))/2,P+=o.ab(I-P,-0,0),P}function tr(I,l){const c=(l.roundZoom?Math.round:Math.floor)(I.zoom+o.a8(I.tileSize/l.tileSize));return Math.max(0,c)}function Oe(I,l){const c=I.getCameraFrustum(),_=I.getClippingPlane(),w=I.screenPointToMercatorCoordinate(I.getCameraPoint()),P=o.Y.fromLngLat(I.center,I.elevation);w.z=P.z+Math.cos(I.pitchInRadians)*I.cameraToCenterDistance/I.worldSize;const z=I.getCoveringTilesDetailsProvider(),Y=z.allowVariableZoom(I,l),ee=tr(I,l),ae=l.minzoom||0,xe=l.maxzoom!==void 0?l.maxzoom:I.maxZoom,ke=Math.min(Math.max(0,ee),xe),Ke=Math.pow(2,ke),$e=[Ke*w.x,Ke*w.y,0],Xe=[Ke*P.x,Ke*P.y,0],pt=Math.hypot(P.x-w.x,P.y-w.y),ut=Math.abs(P.z-w.z),mt=Math.hypot(pt,ut),vt=Rt=>({zoom:0,x:0,y:0,wrap:Rt,fullyVisible:!1}),Bt=[],kt=[];if(I.renderWorldCopies&&z.allowWorldCopies())for(let Rt=1;Rt<=3;Rt++)Bt.push(vt(-Rt)),Bt.push(vt(Rt));for(Bt.push(vt(0));Bt.length>0;){const Rt=Bt.pop(),zt=Rt.x,Tt=Rt.y;let nn=Rt.fullyVisible;const Zt={x:zt,y:Tt,z:Rt.zoom},Mn=z.getTileAABB(Zt,Rt.wrap,I.elevation,l);if(!nn){const Nn=Ht(c,Mn,_);if(Nn===0)continue;nn=Nn===2}const Bn=z.distanceToTile2d(w.x,w.y,Zt,Mn);let yn=ee;Y&&(yn=(l.calculateTileZoom||sn)(I.zoom+o.a8(I.tileSize/l.tileSize),Bn,ut,mt,I.fov)),yn=(l.roundZoom?Math.round:Math.floor)(yn),yn=Math.max(0,yn);const In=Math.min(yn,xe);if(Rt.wrap=z.getWrap(P,Zt,Rt.wrap),Rt.zoom>=In){if(Rt.zoom<ae)continue;const Nn=ke-Rt.zoom,Fn=$e[0]-.5-(zt<<Nn),pr=$e[1]-.5-(Tt<<Nn),Ti=l.reparseOverscaled?Math.max(Rt.zoom,yn):Rt.zoom;kt.push({tileID:new o.S(Rt.zoom===xe?Ti:Rt.zoom,Rt.wrap,Rt.zoom,zt,Tt),distanceSq:o.a9([Xe[0]-.5-zt,Xe[1]-.5-Tt]),tileDistanceToCamera:Math.sqrt(Fn*Fn+pr*pr)})}else for(let Nn=0;Nn<4;Nn++)Bt.push({zoom:Rt.zoom+1,x:(zt<<1)+Nn%2,y:(Tt<<1)+(Nn>>1),wrap:Rt.wrap,fullyVisible:nn})}return kt.sort((Rt,zt)=>Rt.distanceSq-zt.distanceSq).map(Rt=>Rt.tileID)}class se extends o.E{constructor(l,c,_){super(),this.id=l,this.dispatcher=_,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,P,z,Y)=>{const ee=new(dr(P.type))(w,P,z,Y);if(ee.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${ee.id}`);return ee})(l,c,_,this),this._tiles={},this._cache=new nt(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new St,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const c=this._tiles[l];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,c,_){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,c,_)}catch(w){l.state="errored",w.status!==404?this._source.fire(new o.j(w,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new o.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const _=this._tiles[c];_.upload(l),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(ve).map(l=>l.key)}getRenderableIds(l){const c=[];for(const _ in this._tiles)this._isIdRenderable(_,l)&&c.push(this._tiles[_]);return l?c.sort((_,w)=>{const P=_.tileID,z=w.tileID,Y=new o.P(P.canonical.x,P.canonical.y)._rotate(-this.transform.bearingInRadians),ee=new o.P(z.canonical.x,z.canonical.y)._rotate(-this.transform.bearingInRadians);return P.overscaledZ-z.overscaledZ||ee.y-Y.y||ee.x-Y.x}).map(_=>_.tileID.key):c.map(_=>_.tileID).sort(ve).map(_=>_.key)}hasRenderableParent(l){const c=this.findLoadedParent(l,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(l,c){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(c||!this._tiles[l].holdingForFade())}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(l||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(l,c){return o._(this,void 0,void 0,function*(){const _=this._tiles[l];_&&(_.state!=="loading"&&(_.state=c),yield this._loadTile(_,l,c))})}_tileLoaded(l,c,_){l.timeAdded=O.now(),_==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(c,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const c=this.getRenderableIds();for(let w=0;w<c.length;w++){const P=c[w];if(l.neighboringTiles&&l.neighboringTiles[P]){const z=this.getTileByID(P);_(l,z),_(z,l)}}function _(w,P){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let z=P.tileID.canonical.x-w.tileID.canonical.x;const Y=P.tileID.canonical.y-w.tileID.canonical.y,ee=Math.pow(2,w.tileID.canonical.z),ae=P.tileID.key;z===0&&Y===0||Math.abs(Y)>1||(Math.abs(z)>1&&(Math.abs(z+ee)===1?z+=ee:Math.abs(z-ee)===1&&(z-=ee)),P.dem&&w.dem&&(w.dem.backfillBorder(P.dem,z,Y),w.neighboringTiles&&w.neighboringTiles[ae]&&(w.neighboringTiles[ae].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,c,_,w){for(const P in this._tiles){let z=this._tiles[P];if(w[P]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>_)continue;let Y=z.tileID;for(;z&&z.tileID.overscaledZ>c+1;){const ae=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[ae.key],z&&z.hasData()&&(Y=ae)}let ee=Y;for(;ee.overscaledZ>c;)if(ee=ee.scaledTo(ee.overscaledZ-1),l[ee.key]||l[ee.canonical.key]){w[Y.key]=Y;break}}}findLoadedParent(l,c){if(l.key in this._loadedParentTiles){const _=this._loadedParentTiles[l.key];return _&&_.tileID.overscaledZ>=c?_:null}for(let _=l.overscaledZ-1;_>=c;_--){const w=l.scaledTo(_),P=this._getLoadedTile(w);if(P)return P}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const c=this._tiles[l.key];return c&&c.hasData()?c:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const c=Math.ceil(l.width/this._source.tileSize)+1,_=Math.ceil(l.height/this._source.tileSize)+1,w=Math.floor(c*_*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),P=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(P)}handleWrapJump(l){const c=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,c){const _={};for(const w in this._tiles){const P=this._tiles[w];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+c),_[P.tileID.key]=P}this._tiles=_;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}_updateCoveredAndRetainedTiles(l,c,_,w,P,z){const Y={},ee={},ae=Object.keys(l),xe=O.now();for(const ke of ae){const Ke=l[ke],$e=this._tiles[ke];if(!$e||$e.fadeEndTime!==0&&$e.fadeEndTime<=xe)continue;const Xe=this.findLoadedParent(Ke,c),pt=this.findLoadedSibling(Ke),ut=Xe||pt||null;ut&&(this._addTile(ut.tileID),Y[ut.tileID.key]=ut.tileID),ee[ke]=Ke}this._retainLoadedChildren(ee,w,_,l);for(const ke in Y)l[ke]||(this._coveredTiles[ke]=!0,l[ke]=Y[ke]);if(z){const ke={},Ke={};for(const $e of P)this._tiles[$e.key].hasData()?ke[$e.key]=$e:Ke[$e.key]=$e;for(const $e in Ke){const Xe=Ke[$e].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(ke[Xe[0].key]=l[Xe[0].key]=Xe[0],ke[Xe[1].key]=l[Xe[1].key]=Xe[1],ke[Xe[2].key]=l[Xe[2].key]=Xe[2],ke[Xe[3].key]=l[Xe[3].key]=Xe[3],delete Ke[$e])}for(const $e in Ke){const Xe=Ke[$e],pt=this.findLoadedParent(Xe,this._source.minzoom),ut=this.findLoadedSibling(Xe),mt=pt||ut||null;if(mt){ke[mt.tileID.key]=l[mt.tileID.key]=mt.tileID;for(const vt in ke)ke[vt].isChildOf(mt.tileID)&&delete ke[vt]}}for(const $e in this._tiles)ke[$e]||(this._coveredTiles[$e]=!0)}}update(l,c){if(!this._sourceLoaded||this._paused)return;let _;this.transform=l,this.terrain=c,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(xe=>new o.S(xe.canonical.z,xe.wrap,xe.canonical.z,xe.canonical.x,xe.canonical.y)):(_=Oe(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(_=_.filter(xe=>this._source.hasTile(xe)))):_=[];const w=tr(l,this._source),P=Math.max(w-se.maxOverzooming,this._source.minzoom),z=Math.max(w+se.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const xe={};for(const ke of _)if(ke.canonical.z>this._source.minzoom){const Ke=ke.scaledTo(ke.canonical.z-1);xe[Ke.key]=Ke;const $e=ke.scaledTo(Math.max(this._source.minzoom,Math.min(ke.canonical.z,5)));xe[$e.key]=$e}_=_.concat(Object.values(xe))}const Y=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,Y&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const ee=this._updateRetainedTiles(_,w);p(this._source.type)&&this._updateCoveredAndRetainedTiles(ee,P,z,w,_,c);for(const xe in ee)this._tiles[xe].clearFadeHold();const ae=o.ac(this._tiles,ee);for(const xe of ae){const ke=this._tiles[xe];ke.hasSymbolBuckets&&!ke.holdingForFade()?ke.setHoldDuration(this.map._fadeDuration):ke.hasSymbolBuckets&&!ke.symbolFadeFinished()||this._removeTile(xe)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,c){var _;const w={},P={},z=Math.max(c-se.maxOverzooming,this._source.minzoom),Y=Math.max(c+se.maxUnderzooming,this._source.minzoom),ee={};for(const ae of l){const xe=this._addTile(ae);w[ae.key]=ae,xe.hasData()||c<this._source.maxzoom&&(ee[ae.key]=ae)}this._retainLoadedChildren(ee,c,Y,w);for(const ae of l){let xe=this._tiles[ae.key];if(xe.hasData())continue;if(c+1>this._source.maxzoom){const Ke=ae.children(this._source.maxzoom)[0],$e=this.getTile(Ke);if($e&&$e.hasData()){w[Ke.key]=Ke;continue}}else{const Ke=ae.children(this._source.maxzoom);if(w[Ke[0].key]&&w[Ke[1].key]&&w[Ke[2].key]&&w[Ke[3].key])continue}let ke=xe.wasRequested();for(let Ke=ae.overscaledZ-1;Ke>=z;--Ke){const $e=ae.scaledTo(Ke);if(P[$e.key])break;if(P[$e.key]=!0,xe=this.getTile($e),!xe&&ke&&(xe=this._addTile($e)),xe){const Xe=xe.hasData();if((Xe||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||ke)&&(w[$e.key]=$e),ke=xe.wasRequested(),Xe)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const c=[];let _,w=this._tiles[l].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){_=this._loadedParentTiles[w.key];break}c.push(w.key);const P=w.scaledTo(w.overscaledZ-1);if(_=this._getLoadedTile(P),_)break;w=P}for(const P of c)this._loadedParentTiles[P]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const c=this._tiles[l].tileID,_=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=_}}_addTile(l){let c=this._tiles[l.key];if(c)return c;c=this._cache.getAndRemove(l),c&&(this._setTileReloadTimer(l.key,c),c.tileID=l,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,c)));const _=c;return c||(c=new fe(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(c,l.key,c.state)),c.uses++,this._tiles[l.key]=c,_||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(l,c){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const _=c.getExpiryTimeout();_&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},_))}_removeTile(l){const c=this._tiles[l];c&&(c.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(l){const c=l.sourceDataType;l.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&c==="content"&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,c,_){const w=[],P=this.transform;if(!P)return w;const z=_?P.getCameraQueryGeometry(l):l,Y=l.map(Xe=>P.screenPointToMercatorCoordinate(Xe,this.terrain)),ee=z.map(Xe=>P.screenPointToMercatorCoordinate(Xe,this.terrain)),ae=this.getIds();let xe=1/0,ke=1/0,Ke=-1/0,$e=-1/0;for(const Xe of ee)xe=Math.min(xe,Xe.x),ke=Math.min(ke,Xe.y),Ke=Math.max(Ke,Xe.x),$e=Math.max($e,Xe.y);for(let Xe=0;Xe<ae.length;Xe++){const pt=this._tiles[ae[Xe]];if(pt.holdingForFade())continue;const ut=pt.tileID,mt=Math.pow(2,P.zoom-pt.tileID.overscaledZ),vt=c*pt.queryPadding*o.X/pt.tileSize/mt,Bt=[ut.getTilePoint(new o.Y(xe,ke)),ut.getTilePoint(new o.Y(Ke,$e))];if(Bt[0].x-vt<o.X&&Bt[0].y-vt<o.X&&Bt[1].x+vt>=0&&Bt[1].y+vt>=0){const kt=Y.map(zt=>ut.getTilePoint(zt)),Rt=ee.map(zt=>ut.getTilePoint(zt));w.push({tile:pt,tileID:ut,queryGeometry:kt,cameraQueryGeometry:Rt,scale:mt})}}return w}getVisibleCoordinates(l){const c=this.getRenderableIds(l).map(_=>this._tiles[_].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(p(this._source.type)){const l=O.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=l)return!0}return!1}setFeatureState(l,c,_){this._state.updateState(l=l||"_geojsonTileLayer",c,_)}removeFeatureState(l,c,_){this._state.removeFeatureState(l=l||"_geojsonTileLayer",c,_)}getFeatureState(l,c){return this._state.getState(l=l||"_geojsonTileLayer",c)}setDependencies(l,c,_){const w=this._tiles[l];w&&w.setDependencies(c,_)}reloadTilesForDependencies(l,c){for(const _ in this._tiles)this._tiles[_].hasDependency(l,c)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(l,c))}}function ve(I,l){const c=Math.abs(2*I.wrap)-+(I.wrap<0),_=Math.abs(2*l.wrap)-+(l.wrap<0);return I.overscaledZ-l.overscaledZ||_-c||l.canonical.y-I.canonical.y||l.canonical.x-I.canonical.x}function p(I){return I==="raster"||I==="image"||I==="video"}se.maxOverzooming=10,se.maxUnderzooming=3;class Ne{constructor(l,c){this.reset(l,c)}reset(l,c){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.ab(l,0,1);let c=1,_=this._distances[c];const w=l*this.paddedLength+this.padding;for(;_<w&&c<this._distances.length;)_=this._distances[++c];const P=c-1,z=this._distances[P],Y=_-z,ee=Y>0?(w-z)/Y:0;return this.points[P].mult(1-ee).add(this.points[c].mult(ee))}}function Ye(I,l){let c=!0;return I==="always"||I!=="never"&&l!=="never"||(c=!1),c}class rt{constructor(l,c,_){const w=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(c/_);for(let z=0;z<this.xCellCount*this.yCellCount;z++)w.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=c,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,c,_,w,P){this._forEachCell(c,_,w,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(c),this.bboxes.push(_),this.bboxes.push(w),this.bboxes.push(P)}insertCircle(l,c,_,w){this._forEachCell(c-w,_-w,c+w,_+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(c),this.circles.push(_),this.circles.push(w)}_insertBoxCell(l,c,_,w,P,z){this.boxCells[P].push(z)}_insertCircleCell(l,c,_,w,P,z){this.circleCells[P].push(z)}_query(l,c,_,w,P,z,Y){if(_<0||l>this.width||w<0||c>this.height)return[];const ee=[];if(l<=0&&c<=0&&this.width<=_&&this.height<=w){if(P)return[{key:null,x1:l,y1:c,x2:_,y2:w}];for(let ae=0;ae<this.boxKeys.length;ae++)ee.push({key:this.boxKeys[ae],x1:this.bboxes[4*ae],y1:this.bboxes[4*ae+1],x2:this.bboxes[4*ae+2],y2:this.bboxes[4*ae+3]});for(let ae=0;ae<this.circleKeys.length;ae++){const xe=this.circles[3*ae],ke=this.circles[3*ae+1],Ke=this.circles[3*ae+2];ee.push({key:this.circleKeys[ae],x1:xe-Ke,y1:ke-Ke,x2:xe+Ke,y2:ke+Ke})}}else this._forEachCell(l,c,_,w,this._queryCell,ee,{hitTest:P,overlapMode:z,seenUids:{box:{},circle:{}}},Y);return ee}query(l,c,_,w){return this._query(l,c,_,w,!1,null)}hitTest(l,c,_,w,P,z){return this._query(l,c,_,w,!0,P,z).length>0}hitTestCircle(l,c,_,w,P){const z=l-_,Y=l+_,ee=c-_,ae=c+_;if(Y<0||z>this.width||ae<0||ee>this.height)return!1;const xe=[];return this._forEachCell(z,ee,Y,ae,this._queryCellCircle,xe,{hitTest:!0,overlapMode:w,circle:{x:l,y:c,radius:_},seenUids:{box:{},circle:{}}},P),xe.length>0}_queryCell(l,c,_,w,P,z,Y,ee){const{seenUids:ae,hitTest:xe,overlapMode:ke}=Y,Ke=this.boxCells[P];if(Ke!==null){const Xe=this.bboxes;for(const pt of Ke)if(!ae.box[pt]){ae.box[pt]=!0;const ut=4*pt,mt=this.boxKeys[pt];if(l<=Xe[ut+2]&&c<=Xe[ut+3]&&_>=Xe[ut+0]&&w>=Xe[ut+1]&&(!ee||ee(mt))&&(!xe||!Ye(ke,mt.overlapMode))&&(z.push({key:mt,x1:Xe[ut],y1:Xe[ut+1],x2:Xe[ut+2],y2:Xe[ut+3]}),xe))return!0}}const $e=this.circleCells[P];if($e!==null){const Xe=this.circles;for(const pt of $e)if(!ae.circle[pt]){ae.circle[pt]=!0;const ut=3*pt,mt=this.circleKeys[pt];if(this._circleAndRectCollide(Xe[ut],Xe[ut+1],Xe[ut+2],l,c,_,w)&&(!ee||ee(mt))&&(!xe||!Ye(ke,mt.overlapMode))){const vt=Xe[ut],Bt=Xe[ut+1],kt=Xe[ut+2];if(z.push({key:mt,x1:vt-kt,y1:Bt-kt,x2:vt+kt,y2:Bt+kt}),xe)return!0}}}return!1}_queryCellCircle(l,c,_,w,P,z,Y,ee){const{circle:ae,seenUids:xe,overlapMode:ke}=Y,Ke=this.boxCells[P];if(Ke!==null){const Xe=this.bboxes;for(const pt of Ke)if(!xe.box[pt]){xe.box[pt]=!0;const ut=4*pt,mt=this.boxKeys[pt];if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Xe[ut+0],Xe[ut+1],Xe[ut+2],Xe[ut+3])&&(!ee||ee(mt))&&!Ye(ke,mt.overlapMode))return z.push(!0),!0}}const $e=this.circleCells[P];if($e!==null){const Xe=this.circles;for(const pt of $e)if(!xe.circle[pt]){xe.circle[pt]=!0;const ut=3*pt,mt=this.circleKeys[pt];if(this._circlesCollide(Xe[ut],Xe[ut+1],Xe[ut+2],ae.x,ae.y,ae.radius)&&(!ee||ee(mt))&&!Ye(ke,mt.overlapMode))return z.push(!0),!0}}}_forEachCell(l,c,_,w,P,z,Y,ee){const ae=this._convertToXCellCoord(l),xe=this._convertToYCellCoord(c),ke=this._convertToXCellCoord(_),Ke=this._convertToYCellCoord(w);for(let $e=ae;$e<=ke;$e++)for(let Xe=xe;Xe<=Ke;Xe++)if(P.call(this,l,c,_,w,this.xCellCount*Xe+$e,z,Y,ee))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,c,_,w,P,z){const Y=w-l,ee=P-c,ae=_+z;return ae*ae>Y*Y+ee*ee}_circleAndRectCollide(l,c,_,w,P,z,Y){const ee=(z-w)/2,ae=Math.abs(l-(w+ee));if(ae>ee+_)return!1;const xe=(Y-P)/2,ke=Math.abs(c-(P+xe));if(ke>xe+_)return!1;if(ae<=ee||ke<=xe)return!0;const Ke=ae-ee,$e=ke-xe;return Ke*Ke+$e*$e<=_*_}}function ct(I,l,c){const _=o.H();if(!I){const{vecSouth:ke,vecEast:Ke}=qt(l),$e=y();$e[0]=Ke[0],$e[1]=Ke[1],$e[2]=ke[0],$e[3]=ke[1],w=$e,(xe=(z=(P=$e)[0])*(ae=P[3])-(ee=P[2])*(Y=P[1]))&&(w[0]=ae*(xe=1/xe),w[1]=-Y*xe,w[2]=-ee*xe,w[3]=z*xe),_[0]=$e[0],_[1]=$e[1],_[4]=$e[2],_[5]=$e[3]}var w,P,z,Y,ee,ae,xe;return o.K(_,_,[1/c,1/c,1]),_}function dt(I,l,c,_){if(I){const w=o.H();if(!l){const{vecSouth:P,vecEast:z}=qt(c);w[0]=z[0],w[1]=z[1],w[4]=P[0],w[5]=P[1]}return o.K(w,w,[_,_,1]),w}return c.pixelsToClipSpaceMatrix}function qt(I){const l=Math.cos(I.rollInRadians),c=Math.sin(I.rollInRadians),_=Math.cos(I.pitchInRadians),w=Math.cos(I.bearingInRadians),P=Math.sin(I.bearingInRadians),z=o.ad();z[0]=-w*_*c-P*l,z[1]=-P*_*c+w*l;const Y=o.ae(z);Y<1e-9?o.af(z):o.ag(z,z,1/Y);const ee=o.ad();ee[0]=w*_*l-P*c,ee[1]=P*_*l+w*c;const ae=o.ae(ee);return ae<1e-9?o.af(ee):o.ag(ee,ee,1/ae),{vecEast:ee,vecSouth:z}}function Gt(I,l,c,_){let w;_?(w=[I,l,_(I,l),1],o.al(w,w,c)):(w=[I,l,0,1],Ci(w,w,c));const P=w[3];return{point:new o.P(w[0]/P,w[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}function jt(I,l){return .5+I/l*.5}function xt(I,l){return I.x>=-l[0]&&I.x<=l[0]&&I.y>=-l[1]&&I.y<=l[1]}function Tn(I,l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke){const $e=c?I.textSizeData:I.iconSizeData,Xe=o.ah($e,l.transform.zoom),pt=[256/l.width*2+1,256/l.height*2+1],ut=c?I.text.dynamicLayoutVertexArray:I.icon.dynamicLayoutVertexArray;ut.clear();const mt=I.lineVertexArray,vt=c?I.text.placedSymbolArray:I.icon.placedSymbolArray,Bt=l.transform.width/l.transform.height;let kt=!1;for(let Rt=0;Rt<vt.length;Rt++){const zt=vt.get(Rt);if(zt.hidden||zt.writingMode===o.ai.vertical&&!kt){Yi(zt.numGlyphs,ut);continue}kt=!1;const Tt=new o.P(zt.anchorX,zt.anchorY),nn={getElevation:Ke,pitchedLabelPlaneMatrix:_,lineVertexArray:mt,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:Tt,unwrappedTileID:ee,width:ae,height:xe,translation:ke},Zt=Ur(zt.anchorX,zt.anchorY,nn);if(!xt(Zt.point,pt)){Yi(zt.numGlyphs,ut);continue}const Mn=jt(l.transform.cameraToCenterDistance,Zt.signedDistanceFromCamera),Bn=o.aj($e,Xe,zt),yn=P?Bn*l.transform.getPitchedTextCorrection(zt.anchorX,zt.anchorY,ee)/Mn:Bn*Mn,In=Er({projectionContext:nn,pitchedLabelPlaneMatrixInverse:w,symbol:zt,fontSize:yn,flip:!1,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Bt,rotateToLine:Y});kt=In.useVertical,(In.notEnoughRoom||kt||In.needsFlipping&&Er({projectionContext:nn,pitchedLabelPlaneMatrixInverse:w,symbol:zt,fontSize:yn,flip:!0,keepUpright:z,glyphOffsetArray:I.glyphOffsetArray,dynamicLayoutVertexArray:ut,aspectRatio:Bt,rotateToLine:Y}).notEnoughRoom)&&Yi(zt.numGlyphs,ut)}c?I.text.dynamicLayoutVertexBuffer.updateData(ut):I.icon.dynamicLayoutVertexBuffer.updateData(ut)}function On(I,l,c,_,w,P,z,Y){const ee=P.glyphStartIndex+P.numGlyphs,ae=P.lineStartIndex,xe=P.lineStartIndex+P.lineLength,ke=l.getoffsetX(P.glyphStartIndex),Ke=l.getoffsetX(ee-1),$e=go(I*ke,c,_,w,P.segment,ae,xe,Y,z);if(!$e)return null;const Xe=go(I*Ke,c,_,w,P.segment,ae,xe,Y,z);return Xe?Y.projectionCache.anyProjectionOccluded?null:{first:$e,last:Xe}:null}function gr(I,l,c,_){return I===o.ai.horizontal&&Math.abs(c.y-l.y)>Math.abs(c.x-l.x)*_?{useVertical:!0}:(I===o.ai.vertical?l.y<c.y:l.x>c.x)?{needsFlipping:!0}:null}function Er(I){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:c,symbol:_,fontSize:w,flip:P,keepUpright:z,glyphOffsetArray:Y,dynamicLayoutVertexArray:ee,aspectRatio:ae,rotateToLine:xe}=I,ke=w/24,Ke=_.lineOffsetX*ke,$e=_.lineOffsetY*ke;let Xe;if(_.numGlyphs>1){const pt=_.glyphStartIndex+_.numGlyphs,ut=_.lineStartIndex,mt=_.lineStartIndex+_.lineLength,vt=On(ke,Y,Ke,$e,P,_,xe,l);if(!vt)return{notEnoughRoom:!0};const Bt=Xr(vt.first.point.x,vt.first.point.y,l,c),kt=Xr(vt.last.point.x,vt.last.point.y,l,c);if(z&&!P){const Rt=gr(_.writingMode,Bt,kt,ae);if(Rt)return Rt}Xe=[vt.first];for(let Rt=_.glyphStartIndex+1;Rt<pt-1;Rt++)Xe.push(go(ke*Y.getoffsetX(Rt),Ke,$e,P,_.segment,ut,mt,l,xe));Xe.push(vt.last)}else{if(z&&!P){const ut=er(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,mt=_.lineStartIndex+_.segment+1,vt=new o.P(l.lineVertexArray.getx(mt),l.lineVertexArray.gety(mt)),Bt=er(vt.x,vt.y,l),kt=Bt.signedDistanceFromCamera>0?Bt.point:on(l.tileAnchorPoint,vt,ut,1,l),Rt=Xr(ut.x,ut.y,l,c),zt=Xr(kt.x,kt.y,l,c),Tt=gr(_.writingMode,Rt,zt,ae);if(Tt)return Tt}const pt=go(ke*Y.getoffsetX(_.glyphStartIndex),Ke,$e,P,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,l,xe);if(!pt||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Xe=[pt]}for(const pt of Xe)o.ak(ee,pt.point,pt.angle);return{}}function on(I,l,c,_,w){const P=I.add(I.sub(l)._unit()),z=er(P.x,P.y,w).point,Y=c.sub(z);return c.add(Y._mult(_/Y.mag()))}function Rn(I,l,c){const _=l.projectionCache;if(_.projections[I])return _.projections[I];const w=new o.P(l.lineVertexArray.getx(I),l.lineVertexArray.gety(I)),P=er(w.x,w.y,l);if(P.signedDistanceFromCamera>0)return _.projections[I]=P.point,_.anyProjectionOccluded=_.anyProjectionOccluded||P.isOccluded,P.point;const z=I-c.direction;return on(c.distanceFromAnchor===0?l.tileAnchorPoint:new o.P(l.lineVertexArray.getx(z),l.lineVertexArray.gety(z)),w,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,l)}function er(I,l,c){const _=I+c.translation[0],w=l+c.translation[1];let P;return c.pitchWithMap?(P=Gt(_,w,c.pitchedLabelPlaneMatrix,c.getElevation),P.isOccluded=!1):(P=c.transform.projectTileCoordinates(_,w,c.unwrappedTileID,c.getElevation),P.point.x=(.5*P.point.x+.5)*c.width,P.point.y=(.5*-P.point.y+.5)*c.height),P}function Xr(I,l,c,_){if(c.pitchWithMap){const w=[I,l,0,1];return o.al(w,w,_),c.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],c.unwrappedTileID,c.getElevation).point}return{x:I/c.width*2-1,y:l/c.height*2-1}}function Ur(I,l,c){return c.transform.projectTileCoordinates(I,l,c.unwrappedTileID,c.getElevation)}function Dr(I,l,c){return I._unit()._perp()._mult(l*c)}function ur(I,l,c,_,w,P,z,Y,ee){if(Y.projectionCache.offsets[I])return Y.projectionCache.offsets[I];const ae=c.add(l);if(I+ee.direction<_||I+ee.direction>=w)return Y.projectionCache.offsets[I]=ae,ae;const xe=Rn(I+ee.direction,Y,ee),ke=Dr(xe.sub(c),z,ee.direction),Ke=c.add(ke),$e=xe.add(ke);return Y.projectionCache.offsets[I]=o.am(P,ae,Ke,$e)||ae,Y.projectionCache.offsets[I]}function go(I,l,c,_,w,P,z,Y,ee){const ae=_?I-l:I+l;let xe=ae>0?1:-1,ke=0;_&&(xe*=-1,ke=Math.PI),xe<0&&(ke+=Math.PI);let Ke,$e=xe>0?P+w:P+w+1;Y.projectionCache.cachedAnchorPoint?Ke=Y.projectionCache.cachedAnchorPoint:(Ke=er(Y.tileAnchorPoint.x,Y.tileAnchorPoint.y,Y).point,Y.projectionCache.cachedAnchorPoint=Ke);let Xe,pt,ut=Ke,mt=Ke,vt=0,Bt=0;const kt=Math.abs(ae),Rt=[];let zt;for(;vt+Bt<=kt;){if($e+=xe,$e<P||$e>=z)return null;vt+=Bt,mt=ut,pt=Xe;const Zt={absOffsetX:kt,direction:xe,distanceFromAnchor:vt,previousVertex:mt};if(ut=Rn($e,Y,Zt),c===0)Rt.push(mt),zt=ut.sub(mt);else{let Mn;const Bn=ut.sub(mt);Mn=Bn.mag()===0?Dr(Rn($e+xe,Y,Zt).sub(ut),c,xe):Dr(Bn,c,xe),pt||(pt=mt.add(Mn)),Xe=ur($e,Mn,ut,P,z,pt,c,Y,Zt),Rt.push(pt),zt=Xe.sub(pt)}Bt=zt.mag()}const Tt=zt._mult((kt-vt)/Bt)._add(pt||mt),nn=ke+Math.atan2(ut.y-mt.y,ut.x-mt.x);return Rt.push(Tt),{point:Tt,angle:ee?nn:0,path:Rt}}const Sa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Yi(I,l){for(let c=0;c<I;c++){const _=l.length;l.resize(_+4),l.float32.set(Sa,3*_)}}function Ci(I,l,c){const _=l[0],w=l[1];return I[0]=c[0]*_+c[4]*w+c[12],I[1]=c[1]*_+c[5]*w+c[13],I[3]=c[3]*_+c[7]*w+c[15],I}const oo=100;class Ro{constructor(l,c=new rt(l.width+200,l.height+200,25),_=new rt(l.width+200,l.height+200,25)){this.transform=l,this.grid=c,this.ignoredGrid=_,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+oo,this.screenBottomBoundary=l.height+oo,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke){const $e=this.projectAndGetPerspectiveRatio(l.anchorPointX+ee[0],l.anchorPointY+ee[1],P,xe,Ke),Xe=_*$e.perspectiveRatio;let pt;if(z||Y)pt=this._projectCollisionBox(l,Xe,w,P,z,Y,ee,$e,xe,ke,Ke);else{const zt=$e.x+(ke?ke.x*Xe:0),Tt=$e.y+(ke?ke.y*Xe:0);pt={allPointsOccluded:!1,box:[zt+l.x1*Xe,Tt+l.y1*Xe,zt+l.x2*Xe,Tt+l.y2*Xe]}}const[ut,mt,vt,Bt]=pt.box,kt=z?pt.allPointsOccluded:$e.isOccluded;let Rt=kt;return Rt||(Rt=$e.perspectiveRatio<this.perspectiveRatioCutoff),Rt||(Rt=!this.isInsideGrid(ut,mt,vt,Bt)),Rt||c!=="always"&&this.grid.hitTest(ut,mt,vt,Bt,c,ae)?{box:[ut,mt,vt,Bt],placeable:!1,offscreen:!1,occluded:kt}:{box:[ut,mt,vt,Bt],placeable:!0,offscreen:this.isOffscreen(ut,mt,vt,Bt),occluded:kt}}placeCollisionCircles(l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke,$e,Xe){const pt=[],ut=new o.P(c.anchorX,c.anchorY),mt=this.getPerspectiveRatio(ut.x,ut.y,z,Xe),vt=(ae?P*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,z)/mt:P*mt)/o.as,Bt={getElevation:Xe,pitchedLabelPlaneMatrix:Y,lineVertexArray:_,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ut,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:$e},kt=On(vt,w,c.lineOffsetX*vt,c.lineOffsetY*vt,!1,c,!1,Bt);let Rt=!1,zt=!1,Tt=!0;if(kt){const nn=.5*ke*mt+Ke,Zt=new o.P(-100,-100),Mn=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Bn=new Ne,yn=kt.first,In=kt.last;let Nn=[];for(let Ti=yn.path.length-1;Ti>=1;Ti--)Nn.push(yn.path[Ti]);for(let Ti=1;Ti<In.path.length;Ti++)Nn.push(In.path[Ti]);const Fn=2.5*nn;if(ae){const Ti=this.projectPathToScreenSpace(Nn,Bt);Nn=Ti.some(Gi=>Gi.signedDistanceFromCamera<=0)?[]:Ti.map(Gi=>Gi.point)}let pr=[];if(Nn.length>0){const Ti=Nn[0].clone(),Gi=Nn[0].clone();for(let Uo=1;Uo<Nn.length;Uo++)Ti.x=Math.min(Ti.x,Nn[Uo].x),Ti.y=Math.min(Ti.y,Nn[Uo].y),Gi.x=Math.max(Gi.x,Nn[Uo].x),Gi.y=Math.max(Gi.y,Nn[Uo].y);pr=Ti.x>=Zt.x&&Gi.x<=Mn.x&&Ti.y>=Zt.y&&Gi.y<=Mn.y?[Nn]:Gi.x<Zt.x||Ti.x>Mn.x||Gi.y<Zt.y||Ti.y>Mn.y?[]:o.ao([Nn],Zt.x,Zt.y,Mn.x,Mn.y)}for(const Ti of pr){Bn.reset(Ti,.25*nn);let Gi=0;Gi=Bn.length<=.5*nn?1:Math.ceil(Bn.paddedLength/Fn)+1;for(let Uo=0;Uo<Gi;Uo++){const Si=Uo/Math.max(Gi-1,1),ps=Bn.lerp(Si),To=ps.x+oo,Po=ps.y+oo;pt.push(To,Po,nn,0);const Co=To-nn,il=Po-nn,Jo=To+nn,es=Po+nn;if(Tt=Tt&&this.isOffscreen(Co,il,Jo,es),zt=zt||this.isInsideGrid(Co,il,Jo,es),l!=="always"&&this.grid.hitTestCircle(To,Po,nn,l,xe)&&(Rt=!0,!ee))return{circles:[],offscreen:!1,collisionDetected:Rt}}}}return{circles:!ee&&Rt||!zt||mt<this.perspectiveRatioCutoff?[]:pt,offscreen:Tt,collisionDetected:Rt}}projectPathToScreenSpace(l,c){const _=function(w,P){const z=o.H();return o.an(z,P.pitchedLabelPlaneMatrix),w.map(Y=>{const ee=Gt(Y.x,Y.y,z,P.getElevation),ae=P.transform.projectTileCoordinates(ee.point.x,ee.point.y,P.unwrappedTileID,P.getElevation);return ae.point.x=(.5*ae.point.x+.5)*P.width,ae.point.y=(.5*-ae.point.y+.5)*P.height,ae})}(l,c);return function(w){let P=0,z=0,Y=0,ee=0;for(let ae=0;ae<w.length;ae++)w[ae].isOccluded?(Y=ae+1,ee=0):(ee++,ee>z&&(z=ee,P=Y));return w.slice(P,P+z)}(_)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let _=1/0,w=1/0,P=-1/0,z=-1/0;for(const xe of l){const ke=new o.P(xe.x+oo,xe.y+oo);_=Math.min(_,ke.x),w=Math.min(w,ke.y),P=Math.max(P,ke.x),z=Math.max(z,ke.y),c.push(ke)}const Y=this.grid.query(_,w,P,z).concat(this.ignoredGrid.query(_,w,P,z)),ee={},ae={};for(const xe of Y){const ke=xe.key;if(ee[ke.bucketInstanceId]===void 0&&(ee[ke.bucketInstanceId]={}),ee[ke.bucketInstanceId][ke.featureIndex])continue;const Ke=[new o.P(xe.x1,xe.y1),new o.P(xe.x2,xe.y1),new o.P(xe.x2,xe.y2),new o.P(xe.x1,xe.y2)];o.ap(c,Ke)&&(ee[ke.bucketInstanceId][ke.featureIndex]=!0,ae[ke.bucketInstanceId]===void 0&&(ae[ke.bucketInstanceId]=[]),ae[ke.bucketInstanceId].push(ke.featureIndex))}return ae}insertCollisionBox(l,c,_,w,P,z){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:P,collisionGroupID:z,overlapMode:c},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,c,_,w,P,z){const Y=_?this.ignoredGrid:this.grid,ee={bucketInstanceId:w,featureIndex:P,collisionGroupID:z,overlapMode:c};for(let ae=0;ae<l.length;ae+=4)Y.insertCircle(ee,l[ae],l[ae+1],l[ae+2])}projectAndGetPerspectiveRatio(l,c,_,w,P){if(P){let z;w?(z=[l,c,w(l,c),1],o.al(z,z,P)):(z=[l,c,0,1],Ci(z,z,P));const Y=z[3];return{x:(z[0]/Y+1)/2*this.transform.width+oo,y:(-z[1]/Y+1)/2*this.transform.height+oo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Y*.5,isOccluded:!1,signedDistanceFromCamera:Y}}{const z=this.transform.projectTileCoordinates(l,c,_,w);return{x:(z.point.x+1)/2*this.transform.width+oo,y:(1-z.point.y)/2*this.transform.height+oo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(l,c,_,w){const P=this.transform.projectTileCoordinates(l,c,_,w);return .5+this.transform.cameraToCenterDistance/P.signedDistanceFromCamera*.5}isOffscreen(l,c,_,w){return _<oo||l>=this.screenRightBoundary||w<oo||c>this.screenBottomBoundary}isInsideGrid(l,c,_,w){return _>=0&&l<this.gridRightBoundary&&w>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const l=o.aq([]);return o.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,c,_,w,P,z,Y,ee,ae,xe,ke){let Ke=1,$e=0,Xe=0,pt=1;const ut=l.anchorPointX+Y[0],mt=l.anchorPointY+Y[1];if(z&&!P){const Nn=this.projectAndGetPerspectiveRatio(ut+1,mt,w,ae,ke),Fn=Nn.x-ee.x,pr=Math.atan((Nn.y-ee.y)/Fn)+(Fn<0?Math.PI:0),Ti=Math.sin(pr),Gi=Math.cos(pr);Ke=Gi,$e=Ti,Xe=-Ti,pt=Gi}else if(!z&&P){const Nn=qt(this.transform);Ke=Nn.vecEast[0],$e=Nn.vecEast[1],Xe=Nn.vecSouth[0],pt=Nn.vecSouth[1]}let vt=ee.x,Bt=ee.y,kt=c;P&&(vt=ut,Bt=mt,kt=Math.pow(2,-(this.transform.zoom-_.overscaledZ)),kt*=this.transform.getPitchedTextCorrection(ut,mt,w),xe||(kt*=o.ab(.5+ee.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),xe&&(vt+=Ke*xe.x*kt+Xe*xe.y*kt,Bt+=$e*xe.x*kt+pt*xe.y*kt);const Rt=l.x1*kt,zt=l.x2*kt,Tt=(Rt+zt)/2,nn=l.y1*kt,Zt=l.y2*kt,Mn=(nn+Zt)/2,Bn=[{offsetX:Rt,offsetY:nn},{offsetX:Tt,offsetY:nn},{offsetX:zt,offsetY:nn},{offsetX:zt,offsetY:Mn},{offsetX:zt,offsetY:Zt},{offsetX:Tt,offsetY:Zt},{offsetX:Rt,offsetY:Zt},{offsetX:Rt,offsetY:Mn}];let yn=[];for(const{offsetX:Nn,offsetY:Fn}of Bn)yn.push(new o.P(vt+Ke*Nn+Xe*Fn,Bt+$e*Nn+pt*Fn));let In=!1;if(P){const Nn=yn.map(Fn=>this.projectAndGetPerspectiveRatio(Fn.x,Fn.y,w,ae,ke));In=Nn.some(Fn=>!Fn.isOccluded),yn=Nn.map(Fn=>new o.P(Fn.x,Fn.y))}else In=!0;return{box:o.ar(yn),allPointsOccluded:!In}}}class Pi{constructor(l,c,_,w){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?c:-c))):w&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Na{constructor(l,c,_,w,P){this.text=new Pi(l?l.text:null,c,_,P),this.icon=new Pi(l?l.icon:null,c,w,P)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ea{constructor(l,c,_){this.text=l,this.icon=c,this.skipFade=_}}class rs{constructor(l,c,_,w,P){this.bucketInstanceId=l,this.featureIndex=c,this.sourceLayerIndex=_,this.bucketIndex=w,this.tileID=P}}class aa{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const c=++this.maxGroupID;this.collisionGroups[l]={ID:c,predicate:_=>_.collisionGroupID===c}}return this.collisionGroups[l]}}function cl(I,l,c,_,w){const{horizontalAlign:P,verticalAlign:z}=o.ay(I);return new o.P(-(P-.5)*l+_[0]*w,-(z-.5)*c+_[1]*w)}class Ao{constructor(l,c,_,w,P){this.transform=l.clone(),this.terrain=c,this.collisionIndex=new Ro(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new aa(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const c=this.terrain;return c?(_,w)=>c.getElevation(l,_,w):null}getBucketParts(l,c,_,w){const P=_.getBucket(c),z=_.latestFeatureIndex;if(!P||!z||c.id!==P.layerIds[0])return;const Y=_.collisionBoxArray,ee=P.layers[0].layout,ae=P.layers[0].paint,xe=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),ke=_.tileSize/o.X,Ke=_.tileID.toUnwrapped(),$e=ee.get("text-rotation-alignment")==="map",Xe=o.at(_,1,this.transform.zoom),pt=o.au(this.collisionIndex.transform,_,ae.get("text-translate"),ae.get("text-translate-anchor")),ut=o.au(this.collisionIndex.transform,_,ae.get("icon-translate"),ae.get("icon-translate-anchor")),mt=ct($e,this.transform,Xe);this.retainedQueryData[P.bucketInstanceId]=new rs(P.bucketInstanceId,z,P.sourceLayerIndex,P.index,_.tileID);const vt={bucket:P,layout:ee,translationText:pt,translationIcon:ut,unwrappedTileID:Ke,pitchedLabelPlaneMatrix:mt,scale:xe,textPixelRatio:ke,holdingForFade:_.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:o.ah(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(w)for(const Bt of P.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:Rt,symbolInstanceEnd:zt}=Bt;l.push({sortKey:kt,symbolInstanceStart:Rt,symbolInstanceEnd:zt,parameters:vt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:vt})}attemptAnchorPlacement(l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke,$e,Xe,pt,ut,mt,vt,Bt,kt){const Rt=o.av[l.textAnchor],zt=[l.textOffset0,l.textOffset1],Tt=cl(Rt,_,w,zt,P),nn=this.collisionIndex.placeCollisionBox(c,Ke,ee,ae,xe,Y,z,ut,ke.predicate,Bt,Tt,kt);if((!vt||this.collisionIndex.placeCollisionBox(vt,Ke,ee,ae,xe,Y,z,mt,ke.predicate,Bt,Tt,kt).placeable)&&nn.placeable){let Zt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[$e.crossTileID]&&this.prevPlacement.placements[$e.crossTileID]&&this.prevPlacement.placements[$e.crossTileID].text&&(Zt=this.prevPlacement.variableOffsets[$e.crossTileID].anchor),$e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[$e.crossTileID]={textOffset:zt,width:_,height:w,anchor:Rt,textBoxScale:P,prevAnchor:Zt},this.markUsedJustification(Xe,Rt,$e,pt),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,pt,$e),this.placedOrientations[$e.crossTileID]=pt),{shift:Tt,placedGlyphBoxes:nn}}}placeLayerBucketPart(l,c,_){const{bucket:w,layout:P,translationText:z,translationIcon:Y,unwrappedTileID:ee,pitchedLabelPlaneMatrix:ae,textPixelRatio:xe,holdingForFade:ke,collisionBoxArray:Ke,partiallyEvaluatedTextSize:$e,collisionGroup:Xe}=l.parameters,pt=P.get("text-optional"),ut=P.get("icon-optional"),mt=o.aw(P,"text-overlap","text-allow-overlap"),vt=mt==="always",Bt=o.aw(P,"icon-overlap","icon-allow-overlap"),kt=Bt==="always",Rt=P.get("text-rotation-alignment")==="map",zt=P.get("text-pitch-alignment")==="map",Tt=P.get("icon-text-fit")!=="none",nn=P.get("symbol-z-order")==="viewport-y",Zt=vt&&(kt||!w.hasIconData()||ut),Mn=kt&&(vt||!w.hasTextData()||pt);!w.collisionArrays&&Ke&&w.deserializeCollisionBoxes(Ke);const Bn=this.retainedQueryData[w.bucketInstanceId].tileID,yn=this._getTerrainElevationFunc(Bn),In=this.transform.getFastPathSimpleProjectionMatrix(Bn),Nn=(Fn,pr,Ti)=>{var Gi,Uo;if(c[Fn.crossTileID])return;if(ke)return void(this.placements[Fn.crossTileID]=new Ea(!1,!1,!1));let Si=!1,ps=!1,To=!0,Po=null,Co={box:null,placeable:!1,offscreen:null,occluded:!1},il={box:null,placeable:!1,offscreen:null},Jo=null,es=null,ol=null,CA=0,uu=0,Pa=0;pr.textFeatureIndex?CA=pr.textFeatureIndex:Fn.useRuntimeCollisionCircles&&(CA=Fn.featureIndex),pr.verticalTextFeatureIndex&&(uu=pr.verticalTextFeatureIndex);const El=pr.textBox;if(El){const ca=ss=>{let as=o.ai.horizontal;if(w.allowVerticalPlacement&&!ss&&this.prevPlacement){const Ou=this.prevPlacement.placedOrientations[Fn.crossTileID];Ou&&(this.placedOrientations[Fn.crossTileID]=Ou,as=Ou,this.markUsedOrientation(w,as,Fn))}return as},Bl=(ss,as)=>{if(w.allowVerticalPlacement&&Fn.numVerticalGlyphVertices>0&&pr.verticalTextBox){for(const Ou of w.writingModes)if(Ou===o.ai.vertical?(Co=as(),il=Co):Co=ss(),Co&&Co.placeable)break}else Co=ss()},Ka=Fn.textAnchorOffsetStartIndex,Au=Fn.textAnchorOffsetEndIndex;if(Au===Ka){const ss=(as,Ou)=>{const Vs=this.collisionIndex.placeCollisionBox(as,mt,xe,Bn,ee,zt,Rt,z,Xe.predicate,yn,void 0,In);return Vs&&Vs.placeable&&(this.markUsedOrientation(w,Ou,Fn),this.placedOrientations[Fn.crossTileID]=Ou),Vs};Bl(()=>ss(El,o.ai.horizontal),()=>{const as=pr.verticalTextBox;return w.allowVerticalPlacement&&Fn.numVerticalGlyphVertices>0&&as?ss(as,o.ai.vertical):{box:null,offscreen:null}}),ca(Co&&Co.placeable)}else{let ss=o.av[(Uo=(Gi=this.prevPlacement)===null||Gi===void 0?void 0:Gi.variableOffsets[Fn.crossTileID])===null||Uo===void 0?void 0:Uo.anchor];const as=(Vs,nh,vf)=>{const rh=Vs.x2-Vs.x1,Dp=Vs.y2-Vs.y1,gc=Fn.textBoxScale,yc=Tt&&Bt==="never"?nh:null;let Ca=null,Xu=mt==="never"?1:2,od="never";ss&&Xu++;for(let tp=0;tp<Xu;tp++){for(let sd=Ka;sd<Au;sd++){const bA=w.textAnchorOffsets.get(sd);if(ss&&bA.textAnchor!==ss)continue;const ml=this.attemptAnchorPlacement(bA,Vs,rh,Dp,gc,Rt,zt,xe,Bn,ee,Xe,od,Fn,w,vf,z,Y,yc,yn);if(ml&&(Ca=ml.placedGlyphBoxes,Ca&&Ca.placeable))return Si=!0,Po=ml.shift,Ca}ss?ss=null:od=mt}return _&&!Ca&&(Ca={box:this.collisionIndex.placeCollisionBox(El,"always",xe,Bn,ee,zt,Rt,z,Xe.predicate,yn,void 0,In).box,offscreen:!1,placeable:!1,occluded:!1}),Ca};Bl(()=>as(El,pr.iconBox,o.ai.horizontal),()=>{const Vs=pr.verticalTextBox;return w.allowVerticalPlacement&&(!Co||!Co.placeable)&&Fn.numVerticalGlyphVertices>0&&Vs?as(Vs,pr.verticalIconBox,o.ai.vertical):{box:null,occluded:!0,offscreen:null}}),Co&&(Si=Co.placeable,To=Co.offscreen);const Ou=ca(Co&&Co.placeable);if(!Si&&this.prevPlacement){const Vs=this.prevPlacement.variableOffsets[Fn.crossTileID];Vs&&(this.variableOffsets[Fn.crossTileID]=Vs,this.markUsedJustification(w,Vs.anchor,Fn,Ou))}}}if(Jo=Co,Si=Jo&&Jo.placeable,To=Jo&&Jo.offscreen,Fn.useRuntimeCollisionCircles){const ca=w.text.placedSymbolArray.get(Fn.centerJustifiedTextSymbolIndex),Bl=o.aj(w.textSizeData,$e,ca),Ka=P.get("text-padding");es=this.collisionIndex.placeCollisionCircles(mt,ca,w.lineVertexArray,w.glyphOffsetArray,Bl,ee,ae,_,zt,Xe.predicate,Fn.collisionCircleDiameter,Ka,z,yn),es.circles.length&&es.collisionDetected&&!_&&o.w("Collisions detected, but collision boxes are not shown"),Si=vt||es.circles.length>0&&!es.collisionDetected,To=To&&es.offscreen}if(pr.iconFeatureIndex&&(Pa=pr.iconFeatureIndex),pr.iconBox){const ca=Bl=>this.collisionIndex.placeCollisionBox(Bl,Bt,xe,Bn,ee,zt,Rt,Y,Xe.predicate,yn,Tt&&Po?Po:void 0,In);il&&il.placeable&&pr.verticalIconBox?(ol=ca(pr.verticalIconBox),ps=ol.placeable):(ol=ca(pr.iconBox),ps=ol.placeable),To=To&&ol.offscreen}const GA=pt||Fn.numHorizontalGlyphVertices===0&&Fn.numVerticalGlyphVertices===0,_A=ut||Fn.numIconVertices===0;GA||_A?_A?GA||(ps=ps&&Si):Si=ps&&Si:ps=Si=ps&&Si;const QA=ps&&ol.placeable;if(Si&&Jo.placeable&&this.collisionIndex.insertCollisionBox(Jo.box,mt,P.get("text-ignore-placement"),w.bucketInstanceId,il&&il.placeable&&uu?uu:CA,Xe.ID),QA&&this.collisionIndex.insertCollisionBox(ol.box,Bt,P.get("icon-ignore-placement"),w.bucketInstanceId,Pa,Xe.ID),es&&Si&&this.collisionIndex.insertCollisionCircles(es.circles,mt,P.get("text-ignore-placement"),w.bucketInstanceId,CA,Xe.ID),_&&this.storeCollisionData(w.bucketInstanceId,Ti,pr,Jo,ol,es),Fn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Fn.crossTileID]=new Ea((Si||Zt)&&!(Jo!=null&&Jo.occluded),(ps||Mn)&&!(ol!=null&&ol.occluded),To||w.justReloaded),c[Fn.crossTileID]=!0};if(nn){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Fn=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let pr=Fn.length-1;pr>=0;--pr){const Ti=Fn[pr];Nn(w.symbolInstances.get(Ti),w.collisionArrays[Ti],Ti)}}else for(let Fn=l.symbolInstanceStart;Fn<l.symbolInstanceEnd;Fn++)Nn(w.symbolInstances.get(Fn),w.collisionArrays[Fn],Fn);w.justReloaded=!1}storeCollisionData(l,c,_,w,P,z){if(_.textBox||_.iconBox){let Y,ee;this.collisionBoxArrays.has(l)?Y=this.collisionBoxArrays.get(l):(Y=new Map,this.collisionBoxArrays.set(l,Y)),Y.has(c)?ee=Y.get(c):(ee={text:null,icon:null},Y.set(c,ee)),_.textBox&&(ee.text=w.box),_.iconBox&&(ee.icon=P.box)}if(z){let Y=this.collisionCircleArrays[l];Y===void 0&&(Y=this.collisionCircleArrays[l]=[]);for(let ee=0;ee<z.circles.length;ee+=4)Y.push(z.circles[ee+0]-oo),Y.push(z.circles[ee+1]-oo),Y.push(z.circles[ee+2]),Y.push(z.collisionDetected?1:0)}}markUsedJustification(l,c,_,w){let P;P=w===o.ai.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.ax(c)];const z=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const Y of z)Y>=0&&(l.text.placedSymbolArray.get(Y).crossTileID=P>=0&&Y!==P?0:_.crossTileID)}markUsedOrientation(l,c,_){const w=c===o.ai.horizontal||c===o.ai.horizontalOnly?c:0,P=c===o.ai.vertical?c:0,z=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const Y of z)l.text.placedSymbolArray.get(Y).placedOrientation=w;_.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=P)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let _=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const w=c?c.symbolFadeChange(l):1,P=c?c.opacities:{},z=c?c.variableOffsets:{},Y=c?c.placedOrientations:{};for(const ee in this.placements){const ae=this.placements[ee],xe=P[ee];xe?(this.opacities[ee]=new Na(xe,w,ae.text,ae.icon),_=_||ae.text!==xe.text.placed||ae.icon!==xe.icon.placed):(this.opacities[ee]=new Na(null,w,ae.text,ae.icon,ae.skipFade),_=_||ae.text||ae.icon)}for(const ee in P){const ae=P[ee];if(!this.opacities[ee]){const xe=new Na(ae,w,!1,!1);xe.isHidden()||(this.opacities[ee]=xe,_=_||ae.text.placed||ae.icon.placed)}}for(const ee in z)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=z[ee]);for(const ee in Y)this.placedOrientations[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.placedOrientations[ee]=Y[ee]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:l)}updateLayerOpacities(l,c){const _={};for(const w of c){const P=w.getBucket(l);P&&w.latestFeatureIndex&&l.id===P.layerIds[0]&&this.updateBucketOpacities(P,w.tileID,_,w.collisionBoxArray)}}updateBucketOpacities(l,c,_,w){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const P=l.layers[0],z=P.layout,Y=new Na(null,0,!1,!1,!0),ee=z.get("text-allow-overlap"),ae=z.get("icon-allow-overlap"),xe=P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=z.get("text-rotation-alignment")==="map",Ke=z.get("text-pitch-alignment")==="map",$e=z.get("icon-text-fit")!=="none",Xe=new Na(null,0,ee&&(ae||!l.hasIconData()||z.get("icon-optional")),ae&&(ee||!l.hasTextData()||z.get("text-optional")),!0);!l.collisionArrays&&w&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(w);const pt=(mt,vt,Bt)=>{for(let kt=0;kt<vt/4;kt++)mt.opacityVertexArray.emplaceBack(Bt);mt.hasVisibleVertices=mt.hasVisibleVertices||Bt!==vn},ut=this.collisionBoxArrays.get(l.bucketInstanceId);for(let mt=0;mt<l.symbolInstances.length;mt++){const vt=l.symbolInstances.get(mt),{numHorizontalGlyphVertices:Bt,numVerticalGlyphVertices:kt,crossTileID:Rt}=vt;let zt=this.opacities[Rt];_[Rt]?zt=Y:zt||(zt=Xe,this.opacities[Rt]=zt),_[Rt]=!0;const Tt=vt.numIconVertices>0,nn=this.placedOrientations[vt.crossTileID],Zt=nn===o.ai.vertical,Mn=nn===o.ai.horizontal||nn===o.ai.horizontalOnly;if(Bt>0||kt>0){const yn=wt(zt.text);pt(l.text,Bt,Zt?vn:yn),pt(l.text,kt,Mn?vn:yn);const In=zt.text.isHidden();[vt.rightJustifiedTextSymbolIndex,vt.centerJustifiedTextSymbolIndex,vt.leftJustifiedTextSymbolIndex].forEach(pr=>{pr>=0&&(l.text.placedSymbolArray.get(pr).hidden=In||Zt?1:0)}),vt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(vt.verticalPlacedTextSymbolIndex).hidden=In||Mn?1:0);const Nn=this.variableOffsets[vt.crossTileID];Nn&&this.markUsedJustification(l,Nn.anchor,vt,nn);const Fn=this.placedOrientations[vt.crossTileID];Fn&&(this.markUsedJustification(l,"left",vt,Fn),this.markUsedOrientation(l,Fn,vt))}if(Tt){const yn=wt(zt.icon),In=!($e&&vt.verticalPlacedIconSymbolIndex&&Zt);vt.placedIconSymbolIndex>=0&&(pt(l.icon,vt.numIconVertices,In?yn:vn),l.icon.placedSymbolArray.get(vt.placedIconSymbolIndex).hidden=zt.icon.isHidden()),vt.verticalPlacedIconSymbolIndex>=0&&(pt(l.icon,vt.numVerticalIconVertices,In?vn:yn),l.icon.placedSymbolArray.get(vt.verticalPlacedIconSymbolIndex).hidden=zt.icon.isHidden())}const Bn=ut&&ut.has(mt)?ut.get(mt):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const yn=l.collisionArrays[mt];if(yn){let In=new o.P(0,0);if(yn.textBox||yn.verticalTextBox){let Nn=!0;if(xe){const Fn=this.variableOffsets[Rt];Fn?(In=cl(Fn.anchor,Fn.width,Fn.height,Fn.textOffset,Fn.textBoxScale),ke&&In._rotate(Ke?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Nn=!1}if(yn.textBox||yn.verticalTextBox){let Fn;yn.textBox&&(Fn=Zt),yn.verticalTextBox&&(Fn=Mn),Uu(l.textCollisionBox.collisionVertexArray,zt.text.placed,!Nn||Fn,Bn.text,In.x,In.y)}}if(yn.iconBox||yn.verticalIconBox){const Nn=!!(!Mn&&yn.verticalIconBox);let Fn;yn.iconBox&&(Fn=Nn),yn.verticalIconBox&&(Fn=!Nn),Uu(l.iconCollisionBox.collisionVertexArray,zt.icon.placed,Fn,Bn.icon,$e?In.x:0,$e?In.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,c){const _=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function Uu(I,l,c,_,w,P){_&&_.length!==0||(_=[0,0,0,0]);const z=_[0]-oo,Y=_[1]-oo,ee=_[2]-oo,ae=_[3]-oo;I.emplaceBack(l?1:0,c?1:0,w||0,P||0,z,Y),I.emplaceBack(l?1:0,c?1:0,w||0,P||0,ee,Y),I.emplaceBack(l?1:0,c?1:0,w||0,P||0,ee,ae),I.emplaceBack(l?1:0,c?1:0,w||0,P||0,z,ae)}const Zl=Math.pow(2,25),so=Math.pow(2,24),Tr=Math.pow(2,17),tl=Math.pow(2,16),Os=Math.pow(2,9),ea=Math.pow(2,8),qe=Math.pow(2,1);function wt(I){if(I.opacity===0&&!I.placed)return 0;if(I.opacity===1&&I.placed)return 4294967295;const l=I.placed?1:0,c=Math.floor(127*I.opacity);return c*Zl+l*so+c*Tr+l*tl+c*Os+l*ea+c*qe+l}const vn=0;class Yn{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,c,_,w,P){const z=this._bucketParts;for(;this._currentTileIndex<l.length;)if(c.getBucketParts(z,w,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((Y,ee)=>Y.sortKey-ee.sortKey));this._currentPartIndex<z.length;)if(c.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,P())return!0;return!1}}class hn{constructor(l,c,_,w,P,z,Y,ee){this.placement=new Ao(l,c,z,Y,ee),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(l,c,_){const w=O.now(),P=()=>!this._forceFullPlacement&&O.now()-w>2;for(;this._currentPlacementIndex>=0;){const z=c[l[this._currentPlacementIndex]],Y=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=Y)&&(!z.maxzoom||z.maxzoom>Y)){if(this._inProgressLayer||(this._inProgressLayer=new Yn(z)),this._inProgressLayer.continuePlacement(_[z.source],this.placement,this._showCollisionBoxes,z,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const or=512/o.X/2;class Ki{constructor(l,c,_){this.tileID=l,this.bucketInstanceId=_,this._symbolsByKey={};const w=new Map;for(let P=0;P<c.length;P++){const z=c.get(P),Y=z.key,ee=w.get(Y);ee?ee.push(z):w.set(Y,[z])}for(const[P,z]of w){const Y={positions:z.map(ee=>({x:Math.floor(ee.anchorX*or),y:Math.floor(ee.anchorY*or)})),crossTileIDs:z.map(ee=>ee.crossTileID)};if(Y.positions.length>128){const ee=new o.az(Y.positions.length,16,Uint16Array);for(const{x:ae,y:xe}of Y.positions)ee.add(ae,xe);ee.finish(),delete Y.positions,Y.index=ee}this._symbolsByKey[P]=Y}}getScaledCoordinates(l,c){const{x:_,y:w,z:P}=this.tileID.canonical,{x:z,y:Y,z:ee}=c.canonical,ae=or/Math.pow(2,ee-P),xe=(Y*o.X+l.anchorY)*ae,ke=w*o.X*or;return{x:Math.floor((z*o.X+l.anchorX)*ae-_*o.X*or),y:Math.floor(xe-ke)}}findMatches(l,c,_){const w=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let P=0;P<l.length;P++){const z=l.get(P);if(z.crossTileID)continue;const Y=this._symbolsByKey[z.key];if(!Y)continue;const ee=this.getScaledCoordinates(z,c);if(Y.index){const ae=Y.index.range(ee.x-w,ee.y-w,ee.x+w,ee.y+w).sort();for(const xe of ae){const ke=Y.crossTileIDs[xe];if(!_[ke]){_[ke]=!0,z.crossTileID=ke;break}}}else if(Y.positions)for(let ae=0;ae<Y.positions.length;ae++){const xe=Y.positions[ae],ke=Y.crossTileIDs[ae];if(Math.abs(xe.x-ee.x)<=w&&Math.abs(xe.y-ee.y)<=w&&!_[ke]){_[ke]=!0,z.crossTileID=ke;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class yo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _s{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const c=Math.round((l-this.lng)/360);if(c!==0)for(const _ in this.indexes){const w=this.indexes[_],P={};for(const z in w){const Y=w[z];Y.tileID=Y.tileID.unwrapTo(Y.tileID.wrap+c),P[Y.tileID.key]=Y}this.indexes[_]=P}this.lng=l}addBucket(l,c,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let P=0;P<c.symbolInstances.length;P++)c.symbolInstances.get(P).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const w=this.usedCrossTileIDs[l.overscaledZ];for(const P in this.indexes){const z=this.indexes[P];if(Number(P)>l.overscaledZ)for(const Y in z){const ee=z[Y];ee.tileID.isChildOf(l)&&ee.findMatches(c.symbolInstances,l,w)}else{const Y=z[l.scaledTo(Number(P)).key];Y&&Y.findMatches(c.symbolInstances,l,w)}}for(let P=0;P<c.symbolInstances.length;P++){const z=c.symbolInstances.get(P);z.crossTileID||(z.crossTileID=_.generate(),w[z.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ki(l,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(l,c){for(const _ of c.getCrossTileIDsLists())for(const w of _)delete this.usedCrossTileIDs[l][w]}removeStaleBuckets(l){let c=!1;for(const _ in this.indexes){const w=this.indexes[_];for(const P in w)l[w[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,w[P]),delete w[P],c=!0)}return c}}class Fs{constructor(){this.layerIndexes={},this.crossTileIDs=new yo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,c,_){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new _s);let P=!1;const z={};w.handleWrapJump(_);for(const Y of c){const ee=Y.getBucket(l);ee&&l.id===ee.layerIds[0]&&(ee.bucketInstanceId||(ee.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(Y.tileID,ee,this.crossTileIDs)&&(P=!0),z[ee.bucketInstanceId]=!0)}return w.removeStaleBuckets(z)&&(P=!0),P}pruneUnusedLayers(l){const c={};l.forEach(_=>{c[_]=!0});for(const _ in this.layerIndexes)c[_]||delete this.layerIndexes[_]}}var OA="void main() {fragColor=vec4(1.0);}";const ei={prelude:Mi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Mi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Mi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Mi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Mi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Mi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Mi(OA,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Mi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Mi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Mi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Mi(OA,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Mi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Mi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Mi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Mi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Mi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Mi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Mi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Mi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Mi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Mi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Mi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Mi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Mi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Mi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Mi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Mi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Mi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Mi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Mi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Mi(I,l){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=l.match(/in ([\w]+) ([\w]+)/g),w=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=P?P.concat(w):w,Y={};return{fragmentSource:I=I.replace(c,(ee,ae,xe,ke,Ke)=>(Y[Ke]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
in ${xe} ${ke} ${Ke};
#else
uniform ${xe} ${ke} u_${Ke};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ke}
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`)),vertexSource:l=l.replace(c,(ee,ae,xe,ke,Ke)=>{const $e=ke==="float"?"vec2":"vec4",Xe=Ke.match(/color/)?"color":$e;return Y[Ke]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
uniform lowp float u_${Ke}_t;
in ${xe} ${$e} a_${Ke};
out ${xe} ${ke} ${Ke};
#else
uniform ${xe} ${ke} u_${Ke};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Ke} = a_${Ke};
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ke}
    ${Ke} = unpack_mix_${Xe}(a_${Ke}, u_${Ke}_t);
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`:ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ke}
uniform lowp float u_${Ke}_t;
in ${xe} ${$e} a_${Ke};
#else
uniform ${xe} ${ke} u_${Ke};
#endif
`:Xe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ke}
    ${xe} ${ke} ${Ke} = a_${Ke};
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ke}
    ${xe} ${ke} ${Ke} = unpack_mix_${Xe}(a_${Ke}, u_${Ke}_t);
#else
    ${xe} ${ke} ${Ke} = u_${Ke};
#endif
`}),staticAttributes:_,staticUniforms:z}}class nl{constructor(l,c,_){this.vertexBuffer=l,this.indexBuffer=c,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ai=o.aA([{name:"a_pos",type:"Int16",components:2}]);const la="#define PROJECTION_MERCATOR",rc="mercator";class Ba{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return rc}get shaderDefine(){return la}get shaderPreludeCode(){return ei.projectionMercator}get vertexShaderPreludeCode(){return ei.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aB.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,c,_,w,P){if(this._cachedMesh)return this._cachedMesh;const z=new o.aC;z.emplaceBack(0,0),z.emplaceBack(o.X,0),z.emplaceBack(0,o.X),z.emplaceBack(o.X,o.X);const Y=l.createVertexBuffer(z,Ai.members),ee=o.aD.simpleSegment(0,0,4,2),ae=new o.aE;ae.emplaceBack(1,0,2),ae.emplaceBack(1,2,3);const xe=l.createIndexBuffer(ae);return this._cachedMesh=new nl(Y,xe,ee),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}function Rr(I,l){const c=o.ab(l.lat,-85.051129,o.aF);return new o.P(o.O(l.lng)*I,o.Q(c)*I)}function $i(I,l){return new o.Y(l.x/I,l.y/I).toLngLat()}function vo(I){return I.cameraToCenterDistance*Math.min(.85*Math.tan(o.aa(90-I.pitch)),Math.tan(o.aa(89.25-I.pitch)))}function yu(I,l){const c=I.canonical,_=l/o.aG(c.z),w=c.x+Math.pow(2,c.z)*I.wrap,P=o.aq(new Float64Array(16));return o.J(P,P,[w*_,c.y*_,0]),o.K(P,P,[_/o.X,_/o.X,1]),P}function Mo(I,l,c,_,w){const P=o.Y.fromLngLat(I,l),z=w*o.aH(1,I.lat),Y=z*Math.cos(o.aa(c)),ee=Math.sqrt(z*z-Y*Y),ae=ee*Math.sin(o.aa(-_)),xe=ee*Math.cos(o.aa(-_));return new o.Y(P.x+ae,P.y+xe,P.z+Y)}class Gs{constructor(l=0,c=0,_=0,w=0){if(isNaN(l)||l<0||isNaN(c)||c<0||isNaN(_)||_<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=c,this.left=_,this.right=w}interpolate(l,c,_){return c.top!=null&&l.top!=null&&(this.top=o.y.number(l.top,c.top,_)),c.bottom!=null&&l.bottom!=null&&(this.bottom=o.y.number(l.bottom,c.bottom,_)),c.left!=null&&l.left!=null&&(this.left=o.y.number(l.left,c.left,_)),c.right!=null&&l.right!=null&&(this.right=o.y.number(l.right,c.right,_)),this}getCenter(l,c){const _=o.ab((this.left+l-this.right)/2,0,l),w=o.ab((this.top+c-this.bottom)/2,0,c);return new o.P(_,w)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Gs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Qs(I,l){if(!I.renderWorldCopies||I.lngRange)return;const c=l.lng-I.center.lng;l.lng+=c>180?-360:c<-180?360:0}function zu(I){return Math.max(0,Math.floor(I))}class bl{constructor(l,c,_,w,P,z){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=z===void 0||!!z,this._minZoom=c||0,this._maxZoom=_||22,this._minPitch=w??0,this._maxPitch=P??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.N(0,0),this._elevation=0,this._zoom=0,this._tileZoom=zu(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Gs,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,c,_){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=zu(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new Gs(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!_&&l.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const c=o.aI(l,-180,180)*Math.PI/180;var _,w,P,z,Y,ee,ae,xe,ke;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=y(),_=this._rotationMatrix,P=-this._bearingInRadians,z=(w=this._rotationMatrix)[0],Y=w[1],ee=w[2],ae=w[3],xe=Math.sin(P),ke=Math.cos(P),_[0]=z*ke+ee*xe,_[1]=Y*ke+ae*xe,_[2]=z*-xe+ee*ke,_[3]=Y*-xe+ae*ke)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const c=o.ab(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const c=l/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aJ(this._fovInRadians)}setFov(l){l=o.ab(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=o.aa(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const c=this.getConstrained(this._center,l).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aG(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,c){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,c,_){this._unmodified=!1,this._edgeInsets.interpolate(l,c,_),this._constrain(),this._calcMatrices()}resize(l,c,_=!0){this._width=l,this._height=c,_&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ut([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.aF])}getConstrained(l,c){return this._callbacks.getConstrained(l,c)}getCameraQueryGeometry(l,c){if(c.length===1)return[c[0],l];{let _=l.x,w=l.y,P=l.x,z=l.y;for(const Y of c)_=Math.min(_,Y.x),w=Math.min(w,Y.y),P=Math.max(P,Y.x),z=Math.max(z,Y.y);return[new o.P(_,w),new o.P(P,w),new o.P(P,z),new o.P(_,z),new o.P(_,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:c,zoom:_}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(_),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=o.aq(new Float64Array(16));o.K(l,l,[this._width/2,-this._height/2,1]),o.J(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=o.aq(new Float64Array(16)),o.K(l,l,[1,-1,1]),o.J(l,l,[-1,-1,0]),o.K(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,c,_,w){const P=_!==void 0?_:this.bearing,z=w=w!==void 0?w:this.pitch,Y=o.Y.fromLngLat(l,c),ee=-Math.cos(o.aa(z)),ae=Math.sin(o.aa(z)),xe=ae*Math.sin(o.aa(P)),ke=-ae*Math.cos(o.aa(P));let Ke=this.elevation;const $e=c-Ke;let Xe;ee*$e>=0||Math.abs(ee)<.1?(Xe=1e4,Ke=c+Xe*ee):Xe=-$e/ee;let pt,ut,mt=o.aK(1,Y.y),vt=0;do{if(vt+=1,vt>10)break;ut=Xe/mt,pt=new o.Y(Y.x+xe*ut,Y.y+ke*ut),mt=1/pt.meterInMercatorCoordinateUnits()}while(Math.abs(Xe-ut*mt)>1e-12);return{center:pt.toLngLat(),elevation:Ke,zoom:o.a8(this.height/2/Math.tan(this.fovInRadians/2)/ut/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const c=o.aH(1,this.center.lat)*this.worldSize,_=this.cameraToCenterDistance/c,w=o.Y.fromLngLat(this.center,this.elevation),P=Mo(this.center,this.elevation,this.pitch,this.bearing,_);this._elevation=l;const z=this.calculateCenterFromCameraLngLatAlt(P.toLngLat(),o.aK(P.z,w.y),this.bearing,this.pitch);this._elevation=z.elevation,this._center=z.center,this.setZoom(z.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return Mo(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const c=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/c,l.canonical.y/c,1/c/o.X,1/c/o.X]}}class co{constructor(l,c){this.min=l,this.max=c,this.center=o.aL([],o.aM([],this.min,this.max),.5)}quadrant(l){const c=[l%2==0,l<2],_=o.aN(this.min),w=o.aN(this.max);for(let P=0;P<c.length;P++)_[P]=c[P]?this.min[P]:this.center[P],w[P]=c[P]?this.center[P]:this.max[P];return w[2]=this.max[2],new co(_,w)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let c=!0;for(let _=0;_<l.planes.length;_++){const w=this.intersectsPlane(l.planes[_]);if(w===0)return 0;w===1&&(c=!1)}return c?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let c=l[3],_=l[3];for(let w=0;w<3;w++)l[w]>0?(c+=l[w]*this.min[w],_+=l[w]*this.max[w]):(_+=l[w]*this.min[w],c+=l[w]*this.max[w]);return c>=0?2:_<0?0:1}}class Oo{distanceToTile2d(l,c,_,w){const P=w.distanceX([l,c]),z=w.distanceY([l,c]);return Math.hypot(P,z)}getWrap(l,c,_){return _}getTileAABB(l,c,_,w){var P,z;let Y=_,ee=_;if(w.terrain){const xe=new o.S(l.z,c,l.z,l.x,l.y),ke=w.terrain.getMinMaxElevation(xe);Y=(P=ke.minElevation)!==null&&P!==void 0?P:_,ee=(z=ke.maxElevation)!==null&&z!==void 0?z:_}const ae=1<<l.z;return new co([c+l.x/ae,l.y/ae,Y],[c+(l.x+1)/ae,(l.y+1)/ae,ee])}allowVariableZoom(l,c){const _=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,w=o.ab(78.5-_/2,0,60);return!!c.terrain||l.pitch>w||l.padding.top>=.1}allowWorldCopies(){return!0}recalculateCache(){}}class Zo{constructor(l,c,_){this.points=l,this.planes=c,this.aabb=_}static fromInvProjectionMatrix(l,c=1,_=0){const w=Math.pow(2,_),P=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ae=>{const xe=1/(ae=o.al([],ae,l))[3]/c*w;return o.aO(ae,ae,[xe,xe,1/ae[3],xe])}),z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ae=>{const xe=o.aP([],P[ae[0]],P[ae[1]]),ke=o.aP([],P[ae[2]],P[ae[1]]),Ke=o.aQ([],o.aR([],xe,ke)),$e=-o.aS(Ke,P[ae[1]]);return Ke.concat($e)}),Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ee=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ae of P)for(let xe=0;xe<3;xe++)Y[xe]=Math.min(Y[xe],ae[xe]),ee[xe]=Math.max(ee[xe],ae[xe]);return new Zo(P,z,new co(Y,ee))}}class Oa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,_=!0){this._helper.resize(l,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,c){}constructor(l,c,_,w,P){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new bl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(z,Y)=>this.getConstrained(z,Y)},l,c,_,w,P),this._coveringTilesDetailsProvider=new Oo}clone(){const l=new Oa;return l.apply(this),l}apply(l,c,_){this._helper.apply(l,c,_)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const c=[new o.aT(0,l)];if(this._helper._renderWorldCopies){const _=this.screenPointToMercatorCoordinate(new o.P(0,0)),w=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),P=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),Y=Math.floor(Math.min(_.x,w.x,P.x,z.x)),ee=Math.floor(Math.max(_.x,w.x,P.x,z.x)),ae=1;for(let xe=Y-ae;xe<=ee+ae;xe++)xe!==0&&c.push(new o.aT(xe,l))}return c}getCameraFrustum(){return Zo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const c=this.screenPointToLocation(this.centerPoint,l),_=l?l.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(_)}setLocationAtPoint(l,c){const _=o.aH(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(c,_),P=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,_),z=o.Y.fromLngLat(l),Y=new o.Y(z.x-(w.x-P.x),z.y-(w.y-P.y));this.setCenter(Y==null?void 0:Y.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,c){return c?this.coordinatePoint(o.Y.fromLngLat(l),c.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.Y.fromLngLat(l))}screenPointToLocation(l,c){var _;return(_=this.screenPointToMercatorCoordinate(l,c))===null||_===void 0?void 0:_.toLngLat()}screenPointToMercatorCoordinate(l,c){if(c){const _=c.pointCoordinate(l);if(_!=null)return _}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,c){const _=c||0,w=[l.x,l.y,0,1],P=[l.x,l.y,1,1];o.al(w,w,this._pixelMatrixInverse),o.al(P,P,this._pixelMatrixInverse);const z=w[3],Y=P[3],ee=w[1]/z,ae=P[1]/Y,xe=w[2]/z,ke=P[2]/Y,Ke=xe===ke?0:(_-xe)/(ke-xe);return new o.Y(o.y.number(w[0]/z,P[0]/Y,Ke)/this.worldSize,o.y.number(ee,ae,Ke)/this.worldSize,_)}coordinatePoint(l,c=0,_=this._pixelMatrix){const w=[l.x*this.worldSize,l.y*this.worldSize,c,1];return o.al(w,w,_),new o.P(w[0]/w[3],w[1]/w[3])}getBounds(){const l=Math.max(0,this._helper._height/2-vo(this));return new Ut().extend(this.screenPointToLocation(new o.P(0,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(l,c){return c?c.pointCoordinate(l)!=null:l.y>this.height/2-vo(this)}calculatePosMatrix(l,c=!1,_){var w;const P=(w=l.key)!==null&&w!==void 0?w:o.aU(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),z=c?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(P)){const ae=z.get(P);return _?ae.f32:ae.f64}const Y=yu(l,this.worldSize);o.L(Y,c?this._alignedProjMatrix:this._viewProjMatrix,Y);const ee={f64:Y,f32:new Float32Array(Y)};return z.set(P,ee),_?ee.f32:ee.f64}calculateFogMatrix(l){const c=l.key,_=this._fogMatrixCacheF32;if(_.has(c))return _.get(c);const w=yu(l,this.worldSize);return o.L(w,this._fogMatrix,w),_.set(c,new Float32Array(w)),_.get(c)}getConstrained(l,c){c=o.ab(+c,this.minZoom,this.maxZoom);const _={center:new o.N(l.lng,l.lat),zoom:c};let w=this._helper._lngRange;this._helper._renderWorldCopies||w!==null||(w=[-179.9999999999,180-1e-10]);const P=this.tileSize*o.aG(_.zoom);let z=0,Y=P,ee=0,ae=P,xe=0,ke=0;const{x:Ke,y:$e}=this.size;if(this._helper._latRange){const Bt=this._helper._latRange;z=o.Q(Bt[1])*P,Y=o.Q(Bt[0])*P,Y-z<$e&&(xe=$e/(Y-z))}w&&(ee=o.aI(o.O(w[0])*P,0,P),ae=o.aI(o.O(w[1])*P,0,P),ae<ee&&(ae+=P),ae-ee<Ke&&(ke=Ke/(ae-ee)));const{x:Xe,y:pt}=Rr(P,l);let ut,mt;const vt=Math.max(ke||0,xe||0);if(vt){const Bt=new o.P(ke?(ae+ee)/2:Xe,xe?(Y+z)/2:pt);return _.center=$i(P,Bt).wrap(),_.zoom+=o.a8(vt),_}if(this._helper._latRange){const Bt=$e/2;pt-Bt<z&&(mt=z+Bt),pt+Bt>Y&&(mt=Y-Bt)}if(w){const Bt=(ee+ae)/2;let kt=Xe;this._helper._renderWorldCopies&&(kt=o.aI(Xe,Bt-P/2,Bt+P/2));const Rt=Ke/2;kt-Rt<ee&&(ut=ee+Rt),kt+Rt>ae&&(ut=ae-Rt)}if(ut!==void 0||mt!==void 0){const Bt=new o.P(ut??Xe,mt??pt);_.center=$i(P,Bt).wrap()}return _}calculateCenterFromCameraLngLatAlt(l,c,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,w)}_calculateNearFarZIfNeeded(l,c,_){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),P=l-w*this._helper._pixelPerMeter/Math.cos(c),z=w<0?P:l,Y=Math.PI/2+this.pitchInRadians,ee=o.aa(this.fov)*(Math.abs(Math.cos(o.aa(this.roll)))*this.height+Math.abs(Math.sin(o.aa(this.roll)))*this.width)/this.height*(.5+_.y/this.height),ae=Math.sin(ee)*z/Math.sin(o.ab(Math.PI-Y-ee,.01,Math.PI-.01)),xe=vo(this),ke=Math.atan(xe/this._helper.cameraToCenterDistance),Ke=o.aa(.75),$e=ke>Ke?2*ke*(.5+_.y/(2*xe)):Ke,Xe=Math.sin($e)*z/Math.sin(o.ab(Math.PI-Y-$e,.01,Math.PI-.01)),pt=Math.min(ae,Xe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*pt+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,c=Rr(this.worldSize,this.center),_=c.x,w=c.y;this._helper._pixelPerMeter=o.aH(1,this.center.lat)*this.worldSize;const P=o.aa(Math.min(this.pitch,89.25)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(P));let Y;this._calculateNearFarZIfNeeded(z,P,l),Y=new Float64Array(16),o.aV(Y,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,Y),Y[8]=2*-l.x/this._helper._width,Y[9]=2*l.y/this._helper._height,this._projectionMatrix=o.aW(Y),o.K(Y,Y,[1,-1,1]),o.J(Y,Y,[0,0,-this._helper.cameraToCenterDistance]),o.aX(Y,Y,-this.rollInRadians),o.aY(Y,Y,this.pitchInRadians),o.aX(Y,Y,-this.bearingInRadians),o.J(Y,Y,[-_,-w,0]),this._mercatorMatrix=o.K([],Y,[this.worldSize,this.worldSize,this.worldSize]),o.K(Y,Y,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y),o.J(Y,Y,[0,0,-this.elevation]),this._viewProjMatrix=Y,this._invViewProjMatrix=o.an([],Y);const ee=[0,0,-1,1];o.al(ee,ee,this._invViewProjMatrix),this._cameraPosition=[ee[0]/ee[3],ee[1]/ee[3],ee[2]/ee[3]],this._fogMatrix=new Float64Array(16),o.aV(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,o.K(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.aX(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.aY(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.aX(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.J(this._fogMatrix,this._fogMatrix,[-_,-w,0]),o.K(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y);const ae=this._helper._width%2/2,xe=this._helper._height%2/2,ke=Math.cos(this.bearingInRadians),Ke=Math.sin(-this.bearingInRadians),$e=_-Math.round(_)+ke*ae+Ke*xe,Xe=w-Math.round(w)+ke*xe+Ke*ae,pt=new Float64Array(Y);if(o.J(pt,pt,[$e>.5?$e-1:$e,Xe>.5?Xe-1:Xe,0]),this._alignedProjMatrix=pt,Y=o.an(new Float64Array(16),this._pixelMatrix),!Y)throw new Error("failed to invert matrix");this._pixelMatrixInverse=Y,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.al(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return Mo(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,c){const _=o.Y.fromLngLat(l),w=[_.x*this.worldSize,_.y*this.worldSize,c,1];return o.al(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(l){const{overscaledTileID:c,aligned:_,applyTerrainMatrix:w}=l,P=this._helper.getMercatorTileCoordinates(c),z=c?this.calculatePosMatrix(c,_,!0):null;let Y;return Y=c&&c.terrainRttPosMatrix32f&&w?c.terrainRttPosMatrix32f:z||o.aZ(),{mainMatrix:Y,tileMercatorCoords:P,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:Y}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,c,_){return 1}transformLightDirection(l){return o.aN(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,c,_,w){const P=this.calculatePosMatrix(_);let z;w?(z=[l,c,w(l,c),1],o.al(z,z,P)):(z=[l,c,0,1],Ci(z,z,P));const Y=z[3];return{point:new o.P(z[0]/Y,z[1]/Y),signedDistanceFromCamera:Y,isOccluded:!1}}populateCache(l){for(const c of l)this.calculatePosMatrix(c)}getMatrixForModel(l,c){const _=o.Y.fromLngLat(l,c),w=_.meterInMercatorCoordinateUnits(),P=o.a_();return o.J(P,P,[_.x,_.y,_.z]),o.aX(P,P,Math.PI),o.aY(P,P,Math.PI/2),o.K(P,P,[-w,w,w]),P}getProjectionDataForCustomLayer(l=!0){const c=new o.S(0,0,0,0,0),_=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:l}),w=yu(c,this.worldSize);o.L(w,this._viewProjMatrix,w),_.tileMercatorCoords=[0,0,1,1];const P=[o.X,o.X,this.worldSize/this._helper.pixelsPerMeter],z=o.a$();return o.K(z,w,P),_.fallbackMatrix=z,_.mainMatrix=z,_}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function Ss(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ia(I){if(I.useSlerp)if(I.k<1){const l=o.b0(I.startEulerAngles.roll,I.startEulerAngles.pitch,I.startEulerAngles.bearing),c=o.b0(I.endEulerAngles.roll,I.endEulerAngles.pitch,I.endEulerAngles.bearing),_=new Float64Array(4);o.b1(_,l,c,I.k);const w=o.b2(_);I.tr.setRoll(w.roll),I.tr.setPitch(w.pitch),I.tr.setBearing(w.bearing)}else I.tr.setRoll(I.endEulerAngles.roll),I.tr.setPitch(I.endEulerAngles.pitch),I.tr.setBearing(I.endEulerAngles.bearing);else I.tr.setRoll(o.y.number(I.startEulerAngles.roll,I.endEulerAngles.roll,I.k)),I.tr.setPitch(o.y.number(I.startEulerAngles.pitch,I.endEulerAngles.pitch,I.k)),I.tr.setBearing(o.y.number(I.startEulerAngles.bearing,I.endEulerAngles.bearing,I.k))}function ta(I,l,c,_,w){const P=w.padding,z=Rr(w.worldSize,c.getNorthWest()),Y=Rr(w.worldSize,c.getNorthEast()),ee=Rr(w.worldSize,c.getSouthEast()),ae=Rr(w.worldSize,c.getSouthWest()),xe=o.aa(-_),ke=z.rotate(xe),Ke=Y.rotate(xe),$e=ee.rotate(xe),Xe=ae.rotate(xe),pt=new o.P(Math.max(ke.x,Ke.x,Xe.x,$e.x),Math.max(ke.y,Ke.y,Xe.y,$e.y)),ut=new o.P(Math.min(ke.x,Ke.x,Xe.x,$e.x),Math.min(ke.y,Ke.y,Xe.y,$e.y)),mt=pt.sub(ut),vt=(w.width-(P.left+P.right+l.left+l.right))/mt.x,Bt=(w.height-(P.top+P.bottom+l.top+l.bottom))/mt.y;if(Bt<0||vt<0)return void Ss();const kt=Math.min(o.a8(w.scale*Math.min(vt,Bt)),I.maxZoom),Rt=o.P.convert(I.offset),zt=new o.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(o.aa(_)),Tt=Rt.add(zt).mult(w.scale/o.aG(kt));return{center:$i(w.worldSize,z.add(ee).div(2).sub(Tt)),zoom:kt,bearing:_}}class IA{get useGlobeControls(){return!1}handlePanInertia(l,c){return{easingOffset:l,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(l,c){l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta),l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta)}handleMapControlsPan(l,c,_){l.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(_,l.around)}cameraForBoxAndBearing(l,c,_,w,P){return ta(l,c,_,w,P)}handleJumpToCenterZoom(l,c){l.zoom!==(c.zoom!==void 0?+c.zoom:l.zoom)&&l.setZoom(+c.zoom),c.center!==void 0&&l.setCenter(o.N.convert(c.center))}handleEaseTo(l,c){const _=l.zoom,w=l.padding,P={roll:l.roll,pitch:l.pitch,bearing:l.bearing},z={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},Y=c.zoom!==void 0,ee=!l.isPaddingEqual(c.padding);let ae=!1;const xe=Y?+c.zoom:l.zoom;let ke=l.centerPoint.add(c.offsetAsPoint);const Ke=l.screenPointToLocation(ke),{center:$e,zoom:Xe}=l.getConstrained(o.N.convert(c.center||Ke),xe??_);Qs(l,$e);const pt=Rr(l.worldSize,Ke),ut=Rr(l.worldSize,$e).sub(pt),mt=o.aG(Xe-_);return ae=Xe!==_,{easeFunc:vt=>{if(ae&&l.setZoom(o.y.number(_,Xe,vt)),o.b3(P,z)||Ia({startEulerAngles:P,endEulerAngles:z,tr:l,k:vt,useSlerp:P.roll!=z.roll}),ee&&(l.interpolatePadding(w,c.padding,vt),ke=l.centerPoint.add(c.offsetAsPoint)),c.around)l.setLocationAtPoint(c.around,c.aroundPoint);else{const Bt=o.aG(l.zoom-_),kt=Xe>_?Math.min(2,mt):Math.max(.5,mt),Rt=Math.pow(kt,1-vt),zt=$i(l.worldSize,pt.add(ut.mult(vt*Rt)).mult(Bt));l.setLocationAtPoint(l.renderWorldCopies?zt.wrap():zt,ke)}},isZooming:ae,elevationCenter:$e}}handleFlyTo(l,c){const _=c.zoom!==void 0,w=l.zoom,P=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),_?+c.zoom:w),z=P.center,Y=P.zoom;Qs(l,z);const ee=Rr(l.worldSize,c.locationAtOffset),ae=Rr(l.worldSize,z).sub(ee),xe=ae.mag(),ke=o.aG(Y-w);let Ke;if(c.minZoom!==void 0){const $e=Math.min(+c.minZoom,w,Y),Xe=l.getConstrained(z,$e).zoom;Ke=o.aG(Xe-w)}return{easeFunc:($e,Xe,pt,ut)=>{l.setZoom($e===1?Y:w+o.a8(Xe));const mt=$e===1?z:$i(l.worldSize,ee.add(ae.mult(pt)).mult(Xe));l.setLocationAtPoint(l.renderWorldCopies?mt.wrap():mt,ut)},scaleOfZoom:ke,targetCenter:z,scaleOfMinZoom:Ke,pixelPathLength:xe}}}class ho{constructor(l,c,_){this.blendFunction=l,this.blendColor=c,this.mask=_}}ho.Replace=[1,0],ho.disabled=new ho(ho.Replace,o.b4.transparent,[!1,!1,!1,!1]),ho.unblended=new ho(ho.Replace,o.b4.transparent,[!0,!0,!0,!0]),ho.alphaBlended=new ho([1,771],o.b4.transparent,[!0,!0,!0,!0]);const Xl=2305;class zi{constructor(l,c,_){this.enable=l,this.mode=c,this.frontFace=_}}zi.disabled=new zi(!1,1029,Xl),zi.backCCW=new zi(!0,1029,Xl),zi.frontCCW=new zi(!0,1028,Xl);class Yr{constructor(l,c,_){this.func=l,this.mask=c,this.range=_}}Yr.ReadOnly=!1,Yr.ReadWrite=!0,Yr.disabled=new Yr(519,Yr.ReadOnly,[0,1]);const Jl=7680;class Vi{constructor(l,c,_,w,P,z){this.test=l,this.ref=c,this.mask=_,this.fail=w,this.depthFail=P,this.pass=z}}Vi.disabled=new Vi({func:519,mask:0},0,0,Jl,Jl,Jl);const ao=new WeakMap;function Di(I){var l;if(ao.has(I))return ao.get(I);{const c=(l=I.getParameter(I.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return ao.set(I,c),c}}class J{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const c=l.context,_=c.gl;this._texFormat=_.RGBA,this._texType=_.UNSIGNED_BYTE;const w=new o.aC;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const P=new o.aE;P.emplaceBack(0,1,2),this._fullscreenTriangle=new nl(c.createVertexBuffer(w,Ai.members),c.createIndexBuffer(P),o.aD.simpleSegment(0,0,w.length,P.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(_.TEXTURE1);const z=_.createTexture();_.bindTexture(_.TEXTURE_2D,z),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texImage2D(_.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),Di(_)&&(this._pbo=_.createBuffer(),_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.bufferData(_.PIXEL_PACK_BUFFER,4,_.STREAM_READ),_.bindBuffer(_.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,c){const _=this._updateCount;return this._readbackQueue?_>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():_>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,c=l.gl;l.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,c){const _=this._cachedRenderContext.context,w=_.gl;if(this._bindFramebuffer(),_.viewport.set([0,0,this._texWidth,this._texHeight]),_.clear({color:o.b4.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(_,w.TRIANGLES,Yr.disabled,Vi.disabled,ho.unblended,zi.disabled,((P,z)=>({u_input:P,u_output_expected:z}))(l,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Di(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const P=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:P}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Di(l)){const c=l.clientWaitSync(this._readbackQueue.sync,0,0);if(c===l.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=J._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let c=0;return c+=l[0]/256,c+=l[1]/65536,c+=l[2]/16777216,l[3]<127&&(c=-c),c/128}}const Ie=o.X/128;function st(I,l){const c=I.granularity!==void 0?Math.max(I.granularity,1):1,_=c+(I.generateBorders?2:0),w=c+(I.extendToNorthPole||I.generateBorders?1:0)+(I.extendToSouthPole||I.generateBorders?1:0),P=_+1,z=w+1,Y=I.generateBorders?-1:0,ee=I.generateBorders||I.extendToNorthPole?-1:0,ae=c+(I.generateBorders?1:0),xe=c+(I.generateBorders||I.extendToSouthPole?1:0),ke=P*z,Ke=_*w*6,$e=P*z>65536;if($e&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Xe=$e||l==="32bit",pt=new Int16Array(2*ke);let ut=0;for(let Bt=ee;Bt<=xe;Bt++)for(let kt=Y;kt<=ae;kt++){let Rt=kt/c*o.X;kt===-1&&(Rt=-64),kt===c+1&&(Rt=o.X+Ie);let zt=Bt/c*o.X;Bt===-1&&(zt=I.extendToNorthPole?o.b6:-64),Bt===c+1&&(zt=I.extendToSouthPole?o.b7:o.X+Ie),pt[ut++]=Rt,pt[ut++]=zt}const mt=Xe?new Uint32Array(Ke):new Uint16Array(Ke);let vt=0;for(let Bt=0;Bt<w;Bt++)for(let kt=0;kt<_;kt++){const Rt=kt+1+Bt*P,zt=kt+(Bt+1)*P,Tt=kt+1+(Bt+1)*P;mt[vt++]=kt+Bt*P,mt[vt++]=zt,mt[vt++]=Rt,mt[vt++]=Rt,mt[vt++]=zt,mt[vt++]=Tt}return{vertices:pt.buffer.slice(0),indices:mt.buffer.slice(0),uses32bitIndices:Xe}}const $t=new o.aB({fill:new o.b8(128,2),line:new o.b8(512,0),tile:new o.b8(128,32),stencil:new o.b8(128,1),circle:3});class Kr{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ei.projectionGlobe}get vertexShaderPreludeCode(){return ei.projectionMercator.vertexSource}get subdivisionGranularity(){return $t}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new J(l));const c=o.Q(this._errorQueryLatitudeDegrees),_=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(c,_),P=O.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=P);const z=Math.min(Math.max((P-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.b9(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.ba(z))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,c,_,w,P){const z=(P==="stencil"?$t.stencil:$t.tile).getGranularityForZoomLevel(c.z);return this._getMesh(l,{granularity:z,generateBorders:_,extendToNorthPole:c.y===0&&w,extendToSouthPole:c.y===(1<<c.z)-1&&w})}_getMesh(l,c){const _=this._getMeshKey(c);if(_ in this._tileMeshCache)return this._tileMeshCache[_];const w=function(P,z){const Y=st(z,"16bit"),ee=o.aC.deserialize({arrayBuffer:Y.vertices,length:Y.vertices.byteLength/2/2}),ae=o.aE.deserialize({arrayBuffer:Y.indices,length:Y.indices.byteLength/2/3});return new nl(P.createVertexBuffer(ee,Ai.members),P.createIndexBuffer(ae),o.aD.simpleSegment(0,0,ee.length,ae.length))}(l,c);return this._tileMeshCache[_]=w,w}recalculate(l){}hasTransition(){const l=O.now();let c=!1;return c=c||(l-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const $n=new o.q({type:new o.D(o.v.projection.type)});class ti extends o.E{constructor(l){super(),this._transitionable=new o.T($n),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0)),this._mercatorProjection=new Ba,this._verticalPerspectiveProjection=new Kr}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof o.bb){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,c,_,w,P){return this.currentProjection.getMeshFromTileID(l,c,_,w,P)}setProjection(l){this._transitionable.setValue("type",(l==null?void 0:l.type)||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function ci(I){const l=ji(I.worldSize,I.center.lat);return 2*Math.PI*l}function Br(I,l,c,_,w){const P=1/(1<<w),z=l/o.X*P+_*P,Y=o.bd((I/o.X*P+c*P)*Math.PI*2+Math.PI,2*Math.PI),ee=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,ae=Math.cos(ee),xe=new Float64Array(3);return xe[0]=Math.sin(Y)*ae,xe[1]=Math.sin(ee),xe[2]=Math.cos(Y)*ae,xe}function xr(I){return function(l,c){const _=Math.cos(c),w=new Float64Array(3);return w[0]=Math.sin(l)*_,w[1]=Math.sin(c),w[2]=Math.cos(l)*_,w}(I.lng*Math.PI/180,I.lat*Math.PI/180)}function ji(I,l){return I/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Xi(I){const l=Math.asin(I[1])/Math.PI*180,c=Math.sqrt(I[0]*I[0]+I[2]*I[2]);if(c>1e-6){const _=I[0]/c,w=Math.acos(I[2]/c),P=(_>0?w:-w)/Math.PI*180;return new o.N(o.aI(P,-180,180),l)}return new o.N(0,l)}function Ei(I){return Math.cos(I*Math.PI/180)}function Wr(I,l){const c=Ei(I),_=Ei(l);return o.a8(_/c)}function So(I,l){const c=I.rotate(l.bearingInRadians),_=l.zoom+Wr(l.center.lat,0),w=o.b9(1/Ei(l.center.lat),1/Ei(Math.min(Math.abs(l.center.lat),60)),o.bc(_,7,3,0,1)),P=360/ci({worldSize:l.worldSize,center:{lat:l.center.lat}});return new o.N(l.center.lng-c.x*P*w,o.ab(l.center.lat+c.y*P,-85.051129,o.aF))}function Ri(I){const l=.5*I,c=Math.sin(l),_=Math.cos(l);return Math.log(c+_)-Math.log(_-c)}function ds(I,l,c,_){const w=I.lat+c*_;if(Math.abs(c)>1){const P=(Math.sign(I.lat+c)!==Math.sign(I.lat)?-Math.abs(I.lat):Math.abs(I.lat))*Math.PI/180,z=Math.abs(I.lat+c)*Math.PI/180,Y=Ri(P+_*(z-P)),ee=Ri(P),ae=Ri(z);return new o.N(I.lng+l*((Y-ee)/(ae-ee)),w)}return new o.N(I.lng+l*_,w)}class ma{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=l}recalculateCache(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(l,c,_,w){const P=`${l.z}_${l.x}_${l.y}`,z=this._cache.get(P);if(z)return z;const Y=this._cachePrevious.get(P);if(Y)return this._cache.set(P,Y),Y;const ee=this._aabbFactory(l,c,_,w);return this._cache.set(P,ee),this._hadAnyChanges=!0,ee}}function Wa(I,l,c){const _=I-l;return _<0?-_:Math.max(0,_-c)}function vu(I,l,c,_,w){const P=I-c;let z;return z=P<0?Math.min(-P,1+P-w):P>1?Math.min(Math.max(P-w,0),1-P):0,Math.max(z,Wa(l,_,w))}class qs{constructor(){this._aabbCache=new ma(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(l,c,_,w){const P=1<<_.z,z=1/P,Y=_.x/P,ee=_.y/P;let ae=2;return ae=Math.min(ae,vu(l,c,Y,ee,z)),ae=Math.min(ae,vu(l,c,Y+.5,-ee-z,z)),ae=Math.min(ae,vu(l,c,Y+.5,2-ee-z,z)),ae}getWrap(l,c,_){const w=1<<c.z,P=1/w,z=c.x/w,Y=Wa(l.x,z,P),ee=Wa(l.x,z-1,P),ae=Wa(l.x,z+1,P),xe=Math.min(Y,ee,ae);return xe===ae?1:xe===ee?-1:0}allowVariableZoom(l,c){return tr(l,c)>4}allowWorldCopies(){return!1}getTileAABB(l,c,_,w){return this._aabbCache.getTileAABB(l,c,_,w)}_computeTileAABB(l,c,_,w){if(l.z<=0)return new co([-1,-1,-1],[1,1,1]);if(l.z===1)return new co([l.x===0?-1:0,l.y===0?0:-1,-1],[l.x===0?0:1,l.y===0?1:0,1]);{const P=[Br(0,0,l.x,l.y,l.z),Br(o.X,0,l.x,l.y,l.z),Br(o.X,o.X,l.x,l.y,l.z),Br(0,o.X,l.x,l.y,l.z)],z=[1,1,1],Y=[-1,-1,-1];for(const ee of P)for(let ae=0;ae<3;ae++)z[ae]=Math.min(z[ae],ee[ae]),Y[ae]=Math.max(Y[ae],ee[ae]);if(l.y===0||l.y===(1<<l.z)-1){const ee=[0,l.y===0?1:-1,0];for(let ae=0;ae<3;ae++)z[ae]=Math.min(z[ae],ee[ae]),Y[ae]=Math.max(Y[ae],ee[ae])}return new co(z,Y)}}}class $d{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c){this._helper.resize(l,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=o.be(),this._projectionMatrix=o.a_(),this._globeViewProjMatrix32f=o.aZ(),this._globeViewProjMatrixNoCorrection=o.a_(),this._globeViewProjMatrixNoCorrectionInverted=o.a_(),this._globeProjMatrixInverted=o.a_(),this._cameraPosition=o.bf(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new bl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._coveringTilesDetailsProvider=new qs}clone(){const l=new $d;return l.apply(this),l}apply(l,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=o.bf();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:c,applyGlobeMatrix:_}=l,w=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:_?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const c=this.pitchInRadians,_=this.cameraToCenterDistance/l,w=Math.sin(c)*_,P=Math.cos(c)*_+1,z=1/Math.sqrt(w*w+P*P)*1;let Y=-w,ee=P;const ae=Math.sqrt(Y*Y+ee*ee);Y/=ae,ee/=ae;const xe=[0,Y,ee];return o.bg(xe,xe,[0,0,0],-this.bearingInRadians),o.bh(xe,xe,[0,0,0],-1*this.center.lat*Math.PI/180),o.bi(xe,xe,[0,0,0],this.center.lng*Math.PI/180),o.aL(xe,xe,.25),[...xe,.25*-z]}isLocationOccluded(l){return!this.isSurfacePointVisible(xr(l))}transformLightDirection(l){const c=this._helper._center.lng*Math.PI/180,_=this._helper._center.lat*Math.PI/180,w=Math.cos(_),P=[Math.sin(c)*w,Math.sin(_),Math.cos(c)*w],z=[P[2],0,-P[0]],Y=[0,0,0];o.aR(Y,z,P),o.aQ(z,z),o.aQ(Y,Y);const ee=[0,0,0];return o.aQ(ee,[z[0]*l[0]+Y[0]*l[1]+P[0]*l[2],z[1]*l[0]+Y[1]*l[1]+P[1]*l[2],z[2]*l[0]+Y[2]*l[1]+P[2]*l[2]]),ee}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,c,_){const w=function(Y,ee,ae){const xe=1/(1<<ae.z);return new o.Y(Y/o.X*xe+ae.x*xe,ee/o.X*xe+ae.y*xe)}(l,c,_.canonical),P=(z=w.y,[o.bd(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(P[1])}projectTileCoordinates(l,c,_,w){const P=_.canonical,z=Br(l,c,P.x,P.y,P.z),Y=1+(w?w(l,c):0)/o.bo,ee=[z[0]*Y,z[1]*Y,z[2]*Y,1];o.al(ee,ee,this._globeViewProjMatrixNoCorrection);const ae=this._cachedClippingPlane,xe=ae[0]*z[0]+ae[1]*z[1]+ae[2]*z[2]+ae[3]<0;return{point:new o.P(ee[0]/ee[3],ee[1]/ee[3]),signedDistanceFromCamera:ee[3],isOccluded:xe}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=ji(this.worldSize,this.center.lat),c=o.a$(),_=o.a$();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),o.aV(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;c[8]=2*-w.x/this._helper._width,c[9]=2*w.y/this._helper._height,this._projectionMatrix=o.aW(c),this._globeProjMatrixInverted=o.a$(),o.an(this._globeProjMatrixInverted,c),o.J(c,c,[0,0,-this.cameraToCenterDistance]),o.aX(c,c,this.rollInRadians),o.aY(c,c,-this.pitchInRadians),o.aX(c,c,this.bearingInRadians),o.J(c,c,[0,0,-l]);const P=o.bf();P[0]=l,P[1]=l,P[2]=l,o.aY(_,c,this.center.lat*Math.PI/180),o.bj(_,_,-this.center.lng*Math.PI/180),o.K(_,_,P),this._globeViewProjMatrixNoCorrection=_,o.aY(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bj(c,c,-this.center.lng*Math.PI/180),o.K(c,c,P),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.a$(),o.an(this._globeViewProjMatrixNoCorrectionInverted,_);const z=o.bf();this._cameraPosition=o.bf(),this._cameraPosition[2]=this.cameraToCenterDistance/l,o.bg(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),o.bh(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),o.bg(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),o.aM(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bh(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),o.bi(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const Y=o.aW(this._globeViewProjMatrixNoCorrectionInverted);o.K(Y,Y,[1,1,-1]),this._cachedFrustum=Zo.fromInvProjectionMatrix(Y)}calculateFogMatrix(l){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.a$();return o.aq(c),c}getVisibleUnwrappedCoordinates(l){return[new o.aT(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const _=xr(l);o.aL(_,_,1+c/o.bo);const w=o.be();return o.al(w,[_[0],_[1],_[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(l){}getBounds(){const l=.5*this.width,c=.5*this.height,_=[new o.P(0,0),new o.P(l,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(l,this.height),new o.P(0,this.height),new o.P(0,c)],w=[];for(const ke of _)w.push(this.unprojectScreenPoint(ke));let P=0,z=0,Y=0,ee=0;const ae=this.center;for(const ke of w){const Ke=o.bk(ae.lng,ke.lng),$e=o.bk(ae.lat,ke.lat);Ke<z&&(z=Ke),Ke>P&&(P=Ke),$e<ee&&(ee=$e),$e>Y&&(Y=$e)}const xe=[ae.lng+z,ae.lat+ee,ae.lng+P,ae.lat+Y];return this.isSurfacePointOnScreen([0,1,0])&&(xe[3]=90,xe[0]=-180,xe[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(xe[1]=-90,xe[0]=-180,xe[2]=180),new Ut(xe)}getConstrained(l,c){const _=o.ab(l.lat,-85.051129,o.aF),w=o.ab(+c,this.minZoom+Wr(0,_),this.maxZoom);return{center:new o.N(l.lng,_),zoom:w}}calculateCenterFromCameraLngLatAlt(l,c,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,w)}setLocationAtPoint(l,c){const _=xr(this.unprojectScreenPoint(c)),w=xr(l),P=o.bf();o.bl(P);const z=o.bf();o.bi(z,_,P,-this.center.lng*Math.PI/180),o.bh(z,z,P,this.center.lat*Math.PI/180);const Y=w[0]*w[0]+w[2]*w[2],ee=z[0]*z[0];if(Y<ee)return;const ae=Math.sqrt(Y-ee),xe=-ae,ke=o.bm(w[0],w[2],z[0],ae),Ke=o.bm(w[0],w[2],z[0],xe),$e=o.bf();o.bi($e,w,P,-ke);const Xe=o.bm($e[1],$e[2],z[1],z[2]),pt=o.bf();o.bi(pt,w,P,-Ke);const ut=o.bm(pt[1],pt[2],z[1],z[2]),mt=.5*Math.PI,vt=Xe>=-mt&&Xe<=mt,Bt=ut>=-mt&&ut<=mt;let kt,Rt;if(vt&&Bt){const Zt=this.center.lng*Math.PI/180,Mn=this.center.lat*Math.PI/180;o.bp(ke,Zt)+o.bp(Xe,Mn)<o.bp(Ke,Zt)+o.bp(ut,Mn)?(kt=ke,Rt=Xe):(kt=Ke,Rt=ut)}else if(vt)kt=ke,Rt=Xe;else{if(!Bt)return;kt=Ke,Rt=ut}const zt=kt/Math.PI*180,Tt=Rt/Math.PI*180,nn=this.center.lat;this.setCenter(new o.N(zt,o.ab(Tt,-90,90))),this.setZoom(this.zoom+Wr(nn,this.center.lat))}locationToScreenPoint(l,c){const _=xr(l);if(c){const w=c.getElevationForLngLatZoom(l,this._helper._tileZoom);o.aL(_,_,1+w/o.bo)}return this._projectSurfacePointToScreen(_)}_projectSurfacePointToScreen(l){const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,c){if(c){const _=c.pointCoordinate(l);if(_)return _}return o.Y.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,c){var _;return(_=this.screenPointToMercatorCoordinate(l,c))===null||_===void 0?void 0:_.toLngLat()}isPointOnMapSurface(l,c){const _=this._cameraPosition,w=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(_,w)}getRayDirectionFromPixel(l){const c=o.be();c[0]=l.x/this.width*2-1,c[1]=-1*(l.y/this.height*2-1),c[2]=1,c[3]=1,o.al(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const _=o.bf();_[0]=c[0]-this._cameraPosition[0],_[1]=c[1]-this._cameraPosition[1],_[2]=c[2]-this._cameraPosition[2];const w=o.bf();return o.aQ(w,_),w}isSurfacePointVisible(l){const c=this._cachedClippingPlane;return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(l,c){const _=o.aS(l,c),w=o.bf(),P=o.bf();o.aL(P,c,_),o.aP(w,l,P);const z=1-o.aS(w,w);if(z<0)return null;const Y=o.aS(l,l)-1,ee=-_+(_<0?1:-1)*Math.sqrt(z),ae=Y/ee,xe=ee;return{tMin:Math.min(ae,xe),tMax:Math.max(ae,xe)}}unprojectScreenPoint(l){const c=this._cameraPosition,_=this.getRayDirectionFromPixel(l),w=this.rayPlanetIntersection(c,_);if(w){const ae=o.bf();o.aM(ae,c,[_[0]*w.tMin,_[1]*w.tMin,_[2]*w.tMin]);const xe=o.bf();return o.aQ(xe,ae),Xi(xe)}const P=this._cachedClippingPlane[0]*_[0]+this._cachedClippingPlane[1]*_[1]+this._cachedClippingPlane[2]*_[2],z=-o.bn(this._cachedClippingPlane,c)/P,Y=o.bf();if(z>0)o.aM(Y,c,[_[0]*z,_[1]*z,_[2]*z]);else{const ae=o.bf();o.aM(ae,c,[2*_[0],2*_[1],2*_[2]]);const xe=o.bn(this._cachedClippingPlane,ae);o.aP(Y,ae,[this._cachedClippingPlane[0]*xe,this._cachedClippingPlane[1]*xe,this._cachedClippingPlane[2]*xe])}const ee=o.bf();return o.aQ(ee,Y),Xi(ee)}getMatrixForModel(l,c){const _=o.N.convert(l),w=1/o.bo,P=o.a_();return o.bj(P,P,_.lng/180*Math.PI),o.aY(P,P,-_.lat/180*Math.PI),o.J(P,P,[0,0,1+c/o.bo]),o.aY(P,P,.5*Math.PI),o.K(P,P,[w,w,w]),P}getProjectionDataForCustomLayer(l=!0){const c=this.getProjectionData({overscaledTileID:new o.S(0,0,0,0,0),applyGlobeMatrix:l});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(l){}}class ga{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,_){return this._helper.interpolatePadding(l,c,_)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,_=!0){this._helper.resize(l,c,_)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,c){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new bl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._globeness=1,this._mercatorTransform=new Oa,this._verticalPerspectiveTransform=new $d}clone(){const l=new ga;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const c=this._mercatorTransform.getProjectionData(l),_=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?_.mainMatrix:c.mainMatrix,clippingPlane:_.clippingPlane,tileMercatorCoords:_.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return o.b9(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.b9(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,c,_){const w=this._mercatorTransform.getPitchedTextCorrection(l,c,_),P=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,c,_);return o.b9(w,P,this._globeness)}projectTileCoordinates(l,c,_,w){return this.currentTransform.projectTileCoordinates(l,c,_,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){return this.currentTransform.lngLatToCameraDepth(l,c)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,c){return this.currentTransform.getConstrained(l,c)}calculateCenterFromCameraLngLatAlt(l,c,_,w){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,_,w)}setLocationAtPoint(l,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,c){return this.currentTransform.locationToScreenPoint(l,c)}screenPointToMercatorCoordinate(l,c){return this.currentTransform.screenPointToMercatorCoordinate(l,c)}screenPointToLocation(l,c){return this.currentTransform.screenPointToLocation(l,c)}isPointOnMapSurface(l,c){return this.currentTransform.isPointOnMapSurface(l,c)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,c){return this.currentTransform.getMatrixForModel(l,c)}getProjectionDataForCustomLayer(l=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return c;const _=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return _.fallbackMatrix=c.mainMatrix,_}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class xl{get useGlobeControls(){return!0}handlePanInertia(l,c){const _=So(l,c);return Math.abs(_.lng-c.center.lng)>180&&(_.lng=c.center.lng+179.5*Math.sign(_.lng-c.center.lng)),{easingCenter:_,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,c){const _=l.around,w=c.screenPointToLocation(_);l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta);const P=c.zoom;l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta);const z=c.zoom-P;if(z===0)return;const Y=o.bk(c.center.lng,w.lng),ee=Y/(Math.abs(Y/180)+1),ae=o.bk(c.center.lat,w.lat),xe=c.getRayDirectionFromPixel(_),ke=c.cameraPosition,Ke=-1*o.aS(ke,xe),$e=o.bf();o.aM($e,ke,[xe[0]*Ke,xe[1]*Ke,xe[2]*Ke]);const Xe=o.bq($e)-1,pt=Math.exp(.5*-Math.max(Xe-.3,0)),ut=ji(c.worldSize,c.center.lat)/Math.min(c.width,c.height),mt=o.bc(ut,.9,.5,1,.25),vt=(1-o.aG(-z))*Math.min(pt,mt),Bt=c.center.lat,kt=c.zoom,Rt=new o.N(c.center.lng+ee*vt,o.ab(c.center.lat+ae*vt,-85.051129,o.aF));c.setLocationAtPoint(w,_);const zt=c.center,Tt=o.bc(Math.abs(Y),45,85,0,1),nn=o.bc(ut,.75,.35,0,1),Zt=Math.pow(Math.max(Tt,nn),.25),Mn=o.bk(zt.lng,Rt.lng),Bn=o.bk(zt.lat,Rt.lat);c.setCenter(new o.N(zt.lng+Mn*Zt,zt.lat+Bn*Zt).wrap()),c.setZoom(kt+Wr(Bt,c.center.lat))}handleMapControlsPan(l,c,_){if(!l.panDelta)return;const w=c.center.lat,P=c.zoom;c.setCenter(So(l.panDelta,c).wrap()),c.setZoom(P+Wr(w,c.center.lat))}cameraForBoxAndBearing(l,c,_,w,P){const z=ta(l,c,_,w,P),Y=c.left/P.width*2-1,ee=(P.width-c.right)/P.width*2-1,ae=c.top/P.height*-2+1,xe=(P.height-c.bottom)/P.height*-2+1,ke=o.bk(_.getWest(),_.getEast())<0,Ke=ke?_.getEast():_.getWest(),$e=ke?_.getWest():_.getEast(),Xe=Math.max(_.getNorth(),_.getSouth()),pt=Math.min(_.getNorth(),_.getSouth()),ut=Ke+.5*o.bk(Ke,$e),mt=Xe+.5*o.bk(Xe,pt),vt=P.clone();vt.setCenter(z.center),vt.setBearing(z.bearing),vt.setPitch(0),vt.setRoll(0),vt.setZoom(z.zoom);const Bt=vt.modelViewProjectionMatrix,kt=[xr(_.getNorthWest()),xr(_.getNorthEast()),xr(_.getSouthWest()),xr(_.getSouthEast()),xr(new o.N($e,mt)),xr(new o.N(Ke,mt)),xr(new o.N(ut,Xe)),xr(new o.N(ut,pt))],Rt=xr(z.center);let zt=Number.POSITIVE_INFINITY;for(const Tt of kt)Y<0&&(zt=xl.getLesserNonNegativeNonNull(zt,xl.solveVectorScale(Tt,Rt,Bt,"x",Y))),ee>0&&(zt=xl.getLesserNonNegativeNonNull(zt,xl.solveVectorScale(Tt,Rt,Bt,"x",ee))),ae>0&&(zt=xl.getLesserNonNegativeNonNull(zt,xl.solveVectorScale(Tt,Rt,Bt,"y",ae))),xe<0&&(zt=xl.getLesserNonNegativeNonNull(zt,xl.solveVectorScale(Tt,Rt,Bt,"y",xe)));if(Number.isFinite(zt)&&zt!==0)return z.zoom=vt.zoom+o.a8(zt),z;Ss()}handleJumpToCenterZoom(l,c){const _=l.center.lat,w=l.getConstrained(c.center?o.N.convert(c.center):l.center,l.zoom).center;l.setCenter(w.wrap());const P=c.zoom!==void 0?+c.zoom:l.zoom+Wr(_,w.lat);l.zoom!==P&&l.setZoom(P)}handleEaseTo(l,c){const _=l.zoom,w=l.center,P=l.padding,z={roll:l.roll,pitch:l.pitch,bearing:l.bearing},Y={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},ee=c.zoom!==void 0,ae=!l.isPaddingEqual(c.padding);let xe=!1;const ke=c.center?o.N.convert(c.center):w,Ke=l.getConstrained(ke,_).center;Qs(l,Ke);const $e=l.clone();$e.setCenter(Ke),$e.setZoom(ee?+c.zoom:_+Wr(w.lat,ke.lat)),$e.setBearing(c.bearing);const Xe=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));$e.setLocationAtPoint(Ke,Xe);const pt=(c.offset&&c.offsetAsPoint.mag())>0?$e.center:Ke,ut=ee?+c.zoom:_+Wr(w.lat,pt.lat),mt=_+Wr(w.lat,0),vt=ut+Wr(pt.lat,0),Bt=o.bk(w.lng,pt.lng),kt=o.bk(w.lat,pt.lat),Rt=o.aG(vt-mt);return xe=ut!==_,{easeFunc:zt=>{if(o.b3(z,Y)||Ia({startEulerAngles:z,endEulerAngles:Y,tr:l,k:zt,useSlerp:z.roll!=Y.roll}),ae&&l.interpolatePadding(P,c.padding,zt),c.around)o.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(c.around,c.aroundPoint);else{const Tt=vt>mt?Math.min(2,Rt):Math.max(.5,Rt),nn=Math.pow(Tt,1-zt),Zt=ds(w,Bt,kt,zt*nn);l.setCenter(Zt.wrap())}if(xe){const Tt=o.y.number(mt,vt,zt)+Wr(0,l.center.lat);l.setZoom(Tt)}},isZooming:xe,elevationCenter:pt}}handleFlyTo(l,c){const _=c.zoom!==void 0,w=l.center,P=l.zoom,z=!l.isPaddingEqual(c.padding),Y=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),P).center,ee=_?+c.zoom:l.zoom+Wr(l.center.lat,Y.lat),ae=l.clone();ae.setCenter(Y),z&&ae.setPadding(c.padding),ae.setZoom(ee),ae.setBearing(c.bearing);const xe=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));ae.setLocationAtPoint(Y,xe);const ke=ae.center;Qs(l,ke);const Ke=function(Bt,kt,Rt){const zt=xr(kt),Tt=xr(Rt),nn=o.aS(zt,Tt),Zt=Math.acos(nn),Mn=ci(Bt);return Zt/(2*Math.PI)*Mn}(l,w,ke),$e=P+Wr(w.lat,0),Xe=ee+Wr(ke.lat,0),pt=o.aG(Xe-$e);let ut;if(typeof c.minZoom=="number"){const Bt=+c.minZoom+Wr(ke.lat,0),kt=Math.min(Bt,$e,Xe)+Wr(0,ke.lat),Rt=l.getConstrained(ke,kt).zoom+Wr(ke.lat,0);ut=o.aG(Rt-$e)}const mt=o.bk(w.lng,ke.lng),vt=o.bk(w.lat,ke.lat);return{easeFunc:(Bt,kt,Rt,zt)=>{const Tt=ds(w,mt,vt,Rt),nn=Bt===1?ke:Tt;l.setCenter(nn.wrap());const Zt=$e+o.a8(kt);l.setZoom(Bt===1?ee:Zt+Wr(0,nn.lat))},scaleOfZoom:pt,targetCenter:ke,scaleOfMinZoom:ut,pixelPathLength:Ke}}static solveVectorScale(l,c,_,w,P){const z=w==="x"?[_[0],_[4],_[8],_[12]]:[_[1],_[5],_[9],_[13]],Y=[_[3],_[7],_[11],_[15]],ee=l[0]*z[0]+l[1]*z[1]+l[2]*z[2],ae=l[0]*Y[0]+l[1]*Y[1]+l[2]*Y[2],xe=c[0]*z[0]+c[1]*z[1]+c[2]*z[2],ke=c[0]*Y[0]+c[1]*Y[1]+c[2]*Y[2];return xe+P*ae===ee+P*ke||Y[3]*(ee-xe)+z[3]*(ke-ae)+ee*ke==xe*ae?null:(xe+z[3]-P*ke-P*Y[3])/(xe-ee-P*ke+P*ae)}static getLesserNonNegativeNonNull(l,c){return c!==null&&c>=0&&c<l?c:l}}class Vc{constructor(l){this._globe=l,this._mercatorCameraHelper=new IA,this._verticalPerspectiveCameraHelper=new xl}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,c){return this.currentHelper.handlePanInertia(l,c)}handleMapControlsRollPitchBearingZoom(l,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,c)}handleMapControlsPan(l,c,_){this.currentHelper.handleMapControlsPan(l,c,_)}cameraForBoxAndBearing(l,c,_,w,P){return this.currentHelper.cameraForBoxAndBearing(l,c,_,w,P)}handleJumpToCenterZoom(l,c){this.currentHelper.handleJumpToCenterZoom(l,c)}handleEaseTo(l,c){return this.currentHelper.handleEaseTo(l,c)}handleFlyTo(l,c){return this.currentHelper.handleFlyTo(l,c)}}const ju=(I,l)=>o.t(I,l&&l.filter(c=>c.identifier!=="source.canvas")),Vd=o.br();class Cu extends o.E{constructor(l,c={}){super(),this._rtlPluginLoaded=()=>{for(const _ in this.sourceCaches){const w=this.sourceCaches[_].getSource().type;w!=="vector"&&w!=="geojson"||this.sourceCaches[_].reload()}},this.map=l,this.dispatcher=new Kt(Lt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(_,w)=>this.getGlyphs(_,w)),this.dispatcher.registerMessageHandler("GI",(_,w)=>this.getImages(_,w)),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new De(l._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Me(256,512),this.crossTileSymbolIndex=new Fs,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bs,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.bt()),ce().on(vr,this._rtlPluginLoaded),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const w=this.sourceCaches[_.sourceId];if(!w)return;const P=w.getSource();if(P&&P.vectorLayerIds)for(const z in this._layers){const Y=this._layers[z];Y.source===P.id&&this._validateLayer(Y)}})}loadURL(l,c={},_){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const w=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const P=this._loadStyleRequest;o.h(w,this._loadStyleRequest).then(z=>{this._loadStyleRequest=null,this._load(z.data,c,_)}).catch(z=>{this._loadStyleRequest=null,z&&!P.signal.aborted&&this.fire(new o.j(z))})}loadJSON(l,c={},_){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,O.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(l,c,_)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Vd,{validate:!1})}_load(l,c,_){var w,P;const z=c.transformStyle?c.transformStyle(_,l):l;if(!c.validate||!ju(this,o.u(z))){this._loaded=!0,this.stylesheet=z;for(const Y in z.sources)this.addSource(Y,z.sources[Y],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new Ze(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new We(this.stylesheet.sky),this.map.setTerrain((P=this.stylesheet.terrain)!==null&&P!==void 0?P:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const l=o.bu(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of l){const _=o.bv(c);_.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=_}}_loadSprite(l,c=!1,_=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(P,z,Y,ee){return o._(this,void 0,void 0,function*(){const ae=te(P),xe=Y>1?"@2x":"",ke={},Ke={};for(const{id:$e,url:Xe}of ae){const pt=z.transformRequest(G(Xe,xe,".json"),"SpriteJSON");ke[$e]=o.h(pt,ee);const ut=z.transformRequest(G(Xe,xe,".png"),"SpriteImage");Ke[$e]=ne.getImage(ut,ee)}return yield Promise.all([...Object.values(ke),...Object.values(Ke)]),function($e,Xe){return o._(this,void 0,void 0,function*(){const pt={};for(const ut in $e){pt[ut]={};const mt=O.getImageCanvasContext((yield Xe[ut]).data),vt=(yield $e[ut]).data;for(const Bt in vt){const{width:kt,height:Rt,x:zt,y:Tt,sdf:nn,pixelRatio:Zt,stretchX:Mn,stretchY:Bn,content:yn,textFitWidth:In,textFitHeight:Nn}=vt[Bt];pt[ut][Bt]={data:null,pixelRatio:Zt,sdf:nn,stretchX:Mn,stretchY:Bn,content:yn,textFitWidth:In,textFitHeight:Nn,spriteData:{width:kt,height:Rt,x:zt,y:Tt,context:mt}}}}return pt})}(ke,Ke)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(P=>{if(this._spriteRequest=null,P)for(const z in P){this._spritesImagesIds[z]=[];const Y=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(ee=>!(ee in P)):[];for(const ee of Y)this.imageManager.removeImage(ee),this._changedImages[ee]=!0;for(const ee in P[z]){const ae=z==="default"?ee:`${z}:${ee}`;this._spritesImagesIds[z].push(ae),ae in this.imageManager.images?this.imageManager.updateImage(ae,P[z][ee],!1):this.imageManager.addImage(ae,P[z][ee]),c&&(this._changedImages[ae]=!0)}}}).catch(P=>{this._spriteRequest=null,w=P,this.fire(new o.j(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),_&&_(w)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(l){const c=this.sourceCaches[l.source];if(!c)return;const _=l.sourceLayer;if(!_)return;const w=c.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.j(new Error(`Source layer "${_}" does not exist on source "${w.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,c=!1){const _=this._serializedAllLayers();if(!l||l.length===0)return Object.values(c?o.bw(_):_);const w=[];for(const P of l)if(_[P]){const z=c?o.bw(_[P]):_[P];w.push(z)}return w}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const c=Object.keys(this._layers);for(const _ of c){const w=this._layers[_];w.type!=="custom"&&(l[_]=w.serialize())}return l}hasTransitions(){var l,c,_;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((_=this.projection)===null||_===void 0)&&_.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const c=this._changed;if(c){const w=Object.keys(this._updatedLayers),P=Object.keys(this._removedLayers);(w.length||P.length)&&this._updateWorkerLayers(w,P);for(const z in this._updatedSources){const Y=this._updatedSources[z];if(Y==="reload")this._reloadSource(z);else{if(Y!=="clear")throw new Error(`Invalid action ${Y}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const _={};for(const w in this.sourceCaches){const P=this.sourceCaches[w];_[w]=P.used,P.used=!1}for(const w of this._order){const P=this._layers[w];P.recalculate(l,this._availableImages),!P.isHidden(l.zoom)&&P.source&&(this.sourceCaches[P.source].used=!0)}for(const w in _){const P=this.sourceCaches[w];!!_[w]!=!!P.used&&P.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,c={}){var _;this._checkLoaded();const w=this.serialize();if(l=c.transformStyle?c.transformStyle(w,l):l,((_=c.validate)===null||_===void 0||_)&&ju(this,o.u(l)))return!1;(l=o.bw(l)).layers=o.bu(l.layers);const P=o.bx(w,l),z=this._getOperationsToPerform(P);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const Y of z.operations)Y();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const c=[],_=[];for(const w of l)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":c.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":c.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":c.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setTransition":c.push(()=>{});break;default:_.push(w.command)}return{operations:c,unimplemented:_}}addImage(l,c){if(this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,c),this._afterImageUpdated(l)}updateImage(l,c){this.imageManager.updateImage(l,c)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,c,_={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.u.source,`sources.${l}`,c,null,_))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const w=this.sourceCaches[l]=new se(l,c,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:l})),w.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===l)return this.fire(new o.j(new Error(`Source "${l}" cannot be removed while layer "${_}" is using it.`)));const c=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,c){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const _=this.sourceCaches[l].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(c),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,c,_={}){this._checkLoaded();const w=l.id;if(this.getLayer(w))return void this.fire(new o.j(new Error(`Layer "${w}" already exists on this map.`)));let P;if(l.type==="custom"){if(ju(this,o.by(l)))return;P=o.bv(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(w,l.source),l=o.bw(l),l=o.e(l,{source:w})),this._validate(o.u.layer,`layers.${w}`,l,{arrayIndex:-1},_))return;P=o.bv(l),this._validateLayer(P),P.setEventedParent(this,{layer:{id:w}})}const z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new o.j(new Error(`Cannot add layer "${w}" before non-existing layer "${c}".`)));else{if(this._order.splice(z,0,w),this._layerOrderChanged=!0,this._layers[w]=P,this._removedLayers[w]&&P.source&&P.type!=="custom"){const Y=this._removedLayers[w];delete this._removedLayers[w],Y.type!==P.type?this._updatedSources[P.source]="clear":(this._updatedSources[P.source]="reload",this.sourceCaches[P.source].pause())}this._updateLayer(P),P.onAdd&&P.onAdd(this.map)}}moveLayer(l,c){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===c)return;const _=this._order.indexOf(l);this._order.splice(_,1);const w=c?this._order.indexOf(c):this._order.length;c&&w===-1?this.fire(new o.j(new Error(`Cannot move layer "${l}" before non-existing layer "${c}".`))):(this._order.splice(w,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const c=this._layers[l];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${l}".`)));c.setEventedParent(null);const _=this._order.indexOf(l);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=c,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],c.onRemove&&c.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,c,_){this._checkLoaded();const w=this.getLayer(l);w?w.minzoom===c&&w.maxzoom===_||(c!=null&&(w.minzoom=c),_!=null&&(w.maxzoom=_),this._updateLayer(w)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,c,_={}){this._checkLoaded();const w=this.getLayer(l);if(w){if(!o.bz(w.filter,c))return c==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.u.filter,`layers.${w.id}.filter`,c,null,_)||(w.filter=o.bw(c),this._updateLayer(w)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return o.bw(this.getLayer(l).filter)}setLayoutProperty(l,c,_,w={}){this._checkLoaded();const P=this.getLayer(l);P?o.bz(P.getLayoutProperty(c),_)||(P.setLayoutProperty(c,_,w),this._updateLayer(P)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,c){const _=this.getLayer(l);if(_)return _.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,c,_,w={}){this._checkLoaded();const P=this.getLayer(l);P?o.bz(P.getPaintProperty(c),_)||(P.setPaintProperty(c,_,w)&&this._updateLayer(P),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,c){return this.getLayer(l).getPaintProperty(c)}setFeatureState(l,c){this._checkLoaded();const _=l.source,w=l.sourceLayer,P=this.sourceCaches[_];if(P===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const z=P.getSource().type;z==="geojson"&&w?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||w?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),P.setFeatureState(w,l.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,c){this._checkLoaded();const _=l.source,w=this.sourceCaches[_];if(w===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const P=w.getSource().type,z=P==="vector"?l.sourceLayer:void 0;P!=="vector"||z?c&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(z,l.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const c=l.source,_=l.sourceLayer,w=this.sourceCaches[c];if(w!==void 0)return w.getSource().type!=="vector"||_?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),w.getFeatureState(_,l.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=o.bA(this.sourceCaches,P=>P.serialize()),c=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,w=this.stylesheet;return o.bB({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:l,layers:c,terrain:_},P=>P!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const c=z=>this._layers[z].type==="fill-extrusion",_={},w=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y)){_[Y]=z;for(const ee of l){const ae=ee[Y];if(ae)for(const xe of ae)w.push(xe)}}}w.sort((z,Y)=>Y.intersectionZ-z.intersectionZ);const P=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y))for(let ee=w.length-1;ee>=0;ee--){const ae=w[ee].feature;if(_[ae.layer.id]<z)break;P.push(ae),w.pop()}else for(const ee of l){const ae=ee[Y];if(ae)for(const xe of ae)P.push(xe.feature)}}return P}queryRenderedFeatures(l,c,_){c&&c.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const w={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.j(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const ae of c.layers){const xe=this._layers[ae];if(!xe)return this.fire(new o.j(new Error(`The layer '${ae}' does not exist in the map's style and cannot be queried for features.`))),[];w[xe.source]=!0}}const P=[];c.availableImages=this._availableImages;const z=this._serializedAllLayers(),Y=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,ee=Object.assign(Object.assign({},c),{layers:Y});for(const ae in this.sourceCaches)c.layers&&!w[ae]||P.push(Be(this.sourceCaches[ae],this._layers,z,l,ee,_));return this.placement&&P.push(function(ae,xe,ke,Ke,$e,Xe,pt){const ut={},mt=Xe.queryRenderedSymbols(Ke),vt=[];for(const Bt of Object.keys(mt).map(Number))vt.push(pt[Bt]);vt.sort(it);for(const Bt of vt){const kt=Bt.featureIndex.lookupSymbolFeatures(mt[Bt.bucketInstanceId],xe,Bt.bucketIndex,Bt.sourceLayerIndex,$e.filter,$e.layers,$e.availableImages,ae);for(const Rt in kt){const zt=ut[Rt]=ut[Rt]||[],Tt=kt[Rt];Tt.sort((nn,Zt)=>{const Mn=Bt.featureSortOrder;if(Mn){const Bn=Mn.indexOf(nn.featureIndex);return Mn.indexOf(Zt.featureIndex)-Bn}return Zt.featureIndex-nn.featureIndex});for(const nn of Tt)zt.push(nn)}}return function(Bt,kt,Rt){for(const zt in Bt)for(const Tt of Bt[zt])_t(Tt,Rt[kt[zt].source]);return Bt}(ut,ae,ke)}(this._layers,z,this.sourceCaches,l,ee,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(P)}querySourceFeatures(l,c){c&&c.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",c.filter,null,c);const _=this.sourceCaches[l];return _?function(w,P){const z=w.getRenderableIds().map(ae=>w.getTileByID(ae)),Y=[],ee={};for(let ae=0;ae<z.length;ae++){const xe=z[ae],ke=xe.tileID.canonical.key;ee[ke]||(ee[ke]=!0,xe.querySourceFeatures(Y,P))}return Y}(_,c):[]}getLight(){return this.light.getLight()}setLight(l,c={}){this._checkLoaded();const _=this.light.getLight();let w=!1;for(const z in l)if(!o.bz(l[z],_[z])){w=!0;break}if(!w)return;const P={now:O.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,c),this.light.updateTransitions(P)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,c={}){this._checkLoaded();const _=this.getSky();let w=!1;if(!l&&!_)return;if(l&&!_)w=!0;else if(!l&&_)w=!0;else for(const z in l)if(!o.bz(l[z],_[z])){w=!0;break}if(!w)return;const P={now:O.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,c),this.sky.updateTransitions(P)}_setProjectionInternal(l){const c=function(_){if(Array.isArray(_)){const w=new ti({type:_});return{projection:w,transform:new ga,cameraHelper:new Vc(w)}}switch(_){case"mercator":return{projection:new Ba,transform:new Oa,cameraHelper:new IA};case"globe":{const w=new ti({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new ga,cameraHelper:new Vc(w)}}case"vertical-perspective":return{projection:new Kr,transform:new $d,cameraHelper:new xl};default:return o.w(`Unknown projection name: ${_}. Falling back to mercator projection.`),{projection:new Ba,transform:new Oa,cameraHelper:new IA}}}(l);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const _ in this.sourceCaches)this.sourceCaches[_].reload()}_validate(l,c,_,w,P={}){return(!P||P.validate!==!1)&&ju(this,l.call(o.u,o.e({key:c,style:this.serialize(),value:_,styleSpec:o.v},w)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(vr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const _=this.sourceCaches[c];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const c in this.sourceCaches)this.sourceCaches[c].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,c,_,w,P=!1){let z=!1,Y=!1;const ee={};for(const ae of this._order){const xe=this._layers[ae];if(xe.type!=="symbol")continue;if(!ee[xe.source]){const Ke=this.sourceCaches[xe.source];ee[xe.source]=Ke.getRenderableIds(!0).map($e=>Ke.getTileByID($e)).sort(($e,Xe)=>Xe.tileID.overscaledZ-$e.tileID.overscaledZ||($e.tileID.isLessThan(Xe.tileID)?-1:1))}const ke=this.crossTileSymbolIndex.addLayer(xe,ee[xe.source],l.center.lng);z=z||ke}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((P=P||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(O.now(),l.zoom))&&(this.pauseablePlacement=new hn(l,this.map.terrain,this._order,P,c,_,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ee),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(O.now()),Y=!0),z&&this.pauseablePlacement.placement.setStale()),Y||z)for(const ae of this._order){const xe=this._layers[ae];xe.type==="symbol"&&this.placement.updateLayerOpacities(xe,ee[xe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(O.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,c){return o._(this,void 0,void 0,function*(){const _=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[c.source];return w&&w.setDependencies(c.tileID.key,c.type,c.icons),_})}getGlyphs(l,c){return o._(this,void 0,void 0,function*(){const _=yield this.glyphManager.getGlyphs(c.stacks),w=this.sourceCaches[c.source];return w&&w.setDependencies(c.tileID.key,c.type,[""]),_})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,c={}){this._checkLoaded(),l&&this._validate(o.u.glyphs,"glyphs",l,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,c,_={},w){this._checkLoaded();const P=[{id:l,url:c}],z=[...te(this.stylesheet.sprite),...P];this._validate(o.u.sprite,"sprite",z,null,_)||(this.stylesheet.sprite=z,this._loadSprite(P,!0,w))}removeSprite(l){this._checkLoaded();const c=te(this.stylesheet.sprite);if(c.find(_=>_.id===l)){if(this._spritesImagesIds[l])for(const _ of this._spritesImagesIds[l])this.imageManager.removeImage(_),this._changedImages[_]=!0;c.splice(c.findIndex(_=>_.id===l),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return te(this.stylesheet.sprite)}setSprite(l,c={},_){this._checkLoaded(),l&&this._validate(o.u.sprite,"sprite",l,null,c)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,_):(this._unloadSprite(),_&&_(null)))}}var Ls=o.aA([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class kA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,c,_,w,P,z,Y,ee,ae){this.context=l;let xe=this.boundPaintVertexBuffers.length!==w.length;for(let ke=0;!xe&&ke<w.length;ke++)this.boundPaintVertexBuffers[ke]!==w[ke]&&(xe=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==_||xe||this.boundIndexBuffer!==P||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==Y||this.boundDynamicVertexBuffer2!==ee||this.boundDynamicVertexBuffer3!==ae?this.freshBind(c,_,w,P,z,Y,ee,ae):(l.bindVertexArray.set(this.vao),Y&&Y.bind(),P&&P.dynamicDraw&&P.bind(),ee&&ee.bind(),ae&&ae.bind())}freshBind(l,c,_,w,P,z,Y,ee){const ae=l.numAttributes,xe=this.context,ke=xe.gl;this.vao&&this.destroy(),this.vao=xe.createVertexArray(),xe.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=w,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=Y,this.boundDynamicVertexBuffer3=ee,c.enableAttributes(ke,l);for(const Ke of _)Ke.enableAttributes(ke,l);z&&z.enableAttributes(ke,l),Y&&Y.enableAttributes(ke,l),ee&&ee.enableAttributes(ke,l),c.bind(),c.setVertexAttribPointers(ke,l,P);for(const Ke of _)Ke.bind(),Ke.setVertexAttribPointers(ke,l,P);z&&(z.bind(),z.setVertexAttribPointers(ke,l,P)),w&&w.bind(),Y&&(Y.bind(),Y.setVertexAttribPointers(ke,l,P)),ee&&(ee.bind(),ee.setVertexAttribPointers(ke,l,P)),xe.currentNumAttributes=ae}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const gd=(I,l,c,_,w)=>({u_texture:0,u_ele_delta:I,u_fog_matrix:l,u_fog_color:c?c.properties.get("fog-color"):o.b4.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:c?c.calculateFogBlendOpacity(_):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b4.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),Hd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Bc(I){const l=[];for(let c=0;c<I.length;c++){if(I[c]===null)continue;const _=I[c].split(" ");l.push(_.pop())}return l}class Oc{constructor(l,c,_,w,P,z,Y,ee){const ae=l.gl;this.program=ae.createProgram();const xe=Bc(c.staticAttributes),ke=_?_.getBinderAttributes():[],Ke=xe.concat(ke),$e=ei.prelude.staticUniforms?Bc(ei.prelude.staticUniforms):[],Xe=Y.staticUniforms?Bc(Y.staticUniforms):[],pt=c.staticUniforms?Bc(c.staticUniforms):[],ut=_?_.getBinderUniforms():[],mt=$e.concat(Xe).concat(pt).concat(ut),vt=[];for(const Zt of mt)vt.indexOf(Zt)<0&&vt.push(Zt);const Bt=_?_.defines():[];Di(ae)&&Bt.unshift("#version 300 es"),P&&Bt.push("#define OVERDRAW_INSPECTOR;"),z&&Bt.push("#define TERRAIN3D;"),ee&&Bt.push(ee);let kt=Bt.concat(ei.prelude.fragmentSource,Y.fragmentSource,c.fragmentSource).join(`
`),Rt=Bt.concat(ei.prelude.vertexSource,Y.vertexSource,c.vertexSource).join(`
`);Di(ae)||(kt=function(Zt){return Zt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(kt),Rt=function(Zt){return Zt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Rt));const zt=ae.createShader(ae.FRAGMENT_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(zt,kt),ae.compileShader(zt),!ae.getShaderParameter(zt,ae.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ae.getShaderInfoLog(zt)}`);ae.attachShader(this.program,zt);const Tt=ae.createShader(ae.VERTEX_SHADER);if(ae.isContextLost())return void(this.failedToCreate=!0);if(ae.shaderSource(Tt,Rt),ae.compileShader(Tt),!ae.getShaderParameter(Tt,ae.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ae.getShaderInfoLog(Tt)}`);ae.attachShader(this.program,Tt),this.attributes={};const nn={};this.numAttributes=Ke.length;for(let Zt=0;Zt<this.numAttributes;Zt++)Ke[Zt]&&(ae.bindAttribLocation(this.program,Zt,Ke[Zt]),this.attributes[Ke[Zt]]=Zt);if(ae.linkProgram(this.program),!ae.getProgramParameter(this.program,ae.LINK_STATUS))throw new Error(`Program failed to link: ${ae.getProgramInfoLog(this.program)}`);ae.deleteShader(Tt),ae.deleteShader(zt);for(let Zt=0;Zt<vt.length;Zt++){const Mn=vt[Zt];if(Mn&&!nn[Mn]){const Bn=ae.getUniformLocation(this.program,Mn);Bn&&(nn[Mn]=Bn)}}this.fixedUniforms=w(l,nn),this.terrainUniforms=((Zt,Mn)=>({u_depth:new o.bC(Zt,Mn.u_depth),u_terrain:new o.bC(Zt,Mn.u_terrain),u_terrain_dim:new o.b5(Zt,Mn.u_terrain_dim),u_terrain_matrix:new o.bD(Zt,Mn.u_terrain_matrix),u_terrain_unpack:new o.bE(Zt,Mn.u_terrain_unpack),u_terrain_exaggeration:new o.b5(Zt,Mn.u_terrain_exaggeration)}))(l,nn),this.projectionUniforms=((Zt,Mn)=>({u_projection_matrix:new o.bD(Zt,Mn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bE(Zt,Mn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bE(Zt,Mn.u_projection_clipping_plane),u_projection_transition:new o.b5(Zt,Mn.u_projection_transition),u_projection_fallback_matrix:new o.bD(Zt,Mn.u_projection_fallback_matrix)}))(l,nn),this.binderUniforms=_?_.getUniforms(l,nn):[]}draw(l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke,$e,Xe,pt,ut,mt,vt,Bt){const kt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(_),l.setStencilMode(w),l.setColorMode(P),l.setCullFace(z),ee){l.activeTexture.set(kt.TEXTURE2),kt.bindTexture(kt.TEXTURE_2D,ee.depthTexture),l.activeTexture.set(kt.TEXTURE3),kt.bindTexture(kt.TEXTURE_2D,ee.texture);for(const zt in this.terrainUniforms)this.terrainUniforms[zt].set(ee[zt])}if(ae)for(const zt in ae)this.projectionUniforms[Hd[zt]].set(ae[zt]);if(Y)for(const zt in this.fixedUniforms)this.fixedUniforms[zt].set(Y[zt]);ut&&ut.setUniforms(l,this.binderUniforms,Xe,{zoom:pt});let Rt=0;switch(c){case kt.LINES:Rt=2;break;case kt.TRIANGLES:Rt=3;break;case kt.LINE_STRIP:Rt=1}for(const zt of $e.get()){const Tt=zt.vaos||(zt.vaos={});(Tt[xe]||(Tt[xe]=new kA)).bind(l,this,ke,ut?ut.getPaintVertexBuffers():[],Ke,zt.vertexOffset,mt,vt,Bt),kt.drawElements(c,zt.primitiveLength*Rt,kt.UNSIGNED_SHORT,zt.primitiveOffset*Rt*2)}}}function ep(I,l,c){const _=1/o.at(c,1,l.transform.tileZoom),w=Math.pow(2,c.tileID.overscaledZ),P=c.tileSize*Math.pow(2,l.transform.tileZoom)/w,z=P*(c.tileID.canonical.x+c.tileID.wrap*w),Y=P*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[_,I.fromScale,I.toScale],u_fade:I.t,u_pixel_coord_upper:[z>>16,Y>>16],u_pixel_coord_lower:[65535&z,65535&Y]}}const yd=(I,l,c,_)=>{const w=I.style.light,P=w.properties.get("position"),z=[P.x,P.y,P.z],Y=o.bI();w.properties.get("anchor")==="viewport"&&o.bJ(Y,I.transform.bearingInRadians),o.bK(z,z,Y);const ee=I.transform.transformLightDirection(z),ae=w.properties.get("color");return{u_lightpos:z,u_lightpos_globe:ee,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+l,u_opacity:c,u_fill_translate:_}},Kp=(I,l,c,_,w,P,z)=>o.e(yd(I,l,c,_),ep(P,I,z),{u_height_factor:-Math.pow(2,w.overscaledZ)/z.tileSize/8}),ic=(I,l,c,_)=>o.e(ep(l,I,c),{u_fill_translate:_}),na=(I,l)=>({u_world:I,u_fill_translate:l}),cf=(I,l,c,_,w)=>o.e(ic(I,l,c,w),{u_world:_}),xh=(I,l,c,_,w)=>{const P=I.transform;let z,Y,ee=0;if(c.paint.get("circle-pitch-alignment")==="map"){const ae=o.at(l,1,P.zoom);z=!0,Y=[ae,ae],ee=ae/(o.X*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*w}else z=!1,Y=P.pixelsToGLUnits;return{u_camera_to_center_distance:P.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:I.pixelRatio,u_extrude_scale:Y,u_globe_extrude_scale:ee,u_translate:_}},vd=I=>({u_pixel_extrude_scale:[1/I.width,1/I.height]}),df=I=>({u_viewport_size:[I.width,I.height]}),Cd=(I,l=1)=>({u_color:I,u_overlay:0,u_overlay_scale:l}),hf=(I,l,c,_)=>{const w=o.at(I,1,l)/(o.X*Math.pow(2,I.tileID.overscaledZ))*2*Math.PI*_;return{u_extrude_scale:o.at(I,1,l),u_intensity:c,u_globe_extrude_scale:w}},oc=(I,l,c,_)=>{const w=o.H();o.bL(w,0,I.width,I.height,0,0,1);const P=I.context.gl;return{u_matrix:w,u_world:[P.drawingBufferWidth,P.drawingBufferHeight],u_image:c,u_color_ramp:_,u_opacity:l.paint.get("heatmap-opacity")}},wh=(I,l,c)=>{const _=c.paint.get("hillshade-shadow-color"),w=c.paint.get("hillshade-highlight-color"),P=c.paint.get("hillshade-accent-color");let z=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(z+=I.transform.bearingInRadians),{u_image:0,u_latrange:Mh(0,l.tileID),u_light:[c.paint.get("hillshade-exaggeration"),z],u_shadow:_,u_highlight:w,u_accent:P}},ff=(I,l)=>{const c=l.stride,_=o.H();return o.bL(_,0,o.X,-8192,0,0,1),o.J(_,_,[0,-8192,0]),{u_matrix:_,u_image:1,u_dimension:[c,c],u_zoom:I.overscaledZ,u_unpack:l.getUnpackVector()}};function Mh(I,l){const c=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new o.Y(0,_/c).toLngLat().lat,new o.Y(0,(_+1)/c).toLngLat().lat]}const Sh=(I,l,c,_)=>{const w=I.transform;return{u_translation:Hc(I,l,c),u_ratio:_/o.at(l,1,w.zoom),u_device_pixel_ratio:I.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},wl=(I,l,c,_,w)=>o.e(Sh(I,l,c,_),{u_image:0,u_image_height:w}),Eh=(I,l,c,_,w)=>{const P=I.transform,z=AA(l,P);return{u_translation:Hc(I,l,c),u_texsize:l.imageAtlasTexture.size,u_ratio:_/o.at(l,1,P.zoom),u_device_pixel_ratio:I.pixelRatio,u_image:0,u_scale:[z,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},Nu=(I,l,c,_,w,P)=>{const z=I.lineAtlas,Y=AA(l,I.transform),ee=c.layout.get("line-cap")==="round",ae=z.getDash(w.from,ee),xe=z.getDash(w.to,ee),ke=ae.width*P.fromScale,Ke=xe.width*P.toScale;return o.e(Sh(I,l,c,_),{u_patternscale_a:[Y/ke,-ae.height/2],u_patternscale_b:[Y/Ke,-xe.height/2],u_sdfgamma:z.width/(256*Math.min(ke,Ke)*I.pixelRatio)/2,u_image:0,u_tex_y_a:ae.y,u_tex_y_b:xe.y,u_mix:P.t})};function AA(I,l){return 1/o.at(I,1,l.tileZoom)}function Hc(I,l,c){return o.au(I.transform,l,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Bh=(I,l,c,_,w)=>{return{u_tl_parent:I,u_scale_parent:l,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(z=_.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(P=_.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:Oh(_.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var P,z};function Oh(I){I*=Math.PI/180;const l=Math.sin(I),c=Math.cos(I);return[(2*c+1)/3,(-Math.sqrt(3)*l-c+1)/3,(Math.sqrt(3)*l-c+1)/3]}const Wu=(I,l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke)=>{const $e=z.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:$e.cameraToCenterDistance,u_pitch:$e.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:$e.width/$e.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:Y,u_coord_matrix:ee,u_is_text:+xe,u_pitch_with_map:+_,u_is_along_line:w,u_is_variable_anchor:P,u_texsize:ke,u_texture:0,u_translation:ae,u_pitched_scale:Ke}},cA=(I,l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke,$e)=>{const Xe=z.transform;return o.e(Wu(I,l,c,_,w,P,z,Y,ee,ae,xe,ke,$e),{u_gamma_scale:_?Math.cos(Xe.pitch*Math.PI/180)*Xe.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},Ul=(I,l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke)=>o.e(cA(I,l,c,_,w,P,z,Y,ee,ae,!0,xe,0,Ke),{u_texsize_icon:ke,u_texture_icon:1}),Zc=(I,l)=>({u_opacity:I,u_color:l}),pf=(I,l,c,_,w)=>o.e(function(P,z,Y,ee){const ae=Y.imageManager.getPattern(P.from.toString()),xe=Y.imageManager.getPattern(P.to.toString()),{width:ke,height:Ke}=Y.imageManager.getPixelSize(),$e=Math.pow(2,ee.tileID.overscaledZ),Xe=ee.tileSize*Math.pow(2,Y.transform.tileZoom)/$e,pt=Xe*(ee.tileID.canonical.x+ee.tileID.wrap*$e),ut=Xe*ee.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:xe.tl,u_pattern_br_b:xe.br,u_texsize:[ke,Ke],u_mix:z.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:xe.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/o.at(ee,1,Y.transform.tileZoom),u_pixel_coord_upper:[pt>>16,ut>>16],u_pixel_coord_lower:[65535&pt,65535&ut]}}(c,w,l,_),{u_opacity:I}),mf=(I,l)=>{},Zd={fillExtrusion:(I,l)=>({u_lightpos:new o.bG(I,l.u_lightpos),u_lightpos_globe:new o.bG(I,l.u_lightpos_globe),u_lightintensity:new o.b5(I,l.u_lightintensity),u_lightcolor:new o.bG(I,l.u_lightcolor),u_vertical_gradient:new o.b5(I,l.u_vertical_gradient),u_opacity:new o.b5(I,l.u_opacity),u_fill_translate:new o.bH(I,l.u_fill_translate)}),fillExtrusionPattern:(I,l)=>({u_lightpos:new o.bG(I,l.u_lightpos),u_lightpos_globe:new o.bG(I,l.u_lightpos_globe),u_lightintensity:new o.b5(I,l.u_lightintensity),u_lightcolor:new o.bG(I,l.u_lightcolor),u_vertical_gradient:new o.b5(I,l.u_vertical_gradient),u_height_factor:new o.b5(I,l.u_height_factor),u_opacity:new o.b5(I,l.u_opacity),u_fill_translate:new o.bH(I,l.u_fill_translate),u_image:new o.bC(I,l.u_image),u_texsize:new o.bH(I,l.u_texsize),u_pixel_coord_upper:new o.bH(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(I,l.u_pixel_coord_lower),u_scale:new o.bG(I,l.u_scale),u_fade:new o.b5(I,l.u_fade)}),fill:(I,l)=>({u_fill_translate:new o.bH(I,l.u_fill_translate)}),fillPattern:(I,l)=>({u_image:new o.bC(I,l.u_image),u_texsize:new o.bH(I,l.u_texsize),u_pixel_coord_upper:new o.bH(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(I,l.u_pixel_coord_lower),u_scale:new o.bG(I,l.u_scale),u_fade:new o.b5(I,l.u_fade),u_fill_translate:new o.bH(I,l.u_fill_translate)}),fillOutline:(I,l)=>({u_world:new o.bH(I,l.u_world),u_fill_translate:new o.bH(I,l.u_fill_translate)}),fillOutlinePattern:(I,l)=>({u_world:new o.bH(I,l.u_world),u_image:new o.bC(I,l.u_image),u_texsize:new o.bH(I,l.u_texsize),u_pixel_coord_upper:new o.bH(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(I,l.u_pixel_coord_lower),u_scale:new o.bG(I,l.u_scale),u_fade:new o.b5(I,l.u_fade),u_fill_translate:new o.bH(I,l.u_fill_translate)}),circle:(I,l)=>({u_camera_to_center_distance:new o.b5(I,l.u_camera_to_center_distance),u_scale_with_map:new o.bC(I,l.u_scale_with_map),u_pitch_with_map:new o.bC(I,l.u_pitch_with_map),u_extrude_scale:new o.bH(I,l.u_extrude_scale),u_device_pixel_ratio:new o.b5(I,l.u_device_pixel_ratio),u_globe_extrude_scale:new o.b5(I,l.u_globe_extrude_scale),u_translate:new o.bH(I,l.u_translate)}),collisionBox:(I,l)=>({u_pixel_extrude_scale:new o.bH(I,l.u_pixel_extrude_scale)}),collisionCircle:(I,l)=>({u_viewport_size:new o.bH(I,l.u_viewport_size)}),debug:(I,l)=>({u_color:new o.bF(I,l.u_color),u_overlay:new o.bC(I,l.u_overlay),u_overlay_scale:new o.b5(I,l.u_overlay_scale)}),depth:mf,clippingMask:mf,heatmap:(I,l)=>({u_extrude_scale:new o.b5(I,l.u_extrude_scale),u_intensity:new o.b5(I,l.u_intensity),u_globe_extrude_scale:new o.b5(I,l.u_globe_extrude_scale)}),heatmapTexture:(I,l)=>({u_matrix:new o.bD(I,l.u_matrix),u_world:new o.bH(I,l.u_world),u_image:new o.bC(I,l.u_image),u_color_ramp:new o.bC(I,l.u_color_ramp),u_opacity:new o.b5(I,l.u_opacity)}),hillshade:(I,l)=>({u_image:new o.bC(I,l.u_image),u_latrange:new o.bH(I,l.u_latrange),u_light:new o.bH(I,l.u_light),u_shadow:new o.bF(I,l.u_shadow),u_highlight:new o.bF(I,l.u_highlight),u_accent:new o.bF(I,l.u_accent)}),hillshadePrepare:(I,l)=>({u_matrix:new o.bD(I,l.u_matrix),u_image:new o.bC(I,l.u_image),u_dimension:new o.bH(I,l.u_dimension),u_zoom:new o.b5(I,l.u_zoom),u_unpack:new o.bE(I,l.u_unpack)}),line:(I,l)=>({u_translation:new o.bH(I,l.u_translation),u_ratio:new o.b5(I,l.u_ratio),u_device_pixel_ratio:new o.b5(I,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(I,l.u_units_to_pixels)}),lineGradient:(I,l)=>({u_translation:new o.bH(I,l.u_translation),u_ratio:new o.b5(I,l.u_ratio),u_device_pixel_ratio:new o.b5(I,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(I,l.u_units_to_pixels),u_image:new o.bC(I,l.u_image),u_image_height:new o.b5(I,l.u_image_height)}),linePattern:(I,l)=>({u_translation:new o.bH(I,l.u_translation),u_texsize:new o.bH(I,l.u_texsize),u_ratio:new o.b5(I,l.u_ratio),u_device_pixel_ratio:new o.b5(I,l.u_device_pixel_ratio),u_image:new o.bC(I,l.u_image),u_units_to_pixels:new o.bH(I,l.u_units_to_pixels),u_scale:new o.bG(I,l.u_scale),u_fade:new o.b5(I,l.u_fade)}),lineSDF:(I,l)=>({u_translation:new o.bH(I,l.u_translation),u_ratio:new o.b5(I,l.u_ratio),u_device_pixel_ratio:new o.b5(I,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(I,l.u_units_to_pixels),u_patternscale_a:new o.bH(I,l.u_patternscale_a),u_patternscale_b:new o.bH(I,l.u_patternscale_b),u_sdfgamma:new o.b5(I,l.u_sdfgamma),u_image:new o.bC(I,l.u_image),u_tex_y_a:new o.b5(I,l.u_tex_y_a),u_tex_y_b:new o.b5(I,l.u_tex_y_b),u_mix:new o.b5(I,l.u_mix)}),raster:(I,l)=>({u_tl_parent:new o.bH(I,l.u_tl_parent),u_scale_parent:new o.b5(I,l.u_scale_parent),u_buffer_scale:new o.b5(I,l.u_buffer_scale),u_fade_t:new o.b5(I,l.u_fade_t),u_opacity:new o.b5(I,l.u_opacity),u_image0:new o.bC(I,l.u_image0),u_image1:new o.bC(I,l.u_image1),u_brightness_low:new o.b5(I,l.u_brightness_low),u_brightness_high:new o.b5(I,l.u_brightness_high),u_saturation_factor:new o.b5(I,l.u_saturation_factor),u_contrast_factor:new o.b5(I,l.u_contrast_factor),u_spin_weights:new o.bG(I,l.u_spin_weights),u_coords_top:new o.bE(I,l.u_coords_top),u_coords_bottom:new o.bE(I,l.u_coords_bottom)}),symbolIcon:(I,l)=>({u_is_size_zoom_constant:new o.bC(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(I,l.u_is_size_feature_constant),u_size_t:new o.b5(I,l.u_size_t),u_size:new o.b5(I,l.u_size),u_camera_to_center_distance:new o.b5(I,l.u_camera_to_center_distance),u_pitch:new o.b5(I,l.u_pitch),u_rotate_symbol:new o.bC(I,l.u_rotate_symbol),u_aspect_ratio:new o.b5(I,l.u_aspect_ratio),u_fade_change:new o.b5(I,l.u_fade_change),u_label_plane_matrix:new o.bD(I,l.u_label_plane_matrix),u_coord_matrix:new o.bD(I,l.u_coord_matrix),u_is_text:new o.bC(I,l.u_is_text),u_pitch_with_map:new o.bC(I,l.u_pitch_with_map),u_is_along_line:new o.bC(I,l.u_is_along_line),u_is_variable_anchor:new o.bC(I,l.u_is_variable_anchor),u_texsize:new o.bH(I,l.u_texsize),u_texture:new o.bC(I,l.u_texture),u_translation:new o.bH(I,l.u_translation),u_pitched_scale:new o.b5(I,l.u_pitched_scale)}),symbolSDF:(I,l)=>({u_is_size_zoom_constant:new o.bC(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(I,l.u_is_size_feature_constant),u_size_t:new o.b5(I,l.u_size_t),u_size:new o.b5(I,l.u_size),u_camera_to_center_distance:new o.b5(I,l.u_camera_to_center_distance),u_pitch:new o.b5(I,l.u_pitch),u_rotate_symbol:new o.bC(I,l.u_rotate_symbol),u_aspect_ratio:new o.b5(I,l.u_aspect_ratio),u_fade_change:new o.b5(I,l.u_fade_change),u_label_plane_matrix:new o.bD(I,l.u_label_plane_matrix),u_coord_matrix:new o.bD(I,l.u_coord_matrix),u_is_text:new o.bC(I,l.u_is_text),u_pitch_with_map:new o.bC(I,l.u_pitch_with_map),u_is_along_line:new o.bC(I,l.u_is_along_line),u_is_variable_anchor:new o.bC(I,l.u_is_variable_anchor),u_texsize:new o.bH(I,l.u_texsize),u_texture:new o.bC(I,l.u_texture),u_gamma_scale:new o.b5(I,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(I,l.u_device_pixel_ratio),u_is_halo:new o.bC(I,l.u_is_halo),u_translation:new o.bH(I,l.u_translation),u_pitched_scale:new o.b5(I,l.u_pitched_scale)}),symbolTextAndIcon:(I,l)=>({u_is_size_zoom_constant:new o.bC(I,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(I,l.u_is_size_feature_constant),u_size_t:new o.b5(I,l.u_size_t),u_size:new o.b5(I,l.u_size),u_camera_to_center_distance:new o.b5(I,l.u_camera_to_center_distance),u_pitch:new o.b5(I,l.u_pitch),u_rotate_symbol:new o.bC(I,l.u_rotate_symbol),u_aspect_ratio:new o.b5(I,l.u_aspect_ratio),u_fade_change:new o.b5(I,l.u_fade_change),u_label_plane_matrix:new o.bD(I,l.u_label_plane_matrix),u_coord_matrix:new o.bD(I,l.u_coord_matrix),u_is_text:new o.bC(I,l.u_is_text),u_pitch_with_map:new o.bC(I,l.u_pitch_with_map),u_is_along_line:new o.bC(I,l.u_is_along_line),u_is_variable_anchor:new o.bC(I,l.u_is_variable_anchor),u_texsize:new o.bH(I,l.u_texsize),u_texsize_icon:new o.bH(I,l.u_texsize_icon),u_texture:new o.bC(I,l.u_texture),u_texture_icon:new o.bC(I,l.u_texture_icon),u_gamma_scale:new o.b5(I,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(I,l.u_device_pixel_ratio),u_is_halo:new o.bC(I,l.u_is_halo),u_translation:new o.bH(I,l.u_translation),u_pitched_scale:new o.b5(I,l.u_pitched_scale)}),background:(I,l)=>({u_opacity:new o.b5(I,l.u_opacity),u_color:new o.bF(I,l.u_color)}),backgroundPattern:(I,l)=>({u_opacity:new o.b5(I,l.u_opacity),u_image:new o.bC(I,l.u_image),u_pattern_tl_a:new o.bH(I,l.u_pattern_tl_a),u_pattern_br_a:new o.bH(I,l.u_pattern_br_a),u_pattern_tl_b:new o.bH(I,l.u_pattern_tl_b),u_pattern_br_b:new o.bH(I,l.u_pattern_br_b),u_texsize:new o.bH(I,l.u_texsize),u_mix:new o.b5(I,l.u_mix),u_pattern_size_a:new o.bH(I,l.u_pattern_size_a),u_pattern_size_b:new o.bH(I,l.u_pattern_size_b),u_scale_a:new o.b5(I,l.u_scale_a),u_scale_b:new o.b5(I,l.u_scale_b),u_pixel_coord_upper:new o.bH(I,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(I,l.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b5(I,l.u_tile_units_to_pixels)}),terrain:(I,l)=>({u_texture:new o.bC(I,l.u_texture),u_ele_delta:new o.b5(I,l.u_ele_delta),u_fog_matrix:new o.bD(I,l.u_fog_matrix),u_fog_color:new o.bF(I,l.u_fog_color),u_fog_ground_blend:new o.b5(I,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b5(I,l.u_fog_ground_blend_opacity),u_horizon_color:new o.bF(I,l.u_horizon_color),u_horizon_fog_blend:new o.b5(I,l.u_horizon_fog_blend),u_is_globe_mode:new o.b5(I,l.u_is_globe_mode)}),terrainDepth:(I,l)=>({u_ele_delta:new o.b5(I,l.u_ele_delta)}),terrainCoords:(I,l)=>({u_texture:new o.bC(I,l.u_texture),u_terrain_coords_id:new o.b5(I,l.u_terrain_coords_id),u_ele_delta:new o.b5(I,l.u_ele_delta)}),projectionErrorMeasurement:(I,l)=>({u_input:new o.b5(I,l.u_input),u_output_expected:new o.b5(I,l.u_output_expected)}),atmosphere:(I,l)=>({u_sun_pos:new o.bG(I,l.u_sun_pos),u_atmosphere_blend:new o.b5(I,l.u_atmosphere_blend),u_globe_position:new o.bG(I,l.u_globe_position),u_globe_radius:new o.b5(I,l.u_globe_radius),u_inv_proj_matrix:new o.bD(I,l.u_inv_proj_matrix)}),sky:(I,l)=>({u_sky_color:new o.bF(I,l.u_sky_color),u_horizon_color:new o.bF(I,l.u_horizon_color),u_horizon:new o.bH(I,l.u_horizon),u_horizon_normal:new o.bH(I,l.u_horizon_normal),u_sky_horizon_blend:new o.b5(I,l.u_sky_horizon_blend),u_sky_blend:new o.b5(I,l.u_sky_blend)})};class _d{constructor(l,c,_){this.context=l;const w=l.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ua={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rl{constructor(l,c,_,w){this.length=c.length,this.attributes=_,this.itemSize=c.bytesPerElement,this.dynamicDraw=w,this.context=l;const P=l.gl;this.buffer=P.createBuffer(),l.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,c){for(let _=0;_<this.attributes.length;_++){const w=c.attributes[this.attributes[_].name];w!==void 0&&l.enableVertexAttribArray(w)}}setVertexAttribPointers(l,c,_){for(let w=0;w<this.attributes.length;w++){const P=this.attributes[w],z=c.attributes[P.name];z!==void 0&&l.vertexAttribPointer(z,P.components,l[ua[P.type]],!1,this.itemSize,P.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Xo{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ih extends Xo{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class vm extends Xo{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class bd extends Xo{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class _u extends Xo{getDefault(){return[!0,!0,!0,!0]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class kh extends Xo{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class gf extends Xo{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Ic extends Xo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const c=this.current;(l.func!==c.func||l.ref!==c.ref||l.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Xd extends Xo{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Th extends Xo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=l,this.dirty=!1}}class Ph extends Xo{getDefault(){return[0,1]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class eu extends Xo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=l,this.dirty=!1}}class Jt extends Xo{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class En extends Xo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.BLEND):c.disable(c.BLEND),this.current=l,this.dirty=!1}}class ln extends Xo{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Fr extends Xo{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Bi extends Xo{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class fo extends Xo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=l,this.dirty=!1}}class ra extends Xo{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class is extends Xo{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class TA extends Xo{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class yf extends Xo{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Gu extends Xo{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class bu extends Xo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class xu extends Xo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class zl extends Xo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Qu extends Xo{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class lo extends Xo{getDefault(){return null}set(l){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Io extends Xo{getDefault(){return null}set(l){var c;if(l===this.current&&!this.dirty)return;const _=this.gl;Di(_)?_.bindVertexArray(l):(c=_.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class xd extends Xo{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class wd extends Xo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class tu extends Xo{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class dA extends Xo{constructor(l,c){super(l),this.context=l,this.parent=c}getDefault(){return null}}class jl extends dA{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class sc extends dA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class hA extends dA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const nu="Framebuffer is not complete";class Xc{constructor(l,c,_,w,P){this.context=l,this.width=c,this.height=_;const z=l.gl,Y=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new jl(l,Y),w)this.depthAttachment=P?new hA(l,Y):new sc(l,Y);else if(P)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(nu)}destroy(){const l=this.context.gl,c=this.colorAttachment.get();if(c&&l.deleteTexture(c),this.depthAttachment){const _=this.depthAttachment.get();_&&l.deleteRenderbuffer(_)}l.deleteFramebuffer(this.framebuffer)}}class Md{constructor(l){var c,_;if(this.gl=l,this.clearColor=new Ih(this),this.clearDepth=new vm(this),this.clearStencil=new bd(this),this.colorMask=new _u(this),this.depthMask=new kh(this),this.stencilMask=new gf(this),this.stencilFunc=new Ic(this),this.stencilOp=new Xd(this),this.stencilTest=new Th(this),this.depthRange=new Ph(this),this.depthTest=new eu(this),this.depthFunc=new Jt(this),this.blend=new En(this),this.blendFunc=new ln(this),this.blendColor=new Fr(this),this.blendEquation=new Bi(this),this.cullFace=new fo(this),this.cullFaceSide=new ra(this),this.frontFace=new is(this),this.program=new TA(this),this.activeTexture=new yf(this),this.viewport=new Gu(this),this.bindFramebuffer=new bu(this),this.bindRenderbuffer=new xu(this),this.bindTexture=new zl(this),this.bindVertexBuffer=new Qu(this),this.bindElementBuffer=new lo(this),this.bindVertexArray=new Io(this),this.pixelStoreUnpack=new xd(this),this.pixelStoreUnpackPremultiplyAlpha=new wd(this),this.pixelStoreUnpackFlipY=new tu(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Di(l)){this.HALF_FLOAT=l.HALF_FLOAT;const w=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=l.RGBA16F)!==null&&c!==void 0?c:w==null?void 0:w.RGBA16F_EXT,this.RGB16F=(_=l.RGB16F)!==null&&_!==void 0?_:w==null?void 0:w.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const w=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=w==null?void 0:w.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,c){return new _d(this,l,c)}createVertexBuffer(l,c,_){return new rl(this,l,c,_)}createRenderbuffer(l,c,_){const w=this.gl,P=w.createRenderbuffer();return this.bindRenderbuffer.set(P),w.renderbufferStorage(w.RENDERBUFFER,l,c,_),this.bindRenderbuffer.set(null),P}createFramebuffer(l,c,_,w){return new Xc(this,l,c,_,w)}clear({color:l,depth:c,stencil:_}){const w=this.gl;let P=0;l&&(P|=w.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(P|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),_!==void 0&&(P|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),w.clear(P)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){o.bz(l.blendFunction,ho.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Di(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var c;return Di(this.gl)?this.gl.deleteVertexArray(l):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let Ga;function Jc(I,l,c,_,w){const P=I.context,z=I.transform,Y=P.gl,ee=I.useProgram("collisionBox"),ae=[];let xe=0,ke=0;for(let mt=0;mt<_.length;mt++){const vt=_[mt],Bt=l.getTile(vt).getBucket(c);if(!Bt)continue;const kt=w?Bt.textCollisionBox:Bt.iconCollisionBox,Rt=Bt.collisionCircleArray;Rt.length>0&&(ae.push({circleArray:Rt,circleOffset:ke,coord:vt}),xe+=Rt.length/4,ke=xe),kt&&ee.draw(P,Y.LINES,Yr.disabled,Vi.disabled,I.colorModeForRenderPass(),zi.disabled,vd(I.transform),I.style.map.terrain&&I.style.map.terrain.getTerrainData(vt),z.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,I.transform.zoom,null,null,kt.collisionVertexBuffer)}if(!w||!ae.length)return;const Ke=I.useProgram("collisionCircle"),$e=new o.bM;$e.resize(4*xe),$e._trim();let Xe=0;for(const mt of ae)for(let vt=0;vt<mt.circleArray.length/4;vt++){const Bt=4*vt,kt=mt.circleArray[Bt+0],Rt=mt.circleArray[Bt+1],zt=mt.circleArray[Bt+2],Tt=mt.circleArray[Bt+3];$e.emplace(Xe++,kt,Rt,zt,Tt,0),$e.emplace(Xe++,kt,Rt,zt,Tt,1),$e.emplace(Xe++,kt,Rt,zt,Tt,2),$e.emplace(Xe++,kt,Rt,zt,Tt,3)}(!Ga||Ga.length<2*xe)&&(Ga=function(mt){const vt=2*mt,Bt=new o.bO;Bt.resize(vt),Bt._trim();for(let kt=0;kt<vt;kt++){const Rt=6*kt;Bt.uint16[Rt+0]=4*kt+0,Bt.uint16[Rt+1]=4*kt+1,Bt.uint16[Rt+2]=4*kt+2,Bt.uint16[Rt+3]=4*kt+2,Bt.uint16[Rt+4]=4*kt+3,Bt.uint16[Rt+5]=4*kt+0}return Bt}(xe));const pt=P.createIndexBuffer(Ga,!0),ut=P.createVertexBuffer($e,o.bN.members,!0);for(const mt of ae){const vt=df(I.transform);Ke.draw(P,Y.TRIANGLES,Yr.disabled,Vi.disabled,I.colorModeForRenderPass(),zi.disabled,vt,I.style.map.terrain&&I.style.map.terrain.getTerrainData(mt.coord),null,c.id,ut,pt,o.aD.simpleSegment(0,2*mt.circleOffset,mt.circleArray.length,mt.circleArray.length/2),null,I.transform.zoom,null,null,null)}ut.destroy(),pt.destroy()}const Sd=o.aq(new Float32Array(16));function ac(I,l,c,_,w,P){const{horizontalAlign:z,verticalAlign:Y}=o.ay(I);return new o.P((-(z-.5)*l/w+_[0])*P,(-(Y-.5)*c/w+_[1])*P)}function Kh(I,l,c,_,w,P){const z=l.tileAnchorPoint.add(new o.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let Y=_.mult(P);c||(Y=Y.rotate(-w));const ee=z.add(Y);return Gt(ee.x,ee.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(c){const Y=er(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(I),ee=Math.atan(Y.y/Y.x)+(Y.x<0?Math.PI:0);return I.add(_.rotate(ee))}return I.add(_)}function qu(I,l,c,_,w,P,z,Y,ee,ae,xe,ke){const Ke=I.text.placedSymbolArray,$e=I.text.dynamicLayoutVertexArray,Xe=I.icon.dynamicLayoutVertexArray,pt={};$e.clear();for(let ut=0;ut<Ke.length;ut++){const mt=Ke.get(ut),vt=mt.hidden||!mt.crossTileID||I.allowVerticalPlacement&&!mt.placedOrientation?null:_[mt.crossTileID];if(vt){const Bt=new o.P(mt.anchorX,mt.anchorY),kt={getElevation:ke,width:w.width,height:w.height,pitchedLabelPlaneMatrix:P,lineVertexArray:null,pitchWithMap:c,transform:w,projectionCache:null,tileAnchorPoint:Bt,translation:ae,unwrappedTileID:xe},Rt=c?Ur(Bt.x,Bt.y,kt):er(Bt.x,Bt.y,kt),zt=jt(w.cameraToCenterDistance,Rt.signedDistanceFromCamera);let Tt=o.aj(I.textSizeData,Y,mt)*zt/o.as;c&&(Tt*=I.tilePixelRatio/z);const{width:nn,height:Zt,anchor:Mn,textOffset:Bn,textBoxScale:yn}=vt,In=ac(Mn,nn,Zt,Bn,yn,Tt),Nn=w.getPitchedTextCorrection(Bt.x+ae[0],Bt.y+ae[1],xe),Fn=Kh(Rt.point,kt,l,In,-w.bearingInRadians,Nn),pr=I.allowVerticalPlacement&&mt.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let Ti=0;Ti<mt.numGlyphs;Ti++)o.ak($e,Fn,pr);ee&&mt.associatedIconIndex>=0&&(pt[mt.associatedIconIndex]={shiftedAnchor:Fn,angle:pr})}else Yi(mt.numGlyphs,$e)}if(ee){Xe.clear();const ut=I.icon.placedSymbolArray;for(let mt=0;mt<ut.length;mt++){const vt=ut.get(mt);if(vt.hidden)Yi(vt.numGlyphs,Xe);else{const Bt=pt[mt];if(Bt)for(let kt=0;kt<vt.numGlyphs;kt++)o.ak(Xe,Bt.shiftedAnchor,Bt.angle);else Yi(vt.numGlyphs,Xe)}}I.icon.dynamicLayoutVertexBuffer.updateData(Xe)}I.text.dynamicLayoutVertexBuffer.updateData($e)}function ed(I,l,c){return c.iconsInText&&l?"symbolTextAndIcon":I?"symbolSDF":"symbolIcon"}function lc(I,l,c,_,w,P,z,Y,ee,ae,xe,ke,Ke){const $e=I.context,Xe=$e.gl,pt=I.transform,ut=Y==="map",mt=ee==="map",vt=Y!=="viewport"&&c.layout.get("symbol-placement")!=="point",Bt=ut&&!mt&&!vt,kt=!c.layout.get("symbol-sort-key").isConstant();let Rt=!1;const zt=I.getDepthModeForSublayer(0,Yr.ReadOnly),Tt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nn=[],Zt=pt.getCircleRadiusCorrection();for(const Mn of _){const Bn=l.getTile(Mn),yn=Bn.getBucket(c);if(!yn)continue;const In=w?yn.text:yn.icon;if(!In||!In.segments.get().length||!In.hasVisibleVertices)continue;const Nn=In.programConfigurations.get(c.id),Fn=w||yn.sdfIcons,pr=w?yn.textSizeData:yn.iconSizeData,Ti=mt||pt.pitch!==0,Gi=I.useProgram(ed(Fn,w,yn),Nn),Uo=o.ah(pr,pt.zoom),Si=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Mn);let ps,To,Po,Co,il=[0,0],Jo=null;if(w)To=Bn.glyphAtlasTexture,Po=Xe.LINEAR,ps=Bn.glyphAtlasTexture.size,yn.iconsInText&&(il=Bn.imageAtlasTexture.size,Jo=Bn.imageAtlasTexture,Co=Ti||I.options.rotating||I.options.zooming||pr.kind==="composite"||pr.kind==="camera"?Xe.LINEAR:Xe.NEAREST);else{const ss=c.layout.get("icon-size").constantOr(0)!==1||yn.iconsNeedLinear;To=Bn.imageAtlasTexture,Po=Fn||I.options.rotating||I.options.zooming||ss||Ti?Xe.LINEAR:Xe.NEAREST,ps=Bn.imageAtlasTexture.size}const es=o.at(Bn,1,I.transform.zoom),ol=ct(ut,I.transform,es),CA=o.H();o.an(CA,ol);const uu=dt(mt,ut,I.transform,es),Pa=o.au(pt,Bn,P,z),El=pt.getProjectionData({overscaledTileID:Mn,applyGlobeMatrix:!Ke,applyTerrainMatrix:!0}),GA=Tt&&yn.hasTextData(),_A=c.layout.get("icon-text-fit")!=="none"&&GA&&yn.hasIconData();if(vt){const ss=I.style.map.terrain?(Ou,Vs)=>I.style.map.terrain.getElevation(Mn,Ou,Vs):null,as=c.layout.get("text-rotation-alignment")==="map";Tn(yn,I,w,ol,CA,mt,ae,as,Mn.toUnwrapped(),pt.width,pt.height,Pa,ss)}const QA=w&&Tt||_A,ca=vt||QA?Sd:mt?ol:I.transform.clipSpaceToPixelsMatrix,Bl=Fn&&c.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ka;Ka=Fn?yn.iconsInText?Ul(pr.kind,Uo,Bt,mt,vt,QA,I,ca,uu,Pa,ps,il,Zt):cA(pr.kind,Uo,Bt,mt,vt,QA,I,ca,uu,Pa,w,ps,0,Zt):Wu(pr.kind,Uo,Bt,mt,vt,QA,I,ca,uu,Pa,w,ps,Zt);const Au={program:Gi,buffers:In,uniformValues:Ka,projectionData:El,atlasTexture:To,atlasTextureIcon:Jo,atlasInterpolation:Po,atlasInterpolationIcon:Co,isSDF:Fn,hasHalo:Bl};if(kt&&yn.canOverlap){Rt=!0;const ss=In.segments.get();for(const as of ss)nn.push({segments:new o.aD([as]),sortKey:as.sortKey,state:Au,terrainData:Si})}else nn.push({segments:In.segments,sortKey:0,state:Au,terrainData:Si})}Rt&&nn.sort((Mn,Bn)=>Mn.sortKey-Bn.sortKey);for(const Mn of nn){const Bn=Mn.state;if($e.activeTexture.set(Xe.TEXTURE0),Bn.atlasTexture.bind(Bn.atlasInterpolation,Xe.CLAMP_TO_EDGE),Bn.atlasTextureIcon&&($e.activeTexture.set(Xe.TEXTURE1),Bn.atlasTextureIcon&&Bn.atlasTextureIcon.bind(Bn.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),Bn.isSDF){const yn=Bn.uniformValues;Bn.hasHalo&&(yn.u_is_halo=1,Dh(Bn.buffers,Mn.segments,c,I,Bn.program,zt,xe,ke,yn,Bn.projectionData,Mn.terrainData)),yn.u_is_halo=0}Dh(Bn.buffers,Mn.segments,c,I,Bn.program,zt,xe,ke,Bn.uniformValues,Bn.projectionData,Mn.terrainData)}}function Dh(I,l,c,_,w,P,z,Y,ee,ae,xe){const ke=_.context;w.draw(ke,ke.gl.TRIANGLES,P,z,Y,zi.backCCW,ee,xe,ae,c.id,I.layoutVertexBuffer,I.indexBuffer,l,c.paint,_.transform.zoom,I.programConfigurations.get(c.id),I.dynamicLayoutVertexBuffer,I.opacityVertexBuffer)}function hs(I,l,c,_,w){const P=I.context,z=P.gl,Y=Vi.disabled,ee=new ho([z.ONE,z.ONE],o.b4.transparent,[!0,!0,!0,!0]),ae=l.getBucket(c);if(!ae)return;const xe=_.key;let ke=c.heatmapFbos.get(xe);ke||(ke=PA(P,l.tileSize,l.tileSize),c.heatmapFbos.set(xe,ke)),P.bindFramebuffer.set(ke.framebuffer),P.viewport.set([0,0,l.tileSize,l.tileSize]),P.clear({color:o.b4.transparent});const Ke=ae.programConfigurations.get(c.id),$e=I.useProgram("heatmap",Ke,!w),Xe=I.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pt=I.style.map.terrain.getTerrainData(_);$e.draw(P,z.TRIANGLES,Yr.disabled,Y,ee,zi.disabled,hf(l,I.transform.zoom,c.paint.get("heatmap-intensity"),1),pt,Xe,c.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,c.paint,I.transform.zoom,Ke)}function kc(I,l,c,_,w){const P=I.context,z=P.gl,Y=I.transform;P.setColorMode(I.colorModeForRenderPass());const ee=Yu(P,l),ae=c.key,xe=l.heatmapFbos.get(ae);if(!xe)return;P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,xe.colorAttachment.get()),P.activeTexture.set(z.TEXTURE1),ee.bind(z.LINEAR,z.CLAMP_TO_EDGE);const ke=Y.getProjectionData({overscaledTileID:c,applyTerrainMatrix:w,applyGlobeMatrix:!_});I.useProgram("heatmapTexture").draw(P,z.TRIANGLES,Yr.disabled,Vi.disabled,I.colorModeForRenderPass(),zi.disabled,oc(I,l,0,1),null,ke,l.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments,l.paint,Y.zoom),xe.destroy(),l.heatmapFbos.delete(ae)}function PA(I,l,c){var _,w;const P=I.gl,z=P.createTexture();P.bindTexture(P.TEXTURE_2D,z),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,P.CLAMP_TO_EDGE),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,P.LINEAR);const Y=(_=I.HALF_FLOAT)!==null&&_!==void 0?_:P.UNSIGNED_BYTE,ee=(w=I.RGBA16F)!==null&&w!==void 0?w:P.RGBA;P.texImage2D(P.TEXTURE_2D,0,ee,l,c,0,P.RGBA,Y,null);const ae=I.createFramebuffer(l,c,!1,!1);return ae.colorAttachment.set(z),ae}function Yu(I,l){return l.colorRampTexture||(l.colorRampTexture=new ie(I,l.colorRamp,I.gl.RGBA)),l.colorRampTexture}function Jd(I,l,c,_,w){if(!c||!_||!_.imageAtlas)return;const P=_.imageAtlas.patternPositions;let z=P[c.to.toString()],Y=P[c.from.toString()];if(!z&&Y&&(z=Y),!Y&&z&&(Y=z),!z||!Y){const ee=w.getPaintProperty(l);z=P[ee],Y=P[ee]}z&&Y&&I.setConstantPatternPositions(z,Y)}function Ed(I,l,c,_,w,P,z,Y){const ee=I.context.gl,ae="fill-pattern",xe=c.paint.get(ae),ke=xe&&xe.constantOr(1),Ke=c.getCrossfadeParameters();let $e,Xe,pt,ut,mt;const vt=I.transform,Bt=c.paint.get("fill-translate"),kt=c.paint.get("fill-translate-anchor");z?(Xe=ke&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$e=ee.LINES):(Xe=ke?"fillPattern":"fill",$e=ee.TRIANGLES);const Rt=xe.constantOr(null);for(const zt of _){const Tt=l.getTile(zt);if(ke&&!Tt.patternsLoaded())continue;const nn=Tt.getBucket(c);if(!nn)continue;const Zt=nn.programConfigurations.get(c.id),Mn=I.useProgram(Xe,Zt),Bn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(zt);ke&&(I.context.activeTexture.set(ee.TEXTURE0),Tt.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),Zt.updatePaintBuffers(Ke)),Jd(Zt,ae,Rt,Tt,c);const yn=vt.getProjectionData({overscaledTileID:zt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),In=o.au(vt,Tt,Bt,kt);if(z){ut=nn.indexBuffer2,mt=nn.segments2;const Fn=[ee.drawingBufferWidth,ee.drawingBufferHeight];pt=Xe==="fillOutlinePattern"&&ke?cf(I,Ke,Tt,Fn,In):na(Fn,In)}else ut=nn.indexBuffer,mt=nn.segments,pt=ke?ic(I,Ke,Tt,In):{u_fill_translate:In};let Nn;if(I.renderPass==="translucent"&&Y){const[Fn]=I.getStencilConfigForOverlapAndUpdateStencilID(_);Nn=Fn[zt.overscaledZ]}else Nn=I.stencilModeForClipping(zt);Mn.draw(I.context,$e,w,Nn,P,zi.backCCW,pt,Bn,yn,c.id,nn.layoutVertexBuffer,ut,mt,c.paint,I.transform.zoom,Zt)}}function uc(I,l,c,_,w,P,z,Y){const ee=I.context,ae=ee.gl,xe="fill-extrusion-pattern",ke=c.paint.get(xe),Ke=ke.constantOr(1),$e=c.getCrossfadeParameters(),Xe=c.paint.get("fill-extrusion-opacity"),pt=ke.constantOr(null),ut=I.transform;for(const mt of _){const vt=l.getTile(mt),Bt=vt.getBucket(c);if(!Bt)continue;const kt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(mt),Rt=Bt.programConfigurations.get(c.id),zt=I.useProgram(Ke?"fillExtrusionPattern":"fillExtrusion",Rt);Ke&&(I.context.activeTexture.set(ae.TEXTURE0),vt.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Rt.updatePaintBuffers($e));const Tt=ut.getProjectionData({overscaledTileID:mt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});Jd(Rt,xe,pt,vt,c);const nn=o.au(ut,vt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Zt=c.paint.get("fill-extrusion-vertical-gradient"),Mn=Ke?Kp(I,Zt,Xe,nn,mt,$e,vt):yd(I,Zt,Xe,nn);zt.draw(ee,ee.gl.TRIANGLES,w,P,z,zi.backCCW,Mn,kt,Tt,c.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,c.paint,I.transform.zoom,Rt,I.style.map.terrain&&Bt.centroidVertexBuffer)}}function td(I,l,c,_,w,P,z,Y,ee){var ae;const xe=I.style.projection,ke=I.context,Ke=I.transform,$e=ke.gl,Xe=I.useProgram("hillshade"),pt=!I.options.moving;for(const ut of _){const mt=l.getTile(ut),vt=mt.fbo;if(!vt)continue;const Bt=xe.getMeshFromTileID(ke,ut.canonical,Y,!0,"raster"),kt=(ae=I.style.map.terrain)===null||ae===void 0?void 0:ae.getTerrainData(ut);ke.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_2D,vt.colorAttachment.get());const Rt=Ke.getProjectionData({overscaledTileID:ut,aligned:pt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0});Xe.draw(ke,$e.TRIANGLES,P,w[ut.overscaledZ],z,zi.backCCW,wh(I,mt,c),kt,Rt,c.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}const KA=[new o.P(0,0),new o.P(o.X,0),new o.P(o.X,o.X),new o.P(0,o.X)];function Oi(I,l,c,_,w,P,z,Y,ee=!1,ae=!1){const xe=_[_.length-1].overscaledZ,ke=I.context,Ke=ke.gl,$e=I.useProgram("raster"),Xe=I.transform,pt=I.style.projection,ut=I.colorModeForRenderPass(),mt=!I.options.moving;for(const vt of _){const Bt=I.getDepthModeForSublayer(vt.overscaledZ-xe,c.paint.get("raster-opacity")===1?Yr.ReadWrite:Yr.ReadOnly,Ke.LESS),kt=l.getTile(vt);kt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Rt=l.findLoadedParent(vt,0),zt=l.findLoadedSibling(vt),Tt=Us(kt,Rt||zt||null,l,c,I.transform,I.style.map.terrain);let nn,Zt;const Mn=c.paint.get("raster-resampling")==="nearest"?Ke.NEAREST:Ke.LINEAR;ke.activeTexture.set(Ke.TEXTURE0),kt.texture.bind(Mn,Ke.CLAMP_TO_EDGE,Ke.LINEAR_MIPMAP_NEAREST),ke.activeTexture.set(Ke.TEXTURE1),Rt?(Rt.texture.bind(Mn,Ke.CLAMP_TO_EDGE,Ke.LINEAR_MIPMAP_NEAREST),nn=Math.pow(2,Rt.tileID.overscaledZ-kt.tileID.overscaledZ),Zt=[kt.tileID.canonical.x*nn%1,kt.tileID.canonical.y*nn%1]):kt.texture.bind(Mn,Ke.CLAMP_TO_EDGE,Ke.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&ke.extTextureFilterAnisotropic&&I.transform.pitch>20&&Ke.texParameterf(Ke.TEXTURE_2D,ke.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ke.extTextureFilterAnisotropicMax);const Bn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(vt),yn=Xe.getProjectionData({overscaledTileID:vt,aligned:mt,applyGlobeMatrix:!ae,applyTerrainMatrix:!0}),In=Bh(Zt||[0,0],nn||1,Tt,c,Y),Nn=pt.getMeshFromTileID(ke,vt.canonical,P,z,"raster");$e.draw(ke,Ke.TRIANGLES,Bt,w?w[vt.overscaledZ]:Vi.disabled,ut,ee?zi.frontCCW:zi.backCCW,In,Bn,yn,c.id,Nn.vertexBuffer,Nn.indexBuffer,Nn.segments)}}function Us(I,l,c,_,w,P){const z=_.paint.get("raster-fade-duration");if(!P&&z>0){const Y=O.now(),ee=(Y-I.timeAdded)/z,ae=l?(Y-l.timeAdded)/z:-1,xe=c.getSource(),ke=tr(w,{tileSize:xe.tileSize,roundZoom:xe.roundZoom}),Ke=!l||Math.abs(l.tileID.overscaledZ-ke)>Math.abs(I.tileID.overscaledZ-ke),$e=Ke&&I.refreshedUponExpiration?1:o.ab(Ke?ee:1-ae,0,1);return I.refreshedUponExpiration&&ee>=1&&(I.refreshedUponExpiration=!1),l?{opacity:1,mix:1-$e}:{opacity:$e,mix:0}}return{opacity:1,mix:0}}const fA=new o.b4(1,0,0,1),Bd=new o.b4(0,1,0,1),nd=new o.b4(0,0,1,1),Tc=new o.b4(1,0,1,1),DA=new o.b4(0,1,1,1);function dl(I,l,c,_){hl(I,0,l+c/2,I.transform.width,c,_)}function pA(I,l,c,_){hl(I,l-c/2,0,c,I.transform.height,_)}function hl(I,l,c,_,w,P){const z=I.context,Y=z.gl;Y.enable(Y.SCISSOR_TEST),Y.scissor(l*I.pixelRatio,c*I.pixelRatio,_*I.pixelRatio,w*I.pixelRatio),z.clear({color:P}),Y.disable(Y.SCISSOR_TEST)}function Ac(I,l,c){const _=I.context,w=_.gl,P=I.useProgram("debug"),z=Yr.disabled,Y=Vi.disabled,ee=I.colorModeForRenderPass(),ae="$debug",xe=I.style.map.terrain&&I.style.map.terrain.getTerrainData(c);_.activeTexture.set(w.TEXTURE0);const ke=l.getTileByID(c.key).latestRawTileData,Ke=Math.floor((ke&&ke.byteLength||0)/1024),$e=l.getTile(c).tileSize,Xe=512/Math.min($e,512)*(c.overscaledZ/I.transform.zoom)*.5;let pt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(pt+=` => ${c.overscaledZ}`),function(mt,vt){mt.initDebugOverlayCanvas();const Bt=mt.debugOverlayCanvas,kt=mt.context.gl,Rt=mt.debugOverlayCanvas.getContext("2d");Rt.clearRect(0,0,Bt.width,Bt.height),Rt.shadowColor="white",Rt.shadowBlur=2,Rt.lineWidth=1.5,Rt.strokeStyle="white",Rt.textBaseline="top",Rt.font="bold 36px Open Sans, sans-serif",Rt.fillText(vt,5,5),Rt.strokeText(vt,5,5),mt.debugOverlayTexture.update(Bt),mt.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(I,`${pt} ${Ke}kB`);const ut=I.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});P.draw(_,w.TRIANGLES,z,Y,ho.alphaBlended,zi.disabled,Cd(o.b4.transparent,Xe),null,ut,ae,I.debugBuffer,I.quadTriangleIndexBuffer,I.debugSegments),P.draw(_,w.LINE_STRIP,z,Y,ee,zi.disabled,Cd(o.b4.red),xe,ut,ae,I.debugBuffer,I.tileBorderIndexBuffer,I.debugSegments)}function $u(I,l,c,_){const{isRenderingGlobe:w}=_,P=I.context,z=P.gl,Y=I.transform,ee=I.colorModeForRenderPass(),ae=I.getDepthModeFor3D(),xe=I.useProgram("terrain");P.bindFramebuffer.set(null),P.viewport.set([0,0,I.width,I.height]);for(const ke of c){const Ke=l.getTerrainMesh(ke.tileID),$e=I.renderToTexture.getTexture(ke),Xe=l.getTerrainData(ke.tileID);P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,$e.texture);const pt=l.getMeshFrameDelta(Y.zoom),ut=Y.calculateFogMatrix(ke.tileID.toUnwrapped()),mt=gd(pt,ut,I.style.sky,Y.pitch,w),vt=Y.getProjectionData({overscaledTileID:ke.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});xe.draw(P,z.TRIANGLES,ae,Vi.disabled,ee,zi.backCCW,mt,Xe,vt,"terrain",Ke.vertexBuffer,Ke.indexBuffer,Ke.segments)}}function Od(I,l){if(!l.mesh){const c=new o.aC;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const _=new o.aE;_.emplaceBack(0,1,2),_.emplaceBack(0,2,3),l.mesh=new nl(I.createVertexBuffer(c,Ai.members),I.createIndexBuffer(_),o.aD.simpleSegment(0,0,c.length,_.length))}return l.mesh}class rd{constructor(l,c){this.context=new Md(l),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.aq(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=se.maxUnderzooming+se.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fs}resize(l,c,_){if(this.width=Math.floor(l*_),this.height=Math.floor(c*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const l=this.context,c=new o.aC;c.emplaceBack(0,0),c.emplaceBack(o.X,0),c.emplaceBack(0,o.X),c.emplaceBack(o.X,o.X),this.tileExtentBuffer=l.createVertexBuffer(c,Ai.members),this.tileExtentSegments=o.aD.simpleSegment(0,0,4,2);const _=new o.aC;_.emplaceBack(0,0),_.emplaceBack(o.X,0),_.emplaceBack(0,o.X),_.emplaceBack(o.X,o.X),this.debugBuffer=l.createVertexBuffer(_,Ai.members),this.debugSegments=o.aD.simpleSegment(0,0,4,5);const w=new o.bT;w.emplaceBack(0,0,0,0),w.emplaceBack(o.X,0,o.X,0),w.emplaceBack(0,o.X,0,o.X),w.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=l.createVertexBuffer(w,Ls.members),this.rasterBoundsSegments=o.aD.simpleSegment(0,0,4,2);const P=new o.aC;P.emplaceBack(0,0),P.emplaceBack(o.X,0),P.emplaceBack(0,o.X),P.emplaceBack(o.X,o.X),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(P,Ai.members),this.rasterBoundsSegmentsPosOnly=o.aD.simpleSegment(0,0,4,5);const z=new o.aC;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(z,Ai.members),this.viewportSegments=o.aD.simpleSegment(0,0,4,2);const Y=new o.bU;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(Y);const ee=new o.aE;ee.emplaceBack(1,0,2),ee.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(ee);const ae=this.context.gl;this.stencilClearMode=new Vi({func:ae.ALWAYS,mask:0},0,255,ae.ZERO,ae.ZERO,ae.ZERO),this.tileExtentMesh=new nl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,c=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.H();o.bL(_,0,this.width,this.height,0,0,1),o.K(_,_,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const w={mainMatrix:_,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:_};this.useProgram("clippingMask",null,!0).draw(l,c.TRIANGLES,Yr.disabled,this.stencilClearMode,ho.disabled,zi.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,c,_){if(this.currentStencilSource===l.source||!l.isTileClipped()||!c||!c.length)return;this.currentStencilSource=l.source,this.nextStencilID+c.length>256&&this.clearStencil();const w=this.context;w.setColorMode(ho.disabled),w.setDepthMode(Yr.disabled);const P={};for(const z of c)P[z.key]=this.nextStencilID++;this._renderTileMasks(P,c,_,!0),this._renderTileMasks(P,c,_,!1),this._tileClippingMaskIDs=P}_renderTileMasks(l,c,_,w){const P=this.context,z=P.gl,Y=this.style.projection,ee=this.transform,ae=this.useProgram("clippingMask");for(const xe of c){const ke=l[xe.key],Ke=this.style.map.terrain&&this.style.map.terrain.getTerrainData(xe),$e=Y.getMeshFromTileID(this.context,xe.canonical,w,!0,"stencil"),Xe=ee.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0});ae.draw(P,z.TRIANGLES,Yr.disabled,new Vi({func:z.ALWAYS,mask:0},ke,255,z.KEEP,z.KEEP,z.REPLACE),ho.disabled,_?zi.disabled:zi.backCCW,null,Ke,Xe,"$clipping",$e.vertexBuffer,$e.indexBuffer,$e.segments)}}_renderTilesDepthBuffer(){const l=this.context,c=l.gl,_=this.style.projection,w=this.transform,P=this.useProgram("depth"),z=this.getDepthModeFor3D(),Y=Oe(w,{tileSize:w.tileSize});for(const ee of Y){const ae=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ee),xe=_.getMeshFromTileID(this.context,ee.canonical,!0,!0,"raster"),ke=w.getProjectionData({overscaledTileID:ee,applyGlobeMatrix:!0,applyTerrainMatrix:!0});P.draw(l,c.TRIANGLES,z,Vi.disabled,ho.disabled,zi.backCCW,null,ae,ke,"$clipping",xe.vertexBuffer,xe.indexBuffer,xe.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,c=this.context.gl;return new Vi({func:c.NOTEQUAL,mask:255},l,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(l){const c=this.context.gl;return new Vi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const c=this.context.gl,_=l.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),w=_[_.length-1].overscaledZ,P=_[0].overscaledZ-w+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();const z={};for(let Y=0;Y<P;Y++)z[Y+w]=new Vi({func:c.GEQUAL,mask:255},Y+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=P,[z,_]}return[{[w]:Vi.disabled},_]}stencilConfigForOverlapTwoPass(l){const c=this.context.gl,_=l.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),w=_[_.length-1].overscaledZ,P=_[0].overscaledZ-w+1;if(this.clearStencil(),P>1){const z={},Y={};for(let ee=0;ee<P;ee++)z[ee+w]=new Vi({func:c.GREATER,mask:255},P+1+ee,255,c.KEEP,c.KEEP,c.REPLACE),Y[ee+w]=new Vi({func:c.GREATER,mask:255},1+ee,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*P+1,[z,Y,_]}return this.nextStencilID=3,[{[w]:new Vi({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[w]:new Vi({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new ho([l.CONSTANT_COLOR,l.ONE],new o.b4(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ho.unblended:ho.alphaBlended}getDepthModeForSublayer(l,c,_){if(!this.opaquePassEnabledForLayer())return Yr.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Yr(_||this.context.gl.LEQUAL,c,[w,w])}getDepthModeFor3D(){return new Yr(this.context.gl.LEQUAL,Yr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,c){var _,w;this.style=l,this.options=c,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(O.now()),this.imageManager.beginFrame();const P=this.style._order,z=this.style.sourceCaches,Y={},ee={},ae={},xe={isRenderingToTexture:!1,isRenderingGlobe:((_=l.projection)===null||_===void 0?void 0:_.transitionState)>0};for(const Ke in z){const $e=z[Ke];$e.used&&$e.prepare(this.context),Y[Ke]=$e.getVisibleCoordinates(!1),ee[Ke]=Y[Ke].slice().reverse(),ae[Ke]=$e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ke=0;Ke<P.length;Ke++)if(this.style._layers[P[Ke]].is3D()){this.opaquePassCutoff=Ke;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Ke of P){const $e=this.style._layers[Ke];if(!$e.hasOffscreenPass()||$e.isHidden(this.transform.zoom))continue;const Xe=ee[$e.source];($e.type==="custom"||Xe.length)&&this.renderLayer(this,z[$e.source],$e,Xe,xe)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:Ke=>this.useProgram(Ke)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b4.black:o.b4.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Ke,$e){const Xe=Ke.context,pt=Xe.gl,ut=((zt,Tt,nn)=>{const Zt=Math.cos(Tt.rollInRadians),Mn=Math.sin(Tt.rollInRadians),Bn=vo(Tt),yn=Tt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:zt.properties.get("sky-color"),u_horizon_color:zt.properties.get("horizon-color"),u_horizon:[(Tt.width/2-Bn*Mn)*nn,(Tt.height/2+Bn*Zt)*nn],u_horizon_normal:[-Mn,Zt],u_sky_horizon_blend:zt.properties.get("sky-horizon-blend")*Tt.height/2*nn,u_sky_blend:yn}})($e,Ke.style.map.transform,Ke.pixelRatio),mt=new Yr(pt.LEQUAL,Yr.ReadWrite,[0,1]),vt=Vi.disabled,Bt=Ke.colorModeForRenderPass(),kt=Ke.useProgram("sky"),Rt=Od(Xe,$e);kt.draw(Xe,pt.TRIANGLES,mt,vt,Bt,zi.disabled,ut,null,void 0,"sky",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=P.length-1;this.currentLayer>=0;this.currentLayer--){const Ke=this.style._layers[P[this.currentLayer]],$e=z[Ke.source],Xe=Y[Ke.source];this._renderTileClippingMasks(Ke,Xe,!1),this.renderLayer(this,$e,Ke,Xe,xe)}this.renderPass="translucent";let ke=!1;for(this.currentLayer=0;this.currentLayer<P.length;this.currentLayer++){const Ke=this.style._layers[P[this.currentLayer]],$e=z[Ke.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Ke,xe))continue;this.opaquePassEnabledForLayer()||ke||(ke=!0,xe.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Xe=(Ke.type==="symbol"?ae:ee)[Ke.source];this._renderTileClippingMasks(Ke,Y[Ke.source],!1),this.renderLayer(this,$e,Ke,Xe,xe)}if(xe.isRenderingGlobe&&function(Ke,$e,Xe){const pt=Ke.context,ut=pt.gl,mt=Ke.useProgram("atmosphere"),vt=new Yr(ut.LEQUAL,Yr.ReadOnly,[0,1]),Bt=Ke.transform,kt=function(yn,In){const Nn=yn.properties.get("position"),Fn=[-Nn.x,-Nn.y,-Nn.z],pr=o.aq(new Float64Array(16));return yn.properties.get("anchor")==="map"&&(o.aX(pr,pr,In.rollInRadians),o.aY(pr,pr,-In.pitchInRadians),o.aX(pr,pr,In.bearingInRadians),o.aY(pr,pr,In.center.lat*Math.PI/180),o.bj(pr,pr,-In.center.lng*Math.PI/180)),o.bS(Fn,Fn,pr),Fn}(Xe,Ke.transform),Rt=Bt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),zt=$e.properties.get("atmosphere-blend")*Rt.projectionTransition;if(zt===0)return;const Tt=ji(Bt.worldSize,Bt.center.lat),nn=Bt.inverseProjectionMatrix,Zt=new Float64Array(4);Zt[3]=1,o.al(Zt,Zt,Bt.modelViewProjectionMatrix),Zt[0]/=Zt[3],Zt[1]/=Zt[3],Zt[2]/=Zt[3],Zt[3]=1,o.al(Zt,Zt,nn),Zt[0]/=Zt[3],Zt[1]/=Zt[3],Zt[2]/=Zt[3],Zt[3]=1;const Mn=((yn,In,Nn,Fn,pr)=>({u_sun_pos:yn,u_atmosphere_blend:In,u_globe_position:Nn,u_globe_radius:Fn,u_inv_proj_matrix:pr}))(kt,zt,[Zt[0],Zt[1],Zt[2]],Tt,nn),Bn=Od(pt,$e);mt.draw(pt,ut.TRIANGLES,vt,Vi.disabled,ho.alphaBlended,zi.disabled,Mn,null,null,"atmosphere",Bn.vertexBuffer,Bn.indexBuffer,Bn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Ke=function($e,Xe){let pt=null;const ut=Object.values($e._layers).flatMap(kt=>kt.source&&!kt.isHidden(Xe)?[$e.sourceCaches[kt.source]]:[]),mt=ut.filter(kt=>kt.getSource().type==="vector"),vt=ut.filter(kt=>kt.getSource().type!=="vector"),Bt=kt=>{(!pt||pt.getSource().maxzoom<kt.getSource().maxzoom)&&(pt=kt)};return mt.forEach(kt=>Bt(kt)),pt||vt.forEach(kt=>Bt(kt)),pt}(this.style,this.transform.zoom);Ke&&function($e,Xe,pt){for(let ut=0;ut<pt.length;ut++)Ac($e,Xe,pt[ut])}(this,Ke,Ke.getVisibleCoordinates())}this.options.showPadding&&function(Ke){const $e=Ke.transform.padding;dl(Ke,Ke.transform.height-($e.top||0),3,fA),dl(Ke,$e.bottom||0,3,Bd),pA(Ke,$e.left||0,3,nd),pA(Ke,Ke.transform.width-($e.right||0),3,Tc);const Xe=Ke.transform.centerPoint;(function(pt,ut,mt,vt){hl(pt,ut-1,mt-10,2,20,vt),hl(pt,ut-10,mt-1,20,2,vt)})(Ke,Xe.x,Ke.transform.height-Xe.y,DA)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=l?!o.bV(c,_):!o.bW(c,_)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(o.bX(c,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(P,z){const Y=P.context,ee=Y.gl,ae=P.transform,xe=ho.unblended,ke=new Yr(ee.LEQUAL,Yr.ReadWrite,[0,1]),Ke=z.sourceCache.getRenderableTiles(),$e=P.useProgram("terrainDepth");Y.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),Y.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),Y.clear({color:o.b4.transparent,depth:1});for(const Xe of Ke){const pt=z.getTerrainMesh(Xe.tileID),ut=z.getTerrainData(Xe.tileID),mt=ae.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),vt={u_ele_delta:z.getMeshFrameDelta(ae.zoom)};$e.draw(Y,ee.TRIANGLES,ke,Vi.disabled,xe,zi.backCCW,vt,ut,mt,"terrain",pt.vertexBuffer,pt.indexBuffer,pt.segments)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,P.width,P.height])}(this,this.style.map.terrain),function(P,z){const Y=P.context,ee=Y.gl,ae=P.transform,xe=ho.unblended,ke=new Yr(ee.LEQUAL,Yr.ReadWrite,[0,1]),Ke=z.getCoordsTexture(),$e=z.sourceCache.getRenderableTiles(),Xe=P.useProgram("terrainCoords");Y.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),Y.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),Y.clear({color:o.b4.transparent,depth:1}),z.coordsIndex=[];for(const pt of $e){const ut=z.getTerrainMesh(pt.tileID),mt=z.getTerrainData(pt.tileID);Y.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Ke.texture);const vt={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(ae.zoom)},Bt=ae.getProjectionData({overscaledTileID:pt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Xe.draw(Y,ee.TRIANGLES,ke,Vi.disabled,xe,zi.backCCW,vt,mt,Bt,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments),z.coordsIndex.push(pt.tileID.key)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,P.width,P.height])}(this,this.style.map.terrain))}renderLayer(l,c,_,w,P){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="custom"||(w||[]).length)&&(this.id=_.id,o.bY(_)?function(z,Y,ee,ae,xe,ke){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Ke}=ke,$e=Vi.disabled,Xe=z.colorModeForRenderPass();(ee._unevaluatedLayout.hasValue("text-variable-anchor")||ee._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pt,ut,mt,vt,Bt,kt,Rt,zt,Tt){const nn=ut.transform,Zt=ut.style.map.terrain,Mn=Bt==="map",Bn=kt==="map";for(const yn of pt){const In=vt.getTile(yn),Nn=In.getBucket(mt);if(!Nn||!Nn.text||!Nn.text.segments.get().length)continue;const Fn=o.ah(Nn.textSizeData,nn.zoom),pr=o.at(In,1,ut.transform.zoom),Ti=ct(Mn,ut.transform,pr),Gi=mt.layout.get("icon-text-fit")!=="none"&&Nn.hasIconData();{const Uo=Math.pow(2,nn.zoom-In.tileID.overscaledZ),Si=Zt?(ps,To)=>Zt.getElevation(yn,ps,To):null;qu(Nn,Mn,Bn,Tt,nn,Ti,Uo,Fn,Gi,o.au(nn,In,Rt,zt),yn.toUnwrapped(),Si)}}}(ae,z,ee,Y,ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),xe),ee.paint.get("icon-opacity").constantOr(1)!==0&&lc(z,Y,ee,ae,!1,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),ee.layout.get("icon-rotation-alignment"),ee.layout.get("icon-pitch-alignment"),ee.layout.get("icon-keep-upright"),$e,Xe,Ke),ee.paint.get("text-opacity").constantOr(1)!==0&&lc(z,Y,ee,ae,!0,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.layout.get("text-keep-upright"),$e,Xe,Ke),Y.map.showCollisionBoxes&&(Jc(z,Y,ee,ae,!0),Jc(z,Y,ee,ae,!1))}(l,c,_,w,this.style.placement.variableOffsets,P):o.bZ(_)?function(z,Y,ee,ae,xe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=xe,Ke=ee.paint.get("circle-opacity"),$e=ee.paint.get("circle-stroke-width"),Xe=ee.paint.get("circle-stroke-opacity"),pt=!ee.layout.get("circle-sort-key").isConstant();if(Ke.constantOr(1)===0&&($e.constantOr(1)===0||Xe.constantOr(1)===0))return;const ut=z.context,mt=ut.gl,vt=z.transform,Bt=z.getDepthModeForSublayer(0,Yr.ReadOnly),kt=Vi.disabled,Rt=z.colorModeForRenderPass(),zt=[],Tt=vt.getCircleRadiusCorrection();for(let nn=0;nn<ae.length;nn++){const Zt=ae[nn],Mn=Y.getTile(Zt),Bn=Mn.getBucket(ee);if(!Bn)continue;const yn=ee.paint.get("circle-translate"),In=ee.paint.get("circle-translate-anchor"),Nn=o.au(vt,Mn,yn,In),Fn=Bn.programConfigurations.get(ee.id),pr=z.useProgram("circle",Fn),Ti=Bn.layoutVertexBuffer,Gi=Bn.indexBuffer,Uo=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Zt),Si={programConfiguration:Fn,program:pr,layoutVertexBuffer:Ti,indexBuffer:Gi,uniformValues:xh(z,Mn,ee,Nn,Tt),terrainData:Uo,projectionData:vt.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!ke,applyTerrainMatrix:!0})};if(pt){const ps=Bn.segments.get();for(const To of ps)zt.push({segments:new o.aD([To]),sortKey:To.sortKey,state:Si})}else zt.push({segments:Bn.segments,sortKey:0,state:Si})}pt&&zt.sort((nn,Zt)=>nn.sortKey-Zt.sortKey);for(const nn of zt){const{programConfiguration:Zt,program:Mn,layoutVertexBuffer:Bn,indexBuffer:yn,uniformValues:In,terrainData:Nn,projectionData:Fn}=nn.state;Mn.draw(ut,mt.TRIANGLES,Bt,kt,Rt,zi.backCCW,In,Nn,Fn,ee.id,Bn,yn,nn.segments,ee.paint,z.transform.zoom,Zt)}}(l,c,_,w,P):o.b_(_)?function(z,Y,ee,ae,xe){if(ee.paint.get("heatmap-opacity")===0)return;const ke=z.context,{isRenderingToTexture:Ke,isRenderingGlobe:$e}=xe;if(z.style.map.terrain){for(const Xe of ae){const pt=Y.getTile(Xe);Y.hasRenderableParent(Xe)||(z.renderPass==="offscreen"?hs(z,pt,ee,Xe,$e):z.renderPass==="translucent"&&kc(z,ee,Xe,Ke,$e))}ke.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?function(Xe,pt,ut,mt){const vt=Xe.context,Bt=vt.gl,kt=Xe.transform,Rt=Vi.disabled,zt=new ho([Bt.ONE,Bt.ONE],o.b4.transparent,[!0,!0,!0,!0]);(function(Tt,nn,Zt){const Mn=Tt.gl;Tt.activeTexture.set(Mn.TEXTURE1),Tt.viewport.set([0,0,nn.width/4,nn.height/4]);let Bn=Zt.heatmapFbos.get(o.bP);Bn?(Mn.bindTexture(Mn.TEXTURE_2D,Bn.colorAttachment.get()),Tt.bindFramebuffer.set(Bn.framebuffer)):(Bn=PA(Tt,nn.width/4,nn.height/4),Zt.heatmapFbos.set(o.bP,Bn))})(vt,Xe,ut),vt.clear({color:o.b4.transparent});for(let Tt=0;Tt<mt.length;Tt++){const nn=mt[Tt];if(pt.hasRenderableParent(nn))continue;const Zt=pt.getTile(nn),Mn=Zt.getBucket(ut);if(!Mn)continue;const Bn=Mn.programConfigurations.get(ut.id),yn=Xe.useProgram("heatmap",Bn),In=kt.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Nn=kt.getCircleRadiusCorrection();yn.draw(vt,Bt.TRIANGLES,Yr.disabled,Rt,zt,zi.backCCW,hf(Zt,kt.zoom,ut.paint.get("heatmap-intensity"),Nn),null,In,ut.id,Mn.layoutVertexBuffer,Mn.indexBuffer,Mn.segments,ut.paint,kt.zoom,Bn)}vt.viewport.set([0,0,Xe.width,Xe.height])}(z,Y,ee,ae):z.renderPass==="translucent"&&function(Xe,pt){const ut=Xe.context,mt=ut.gl;ut.setColorMode(Xe.colorModeForRenderPass());const vt=pt.heatmapFbos.get(o.bP);vt&&(ut.activeTexture.set(mt.TEXTURE0),mt.bindTexture(mt.TEXTURE_2D,vt.colorAttachment.get()),ut.activeTexture.set(mt.TEXTURE1),Yu(ut,pt).bind(mt.LINEAR,mt.CLAMP_TO_EDGE),Xe.useProgram("heatmapTexture").draw(ut,mt.TRIANGLES,Yr.disabled,Vi.disabled,Xe.colorModeForRenderPass(),zi.disabled,oc(Xe,pt,0,1),null,null,pt.id,Xe.viewportBuffer,Xe.quadTriangleIndexBuffer,Xe.viewportSegments,pt.paint,Xe.transform.zoom))}(z,ee)}(l,c,_,w,P):o.b$(_)?function(z,Y,ee,ae,xe){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=xe,Ke=ee.paint.get("line-opacity"),$e=ee.paint.get("line-width");if(Ke.constantOr(1)===0||$e.constantOr(1)===0)return;const Xe=z.getDepthModeForSublayer(0,Yr.ReadOnly),pt=z.colorModeForRenderPass(),ut=ee.paint.get("line-dasharray"),mt=ee.paint.get("line-pattern"),vt=mt.constantOr(1),Bt=ee.paint.get("line-gradient"),kt=ee.getCrossfadeParameters(),Rt=vt?"linePattern":ut?"lineSDF":Bt?"lineGradient":"line",zt=z.context,Tt=zt.gl,nn=z.transform;let Zt=!0;for(const Mn of ae){const Bn=Y.getTile(Mn);if(vt&&!Bn.patternsLoaded())continue;const yn=Bn.getBucket(ee);if(!yn)continue;const In=yn.programConfigurations.get(ee.id),Nn=z.context.program.get(),Fn=z.useProgram(Rt,In),pr=Zt||Fn.program!==Nn,Ti=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Mn),Gi=mt.constantOr(null);if(Gi&&Bn.imageAtlas){const Po=Bn.imageAtlas,Co=Po.patternPositions[Gi.to.toString()],il=Po.patternPositions[Gi.from.toString()];Co&&il&&In.setConstantPatternPositions(Co,il)}const Uo=nn.getProjectionData({overscaledTileID:Mn,applyGlobeMatrix:!ke,applyTerrainMatrix:!0}),Si=nn.getPixelScale(),ps=vt?Eh(z,Bn,ee,Si,kt):ut?Nu(z,Bn,ee,Si,ut,kt):Bt?wl(z,Bn,ee,Si,yn.lineClipsArray.length):Sh(z,Bn,ee,Si);if(vt)zt.activeTexture.set(Tt.TEXTURE0),Bn.imageAtlasTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),In.updatePaintBuffers(kt);else if(ut&&(pr||z.lineAtlas.dirty))zt.activeTexture.set(Tt.TEXTURE0),z.lineAtlas.bind(zt);else if(Bt){const Po=yn.gradients[ee.id];let Co=Po.texture;if(ee.gradientVersion!==Po.version){let il=256;if(ee.stepInterpolant){const Jo=Y.getSource().maxzoom,es=Mn.canonical.z===Jo?Math.ceil(1<<z.transform.maxZoom-Mn.canonical.z):1;il=o.ab(o.bQ(yn.maxLineLength/o.X*1024*es),256,zt.maxTextureSize)}Po.gradient=o.bR({expression:ee.gradientExpression(),evaluationKey:"lineProgress",resolution:il,image:Po.gradient||void 0,clips:yn.lineClipsArray}),Po.texture?Po.texture.update(Po.gradient):Po.texture=new ie(zt,Po.gradient,Tt.RGBA),Po.version=ee.gradientVersion,Co=Po.texture}zt.activeTexture.set(Tt.TEXTURE0),Co.bind(ee.stepInterpolant?Tt.NEAREST:Tt.LINEAR,Tt.CLAMP_TO_EDGE)}let To;if(ke){const[Po]=z.getStencilConfigForOverlapAndUpdateStencilID(ae);To=Po[Mn.overscaledZ]}else To=z.stencilModeForClipping(Mn);Fn.draw(zt,Tt.TRIANGLES,Xe,To,pt,zi.disabled,ps,Ti,Uo,ee.id,yn.layoutVertexBuffer,yn.indexBuffer,yn.segments,ee.paint,z.transform.zoom,In,yn.layoutVertexBuffer2),Zt=!1}}(l,c,_,w,P):o.c0(_)?function(z,Y,ee,ae,xe){const ke=ee.paint.get("fill-color"),Ke=ee.paint.get("fill-opacity");if(Ke.constantOr(1)===0)return;const{isRenderingToTexture:$e}=xe,Xe=z.colorModeForRenderPass(),pt=ee.paint.get("fill-pattern"),ut=z.opaquePassEnabledForLayer()&&!pt.constantOr(1)&&ke.constantOr(o.b4.transparent).a===1&&Ke.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===ut){const mt=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?Yr.ReadWrite:Yr.ReadOnly);Ed(z,Y,ee,ae,mt,Xe,!1,$e)}if(z.renderPass==="translucent"&&ee.paint.get("fill-antialias")){const mt=z.getDepthModeForSublayer(ee.getPaintProperty("fill-outline-color")?2:0,Yr.ReadOnly);Ed(z,Y,ee,ae,mt,Xe,!0,$e)}}(l,c,_,w,P):o.c1(_)?function(z,Y,ee,ae,xe){const ke=ee.paint.get("fill-extrusion-opacity");if(ke===0)return;const{isRenderingToTexture:Ke}=xe;if(z.renderPass==="translucent"){const $e=new Yr(z.context.gl.LEQUAL,Yr.ReadWrite,z.depthRangeFor3D);if(ke!==1||ee.paint.get("fill-extrusion-pattern").constantOr(1))uc(z,Y,ee,ae,$e,Vi.disabled,ho.disabled,Ke),uc(z,Y,ee,ae,$e,z.stencilModeFor3D(),z.colorModeForRenderPass(),Ke);else{const Xe=z.colorModeForRenderPass();uc(z,Y,ee,ae,$e,Vi.disabled,Xe,Ke)}}}(l,c,_,w,P):o.c2(_)?function(z,Y,ee,ae,xe){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=xe,Ke=z.context,$e=z.style.projection.useSubdivision,Xe=z.getDepthModeForSublayer(0,Yr.ReadOnly),pt=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(ut,mt,vt,Bt,kt,Rt,zt){const Tt=ut.context,nn=Tt.gl;for(const Zt of vt){const Mn=mt.getTile(Zt),Bn=Mn.dem;if(!Bn||!Bn.data||!Mn.needsHillshadePrepare)continue;const yn=Bn.dim,In=Bn.stride,Nn=Bn.getPixels();if(Tt.activeTexture.set(nn.TEXTURE1),Tt.pixelStoreUnpackPremultiplyAlpha.set(!1),Mn.demTexture=Mn.demTexture||ut.getTileTexture(In),Mn.demTexture){const pr=Mn.demTexture;pr.update(Nn,{premultiply:!1}),pr.bind(nn.NEAREST,nn.CLAMP_TO_EDGE)}else Mn.demTexture=new ie(Tt,Nn,nn.RGBA,{premultiply:!1}),Mn.demTexture.bind(nn.NEAREST,nn.CLAMP_TO_EDGE);Tt.activeTexture.set(nn.TEXTURE0);let Fn=Mn.fbo;if(!Fn){const pr=new ie(Tt,{width:yn,height:yn,data:null},nn.RGBA);pr.bind(nn.LINEAR,nn.CLAMP_TO_EDGE),Fn=Mn.fbo=Tt.createFramebuffer(yn,yn,!0,!1),Fn.colorAttachment.set(pr.texture)}Tt.bindFramebuffer.set(Fn.framebuffer),Tt.viewport.set([0,0,yn,yn]),ut.useProgram("hillshadePrepare").draw(Tt,nn.TRIANGLES,kt,Rt,zt,zi.disabled,ff(Mn.tileID,Bn),null,null,Bt.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments),Mn.needsHillshadePrepare=!1}})(z,Y,ae,ee,Xe,Vi.disabled,pt),Ke.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if($e){const[ut,mt,vt]=z.stencilConfigForOverlapTwoPass(ae);td(z,Y,ee,vt,ut,Xe,pt,!1,ke),td(z,Y,ee,vt,mt,Xe,pt,!0,ke)}else{const[ut,mt]=z.getStencilConfigForOverlapAndUpdateStencilID(ae);td(z,Y,ee,mt,ut,Xe,pt,!1,ke)}}(l,c,_,w,P):o.c3(_)?function(z,Y,ee,ae,xe){if(z.renderPass!=="translucent"||ee.paint.get("raster-opacity")===0||!ae.length)return;const{isRenderingToTexture:ke}=xe,Ke=Y.getSource(),$e=z.style.projection.useSubdivision;if(Ke instanceof rr)Oi(z,Y,ee,ae,null,!1,!1,Ke.tileCoords,Ke.flippedWindingOrder,ke);else if($e){const[Xe,pt,ut]=z.stencilConfigForOverlapTwoPass(ae);Oi(z,Y,ee,ut,Xe,!1,!0,KA,!1,ke),Oi(z,Y,ee,ut,pt,!0,!0,KA,!1,ke)}else{const[Xe,pt]=z.getStencilConfigForOverlapAndUpdateStencilID(ae);Oi(z,Y,ee,pt,Xe,!1,!0,KA,!1,ke)}}(l,c,_,w,P):o.c4(_)?function(z,Y,ee,ae,xe){const ke=ee.paint.get("background-color"),Ke=ee.paint.get("background-opacity");if(Ke===0)return;const{isRenderingToTexture:$e}=xe,Xe=z.context,pt=Xe.gl,ut=z.style.projection,mt=z.transform,vt=mt.tileSize,Bt=ee.paint.get("background-pattern");if(z.isPatternMissing(Bt))return;const kt=!Bt&&ke.a===1&&Ke===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==kt)return;const Rt=Vi.disabled,zt=z.getDepthModeForSublayer(0,kt==="opaque"?Yr.ReadWrite:Yr.ReadOnly),Tt=z.colorModeForRenderPass(),nn=z.useProgram(Bt?"backgroundPattern":"background"),Zt=ae||Oe(mt,{tileSize:vt,terrain:z.style.map.terrain});Bt&&(Xe.activeTexture.set(pt.TEXTURE0),z.imageManager.bind(z.context));const Mn=ee.getCrossfadeParameters();for(const Bn of Zt){const yn=mt.getProjectionData({overscaledTileID:Bn,applyGlobeMatrix:!$e,applyTerrainMatrix:!0}),In=Bt?pf(Ke,z,Bt,{tileID:Bn,tileSize:vt},Mn):Zc(Ke,ke),Nn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Bn),Fn=ut.getMeshFromTileID(Xe,Bn.canonical,!1,!0,"raster");nn.draw(Xe,pt.TRIANGLES,zt,Rt,Tt,zi.backCCW,In,Nn,yn,ee.id,Fn.vertexBuffer,Fn.indexBuffer,Fn.segments)}}(l,0,_,w,P):o.c5(_)&&function(z,Y,ee,ae){const{isRenderingGlobe:xe}=ae,ke=z.context,Ke=ee.implementation,$e=z.style.projection,Xe=z.transform,pt=Xe.getProjectionDataForCustomLayer(xe),ut={farZ:Xe.farZ,nearZ:Xe.nearZ,fov:Xe.fov*Math.PI/180,modelViewProjectionMatrix:Xe.modelViewProjectionMatrix,projectionMatrix:Xe.projectionMatrix,shaderData:{variantName:$e.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${$e.shaderPreludeCode.vertexSource}`,define:$e.shaderDefine},defaultProjectionData:pt},mt=Ke.renderingMode?Ke.renderingMode:"2d";if(z.renderPass==="offscreen"){const vt=Ke.prerender;vt&&(z.setCustomLayerDefaults(),ke.setColorMode(z.colorModeForRenderPass()),vt.call(Ke,ke.gl,ut),ke.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),ke.setColorMode(z.colorModeForRenderPass()),ke.setStencilMode(Vi.disabled);const vt=mt==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,Yr.ReadOnly);ke.setDepthMode(vt),Ke.render(ke.gl,ut),ke.setDirty(),z.setBaseState(),ke.bindFramebuffer.set(null)}}(l,0,_,P))}saveTileTexture(l){const c=this._tileTextures[l.size[0]];c?c.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const c=this._tileTextures[l];return c&&c.length>0?c.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const c=this.imageManager.getPattern(l.from.toString()),_=this.imageManager.getPattern(l.to.toString());return!c||!_}useProgram(l,c,_=!1){this.cache=this.cache||{};const w=!!this.style.map.terrain,P=this.style.projection,z=l+(c?c.cacheKey:"")+`/${_?rc:P.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"");return this.cache[z]||(this.cache[z]=new Oc(this.context,ei[l],c,Zd[l],this._showOverdrawInspector,w,_?ei.projectionMercator:P.shaderPreludeCode,_?la:P.shaderDefine)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:c}=this.context.gl;return this.width!==l||this.height!==c}}function RA(I,l){let c,_=!1,w=null,P=null;const z=()=>{w=null,_&&(I.apply(P,c),w=setTimeout(z,l),_=!1)};return(...Y)=>(_=!0,P=this,c=Y,w||z(),w)}class cc{constructor(l){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let _;return c.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(_=w)}),(_&&_[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:_,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const _=c.join("/");let w=_;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${_}`);let P=window.location.hash.replace(w,"");P.startsWith("#&")?P=P.slice(0,1)+P.slice(2):P==="#"&&(P="");let z=window.location.href.replace(/(#.+)?$/,P);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=RA(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const c=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,w=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,w),z=Math.round(c.lng*P)/P,Y=Math.round(c.lat*P)/P,ee=this._map.getBearing(),ae=this._map.getPitch();let xe="";if(xe+=l?`/${z}/${Y}/${_}`:`${_}/${Y}/${z}`,(ee||ae)&&(xe+="/"+Math.round(10*ee)/10),ae&&(xe+=`/${Math.round(ae)}`),this._hashName){const ke=this._hashName;let Ke=!1;const $e=window.location.hash.slice(1).split("&").map(Xe=>{const pt=Xe.split("=")[0];return pt===ke?(Ke=!0,`${pt}=${xe}`):Xe}).filter(Xe=>Xe);return Ke||$e.push(`${ke}=${xe}`),`#${$e.join("&")}`}return`#${xe}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new o.N(+l[2],+l[1])}catch{return!1}const c=+l[0],_=+(l[3]||0),w=+(l[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&_>=0&&_<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const Vu={linearity:.3,easing:o.c6(0,0,.3,1)},Hu=o.e({deceleration:2500,maxSpeed:1400},Vu),FA=o.e({deceleration:20,maxSpeed:1400},Vu),Pc=o.e({deceleration:1e3,maxSpeed:360},Vu),wu=o.e({deceleration:1e3,maxSpeed:90},Vu),Rh=o.e({deceleration:1e3,maxSpeed:360},Vu);class ot{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:O.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,c=O.now();for(;l.length>0&&c-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:P}of this._inertiaBuffer)c.zoom+=P.zoomDelta||0,c.bearing+=P.bearingDelta||0,c.pitch+=P.pitchDelta||0,c.roll+=P.rollDelta||0,P.panDelta&&c.pan._add(P.panDelta),P.around&&(c.around=P.around),P.pinchAround&&(c.pinchAround=P.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(c.pan.mag()){const P=ko(c.pan.mag(),_,o.e({},Hu,l||{})),z=c.pan.mult(P.amount/c.pan.mag()),Y=this._map.cameraHelper.handlePanInertia(z,this._map.transform);w.center=Y.easingCenter,w.offset=Y.easingOffset,LA(w,P)}if(c.zoom){const P=ko(c.zoom,_,FA);w.zoom=this._map.transform.zoom+P.amount,LA(w,P)}if(c.bearing){const P=ko(c.bearing,_,Pc);w.bearing=this._map.transform.bearing+o.ab(P.amount,-179,179),LA(w,P)}if(c.pitch){const P=ko(c.pitch,_,wu);w.pitch=this._map.transform.pitch+P.amount,LA(w,P)}if(c.roll){const P=ko(c.roll,_,Rh);w.roll=this._map.transform.roll+o.ab(P.amount,-179,179),LA(w,P)}if(w.zoom||w.bearing){const P=c.pinchAround===void 0?c.around:c.pinchAround;w.around=P?this._map.unproject(P):this._map.getCenter()}return this.clear(),o.e(w,{noMoveStart:!0})}}function LA(I,l){(!I.duration||I.duration<l.duration)&&(I.duration=l.duration,I.easing=l.easing)}function ko(I,l,c){const{maxSpeed:_,linearity:w,deceleration:P}=c,z=o.ab(I*w/(l/1e3),-_,_),Y=Math.abs(z)/(P*w);return{easing:c.easing,duration:1e3*Y,amount:z*(Y/2)}}class mi extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_,w={}){const P=T.mousePos(c.getCanvas(),_),z=c.unproject(P);super(l,o.e({point:P,lngLat:z,originalEvent:_},w)),this._defaultPrevented=!1,this.target=c}}class ii extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_){const w=l==="touchend"?_.changedTouches:_.touches,P=T.touchPos(c.getCanvasContainer(),w),z=P.map(ee=>c.unproject(ee)),Y=P.reduce((ee,ae,xe,ke)=>ee.add(ae.div(ke.length)),new o.P(0,0));super(l,{points:P,point:Y,lngLats:z,lngLat:c.unproject(Y),originalEvent:_}),this._defaultPrevented=!1}}class os extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class mA{constructor(l,c){this._map=l,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new os(l.type,this._map,l))}mousedown(l,c){return this._mousedownPos=c,this._firePreventable(new mi(l.type,this._map,l))}mouseup(l){this._map.fire(new mi(l.type,this._map,l))}click(l,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new mi(l.type,this._map,l))}dblclick(l){return this._firePreventable(new mi(l.type,this._map,l))}mouseover(l){this._map.fire(new mi(l.type,this._map,l))}mouseout(l){this._map.fire(new mi(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ii(l.type,this._map,l))}touchmove(l){this._map.fire(new ii(l.type,this._map,l))}touchend(l){this._map.fire(new ii(l.type,this._map,l))}touchcancel(l){this._map.fire(new ii(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class eh{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new mi(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new mi(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ka{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(o.P.convert(l),this._map.terrain)}}class zs{constructor(l,c){this._map=l,this._tr=new ka(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,c){this.isEnabled()&&l.shiftKey&&l.button===0&&(T.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(l,c){if(!this._active)return;const _=c;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=_,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const P=Math.min(w.x,_.x),z=Math.max(w.x,_.x),Y=Math.min(w.y,_.y),ee=Math.max(w.y,_.y);T.setTransform(this._box,`translate(${P}px,${Y}px)`),this._box.style.width=z-P+"px",this._box.style.height=ee-Y+"px"}mouseupWindow(l,c){if(!this._active||l.button!==0)return;const _=this._startPos,w=c;if(this.reset(),T.suppressClick(),_.x!==w.x||_.y!==w.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:l})),{cameraAnimation:P=>P.fitScreenCoordinates(_,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,c){return this._map.fire(new o.k(l,{originalEvent:c}))}}function Es(I,l){if(I.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${I.length}, points ${l.length}`);const c={};for(let _=0;_<I.length;_++)c[I[_].identifier]=l[_];return c}class Kc{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,c,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=function(w){const P=new o.P(0,0);for(const z of w)P._add(z);return P.div(w.length)}(c),this.touches=Es(_,c)))}touchmove(l,c,_){if(this.aborted||!this.centroid)return;const w=Es(_,c);for(const P in this.touches){const z=w[P];(!z||z.dist(this.touches[P])>30)&&(this.aborted=!0)}}touchend(l,c,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class ia{constructor(l){this.singleTap=new Kc(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,c,_){this.singleTap.touchstart(l,c,_)}touchmove(l,c,_){this.singleTap.touchmove(l,c,_)}touchend(l,c,_){const w=this.singleTap.touchend(l,c,_);if(w){const P=l.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(w)<30;if(P&&z||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class Aa{constructor(l){this._tr=new ka(l),this._zoomIn=new ia({numTouches:1,numTaps:2}),this._zoomOut=new ia({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,c,_){this._zoomIn.touchstart(l,c,_),this._zoomOut.touchstart(l,c,_)}touchmove(l,c,_){this._zoomIn.touchmove(l,c,_),this._zoomOut.touchmove(l,c,_)}touchend(l,c,_){const w=this._zoomIn.touchend(l,c,_),P=this._zoomOut.touchend(l,c,_),z=this._tr;return w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(w)},{originalEvent:l})}):P?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(P)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hr{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const c=this._moveFunction(...l);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(l,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,c){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const w=Array.isArray(c)?c[0]:c;return!this._moved&&w.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(_,w))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&T.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Id={0:1,2:2};class ya{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const c=T.mouseButton(l);this._eventButton=c}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(c,_){const w=Id[_];return c.buttons===void 0||(c.buttons&w)!==w}(l,this._eventButton)}isValidEndEvent(l){return T.mouseButton(l)===this._eventButton}}class kd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class Td{constructor(l=new ya({checkCorrectEvent:()=>!0}),c=new kd){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(l,c,_){return l instanceof MouseEvent?c(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?_(l):void 0}startMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const dc=I=>{I.mousedown=I.dragStart,I.mousemoveWindow=I.dragMove,I.mouseup=I.dragEnd,I.contextmenu=l=>{l.preventDefault()}};class ru{constructor(l,c){this._clickTolerance=l.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,c,_){return this._calculateTransform(l,c,_)}touchmove(l,c,_){if(this._active){if(!this._shouldBePrevented(_.length))return l.preventDefault(),this._calculateTransform(l,c,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,c,_){this._calculateTransform(l,c,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,c,_){_.length>0&&(this._active=!0);const w=Es(_,c),P=new o.P(0,0),z=new o.P(0,0);let Y=0;for(const ae in w){const xe=w[ae],ke=this._touches[ae];ke&&(P._add(xe),z._add(xe.sub(ke)),Y++,w[ae]=xe)}if(this._touches=w,this._shouldBePrevented(Y)||!z.mag())return;const ee=z.div(Y);return this._sum._add(ee),this._sum.mag()<this._clickTolerance?void 0:{around:P.div(Y),panDelta:ee}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ji{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,c,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([c[0],c[1]]))}touchmove(l,c,_){if(!this._firstTwoTouches)return;l.preventDefault();const[w,P]=this._firstTwoTouches,z=fl(_,c,w),Y=fl(_,c,P);if(!z||!Y)return;const ee=this._aroundCenter?null:z.add(Y).div(2);return this._move([z,Y],ee,l)}touchend(l,c,_){if(!this._firstTwoTouches)return;const[w,P]=this._firstTwoTouches,z=fl(_,c,w),Y=fl(_,c,P);z&&Y||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function fl(I,l,c){for(let _=0;_<I.length;_++)if(I[_].identifier===c)return l[_]}function Fh(I,l){return Math.log(I/l)/Math.LN2}class Dc extends Ji{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,c){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Fh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fh(this._distance,_),pinchAround:c}}}function UA(I,l){return 180*I.angleWith(l)/Math.PI}class Rc extends Ji{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,c,_){const w=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:UA(this._vector,w),pinchAround:c}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const c=25/(Math.PI*this._minDiameter)*360,_=UA(l,this._startVector);return Math.abs(_)<c}}function zA(I){return Math.abs(I.y)>Math.abs(I.x)}class hc extends Ji{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,c,_){super.touchstart(l,c,_),this._currentTouchCount=_.length}_start(l){this._lastPoints=l,zA(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,c,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=l[0].sub(this._lastPoints[0]),P=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,P,_.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+P.y)/2*-.5}):void 0}gestureBeginsVertically(l,c,_){if(this._valid!==void 0)return this._valid;const w=l.mag()>=2,P=c.mag()>=2;if(!w&&!P)return;if(!w||!P)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const z=l.y>0==c.y>0;return zA(l)&&zA(c)&&z}}const bs={panStep:100,bearingStep:15,pitchStep:10};class Fo{constructor(l){this._tr=new ka(l);const c=bs;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let c=0,_=0,w=0,P=0,z=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),P=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),P=1);break;case 38:l.shiftKey?w=1:(l.preventDefault(),z=-1);break;case 40:l.shiftKey?w=-1:(l.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(_=0,w=0),{cameraAnimation:Y=>{const ee=this._tr;Y.easeTo({duration:300,easeId:"keyboardHandler",easing:iu,zoom:c?Math.round(ee.zoom)+c*(l.shiftKey?2:1):ee.zoom,bearing:ee.bearing+_*this._bearingStep,pitch:ee.pitch+w*this._pitchStep,offset:[-P*this._panStep,-z*this._panStep],center:ee.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function iu(I){return I*(2-I)}const Qa=4.000244140625;class qa{constructor(l,c){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=l,this._tr=new ka(l),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let c=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=O.now(),w=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,c!==0&&c%Qa==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(w*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),l.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=l,this._delta-=c,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=T.mousePos(this._map.getCanvas(),l),_=this._tr;this._aroundPoint=this._aroundCenter?_.transform.locationToScreenPoint(o.N.convert(_.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const Y=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=Y),typeof this._targetZoom=="number"&&(this._targetZoom+=Y)}if(this._delta!==0){const Y=this._type==="wheel"&&Math.abs(this._delta)>Qa?this._wheelZoomRate:this._defaultZoomRate;let ee=2/(1+Math.exp(-Math.abs(this._delta*Y)));this._delta<0&&ee!==0&&(ee=1/ee);const ae=typeof this._targetZoom!="number"?l.scale:o.aG(this._targetZoom);this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,o.a8(ae*ee))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,_=this._startZoom,w=this._easing;let P,z=!1;if(this._type==="wheel"&&_&&w){const Y=O.now()-this._lastWheelEventTime,ee=Math.min((Y+5)/200,1),ae=w(ee);P=o.y.number(_,c,ae),ee<1?this._frameId||(this._frameId=!0):z=!0}else P=c,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=P,{noInertia:!0,needsRenderFrame:!z,zoomDelta:P-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let c=o.c8;if(this._prevEase){const _=this._prevEase,w=(O.now()-_.start)/_.duration,P=_.easing(w+.01)-_.easing(w),z=.27/Math.sqrt(P*P+1e-4)*.01,Y=Math.sqrt(.0729-z*z);c=o.c6(z,Y,.25,1)}return this._prevEase={start:O.now(),duration:l,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Nl{constructor(l,c){this._clickZoom=l,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Lo{constructor(l){this._tr=new ka(l),this.reset()}reset(){this._active=!1}dblclick(l,c){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mu{constructor(){this._tap=new ia({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,c,_){if(!this._swipePoint)if(this._tapTime){const w=c[0],P=l.timeStamp-this._tapTime<500,z=this._tapPoint.dist(w)<30;P&&z?_.length>0&&(this._swipePoint=w,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(l,c,_)}touchmove(l,c,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const w=c[0],P=w.y-this._swipePoint.y;return this._swipePoint=w,l.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(l,c,_)}touchend(l,c,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const w=this._tap.touchend(l,c,_);w&&(this._tapTime=l.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fc{constructor(l,c,_){this._el=l,this._mousePan=c,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class th{constructor(l,c,_,w){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=c,this._mousePitch=_,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class jA{constructor(l,c,_,w){this._el=l,this._touchZoom=c,this._touchRotate=_,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class pc{constructor(l,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",l);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=c,this._container.appendChild(w);const P=document.createElement("div");P.className="maplibregl-mobile-message",P.textContent=_,this._container.appendChild(P),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,c){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:l,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ta=I=>I.zoom||I.drag||I.roll||I.pitch||I.rotate;class xs extends o.k{}function fs(I){return I.panDelta&&I.panDelta.mag()||I.zoomDelta||I.bearingDelta||I.pitchDelta||I.rollDelta}class Pr{constructor(l,c){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,P)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=w.type==="renderFrame"?void 0:w,Y={needsRenderFrame:!1},ee={},ae={},xe=w.touches,ke=xe?this._getMapTouches(xe):void 0,Ke=ke?T.touchPos(this._map.getCanvas(),ke):T.mousePos(this._map.getCanvas(),w);for(const{handlerName:pt,handler:ut,allowed:mt}of this._handlers){if(!ut.isEnabled())continue;let vt;this._blockedByActive(ae,mt,pt)?ut.reset():ut[P||w.type]&&(vt=ut[P||w.type](w,Ke,ke),this.mergeHandlerResult(Y,ee,vt,pt,z),vt&&vt.needsRenderFrame&&this._triggerRenderFrame()),(vt||ut.isActive())&&(ae[pt]=ut)}const $e={};for(const pt in this._previousActiveHandlers)ae[pt]||($e[pt]=z);this._previousActiveHandlers=ae,(Object.keys($e).length||fs(Y))&&(this._changes.push([Y,ee,$e]),this._triggerRenderFrame()),(Object.keys(ae).length||fs(Y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Xe}=Y;Xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Xe(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ot(l),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,P,z]of this._listeners)T.addEventListener(w,P,w===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[l,c,_]of this._listeners)T.removeEventListener(l,c,l===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(l){const c=this._map,_=c.getCanvasContainer();this._add("mapEvent",new mA(c,l));const w=c.boxZoom=new zs(c,l);this._add("boxZoom",w),l.interactive&&l.boxZoom&&w.enable();const P=c.cooperativeGestures=new pc(c,l.cooperativeGestures);this._add("cooperativeGestures",P),l.cooperativeGestures&&P.enable();const z=new Aa(c),Y=new Lo(c);c.doubleClickZoom=new Nl(Y,z),this._add("tapZoom",z),this._add("clickZoom",Y),l.interactive&&l.doubleClickZoom&&c.doubleClickZoom.enable();const ee=new Mu;this._add("tapDragZoom",ee);const ae=c.touchPitch=new hc(c);this._add("touchPitch",ae),l.interactive&&l.touchPitch&&c.touchPitch.enable(l.touchPitch);const xe=()=>c.project(c.getCenter()),ke=function({enable:kt,clickTolerance:Rt,aroundCenter:zt=!0,minPixelCenterThreshold:Tt=100,rotateDegreesPerPixelMoved:nn=.8},Zt){const Mn=new ya({checkCorrectEvent:Bn=>T.mouseButton(Bn)===0&&Bn.ctrlKey||T.mouseButton(Bn)===2&&!Bn.ctrlKey});return new hr({clickTolerance:Rt,move:(Bn,yn)=>{const In=Zt();if(zt&&Math.abs(In.y-Bn.y)>Tt)return{bearingDelta:o.c7(new o.P(Bn.x,yn.y),yn,In)};let Nn=(yn.x-Bn.x)*nn;return zt&&yn.y<In.y&&(Nn=-Nn),{bearingDelta:Nn}},moveStateManager:Mn,enable:kt,assignEvents:dc})}(l,xe),Ke=function({enable:kt,clickTolerance:Rt,pitchDegreesPerPixelMoved:zt=-.5}){const Tt=new ya({checkCorrectEvent:nn=>T.mouseButton(nn)===0&&nn.ctrlKey||T.mouseButton(nn)===2});return new hr({clickTolerance:Rt,move:(nn,Zt)=>({pitchDelta:(Zt.y-nn.y)*zt}),moveStateManager:Tt,enable:kt,assignEvents:dc})}(l),$e=function({enable:kt,clickTolerance:Rt,rollDegreesPerPixelMoved:zt=.3},Tt){const nn=new ya({checkCorrectEvent:Zt=>T.mouseButton(Zt)===2&&Zt.ctrlKey});return new hr({clickTolerance:Rt,move:(Zt,Mn)=>{const Bn=Tt();let yn=(Mn.x-Zt.x)*zt;return Mn.y<Bn.y&&(yn=-yn),{rollDelta:yn}},moveStateManager:nn,enable:kt,assignEvents:dc})}(l,xe);c.dragRotate=new th(l,ke,Ke,$e),this._add("mouseRotate",ke,["mousePitch"]),this._add("mousePitch",Ke,["mouseRotate","mouseRoll"]),this._add("mouseRoll",$e,["mousePitch"]),l.interactive&&l.dragRotate&&c.dragRotate.enable();const Xe=function({enable:kt,clickTolerance:Rt}){const zt=new ya({checkCorrectEvent:Tt=>T.mouseButton(Tt)===0&&!Tt.ctrlKey});return new hr({clickTolerance:Rt,move:(Tt,nn)=>({around:nn,panDelta:nn.sub(Tt)}),activateOnStart:!0,moveStateManager:zt,enable:kt,assignEvents:dc})}(l),pt=new ru(l,c);c.dragPan=new fc(_,Xe,pt),this._add("mousePan",Xe),this._add("touchPan",pt,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&c.dragPan.enable(l.dragPan);const ut=new Rc,mt=new Dc;c.touchZoomRotate=new jA(_,mt,ut,ee),this._add("touchRotate",ut,["touchPan","touchZoom"]),this._add("touchZoom",mt,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&c.touchZoomRotate.enable(l.touchZoomRotate);const vt=c.scrollZoom=new qa(c,()=>this._triggerRenderFrame());this._add("scrollZoom",vt,["mousePan"]),l.interactive&&l.scrollZoom&&c.scrollZoom.enable(l.scrollZoom);const Bt=c.keyboard=new Fo(c);this._add("keyboard",Bt),l.interactive&&l.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new eh(c))}_add(l,c,_){this._handlers.push({handlerName:l,handler:c,allowed:_}),this._handlersById[l]=c}stop(l){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ta(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,c,_){for(const w in l)if(w!==_&&(!c||c.indexOf(w)<0))return!0;return!1}_getMapTouches(l){const c=[];for(const _ of l)this._el.contains(_.target)&&c.push(_);return c}mergeHandlerResult(l,c,_,w,P){if(!_)return;o.e(l,_);const z={handlerName:w,originalEvent:_.originalEvent||P};_.zoomDelta!==void 0&&(c.zoom=z),_.panDelta!==void 0&&(c.drag=z),_.rollDelta!==void 0&&(c.roll=z),_.pitchDelta!==void 0&&(c.pitch=z),_.bearingDelta!==void 0&&(c.rotate=z)}_applyChanges(){const l={},c={},_={};for(const[w,P,z]of this._changes)w.panDelta&&(l.panDelta=(l.panDelta||new o.P(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(l.rollDelta=(l.rollDelta||0)+w.rollDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),o.e(c,P),o.e(_,z);this._updateMapTransform(l,c,_),this._changes=[]}_updateMapTransform(l,c,_){const w=this._map,P=w._getTransformForUpdate(),z=w.terrain;if(!(fs(l)||z&&this._terrainMovement))return this._fireEvents(c,_,!0);w._stop(!0);let{panDelta:Y,zoomDelta:ee,bearingDelta:ae,pitchDelta:xe,rollDelta:ke,around:Ke,pinchAround:$e}=l;$e!==void 0&&(Ke=$e),Ke=Ke||w.transform.centerPoint,z&&!P.isPointOnMapSurface(Ke)&&(Ke=P.centerPoint);const Xe={panDelta:Y,zoomDelta:ee,rollDelta:ke,pitchDelta:xe,bearingDelta:ae,around:Ke};this._map.cameraHelper.useGlobeControls&&!P.isPointOnMapSurface(Ke)&&(Ke=P.centerPoint);const pt=Ke.distSqr(P.centerPoint)<.01?P.center:P.screenPointToLocation(Y?Ke.sub(Y):Ke);z?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,P),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?P.setCenter(P.screenPointToLocation(P.centerPoint.sub(Y))):this._map.cameraHelper.handleMapControlsPan(Xe,P,pt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Xe,P,pt))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Xe,P),this._map.cameraHelper.handleMapControlsPan(Xe,P,pt)),w._applyUpdatedTransform(P),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(c,_,!0)}_fireEvents(l,c,_){const w=Ta(this._eventsInProgress),P=Ta(l),z={};for(const ke in l){const{originalEvent:Ke}=l[ke];this._eventsInProgress[ke]||(z[`${ke}start`]=Ke),this._eventsInProgress[ke]=l[ke]}!w&&P&&this._fireEvent("movestart",P.originalEvent);for(const ke in z)this._fireEvent(ke,z[ke]);P&&this._fireEvent("move",P.originalEvent);for(const ke in l){const{originalEvent:Ke}=l[ke];this._fireEvent(ke,Ke)}const Y={};let ee;for(const ke in this._eventsInProgress){const{handlerName:Ke,originalEvent:$e}=this._eventsInProgress[ke];this._handlersById[Ke].isActive()||(delete this._eventsInProgress[ke],ee=c[Ke]||$e,Y[`${ke}end`]=ee)}for(const ke in Y)this._fireEvent(ke,Y[ke]);const ae=Ta(this._eventsInProgress),xe=(w||P)&&!ae;if(xe&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ke=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ke.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ke)}if(_&&xe){this._updatingCamera=!0;const ke=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ke=$e=>$e!==0&&-this._bearingSnap<$e&&$e<this._bearingSnap;!ke||!ke.essential&&O.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:ee})),Ke(this._map.getBearing())&&this._map.resetNorth()):(Ke(ke.bearing||this._map.getBearing())&&(ke.bearing=0),ke.freezeElevation=!0,this._map.easeTo(ke,{originalEvent:ee})),this._updatingCamera=!1}}_fireEvent(l,c){this._map.fire(new o.k(l,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new xs("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Hr extends o.E{constructor(l,c,_){super(),this._renderFrameCallback=()=>{const w=Math.min((O.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=_.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(l,c){l.apply(this.transform),this.transform=l,this.cameraHelper=c}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,c){return this.jumpTo({center:l},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,c){return this.jumpTo({elevation:l},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,c,_){return l=o.P.convert(l).mult(-1),this.panTo(this.transform.center,o.e({offset:l},c),_)}panTo(l,c,_){return this.easeTo(o.e({center:l},c),_)}getZoom(){return this.transform.zoom}setZoom(l,c){return this.jumpTo({zoom:l},c),this}zoomTo(l,c,_){return this.easeTo(o.e({zoom:l},c),_)}zoomIn(l,c){return this.zoomTo(this.getZoom()+1,l,c),this}zoomOut(l,c){return this.zoomTo(this.getZoom()-1,l,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,c){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)).fire(new o.k("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(l,c){return this.jumpTo({bearing:l},c),this}getPadding(){return this.transform.padding}setPadding(l,c){return this.jumpTo({padding:l},c),this}rotateTo(l,c,_){return this.easeTo(o.e({bearing:l},c),_)}resetNorth(l,c){return this.rotateTo(0,o.e({duration:1e3},l),c),this}resetNorthPitch(l,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},l),c),this}snapToNorth(l,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,c):this}getPitch(){return this.transform.pitch}setPitch(l,c){return this.jumpTo({pitch:l},c),this}getRoll(){return this.transform.roll}setRoll(l,c){return this.jumpTo({roll:l},c),this}cameraForBounds(l,c){l=Ut.convert(l).adjustAntiMeridian();const _=c&&c.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),_,c)}_cameraForBoxAndBearing(l,c,_,w){const P={top:0,bottom:0,right:0,left:0};if(typeof(w=o.e({padding:P,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const ae=w.padding;w.padding={top:ae,bottom:ae,right:ae,left:ae}}const z=o.e(P,w.padding);w.padding=z;const Y=this.transform,ee=new Ut(l,c);return this.cameraHelper.cameraForBoxAndBearing(w,z,ee,_,Y)}fitBounds(l,c,_){return this._fitInternal(this.cameraForBounds(l,c),c,_)}fitScreenCoordinates(l,c,_,w,P){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(l)),this.transform.screenPointToLocation(o.P.convert(c)),_,w),w,P)}_fitInternal(l,c,_){return l?(delete(c=o.e(l,c)).padding,c.linear?this.easeTo(c,_):this.flyTo(c,_)):this}jumpTo(l,c){this.stop();const _=this._getTransformForUpdate();let w=!1,P=!1,z=!1;const Y=_.zoom;this.cameraHelper.handleJumpToCenterZoom(_,l);const ee=_.zoom!==Y;return"elevation"in l&&_.elevation!==+l.elevation&&_.setElevation(+l.elevation),"bearing"in l&&_.bearing!==+l.bearing&&(w=!0,_.setBearing(+l.bearing)),"pitch"in l&&_.pitch!==+l.pitch&&(P=!0,_.setPitch(+l.pitch)),"roll"in l&&_.roll!==+l.roll&&(z=!0,_.setRoll(+l.roll)),l.padding==null||_.isPaddingEqual(l.padding)||_.setPadding(l.padding),this._applyUpdatedTransform(_),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),ee&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),w&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),P&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),z&&this.fire(new o.k("rollstart",c)).fire(new o.k("roll",c)).fire(new o.k("rollend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(l,c,_,w=0){const P=o.Y.fromLngLat(l,c),z=o.Y.fromLngLat(_,w),Y=z.x-P.x,ee=z.y-P.y,ae=z.z-P.z,xe=Math.hypot(Y,ee,ae);if(xe===0)throw new Error("Can't calculate camera options with same From and To");const ke=Math.hypot(Y,ee),Ke=o.a8(this.transform.cameraToCenterDistance/xe/this.transform.tileSize),$e=180*Math.atan2(Y,-ee)/Math.PI;let Xe=180*Math.acos(ke/xe)/Math.PI;return Xe=ae<0?90-Xe:90+Xe,{center:z.toLngLat(),elevation:w,zoom:Ke,pitch:Xe,bearing:$e}}calculateCameraOptionsFromCameraLngLatAltRotation(l,c,_,w,P){const z=this.transform.calculateCenterFromCameraLngLatAlt(l,c,_,w);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:_,pitch:w,roll:P}}easeTo(l,c){this._stop(!1,l.easeId),((l=o.e({offset:[0,0],duration:500,easing:o.c8},l)).animate===!1||!l.essential&&O.prefersReducedMotion)&&(l.duration=0);const _=this._getTransformForUpdate(),w=this.getBearing(),P=_.pitch,z=_.roll,Y="bearing"in l?this._normalizeBearing(l.bearing,w):w,ee="pitch"in l?+l.pitch:P,ae="roll"in l?this._normalizeBearing(l.roll,z):z,xe="padding"in l?l.padding:_.padding,ke=o.P.convert(l.offset);let Ke,$e;l.around&&(Ke=o.N.convert(l.around),$e=_.locationToScreenPoint(Ke));const Xe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},pt=this.cameraHelper.handleEaseTo(_,{bearing:Y,pitch:ee,roll:ae,padding:xe,around:Ke,aroundPoint:$e,offsetAsPoint:ke,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||w!==Y,this._pitching=this._pitching||ee!==P,this._rolling=this._rolling||ae!==z,this._padding=!_.isPaddingEqual(xe),this._zooming=this._zooming||pt.isZooming,this._easeId=l.easeId,this._prepareEase(c,l.noMoveStart,Xe),this.terrain&&this._prepareElevation(pt.elevationCenter),this._ease(ut=>{pt.easeFunc(ut),this.terrain&&!l.freezeElevation&&this._updateElevation(ut),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},ut=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ut)},l),this}_prepareEase(l,c,_={}){this._moving=!0,c||_.moving||this.fire(new o.k("movestart",l)),this._zooming&&!_.zooming&&this.fire(new o.k("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new o.k("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new o.k("pitchstart",l)),this._rolling&&!_.rolling&&this.fire(new o.k("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&c!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(_-(c-(_*l+this._elevationStart))/(1-l)),this._elevationTarget=c}this.transform.setElevation(o.y.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const c=l.getCameraLngLat(),_=l.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(c,l.zoom):0;if(_<w){const P=this.calculateCameraOptionsFromTo(c,w,l.center,l.elevation);return{pitch:P.pitch,zoom:P.zoom}}return{}}_applyUpdatedTransform(l){const c=[];if(c.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&c.push(w=>this.transformCameraUpdate(w)),!c.length)return;const _=l.clone();for(const w of c){const P=_.clone(),{center:z,zoom:Y,roll:ee,pitch:ae,bearing:xe,elevation:ke}=w(P);z&&P.setCenter(z),ke!==void 0&&P.setElevation(ke),Y!==void 0&&P.setZoom(Y),ee!==void 0&&P.setRoll(ee),ae!==void 0&&P.setPitch(ae),xe!==void 0&&P.setBearing(xe),_.apply(P)}this.transform.apply(_)}_fireMoveEvents(l){this.fire(new o.k("move",l)),this._zooming&&this.fire(new o.k("zoom",l)),this._rotating&&this.fire(new o.k("rotate",l)),this._pitching&&this.fire(new o.k("pitch",l)),this._rolling&&this.fire(new o.k("roll",l))}_afterEase(l,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const _=this._zooming,w=this._rotating,P=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,_&&this.fire(new o.k("zoomend",l)),w&&this.fire(new o.k("rotateend",l)),P&&this.fire(new o.k("pitchend",l)),z&&this.fire(new o.k("rollend",l)),this.fire(new o.k("moveend",l))}flyTo(l,c){if(!l.essential&&O.prefersReducedMotion){const yn=o.M(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(yn,c)}this.stop(),l=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.c8},l);const _=this._getTransformForUpdate(),w=_.bearing,P=_.pitch,z=_.roll,Y=_.padding,ee="bearing"in l?this._normalizeBearing(l.bearing,w):w,ae="pitch"in l?+l.pitch:P,xe="roll"in l?this._normalizeBearing(l.roll,z):z,ke="padding"in l?l.padding:_.padding,Ke=o.P.convert(l.offset);let $e=_.centerPoint.add(Ke);const Xe=_.screenPointToLocation($e),pt=this.cameraHelper.handleFlyTo(_,{bearing:ee,pitch:ae,roll:xe,padding:ke,locationAtOffset:Xe,offsetAsPoint:Ke,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let ut=l.curve;const mt=Math.max(_.width,_.height),vt=mt/pt.scaleOfZoom,Bt=pt.pixelPathLength;typeof pt.scaleOfMinZoom=="number"&&(ut=Math.sqrt(mt/pt.scaleOfMinZoom/Bt*2));const kt=ut*ut;function Rt(yn){const In=(vt*vt-mt*mt+(yn?-1:1)*kt*kt*Bt*Bt)/(2*(yn?vt:mt)*kt*Bt);return Math.log(Math.sqrt(In*In+1)-In)}function zt(yn){return(Math.exp(yn)-Math.exp(-yn))/2}function Tt(yn){return(Math.exp(yn)+Math.exp(-yn))/2}const nn=Rt(!1);let Zt=function(yn){return Tt(nn)/Tt(nn+ut*yn)},Mn=function(yn){return mt*((Tt(nn)*(zt(In=nn+ut*yn)/Tt(In))-zt(nn))/kt)/Bt;var In},Bn=(Rt(!0)-nn)/ut;if(Math.abs(Bt)<2e-6||!isFinite(Bn)){if(Math.abs(mt-vt)<1e-6)return this.easeTo(l,c);const yn=vt<mt?-1:1;Bn=Math.abs(Math.log(vt/mt))/ut,Mn=()=>0,Zt=In=>Math.exp(yn*ut*In)}return l.duration="duration"in l?+l.duration:1e3*Bn/("screenSpeed"in l?+l.screenSpeed/ut:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=w!==ee,this._pitching=ae!==P,this._rolling=xe!==z,this._padding=!_.isPaddingEqual(ke),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(pt.targetCenter),this._ease(yn=>{const In=yn*Bn,Nn=1/Zt(In),Fn=Mn(In);this._rotating&&_.setBearing(o.y.number(w,ee,yn)),this._pitching&&_.setPitch(o.y.number(P,ae,yn)),this._rolling&&_.setRoll(o.y.number(z,xe,yn)),this._padding&&(_.interpolatePadding(Y,ke,yn),$e=_.centerPoint.add(Ke)),pt.easeFunc(yn,Nn,Fn,$e),this.terrain&&!l.freezeElevation&&this._updateElevation(yn),this._applyUpdatedTransform(_),this._fireMoveEvents(c)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,c){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,c)}return l||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(l,c,_){_.animate===!1||_.duration===0?(l(1),c()):(this._easeStart=O.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,c){l=o.aI(l,-180,180);const _=Math.abs(l-c);return Math.abs(l-360-c)<_&&(l-=360),Math.abs(l+360-c)<_&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(l),this.transform.tileZoom):null}}const NA={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Su{constructor(l=NA){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(l,c){const _=this._map._getUIString(`AttributionControl.${c}`);l.title=_,l.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const c=this._map.style.sourceCaches;for(const w in c){const P=c[w];if(P.used||P.usedForTerrain){const z=P.getSource();z.attribution&&l.indexOf(z.attribution)<0&&l.push(z.attribution)}}l=l.filter(w=>String(w).trim()),l.sort((w,P)=>w.length-P.length),l=l.filter((w,P)=>{for(let z=P+1;z<l.length;z++)if(l[z].indexOf(w)>=0)return!1;return!0});const _=l.join(" | ");_!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=T.sanitize(_),l.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class pl{constructor(l={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const _=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const c=T.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ou{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const c=++this._id;return this._queue.push({callback:l,id:c,cancelled:!1}),c}remove(l){const c=this._currentlyRunning,_=c?this._queue.concat(c):this._queue;for(const w of _)if(w.id===l)return void(w.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const _ of c)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Pd=o.aA([{name:"a_pos3d",type:"Int16",components:3}]);class gA extends o.E{constructor(l){super(),this._lastTilesetChange=O.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,c){this.sourceCache.update(l,c),this._renderableTilesKeys=[];const _={};for(const w of Oe(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))_[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),o.bL(w.terrainRttPosMatrix32f,0,o.X,o.X,0,0,1),this._tiles[w.key]=new fe(w,this.tileSize),this._lastTilesetChange=O.now());for(const w in this._tiles)_[w]||delete this._tiles[w]}freeRtt(l){for(const c in this._tiles){const _=this._tiles[c];(!l||_.tileID.equals(l)||_.tileID.isChildOf(l)||l.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const c={};for(const _ of this._renderableTilesKeys){const w=this._tiles[_].tileID,P=l.clone(),z=o.a$();if(w.canonical.equals(l.canonical))o.bL(z,0,o.X,o.X,0,0,1);else if(w.canonical.isChildOf(l.canonical)){const Y=w.canonical.z-l.canonical.z,ee=w.canonical.x-(w.canonical.x>>Y<<Y),ae=w.canonical.y-(w.canonical.y>>Y<<Y),xe=o.X>>Y;o.bL(z,0,xe,xe,0,0,1),o.J(z,z,[-ee*xe,-ae*xe,0])}else{if(!l.canonical.isChildOf(w.canonical))continue;{const Y=l.canonical.z-w.canonical.z,ee=l.canonical.x-(l.canonical.x>>Y<<Y),ae=l.canonical.y-(l.canonical.y>>Y<<Y),xe=o.X>>Y;o.bL(z,0,o.X,o.X,0,0,1),o.J(z,z,[ee*xe,ae*xe,0]),o.K(z,z,[1/2**Y,1/2**Y,0])}}P.terrainRttPosMatrix32f=new Float32Array(z),c[_]=P}return c}getSourceTile(l,c){const _=this.sourceCache._source;let w=l.overscaledZ-this.deltaZoom;if(w>_.maxzoom&&(w=_.maxzoom),w<_.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(w).key);let P=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!P||!P.dem)&&c)for(;w>=_.minzoom&&(!P||!P.dem);)P=this.sourceCache.getTileByID(l.scaledTo(w--).key);return P}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}}class mc{constructor(l,c,_){this._meshCache={},this.painter=l,this.sourceCache=new gA(c),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,c,_,w=o.X){var P;if(!(c>=0&&c<w&&_>=0&&_<w))return 0;const z=this.getTerrainData(l),Y=(P=z.tile)===null||P===void 0?void 0:P.dem;if(!Y)return 0;const ee=o.c9([],[c/w*o.X,_/w*o.X],z.u_terrain_matrix),ae=[ee[0]*Y.dim,ee[1]*Y.dim],xe=Math.floor(ae[0]),ke=Math.floor(ae[1]),Ke=ae[0]-xe,$e=ae[1]-ke;return Y.get(xe,ke)*(1-Ke)*(1-$e)+Y.get(xe+1,ke)*Ke*(1-$e)+Y.get(xe,ke+1)*(1-Ke)*$e+Y.get(xe+1,ke+1)*Ke*$e}getElevationForLngLatZoom(l,c){if(!o.ca(c,l.wrap()))return 0;const{tileID:_,mercatorX:w,mercatorY:P}=this._getOverscaledTileIDFromLngLatZoom(l,c);return this.getElevation(_,w%o.X,P%o.X,o.X)}getElevation(l,c,_,w=o.X){return this.getDEMElevation(l,c,_,w)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const w=this.painter.context,P=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ie(w,P,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ie(w,new o.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.aq([])}const c=this.sourceCache.getSourceTile(l,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const w=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new ie(w,c.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),c.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const _=c&&c+c.tileID.key+l.key;if(_&&!this._demMatrixCache[_]){const w=this.sourceCache.sourceCache._source.maxzoom;let P=l.canonical.z-c.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=w?P=l.canonical.z-w:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=l.canonical.x-(l.canonical.x>>P<<P),Y=l.canonical.y-(l.canonical.y>>P<<P),ee=o.cb(new Float64Array(16),[1/(o.X<<P),1/(o.X<<P),0]);o.J(ee,ee,[z*o.X,Y*o.X,0]),this._demMatrixCache[l.key]={matrix:ee,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(l){const c=this.painter,_=c.width/devicePixelRatio,w=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ie(c.context,{width:_,height:w,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ie(c.context,{width:_,height:w,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(_,w,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,_,w))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let P=0,z=0;P<this._coordsTextureSize;P++)for(let Y=0;Y<this._coordsTextureSize;Y++,z+=4)c[z+0]=255&Y,c[z+1]=255&P,c[z+2]=Y>>8<<4|P>>8,c[z+3]=0;const _=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),w=new ie(l,_,l.gl.RGBA,{premultiply:!1});return w.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),_=this.painter.context,w=_.gl,P=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),Y=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(P,Y-z-1,1,1,w.RGBA,w.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null);const ee=c[0]+(c[2]>>4<<8),ae=c[1]+((15&c[2])<<8),xe=this.coordsIndex[255-c[3]],ke=xe&&this.sourceCache.getTileByID(xe);if(!ke)return null;const Ke=this._coordsTextureSize,$e=(1<<ke.tileID.canonical.z)*Ke;return new o.Y((ke.tileID.canonical.x*Ke+ee)/$e+ke.tileID.wrap,(ke.tileID.canonical.y*Ke+ae)/$e,this.getElevation(ke.tileID,ee,ae,Ke))}depthAtPoint(l){const c=new Uint8Array(4),_=this.painter.context,w=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,c),_.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(l){var c;const _=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,w=_&&l.canonical.y===0,P=_&&l.canonical.y===(1<<l.canonical.z)-1,z=`m_${w?"n":""}_${P?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const Y=this.painter.context,ee=new o.cc,ae=new o.aE,xe=this.meshSize,ke=o.X/xe,Ke=xe*xe;for(let Tt=0;Tt<=xe;Tt++)for(let nn=0;nn<=xe;nn++)ee.emplaceBack(nn*ke,Tt*ke,0);for(let Tt=0;Tt<Ke;Tt+=xe+1)for(let nn=0;nn<xe;nn++)ae.emplaceBack(nn+Tt,xe+nn+Tt+1,xe+nn+Tt+2),ae.emplaceBack(nn+Tt,xe+nn+Tt+2,nn+Tt+1);const $e=ee.length,Xe=$e+(xe+1),pt=(xe+1)*xe,ut=w?o.b6:0,mt=w?0:1,vt=P?o.b7:o.X,Bt=P?0:1;for(let Tt=0;Tt<=xe;Tt++)ee.emplaceBack(Tt*ke,ut,mt);for(let Tt=0;Tt<=xe;Tt++)ee.emplaceBack(Tt*ke,vt,Bt);for(let Tt=0;Tt<xe;Tt++)ae.emplaceBack(pt+Tt,Xe+Tt,Xe+Tt+1),ae.emplaceBack(pt+Tt,Xe+Tt+1,pt+Tt+1),ae.emplaceBack(0+Tt,$e+Tt+1,$e+Tt),ae.emplaceBack(0+Tt,0+Tt+1,$e+Tt+1);const kt=ee.length,Rt=kt+2*(xe+1);for(const Tt of[0,1])for(let nn=0;nn<=xe;nn++)for(const Zt of[0,1])ee.emplaceBack(Tt*o.X,nn*ke,Zt);for(let Tt=0;Tt<2*xe;Tt+=2)ae.emplaceBack(kt+Tt,kt+Tt+1,kt+Tt+3),ae.emplaceBack(kt+Tt,kt+Tt+3,kt+Tt+2),ae.emplaceBack(Rt+Tt,Rt+Tt+3,Rt+Tt+1),ae.emplaceBack(Rt+Tt,Rt+Tt+2,Rt+Tt+3);const zt=new nl(Y.createVertexBuffer(ee,Pd.members),Y.createIndexBuffer(ae),o.aD.simpleSegment(0,0,ee.length,ae.length));return this._meshCache[z]=zt,zt}getMeshFrameDelta(l){return 2*Math.PI*o.bo/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,c){var _;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(l,c);return(_=this.getMinMaxElevation(w).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(l){const c=this.getTerrainData(l).tile,_={minElevation:null,maxElevation:null};return c&&c.dem&&(_.minElevation=c.dem.min*this.exaggeration,_.maxElevation=c.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(l,c){const _=o.Y.fromLngLat(l.wrap()),w=(1<<c)*o.X,P=_.x*w,z=_.y*w,Y=Math.floor(P/o.X),ee=Math.floor(z/o.X);return{tileID:new o.S(c,0,c,Y,ee),mercatorX:P,mercatorY:z}}}class Ml{constructor(l,c,_){this._context=l,this._size=c,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(_.texture),{id:l,fbo:c,texture:_,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>l.id!==c),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const ys={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ys{constructor(l,c){this.painter=l,this.terrain=c,this.pool=new Ml(l.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(_=>!l._layers[_].isHidden(c)),this._coordsAscending={};for(const _ in l.sourceCaches){this._coordsAscending[_]={};const w=l.sourceCaches[_].getVisibleCoordinates();for(const P of w){const z=this.terrain.sourceCache.getTerrainCoords(P);for(const Y in z)this._coordsAscending[_][Y]||(this._coordsAscending[_][Y]=[]),this._coordsAscending[_][Y].push(z[Y])}}this._coordsAscendingStr={};for(const _ of l._order){const w=l._layers[_],P=w.source;if(ys[w.type]&&!this._coordsAscendingStr[P]){this._coordsAscendingStr[P]={};for(const z in this._coordsAscending[P])this._coordsAscendingStr[P][z]=this._coordsAscending[P][z].map(Y=>Y.key).sort().join()}}for(const _ of this._renderableTiles)for(const w in this._coordsAscendingStr){const P=this._coordsAscendingStr[w][_.tileID.key];P&&P!==_.rttCoords[w]&&(_.rtt=[])}}renderLayer(l,c){if(l.isHidden(this.painter.transform.zoom))return!1;const _=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),w=l.type,P=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(ys[w]&&(this._prevType&&ys[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(l.id),!z))return!0;if(ys[this._prevType]||ys[w]&&z){this._prevType=w;const Y=this._stacks.length-1,ee=this._stacks[Y]||[];for(const ae of this._renderableTiles){if(this.pool.isFull()&&($u(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ae),ae.rtt[Y]){const ke=this.pool.getObjectForId(ae.rtt[Y].id);if(ke.stamp===ae.rtt[Y].stamp){this.pool.useObject(ke);continue}}const xe=this.pool.getOrCreateFreeObject();this.pool.useObject(xe),this.pool.stampObject(xe),ae.rtt[Y]={id:xe.id,stamp:xe.stamp},P.context.bindFramebuffer.set(xe.fbo.framebuffer),P.context.clear({color:o.b4.transparent,stencil:0}),P.currentStencilSource=void 0;for(let ke=0;ke<ee.length;ke++){const Ke=P.style._layers[ee[ke]],$e=Ke.source?this._coordsAscending[Ke.source][ae.tileID.key]:[ae.tileID];P.context.viewport.set([0,0,xe.fbo.width,xe.fbo.height]),P._renderTileClippingMasks(Ke,$e,!0),P.renderLayer(P,P.style.sourceCaches[Ke.source],Ke,$e,_),Ke.source&&(ae.rttCoords[Ke.source]=this._coordsAscendingStr[Ke.source][ae.tileID.key])}}return $u(this.painter,this.terrain,this._rttTiles,_),this._rttTiles=[],this.pool.freeAllObjects(),ys[w]}return!1}}const id={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Kd=f,yA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:NA,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},js={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Fc{constructor(l,c,_=!1){this.mousedown=P=>{this.startMove(P,T.mousePos(this.element,P)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=P=>{this.move(P,T.mousePos(this.element,P))},this.mouseup=P=>{this._rotatePitchHanlder.dragEnd(P),this.offTemp()},this.touchstart=P=>{P.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,P.targetTouches)[0],this.startMove(P,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=P=>{P.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,P.targetTouches)[0],this.move(P,this._lastPos))},this.touchend=P=>{P.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const w=new Td;this._rotatePitchHanlder=new hr({clickTolerance:3,move:(P,z)=>{const Y=c.getBoundingClientRect(),ee=new o.P((Y.bottom-Y.top)/2,(Y.right-Y.left)/2);return{bearingDelta:o.c7(new o.P(P.x,z.y),z,ee),pitchDelta:_?-.5*(z.y-P.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=l,T.addEventListener(c,"mousedown",this.mousedown),T.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(c,"touchcancel",this.reset)}startMove(l,c){this._rotatePitchHanlder.dragStart(l,c),T.disableDrag()}move(l,c){const _=this.map,{bearingDelta:w,pitchDelta:P}=this._rotatePitchHanlder.dragMove(l,c)||{};w&&_.setBearing(_.getBearing()+w),P&&_.setPitch(_.getPitch()+P)}off(){const l=this.element;T.removeEventListener(l,"mousedown",this.mousedown),T.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let Eu;function Ya(I,l,c){const _=new o.N(I.lng,I.lat);if(I=new o.N(I.lng,I.lat),l){const w=new o.N(I.lng-360,I.lat),P=new o.N(I.lng+360,I.lat),z=c.locationToScreenPoint(I).distSqr(l);c.locationToScreenPoint(w).distSqr(l)<z?I=w:c.locationToScreenPoint(P).distSqr(l)<z&&(I=P)}for(;Math.abs(I.lng-c.center.lng)>180;){const w=c.locationToScreenPoint(I);if(w.x>=0&&w.y>=0&&w.x<=c.width&&w.y<=c.height)break;I.lng>c.center.lng?I.lng-=360:I.lng+=360}return I.lng!==_.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(I))?I:_}const Zu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lc(I,l,c){const _=I.classList;for(const w in Zu)_.remove(`maplibregl-${c}-anchor-${w}`);_.add(`maplibregl-${c}-anchor-${l}`)}class Bu extends o.E{constructor(l){if(super(),this._onKeyPress=c=>{const _=c.code,w=c.charCode||c.keyCode;_!=="Space"&&_!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=c=>{const _=c.originalEvent.target,w=this._element;this._popup&&(_===w||w.contains(_))&&this.togglePopup()},this._update=c=>{var _;if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!w)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ya(this._lngLat,this._flatPos,this._map.transform):(_=this._lngLat)===null||_===void 0?void 0:_.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let P="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?P=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(P=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let z="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?z="rotateX(0deg)":this._pitchAlignment==="map"&&(z=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${Zu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${z} ${P}`),O.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=o.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div");const c=T.createNS("http://www.w3.org/2000/svg","svg"),_=41,w=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${_}px`),c.setAttributeNS(null,"width",`${w}px`),c.setAttributeNS(null,"viewBox",`0 0 ${w} ${_}`);const P=T.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const z=T.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const Y=T.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");const ee=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const mt of ee){const vt=T.createNS("http://www.w3.org/2000/svg","ellipse");vt.setAttributeNS(null,"opacity","0.04"),vt.setAttributeNS(null,"cx","10.5"),vt.setAttributeNS(null,"cy","5.80029008"),vt.setAttributeNS(null,"rx",mt.rx),vt.setAttributeNS(null,"ry",mt.ry),Y.appendChild(vt)}const ae=T.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const xe=T.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(xe);const ke=T.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"opacity","0.25"),ke.setAttributeNS(null,"fill","#000000");const Ke=T.createNS("http://www.w3.org/2000/svg","path");Ke.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ke.appendChild(Ke);const $e=T.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$e.setAttributeNS(null,"fill","#FFFFFF");const Xe=T.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pt=T.createNS("http://www.w3.org/2000/svg","circle");pt.setAttributeNS(null,"fill","#000000"),pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"cx","5.5"),pt.setAttributeNS(null,"cy","5.5"),pt.setAttributeNS(null,"r","5.4999962");const ut=T.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#FFFFFF"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962"),Xe.appendChild(pt),Xe.appendChild(ut),z.appendChild(Y),z.appendChild(ae),z.appendChild(ke),z.appendChild($e),z.appendChild(Xe),c.appendChild(z),c.setAttributeNS(null,"height",_*this._scale+"px"),c.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Lc(this._element,this._anchor,"marker"),l&&l.className)for(const c of l.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const w=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var c,_;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const ke=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ke&&(this._element.style.opacity=ke))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,P=w.terrain.depthAtPoint(this._pos),z=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,z)-P<.006)return void(this._element.style.opacity=this._opacity);const Y=-this._offset.y/w.transform.pixelsPerMeter,ee=Math.sin(w.getPitch()*Math.PI/180)*Y,ae=w.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),xe=w.transform.lngLatToCameraDepth(this._lngLat,z+ee)-ae>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&xe&&this._popup.remove(),this._element.style.opacity=xe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=o.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,c){return l===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const va={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let $s=0,su=!1;const au={maxWidth:100,unit:"metric"};function WA(I,l,c){const _=c&&c.maxWidth||100,w=I._container.clientHeight/2,P=I._container.clientWidth/2,z=I.unproject([P-_/2,w]),Y=I.unproject([P+_/2,w]),ee=Math.round(I.project(Y).x-I.project(z).x),ae=Math.min(_,ee,I._container.clientWidth),xe=z.distanceTo(Y);if(c&&c.unit==="imperial"){const ke=3.2808*xe;ke>5280?lu(l,ae,ke/5280,I._getUIString("ScaleControl.Miles")):lu(l,ae,ke,I._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?lu(l,ae,xe/1852,I._getUIString("ScaleControl.NauticalMiles")):xe>=1e3?lu(l,ae,xe/1e3,I._getUIString("ScaleControl.Kilometers")):lu(l,ae,xe,I._getUIString("ScaleControl.Meters"))}function lu(I,l,c,_){const w=function(P){const z=Math.pow(10,`${Math.floor(P)}`.length-1);let Y=P/z;return Y=Y>=10?10:Y>=5?5:Y>=3?3:Y>=2?2:Y>=1?1:function(ee){const ae=Math.pow(10,Math.ceil(-Math.log(ee)/Math.LN10));return Math.round(ee*ae)/ae}(Y),z*Y}(c);I.style.width=l*(w/c)+"px",I.innerHTML=`${w}&nbsp;${_}`}const Uc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},vA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Sl(I){if(I){if(typeof I=="number"){const l=Math.round(Math.abs(I)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,I),"top-left":new o.P(l,l),"top-right":new o.P(-l,l),bottom:new o.P(0,-I),"bottom-left":new o.P(l,-l),"bottom-right":new o.P(-l,-l),left:new o.P(I,0),right:new o.P(-I,0)}}if(I instanceof o.P||Array.isArray(I)){const l=o.P.convert(I);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:o.P.convert(I.center||[0,0]),top:o.P.convert(I.top||[0,0]),"top-left":o.P.convert(I["top-left"]||[0,0]),"top-right":o.P.convert(I["top-right"]||[0,0]),bottom:o.P.convert(I.bottom||[0,0]),"bottom-left":o.P.convert(I["bottom-left"]||[0,0]),"bottom-right":o.P.convert(I["bottom-right"]||[0,0]),left:o.P.convert(I.left||[0,0]),right:o.P.convert(I.right||[0,0])}}return Sl(new o.P(0,0))}const Dd=f;a.AJAXError=o.cg,a.Event=o.k,a.Evented=o.E,a.LngLat=o.N,a.MercatorCoordinate=o.Y,a.Point=o.P,a.addProtocol=o.ch,a.config=o.a,a.removeProtocol=o.ci,a.AttributionControl=Su,a.BoxZoomHandler=zs,a.CanvasSource=pn,a.CooperativeGesturesHandler=pc,a.DoubleClickZoomHandler=Nl,a.DragPanHandler=fc,a.DragRotateHandler=th,a.EdgeInsets=Gs,a.FullscreenControl=class extends o.E{constructor(I={}){super(),this._onFullscreenChange=()=>{var l;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=c==null?void 0:c.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,I&&I.container&&(I.container instanceof HTMLElement?this._container=I.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(I){return this._map=I,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const I=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",I).setAttribute("aria-hidden","true"),I.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const I=this._getTitle();this._fullscreenButton.setAttribute("aria-label",I),this._fullscreenButton.title=I}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=tn,a.GeolocateControl=class extends o.E{constructor(I){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const c=new o.N(l.coords.longitude,l.coords.latitude),_=l.coords.accuracy,w=this._map.getBearing(),P=o.e({bearing:w},this.options.fitBoundsOptions),z=Ut.fromLngLat(c,_);this._map.fitBounds(z,P,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const c=new o.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&su)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Bu({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},va,I)}onAdd(I){return this._map=I,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(l=!1){if(Eu!==void 0&&!l)return Eu;if(window.navigator.permissions===void 0)return Eu=!!window.navigator.geolocation,Eu;try{Eu=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Eu=!!window.navigator.geolocation}return Eu})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,$s=0,su=!1}_isOutOfMapMaxBounds(I){const l=this._map.getMaxBounds(),c=I.coords;return l&&(c.longitude<l.getWest()||c.longitude>l.getEast()||c.latitude<l.getSouth()||c.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const I=this._map.getBounds(),l=I.getSouthEast(),c=I.getNorthEast(),_=l.distanceTo(c),w=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":$s--,su=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let I;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),$s++,$s>1?(I={maximumAge:6e5,timeout:0},su=!0):(I=this.options.positionOptions,su=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var I;const l=(I=this._map.getProjection())===null||I===void 0?void 0:I.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var I;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((I=this._map.getProjection())===null||I===void 0?void 0:I.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(I){return this._map=I,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=T.create("button","maplibregl-ctrl-globe",this._container),T.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=cc,a.ImageSource=rr,a.KeyboardHandler=Fo,a.LngLatBounds=Ut,a.LogoControl=pl,a.Map=class extends Hr{constructor(I){var l,c;o.cd.mark(o.ce.create);const _=Object.assign(Object.assign(Object.assign({},yA),I),{canvasContextAttributes:Object.assign(Object.assign({},yA.canvasContextAttributes),I.canvasContextAttributes)});if(_.minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new Oa,P=new IA;if(_.minZoom!==void 0&&w.setMinZoom(_.minZoom),_.maxZoom!==void 0&&w.setMaxZoom(_.maxZoom),_.minPitch!==void 0&&w.setMinPitch(_.minPitch),_.maxPitch!==void 0&&w.setMaxPitch(_.maxPitch),_.renderWorldCopies!==void 0&&w.setRenderWorldCopies(_.renderWorldCopies),super(w,P,{bearingSnap:_.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ou,this._controls=[],this._mapId=o.a1(),this._contextLost=Y=>{Y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:Y}))},this._contextRestored=Y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:Y}))},this._onMapScroll=Y=>{if(Y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},_.canvasContextAttributes),this._trackResize=_.trackResize===!0,this._bearingSnap=_.bearingSnap,this._centerClampedToGround=_.centerClampedToGround,this._refreshExpiredTiles=_.refreshExpiredTiles===!0,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions===!0,this._collectResourceTiming=_.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},id),_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=_.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let Y=!1;const ee=RA(ae=>{this._trackResize&&!this._removed&&(this.resize(ae),this.redraw())},50);this._resizeObserver=new ResizeObserver(ae=>{Y?ee(ae):Y=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Pr(this,_),this._hash=_.hash&&new cc(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,elevation:_.elevation,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,roll:_.roll}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,o.e({},_.fitBoundsOptions,{duration:0}))));const z=typeof _.style=="string"||((c=(l=_.style)===null||l===void 0?void 0:l.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Su(typeof _.attributionControl=="boolean"?void 0:_.attributionControl)),_.maplibreLogo&&this.addControl(new pl,_.logoPosition),this.on("style.load",()=>{if(z||this._resizeTransform(),this.transform.unmodified){const Y=o.M(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(Y)}}),this.on("data",Y=>{this._update(Y.dataType==="style"),this.fire(new o.k(`${Y.dataType}data`,Y))}),this.on("dataloading",Y=>{this.fire(new o.k(`${Y.dataType}dataloading`,Y))}),this.on("dataabort",Y=>{this.fire(new o.k("sourcedataabort",Y))})}_getMapId(){return this._mapId}addControl(I,l){if(l===void 0&&(l=I.getDefaultPosition?I.getDefaultPosition():"top-right"),!I||!I.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=I.onAdd(this);this._controls.push(I);const _=this._controlPositions[l];return l.indexOf("bottom")!==-1?_.insertBefore(c,_.firstChild):_.appendChild(c),this}removeControl(I){if(!I||!I.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(I);return l>-1&&this._controls.splice(l,1),I.onRemove(this),this}hasControl(I){return this._controls.indexOf(I)>-1}calculateCameraOptionsFromTo(I,l,c,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(I,l,c,_)}resize(I,l=!0){const[c,_]=this._containerDimensions(),w=this._getClampedPixelRatio(c,_);if(this._resizeCanvas(c,_,w),this.painter.resize(c,_,w),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const Y=this._getClampedPixelRatio(c,_);this._resizeCanvas(c,_,Y),this.painter.resize(c,_,Y)}this._resizeTransform(l);const P=!this._moving;return P&&(this.stop(),this.fire(new o.k("movestart",I)).fire(new o.k("move",I))),this.fire(new o.k("resize",I)),P&&this.fire(new o.k("moveend",I)),this}_resizeTransform(I=!0){var l;const[c,_]=this._containerDimensions();this.transform.resize(c,_,I),(l=this._requestedCameraState)===null||l===void 0||l.resize(c,_,I)}_getClampedPixelRatio(I,l){const{0:c,1:_}=this._maxCanvasSize,w=this.getPixelRatio(),P=I*w,z=l*w;return Math.min(P>c?c/P:1,z>_?_/z:1)*w}getPixelRatio(){var I;return(I=this._overridePixelRatio)!==null&&I!==void 0?I:devicePixelRatio}setPixelRatio(I){this._overridePixelRatio=I,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(I){return this.transform.setMaxBounds(Ut.convert(I)),this._update()}setMinZoom(I){if((I=I??-2)>=-2&&I<=this.transform.maxZoom)return this.transform.setMinZoom(I),this._update(),this.getZoom()<I&&this.setZoom(I),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(I){if((I=I??22)>=this.transform.minZoom)return this.transform.setMaxZoom(I),this._update(),this.getZoom()>I&&this.setZoom(I),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(I){if((I=I??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(I>=0&&I<=this.transform.maxPitch)return this.transform.setMinPitch(I),this._update(),this.getPitch()<I&&this.setPitch(I),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(I){if((I=I??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(I>=this.transform.minPitch)return this.transform.setMaxPitch(I),this._update(),this.getPitch()>I&&this.setPitch(I),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(I){return this.transform.setRenderWorldCopies(I),this._update()}project(I){return this.transform.locationToScreenPoint(o.N.convert(I),this.style&&this.terrain)}unproject(I){return this.transform.screenPointToLocation(o.P.convert(I),this.terrain)}isMoving(){var I;return this._moving||((I=this.handlers)===null||I===void 0?void 0:I.isMoving())}isZooming(){var I;return this._zooming||((I=this.handlers)===null||I===void 0?void 0:I.isZooming())}isRotating(){var I;return this._rotating||((I=this.handlers)===null||I===void 0?void 0:I.isRotating())}_createDelegatedListener(I,l,c){if(I==="mouseenter"||I==="mouseover"){let _=!1;return{layers:l,listener:c,delegates:{mousemove:P=>{const z=l.filter(ee=>this.getLayer(ee)),Y=z.length!==0?this.queryRenderedFeatures(P.point,{layers:z}):[];Y.length?_||(_=!0,c.call(this,new mi(I,this,P.originalEvent,{features:Y}))):_=!1},mouseout:()=>{_=!1}}}}if(I==="mouseleave"||I==="mouseout"){let _=!1;return{layers:l,listener:c,delegates:{mousemove:z=>{const Y=l.filter(ee=>this.getLayer(ee));(Y.length!==0?this.queryRenderedFeatures(z.point,{layers:Y}):[]).length?_=!0:_&&(_=!1,c.call(this,new mi(I,this,z.originalEvent)))},mouseout:z=>{_&&(_=!1,c.call(this,new mi(I,this,z.originalEvent)))}}}}{const _=w=>{const P=l.filter(Y=>this.getLayer(Y)),z=P.length!==0?this.queryRenderedFeatures(w.point,{layers:P}):[];z.length&&(w.features=z,c.call(this,w),delete w.features)};return{layers:l,listener:c,delegates:{[I]:_}}}}_saveDelegatedListener(I,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[I]=this._delegatedListeners[I]||[],this._delegatedListeners[I].push(l)}_removeDelegatedListener(I,l,c){if(!this._delegatedListeners||!this._delegatedListeners[I])return;const _=this._delegatedListeners[I];for(let w=0;w<_.length;w++){const P=_[w];if(P.listener===c&&P.layers.length===l.length&&P.layers.every(z=>l.includes(z))){for(const z in P.delegates)this.off(z,P.delegates[z]);return void _.splice(w,1)}}}on(I,l,c){if(c===void 0)return super.on(I,l);const _=typeof l=="string"?[l]:l,w=this._createDelegatedListener(I,_,c);this._saveDelegatedListener(I,w);for(const P in w.delegates)this.on(P,w.delegates[P]);return{unsubscribe:()=>{this._removeDelegatedListener(I,_,c)}}}once(I,l,c){if(c===void 0)return super.once(I,l);const _=typeof l=="string"?[l]:l,w=this._createDelegatedListener(I,_,c);for(const P in w.delegates){const z=w.delegates[P];w.delegates[P]=(...Y)=>{this._removeDelegatedListener(I,_,c),z(...Y)}}this._saveDelegatedListener(I,w);for(const P in w.delegates)this.once(P,w.delegates[P]);return this}off(I,l,c){return c===void 0?super.off(I,l):(this._removeDelegatedListener(I,typeof l=="string"?[l]:l,c),this)}queryRenderedFeatures(I,l){if(!this.style)return[];let c;const _=I instanceof o.P||Array.isArray(I),w=_?I:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(_?{}:I)||{},w instanceof o.P||typeof w[0]=="number")c=[o.P.convert(w)];else{const P=o.P.convert(w[0]),z=o.P.convert(w[1]);c=[P,new o.P(z.x,P.y),z,new o.P(P.x,z.y),P]}return this.style.queryRenderedFeatures(c,l,this.transform)}querySourceFeatures(I,l){return this.style.querySourceFeatures(I,l)}setStyle(I,l){return(l=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&I?(this._diffStyle(I,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(I,l))}setTransformRequest(I){return this._requestManager.setTransformRequest(I),this}_getUIString(I){const l=this._locale[I];if(l==null)throw new Error(`Missing UI string '${I}'`);return l}_updateStyle(I,l){var c,_;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(I,l));const w=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!I)),I?(this.style=new Cu(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof I=="string"?this.style.loadURL(I,l,w):this.style.loadJSON(I,l,w),this):((_=(c=this.style)===null||c===void 0?void 0:c.projection)===null||_===void 0||_.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Cu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(I,l){if(typeof I=="string"){const c=this._requestManager.transformRequest(I,"Style");o.h(c,new AbortController).then(_=>{this._updateDiff(_.data,l)}).catch(_=>{_&&this.fire(new o.j(_))})}else typeof I=="object"&&this._updateDiff(I,l)}_updateDiff(I,l){try{this.style.setState(I,l)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(I,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(I,l){return this._lazyInitEmptyStyle(),this.style.addSource(I,l),this._update(!0)}isSourceLoaded(I){const l=this.style&&this.style.sourceCaches[I];if(l!==void 0)return l.loaded();this.fire(new o.j(new Error(`There is no source with ID '${I}'`)))}setTerrain(I){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),I){const l=this.style.sourceCaches[I.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${I.source}`);this.terrain===null&&l.reload();for(const c in this.style._layers){const _=this.style._layers[c];_.type==="hillshade"&&_.source===I.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new mc(this.painter,l,I),this.painter.renderToTexture=new Ys(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==I.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.k("terrain",{terrain:I})),this}getTerrain(){var I,l;return(l=(I=this.terrain)===null||I===void 0?void 0:I.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const I=this.style&&this.style.sourceCaches;for(const l in I){const c=I[l]._tiles;for(const _ in c){const w=c[_];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(I){return this.style.removeSource(I),this._update(!0)}getSource(I){return this.style.getSource(I)}addImage(I,l,c={}){const{pixelRatio:_=1,sdf:w=!1,stretchX:P,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:ae}=c;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||o.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:xe,height:ke,data:Ke}=l,$e=l;return this.style.addImage(I,{data:new o.R({width:xe,height:ke},new Uint8Array(Ke)),pixelRatio:_,stretchX:P,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:ae,sdf:w,version:0,userImage:$e}),$e.onAdd&&$e.onAdd(this,I),this}}{const{width:xe,height:ke,data:Ke}=O.getImageData(l);this.style.addImage(I,{data:new o.R({width:xe,height:ke},Ke),pixelRatio:_,stretchX:P,stretchY:z,content:Y,textFitWidth:ee,textFitHeight:ae,sdf:w,version:0})}}updateImage(I,l){const c=this.style.getImage(I);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof HTMLImageElement||o.b(l)?O.getImageData(l):l,{width:w,height:P,data:z}=_;if(w===void 0||P===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==c.data.width||P!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Y=!(l instanceof HTMLImageElement||o.b(l));return c.data.replace(z,Y),this.style.updateImage(I,c),this}getImage(I){return this.style.getImage(I)}hasImage(I){return I?!!this.style.getImage(I):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(I){this.style.removeImage(I)}loadImage(I){return ne.getImage(this._requestManager.transformRequest(I,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(I,l){return this._lazyInitEmptyStyle(),this.style.addLayer(I,l),this._update(!0)}moveLayer(I,l){return this.style.moveLayer(I,l),this._update(!0)}removeLayer(I){return this.style.removeLayer(I),this._update(!0)}getLayer(I){return this.style.getLayer(I)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(I,l,c){return this.style.setLayerZoomRange(I,l,c),this._update(!0)}setFilter(I,l,c={}){return this.style.setFilter(I,l,c),this._update(!0)}getFilter(I){return this.style.getFilter(I)}setPaintProperty(I,l,c,_={}){return this.style.setPaintProperty(I,l,c,_),this._update(!0)}getPaintProperty(I,l){return this.style.getPaintProperty(I,l)}setLayoutProperty(I,l,c,_={}){return this.style.setLayoutProperty(I,l,c,_),this._update(!0)}getLayoutProperty(I,l){return this.style.getLayoutProperty(I,l)}setGlyphs(I,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(I,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(I,l,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(I,l,c,_=>{_||this._update(!0)}),this}removeSprite(I){return this._lazyInitEmptyStyle(),this.style.removeSprite(I),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(I,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(I,l,c=>{c||this._update(!0)}),this}setLight(I,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(I,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(I,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(I,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(I,l){return this.style.setFeatureState(I,l),this._update()}removeFeatureState(I,l){return this.style.removeFeatureState(I,l),this._update()}getFeatureState(I){return this.style.getFeatureState(I)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let I=0,l=0;return this._container&&(I=this._container.clientWidth||400,l=this._container.clientHeight||300),[I,l]}_setupContainer(){const I=this._container;I.classList.add("maplibregl-map");const l=this._canvasContainer=T.create("div","maplibregl-canvas-container",I);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),_=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],_);const w=this._controlContainer=T.create("div","maplibregl-control-container",I),P=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{P[z]=T.create("div",`maplibregl-ctrl-${z} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(I,l,c){this._canvas.width=Math.floor(c*I),this._canvas.height=Math.floor(c*l),this._canvas.style.width=`${I}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const I=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{l={requestedAttributes:I},_&&(l.statusMessage=_.statusMessage,l.type=_.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,I):this._canvas.getContext("webgl2",I)||this._canvas.getContext("webgl",I),!c){const _="Failed to initialize WebGL";throw l?(l.message=_,new Error(JSON.stringify(l))):new Error(_)}this.painter=new rd(c,this.transform),F.testSupport(c)}migrateProjection(I,l){super.migrateProjection(I,l),this.painter.transform=I,this.fire(new o.k("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(I){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||I,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(I){return this._update(),this._renderTaskQueue.add(I)}_cancelRenderFrame(I){this._renderTaskQueue.remove(I)}_render(I){var l,c,_,w,P;const z=this._idleTriggered?this._fadeDuration:0,Y=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(I),this._removed)return;let ee=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ke=this.transform.zoom,Ke=O.now();this.style.zoomHistory.update(ke,Ke);const $e=new o.z(ke,{now:Ke,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Xe=$e.crossFadingFactor();Xe===1&&Xe===this._crossFadingFactor||(ee=!0,this._crossFadingFactor=Xe),this.style.update($e)}const ae=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==Y;(_=this.style.projection)===null||_===void 0||_.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(P=this.style.projection)===null||P===void 0?void 0:P.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||ae)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,ae),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cd.mark(o.ce.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||ee)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const xe=this._sourcesDirty||this._styleDirty||this._placementDirty;return xe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||xe||(this._fullyLoaded=!0,o.cd.mark(o.ce.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var I;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(I=this._resizeObserver)===null||I===void 0||I.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cd.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,O.frame(this._frameRequest,I=>{o.cd.frame(I),this._frameRequest=null;try{this._render(I)}catch(l){if(!o.cf(l)&&!function(c){return c.message===nu}(l))throw l}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())}get showPadding(){return!!this._showPadding}set showPadding(I){this._showPadding!==I&&(this._showPadding=I,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())}get repaint(){return!!this._repaint}set repaint(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(I){this._vertices=I,this._update()}get version(){return Kd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(I){return this._lazyInitEmptyStyle(),this.style.setProjection(I),this._update(!0)}},a.MapMouseEvent=mi,a.MapTouchEvent=ii,a.MapWheelEvent=os,a.Marker=Bu,a.NavigationControl=class{constructor(I){this._updateZoomButtons=()=>{const l=this._map.getZoom(),c=l===this._map.getMaxZoom(),_=l===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,c)=>{const _=this._map._getUIString(`NavigationControl.${c}`);l.title=_,l.setAttribute("aria-label",_)},this.options=o.e({},js,I),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(I){return this._map=I,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(I,l){const c=T.create("button",I,this._container);return c.type="button",c.addEventListener("click",l),c}},a.Popup=class extends o.E{constructor(I){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const Y of this.options.className.split(" "))this._container.classList.add(Y);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ya(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!l)return;const _=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let w=this.options.anchor;const P=Sl(this.options.offset);if(!w){const Y=this._container.offsetWidth,ee=this._container.offsetHeight;let ae;ae=_.y+P.bottom.y<ee?["top"]:_.y>this._map.transform.height-ee?["bottom"]:[],_.x<Y/2?ae.push("left"):_.x>this._map.transform.width-Y/2&&ae.push("right"),w=ae.length===0?"bottom":ae.join("-")}let z=_.add(P[w]);this.options.subpixelPositioning||(z=z.round()),T.setTransform(this._container,`${Zu[w]} translate(${z.x}px,${z.y}px)`),Lc(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Uc),I)}addTo(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(I){return this._lngLat=o.N.convert(I),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(I){return this.setDOMContent(document.createTextNode(I))}setHTML(I){const l=document.createDocumentFragment(),c=document.createElement("body");let _;for(c.innerHTML=I;_=c.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){var I;return(I=this._container)===null||I===void 0?void 0:I.style.maxWidth}setMaxWidth(I){return this.options.maxWidth=I,this._update(),this}setDOMContent(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(I){return this._container&&this._container.classList.add(I),this}removeClassName(I){return this._container&&this._container.classList.remove(I),this}setOffset(I){return this.options.offset=I,this._update(),this}toggleClassName(I){if(this._container)return this._container.classList.toggle(I)}setSubpixelPositioning(I){this.options.subpixelPositioning=I}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const I=this._container.querySelector(vA);I&&I.focus()}},a.RasterDEMTileSource=qn,a.RasterTileSource=_n,a.ScaleControl=class{constructor(I){this._onMove=()=>{WA(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,WA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},au),I)}getDefaultPosition(){return"bottom-left"}onAdd(I){return this._map=I,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",I.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=qa,a.Style=Cu,a.TerrainControl=class{constructor(I){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=I}onAdd(I){return this._map=I,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=hc,a.TwoFingersTouchRotateHandler=Rc,a.TwoFingersTouchZoomHandler=Dc,a.TwoFingersTouchZoomRotateHandler=jA,a.VectorTileSource=Dt,a.VideoSource=Dn,a.addSourceType=(I,l)=>o._(void 0,void 0,void 0,function*(){if(dr(I))throw new Error(`A source type called "${I}" already exists.`);((c,_)=>{Zn[c]=_})(I,l)}),a.clearPrewarmedResources=function(){const I=Yt;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(Fe),Yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=st,a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},a.getVersion=function(){return Dd},a.getWorkerCount=function(){return He.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function(I){return Ue().broadcast("IS",I)},a.prewarm=function(){Lt().acquire(Fe)},a.setMaxParallelImageRequests=function(I){o.a.MAX_PARALLEL_IMAGE_REQUESTS=I},a.setRTLTextPlugin=function(I,l){return ce().setRTLTextPlugin(I,l)},a.setWorkerCount=function(I){He.workerCount=I},a.setWorkerUrl=function(I){o.a.WORKER_URL=I}});var s=t;return s})}(r2)),r2.exports}var $H=YH();const ay=Al($H);var pb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function WU(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qv={exports:{}};qv.exports;var WI;function VH(){return WI||(WI=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",f="[object Array]",y="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",O="[object Error]",T="[object Function]",F="[object GeneratorFunction]",j="[object Map]",N="[object Number]",q="[object Null]",H="[object Object]",oe="[object Promise]",ne="[object Proxy]",$="[object RegExp]",te="[object Set]",G="[object String]",ie="[object Symbol]",he="[object Undefined]",pe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Se="[object Float32Array]",De="[object Float64Array]",be="[object Int8Array]",at="[object Int16Array]",Ze="[object Int32Array]",Je="[object Uint8Array]",We="[object Uint8ClampedArray]",Me="[object Uint16Array]",Fe="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,Yt=/^(?:0|[1-9]\d*)$/,gt={};gt[Se]=gt[De]=gt[be]=gt[at]=gt[Ze]=gt[Je]=gt[We]=gt[Me]=gt[Fe]=!0,gt[o]=gt[f]=gt[Ee]=gt[x]=gt[me]=gt[B]=gt[O]=gt[T]=gt[j]=gt[N]=gt[H]=gt[$]=gt[te]=gt[G]=gt[pe]=!1;var Lt=typeof pb=="object"&&pb&&pb.Object===Object&&pb,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Lt||Kt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,_t=it&&Lt.process,ft=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Ut=ft&&ft.isTypedArray;function rn(J,Ie){for(var st=-1,$t=J==null?0:J.length,Kr=0,$n=[];++st<$t;){var ti=J[st];Ie(ti,st,J)&&($n[Kr++]=ti)}return $n}function Dt(J,Ie){for(var st=-1,$t=Ie.length,Kr=J.length;++st<$t;)J[Kr+st]=Ie[st];return J}function _n(J,Ie){for(var st=-1,$t=J==null?0:J.length;++st<$t;)if(Ie(J[st],st,J))return!0;return!1}function qn(J,Ie){for(var st=-1,$t=Array(J);++st<J;)$t[st]=Ie(st);return $t}function tn(J){return function(Ie){return J(Ie)}}function rr(J,Ie){return J.has(Ie)}function Dn(J,Ie){return J==null?void 0:J[Ie]}function pn(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t,Kr){st[++Ie]=[Kr,$t]}),st}function Zn(J,Ie){return function(st){return J(Ie(st))}}function dr(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t){st[++Ie]=$t}),st}var vr=Array.prototype,Jn=Function.prototype,Qe=Object.prototype,ce=Ue["__core-js_shared__"],fe=Jn.toString,nt=Qe.hasOwnProperty,St=function(){var J=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ht=Qe.toString,sn=RegExp("^"+fe.call(nt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=it?Ue.Buffer:void 0,Oe=Ue.Symbol,se=Ue.Uint8Array,ve=Qe.propertyIsEnumerable,p=vr.splice,Ne=Oe?Oe.toStringTag:void 0,Ye=Object.getOwnPropertySymbols,rt=tr?tr.isBuffer:void 0,ct=Zn(Object.keys,Object),dt=$i(Ue,"DataView"),qt=$i(Ue,"Map"),Gt=$i(Ue,"Promise"),jt=$i(Ue,"Set"),xt=$i(Ue,"WeakMap"),Tn=$i(Object,"create"),On=Oo(dt),gr=Oo(qt),Er=Oo(Gt),on=Oo(jt),Rn=Oo(xt),er=Oe?Oe.prototype:void 0,Xr=er?er.valueOf:void 0;function Ur(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Dr(){this.__data__=Tn?Tn(null):{},this.size=0}function ur(J){var Ie=this.has(J)&&delete this.__data__[J];return this.size-=Ie?1:0,Ie}function go(J){var Ie=this.__data__;if(Tn){var st=Ie[J];return st===r?void 0:st}return nt.call(Ie,J)?Ie[J]:void 0}function Sa(J){var Ie=this.__data__;return Tn?Ie[J]!==void 0:nt.call(Ie,J)}function Yi(J,Ie){var st=this.__data__;return this.size+=this.has(J)?0:1,st[J]=Tn&&Ie===void 0?r:Ie,this}Ur.prototype.clear=Dr,Ur.prototype.delete=ur,Ur.prototype.get=go,Ur.prototype.has=Sa,Ur.prototype.set=Yi;function Ci(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function oo(){this.__data__=[],this.size=0}function Ro(J){var Ie=this.__data__,st=or(Ie,J);if(st<0)return!1;var $t=Ie.length-1;return st==$t?Ie.pop():p.call(Ie,st,1),--this.size,!0}function Pi(J){var Ie=this.__data__,st=or(Ie,J);return st<0?void 0:Ie[st][1]}function Na(J){return or(this.__data__,J)>-1}function Ea(J,Ie){var st=this.__data__,$t=or(st,J);return $t<0?(++this.size,st.push([J,Ie])):st[$t][1]=Ie,this}Ci.prototype.clear=oo,Ci.prototype.delete=Ro,Ci.prototype.get=Pi,Ci.prototype.has=Na,Ci.prototype.set=Ea;function rs(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function aa(){this.size=0,this.__data__={hash:new Ur,map:new(qt||Ci),string:new Ur}}function cl(J){var Ie=Rr(this,J).delete(J);return this.size-=Ie?1:0,Ie}function Ao(J){return Rr(this,J).get(J)}function Uu(J){return Rr(this,J).has(J)}function Zl(J,Ie){var st=Rr(this,J),$t=st.size;return st.set(J,Ie),this.size+=st.size==$t?0:1,this}rs.prototype.clear=aa,rs.prototype.delete=cl,rs.prototype.get=Ao,rs.prototype.has=Uu,rs.prototype.set=Zl;function so(J){var Ie=-1,st=J==null?0:J.length;for(this.__data__=new rs;++Ie<st;)this.add(J[Ie])}function Tr(J){return this.__data__.set(J,r),this}function tl(J){return this.__data__.has(J)}so.prototype.add=so.prototype.push=Tr,so.prototype.has=tl;function Os(J){var Ie=this.__data__=new Ci(J);this.size=Ie.size}function ea(){this.__data__=new Ci,this.size=0}function qe(J){var Ie=this.__data__,st=Ie.delete(J);return this.size=Ie.size,st}function wt(J){return this.__data__.get(J)}function vn(J){return this.__data__.has(J)}function Yn(J,Ie){var st=this.__data__;if(st instanceof Ci){var $t=st.__data__;if(!qt||$t.length<t-1)return $t.push([J,Ie]),this.size=++st.size,this;st=this.__data__=new rs($t)}return st.set(J,Ie),this.size=st.size,this}Os.prototype.clear=ea,Os.prototype.delete=qe,Os.prototype.get=wt,Os.prototype.has=vn,Os.prototype.set=Yn;function hn(J,Ie){var st=Ss(J),$t=!st&&Oa(J),Kr=!st&&!$t&&ta(J),$n=!st&&!$t&&!Kr&&Jl(J),ti=st||$t||Kr||$n,ci=ti?qn(J.length,String):[],Br=ci.length;for(var xr in J)nt.call(J,xr)&&!(ti&&(xr=="length"||Kr&&(xr=="offset"||xr=="parent")||$n&&(xr=="buffer"||xr=="byteLength"||xr=="byteOffset")||Gs(xr,Br)))&&ci.push(xr);return ci}function or(J,Ie){for(var st=J.length;st--;)if(Zo(J[st][0],Ie))return st;return-1}function Ki(J,Ie,st){var $t=Ie(J);return Ss(J)?$t:Dt($t,st(J))}function yo(J){return J==null?J===void 0?he:q:Ne&&Ne in Object(J)?vo(J):co(J)}function _s(J){return Yr(J)&&yo(J)==o}function Fs(J,Ie,st,$t,Kr){return J===Ie?!0:J==null||Ie==null||!Yr(J)&&!Yr(Ie)?J!==J&&Ie!==Ie:OA(J,Ie,st,$t,Fs,Kr)}function OA(J,Ie,st,$t,Kr,$n){var ti=Ss(J),ci=Ss(Ie),Br=ti?f:Mo(J),xr=ci?f:Mo(Ie);Br=Br==o?H:Br,xr=xr==o?H:xr;var ji=Br==H,Xi=xr==H,Ei=Br==xr;if(Ei&&ta(J)){if(!ta(Ie))return!1;ti=!0,ji=!1}if(Ei&&!ji)return $n||($n=new Os),ti||Jl(J)?Ai(J,Ie,st,$t,Kr,$n):la(J,Ie,Br,st,$t,Kr,$n);if(!(st&i)){var Wr=ji&&nt.call(J,"__wrapped__"),So=Xi&&nt.call(Ie,"__wrapped__");if(Wr||So){var Ri=Wr?J.value():J,ds=So?Ie.value():Ie;return $n||($n=new Os),Kr(Ri,ds,st,$t,$n)}}return Ei?($n||($n=new Os),rc(J,Ie,st,$t,Kr,$n)):!1}function ei(J){if(!zi(J)||zu(J))return!1;var Ie=ho(J)?sn:bt;return Ie.test(Oo(J))}function Mi(J){return Yr(J)&&Xl(J.length)&&!!gt[yo(J)]}function nl(J){if(!bl(J))return ct(J);var Ie=[];for(var st in Object(J))nt.call(J,st)&&st!="constructor"&&Ie.push(st);return Ie}function Ai(J,Ie,st,$t,Kr,$n){var ti=st&i,ci=J.length,Br=Ie.length;if(ci!=Br&&!(ti&&Br>ci))return!1;var xr=$n.get(J);if(xr&&$n.get(Ie))return xr==Ie;var ji=-1,Xi=!0,Ei=st&s?new so:void 0;for($n.set(J,Ie),$n.set(Ie,J);++ji<ci;){var Wr=J[ji],So=Ie[ji];if($t)var Ri=ti?$t(So,Wr,ji,Ie,J,$n):$t(Wr,So,ji,J,Ie,$n);if(Ri!==void 0){if(Ri)continue;Xi=!1;break}if(Ei){if(!_n(Ie,function(ds,ma){if(!rr(Ei,ma)&&(Wr===ds||Kr(Wr,ds,st,$t,$n)))return Ei.push(ma)})){Xi=!1;break}}else if(!(Wr===So||Kr(Wr,So,st,$t,$n))){Xi=!1;break}}return $n.delete(J),$n.delete(Ie),Xi}function la(J,Ie,st,$t,Kr,$n,ti){switch(st){case me:if(J.byteLength!=Ie.byteLength||J.byteOffset!=Ie.byteOffset)return!1;J=J.buffer,Ie=Ie.buffer;case Ee:return!(J.byteLength!=Ie.byteLength||!$n(new se(J),new se(Ie)));case x:case B:case N:return Zo(+J,+Ie);case O:return J.name==Ie.name&&J.message==Ie.message;case $:case G:return J==Ie+"";case j:var ci=pn;case te:var Br=$t&i;if(ci||(ci=dr),J.size!=Ie.size&&!Br)return!1;var xr=ti.get(J);if(xr)return xr==Ie;$t|=s,ti.set(J,Ie);var ji=Ai(ci(J),ci(Ie),$t,Kr,$n,ti);return ti.delete(J),ji;case ie:if(Xr)return Xr.call(J)==Xr.call(Ie)}return!1}function rc(J,Ie,st,$t,Kr,$n){var ti=st&i,ci=Ba(J),Br=ci.length,xr=Ba(Ie),ji=xr.length;if(Br!=ji&&!ti)return!1;for(var Xi=Br;Xi--;){var Ei=ci[Xi];if(!(ti?Ei in Ie:nt.call(Ie,Ei)))return!1}var Wr=$n.get(J);if(Wr&&$n.get(Ie))return Wr==Ie;var So=!0;$n.set(J,Ie),$n.set(Ie,J);for(var Ri=ti;++Xi<Br;){Ei=ci[Xi];var ds=J[Ei],ma=Ie[Ei];if($t)var Wa=ti?$t(ma,ds,Ei,Ie,J,$n):$t(ds,ma,Ei,J,Ie,$n);if(!(Wa===void 0?ds===ma||Kr(ds,ma,st,$t,$n):Wa)){So=!1;break}Ri||(Ri=Ei=="constructor")}if(So&&!Ri){var vu=J.constructor,qs=Ie.constructor;vu!=qs&&"constructor"in J&&"constructor"in Ie&&!(typeof vu=="function"&&vu instanceof vu&&typeof qs=="function"&&qs instanceof qs)&&(So=!1)}return $n.delete(J),$n.delete(Ie),So}function Ba(J){return Ki(J,Vi,yu)}function Rr(J,Ie){var st=J.__data__;return Qs(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function $i(J,Ie){var st=Dn(J,Ie);return ei(st)?st:void 0}function vo(J){var Ie=nt.call(J,Ne),st=J[Ne];try{J[Ne]=void 0;var $t=!0}catch{}var Kr=Ht.call(J);return $t&&(Ie?J[Ne]=st:delete J[Ne]),Kr}var yu=Ye?function(J){return J==null?[]:(J=Object(J),rn(Ye(J),function(Ie){return ve.call(J,Ie)}))}:ao,Mo=yo;(dt&&Mo(new dt(new ArrayBuffer(1)))!=me||qt&&Mo(new qt)!=j||Gt&&Mo(Gt.resolve())!=oe||jt&&Mo(new jt)!=te||xt&&Mo(new xt)!=pe)&&(Mo=function(J){var Ie=yo(J),st=Ie==H?J.constructor:void 0,$t=st?Oo(st):"";if($t)switch($t){case On:return me;case gr:return j;case Er:return oe;case on:return te;case Rn:return pe}return Ie});function Gs(J,Ie){return Ie=Ie??a,!!Ie&&(typeof J=="number"||Yt.test(J))&&J>-1&&J%1==0&&J<Ie}function Qs(J){var Ie=typeof J;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?J!=="__proto__":J===null}function zu(J){return!!St&&St in J}function bl(J){var Ie=J&&J.constructor,st=typeof Ie=="function"&&Ie.prototype||Qe;return J===st}function co(J){return Ht.call(J)}function Oo(J){if(J!=null){try{return fe.call(J)}catch{}try{return J+""}catch{}}return""}function Zo(J,Ie){return J===Ie||J!==J&&Ie!==Ie}var Oa=_s(function(){return arguments}())?_s:function(J){return Yr(J)&&nt.call(J,"callee")&&!ve.call(J,"callee")},Ss=Array.isArray;function Ia(J){return J!=null&&Xl(J.length)&&!ho(J)}var ta=rt||Di;function IA(J,Ie){return Fs(J,Ie)}function ho(J){if(!zi(J))return!1;var Ie=yo(J);return Ie==T||Ie==F||Ie==y||Ie==ne}function Xl(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=a}function zi(J){var Ie=typeof J;return J!=null&&(Ie=="object"||Ie=="function")}function Yr(J){return J!=null&&typeof J=="object"}var Jl=Ut?tn(Ut):Mi;function Vi(J){return Ia(J)?hn(J):nl(J)}function ao(){return[]}function Di(){return!1}n.exports=IA}(qv,qv.exports)),qv.exports}var HH=VH(),ZH=WU(HH);function W6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function G6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function Q6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function XH(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const f=s(a);r.push(W6(f.circle,a)),i.push(Q6(f.line,a)),t.push(G6(f.polygon,f.polygonOutline,a))}else o.forEach(f=>{const y=s(f);r.push(W6(y.circle,a,f)),i.push(Q6(y.line,a,f)),t.push(G6(y.polygon,y.polygonOutline,a,f))})}),t.concat(i).concat(r)}function JH(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var GI={polygonLayer:G6,lineLayer:Q6,circleLayer:W6,generateInspectStyle:JH,generateColoredLayers:XH};class eZ{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function tZ(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function I4(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${tZ(e)}</div></div>`}function nZ(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function rZ(n){const e=nZ(n.layer["source-layer"]||n.layer.source),t=I4("$id",n.id),r=I4("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>I4(s,n.properties[s]));return[e,t,r].concat(i).join("")}function iZ(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${rZ(e)}</div>`).join("")}function oZ(n){return`<div class="maplibregl-inspect_popup">${iZ(n)}</div>`}var Yv={exports:{}},sZ=Yv.exports,QI;function aZ(){return QI||(QI=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(sZ,function(){var t=null,r={};q();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=$(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,pe;if(G.count!==null&&G.count!==void 0){for(var Ee=G.count,me=[],Se=0;Se<G.count;Se++)i.push(!1);for(G.count=null;Ee>me.length;){var De=s(G);t!==null&&(G.seed=t),me.push(De)}return G.count=Ee,me}return ie=a(G),he=o(ie,G),pe=f(ie,he,G),y([ie,he,pe],G)};function a(G){if(i.length>0){var ie=te(G.hue),he=F(ie),pe=(ie[1]-ie[0])/i.length,Ee=parseInt((he-ie[0])/pe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(ie[0]+Ee*pe)%359,Se=(ie[0]+(Ee+1)*pe)%359;return ie=[me,Se],he=F(ie),he<0&&(he=360+he),he}else{var ie=B(G.hue);return he=F(ie),he<0&&(he=360+he),he}}function o(G,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return F([0,100]);var he=O(G),pe=he[0],Ee=he[1];switch(ie.luminosity){case"bright":pe=55;break;case"dark":pe=Ee-10;break;case"light":Ee=55;break}return F([pe,Ee])}function f(G,ie,he){var pe=x(G,ie),Ee=100;switch(he.luminosity){case"dark":Ee=pe+20;break;case"light":pe=(Ee+pe)/2;break;case"random":pe=0,Ee=100;break}return F([pe,Ee])}function y(G,ie){switch(ie.format){case"hsvArray":return G;case"hslArray":return ne(G);case"hsl":var he=ne(G);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var pe=ne(G),Se=ie.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+Se+")";case"rgbArray":return H(G);case"rgb":var Ee=H(G);return"rgb("+Ee.join(", ")+")";case"rgba":var me=H(G),Se=ie.alpha||Math.random();return"rgba("+me.join(", ")+", "+Se+")";default:return j(G)}}function x(G,ie){for(var he=T(G).lowerBounds,pe=0;pe<he.length-1;pe++){var Ee=he[pe][0],me=he[pe][1],Se=he[pe+1][0],De=he[pe+1][1];if(ie>=Ee&&ie<=Se){var be=(De-me)/(Se-Ee),at=me-be*Ee;return be*ie+at}}return 0}function B(G){if(typeof parseInt(G)=="number"){var ie=parseInt(G);if(ie<360&&ie>0)return[ie,ie]}if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=oe(G)[0];return[pe,pe]}}return[0,360]}function O(G){return T(G).saturationRange}function T(G){G>=334&&G<=360&&(G-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&G>=he.hueRange[0]&&G<=he.hueRange[1])return r[ie]}return"Color not found"}function F(G){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(G[0]+he*(G[1]+1-G[0]))}else{var pe=G[1]||1,Ee=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(pe-Ee))}}function j(G){var ie=H(G);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var pe="#"+he(ie[0])+he(ie[1])+he(ie[2]);return pe}function N(G,ie,he){var pe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Se=he[0][1];r[G]={hueRange:ie,lowerBounds:he,saturationRange:[pe,Ee],brightnessRange:[me,Se]}}function q(){N("monochrome",null,[[0,0],[100,0]]),N("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),N("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),N("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),N("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),N("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),N("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),N("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function H(G){var ie=G[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=G[1]/100,pe=G[2]/100,Ee=Math.floor(ie*6),me=ie*6-Ee,Se=pe*(1-he),De=pe*(1-me*he),be=pe*(1-(1-me)*he),at=256,Ze=256,Je=256;switch(Ee){case 0:at=pe,Ze=be,Je=Se;break;case 1:at=De,Ze=pe,Je=Se;break;case 2:at=Se,Ze=pe,Je=be;break;case 3:at=Se,Ze=De,Je=pe;break;case 4:at=be,Ze=Se,Je=pe;break;case 5:at=pe,Ze=Se,Je=De;break}var We=[Math.floor(at*255),Math.floor(Ze*255),Math.floor(Je*255)];return We}function oe(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var ie=parseInt(G.substr(0,2),16)/255,he=parseInt(G.substr(2,2),16)/255,pe=parseInt(G.substr(4,2),16)/255,Ee=Math.max(ie,he,pe),me=Ee-Math.min(ie,he,pe),Se=Ee?me/Ee:0;switch(Ee){case ie:return[60*((he-pe)/me%6)||0,Se,Ee];case he:return[60*((pe-ie)/me+2)||0,Se,Ee];case pe:return[60*((ie-he)/me+4)||0,Se,Ee]}}function ne(G){var ie=G[0],he=G[1]/100,pe=G[2]/100,Ee=(2-he)*pe;return[ie,Math.round(he*pe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function $(G){for(var ie=0,he=0;he!==G.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=G.charCodeAt(he);return ie}function te(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=oe(G)[0];return T(pe).hueRange}}}else{var ie=parseInt(G);if(ie<360&&ie>0)return T(G).hueRange}return[0,360]}return s})}(Yv,Yv.exports)),Yv.exports}var lZ=aZ(),uZ=WU(lZ);function AZ(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${uZ({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var cZ={brightColor:AZ};function dZ(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function hZ(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class g8{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!ZH(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();dZ(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const a=this.options.renderPopup(s);typeof a=="string"?this._popup.setHTML(a):this._popup.setDOMContent(a),this._popup.addTo(this._map)}}},!(this instanceof g8))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:cZ.brightColor,buildInspectStyle:GI.generateInspectStyle,renderPopup:oZ,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new eZ({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=GI.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(hZ(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var $v={exports:{}},fZ=$v.exports,qI;function pZ(){return qI||(qI=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(fZ,function(){var t=null,r={};q();var i=[],s=function(G){if(G=G||{},G.seed!==void 0&&G.seed!==null&&G.seed===parseInt(G.seed,10))t=G.seed;else if(typeof G.seed=="string")t=$(G.seed);else{if(G.seed!==void 0&&G.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,pe;if(G.count!==null&&G.count!==void 0){for(var Ee=G.count,me=[],Se=0;Se<G.count;Se++)i.push(!1);for(G.count=null;Ee>me.length;){var De=s(G);t!==null&&(G.seed=t),me.push(De)}return G.count=Ee,me}return ie=a(G),he=o(ie,G),pe=f(ie,he,G),y([ie,he,pe],G)};function a(G){if(i.length>0){var ie=te(G.hue),he=F(ie),pe=(ie[1]-ie[0])/i.length,Ee=parseInt((he-ie[0])/pe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(ie[0]+Ee*pe)%359,Se=(ie[0]+(Ee+1)*pe)%359;return ie=[me,Se],he=F(ie),he<0&&(he=360+he),he}else{var ie=B(G.hue);return he=F(ie),he<0&&(he=360+he),he}}function o(G,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return F([0,100]);var he=O(G),pe=he[0],Ee=he[1];switch(ie.luminosity){case"bright":pe=55;break;case"dark":pe=Ee-10;break;case"light":Ee=55;break}return F([pe,Ee])}function f(G,ie,he){var pe=x(G,ie),Ee=100;switch(he.luminosity){case"dark":Ee=pe+20;break;case"light":pe=(Ee+pe)/2;break;case"random":pe=0,Ee=100;break}return F([pe,Ee])}function y(G,ie){switch(ie.format){case"hsvArray":return G;case"hslArray":return ne(G);case"hsl":var he=ne(G);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var pe=ne(G),Se=ie.alpha||Math.random();return"hsla("+pe[0]+", "+pe[1]+"%, "+pe[2]+"%, "+Se+")";case"rgbArray":return H(G);case"rgb":var Ee=H(G);return"rgb("+Ee.join(", ")+")";case"rgba":var me=H(G),Se=ie.alpha||Math.random();return"rgba("+me.join(", ")+", "+Se+")";default:return j(G)}}function x(G,ie){for(var he=T(G).lowerBounds,pe=0;pe<he.length-1;pe++){var Ee=he[pe][0],me=he[pe][1],Se=he[pe+1][0],De=he[pe+1][1];if(ie>=Ee&&ie<=Se){var be=(De-me)/(Se-Ee),at=me-be*Ee;return be*ie+at}}return 0}function B(G){if(typeof parseInt(G)=="number"){var ie=parseInt(G);if(ie<360&&ie>0)return[ie,ie]}if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=oe(G)[0];return[pe,pe]}}return[0,360]}function O(G){return T(G).saturationRange}function T(G){G>=334&&G<=360&&(G-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&G>=he.hueRange[0]&&G<=he.hueRange[1])return r[ie]}return"Color not found"}function F(G){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(G[0]+he*(G[1]+1-G[0]))}else{var pe=G[1]||1,Ee=G[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(pe-Ee))}}function j(G){var ie=H(G);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var pe="#"+he(ie[0])+he(ie[1])+he(ie[2]);return pe}function N(G,ie,he){var pe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Se=he[0][1];r[G]={hueRange:ie,lowerBounds:he,saturationRange:[pe,Ee],brightnessRange:[me,Se]}}function q(){N("monochrome",null,[[0,0],[100,0]]),N("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),N("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),N("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),N("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),N("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),N("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),N("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function H(G){var ie=G[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=G[1]/100,pe=G[2]/100,Ee=Math.floor(ie*6),me=ie*6-Ee,Se=pe*(1-he),De=pe*(1-me*he),be=pe*(1-(1-me)*he),at=256,Ze=256,Je=256;switch(Ee){case 0:at=pe,Ze=be,Je=Se;break;case 1:at=De,Ze=pe,Je=Se;break;case 2:at=Se,Ze=pe,Je=be;break;case 3:at=Se,Ze=De,Je=pe;break;case 4:at=be,Ze=Se,Je=pe;break;case 5:at=pe,Ze=Se,Je=De;break}var We=[Math.floor(at*255),Math.floor(Ze*255),Math.floor(Je*255)];return We}function oe(G){G=G.replace(/^#/,""),G=G.length===3?G.replace(/(.)/g,"$1$1"):G;var ie=parseInt(G.substr(0,2),16)/255,he=parseInt(G.substr(2,2),16)/255,pe=parseInt(G.substr(4,2),16)/255,Ee=Math.max(ie,he,pe),me=Ee-Math.min(ie,he,pe),Se=Ee?me/Ee:0;switch(Ee){case ie:return[60*((he-pe)/me%6)||0,Se,Ee];case he:return[60*((pe-ie)/me+2)||0,Se,Ee];case pe:return[60*((ie-he)/me+4)||0,Se,Ee]}}function ne(G){var ie=G[0],he=G[1]/100,pe=G[2]/100,Ee=(2-he)*pe;return[ie,Math.round(he*pe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function $(G){for(var ie=0,he=0;he!==G.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=G.charCodeAt(he);return ie}function te(G){if(isNaN(G)){if(typeof G=="string"){if(r[G]){var he=r[G];if(he.hueRange)return he.hueRange}else if(G.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var pe=oe(G)[0];return T(pe).hueRange}}}else{var ie=parseInt(G);if(ie<360&&ie>0)return T(G).hueRange}return[0,360]}return s})}($v,$v.exports)),$v.exports}var mZ=pZ();const gZ=Al(mZ);function yZ(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${gZ({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const GU={brightColor:yZ};var k4={exports:{}},T4,YI;function vZ(){if(YI)return T4;YI=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return T4=n,T4}var P4,$I;function CZ(){if($I)return P4;$I=1;var n=vZ();function e(){}function t(){}return t.resetWarningCache=e,P4=function(){function r(a,o,f,y,x,B){if(B!==n){var O=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw O.name="Invariant Violation",O}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},P4}var VI;function Op(){return VI||(VI=1,k4.exports=CZ()()),k4.exports}var _Z=Op();const fi=Al(_Z);var HI=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function bZ(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var q0=function(e,t){var r=e.children,i=e.color,s=e.size,a=e.style,o=e.width,f=e.height,y=bZ(e,["children","color","size","style","width","height"]),x=t.reactIconBase,B=x===void 0?{}:x,O=s||B.size||"1em";return nr.createElement("svg",HI({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:f||O,width:o||O},B,y,{style:HI({verticalAlign:"middle",color:i||B.color},B.style||{},a)}))};q0.propTypes={color:fi.string,size:fi.oneOfType([fi.string,fi.number]),width:fi.oneOfType([fi.string,fi.number]),height:fi.oneOfType([fi.string,fi.number]),style:fi.object};q0.contextTypes={reactIconBase:fi.shape(q0.propTypes)};function E2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return E2=function(){return a},a}E2();class xZ extends nr.Component{render(){return E2().f[0]++,E2().s[0]++,ue.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function B2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return B2=function(){return a},a}B2();class mb extends nr.Component{render(){return B2().f[0]++,B2().s[0]++,ue.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function O2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return O2=function(){return a},a}O2();class wZ extends nr.Component{render(){return O2().f[0]++,O2().s[0]++,ue.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:ue.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function I2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return I2=function(){return a},a}I2();class ZI extends nr.Component{render(){return I2().f[0]++,I2().s[0]++,ue.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function k2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return k2=function(){return a},a}k2();class MZ extends nr.Component{render(){return k2().f[0]++,k2().s[0]++,ue.jsx(q0,{viewBox:"0 0 20 20",...this.props,children:ue.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function iv(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function SZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function EZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function BZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function OZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function IZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function kZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function TZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function PZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function KZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function QU(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function DZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function q6(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function RZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function FZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function LZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function XI(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function UZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function zZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function jZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function NZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function WZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function GZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function QZ(n){return Hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function T2(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return T2=function(){return a},a}T2();class qZ extends nr.Component{render(){return T2().f[0]++,T2().s[0]++,ue.jsx(QZ,{...this.props})}}function Kl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Kl=function(){return a},a}Kl();class qU extends nr.Component{render(){Kl().f[0]++;const e=(Kl().s[0]++,{style:this.props.style});switch(Kl().s[1]++,this.props.type){case"fill-extrusion":return Kl().b[0][0]++,Kl().s[2]++,ue.jsx(ZI,{...e});case"raster":return Kl().b[0][1]++,Kl().s[3]++,ue.jsx(mb,{...e});case"hillshade":return Kl().b[0][2]++,Kl().s[4]++,ue.jsx(mb,{...e});case"heatmap":return Kl().b[0][3]++,Kl().s[5]++,ue.jsx(mb,{...e});case"fill":return Kl().b[0][4]++,Kl().s[6]++,ue.jsx(mb,{...e});case"background":return Kl().b[0][5]++,Kl().s[7]++,ue.jsx(ZI,{...e});case"line":return Kl().b[0][6]++,Kl().s[8]++,ue.jsx(xZ,{...e});case"symbol":return Kl().b[0][7]++,Kl().s[9]++,ue.jsx(wZ,{...e});case"circle":return Kl().b[0][8]++,Kl().s[10]++,ue.jsx(MZ,{...e});default:return Kl().b[0][9]++,Kl().s[11]++,ue.jsx(qZ,{...e})}}}function Jr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Jr=function(){return a},a}Jr();function YZ(n){Jr().f[0]++;const e=(Jr().s[0]++,{}),t=(Jr().s[1]++,{});return Jr().s[2]++,n.forEach(r=>{Jr().f[1]++;const i=(Jr().s[3]++,r.layer["source-layer"]);if(Jr().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){Jr().b[0][0]++,Jr().s[5]++,t[r.layer.id]++;const s=(Jr().s[6]++,e[i].find(a=>(Jr().f[2]++,Jr().s[7]++,a.layer.id===r.layer.id)));Jr().s[8]++,s.counter=t[r.layer.id]}else Jr().b[0][1]++,Jr().s[9]++,e[i]=(Jr().b[1][0]++,e[i]||(Jr().b[1][1]++,[])),Jr().s[10]++,e[i].push(r),Jr().s[11]++,t[r.layer.id]=1}),Jr().s[12]++,e}class YU extends nr.Component{_getFeatureColor(e,t){if(Jr().f[3]++,Jr().s[13]++,e.layer.paint)Jr().b[2][1]++;else{Jr().b[2][0]++,Jr().s[14]++;return}Jr().s[15]++;try{const r=(Jr().s[16]++,e.layer.paint);return Jr().s[17]++,Jr().b[4][0]++,"text-color"in r&&(Jr().b[4][1]++,r["text-color"])?(Jr().b[3][0]++,Jr().s[18]++,String(r["text-color"])):(Jr().b[3][1]++,Jr().s[19]++,Jr().b[6][0]++,"fill-color"in r&&(Jr().b[6][1]++,r["fill-color"])?(Jr().b[5][0]++,Jr().s[20]++,String(r["fill-color"])):(Jr().b[5][1]++,Jr().s[21]++,Jr().b[8][0]++,"line-color"in r&&(Jr().b[8][1]++,r["line-color"])?(Jr().b[7][0]++,Jr().s[22]++,String(r["line-color"])):(Jr().b[7][1]++,Jr().s[23]++,Jr().b[10][0]++,"fill-extrusion-color"in r&&(Jr().b[10][1]++,r["fill-extrusion-color"])?(Jr().b[9][0]++,Jr().s[24]++,String(r["fill-extrusion-color"])):(Jr().b[9][1]++,Jr().s[25]++,"black"))))}catch(r){return Jr().s[26]++,console.warn("Unable to get feature color, error:",r),Jr().s[27]++,"black"}}render(){Jr().f[4]++;const e=(Jr().s[28]++,YZ(this.props.features)),t=(Jr().s[29]++,Object.keys(e).map(r=>{Jr().f[5]++;const i=(Jr().s[30]++,e[r].map((s,a)=>{Jr().f[6]++;const o=(Jr().s[31]++,this._getFeatureColor(s,this.props.zoom));return Jr().s[32]++,ue.jsxs("div",{className:"maputnik-popup-layer",children:[ue.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),ue.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Jr().f[7]++,Jr().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(Jr().b[11][0]++,s.layer.type&&(Jr().b[11][1]++,ue.jsx(qU,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(Jr().b[12][0]++,s.counter&&(Jr().b[12][1]++,ue.jsxs("span",{children:[" × ",s.counter]})))]})]},a)}));return Jr().s[34]++,ue.jsxs("div",{children:[ue.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return Jr().s[35]++,ue.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Hi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Hi=function(){return a},a}Hi();function JI(n){return Hi().f[0]++,Hi().s[0]++,Hi().b[1][0]++,typeof n>"u"||(Hi().b[1][1]++,n===null)?(Hi().b[0][0]++,Hi().s[1]++,n):(Hi().b[0][1]++,Hi().s[2]++,n instanceof Date?(Hi().b[2][0]++,Hi().s[3]++,n.toLocaleString()):(Hi().b[2][1]++,Hi().s[4]++,Hi().b[4][0]++,typeof n=="object"||(Hi().b[4][1]++,typeof n=="number")||(Hi().b[4][2]++,typeof n=="string")?(Hi().b[3][0]++,Hi().s[5]++,n.toString()):(Hi().b[3][1]++,Hi().s[6]++,n)))}function K4(n,e){return Hi().f[1]++,Hi().s[7]++,ue.jsxs("tr",{children:[ue.jsx("td",{className:"maputnik-popup-table-cell",children:n}),ue.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function $Z(n,e){return Hi().f[2]++,Hi().s[8]++,ue.jsxs(nr.Fragment,{children:[ue.jsx("tr",{children:ue.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Hi().b[5][0]++,n.inspectModeCounter&&(Hi().b[5][1]++,ue.jsxs("span",{children:[" × ",n.inspectModeCounter]})))]})}),K4("$type",n.geometry.type),K4("$id",JI(n.id)),Object.keys(n.properties).map(t=>{Hi().f[3]++;const r=(Hi().s[9]++,n.properties[t]);return Hi().s[10]++,K4(t,JI(r))})]},e)}function VZ(n){Hi().f[4]++;const e=(Hi().s[11]++,[]);return Hi().s[12]++,n.forEach(t=>{Hi().f[5]++;const r=(Hi().s[13]++,e.findIndex(i=>(Hi().f[6]++,Hi().s[14]++,Hi().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&(Hi().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));Hi().s[15]++,r===-1?(Hi().b[7][0]++,Hi().s[16]++,e.push(t)):(Hi().b[7][1]++,Hi().s[17]++,"inspectModeCounter"in e[r]?(Hi().b[8][0]++,Hi().s[18]++,e[r].inspectModeCounter++):(Hi().b[8][1]++,Hi().s[19]++,e[r].inspectModeCounter=2))}),Hi().s[20]++,e}class HZ extends nr.Component{render(){Hi().f[7]++;const e=(Hi().s[21]++,VZ(this.props.features));return Hi().s[22]++,ue.jsx("div",{className:"maputnik-feature-property-popup",children:ue.jsx("table",{className:"maputnik-popup-table",children:ue.jsx("tbody",{children:e.map($Z)})})})}}const mC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},$U=Object.create(null);for(const n in mC)Object.hasOwn(mC,n)&&($U[mC[n]]=n);const ec={to:{},get:{}};ec.get=function(n){const e=n.slice(0,3).toLowerCase();let t,r;switch(e){case"hsl":{t=ec.get.hsl(n),r="hsl";break}case"hwb":{t=ec.get.hwb(n),r="hwb";break}default:{t=ec.get.rgb(n),r="rgb";break}}return t?{model:r,value:t}:null};ec.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/;let a=[0,0,0,1],o,f,y;if(o=n.match(t)){for(y=o[2],o=o[1],f=0;f<3;f++){const x=f*2;a[f]=Number.parseInt(o.slice(x,x+2),16)}y&&(a[3]=Number.parseInt(y,16)/255)}else if(o=n.match(e)){for(o=o[1],y=o[3],f=0;f<3;f++)a[f]=Number.parseInt(o[f]+o[f],16);y&&(a[3]=Number.parseInt(y+y,16)/255)}else if(o=n.match(r)){for(f=0;f<3;f++)a[f]=Number.parseInt(o[f+1],10);o[4]&&(a[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(i)){for(f=0;f<3;f++)a[f]=Math.round(Number.parseFloat(o[f+1])*2.55);o[4]&&(a[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(s))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(mC,o[1])?(a=mC[o[1]],a[3]=1,a):null:null;for(f=0;f<3;f++)a[f]=j0(a[f],0,255);return a[3]=j0(a[3],0,1),a};ec.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=j0(Number.parseFloat(t[2]),0,100),a=j0(Number.parseFloat(t[3]),0,100),o=j0(Number.isNaN(r)?1:r,0,1);return[i,s,a,o]}return null};ec.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=j0(Number.parseFloat(t[2]),0,100),a=j0(Number.parseFloat(t[3]),0,100),o=j0(Number.isNaN(r)?1:r,0,1);return[i,s,a,o]}return null};ec.to.hex=function(...n){return"#"+gb(n[0])+gb(n[1])+gb(n[2])+(n[3]<1?gb(Math.round(n[3]*255)):"")};ec.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};ec.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),r=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+r+"%)":"rgba("+e+"%, "+t+"%, "+r+"%, "+n[3]+")"};ec.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};ec.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};ec.to.keyword=function(...n){return $U[n.slice(0,3)]};function j0(n,e,t){return Math.min(Math.max(e,n),t)}function gb(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const KC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},VU={};for(const n of Object.keys(KC))VU[KC[n]]=n;const li={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Wm=(6/29)**3;for(const n of Object.keys(li)){if(!("channels"in li[n]))throw new Error("missing channels property: "+n);if(!("labels"in li[n]))throw new Error("missing channel labels property: "+n);if(li[n].labels.length!==li[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=li[n];delete li[n].channels,delete li[n].labels,Object.defineProperty(li[n],"channels",{value:e}),Object.defineProperty(li[n],"labels",{value:t})}li.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=s-i;let o,f;switch(s){case i:{o=0;break}case e:{o=(t-r)/a;break}case t:{o=2+(r-e)/a;break}case r:{o=4+(e-t)/a;break}}o=Math.min(o*60,360),o<0&&(o+=360);const y=(i+s)/2;return s===i?f=0:y<=.5?f=a/(s+i):f=a/(2-s-i),[o,f*100,y*100]};li.rgb.hsv=function(n){let e,t,r,i,s;const a=n[0]/255,o=n[1]/255,f=n[2]/255,y=Math.max(a,o,f),x=y-Math.min(a,o,f),B=function(O){return(y-O)/6/x+1/2};if(x===0)i=0,s=0;else{switch(s=x/y,e=B(a),t=B(o),r=B(f),y){case a:{i=r-t;break}case o:{i=1/3+e-r;break}case f:{i=2/3+t-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,y*100]};li.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=li.rgb.hsl(n)[0],s=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,s*100,r*100]};li.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),s=(1-e-i)/(1-i)||0,a=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0;return[s*100,a*100,o*100,i*100]};function ZZ(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}li.rgb.keyword=function(n){const e=VU[n];if(e)return e;let t=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(KC)){const s=KC[i],a=ZZ(n,s);a<t&&(t=a,r=i)}return r};li.keyword.rgb=function(n){return KC[n]};li.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124564+t*.3575761+r*.1804375,s=e*.2126729+t*.7151522+r*.072175,a=e*.0193339+t*.119192+r*.9503041;return[i*100,s*100,a*100]};li.rgb.lab=function(n){const e=li.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>Wm?t**(1/3):7.787*t+16/116,r=r>Wm?r**(1/3):7.787*r+16/116,i=i>Wm?i**(1/3):7.787*i+16/116;const s=116*r-16,a=500*(t-r),o=200*(r-i);return[s,a,o]};li.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,s;if(t===0)return s=r*255,[s,s,s];const a=r<.5?r*(1+t):r+t-r*t,o=2*r-a,f=[0,0,0];for(let y=0;y<3;y++)i=e+1/3*-(y-1),i<0&&i++,i>1&&i--,6*i<1?s=o+(a-o)*6*i:2*i<1?s=a:3*i<2?s=o+(a-o)*(2/3-i)*6:s=o,f[y]=s*255;return f};li.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const s=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=s<=1?s:2-s;const a=(r+t)/2,o=r===0?2*i/(s+i):2*t/(r+t);return[e,o*100,a*100]};li.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),a=255*r*(1-t),o=255*r*(1-t*s),f=255*r*(1-t*(1-s));switch(r*=255,i){case 0:return[r,f,a];case 1:return[o,r,a];case 2:return[a,r,f];case 3:return[a,o,r];case 4:return[f,a,r];case 5:return[r,a,o]}};li.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let s,a;a=(2-t)*r;const o=(2-t)*i;return s=t*i,s/=o<=1?o:2-o,s=s||0,a/=2,[e,s*100,a*100]};li.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let s;i>1&&(t/=i,r/=i);const a=Math.floor(6*e),o=1-r;s=6*e-a,a&1&&(s=1-s);const f=t+s*(o-t);let y,x,B;switch(a){default:case 6:case 0:{y=o,x=f,B=t;break}case 1:{y=f,x=o,B=t;break}case 2:{y=t,x=o,B=f;break}case 3:{y=t,x=f,B=o;break}case 4:{y=f,x=t,B=o;break}case 5:{y=o,x=t,B=f;break}}return[y*255,x*255,B*255]};li.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,s=1-Math.min(1,e*(1-i)+i),a=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i);return[s*255,a*255,o*255]};li.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,s,a;return i=e*3.2404542+t*-1.5371385+r*-.4985314,s=e*-.969266+t*1.8760108+r*.041556,a=e*.0556434+t*-.2040259+r*1.0572252,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),[i*255,s*255,a*255]};li.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>Wm?e**(1/3):7.787*e+16/116,t=t>Wm?t**(1/3):7.787*t+16/116,r=r>Wm?r**(1/3):7.787*r+16/116;const i=116*t-16,s=500*(e-t),a=200*(t-r);return[i,s,a]};li.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,s,a;s=(e+16)/116,i=t/500+s,a=s-r/200;const o=s**3,f=i**3,y=a**3;return s=o>Wm?o:(s-16/116)/7.787,i=f>Wm?f:(i-16/116)/7.787,a=y>Wm?y:(a-16/116)/7.787,i*=95.047,s*=100,a*=108.883,[i,s,a]};li.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const a=Math.sqrt(t*t+r*r);return[e,a,i]};li.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,s=t*Math.cos(i),a=t*Math.sin(i);return[e,s,a]};li.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let s=e===null?li.rgb.hsv(n)[2]:e;if(s=Math.round(s/50),s===0)return 30;let a=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(a+=60),a};li.hsv.ansi16=function(n){return li.rgb.ansi16(li.hsv.rgb(n),n[2])};li.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e>>4===t>>4&&t>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};li.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[r,i,s]};li.ansi256.rgb=function(n){if(n=n[0],n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};li.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};li.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const r=Number.parseInt(t,16),i=r>>16&255,s=r>>8&255,a=r&255;return[i,s,a]};li.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),s=Math.min(Math.min(e,t),r),a=i-s;let o;const f=a<1?s/(1-a):0;return a<=0?o=0:i===e?o=(t-r)/a%6:i===t?o=2+(r-e)/a:o=4+(e-t)/a,o/=6,o%=1,[o*360,a*100,f*100]};li.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};li.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};li.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,a=s%1,o=1-a;let f=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=a,i[2]=0;break}case 1:{i[0]=o,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=a;break}case 3:{i[0]=0,i[1]=o,i[2]=1;break}case 4:{i[0]=a,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=o}return f=(1-t)*r,[(t*i[0]+f)*255,(t*i[1]+f)*255,(t*i[2]+f)*255]};li.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};li.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};li.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};li.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[n[0],i*100,s*100]};li.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};li.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};li.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};li.gray.hsl=function(n){return[0,0,n[0]]};li.gray.hsv=li.gray.hsl;li.gray.hwb=function(n){return[0,100,n[0]]};li.gray.cmyk=function(n){return[0,0,0,n[0]]};li.gray.lab=function(n){return[n[0],0,0]};li.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};li.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function XZ(){const n={},e=Object.keys(li);for(let{length:t}=e,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function JZ(n){const e=XZ(),t=[n];for(e[n].distance=0;t.length>0;){const r=t.pop(),i=Object.keys(li[r]);for(let{length:s}=i,a=0;a<s;a++){const o=i[a],f=e[o];f.distance===-1&&(f.distance=e[r].distance+1,f.parent=r,t.unshift(o))}}return e}function eX(n,e){return function(t){return e(n(t))}}function tX(n,e){const t=[e[n].parent,n];let r=li[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=eX(li[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}function nX(n){const e=JZ(n),t={},r=Object.keys(e);for(let{length:i}=r,s=0;s<i;s++){const a=r[s];e[a].parent!==null&&(t[a]=tX(a,e))}return t}const Sc={},rX=Object.keys(li);function iX(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function oX(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let{length:s}=i,a=0;a<s;a++)i[a]=Math.round(i[a]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of rX){Sc[n]={},Object.defineProperty(Sc[n],"channels",{value:li[n].channels}),Object.defineProperty(Sc[n],"labels",{value:li[n].labels});const e=nX(n),t=Object.keys(e);for(const r of t){const i=e[r];Sc[n][r]=oX(i),Sc[n][r].raw=iX(i)}}const HU=["keyword","gray","hex"],Y6={};for(const n of Object.keys(Sc))Y6[[...Sc[n].labels].sort().join("")]=n;const gC={};function SA(n,e){if(!(this instanceof SA))return new SA(n,e);if(e&&e in HU&&(e=null),e&&!(e in Sc))throw new Error("Unknown model: "+e);let t,r;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof SA)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const i=ec.get(n);if(i===null)throw new Error("Unable to parse color from string: "+n);this.model=i.model,r=Sc[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(n.length>0){this.model=e||"rgb",r=Sc[this.model].channels;const i=Array.prototype.slice.call(n,0,r);this.color=$6(i,r),this.valpha=typeof n[r]=="number"?n[r]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(n);"alpha"in n&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const s=i.sort().join("");if(!(s in Y6))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=Y6[s];const{labels:a}=Sc[this.model],o=[];for(t=0;t<a.length;t++)o.push(n[a[t]]);this.color=$6(o)}if(gC[this.model])for(r=Sc[this.model].channels,t=0;t<r;t++){const i=gC[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}SA.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in ec.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return ec.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return ec.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Sc[this.model],{labels:t}=Sc[this.model];for(let r=0;r<e;r++)n[t[r]]=this.color[r];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new SA([...this.color.map(aX(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new SA([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:Ku("rgb",0,HA(255)),green:Ku("rgb",1,HA(255)),blue:Ku("rgb",2,HA(255)),hue:Ku(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:Ku("hsl",1,HA(100)),lightness:Ku("hsl",2,HA(100)),saturationv:Ku("hsv",1,HA(100)),value:Ku("hsv",2,HA(100)),chroma:Ku("hcg",1,HA(100)),gray:Ku("hcg",2,HA(100)),white:Ku("hwb",1,HA(100)),wblack:Ku("hwb",2,HA(100)),cyan:Ku("cmyk",0,HA(100)),magenta:Ku("cmyk",1,HA(100)),yellow:Ku("cmyk",2,HA(100)),black:Ku("cmyk",3,HA(100)),x:Ku("xyz",0,HA(95.047)),y:Ku("xyz",1,HA(100)),z:Ku("xyz",2,HA(108.833)),l:Ku("lab",0,HA(100)),a:Ku("lab",1),b:Ku("lab",2),keyword(n){return n!==void 0?new SA(n):Sc[this.model].keyword(this.color)},hex(n){return n!==void 0?new SA(n):ec.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new SA(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),ec.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,r]of n.entries()){const i=r/255;e[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return SA.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,a=t.alpha()-r.alpha(),o=((s*a===-1?s:(s+a)/(1+s*a))+1)/2,f=1-o;return SA.rgb(o*t.red()+f*r.red(),o*t.green()+f*r.green(),o*t.blue()+f*r.blue(),t.alpha()*i+r.alpha()*(1-i))}};for(const n of Object.keys(Sc)){if(HU.includes(n))continue;const{channels:e}=Sc[n];SA.prototype[n]=function(...t){return this.model===n?new SA(this):t.length>0?new SA(t,n):new SA([...lX(Sc[this.model][n].raw(this.color)),this.valpha],n)},SA[n]=function(...t){let r=t[0];return typeof r=="number"&&(r=$6(t,e)),new SA(r,n)}}function sX(n,e){return Number(n.toFixed(e))}function aX(n){return function(e){return sX(e,n)}}function Ku(n,e,t){n=Array.isArray(n)?n:[n];for(const r of n)(gC[r]||(gC[r]=[]))[e]=t;return n=n[0],function(r){let i;return r!==void 0?(t&&(r=t(r)),i=this[n](),i.color[e]=r,i):(i=this[n]().color[e],t&&(i=t(i)),i)}}function HA(n){return function(e){return Math.max(0,Math.min(n,e))}}function lX(n){return Array.isArray(n)?n:[n]}function $6(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function Hs(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Hs=function(){return a},a}Hs();class uX{constructor(){Pn(this,"_map",(Hs().s[0]++,void 0));Pn(this,"_container",(Hs().s[1]++,void 0));Pn(this,"_textEl",(Hs().s[2]++,null));Hs().f[0]++}onAdd(e){return Hs().f[1]++,Hs().s[3]++,this._map=e,Hs().s[4]++,this._container=document.createElement("div"),Hs().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",Hs().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),Hs().s[7]++,this.setLabel("Zoom:"),Hs().s[8]++,this.addEventListeners(),Hs().s[9]++,this._container}updateZoomLevel(){Hs().f[2]++,Hs().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){Hs().f[3]++,Hs().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,Hs().s[12]++,this._textEl=this._container.querySelector("span"),Hs().s[13]++,this.updateZoomLevel()}addEventListeners(){Hs().f[4]++,Hs().s[14]++,this._map.on("render",()=>(Hs().f[5]++,Hs().s[15]++,this.updateZoomLevel())),Hs().s[16]++,this._map.on("zoomIn",()=>(Hs().f[6]++,Hs().s[17]++,this.updateZoomLevel())),Hs().s[18]++,this._map.on("zoomOut",()=>(Hs().f[7]++,Hs().s[19]++,this.updateZoomLevel()))}onRemove(){Hs().f[8]++,Hs().s[20]++,this._container.parentNode.removeChild(this._container),Hs().s[21]++,this._map=void 0}}function V6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function H6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function Z6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function AX(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const f=s(a);r.push(V6(f.circle,a)),i.push(Z6(f.line,a)),t.push(H6(f.polygon,f.polygonOutline,a))}else o.forEach(f=>{const y=s(f);r.push(V6(y.circle,a,f)),i.push(Z6(y.line,a,f)),t.push(H6(y.polygon,y.polygonOutline,a,f))})}),t.concat(i).concat(r)}function cX(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const D4={polygonLayer:H6,lineLayer:Z6,circleLayer:V6,generateInspectStyle:cX,generateColoredLayers:AX};function xo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return xo=function(){return a},a}xo();function R4(n,e){return xo().f[0]++,xo().s[0]++,n.type==="circle"?(xo().b[0][0]++,xo().s[1]++,n.paint["circle-radius"]=3):(xo().b[0][1]++,xo().s[2]++,n.type==="line"?(xo().b[1][0]++,xo().s[3]++,n.paint["line-width"]=2):xo().b[1][1]++),xo().s[4]++,"filter"in e?(xo().b[2][0]++,xo().s[5]++,n.filter=e.filter):(xo().b[2][1]++,xo().s[6]++,delete n.filter),xo().s[7]++,n.id=n.id+"_highlight",xo().s[8]++,n}function dX(n){if(xo().f[1]++,xo().s[9]++,xo().b[4][0]++,!n||(xo().b[4][1]++,n.type==="background")||(xo().b[4][2]++,n.type==="raster"))return xo().b[3][0]++,xo().s[10]++,null;xo().b[3][1]++;const e=(xo().s[11]++,xo().b[5][0]++,n["source-layer"]||(xo().b[5][1]++,"")),t=(xo().s[12]++,GU.brightColor(e,1));return xo().s[13]++,xo().b[7][0]++,n.type==="fill"||(xo().b[7][1]++,n.type==="fill-extrusion")?(xo().b[6][0]++,xo().s[14]++,R4(D4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(xo().b[6][1]++,xo().s[15]++,xo().b[9][0]++,n.type==="symbol"||(xo().b[9][1]++,n.type==="circle")?(xo().b[8][0]++,xo().s[16]++,R4(D4.circleLayer(t,n.source,n["source-layer"]),n)):(xo().b[8][1]++,xo().s[17]++,n.type==="line"?(xo().b[10][0]++,xo().s[18]++,R4(D4.lineLayer(t,n.source,n["source-layer"]),n)):(xo().b[10][1]++,xo().s[19]++,null)))}function y8(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return y8=function(){return a},a}y8();y8().s[0]++;ay.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function F4(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(y){try{f(r.next(y))}catch(x){s(x)}}function o(y){try{f(r.throw(y))}catch(x){s(x)}}function f(y){y.done?i(y.value):new t(function(x){x(y.value)}).then(a,o)}f((r=r.apply(n,e||[])).next())})}var yb=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function Wx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L4,e9;function ZU(){if(e9)return L4;e9=1,L4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return L4}var U4={exports:{}},t9;function hX(){return t9||(t9=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var a=0,o=[],f=i.length,y=0,x=0,B=s.pre||"",O=s.post||"",T=s.caseSensitive&&i||i.toLowerCase(),F;r=s.caseSensitive&&r||r.toLowerCase();for(var j=0;j<f;j++)F=i[j],T[j]===r[a]?(F=B+F+O,a+=1,x+=1+x):x=0,y+=x,o[o.length]=F;return a===r.length?(y=T===r?1/0:y,{rendered:o.join(""),score:y}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(a,o,f,y){var x=o;s.extract&&(x=s.extract(o));var B=t.match(r,x,s);return B!=null&&(a[a.length]={string:B.rendered,score:B.score,index:f,original:o}),a},[]).sort(function(a,o){var f=o.score-a.score;return f||a.index-o.index}))}})()}(U4)),U4.exports}var z4,n9;function fX(){if(n9)return z4;n9=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},z4=n,z4}var j4,r9;function pX(){if(r9)return j4;r9=1;var n=ZU(),e=hX(),t=fX(),r=function(i,s,a){return a=a||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},a),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var a=0;a<s.length&&(this.list.add(s[a]),a!==this.options.limit-1);a++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},a;this.options.filter?(a=e.filter(this.query,this.data,s),a=a.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):a=this.data.map((function(o){var f=this.render(o);return{original:o,string:f}}).bind(this)),i(a)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var a=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(a),f=o.lastIndexOf(this.query);f>-1;){var y=f+this.query.length;a=a.slice(0,f)+"<strong>"+a.slice(f,y)+"</strong>"+a.slice(y),f=o.slice(0,f).lastIndexOf(this.query)}return a},r.prototype.renderError=function(i){this.list.drawError(i)},j4=r,j4}var N4,i9;function mX(){if(i9)return N4;i9=1;var n=pX();return N4=n,typeof window<"u"&&(window.Suggestions=n),N4}var gX=mX(),yX=Wx(gX),i2={exports:{}},vX=i2.exports,o9;function CX(){return o9||(o9=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(vX,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(f){return f.match(t)||[]}function i(f){return r(f).filter(function(y,x){return y&&x})}function s(f){return f=r(f),{language:f[1]||e,extlang:f[2]||e,script:f[3]||e,region:f[4]||e}}function a(f,y,x){Object.defineProperty(f,y,{value:x,enumerable:!0})}function o(f,y,x){function B(O){return r(O)[f]||e}a(B,"pattern",y),a(s,x,B)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),a(s,"split",i),s})}(i2)),i2.exports}var _X=CX(),bX=Wx(_X),W4,s9;function xX(){if(s9)return W4;s9=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,f=typeof yb=="object"&&yb&&yb.Object===Object&&yb,y=typeof self=="object"&&self&&self.Object===Object&&self,x=f||y||Function("return this")(),B=Object.prototype,O=B.toString,T=Math.max,F=Math.min,j=function(){return x.Date.now()};function N($,te,G){var ie,he,pe,Ee,me,Se,De=0,be=!1,at=!1,Ze=!0;if(typeof $!="function")throw new TypeError(n);te=ne(te)||0,q(G)&&(be=!!G.leading,at="maxWait"in G,pe=at?T(ne(G.maxWait)||0,te):pe,Ze="trailing"in G?!!G.trailing:Ze);function Je(Kt){var Ue=ie,Pe=he;return ie=he=void 0,De=Kt,Ee=$.apply(Pe,Ue),Ee}function We(Kt){return De=Kt,me=setTimeout(He,te),be?Je(Kt):Ee}function Me(Kt){var Ue=Kt-Se,Pe=Kt-De,Be=te-Ue;return at?F(Be,pe-Pe):Be}function Fe(Kt){var Ue=Kt-Se,Pe=Kt-De;return Se===void 0||Ue>=te||Ue<0||at&&Pe>=pe}function He(){var Kt=j();if(Fe(Kt))return bt(Kt);me=setTimeout(He,Me(Kt))}function bt(Kt){return me=void 0,Ze&&ie?Je(Kt):(ie=he=void 0,Ee)}function Yt(){me!==void 0&&clearTimeout(me),De=0,ie=Se=he=me=void 0}function gt(){return me===void 0?Ee:bt(j())}function Lt(){var Kt=j(),Ue=Fe(Kt);if(ie=arguments,he=this,Se=Kt,Ue){if(me===void 0)return We(Se);if(at)return me=setTimeout(He,te),Je(Se)}return me===void 0&&(me=setTimeout(He,te)),Ee}return Lt.cancel=Yt,Lt.flush=gt,Lt}function q($){var te=typeof $;return!!$&&(te=="object"||te=="function")}function H($){return!!$&&typeof $=="object"}function oe($){return typeof $=="symbol"||H($)&&O.call($)==t}function ne($){if(typeof $=="number")return $;if(oe($))return e;if(q($)){var te=typeof $.valueOf=="function"?$.valueOf():$;$=q(te)?te+"":te}if(typeof $!="string")return $===0?$:+$;$=$.replace(r,"");var G=s.test($);return G||a.test($)?o($.slice(2),G?2:8):i.test($)?e:+$}return W4=N,W4}var wX=xX(),MX=Wx(wX),SX=ZU(),mp=Wx(SX),vb={exports:{}},a9;function EX(){if(a9)return vb.exports;a9=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function($,te,G){return Function.prototype.apply.call($,te,G)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:t=function($){return Object.getOwnPropertyNames($)};function r(ne){console&&console.warn&&console.warn(ne)}var i=Number.isNaN||function($){return $!==$};function s(){s.init.call(this)}vb.exports=s,vb.exports.once=q,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(ne){if(typeof ne!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ne)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(ne){if(typeof ne!="number"||ne<0||i(ne))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ne+".");a=ne}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function($){if(typeof $!="number"||$<0||i($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this};function f(ne){return ne._maxListeners===void 0?s.defaultMaxListeners:ne._maxListeners}s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function($){for(var te=[],G=1;G<arguments.length;G++)te.push(arguments[G]);var ie=$==="error",he=this._events;if(he!==void 0)ie=ie&&he.error===void 0;else if(!ie)return!1;if(ie){var pe;if(te.length>0&&(pe=te[0]),pe instanceof Error)throw pe;var Ee=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Ee.context=pe,Ee}var me=he[$];if(me===void 0)return!1;if(typeof me=="function")e(me,this,te);else for(var Se=me.length,De=F(me,Se),G=0;G<Se;++G)e(De[G],this,te);return!0};function y(ne,$,te,G){var ie,he,pe;if(o(te),he=ne._events,he===void 0?(he=ne._events=Object.create(null),ne._eventsCount=0):(he.newListener!==void 0&&(ne.emit("newListener",$,te.listener?te.listener:te),he=ne._events),pe=he[$]),pe===void 0)pe=he[$]=te,++ne._eventsCount;else if(typeof pe=="function"?pe=he[$]=G?[te,pe]:[pe,te]:G?pe.unshift(te):pe.push(te),ie=f(ne),ie>0&&pe.length>ie&&!pe.warned){pe.warned=!0;var Ee=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ee.name="MaxListenersExceededWarning",Ee.emitter=ne,Ee.type=$,Ee.count=pe.length,r(Ee)}return ne}s.prototype.addListener=function($,te){return y(this,$,te,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function($,te){return y(this,$,te,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(ne,$,te){var G={fired:!1,wrapFn:void 0,target:ne,type:$,listener:te},ie=x.bind(G);return ie.listener=te,G.wrapFn=ie,ie}s.prototype.once=function($,te){return o(te),this.on($,B(this,$,te)),this},s.prototype.prependOnceListener=function($,te){return o(te),this.prependListener($,B(this,$,te)),this},s.prototype.removeListener=function($,te){var G,ie,he,pe,Ee;if(o(te),ie=this._events,ie===void 0)return this;if(G=ie[$],G===void 0)return this;if(G===te||G.listener===te)--this._eventsCount===0?this._events=Object.create(null):(delete ie[$],ie.removeListener&&this.emit("removeListener",$,G.listener||te));else if(typeof G!="function"){for(he=-1,pe=G.length-1;pe>=0;pe--)if(G[pe]===te||G[pe].listener===te){Ee=G[pe].listener,he=pe;break}if(he<0)return this;he===0?G.shift():j(G,he),G.length===1&&(ie[$]=G[0]),ie.removeListener!==void 0&&this.emit("removeListener",$,Ee||te)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function($){var te,G,ie;if(G=this._events,G===void 0)return this;if(G.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):G[$]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete G[$]),this;if(arguments.length===0){var he=Object.keys(G),pe;for(ie=0;ie<he.length;++ie)pe=he[ie],pe!=="removeListener"&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(te=G[$],typeof te=="function")this.removeListener($,te);else if(te!==void 0)for(ie=te.length-1;ie>=0;ie--)this.removeListener($,te[ie]);return this};function O(ne,$,te){var G=ne._events;if(G===void 0)return[];var ie=G[$];return ie===void 0?[]:typeof ie=="function"?te?[ie.listener||ie]:[ie]:te?N(ie):F(ie,ie.length)}s.prototype.listeners=function($){return O(this,$,!0)},s.prototype.rawListeners=function($){return O(this,$,!1)},s.listenerCount=function(ne,$){return typeof ne.listenerCount=="function"?ne.listenerCount($):T.call(ne,$)},s.prototype.listenerCount=T;function T(ne){var $=this._events;if($!==void 0){var te=$[ne];if(typeof te=="function")return 1;if(te!==void 0)return te.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function F(ne,$){for(var te=new Array($),G=0;G<$;++G)te[G]=ne[G];return te}function j(ne,$){for(;$+1<ne.length;$++)ne[$]=ne[$+1];ne.pop()}function N(ne){for(var $=new Array(ne.length),te=0;te<$.length;++te)$[te]=ne[te].listener||ne[te];return $}function q(ne,$){return new Promise(function(te,G){function ie(pe){ne.removeListener($,he),G(pe)}function he(){typeof ne.removeListener=="function"&&ne.removeListener("error",ie),te([].slice.call(arguments))}oe(ne,$,he,{once:!0}),$!=="error"&&H(ne,ie,{once:!0})})}function H(ne,$,te){typeof ne.on=="function"&&oe(ne,"error",$,te)}function oe(ne,$,te,G){if(typeof ne.on=="function")G.once?ne.once($,te):ne.on($,te);else if(typeof ne.addEventListener=="function")ne.addEventListener($,function ie(he){G.once&&ne.removeEventListener($,ie),te(he)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ne)}return vb.exports}var BX=EX();const l9={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},OX={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},IX=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class kX{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,a=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,f=s.substring(0,a),y=s.substring(a,a+o),x=s.substring(a+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+f+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+y+"</span>"+x+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new BX.EventEmitter,this.options=mp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",MX(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new yX(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,a=s.firstChild;r.appendChild(a)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(s?s.value:""))return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s.value)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&l9[e.properties.short_code])t=mp({},this.options.flyTo),this._map&&this._map.fitBounds(l9[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=mp({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=mp({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return F4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),a=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const f=yield a;yield this._handleGeocodeResponse(f,s,t,r,o)}catch(f){this._handleGeocodeErrorResponse(f,o)}return a})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&IX.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return F4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let a={};e?a=e:a={type:"FeatureCollection",features:[]},a.config=t,this.fresh&&(this.fresh=!1),a.features=a.features?s.concat(a.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,a.features,t)||Promise.resolve([]):Promise.resolve([]);try{const y=yield o;a.features=a.features?y.concat(a.features):y}catch{}this.options.filter&&a.features.length&&(a.features=a.features.filter(this.options.filter));let f=[];"suggestions"in a?f=a.suggestions:"place"in a?f=[a.place]:f=a.features,f.length?(this._clearEl.style.display="block",this._typeahead.update(f),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(a.features.length>0||"place"in a)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",a))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return F4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){this._renderMessage("<div class='maplibre-gl-geocoder--error'>There was an error reaching the server</div>")}_renderNoResults(){this._renderMessage("<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_getPlaceholderText(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){const e=this.options.language.split(",")[0],t=bX.language(e),r=OX[t];if(r)return r}return"Search"}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=mp({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=mp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const a=mp({},{},this.options.popup);i=new this._maplibregl.Popup(a).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=mp({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=mp(r,{element:s}));const a=new this._maplibregl.Marker(mp({},r,{element:s}));let o;if(this.options.popup){const y=mp({},{},this.options.popup);o=new this._maplibregl.Popup(y).setHTML(this.options.popupRender(i))}i.center?(a.setLngLat(i.center).addTo(this._map),this.options.popup&&a.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(a.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&a.setPopup(o)),this.resultMarkers.push(a)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Sn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="300acb3537cd75ba7433c8df32ce2e40c6bb2cf5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:2},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:19}},2:{start:{line:25,column:26},end:{line:31,column:3}},3:{start:{line:32,column:16},end:{line:32,column:55}},4:{start:{line:33,column:2},end:{line:35,column:3}},5:{start:{line:34,column:4},end:{line:34,column:30}},6:{start:{line:36,column:18},end:{line:36,column:20}},7:{start:{line:37,column:2},end:{line:42,column:5}},8:{start:{line:38,column:19},end:{line:38,column:53}},9:{start:{line:39,column:4},end:{line:41,column:5}},10:{start:{line:40,column:6},end:{line:40,column:33}},11:{start:{line:43,column:23},end:{line:47,column:3}},12:{start:{line:48,column:2},end:{line:48,column:22}},13:{start:{line:51,column:24},end:{line:61,column:3}},14:{start:{line:62,column:14},end:{line:62,column:18}},15:{start:{line:64,column:4},end:{line:64,column:17}},16:{start:{line:65,column:4},end:{line:70,column:6}},17:{start:{line:71,column:4},end:{line:73,column:7}},18:{start:{line:72,column:6},end:{line:72,column:25}},19:{start:{line:76,column:17},end:{line:76,column:22}},20:{start:{line:77,column:4},end:{line:80,column:5}},21:{start:{line:78,column:6},end:{line:78,column:132}},22:{start:{line:81,column:4},end:{line:81,column:18}},23:{start:{line:84,column:16},end:{line:84,column:30}},24:{start:{line:85,column:28},end:{line:85,column:79}},25:{start:{line:86,column:4},end:{line:91,column:5}},26:{start:{line:87,column:6},end:{line:87,column:52}},27:{start:{line:88,column:6},end:{line:88,column:70}},28:{start:{line:89,column:6},end:{line:89,column:70}},29:{start:{line:90,column:6},end:{line:90,column:76}},30:{start:{line:92,column:4},end:{line:94,column:5}},31:{start:{line:93,column:6},end:{line:93,column:43}},32:{start:{line:95,column:4},end:{line:100,column:5}},33:{start:{line:96,column:6},end:{line:96,column:59}},34:{start:{line:97,column:6},end:{line:99,column:14}},35:{start:{line:98,column:8},end:{line:98,column:36}},36:{start:{line:103,column:20},end:{line:112,column:5}},37:{start:{line:113,column:21},end:{line:113,column:53}},38:{start:{line:114,column:4},end:{line:114,column:53}},39:{start:{line:115,column:16},end:{line:115,column:43}},40:{start:{line:116,column:26},end:{line:120,column:5}},41:{start:{line:117,column:21},end:{line:117,column:36}},42:{start:{line:118,column:19},end:{line:118,column:32}},43:{start:{line:119,column:6},end:{line:119,column:44}},44:{start:{line:121,column:4},end:{line:121,column:20}},45:{start:{line:122,column:4},end:{line:122,column:56}},46:{start:{line:123,column:4},end:{line:123,column:56}},47:{start:{line:124,column:4},end:{line:124,column:62}},48:{start:{line:125,column:21},end:{line:125,column:43}},49:{start:{line:126,column:24},end:{line:126,column:41}},50:{start:{line:127,column:4},end:{line:127,column:45}},51:{start:{line:128,column:16},end:{line:128,column:74}},52:{start:{line:129,column:4},end:{line:129,column:37}},53:{start:{line:130,column:20},end:{line:130,column:49}},54:{start:{line:131,column:20},end:{line:151,column:6}},55:{start:{line:141,column:8},end:{line:141,column:82}},56:{start:{line:143,column:62},end:{line:143,column:141}},57:{start:{line:145,column:8},end:{line:149,column:9}},58:{start:{line:146,column:10},end:{line:146,column:108}},59:{start:{line:148,column:10},end:{line:148,column:160}},60:{start:{line:152,column:4},end:{line:152,column:28}},61:{start:{line:153,column:4},end:{line:161,column:7}},62:{start:{line:154,column:6},end:{line:160,column:9}},63:{start:{line:162,column:4},end:{line:167,column:7}},64:{start:{line:163,column:6},end:{line:163,column:40}},65:{start:{line:163,column:33},end:{line:163,column:40}},66:{start:{line:164,column:6},end:{line:166,column:9}},67:{start:{line:168,column:4},end:{line:170,column:7}},68:{start:{line:169,column:6},end:{line:169,column:30}},69:{start:{line:171,column:4},end:{line:175,column:7}},70:{start:{line:172,column:6},end:{line:174,column:9}},71:{start:{line:176,column:4},end:{line:176,column:37}},72:{start:{line:177,column:4},end:{line:177,column:37}},73:{start:{line:179,column:22},end:{line:182,column:3}},74:{start:{line:180,column:18},end:{line:180,column:82}},75:{start:{line:180,column:66},end:{line:180,column:81}},76:{start:{line:181,column:4},end:{line:181,column:36}},77:{start:{line:184,column:27},end:{line:217,column:5}},78:{start:{line:186,column:25},end:{line:186,column:27}},79:{start:{line:187,column:8},end:{line:212,column:9}},80:{start:{line:188,column:26},end:{line:188,column:138}},81:{start:{line:189,column:27},end:{line:189,column:47}},82:{start:{line:190,column:26},end:{line:190,column:47}},83:{start:{line:191,column:10},end:{line:209,column:11}},84:{start:{line:192,column:27},end:{line:195,column:13}},85:{start:{line:196,column:26},end:{line:207,column:13}},86:{start:{line:208,column:12},end:{line:208,column:33}},87:{start:{line:211,column:10},end:{line:211,column:69}},88:{start:{line:213,column:8},end:{line:215,column:10}},89:{start:{line:218,column:21},end:{line:221,column:6}},90:{start:{line:222,column:4},end:{line:222,column:41}},91:{start:{line:223,column:4},end:{line:223,column:20}},92:{start:{line:226,column:14},end:{line:226,column:26}},93:{start:{line:227,column:4},end:{line:227,column:53}},94:{start:{line:228,column:4},end:{line:228,column:49}},95:{start:{line:229,column:4},end:{line:238,column:6}},96:{start:{line:235,column:20},end:{line:235,column:38}},97:{start:{line:241,column:22},end:{line:241,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:39},end:{line:23,column:1}},line:20},1:{name:"buildInspectStyle",decl:{start:{line:24,column:9},end:{line:24,column:26}},loc:{start:{line:24,column:78},end:{line:49,column:1}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:37,column:48},end:{line:37,column:49}},loc:{start:{line:37,column:62},end:{line:42,column:3}},line:37},3:{name:"(anonymous_3)",decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:53,column:5}},line:52},4:{name:"(anonymous_4)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:56,column:25},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:63,column:2},end:{line:63,column:3}},loc:{start:{line:63,column:21},end:{line:74,column:3}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:71,column:34},end:{line:71,column:35}},loc:{start:{line:71,column:40},end:{line:73,column:5}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:46},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:101,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:97,column:17},end:{line:97,column:18}},loc:{start:{line:97,column:23},end:{line:99,column:7}},line:97},12:{name:"(anonymous_12)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:22},end:{line:178,column:3}},line:102},13:{name:"(anonymous_13)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:120,column:5}},line:116},14:{name:"(anonymous_14)",decl:{start:{line:140,column:24},end:{line:140,column:25}},loc:{start:{line:140,column:44},end:{line:142,column:7}},line:140},15:{name:"(anonymous_15)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:62},end:{line:143,column:141}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:144,column:19},end:{line:144,column:20}},loc:{start:{line:144,column:33},end:{line:150,column:7}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:31},end:{line:161,column:5}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:162,column:19},end:{line:162,column:20}},loc:{start:{line:162,column:26},end:{line:167,column:5}},line:162},19:{name:"(anonymous_19)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:27},end:{line:170,column:5}},line:168},20:{name:"(anonymous_20)",decl:{start:{line:171,column:19},end:{line:171,column:20}},loc:{start:{line:171,column:27},end:{line:175,column:5}},line:171},21:{name:"(anonymous_21)",decl:{start:{line:179,column:22},end:{line:179,column:23}},loc:{start:{line:179,column:30},end:{line:182,column:3}},line:179},22:{name:"(anonymous_22)",decl:{start:{line:180,column:55},end:{line:180,column:56}},loc:{start:{line:180,column:66},end:{line:180,column:81}},line:180},23:{name:"(anonymous_23)",decl:{start:{line:183,column:2},end:{line:183,column:3}},loc:{start:{line:183,column:20},end:{line:224,column:3}},line:183},24:{name:"(anonymous_24)",decl:{start:{line:185,column:22},end:{line:185,column:23}},loc:{start:{line:185,column:40},end:{line:216,column:7}},line:185},25:{name:"(anonymous_25)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:239,column:3}},line:225},26:{name:"(anonymous_26)",decl:{start:{line:235,column:13},end:{line:235,column:14}},loc:{start:{line:235,column:20},end:{line:235,column:38}},line:235}},branchMap:{0:{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},1:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:39,column:8},end:{line:39,column:64}},type:"binary-expr",locations:[{start:{line:39,column:8},end:{line:39,column:32}},{start:{line:39,column:36},end:{line:39,column:64}}],line:39},3:{loc:{start:{line:78,column:15},end:{line:78,column:131}},type:"binary-expr",locations:[{start:{line:78,column:15},end:{line:78,column:71}},{start:{line:78,column:75},end:{line:78,column:131}}],line:78},4:{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86},5:{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},6:{loc:{start:{line:92,column:8},end:{line:92,column:98}},type:"binary-expr",locations:[{start:{line:92,column:8},end:{line:92,column:26}},{start:{line:92,column:30},end:{line:92,column:98}}],line:92},7:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95},8:{loc:{start:{line:95,column:8},end:{line:95,column:59}},type:"binary-expr",locations:[{start:{line:95,column:8},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:59}}],line:95},9:{loc:{start:{line:145,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:149,column:9}},{start:{line:147,column:15},end:{line:149,column:9}}],line:145},10:{loc:{start:{line:163,column:6},end:{line:163,column:40}},type:"if",locations:[{start:{line:163,column:6},end:{line:163,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA+L6B;AA/L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"300acb3537cd75ba7433c8df32ce2e40c6bb2cf5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sn=function(){return a},a}Sn();function u9(n,e){return Sn().f[0]++,Sn().s[0]++,QH.render(n,e),Sn().s[1]++,e}function TX(n,e,t){Sn().f[1]++;const r=(Sn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(Sn().s[3]++,dX(t));Sn().s[4]++,i?(Sn().b[0][0]++,Sn().s[5]++,e.push(i)):Sn().b[0][1]++;const s=(Sn().s[6]++,{});Sn().s[7]++,Object.keys(n.sources).forEach(o=>{Sn().f[2]++;const f=(Sn().s[8]++,n.sources[o]);Sn().s[9]++,Sn().b[2][0]++,f.type!=="raster"&&(Sn().b[2][1]++,f.type!=="raster-dem")?(Sn().b[1][0]++,Sn().s[10]++,s[o]=f):Sn().b[1][1]++});const a=(Sn().s[11]++,{...n,sources:s,layers:[r].concat(e)});return Sn().s[12]++,a}class XU extends nr.Component{constructor(t){Sn().f[7]++,Sn().s[15]++;super(t);Pn(this,"container",(Sn().s[14]++,null));Pn(this,"onLayerSelectById",(Sn().s[73]++,t=>{Sn().f[21]++;const r=(Sn().s[74]++,this.props.mapStyle.layers.findIndex(i=>(Sn().f[22]++,Sn().s[75]++,i.id===t)));Sn().s[76]++,this.props.onLayerSelect(r)}));Sn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Sn().s[17]++,$c.on("languageChanged",()=>{Sn().f[8]++,Sn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){Sn().f[9]++;let i=(Sn().s[19]++,!1);Sn().s[20]++;try{Sn().s[21]++,i=(Sn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(Sn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return Sn().s[22]++,i}componentDidUpdate(){var i,s,a;Sn().f[10]++;const t=(Sn().s[23]++,this.state.map),r=(Sn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));Sn().s[25]++,t?(Sn().b[4][0]++,Sn().s[26]++,t.setStyle(r,{diff:!0}),Sn().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,Sn().s[28]++,t.showCollisionBoxes=(s=this.props.options)==null?void 0:s.showCollisionBoxes,Sn().s[29]++,t.showOverdrawInspector=(a=this.props.options)==null?void 0:a.showOverdrawInspector):Sn().b[4][1]++,Sn().s[30]++,Sn().b[6][0]++,this.state.inspect&&(Sn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Sn().b[5][0]++,Sn().s[31]++,this.state.inspect.toggleInspector()):Sn().b[5][1]++,Sn().s[32]++,Sn().b[8][0]++,this.state.inspect&&(Sn().b[8][1]++,this.props.inspectModeEnabled)?(Sn().b[7][0]++,Sn().s[33]++,this.state.inspect.setOriginalStyle(r),Sn().s[34]++,setTimeout(()=>{Sn().f[11]++,Sn().s[35]++,this.state.inspect.render()},500)):Sn().b[7][1]++}componentDidMount(){Sn().f[12]++;const t=(Sn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(Sn().s[37]++,new RY({metadata:!0}));Sn().s[38]++,ay.addProtocol("pmtiles",r.tile);const i=(Sn().s[39]++,new ay.Map(t));Sn().s[40]++;const s=()=>{Sn().f[13]++;const B=(Sn().s[41]++,i.getCenter()),O=(Sn().s[42]++,i.getZoom());Sn().s[43]++,this.props.onChange({center:B,zoom:O})};Sn().s[44]++,s(),Sn().s[45]++,i.showTileBoundaries=t.showTileBoundaries,Sn().s[46]++,i.showCollisionBoxes=t.showCollisionBoxes,Sn().s[47]++,i.showOverdrawInspector=t.showOverdrawInspector;const a=(Sn().s[48]++,this.initGeocoder(i)),o=(Sn().s[49]++,new uX);Sn().s[50]++,i.addControl(o,"top-right");const f=(Sn().s[51]++,new ay.NavigationControl({visualizePitch:!0}));Sn().s[52]++,i.addControl(f,"top-right");const y=(Sn().s[53]++,document.createElement("div")),x=(Sn().s[54]++,new g8({popup:new ay.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(B,O)=>(Sn().f[14]++,Sn().s[55]++,SA(GU.brightColor(B,O)).desaturate(.5).string()),buildInspectStyle:(B,O)=>(Sn().f[15]++,Sn().s[56]++,TX(B,O,this.props.highlightedLayer)),renderPopup:B=>(Sn().f[16]++,Sn().s[57]++,this.props.inspectModeEnabled?(Sn().b[9][0]++,Sn().s[58]++,u9(ue.jsx(HZ,{features:B}),y)):(Sn().b[9][1]++,Sn().s[59]++,u9(ue.jsx(YU,{features:B,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),y)))}));Sn().s[60]++,i.addControl(x),Sn().s[61]++,i.on("style.load",()=>{Sn().f[17]++,Sn().s[62]++,this.setState({map:i,inspect:x,geocoder:a,zoomControl:o,zoom:i.getZoom()})}),Sn().s[63]++,i.on("data",B=>{if(Sn().f[18]++,Sn().s[64]++,B.dataType!=="tile"){Sn().b[10][0]++,Sn().s[65]++;return}else Sn().b[10][1]++;Sn().s[66]++,this.props.onDataChange({map:this.state.map})}),Sn().s[67]++,i.on("error",B=>{Sn().f[19]++,Sn().s[68]++,console.log("ERROR",B)}),Sn().s[69]++,i.on("zoom",B=>{Sn().f[20]++,Sn().s[70]++,this.setState({zoom:i.getZoom()})}),Sn().s[71]++,i.on("dragend",s),Sn().s[72]++,i.on("zoomend",s)}initGeocoder(t){Sn().f[23]++;const r=(Sn().s[77]++,{forwardGeocode:async s=>{Sn().f[24]++;const a=(Sn().s[78]++,[]);Sn().s[79]++;try{const o=(Sn().s[80]++,`https://nominatim.openstreetmap.org/search?q=${s.query}&format=geojson&polygon_geojson=1&addressdetails=1`),f=(Sn().s[81]++,await fetch(o)),y=(Sn().s[82]++,await f.json());Sn().s[83]++;for(const x of y.features){const B=(Sn().s[84]++,[x.bbox[0]+(x.bbox[2]-x.bbox[0])/2,x.bbox[1]+(x.bbox[3]-x.bbox[1])/2]),O=(Sn().s[85]++,{type:"Feature",geometry:{type:"Point",coordinates:B},place_name:x.properties.display_name,properties:x.properties,text:x.properties.display_name,place_type:["place"],center:B});Sn().s[86]++,a.push(O)}}catch(o){Sn().s[87]++,console.error(`Failed to forwardGeocode with error: ${o}`)}return Sn().s[88]++,{features:a}}}),i=(Sn().s[89]++,new kX(r,{placeholder:this.props.t("Search"),maplibregl:ay}));return Sn().s[90]++,t.addControl(i,"top-left"),Sn().s[91]++,i}render(){var r,i;Sn().f[25]++;const t=(Sn().s[92]++,this.props.t);return Sn().s[93]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),Sn().s[94]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),Sn().s[95]++,ue.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:s=>(Sn().f[26]++,Sn().s[96]++,this.container=s),"data-wd-key":"maplibre:map"})}}Pn(XU,"defaultProps",(Sn().s[13]++,{onMapLoaded:()=>{Sn().f[3]++},onDataChange:()=>{Sn().f[4]++},onLayerSelect:()=>{Sn().f[5]++},onChange:()=>{Sn().f[6]++},options:{}}));const PX=(Sn().s[97]++,Ws()(XU)),hi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},A9={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var c9={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function KX(n){var x,B;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),A9[n])t=A9[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),a=s.length,o=a<=4;r=1,o?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],a===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],a===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var f=e[1];i=f.replace(/a$/,"");var y=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(O,T){if(O[O.length-1]==="%")return O=parseFloat(O)/100,T===3?O:i==="rgb"?O*255:i[0]==="h"||i[0]==="l"&&!T?O*100:i==="lab"?O*125:i==="lch"?T<2?O*150:O*360:i[0]==="o"&&!T?O:i==="oklab"?O*.4:i==="oklch"?T<2?O*.4:O*360:O;if(i[T]==="h"||T===2&&i[i.length-1]==="h"){if(c9[O]!==void 0)return c9[O];if(O.endsWith("deg"))return parseFloat(O);if(O.endsWith("turn"))return parseFloat(O)*360;if(O.endsWith("grad"))return parseFloat(O)*360/400;if(O.endsWith("rad"))return parseFloat(O)*180/Math.PI}return O==="none"?0:parseFloat(O)}),r=t.length>y?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(O){return parseFloat(O)}),i=((B=(x=n.match(/([a-z])/ig))==null?void 0:x.join(""))==null?void 0:B.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}const DC={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},G4={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,s,a,o,f,y=0;if(t===0)return f=r*255,[f,f,f];for(s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,o=[0,0,0];y<3;)a=e+1/3*-(y-1),a<0?a++:a>1&&a--,f=6*a<1?i+(s-i)*6*a:2*a<1?s:3*a<2?i+(s-i)*(2/3-a)*6:i,o[y++]=f*255;return o}};DC.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=s-i,o,f,y;return s===i?o=0:e===s?o=(t-r)/a:t===s?o=2+(r-e)/a:r===s&&(o=4+(e-t)/a),o=Math.min(o*60,360),o<0&&(o+=360),y=(i+s)/2,s===i?f=0:y<=.5?f=a/(s+i):f=a/(2-s-i),[o,f*100,y*100]};function DX(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=KX(n);if(!t.space)return[];const r=t.space[0]==="h"?G4.min:DC.min,i=t.space[0]==="h"?G4.max:DC.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=G4.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}var Qc={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Qc.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Qc.max=Qc.whitepoint[2].D65;Qc.rgb=function(n,e){e=e||Qc.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],s,a,o;return s=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,a=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,o=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[s*255,a*255,o*255]};DC.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=t*.41239079926595+r*.35758433938387+i*.18048078840183,a=t*.21263900587151+r*.71516867876775+i*.072192315360733,o=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||Qc.whitepoint[2].E,[s*e[0],a*e[1],o*e[2]]};const v8={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,s,a,o,f,y,x,B,O,T,F,j;if(s=n[0],a=n[1],o=n[2],s===0)return[0,0,0];var N=.0011070564598794539;return e=e||"D65",t=t||2,B=Qc.whitepoint[t][e][0],O=Qc.whitepoint[t][e][1],T=Qc.whitepoint[t][e][2],F=4*B/(B+15*O+3*T),j=9*O/(B+15*O+3*T),r=a/(13*s)+F||0,i=o/(13*s)+j||0,y=s>8?O*Math.pow((s+16)/116,3):O*s*N,f=y*9*r/(4*i)||0,x=y*(12-3*r-20*i)/(4*i)||0,[f,y,x]}};Qc.luv=function(n,e,t){var r,i,s,a,o,f,y,x,B,O,T,F,j,N=.008856451679035631,q=903.2962962962961;e=e||"D65",t=t||2,B=Qc.whitepoint[t][e][0],O=Qc.whitepoint[t][e][1],T=Qc.whitepoint[t][e][2],F=4*B/(B+15*O+3*T),j=9*O/(B+15*O+3*T),f=n[0],y=n[1],x=n[2],r=4*f/(f+15*y+3*x)||0,i=9*y/(f+15*y+3*x)||0;var H=y/O;return s=H<=N?q*H:116*Math.pow(H,1/3)-16,a=13*s*(r-F),o=13*s*(i-j),[s,a,o]};var JU={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,s,a;return a=r/360*2*Math.PI,i=t*Math.cos(a),s=t*Math.sin(a),[e,i,s]},xyz:function(n){return v8.xyz(JU.luv(n))}};v8.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),a=s*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};Qc.lchuv=function(n){return v8.lchuv(Qc.luv(n))};function BA(n,e,t){return Math.min(Math.max(n,e),t)}function RX(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const f=((n-t)*a+(e-r)*o)/(a*a+o*o);f>1?(t=i,r=s):f>0&&(t+=a*f,r+=o*f)}return jg(n,e,t,r)}function jg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function FX(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const f=Math.abs(n[o][r]);f>s&&(s=f,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const f=-n[o][r]/n[r][r];for(let y=r;y<e+1;y++)r==y?n[o][y]=0:n[o][y]+=f*n[r][y]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function d9(n){return n*180/Math.PI}function N0(n){return n*Math.PI/180}function Ng(n,e){const t=n%e;return t*e<0?t+e:t}function tf(n,e,t){return n+t*(e-n)}function C8(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Cb(n,e){return Math.floor(C8(n,e))}function K0(n,e){return Math.ceil(C8(n,e))}function X6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}const _8=[NaN,NaN,NaN,0];function LX(n){return typeof n=="string"?n:x8(n)}const UX=1024,Pv={};let Q4=0;function zX(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function h9(n){const e=Qc.lchuv(DC.xyz(n));return e[3]=n[3],e}function jX(n){const e=Qc.rgb(JU.xyz(n));return e[3]=n[3],e}function b8(n){if(n==="none")return _8;if(Pv.hasOwnProperty(n))return Pv[n];if(Q4>=UX){let t=0;for(const r in Pv)t++&3||(delete Pv[r],--Q4)}const e=DX(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return ez(e),Pv[n]=e,++Q4,e}function Wy(n){return Array.isArray(n)?n:b8(n)}function ez(n){return n[0]=BA(n[0]+.5|0,0,255),n[1]=BA(n[1]+.5|0,0,255),n[2]=BA(n[2]+.5|0,0,255),n[3]=BA(n[3],0,1),n}function x8(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}const Y0=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",NX=Y0.includes("firefox"),WX=Y0.includes("safari")&&!Y0.includes("chrom");WX&&(Y0.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Y0));const GX=Y0.includes("webkit")&&!Y0.includes("edge"),tz=Y0.includes("macintosh"),nz=typeof devicePixelRatio<"u"?devicePixelRatio:1,rz=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,iz=typeof Image<"u"&&Image.prototype.decode,QX=typeof createImageBitmap=="function",oz=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Lu(n,e,t,r){let i;return t&&t.length?i=t.shift():rz?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let q4;function P2(){return q4||(q4=Lu(1,1)),q4}function d_(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function qX(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function YX(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function f9(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function sz(n){for(;n.lastChild;)n.lastChild.remove()}function $X(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}const uo={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class h_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function VX(n,e,t){let r,i;t=t||Gm;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function Gm(n,e){return n>e?1:n<e?-1:0}function HX(n,e){return n<e?1:n>e?-1:0}function Gx(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function ZX(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function um(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function H0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function XX(n,e,t){const r=e;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function RC(){return!0}function Qx(){return!1}function Gy(){}function az(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!H0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function Qy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function f_(n){for(const e in n)delete n[e]}function $0(n){let e;for(e in n)return!1;return!e}class Ip{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class p_ extends h_{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Ip(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let f;for(let y=0,x=i.length;y<x;++y)if("handleEvent"in i[y]?f=i[y].handleEvent(s):f=i[y].call(this,s),f===!1||s.propagationStopped){f=!1;break}if(--a[r]===0){let y=o[r];for(delete o[r];y--;)this.removeEventListener(r,Gy);delete a[r]}return f}disposeInternal(){this.listeners_&&f_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Gy,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function Ds(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function K2(n,e,t,r){return Ds(n,e,t,r,!0)}function ul(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),f_(n))}class w8 extends p_{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?hi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(uo.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==hi.IDLE&&this.loader){this.state=hi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Qy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||QX&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=hi.LOADED}).catch(r=>{this.state=hi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function JX(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[K2(r,uo.LOAD,function(){a=!0,s||e()})];return r.src&&iz?(s=!0,r.decode().then(function(){i&&e()}).catch(function(f){i&&(a?e():t())})):o.push(K2(r,uo.ERROR,t)),function(){i=!1,o.forEach(ul)}}function eJ(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function tJ(n,e){return e&&(n.src=e),n.src&&iz?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):eJ(n)}class nJ{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=Y4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=Y4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=Y4(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===hi.IDLE&&i.load(),i.getImageState()===hi.LOADING?i.ready().then(()=>{this.patternCache_[a]=P2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=P2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Y4(n,e,t){const r=t?Wy(t):"null";return e+":"+n+":"+r}const Qf=new nJ;let Kv=null;class lz extends p_{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?hi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===hi.LOADED){Kv||(Kv=Lu(1,1,void 0,{willReadFrequently:!0})),Kv.drawImage(this.image_,0,0);try{Kv.getImageData(0,0,1,1),this.tainted_=!1}catch{Kv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(uo.CHANGE)}handleImageError_(){this.imageState_=hi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=hi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Lu(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===hi.IDLE){this.image_||this.initializeImage_(),this.imageState_=hi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&tJ(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==hi.LOADED)return;const t=this.image_,r=Lu(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=LX(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===hi.LOADED||this.imageState_===hi.ERROR)e();else{const t=()=>{(this.imageState_===hi.LOADED||this.imageState_===hi.ERROR)&&(this.removeEventListener(uo.CHANGE,t),e())};this.addEventListener(uo.CHANGE,t)}})),this.ready_}}function M8(n,e,t,r,i,s){let a=e===void 0?void 0:Qf.get(e,t,i);return a||(a=new lz(n,n&&"src"in n?n.src||void 0:e,t,r,i),Qf.set(e,t,i,a,s)),s&&a&&!Qf.getPattern(e,t,i)&&Qf.set(e,t,i,a,s),a}function rm(n){return n?Array.isArray(n)?x8(n):typeof n=="object"&&"src"in n?rJ(n):n:null}function rJ(n){if(!n.offset||!n.size)return Qf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Qf.getPattern(e,void 0,n.color);if(t)return t;const r=Qf.get(n.src,"anonymous",null);if(r.getImageState()!==hi.LOADED)return null;const i=Lu(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),M8(i.canvas,e,void 0,hi.LOADED,n.color,!0),Qf.getPattern(e,void 0,n.color)}const qy={PROPERTYCHANGE:"propertychange"};class m_ extends p_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(uo.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ds(this,e[s],t);return i}return Ds(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=K2(this,e[s],t)}else r=K2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)iJ(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}m_.prototype.on;m_.prototype.once;m_.prototype.un;function iJ(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)ul(n[e]);else ul(n)}function wo(){throw new Error("Unimplemented abstract method.")}let oJ=0;function Qo(n){return n.ol_uid||(n.ol_uid=String(++oJ))}class p9 extends Ip{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class kp extends m_{constructor(e){super(),this.on,this.once,this.un,Qo(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new p9(r,e,t)),r=qy.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new p9(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],$0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const _b="ol-hidden",sJ="ol-selectable",qx="ol-unselectable",S8="ol-control",m9="ol-collapsed",aJ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),g9=["style","variant","weight","size","lineHeight","family"],uz=function(n){const e=n.match(aJ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=g9.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[g9[r]]=s)}return t.families=t.family.split(/,\s?/),t},Az="10px sans-serif",gh="#000",Yy="round",Qm=[],qm=0,$y="round",FC=10,LC="#000",UC="center",D2="middle",Pg=[0,0,0,0],zC=1,Yp=new kp;let ly=null,J6;const eB={},cz=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,a;function o(y,x,B){let O=!0;for(let T=0;T<r;++T){const F=t[T];if(a=R2(y+" "+x+" "+e+F,i),B!=F){const j=R2(y+" "+x+" "+e+B+","+F,i);O=O&&j!=a}}return!!O}function f(){let y=!0;const x=Yp.getKeys();for(let B=0,O=x.length;B<O;++B){const T=x[B];if(Yp.get(T)<100){const[F,j,N]=T.split(`
`);o(F,j,N)?(f_(eB),ly=null,J6=void 0,Yp.set(T,100)):(Yp.set(T,Yp.get(T)+1,!0),y=!1)}}y&&(clearInterval(s),s=void 0)}return function(y){const x=uz(y);if(!x)return;const B=x.families;for(let O=0,T=B.length;O<T;++O){const F=B[O],j=x.style+`
`+x.weight+`
`+F;Yp.get(j)===void 0&&(Yp.set(j,100,!0),o(x.style,x.weight,F)||(Yp.set(j,0,!0),s===void 0&&(s=setInterval(f,32))))}}}(),lJ=function(){let n;return function(e){let t=eB[e];if(t==null){if(rz){const r=uz(e),i=dz(e,"Žg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);eB[e]=t}return t}}();function dz(n,e){return ly||(ly=Lu(1,1)),n!=J6&&(ly.font=n,J6=ly.font),ly.measureText(e)}function R2(n,e){return dz(n,e).width}function y9(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,R2(n,s)),0);return t[e]=r,r}function uJ(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,f=0;for(let y=0,x=e.length;y<=x;y+=2){const B=e[y];if(B===`
`||y===x){s=Math.max(s,a),i.push(a),a=0,o+=f,f=0;continue}const O=e[y+1]||n.font,T=R2(O,B);t.push(T),a+=T;const F=lJ(O);r.push(F),f=Math.max(f,F)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function AJ(n,e,t,r,i,s,a,o,f,y,x){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=B=>B.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(f,y),n.scale(x[0],x[1]),cJ(r,n)):x[0]<0||x[1]<0?(n.translate(f,y),n.scale(x[0],x[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,f,y,a*x[0],o*x[1]),n.restore()}function cJ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}function v9(n){return n[0]>0&&n[1]>0}function dJ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function md(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Yx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=md(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Yx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return wo()}getImage(e){return wo()}getHitDetectionImage(){return wo()}getPixelRatio(e){return 1}getImageState(){return wo()}getImageSize(){return wo()}getOrigin(){return wo()}getSize(){return wo()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=md(e)}listenImageChange(e){wo()}load(){wo()}unlistenImageChange(e){wo()}ready(){return Promise.resolve()}}class $x extends Yx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?hi.LOADING:hi.LOADED,this.imageState_===hi.LOADING&&this.ready().then(()=>this.imageState_=hi.LOADED),this.render()}clone(){const e=this.getScale(),t=new $x({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,a;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(a=Qf.get(r,null,null))==null?void 0:a.getImage(1);if(!i){const o=this.renderOptions_,f=Math.ceil(o.size*e),y=Lu(f,f);this.draw_(o,y,e),i=y.canvas,Qf.set(r,null,null,new lz(i,void 0,null,hi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const te=i;i=s,s=te}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,f=s*Math.sin(o),y=Math.sqrt(s*s-f*f),x=i-y,B=Math.sqrt(f*f+x*x),O=B/f;if(e==="miter"&&O<=r)return O*t;const T=t/2/O,F=t/2*(x/B),N=Math.sqrt((i+T)*(i+T)+F*F)-i;if(this.radius2_===void 0||e==="bevel")return N*2;const q=i*Math.sin(o),H=Math.sqrt(i*i-q*q),oe=s-H,$=Math.sqrt(q*q+oe*oe)/q;if($<=r){const te=$*t/2-s-i;return 2*Math.max(N,te)}return N*2}createRenderOptions(){let e=Yy,t=$y,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=rm(this.stroke_.getColor()??LC),o=this.stroke_.getWidth()??zC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??$y,e=this.stroke_.getLineCap()??Yy,r=this.stroke_.getMiterLimit()??FC);const f=this.calculateLineJoinSize_(t,o,r),y=Math.max(this.radius,this.radius2_||0),x=Math.ceil(2*y+f);return{strokeStyle:a,strokeWidth:o,size:x,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=gh),t.fillStyle=rm(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Wy(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Lu(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const f=s+o*a,y=o%2===0?r:i;e.lineTo(y*Math.cos(f),y*Math.sin(f))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=gh,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class g_ extends $x{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new g_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class jm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new jm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=M8(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===hi.IDLE&&t.load(),t.getImageState()===hi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Qo(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Wy(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Js(n,e){if(!n)throw new Error(e)}function C9(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let F2=class hz extends Yx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;Js(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||Qo(a)),Js(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),Js(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(e.src!==void 0?f=hi.IDLE:a!==void 0&&("complete"in a?a.complete?f=a.src?hi.LOADED:hi.IDLE:f=hi.LOADING:f=hi.LOADED),this.color_=e.color!==void 0?Wy(e.color):null,this.iconImage_=M8(a,o,this.crossOrigin_,f,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let y,x;if(e.size)[y,x]=e.size;else{const B=this.getImage(1);if(B.width&&B.height)y=B.width,x=B.height;else if(B instanceof HTMLImageElement){this.initialOptions_=e;const O=()=>{if(this.unlistenImageChange(O),!this.initialOptions_)return;const T=this.iconImage_.getSize();this.setScale(C9(T[0],T[1],e.width,e.height))};this.listenImageChange(O);return}}y!==void 0&&this.setScale(C9(y,x,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new hz({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==hi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==hi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(uo.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(uo.CHANGE,e)}ready(){return this.iconImage_.ready()}};class Vx extends kp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Vx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ul(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ds(e,uo.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?hJ(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function hJ(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Js(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const wc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function tB(n){const e=Vf();for(let t=0,r=n.length;t<r;++t)yC(e,n[t]);return e}function fJ(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),a=Math.max.apply(null,e);return Vm(r,i,s,a,t)}function W0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function fz(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function t1(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function $g(n,e){return E8(n,e[0],e[1])}function im(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function E8(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function nB(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let f=wc.UNKNOWN;return a<t?f=f|wc.LEFT:a>i&&(f=f|wc.RIGHT),o<r?f=f|wc.BELOW:o>s&&(f=f|wc.ABOVE),f===wc.UNKNOWN&&(f=wc.INTERSECTING),f}function Vf(){return[1/0,1/0,-1/0,-1/0]}function Vm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function ov(n){return Vm(1/0,1/0,-1/0,-1/0,n)}function pz(n,e){const t=n[0],r=n[1];return Vm(t,r,t,r,e)}function B8(n,e,t,r,i){const s=ov(i);return gz(s,n,e,t,r)}function Hm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function mz(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function yC(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function gz(n,e,t,r,i){for(;t<r;t+=i)pJ(n,e[t],e[t+1]);return n}function pJ(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function yz(n,e){let t;return t=e(Hx(n)),t||(t=e(Zx(n)),t)||(t=e(Xx(n)),t)||(t=e(Xm(n)),t)?t:!1}function rB(n){let e=0;return n1(n)||(e=Rs(n)*lA(n)),e}function Hx(n){return[n[0],n[1]]}function Zx(n){return[n[2],n[1]]}function Hf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function mJ(n,e){let t;if(e==="bottom-left")t=Hx(n);else if(e==="bottom-right")t=Zx(n);else if(e==="top-left")t=Xm(n);else if(e==="top-right")t=Xx(n);else throw new Error("Invalid corner");return t}function L2(n,e,t,r,i){const[s,a,o,f,y,x,B,O]=vz(n,e,t,r);return Vm(Math.min(s,o,y,B),Math.min(a,f,x,O),Math.max(s,o,y,B),Math.max(a,f,x,O),i)}function vz(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),f=i*a,y=i*o,x=s*a,B=s*o,O=n[0],T=n[1];return[O-f+B,T-y-x,O-f-B,T-y+x,O+f-B,T+y+x,O+f+B,T+y-x,O-f+B,T-y-x]}function lA(n){return n[3]-n[1]}function Ep(n,e,t){const r=t||Vf();return Fu(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):ov(r),r}function Xm(n){return[n[0],n[3]]}function Xx(n){return[n[2],n[3]]}function Rs(n){return n[2]-n[0]}function Fu(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function n1(n){return n[2]<n[0]||n[3]<n[1]}function gJ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function yJ(n,e,t){let r=!1;const i=nB(n,e),s=nB(n,t);if(i===wc.INTERSECTING||s===wc.INTERSECTING)r=!0;else{const a=n[0],o=n[1],f=n[2],y=n[3],x=e[0],B=e[1],O=t[0],T=t[1],F=(T-B)/(O-x);let j,N;s&wc.ABOVE&&!(i&wc.ABOVE)&&(j=O-(T-y)/F,r=j>=a&&j<=f),!r&&s&wc.RIGHT&&!(i&wc.RIGHT)&&(N=T-(O-f)*F,r=N>=o&&N<=y),!r&&s&wc.BELOW&&!(i&wc.BELOW)&&(j=O-(T-o)/F,r=j>=a&&j<=f),!r&&s&wc.LEFT&&!(i&wc.LEFT)&&(N=T-(O-a)*F,r=N>=o&&N<=y)}return r}function vJ(n,e,t,r){if(n1(n))return ov(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],a=[];for(let o=0,f=i.length;o<f;o+=2)s.push(i[o]),a.push(i[o+1]);return fJ(s,a,t)}function Cz(n,e){const t=e.getExtent(),r=Hf(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Rs(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function _z(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];Cz(n,e);const i=Rs(r);if(Rs(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function bz(n,e,t,r){const i=[];let s=Vf();for(let a=0,o=t.length;a<o;++a){const f=t[a];s=B8(n,e,f[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=f[f.length-1]}return i}function CJ(n,e,t,r,i){return!yz(i,function(a){return!Kg(n,e,t,r,a[0],a[1])})}function Kg(n,e,t,r,i,s){let a=0,o=n[t-r],f=n[t-r+1];for(;e<t;e+=r){const y=n[e],x=n[e+1];f<=s?x>s&&(y-o)*(s-f)-(i-o)*(x-f)>0&&a++:x<=s&&(y-o)*(s-f)-(i-o)*(x-f)<0&&a--,o=y,f=x}return a!==0}function O8(n,e,t,r,i,s){if(t.length===0||!Kg(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(Kg(n,t[a-1],t[a],r,i,s))return!1;return!0}function _J(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const f=t[a];if(O8(n,e,f,r,i,s))return!0;e=f[f.length-1]}return!1}function I8(n,e,t,r,i,s,a){let o,f,y,x,B,O,T;const F=i[s+1],j=[];for(let H=0,oe=t.length;H<oe;++H){const ne=t[H];for(x=n[ne-r],O=n[ne-r+1],o=e;o<ne;o+=r)B=n[o],T=n[o+1],(F<=O&&T<=F||O<=F&&F<=T)&&(y=(F-O)/(T-O)*(B-x)+x,j.push(y)),x=B,O=T}let N=NaN,q=-1/0;for(j.sort(Gm),x=j[0],o=1,f=j.length;o<f;++o){B=j[o];const H=Math.abs(B-x);H>q&&(y=(x+B)/2,O8(n,e,t,r,y,F)&&(N=y,q=H)),x=B}return isNaN(N)&&(N=i[s]),a?(a.push(N,F,q),a):[N,F,q]}function xz(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const f=t[a];s=I8(n,e,f,r,i,2*a,s),e=f[f.length-1]}return s}function U2(n,e,t,r,i,s,a){let o,f;const y=(t-e)/r;if(y===1)o=e;else if(y===2)o=e,f=i;else if(y!==0){let x=n[e],B=n[e+1],O=0;const T=[0];for(let N=e+r;N<t;N+=r){const q=n[N],H=n[N+1];O+=Math.sqrt((q-x)*(q-x)+(H-B)*(H-B)),T.push(O),x=q,B=H}const F=i*O,j=VX(T,F);j<0?(f=(F-T[-j-2])/(T[-j-1]-T[-j-2]),o=e+(-j-2)*r):o=e+j*r}a=a>1?a:2,s=s||new Array(a);for(let x=0;x<a;++x)s[x]=o===void 0?NaN:f===void 0?n[o+x]:tf(n[o+x],n[o+r+x],f);return s}function iB(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,f=t/r;for(;o<f;){const O=o+f>>1;i<n[(O+1)*r-1]?f=O:o=O+1}const y=n[o*r-1];if(i==y)return n.slice((o-1)*r,(o-1)*r+r);const x=n[(o+1)*r-1],B=(i-y)/(x-y);a=[];for(let O=0;O<r-1;++O)a.push(tf(n[(o-1)*r+O],n[o*r+O],B));return a.push(i),a}function bJ(n,e,t,r,i,s,a){if(a)return iB(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let f=0,y=t.length;f<y;++f){const x=t[f];if(e!=x){if(i<n[e+r-1])return null;if(i<=n[x-1])return iB(n,e,x,r,i,!1);e=x}}return null}function xJ(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function k8(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],f=n[e+1];i+=(o-s)*(f+a),s=o,a=f}return i===0?void 0:i>0}function T8(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],f=k8(n,e,o,r);if(s===0){if(i&&f||!i&&!f)return!1}else if(i&&!f||!i&&f)return!1;e=o}return!0}function wz(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!T8(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function z2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],f=k8(n,e,o,r);(s===0?i&&f||!i&&!f:i&&!f||!i&&f)&&xJ(n,e,o,r),e=o}return e}function oB(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=z2(n,e,t[s],r,i);return e}function Mz(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const f=e[a],y=k8(n,r,f,2);if(s===void 0&&(s=y),y===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=f}return t}function Jx(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const f=new Array(o);f[0]=1,f[o-1]=1;const y=[e,t-r];let x=0;for(;y.length>0;){const B=y.pop(),O=y.pop();let T=0;const F=n[O],j=n[O+1],N=n[B],q=n[B+1];for(let H=O+r;H<B;H+=r){const oe=n[H],ne=n[H+1],$=RX(oe,ne,F,j,N,q);$>T&&(x=H,T=$)}T>i&&(f[(x-e)/r]=1,O+r<x&&y.push(O,x),x+r<B&&y.push(x,B))}for(let B=0;B<o;++B)f[B]&&(s[a++]=n[e+B*r],s[a++]=n[e+B*r+1]);return a}function Sz(n,e,t,r,i,s,a,o){for(let f=0,y=t.length;f<y;++f){const x=t[f];a=Jx(n,e,x,r,i,s,a),o.push(a),e=x}return a}function Sg(n,e){return e*Math.round(n/e)}function wJ(n,e,t,r,i,s,a){if(e==t)return a;let o=Sg(n[e],i),f=Sg(n[e+1],i);e+=r,s[a++]=o,s[a++]=f;let y,x;do if(y=Sg(n[e],i),x=Sg(n[e+1],i),e+=r,e==t)return s[a++]=y,s[a++]=x,a;while(y==o&&x==f);for(;e<t;){const B=Sg(n[e],i),O=Sg(n[e+1],i);if(e+=r,B==y&&O==x)continue;const T=y-o,F=x-f,j=B-o,N=O-f;if(T*N==F*j&&(T<0&&j<T||T==j||T>0&&j>T)&&(F<0&&N<F||F==N||F>0&&N>F)){y=B,x=O;continue}s[a++]=y,s[a++]=x,o=y,f=x,y=B,x=O}return s[a++]=y,s[a++]=x,a}function P8(n,e,t,r,i,s,a,o){for(let f=0,y=t.length;f<y;++f){const x=t[f];a=wJ(n,e,x,r,i,s,a),o.push(a),e=x}return a}function MJ(n,e,t,r,i,s,a,o){for(let f=0,y=t.length;f<y;++f){const x=t[f],B=[];a=P8(n,e,x,r,i,s,a,B),o.push(B),e=x[x.length-1]}return a}function G0(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let f=e;f<t;f+=r){const y=n[f],x=n[f+1];s[o++]=i[0]*y+i[2]*x+i[4],s[o++]=i[1]*y+i[3]*x+i[5];for(let B=2;B<a;B++)s[o++]=n[f+B]}return s&&s.length!=o&&(s.length=o),s}function Ez(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),f=Math.sin(i),y=s[0],x=s[1];let B=0;for(let O=e;O<t;O+=r){const T=n[O]-y,F=n[O+1]-x;a[B++]=y+T*o-F*f,a[B++]=x+T*f+F*o;for(let j=O+2;j<O+r;++j)a[B++]=n[j]}return a&&a.length!=B&&(a.length=B),a}function SJ(n,e,t,r,i,s,a,o){o=o||[];const f=a[0],y=a[1];let x=0;for(let B=e;B<t;B+=r){const O=n[B]-f,T=n[B+1]-y;o[x++]=f+i*O,o[x++]=y+s*T;for(let F=B+2;F<B+r;++F)o[x++]=n[F]}return o&&o.length!=x&&(o.length=x),o}function EJ(n,e,t,r,i,s,a){a=a||[];let o=0;for(let f=e;f<t;f+=r){a[o++]=n[f]+i,a[o++]=n[f+1]+s;for(let y=f+2;y<f+r;++y)a[o++]=n[y]}return a&&a.length!=o&&(a.length=o),a}function Bz(...n){console.warn(...n)}function BJ(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function j2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function K8(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function OJ(n,e){return n[0]*=e,n[1]*=e,n}function D8(n,e){if(e.canWrapX()){const t=Rs(e.getExtent()),r=IJ(n,e,t);r&&(n[0]-=r*t)}return n}function IJ(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Rs(r),i=Math.floor((n[0]-r[0])/t)),i}const V0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class e3{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||V0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const y_=6378137,my=Math.PI*y_,kJ=[-my,-my,my,my],TJ=[-180,-85,180,85],bb=y_*Math.log(Math.tan(Math.PI/2));class I1 extends e3{constructor(e){super({code:e,units:"m",extent:kJ,global:!0,worldExtent:TJ,getPointResolution:function(t,r){return t/Math.cosh(r[1]/y_)}})}}const _9=[new I1("EPSG:3857"),new I1("EPSG:102100"),new I1("EPSG:102113"),new I1("EPSG:900913"),new I1("http://www.opengis.net/def/crs/EPSG/0/3857"),new I1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function PJ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=my*n[s]/180;let a=y_*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>bb?a=bb:a<-bb&&(a=-bb),e[s+1]=a}return e}function KJ(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/my,e[s+1]=360*Math.atan(Math.exp(n[s+1]/y_))/Math.PI-90;return e}const DJ=6378137,b9=[-180,-90,180,90],RJ=Math.PI*DJ/180;class gg extends e3{constructor(e,t){super({code:e,units:"degrees",extent:b9,axisOrientation:t,global:!0,metersPerUnit:RJ,worldExtent:b9})}}const x9=[new gg("CRS:84"),new gg("EPSG:4326","neu"),new gg("urn:ogc:def:crs:OGC:1.3:CRS84"),new gg("urn:ogc:def:crs:OGC:2:84"),new gg("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new gg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new gg("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let sB={};function FJ(n){return sB[n]||sB[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function LJ(n,e){sB[n]=e}let By={};function jC(n,e,t){const r=n.getCode(),i=e.getCode();r in By||(By[r]={}),By[r][i]=t}function $4(n,e){return n in By&&e in By[n]?By[n][e]:null}const N2=.9996,$f=.00669438,t3=$f*$f,n3=t3*$f,Dg=$f/(1-$f),w9=Math.sqrt(1-$f),Vy=(1-w9)/(1+w9),Oz=Vy*Vy,R8=Oz*Vy,F8=R8*Vy,Iz=F8*Vy,kz=1-$f/4-3*t3/64-5*n3/256,UJ=3*$f/8+3*t3/32+45*n3/1024,zJ=15*t3/256+45*n3/1024,jJ=35*n3/3072,NJ=3/2*Vy-27/32*R8+269/512*Iz,WJ=21/16*Oz-55/32*F8,GJ=151/96*R8-417/128*Iz,QJ=1097/512*F8,W2=6378137;function qJ(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/N2/(W2*kz),o=a+NJ*Math.sin(2*a)+WJ*Math.sin(4*a)+GJ*Math.sin(6*a)+QJ*Math.sin(8*a),f=Math.sin(o),y=f*f,x=Math.cos(o),B=f/x,O=B*B,T=O*O,F=1-$f*y,j=Math.sqrt(1-$f*y),N=W2/j,q=(1-$f)/F,H=Dg*x**2,oe=H*H,ne=r/(N*N2),$=ne*ne,te=$*ne,G=te*ne,ie=G*ne,he=ie*ne,pe=o-B/q*($/2-G/24*(5+3*O+10*H-4*oe-9*Dg))+he/720*(61+90*O+298*H+45*T-252*Dg-3*oe);let Ee=(ne-te/6*(1+2*O+H)+ie/120*(5-2*H+28*O-3*oe+8*Dg+24*T))/x;return Ee=X6(Ee+N0(Tz(t.number)),-Math.PI,Math.PI),[d9(Ee),d9(pe)]}const M9=-80,S9=84,YJ=-180,$J=180;function VJ(n,e,t){n=X6(n,YJ,$J),e<M9?e=M9:e>S9&&(e=S9);const r=N0(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,f=o*o,y=N0(n),x=Tz(t.number),B=N0(x),O=W2/Math.sqrt(1-$f*i**2),T=Dg*s**2,F=s*X6(y-B,-Math.PI,Math.PI),j=F*F,N=j*F,q=N*F,H=q*F,oe=H*F,ne=W2*(kz*r-UJ*Math.sin(2*r)+zJ*Math.sin(4*r)-jJ*Math.sin(6*r)),$=N2*O*(F+N/6*(1-o+T)+H/120*(5-18*o+f+72*T-58*Dg))+5e5;let te=N2*(ne+O*a*(j/2+q/24*(5-o+9*T+4*T**2)+oe/720*(61-58*o+f+600*T-330*Dg)));return t.north||(te+=1e7),[$,te]}function Tz(n){return(n-1)*6-180+3}const HJ=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Pz(n){let e=0;for(const i of HJ){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function E9(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const f=t[o],y=t[o+1],x=n(f,y,e);r[o]=x[0],r[o+1]=x[1]}return r}}function ZJ(n){return Pz(n)?new e3({code:n,units:"m"}):null}function XJ(n){const e=Pz(n.getCode());return e?{forward:E9(VJ,e),inverse:E9(qJ,e)}:null}const JJ=63710088e-1;function B9(n,e,t){t=t||JJ;const r=N0(n[1]),i=N0(e[1]),s=(i-r)/2,a=N0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const eee=[XJ],tee=[ZJ];let aB=!0;function Kz(n){aB=!1}function L8(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function lB(n){LJ(n.getCode(),n),jC(n,n,L8)}function nee(n){n.forEach(lB)}function Ma(n){if(typeof n!="string")return n;const e=FJ(n);if(e)return e;for(const t of tee){const r=t(n);if(r)return r}return null}function uB(n,e,t,r){n=Ma(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/V0[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=v_(n,Ma("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let y=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];y=o(y,y,2);const x=B9(y.slice(0,2),y.slice(2,4)),B=B9(y.slice(4,6),y.slice(6,8));i=(x+B)/2}const f=r?V0[r]:n.getMetersPerUnit();f!==void 0&&(i/=f)}}return i}function O9(n){nee(n),n.forEach(function(e){n.forEach(function(t){e!==t&&jC(e,t,L8)})})}function ree(n,e,t,r){n.forEach(function(i){e.forEach(function(s){jC(i,s,t),jC(s,i,r)})})}function U8(n,e){return n?typeof n=="string"?Ma(n):n:Ma(e)}function iee(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),f=o.length;for(let y=0,x=i;y<x;++y)t[a+y]=y>=f?e[a+y]:o[y]}return t}}function AB(n,e){return Kz(),r3(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function V4(n,e){const t=r3(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Ng(r+180,360)-180),t}function Wg(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||v_(n,e)===L8)&&t}function v_(n,e){const t=n.getCode(),r=e.getCode();let i=$4(t,r);if(i)return i;let s=null,a=null;for(const f of eee)s||(s=f(n)),a||(a=f(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=H4(s.inverse,a.forward);else{const f=$4(t,o);f&&(i=H4(f,a.forward))}else{const f=$4(o,r);f&&(i=H4(s.inverse,f))}return i&&(lB(n),lB(e),jC(n,e,i)),i}function H4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function NC(n,e){const t=Ma(n),r=Ma(e);return v_(t,r)}function r3(n,e,t){const r=NC(e,t);if(!r){const i=Ma(e).getCode(),s=Ma(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let oee=null;function see(){return oee}function cB(n,e){return n}function Rm(n,e){return aB&&!j2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(aB=!1,Bz("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function z8(n,e){return n}function om(n,e){return n}function aee(){O9(_9),O9(x9),ree(x9,_9,PJ,KJ)}aee();const Dz=new Array(6);function _h(){return[1,0,0,1,0,0]}function I9(n){return N8(n,1,0,0,1,0,0)}function j8(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=n[4],o=n[5],f=e[0],y=e[1],x=e[2],B=e[3],O=e[4],T=e[5];return n[0]=t*f+i*y,n[1]=r*f+s*y,n[2]=t*x+i*B,n[3]=r*x+s*B,n[4]=t*O+i*T+a,n[5]=r*O+s*T+o,n}function N8(n,e,t,r,i,s,a){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=a,n}function lee(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function EA(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function Z4(n,e,t){return j8(n,N8(Dz,e,0,0,t,0,0))}function uee(n,e,t){return j8(n,N8(Dz,1,0,0,1,e,t))}function dm(n,e,t,r,i,s,a,o){const f=Math.sin(s),y=Math.cos(s);return n[0]=r*y,n[1]=i*f,n[2]=-r*f,n[3]=i*y,n[4]=a*r*y-o*r*f+e,n[5]=a*i*f+o*i*y+t,n}function Rz(n,e){const t=Aee(e);Js(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],f=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*f-a*o)/t,n[5]=-(r*f-i*o)/t,n}function Aee(n){return n[0]*n[3]-n[1]*n[2]}const k9=[1e6,1e6,1e6,1e6,2,2];function cee(n){return"matrix("+n.map((t,r)=>Math.round(t*k9[r])/k9[r]).join(", ")+")"}const T9=_h(),dee=[NaN,NaN];class Fz extends kp{constructor(){super(),this.extent_=Vf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=az((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return wo()}closestPointXY(e,t,r,i){return wo()}containsXY(e,t){return this.closestPointXY(e,t,dee,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return wo()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&ov(t),this.extentRevision_=this.getRevision()}return gJ(this.extent_,e)}rotate(e,t){wo()}scale(e,t,r){wo()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return wo()}getType(){return wo()}applyTransform(e){wo()}intersectsExtent(e){return wo()}translate(e,t){wo()}transform(e,t){const r=Ma(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const f=r.getExtent(),y=r.getWorldExtent(),x=lA(y)/lA(f);dm(T9,y[0],y[3],x,-x,0,0,0);const B=G0(s,0,s.length,o,T9,a),O=NC(r,t);return O?O(B,B,o):B}:NC(r,t);return this.applyTransform(i),this}}class r1 extends Fz{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return B8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return wo()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=P9(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){wo()}setLayout(e,t,r){let i;if(e)i=P9(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=i1(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();Ez(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Hf(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();SJ(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();EJ(r,0,r.length,i,e,t,r),this.changed()}}}function i1(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function P9(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function hee(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return G0(r,0,r.length,i,e,t)}function fee(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function i3(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function C_(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const f=i3(n,e,t[a],r);i[s++]=f,e=f}return i.length=s,i}function Lz(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const f=C_(n,e,t[a],r,i[s]);f.length===0&&(f[0]=e),i[s++]=f,e=f[f.length-1]}return i.length=s,i}class G2 extends Fz{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ul),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ds(e[t],uo.CHANGE,this.changed,this))}clone(){const e=new G2(X4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<t1(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){ov(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)mz(e,t[r].getExtent());return e}getGeometries(){return X4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],f=o.getSimplifiedGeometry(e);t.push(f),f!==o&&(i=!0)}return i?new G2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Hf(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(X4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function X4(n){return n.map(e=>e.clone())}function Uz(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,f=0;for(;e<t;e+=r){const y=n[e]-s,x=n[e+1]-a;i+=f*y-o*x,o=y,f=x}return i/2}function zz(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=Uz(n,e,o,r),e=o}return i}function pee(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=zz(n,e,o,r),e=o[o.length-1]}return i}function K9(n,e,t,r,i,s,a){const o=n[e],f=n[e+1],y=n[t]-o,x=n[t+1]-f;let B;if(y===0&&x===0)B=e;else{const O=((i-o)*y+(s-f)*x)/(y*y+x*x);if(O>1)B=t;else if(O>0){for(let T=0;T<r;++T)a[T]=tf(n[e+T],n[t+T],O);a.length=r;return}else B=e}for(let O=0;O<r;++O)a[O]=n[B+O];a.length=r}function W8(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],f=n[e+1],y=jg(s,a,o,f);y>i&&(i=y),s=o,a=f}return i}function G8(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=W8(n,e,o,r,i),e=o}return i}function mee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=G8(n,e,o,r,i),e=o[o.length-1]}return i}function Q8(n,e,t,r,i,s,a,o,f,y,x){if(e==t)return y;let B,O;if(i===0){if(O=jg(a,o,n[e],n[e+1]),O<y){for(B=0;B<r;++B)f[B]=n[e+B];return f.length=r,O}return y}x=x||[NaN,NaN];let T=e+r;for(;T<t;)if(K9(n,T-r,T,r,a,o,x),O=jg(a,o,x[0],x[1]),O<y){for(y=O,B=0;B<r;++B)f[B]=x[B];f.length=r,T+=r}else T+=r*Math.max((Math.sqrt(O)-Math.sqrt(y))/i|0,1);if(s&&(K9(n,t-r,e,r,a,o,x),O=jg(a,o,x[0],x[1]),O<y)){for(y=O,B=0;B<r;++B)f[B]=x[B];f.length=r}return y}function q8(n,e,t,r,i,s,a,o,f,y,x){x=x||[NaN,NaN];for(let B=0,O=t.length;B<O;++B){const T=t[B];y=Q8(n,e,T,r,i,s,a,o,f,y,x),e=T}return y}function gee(n,e,t,r,i,s,a,o,f,y,x){x=x||[NaN,NaN];for(let B=0,O=t.length;B<O;++B){const T=t[B];y=q8(n,e,T,r,i,s,a,o,f,y,x),e=T[T.length-1]}return y}function D0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function WC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const f=t[a];i[s++]=D0(n,e,f,r,i[s]),e=f}return i.length=s,i}function dB(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const f=t[a];i[s++]=f.length===1&&f[0]===e?[]:WC(n,e,f,r,i[s]),e=f[f.length-1]}return i.length=s,i}class GC extends r1{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new GC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<t1(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(W8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Q8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return Uz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return D0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Jx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new GC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=i3(this.flatCoordinates,0,e,this.stride),this.changed()}}function jz(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function o3(n,e,t,r,i,s){return s=s??gz(Vf(),n,e,t,r),Fu(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:jz(n,e,t,r,function(a,o){return yJ(i,a,o)}):!1}function yee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(o3(n,e,t[s],r,i))return!0;e=t[s]}return!1}function Nz(n,e,t,r,i){return!!(o3(n,e,t,r,i)||Kg(n,e,t,r,i[0],i[1])||Kg(n,e,t,r,i[0],i[3])||Kg(n,e,t,r,i[2],i[1])||Kg(n,e,t,r,i[2],i[3]))}function Wz(n,e,t,r,i){if(!Nz(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(CJ(n,t[s-1],t[s],r,i)&&!o3(n,t[s-1],t[s],r,i))return!1;return!0}function vee(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(Wz(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function Gz(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const f=n[o],y=n[o+1];a+=Math.sqrt((f-i)*(f-i)+(y-s)*(y-s)),i=f,s=y}return a}class Vg extends r1{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){um(this.flatCoordinates,e),this.changed()}clone(){const e=new Vg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<t1(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(W8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Q8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return jz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,iB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return D0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return U2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Gz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Jx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Vg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return o3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=i3(this.flatCoordinates,0,e,this.stride),this.changed()}}class QC extends r1{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let f=0,y=i.length;f<y;++f){const x=i[f];um(s,x.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){um(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new QC(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<t1(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(G8(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),q8(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,bJ(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return WC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Vg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const f=t[a],y=new Vg(e.slice(s,f),r);i.push(y),s=f}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const f=i[a],y=U2(t,r,f,s,.5);um(e,y),r=f}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=Sz(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new QC(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return yee(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=C_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Hg extends r1{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Hg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=jg(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let f=0;f<o;++f)r[f]=s[f];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return pz(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return E8(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fee(this.flatCoordinates,0,e,this.stride),this.changed()}}class __ extends r1{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){um(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new __(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<t1(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,f=s.length;o<f;o+=a){const y=jg(e,t,s[o],s[o+1]);if(y<i){i=y;for(let x=0;x<a;++x)r[x]=s[o+x];r.length=a}}return i}getCoordinates(){return D0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Hg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new Hg(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(E8(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=i3(this.flatCoordinates,0,e,this.stride),this.changed()}}class Zm extends r1{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?um(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Zm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<t1(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(G8(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),q8(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return O8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return zz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),z2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,WC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Hf(this.getExtent());this.flatInteriorPoint_=I8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Hg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new GC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const f=r[a],y=new GC(t.slice(s,f),e);i.push(y),s=f}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;T8(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=z2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=P8(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Zm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Wz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=C_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function D9(n){if(n1(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Zm(s,"XY",[s.length])}class qC extends r1{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,f=i.length;o<f;++o){const y=i[o],x=s.length,B=y.getEnds();for(let O=0,T=B.length;O<T;++O)B[O]+=x;um(s,y.getFlatCoordinates()),a.push(B)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;um(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new qC(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<t1(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mee(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return _J(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return pee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),oB(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,dB(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=bz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=xz(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new __(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;wz(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=oB(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=MJ(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new qC(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Zm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const f=r[a].slice(),y=f[f.length-1];if(s!==0)for(let B=0,O=f.length;B<O;++B)f[B]-=s;const x=new Zm(t.slice(s,y),e,f);i.push(x),s=y}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return vee(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=Lz(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const R9=_h();class pd{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?pz(this.flatCoordinates_):B8(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Hf(this.getExtent());this.flatInteriorPoints_=I8(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Mz(this.flatCoordinates_,this.ends_),t=bz(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=xz(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=U2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=U2(e,t,a,2,.5);um(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ma(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=lA(r)/lA(t);dm(R9,r[0],r[3],i,-i,0,0,0),G0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,R9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new pd(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=az((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Jx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Sz(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=P8(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new pd(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}pd.prototype.getFlatCoordinates=pd.prototype.getOrientedFlatCoordinates;class R0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new R0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class nf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=F9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new nf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=F9,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Cee(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Js(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let J4=null;function Qz(n,e){if(!J4){const t=new jm({color:"rgba(255,255,255,0.4)"}),r=new R0({color:"#3399CC",width:1.25});J4=[new nf({image:new g_({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return J4}function F9(n){return n.getGeometry()}const _ee="#333";class s3{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=md(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new jm({color:_ee}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new s3({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=md(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Nr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},yh={ADD:"add",REMOVE:"remove"},L9={LENGTH:"length"};class xb extends Ip{constructor(e,t,r){super(e),this.element=t,this.index=r}}class sm extends kp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(L9.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new xb(yh.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new xb(yh.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new xb(yh.REMOVE,i,e)),this.dispatchEvent(new xb(yh.ADD,t,e))}updateLength_(){this.set(L9.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const qf={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class qz{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class bee extends qz{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?C8(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=_h()}drawImages_(e,t,r,i){if(!this.image_)return;const s=G0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,f=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=f*this.imageOpacity_);let y=this.imageRotation_;this.transformRotation_===0&&(y-=this.viewRotation_),this.imageRotateWithView_&&(y+=this.viewRotation_);for(let x=0,B=s.length;x<B;x+=2){const O=s[x]-this.imageAnchorX_,T=s[x+1]-this.imageAnchorY_;if(y!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const F=O+this.imageAnchorX_,j=T+this.imageAnchorY_;dm(o,F,j,1,1,y,-F,-j),a.save(),a.transform.apply(a,o),a.translate(F,j),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,O,T,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=f)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=G0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const f=s[t]+this.textOffsetX_,y=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(f-this.textOffsetX_,y-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,f,y),this.textFillState_&&a.fillText(this.text_,f,y))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=G0(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let f=o.length;s&&(f-=2);for(let y=2;y<f;y+=2)a.lineTo(o[y],o[y+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Fu(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=hee(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Fu(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Fu(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let f=0,y=a.length;f<y;++f)s=this.moveToLineTo_(i,s,a[f],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Fu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Fu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,f=s.length;o<f;++o){const y=s[o];i=this.drawRings_(r,i,y,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),H0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:UC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:rm(r||gh)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),f=t.getWidth(),y=t.getMiterLimit(),x=s||Qm;this.strokeState_={lineCap:i!==void 0?i:Yy,lineDash:this.pixelRatio_===1?x:x.map(B=>B*this.pixelRatio_),lineDashOffset:(a||qm)*this.pixelRatio_,lineJoin:o!==void 0?o:$y,lineWidth:(f!==void 0?f:zC)*this.pixelRatio_,miterLimit:y!==void 0?y:FC,strokeStyle:rm(r||LC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const T=t.getColor();this.textFillState_={fillStyle:rm(T||gh)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const T=r.getColor(),F=r.getLineCap(),j=r.getLineDash(),N=r.getLineDashOffset(),q=r.getLineJoin(),H=r.getWidth(),oe=r.getMiterLimit();this.textStrokeState_={lineCap:F!==void 0?F:Yy,lineDash:j||Qm,lineDashOffset:N||qm,lineJoin:q!==void 0?q:$y,lineWidth:H!==void 0?H:zC,miterLimit:oe!==void 0?oe:FC,strokeStyle:rm(T||LC)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),f=e.getRotation(),y=e.getScaleArray(),x=e.getText(),B=e.getTextAlign(),O=e.getTextBaseline();this.textState_={font:i!==void 0?i:Az,textAlign:B!==void 0?B:UC,textBaseline:O!==void 0?O:D2},this.text_=x!==void 0?Array.isArray(x)?x.reduce((T,F,j)=>T+=j%2?" ":F,""):x:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=f!==void 0?f:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}}}const xee=.5,Yz={Point:kee,LineString:Bee,Polygon:Pee,MultiPoint:Tee,MultiLineString:Oee,MultiPolygon:Iee,GeometryCollection:Eee,Circle:Mee};function wee(n,e){return parseInt(Qo(n),10)-parseInt(Qo(e),10)}function hB(n,e){const t=$z(n,e);return t*t}function $z(n,e){return xee*n/e}function Mee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const f=n.getBuilder(t.getZIndex(),"Circle");f.setFillStrokeStyle(s,a),f.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r)}}function Q2(n,e,t,r,i,s,a,o){const f=[],y=t.getImage();if(y){let O=!0;const T=y.getImageState();T==hi.LOADED||T==hi.ERROR?O=!1:T==hi.IDLE&&y.load(),O&&f.push(y.ready())}const x=t.getFill();x&&x.loading()&&f.push(x.ready());const B=f.length>0;return B&&Promise.all(f).then(()=>i(null)),See(n,e,t,r,s,a,o),B}function See(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const f=o.simplifyTransformed(r,i);if(t.getRenderer())Vz(n,f,t,e,a);else{const x=Yz[f.getType()];x(n,f,t,e,a,s)}}function Vz(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,f=a.length;o<f;++o)Vz(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function Eee(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,f;for(o=0,f=a.length;o<f;++o){const y=Yz[a[o].getType()];y(n,a[o],t,r,i,s)}}function Bee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function Oee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function Iee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,a),f.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}function kee(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),f=o&&o.getText(),y=s&&a&&f?{}:void 0;if(a){if(a.getImageState()!=hi.LOADED)return;const x=n.getBuilder(t.getZIndex(),"Image");x.setImageStyle(a,y),x.drawPoint(e,r,i)}if(f){const x=n.getBuilder(t.getZIndex(),"Text");x.setTextStyle(o,y),x.drawText(e,r,i)}}function Tee(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,f=t.getText(),y=f&&f.getText(),x=s&&o&&y?{}:void 0;if(o){if(a.getImageState()!=hi.LOADED)return;const B=n.getBuilder(t.getZIndex(),"Image");B.setImageStyle(a,x),B.drawMultiPoint(e,r,i)}if(y){const B=n.getBuilder(t.getZIndex(),"Text");B.setTextStyle(f,x),B.drawText(e,r,i)}}function Pee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(s,a),f.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o),f.drawText(e,r,i)}}let Kee=!1;function Hz(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=Kee,o.onload=function(f){if(!o.status||o.status>=200&&o.status<300){const y=e.getType();try{let x;y=="text"||y=="json"?x=o.responseText:y=="xml"?x=o.responseXML||o.responseText:y=="arraybuffer"&&(x=o.response),x?s(e.readFeatures(x,{extent:t,featureProjection:i}),e.readProjection(x)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function U9(n,e){return function(t,r,i,s,a){Hz(n,e,t,r,i,(o,f)=>{this.addFeatures(o),s!==void 0&&s(o)},a||Gy)}}function Dee(n,e){return[[-1/0,-1/0,1/0,1/0]]}function Ree(n,e){return[n]}function Zz(n,e,t=0,r=n.length-1,i=Fee){for(;r>t;){if(r-t>600){const f=r-t+1,y=e-t+1,x=Math.log(f),B=.5*Math.exp(2*x/3),O=.5*Math.sqrt(x*B*(f-B)/f)*(y-f/2<0?-1:1),T=Math.max(t,Math.floor(e-y*B/f+O)),F=Math.min(r,Math.floor(e+(f-y)*B/f+O));Zz(n,e,T,F,i)}const s=n[e];let a=t,o=r;for(Dv(n,t,e),i(n[r],s)>0&&Dv(n,t,r);a<o;){for(Dv(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Dv(n,t,o):(o++,Dv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Dv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Fee(n,e){return n<e?-1:n>e?1:0}let Xz=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Mb(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],f=t.leaf?i(o):o;Mb(e,f)&&(t.leaf?r.push(o):t5(e,f)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!Mb(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(Mb(e,a)){if(t.leaf||t5(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=uy([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,f,y;for(;r||s.length;){if(r||(r=s.pop(),f=s[s.length-1],o=a.pop(),y=!0),r.leaf){const x=Lee(e,r.children,t);if(x!==-1)return r.children.splice(x,1),s.push(r),this._condense(s),this}!y&&!r.leaf&&t5(r,i)?(s.push(r),a.push(o),o=0,f=r,r=r.children[0]):f?(o++,r=f.children[o],y=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=uy(e.slice(t,r+1)),k1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=uy([]),o.leaf=!1,o.height=i;const f=Math.ceil(s/a),y=f*Math.ceil(Math.sqrt(a));z9(e,t,r,y,this.compareMinX);for(let x=t;x<=r;x+=y){const B=Math.min(x+y-1,r);z9(e,x,B,f,this.compareMinY);for(let O=x;O<=B;O+=f){const T=Math.min(O+f-1,B);o.children.push(this._build(e,O,T,i-1))}}return k1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let f=0;f<t.children.length;f++){const y=t.children[f],x=e5(y),B=jee(e,y)-x;B<a?(a=B,s=x<s?x:s,o=y):B===a&&x<s&&(s=x,o=y)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Hv(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=uy(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,k1(r,this.toBBox),k1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=uy([e,t]),this.data.height=e.height+1,this.data.leaf=!1,k1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const f=Vv(e,0,o,this.toBBox),y=Vv(e,o,r,this.toBBox),x=Nee(f,y),B=e5(f)+e5(y);x<s?(s=x,i=o,a=B<a?B:a):x===s&&B<a&&(a=B,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:Uee,s=e.leaf?this.compareMinY:zee,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Vv(e,0,t,s),o=Vv(e,r-t,r,s);let f=wb(a)+wb(o);for(let y=t;y<r-t;y++){const x=e.children[y];Hv(a,e.leaf?s(x):x),f+=wb(a)}for(let y=r-t-1;y>=t;y--){const x=e.children[y];Hv(o,e.leaf?s(x):x),f+=wb(o)}return f}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Hv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():k1(e[t],this.toBBox)}};function Lee(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function k1(n,e){Vv(n,0,n.children.length,e,n)}function Vv(n,e,t,r,i){i||(i=uy(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Hv(i,n.leaf?r(a):a)}return i}function Hv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Uee(n,e){return n.minX-e.minX}function zee(n,e){return n.minY-e.minY}function e5(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function wb(n){return n.maxX-n.minX+(n.maxY-n.minY)}function jee(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Nee(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function t5(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Mb(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function uy(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function z9(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;Zz(n,a,e,t,i),s.push(e,a,a,t)}}class j9{constructor(e){this.rbush_=new Xz(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Qo(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],f={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=f,this.items_[Qo(o)]=f}this.rbush_.load(r)}remove(e){const t=Qo(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Qo(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Hm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return $0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Vm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class sv extends kp{constructor(e){super(),this.projection=Ma(e.projection),this.attributions_=N9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=N9(e),this.changed()}setState(e){this.state_=e,this.changed()}}function N9(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const Ff={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class x0 extends Ip{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class o2 extends sv{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Gy,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Js(this.format_,"`format` must be set when `url` is set"),this.loader_=U9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Dee;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new j9:null,this.loadedExtentsRtree_=new j9,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new sm(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Qo(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new x0(Ff.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof pd||(this.featureChangeKeys_[e]=[Ds(t,uo.CHANGE,this.handleFeatureChange_,this),Ds(t,qy.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof pd){const s=this.idIndex_[i];s instanceof pd?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(Js(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],f=Qo(o);this.addToIndex_(f,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],f=Qo(o);this.setupChangeEvents_(f,o);const y=o.getGeometry();if(y){const x=y.getExtent();t.push(x),i.push(o)}else this.nullGeometryFeatures_[f]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(Ff.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new x0(Ff.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Ff.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Ff.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(yh.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(yh.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ul);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new x0(Ff.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof pd||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof pd||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),$0(this.nullGeometryFeatures_)||um(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=_z(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const f=[-1/0,-1/0,1/0,1/0];return t=t||RC,this.featuresRtree_.forEachInExtent(f,function(y){if(t(y)){const x=y.getGeometry(),B=o;if(o=x instanceof pd?0:x.closestPointXY(r,i,a,o),o<B){s=y;const O=Math.sqrt(o);f[0]=r-O,f[1]=i-O,f[2]=r+O,f[3]=i+O}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Qo(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new x0(Ff.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Qo(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&$0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const f=s[a];i.forEachInExtent(f,function(x){return im(x.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new x0(Ff.FEATURESLOADSTART)),this.loader_.call(this,f,t,r,x=>{--this.loadingExtentsCount_,this.dispatchEvent(new x0(Ff.FEATURESLOADEND,void 0,x))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new x0(Ff.FEATURESLOADERROR))}),i.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Hm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Qo(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(ul),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(Ff.REMOVEFEATURE)&&this.dispatchEvent(new x0(Ff.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Js(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(U9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Yl={ANIMATING:0,INTERACTING:1},qi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Sb=[qi.FILL],F0=[qi.STROKE],Rg=[qi.BEGIN_PATH],W9=[qi.CLOSE_PATH];class b_ extends qz{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,f=e.length;o<f;o+=t)i[0]=e[o],i[1]=e[o+1],$g(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let f=o.length;const y=this.getBufferedMaxExtent();a&&(t+=i);let x=e[t],B=e[t+1];const O=this.tmpCoordinate_;let T=!0,F,j,N;for(F=t+i;F<r;F+=i)O[0]=e[F],O[1]=e[F+1],N=nB(y,O),N!==j?(T&&(o[f++]=x,o[f++]=B,T=!1),o[f++]=O[0],o[f++]=O[1]):N===wc.INTERSECTING?(o[f++]=O[0],o[f++]=O[1],T=!1):T=!0,x=O[0],B=O[1],j=N;return(s&&T||F===t+i)&&(o[f++]=x,o[f++]=B),f}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const f=r[a],y=this.appendFlatLineCoordinates(e,t,f,i,!1,!1);s.push(y),t=f}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),f=this.coordinates.length;let y,x,B,O,T;switch(a){case"MultiPolygon":y=e.getOrientedFlatCoordinates(),O=[];const F=e.getEndss();T=0;for(let j=0,N=F.length;j<N;++j){const q=[];T=this.drawCustomCoordinates_(y,T,F[j],o,q),O.push(q)}this.instructions.push([qi.CUSTOM,f,O,e,r,dB,s]),this.hitDetectionInstructions.push([qi.CUSTOM,f,O,e,i||r,dB,s]);break;case"Polygon":case"MultiLineString":B=[],y=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),T=this.drawCustomCoordinates_(y,0,e.getEnds(),o,B),this.instructions.push([qi.CUSTOM,f,B,e,r,WC,s]),this.hitDetectionInstructions.push([qi.CUSTOM,f,B,e,i||r,WC,s]);break;case"LineString":case"Circle":y=e.getFlatCoordinates(),x=this.appendFlatLineCoordinates(y,0,y.length,o,!1,!1),this.instructions.push([qi.CUSTOM,f,x,e,r,D0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,f,x,e,i||r,D0,s]);break;case"MultiPoint":y=e.getFlatCoordinates(),x=this.appendFlatPointCoordinates(y,o),x>f&&(this.instructions.push([qi.CUSTOM,f,x,e,r,D0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,f,x,e,i||r,D0,s]));break;case"Point":y=e.getFlatCoordinates(),this.coordinates.push(y[0],y[1]),x=this.coordinates.length,this.instructions.push([qi.CUSTOM,f,x,e,r,void 0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,f,x,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==qi.END_GEOMETRY?a=t:s==qi.BEGIN_GEOMETRY&&(i[2]=t,ZX(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=rm(r||gh)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=rm(r||LC);const i=e.getLineCap();t.lineCap=i!==void 0?i:Yy;const s=e.getLineDash();t.lineDash=s?s.slice():Qm;const a=e.getLineDashOffset();t.lineDashOffset=a||qm;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:$y;const f=e.getWidth();t.lineWidth=f!==void 0?f:zC;const y=e.getMiterLimit();t.miterLimit=y!==void 0?y:FC,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[qi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[qi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,f=e.lineWidth,y=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!H0(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=f||e.currentMiterLimit!=y)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=f,e.currentMiterLimit=y)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[qi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=fz(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;W0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Wee extends b_{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!$g(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let f=0,y=i.length;f<y;f+=e.getStride())(!this.maxExtent||$g(this.maxExtent,i.slice(f,f+2)))&&s.push(i[f],i[f+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class Gee extends b_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[qi.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Qm,qm],Rg);const o=e.getFlatCoordinates(),f=e.getStride();this.drawFlatCoordinates_(o,0,o.length,f),this.hitDetectionInstructions.push(F0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Qm,qm],Rg);const o=e.getEnds(),f=e.getFlatCoordinates(),y=e.getStride();let x=0;for(let B=0,O=o.length;B<O;++B)x=this.drawFlatCoordinates_(f,x,o[B],y);this.hitDetectionInstructions.push(F0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(F0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(F0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Rg)}}class G9 extends b_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,f=r.length;this.instructions.push(Rg),this.hitDetectionInstructions.push(Rg);for(let y=0;y<f;++y){const x=r[y],B=this.coordinates.length,O=this.appendFlatLineCoordinates(e,t,x,i,!0,!o),T=[qi.MOVE_TO_LINE_TO,B,O];this.instructions.push(T),this.hitDetectionInstructions.push(T),o&&(this.instructions.push(W9),this.hitDetectionInstructions.push(W9)),t=x}return a&&(this.instructions.push(Sb),this.hitDetectionInstructions.push(Sb)),o&&(this.instructions.push(F0),this.hitDetectionInstructions.push(F0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,gh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Qm,qm]);const o=e.getFlatCoordinates(),f=e.getStride(),y=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,f,!1,!1);const x=[qi.CIRCLE,y];this.instructions.push(Rg,x),this.hitDetectionInstructions.push(Rg,x),i.fillStyle!==void 0&&(this.instructions.push(Sb),this.hitDetectionInstructions.push(Sb)),i.strokeStyle!==void 0&&(this.instructions.push(F0),this.hitDetectionInstructions.push(F0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,gh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Qm,qm]);const o=e.getEnds(),f=e.getOrientedFlatCoordinates(),y=e.getStride();this.drawFlatCoordinatess_(f,0,o,y),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,gh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Qm,qm]);const o=e.getEndss(),f=e.getOrientedFlatCoordinates(),y=e.getStride();let x=0;for(let B=0,O=o.length;B<O;++B)x=this.drawFlatCoordinatess_(f,x,o[B],y);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=Sg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Qee(n,e,t,r,i){const s=[];let a=t,o=0,f=e.slice(t,2);for(;o<n&&a+i<r;){const[y,x]=f.slice(-2),B=e[a+i],O=e[a+i+1],T=Math.sqrt((B-y)*(B-y)+(O-x)*(O-x));if(o+=T,o>=n){const F=(n-o+T)/T,j=tf(y,B,F),N=tf(x,O,F);f.push(j,N),s.push(f),f=[j,N],o==n&&(a+=i),o=0}else if(o<n)f.push(e[a+i],e[a+i+1]),a+=i;else{const F=T-o,j=tf(y,B,F/T),N=tf(x,O,F/T);f.push(j,N),s.push(f),f=[j,N],o=0,a+=i}}return o>0&&s.push(f),s}function qee(n,e,t,r,i){let s=t,a=t,o=0,f=0,y=t,x,B,O,T,F,j,N,q,H,oe;for(B=t;B<r;B+=i){const ne=e[B],$=e[B+1];F!==void 0&&(H=ne-F,oe=$-j,T=Math.sqrt(H*H+oe*oe),N!==void 0&&(f+=O,x=Math.acos((N*H+q*oe)/(O*T)),x>n&&(f>o&&(o=f,s=y,a=B),f=0,y=B-i)),O=T,N=H,q=oe),F=ne,j=$}return f+=T,f>o?[y,B]:[s,a]}const q2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Yee extends b_{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[gh]={fillStyle:gh},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let f=o.length;const y=e.getType();let x=null,B=e.getStride();if(a.placement==="line"&&(y=="LineString"||y=="MultiLineString"||y=="Polygon"||y=="MultiPolygon")){if(!Fu(this.maxExtent,e.getExtent()))return;let O;if(x=e.getFlatCoordinates(),y=="LineString")O=[x.length];else if(y=="MultiLineString")O=e.getEnds();else if(y=="Polygon")O=e.getEnds().slice(0,1);else if(y=="MultiPolygon"){const N=e.getEndss();O=[];for(let q=0,H=N.length;q<H;++q)O.push(N[q][0])}this.beginGeometry(e,t,r);const T=a.repeat,F=T?void 0:a.textAlign;let j=0;for(let N=0,q=O.length;N<q;++N){let H;T?H=Qee(T*this.resolution,x,j,O[N],B):H=[x.slice(j,O[N])];for(let oe=0,ne=H.length;oe<ne;++oe){const $=H[oe];let te=0,G=$.length;if(F==null){const he=qee(a.maxAngle,$,0,$.length,2);te=he[0],G=he[1]}for(let he=te;he<G;he+=B)o.push($[he],$[he+1]);const ie=o.length;j=O[N],this.drawChars_(f,ie),f=ie}}this.endGeometry(t)}else{let O=a.overflow?null:[];switch(y){case"Point":case"MultiPoint":x=e.getFlatCoordinates();break;case"LineString":x=e.getFlatMidpoint();break;case"Circle":x=e.getCenter();break;case"MultiLineString":x=e.getFlatMidpoints(),B=2;break;case"Polygon":x=e.getFlatInteriorPoint(),a.overflow||O.push(x[2]/this.resolution),B=3;break;case"MultiPolygon":const ne=e.getFlatInteriorPoints();x=[];for(let $=0,te=ne.length;$<te;$+=3)a.overflow||O.push(ne[$+2]/this.resolution),x.push(ne[$],ne[$+1]);if(x.length===0)return;B=2;break}const T=this.appendFlatPointCoordinates(x,B);if(T===f)return;if(O&&(T-f)/2!==x.length/B){let ne=f/2;O=O.filter(($,te)=>{const G=o[(ne+te)*2]===x[te*B]&&o[(ne+te)*2+1]===x[te*B+1];return G||--ne,G})}this.saveTextStates_();const F=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,j=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let N=a.padding;if(N!=Pg&&(a.scale[0]<0||a.scale[1]<0)){let ne=a.padding[0],$=a.padding[1],te=a.padding[2],G=a.padding[3];a.scale[0]<0&&($=-$,G=-G),a.scale[1]<0&&(ne=-ne,te=-te),N=[ne,$,te,G]}const q=this.pixelRatio;this.instructions.push([qi.DRAW_IMAGE,f,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,N==Pg?Pg:N.map(function(ne){return ne*q}),F,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]);const H=1/q,oe=F?F.slice(0):null;oe&&(oe[1]=gh),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,f,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[H,H],NaN,this.declutterMode_,this.declutterImageWithText_,N,oe,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?gh:this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||UC,justify:t.justify,textBaseline:t.textBaseline||D2,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const f=this.pixelRatio,y=q2[i.textBaseline],x=this.textOffsetY_*f,B=this.text_,O=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([qi.DRAW_CHARS,e,t,y,i.overflow,o,i.maxAngle,f,x,s,O*f,B,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([qi.DRAW_CHARS,e,t,y,i.overflow,o&&gh,i.maxAngle,f,x,s,O*f,B,a,1/f,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=rm(a.getColor()||gh)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const j=o.getLineDash(),N=o.getLineDashOffset(),q=o.getWidth(),H=o.getMiterLimit();s.lineCap=o.getLineCap()||Yy,s.lineDash=j?j.slice():Qm,s.lineDashOffset=N===void 0?qm:N,s.lineJoin=o.getLineJoin()||$y,s.lineWidth=q===void 0?zC:q,s.miterLimit=H===void 0?FC:H,s.strokeStyle=rm(o.getColor()||LC)}r=this.textState_;const f=e.getFont()||Az;cz(f);const y=e.getScaleArray();r.overflow=e.getOverflow(),r.font=f,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||D2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Pg,r.scale=y===void 0?[1,1]:y;const x=e.getOffsetX(),B=e.getOffsetY(),O=e.getRotateWithView(),T=e.getKeepUpright(),F=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=x===void 0?0:x,this.textOffsetY_=B===void 0?0:B,this.textRotateWithView_=O===void 0?!1:O,this.textKeepUpright_=T===void 0?!0:T,this.textRotation_=F===void 0?0:F,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Qo(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Qo(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const $ee={Circle:G9,Default:b_,Image:Wee,LineString:Gee,Polygon:G9,Text:Yee};class Jz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=$ee[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function Vee(n,e,t,r,i,s,a,o,f,y,x,B,O=!0){let T=n[e],F=n[e+1],j=0,N=0,q=0,H=0;function oe(){j=T,N=F,e+=r,T=n[e],F=n[e+1],H+=q,q=Math.sqrt((T-j)*(T-j)+(F-N)*(F-N))}do oe();while(e<t-r&&H+q<s);let ne=q===0?0:(s-H)/q;const $=tf(j,T,ne),te=tf(N,F,ne),G=e-r,ie=H,he=s+o*f(y,i,x);for(;e<t-r&&H+q<he;)oe();ne=q===0?0:(he-H)/q;const pe=tf(j,T,ne),Ee=tf(N,F,ne);let me=!1;if(O)if(B){const Ze=[$,te,pe,Ee];Ez(Ze,0,4,2,B,Ze,Ze),me=Ze[0]>Ze[2]}else me=$>pe;const Se=Math.PI,De=[],be=G+r===e;e=G,q=0,H=ie,T=n[e],F=n[e+1];let at;if(be){oe(),at=Math.atan2(F-N,T-j),me&&(at+=at>0?-Se:Se);const Ze=(pe+$)/2,Je=(Ee+te)/2;return De[0]=[Ze,Je,(he-s)/2,at,i],De}i=i.replace(/\n/g," ");for(let Ze=0,Je=i.length;Ze<Je;){oe();let We=Math.atan2(F-N,T-j);if(me&&(We+=We>0?-Se:Se),at!==void 0){let gt=We-at;if(gt+=gt>Se?-2*Se:gt<-Se?2*Se:0,Math.abs(gt)>a)return null}at=We;const Me=Ze;let Fe=0;for(;Ze<Je;++Ze){const gt=me?Je-Ze-1:Ze,Lt=o*f(y,i[gt],x);if(e+r<t&&H+q<s+Fe+Lt/2)break;Fe+=Lt}if(Ze===Me)continue;const He=me?i.substring(Je-Me,Je-Ze):i.substring(Me,Ze);ne=q===0?0:(s+Fe/2-H)/q;const bt=tf(j,T,ne),Yt=tf(N,F,ne);De.push([bt,Yt,Fe/2,We,He]),s+=Fe}return De}class Y8{constructor(){Pn(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(P2(),{get:(e,t)=>{if(typeof P2()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const T1=Vf(),w0=[],Pm=[],Km=[],M0=[];function Q9(n){return n[3].declutterBox}const q9=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function n5(n,e){return e==="start"?e=q9.test(n)?"right":"left":e==="end"&&(e=q9.test(n)?"left":"right"),q2[e]}function Hee(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class Zee{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=_h(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new Y8:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,f=this.textStates[t],y=this.pixelRatio,x=[f.scale[0]*y,f.scale[1]*y],B=f.justify?q2[f.justify]:n5(Array.isArray(e)?e[0]:e,f.textAlign||UC),O=i&&a.lineWidth?a.lineWidth:0,T=Array.isArray(e)?e:String(e).split(`
`).reduce(Hee,[]),{width:F,height:j,widths:N,heights:q,lineWidths:H}=uJ(f,T),oe=F+O,ne=[],$=(oe+2)*x[0],te=(j+O)*x[1],G={width:$<0?Math.floor($):Math.ceil($),height:te<0?Math.floor(te):Math.ceil(te),contextInstructions:ne};(x[0]!=1||x[1]!=1)&&ne.push("scale",x),i&&(ne.push("strokeStyle",a.strokeStyle),ne.push("lineWidth",O),ne.push("lineCap",a.lineCap),ne.push("lineJoin",a.lineJoin),ne.push("miterLimit",a.miterLimit),ne.push("setLineDash",[a.lineDash]),ne.push("lineDashOffset",a.lineDashOffset)),r&&ne.push("fillStyle",o.fillStyle),ne.push("textBaseline","middle"),ne.push("textAlign","center");const ie=.5-B;let he=B*oe+ie*O;const pe=[],Ee=[];let me=0,Se=0,De=0,be=0,at;for(let Ze=0,Je=T.length;Ze<Je;Ze+=2){const We=T[Ze];if(We===`
`){Se+=me,me=0,he=B*oe+ie*O,++be;continue}const Me=T[Ze+1]||f.font;Me!==at&&(i&&pe.push("font",Me),r&&Ee.push("font",Me),at=Me),me=Math.max(me,q[De]);const Fe=[We,he+ie*N[De]+B*(N[De]-H[be]),.5*(O+me)+Se];he+=N[De],i&&pe.push("strokeText",Fe),r&&Ee.push("fillText",Fe),++De}return Array.prototype.push.apply(ne,pe),Array.prototype.push.apply(ne,Ee),this.labels_[s]=G,G}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,f,y,x,B,O,T,F,j,N){o*=O[0],f*=O[1];let q=r-o,H=i-f;const oe=s+y>e?e-y:s,ne=a+x>t?t-x:a,$=F[3]+oe*O[0]+F[1],te=F[0]+ne*O[1]+F[2],G=q-F[3],ie=H-F[0];(j||B!==0)&&(w0[0]=G,M0[0]=G,w0[1]=ie,Pm[1]=ie,Pm[0]=G+$,Km[0]=Pm[0],Km[1]=ie+te,M0[1]=Km[1]);let he;return B!==0?(he=dm(_h(),r,i,1,1,B,-r,-i),EA(he,w0),EA(he,Pm),EA(he,Km),EA(he,M0),Vm(Math.min(w0[0],Pm[0],Km[0],M0[0]),Math.min(w0[1],Pm[1],Km[1],M0[1]),Math.max(w0[0],Pm[0],Km[0],M0[0]),Math.max(w0[1],Pm[1],Km[1],M0[1]),T1)):Vm(Math.min(G,G+$),Math.min(ie,ie+te),Math.max(G,G+$),Math.max(ie,ie+te),T1),T&&(q=Math.round(q),H=Math.round(H)),{drawImageX:q,drawImageY:H,drawImageW:oe,drawImageH:ne,originX:y,originY:x,declutterBox:{minX:T1[0],minY:T1[1],maxX:T1[2],maxY:T1[3],value:N},canvasTransform:he,scale:O}}replayImageOrLabel_(e,t,r,i,s,a,o){const f=!!(a||o),y=i.declutterBox,x=o?o[2]*i.scale[0]/2:0;return y.minX-x<=t[0]&&y.maxX+x>=0&&y.minY-x<=t[1]&&y.maxY+x>=0&&(f&&this.replayTextBackground_(e,w0,Pm,Km,M0,a,o),AJ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=EA(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],f=this.pixelRatio,y=n5(Array.isArray(e)?e[0]:e,s.textAlign||UC),x=q2[s.textBaseline||D2],B=o&&o.lineWidth?o.lineWidth:0,O=a.width/f-2*s.scale[0],T=y*O+2*(.5-y)*B,F=x*a.height/f+2*(.5-x)*B;return{label:a,anchorX:T,anchorY:F}}execute_(e,t,r,i,s,a,o,f){const y=this.zIndexContext_;let x;this.pixelCoordinates_&&H0(r,this.renderedTransform_)?x=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),x=G0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),lee(this.renderedTransform_,r));let B=0;const O=i.length;let T=0,F,j,N,q,H,oe,ne,$,te,G,ie,he,pe,Ee=0,me=0;const Se=this.coordinateCache_,De=this.viewRotation_,be=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,at={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:De},Ze=this.instructions!=i||this.overlaps?0:200;let Je,We,Me,Fe;for(;B<O;){const He=i[B];switch(He[0]){case qi.BEGIN_GEOMETRY:Je=He[1],Fe=He[3],Je.getGeometry()?o!==void 0&&!Fu(o,Fe.getExtent())?B=He[2]+1:++B:B=He[2],y&&(y.zIndex=He[4]);break;case qi.BEGIN_PATH:Ee>Ze&&(this.fill_(e),Ee=0),me>Ze&&(e.stroke(),me=0),!Ee&&!me&&(e.beginPath(),H=NaN,oe=NaN),++B;break;case qi.CIRCLE:T=He[1];const Yt=x[T],gt=x[T+1],Lt=x[T+2],Kt=x[T+3],Ue=Lt-Yt,Pe=Kt-gt,Be=Math.sqrt(Ue*Ue+Pe*Pe);e.moveTo(Yt+Be,gt),e.arc(Yt,gt,Be,0,2*Math.PI,!0),++B;break;case qi.CLOSE_PATH:e.closePath(),++B;break;case qi.CUSTOM:T=He[1],F=He[2];const it=He[3],_t=He[4],ft=He[5];at.geometry=it,at.feature=Je,B in Se||(Se[B]=[]);const Ut=Se[B];ft?ft(x,T,F,2,Ut):(Ut[0]=x[T],Ut[1]=x[T+1],Ut.length=2),y&&(y.zIndex=He[6]),_t(Ut,at),++B;break;case qi.DRAW_IMAGE:T=He[1],F=He[2],te=He[3],j=He[4],N=He[5];let rn=He[6];const Dt=He[7],_n=He[8],qn=He[9],tn=He[10];let rr=He[11];const Dn=He[12];let pn=He[13];q=He[14]||"declutter";const Zn=He[15];if(!te&&He.length>=20){G=He[19],ie=He[20],he=He[21],pe=He[22];const Gt=this.drawLabelWithPointPlacement_(G,ie,he,pe);te=Gt.label,He[3]=te;const jt=He[23];j=(Gt.anchorX-jt)*this.pixelRatio,He[4]=j;const xt=He[24];N=(Gt.anchorY-xt)*this.pixelRatio,He[5]=N,rn=te.height,He[6]=rn,pn=te.width,He[13]=pn}let dr;He.length>25&&(dr=He[25]);let vr,Jn,Qe;He.length>17?(vr=He[16],Jn=He[17],Qe=He[18]):(vr=Pg,Jn=null,Qe=null),tn&&be?rr+=De:!tn&&!be&&(rr-=De);let ce=0;for(;T<F;T+=2){if(dr&&dr[ce++]<pn/this.pixelRatio)continue;const Gt=this.calculateImageOrLabelDimensions_(te.width,te.height,x[T],x[T+1],pn,rn,j,N,_n,qn,rr,Dn,s,vr,!!Jn||!!Qe,Je),jt=[e,t,te,Gt,Dt,Jn,Qe];if(f){let xt,Tn,On;if(Zn){const on=F-T;if(!Zn[on]){Zn[on]={args:jt,declutterMode:q};continue}const Rn=Zn[on];xt=Rn.args,Tn=Rn.declutterMode,delete Zn[on],On=Q9(xt)}let gr,Er;if(xt&&(Tn!=="declutter"||!f.collides(On))&&(gr=!0),(q!=="declutter"||!f.collides(Gt.declutterBox))&&(Er=!0),Tn==="declutter"&&q==="declutter"){const on=gr&&Er;gr=on,Er=on}gr&&(Tn!=="none"&&f.insert(On),this.replayImageOrLabel_.apply(this,xt)),Er&&(q!=="none"&&f.insert(Gt.declutterBox),this.replayImageOrLabel_.apply(this,jt))}else this.replayImageOrLabel_.apply(this,jt)}++B;break;case qi.DRAW_CHARS:const fe=He[1],nt=He[2],St=He[3],Ht=He[4];pe=He[5];const sn=He[6],tr=He[7],Oe=He[8];he=He[9];const se=He[10];G=He[11],ie=He[12];const ve=[He[13],He[13]];q=He[14]||"declutter";const p=He[15],Ne=this.textStates[ie],Ye=Ne.font,rt=[Ne.scale[0]*tr,Ne.scale[1]*tr];let ct;Ye in this.widths_?ct=this.widths_[Ye]:(ct={},this.widths_[Ye]=ct);const dt=Gz(x,fe,nt,2),qt=Math.abs(rt[0])*y9(Ye,G,ct);if(Ht||qt<=dt){const Gt=this.textStates[ie].textAlign,jt=(dt-qt)*n5(G,Gt),xt=Vee(x,fe,nt,2,G,jt,sn,Math.abs(rt[0]),y9,Ye,ct,be?0:this.viewRotation_,p);e:if(xt){const Tn=[];let On,gr,Er,on,Rn;if(he)for(On=0,gr=xt.length;On<gr;++On){Rn=xt[On],Er=Rn[4],on=this.createLabel(Er,ie,"",he),j=Rn[2]+(rt[0]<0?-se:se),N=St*on.height+(.5-St)*2*se*rt[1]/rt[0]-Oe;const er=this.calculateImageOrLabelDimensions_(on.width,on.height,Rn[0],Rn[1],on.width,on.height,j,N,0,0,Rn[3],ve,!1,Pg,!1,Je);if(f&&q==="declutter"&&f.collides(er.declutterBox))break e;Tn.push([e,t,on,er,1,null,null])}if(pe)for(On=0,gr=xt.length;On<gr;++On){Rn=xt[On],Er=Rn[4],on=this.createLabel(Er,ie,pe,""),j=Rn[2],N=St*on.height-Oe;const er=this.calculateImageOrLabelDimensions_(on.width,on.height,Rn[0],Rn[1],on.width,on.height,j,N,0,0,Rn[3],ve,!1,Pg,!1,Je);if(f&&q==="declutter"&&f.collides(er.declutterBox))break e;Tn.push([e,t,on,er,1,null,null])}f&&q!=="none"&&f.load(Tn.map(Q9));for(let er=0,Xr=Tn.length;er<Xr;++er)this.replayImageOrLabel_.apply(this,Tn[er])}}++B;break;case qi.END_GEOMETRY:if(a!==void 0){Je=He[1];const Gt=a(Je,Fe,q);if(Gt)return Gt}++B;break;case qi.FILL:Ze?Ee++:this.fill_(e),++B;break;case qi.MOVE_TO_LINE_TO:for(T=He[1],F=He[2],We=x[T],Me=x[T+1],e.moveTo(We,Me),H=We+.5|0,oe=Me+.5|0,T+=2;T<F;T+=2)We=x[T],Me=x[T+1],ne=We+.5|0,$=Me+.5|0,(T==F-2||ne!==H||$!==oe)&&(e.lineTo(We,Me),H=ne,oe=$);++B;break;case qi.SET_FILL_STYLE:this.alignAndScaleFill_=He[2],Ee&&(this.fill_(e),Ee=0,me&&(e.stroke(),me=0)),e.fillStyle=He[1],++B;break;case qi.SET_STROKE_STYLE:me&&(e.stroke(),me=0),this.setStrokeStyle_(e,He),++B;break;case qi.STROKE:Ze?me++:e.stroke(),++B;break;default:++B;break}}Ee&&this.fill_(e),me&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const gy=["Polygon","Circle","LineString","Image","Text","Default"],Y2=["Image","Text"],Xee=gy.filter(n=>!Y2.includes(n));class ej{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=_h(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new Zee(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,f=dm(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),y=!this.hitDetectionContext_;y&&(this.hitDetectionContext_=Lu(o,o,void 0,{willReadFrequently:!0}));const x=this.hitDetectionContext_;x.canvas.width!==o||x.canvas.height!==o?(x.canvas.width=o,x.canvas.height=o):y||x.clearRect(0,0,o,o);let B;this.renderBuffer_!==void 0&&(B=Vf(),yC(B,e),W0(B,t*(this.renderBuffer_+i),B));const O=Jee(i);let T;function F($,te,G){const ie=x.getImageData(0,0,o,o).data;for(let he=0,pe=O.length;he<pe;he++)if(ie[O[he]]>0){if(!a||G==="none"||T!=="Image"&&T!=="Text"||a.includes($)){const Ee=(O[he]-3)/4,me=i-Ee%o,Se=i-(Ee/o|0),De=s($,te,me*me+Se*Se);if(De)return De}x.clearRect(0,0,o,o);break}}const j=Object.keys(this.executorsByZIndex_).map(Number);j.sort(Gm);let N,q,H,oe,ne;for(N=j.length-1;N>=0;--N){const $=j[N].toString();for(H=this.executorsByZIndex_[$],q=gy.length-1;q>=0;--q)if(T=gy[q],oe=H[T],oe!==void 0&&(ne=oe.executeHitDetection(x,f,r,F,B),ne))return ne}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return G0(o,0,8,2,e,o),o}isEmpty(){return $0(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(o?HX:Gm),a=a||gy;const y=gy.length;for(let x=0,B=f.length;x<B;++x){const O=f[x].toString(),T=this.executorsByZIndex_[O];for(let F=0,j=a.length;F<j;++F){const N=a[F],q=T[N];if(q!==void 0){const H=o===null?void 0:q.getZIndexContext(),oe=H?H.getContext():e,ne=this.maxExtent_&&N!=="Image"&&N!=="Text";if(ne&&(oe.save(),this.clip(oe,r)),!H||N==="Text"||N==="Image"?q.execute(oe,t,r,i,s,o):H.pushFunction($=>q.execute($,t,r,i,s,o)),ne&&oe.restore(),H){H.offset();const $=f[x]*y+F;this.deferredZIndexContexts_[$]||(this.deferredZIndexContexts_[$]=[]),this.deferredZIndexContexts_[$].push(H)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Gm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const r5={};function Jee(n){if(r5[n]!==void 0)return r5[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let f=r[o];f||(f=[],r[o]=f),f.push(((n+s)*e+(n+a))*4+3),s>0&&f.push(((n-s)*e+(n+a))*4+3),a>0&&(f.push(((n+s)*e+(n-a))*4+3),s>0&&f.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return r5[n]=i,i}const sf=.5;function tj(n,e,t,r,i,s,a,o,f){const y=f?z8(i):i,x=n[0]*sf,B=n[1]*sf,O=Lu(x,B);O.imageSmoothingEnabled=!1;const T=O.canvas,F=new bee(O,sf,i,null,a,o,f?v_(see(),f):null),j=t.length,N=Math.floor((256*256*256-1)/j),q={};for(let oe=1;oe<=j;++oe){const ne=t[oe-1],$=ne.getStyleFunction()||r;if(!$)continue;let te=$(ne,s);if(!te)continue;Array.isArray(te)||(te=[te]);const ie=(oe*N).toString(16).padStart(7,"#00000");for(let he=0,pe=te.length;he<pe;++he){const Ee=te[he],me=Ee.getGeometryFunction()(ne);if(!me||!Fu(y,me.getExtent()))continue;const Se=Ee.clone(),De=Se.getFill();De&&De.setColor(ie);const be=Se.getStroke();be&&(be.setColor(ie),be.setLineDash(null)),Se.setText(void 0);const at=Ee.getImage();if(at){const Me=at.getImageSize();if(!Me)continue;const Fe=Lu(Me[0],Me[1],void 0,{alpha:!1}),He=Fe.canvas;Fe.fillStyle=ie,Fe.fillRect(0,0,He.width,He.height),Se.setImage(new F2({img:He,anchor:at.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:at.getOrigin(),opacity:1,size:at.getSize(),scale:at.getScale(),rotation:at.getRotation(),rotateWithView:at.getRotateWithView()}))}const Ze=Se.getZIndex()||0;let Je=q[Ze];Je||(Je={},q[Ze]=Je,Je.Polygon=[],Je.Circle=[],Je.LineString=[],Je.Point=[]);const We=me.getType();if(We==="GeometryCollection"){const Me=me.getGeometriesArrayRecursive();for(let Fe=0,He=Me.length;Fe<He;++Fe){const bt=Me[Fe];Je[bt.getType().replace("Multi","")].push(bt,Se)}}else Je[We.replace("Multi","")].push(me,Se)}}const H=Object.keys(q).map(Number).sort(Gm);for(let oe=0,ne=H.length;oe<ne;++oe){const $=q[H[oe]];for(const te in $){const G=$[te];for(let ie=0,he=G.length;ie<he;ie+=2){F.setStyle(G[ie+1]);for(let pe=0,Ee=e.length;pe<Ee;++pe)F.setTransform(e[pe]),F.drawGeometry(G[ie])}}}return O.getImageData(0,0,T.width,T.height)}function nj(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*sf),s=Math.floor(Math.round(n[1])*sf),a=(BA(i,0,t.width-1)+BA(s,0,t.height-1)*t.width)*4,o=t.data[a],f=t.data[a+1],x=t.data[a+2]+256*(f+256*o),B=Math.floor((256*256*256-1)/e.length);x&&x%B===0&&r.push(e[x/B-1])}return r}class rj extends Ip{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const ete=5;class tte extends m_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=ete}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return wo()}getData(e){return null}prepareFrame(e){return wo()}renderFrame(e,t){return wo()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===hi.LOADED||t.getState()===hi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=hi.LOADED&&t!=hi.ERROR&&e.addEventListener(uo.CHANGE,this.boundHandleImageChange_),t==hi.IDLE&&(e.load(),t=e.getState()),t==hi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Y9=[];let Ay=null;function nte(){Ay=Lu(1,1,void 0,{willReadFrequently:!0})}class $8 extends tte{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=_h(),this.pixelTransform=_h(),this.inversePixelTransform=_h(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){Ay||nte(),Ay.clearRect(0,0,1,1);let i;try{Ay.drawImage(e,t,r,1,1,0,0,1,1),i=Ay.getImageData(0,0,1,1).data}catch{return Ay=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&H0(Wy(e.style.backgroundColor),Wy(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Lu();const f=a.canvas;s.appendChild(f),o=f.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Xm(r),s=Xx(r),a=Zx(r),o=Hx(r);EA(t.coordinateToPixelTransform,i),EA(t.coordinateToPixelTransform,s),EA(t.coordinateToPixelTransform,a),EA(t.coordinateToPixelTransform,o);const f=this.inversePixelTransform;EA(f,i),EA(f,s),EA(f,a),EA(f,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Rs(r)/i*a),f=Math.round(lA(r)/i*a);dm(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-f/2),Rz(this.inversePixelTransform,this.pixelTransform);const y=cee(this.pixelTransform);if(this.useContainer(t,y,this.getBackground(e)),!this.containerReused){const x=this.context.canvas;x.width!=o||x.height!=f?(x.width=o,x.height=f):this.context.clearRect(0,0,o,f),y!==x.style.transform&&(x.style.transform=y)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new rj(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(qf.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(qf.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Y8),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(qf.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(qf.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const f=s/2,y=a/2,x=i/t,B=-x,O=-e[0]+o,T=-e[1];return dm(this.tempTransform,f,y,x,B,-r,O,T)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class rte extends $8{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Vf(),this.wrappedRenderedExtent_=Vf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,f=s.projection,y=s.rotation,x=f.getExtent(),B=this.getLayer().getSource(),O=this.getLayer().getDeclutter(),T=t.pixelRatio,F=t.viewHints,j=!(F[Yl.ANIMATING]||F[Yl.INTERACTING]),N=this.context,q=Math.round(Rs(i)/o*T),H=Math.round(lA(i)/o*T),oe=B.getWrapX()&&f.canWrapX(),ne=oe?Rs(x):null,$=oe?Math.ceil((i[2]-x[2])/ne)+1:1;let te=oe?Math.floor((i[0]-x[0])/ne):0;do{let G=this.getRenderTransform(a,o,0,T,q,H,te*ne);t.declutter&&(G=G.slice(0)),e.execute(N,[N.canvas.width,N.canvas.height],G,y,j,r===void 0?gy:r?Y2:Xee,r?O&&t.declutter[O]:void 0)}while(++te<$)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Lu(this.context.canvas.width,this.context.canvas.height,Y9))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,d_(this.context),Y9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(qf.PRERENDER)||this.getLayer().hasListener(qf.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const f=om(r.extent);o=Fu(f,e.extent),this.clipped_=o&&!im(f,e.extent),this.clipped_&&this.clipUnrotated(s,e,f)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,f=this.wrappedRenderedExtent_,y=this.getLayer(),x=[],B=r[0]*sf,O=r[1]*sf;x.push(this.getRenderTransform(i,s,a,sf,B,O,0).slice());const T=y.getSource(),F=o.getExtent();if(T.getWrapX()&&o.canWrapX()&&!im(F,f)){let j=f[0];const N=Rs(F);let q=0,H;for(;j<F[0];)--q,H=N*q,x.push(this.getRenderTransform(i,s,a,sf,B,O,H).slice()),j+=N;for(q=0,j=f[2];j>F[2];)++q,H=N*q,x.push(this.getRenderTransform(i,s,a,sf,B,O,H).slice()),j-=N}this.hitDetectionImageData_=tj(r,x,this.renderedFeatures_,y.getStyleFunction(),f,s,a,hB(s,this.renderedPixelRatio_),null)}t(nj(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){var O,T;if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,f=this.getLayer(),y={},x=function(F,j,N){const q=Qo(F),H=y[q];if(H){if(H!==!0&&N<H.distanceSq){if(N===0)return y[q]=!0,s.splice(s.lastIndexOf(H),1),i(F,f,j);H.geometry=j,H.distanceSq=N}}else{if(N===0)return y[q]=!0,i(F,f,j);s.push(y[q]={feature:F,layer:f,geometry:j,distanceSq:N,callback:i})}},B=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,x,B?(T=(O=t.declutter)==null?void 0:O[B])==null?void 0:T.all().map(F=>F.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Yl.ANIMATING],s=e.viewHints[Yl.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=e.extent,y=e.viewState,x=y.projection,B=y.resolution,O=e.pixelRatio,T=t.getRevision(),F=t.getRenderBuffer();let j=t.getRenderOrder();j===void 0&&(j=wee);const N=y.center.slice(),q=W0(f,F*B),H=q.slice(),oe=[q.slice()],ne=x.getExtent();if(r.getWrapX()&&x.canWrapX()&&!im(ne,e.extent)){const De=Rs(ne),be=Math.max(Rs(q)/2,De);q[0]=ne[0]-be,q[2]=ne[2]+be,D8(N,x);const at=Cz(oe[0],x);at[0]<ne[0]&&at[2]<ne[2]?oe.push([at[0]+De,at[1],at[2]+De,at[3]]):at[0]>ne[0]&&at[2]>ne[2]&&oe.push([at[0]-De,at[1],at[2]-De,at[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==T&&this.renderedRenderOrder_==j&&this.renderedFrameDeclutter_===!!e.declutter&&im(this.wrappedRenderedExtent_,q))return H0(this.renderedExtent_,H)||(this.hitDetectionImageData_=null,this.renderedExtent_=H),this.renderedCenter_=N,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const $=new Jz($z(B,O),q,B,O);let te;for(let De=0,be=oe.length;De<be;++De)r.loadFeatures(oe[De],B,x);const G=hB(B,O);let ie=!0;const he=(De,be)=>{let at;const Ze=De.getStyleFunction()||t.getStyleFunction();if(Ze&&(at=Ze(De,B)),at){const Je=this.renderFeature(De,G,at,$,te,this.getLayer().getDeclutter(),be);ie=ie&&!Je}},pe=z8(q),Ee=r.getFeaturesInExtent(pe);j&&Ee.sort(j);for(let De=0,be=Ee.length;De<be;++De)he(Ee[De],De);this.renderedFeatures_=Ee,this.ready=ie;const me=$.finish(),Se=new ej(q,B,O,r.getOverlaps(),me,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=B,this.renderedRevision_=T,this.renderedRenderOrder_=j,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=H,this.wrappedRenderedExtent_=q,this.renderedCenter_=N,this.renderedProjection_=x,this.renderedPixelRatio_=O,this.replayGroup_=Se,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let f=!1;if(Array.isArray(r))for(let y=0,x=r.length;y<x;++y)f=Q2(i,e,r[y],t,this.boundHandleStyleImageChange_,s,a,o)||f;else f=Q2(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return f}}let o1=0;const Qd=1<<o1++,Ts=1<<o1++,vh=1<<o1++,xp=1<<o1++,Zg=1<<o1++,Zv=1<<o1++,Eb=Math.pow(2,o1)-1,V8={[Qd]:"boolean",[Ts]:"number",[vh]:"string",[xp]:"color",[Zg]:"number[]",[Zv]:"size"},ite=Object.keys(V8).map(Number).sort(Gm);function ote(n){return n in V8}function Xv(n){const e=[];for(const t of ite)Jv(n,t)&&e.push(V8[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Jv(n,e){return(n&e)===e}function S0(n,e){return n===e}class XA{constructor(e,t){if(!ote(e))throw new Error(`literal expressions must have a specific type, got ${Xv(e)}`);this.type=e,this.value=t}}class ste{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function ij(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function qc(n,e,t){switch(typeof n){case"boolean":{if(S0(e,vh))return new XA(vh,n?"true":"false");if(!Jv(e,Qd))throw new Error(`got a boolean, but expected ${Xv(e)}`);return new XA(Qd,n)}case"number":{if(S0(e,Zv))return new XA(Zv,md(n));if(S0(e,Qd))return new XA(Qd,!!n);if(S0(e,vh))return new XA(vh,n.toString());if(!Jv(e,Ts))throw new Error(`got a number, but expected ${Xv(e)}`);return new XA(Ts,n)}case"string":{if(S0(e,xp))return new XA(xp,b8(n));if(S0(e,Qd))return new XA(Qd,!!n);if(!Jv(e,vh))throw new Error(`got a string, but expected ${Xv(e)}`);return new XA(vh,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return gte(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(S0(e,Zv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new XA(Zv,n)}if(S0(e,xp)){if(n.length===3)return new XA(xp,[...n,1]);if(n.length===4)return new XA(xp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Jv(e,Zg))throw new Error(`got an array of numbers, but expected ${Xv(e)}`);return new XA(Zg,n)}const Gn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},ate={[Gn.Get]:bo(ts(1,1/0),$9),[Gn.Var]:bo(ts(1,1),lte),[Gn.Has]:bo(ts(1,1/0),$9),[Gn.Id]:bo(ute,P1),[Gn.Concat]:bo(ts(2,1/0),ha(vh)),[Gn.GeometryType]:bo(Ate,P1),[Gn.LineMetric]:bo(P1),[Gn.Resolution]:bo(i5,P1),[Gn.Zoom]:bo(i5,P1),[Gn.Time]:bo(i5,P1),[Gn.Any]:bo(ts(2,1/0),ha(Qd)),[Gn.All]:bo(ts(2,1/0),ha(Qd)),[Gn.Not]:bo(ts(1,1),ha(Qd)),[Gn.Equal]:bo(ts(2,2),ha(Eb)),[Gn.NotEqual]:bo(ts(2,2),ha(Eb)),[Gn.GreaterThan]:bo(ts(2,2),ha(Ts)),[Gn.GreaterThanOrEqualTo]:bo(ts(2,2),ha(Ts)),[Gn.LessThan]:bo(ts(2,2),ha(Ts)),[Gn.LessThanOrEqualTo]:bo(ts(2,2),ha(Ts)),[Gn.Multiply]:bo(ts(2,1/0),V9),[Gn.Coalesce]:bo(ts(2,1/0),V9),[Gn.Divide]:bo(ts(2,2),ha(Ts)),[Gn.Add]:bo(ts(2,1/0),ha(Ts)),[Gn.Subtract]:bo(ts(2,2),ha(Ts)),[Gn.Clamp]:bo(ts(3,3),ha(Ts)),[Gn.Mod]:bo(ts(2,2),ha(Ts)),[Gn.Pow]:bo(ts(2,2),ha(Ts)),[Gn.Abs]:bo(ts(1,1),ha(Ts)),[Gn.Floor]:bo(ts(1,1),ha(Ts)),[Gn.Ceil]:bo(ts(1,1),ha(Ts)),[Gn.Round]:bo(ts(1,1),ha(Ts)),[Gn.Sin]:bo(ts(1,1),ha(Ts)),[Gn.Cos]:bo(ts(1,1),ha(Ts)),[Gn.Atan]:bo(ts(1,2),ha(Ts)),[Gn.Sqrt]:bo(ts(1,1),ha(Ts)),[Gn.Match]:bo(ts(4,1/0),H9,dte),[Gn.Between]:bo(ts(3,3),ha(Ts)),[Gn.Interpolate]:bo(ts(6,1/0),H9,hte),[Gn.Case]:bo(ts(3,1/0),cte,fte),[Gn.In]:bo(ts(2,2),pte),[Gn.Number]:bo(ts(1,1/0),ha(Eb)),[Gn.String]:bo(ts(1,1/0),ha(Eb)),[Gn.Array]:bo(ts(1,1/0),ha(Ts)),[Gn.Color]:bo(ts(1,4),ha(Ts)),[Gn.Band]:bo(ts(1,3),ha(Ts)),[Gn.Palette]:bo(ts(2,2),mte),[Gn.ToString]:bo(ts(1,1),ha(Qd|Ts|vh|xp))};function $9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new XA(Ts,a);break}case"string":{i[s]=new XA(vh,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function lte(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new XA(vh,r)]}function ute(n,e,t){t.featureId=!0}function Ate(n,e,t){t.geometryType=!0}function i5(n,e,t){t.mapState=!0}function P1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function ts(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function V9(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=qc(n[s+1],e,t);i[s]=a}return i}function ha(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=qc(e[a+1],n,r);s[a]=o}return s}}function cte(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function H9(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function dte(n,e,t){const r=n.length-1,i=vh|Ts|Qd,s=qc(n[1],i,t),a=qc(n[n.length-1],e,t),o=new Array(r-2);for(let f=0;f<r-2;f+=2){try{const y=qc(n[f+2],s.type,t);o[f]=y}catch(y){throw new Error(`failed to parse argument ${f+1} of match expression: ${y.message}`)}try{const y=qc(n[f+3],a.type,t);o[f+1]=y}catch(y){throw new Error(`failed to parse argument ${f+2} of match expression: ${y.message}`)}}return[s,...o,a]}function hte(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const f=r[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);i=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new XA(Ts,i);let a;try{a=qc(n[2],Ts,t)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const o=new Array(n.length-3);for(let f=0;f<o.length;f+=2){try{const y=qc(n[f+3],Ts,t);o[f]=y}catch(y){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${y.message}`)}try{const y=qc(n[f+4],e,t);o[f+1]=y}catch(y){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${y.message}`)}}return[s,a,...o]}function fte(n,e,t){const r=qc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=qc(n[s+1],Qd,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=qc(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function pte(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=vh}else i=Ts;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const f=qc(r[o],i,t);s[o]=f}catch(f){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${f.message}`)}return[qc(n[1],i,t),...s]}function mte(n,e,t){let r;try{r=qc(n[1],Ts,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=qc(i[a],xp,t)}catch(f){throw new Error(`failed to parse color at index ${a} in palette expression: ${f.message}`)}if(!(o instanceof XA))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function bo(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new ste(t,i,...s)}}function gte(n,e,t){const r=n[0],i=ate[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function oj(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return oj(n.getGeometries()[0]);default:return""}}function sj(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Jm(n,e,t){const r=qc(n,e,t);return Bp(r)}function Bp(n,e){if(n instanceof XA){if(n.type===xp&&typeof n.value=="string"){const r=b8(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Gn.Number:case Gn.String:case Gn.Coalesce:return yte(n);case Gn.Get:case Gn.Var:case Gn.Has:return vte(n);case Gn.Id:return r=>r.featureId;case Gn.GeometryType:return r=>r.geometryType;case Gn.Concat:{const r=n.args.map(i=>Bp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Gn.Resolution:return r=>r.resolution;case Gn.Any:case Gn.All:case Gn.Between:case Gn.In:case Gn.Not:return _te(n);case Gn.Equal:case Gn.NotEqual:case Gn.LessThan:case Gn.LessThanOrEqualTo:case Gn.GreaterThan:case Gn.GreaterThanOrEqualTo:return Cte(n);case Gn.Multiply:case Gn.Divide:case Gn.Add:case Gn.Subtract:case Gn.Clamp:case Gn.Mod:case Gn.Pow:case Gn.Abs:case Gn.Floor:case Gn.Ceil:case Gn.Round:case Gn.Sin:case Gn.Cos:case Gn.Atan:case Gn.Sqrt:return bte(n);case Gn.Case:return xte(n);case Gn.Match:return wte(n);case Gn.Interpolate:return Mte(n);case Gn.ToString:return Ste(n);default:throw new Error(`Unsupported operator ${t}`)}}function yte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Bp(n.args[s]);switch(t){case Gn.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Gn.Number:case Gn.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function vte(n,e){const r=n.args[0].value;switch(n.operator){case Gn.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,f=s.length;o<f;++o){const x=s[o].value;a=a[x]}return a};case Gn.Var:return i=>i.variables[r];case Gn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,f=s.length;o<f;++o){const x=s[o].value;if(!a||!Object.hasOwn(a,x))return!1;a=a[x]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Cte(n,e){const t=n.operator,r=Bp(n.args[0]),i=Bp(n.args[1]);switch(t){case Gn.Equal:return s=>r(s)===i(s);case Gn.NotEqual:return s=>r(s)!==i(s);case Gn.LessThan:return s=>r(s)<i(s);case Gn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Gn.GreaterThan:return s=>r(s)>i(s);case Gn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function _te(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Bp(n.args[s]);switch(t){case Gn.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Gn.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Gn.Between:return s=>{const a=i[0](s),o=i[1](s),f=i[2](s);return a>=o&&a<=f};case Gn.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Gn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function bte(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Bp(n.args[s]);switch(t){case Gn.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Gn.Divide:return s=>i[0](s)/i[1](s);case Gn.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Gn.Subtract:return s=>i[0](s)-i[1](s);case Gn.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const f=i[2](s);return a>f?f:a};case Gn.Mod:return s=>i[0](s)%i[1](s);case Gn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Gn.Abs:return s=>Math.abs(i[0](s));case Gn.Floor:return s=>Math.floor(i[0](s));case Gn.Ceil:return s=>Math.ceil(i[0](s));case Gn.Round:return s=>Math.round(i[0](s));case Gn.Sin:return s=>Math.sin(i[0](s));case Gn.Cos:return s=>Math.cos(i[0](s));case Gn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Gn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function xte(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Bp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function wte(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Bp(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function Mte(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Bp(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,f;for(let y=2;y<t;y+=2){const x=r[y](i);let B=r[y+1](i);const O=Array.isArray(B);if(O&&(B=zX(B)),x>=a)return y===2?B:O?Ete(s,a,o,f,x,B):eC(s,a,o,f,x,B);o=x,f=B}return f}}function Ste(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Bp(n.args[s]);switch(t){case Gn.ToString:return s=>{const a=i[0](s);return n.args[0].type===xp?x8(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function eC(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,f=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+f*(s-r)}function Ete(n,e,t,r,i,s){if(i-t===0)return r;const o=h9(r),f=h9(s);let y=f[2]-o[2];y>180?y-=360:y<-180&&(y+=360);const x=[eC(n,e,t,o[0],i,f[0]),eC(n,e,t,o[1],i,f[1]),o[2]+eC(n,e,t,0,i,y),eC(n,e,t,r[3],i,s[3])];return ez(jX(x))}function Bte(n){return!0}function Ote(n){const e=ij(),t=Ite(n,e),r=sj();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=oj(i.getGeometry())),t(r)}}function Z9(n){const e=ij(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=fB(n[a],e);const i=sj(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const y=a.getId();y!==void 0?i.featureId=y:i.featureId=null}let f=0;for(let y=0;y<t;++y){const x=r[y](i);x&&(s[f]=x,f+=1)}return s.length=f,s}}function Ite(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?Jm(s.filter,Qd,e):Bte;let o;if(Array.isArray(s.style)){const f=s.style.length;o=new Array(f);for(let y=0;y<f;++y)o[y]=fB(s.style[y],e)}else o=[fB(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const f=r[o].filter;if(f(i)&&!(n[o].else&&a)){a=!0;for(const y of r[o].styles){const x=y(i);x&&s.push(x)}}}return s}}function fB(n,e){const t=YC(n,"",e),r=$C(n,"",e),i=kte(n,e),s=Tte(n,e),a=Ch(n,"z-index",e);if(!t&&!r&&!i&&!s&&!$0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new nf;return function(f){let y=!0;if(t){const x=t(f);x&&(y=!1),o.setFill(x)}if(r){const x=r(f);x&&(y=!1),o.setStroke(x)}if(i){const x=i(f);x&&(y=!1),o.setText(x)}if(s){const x=s(f);x&&(y=!1),o.setImage(x)}return a&&o.setZIndex(a(f)),y?null:o}}function YC(n,e,t){let r;if(e+"fill-pattern-src"in n)r=Rte(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=H8(n,e+"fill-color",t)}if(!r)return null;const i=new jm;return function(s){const a=r(s);return a===_8?null:(i.setColor(a),i)}}function $C(n,e,t){const r=Ch(n,e+"stroke-width",t),i=H8(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Lm(n,e+"stroke-line-cap",t),a=Lm(n,e+"stroke-line-join",t),o=aj(n,e+"stroke-line-dash",t),f=Ch(n,e+"stroke-line-dash-offset",t),y=Ch(n,e+"stroke-miter-limit",t),x=new R0;return function(B){if(i){const O=i(B);if(O===_8)return null;x.setColor(O)}if(r&&x.setWidth(r(B)),s){const O=s(B);if(O!=="butt"&&O!=="round"&&O!=="square")throw new Error("Expected butt, round, or square line cap");x.setLineCap(O)}if(a){const O=a(B);if(O!=="bevel"&&O!=="round"&&O!=="miter")throw new Error("Expected bevel, round, or miter line join");x.setLineJoin(O)}return o&&x.setLineDash(o(B)),f&&x.setLineDashOffset(f(B)),y&&x.setMiterLimit(y(B)),x}}function kte(n,e){const t="text-",r=Lm(n,t+"value",e);if(!r)return null;const i=YC(n,t,e),s=YC(n,t+"background-",e),a=$C(n,t,e),o=$C(n,t+"background-",e),f=Lm(n,t+"font",e),y=Ch(n,t+"max-angle",e),x=Ch(n,t+"offset-x",e),B=Ch(n,t+"offset-y",e),O=Oy(n,t+"overflow",e),T=Lm(n,t+"placement",e),F=Ch(n,t+"repeat",e),j=a3(n,t+"scale",e),N=Oy(n,t+"rotate-with-view",e),q=Ch(n,t+"rotation",e),H=Lm(n,t+"align",e),oe=Lm(n,t+"justify",e),ne=Lm(n,t+"baseline",e),$=Oy(n,t+"keep-upright",e),te=aj(n,t+"padding",e),G=l3(n,t+"declutter-mode"),ie=new s3({declutterMode:G});return function(he){if(ie.setText(r(he)),i&&ie.setFill(i(he)),s&&ie.setBackgroundFill(s(he)),a&&ie.setStroke(a(he)),o&&ie.setBackgroundStroke(o(he)),f&&ie.setFont(f(he)),y&&ie.setMaxAngle(y(he)),x&&ie.setOffsetX(x(he)),B&&ie.setOffsetY(B(he)),O&&ie.setOverflow(O(he)),T){const pe=T(he);if(pe!=="point"&&pe!=="line")throw new Error("Expected point or line for text-placement");ie.setPlacement(pe)}if(F&&ie.setRepeat(F(he)),j&&ie.setScale(j(he)),N&&ie.setRotateWithView(N(he)),q&&ie.setRotation(q(he)),H){const pe=H(he);if(pe!=="left"&&pe!=="center"&&pe!=="right"&&pe!=="end"&&pe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ie.setTextAlign(pe)}if(oe){const pe=oe(he);if(pe!=="left"&&pe!=="right"&&pe!=="center")throw new Error("Expected left, right, or center for text-justify");ie.setJustify(pe)}if(ne){const pe=ne(he);if(pe!=="bottom"&&pe!=="top"&&pe!=="middle"&&pe!=="alphabetic"&&pe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ie.setTextBaseline(pe)}return te&&ie.setPadding(te(he)),$&&ie.setKeepUpright($(he)),ie}}function Tte(n,e){return"icon-src"in n?Pte(n,e):"shape-points"in n?Kte(n,e):"circle-radius"in n?Dte(n,e):null}function Pte(n,e){const t="icon-",r=t+"src",i=lj(n[r],r),s=$2(n,t+"anchor",e),a=a3(n,t+"scale",e),o=Ch(n,t+"opacity",e),f=$2(n,t+"displacement",e),y=Ch(n,t+"rotation",e),x=Oy(n,t+"rotate-with-view",e),B=J9(n,t+"anchor-origin"),O=ek(n,t+"anchor-x-units"),T=ek(n,t+"anchor-y-units"),F=zte(n,t+"color"),j=Lte(n,t+"cross-origin"),N=Ute(n,t+"offset"),q=J9(n,t+"offset-origin"),H=V2(n,t+"width"),oe=V2(n,t+"height"),ne=Fte(n,t+"size"),$=l3(n,t+"declutter-mode"),te=new F2({src:i,anchorOrigin:B,anchorXUnits:O,anchorYUnits:T,color:F,crossOrigin:j,offset:N,offsetOrigin:q,height:oe,width:H,size:ne,declutterMode:$});return function(G){return o&&te.setOpacity(o(G)),f&&te.setDisplacement(f(G)),y&&te.setRotation(y(G)),x&&te.setRotateWithView(x(G)),a&&te.setScale(a(G)),s&&te.setAnchor(s(G)),te}}function Kte(n,e){const t="shape-",r=t+"points",i=t+"radius",s=pB(n[r],r),a=pB(n[i],i),o=YC(n,t,e),f=$C(n,t,e),y=a3(n,t+"scale",e),x=$2(n,t+"displacement",e),B=Ch(n,t+"rotation",e),O=Oy(n,t+"rotate-with-view",e),T=V2(n,t+"radius2"),F=V2(n,t+"angle"),j=l3(n,t+"declutter-mode"),N=new $x({points:s,radius:a,radius2:T,angle:F,declutterMode:j});return function(q){return o&&N.setFill(o(q)),f&&N.setStroke(f(q)),x&&N.setDisplacement(x(q)),B&&N.setRotation(B(q)),O&&N.setRotateWithView(O(q)),y&&N.setScale(y(q)),N}}function Dte(n,e){const t="circle-",r=YC(n,t,e),i=$C(n,t,e),s=Ch(n,t+"radius",e),a=a3(n,t+"scale",e),o=$2(n,t+"displacement",e),f=Ch(n,t+"rotation",e),y=Oy(n,t+"rotate-with-view",e),x=l3(n,t+"declutter-mode"),B=new g_({radius:5,declutterMode:x});return function(O){return s&&B.setRadius(s(O)),r&&B.setFill(r(O)),i&&B.setStroke(i(O)),o&&B.setDisplacement(o(O)),f&&B.setRotation(f(O)),y&&B.setRotateWithView(y(O)),a&&B.setScale(a(O)),B}}function Ch(n,e,t){if(!(e in n))return;const r=Jm(n[e],Ts,t);return function(i){return pB(r(i),e)}}function Lm(n,e,t){if(!(e in n))return null;const r=Jm(n[e],vh,t);return function(i){return lj(r(i),e)}}function Rte(n,e,t){const r=Lm(n,e+"pattern-src",t),i=X9(n,e+"pattern-offset",t),s=X9(n,e+"pattern-size",t),a=H8(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function Oy(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Qd,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function H8(n,e,t){if(!(e in n))return null;const r=Jm(n[e],xp,t);return function(i){return uj(r(i),e)}}function aj(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Zg,t);return function(i){return x_(r(i),e)}}function $2(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Zg,t);return function(i){const s=x_(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function X9(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Zg,t);return function(i){return Aj(r(i),e)}}function a3(n,e,t){if(!(e in n))return null;const r=Jm(n[e],Zg|Ts,t);return function(i){return jte(r(i),e)}}function V2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Fte(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return md(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Lte(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function J9(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function ek(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Ute(n,e){const t=n[e];if(t!==void 0)return x_(t,e)}function l3(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function zte(n,e){const t=n[e];if(t!==void 0)return uj(t,e)}function x_(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function lj(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function pB(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function uj(n,e){if(typeof n=="string")return n;const t=x_(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Aj(n,e){const t=x_(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function jte(n,e){return typeof n=="number"?n:Aj(n,e)}const gp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function tk(n,e,t){return function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const f=e?0:s[0]*i,y=e?0:s[1]*i,x=o?o[0]:0,B=o?o[1]:0;let O=n[0]+f/2+x,T=n[2]-f/2+x,F=n[1]+y/2+B,j=n[3]-y/2+B;O>T&&(O=(T+O)/2,T=O),F>j&&(F=(j+F)/2,j=F);let N=BA(r[0],O,T),q=BA(r[1],F,j);if(a&&t&&i){const H=30*i;N+=-H*Math.log(1+Math.max(0,O-r[0])/H)+H*Math.log(1+Math.max(0,r[0]-T)/H),q+=-H*Math.log(1+Math.max(0,F-r[1])/H)+H*Math.log(1+Math.max(0,r[1]-j)/H)}return[N,q]}}function Nte(n){return n}function cj(n){return Math.pow(n,3)}function av(n){return 1-cj(1-n)}function Wte(n){return 3*n*n-2*n*n*n}function Gte(n){return n}function Z8(n,e,t,r){const i=Rs(e)/t[0],s=lA(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function X8(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),BA(r,t/2,e*2)}function Qte(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,a,o){if(i!==void 0){const f=n[0],y=n[n.length-1],x=t?Z8(f,t,a,r):f;if(o)return e?X8(i,x,y):BA(i,y,x);const B=Math.min(x,i),O=Math.floor(Gx(n,B,s));return n[O]>x&&O<n.length-1?n[O+1]:n[O]}}}function qte(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(a,o,f,y){if(a!==void 0){const x=i?Z8(e,i,f,s):e;if(y)return r?X8(a,x,t):BA(a,t,x);const B=1e-9,O=Math.ceil(Math.log(e/x)/Math.log(n)-B),T=-o*(.5-B)+.5,F=Math.min(x,a),j=Math.floor(Math.log(e/F)/Math.log(n)+T),N=Math.max(O,j),q=e/Math.pow(n,N);return BA(q,t,x)}}}function nk(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,a,o,f){if(s!==void 0){const y=r?Z8(n,r,o,i):n;return!t||!f?BA(s,e,y):X8(s,y,e)}}}function J8(n){if(n!==void 0)return 0}function rk(n){if(n!==void 0)return n}function Yte(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function $te(n){const e=N0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const dj=42,eO=256,o5=0;class wp extends kp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=U8(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Kz(),e.center&&(e.center=Rm(e.center,this.projection_)),e.extent&&(e.extent=om(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in gp)delete t[o];this.setProperties(t,!0);const r=Hte(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=Vte(e),s=r.constraint,a=Zte(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Rm(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Rm(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const x=arguments[i];x.center&&this.setCenterInternal(x.center),x.zoom!==void 0?this.setZoom(x.zoom):x.resolution&&this.setResolution(x.resolution),x.rotation!==void 0&&this.setRotation(x.rotation)}if(i===t){r&&Bb(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,f=this.targetRotation_;const y=[];for(;i<t;++i){const x=arguments[i],B={start:s,complete:!1,anchor:x.anchor,duration:x.duration!==void 0?x.duration:1e3,easing:x.easing||Wte,callback:r};if(x.center&&(B.sourceCenter=a,B.targetCenter=x.center.slice(),a=B.targetCenter),x.zoom!==void 0?(B.sourceResolution=o,B.targetResolution=this.getResolutionForZoom(x.zoom),o=B.targetResolution):x.resolution&&(B.sourceResolution=o,B.targetResolution=x.resolution,o=B.targetResolution),x.rotation!==void 0){B.sourceRotation=f;const O=Ng(x.rotation-f+Math.PI,2*Math.PI)-Math.PI;B.targetRotation=f+O,f=B.targetRotation}Xte(B)?B.complete=!0:s+=B.duration,y.push(B)}this.animations_.push(y),this.setHint(Yl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Yl.ANIMATING]>0}getInteracting(){return this.hints_[Yl.INTERACTING]>0}cancelAnimations(){this.setHint(Yl.ANIMATING,-this.hints_[Yl.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&Bb(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const f=i[a];if(f.complete)continue;const y=e-f.start;let x=f.duration>0?y/f.duration:1;x>=1?(f.complete=!0,x=1):s=!1;const B=f.easing(x);if(f.sourceCenter){const O=f.sourceCenter[0],T=f.sourceCenter[1],F=f.targetCenter[0],j=f.targetCenter[1];this.nextCenter_=f.targetCenter;const N=O+B*(F-O),q=T+B*(j-T);this.targetCenter_=[N,q]}if(f.sourceResolution&&f.targetResolution){const O=B===1?f.targetResolution:f.sourceResolution+B*(f.targetResolution-f.sourceResolution);if(f.anchor){const T=this.getViewportSize_(this.getRotation()),F=this.constraints_.resolution(O,0,T,!0);this.targetCenter_=this.calculateCenterZoom(F,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=O,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const O=B===1?Ng(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+B*(f.targetRotation-f.sourceRotation);if(f.anchor){const T=this.constraints_.rotation(O,!0);this.targetCenter_=this.calculateCenterRotate(T,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=O}if(this.applyTargetState_(!0),t=!0,!f.complete)break}if(s){this.animations_[r]=null,this.setHint(Yl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&Bb(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],K8(r,e-this.getRotation()),BJ(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&cB(e,this.getProjection())}getCenterInternal(){return this.get(gp.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return z8(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Js(t,"The view center is not defined");const r=this.getResolution();Js(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return Js(i!==void 0,"The view rotation is not defined"),L2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(gp.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(om(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Rs(e)/t[0],i=lA(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(gp.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(a){return Math.log(r/a)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=s5(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Gx(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=BA(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,BA(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(Js(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Js(!n1(e),"Cannot fit empty extent provided as `geometry`");const i=om(e,this.getProjection());r=D9(i)}else if(e.getType()==="Circle"){const i=om(e.getExtent(),this.getProjection());r=D9(i),r.rotate(this.getRotation(),Hf(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,f=1/0,y=-1/0,x=-1/0;for(let B=0,O=s.length;B<O;B+=a){const T=s[B]*r-s[B+1]*i,F=s[B]*i+s[B+1]*r;o=Math.min(o,T),f=Math.min(f,F),y=Math.max(y,T),x=Math.max(x,F)}return[o,f,y,x]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let f=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);f=isNaN(f)?a:Math.max(f,a),f=this.getConstrainedResolution(f,s?0:1);const y=this.getRotation(),x=Math.sin(y),B=Math.cos(y),O=Hf(o);O[0]+=(i[1]-i[3])/2*f,O[1]+=(i[0]-i[2])/2*f;const T=O[0]*B-O[1]*x,F=O[1]*B+O[0]*x,j=this.getConstrainedCenter([T,F],f),N=t.callback?t.callback:Gy;t.duration!==void 0?this.animateInternal({resolution:f,center:j,duration:t.duration,easing:t.easing},N):(this.targetResolution_=f,this.targetCenter_=j,this.applyTargetState_(!1,!0),Bb(N,!0))}centerOn(e,t,r){this.centerOnInternal(Rm(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(s5(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),f=s5(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-f[0],e[1]-f[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=cB(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Rm(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Rm(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Rm(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(gp.ROTATION)!==i&&this.set(gp.ROTATION,i),this.get(gp.RESOLUTION)!==a&&(this.set(gp.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(gp.CENTER)||!j2(this.get(gp.CENTER),o))&&this.set(gp.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),f=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=f,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!j2(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:f,resolution:o,duration:e,easing:av,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Yl.INTERACTING,1)}endInteraction(e,t,r){r=r&&Rm(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Yl.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function Bb(n,e){setTimeout(function(){n(e)},0)}function Vte(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return tk(n.extent,n.constrainOnlyCenter,t)}const e=U8(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,tk(t,!1,!1)}return Nte}function Hte(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:o5,o=n.maxZoom!==void 0?n.maxZoom:28;const f=n.zoomFactor!==void 0?n.zoomFactor:2,y=n.multiWorld!==void 0?n.multiWorld:!1,x=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,B=n.showFullExtent!==void 0?n.showFullExtent:!1,O=U8(n.projection,"EPSG:3857"),T=O.getExtent();let F=n.constrainOnlyCenter,j=n.extent;if(!y&&!j&&O.isGlobal()&&(F=!1,j=T),n.resolutions!==void 0){const N=n.resolutions;t=N[a],r=N[o]!==void 0?N[o]:N[N.length-1],n.constrainResolution?e=Qte(N,x,!F&&j,B):e=nk(t,r,x,!F&&j,B)}else{const q=(T?Math.max(Rs(T),lA(T)):360*V0.degrees/O.getMetersPerUnit())/eO/Math.pow(2,o5),H=q/Math.pow(2,28-o5);t=n.maxResolution,t!==void 0?a=0:t=q/Math.pow(f,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(f,o):r=q/Math.pow(f,o):r=H),o=a+Math.floor(Math.log(t/r)/Math.log(f)),r=t/Math.pow(f,o-a),n.constrainResolution?e=qte(f,t,r,x,!F&&j,B):e=nk(t,r,x,!F&&j,B)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:f}}function Zte(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?$te():t===!1?rk:typeof t=="number"?Yte(t):rk}return J8}function Xte(n){return!(n.sourceCenter&&n.targetCenter&&!j2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function s5(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,f=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,f+=(t[1]-e[1]/2)*r,a=-a;const y=o*s-f*a,x=f*s+o*a;return[y,x]}const Ua={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class hj extends kp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ua.OPACITY]=e.opacity!==void 0?e.opacity:1,Js(typeof t[Ua.OPACITY]=="number","Layer opacity must be a number"),t[Ua.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ua.Z_INDEX]=e.zIndex,t[Ua.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ua.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ua.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ua.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=BA(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return wo()}getLayerStatesArray(e){return wo()}getExtent(){return this.get(Ua.EXTENT)}getMaxResolution(){return this.get(Ua.MAX_RESOLUTION)}getMinResolution(){return this.get(Ua.MIN_RESOLUTION)}getMinZoom(){return this.get(Ua.MIN_ZOOM)}getMaxZoom(){return this.get(Ua.MAX_ZOOM)}getOpacity(){return this.get(Ua.OPACITY)}getSourceState(){return wo()}getVisible(){return this.get(Ua.VISIBLE)}getZIndex(){return this.get(Ua.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ua.EXTENT,e)}setMaxResolution(e){this.set(Ua.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ua.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ua.MAX_ZOOM,e)}setMinZoom(e){this.set(Ua.MIN_ZOOM,e)}setOpacity(e){Js(typeof e=="number","Layer opacity must be a number"),this.set(Ua.OPACITY,e)}setVisible(e){this.set(Ua.VISIBLE,e)}setZIndex(e){this.set(Ua.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class lv extends hj{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ua.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ua.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ul(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ds(e,uo.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof wp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return tO(i,t.viewState)&&(!s||Fu(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof wp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ua.MAP,e)}getMapInternal(){return this.get(Ua.MAP)}setMap(e){this.mapPrecomposeKey_&&(ul(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ul(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ds(e,qf.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ds(this,uo.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);Js(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Ua.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function tO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const ik={RENDER_ORDER:"renderOrder"};class nO extends lv{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(ik.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new Xz(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(ik.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Qz:e;const t=Jte(e);this.styleFunction_=e===null?void 0:Cee(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Jte(n){if(n===void 0)return Qz;if(!n)return null;if(typeof n=="function"||n instanceof nf)return n;if(!Array.isArray(n))return Z9([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof nf){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof nf))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return Ote(i)}return Z9(n)}class rO extends nO{constructor(e){super(e)}createRenderer(){return new rte(this)}}class ene extends w8{constructor(e,t,r,i,s){const a=s!==void 0?hi.IDLE:hi.LOADED;super(e,t,r,a),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=hi.ERROR):this.state=hi.LOADED,this.changed()}load(){this.state==hi.IDLE&&(this.state=hi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class w_ extends p_{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(uo.CHANGE)}release(){this.setState(Nr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Nr.EMPTY){if(this.state!==Nr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){wo()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:cj(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class fj extends w_{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Nr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Nr.ERROR,this.unlistenImage_(),this.image_=tne(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Nr.LOADED:this.state=Nr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Nr.ERROR&&(this.state=Nr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Nr.IDLE&&(this.state=Nr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=JX(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function tne(){const n=Lu(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class nne{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class cy extends Ip{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class O0 extends cy{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Du={SINGLECLICK:"singleclick",CLICK:uo.CLICK,DBLCLICK:uo.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},mB={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class rne extends p_{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ds(r,mB.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ds(r,mB.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(uo.TOUCHMOVE,this.boundHandleTouchMove_,oz?{passive:!1}:!1)}emulateClick_(e){let t=new O0(Du.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new O0(Du.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new O0(Du.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Du.POINTERUP||t.type==Du.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Du.POINTERDOWN||t.type==Du.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new O0(Du.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ul),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new O0(Du.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ds(r,Du.POINTERMOVE,this.handlePointerMove_,this),Ds(r,Du.POINTERUP,this.handlePointerUp_,this),Ds(this.element_,Du.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ds(this.element_.getRootNode(),Du.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new O0(Du.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new O0(Du.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ul(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(uo.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ul(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ul),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Fm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},hd={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},H2=1/0;class ine{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,f_(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){Js(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=H2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const f=this.getLeftChildIndex_(e),y=this.getRightChildIndex_(e),x=y<i&&r[y]<r[f]?y:f;t[e]=t[x],r[e]=r[x],e=x}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,f;for(o=0;o<s;++o)a=t[o],f=e(a),f==H2?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=f,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class pj extends ine{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(uo.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Nr.LOADED||r===Nr.ERROR||r===Nr.EMPTY){r!==Nr.ERROR&&t.removeEventListener(uo.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Nr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function one(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return H2;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class iO extends kp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)ul(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==Gy&&this.listenerKeys.push(Ds(e,Fm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class sne extends iO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(uo.CLICK,this.handleClick_.bind(this),!1);const y=t+" "+qx+" "+S8+(this.collapsed_&&this.collapsible_?" "+m9:"")+(this.collapsible_?"":" ol-uncollapsible"),x=this.element;x.className=y,x.appendChild(this.toggleButton_),x.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var a;return((a=s.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>Qy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!H0(t,this.renderedAttributions_)){sz(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(m9),this.collapsed_?f9(this.collapseLabel_,this.label_):f9(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class ane extends iO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"⇧",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(uo.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+qx+" "+S8,f=this.element;f.className=o,f.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(_b)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:av}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(_b);!s&&r===0?this.element.classList.add(_b):s&&r!==0&&this.element.classList.remove(_b)}this.label_.style.transform=i}this.rotation_=r}}class lne extends iO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",f=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",y=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",x=document.createElement("button");x.className=i,x.setAttribute("type","button"),x.title=f,x.appendChild(typeof a=="string"?document.createTextNode(a):a),x.addEventListener(uo.CLICK,this.handleClick_.bind(this,r),!1);const B=document.createElement("button");B.className=s,B.setAttribute("type","button"),B.title=y,B.appendChild(typeof o=="string"?document.createTextNode(o):o),B.addEventListener(uo.CLICK,this.handleClick_.bind(this,-r),!1);const O=t+" "+qx+" "+S8,T=this.element;T.className=O,T.appendChild(x),T.appendChild(B),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:av})):r.setZoom(s)}}}function une(n){n=n||{};const e=new sm;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new lne(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new ane(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new sne(n.attributionOptions)),e}const ok={ACTIVE:"active"};class M_ extends kp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ok.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(ok.ACTIVE,e)}setMap(e){this.map_=e}}function Ane(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Gte,center:n.getConstrainedCenter(i)})}}function oO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:av})}class cne extends M_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Du.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();oO(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function gB(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const dne=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},hne=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},mj=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?hne(n):!0},fne=RC,gj=function(n){const e=n.originalEvent;return e.button==0&&!(GX&&tz&&e.ctrlKey)},yj=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},pne=function(n){const e=n.originalEvent;return tz?e.metaKey:e.ctrlKey},mne=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},vj=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},a5=function(n){const e=n.originalEvent;return Js(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},gne=function(n){const e=n.originalEvent;return Js(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class S_ extends M_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Du.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Du.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Du.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Du.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function sO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class yne extends S_{constructor(e){super({stopDown:Qx}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:gB(yj,gne);this.condition_=e.onFocusOnly?gB(mj,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(sO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();OJ(s,o.getResolution()),K8(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),f=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(f),duration:500,easing:av})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class vne extends S_{constructor(e){e=e||{},super({stopDown:Qx}),this.condition_=e.condition?e.condition:dne,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!a5(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===J8)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return a5(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return a5(e)&&gj(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Cne extends h_{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Zm([i])}getGeometry(){return this.geometry_}}const K1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Rv extends Ip{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class _ne extends S_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Cne(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??gj,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Rv(K1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Rv(t?K1.BOXEND:K1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Rv(K1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Rv(K1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Rv(K1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class bne extends _ne{constructor(e){e=e||{};const t=e.condition?e.condition:mne;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:av})}}const yg={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class xne extends M_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return yj(t)&&vj(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==uo.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==yg.DOWN||i==yg.LEFT||i==yg.RIGHT||i==yg.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let f=0,y=0;i==yg.DOWN?y=-o:i==yg.LEFT?f=-o:i==yg.RIGHT?f=o:y=o;const x=[f,y];K8(x,a.getRotation()),Ane(a,x,this.duration_),r.preventDefault(),t=!0}}return!t}}class wne extends M_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!pne(t)&&vj(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==uo.KEYDOWN||e.type==uo.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();oO(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class Mne extends M_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:fne;this.condition_=e.onFocusOnly?gB(mj,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==uo.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==uo.WHEEL&&(s=i.deltaY,NX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=nz),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const f=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),f),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-BA(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),oO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Sne extends S_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Qx),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const f=s-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=f}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==J8&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(sO(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Ene extends S_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Qx),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const f=e.map,y=f.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(sO(this.targetPointers))),f.render(),y.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Bne(n){n=n||{};const e=new sm,t=new nne(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new vne),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new cne({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new yne({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new Sne),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new Ene({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new xne),e.push(new wne({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new Mne({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new bne({duration:n.zoomDuration})),e}class k0 extends Ip{constructor(e,t){super(e),this.layer=t}}const l5={LAYERS:"layers"};class uv extends hj{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(l5.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new sm(r.slice(),{unique:!0}):Js(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new sm(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ul),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ds(e,yh.ADD,this.handleLayersAdd_,this),Ds(e,yh.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(ul);f_(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new k0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ds(e,qy.PROPERTYCHANGE,this.handleLayerChange_,this),Ds(e,uo.CHANGE,this.handleLayerChange_,this)];e instanceof uv&&t.push(Ds(e,"addlayer",this.handleLayerGroupAdd_,this),Ds(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Qo(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new k0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new k0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new k0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Qo(t);this.listenerKeys_[r].forEach(ul),delete this.listenerKeys_[r],this.dispatchEvent(new k0("removelayer",t)),this.changed()}getLayers(){return this.get(l5.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new k0("removelayer",r[i]))}this.set(l5.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const f=t[a];f.opacity*=i.opacity,f.visible=f.visible&&i.visible,f.maxResolution=Math.min(f.maxResolution,i.maxResolution),f.minResolution=Math.max(f.minResolution,i.minResolution),f.minZoom=Math.max(f.minZoom,i.minZoom),f.maxZoom=Math.min(f.maxZoom,i.maxZoom),i.extent!==void 0&&(f.extent!==void 0?f.extent=Ep(f.extent,i.extent):f.extent=i.extent),f.zIndex===void 0&&(f.zIndex=s)}return t}getSourceState(){return"ready"}}class One extends h_{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){wo()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;dm(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Rz(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,f){let y;const x=t.viewState;function B(ne,$,te,G){return s.call(a,$,ne?te:null,G)}const O=x.projection,T=D8(e.slice(),O),F=[[0,0]];if(O.canWrapX()&&i){const ne=O.getExtent(),$=Rs(ne);F.push([-$,0],[$,0])}const j=t.layerStatesArray,N=j.length,q=[],H=[];for(let ne=0;ne<F.length;ne++)for(let $=N-1;$>=0;--$){const te=j[$],G=te.layer;if(G.hasRenderer()&&tO(te,x)&&o.call(f,G)){const ie=G.getRenderer(),he=G.getSource();if(ie&&he){const pe=he.getWrapX()?T:e,Ee=B.bind(null,te.managed);H[0]=pe[0]+F[ne][0],H[1]=pe[1]+F[ne][1],y=ie.forEachFeatureAtCoordinate(H,t,r,Ee,q)}if(y)return y}}if(q.length===0)return;const oe=1/q.length;return q.forEach((ne,$)=>ne.distanceSq+=$*oe),q.sort((ne,$)=>ne.distanceSq-$.distanceSq),q.some(ne=>y=ne.callback(ne.feature,ne.layer,ne.geometry)),y}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,RC,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){wo()}scheduleExpireIconCache(e){Qf.canExpireCache()&&e.postRenderFunctions.push(Ine)}}function Ine(n,e){Qf.expire()}class kne extends One{constructor(e){super(e),this.fontChangeListenerKey_=Ds(Yp,qy.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=qx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new rj(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){ul(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(qf.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,f)=>o.zIndex-f.zIndex);t.some(o=>o.layer instanceof nO&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let o=0,f=t.length;o<f;++o){const y=t[o];e.layerIndex=o;const x=y.layer,B=x.getSourceState();if(!tO(y,i)||B!="ready"&&B!="undefined"){x.unrender();continue}const O=x.render(e,a);O&&(O!==a&&(this.children_.push(O),a=O),s.push(y))}this.declutter(e,s),$X(this.element_,this.children_),this.dispatchRenderEvent(qf.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function Cj(n){if(n instanceof lv){n.setMapInternal(null);return}n instanceof uv&&n.getLayers().forEach(Cj)}function _j(n,e){if(n instanceof lv){n.setMapInternal(e);return}if(n instanceof uv){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)_j(t[r],e)}}let aO=class extends kp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Tne(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:nz,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=_h(),this.pixelToCoordinateTransform_=_h(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||une(),this.interactions=t.interactions||Bne({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new pj(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(hd.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(hd.VIEW,this.handleViewChanged_),this.addChangeListener(hd.SIZE,this.handleSizeChanged_),this.addChangeListener(hd.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof wp)&&e.view.then(function(i){r.setView(new wp(i))}),this.controls.addEventListener(yh.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(yh.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(yh.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(yh.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(yh.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(yh.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){_j(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:RC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof uv?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:RC,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(hd.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return cB(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?EA(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(hd.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof sm){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Rm(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?EA(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(hd.SIZE)}getView(){return this.get(hd.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return one(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new O0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===mB.POINTERDOWN||r===uo.WHEEL||r===uo.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[Yl.ANIMATING]||a[Yl.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(qf.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(qf.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new cy(Fm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new cy(Fm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)ul(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(uo.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(uo.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new kne(this)),this.mapBrowserEventHandler_=new rne(this,this.moveTolerance_);for(const s in Du)this.mapBrowserEventHandler_.addEventListener(Du[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(uo.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(uo.WHEEL,this.boundHandleBrowserEvent_,oz?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Ds(r,uo.KEYDOWN,this.handleBrowserEvent,this),Ds(r,uo.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ul(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ul(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ds(e,qy.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ds(e,uo.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ul),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new k0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ds(e,qy.PROPERTYCHANGE,this.render,this),Ds(e,uo.CHANGE,this.render,this),Ds(e,"addlayer",this.handleLayerAdd_,this),Ds(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Cj(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&v9(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:L2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Qo(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const f=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=L2(o.nextCenter,o.nextResolution,f,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!n1(this.previousExtent_)&&!Hm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new cy(Fm.MOVESTART,this,i)),this.previousExtent_=ov(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Yl.ANIMATING]&&!s.viewHints[Yl.INTERACTING]&&!Hm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new cy(Fm.MOVEEND,this,s)),fz(s.extent,this.previousExtent_))),this.dispatchEvent(new cy(Fm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Fm.LOADSTART)||this.hasListener(Fm.LOADEND)||this.hasListener(qf.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new k0("removelayer",t)),this.set(hd.LAYERGROUP,e)}setSize(e){this.set(hd.SIZE,e)}setTarget(e){this.set(hd.TARGET,e)}setView(e){if(!e||e instanceof wp){this.set(hd.VIEW,e);return}this.set(hd.VIEW,new wp);const t=this;e.then(function(r){t.setView(new wp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(t=[Math.max(0,s),Math.max(0,a)],!v9(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Bz("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!H0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Tne(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new uv({layers:n.layers});t[hd.LAYERGROUP]=r,t[hd.TARGET]=n.target,t[hd.VIEW]=n.view instanceof wp?n.view:new wp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new sm(n.controls.slice()):(Js(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new sm(n.interactions.slice()):(Js(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new sm(n.overlays.slice()):(Js(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new sm,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const dd={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Pne extends kp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+sJ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(dd.ELEMENT,this.handleElementChanged),this.addChangeListener(dd.MAP,this.handleMapChanged),this.addChangeListener(dd.OFFSET,this.handleOffsetChanged),this.addChangeListener(dd.POSITION,this.handlePositionChanged),this.addChangeListener(dd.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(dd.ELEMENT)}getId(){return this.id}getMap(){return this.get(dd.MAP)||null}getOffset(){return this.get(dd.OFFSET)}getPosition(){return this.get(dd.POSITION)}getPositioning(){return this.get(dd.POSITIONING)}handleElementChanged(){sz(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),ul(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ds(e,Fm.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(dd.ELEMENT,e)}setMap(e){this.set(dd.MAP,e)}setOffset(e){this.set(dd.OFFSET,e)}setPosition(e){this.set(dd.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(dd.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[qX(i),YX(i)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!im(r,s)){const o=s[0]-r[0],f=r[2]-s[2],y=s[1]-r[1],x=r[3]-s[3],B=[0,0];if(o<0?B[0]=o-a:f<0&&(B[0]=Math.abs(f)+a),y<0?B[1]=y-a:x<0&&(B[1]=Math.abs(x)+a),B[0]!==0||B[1]!==0){const O=t.getView().getCenterInternal(),T=t.getPixelFromCoordinateInternal(O);if(!T)return;const F=[T[0]+B[0],T[1]+B[1]],j=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(F),duration:j.duration,easing:j.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(dd.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let f="0%",y="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?f="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(f="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?y="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(y="-50%");const x=`translate(${f}, ${y}) translate(${a}, ${o})`;this.rendered.transform_!=x&&(this.rendered.transform_=x,r.transform=x)}getOptions(){return this.options}}class lO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function D1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new lO(n,e,t,r)}const sk=[];class Kne extends w_{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=Lu(1,1,sk)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Qo(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(d_(this.context_),sk.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let bj=class extends w_{constructor(e,t,r,i,s,a){super(e,t,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Nr.IDLE&&(this.setState(Nr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Nr.ERROR)}setFeatures(e){this.features_=e,this.setState(Nr.LOADED)}setLoader(e){this.loader_=e}};class xj{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Vx,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Ma(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Ma(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return wo()}readFeature(e,t){return wo()}readFeatures(e,t){return wo()}readGeometry(e,t){return wo()}readProjection(e){return wo()}writeFeature(e,t){return wo()}writeFeatures(e,t){return wo()}writeGeometry(e,t){return wo()}}function u3(n,e,t){const r=t?Ma(t.featureProjection):null,i=t?Ma(t.dataProjection):null;let s=n;if(r&&i&&!Wg(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(NC(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(f){for(let y=0,x=f.length;y<x;++y)f[y]=Math.round(f[y]*a)/a;return f};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const Dne={Point:Hg,LineString:Vg,Polygon:Zm,MultiPoint:__,MultiLineString:QC,MultiPolygon:qC};function Rne(n,e,t){return Array.isArray(e[0])?(wz(n,0,e,t)||(n=n.slice(),oB(n,0,e,t)),n):(T8(n,0,e,t)||(n=n.slice(),z2(n,0,e,t)),n)}function wj(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(a=>wj({...n,geometry:a})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return u3(new pd(r,r==="Polygon"?Rne(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function uO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>uO(i,e));return new G2(r)}const t=Dne[n.type];return u3(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Fne extends xj{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Ob(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Ob(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return wo()}readFeaturesFromObject(e,t){return wo()}readGeometry(e,t){return this.readGeometryFromObject(Ob(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return wo()}readProjection(e){return this.readProjectionFromObject(Ob(e))}readProjectionFromObject(e){return wo()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return wo()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return wo()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return wo()}}function Ob(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class ak extends Fne{constructor(e){e=e||{},super(),this.dataProjection=Ma(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ma(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=AO(r.geometry);if(this.featureClass===pd)return wj({geometry:i,id:r.id,properties:r.properties},t);const s=new Vx;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(uO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,f=a.length;o<f;++o){const y=this.readFeatureFromObject(a[o],t);y&&i.push(y)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Lne(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Ma(t.properties.name);else if(t.type==="EPSG")r=Ma("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=yB(a,t),delete s[e.getGeometryName()]),$0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return yB(e,this.adaptOptions(t))}}function AO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=zne(n);break}case"LineString":{t=jne(n);break}case"Polygon":{t=Qne(n);break}case"MultiPoint":{t=Wne(n);break}case"MultiLineString":{t=Nne(n);break}case"MultiPolygon":{t=Gne(n);break}case"GeometryCollection":{t=Une(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Lne(n,e){const t=AO(n);return uO(t,e)}function Une(n,e){return n.geometries.map(function(r){return AO(r)})}function zne(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:i1(e.length)}}function jne(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:i1(((r=e[0])==null?void 0:r.length)||2)}}function Nne(n){var s,a;const e=n.coordinates,t=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length)||2,r=[],i=C_(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:i1(t)}}function Wne(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:i1(((t=e[0])==null?void 0:t.length)||2)}}function Gne(n){var s,a;const e=n.coordinates,t=[],r=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a[0].length)||2,i=Lz(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:i1(r)}}function Qne(n){var s,a;const e=n.coordinates,t=[],r=(a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length,i=C_(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:i1(r)}}function yB(n,e){n=u3(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Zne(n);break}case"LineString":{r=Yne(n);break}case"Polygon":{r=Xne(n,e);break}case"MultiPoint":{r=Vne(n);break}case"MultiLineString":{r=$ne(n);break}case"MultiPolygon":{r=Hne(n,e);break}case"GeometryCollection":{r=qne(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function qne(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return yB(r,e)})}}function Yne(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function $ne(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Vne(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Hne(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Zne(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Xne(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}class Jne extends $8{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let f=e.extent;if(t.extent!==void 0&&(f=Ep(f,om(t.extent,i.projection))),!o[Yl.ANIMATING]&&!o[Yl.INTERACTING]&&!n1(f))if(a){const y=i.projection,x=a.getImage(f,s,r,y);x&&(this.loadImage(x)?this.image=x:x.getState()===hi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=EA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!$g(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),f=Rs(a),y=Math.floor(o.width*((i[0]-a[0])/f));if(y<0||y>=o.width)return null;const x=lA(a),B=Math.floor(o.height*((a[3]-i[1])/x));return B<0||B>=o.height?null:this.getImageData(o,y,B)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],f=r.getPixelRatio(),y=e.layerStatesArray[e.layerIndex],x=e.pixelRatio,B=e.viewState,O=B.center,T=B.resolution,F=x*a/(T*f),j=x*o/(T*f);this.prepareContainer(e,t);const N=this.context.canvas.width,q=this.context.canvas.height,H=this.getRenderContext(e);let oe=!1,ne=!0;if(y.extent){const he=om(y.extent,B.projection);ne=Fu(he,e.extent),oe=ne&&!im(he,e.extent),oe&&this.clipUnrotated(H,e,he)}const $=r.getImage(),te=dm(this.tempTransform,N/2,q/2,F,j,0,f*(i[0]-O[0])/a,f*(O[1]-i[3])/o);this.renderedResolution=o*x/f;const G=$.width*te[0],ie=$.height*te[3];if(this.getLayer().getSource().getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e),ne&&G>=.5&&ie>=.5){const he=te[4],pe=te[5],Ee=y.opacity;Ee!==1&&(H.save(),H.globalAlpha=Ee),H.drawImage($,0,0,+$.width,+$.height,he,pe,G,ie),Ee!==1&&H.restore()}return this.postRender(this.context,e),oe&&H.restore(),H.imageSmoothingEnabled=!0,this.container}}class ere extends lv{constructor(e){e=e||{},super(e)}}class Mj extends ere{constructor(e){super(e)}createRenderer(){return new Jne(this)}getData(e){return super.getData(e)}}const vB=65536*65536,lk=1/vB,tre=12,uk=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),u5=0,Ib=1,Fv=2,kb=5;class nre{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,a=this.pos;this.type=i&7,e(s,t,this),this.pos===a&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*vB;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*vB;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,rre(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=tre&&uk?uk.decode(this.buf.subarray(t,e)):mre(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Fv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===u5)for(;this.buf[this.pos++]>127;);else if(t===Fv)this.pos=this.readVarint()+this.pos;else if(t===kb)this.pos+=4;else if(t===Ib)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*lk),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*lk),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){ire(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=gre(this.buf,e,this.pos);const r=this.pos-t;r>=128&&Ak(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&Ak(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Fv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,are,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,lre,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,cre,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,ure,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Are,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,dre,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,hre,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,fre,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,pre,t)}writeBytesField(e,t){this.writeTag(e,Fv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,kb),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,kb),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,Ib),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,Ib),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,u5),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,u5),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Fv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,kb),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,Ib),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function rre(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return R1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function R1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function ire(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),ore(t,r,e),sre(r,e)}function ore(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function sre(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function Ak(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function are(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function lre(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function ure(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Are(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function cre(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function dre(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function hre(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function fre(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function pre(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function mre(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let f,y,x;o===1?s<128&&(a=s):o===2?(f=n[i+1],(f&192)===128&&(a=(s&31)<<6|f&63,a<=127&&(a=null))):o===3?(f=n[i+1],y=n[i+2],(f&192)===128&&(y&192)===128&&(a=(s&15)<<12|(f&63)<<6|y&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):o===4&&(f=n[i+1],y=n[i+2],x=n[i+3],(f&192)===128&&(y&192)===128&&(x&192)===128&&(a=(s&15)<<18|(f&63)<<12|(y&63)<<6|x&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,o=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),r+=String.fromCharCode(a),i+=o}return r}function gre(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class yre extends xj{constructor(e){super(),e=e||{},this.dataProjection=new e3({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:pd,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let a=1,o=0,f=0,y=0,x=0,B=0;for(;e.pos<s;){if(!o){const O=e.readVarint();a=O&7,o=O>>3}if(o--,a===1||a===2)f+=e.readSVarint(),y+=e.readSVarint(),a===1&&x>B&&(i.push(x),B=x),r.push(f,y),x+=2;else if(a===7)x>B&&(r.push(r[B],r[B+1]),x+=2);else throw new Error("Invalid command found in the PBF")}x>B&&(i.push(x),B=x)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const a=t.properties;let o;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=t.id,a[this.layerName_]=t.layer.name;const f=[],y=[];this.readRawGeometry_(e,t,f,y);const x=xre(i,y.length);if(this.featureClass===pd)s=new this.featureClass(x,f,y,2,a,o),s.transform(r.dataProjection);else{let B;if(x=="Polygon"){const F=Mz(f,y);B=F.length>1?new qC(f,"XY",F):new Zm(f,"XY",y)}else B=x==="Point"?new Hg(f,"XY"):x==="LineString"?new Vg(f,"XY"):x==="MultiPoint"?new __(f,"XY"):x==="MultiLineString"?new QC(f,"XY",y):null;const O=this.featureClass;s=new O,this.geometryName_&&s.setGeometryName(this.geometryName_);const T=u3(B,!1,r);s.setGeometry(T),o!==void 0&&s.setId(o),s.setProperties(a,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Ma(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new nre(e),a=s.readFields(vre,{}),o=[];for(const f in a){if(r&&!r.includes(f))continue;const y=a[f],x=y?[0,0,y.extent,y.extent]:null;i.setExtent(x);for(let B=0,O=y.length;B<O;++B){const T=bre(s,y,B),F=this.createFeature_(s,T,t);F!==null&&o.push(F)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function vre(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Cre,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Cre(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function _re(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function bre(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(_re,i,r),i}function xre(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}function CB(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const wre=new Error("disposed"),Mre=[256,256];class ck extends w_{constructor(e){const t=Nr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=CB(this.data_);return e?[e.width,e.height]:Mre}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Nr.IDLE&&this.state!==Nr.ERROR)return;this.state=Nr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Nr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Nr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(wre),this.controller_=null),super.disposeInternal()}}let A5;const Iy=[];function dk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function c5(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Sre(){if(A5===void 0){const n=Lu(6,6,Iy);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",dk(n,4,5,4,0),dk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;A5=c5(e,0)||c5(e,4)||c5(e,8),d_(n),Iy.push(n.canvas)}return A5}function _B(n,e,t,r){const i=r3(t,e,n);let s=uB(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const f=n.getExtent();if(!f||$g(f,i)){const y=uB(n,s,i)/s;isFinite(y)&&y>0&&(s/=y)}return s}function Ere(n,e,t,r){const i=Hf(t);let s=_B(n,e,i,r);return(!isFinite(s)||s<=0)&&yz(t,function(a){return s=_B(n,e,a,r),isFinite(s)&&s>0}),s}function Sj(n,e,t,r,i,s,a,o,f,y,x,B,O,T){const F=Lu(Math.round(t*n),Math.round(t*e),Iy);if(B||(F.imageSmoothingEnabled=!1),f.length===0)return F.canvas;F.scale(t,t);function j($){return Math.round($*t)/t}F.globalCompositeOperation="lighter";const N=Vf();f.forEach(function($,te,G){mz(N,$.extent)});let q;const H=t/r,oe=(B?1:1+Math.pow(2,-24))/H;if(!O||f.length!==1||y!==0){if(q=Lu(Math.round(Rs(N)*H),Math.round(lA(N)*H),Iy),B||(q.imageSmoothingEnabled=!1),i&&T){const $=(i[0]-N[0])*H,te=-(i[3]-N[3])*H,G=Rs(i)*H,ie=lA(i)*H;q.rect($,te,G,ie),q.clip()}f.forEach(function($,te,G){if($.image.width>0&&$.image.height>0){if($.clipExtent){q.save();const me=($.clipExtent[0]-N[0])*H,Se=-($.clipExtent[3]-N[3])*H,De=Rs($.clipExtent)*H,be=lA($.clipExtent)*H;q.rect(B?me:Math.round(me),B?Se:Math.round(Se),B?De:Math.round(me+De)-Math.round(me),B?be:Math.round(Se+be)-Math.round(Se)),q.clip()}const ie=($.extent[0]-N[0])*H,he=-($.extent[3]-N[3])*H,pe=Rs($.extent)*H,Ee=lA($.extent)*H;q.drawImage($.image,y,y,$.image.width-2*y,$.image.height-2*y,B?ie:Math.round(ie),B?he:Math.round(he),B?pe:Math.round(ie+pe)-Math.round(ie),B?Ee:Math.round(he+Ee)-Math.round(he)),$.clipExtent&&q.restore()}})}const ne=Xm(a);return o.getTriangles().forEach(function($,te,G){const ie=$.source,he=$.target;let pe=ie[0][0],Ee=ie[0][1],me=ie[1][0],Se=ie[1][1],De=ie[2][0],be=ie[2][1];const at=j((he[0][0]-ne[0])/s),Ze=j(-(he[0][1]-ne[1])/s),Je=j((he[1][0]-ne[0])/s),We=j(-(he[1][1]-ne[1])/s),Me=j((he[2][0]-ne[0])/s),Fe=j(-(he[2][1]-ne[1])/s),He=pe,bt=Ee;pe=0,Ee=0,me-=He,Se-=bt,De-=He,be-=bt;const Yt=[[me,Se,0,0,Je-at],[De,be,0,0,Me-at],[0,0,me,Se,We-Ze],[0,0,De,be,Fe-Ze]],gt=FX(Yt);if(!gt)return;if(F.save(),F.beginPath(),Sre()||!B){F.moveTo(Je,We);const Kt=4,Ue=at-Je,Pe=Ze-We;for(let Be=0;Be<Kt;Be++)F.lineTo(Je+j((Be+1)*Ue/Kt),We+j(Be*Pe/(Kt-1))),Be!=Kt-1&&F.lineTo(Je+j((Be+1)*Ue/Kt),We+j((Be+1)*Pe/(Kt-1)));F.lineTo(Me,Fe)}else F.moveTo(Je,We),F.lineTo(at,Ze),F.lineTo(Me,Fe);F.clip(),F.transform(gt[0],gt[2],gt[1],gt[3],at,Ze),F.translate(N[0]-He,N[3]-bt);let Lt;if(q)Lt=q.canvas,F.scale(oe,-oe);else{const Kt=f[0],Ue=Kt.extent;Lt=Kt.image,F.scale(Rs(Ue)/Lt.width,-lA(Ue)/Lt.height)}F.drawImage(Lt,0,0),F.restore()}),q&&(d_(q),Iy.push(q.canvas)),x&&(F.save(),F.globalCompositeOperation="source-over",F.strokeStyle="black",F.lineWidth=1,o.getTriangles().forEach(function($,te,G){const ie=$.target,he=(ie[0][0]-ne[0])/s,pe=-(ie[0][1]-ne[1])/s,Ee=(ie[1][0]-ne[0])/s,me=-(ie[1][1]-ne[1])/s,Se=(ie[2][0]-ne[0])/s,De=-(ie[2][1]-ne[1])/s;F.beginPath(),F.moveTo(Ee,me),F.lineTo(he,pe),F.lineTo(Se,De),F.closePath(),F.stroke()}),F.restore()),F.canvas}const Bre=10,hk=.25;class Ej{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let f={};const y=o?iee(oe=>EA(o,r3(oe,this.targetProj_,this.sourceProj_))):NC(this.targetProj_,this.sourceProj_);this.transformInv_=function(oe){const ne=oe[0]+"/"+oe[1];return f[ne]||(f[ne]=y(oe)),f[ne]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Rs(i)>=Rs(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Rs(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Rs(this.targetProj_.getExtent()):null;const x=Xm(r),B=Xx(r),O=Zx(r),T=Hx(r),F=this.transformInv_(x),j=this.transformInv_(B),N=this.transformInv_(O),q=this.transformInv_(T),H=Bre+(a?Math.max(0,Math.ceil(Math.log2(rB(r)/(a*a*256*256)))):0);if(this.addQuad_(x,B,O,T,F,j,N,q,H),this.wrapsXInSource_){let oe=1/0;this.triangles_.forEach(function(ne,$,te){oe=Math.min(oe,ne.source[0][0],ne.source[1][0],ne.source[2][0])}),this.triangles_.forEach(ne=>{if(Math.max(ne.source[0][0],ne.source[1][0],ne.source[2][0])-oe>this.sourceWorldWidth_/2){const $=[[ne.source[0][0],ne.source[0][1]],[ne.source[1][0],ne.source[1][1]],[ne.source[2][0],ne.source[2][1]]];$[0][0]-oe>this.sourceWorldWidth_/2&&($[0][0]-=this.sourceWorldWidth_),$[1][0]-oe>this.sourceWorldWidth_/2&&($[1][0]-=this.sourceWorldWidth_),$[2][0]-oe>this.sourceWorldWidth_/2&&($[2][0]-=this.sourceWorldWidth_);const te=Math.min($[0][0],$[1][0],$[2][0]);Math.max($[0][0],$[1][0],$[2][0])-te<this.sourceWorldWidth_/2&&(ne.source=$)}})}f={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,f,y){const x=tB([s,a,o,f]),B=this.sourceWorldWidth_?Rs(x)/this.sourceWorldWidth_:null,O=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&B>.5&&B<1;let F=!1;if(y>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const N=tB([e,t,r,i]);F=Rs(N)/this.targetWorldWidth_>hk||F}!T&&this.sourceProj_.isGlobal()&&B&&(F=B>hk||F)}if(!F&&this.maxSourceExtent_&&isFinite(x[0])&&isFinite(x[1])&&isFinite(x[2])&&isFinite(x[3])&&!Fu(x,this.maxSourceExtent_))return;let j=0;if(!F&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(f[0])||!isFinite(f[1]))){if(y>0)F=!0;else if(j=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),j!=1&&j!=2&&j!=4&&j!=8)return}if(y>0){if(!F){const N=[(e[0]+r[0])/2,(e[1]+r[1])/2],q=this.transformInv_(N);let H;T?H=(Ng(s[0],O)+Ng(o[0],O))/2-Ng(q[0],O):H=(s[0]+o[0])/2-q[0];const oe=(s[1]+o[1])/2-q[1];F=H*H+oe*oe>this.errorThresholdSquared_}if(F){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const N=[(t[0]+r[0])/2,(t[1]+r[1])/2],q=this.transformInv_(N),H=[(i[0]+e[0])/2,(i[1]+e[1])/2],oe=this.transformInv_(H);this.addQuad_(e,t,N,H,s,a,q,oe,y-1),this.addQuad_(H,N,r,i,oe,q,o,f,y-1)}else{const N=[(e[0]+t[0])/2,(e[1]+t[1])/2],q=this.transformInv_(N),H=[(r[0]+i[0])/2,(r[1]+i[1])/2],oe=this.transformInv_(H);this.addQuad_(e,N,H,i,s,q,oe,f,y-1),this.addQuad_(N,t,r,H,q,a,o,oe,y-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}j&11||this.addTriangle_(e,r,i,s,o,f),j&14||this.addTriangle_(e,r,t,s,o,a),j&&(j&13||this.addTriangle_(t,i,e,a,f,s),j&7||this.addTriangle_(t,i,r,a,f,o))}calculateSourceExtent(){const e=Vf();return this.triangles_.forEach(function(t,r,i){const s=t.source;yC(e,s[0]),yC(e,s[1]),yC(e,s[2])}),e}getTriangles(){return this.triangles_}}const Bj=.5;class Oj extends w_{constructor(e,t,r,i,s,a,o,f,y,x,B,O){super(s,Nr.IDLE,O),this.renderEdges_=B!==void 0?B:!1,this.pixelRatio_=o,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const T=i.getTileCoordExtent(this.wrappedTileCoord_),F=this.targetTileGrid_.getExtent();let j=this.sourceTileGrid_.getExtent();const N=F?Ep(T,F):T;if(rB(N)===0){this.state=Nr.EMPTY;return}const q=e.getExtent();q&&(j?j=Ep(j,q):j=q);const H=i.getResolution(this.wrappedTileCoord_[0]),oe=Ere(e,r,N,H);if(!isFinite(oe)||oe<=0){this.state=Nr.EMPTY;return}const ne=x!==void 0?x:Bj;if(this.triangulation_=new Ej(e,r,N,j,oe*ne,H),this.triangulation_.getTriangles().length===0){this.state=Nr.EMPTY;return}this.sourceZ_=t.getZForResolution(oe);let $=this.triangulation_.calculateSourceExtent();if(j&&(e.canWrapX()?($[1]=BA($[1],j[1],j[3]),$[3]=BA($[3],j[1],j[3])):$=Ep($,j)),!rB($))this.state=Nr.EMPTY;else{let te=0,G=0;e.canWrapX()&&(te=Rs(q),G=Math.floor(($[0]-q[0])/te)),_z($.slice(),e,!0).forEach(he=>{const pe=t.getTileRangeForExtentAndZ(he,this.sourceZ_);for(let Ee=pe.minX;Ee<=pe.maxX;Ee++)for(let me=pe.minY;me<=pe.maxY;me++){const Se=y(this.sourceZ_,Ee,me,o);if(Se){const De=G*te;this.sourceTiles_.push({tile:Se,offset:De})}}++G}),this.sourceTiles_.length===0&&(this.state=Nr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==Nr.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const a=(i=this.clipExtent_)==null?void 0:i.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:s,clipExtent:a,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Nr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Sj(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,f,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Nr.LOADED}this.changed()}load(){if(this.state==Nr.IDLE){this.state=Nr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Nr.IDLE||r==Nr.LOADING){e++;const i=Ds(t,uo.CHANGE,s=>{const a=t.getState();(a==Nr.LOADED||a==Nr.ERROR||a==Nr.EMPTY)&&(ul(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Nr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ul),this.sourcesListenerKeys_=null}release(){this.canvas_&&(d_(this.canvas_.getContext("2d")),Iy.push(this.canvas_),this.canvas_=null),super.release()}}class Ore{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof h_&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return Js(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return Js(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Js(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function Z2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function Ire(n,e,t){return n+"/"+e+"/"+t}function kre(n){return Tre(n[0],n[1],n[2])}function Tre(n,e,t){return(e<<n)+t}function Pre(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function d5(n,e,t,r){return`${n},${Ire(e,t,r)}`}function h5(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function Kre(n,e,t){const r=n[t];return r?r.delete(e):!1}function fk(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Ep(e,om(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Ep(e,i))}return e}class Ij extends $8{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Vf(),this.tempTileRange_=new lO(0,0,0,0),this.tempTileCoord_=Z2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Ore(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),f=d5(o.getKey(),e,t,r);let y;if(s.containsKey(f))y=s.get(f);else{if(y=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!y)return null;s.set(f,y)}return y}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=EA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!$g(s,i))return null;const a=t.viewState,o=r.getRenderSource(),f=o.getTileGridForProjection(a.projection),y=o.getTilePixelRatio(t.pixelRatio);for(let x=f.getZForResolution(a.resolution);x>=f.getMinZoom();--x){const B=f.getTileCoordForCoordAndZ(i,x),O=this.getTile(x,B[1],B[2],t);if(!O||O.getState()!==Nr.LOADED)continue;const T=f.getOrigin(x),F=md(f.getTileSize(x)),j=f.getResolution(x);let N;if(O instanceof fj||O instanceof Oj)N=O.getImage();else if(O instanceof ck){if(N=CB(O.getData()),!N)continue}else continue;const q=Math.floor(y*((i[0]-T[0])/j-B[1]*F[0])),H=Math.floor(y*((T[1]-i[1])/j-B[2]*F[1])),oe=Math.round(y*o.getGutterForProjection(a.projection));return this.getImageData(N,q+oe,H+oe)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),f=o.getRenderSource(),y=f.getTileGridForProjection(a.projection),x=Qo(f);x in e.wantedTiles||(e.wantedTiles[x]={});const B=e.wantedTiles[x],O=o.getMapInternal(),T=Math.max(r-s,y.getMinZoom(),y.getZForResolution(Math.min(o.getMaxResolution(),O?O.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):y.getResolution(0)),f.zDirection)),F=a.rotation,j=F?vz(a.center,a.resolution,F,e.size):void 0;for(let N=r;N>=T;--N){const q=y.getTileRangeForExtentAndZ(t,N,this.tempTileRange_),H=y.getResolution(N);for(let oe=q.minX;oe<=q.maxX;++oe)for(let ne=q.minY;ne<=q.maxY;++ne){if(F&&!y.tileCoordIntersectsViewport([N,oe,ne],j))continue;const $=this.getTile(N,oe,ne,e);if(!$||!h5(i,$,N))continue;const G=$.getKey();if(B[G]=!0,$.getState()===Nr.IDLE&&!e.tileQueue.isKeyQueued(G)){const ie=Z2(N,oe,ne,this.tempTileCoord_);e.tileQueue.enqueue([$,x,y.getTileCoordCenter(ie),H])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let f=0;f<o.length;++f){const y=d5(o[f],i,s,a);if(r.containsKey(y)){const x=r.peek(y);if(x.getState()===Nr.LOADED)return x.endTransition(Qo(this)),h5(t,x,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,y=this.getLayer().getRenderSource().getKey();for(let x=s.minX;x<=s.maxX;++x)for(let B=s.minY;B<=s.maxY;++B){const O=d5(y,r,x,B);let T=!1;if(o.containsKey(O)){const F=o.peek(O);F.getState()===Nr.LOADED&&(h5(i,F,r),T=!0)}T||(a=!1)}return a}renderFrame(e,t){let r=!0;this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,a=s.projection,o=s.resolution,f=s.center,y=e.pixelRatio,x=this.getLayer(),B=x.getSource(),O=B.getTileGridForProjection(a),T=O.getZForResolution(o,B.zDirection),F=O.getResolution(T),j=B.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==j&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=j):this.renderedSourceKey_=j;let N=e.extent;const q=B.getTilePixelRatio(y);this.prepareContainer(e,t);const H=this.context.canvas.width,oe=this.context.canvas.height,ne=i.extent&&om(i.extent);ne&&(N=Ep(N,om(i.extent)));const $=F*H/2/q,te=F*oe/2/q,G=[f[0]-$,f[1]-te,f[0]+$,f[1]+te],ie={};this.renderedTiles.length=0;const he=x.getPreload();if(e.nextExtent){const We=O.getZForResolution(s.nextResolution,B.zDirection),Me=fk(e,e.nextExtent);this.enqueueTiles(e,Me,We,ie,he)}const pe=fk(e,N);if(this.enqueueTiles(e,pe,T,ie,0),he>0&&setTimeout(()=>{this.enqueueTiles(e,pe,T-1,ie,he-1)},0),!(T in ie))return this.container;const Ee=Qo(this),me=e.time;for(const We of ie[T]){const Me=We.getState();if(Me===Nr.EMPTY)continue;const Fe=We.tileCoord;if(Me===Nr.LOADED&&We.getAlpha(Ee,me)===1){We.endTransition(Ee);continue}if(Me!==Nr.IDLE&&(r=!1),Me!==Nr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Fe,ie)){Kre(ie,We,T),e.animate=!0;continue}if(this.findAltTiles_(O,Fe,T+1,ie))continue;const Yt=O.getMinZoom();for(let gt=T-1;gt>=Yt&&!this.findAltTiles_(O,Fe,gt,ie);--gt);}const Se=F/o*y/q,De=this.getRenderContext(e);dm(this.tempTransform,H/2,oe/2,Se,Se,0,-H/2,-oe/2),i.extent&&this.clipUnrotated(De,e,ne),B.getInterpolate()||(De.imageSmoothingEnabled=!1),this.preRender(De,e);const be=Object.keys(ie).map(Number);be.sort(Gm);let at;const Ze=[],Je=[];for(let We=be.length-1;We>=0;--We){const Me=be[We],Fe=B.getTilePixelSize(Me,y,a),bt=O.getResolution(Me)/F,Yt=Fe[0]*bt*Se,gt=Fe[1]*bt*Se,Lt=O.getTileCoordForCoordAndZ(Xm(G),Me),Kt=O.getTileCoordExtent(Lt),Ue=EA(this.tempTransform,[q*(Kt[0]-G[0])/F,q*(G[3]-Kt[3])/F]),Pe=q*B.getGutterForProjection(a);for(const Be of ie[Me]){if(Be.getState()!==Nr.LOADED)continue;const it=Be.tileCoord,_t=Lt[1]-it[1],ft=Math.round(Ue[0]-(_t-1)*Yt),Ut=Lt[2]-it[2],rn=Math.round(Ue[1]-(Ut-1)*gt),Dt=Math.round(Ue[0]-_t*Yt),_n=Math.round(Ue[1]-Ut*gt),qn=ft-Dt,tn=rn-_n,rr=be.length===1;let Dn=!1;at=[Dt,_n,Dt+qn,_n,Dt+qn,_n+tn,Dt,_n+tn];for(let pn=0,Zn=Ze.length;pn<Zn;++pn)if(!rr&&Me<Je[pn]){const dr=Ze[pn];Fu([Dt,_n,Dt+qn,_n+tn],[dr[0],dr[3],dr[4],dr[7]])&&(Dn||(De.save(),Dn=!0),De.beginPath(),De.moveTo(at[0],at[1]),De.lineTo(at[2],at[3]),De.lineTo(at[4],at[5]),De.lineTo(at[6],at[7]),De.moveTo(dr[6],dr[7]),De.lineTo(dr[4],dr[5]),De.lineTo(dr[2],dr[3]),De.lineTo(dr[0],dr[1]),De.clip())}Ze.push(at),Je.push(Me),this.drawTile(Be,e,Dt,_n,qn,tn,Pe,rr),Dn&&De.restore(),this.renderedTiles.unshift(Be),this.updateUsedTiles(e.usedTiles,B,Be)}}if(this.renderedResolution=F,this.extentChanged=!this.renderedExtent_||!Hm(this.renderedExtent_,G),this.renderedExtent_=G,this.renderedPixelRatio=y,this.postRender(this.context,e),i.extent&&De.restore(),De.imageSmoothingEnabled=!0,this.renderComplete){const We=(Me,Fe)=>{const He=Qo(B),bt=Fe.wantedTiles[He],Yt=bt?Object.keys(bt).length:0;this.updateCacheSize(Yt),this.tileCache_.expireCache()};e.postRenderFunctions.push(We)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,f){let y;if(e instanceof ck){if(y=CB(e.getData()),!y)throw new Error("Rendering array data is not yet supported")}else y=this.getTileImage(e);if(!y)return;const x=this.getRenderContext(t),B=Qo(this),O=t.layerStatesArray[t.layerIndex],T=O.opacity*(f?e.getAlpha(B,t.time):1),F=T!==x.globalAlpha;F&&(x.save(),x.globalAlpha=T),x.drawImage(y,o,o,y.width-2*o,y.height-2*o,r,i,s,a),F&&x.restore(),T!==O.opacity?t.animate=!0:f&&e.endTransition(B)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Qo(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const L0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Dre extends lv{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(L0.PRELOAD)}setPreload(e){this.set(L0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(L0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(L0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class kj extends Dre{constructor(e){super(e)}createRenderer(){return new Ij(this,{cacheSize:this.getCacheSize()})}}function bB(n){return Array.isArray(n)?Math.min(...n):n}class Rre extends w8{constructor(e,t,r,i,s,a,o){let f=e.getExtent();f&&e.canWrapX()&&(f=f.slice(),f[0]=-1/0,f[2]=1/0);let y=t.getExtent();y&&t.canWrapX()&&(y=y.slice(),y[0]=-1/0,y[2]=1/0);const x=y?Ep(r,y):r,B=Hf(x),O=_B(e,t,B,i),T=Bj,F=new Ej(e,t,x,f,O*T,i),j=F.calculateSourceExtent(),N=n1(j)?null:a(j,O,s),q=N?hi.IDLE:hi.EMPTY,H=N?N.getPixelRatio():1;super(r,i,H,q),this.targetProj_=t,this.maxSourceExtent_=f,this.triangulation_=F,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=N,this.sourcePixelRatio_=H,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==hi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==hi.LOADED){const t=Rs(this.targetExtent_)/this.targetResolution_,r=lA(this.targetExtent_)/this.targetResolution_;this.canvas_=Sj(t,r,this.sourcePixelRatio_,bB(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==hi.IDLE){this.state=hi.LOADING,this.changed();const e=this.sourceImage_.getState();e==hi.LOADED||e==hi.ERROR?this.reproject_():(this.sourceListenerKey_=Ds(this.sourceImage_,uo.CHANGE,t=>{const r=this.sourceImage_.getState();(r==hi.LOADED||r==hi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ul(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Tb=4,f5={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Fre extends Ip{constructor(e,t){super(e),this.image=t}}class Tj extends sv{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Gx(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Wg(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Wg(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Hm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Rre(s,i,e,t,r,(a,o,f)=>this.getImageInternal(a,o,f,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=Lre(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&im(this.wantedExtent_,s)||im(this.image.getExtent(),s))&&(this.wantedResolution_&&bB(this.wantedResolution_)===a||bB(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new w8(s,a,r,this.loader),this.image.addEventListener(uo.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case hi.LOADING:this.loading=!0,r=f5.IMAGELOADSTART;break;case hi.LOADED:this.loading=!1,r=f5.IMAGELOADEND;break;case hi.ERROR:this.loading=!1,r=f5.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new Fre(r,t))}}function Lre(n,e,t,r){const i=e/t,s=Hf(n),a=K0(Rs(n)/i,Tb),o=K0(lA(n)/i,Tb),f=K0((r-1)*a/2,Tb),y=a+2*f,x=K0((r-1)*o/2,Tb),B=o+2*x;return L2(s,i,0,[y,B])}const F1=[0,0,0],E0=5;class A3{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Js(XX(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Js(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Xm(r)),Js(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Js(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:eO,Js(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new lO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,f=i.maxY;o<=f;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,f=null,y=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):f=this.getTileCoordExtent(e,i);y>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=D1(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(f,y,r),t(y,s))return!0;--y}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return D1(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return D1(s,a,s,a,r);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,t-i),y=Math.floor(s*f),x=Math.floor(a*f);if(t<i)return D1(y,y,x,x,r);const B=Math.floor(f*(s+1))-1,O=Math.floor(f*(a+1))-1;return D1(y,B,x,O,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,F1);const i=F1[1],s=F1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,F1);const a=F1[1],o=F1[2];return D1(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=md(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=md(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,f=a+s[0]*i,y=o+s[1]*i;return Vm(a,o,f,y,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),f=this.getOrigin(a),y=md(this.getTileSize(a),this.tmpSize_);let x=o*(e-f[0])/r/y[0],B=o*(f[1]-t)/r/y[1];return i?(x=K0(x,E0)-1,B=K0(B,E0)-1):(x=Cb(x,E0),B=Cb(B,E0)),Z2(a,x,B,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),f=md(this.getTileSize(r),this.tmpSize_);let y=(e-a[0])/o/f[0],x=(a[1]-t)/o/f[1];return i?(y=K0(y,E0)-1,x=K0(x,E0)-1):(y=Cb(y,E0),x=Cb(x,E0)),Z2(r,y,x,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Gx(this.resolutions_,e,t||0);return BA(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Nz(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function Pj(n){let e=n.getDefaultTileGrid();return e||(e=jre(n),n.setDefaultTileGrid(e)),e}function Ure(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=c3(t);if(!$g(s,i)){const a=Rs(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function zre(n,e,t,r){r=r!==void 0?r:"top-left";const i=Kj(n,e,t);return new A3({extent:n,origin:mJ(n,r),resolutions:i,tileSize:t})}function cO(n){const e=n||{},t=e.extent||Ma("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Kj(t,e.maxZoom,e.tileSize,e.maxResolution)};return new A3(r)}function Kj(n,e,t,r){e=e!==void 0?e:dj,t=md(t!==void 0?t:eO);const i=lA(n),s=Rs(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let f=0;f<a;++f)o[f]=r/Math.pow(2,f);return o}function jre(n,e,t,r){const i=c3(n);return zre(i,e,t,r)}function c3(n){n=Ma(n);let e=n.getExtent();if(!e){const t=180*V0.degrees/n.getMetersPerUnit();e=Vm(-t,-t,t,t)}return e}class Dj extends sv{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&md(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Qo(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return wo()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Pj(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=md(i.getTileSize(e),this.tmpSize);return s==1?a:dJ(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Ure(i,e,r)),Pre(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Nre extends Ip{constructor(e,t){super(e),this.tile=t}}function Rj(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,a=e.height,o=t.length,f=t[0].byteLength;if(i){const O=new Array(o);for(let F=0;F<o;++F)O[F]=new ImageData(new Uint8ClampedArray(t[F]),s,a);return n(O,r).data.buffer}const y=new Uint8ClampedArray(f),x=new Array(o),B=new Array(o);for(let O=0;O<o;++O)x[O]=new Uint8ClampedArray(t[O]),B[O]=[0,0,0,0];for(let O=0;O<f;O+=4){for(let F=0;F<o;++F){const j=x[F];B[F][0]=j[O],B[F][1]=j[O+1],B[F][2]=j[O+2],B[F][3]=j[O+3]}const T=n(B,r);y[O]=T[0],y[O+1]=T[1],y[O+2]=T[2],y[O+3]=T[3]}return y.buffer}}function Wre(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+Rj.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function Gre(n,e){const t=Rj(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class Qre extends h_{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=Wre(e,this.onWorkerMessage_.bind(this,i));else r[0]=Gre(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(f){return f.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const a=e.inputs[0].data.length,o=4*Math.ceil(a/4/s);for(let f=0;f<s;++f){const y=f*o,x=[];for(let B=0,O=i.length;B<O;++B)x.push(i[B].slice(y,y+o));this.workers_[f].postMessage({buffers:x,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},x)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const a=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const f=this.dataLookup_[o].buffer,y=o*a;r.set(new Uint8ClampedArray(f),y),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const pk={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class mk extends Ip{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class Fj extends Tj{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=$re(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(uo.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new pj(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:_h(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:Yre(this.layers_),pixelRatio:1,pixelToCoordinateTransform:_h(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Qo(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let a=0,o=e.sources.length;a<o;++a){const f=e.sources[a],y=f instanceof sv?f:f.getSource();if(!y)continue;const x=(s=y.getAttributions())==null?void 0:s(r);typeof x=="string"?i.push(x):x!==void 0&&i.push(...x)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Qre({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Hf(e);i.size[0]=Math.ceil(Rs(e)/t),i.size[1]=Math.ceil(lA(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const a=i.viewState;return a.center=s,a.projection=r,a.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const a=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==a||!Hm(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const a=qre(this.layers_[s],e);if(a)r[s]=a;else return}const i={};this.dispatchEvent(new mk(pk.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,a=e.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!Hm(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const f=Math.round(Rs(s)/a),y=Math.round(lA(s)/a);o=Lu(f,y),this.renderedImageCanvas_=new ene(s,a,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new mk(pk.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Fj.prototype.dispose;let vg=null;function qre(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let a;if(s instanceof HTMLCanvasElement)a=s;else{if(s&&(a=s.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===r&&a.height===i)return a.getContext("2d").getImageData(0,0,r,i)}if(!vg)vg=Lu(r,i,void 0,{willReadFrequently:!0});else{const o=vg.canvas;o.width!==r||o.height!==i?vg=Lu(r,i,void 0,{willReadFrequently:!0}):vg.clearRect(0,0,r,i)}return vg.drawImage(a,0,0,r,i),vg.getImageData(0,0,r,i)}function Yre(n){return n.map(function(e){return e.getLayerState()})}function $re(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=Vre(n[r]);return t}function Vre(n){let e;return n instanceof sv?n instanceof Dj?e=new kj({source:n}):n instanceof Tj&&(e=new Mj({source:n})):e=n,e}function Hre(n,e,t,r){const i=document.createElement("script"),s="olc_"+Qo(e);function a(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){a(),t&&t()},1e4);window[s]=function(f){clearTimeout(o),a(),e(f)},document.head.appendChild(i)}const Zre=/\{z\}/g,Xre=/\{x\}/g,Jre=/\{y\}/g,eie=/\{-y\}/g;function tie(n,e,t,r,i){return n.replace(Zre,e.toString()).replace(Xre,t.toString()).replace(Jre,r.toString()).replace(eie,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function nie(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function rie(n,e){return function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return tie(n,a,t[1],t[2],s)}}function Lj(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=rie(n[i],e);return iie(r)}function iie(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=kre(e),s=Ng(i,n.length);return n[s](e,t,r)}}const p5={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class d3 extends Dj{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===d3.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Qo(t),i=t.getState();let s;i==Nr.LOADING?(this.tileLoadingKeys_[r]=!0,s=p5.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Nr.ERROR?p5.TILELOADERROR:i==Nr.LOADED?p5.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Nre(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=nie(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Lj(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class oie extends d3{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:sie,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:fj,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Wg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Wg(t,e)))return this.tileGrid;const r=Qo(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Pj(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],f=this.getTileCoordForTileUrlFunction(o,s),y=f?this.tileUrlFunction(f,i,s):void 0,x=new this.tileClass(o,y!==void 0?Nr.IDLE:Nr.EMPTY,y!==void 0?y:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=a,x.addEventListener(uo.CHANGE,this.handleTileChange.bind(this)),x}getTile(e,t,r,i,s){const a=this.getProjection();if(!a||!s||Wg(a,s))return this.getTileInternal(e,t,r,i,a||s);const o=[e,t,r],f=this.getKey(),y=this.getTileGridForProjection(a),x=this.getTileGridForProjection(s),B=this.getTileCoordForTileUrlFunction(o,s),O=new Oj(a,y,s,x,o,B,this.getTilePixelRatio(i),this.getGutter(),(T,F,j,N)=>this.getTileInternal(T,F,j,N,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return O.key=f,O}getTileInternal(e,t,r,i,s){const a=this.getKey();return this.createTile_(e,t,r,i,s,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Ma(e);if(r){const i=Qo(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function sie(n,e){n.getImage().src=e}class Uj extends oie{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Ma("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Hre(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Ma("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const y=v_(t,r);i=vJ(e.bounds,y)}const s=c3(r),a=e.minzoom||0,o=e.maxzoom||22,f=cO({extent:s,maxZoom:o,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=f,this.tileUrlFunction=Lj(e.tiles,f),e.attribution&&!this.getAttributions()){const y=i!==void 0?i:s;this.setAttributions(function(x){return Fu(y,x.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const aie={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},gk={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class lie extends Ij{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=_h(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,a,o,f){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,a,o,f)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,f=i.viewHints;return(!(f[Yl.ANIMATING]||f[Yl.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),a=i.getRenderOrder()||null,o=e.wantedResolution,f=e.getReplayState(i);if(!f.dirty&&f.renderedResolution===o&&f.renderedRevision==s&&f.renderedRenderOrder==a)return;const y=i.getSource(),x=!!i.getDeclutter(),B=y.getTileGrid(),T=y.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),F=y.getSourceTiles(t,r,e),j=Qo(i);delete e.hitDetectionImageData[j],e.executorGroups[j]=[],f.dirty=!1;for(let N=0,q=F.length;N<q;++N){const H=F[N];if(H.getState()!=Nr.LOADED)continue;const oe=H.tileCoord,ne=B.getTileCoordExtent(oe),$=Ep(T,ne),te=W0($,i.getRenderBuffer()*o,this.tempExtent),G=Hm(ne,$)?null:te,ie=new Jz(0,$,o,t),he=hB(o,t),pe=function(be,at){let Ze;const Je=be.getStyleFunction()||i.getStyleFunction();if(Je&&(Ze=Je(be,o)),Ze){const We=this.renderFeature(be,he,Ze,ie,x,at);f.dirty=f.dirty||We}},Ee=H.getFeatures();a&&a!==f.renderedRenderOrder&&Ee.sort(a);for(let be=0,at=Ee.length;be<at;++be){const Ze=Ee[be];(!G||Fu(G,Ze.getGeometry().getExtent()))&&pe.call(this,Ze,be)}const me=ie.finish(),Se=i.getRenderMode()!=="vector"&&x&&F.length===1?null:$,De=new ej(Se,o,t,y.getOverlaps(),me,i.getRenderBuffer(),!0);e.executorGroups[j].push(De)}f.renderedRevision=s,f.renderedRenderOrder=a,f.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){var oe,ne;const a=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const f=this.getLayer(),x=f.getSource().getTileGridForProjection(t.viewState.projection),B=tB([e]);W0(B,a*r,B);const O={},T=function($,te,G){let ie=$.getId();ie===void 0&&(ie=Qo($));const he=O[ie];if(he){if(he!==!0&&G<he.distanceSq){if(G===0)return O[ie]=!0,s.splice(s.lastIndexOf(he),1),i($,f,te);he.geometry=te,he.distanceSq=G}}else{if(G===0)return O[ie]=!0,i($,f,te);s.push(O[ie]={feature:$,layer:f,geometry:te,distanceSq:G,callback:i})}},F=this.renderedTiles,j=Qo(f),N=f.getDeclutter(),q=N?(ne=(oe=t.declutter)==null?void 0:oe[N])==null?void 0:ne.all().map($=>$.value):null;let H;e:for(let $=0,te=F.length;$<te;++$){const G=F[$],ie=x.getTileCoordExtent(G.wrappedTileCoord);if(!Fu(ie,B))continue;const he=G.executorGroups[j];for(let pe=0,Ee=he.length;pe<Ee;++pe)if(H=he[pe].forEachFeatureAtCoordinate(e,a,o,r,T,q),H)break e}return H}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),a=this.renderedProjection,o=a.getExtent(),f=this.renderedResolution,y=s.getTileGridForProjection(a),x=EA(this.renderedPixelToCoordinateTransform_,e.slice()),B=y.getTileCoordForCoordAndResolution(x,f).toString(),O=this.renderedTiles.find(oe=>oe.tileCoord.toString()===B&&oe.getState()===Nr.LOADED);if(!O||O.loadingSourceTiles>0){t([]);return}s.getWrapX()&&a.canWrapX()&&!im(o,y.getTileCoordExtent(O.tileCoord))&&D8(x,a);const T=Qo(i),F=y.getTileCoordExtent(O.wrappedTileCoord),j=Xm(F),N=[(x[0]-j[0])/f,(j[1]-x[1])/f],q=O.getSourceTiles().reduce((oe,ne)=>oe.concat(ne.getFeatures()),[]);let H=O.hitDetectionImageData[T];if(!H){const oe=md(y.getTileSize(y.getZForResolution(f,s.zDirection))),ne=this.renderedRotation_,$=[this.getRenderTransform(y.getTileCoordCenter(O.wrappedTileCoord),f,0,sf,oe[0]*sf,oe[1]*sf,0)];H=tj(oe,$,q,i.getStyleFunction(),y.getTileCoordExtent(O.wrappedTileCoord),O.getReplayState(i).renderedResolution,ne),O.hitDetectionImageData[T]=H}t(nj(N,q,H))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),a=s.getZForResolution(this.renderedResolution),o={};return r.forEach(f=>{if(f.tileCoord[0]!==a||f.getState()!==Nr.LOADED)return;const y=f.getSourceTiles();for(let x=0,B=y.length;x<B;++x){const O=y[x],T=O.getKey();if(T in o)continue;o[T]=!0;const F=O.tileCoord;if(Fu(e,s.getTileCoordExtent(F))){const j=O.getFeatures();if(j)for(let N=0,q=j.length;N<q;++N){const H=j[N],oe=H.getGeometry();Fu(e,oe.getExtent())&&t.push(H)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var O;const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,a=!(s[Yl.ANIMATING]||s[Yl.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],f=this.getLayer().getDeclutter(),y=f?(O=e.declutter)==null?void 0:O[f]:void 0,x=Qo(this.getLayer()),B=this.renderedTiles;for(let T=0,F=B.length;T<F;++T){const j=B[T],N=j.executorGroups[x];if(N)for(let q=N.length-1;q>=0;--q)N[q].execute(this.context,o,this.getTileRenderTransform(j,e),e.viewState.rotation,a,Y2,y)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Qo(this.getLayer()),i=t.reduce((f,y,x)=>(y.executorGroups[r].forEach(B=>f.push({executorGroup:B,index:x})),f),[]),s=i.map(({executorGroup:f})=>f.getDeferredZIndexContexts()),a={};for(let f=0,y=i.length;f<y;++f){const x=i[f].executorGroup.getDeferredZIndexContexts();for(const B in x)a[B]=!0}Object.keys(a).map(Number).sort(Gm).forEach(f=>{s.forEach((y,x)=>{y[f]&&(y[f].forEach(B=>{const{executorGroup:O,index:T}=i[x],F=O.getRenderedContext(),j=F.globalAlpha;F.globalAlpha=this.renderedOpacity_;const N=this.tileClipContexts_[T];N&&N.draw(F),B.draw(F),N&&F.restore(),F.globalAlpha=j,B.clear()}),y[f].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,a=i.resolution,o=i.rotation,f=t.size,y=Math.round(f[0]*r),x=Math.round(f[1]*r),O=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),T=e.tileCoord,F=O.getTileCoordExtent(e.wrappedTileCoord),j=O.getTileCoordExtent(T,this.tempExtent)[0]-F[0];return j8(Z4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,a,o,r,y,x,j))}postRender(e,t){var $;const r=t.viewHints,i=!(r[Yl.ANIMATING]||r[Yl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),a=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const f=s.getDeclutter(),y=f?gk[a].filter(te=>!Y2.includes(te)):gk[a],x=t.viewState,B=x.rotation,O=s.getSource(),F=O.getTileGridForProjection(x.projection).getZForResolution(x.resolution,O.zDirection),j=this.renderedTiles,N=[],q=[],H=[],oe=Qo(s);let ne=!0;for(let te=j.length-1;te>=0;--te){const G=j[te];ne=ne&&!G.getReplayState(s).dirty;const ie=G.executorGroups[oe].filter(be=>be.hasExecutors(y));if(ie.length===0)continue;const he=this.getTileRenderTransform(G,t),pe=G.tileCoord[0];let Ee=!1;const me=ie[0].getClipCoords(he);let Se=e,De;if(me){De=new Y8,Se=De.getContext();for(let be=0,at=N.length;be<at;++be)if(F!==pe&&pe<q[be]){const Ze=N[be];Fu([me[0],me[3],me[4],me[7]],[Ze[0],Ze[3],Ze[4],Ze[7]])&&(Ee||(Se.save(),Ee=!0),Se.beginPath(),Se.moveTo(me[0],me[1]),Se.lineTo(me[2],me[3]),Se.lineTo(me[4],me[5]),Se.lineTo(me[6],me[7]),Se.moveTo(Ze[6],Ze[7]),Se.lineTo(Ze[4],Ze[5]),Se.lineTo(Ze[2],Ze[3]),Se.lineTo(Ze[0],Ze[1]),Se.clip())}N.push(me),q.push(pe)}for(let be=0,at=ie.length;be<at;++be)ie[be].execute(e,[e.canvas.width,e.canvas.height],he,B,i,y,($=t.declutter)==null?void 0:$[f]);Ee&&(Se===e?Se.restore():H[te]=De)}e.globalAlpha=o,this.ready=ne,this.tileClipContexts_=H,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,a){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let f=0,y=r.length;f<y;++f)o=Q2(i,e,r[f],t,this.boundHandleStyleImageChange_,void 0,s,a)||o;else o=Q2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,a);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),a=e.executorGroups[Qo(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,f=o[0],y=r.getSource();let x=t.pixelRatio;const O=t.viewState.projection,T=y.getTileGridForProjection(O),F=T.getResolution(e.tileCoord[0]),j=t.pixelRatio/e.wantedResolution*F,N=T.getResolution(f),q=e.getContext();x=Math.round(Math.max(x,j/x));const H=y.getTilePixelSize(f,x,O);q.canvas.width=H[0],q.canvas.height=H[1];const oe=x/j;if(oe!==1){const G=I9(this.tmpTransform_);Z4(G,oe,oe),q.setTransform.apply(q,G)}const ne=T.getTileCoordExtent(o,this.tempExtent),$=j/N,te=I9(this.tmpTransform_);Z4(te,$,-$),uee(te,-ne[0],-ne[3]);for(let G=0,ie=a.length;G<ie;++G)a[G].execute(q,[q.canvas.width*oe,q.canvas.height*oe],te,0,!0,aie[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class vC extends nO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";Js(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new lie(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(L0.PRELOAD)}getUseInterimTilesOnError(){return this.get(L0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(L0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(L0.USE_INTERIM_TILES_ON_ERROR,e)}}class zj extends d3{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||c3(t),i=e.tileGrid||cO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:jj,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:bj,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Nr.IDLE){r.setState(Nr.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),a=s.getTileCoordExtent(i),o=i[0],f=s.getResolution(o);W0(a,-f,a);const y=this.tileGrid,x=y.getExtent();x&&Ep(a,x,a);const B=y.getZForResolution(f,this.zDirection);y.forEachTileCoord(a,B,O=>{const T=this.tileUrlFunction(O,e,t);this.sourceTiles_[T]||(this.sourceTiles_[T]=new this.tileClass(O,T?Nr.IDLE:Nr.EMPTY,T,this.format_,this.tileLoadFunction));const F=this.sourceTiles_[T];r.sourceTiles.push(F),this.tileKeysBySourceTileUrl_[T]||(this.tileKeysBySourceTileUrl_[T]=[]),this.tileKeysBySourceTileUrl_[T].push(r.getKey());const j=F.getState();if(j<Nr.LOADED){const N=q=>{this.handleTileChange(q);const H=F.getState();if(H===Nr.LOADED||H===Nr.ERROR){const oe=F.getKey();oe in r.errorTileKeys?F.getState()===Nr.LOADED&&delete r.errorTileKeys[oe]:r.loadingSourceTiles--,H===Nr.ERROR?r.errorTileKeys[oe]=!0:F.removeEventListener(uo.CHANGE,N),r.loadingSourceTiles===0&&r.setState($0(r.errorTileKeys)?Nr.LOADED:Nr.ERROR)}};F.addEventListener(uo.CHANGE,N),r.loadingSourceTiles++}j===Nr.IDLE&&(F.extent=y.getTileCoordExtent(O),F.projection=t,F.resolution=y.getResolution(O[0]),F.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(O=>O.getState()===Nr.ERROR)?Nr.ERROR:Nr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const a=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[a])return;const o=this.tileKeysBySourceTileUrl_[a].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[a].splice(o,1),this.tileKeysBySourceTileUrl_[a].length===0&&(delete this.tileKeysBySourceTileUrl_[a],delete this.sourceTiles_[a]))}}getTile(e,t,r,i,s){const a=[e,t,r];let o=this.getTileCoordForTileUrlFunction(a,s);const f=this.getTileGrid().getExtent(),y=this.getTileGridForProjection(s);if(o&&f){const O=y.getTileCoordExtent(o);W0(O,-y.getResolution(e),O),Fu(f,O)||(o=null)}let x=!0;if(o!==null){const O=this.tileGrid,T=y.getResolution(e),F=O.getZForResolution(T,1),j=y.getTileCoordExtent(o);W0(j,-T,j),O.forEachTileCoord(j,F,N=>{x=x&&!this.tileUrlFunction(N,i,s)})}const B=new Kne(a,x?Nr.EMPTY:Nr.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return B.key=this.getKey(),B}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.tileGrid,s=i.getResolutions().slice(),a=s.map(function(y,x){return i.getOrigin(x)}),o=s.map(function(y,x){return i.getTileSize(x)}),f=dj+1;for(let y=s.length;y<f;++y)s.push(s[y-1]/2),a.push(a[y-1]),o.push(o[y-1]);r=new A3({extent:i.getExtent(),origins:a,resolutions:s,tileSizes:o}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=md(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function jj(n,e){n.setLoader(function(t,r,i){Hz(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function Nj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uie={},Wj,yk={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function CC(n){return n=Math.round(n),n<0?0:n>255?255:n}function vk(n){return n<0?0:n>1?1:n}function m5(n){return n[n.length-1]==="%"?CC(parseFloat(n)/100*255):CC(parseInt(n))}function Pb(n){return n[n.length-1]==="%"?vk(parseFloat(n)/100):vk(parseFloat(n))}function g5(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Aie(n){var e=n.replace(/ /g,"").toLowerCase();if(e in yk)return yk[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var r=e.indexOf("("),i=e.indexOf(")");if(r!==-1&&i+1===e.length){var s=e.substr(0,r),a=e.substr(r+1,i-(r+1)).split(","),o=1;switch(s){case"rgba":if(a.length!==4)return null;o=Pb(a.pop());case"rgb":return a.length!==3?null:[m5(a[0]),m5(a[1]),m5(a[2]),o];case"hsla":if(a.length!==4)return null;o=Pb(a.pop());case"hsl":if(a.length!==3)return null;var f=(parseFloat(a[0])%360+360)%360/360,y=Pb(a[1]),x=Pb(a[2]),B=x<=.5?x*(y+1):x+y-x*y,O=x*2-B;return[CC(g5(O,B,f+1/3)*255),CC(g5(O,B,f)*255),CC(g5(O,B,f-1/3)*255),o];default:return null}}return null}try{Wj=uie.parseCSSColor=Aie}catch{}class bh{constructor(e,t,r,i=1){this.r=e,this.g=t,this.b=r,this.a=i}static parse(e){if(!e)return;if(e instanceof bh)return e;if(typeof e!="string")return;const t=Wj(e);if(t)return new bh(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,r,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${i})`}toArray(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e*255/i,t*255/i,r*255/i,i]}toArray01(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e/i,t/i,r/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:i}=this;return[e,t,r,i]}}bh.black=new bh(0,0,0,1);bh.white=new bh(1,1,1,1);bh.transparent=new bh(0,0,0,0);bh.red=new bh(1,0,0,1);bh.blue=new bh(0,0,1,1);var uf=bh;function VC(n){return typeof n=="object"?["literal",n]:n}function cie(n,e){let t=n.stops;if(!t)return die(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],mie(a[1])]:[a[0],VC(a[1])]),r?hie(n,e,t):s?pie(n,e,t):xB(n,e,t)}function die(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,VC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function dO(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function hie(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const f=t[o],y=f[0].zoom;r[y]===void 0&&(r[y]={zoom:y,type:n.type,property:n.property,default:n.default},i[y]=[],s.push(y)),i[y].push([f[0].value,f[1]])}if(fO({},e)==="exponential"){const o=[dO(n),["linear"],["zoom"]];for(const f of s){const y=xB(r[f],e,i[f]);ky(o,f,y,!1)}return o}else{const o=["step",["zoom"]];for(const f of s){const y=xB(r[f],e,i[f]);ky(o,f,y,!0)}return hO(o),o}}function fie(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function Ck(n,e){const t=VC(fie(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function xB(n,e,t){const r=fO(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(Ck(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)ky(s,a[0],a[1],!1);return s.push(Ck(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)ky(s,a[0],a[1],!0);return hO(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,VC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[dO(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)ky(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,VC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function pie(n,e,t,r=["zoom"]){const i=fO(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[dO(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)ky(s,o[0],o[1],a);return hO(s),s}function hO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function ky(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function fO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function mie(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}class gie extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var tm=gie;class pO{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new pO(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var yie=pO;const h3={kind:"null"},Ir={kind:"number"},cs={kind:"string"},$o={kind:"boolean"},Ym={kind:"color"},Ty={kind:"object"},Ho={kind:"value"},vie={kind:"error"},f3={kind:"collator"},p3={kind:"formatted"},E_={kind:"resolvedImage"};function Wf(n,e){return{kind:"array",itemType:n,N:e}}function Vl(n){if(n.kind==="array"){const e=Vl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const Cie=[h3,Ir,cs,$o,Ym,p3,Ty,Wf(Ho),E_];function HC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!HC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of Cie)if(!HC(t,e))return null}}return`Expected ${Vl(n)} but found ${Vl(e)} instead.`}function mO(n,e){return e.some(t=>t.kind===n.kind)}function ZC(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}class gO{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class wB{constructor(e,t,r,i,s){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s}}class Am{constructor(e){this.sections=e}static fromString(e){return new Am([new wB(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Am?e:Am.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class Z0{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Z0({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Gj(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function X2(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof uf)return!0;if(n instanceof gO)return!0;if(n instanceof Am)return!0;if(n instanceof Z0)return!0;if(Array.isArray(n)){for(const e of n)if(!X2(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!X2(n[e]))return!1;return!0}else return!1}function nc(n){if(n===null)return h3;if(typeof n=="string")return cs;if(typeof n=="boolean")return $o;if(typeof n=="number")return Ir;if(n instanceof uf)return Ym;if(n instanceof gO)return f3;if(n instanceof Am)return p3;if(n instanceof Z0)return E_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=nc(r);if(!t)t=i;else{if(t===i)continue;t=Ho;break}}return Wf(t||Ho,e)}else return Ty}function _C(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof uf||n instanceof Am||n instanceof Z0?n.toString():JSON.stringify(n)}class yO{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!X2(e[1]))return t.error("invalid value");const r=e[1];let i=nc(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new yO(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof uf?["rgba"].concat(this.value.toArray()):this.value instanceof Am?this.value.serialize():this.value}}var J2=yO;class _ie{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var Yc=_ie;const y5={string:cs,number:Ir,boolean:$o,object:Ty};class vO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const y=e[1];if(typeof y!="string"||!(y in y5)||y==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=y5[y],r++}else o=Ho;let f;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);f=e[2],r++}i=Wf(o,f)}else i=y5[s];const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Ho);if(!o)return null;a.push(o)}return new vO(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(HC(this.type,nc(r))){if(t===this.args.length-1)throw new Yc(`Expected value to be of type ${Vl(this.type)}, but found ${Vl(nc(r))} instead.`)}else return r}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const r=e.itemType;if(r.kind==="string"||r.kind==="number"||r.kind==="boolean"){t.push(r.kind);const i=e.N;(typeof i=="number"||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map(r=>r.serialize()))}}var zm=vO;class m3{constructor(e){this.type=p3,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let f=null;if(o["font-scale"]&&(f=t.parse(o["font-scale"],1,Ir),!f))return null;let y=null;if(o["text-font"]&&(y=t.parse(o["text-font"],1,Wf(cs)),!y))return null;let x=null;if(o["text-color"]&&(x=t.parse(o["text-color"],1,Ym),!x))return null;const B=i[i.length-1];B.scale=f,B.font=y,B.textColor=x}else{const f=t.parse(e[a],1,Ho);if(!f)return null;const y=f.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new m3(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return nc(i)===E_?new wB("",i,null,null,null):new wB(_C(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)};return new Am(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class g3{constructor(e){this.type=E_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,cs);return r?new g3(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Z0.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const bie={"to-boolean":$o,"to-color":Ym,"to-number":Ir,"to-string":cs};class CO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=bie[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,Ho);if(!o)return null;s.push(o)}return new CO(i,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof uf)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=Gj(t[0],t[1],t[2],t[3]),!r))return new uf(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Yc(r||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new Yc(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Am.fromString(_C(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Z0.fromString(_C(this.args[0].evaluate(e))):_C(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new m3([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new g3(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var yy=CO;const xie=["Unknown","Point","LineString","Polygon"];class wie{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?xie[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:i}=this.featureTileCoord,s=r*t-e[0],a=i*t-e[1],o=this.featureDistanceData.bearing[0],f=this.featureDistanceData.bearing[1];return o*s+f*a}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=uf.parse(e)),t}}var Qj=wie;class vy{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const r=e[0],i=vy.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([y])=>!Array.isArray(y)||y.length===e.length-1);let f=null;for(const[y,x]of o){f=new Hj(t.registry,t.path,null,t.scope);const B=[];let O=!1;for(let T=1;T<e.length;T++){const F=e[T],j=Array.isArray(y)?y[T-1]:y.type,N=f.parse(F,1+B.length,j);if(!N){O=!0;break}B.push(N)}if(!O){if(Array.isArray(y)&&y.length!==B.length){f.error(`Expected ${y.length} arguments, but found ${B.length} instead.`);continue}for(let T=0;T<B.length;T++){const F=Array.isArray(y)?y[T]:y.type,j=B[T];f.concat(T+1).checkSubtype(F,j.type)}if(f.errors.length===0)return new vy(r,s,x,B)}}if(o.length===1)t.errors.push(...f.errors);else{const x=(o.length?o:a).map(([O])=>Mie(O)).join(" | "),B=[];for(let O=1;O<e.length;O++){const T=t.parse(e[O],1+B.length);if(!T)return null;B.push(Vl(T.type))}t.error(`Expected arguments of type ${x}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){vy.definitions=t;for(const r in t)e[r]=vy}}function Mie(n){return Array.isArray(n)?`(${n.map(Vl).join(", ")})`:`(${Vl(n.type)}...)`}var Av=vy;class y3{constructor(e,t,r){this.type=f3,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,$o);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,$o);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,cs),!a)?null:new y3(i,s,a)}evaluate(e){return new gO(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Q0=8192;function _O(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function Sie(n){return(180+n)/360}function Eie(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function ex(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Bie(n,e){const t=Sie(n[0]),r=Eie(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*Q0),Math.round(r*i*Q0)]}function Oie(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function Iie(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function bO(n,e){let t=!1;for(let r=0,i=e.length;r<i;r++){const s=e[r];for(let a=0,o=s.length;a<o-1;a++){if(Oie(n,s[a],s[a+1]))return!1;Iie(n,s[a],s[a+1])&&(t=!t)}}return t}function kie(n,e){for(let t=0;t<e.length;t++)if(bO(n,e[t]))return!0;return!1}function Tie(n,e){return n[0]*e[1]-n[1]*e[0]}function _k(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],f=r[0]-t[0],y=r[1]-t[1],x=i*y-f*s,B=a*y-f*o;return x>0&&B<0||x<0&&B>0}function Pie(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return Tie(s,i)===0?!1:!!(_k(n,e,t,r)&&_k(t,r,n,e))}function Kie(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Pie(n,e,r[i],r[i+1]))return!0;return!1}function qj(n,e){for(let t=0;t<n.length;++t)if(!bO(n[t],e))return!1;for(let t=0;t<n.length-1;++t)if(Kie(n[t],n[t+1],e))return!1;return!0}function Die(n,e){for(let t=0;t<e.length;t++)if(qj(n,e[t]))return!0;return!1}function xO(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=Bie(n[i][a],t);_O(e,o),s.push(o)}r.push(s)}return r}function Yj(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=xO(n[i],e,t);r.push(s)}return r}function $j(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}_O(e,n)}function Rie(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function bk(n,e,t,r){const i=Math.pow(2,r.z)*Q0,s=[r.x*Q0,r.y*Q0],a=[];if(!n)return a;for(const o of n)for(const f of o){const y=[f.x+s[0],f.y+s[1]];$j(y,e,t,i),a.push(y)}return a}function xk(n,e,t,r){const i=Math.pow(2,r.z)*Q0,s=[r.x*Q0,r.y*Q0],a=[];if(!n)return a;for(const o of n){const f=[];for(const y of o){const x=[y.x+s[0],y.y+s[1]];_O(e,x),f.push(x)}a.push(f)}if(e[2]-e[0]<=i/2){Rie(e);for(const o of a)for(const f of o)$j(f,e,t,i)}return a}function Fie(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=xO(e.coordinates,r,i),a=bk(n.geometry(),t,r,i);if(!ex(t,r))return!1;for(const o of a)if(!bO(o,s))return!1}if(e.type==="MultiPolygon"){const s=Yj(e.coordinates,r,i),a=bk(n.geometry(),t,r,i);if(!ex(t,r))return!1;for(const o of a)if(!kie(o,s))return!1}return!0}function Lie(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=xO(e.coordinates,r,i),a=xk(n.geometry(),t,r,i);if(!ex(t,r))return!1;for(const o of a)if(!qj(o,s))return!1}if(e.type==="MultiPolygon"){const s=Yj(e.coordinates,r,i),a=xk(n.geometry(),t,r,i);if(!ex(t,r))return!1;for(const o of a)if(!Die(o,s))return!1}return!0}class bC{constructor(e,t){this.type=$o,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(X2(e[1])){const r=e[1];if(r.type==="FeatureCollection")for(let i=0;i<r.features.length;++i){const s=r.features[i].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new bC(r,r.features[i].geometry)}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new bC(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new bC(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Fie(e,this.geometries);if(e.geometryType()==="LineString")return Lie(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wO=bC;function v3(n){if(n instanceof Av){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof wO)return!1;let e=!0;return n.eachChild(t=>{e&&!v3(t)&&(e=!1)}),e}function MO(n){if(n instanceof Av&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!MO(t)&&(e=!1)}),e}function SO(n,e){if(n instanceof Av&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!SO(r,e)&&(t=!1)}),t}class EO{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new EO(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Vj=EO;class BO{constructor(e,t=[],r,i=new yie,s=[]){this.registry=e,this.path=t,this.key=t.map(a=>`[${a}]`).join(""),this.scope=i,this.errors=s,this.expectedType=r}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new zm(s,[i]):a==="coerce"?new yy(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,f=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&f.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(f.kind==="value"||f.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,f))return null}if(!(a instanceof J2)&&a.type.kind!=="resolvedImage"&&MB(a)){const o=new Qj;try{a=new J2(a.type,a.evaluate(o))}catch(f){return this.error(f.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new BO(this.registry,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new tm(r,e))}checkSubtype(e,t){const r=HC(e,t);return r&&this.error(r),r}}var Hj=BO;function MB(n){if(n instanceof Vj)return MB(n.boundExpression);if(n instanceof Av&&n.name==="error")return!1;if(n instanceof y3)return!1;if(n instanceof wO)return!1;const e=n instanceof yy||n instanceof zm;let t=!0;return n.eachChild(r=>{e?t=t&&MB(r):t=t&&r instanceof J2}),t?v3(n)&&SO(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function Zj(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new Yc("Input is not a number.");return 0}class OO{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Ir);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],f=e[a+1],y=a,x=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const B=t.parse(f,x,s);if(!B)return null;s=s||B.type,i.push([o,B])}return new OO(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Zj(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Xj=OO,Uie=cv;function cv(n,e,t,r){this.cx=3*n,this.bx=3*(t-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=t,this.p2y=r}cv.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};cv.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};cv.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};cv.prototype.solveCurveX=function(n,e){typeof e>"u"&&(e=1e-6);var t,r,i,s,a;for(i=n,a=0;a<8;a++){if(s=this.sampleCurveX(i)-n,Math.abs(s)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i=i-s/o}if(t=0,r=1,i=n,i<t)return t;if(i>r)return r;for(;t<r;){if(s=this.sampleCurveX(i),Math.abs(s-n)<e)return i;n>s?t=i:r=i,i=(r-t)*.5+t}return i};cv.prototype.solve=function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))};var zie=Nj(Uie);function af(n,e,t){return n*(1-t)+e*t}function jie(n,e,t){return new uf(af(n.r,e.r,t),af(n.g,e.g,t),af(n.b,e.b,t),af(n.a,e.a,t))}function Nie(n,e,t){return n.map((r,i)=>af(r,e[i],t))}var Wie=Object.freeze({__proto__:null,number:af,color:jie,array:Nie});const Jj=.95047,eN=1,tN=1.08883,nN=4/29,Py=6/29,rN=3*Py*Py,Gie=Py*Py*Py,Qie=Math.PI/180,qie=180/Math.PI;function v5(n){return n>Gie?Math.pow(n,1/3):n/rN+nN}function C5(n){return n>Py?n*n*n:rN*(n-nN)}function _5(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function b5(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function iN(n){const e=b5(n.r),t=b5(n.g),r=b5(n.b),i=v5((.4124564*e+.3575761*t+.1804375*r)/Jj),s=v5((.2126729*e+.7151522*t+.072175*r)/eN),a=v5((.0193339*e+.119192*t+.9503041*r)/tN);return{l:116*s-16,a:500*(i-s),b:200*(s-a),alpha:n.a}}function oN(n){let e=(n.l+16)/116,t=isNaN(n.a)?e:e+n.a/500,r=isNaN(n.b)?e:e-n.b/200;return e=eN*C5(e),t=Jj*C5(t),r=tN*C5(r),new uf(_5(3.2404542*t-1.5371385*e-.4985314*r),_5(-.969266*t+1.8760108*e+.041556*r),_5(.0556434*t-.2040259*e+1.0572252*r),n.alpha)}function Yie(n,e,t){return{l:af(n.l,e.l,t),a:af(n.a,e.a,t),b:af(n.b,e.b,t),alpha:af(n.alpha,e.alpha,t)}}function $ie(n){const{l:e,a:t,b:r}=iN(n),i=Math.atan2(r,t)*qie;return{h:i<0?i+360:i,c:Math.sqrt(t*t+r*r),l:e,alpha:n.a}}function Vie(n){const e=n.h*Qie,t=n.c,r=n.l;return oN({l:r,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:n.alpha})}function Hie(n,e,t){const r=e-n;return n+t*(r>180||r<-180?r-360*Math.round(r/360):r)}function Zie(n,e,t){return{h:Hie(n.h,e.h,t),c:af(n.c,e.c,t),l:af(n.l,e.l,t),alpha:af(n.alpha,e.alpha,t)}}const Kb={forward:iN,reverse:oN,interpolate:Yie},Db={forward:$ie,reverse:Vie,interpolate:Zie};class tx{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=x5(t,e.base,r,i);else if(e.name==="linear")s=x5(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new zie(a[0],a[1],a[2],a[3]).solve(x5(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const y=i[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:y}}else if(i[0]==="cubic-bezier"){const y=i.slice(1);if(y.length!==4||y.some(x=>typeof x!="number"||x<0||x>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:y}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Ir),!s)return null;const o=[];let f=null;r==="interpolate-hcl"||r==="interpolate-lab"?f=Ym:t.expectedType&&t.expectedType.kind!=="value"&&(f=t.expectedType);for(let y=0;y<a.length;y+=2){const x=a[y],B=a[y+1],O=y+3,T=y+4;if(typeof x!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(o.length&&o[o.length-1][0]>=x)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const F=t.parse(B,T,f);if(!F)return null;f=f||F.type,o.push([x,F])}return f.kind!=="number"&&f.kind!=="color"&&!(f.kind==="array"&&f.itemType.kind==="number"&&typeof f.N=="number")?t.error(`Type ${Vl(f)} is not interpolatable.`):new tx(f,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=Zj(t,i),o=t[a],f=t[a+1],y=tx.interpolationFactor(this.interpolation,i,o,f),x=r[a].evaluate(e),B=r[a+1].evaluate(e);return this.operator==="interpolate"?Wie[this.type.kind.toLowerCase()](x,B,y):this.operator==="interpolate-hcl"?Db.reverse(Db.interpolate(Db.forward(x),Db.forward(B),y)):Kb.reverse(Kb.interpolate(Kb.forward(x),Kb.forward(B),y))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}function x5(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}var Gg=tx;class nx{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const f=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!f)return null;r=r||f.type,s.push(f)}return i&&s.some(o=>HC(i,o.type))?new nx(Ho,s):new nx(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args){if(r++,t=s.evaluate(e),t&&t instanceof Z0&&!t.available&&(i||(i=t),t=null,r===this.args.length))return i;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var sN=nx;class IO{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new IO(r,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var aN=IO;class kO{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ir),i=t.parse(e[2],2,Wf(t.expectedType||Ho));if(!r||!i)return null;const s=i.type;return new kO(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Yc(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Yc(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Yc(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Xie=kO;class TO{constructor(e,t){this.type=$o,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ho),i=t.parse(e[2],2,Ho);return!r||!i?null:mO(r.type,[$o,cs,Ir,h3,Ho])?new TO(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(r==null)return!1;if(!ZC(t,["boolean","string","number","null"]))throw new Yc(`Expected first argument to be of type boolean, string, number or null, but found ${Vl(nc(t))} instead.`);if(!ZC(r,["string","array"]))throw new Yc(`Expected second argument to be of type array or string, but found ${Vl(nc(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Jie=TO;class rx{constructor(e,t,r){this.type=Ir,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ho),i=t.parse(e[2],2,Ho);if(!r||!i)return null;if(!mO(r.type,[$o,cs,Ir,h3,Ho]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Ir);return s?new rx(r,i,s):null}else return new rx(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!ZC(t,["boolean","string","number","null"]))throw new Yc(`Expected first argument to be of type boolean, string, number or null, but found ${Vl(nc(t))} instead.`);if(!ZC(r,["string","array"]))throw new Yc(`Expected second argument to be of type array or string, but found ${Vl(nc(r))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return r.indexOf(t,i)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var eoe=rx;class PO{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let y=2;y<e.length-1;y+=2){let x=e[y];const B=e[y+1];Array.isArray(x)||(x=[x]);const O=t.concat(y);if(x.length===0)return O.error("Expected at least one branch label.");for(const F of x){if(typeof F!="number"&&typeof F!="string")return O.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof F=="number"&&Math.floor(F)!==F)return O.error("Numeric branch labels must be integer values.");if(!r)r=nc(F);else if(O.checkSubtype(r,nc(F)))return null;if(typeof s[String(F)]<"u")return O.error("Branch labels must be unique.");s[String(F)]=a.length}const T=t.parse(B,y,i);if(!T)return null;i=i||T.type,a.push(T)}const o=t.parse(e[1],1,Ho);if(!o)return null;const f=t.parse(e[e.length-1],e.length-1,i);return!f||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new PO(r,i,o,s,a,f)}evaluate(e){const t=this.input.evaluate(e);return(nc(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],i={};for(const a of t){const o=i[this.cases[a]];o===void 0?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[o][1].push(a)}const s=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,o]of r)o.length===1?e.push(s(o[0])):e.push(o.map(s)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var toe=PO;class KO{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,$o);if(!o)return null;const f=t.parse(e[a+1],a+1,r);if(!f)return null;i.push([o,f]),r=r||f.type}const s=t.parse(e[e.length-1],e.length-1,r);return s?new KO(r,i,s):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var noe=KO;class ix{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Ho),i=t.parse(e[2],2,Ir);if(!r||!i)return null;if(!mO(r.type,[Wf(Ho),cs,Ho]))return t.error(`Expected first argument to be of type array or string, but found ${Vl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Ir);return s?new ix(r.type,r,i,s):null}else return new ix(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!ZC(t,["string","array"]))throw new Yc(`Expected first argument to be of type array or string, but found ${Vl(nc(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(r,i)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var roe=ix;function wk(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ioe(n,e,t){return e===t}function ooe(n,e,t){return e!==t}function soe(n,e,t){return e<t}function aoe(n,e,t){return e>t}function loe(n,e,t){return e<=t}function uoe(n,e,t){return e>=t}function lN(n,e,t,r){return r.compare(e,t)===0}function Aoe(n,e,t,r){return!lN(n,e,t,r)}function coe(n,e,t,r){return r.compare(e,t)<0}function doe(n,e,t,r){return r.compare(e,t)>0}function hoe(n,e,t,r){return r.compare(e,t)<=0}function foe(n,e,t,r){return r.compare(e,t)>=0}function dv(n,e,t){const r=n!=="=="&&n!=="!=";return class uN{constructor(s,a,o){this.type=$o,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let f=a.parse(s[1],1,Ho);if(!f)return null;if(!wk(o,f.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${Vl(f.type)}'.`);let y=a.parse(s[2],2,Ho);if(!y)return null;if(!wk(o,y.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${Vl(y.type)}'.`);if(f.type.kind!==y.type.kind&&f.type.kind!=="value"&&y.type.kind!=="value")return a.error(`Cannot compare types '${Vl(f.type)}' and '${Vl(y.type)}'.`);r&&(f.type.kind==="value"&&y.type.kind!=="value"?f=new zm(y.type,[f]):f.type.kind!=="value"&&y.type.kind==="value"&&(y=new zm(f.type,[y])));let x=null;if(s.length===4){if(f.type.kind!=="string"&&y.type.kind!=="string"&&f.type.kind!=="value"&&y.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(x=a.parse(s[3],3,f3),!x)return null}return new uN(f,y,x)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const f=nc(a),y=nc(o);if(f.kind!==y.kind||!(f.kind==="string"||f.kind==="number"))throw new Yc(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${f.kind}, ${y.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const f=nc(a),y=nc(o);if(f.kind!=="string"||y.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[n];return this.eachChild(a=>{s.push(a.serialize())}),s}}}const poe=dv("==",ioe,lN),moe=dv("!=",ooe,Aoe),goe=dv("<",soe,coe),yoe=dv(">",aoe,doe),voe=dv("<=",loe,hoe),Coe=dv(">=",uoe,foe);class DO{constructor(e,t,r,i,s,a){this.type=cs,this.number=e,this.locale=t,this.currency=r,this.unit=i,this.minFractionDigits=s,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Ir);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,cs),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,cs),!a))return null;let o=null;if(i.unit&&(o=t.parse(i.unit,1,cs),!o))return null;let f=null;if(i["min-fraction-digits"]&&(f=t.parse(i["min-fraction-digits"],1,Ir),!f))return null;let y=null;return i["max-fraction-digits"]&&(y=t.parse(i["max-fraction-digits"],1,Ir),!y)?null:new DO(r,s,a,o,f,y)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class RO{constructor(e){this.type=Ir,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Vl(r.type)} instead.`):new RO(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new Yc(`Expected value to be of type string or array, but found ${Vl(nc(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var _oe=RO;const AN={"==":poe,"!=":moe,">":yoe,"<":goe,">=":Coe,"<=":voe,array:zm,at:Xie,boolean:zm,case:noe,coalesce:sN,collator:y3,format:m3,image:g3,in:Jie,"index-of":eoe,interpolate:Gg,"interpolate-hcl":Gg,"interpolate-lab":Gg,length:_oe,let:aN,literal:J2,match:toe,number:zm,"number-format":DO,object:zm,slice:roe,step:Xj,string:zm,"to-boolean":yy,"to-color":yy,"to-number":yy,"to-string":yy,var:Vj,within:wO};function Mk(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=Gj(e,t,r,s);if(a)throw new Yc(a);return new uf(e/255*s,t/255*s,r/255*s,s)}function Sk(n,e){return n in e}function w5(n,e){const t=e[n];return typeof t>"u"?null:t}function boe(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function Cg(n){return{type:n}}Av.register(AN,{error:[vie,[cs],(n,[e])=>{throw new Yc(e.evaluate(n))}],typeof:[cs,[Ho],(n,[e])=>Vl(nc(e.evaluate(n)))],"to-rgba":[Wf(Ir,4),[Ym],(n,[e])=>e.evaluate(n).toArray()],rgb:[Ym,[Ir,Ir,Ir],Mk],rgba:[Ym,[Ir,Ir,Ir,Ir],Mk],has:{type:$o,overloads:[[[cs],(n,[e])=>Sk(e.evaluate(n),n.properties())],[[cs,Ty],(n,[e,t])=>Sk(e.evaluate(n),t.evaluate(n))]]},get:{type:Ho,overloads:[[[cs],(n,[e])=>w5(e.evaluate(n),n.properties())],[[cs,Ty],(n,[e,t])=>w5(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Ho,[cs],(n,[e])=>w5(e.evaluate(n),n.featureState||{})],properties:[Ty,[],n=>n.properties()],"geometry-type":[cs,[],n=>n.geometryType()],id:[Ho,[],n=>n.id()],zoom:[Ir,[],n=>n.globals.zoom],pitch:[Ir,[],n=>n.globals.pitch||0],"distance-from-center":[Ir,[],n=>n.distanceFromCenter()],"heatmap-density":[Ir,[],n=>n.globals.heatmapDensity||0],"line-progress":[Ir,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Ir,[],n=>n.globals.skyRadialProgress||0],accumulated:[Ho,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Ir,Cg(Ir),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Ir,Cg(Ir),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Ir,overloads:[[[Ir,Ir],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Ir],(n,[e])=>-e.evaluate(n)]]},"/":[Ir,[Ir,Ir],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Ir,[Ir,Ir],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Ir,[],()=>Math.LN2],pi:[Ir,[],()=>Math.PI],e:[Ir,[],()=>Math.E],"^":[Ir,[Ir,Ir],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Ir,[Ir],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))],log2:[Ir,[Ir],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Ir,[Ir],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Ir,[Ir],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Ir,[Ir],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Ir,[Ir],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Ir,[Ir],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Ir,[Ir],(n,[e])=>Math.atan(e.evaluate(n))],min:[Ir,Cg(Ir),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Ir,Cg(Ir),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Ir,[Ir],(n,[e])=>Math.abs(e.evaluate(n))],round:[Ir,[Ir],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Ir,[Ir],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Ir,[Ir],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[$o,[cs,Ho],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[$o,[Ho],(n,[e])=>n.id()===e.value],"filter-type-==":[$o,[cs],(n,[e])=>n.geometryType()===e.value],"filter-<":[$o,[cs,Ho],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[$o,[Ho],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[$o,[cs,Ho],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[$o,[Ho],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[$o,[cs,Ho],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[$o,[Ho],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[$o,[cs,Ho],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[$o,[Ho],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[$o,[Ho],(n,[e])=>e.value in n.properties()],"filter-has-id":[$o,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[$o,[Wf(cs)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[$o,[Wf(Ho)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[$o,[cs,Wf(Ho)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[$o,[cs,Wf(Ho)],(n,[e,t])=>boe(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:$o,overloads:[[[$o,$o],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[Cg($o),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:$o,overloads:[[[$o,$o],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[Cg($o),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[$o,[$o],(n,[e])=>!e.evaluate(n)],"is-supported-script":[$o,[cs],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[cs,[cs],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[cs,[cs],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[cs,Cg(Ho),(n,e)=>e.map(t=>_C(t.evaluate(n))).join("")],"resolved-locale":[cs,[f3],(n,[e])=>e.evaluate(n).resolvedLocale()]});var cN=AN;function SB(n){return{result:"success",value:n}}function dy(n){return{result:"error",value:n}}function xoe(n){return n["property-type"]==="data-driven"}function woe(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function Moe(n){return!!n.expression&&n.expression.interpolated}function dN(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class Soe{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Qj,this._defaultValue=t?Ioe(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a,o,f){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=f||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a,o,f){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=f||null;try{const y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!==y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new Yc(`Expected value to be one of ${Object.keys(this._enumValues).map(x=>JSON.stringify(x)).join(", ")}, but found ${JSON.stringify(y)} instead.`);return y}catch(y){return this._warningHistory[y.message]||(this._warningHistory[y.message]=!0,typeof console<"u"&&console.warn(y.message)),this._defaultValue}}}function Eoe(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in cN}function EB(n,e){const t=new Hj(cN,[],e?Ooe(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?SB(new Soe(r,e)):dy(t.errors)}class Ek{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!MO(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}}class Bk{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!MO(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Gg.interpolationFactor(this.interpolationType,e,t,r):0}}function Boe(n,e){if(n=EB(n,e),n.result==="error")return n;const t=n.value.expression,r=v3(t);if(!r&&!xoe(e))return dy([new tm("","data expressions not supported")]);const i=SO(t,["zoom","pitch","distance-from-center"]);if(!i&&!woe(e))return dy([new tm("","zoom expressions not supported")]);const s=s2(t);if(!s&&!i)return dy([new tm("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof tm)return dy([s]);if(s instanceof Gg&&!Moe(e))return dy([new tm("",'"interpolate" expressions cannot be used with this property')]);if(!s)return SB(r?new Ek("constant",n.value):new Ek("source",n.value));const a=s instanceof Gg?s.interpolation:void 0;return SB(r?new Bk("camera",n.value,s.labels,a):new Bk("composite",n.value,s.labels,a))}function s2(n){let e=null;if(n instanceof aN)e=s2(n.result);else if(n instanceof sN){for(const t of n.args)if(e=s2(t),e)break}else(n instanceof Xj||n instanceof Gg)&&n.input instanceof Av&&n.input.name==="zoom"&&(e=n);return e instanceof tm||n.eachChild(t=>{const r=s2(t);r instanceof tm?e=r:!e&&r?e=new tm("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new tm("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Ooe(n){const e={color:Ym,string:cs,number:Ir,enum:cs,boolean:$o,formatted:p3,resolvedImage:E_};return n.type==="array"?Wf(e[n.value]||Ho,n.length):e[n.type]}function Ioe(n){return n.type==="color"&&(dN(n.default)||Array.isArray(n.default))?new uf(0,0,0,0):n.type==="color"?uf.parse(n.default)||null:n.default===void 0?null:n.default}function koe(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function BB(n){if(Array.isArray(n))return n.map(BB);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=BB(n[t]);return e}return koe(n)}var hN={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function fN(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!fN(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Toe(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};fN(n)||(n=ox(n));const t=n;let r=!0;try{r=Poe(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const i=hN[`filter_${e}`],s=EB(r,i);let a=null;if(s.result==="error")throw new Error(s.value.map(x=>`${x.key}: ${x.message}`).join(", "));a=(x,B,O)=>s.value.evaluate(x,B,{},O);let o=null,f=null;if(r!==t){const x=EB(t,i);if(x.result==="error")throw new Error(x.value.map(B=>`${B.key}: ${B.message}`).join(", "));o=(B,O,T,F,j)=>x.value.evaluate(B,O,{},T,void 0,void 0,F,j),f=!v3(x.value.expression)}a=a;const y=gN(r);return{filter:a,dynamicFilter:o||void 0,needGeometry:y,needFeature:!!f}}function Poe(n){if(!Ky(n))return n;let e=BB(n);return mN(e),e=pN(e),e}function pN(n){if(!Array.isArray(n))return n;const e=Roe(n);return e===!0?e:e.map(t=>pN(t))}function mN(n){let e=!1;const t=[];if(n[0]==="case"){for(let r=1;r<n.length-1;r+=2)e=e||Ky(n[r]),t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="match"){e=e||Ky(n[1]);for(let r=2;r<n.length-1;r+=2)t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="step"){e=e||Ky(n[1]);for(let r=1;r<n.length-1;r+=2)t.push(n[r+1])}e&&(n.length=0,n.push("any",...t));for(let r=1;r<n.length;r++)mN(n[r])}function Ky(n){if(!Array.isArray(n))return!1;if(Koe(n[0]))return!0;for(let e=1;e<n.length;e++){const t=n[e];if(Ky(t))return!0}return!1}function Koe(n){return n==="pitch"||n==="distance-from-center"}const Doe=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Roe(n){if(Doe.has(n[0]))for(let e=1;e<n.length;e++){const t=n[e];if(Ky(t))return!0}return n}function Foe(n,e){return n<e?-1:n>e?1:0}function gN(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(gN(n[e]))return!0;return!1}function ox(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?M5(n[1],n[2],"=="):e==="!="?Rb(M5(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?M5(n[1],n[2],e):e==="any"?Loe(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(ox)):e==="none"?["all"].concat(n.slice(1).map(ox).map(Rb)):e==="in"?Ok(n[1],n.slice(2)):e==="!in"?Rb(Ok(n[1],n.slice(2))):e==="has"?Ik(n[1]):e==="!has"?Rb(Ik(n[1])):e==="within"?n:!0}function M5(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Loe(n){return["any"].concat(n.map(ox))}function Ok(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Foe)]]:["filter-in-small",n,["literal",e]]}}function Ik(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Rb(n){return["!",n]}var Uoe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function zoe(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return Uoe.forEach(r=>{r in e&&(t[r]=e[r])}),t}function yN(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=zoe(n[t],e[n[t].ref]));return n}var kk={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Lv=" ",Tk=/(italic|oblique)$/i,Pk={},joe=function(n,e,t){var r=Pk[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",a=[],o,f,y=0,x=n.length;y<x;++y){var B=n[y],O=B.split(" "),T=O[O.length-1].toLowerCase();T=="normal"||T=="italic"||T=="oblique"?(s=f?s:T,f=!0,O.pop(),T=O[O.length-1].toLowerCase()):Tk.test(T)&&(T=T.replace(Tk,""),s=f?s:O[O.length-1].replace(T,""),f=!0);for(var F in kk){var j=O.length>1?O[O.length-2].toLowerCase():"";if(T==F||T==F.replace("-","")||j+"-"+T==F){i=o?i:kk[F],O.pop(),j&&F.startsWith(j)&&O.pop();break}}!o&&typeof T=="number"&&(i=T,o=!0);var N=O.join(Lv).replace("Klokantech Noto Sans","Noto Sans");N.indexOf(Lv)!==-1&&(N='"'+N+'"'),a.push(N)}r=Pk[n]=[s,i,a]}return r[0]+Lv+r[1]+Lv+e+"px"+(t?"/"+t:"")+Lv+r[2]},OB=Nj(joe);const vN="https://api.mapbox.com";function FO(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Noe(n,e,t){const r=FO(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${vN}/styles/v1/${s}/sprite?access_token=${e}`}function sx(n,e){const t=FO(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${vN}/styles/v1/${i}?&access_token=${e}`}const Woe=["a","b","c","d"];function a2(n,e,t,r){const i=new URL(n,r),s=FO(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const a=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${a}.webp?access_token=${e}`]}return Woe.map(a=>`https://${a}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const Kk={},Dk={};let Goe=0;function LO(n){return n.id||(n.id=Goe++),n.id}function Qoe(n,e){return LO(n)+"."+Qo(e)}function CN(n){let e=Kk[n.id];return e||(e={},Kk[LO(n)]=e),e}function qoe(n){let e=Dk[n.id];return e||(e={},Dk[LO(n)]=e),e}function S5(n){return n*Math.PI/180}const cm=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function C3(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function UO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function tC(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const L1={};function Hy(n,e,t={},r){if(e in L1)return r&&(r.request=L1[e][0]),L1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=Qy(()=>i).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),r&&(r.request=a),fetch(a).then(function(o){return delete L1[e],o.ok?o.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(o){return delete L1[e],Promise.reject(new Error("Error fetching source "+e))})));return L1[e]=[i,s],s}function _N(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=sx(n,e.accessToken),Hy("Style",n,e);else return Promise.resolve(n)}const Rk={};function bN(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=Rk[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,f)=>{const y=t.transformRequest&&t.transformRequest(f,"Tiles")||f;if(o instanceof bj)o.setLoader((x,B,O)=>{Qy(()=>y).then(T=>{fetch(T).then(F=>F.arrayBuffer()).then(F=>{const N=o.getFormat().readFeatures(F,{extent:x,featureProjection:O});o.setFeatures(N)}).catch(F=>o.setState(Nr.ERROR))})});else{const x=o.getImage();Qy(()=>y).then(B=>{B instanceof Request?fetch(B).then(O=>O.blob()).then(O=>{const T=URL.createObjectURL(O);x.addEventListener("load",()=>URL.revokeObjectURL(T)),x.addEventListener("error",()=>URL.revokeObjectURL(T)),x.src=T}).catch(O=>o.setState(Nr.ERROR)):x.src=B})}});const a=n.url;if(a&&!n.tiles){const o=a2(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const f={};i=Hy("Source",o[0],t,f).then(function(y){return y.tiles=y.tiles.map(function(x){return y.scheme==="tms"&&(x=x.replace("{y}","{-y}")),a2(x,t.accessToken,t.accessTokenParam||"access_token",f.request.url)[0]}),Promise.resolve({tileJson:y,tileLoadFunction:s})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),a2(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s});Rk[r]=i}return i}function Fk(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=C3(i[0],i[1]),a=s.getContext("2d");a.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=a.getImageData(0,0,i[0],i[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const f=o.data;for(let y=0,x=o.width;y<x;++y)for(let B=0,O=o.height;B<O;++B){const T=(B*x+y)*4;f[T+3]>0&&a.arc(y,B,t*e.pixelRatio,0,2*Math.PI)}return a.fill(),s}function Yoe(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function Lk(n,e,t){const r=C3(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0,f=s.width;o<f;++o)for(let y=0,x=s.height;y<x;++y){const B=(y*f+o)*4,O=a[B+3]/255,T=.75,F=.1,j=Yoe(T-F,T+F,O);j>0?(a[B+0]=Math.round(255*t.r*j),a[B+1]=Math.round(255*t.g*j),a[B+2]=Math.round(255*t.b*j),a[B+3]=Math.round(255*j)):a[B+3]=0}return i.putImageData(s,0,0),r}const $oe=Array(256).join(" ");function IB(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=$oe.slice(0,Math.round(e/.1));for(let s=0,a=r.length;s<a;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let E5;function xN(){return E5||(E5=C3(1,1).getContext("2d")),E5}function _g(n,e){return xN().measureText(n).width+(n.length-1)*e}const Uk={};function kB(n,e,t,r){if(n.indexOf(`
`)!==-1){const a=n.split(`
`),o=[];for(let f=0,y=a.length;f<y;++f)o.push(kB(a[f],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=Uk[i];if(!s){const a=n.split(" ");if(a.length>1){const o=xN();o.font=e;const y=o.measureText("M").width*t;let x="";const B=[];for(let O=0,T=a.length;O<T;++O){const F=a[O],j=x+(x?" ":"")+F;_g(j,r)<=y?x=j:(x&&B.push(x),x=F)}x&&B.push(x);for(let O=0,T=B.length;O<T&&T>1;++O){const F=B[O];if(_g(F,r)<y*.35){const j=O>0?_g(B[O-1],r):1/0,N=O<T-1?_g(B[O+1],r):1/0;B.splice(O,1),T-=1,j<N?(B[O-1]+=" "+F,O-=1):B[O]=F+" "+B[O]}}for(let O=0,T=B.length-1;O<T;++O){const F=B[O],j=B[O+1];if(_g(F,r)>y*.7&&_g(j,r)<y*.6){const N=F.split(" "),q=N.pop();_g(q,r)<y*.2&&(B[O]=N.join(" "),B[O+1]=q+" "+j),T-=1}}s=B.join(`
`)}else s=n;s=IB(s,r),Uk[i]=s}return s}const Voe=/font-family: ?([^;]*);/,Hoe=/("|')/g;let Fb;function Zoe(n){if(!Fb){Fb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const s=i.rules||i.cssRules;if(s)for(let a=0,o=s.length;a<o;++a){const f=s[a];if(f.type==5){const y=f.cssText.match(Voe);Fb[y[1].replace(Hoe,"")]=!0}}}catch{}}}return n in Fb}const B5={};function Xoe(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in B5)return B5[t];const r=[];for(let i=0,s=n.length;i<s;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const a=n[i],o=OB(a,1);cz(o);const f=o.split(" ");r.push([f.slice(3).join(" ").replace(/"/g,""),f[1],f[0]])}for(let i=0,s=r.length;i<s;++i){const a=r[i],o=a[0];if(!Zoe(o)&&Yp.get(`${a[2]}
${a[1]} 
${o}`)!==100){const f=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",a[1]).replace("{-fontstyle}",a[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",a[2]);if(!document.querySelector('link[href="'+f+'"]')){const y=document.createElement("link");y.href=f,y.rel="stylesheet",document.head.appendChild(y)}}}return B5[t]=n,n}const Joe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},ese={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},tse=function(n,e){const t=Boe(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},TB={},ax={zoom:0};let Lb,O5;function _i(n,e,t,r,i,s,a){const o=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const f=s[o];if(!f[t]){let y=(n[e]||TB)[t];const x=hN[`${e}_${n.type}`][t];y===void 0&&(y=x.default);let B=Eoe(y);if(!B&&dN(y)&&(y=cie(y,x),B=!0),B){const O=tse(y,x);f[t]=O.evaluate.bind(O)}else x.type=="color"&&(y=uf.parse(y)),f[t]=function(){return y}}return ax.zoom=r,f[t](ax,i,a)}function zk(n,e,t,r,i){return _i(n,"layout",`${r}-allow-overlap`,e,t,i)?_i(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function nse(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=Toe(e).filter),ax.zoom=r,i[n](ax,t)}function I0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const rse=/\{[^{}}]*\}/g;function I5(n,e){return n.replace(rse,function(t){return e[t.slice(1,-1)]||""})}const ise={};function ose(n,e,t,r=cm,i=void 0,s=void 0,a=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");ise[Qoe(e,n)]=Array.from(arguments);let f,y,x;if(s){if(typeof Image<"u"){const G=new Image;let ie;Qy(()=>s).then(he=>{he instanceof Request?fetch(he).then(pe=>pe.blob()).then(pe=>{ie=URL.createObjectURL(pe),G.src=ie}).catch(()=>{}):(G.crossOrigin="anonymous",G.src=he,ie&&URL.revokeObjectURL(ie))}),G.onload=function(){f=G,y=[G.width,G.height],n.changed(),G.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const G=self;G.postMessage({action:"loadImage",src:s}),G.addEventListener("message",function(he){he.data.action==="imageLoaded"&&he.data.src===s&&(f=he.data.image,y=[f.width,f.height])})}}const B=yN(e.layers),O={},T=[],F={},j={},N=CN(e),q=qoe(e);let H;for(let G=0,ie=B.length;G<ie;++G){const he=B[G],pe=he.id;if(typeof t=="string"&&he.source==t||Array.isArray(t)&&t.indexOf(pe)!==-1){const Ee=he["source-layer"];if(H){if(he.source!==H)throw new Error(`Layer "${pe}" does not use source "${H}`)}else{H=he.source;const Se=e.sources[H];if(!Se)throw new Error(`Source "${H}" is not defined`);const De=Se.type;if(De!=="vector"&&De!=="geojson")throw new Error(`Source "${H}" is not of type "vector" or "geojson", but "${De}"`)}let me=O[Ee];me||(me=[],O[Ee]=me),me.push({layer:he,index:G}),T.push(pe)}}const oe=new R0,ne=new jm,$=[],te=function(G,ie,he){const pe=G.getProperties(),Ee=O[pe.layer];if(!Ee)return;let me=r.indexOf(ie);me==-1&&(me=UO(ie,r));const Se=Joe[G.getGeometry().getType()],De={id:G.getId(),properties:pe,type:Se},be=n.get("mapbox-featurestate")[G.getId()];let at=-1;for(let Ze=0,Je=Ee.length;Ze<Je;++Ze){const We=Ee[Ze],Me=We.layer,Fe=Me.id;if(he!==void 0&&he!==Fe)continue;const He=Me.layout||TB,bt=Me.paint||TB;if(He.visibility==="none"||"minzoom"in Me&&me<Me.minzoom||"maxzoom"in Me&&me>=Me.maxzoom)continue;const Yt=Me.filter;if(!Yt||nse(Fe,Yt,De,me,q)){let gt,Lt,Kt,Ue,Pe,Be;const it=We.index;if(Se==3&&(Me.type=="fill"||Me.type=="fill-extrusion"))if(Lt=_i(Me,"paint",Me.type+"-opacity",me,De,N,be),Me.type+"-pattern"in bt){const dr=_i(Me,"paint",Me.type+"-pattern",me,De,N,be);if(dr){const vr=typeof dr=="string"?I5(dr,pe):dr.toString();if(f&&i&&i[vr]){++at,Be=$[at],(!Be||!Be.getFill()||Be.getStroke()||Be.getText())&&(Be=new nf({fill:new jm}),$[at]=Be),Kt=Be.getFill(),Be.setZIndex(it);const Jn=vr+"."+Lt;let Qe=j[Jn];if(!Qe){const ce=i[vr],fe=C3(ce.width,ce.height),nt=fe.getContext("2d");nt.globalAlpha=Lt,nt.drawImage(f,ce.x,ce.y,ce.width,ce.height,0,0,ce.width,ce.height),Qe=nt.createPattern(fe,"repeat"),j[Jn]=Qe}Kt.setColor(Qe)}}}else gt=I0(_i(Me,"paint",Me.type+"-color",me,De,N,be),Lt),Me.type+"-outline-color"in bt&&(Pe=I0(_i(Me,"paint",Me.type+"-outline-color",me,De,N,be),Lt)),Pe||(Pe=gt),(gt||Pe)&&(++at,Be=$[at],(!Be||gt&&!Be.getFill()||!gt&&Be.getFill()||Pe&&!Be.getStroke()||!Pe&&Be.getStroke()||Be.getText())&&(Be=new nf({fill:gt?new jm:void 0,stroke:Pe?new R0:void 0}),$[at]=Be),gt&&(Kt=Be.getFill(),Kt.setColor(gt)),Pe&&(Ue=Be.getStroke(),Ue.setColor(Pe),Ue.setWidth(.5)),Be.setZIndex(it));if(Se!=1&&Me.type=="line"){"line-pattern"in bt?gt=void 0:gt=I0(_i(Me,"paint","line-color",me,De,N,be),_i(Me,"paint","line-opacity",me,De,N,be));const dr=_i(Me,"paint","line-width",me,De,N,be);gt&&dr>0&&(++at,Be=$[at],(!Be||!Be.getStroke()||Be.getFill()||Be.getText())&&(Be=new nf({stroke:new R0}),$[at]=Be),Ue=Be.getStroke(),Ue.setLineCap(_i(Me,"layout","line-cap",me,De,N,be)),Ue.setLineJoin(_i(Me,"layout","line-join",me,De,N,be)),Ue.setMiterLimit(_i(Me,"layout","line-miter-limit",me,De,N,be)),Ue.setColor(gt),Ue.setWidth(dr),Ue.setLineDash(bt["line-dasharray"]?_i(Me,"paint","line-dasharray",me,De,N,be).map(function(vr){return vr*dr}):null),Be.setZIndex(it))}let _t=!1,ft=null,Ut=0,rn,Dt,_n;if((Se==1||Se==2)&&"icon-image"in He){const dr=_i(Me,"layout","icon-image",me,De,N,be);if(dr){rn=typeof dr=="string"?I5(dr,pe):dr.toString();let vr;const Jn=o?o(n,rn):void 0;if(f&&i&&i[rn]||Jn){const Qe=_i(Me,"layout","icon-rotation-alignment",me,De,N,be);if(Se==2){const ce=G.getGeometry();if(ce.getFlatMidpoint||ce.getFlatMidpoints){const fe=ce.getExtent();if(Math.sqrt(Math.max(Math.pow((fe[2]-fe[0])/ie,2),Math.pow((fe[3]-fe[1])/ie,2)))>150){const St=ce.getType()==="MultiLineString"?ce.getFlatMidpoints():ce.getFlatMidpoint();if(O5||(Lb=[NaN,NaN],O5=new pd("Point",Lb,[],2,{},void 0)),vr=O5,Lb[0]=St[0],Lb[1]=St[1],_i(Me,"layout","symbol-placement",me,De,N,be)==="line"&&Qe==="map"){const sn=ce.getStride(),tr=ce.getFlatCoordinates();for(let Oe=0,se=tr.length-sn;Oe<se;Oe+=sn){const ve=tr[Oe],p=tr[Oe+1],Ne=tr[Oe+sn],Ye=tr[Oe+sn+1],rt=Math.min(ve,Ne),ct=Math.max(ve,Ne),dt=St[0],qt=St[1],Gt=(Ye-p)*(dt-ve)-(Ne-ve)*(qt-p);if(Math.abs(Gt)<.001&&dt<=ct&&dt>=rt){Ut=Math.atan2(p-Ye,Ne-ve);break}}}}}}if(Se!==2||vr){const ce=_i(Me,"layout","icon-size",me,De,N,be),fe=bt["icon-color"]!==void 0?_i(Me,"paint","icon-color",me,De,N,be):null;if(!fe||fe.a!==0){const nt=_i(Me,"paint","icon-halo-color",me,De,N,be),St=_i(Me,"paint","icon-halo-width",me,De,N,be);let Ht=`${rn}.${ce}.${St}.${nt}`;if(fe!==null&&(Ht+=`.${fe}`),Dt=F[Ht],!Dt){const sn=zk(Me,me,De,"icon",N);let tr;"icon-offset"in He&&(tr=_i(Me,"layout","icon-offset",me,De,N,be).slice(0),tr[0]*=ce,tr[1]*=-ce);let Oe=fe?[fe.r*255,fe.g*255,fe.b*255,fe.a]:void 0;if(Jn){const se={color:Oe,rotateWithView:Qe==="map",displacement:tr,declutterMode:sn,scale:ce};typeof Jn=="string"?se.src=Jn:(se.img=Jn,se.imgSize=[Jn.width,Jn.height]),Dt=new F2(se)}else{const se=i[rn];let ve,p,Ne;St?se.sdf?(ve=Fk(Lk(f,se,fe||[0,0,0,1]),{x:0,y:0,width:se.width,height:se.height,pixelRatio:se.pixelRatio},St,nt),Oe=void 0):ve=Fk(f,se,St,nt):(se.sdf?(x||(x=Lk(f,{x:0,y:0,width:y[0],height:y[1]},{r:1,g:1,b:1,a:1})),ve=x):ve=f,p=[se.width,se.height],Ne=[se.x,se.y]),Dt=new F2({color:Oe,img:ve,imgSize:y,size:p,offset:Ne,rotateWithView:Qe==="map",scale:ce/se.pixelRatio,displacement:tr,declutterMode:sn})}F[Ht]=Dt}}Dt&&(++at,Be=$[at],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new nf,$[at]=Be),Be.setGeometry(vr),Dt.setRotation(Ut+S5(_i(Me,"layout","icon-rotate",me,De,N,be))),Dt.setOpacity(_i(Me,"paint","icon-opacity",me,De,N,be)),Dt.setAnchor(ese[_i(Me,"layout","icon-anchor",me,De,N,be)]),Be.setImage(Dt),ft=Be.getText(),Be.setText(void 0),Be.setZIndex(it),_t=!0,_n=!1)}else _n=!0}}}if(Se==1&&Me.type==="circle"){++at,Be=$[at],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new nf,$[at]=Be);const dr="circle-radius"in bt?_i(Me,"paint","circle-radius",me,De,N,be):5,vr=I0(_i(Me,"paint","circle-stroke-color",me,De,N,be),_i(Me,"paint","circle-stroke-opacity",me,De,N,be)),Jn=_i(Me,"paint","circle-translate",me,De,N,be),Qe=I0(_i(Me,"paint","circle-color",me,De,N,be),_i(Me,"paint","circle-opacity",me,De,N,be)),ce=_i(Me,"paint","circle-stroke-width",me,De,N,be),fe=dr+"."+vr+"."+Qe+"."+ce+"."+Jn[0]+"."+Jn[1];Dt=F[fe],Dt||(Dt=new g_({radius:dr,displacement:[Jn[0],-Jn[1]],stroke:vr&&ce>0?new R0({width:ce,color:vr}):void 0,fill:Qe?new jm({color:Qe}):void 0,declutterMode:"none"}),F[fe]=Dt),Be.setImage(Dt),ft=Be.getText(),Be.setText(void 0),Be.setGeometry(void 0),Be.setZIndex(it),_t=!0}let qn,tn,rr,Dn,pn,Zn;if("text-field"in He){Dn=Math.round(_i(Me,"layout","text-size",me,De,N,be));const dr=_i(Me,"layout","text-font",me,De,N,be);rr=_i(Me,"layout","text-line-height",me,De,N,be),tn=OB(a?a(dr,e.metadata?e.metadata["ol:webfonts"]:void 0):dr,Dn,rr),tn.includes("sans-serif")||(tn+=",sans-serif"),pn=_i(Me,"layout","text-letter-spacing",me,De,N,be),Zn=_i(Me,"layout","text-max-width",me,De,N,be);const vr=_i(Me,"layout","text-field",me,De,N,be);typeof vr=="object"&&vr.sections?vr.sections.length===1?qn=vr.toString():qn=vr.sections.reduce((Jn,Qe,ce)=>{const fe=Qe.fontStack?Qe.fontStack.split(","):dr,nt=OB(a?a(fe):fe,Dn*(Qe.scale||1),rr);let St=Qe.text;if(St===`
`)return Jn.push(`
`,""),Jn;if(Se==2)return Jn.push(IB(St,pn),nt),Jn;St=kB(St,nt,Zn,pn).split(`
`);for(let Ht=0,sn=St.length;Ht<sn;++Ht)Ht>0&&Jn.push(`
`,""),Jn.push(St[Ht],nt);return Jn},[]):qn=I5(vr,pe).trim(),Lt=_i(Me,"paint","text-opacity",me,De,N,be)}if(qn&&Lt&&!_n){_t||(++at,Be=$[at],(!Be||!Be.getText()||Be.getFill()||Be.getStroke())&&(Be=new nf,$[at]=Be),Be.setImage(void 0),Be.setGeometry(void 0));const dr=zk(Me,me,De,"text",N);Be.getText()||Be.setText(ft),ft=Be.getText(),(!ft||"getDeclutterMode"in ft&&ft.getDeclutterMode()!==dr)&&(ft=new s3({padding:[2,2,2,2],declutterMode:dr}),Be.setText(ft));const vr=_i(Me,"layout","text-transform",me,De,N,be);vr=="uppercase"?qn=Array.isArray(qn)?qn.map((Ye,rt)=>rt%2?Ye:Ye.toUpperCase()):qn.toUpperCase():vr=="lowercase"&&(qn=Array.isArray(qn)?qn.map((Ye,rt)=>rt%2?Ye:Ye.toLowerCase()):qn.toLowerCase());const Jn=Array.isArray(qn)?qn:Se==2?IB(qn,pn):kB(qn,tn,Zn,pn);if(ft.setText(Jn),ft.setFont(tn),ft.setRotation(S5(_i(Me,"layout","text-rotate",me,De,N,be))),typeof ft.setKeepUpright=="function"){const Ye=_i(Me,"layout","text-keep-upright",me,De,N,be);ft.setKeepUpright(Ye)}const Qe=_i(Me,"layout","text-anchor",me,De,N,be),ce=_t||Se==1?"point":_i(Me,"layout","symbol-placement",me,De,N,be);let fe;if(ce==="line-center"?(ft.setPlacement("line"),fe="center"):ft.setPlacement(ce),ce==="line"&&typeof ft.setRepeat=="function"){const Ye=_i(Me,"layout","symbol-spacing",me,De,N,be);ft.setRepeat(Ye*2)}ft.setOverflow(ce==="point");let nt=_i(Me,"paint","text-halo-width",me,De,N,be);const St=_i(Me,"layout","text-offset",me,De,N,be),Ht=_i(Me,"paint","text-translate",me,De,N,be);let sn=0,tr=0;if(ce=="point"){fe="center",Qe.indexOf("left")!==-1?(fe="left",tr=nt):Qe.indexOf("right")!==-1&&(fe="right",tr=-nt);const Ye=_i(Me,"layout","text-rotation-alignment",me,De,N,be);ft.setRotateWithView(Ye=="map")}else ft.setMaxAngle(S5(_i(Me,"layout","text-max-angle",me,De,N,be))*qn.length/Jn.length),ft.setRotateWithView(!1);ft.setTextAlign(fe);let Oe="middle";Qe.indexOf("bottom")==0?(Oe="bottom",sn=-nt-.5*(rr-1)*Dn):Qe.indexOf("top")==0&&(Oe="top",sn=nt+.5*(rr-1)*Dn),ft.setTextBaseline(Oe);const se=_i(Me,"layout","text-justify",me,De,N,be);ft.setJustify(se==="auto"?void 0:se),ft.setOffsetX(St[0]*Dn+tr+Ht[0]),ft.setOffsetY(St[1]*Dn+sn+Ht[1]),ne.setColor(I0(_i(Me,"paint","text-color",me,De,N,be),Lt)),ft.setFill(ne);const ve=I0(_i(Me,"paint","text-halo-color",me,De,N,be),Lt);if(ve&&nt>0){oe.setColor(ve),nt*=2;const Ye=.5*Dn;oe.setWidth(nt<=Ye?nt:Ye),ft.setStroke(oe)}else ft.setStroke(void 0);const p=_i(Me,"layout","text-padding",me,De,N,be),Ne=ft.getPadding();p!==Ne[0]&&(Ne[0]=p,Ne[1]=p,Ne[2]=p,Ne[3]=p),Be.setZIndex(it)}}}if(at>-1)return $.length=at+1,$};return n.setStyle(te),n.set("mapbox-source",H),n.set("mapbox-layers",T),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),te}function sse(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,a=new Uint8ClampedArray(s.length),o=e.resolution*2,f=r-1,y=i-1,x=[0,0,0,0],B=2*Math.PI,O=Math.PI/2,T=Math.PI*e.sunEl/180,F=Math.PI*e.sunAz/180,j=Math.cos(T),N=Math.sin(T),q=e.highlightColor,H=e.shadowColor,oe=e.accentColor,ne=e.encoding;let $,te,G,ie,he,pe,Ee,me,Se,De,be,at,Ze,Je,We,Me,Fe,He,bt,Yt,gt,Lt;function Kt(Ue,Pe="mapbox"){if(Pe==="mapbox")return(Ue[0]*256*256+Ue[1]*256+Ue[2])*.1-1e4;if(Pe==="terrarium")return Ue[0]*256+Ue[1]+Ue[2]/256-32768}for(te=0;te<=y;++te)for(he=te===0?0:te-1,pe=te===y?y:te+1,$=0;$<=f;++$)G=$===0?0:$-1,ie=$===f?f:$+1,Ee=(te*r+G)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],me=e.vert*Kt(x,ne),Ee=(te*r+ie)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],Se=e.vert*Kt(x,ne),De=(Se-me)/o,Ee=(he*r+$)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],me=e.vert*Kt(x,ne),Ee=(pe*r+$)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],Se=e.vert*Kt(x,ne),be=(Se-me)/o,Ze=Math.atan2(be,-De),Ze<0?Ze=O-Ze:Ze>O?Ze=B-Ze+O:Ze=O-Ze,at=Math.atan(Math.sqrt(De*De+be*be)),Lt=N*Math.cos(at)+j*Math.sin(at)*Math.cos(F-Ze),Je=Math.cos(at),We=255*Lt,bt=Math.min(Math.max(2*e.sunEl,0),1),Yt=1.875-e.opacity*1.75,gt=e.opacity!==.5?O*((Math.pow(Yt,at)-1)/(Math.pow(Yt,O)-1)):at,Fe={r:(1-Je)*oe.r*bt*255,g:(1-Je)*oe.g*bt*255,b:(1-Je)*oe.b*bt*255,a:(1-Je)*oe.a*bt*255},Me=Math.abs(((Ze+F)/Math.PI+.5)%2-1),He={r:(q.r*(1-Me)+H.r*Me)*We,g:(q.g*(1-Me)+H.g*Me)*We,b:(q.b*(1-Me)+H.b*Me)*We,a:(q.a*(1-Me)+H.a*Me)*We},Ee=(te*r+$)*4,a[Ee]=Fe.r*(1-Me)+He.r,a[Ee+1]=Fe.g*(1-Me)+He.g,a[Ee+2]=Fe.b*(1-Me)+He.b,a[Ee+3]=s[Ee+3]*e.opacity*bt*Math.sin(gt);return new ImageData(a,r,i)}function ase(n,e=512){return n.getExtent()?cO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():cm}function wN(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function lse(n,e,t="",r={},i=void 0){let s,a,o,f,y=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,f=o.source||o.layers,r=o):f=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(y=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:sx(s,o.accessToken),o=wN(s,o)),new Promise(function(x,B){_N(e,o).then(function(O){if(O.version!=8)return B(new Error("glStyle version 8 required."));if(!(n instanceof rO||n instanceof vC))return B(new Error("Can only apply to VectorLayer or VectorTileLayer"));const T=n instanceof vC?"vector":"geojson";if(f?Array.isArray(f)?a=O.layers.find(function(ne){return ne.id===f[0]}).source:a=f:(a=Object.keys(O.sources).find(function(ne){return O.sources[ne].type===T}),f=a),!a)return B(new Error(`No ${T} source found in the glStyle.`));function F(){if(!y)return Promise.resolve();if(n instanceof vC)return EN(O.sources[a],s,o).then(function(G){const ie=n.getSource();ie?G!==ie&&(ie.setTileUrlFunction(G.getTileUrlFunction()),typeof ie.setUrls=="function"&&typeof G.getUrls=="function"&&ie.setUrls(G.getUrls()),ie.format_||(ie.format_=G.format_),ie.getAttributions()||ie.setAttributions(G.getAttributions()),ie.getTileLoadFunction()===jj&&ie.setTileLoadFunction(G.getTileLoadFunction()),Wg(ie.getProjection(),G.getProjection())&&(ie.tileGrid=G.getTileGrid())):n.setSource(G);const he=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&he.getMinZoom()>0&&n.setMaxResolution(tC(Math.max(0,he.getMinZoom()-1e-12),he.getResolutions()))});const ne=O.sources[a];let $=n.getSource();(!$||$.get("mapbox-source")!==ne)&&($=IN(ne,s,o));const te=n.getSource();return te?$!==te&&(te.getAttributions()||te.setAttributions($.getAttributions()),te.format_||(te.format_=$.getFormat()),te.url_=$.getUrl()):n.setSource($),Promise.resolve()}let j,N,q,H;function oe(){if(!H&&(!O.sprite||N)){if(o.projection&&!i){const $=Ma(o.projection).getUnits();$!=="m"&&(i=cm.map(te=>te/V0[$]))}H=ose(n,O,f,i,N,q,(ne,$=o.webfonts)=>Xoe(ne,$),o.getImage),n.getStyle()?F().then(x).catch(B):B(new Error(`Nothing to show for source [${a}]`))}else H?(n.setStyle(H),F().then(x).catch(B)):B(new Error("Something went wrong trying to apply style."))}if(O.sprite){const ne=new URL(Noe(O.sprite,o.accessToken,s||location.href));j=window.devicePixelRatio>=1.5?.5:1;const $=j==.5?"@2x":"";let te=ne.origin+ne.pathname+$+".json"+ne.search;new Promise(function(G,ie){Hy("Sprite",te,o).then(G).catch(function(he){te=ne.origin+ne.pathname+".json"+ne.search,Hy("Sprite",te,o).then(G).catch(ie)})}).then(function(G){if(G===void 0&&B(new Error("No sprites found.")),N=G,q=ne.origin+ne.pathname+$+".png"+ne.search,o.transformRequest){const ie=o.transformRequest(q,"SpriteImage")||q;(ie instanceof Request||ie instanceof Promise)&&(q=ie)}oe()}).catch(function(G){B(new Error(`Sprites cannot be loaded: ${te}: ${G.message}`))})}else oe()}).catch(B)})}const T0={};function MN(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function use(n,e){const t=n.bounds;if(t){const r=AB([t[0],t[1]],e),i=AB([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Ma(e).getExtent()}function SN(n,e,t){const r=new Uj({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),a=Ma(t.projection||"EPSG:3857"),o=use(i,a),f=a.getExtent(),y=i.minzoom||0,x=i.maxzoom||22,B={attributions:r.getAttributions(),projection:a,tileGrid:new A3({origin:f?Xm(f):s.getOrigin(0),extent:o||s.getExtent(),minZoom:y,resolutions:ase(a,e.tileSize).slice(0,x+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?B.urls=i.tiles:B.url=i.tiles,B}function Ase(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},a=n.paint||{};i.paint=a;const o=UO(e,t.resolutions||cm);let f;const y=_i(i,"paint","background-color",o,T0,r);return a["background-opacity"]!==void 0&&(f=_i(i,"paint","background-opacity",o,T0,r)),s.visibility=="none"?void 0:I0(y,f)}function cse(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new lv({source:new sv({}),render(i){const s=Ase(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function EN(n,e,t){return new Promise(function(r,i){bN(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=SN(n,s,t);o.tileLoadFunction=a,o.format=new yre,r(new zj(o))}).catch(i)})}function dse(n,e,t){const r=new vC({declutter:!0,visible:!1});return EN(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function BN(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function hse(n,e,t){return new Promise(function(r,i){bN(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=new Uj({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=SN(n,s,t).tileGrid,t.projection&&(o.projection=Ma(t.projection));const f=o.getTileUrlFunction();a&&o.setTileLoadFunction(a),o.setTileUrlFunction(function(y,x,B){const O=BN(B);let T=f(y,x,B);if(T.indexOf(O)!=-1){const F=o.getTileGrid().getTileCoordExtent(y);T=T.replace(O,F.toString())}return T}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function ON(n,e,t){const r=new kj;return hse(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function fse(n,e,t){const r=ON(n,e,t);return new Mj({source:new Fj({operationType:"image",operation:sse,sources:[r]})})}function IN(n,e,t){const r=t.projection?new ak({dataProjection:t.projection}):new ak,i=n.data,s={};if(typeof i=="string"){const[o]=a2(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const y=(B,O,T)=>{const F=BN(T);return o.replace(F,`${B.join(",")}`)},x=new o2({attributions:n.attribution,format:r,loader:(B,O,T,F,j)=>{const N=typeof y=="function"?y(B,O,T):y;Hy("GeoJSON",N,t).then(q=>{const H=x.getFormat().readFeatures(q,{featureProjection:T});x.addFeatures(H),F(H)}).catch(q=>{x.removeLoadedExtent(B),j()})},strategy:Ree});return x.set("mapbox-source",n),x}const f=new o2({attributions:n.attribution,format:r,url:o,loader:(y,x,B,O,T)=>{Hy("GeoJSON",o,t).then(F=>{const j=f.getFormat().readFeatures(F,{featureProjection:B});f.addFeatures(j),O(j)}).catch(F=>{f.removeLoadedExtent(y),T()})}});return f}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const a=new o2(Object.assign({attributions:n.attribution,format:r},s));return a.set("mapbox-source",n),a}function pse(n,e,t){return new rO({declutter:!0,source:IN(n,e,t),visible:!1})}function mse(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],gse(n,e,r,t))}}function gse(n,e,t,r){const i=_i(n,"paint","raster-opacity",t,T0,r);e.setOpacity(i)}function yse(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=yN(r.layers),s=n.get("mapbox-layers"),a=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==a&&n.setVisible(a)}n.on("change",t),t()}function vse(n,e,t,r){const i=CN(n),s=n.layers,a=t.type,o=t.source||MN(s,t.ref),f=n.sources[o];let y;if(a=="background")y=cse(t,r,i);else if(f.type=="vector")y=dse(f,e,r);else if(f.type=="raster")y=ON(f,e,r),y.setVisible(t.layout?t.layout.visibility!=="none":!0),y.on("prerender",mse(t,y,i));else if(f.type=="geojson")y=pse(f,e,r);else if(f.type=="raster-dem"&&t.type=="hillshade"){const B=fse(f,e,r);y=B,B.getSource().on("beforeoperations",function(O){const T=O.data;T.resolution=uB(r.projection||"EPSG:3857",O.resolution,Hf(O.extent),"m");const F=UO(O.resolution,r.resolutions||cm);T.encoding=f.encoding,T.vert=5*_i(t,"paint","hillshade-exaggeration",F,T0,i),T.sunAz=_i(t,"paint","hillshade-illumination-direction",F,T0,i),T.sunEl=35,T.opacity=.3,T.highlightColor=_i(t,"paint","hillshade-highlight-color",F,T0,i),T.shadowColor=_i(t,"paint","hillshade-shadow-color",F,T0,i),T.accentColor=_i(t,"paint","hillshade-accent-color",F,T0,i)}),y.setVisible(t.layout?t.layout.visibility!=="none":!0)}const x=o;return y&&y.set("mapbox-source",x),y}function jk(n,e,t,r){const i=[];let s=null;if(e instanceof aO){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const B=r.projection?Ma(r.projection):s.getProjection();s=new wp(Object.assign(s.getProperties(),{maxResolution:cm[0]/V0[B.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(AB(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(cm[0]/V0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const a=n.layers;let o=[],f,y,x;for(let B=0,O=a.length;B<O;++B){const T=a[B],F=T.type;if(F=="heatmap"){console.debug(`layers[${B}].type "${F}" not supported`);continue}else x=T.source||MN(a,T.ref),(!x||x!=y)&&(o.length&&(i.push(Nk(f,o,n,t,e,r)),o=[]),f=vse(n,t,T,r),f instanceof rO||f instanceof vC||(o=[]),y=f.get("mapbox-source")),o.push(T.id)}return i.push(Nk(f,o,n,t,e,r)),Promise.all(i)}function Cse(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new aO({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:sx(e,t.accessToken);t=wN(s,t),r=new Promise(function(a,o){_N(e,t).then(function(f){jk(f,i,s,t).then(function(){a(i)}).catch(o)}).catch(function(f){o(new Error(`Could not load ${e}: ${f.message}`))})})}else r=new Promise(function(s,a){jk(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:sx(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(a)});return r}function Nk(n,e,t,r,i,s={}){let a=24,o=0;const f=t.layers;for(let y=0,x=f.length;y<x;++y){const B=f[y];e.indexOf(B.id)!==-1&&(a=Math.min("minzoom"in B?B.minzoom:0,a),o=Math.max("maxzoom"in B?B.maxzoom:24,o))}return new Promise(function(y,x){const B=function(){const T=n.getSource();if(!T||T.getState()==="error"){x(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in T){const F=T.getTileGrid();if(F){const j=F.getMinZoom();(a>0||j>0)&&n.setMaxResolution(Math.min(tC(Math.max(0,a-1e-12),cm),tC(Math.max(0,j-1e-12),F.getResolutions()))),o<24&&n.setMinResolution(tC(o,cm))}}else a>0&&n.setMaxResolution(tC(Math.max(0,a-1e-12),cm));T instanceof o2||T instanceof zj?lse(n,t,e,Object.assign({styleUrl:r},s)).then(function(){yse(n,i),y()}).catch(x):y()};n.set("mapbox-layers",e);const O=i.getLayers();O.getArray().indexOf(n)===-1&&O.push(n),n.getSource()?B():n.once("change:source",B)})}function ri(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ri=function(){return a},a}ri();function Wk(n){return ri().f[0]++,ri().s[0]++,ri().b[1][0]++,!n||(ri().b[1][1]++,n.length<2)?(ri().b[0][0]++,ri().s[1]++,null):(ri().b[0][1]++,ri().s[2]++,ue.jsx("span",{className:"maputnik-coords",children:n.map(e=>(ri().f[1]++,ri().s[3]++,String(e).padStart(7," "))).join(", ")}))}class kN extends nr.Component{constructor(t){ri().f[5]++,ri().s[7]++;super(t);Pn(this,"updateStyle");Pn(this,"map");Pn(this,"container",(ri().s[5]++,null));Pn(this,"overlay");Pn(this,"popupContainer",(ri().s[6]++,null));Pn(this,"closeOverlay",(ri().s[32]++,t=>{ri().f[12]++,ri().s[33]++,t.target.blur(),ri().s[34]++,this.overlay.setPosition(void 0)}));ri().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},ri().s[9]++,this.updateStyle=Bx.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(ri().f[6]++,ri().s[10]++,this.map)ri().b[2][1]++;else{ri().b[2][0]++,ri().s[11]++;return}ri().s[12]++,this.map.getLayers().clear(),ri().s[13]++,Cse(this.map,t)}componentDidUpdate(t){ri().f[7]++,ri().s[14]++,this.props.mapStyle!==t.mapStyle?(ri().b[3][0]++,ri().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):ri().b[3][1]++}componentDidMount(){ri().f[8]++,ri().s[16]++,this.overlay=new Pne({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(ri().s[17]++,new aO({target:this.container,overlays:[this.overlay],view:new wp({zoom:1,center:[180,-90]})}));ri().s[18]++,t.on("pointermove",i=>{ri().f[9]++;const s=(ri().s[19]++,V4(i.coordinate));ri().s[20]++,this.setState({cursor:[s[0].toFixed(2),s[1].toFixed(2)]})}),ri().s[21]++;const r=()=>{ri().f[10]++;const i=(ri().s[22]++,t.getView().getZoom()),s=(ri().s[23]++,V4(t.getView().getCenter()));ri().s[24]++,this.props.onChange({zoom:i,center:{lng:s[0],lat:s[1]}})};ri().s[25]++,r(),ri().s[26]++,t.on("moveend",r),ri().s[27]++,t.on("postrender",i=>{ri().f[11]++;const s=(ri().s[28]++,V4(t.getView().getCenter()));ri().s[29]++,this.setState({center:[s[0].toFixed(2),s[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),ri().s[30]++,this.map=t,ri().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){ri().f[13]++;const t=(ri().s[35]++,this.props.t);return ri().s[36]++,ue.jsxs("div",{className:"maputnik-ol-container",children:[ue.jsxs("div",{ref:r=>(ri().f[14]++,ri().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[ue.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:"×"}),ue.jsx(YU,{features:(ri().b[4][0]++,this.state.selectedFeatures||(ri().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),ue.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(ri().b[5][0]++,this.props.debugToolbox&&(ri().b[5][1]++,ue.jsxs("div",{className:"maputnik-ol-debug",children:[ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("cursor:")," "]}),ue.jsx("span",{children:Wk(this.state.cursor)})]}),ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("center:")," "]}),ue.jsx("span",{children:Wk(this.state.center)})]}),ue.jsxs("div",{children:[ue.jsxs("label",{children:[t("rotation:")," "]}),ue.jsx("span",{children:this.state.rotation})]})]}))),ue.jsx("div",{className:"maputnik-ol",ref:r=>(ri().f[15]++,ri().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}Pn(kN,"defaultProps",(ri().s[4]++,{onMapLoaded:()=>{ri().f[2]++},onDataChange:()=>{ri().f[3]++},onLayerSelect:()=>{ri().f[4]++}}));const _se=(ri().s[39]++,Ws()(kN));var k5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Gk;function bse(){return Gk||(Gk=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(k5)),k5.exports}var xse=bse();const hm=Al(xse);function Og(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Og=function(){return a},a}Og();class wse extends nr.Component{render(){Og().f[0]++;const e=(Og().s[0]++,{width:20,height:20,...this.props.style});return Og().s[1]++,this.props.isCollapsed?(Og().b[0][0]++,ue.jsx(NZ,{style:e})):(Og().b[0][1]++,ue.jsx(jZ,{style:e}))}}function Cy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cy=function(){return a},a}Cy();class Mse extends nr.Component{render(){return Cy().f[0]++,Cy().s[0]++,ue.jsx("li",{className:"maputnik-layer-list-group",children:ue.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(Cy().f[1]++,Cy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[ue.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(wse,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function XC(){return XC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},XC.apply(null,arguments)}function Sse(n){if(Array.isArray(n))return n}function Ese(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],f=!0,y=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(f=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);f=!0);}catch(x){y=!0,i=x}finally{try{if(!f&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(y)throw i}}return o}}function PB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function TN(n,e){if(n){if(typeof n=="string")return PB(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?PB(n,e):void 0}}function Bse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PN(n,e){return Sse(n)||Ese(n,e)||TN(n,e)||Bse()}function Zy(n){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(n)}function Ose(n,e){if(Zy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KN(n){var e=Ose(n,"string");return Zy(e)=="symbol"?e:e+""}function za(n,e,t){return(e=KN(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){za(n,i,t[i])})}return n}function B_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ise(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,KN(r.key),r)}}function O_(n,e,t){return e&&Ise(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function gs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zO(n,e){if(e&&(Zy(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gs(n)}function JC(n){return JC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},JC(n)}function KB(n,e){return KB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},KB(n,e)}function jO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&KB(n,e)}var P5,Qk;function kse(){if(Qk)return P5;Qk=1;var n=function(e,t,r,i,s,a,o,f){if(!e){var y;if(t===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[r,i,s,a,o,f],B=0;y=new Error(t.replace(/%s/g,function(){return x[B++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}};return P5=n,P5}var Tse=kse();const Xg=Al(Tse);function Pse(n){if(Array.isArray(n))return PB(n)}function Kse(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Dse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rse(n){return Pse(n)||Kse(n)||TN(n)||Dse()}var Fse=function(){function n(){B_(this,n),za(this,"refs",{})}return O_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(Lse)}}]),n}();function Lse(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function DN(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var U1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},RN=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function Ub(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function zb(n,e){n.style["".concat(RN,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function K5(n,e){n.style["".concat(RN,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function nC(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function qk(n,e,t){return Math.max(n,Math.min(t,e))}function _y(n){return n.substr(-2)==="px"?parseFloat(n):0}function Use(n){var e=window.getComputedStyle(n);return{bottom:_y(e.marginBottom),left:_y(e.marginLeft),right:_y(e.marginRight),top:_y(e.marginTop)}}function NO(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function D5(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function Uv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function zse(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function l2(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:l2(n.parentNode,e,r)}}function jse(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function Yk(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,a="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Xg(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),a=o[1]}return Xg(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),a==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function Nse(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Xg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=PN(i,2),a=s[0],o=s[1];return[Yk({height:e,lockOffset:a,width:t}),Yk({height:e,lockOffset:o,width:t})]}function Wse(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function FN(n){return n instanceof HTMLElement?Wse(n)?n:FN(n.parentNode):null}function Gse(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:_y(e.gridColumnGap),y:_y(e.gridRowGap)}:{x:0,y:0}}var bg={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},Ig={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Qse(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=Rse(r.querySelectorAll(e));return i.forEach(function(s,a){if(s.type!=="file"&&(s.value=t[a].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===Ig.Canvas&&t[a].width>0&&t[a].height>0){var o=s.getContext("2d");o.drawImage(t[a],0,0)}}),r}function qse(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){jO(s,i);function s(){var a,o;B_(this,s);for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];return o=zO(this,(a=JC(s)).call.apply(a,[this].concat(y))),za(gs(gs(o)),"wrappedInstance",ui.createRef()),o}return O_(s,[{key:"componentDidMount",value:function(){var o=Nx.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Xg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ui.createElement(n,XC({ref:o},this.props))}}]),s}(ui.Component),za(e,"displayName",NO("sortableHandle",n)),t}function $k(n){return n.sortableHandle!=null}var Yse=function(){function n(e,t){B_(this,n),this.container=e,this.onScrollCallback=t}return O_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,a=t.maxTranslate,o=t.width,f=t.height,y={x:0,y:0},x={x:1,y:1},B={x:10,y:10},O=this.container,T=O.scrollTop,F=O.scrollLeft,j=O.scrollHeight,N=O.scrollWidth,q=O.clientHeight,H=O.clientWidth,oe=T===0,ne=j-T-q===0,$=F===0,te=N-F-H===0;i.y>=a.y-f/2&&!ne?(y.y=1,x.y=B.y*Math.abs((a.y-f/2-i.y)/f)):i.x>=a.x-o/2&&!te?(y.x=1,x.x=B.x*Math.abs((a.x-o/2-i.x)/o)):i.y<=s.y+f/2&&!oe?(y.y=-1,x.y=B.y*Math.abs((i.y-f/2-s.y)/f)):i.x<=s.x+o/2&&!$&&(y.x=-1,x.x=B.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(y.x!==0||y.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var G={left:x.x*y.x,top:x.y*y.y};r.container.scrollTop+=G.top,r.container.scrollLeft+=G.left,r.onScrollCallback(G)},5))}}]),n}();function $se(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function Vse(n){var e=[Ig.Input,Ig.Textarea,Ig.Select,Ig.Option,Ig.Button];return!!(e.indexOf(n.target.tagName)!==-1||nC(n.target,function(t){return t.contentEditable==="true"}))}var LN={axis:fi.oneOf(["x","y","xy"]),contentWindow:fi.any,disableAutoscroll:fi.bool,distance:fi.number,getContainer:fi.func,getHelperDimensions:fi.func,helperClass:fi.string,helperContainer:fi.oneOfType([fi.func,typeof HTMLElement>"u"?fi.any:fi.instanceOf(HTMLElement)]),hideSortableGhost:fi.bool,keyboardSortingTransitionDuration:fi.number,lockAxis:fi.string,lockOffset:fi.oneOfType([fi.number,fi.string,fi.arrayOf(fi.oneOfType([fi.number,fi.string]))]),lockToContainerEdges:fi.bool,onSortEnd:fi.func,onSortMove:fi.func,onSortOver:fi.func,onSortStart:fi.func,pressDelay:fi.number,pressThreshold:fi.number,keyCodes:fi.shape({lift:fi.arrayOf(fi.number),drop:fi.arrayOf(fi.number),cancel:fi.arrayOf(fi.number),up:fi.arrayOf(fi.number),down:fi.arrayOf(fi.number)}),shouldCancelStart:fi.func,transitionDuration:fi.number,updateBeforeSortStart:fi.func,useDragHandle:fi.bool,useWindowAsScrollContainer:fi.bool},UN={lift:[bg.SPACE],drop:[bg.SPACE],cancel:[bg.ESC],up:[bg.UP,bg.LEFT],down:[bg.DOWN,bg.RIGHT]},Hse={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:$se,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:UN,shouldCancelStart:Vse,transitionDuration:300,useWindowAsScrollContainer:!1},Zse=Object.keys(LN);function Xse(n){Xg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Jse(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var zN=ui.createContext({manager:{}});function eae(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){jO(s,i);function s(a){var o;B_(this,s),o=zO(this,JC(s).call(this,a)),za(gs(gs(o)),"state",{}),za(gs(gs(o)),"handleStart",function(y){var x=o.props,B=x.distance,O=x.shouldCancelStart;if(!(y.button===2||O(y))){o.touched=!0,o.position=Uv(y);var T=nC(y.target,function(oe){return oe.sortableInfo!=null});if(T&&T.sortableInfo&&o.nodeIsChild(T)&&!o.state.sorting){var F=o.props.useDragHandle,j=T.sortableInfo,N=j.index,q=j.collection,H=j.disabled;if(H||F&&!nC(y.target,$k))return;o.manager.active={collection:q,index:N},!zse(y)&&y.target.tagName===Ig.Anchor&&y.preventDefault(),B||(o.props.pressDelay===0?o.handlePress(y):o.pressTimer=setTimeout(function(){return o.handlePress(y)},o.props.pressDelay))}}}),za(gs(gs(o)),"nodeIsChild",function(y){return y.sortableInfo.manager===o.manager}),za(gs(gs(o)),"handleMove",function(y){var x=o.props,B=x.distance,O=x.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var T=Uv(y),F={x:o.position.x-T.x,y:o.position.y-T.y},j=Math.abs(F.x)+Math.abs(F.y);o.delta=F,!B&&(!O||j>=O)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):B&&j>=B&&o.manager.isActive()&&o.handlePress(y)}}),za(gs(gs(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),za(gs(gs(o)),"cancel",function(){var y=o.props.distance,x=o.state.sorting;x||(y||clearTimeout(o.pressTimer),o.manager.active=null)}),za(gs(gs(o)),"handlePress",function(y){try{var x=o.manager.getActive(),B=function(){if(x){var O=function(){var pe=$.sortableInfo.index,Ee=Use($),me=Gse(o.container),Se=o.scrollContainer.getBoundingClientRect(),De=j({index:pe,node:$,collection:te});if(o.node=$,o.margin=Ee,o.gridGap=me,o.width=De.width,o.height=De.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=$.getBoundingClientRect(),o.containerBoundingRect=Se,o.index=pe,o.newIndex=pe,o.axis={x:F.indexOf("x")>=0,y:F.indexOf("y")>=0},o.offsetEdge=l2($,o.container),G?o.initialOffset=Uv(T5({},y,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=Uv(y),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(Qse($)),Ub(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-Ee.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-Ee.top,"px"),width:"".concat(o.width,"px")}),G&&o.helper.focus(),q&&(o.sortableGhost=$,Ub($,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},G){var be=ne?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,at=be.top,Ze=be.left,Je=be.width,We=be.height,Me=at+We,Fe=Ze+Je;o.axis.x&&(o.minTranslate.x=Ze-o.boundingClientRect.left,o.maxTranslate.x=Fe-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=at-o.boundingClientRect.top,o.maxTranslate.y=Me-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(ne?0:Se.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(ne?o.contentWindow.innerWidth:Se.left+Se.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(ne?0:Se.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(ne?o.contentWindow.innerHeight:Se.top+Se.height)-o.boundingClientRect.top-o.height/2);N&&N.split(" ").forEach(function(He){return o.helper.classList.add(He)}),o.listenerNode=y.touches?y.target:o.contentWindow,G?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(U1.move.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortMove,!1)}),U1.end.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:pe}),oe&&oe({node:$,index:pe,collection:te,isKeySorting:G,nodes:o.manager.getOrderedRefs(),helper:o.helper},y),G&&o.keyMove(0)},T=o.props,F=T.axis,j=T.getHelperDimensions,N=T.helperClass,q=T.hideSortableGhost,H=T.updateBeforeSortStart,oe=T.onSortStart,ne=T.useWindowAsScrollContainer,$=x.node,te=x.collection,G=o.manager.isKeySorting,ie=function(){if(typeof H=="function"){o._awaitingUpdateBeforeSortStart=!0;var he=Jse(function(){var pe=$.sortableInfo.index;return Promise.resolve(H({collection:te,index:pe,node:$,isKeySorting:G},y)).then(function(){})},function(pe,Ee){if(o._awaitingUpdateBeforeSortStart=!1,pe)throw Ee;return Ee});if(he&&he.then)return he.then(function(){})}}();return ie&&ie.then?ie.then(O):O(ie)}}();return Promise.resolve(B&&B.then?B.then(function(){}):void 0)}catch(O){return Promise.reject(O)}}),za(gs(gs(o)),"handleSortMove",function(y){var x=o.props.onSortMove;typeof y.preventDefault=="function"&&y.cancelable&&y.preventDefault(),o.updateHelperPosition(y),o.animateNodes(),o.autoscroll(),x&&x(y)}),za(gs(gs(o)),"handleSortEnd",function(y){var x=o.props,B=x.hideSortableGhost,O=x.onSortEnd,T=o.manager,F=T.active.collection,j=T.isKeySorting,N=o.manager.getOrderedRefs();o.listenerNode&&(j?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(U1.move.forEach(function($){return o.listenerNode.removeEventListener($,o.handleSortMove)}),U1.end.forEach(function($){return o.listenerNode.removeEventListener($,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),B&&o.sortableGhost&&Ub(o.sortableGhost,{opacity:"",visibility:""});for(var q=0,H=N.length;q<H;q++){var oe=N[q],ne=oe.node;oe.edgeOffset=null,oe.boundingClientRect=null,zb(ne,null),K5(ne,null),oe.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof O=="function"&&O({collection:F,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:j,nodes:N},y),o.touched=!1}),za(gs(gs(o)),"autoscroll",function(){var y=o.props.disableAutoscroll,x=o.manager.isKeySorting;if(y){o.autoScroller.clear();return}if(x){var B=T5({},o.translate),O=0,T=0;o.axis.x&&(B.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),O=o.translate.x-B.x),o.axis.y&&(B.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),T=o.translate.y-B.y),o.translate=B,zb(o.helper,o.translate),o.scrollContainer.scrollLeft+=O,o.scrollContainer.scrollTop+=T;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),za(gs(gs(o)),"onAutoScroll",function(y){o.translate.x+=y.left,o.translate.y+=y.top,o.animateNodes()}),za(gs(gs(o)),"handleKeyDown",function(y){var x=y.keyCode,B=o.props,O=B.shouldCancelStart,T=B.keyCodes,F=T===void 0?{}:T,j=T5({},UN,F);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!j.lift.includes(x)||O(y)||!o.isValidSortingTarget(y))||(y.stopPropagation(),y.preventDefault(),j.lift.includes(x)&&!o.manager.active?o.keyLift(y):j.drop.includes(x)&&o.manager.active?o.keyDrop(y):j.cancel.includes(x)?(o.newIndex=o.manager.active.index,o.keyDrop(y)):j.up.includes(x)?o.keyMove(-1):j.down.includes(x)&&o.keyMove(1))}),za(gs(gs(o)),"keyLift",function(y){var x=y.target,B=nC(x,function(j){return j.sortableInfo!=null}),O=B.sortableInfo,T=O.index,F=O.collection;o.initialFocusedNode=x,o.manager.isKeySorting=!0,o.manager.active={index:T,collection:F},o.handlePress(y)}),za(gs(gs(o)),"keyMove",function(y){var x=o.manager.getOrderedRefs(),B=x[x.length-1].node.sortableInfo.index,O=o.newIndex+y,T=o.newIndex;if(!(O<0||O>B)){o.prevIndex=T,o.newIndex=O;var F=jse(o.newIndex,o.prevIndex,o.index),j=x.find(function(G){var ie=G.node;return ie.sortableInfo.index===F}),N=j.node,q=o.containerScrollDelta,H=j.boundingClientRect||D5(N,q),oe=j.translate||{x:0,y:0},ne={top:H.top+oe.y-q.top,left:H.left+oe.x-q.left},$=T<O,te={x:$&&o.axis.x?N.offsetWidth-o.width:0,y:$&&o.axis.y?N.offsetHeight-o.height:0};o.handleSortMove({pageX:ne.left+te.x,pageY:ne.top+te.y,ignoreTransition:y===0})}}),za(gs(gs(o)),"keyDrop",function(y){o.handleSortEnd(y),o.initialFocusedNode&&o.initialFocusedNode.focus()}),za(gs(gs(o)),"handleKeyEnd",function(y){o.manager.active&&o.keyDrop(y)}),za(gs(gs(o)),"isValidSortingTarget",function(y){var x=o.props.useDragHandle,B=y.target,O=nC(B,function(T){return T.sortableInfo!=null});return O&&O.sortableInfo&&!O.sortableInfo.disabled&&(x?$k(B):B.sortableInfo)});var f=new Fse;return Xse(a),o.manager=f,o.wrappedInstance=ui.createRef(),o.sortableContextValue={manager:f},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return O_(s,[{key:"componentDidMount",value:function(){var o=this,f=this.props.useWindowAsScrollContainer,y=this.getContainer();Promise.resolve(y).then(function(x){o.container=x,o.document=o.container.ownerDocument||document;var B=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof B=="function"?B():B,o.scrollContainer=f?o.document.scrollingElement||o.document.documentElement:FN(o.container)||o.container,o.autoScroller=new Yse(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(O){return U1[O].forEach(function(T){return o.container.addEventListener(T,o.events[O],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(f){return U1[f].forEach(function(y){return o.container.removeEventListener(y,o.events[f])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var f=this.props,y=f.lockAxis,x=f.lockOffset,B=f.lockToContainerEdges,O=f.transitionDuration,T=f.keyboardSortingTransitionDuration,F=T===void 0?O:T,j=this.manager.isKeySorting,N=o.ignoreTransition,q=Uv(o),H={x:q.x-this.initialOffset.x,y:q.y-this.initialOffset.y};if(H.y-=window.pageYOffset-this.initialWindowScroll.top,H.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=H,B){var oe=Nse({height:this.height,lockOffset:x,width:this.width}),ne=PN(oe,2),$=ne[0],te=ne[1],G={x:this.width/2-$.x,y:this.height/2-$.y},ie={x:this.width/2-te.x,y:this.height/2-te.y};H.x=qk(this.minTranslate.x+G.x,this.maxTranslate.x-ie.x,H.x),H.y=qk(this.minTranslate.y+G.y,this.maxTranslate.y-ie.y,H.y)}y==="x"?H.y=0:y==="y"&&(H.x=0),j&&F&&!N&&K5(this.helper,F),zb(this.helper,H)}},{key:"animateNodes",value:function(){var o=this.props,f=o.transitionDuration,y=o.hideSortableGhost,x=o.onSortOver,B=this.containerScrollDelta,O=this.windowScrollDelta,T=this.manager.getOrderedRefs(),F={left:this.offsetEdge.left+this.translate.x+B.left,top:this.offsetEdge.top+this.translate.y+B.top},j=this.manager.isKeySorting,N=this.newIndex;this.newIndex=null;for(var q=0,H=T.length;q<H;q++){var oe=T[q].node,ne=oe.sortableInfo.index,$=oe.offsetWidth,te=oe.offsetHeight,G={height:this.height>te?te/2:this.height/2,width:this.width>$?$/2:this.width/2},ie=j&&ne>this.index&&ne<=N,he=j&&ne<this.index&&ne>=N,pe={x:0,y:0},Ee=T[q].edgeOffset;Ee||(Ee=l2(oe,this.container),T[q].edgeOffset=Ee,j&&(T[q].boundingClientRect=D5(oe,B)));var me=q<T.length-1&&T[q+1],Se=q>0&&T[q-1];if(me&&!me.edgeOffset&&(me.edgeOffset=l2(me.node,this.container),j&&(me.boundingClientRect=D5(me.node,B))),ne===this.index){y&&(this.sortableGhost=oe,Ub(oe,{opacity:0,visibility:"hidden"}));continue}f&&K5(oe,f),this.axis.x?this.axis.y?he||ne<this.index&&(F.left+O.left-G.width<=Ee.left&&F.top+O.top<=Ee.top+G.height||F.top+O.top+G.height<=Ee.top)?(pe.x=this.width+this.marginOffset.x,Ee.left+pe.x>this.containerBoundingRect.width-G.width&&me&&(pe.x=me.edgeOffset.left-Ee.left,pe.y=me.edgeOffset.top-Ee.top),this.newIndex===null&&(this.newIndex=ne)):(ie||ne>this.index&&(F.left+O.left+G.width>=Ee.left&&F.top+O.top+G.height>=Ee.top||F.top+O.top+G.height>=Ee.top+te))&&(pe.x=-(this.width+this.marginOffset.x),Ee.left+pe.x<this.containerBoundingRect.left+G.width&&Se&&(pe.x=Se.edgeOffset.left-Ee.left,pe.y=Se.edgeOffset.top-Ee.top),this.newIndex=ne):ie||ne>this.index&&F.left+O.left+G.width>=Ee.left?(pe.x=-(this.width+this.marginOffset.x),this.newIndex=ne):(he||ne<this.index&&F.left+O.left<=Ee.left+G.width)&&(pe.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=ne)):this.axis.y&&(ie||ne>this.index&&F.top+O.top+G.height>=Ee.top?(pe.y=-(this.height+this.marginOffset.y),this.newIndex=ne):(he||ne<this.index&&F.top+O.top<=Ee.top+G.height)&&(pe.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=ne))),zb(oe,pe),T[q].translate=pe}this.newIndex==null&&(this.newIndex=this.index),j&&(this.newIndex=N);var De=j?this.prevIndex:N;x&&this.newIndex!==De&&x({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:De,isKeySorting:j,nodes:T,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Xg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?Nx.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ui.createElement(zN.Provider,{value:this.sortableContextValue},ui.createElement(n,XC({ref:o},DN(this.props,Zse))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(ui.Component),za(e,"displayName",NO("sortableList",n)),za(e,"defaultProps",Hse),za(e,"propTypes",LN),t}var jN={index:fi.number.isRequired,collection:fi.oneOfType([fi.number,fi.string]),disabled:fi.bool},tae=Object.keys(jN);function nae(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){jO(s,i);function s(){var a,o;B_(this,s);for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];return o=zO(this,(a=JC(s)).call.apply(a,[this].concat(y))),za(gs(gs(o)),"wrappedInstance",ui.createRef()),o}return O_(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,f=o.collection,y=o.disabled,x=o.index,B=Nx.findDOMNode(this);B.sortableInfo={collection:f,disabled:y,index:x,manager:this.context.manager},this.node=B,this.ref={node:B},this.context.manager.add(f,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return Xg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ui.createElement(n,XC({ref:o},DN(this.props,tae)))}}]),s}(ui.Component),za(e,"displayName",NO("sortableElement",n)),za(e,"contextType",zN),za(e,"propTypes",jN),za(e,"defaultProps",{collection:0}),t}function io(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return io=function(){return a},a}io();const rae=(io().s[0]++,qse(n=>(io().f[0]++,io().s[1]++,ue.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[ue.jsx(qU,{className:"layer-handle__icon",type:n.layerType}),ue.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class R5 extends nr.Component{renderIcon(){switch(io().f[1]++,io().s[2]++,this.props.action){case"duplicate":return io().b[0][0]++,io().s[3]++,ue.jsx(DZ,{});case"show":return io().b[0][1]++,io().s[4]++,ue.jsx(KZ,{});case"hide":return io().b[0][2]++,io().s[5]++,ue.jsx(PZ,{});case"delete":return io().b[0][3]++,io().s[6]++,ue.jsx(iv,{})}}render(){io().f[2]++;const{classBlockName:e,classBlockModifier:t}=(io().s[7]++,this.props);let r=(io().s[8]++,"");return io().s[9]++,e?(io().b[1][0]++,io().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,io().s[11]++,t?(io().b[2][0]++,io().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):io().b[2][1]++):io().b[1][1]++,io().s[13]++,ue.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class DB extends nr.Component{getChildContext(){return io().f[6]++,io().s[16]++,{reactIconBase:{size:14}}}render(){io().f[7]++;const e=(io().s[17]++,this.props.visibility==="visible"?(io().b[3][0]++,"show"):(io().b[3][1]++,"hide"));return io().s[18]++,ue.jsxs("li",{id:this.props.id,onClick:t=>(io().f[8]++,io().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:hm({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[ue.jsx(rae,{...this.props}),ue.jsx("span",{style:{flexGrow:1}}),ue.jsx(R5,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(io().f[9]++,io().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),ue.jsx(R5,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(io().f[10]++,io().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),ue.jsx(R5,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(io().f[11]++,io().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}Pn(DB,"defaultProps",(io().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{io().f[3]++},onLayerDestroy:()=>{io().f[4]++},onLayerVisibilityToggle:()=>{io().f[5]++}})),Pn(DB,"childContextTypes",(io().s[15]++,{reactIconBase:fi.object}));const iae=(io().s[23]++,nae(n=>(io().f[12]++,io().s[24]++,ue.jsx(DB,{...n}))));function lx(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return lx=function(){return a},a}lx();class el extends nr.Component{render(){return lx().f[0]++,lx().s[0]++,ue.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:hm("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var NN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ux=NN.join(","),WN=typeof Element>"u",Jg=WN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ax=!WN&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},cx=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",a=s||t&&e&&n(e.parentNode);return a},oae=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},GN=function(e,t,r){if(cx(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(ux));return t&&Jg.call(e,ux)&&i.unshift(e),i=i.filter(r),i},QN=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var a=s.shift();if(!cx(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),f=o.length?o:a.children,y=n(f,!0,r);r.flatten?i.push.apply(i,y):i.push({scopeParent:a,candidates:y})}else{var x=Jg.call(a,ux);x&&r.filter(a)&&(t||!e.includes(a))&&i.push(a);var B=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),O=!cx(B,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(B&&O){var T=n(B===!0?a.children:B.children,!0,r);r.flatten?i.push.apply(i,T):i.push({scopeParent:a,candidates:T})}else s.unshift.apply(s,a.children)}}return i},qN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},P0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||oae(e))&&!qN(e)?0:e.tabIndex},sae=function(e,t){var r=P0(e);return r<0&&t&&!qN(e)?0:r},aae=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},YN=function(e){return e.tagName==="INPUT"},lae=function(e){return YN(e)&&e.type==="hidden"},uae=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Aae=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},cae=function(e){if(!e.name)return!0;var t=e.form||Ax(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=Aae(i,e.form);return!s||s===e},dae=function(e){return YN(e)&&e.type==="radio"},hae=function(e){return dae(e)&&!cae(e)},fae=function(e){var t,r=e&&Ax(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var a,o,f;for(s=!!((a=i)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!s&&i;){var y,x,B;r=Ax(i),i=(y=r)===null||y===void 0?void 0:y.host,s=!!((x=i)!==null&&x!==void 0&&(B=x.ownerDocument)!==null&&B!==void 0&&B.contains(i))}}return s},Vk=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},pae=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Jg.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Jg.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var f=e.parentElement,y=Ax(e);if(f&&!f.shadowRoot&&i(f)===!0)return Vk(e);e.assignedSlot?e=e.assignedSlot:!f&&y!==e.ownerDocument?e=y.host:e=f}e=o}if(fae(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Vk(e);return!1},mae=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Jg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},dx=function(e,t){return!(t.disabled||cx(t)||lae(t)||pae(t,e)||uae(t)||mae(t))},RB=function(e,t){return!(hae(t)||P0(t)<0||!dx(e,t))},gae=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},yae=function n(e){var t=[],r=[];return e.forEach(function(i,s){var a=!!i.scopeParent,o=a?i.scopeParent:i,f=sae(o,a),y=a?n(i.candidates):o;f===0?a?t.push.apply(t,y):t.push(o):r.push({documentOrder:s,tabIndex:f,item:i,isScope:a,content:y})}),r.sort(aae).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},$N=function(e,t){t=t||{};var r;return t.getShadowRoot?r=QN([e],t.includeContainer,{filter:RB.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:gae}):r=GN(e,t.includeContainer,RB.bind(null,t)),yae(r)},VN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=QN([e],t.includeContainer,{filter:dx.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=GN(e,t.includeContainer,dx.bind(null,t)),r},Eg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Jg.call(e,ux)===!1?!1:RB(t,e)},vae=NN.concat("iframe").join(","),u2=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Jg.call(e,vae)===!1?!1:dx(t,e)};const Cae=Object.freeze(Object.defineProperty({__proto__:null,focusable:VN,getTabIndex:P0,isFocusable:u2,isTabbable:Eg,tabbable:$N},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Hk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hk(Object(t),!0).forEach(function(r){_ae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _ae(n,e,t){return e=xae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bae(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xae(n){var e=bae(n,"string");return typeof e=="symbol"?e:String(e)}var Xk={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},wae=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Mae=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},xC=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Sae=function(e){return xC(e)&&!e.shiftKey},Eae=function(e){return xC(e)&&e.shiftKey},Jk=function(e){return setTimeout(e,0)},eT=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},zv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},jb=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Bae=[],Oae=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Bae,s=Zk({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Sae,isKeyBackward:Eae},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,f=function(me,Se,De){return me&&me[Se]!==void 0?me[Se]:s[De||Se]},y=function(me,Se){var De=typeof(Se==null?void 0:Se.composedPath)=="function"?Se.composedPath():void 0;return a.containerGroups.findIndex(function(be){var at=be.container,Ze=be.tabbableNodes;return at.contains(me)||(De==null?void 0:De.includes(at))||Ze.find(function(Je){return Je===me})})},x=function(me){var Se=s[me];if(typeof Se=="function"){for(var De=arguments.length,be=new Array(De>1?De-1:0),at=1;at<De;at++)be[at-1]=arguments[at];Se=Se.apply(void 0,be)}if(Se===!0&&(Se=void 0),!Se){if(Se===void 0||Se===!1)return Se;throw new Error("`".concat(me,"` was specified but was not a node, or did not return a node"))}var Ze=Se;if(typeof Se=="string"&&(Ze=r.querySelector(Se),!Ze))throw new Error("`".concat(me,"` as selector refers to no known node"));return Ze},B=function(){var me=x("initialFocus");if(me===!1)return!1;if(me===void 0||!u2(me,s.tabbableOptions))if(y(r.activeElement)>=0)me=r.activeElement;else{var Se=a.tabbableGroups[0],De=Se&&Se.firstTabbableNode;me=De||x("fallbackFocus")}if(!me)throw new Error("Your focus-trap needs to have at least one focusable element");return me},O=function(){if(a.containerGroups=a.containers.map(function(me){var Se=$N(me,s.tabbableOptions),De=VN(me,s.tabbableOptions),be=Se.length>0?Se[0]:void 0,at=Se.length>0?Se[Se.length-1]:void 0,Ze=De.find(function(Me){return Eg(Me)}),Je=De.slice().reverse().find(function(Me){return Eg(Me)}),We=!!Se.find(function(Me){return P0(Me)>0});return{container:me,tabbableNodes:Se,focusableNodes:De,posTabIndexesFound:We,firstTabbableNode:be,lastTabbableNode:at,firstDomTabbableNode:Ze,lastDomTabbableNode:Je,nextTabbableNode:function(Fe){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,bt=Se.indexOf(Fe);return bt<0?He?De.slice(De.indexOf(Fe)+1).find(function(Yt){return Eg(Yt)}):De.slice(0,De.indexOf(Fe)).reverse().find(function(Yt){return Eg(Yt)}):Se[bt+(He?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(me){return me.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(me){return me.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},T=function Ee(me){var Se=me.activeElement;if(Se)return Se.shadowRoot&&Se.shadowRoot.activeElement!==null?Ee(Se.shadowRoot):Se},F=function Ee(me){if(me!==!1&&me!==T(document)){if(!me||!me.focus){Ee(B());return}me.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=me,wae(me)&&me.select()}},j=function(me){var Se=x("setReturnFocus",me);return Se||(Se===!1?!1:me)},N=function(me){var Se=me.target,De=me.event,be=me.isBackward,at=be===void 0?!1:be;Se=Se||jb(De),O();var Ze=null;if(a.tabbableGroups.length>0){var Je=y(Se,De),We=Je>=0?a.containerGroups[Je]:void 0;if(Je<0)at?Ze=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:Ze=a.tabbableGroups[0].firstTabbableNode;else if(at){var Me=eT(a.tabbableGroups,function(Lt){var Kt=Lt.firstTabbableNode;return Se===Kt});if(Me<0&&(We.container===Se||u2(Se,s.tabbableOptions)&&!Eg(Se,s.tabbableOptions)&&!We.nextTabbableNode(Se,!1))&&(Me=Je),Me>=0){var Fe=Me===0?a.tabbableGroups.length-1:Me-1,He=a.tabbableGroups[Fe];Ze=P0(Se)>=0?He.lastTabbableNode:He.lastDomTabbableNode}else xC(De)||(Ze=We.nextTabbableNode(Se,!1))}else{var bt=eT(a.tabbableGroups,function(Lt){var Kt=Lt.lastTabbableNode;return Se===Kt});if(bt<0&&(We.container===Se||u2(Se,s.tabbableOptions)&&!Eg(Se,s.tabbableOptions)&&!We.nextTabbableNode(Se))&&(bt=Je),bt>=0){var Yt=bt===a.tabbableGroups.length-1?0:bt+1,gt=a.tabbableGroups[Yt];Ze=P0(Se)>=0?gt.firstTabbableNode:gt.firstDomTabbableNode}else xC(De)||(Ze=We.nextTabbableNode(Se))}}else Ze=x("fallbackFocus");return Ze},q=function(me){var Se=jb(me);if(!(y(Se,me)>=0)){if(zv(s.clickOutsideDeactivates,me)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}zv(s.allowOutsideClick,me)||me.preventDefault()}},H=function(me){var Se=jb(me),De=y(Se,me)>=0;if(De||Se instanceof Document)De&&(a.mostRecentlyFocusedNode=Se);else{me.stopImmediatePropagation();var be,at=!0;if(a.mostRecentlyFocusedNode)if(P0(a.mostRecentlyFocusedNode)>0){var Ze=y(a.mostRecentlyFocusedNode),Je=a.containerGroups[Ze].tabbableNodes;if(Je.length>0){var We=Je.findIndex(function(Me){return Me===a.mostRecentlyFocusedNode});We>=0&&(s.isKeyForward(a.recentNavEvent)?We+1<Je.length&&(be=Je[We+1],at=!1):We-1>=0&&(be=Je[We-1],at=!1))}}else a.containerGroups.some(function(Me){return Me.tabbableNodes.some(function(Fe){return P0(Fe)>0})})||(at=!1);else at=!1;at&&(be=N({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),F(be||a.mostRecentlyFocusedNode||B())}a.recentNavEvent=void 0},oe=function(me){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=me;var De=N({event:me,isBackward:Se});De&&(xC(me)&&me.preventDefault(),F(De))},ne=function(me){if(Mae(me)&&zv(s.escapeDeactivates,me)!==!1){me.preventDefault(),o.deactivate();return}(s.isKeyForward(me)||s.isKeyBackward(me))&&oe(me,s.isKeyBackward(me))},$=function(me){var Se=jb(me);y(Se,me)>=0||zv(s.clickOutsideDeactivates,me)||zv(s.allowOutsideClick,me)||(me.preventDefault(),me.stopImmediatePropagation())},te=function(){if(a.active)return Xk.activateTrap(i,o),a.delayInitialFocusTimer=s.delayInitialFocus?Jk(function(){F(B())}):F(B()),r.addEventListener("focusin",H,!0),r.addEventListener("mousedown",q,{capture:!0,passive:!1}),r.addEventListener("touchstart",q,{capture:!0,passive:!1}),r.addEventListener("click",$,{capture:!0,passive:!1}),r.addEventListener("keydown",ne,{capture:!0,passive:!1}),o},G=function(){if(a.active)return r.removeEventListener("focusin",H,!0),r.removeEventListener("mousedown",q,!0),r.removeEventListener("touchstart",q,!0),r.removeEventListener("click",$,!0),r.removeEventListener("keydown",ne,!0),o},ie=function(me){var Se=me.some(function(De){var be=Array.from(De.removedNodes);return be.some(function(at){return at===a.mostRecentlyFocusedNode})});Se&&F(B())},he=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ie):void 0,pe=function(){he&&(he.disconnect(),a.active&&!a.paused&&a.containers.map(function(me){he.observe(me,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(me){if(a.active)return this;var Se=f(me,"onActivate"),De=f(me,"onPostActivate"),be=f(me,"checkCanFocusTrap");be||O(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,Se==null||Se();var at=function(){be&&O(),te(),pe(),De==null||De()};return be?(be(a.containers.concat()).then(at,at),this):(at(),this)},deactivate:function(me){if(!a.active)return this;var Se=Zk({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},me);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,G(),a.active=!1,a.paused=!1,pe(),Xk.deactivateTrap(i,o);var De=f(Se,"onDeactivate"),be=f(Se,"onPostDeactivate"),at=f(Se,"checkCanReturnFocus"),Ze=f(Se,"returnFocus","returnFocusOnDeactivate");De==null||De();var Je=function(){Jk(function(){Ze&&F(j(a.nodeFocusedBeforeActivation)),be==null||be()})};return Ze&&at?(at(j(a.nodeFocusedBeforeActivation)).then(Je,Je),this):(Je(),this)},pause:function(me){if(a.paused||!a.active)return this;var Se=f(me,"onPause"),De=f(me,"onPostPause");return a.paused=!0,Se==null||Se(),G(),pe(),De==null||De(),this},unpause:function(me){if(!a.paused||!a.active)return this;var Se=f(me,"onUnpause"),De=f(me,"onPostUnpause");return a.paused=!1,Se==null||Se(),O(),te(),pe(),De==null||De(),this},updateContainerElements:function(me){var Se=[].concat(me).filter(Boolean);return a.containers=Se.map(function(De){return typeof De=="string"?r.querySelector(De):De}),a.active&&O(),pe(),this}},o.updateContainerElements(e),o};const Iae=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Oae},Symbol.toStringTag,{value:"Module"})),kae=GB(Iae),Tae=GB(Cae);var F5,tT;function Pae(){if(tT)return F5;tT=1;function n(te){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},n(te)}function e(te,G){if(!(te instanceof G))throw new TypeError("Cannot call a class as a function")}function t(te,G){for(var ie=0;ie<G.length;ie++){var he=G[ie];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(te,O(he.key),he)}}function r(te,G,ie){return t(te.prototype,G),Object.defineProperty(te,"prototype",{writable:!1}),te}function i(te,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(G&&G.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),Object.defineProperty(te,"prototype",{writable:!1}),G&&s(te,G)}function s(te,G){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,pe){return he.__proto__=pe,he},s(te,G)}function a(te){var G=y();return function(){var he=x(te),pe;if(G){var Ee=x(this).constructor;pe=Reflect.construct(he,arguments,Ee)}else pe=he.apply(this,arguments);return o(this,pe)}}function o(te,G){if(G&&(n(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(te)}function f(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(te){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},x(te)}function B(te,G,ie){return G=O(G),G in te?Object.defineProperty(te,G,{value:ie,enumerable:!0,configurable:!0,writable:!0}):te[G]=ie,te}function O(te){var G=T(te,"string");return n(G)==="symbol"?G:String(G)}function T(te,G){if(n(te)!=="object"||te===null)return te;var ie=te[Symbol.toPrimitive];if(ie!==void 0){var he=ie.call(te,G||"default");if(n(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(te)}var F=ja(),j=Op(),N=kae,q=N.createFocusTrap,H=Tae,oe=H.isFocusable,ne=function(te){i(ie,te);var G=a(ie);function ie(he){var pe;e(this,ie),pe=G.call(this,he),B(f(pe),"getNodeForOption",function(Se){var De,be=(De=this.internalOptions[Se])!==null&&De!==void 0?De:this.originalOptions[Se];if(typeof be=="function"){for(var at=arguments.length,Ze=new Array(at>1?at-1:0),Je=1;Je<at;Je++)Ze[Je-1]=arguments[Je];be=be.apply(void 0,Ze)}if(be===!0&&(be=void 0),!be){if(be===void 0||be===!1)return be;throw new Error("`".concat(Se,"` was specified but was not a node, or did not return a node"))}var We=be;if(typeof be=="string"){var Me;if(We=(Me=this.getDocument())===null||Me===void 0?void 0:Me.querySelector(be),!We)throw new Error("`".concat(Se,"` as selector refers to no known node"))}return We}),pe.handleDeactivate=pe.handleDeactivate.bind(f(pe)),pe.handlePostDeactivate=pe.handlePostDeactivate.bind(f(pe)),pe.handleClickOutsideDeactivates=pe.handleClickOutsideDeactivates.bind(f(pe)),pe.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:pe.handleDeactivate,onPostDeactivate:pe.handlePostDeactivate,clickOutsideDeactivates:pe.handleClickOutsideDeactivates},pe.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Ee=he.focusTrapOptions;for(var me in Ee)if(Object.prototype.hasOwnProperty.call(Ee,me)){if(me==="returnFocusOnDeactivate"||me==="onDeactivate"||me==="onPostDeactivate"||me==="checkCanReturnFocus"||me==="clickOutsideDeactivates"){pe.originalOptions[me]=Ee[me];continue}pe.internalOptions[me]=Ee[me]}return pe.outsideClick=null,pe.focusTrapElements=he.containerElements||[],pe.updatePreviousElement(),pe}return r(ie,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var pe=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return pe||(pe===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var pe=this.getDocument();pe&&(this.previouslyFocusedElement=pe.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(pe){var Ee=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,pe):this.originalOptions.clickOutsideDeactivates;return Ee&&(this.outsideClick={target:pe.target,allowDeactivation:Ee}),Ee}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var pe=this,Ee=function(){var Se=pe.getReturnFocusNode(),De=!!(pe.originalOptions.returnFocusOnDeactivate&&Se!==null&&Se!==void 0&&Se.focus&&(!pe.outsideClick||pe.outsideClick.allowDeactivation&&!oe(pe.outsideClick.target,pe.internalOptions.tabbableOptions))),be=pe.internalOptions.preventScroll,at=be===void 0?!1:be;De&&Se.focus({preventScroll:at}),pe.originalOptions.onPostDeactivate&&pe.originalOptions.onPostDeactivate.call(null),pe.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Ee,Ee):Ee()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var pe=this.focusTrapElements.some(Boolean);pe&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(pe){if(this.focusTrap){pe.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Ee=!pe.active&&this.props.active,me=pe.active&&!this.props.active,Se=!pe.paused&&this.props.paused,De=pe.paused&&!this.props.paused;if(Ee&&(this.updatePreviousElement(),this.focusTrap.activate()),me){this.deactivateTrap();return}Se&&this.focusTrap.pause(),De&&this.focusTrap.unpause()}else pe.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var pe=this,Ee=this.props.children?F.Children.only(this.props.children):void 0;if(Ee){if(Ee.type&&Ee.type===F.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var me=function(be){var at=pe.props.containerElements;Ee&&(typeof Ee.ref=="function"?Ee.ref(be):Ee.ref&&(Ee.ref.current=be)),pe.focusTrapElements=at||[be]},Se=F.cloneElement(Ee,{ref:me});return Se}return null}}]),ie}(F.Component),$=typeof Element>"u"?Function:Element;return ne.propTypes={active:j.bool,paused:j.bool,focusTrapOptions:j.shape({document:j.object,onActivate:j.func,onPostActivate:j.func,checkCanFocusTrap:j.func,onPause:j.func,onPostPause:j.func,onUnpause:j.func,onPostUnpause:j.func,onDeactivate:j.func,onPostDeactivate:j.func,checkCanReturnFocus:j.func,initialFocus:j.oneOfType([j.instanceOf($),j.string,j.bool,j.func]),fallbackFocus:j.oneOfType([j.instanceOf($),j.string,j.func]),escapeDeactivates:j.oneOfType([j.bool,j.func]),clickOutsideDeactivates:j.oneOfType([j.bool,j.func]),returnFocusOnDeactivate:j.bool,setReturnFocus:j.oneOfType([j.instanceOf($),j.string,j.bool,j.func]),allowOutsideClick:j.oneOfType([j.bool,j.func]),preventScroll:j.bool,tabbableOptions:j.shape({displayCheck:j.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:j.oneOfType([j.bool,j.func])}),trapStack:j.array,isKeyForward:j.func,isKeyBackward:j.func}),containerElements:j.arrayOf(j.instanceOf($)),children:j.oneOfType([j.element,j.instanceOf($)])},ne.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:q},F5=ne,F5}var L5={exports:{}},nT;function Kae(){return nT||(nT=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var B=document.documentElement,O=document.createElement("div");return O.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),B.appendChild(O),r=O.offsetWidth-O.clientWidth,B.removeChild(O),r}function a(){return document.documentElement.scrollHeight>window.innerHeight}function o(B){if(!(typeof document>"u"||t)){var O=document.documentElement;i=window.pageYOffset,a()?O.style.width="calc(100% - "+s()+"px)":O.style.width="100%",O.style.position="fixed",O.style.top=-i+"px",O.style.overflow="hidden",t=!0}}function f(){if(!(typeof document>"u"||!t)){var B=document.documentElement;B.style.width="",B.style.position="",B.style.top="",B.style.overflow="",window.scroll(0,i),t=!1}}function y(){if(t){f();return}o()}var x={on:o,off:f,toggle:y};n.exports=x})()}(L5)),L5.exports}var U5,rT;function Dae(){if(rT)return U5;rT=1;function n(oe){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},n(oe)}function e(oe,ne){if(!(oe instanceof ne))throw new TypeError("Cannot call a class as a function")}function t(oe,ne){for(var $=0;$<ne.length;$++){var te=ne[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}function r(oe,ne,$){return ne&&t(oe.prototype,ne),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function i(oe,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(ne&&ne.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),ne&&s(oe,ne)}function s(oe,ne){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,G){return te.__proto__=G,te},s(oe,ne)}function a(oe){var ne=y();return function(){var te=x(oe),G;if(ne){var ie=x(this).constructor;G=Reflect.construct(te,arguments,ie)}else G=te.apply(this,arguments);return o(this,G)}}function o(oe,ne){if(ne&&(n(ne)==="object"||typeof ne=="function"))return ne;if(ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(oe)}function f(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(oe){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},x(oe)}function B(oe,ne,$){return ne in oe?Object.defineProperty(oe,ne,{value:$,enumerable:!0,configurable:!0,writable:!0}):oe[ne]=$,oe}var O=ja(),T=o_(),F=Pae(),j=Kae(),N=function(oe){i($,oe);var ne=a($);function $(te){var G;if(e(this,$),G=ne.call(this,te),B(f(G),"getApplicationNode",function(){return G.props.getApplicationNode?G.props.getApplicationNode():G.props.applicationNode}),B(f(G),"checkUnderlayClick",function(ie){G.dialogNode&&G.dialogNode.contains(ie.target)||ie.pageX>ie.target.ownerDocument.documentElement.offsetWidth||ie.pageY>ie.target.ownerDocument.documentElement.offsetHeight||G.exit(ie)}),B(f(G),"checkDocumentKeyDown",function(ie){G.props.escapeExits&&(ie.key==="Escape"||ie.key==="Esc"||ie.keyCode===27)&&G.exit(ie)}),B(f(G),"exit",function(ie){G.props.onExit&&G.props.onExit(ie)}),!te.titleText&&!te.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return G}return r($,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var G=this.getApplicationNode();setTimeout(function(){G&&G.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&j.on()}},{key:"componentDidUpdate",value:function(G){G.scrollDisabled&&!this.props.scrollDisabled?j.off():!G.scrollDisabled&&this.props.scrollDisabled&&j.on(),this.props.escapeExits&&!G.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&G.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&j.off();var G=this.getApplicationNode();G&&G.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var G=this;setTimeout(function(){document.addEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var G=this;setTimeout(function(){document.removeEventListener("keydown",G.checkDocumentKeyDown)})}},{key:"render",value:function(){var G=this.props,ie={};if(G.includeDefaultStyles&&(ie={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},G.underlayColor&&(ie.background=G.underlayColor),G.underlayClickExits&&(ie.cursor="pointer")),G.underlayStyle)for(var he in G.underlayStyle)G.underlayStyle.hasOwnProperty(he)&&(ie[he]=G.underlayStyle[he]);var pe={className:G.underlayClass,style:ie};G.underlayClickExits&&(pe.onMouseDown=this.checkUnderlayClick);for(var Ee in this.props.underlayProps)pe[Ee]=this.props.underlayProps[Ee];var me={};G.includeDefaultStyles&&(me={display:"inline-block",height:"100%",verticalAlign:"middle"});var Se={key:"a",style:me},De={};if(G.includeDefaultStyles&&(De={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:G.focusDialog?0:null},G.verticallyCenter&&(De.verticalAlign="middle",De.top=0)),G.dialogStyle)for(var be in G.dialogStyle)G.dialogStyle.hasOwnProperty(be)&&(De[be]=G.dialogStyle[be]);var at={key:"b",ref:(function(Me){this.dialogNode=Me}).bind(this),role:G.alert?"alertdialog":"dialog",id:G.dialogId,className:G.dialogClass,style:De};G.titleId?at["aria-labelledby"]=G.titleId:G.titleText&&(at["aria-label"]=G.titleText),G.focusDialog&&(at.tabIndex="-1");for(var Ze in G)/^(data-|aria-)/.test(Ze)&&(at[Ze]=G[Ze]);var Je=[O.createElement("div",at,G.children)];G.verticallyCenter&&Je.unshift(O.createElement("div",Se));var We=G.focusTrapOptions||{};return(G.focusDialog||G.initialFocus)&&(We.initialFocus=G.focusDialog?"#".concat(this.props.dialogId):G.initialFocus),We.escapeDeactivates=G.escapeExits,O.createElement(F,{focusTrapOptions:We,paused:G.focusTrapPaused},O.createElement("div",pe,Je))}}]),$}(O.Component);B(N,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function q(oe,ne){if(!window.document)return function(){return null};ne=ne||{};var $=function(te){i(ie,te);var G=a(ie);function ie(){var he;e(this,ie);for(var pe=arguments.length,Ee=new Array(pe),me=0;me<pe;me++)Ee[me]=arguments[me];return he=G.call.apply(G,[this].concat(Ee)),B(f(he),"container",null),he}return r(ie,[{key:"componentDidMount",value:function(){ne.renderTo?this.container=typeof ne.renderTo=="string"?document.querySelector(ne.renderTo):ne.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){ne.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:T.createPortal(O.createElement(oe,this.props,this.props.children),this.container)}}]),ie}(O.Component);return B($,"defaultProps",{mounted:!0}),$}var H=q(N);return H.renderTo=function(oe){return q(N,{renderTo:oe})},U5=H,U5}var Rae=Dae();const Fae=Al(Rae);function MA(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return MA=function(){return a},a}MA();class HN extends nr.Component{constructor(){super(...arguments);Pn(this,"onClose",(MA().s[1]++,()=>{MA().f[0]++,MA().s[2]++,document.activeElement?(MA().b[0][0]++,MA().s[3]++,document.activeElement.blur()):MA().b[0][1]++,MA().s[4]++,setTimeout(()=>{MA().f[1]++,MA().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){MA().f[2]++;const t=(MA().s[6]++,this.props.t);return MA().s[7]++,this.props.isOpen?(MA().b[1][0]++,MA().s[8]++,ue.jsx(Fae,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:ue.jsxs("div",{className:hm("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[ue.jsxs("header",{className:"maputnik-modal-header",children:[ue.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),ue.jsx("span",{className:"maputnik-modal-header-space"}),ue.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:ue.jsx(WZ,{})})]}),ue.jsx("div",{className:"maputnik-modal-scroller",children:ue.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(MA().b[1][1]++,MA().s[9]++,!1)}}Pn(HN,"defaultProps",(MA().s[0]++,{underlayClickExits:!0}));const X0=(MA().s[10]++,Ws()(HN)),Lae=8,Uae={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:`A URL template for loading signed-distance-field glyph sets in PBF format. 

The URL must include:

 - \`{fontstack}\` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the text-font property of a symbol layer. 

 - \`{range}\` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.

This property is required if any layer uses the \`text-field\` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).`,example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},zae={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},jae=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Nae={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Wae={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Gae={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Qae={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},qae={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Yae={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},$ae={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},Vae=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Hae={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Zae={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Xae={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Jae={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},ele={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},tle=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),nle={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},rle={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},ile={type:"array",value:"*",doc:"A filter selects specific features from a layer."},ole={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},sle={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},ale={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},lle={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},ule=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string","value","expression"],"result":"value"},"value":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["var","density"]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["JSON object or array"],"result":"array | object"},"value":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","example":{"syntax":{"method":["value","string?","number?"],"result":"array"},"value":["array",["literal",["a","b","c"]],"string",3]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","example":{"syntax":{"method":["number","value"],"result":"value"},"value":["at",1,["literal",["a","b","c"]]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","example":{"syntax":{"method":["value","value"],"result":"boolean"},"value":["in","$type","Point"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","value","number?"],"result":"number"},"value":["index-of","foo",["baz","bar","hello","foo","world"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","number","number?"],"result":"value"},"value":["slice",["get","name"],0,3]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["case",["boolean",["feature-state","hover"],false],1,0.5]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["coalesce","value","fallback"],"result":"value"},"value":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["step","number","number","number","..."],"result":"number"},"value":["step",["get","point_count"],20,100,30,750,40]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"number | array<number> | color"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","example":{"syntax":{"method":[],"result":"number"},"value":["ln2"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","example":{"syntax":{"method":[],"result":"number"},"value":["pi"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","example":{"syntax":{"method":[],"result":"number"},"value":["e"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","example":{"syntax":{"method":["value"],"result":"string"},"value":["typeof",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"string"},"value":["string",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["number",["get","population"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"boolean"},"value":["boolean",["feature-state","hover"],false]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"object"},"value":["object",["get","some-property"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","example":{"syntax":{"method":["collator","{ \\"case-sensitive\\": boolean, \\"diacritic-sensitive\\": boolean, \\"locale\\": string }"],"result":"collator"},"value":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["value","{ \\"text-font\\": string, \\"text-color\\": color, \\"font-scale\\": number, \\"vertical-align\\": \\"bottom\\" | \\"center\\" | \\"top\\" }","..."],"result":"formatted"},"value":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5043","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["value"],"result":"image"},"value":["image","marker_15"]},"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["number","{ \\"locale\\": string, \\"currency\\": string, \\"min-fraction-digits\\": number, \\"max-fraction-digits\\": number }"],"result":"string"},"value":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","example":{"syntax":{"method":["value"],"result":"string"},"value":["to-string",["get","mag"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["to-number","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","example":{"syntax":{"method":["value"],"result":"boolean"},"value":["to-boolean","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","example":{"syntax":{"method":["color"],"result":"array"},"value":["to-rgba","#ff0000"]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"color"},"value":["to-color","#edf8e9"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number"],"result":"color"},"value":["rgb",255,0,0]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number","number"],"result":"color"},"value":["rgba",255,0,0,1]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["get","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["has","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["array"],"result":"number"},"value":["length",["get","myArray"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","example":{"syntax":{"method":[],"result":"value"},"value":["properties"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["feature-state","hover"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","example":{"syntax":{"method":[],"result":"string"},"value":["==",["geometry-type"],"Polygon"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","example":{"syntax":{"method":[],"result":"value"},"value":["id"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","example":{"syntax":{"method":[],"result":"number"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","example":{"syntax":{"method":[],"result":"number"},"value":["heatmap-density"]},"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","example":{"syntax":{"method":["number"],"result":"number"},"value":["line-progress",0.5]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","example":{"syntax":{"method":["string"],"result":"value"},"value":["accumulated","sum"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["+",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["*",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","example":{"syntax":{"method":["number","number?"],"result":"number"},"value":["-",10]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["/",["get","population"],["get","sq-km"]]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["%",10,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["^",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sqrt",9]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log10",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ln",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log2",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["cos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["tan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["asin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["acos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["atan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["min",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["max",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","example":{"syntax":{"method":["number"],"result":"number"},"value":["round",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["abs",-1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ceil",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["floor",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"number"},"value":["distance",{"type":"Point","coordinates":[0,0]}]},"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["==","$type","Polygon"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!=","cluster",true]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["all",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["any",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!",["has","point_count"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"boolean"},"value":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}]},"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["is-supported-script","दिल्ली"]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["upcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["downcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","example":{"syntax":{"method":["string","string","..."],"result":"string"},"value":["concat","square-rgb-",["get","color"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","example":{"syntax":{"method":["collator"],"result":"string"},"value":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),Ale={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},cle={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},dle={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},hle={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},fle=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],ple={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},mle={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},gle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},yle={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},vle={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Cle={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},_le={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ble={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},xle={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},wle={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},ns={$version:Lae,$root:Uae,sources:zae,source:jae,source_vector:Nae,source_raster:Wae,source_raster_dem:Gae,source_geojson:Qae,source_video:qae,source_image:Yae,layer:$ae,layout:Vae,layout_background:Hae,layout_fill:Zae,layout_circle:Xae,layout_heatmap:Jae,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:ele,layout_symbol:tle,layout_raster:nle,layout_hillshade:rle,filter:ile,filter_operator:ole,geometry_type:sle,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:ale,expression:lle,expression_name:ule,light:Ale,sky:cle,terrain:dle,projection:hle,paint:fle,paint_fill:ple,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:mle,paint_circle:gle,paint_heatmap:yle,paint_symbol:vle,paint_raster:Cle,paint_hillshade:_le,paint_background:ble,transition:xle,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:wle};function ks(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ks=function(){return a},a}ks();class WO extends nr.Component{constructor(t){ks().f[0]++,ks().s[0]++;super(t);Pn(this,"onToggleDoc",(ks().s[2]++,t=>{ks().f[1]++,ks().s[3]++,this.setState({open:t},()=>{ks().f[2]++,ks().s[4]++,this.props.onToggleDoc?(ks().b[0][0]++,ks().s[5]++,this.props.onToggleDoc(this.state.open)):ks().b[0][1]++})}));ks().s[1]++,this.state={open:!1}}render(){ks().f[3]++;const{label:t,fieldSpec:r}=(ks().s[6]++,this.props),{doc:i}=(ks().s[7]++,ks().b[1][0]++,r||(ks().b[1][1]++,{}));if(ks().s[8]++,i)return ks().b[2][0]++,ks().s[9]++,ue.jsx("label",{className:"maputnik-doc-wrapper",children:ue.jsxs("div",{className:"maputnik-doc-target",children:[t," ",ue.jsx("button",{"aria-label":this.state.open?(ks().b[3][0]++,"close property documentation"):(ks().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(ks().b[4][0]++,"open"):(ks().b[4][1]++,"closed")}`,onClick:()=>(ks().f[4]++,ks().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(ks().b[5][0]++,ue.jsx(BZ,{})):(ks().b[5][1]++,ue.jsx(OZ,{}))})]})});if(ks().b[2][1]++,ks().s[11]++,t)return ks().b[6][0]++,ks().s[12]++,ue.jsx("label",{className:"maputnik-doc-wrapper",children:ue.jsx("div",{className:"maputnik-doc-target",children:t})});ks().b[6][1]++,ks().s[13]++}}function sa(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return sa=function(){return a},a}sa();const iT=(sa().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class GO extends nr.Component{render(){sa().f[0]++;const{fieldSpec:e}=(sa().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(sa().s[2]++,e),a=(sa().s[3]++,e["sdk-support"]),o=(sa().s[4]++,sa().b[0][0]++,!!r&&(sa().b[0][1]++,!Array.isArray(r)));return sa().s[5]++,ue.jsxs(ue.Fragment,{children:[(sa().b[1][0]++,t&&(sa().b[1][1]++,ue.jsxs("div",{className:"SpecDoc",children:[ue.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(sa().b[2][0]++,o&&(sa().b[2][1]++,ue.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([f,y])=>(sa().f[1]++,sa().s[6]++,ue.jsxs("li",{children:[ue.jsx("code",{children:JSON.stringify(f)}),ue.jsx("div",{children:y.doc})]},f)))})))]}))),(sa().b[3][0]++,a&&(sa().b[3][1]++,ue.jsx("div",{className:"SpecDoc__sdk-support",children:ue.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{}),Object.values(iT).map(f=>(sa().f[2]++,sa().s[7]++,ue.jsx("th",{children:f},f)))]})}),ue.jsx("tbody",{children:Object.entries(a).map(([f,y])=>(sa().f[3]++,sa().s[8]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:f}),Object.keys(iT).map(x=>(sa().f[4]++,sa().s[9]++,Object.prototype.hasOwnProperty.call(y,x)?(sa().b[4][0]++,sa().s[10]++,ue.jsx("td",{children:y[x]},x)):(sa().b[4][1]++,sa().s[11]++,ue.jsx("td",{children:"no"},x))))]},f)))})]})}))),(sa().b[5][0]++,i&&(sa().b[5][1]++,s)&&(sa().b[5][2]++,ue.jsx("div",{className:"SpecDoc__learn-more",children:ue.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Go(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Go=function(){return a},a}Go();class pa extends nr.Component{constructor(t){Go().f[0]++,Go().s[1]++;super(t);Pn(this,"_blockEl",(Go().s[0]++,null));Pn(this,"onToggleDoc",(Go().s[6]++,t=>{Go().f[2]++,Go().s[7]++,this.setState({showDoc:t})}));Pn(this,"onLabelClick",(Go().s[8]++,t=>{var s;Go().f[3]++;const r=(Go().s[9]++,t.nativeEvent.target),i=(Go().s[10]++,(s=this._blockEl)==null?void 0:s.contains(r));Go().s[11]++,Go().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(Go().b[3][1]++,!i)?(Go().b[2][0]++,Go().s[12]++,t.stopPropagation()):Go().b[2][1]++,Go().s[13]++,t.nativeEvent.target.nodeName!=="A"?(Go().b[4][0]++,Go().s[14]++,t.preventDefault()):Go().b[4][1]++}));Go().s[2]++,this.state={showDoc:!1}}onChange(t){Go().f[1]++;const r=(Go().s[3]++,t.target.value);if(Go().s[4]++,this.props.onChange)return Go().b[0][0]++,Go().s[5]++,this.props.onChange(r===""?(Go().b[1][0]++,void 0):(Go().b[1][1]++,r));Go().b[0][1]++}render(){return Go().f[4]++,Go().s[15]++,ue.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:hm({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Go().b[5][0]++,this.props.fieldSpec&&(Go().b[5][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:ue.jsx(WO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Go().b[6][0]++,!this.props.fieldSpec&&(Go().b[6][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ue.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ue.jsx("div",{className:"maputnik-input-block-content",ref:t=>(Go().f[5]++,Go().s[16]++,this._blockEl=t),children:this.props.children}),(Go().b[7][0]++,this.props.fieldSpec&&(Go().b[7][1]++,ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Go().b[8][0]++,""):(Go().b[8][1]++,"none")},children:ue.jsx(GO,{fieldSpec:this.props.fieldSpec})})))]})}}function Gc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Gc=function(){return a},a}Gc();class s1 extends nr.Component{render(){Gc().f[0]++;let e=(Gc().s[0]++,this.props.options);return Gc().s[1]++,Gc().b[1][0]++,e.length>0&&(Gc().b[1][1]++,!Array.isArray(e[0]))?(Gc().b[0][0]++,Gc().s[2]++,e=e.map(t=>(Gc().f[1]++,Gc().s[3]++,[t,t]))):Gc().b[0][1]++,Gc().s[4]++,ue.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Gc().f[2]++,Gc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Gc().f[3]++,Gc().s[6]++,ue.jsx("option",{value:t,children:r},t)))})}}function Fi(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Fi=function(){return a},a}Fi();class Zf extends nr.Component{constructor(e){Fi().f[1]++,Fi().s[1]++,super(e),Fi().s[2]++,this.state={editing:!1,value:(Fi().b[0][0]++,e.value||(Fi().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Fi().f[2]++,Fi().s[3]++,t.editing)Fi().b[1][1]++;else return Fi().b[1][0]++,Fi().s[4]++,{value:e.value};return Fi().s[5]++,{}}render(){Fi().f[3]++;let e,t;return Fi().s[6]++,this.props.multi?(Fi().b[2][0]++,Fi().s[7]++,e="textarea",Fi().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Fi().b[2][1]++,Fi().s[9]++,e="input",Fi().s[10]++,t=["maputnik-string"]),Fi().s[11]++,this.props.disabled?(Fi().b[3][0]++,Fi().s[12]++,t.push("maputnik-string--disabled")):Fi().b[3][1]++,Fi().s[13]++,nr.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Fi().b[4][0]++,this.props.spellCheck):(Fi().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Fi().b[5][0]++,""):(Fi().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Fi().f[4]++,Fi().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Fi().f[5]++,Fi().s[15]++,this.props.onInput?(Fi().b[6][0]++,Fi().s[16]++,this.props.onInput(this.state.value)):Fi().b[6][1]++})},onBlur:()=>{Fi().f[6]++,Fi().s[17]++,this.state.value!==this.props.value?(Fi().b[7][0]++,Fi().s[18]++,this.setState({editing:!1}),Fi().s[19]++,this.props.onChange?(Fi().b[8][0]++,Fi().s[20]++,this.props.onChange(this.state.value)):Fi().b[8][1]++):Fi().b[7][1]++},onKeyDown:r=>{Fi().f[7]++,Fi().s[21]++,Fi().b[10][0]++,r.keyCode===13&&(Fi().b[10][1]++,this.props.onChange)?(Fi().b[9][0]++,Fi().s[22]++,this.props.onChange(this.state.value)):Fi().b[9][1]++},required:this.props.required})}}Pn(Zf,"defaultProps",(Fi().s[0]++,{onInput:()=>{Fi().f[0]++}}));function vp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return vp=function(){return a},a}vp();class ZN extends nr.Component{render(){vp().f[0]++;const e=(vp().s[1]++,this.props.t);return vp().s[2]++,ue.jsxs(pa,{label:e("Type"),fieldSpec:ns.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(vp().b[0][0]++,this.props.disabled&&(vp().b[0][1]++,ue.jsx(Zf,{value:this.props.value,disabled:!0}))),(vp().b[1][0]++,!this.props.disabled&&(vp().b[1][1]++,ue.jsx(s1,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}Pn(ZN,"defaultProps",(vp().s[0]++,{disabled:!1}));const XN=(vp().s[3]++,Ws()(ZN));function hx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return hx=function(){return a},a}hx();class JN extends nr.Component{render(){return hx().f[0]++,hx().s[0]++,ue.jsx(pa,{label:"ID",fieldSpec:ns.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:ue.jsx(Zf,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var z5={exports:{}},oT;function Mle(){if(oT)return z5.exports;oT=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(Ze){var Je,We,Me,Fe=Ze.ownerDocument,He=Fe.body,bt=Fe&&Fe.documentElement;return Je=Ze.getBoundingClientRect(),We=Je.left,Me=Je.top,We-=bt.clientLeft||He.clientLeft||0,Me-=bt.clientTop||He.clientTop||0,{left:We,top:Me}}function t(Ze,Je){var We=Ze["page"+(Je?"Y":"X")+"Offset"],Me="scroll"+(Je?"Top":"Left");if(typeof We!="number"){var Fe=Ze.document;We=Fe.documentElement[Me],typeof We!="number"&&(We=Fe.body[Me])}return We}function r(Ze){return t(Ze)}function i(Ze){return t(Ze,!0)}function s(Ze){var Je=e(Ze),We=Ze.ownerDocument,Me=We.defaultView||We.parentWindow;return Je.left+=r(Me),Je.top+=i(Me),Je}function a(Ze,Je,We){var Me="",Fe=Ze.ownerDocument;return(We=We||Fe.defaultView.getComputedStyle(Ze,null))&&(Me=We.getPropertyValue(Je)||We[Je]),Me}var o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),f=/^(top|right|bottom|left)$/,y="currentStyle",x="runtimeStyle",B="left",O="px";function T(Ze,Je){var We=Ze[y]&&Ze[y][Je];if(o.test(We)&&!f.test(Je)){var Me=Ze.style,Fe=Me[B],He=Ze[x][B];Ze[x][B]=Ze[y][B],Me[B]=Je==="fontSize"?"1em":We||0,We=Me.pixelLeft+O,Me[B]=Fe,Ze[x][B]=He}return We===""?"auto":We}var F;typeof window<"u"&&(F=window.getComputedStyle?a:T);function j(Ze,Je){De(Ze,"position")==="static"&&(Ze.style.position="relative");var We=s(Ze),Me={},Fe,He;for(He in Je)Fe=parseFloat(De(Ze,He))||0,Me[He]=Fe+Je[He]-We[He];De(Ze,Me)}function N(Ze,Je){for(var We=0;We<Ze.length;We++)Je(Ze[We])}function q(Ze){return F(Ze,"boxSizing")==="border-box"}var H=["margin","border","padding"],oe=-1,ne=2,$=1,te=0;function G(Ze,Je,We){var Me={},Fe=Ze.style,He;for(He in Je)Me[He]=Fe[He],Fe[He]=Je[He];We.call(Ze);for(He in Je)Fe[He]=Me[He]}function ie(Ze,Je,We){var Me=0,Fe,He,bt;for(He=0;He<Je.length;He++)if(Fe=Je[He],Fe)for(bt=0;bt<We.length;bt++){var Yt;Fe==="border"?Yt=Fe+We[bt]+"Width":Yt=Fe+We[bt],Me+=parseFloat(F(Ze,Yt))||0}return Me}function he(Ze){return Ze!=null&&Ze==Ze.window}var pe={};N(["Width","Height"],function(Ze){pe["doc"+Ze]=function(Je){var We=Je.document;return Math.max(We.documentElement["scroll"+Ze],We.body["scroll"+Ze],pe["viewport"+Ze](We))},pe["viewport"+Ze]=function(Je){var We="client"+Ze,Me=Je.document,Fe=Me.body,He=Me.documentElement,bt=He[We];return Me.compatMode==="CSS1Compat"&&bt||Fe&&Fe[We]||bt}});function Ee(Ze,Je,We){if(he(Ze))return Je==="width"?pe.viewportWidth(Ze):pe.viewportHeight(Ze);if(Ze.nodeType===9)return Je==="width"?pe.docWidth(Ze):pe.docHeight(Ze);var Me=Je==="width"?["Left","Right"]:["Top","Bottom"],Fe=Je==="width"?Ze.offsetWidth:Ze.offsetHeight;F(Ze);var He=q(Ze),bt=0;(Fe==null||Fe<=0)&&(Fe=void 0,bt=F(Ze,Je),(bt==null||Number(bt)<0)&&(bt=Ze.style[Je]||0),bt=parseFloat(bt)||0),We===void 0&&(We=He?$:oe);var Yt=Fe!==void 0||He,gt=Fe||bt;return We===oe?Yt?gt-ie(Ze,["border","padding"],Me):bt:Yt?gt+(We===$?0:We===ne?-ie(Ze,["border"],Me):ie(Ze,["margin"],Me)):bt+ie(Ze,H.slice(We),Me)}var me={position:"absolute",visibility:"hidden",display:"block"};function Se(Ze){var Je,We=arguments;return Ze.offsetWidth!==0?Je=Ee.apply(void 0,We):G(Ze,me,function(){Je=Ee.apply(void 0,We)}),Je}N(["width","height"],function(Ze){var Je=Ze.charAt(0).toUpperCase()+Ze.slice(1);pe["outer"+Je]=function(Me,Fe){return Me&&Se(Me,Ze,Fe?te:$)};var We=Ze==="width"?["Left","Right"]:["Top","Bottom"];pe[Ze]=function(Me,Fe){if(Fe!==void 0){if(Me){F(Me);var He=q(Me);return He&&(Fe+=ie(Me,["padding","border"],We)),De(Me,Ze,Fe)}return}return Me&&Se(Me,Ze,oe)}});function De(Ze,Je,We){if(typeof Je=="object"){for(var Me in Je)De(Ze,Me,Je[Me]);return}if(typeof We<"u")typeof We=="number"&&(We=We+"px"),Ze.style[Je]=We;else return F(Ze,Je)}function be(Ze,Je){for(var We in Je)Ze[We]=Je[We];return Ze}var at=z5.exports={getWindow:function(Ze){var Je=Ze.ownerDocument||Ze;return Je.defaultView||Je.parentWindow},offset:function(Ze,Je){if(typeof Je<"u")j(Ze,Je);else return s(Ze)},isWindow:he,each:N,css:De,clone:function(Ze){var Je={};for(var We in Ze)Je[We]=Ze[We];var Me=Ze.overflow;if(Me)for(We in Ze)Je.overflow[We]=Ze.overflow[We];return Je},mix:be,scrollLeft:function(Ze,Je){if(he(Ze)){if(Je===void 0)return r(Ze);window.scrollTo(Je,i(Ze))}else{if(Je===void 0)return Ze.scrollLeft;Ze.scrollLeft=Je}},scrollTop:function(Ze,Je){if(he(Ze)){if(Je===void 0)return i(Ze);window.scrollTo(r(Ze),Je)}else{if(Je===void 0)return Ze.scrollTop;Ze.scrollTop=Je}},merge:function(){for(var Ze={},Je=0;Je<arguments.length;Je++)at.mix(Ze,arguments[Je]);return Ze},viewportWidth:0,viewportHeight:0};return be(at,pe),z5.exports}var j5,sT;function Sle(){if(sT)return j5;sT=1;var n=Mle();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var s=i.allowHorizontalScroll,a=i.onlyScrollIfNeeded,o=i.alignWithTop,f=i.alignWithLeft;s=s===void 0?!0:s;var y=n.isWindow(r),x=n.offset(t),B=n.outerHeight(t),O=n.outerWidth(t),T,F,j,N,q,H,oe,ne,$,te;y?(oe=r,te=n.height(oe),$=n.width(oe),ne={left:n.scrollLeft(oe),top:n.scrollTop(oe)},q={left:x.left-ne.left,top:x.top-ne.top},H={left:x.left+O-(ne.left+$),top:x.top+B-(ne.top+te)},N=ne):(T=n.offset(r),F=r.clientHeight,j=r.clientWidth,N={left:r.scrollLeft,top:r.scrollTop},q={left:x.left-(T.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:x.top-(T.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},H={left:x.left+O-(T.left+j+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:x.top+B-(T.top+F+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),q.top<0||H.top>0?o===!0?n.scrollTop(r,N.top+q.top):o===!1?n.scrollTop(r,N.top+H.top):q.top<0?n.scrollTop(r,N.top+q.top):n.scrollTop(r,N.top+H.top):a||(o=o===void 0?!0:!!o,o?n.scrollTop(r,N.top+q.top):n.scrollTop(r,N.top+H.top)),s&&(q.left<0||H.left>0?f===!0?n.scrollLeft(r,N.left+q.left):f===!1?n.scrollLeft(r,N.left+H.left):q.left<0?n.scrollLeft(r,N.left+q.left):n.scrollLeft(r,N.left+H.left):a||(f=f===void 0?!0:!!f,f?n.scrollLeft(r,N.left+q.left):n.scrollLeft(r,N.left+H.left)))}return j5=e,j5}var N5,aT;function Ele(){return aT||(aT=1,N5=Sle()),N5}var W5,lT;function Ble(){if(lT)return W5;lT=1;var n=Object.assign||function(T){for(var F=1;F<arguments.length;F++){var j=arguments[F];for(var N in j)Object.prototype.hasOwnProperty.call(j,N)&&(T[N]=j[N])}return T},e=function(){function T(F,j){for(var N=0;N<j.length;N++){var q=j[N];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(F,q.key,q)}}return function(F,j,N){return j&&T(F.prototype,j),N&&T(F,N),F}}();function t(T,F){if(!(T instanceof F))throw new TypeError("Cannot call a class as a function")}function r(T,F){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:T}function i(T,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);T.prototype=Object.create(F&&F.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(T,F):T.__proto__=F)}var s=ja(),a=Op(),o=o_(),f=o.findDOMNode,y=Ele(),x=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function B(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var O=function(T){i(F,T);function F(j){t(this,F);var N=r(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,j));return N.state={isOpen:!1,highlightedIndex:null},N._debugStates=[],N.ensureHighlightedIndex=N.ensureHighlightedIndex.bind(N),N.exposeAPI=N.exposeAPI.bind(N),N.handleInputFocus=N.handleInputFocus.bind(N),N.handleInputBlur=N.handleInputBlur.bind(N),N.handleChange=N.handleChange.bind(N),N.handleKeyDown=N.handleKeyDown.bind(N),N.handleInputClick=N.handleInputClick.bind(N),N.maybeAutoCompleteText=N.maybeAutoCompleteText.bind(N),N}return e(F,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(N){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),N.autoHighlight&&(this.props.value!==N.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(N,q){(this.state.isOpen&&!q.isOpen||"open"in this.props&&this.props.open&&!N.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),q.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(N){var q=this;this.refs.input=N,x.forEach(function(H){return q[H]=N&&N[H]&&N[H].bind(N)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var N=this.refs["item-"+this.state.highlightedIndex],q=this.refs.menu;y(f(N),f(q),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(N){F.keyDownHandlers[N.key]?F.keyDownHandlers[N.key].call(this,N):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(N){this.props.onChange(N,N.target.value)}},{key:"getFilteredItems",value:function(N){var q=N.items;return N.shouldItemRender&&(q=q.filter(function(H){return N.shouldItemRender(H,N.value)})),N.sortItems&&q.sort(function(H,oe){return N.sortItems(H,oe,N.value)}),q}},{key:"maybeAutoCompleteText",value:function(N,q){for(var H=N.highlightedIndex,oe=q.value,ne=q.getItemValue,$=H===null?0:H,te=this.getFilteredItems(q),G=0;G<te.length&&!q.isItemSelectable(te[$]);G++)$=($+1)%te.length;var ie=te[$]&&q.isItemSelectable(te[$])?te[$]:null;if(oe!==""&&ie){var he=ne(ie),pe=he.toLowerCase().indexOf(oe.toLowerCase())===0;if(pe)return{highlightedIndex:$}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(N,q){if(N.highlightedIndex>=this.getFilteredItems(q).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var N=this.refs.input,q=N.getBoundingClientRect(),H=window.window.getComputedStyle(N),oe=parseInt(H.marginBottom,10)||0,ne=parseInt(H.marginLeft,10)||0,$=parseInt(H.marginRight,10)||0;this.setState({menuTop:q.bottom+oe,menuLeft:q.left+ne,menuWidth:q.width+ne+$})}},{key:"highlightItemFromMouse",value:function(N){this.setState({highlightedIndex:N})}},{key:"selectItemFromMouse",value:function(N){var q=this,H=this.props.getItemValue(N);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){q.props.onSelect(H,N)})}},{key:"setIgnoreBlur",value:function(N){this._ignoreBlur=N}},{key:"renderMenu",value:function(){var N=this,q=this.getFilteredItems(this.props).map(function(ne,$){var te=N.props.renderItem(ne,N.state.highlightedIndex===$,{cursor:"default"});return s.cloneElement(te,{onMouseEnter:N.props.isItemSelectable(ne)?function(){return N.highlightItemFromMouse($)}:null,onClick:N.props.isItemSelectable(ne)?function(){return N.selectItemFromMouse(ne)}:null,ref:function(ie){return N.refs["item-"+$]=ie}})}),H={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},oe=this.props.renderMenu(q,this.props.value,H);return s.cloneElement(oe,{ref:function($){return N.refs.menu=$},onTouchStart:function(){return N.setIgnoreBlur(!0)},onMouseEnter:function(){return N.setIgnoreBlur(!0)},onMouseLeave:function(){return N.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(N){var q=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=B(),this.refs.input.focus();return}var H=void 0,oe=this.state.highlightedIndex;if(this.props.selectOnBlur&&oe!==null){var ne=this.getFilteredItems(this.props),$=ne[oe],te=this.props.getItemValue($);H=function(){return q.props.onSelect(te,$)}}this.setState({isOpen:!1,highlightedIndex:null},H);var G=this.props.inputProps.onBlur;G&&G(N)}},{key:"handleInputFocus",value:function(N){var q=this;if(this._ignoreFocus){this._ignoreFocus=!1;var H=this._scrollOffset,oe=H.x,ne=H.y;this._scrollOffset=null,window.scrollTo(oe,ne),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){q._scrollTimer=null,window.scrollTo(oe,ne)},0);return}this.setState({isOpen:!0});var $=this.props.inputProps.onFocus;$&&$(N)}},{key:"isInputFocused",value:function(){var N=this.refs.input;return N.ownerDocument&&N===N.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(N,q){return q?function(H){N(H),q(H)}:N}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var N=this.props.inputProps,q=this.isOpen();return s.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},N,{role:"combobox","aria-autocomplete":"list","aria-expanded":q,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,N.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,N.onClick),value:this.props.value})),q&&this.renderMenu(),this.props.debug&&s.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),F}(s.Component);return O.propTypes={items:a.array.isRequired,value:a.any,onChange:a.func,onSelect:a.func,shouldItemRender:a.func,isItemSelectable:a.func,sortItems:a.func,getItemValue:a.func.isRequired,renderItem:a.func.isRequired,renderMenu:a.func,menuStyle:a.object,renderInput:a.func,inputProps:a.object,wrapperProps:a.object,wrapperStyle:a.object,autoHighlight:a.bool,selectOnBlur:a.bool,onMenuVisibilityChange:a.func,open:a.bool,debug:a.bool},O.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(F){return s.createElement("input",F)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(F,j,N){return s.createElement("div",{style:n({},N,this.menuStyle),children:F})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},O.keyDownHandlers={ArrowDown:function(F){F.preventDefault();var j=this.getFilteredItems(this.props);if(j.length){for(var N=this.state.highlightedIndex,q=N===null?-1:N,H=0;H<j.length;H++){var oe=(q+H+1)%j.length;if(this.props.isItemSelectable(j[oe])){q=oe;break}}q>-1&&q!==N&&this.setState({highlightedIndex:q,isOpen:!0})}},ArrowUp:function(F){F.preventDefault();var j=this.getFilteredItems(this.props);if(j.length){for(var N=this.state.highlightedIndex,q=N===null?j.length:N,H=0;H<j.length;H++){var oe=(q-(1+H)+j.length)%j.length;if(this.props.isItemSelectable(j[oe])){q=oe;break}}q!==j.length&&this.setState({highlightedIndex:q,isOpen:!0})}},Enter:function(F){var j=this;if(F.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){j.refs.input.select()});else{F.preventDefault();var N=this.getFilteredItems(this.props)[this.state.highlightedIndex],q=this.props.getItemValue(N);this.setState({isOpen:!1,highlightedIndex:null},function(){j.refs.input.setSelectionRange(q.length,q.length),j.props.onSelect(q,N)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},W5=O,W5}var Ole=Ble();const Ile=Al(Ole);function Wo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Wo=function(){return a},a}Wo();const uT=(Wo().s[0]++,140);class hv extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(Wo().s[1]++,{maxHeight:uT}));Pn(this,"autocompleteMenuEl",(Wo().s[2]++,null))}calcMaxHeight(){if(Wo().f[1]++,Wo().s[4]++,this.props.keepMenuWithinWindowBounds){Wo().b[0][0]++;const t=(Wo().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(Wo().s[6]++,Math.min(t,uT));Wo().s[7]++,r!=this.state.maxHeight?(Wo().b[1][0]++,Wo().s[8]++,this.setState({maxHeight:r})):Wo().b[1][1]++}else Wo().b[0][1]++}componentDidMount(){Wo().f[2]++,Wo().s[9]++,this.calcMaxHeight()}componentDidUpdate(){Wo().f[3]++,Wo().s[10]++,this.calcMaxHeight()}onChange(t){Wo().f[4]++,Wo().s[11]++,this.props.onChange(t===""?(Wo().b[2][0]++,void 0):(Wo().b[2][1]++,t))}render(){return Wo().f[5]++,Wo().s[12]++,ue.jsx("div",{ref:t=>{Wo().f[6]++,Wo().s[13]++,this.autocompleteMenuEl=t},children:ue.jsx(Ile,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(Wo().f[7]++,Wo().s[14]++,t[0]),onSelect:t=>(Wo().f[8]++,Wo().s[15]++,this.onChange(t)),onChange:(t,r)=>(Wo().f[9]++,Wo().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(Wo().b[3][0]++,""))=>(Wo().f[10]++,Wo().s[17]++,typeof r=="string"?(Wo().b[4][0]++,Wo().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(Wo().b[4][1]++,Wo().s[19]++,!1)),renderItem:(t,r)=>(Wo().f[11]++,Wo().s[20]++,ue.jsx("div",{className:hm({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}Pn(hv,"defaultProps",(Wo().s[3]++,{onChange:()=>{Wo().f[0]++},options:[]}));function Zp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Zp=function(){return a},a}Zp();class eW extends nr.Component{render(){var t;Zp().f[1]++;const e=(Zp().s[1]++,this.props.t);return Zp().s[2]++,ue.jsx(pa,{label:e("Source"),fieldSpec:ns.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:ue.jsx(hv,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>(Zp().f[2]++,Zp().s[3]++,[r,r]))})})}}Pn(eW,"defaultProps",(Zp().s[0]++,{onChange:()=>{Zp().f[0]++},sourceIds:[]}));const tW=(Zp().s[4]++,Ws()(eW));function Xp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Xp=function(){return a},a}Xp();class nW extends nr.Component{render(){var t;Xp().f[1]++;const e=(Xp().s[1]++,this.props.t);return Xp().s[2]++,ue.jsx(pa,{label:e("Source Layer"),fieldSpec:Ps.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:ue.jsx(hv,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(Xp().f[2]++,Xp().s[3]++,[r,r]))})})}}Pn(nW,"defaultProps",(Xp().s[0]++,{onChange:()=>{Xp().f[0]++},sourceLayerIds:[],isFixed:!1}));const rW=(Xp().s[4]++,Ws()(nW));function Gr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Gr=function(){return a},a}Gr();class kle extends nr.Component{constructor(t){Gr().f[1]++,Gr().s[10]++;super(t);Pn(this,"addLayer",(Gr().s[0]++,()=>{Gr().f[0]++;const t=(Gr().s[1]++,this.props.layers.slice(0)),r=(Gr().s[2]++,{id:this.state.id,type:this.state.type});Gr().s[3]++,this.state.type!=="background"?(Gr().b[0][0]++,Gr().s[4]++,r.source=this.state.source,Gr().s[5]++,Gr().b[2][0]++,this.state.type!=="raster"&&(Gr().b[2][1]++,this.state["source-layer"])?(Gr().b[1][0]++,Gr().s[6]++,r["source-layer"]=this.state["source-layer"]):Gr().b[1][1]++):Gr().b[0][1]++,Gr().s[7]++,t.push(r),Gr().s[8]++,this.props.onLayersChange(t),Gr().s[9]++,this.props.onOpenToggle(!1)}));const r=(Gr().s[11]++,{type:"fill",id:""});Gr().s[12]++,t.sources.length>0?(Gr().b[3][0]++,Gr().s[13]++,r.source=Object.keys(this.props.sources)[0],Gr().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):Gr().b[3][1]++,Gr().s[15]++,this.state=r}componentDidUpdate(t,r){Gr().f[2]++;const i=(Gr().s[16]++,r.type),s=(Gr().s[17]++,this.state.type),a=(Gr().s[18]++,this.getSources(i)),o=(Gr().s[19]++,this.getSources(s));Gr().s[20]++,Gr().b[5][0]++,i!==s&&(Gr().b[5][1]++,r.source!=="")&&(Gr().b[5][2]++,a.indexOf(r.source)>-1)&&(Gr().b[5][3]++,o.indexOf(this.state.source)<0)?(Gr().b[4][0]++,Gr().s[21]++,this.setState({source:""})):Gr().b[4][1]++}getLayersForSource(t){Gr().f[3]++;const r=(Gr().s[22]++,Gr().b[6][0]++,this.props.sources[t]||(Gr().b[6][1]++,{}));return Gr().s[23]++,Gr().b[7][0]++,r.layers||(Gr().b[7][1]++,[])}getSources(t){Gr().f[4]++;const r=(Gr().s[24]++,[]),i=(Gr().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Gr().s[26]++;for(const[s,a]of Object.entries(this.props.sources)){const o=(Gr().s[27]++,a.type);Gr().s[28]++,Gr().b[9][0]++,i[o]&&(Gr().b[9][1]++,i[o].indexOf(t)>-1)?(Gr().b[8][0]++,Gr().s[29]++,r.push(s)):Gr().b[8][1]++}return Gr().s[30]++,r}render(){Gr().f[5]++;const t=(Gr().s[31]++,this.props.t),r=(Gr().s[32]++,this.getSources(this.state.type)),i=(Gr().s[33]++,this.getLayersForSource(this.state.source));return Gr().s[34]++,ue.jsx(X0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:ue.jsxs("div",{className:"maputnik-add-layer",children:[ue.jsx(JN,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Gr().f[6]++,Gr().s[35]++,this.setState({id:s})}}),ue.jsx(XN,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Gr().f[7]++,Gr().s[36]++,this.setState({type:s}))}),(Gr().b[10][0]++,this.state.type!=="background"&&(Gr().b[10][1]++,ue.jsx(tW,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Gr().f[8]++,Gr().s[37]++,this.setState({source:s}))}))),(Gr().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Gr().b[11][1]++,ue.jsx(rW,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:s=>(Gr().f[9]++,Gr().s[38]++,this.setState({"source-layer":s}))}))),ue.jsx(el,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const Tle=(Gr().s[39]++,Ws()(kle));function Fg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Fg=function(){return a},a}Fg();let AT=(Fg().s[0]++,0);function Xy(n=(Fg().b[0][0]++,"")){return Fg().f[0]++,Fg().s[1]++,AT++,Fg().s[2]++,n+AT}function Wi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Wi=function(){return a},a}Wi();function Ple(n,e){Wi().f[0]++;const t=(Wi().s[0]++,{...n.paint});Wi().s[1]++,Object.keys(t).forEach(i=>{Wi().f[1]++,Wi().s[2]++,i in Ps["paint_"+e]?Wi().b[0][1]++:(Wi().b[0][0]++,Wi().s[3]++,delete t[i])});const r=(Wi().s[4]++,{...n.layout});return Wi().s[5]++,Object.keys(r).forEach(i=>{Wi().f[2]++,Wi().s[6]++,i in Ps["layout_"+e]?Wi().b[1][1]++:(Wi().b[1][0]++,Wi().s[7]++,delete r[i])}),Wi().s[8]++,{...n,paint:t,layout:r,type:e}}function Kle(n,e,t,r){if(Wi().f[3]++,Wi().s[9]++,r===void 0)if(Wi().b[2][0]++,Wi().s[10]++,e){Wi().b[3][0]++;const i=(Wi().s[11]++,{...n,[e]:{...n[e]}});return Wi().s[12]++,delete i[e][t],Wi().s[13]++,Object.keys(i[e]).length<1?(Wi().b[4][0]++,Wi().s[14]++,delete i[e]):Wi().b[4][1]++,Wi().s[15]++,i}else{Wi().b[3][1]++;const i=(Wi().s[16]++,{...n});return Wi().s[17]++,delete i[t],Wi().s[18]++,i}else return Wi().b[2][1]++,Wi().s[19]++,e?(Wi().b[5][0]++,Wi().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Wi().b[5][1]++,Wi().s[21]++,{...n,[t]:r})}function by(n){return Wi().f[4]++,Wi().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Dle(n,e){Wi().f[5]++;const t=(Wi().s[23]++,by(n[e].id));let r=(Wi().s[24]++,e);Wi().s[25]++;for(let i=(Wi().s[26]++,e);i>0;i--){const s=(Wi().s[27]++,by(n[i-1].id));if(Wi().s[28]++,s===t)Wi().b[6][0]++,Wi().s[29]++,r=i-1;else return Wi().b[6][1]++,Wi().s[30]++,r}return Wi().s[31]++,r}function bn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return bn=function(){return a},a}bn();class iW extends nr.Component{constructor(t){bn().f[1]++,bn().s[1]++;super(t);Pn(this,"selectedItemRef");Pn(this,"scrollContainerRef");Pn(this,"toggleLayers",(bn().s[6]++,()=>{bn().f[3]++;let t=(bn().s[7]++,0);const r=(bn().s[8]++,{});bn().s[9]++,this.groupedLayers().forEach(i=>{bn().f[4]++;const s=(bn().s[10]++,by(i[0].id)),a=(bn().s[11]++,[s,t].join("-"));bn().s[12]++,i.length>1?(bn().b[0][0]++,bn().s[13]++,r[a]=this.state.areAllGroupsExpanded):bn().b[0][1]++,bn().s[14]++,i.forEach(o=>{bn().f[5]++,bn().s[15]++,t+=1})}),bn().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));bn().s[2]++,this.selectedItemRef=nr.createRef(),bn().s[3]++,this.scrollContainerRef=nr.createRef(),bn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Xy()},isOpen:{add:!1}}}toggleModal(t){bn().f[2]++,bn().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Xy()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){bn().f[6]++;const t=(bn().s[17]++,[]),r=(bn().s[18]++,new Map);bn().s[19]++;for(let i=(bn().s[20]++,0);i<this.props.layers.length;i++){const s=(bn().s[21]++,this.props.layers[i]),a=(bn().s[22]++,this.props.layers[i-1]);bn().s[23]++,r.set(s.id,r.has(s.id)?(bn().b[1][0]++,r.get(s.id)+1):(bn().b[1][1]++,0));const o=(bn().s[24]++,{...s,key:`layers-list-${s.id}-${r.get(s.id)}`});if(bn().s[25]++,bn().b[3][0]++,a&&(bn().b[3][1]++,by(a.id)==by(o.id))){bn().b[2][0]++;const f=(bn().s[26]++,t[t.length-1]);bn().s[27]++,f.push(o)}else bn().b[2][1]++,bn().s[28]++,t.push([o])}return bn().s[29]++,t}toggleLayerGroup(t,r){bn().f[7]++;const i=(bn().s[30]++,[t,r].join("-")),s=(bn().s[31]++,{...this.state.collapsedGroups});bn().s[32]++,i in this.state.collapsedGroups?(bn().b[4][0]++,bn().s[33]++,s[i]=!this.state.collapsedGroups[i]):(bn().b[4][1]++,bn().s[34]++,s[i]=!1),bn().s[35]++,this.setState({collapsedGroups:s})}isCollapsed(t,r){bn().f[8]++;const i=(bn().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return bn().s[37]++,i===void 0?(bn().b[5][0]++,!0):(bn().b[5][1]++,i)}shouldComponentUpdate(t,r){if(bn().f[9]++,bn().s[38]++,this.state!==r)return bn().b[6][0]++,bn().s[39]++,!0;bn().b[6][1]++;function i(y){bn().f[10]++;const x=(bn().s[40]++,{id:y.id});return bn().s[41]++,y.layout?(bn().b[7][0]++,bn().s[42]++,x.layout={visibility:y.layout.visibility}):bn().b[7][1]++,bn().s[43]++,x}const s=(bn().s[44]++,w6.isEqual(t.layers.map(i),this.props.layers.map(i)));function a(y){bn().f[11]++;const x=(bn().s[45]++,{...y});return bn().s[46]++,delete x.layers,bn().s[47]++,x}const o=(bn().s[48]++,w6.isEqual(a(this.props),a(t))),f=(bn().s[49]++,bn().b[8][0]++,!(s&&(bn().b[8][1]++,o)));return bn().s[50]++,f}componentDidUpdate(t){if(bn().f[12]++,bn().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){bn().b[9][0]++;const r=(bn().s[52]++,this.selectedItemRef.current);if(bn().s[53]++,bn().b[11][0]++,r&&(bn().b[11][1]++,r.node)){bn().b[10][0]++;const i=(bn().s[54]++,r.node),s=(bn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),a=(bn().s[56]++,new IntersectionObserver(o=>{bn().f[13]++,bn().s[57]++,a.unobserve(i),bn().s[58]++,bn().b[13][0]++,o.length>0&&(bn().b[13][1]++,o[0].intersectionRatio<1)?(bn().b[12][0]++,bn().s[59]++,i.scrollIntoView()):bn().b[12][1]++},s));bn().s[60]++,a.observe(i)}else bn().b[10][1]++}else bn().b[9][1]++}render(){bn().f[14]++;const t=(bn().s[61]++,[]);let r=(bn().s[62]++,0);const i=(bn().s[63]++,this.groupedLayers());bn().s[64]++,i.forEach(a=>{bn().f[15]++;const o=(bn().s[65]++,by(a[0].id));if(bn().s[66]++,a.length>1){bn().b[14][0]++;const f=(bn().s[67]++,ue.jsx(Mse,{"data-wd-key":[o,r].join("-"),"aria-controls":a.map(y=>(bn().f[16]++,bn().s[68]++,y.key)).join(" "),title:o,isActive:(bn().b[15][0]++,!this.isCollapsed(o,r)||(bn().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,o,r)},`group-${o}-${r}`));bn().s[69]++,t.push(f)}else bn().b[14][1]++;bn().s[70]++,a.forEach((f,y)=>{var F;bn().f[17]++;const x=(bn().s[71]++,Dle(this.props.layers,r)),B=(bn().s[72]++,this.props.errors.find(j=>(bn().f[18]++,bn().s[73]++,bn().b[16][0]++,j.parsed&&(bn().b[16][1]++,j.parsed.type==="layer")&&(bn().b[16][2]++,j.parsed.data.index==r)))),O=(bn().s[74]++,{});bn().s[75]++,r===this.props.selectedLayerIndex?(bn().b[17][0]++,bn().s[76]++,O.ref=this.selectedItemRef):bn().b[17][1]++;const T=(bn().s[77]++,ue.jsx(iae,{className:hm({"maputnik-layer-list-item-collapsed":(bn().b[18][0]++,a.length>1&&(bn().b[18][1]++,this.isCollapsed(o,x))&&(bn().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(bn().b[19][0]++,y==a.length-1&&(bn().b[19][1]++,a.length>1)),"maputnik-layer-list-item--error":!!B}),index:r,id:f.key,layerId:f.id,layerIndex:r,layerType:f.type,visibility:(bn().b[20][0]++,f.layout||(bn().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(F=this.props.onLayerDestroy)==null?void 0:F.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...O},f.key));bn().s[78]++,t.push(T),bn().s[79]++,r+=1})});const s=(bn().s[80]++,this.props.t);return bn().s[81]++,ue.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":s("Layers list"),ref:this.scrollContainerRef,children:[ue.jsx(Tle,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),ue.jsxs("header",{className:"maputnik-layer-list-header",children:[ue.jsx("span",{className:"maputnik-layer-list-header-title",children:s("Layers")}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx("div",{className:"maputnik-default-property",children:ue.jsx("div",{className:"maputnik-multibutton",children:ue.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(bn().b[21][0]++,s("Collapse")):(bn().b[21][1]++,s("Expand"))})})}),ue.jsx("div",{className:"maputnik-default-property",children:ue.jsx("div",{className:"maputnik-multibutton",children:ue.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:s("Add Layer")})})})]}),ue.jsx("div",{role:"navigation","aria-label":s("Layers list"),children:ue.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}Pn(iW,"defaultProps",(bn().s[0]++,{onLayerSelect:()=>{bn().f[0]++}}));const Rle=(bn().s[82]++,Ws()(iW)),Fle=(bn().s[83]++,eae(n=>(bn().f[19]++,bn().s[84]++,ue.jsx(Rle,{...n}))));class Lle extends nr.Component{render(){return bn().f[20]++,bn().s[85]++,ue.jsx(Fle,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(bn().f[21]++,bn().s[86]++,!1)})}}var G5,cT;function oW(){if(cT)return G5;cT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(a,o){n[a]=o}function r(a){delete n[a]}function i(a,o){var f=n[a];if(!f)throw new Error("Cannot open "+e);f.openMenu(o)}function s(a,o){var f=n[a];if(!f)throw new Error("Cannot close "+e);f.closeMenu(o)}return G5={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},G5}var Q5,dT;function Ule(){if(dT)return Q5;dT=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var a,o;for(a in this._settings.keybindings)o=this._settings.keybindings[a],o&&[].concat(o).forEach((function(f){f.metaKey=f.metaKey||!1,f.ctrlKey=f.ctrlKey||!1,f.altKey=f.altKey||!1,f.shiftKey=f.shiftKey||!1,this._keybindingsLookup.push({action:a,eventMatcher:f})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var a=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(a=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),a||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,a=0,o=this._members.length;a<o;a++)if(s=this._members[a],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,a=this._members.length;s<a;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var a=i.node||i,o=i.text||a.getAttribute("data-focus-group-text")||a.textContent||"";this._checkNode(a);var f=o.replace(/[\W_]/g,"").toLowerCase(),y={node:a,text:f};return s!=null?this._members.splice(s,0,y):this._members.push(y),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,a=i.length;s<a;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var a in i)if(s[a]!==void 0&&i[a]!==s[a])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return Q5=function(s){return new n(s)},Q5}var q5,hT;function zle(){if(hT)return q5;hT=1;var n=Ule(),e=oW(),t={wrap:!0,stringSearch:!0},r={init:function(f){this.updateOptions(f),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=a.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(f){var y=this.options;this.options=f||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),y&&y.id&&y.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(f){this.focusGroup.focusNodeAtIndex(f)},addItem:function(f){this.focusGroup.addMember(f)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(f){this.focusGroup._handleUnboundKey(f)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(f){if(!this.isOpen&&(f=f||{},f.focusMenu===void 0&&(f.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),f.focusMenu)){var y=this;this.moveFocusTimer=setTimeout(function(){y.focusItem(0)},0)}},closeMenu:function(f){this.isOpen&&(f=f||{},this.isOpen=!1,this.update(),f.focusButton&&this.button.ref.current.focus())},toggleMenu:function(f,y){f=f||{},y=y||{},this.isOpen?this.closeMenu(f):this.openMenu(y)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var f=o.button.ref.current;if(f){var y=f.ownerDocument.activeElement;if(!(f&&y===f)){var x=o.menu.ref.current;if(x===y){o.focusItem(0);return}x&&x.contains(y)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,f){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,f)}function a(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return q5=function(o){var f=Object.create(r);return f.init(o),f},q5}var Y5,fT;function _3(){if(fT)return Y5;fT=1;var n=ja(),e=n.createContext();return Y5=e,Y5}var $5,pT;function b3(){if(pT)return $5;pT=1;var n=Op();return $5={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},$5}var V5,mT;function x3(){return mT||(mT=1,V5=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),V5}var H5,gT;function jle(){if(gT)return H5;gT=1;function n(T,F){if(!(T instanceof F))throw new TypeError("Cannot call a class as a function")}function e(T,F){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:T}function t(T,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);T.prototype=Object.create(F&&F.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(T,F):T.__proto__=F)}var r=ja(),i=Op(),s=zle(),a=_3(),o=b3(),f=o.refType,y=x3(),x={children:i.node.isRequired,forwardedRef:f,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},B=function(F){return{onMenuToggle:F.onMenuToggle,onSelection:F.onSelection,closeOnSelection:F.closeOnSelection,closeOnBlur:F.closeOnBlur,id:F.id}},O=function(T){t(F,T);function F(j){n(this,F);var N=e(this,T.call(this,j));return N.manager=s(B(j)),N}return F.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},F.prototype.render=function(){var N={};return y(N,this.props,x),r.createElement(a.Provider,{value:this.manager},r.createElement(this.props.tag,N,this.props.children))},F}(r.Component);return O.propTypes=x,O.defaultProps={tag:"div"},H5=r.forwardRef(function(T,F){var j={forwardedRef:F};return y(j,T,{children:x.children,forwardedRef:x.forwardedRef}),y(j,{forwardedRef:F}),r.createElement(O,j,T.children)}),H5}var Z5,yT;function Nle(){if(yT)return Z5;yT=1;function n(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function e(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function t(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}var r=ja(),i=Op(),s=_3(),a=b3(),o=a.refType,f=x3(),y={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},x=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},B=function(O){t(T,O);function T(){var F,j,N;n(this,T);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(F=(j=e(this,O.call.apply(O,[this].concat(H))),j),j.ref=r.createRef(),j.handleKeyDown=function(ne){if(!j.props.disabled){var $=j.props.ambManager;switch(ne.key){case"ArrowDown":ne.preventDefault(),$.isOpen?$.focusItem(0):$.openMenu();break;case"Enter":case" ":ne.preventDefault(),$.toggleMenu();break;case"Escape":$.handleMenuKey(ne);break;default:$.handleButtonNonArrowKey(ne)}}},j.handleClick=function(){j.props.disabled||j.props.ambManager.toggleMenu({},{focusMenu:!1})},j.setRef=function(ne){j.ref.current=ne,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(ne):j.props.forwardedRef&&(j.props.forwardedRef.current=ne)},F),e(j,N)}return T.prototype.componentDidMount=function(){this.props.ambManager.button=this},T.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},T.prototype.render=function(){var j=this.props,N=this.props.ambManager,q={role:"button",tabIndex:j.disabled?"":"0","aria-haspopup":!0,"aria-expanded":N.isOpen,"aria-disabled":j.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},H={};return f(H,y),x().indexOf(j.tag)>=0&&delete H.disabled,N.options.closeOnBlur&&(q.onBlur=N.handleBlur),f(q,j,H),f(q,{ref:this.setRef}),r.createElement(j.tag,q,j.children)},T}(r.Component);return B.propTypes=y,B.defaultProps={tag:"span"},Z5=r.forwardRef(function(O,T){return r.createElement(s.Consumer,null,function(F){var j={ambManager:F,forwardedRef:T};return f(j,O,{ambManager:y.ambManager,children:y.children,forwardedRef:y.forwardedRef}),r.createElement(B,j,O.children)})}),Z5}var X5,vT;function Wle(){return vT||(vT=1,X5=function(e,t,r){var i=0,s=0,a=!1,o=!1,f=!1;e.addEventListener("click",y,r),e.addEventListener("touchstart",x,r);function y(N){f||t(N)}function x(N){f=!0,!a&&(a=!0,e.addEventListener("touchmove",B,r),e.addEventListener("touchend",O,r),e.addEventListener("touchcancel",T,r),o=!1,i=N.touches[0].clientX,s=N.touches[0].clientY)}function B(N){o||Math.abs(N.touches[0].clientX-i)<=10&&Math.abs(N.touches[0].clientY-s)<=10||(o=!0)}function O(N){a=!1,F(),o||t(N)}function T(){a=!1,o=!1,i=0,s=0}function F(){e.removeEventListener("touchmove",B,r),e.removeEventListener("touchend",O,r),e.removeEventListener("touchcancel",T,r)}function j(){e.removeEventListener("click",y,r),e.removeEventListener("touchstart",x,r),F()}return{remove:j}}),X5}var J5,CT;function Gle(){if(CT)return J5;CT=1;function n(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function e(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function t(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}var r=ja(),i=Op(),s=Wle(),a=_3(),o=b3(),f=o.refType,y=x3(),x={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:f,tag:i.string},B=function(O){t(T,O);function T(){var F,j,N;n(this,T);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(F=(j=e(this,O.call.apply(O,[this].concat(H))),j),j.ref=r.createRef(),j.addTapListener=function(){var ne=j.ref.current;if(ne){var $=ne.ownerDocument;$&&(j.tapListener=s($.documentElement,j.handleTap))}},j.handleTap=function(ne){j.ref.current.contains(ne.target)||j.props.ambManager.button.ref.current.contains(ne.target)||j.props.ambManager.closeMenu()},j.setRef=function(ne){j.ref.current=ne,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(ne):j.props.forwardedRef&&(j.props.forwardedRef.current=ne)},F),e(j,N)}return T.prototype.componentDidMount=function(){this.props.ambManager.menu=this},T.prototype.componentDidUpdate=function(){var j=this.props.ambManager;j.options.closeOnBlur&&(j.isOpen&&!this.tapListener?this.addTapListener():!j.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),j.isOpen||j.clearItems())},T.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},T.prototype.render=function(){var j=this.props,N=this.props.ambManager,q=function(){return typeof j.children=="function"?j.children({isOpen:N.isOpen}):N.isOpen?j.children:!1}();if(!q)return!1;var H={onKeyDown:N.handleMenuKey,role:"menu",tabIndex:-1};return N.options.closeOnBlur&&(H.onBlur=N.handleBlur),y(H,j,x),y(H,{ref:this.setRef}),r.createElement(j.tag,H,q)},T}(r.Component);return B.propTypes=x,B.defaultProps={tag:"div"},J5=r.forwardRef(function(O,T){return r.createElement(a.Consumer,null,function(F){var j={ambManager:F,forwardedRef:T};return y(j,O,{ambManager:x.ambManager,children:x.children,forwardedRef:x.forwardedRef}),r.createElement(B,j,O.children)})}),J5}var ew,_T;function Qle(){if(_T)return ew;_T=1;function n(B,O){if(!(B instanceof O))throw new TypeError("Cannot call a class as a function")}function e(B,O){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:B}function t(B,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);B.prototype=Object.create(O&&O.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(B,O):B.__proto__=O)}var r=ja(),i=Op(),s=_3(),a=b3(),o=a.refType,f=x3(),y={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},x=function(B){t(O,B);function O(){var T,F,j;n(this,O);for(var N=arguments.length,q=Array(N),H=0;H<N;H++)q[H]=arguments[H];return j=(T=(F=e(this,B.call.apply(B,[this].concat(q))),F),F.ref=r.createRef(),F.handleKeyDown=function(oe){oe.key!=="Enter"&&oe.key!==" "||F.props.tag==="a"&&F.props.href||(oe.preventDefault(),F.selectItem(oe))},F.selectItem=function(oe){var ne=typeof F.props.value<"u"?F.props.value:F.props.children;F.props.ambManager.handleSelection(ne,oe)},F.setRef=function(oe){F.ref.current=oe,typeof F.props.forwardedRef=="function"?F.props.forwardedRef(oe):F.props.forwardedRef&&(F.props.forwardedRef.current=oe)},T),e(F,j)}return O.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},O.prototype.render=function(){var F={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return f(F,this.props,y),r.createElement(this.props.tag,F,this.props.children)},O}(r.Component);return x.propTypes=y,x.defaultProps={tag:"div"},ew=r.forwardRef(function(B,O){return r.createElement(s.Consumer,null,function(T){var F={ambManager:T,forwardedRef:O};return f(F,B,{ambManager:y.ambManager,children:y.children,forwardedRef:y.forwardedRef}),r.createElement(x,F,B.children)})}),ew}var tw,bT;function qle(){if(bT)return tw;bT=1;var n=oW();return tw={Wrapper:jle(),Button:Nle(),Menu:Gle(),MenuItem:Qle(),openMenu:n.openMenu,closeMenu:n.closeMenu},tw}var Nb=qle();function xT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function FB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(t),!0).forEach(function(r){Rl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function w3(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wT(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function M3(n,e,t){return e&&wT(n.prototype,e),t&&wT(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Rl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fm(){return fm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fm.apply(this,arguments)}function QO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&LB(n,e)}function fx(n){return fx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fx(n)}function LB(n,e){return LB=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},LB(n,e)}function Yle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $le(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function S3(n,e){if(n==null)return{};var t=$le(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _p(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Vle(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _p(n)}function qO(n){var e=Yle();return function(){var r=fx(n),i;if(e){var s=fx(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Vle(this,i)}}function Hle(n,e){return Jle(n)||tue(n,e)||sW(n,e)||rue()}function Zle(n){return Xle(n)||eue(n)||sW(n)||nue()}function Xle(n){if(Array.isArray(n))return UB(n)}function Jle(n){if(Array.isArray(n))return n}function eue(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tue(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(f){s=!0,o=f}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function sW(n,e){if(n){if(typeof n=="string")return UB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return UB(n,e)}}function UB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function nue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var iue=M3(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,a=s===void 0?!1:s,o=e.allowZeroExpanded,f=o===void 0?!1:o;w3(this,n),Rl(this,"expanded",void 0),Rl(this,"allowMultipleExpanded",void 0),Rl(this,"allowZeroExpanded",void 0),Rl(this,"toggleExpanded",function(y){if(t.isItemDisabled(y))return t;var x=t.isItemExpanded(y);return x?t.augment({expanded:t.expanded.filter(function(B){return B!==y})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(Zle(t.expanded),[y]):[y]})}),Rl(this,"isItemDisabled",function(y){var x=t.isItemExpanded(y),B=t.expanded.length===1;return!!(x&&!t.allowZeroExpanded&&B)}),Rl(this,"isItemExpanded",function(y){return t.expanded.indexOf(y)!==-1}),Rl(this,"getPanelAttributes",function(y,x){var B=x??t.isItemExpanded(y);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!B:void 0,"aria-labelledby":t.getButtonId(y),id:t.getPanelId(y),hidden:B?void 0:!0}}),Rl(this,"getHeadingAttributes",function(){return{role:"heading"}}),Rl(this,"getButtonAttributes",function(y,x){var B=x??t.isItemExpanded(y),O=t.isItemDisabled(y);return{id:t.getButtonId(y),"aria-disabled":O,"aria-expanded":B,"aria-controls":t.getPanelId(y),role:"button",tabIndex:0}}),Rl(this,"getPanelId",function(y){return"accordion__panel-".concat(y)}),Rl(this,"getButtonId",function(y){return"accordion__heading-".concat(y)}),Rl(this,"augment",function(y){return new n(FB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},y))}),this.expanded=i,this.allowMultipleExpanded=a,this.allowZeroExpanded=f}),aW=ui.createContext(null),lW=function(n){QO(t,n);var e=qO(t);function t(){var r;w3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Rl(_p(r),"state",new iue({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Rl(_p(r),"toggleExpanded",function(o){r.setState(function(f){return f.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Rl(_p(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),Rl(_p(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),Rl(_p(r),"getPanelAttributes",function(o,f){return r.state.getPanelAttributes(o,f)}),Rl(_p(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Rl(_p(r),"getButtonAttributes",function(o,f){return r.state.getButtonAttributes(o,f)}),r}return M3(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,a=i.allowMultipleExpanded;return ui.createElement(aW.Provider,{value:{allowMultipleExpanded:a,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(ui.PureComponent);Rl(lW,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var uW=function(n){QO(t,n);var e=qO(t);function t(){var r;w3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Rl(_p(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return M3(t,[{key:"render",value:function(){return ui.createElement(aW.Consumer,null,this.renderChildren)}}]),t}(ui.PureComponent),oue=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],sue=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,a=e.onChange,o=e.preExpanded,f=S3(e,oue);return ui.createElement(lW,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:a},ui.createElement("div",fm({"data-accordion-component":"Accordion",className:r},f)))},zB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(zB||(zB={}));var AW=zB,nw=0;function aue(){var n=nw;return nw=nw+1,"raa-".concat(n)}var lue=ui.useId||aue,uue=/[\u0009\u000a\u000c\u000d\u0020]/g;function e_(n){return n===""||uue.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var cW=ui.createContext(null),Aue=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,a=function(){i.toggleExpanded(r)},o=function(y){var x=s??y.isItemExpanded(r),B=y.isItemDisabled(r),O=y.getPanelAttributes(r,s),T=y.getHeadingAttributes(r),F=y.getButtonAttributes(r,s);return ui.createElement(cW.Provider,{value:{uuid:r,expanded:x,disabled:B,toggleExpanded:a,panelAttributes:O,headingAttributes:T,buttonAttributes:F}},t)};return ui.createElement(uW,null,o)},cue=function(e){return ui.createElement(uW,null,function(t){return ui.createElement(Aue,fm({},e,{accordionContext:t}))})},E3=function(e){var t=e.children,r=function(s){return s?t(s):null};return ui.createElement(cW.Consumer,null,r)},due=["uuid","dangerouslySetExpanded","className","activeClassName"],dW=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,a=e.activeClassName,o=S3(e,due),f=ui.useState(lue()),y=Hle(f,1),x=y[0],B=t??x,O=function(F){var j=F.expanded,N=j&&a?a:s;return ui.createElement("div",fm({"data-accordion-component":"AccordionItem",className:N},o))};return e_(B.toString()),o.id&&e_(o.id),ui.createElement(cue,{uuid:B,dangerouslySetExpanded:r},ui.createElement(E3,null,O))};dW.displayName=AW.AccordionItem;function hW(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:hW(n.parentElement))}function B3(n){var e=hW(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function hue(n){var e=B3(n)||[],t=e[0];t&&t.focus()}function fue(n){var e=B3(n)||[],t=e[e.length-1];t&&t.focus()}function pue(n){var e=B3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function mue(n){var e=B3(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Dm={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},gue=["toggleExpanded","className"],yue=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=S3(e,gue),a=function(f){var y=f.key;if((y===Dm.ENTER||y===Dm.SPACE||y===Dm.SPACE_DEPRECATED)&&(f.preventDefault(),t()),f.target instanceof HTMLElement)switch(y){case Dm.HOME:{f.preventDefault(),hue(f.target);break}case Dm.END:{f.preventDefault(),fue(f.target);break}case Dm.LEFT:case Dm.UP:{f.preventDefault(),mue(f.target);break}case Dm.RIGHT:case Dm.DOWN:{f.preventDefault(),pue(f.target);break}}};return s.id&&e_(s.id),ui.createElement("div",fm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:a,"data-accordion-component":"AccordionItemButton"}))},vue=function(e){return ui.createElement(E3,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return ui.createElement(yue,fm({toggleExpanded:r},e,i))})},Cue={className:"accordion__heading","aria-level":3},_ue=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

“The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.”

`,fW=function(n){QO(t,n);var e=qO(t);function t(){var r;w3(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Rl(_p(r),"ref",void 0),Rl(_p(r),"setRef",function(o){r.ref=o}),r}return M3(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return ui.createElement("div",fm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(_ue)}}]),t}(ui.PureComponent);Rl(fW,"defaultProps",Cue);var pW=function(e){return ui.createElement(E3,null,function(t){var r=t.headingAttributes;return e.id&&e_(e.id),ui.createElement(fW,fm({},e,r))})};pW.displayName=AW.AccordionItemHeading;var bue=["className","region","id"],xue=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,a=S3(e,bue),o=function(y){var x=y.panelAttributes;s&&e_(s);var B=FB(FB({},x),{},{"aria-labelledby":i?x["aria-labelledby"]:void 0});return ui.createElement("div",fm({"data-accordion-component":"AccordionItemPanel",className:r},a,B,{role:i?"region":void 0}))};return ui.createElement(E3,null,o)},A2={exports:{}},wue=A2.exports,MT;function O3(){return MT||(MT=1,function(n,e){(function(t,r){n.exports=r()})(wue,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),f=s||a||o,y=f&&(s?document.documentMode||6:+(o||a)[1]),x=!o&&/WebKit\//.test(t),B=x&&/Qt\/\d+\.\d+/.test(t),O=!o&&/Chrome\/(\d+)/.exec(t),T=O&&+O[1],F=/Opera\//.test(t),j=/Apple Computer/.test(navigator.vendor),N=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),q=/PhantomJS/.test(t),H=j&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),oe=/Android/.test(t),ne=H||oe||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),$=H||/Mac/.test(r),te=/\bCrOS\b/.test(t),G=/win/i.test(r),ie=F&&t.match(/Version\/(\d*\.\d*)/);ie&&(ie=Number(ie[1])),ie&&ie>=15&&(F=!1,x=!0);var he=$&&(B||F&&(ie==null||ie<12.11)),pe=i||f&&y>=9;function Ee(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var me=function(A,g){var E=A.className,S=Ee(g).exec(E);if(S){var D=E.slice(S.index+S[0].length);A.className=E.slice(0,S.index)+(D?S[1]+D:"")}};function Se(A){for(var g=A.childNodes.length;g>0;--g)A.removeChild(A.firstChild);return A}function De(A,g){return Se(A).appendChild(g)}function be(A,g,E,S){var D=document.createElement(A);if(E&&(D.className=E),S&&(D.style.cssText=S),typeof g=="string")D.appendChild(document.createTextNode(g));else if(g)for(var Z=0;Z<g.length;++Z)D.appendChild(g[Z]);return D}function at(A,g,E,S){var D=be(A,g,E,S);return D.setAttribute("role","presentation"),D}var Ze;document.createRange?Ze=function(A,g,E,S){var D=document.createRange();return D.setEnd(S||A,E),D.setStart(A,g),D}:Ze=function(A,g,E){var S=document.body.createTextRange();try{S.moveToElementText(A.parentNode)}catch{return S}return S.collapse(!0),S.moveEnd("character",E),S.moveStart("character",g),S};function Je(A,g){if(g.nodeType==3&&(g=g.parentNode),A.contains)return A.contains(g);do if(g.nodeType==11&&(g=g.host),g==A)return!0;while(g=g.parentNode)}function We(A){var g=A.ownerDocument||A,E;try{E=A.activeElement}catch{E=g.body||null}for(;E&&E.shadowRoot&&E.shadowRoot.activeElement;)E=E.shadowRoot.activeElement;return E}function Me(A,g){var E=A.className;Ee(g).test(E)||(A.className+=(E?" ":"")+g)}function Fe(A,g){for(var E=A.split(" "),S=0;S<E.length;S++)E[S]&&!Ee(E[S]).test(g)&&(g+=" "+E[S]);return g}var He=function(A){A.select()};H?He=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:f&&(He=function(A){try{A.select()}catch{}});function bt(A){return A.display.wrapper.ownerDocument}function Yt(A){return gt(A.display.wrapper)}function gt(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Lt(A){return bt(A).defaultView}function Kt(A){var g=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,g)}}function Ue(A,g,E){g||(g={});for(var S in A)A.hasOwnProperty(S)&&(E!==!1||!g.hasOwnProperty(S))&&(g[S]=A[S]);return g}function Pe(A,g,E,S,D){g==null&&(g=A.search(/[^\s\u00a0]/),g==-1&&(g=A.length));for(var Z=S||0,Ae=D||0;;){var Ce=A.indexOf("	",Z);if(Ce<0||Ce>=g)return Ae+(g-Z);Ae+=Ce-Z,Ae+=E-Ae%E,Z=Ce+1}}var Be=function(){this.id=null,this.f=null,this.time=0,this.handler=Kt(this.onTimeout,this)};Be.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},Be.prototype.set=function(A,g){this.f=g;var E=+new Date+A;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=E)};function it(A,g){for(var E=0;E<A.length;++E)if(A[E]==g)return E;return-1}var _t=50,ft={toString:function(){return"CodeMirror.Pass"}},Ut={scroll:!1},rn={origin:"*mouse"},Dt={origin:"+move"};function _n(A,g,E){for(var S=0,D=0;;){var Z=A.indexOf("	",S);Z==-1&&(Z=A.length);var Ae=Z-S;if(Z==A.length||D+Ae>=g)return S+Math.min(Ae,g-D);if(D+=Z-S,D+=E-D%E,S=Z+1,D>=g)return S}}var qn=[""];function tn(A){for(;qn.length<=A;)qn.push(rr(qn)+" ");return qn[A]}function rr(A){return A[A.length-1]}function Dn(A,g){for(var E=[],S=0;S<A.length;S++)E[S]=g(A[S],S);return E}function pn(A,g,E){for(var S=0,D=E(g);S<A.length&&E(A[S])<=D;)S++;A.splice(S,0,g)}function Zn(){}function dr(A,g){var E;return Object.create?E=Object.create(A):(Zn.prototype=A,E=new Zn),g&&Ue(g,E),E}var vr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Jn(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||vr.test(A))}function Qe(A,g){return g?g.source.indexOf("\\w")>-1&&Jn(A)?!0:g.test(A):Jn(A)}function ce(A){for(var g in A)if(A.hasOwnProperty(g)&&A[g])return!1;return!0}var fe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function nt(A){return A.charCodeAt(0)>=768&&fe.test(A)}function St(A,g,E){for(;(E<0?g>0:g<A.length)&&nt(A.charAt(g));)g+=E;return g}function Ht(A,g,E){for(var S=g>E?-1:1;;){if(g==E)return g;var D=(g+E)/2,Z=S<0?Math.ceil(D):Math.floor(D);if(Z==g)return A(Z)?g:E;A(Z)?E=Z:g=Z+S}}function sn(A,g,E,S){if(!A)return S(g,E,"ltr",0);for(var D=!1,Z=0;Z<A.length;++Z){var Ae=A[Z];(Ae.from<E&&Ae.to>g||g==E&&Ae.to==g)&&(S(Math.max(Ae.from,g),Math.min(Ae.to,E),Ae.level==1?"rtl":"ltr",Z),D=!0)}D||S(g,E,"ltr")}var tr=null;function Oe(A,g,E){var S;tr=null;for(var D=0;D<A.length;++D){var Z=A[D];if(Z.from<g&&Z.to>g)return D;Z.to==g&&(Z.from!=Z.to&&E=="before"?S=D:tr=D),Z.from==g&&(Z.from!=Z.to&&E!="before"?S=D:tr=D)}return S??tr}var se=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",g="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(je){return je<=247?A.charAt(je):1424<=je&&je<=1524?"R":1536<=je&&je<=1785?g.charAt(je-1536):1774<=je&&je<=2220?"r":8192<=je&&je<=8203?"w":je==8204?"b":"L"}var S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,D=/[stwN]/,Z=/[LRr]/,Ae=/[Lb1n]/,Ce=/[1n]/;function Te(je,yt,Mt){this.level=je,this.from=yt,this.to=Mt}return function(je,yt){var Mt=yt=="ltr"?"L":"R";if(je.length==0||yt=="ltr"&&!S.test(je))return!1;for(var en=je.length,Qt=[],wn=0;wn<en;++wn)Qt.push(E(je.charCodeAt(wn)));for(var Ln=0,sr=Mt;Ln<en;++Ln){var Vn=Qt[Ln];Vn=="m"?Qt[Ln]=sr:sr=Vn}for(var wr=0,yr=Mt;wr<en;++wr){var Or=Qt[wr];Or=="1"&&yr=="r"?Qt[wr]="n":Z.test(Or)&&(yr=Or,Or=="r"&&(Qt[wr]="R"))}for(var ni=1,zr=Qt[0];ni<en-1;++ni){var Zi=Qt[ni];Zi=="+"&&zr=="1"&&Qt[ni+1]=="1"?Qt[ni]="1":Zi==","&&zr==Qt[ni+1]&&(zr=="1"||zr=="n")&&(Qt[ni]=zr),zr=Zi}for(var jo=0;jo<en;++jo){var $a=Qt[jo];if($a==",")Qt[jo]="N";else if($a=="%"){var oa=void 0;for(oa=jo+1;oa<en&&Qt[oa]=="%";++oa);for(var _a=jo&&Qt[jo-1]=="!"||oa<en&&Qt[oa]=="1"?"1":"N",Va=jo;Va<oa;++Va)Qt[Va]=_a;jo=oa-1}}for(var ba=0,hu=Mt;ba<en;++ba){var Ra=Qt[ba];hu=="L"&&Ra=="1"?Qt[ba]="L":Z.test(Ra)&&(hu=Ra)}for(var Fa=0;Fa<en;++Fa)if(D.test(Qt[Fa])){var ls=void 0;for(ls=Fa+1;ls<en&&D.test(Qt[ls]);++ls);for(var vi=(Fa?Qt[Fa-1]:Mt)=="L",ms=(ls<en?Qt[ls]:Mt)=="L",Ns=vi==ms?vi?"L":"R":Mt,da=Fa;da<ls;++da)Qt[da]=Ns;Fa=ls-1}for(var Bs=[],ku,_o=0;_o<en;)if(Ae.test(Qt[_o])){var zh=_o;for(++_o;_o<en&&Ae.test(Qt[_o]);++_o);Bs.push(new Te(0,zh,_o))}else{var Gl=_o,eA=Bs.length,Cc=yt=="rtl"?1:0;for(++_o;_o<en&&Qt[_o]!="L";++_o);for(var yl=Gl;yl<_o;)if(Ce.test(Qt[yl])){Gl<yl&&(Bs.splice(eA,0,new Te(1,Gl,yl)),eA+=Cc);var Il=yl;for(++yl;yl<_o&&Ce.test(Qt[yl]);++yl);Bs.splice(eA,0,new Te(2,Il,yl)),eA+=Cc,Gl=yl}else++yl;Gl<_o&&Bs.splice(eA,0,new Te(1,Gl,_o))}return yt=="ltr"&&(Bs[0].level==1&&(ku=je.match(/^\s+/))&&(Bs[0].from=ku[0].length,Bs.unshift(new Te(0,0,ku[0].length))),rr(Bs).level==1&&(ku=je.match(/\s+$/))&&(rr(Bs).to-=ku[0].length,Bs.push(new Te(0,en-ku[0].length,en)))),yt=="rtl"?Bs.reverse():Bs}}();function ve(A,g){var E=A.order;return E==null&&(E=A.order=se(A.text,g)),E}var p=[],Ne=function(A,g,E){if(A.addEventListener)A.addEventListener(g,E,!1);else if(A.attachEvent)A.attachEvent("on"+g,E);else{var S=A._handlers||(A._handlers={});S[g]=(S[g]||p).concat(E)}};function Ye(A,g){return A._handlers&&A._handlers[g]||p}function rt(A,g,E){if(A.removeEventListener)A.removeEventListener(g,E,!1);else if(A.detachEvent)A.detachEvent("on"+g,E);else{var S=A._handlers,D=S&&S[g];if(D){var Z=it(D,E);Z>-1&&(S[g]=D.slice(0,Z).concat(D.slice(Z+1)))}}}function ct(A,g){var E=Ye(A,g);if(E.length)for(var S=Array.prototype.slice.call(arguments,2),D=0;D<E.length;++D)E[D].apply(null,S)}function dt(A,g,E){return typeof g=="string"&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),ct(A,E||g.type,A,g),On(g)||g.codemirrorIgnore}function qt(A){var g=A._handlers&&A._handlers.cursorActivity;if(g)for(var E=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),S=0;S<g.length;++S)it(E,g[S])==-1&&E.push(g[S])}function Gt(A,g){return Ye(A,g).length>0}function jt(A){A.prototype.on=function(g,E){Ne(this,g,E)},A.prototype.off=function(g,E){rt(this,g,E)}}function xt(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function Tn(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function On(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function gr(A){xt(A),Tn(A)}function Er(A){return A.target||A.srcElement}function on(A){var g=A.which;return g==null&&(A.button&1?g=1:A.button&2?g=3:A.button&4&&(g=2)),$&&A.ctrlKey&&g==1&&(g=3),g}var Rn=function(){if(f&&y<9)return!1;var A=be("div");return"draggable"in A||"dragDrop"in A}(),er;function Xr(A){if(er==null){var g=be("span","​");De(A,be("span",[g,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(er=g.offsetWidth<=1&&g.offsetHeight>2&&!(f&&y<8))}var E=er?be("span","​"):be("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var Ur;function Dr(A){if(Ur!=null)return Ur;var g=De(A,document.createTextNode("AخA")),E=Ze(g,0,1).getBoundingClientRect(),S=Ze(g,1,2).getBoundingClientRect();return Se(A),!E||E.left==E.right?!1:Ur=S.right-E.right<3}var ur=`

b`.split(/\n/).length!=3?function(A){for(var g=0,E=[],S=A.length;g<=S;){var D=A.indexOf(`
`,g);D==-1&&(D=A.length);var Z=A.slice(g,A.charAt(D-1)=="\r"?D-1:D),Ae=Z.indexOf("\r");Ae!=-1?(E.push(Z.slice(0,Ae)),g+=Ae+1):(E.push(Z),g=D+1)}return E}:function(A){return A.split(/\r\n?|\n/)},go=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var g;try{g=A.ownerDocument.selection.createRange()}catch{}return!g||g.parentElement()!=A?!1:g.compareEndPoints("StartToEnd",g)!=0},Sa=function(){var A=be("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),Yi=null;function Ci(A){if(Yi!=null)return Yi;var g=De(A,be("span","x")),E=g.getBoundingClientRect(),S=Ze(g,0,1).getBoundingClientRect();return Yi=Math.abs(E.left-S.left)>1}var oo={},Ro={};function Pi(A,g){arguments.length>2&&(g.dependencies=Array.prototype.slice.call(arguments,2)),oo[A]=g}function Na(A,g){Ro[A]=g}function Ea(A){if(typeof A=="string"&&Ro.hasOwnProperty(A))A=Ro[A];else if(A&&typeof A.name=="string"&&Ro.hasOwnProperty(A.name)){var g=Ro[A.name];typeof g=="string"&&(g={name:g}),A=dr(g,A),A.name=g.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return Ea("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return Ea("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function rs(A,g){g=Ea(g);var E=oo[g.name];if(!E)return rs(A,"text/plain");var S=E(A,g);if(aa.hasOwnProperty(g.name)){var D=aa[g.name];for(var Z in D)D.hasOwnProperty(Z)&&(S.hasOwnProperty(Z)&&(S["_"+Z]=S[Z]),S[Z]=D[Z])}if(S.name=g.name,g.helperType&&(S.helperType=g.helperType),g.modeProps)for(var Ae in g.modeProps)S[Ae]=g.modeProps[Ae];return S}var aa={};function cl(A,g){var E=aa.hasOwnProperty(A)?aa[A]:aa[A]={};Ue(g,E)}function Ao(A,g){if(g===!0)return g;if(A.copyState)return A.copyState(g);var E={};for(var S in g){var D=g[S];D instanceof Array&&(D=D.concat([])),E[S]=D}return E}function Uu(A,g){for(var E;A.innerMode&&(E=A.innerMode(g),!(!E||E.mode==A));)g=E.state,A=E.mode;return E||{mode:A,state:g}}function Zl(A,g,E){return A.startState?A.startState(g,E):!0}var so=function(A,g,E){this.pos=this.start=0,this.string=A,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};so.prototype.eol=function(){return this.pos>=this.string.length},so.prototype.sol=function(){return this.pos==this.lineStart},so.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},so.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},so.prototype.eat=function(A){var g=this.string.charAt(this.pos),E;if(typeof A=="string"?E=g==A:E=g&&(A.test?A.test(g):A(g)),E)return++this.pos,g},so.prototype.eatWhile=function(A){for(var g=this.pos;this.eat(A););return this.pos>g},so.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},so.prototype.skipToEnd=function(){this.pos=this.string.length},so.prototype.skipTo=function(A){var g=this.string.indexOf(A,this.pos);if(g>-1)return this.pos=g,!0},so.prototype.backUp=function(A){this.pos-=A},so.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},so.prototype.indentation=function(){return Pe(this.string,null,this.tabSize)-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},so.prototype.match=function(A,g,E){if(typeof A=="string"){var S=function(Ae){return E?Ae.toLowerCase():Ae},D=this.string.substr(this.pos,A.length);if(S(D)==S(A))return g!==!1&&(this.pos+=A.length),!0}else{var Z=this.string.slice(this.pos).match(A);return Z&&Z.index>0?null:(Z&&g!==!1&&(this.pos+=Z[0].length),Z)}},so.prototype.current=function(){return this.string.slice(this.start,this.pos)},so.prototype.hideFirstChars=function(A,g){this.lineStart+=A;try{return g()}finally{this.lineStart-=A}},so.prototype.lookAhead=function(A){var g=this.lineOracle;return g&&g.lookAhead(A)},so.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function Tr(A,g){if(g-=A.first,g<0||g>=A.size)throw new Error("There is no line "+(g+A.first)+" in the document.");for(var E=A;!E.lines;)for(var S=0;;++S){var D=E.children[S],Z=D.chunkSize();if(g<Z){E=D;break}g-=Z}return E.lines[g]}function tl(A,g,E){var S=[],D=g.line;return A.iter(g.line,E.line+1,function(Z){var Ae=Z.text;D==E.line&&(Ae=Ae.slice(0,E.ch)),D==g.line&&(Ae=Ae.slice(g.ch)),S.push(Ae),++D}),S}function Os(A,g,E){var S=[];return A.iter(g,E,function(D){S.push(D.text)}),S}function ea(A,g){var E=g-A.height;if(E)for(var S=A;S;S=S.parent)S.height+=E}function qe(A){if(A.parent==null)return null;for(var g=A.parent,E=it(g.lines,A),S=g.parent;S;g=S,S=S.parent)for(var D=0;S.children[D]!=g;++D)E+=S.children[D].chunkSize();return E+g.first}function wt(A,g){var E=A.first;e:do{for(var S=0;S<A.children.length;++S){var D=A.children[S],Z=D.height;if(g<Z){A=D;continue e}g-=Z,E+=D.chunkSize()}return E}while(!A.lines);for(var Ae=0;Ae<A.lines.length;++Ae){var Ce=A.lines[Ae],Te=Ce.height;if(g<Te)break;g-=Te}return E+Ae}function vn(A,g){return g>=A.first&&g<A.first+A.size}function Yn(A,g){return String(A.lineNumberFormatter(g+A.firstLineNumber))}function hn(A,g,E){if(E===void 0&&(E=null),!(this instanceof hn))return new hn(A,g,E);this.line=A,this.ch=g,this.sticky=E}function or(A,g){return A.line-g.line||A.ch-g.ch}function Ki(A,g){return A.sticky==g.sticky&&or(A,g)==0}function yo(A){return hn(A.line,A.ch)}function _s(A,g){return or(A,g)<0?g:A}function Fs(A,g){return or(A,g)<0?A:g}function OA(A,g){return Math.max(A.first,Math.min(g,A.first+A.size-1))}function ei(A,g){if(g.line<A.first)return hn(A.first,0);var E=A.first+A.size-1;return g.line>E?hn(E,Tr(A,E).text.length):Mi(g,Tr(A,g.line).text.length)}function Mi(A,g){var E=A.ch;return E==null||E>g?hn(A.line,g):E<0?hn(A.line,0):A}function nl(A,g){for(var E=[],S=0;S<g.length;S++)E[S]=ei(A,g[S]);return E}var Ai=function(A,g){this.state=A,this.lookAhead=g},la=function(A,g,E,S){this.state=g,this.doc=A,this.line=E,this.maxLookAhead=S||0,this.baseTokens=null,this.baseTokenPos=1};la.prototype.lookAhead=function(A){var g=this.doc.getLine(this.line+A);return g!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),g},la.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},la.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},la.fromSaved=function(A,g,E){return g instanceof Ai?new la(A,Ao(A.mode,g.state),E,g.lookAhead):new la(A,Ao(A.mode,g),E)},la.prototype.save=function(A){var g=A!==!1?Ao(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ai(g,this.maxLookAhead):g};function rc(A,g,E,S){var D=[A.state.modeGen],Z={};zu(A,g.text,A.doc.mode,E,function(je,yt){return D.push(je,yt)},Z,S);for(var Ae=E.state,Ce=function(je){E.baseTokens=D;var yt=A.state.overlays[je],Mt=1,en=0;E.state=!0,zu(A,g.text,yt.mode,E,function(Qt,wn){for(var Ln=Mt;en<Qt;){var sr=D[Mt];sr>Qt&&D.splice(Mt,1,Qt,D[Mt+1],sr),Mt+=2,en=Math.min(Qt,sr)}if(wn)if(yt.opaque)D.splice(Ln,Mt-Ln,Qt,"overlay "+wn),Mt=Ln+2;else for(;Ln<Mt;Ln+=2){var Vn=D[Ln+1];D[Ln+1]=(Vn?Vn+" ":"")+"overlay "+wn}},Z),E.state=Ae,E.baseTokens=null,E.baseTokenPos=1},Te=0;Te<A.state.overlays.length;++Te)Ce(Te);return{styles:D,classes:Z.bgClass||Z.textClass?Z:null}}function Ba(A,g,E){if(!g.styles||g.styles[0]!=A.state.modeGen){var S=Rr(A,qe(g)),D=g.text.length>A.options.maxHighlightLength&&Ao(A.doc.mode,S.state),Z=rc(A,g,S);D&&(S.state=D),g.stateAfter=S.save(!D),g.styles=Z.styles,Z.classes?g.styleClasses=Z.classes:g.styleClasses&&(g.styleClasses=null),E===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return g.styles}function Rr(A,g,E){var S=A.doc,D=A.display;if(!S.mode.startState)return new la(S,!0,g);var Z=bl(A,g,E),Ae=Z>S.first&&Tr(S,Z-1).stateAfter,Ce=Ae?la.fromSaved(S,Ae,Z):new la(S,Zl(S.mode),Z);return S.iter(Z,g,function(Te){$i(A,Te.text,Ce);var je=Ce.line;Te.stateAfter=je==g-1||je%5==0||je>=D.viewFrom&&je<D.viewTo?Ce.save():null,Ce.nextLine()}),E&&(S.modeFrontier=Ce.line),Ce}function $i(A,g,E,S){var D=A.doc.mode,Z=new so(g,A.options.tabSize,E);for(Z.start=Z.pos=S||0,g==""&&vo(D,E.state);!Z.eol();)yu(D,Z,E.state),Z.start=Z.pos}function vo(A,g){if(A.blankLine)return A.blankLine(g);if(A.innerMode){var E=Uu(A,g);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function yu(A,g,E,S){for(var D=0;D<10;D++){S&&(S[0]=Uu(A,E).mode);var Z=A.token(g,E);if(g.pos>g.start)return Z}throw new Error("Mode "+A.name+" failed to advance stream.")}var Mo=function(A,g,E){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=g||null,this.state=E};function Gs(A,g,E,S){var D=A.doc,Z=D.mode,Ae;g=ei(D,g);var Ce=Tr(D,g.line),Te=Rr(A,g.line,E),je=new so(Ce.text,A.options.tabSize,Te),yt;for(S&&(yt=[]);(S||je.pos<g.ch)&&!je.eol();)je.start=je.pos,Ae=yu(Z,je,Te.state),S&&yt.push(new Mo(je,Ae,Ao(D.mode,Te.state)));return S?yt:new Mo(je,Ae,Te.state)}function Qs(A,g){if(A)for(;;){var E=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;A=A.slice(0,E.index)+A.slice(E.index+E[0].length);var S=E[1]?"bgClass":"textClass";g[S]==null?g[S]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(g[S])||(g[S]+=" "+E[2])}return A}function zu(A,g,E,S,D,Z,Ae){var Ce=E.flattenSpans;Ce==null&&(Ce=A.options.flattenSpans);var Te=0,je=null,yt=new so(g,A.options.tabSize,S),Mt,en=A.options.addModeClass&&[null];for(g==""&&Qs(vo(E,S.state),Z);!yt.eol();){if(yt.pos>A.options.maxHighlightLength?(Ce=!1,Ae&&$i(A,g,S,yt.pos),yt.pos=g.length,Mt=null):Mt=Qs(yu(E,yt,S.state,en),Z),en){var Qt=en[0].name;Qt&&(Mt="m-"+(Mt?Qt+" "+Mt:Qt))}if(!Ce||je!=Mt){for(;Te<yt.start;)Te=Math.min(yt.start,Te+5e3),D(Te,je);je=Mt}yt.start=yt.pos}for(;Te<yt.pos;){var wn=Math.min(yt.pos,Te+5e3);D(wn,je),Te=wn}}function bl(A,g,E){for(var S,D,Z=A.doc,Ae=E?-1:g-(A.doc.mode.innerMode?1e3:100),Ce=g;Ce>Ae;--Ce){if(Ce<=Z.first)return Z.first;var Te=Tr(Z,Ce-1),je=Te.stateAfter;if(je&&(!E||Ce+(je instanceof Ai?je.lookAhead:0)<=Z.modeFrontier))return Ce;var yt=Pe(Te.text,null,A.options.tabSize);(D==null||S>yt)&&(D=Ce-1,S=yt)}return D}function co(A,g){if(A.modeFrontier=Math.min(A.modeFrontier,g),!(A.highlightFrontier<g-10)){for(var E=A.first,S=g-1;S>E;S--){var D=Tr(A,S).stateAfter;if(D&&(!(D instanceof Ai)||S+D.lookAhead<g)){E=S+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,E)}}var Oo=!1,Zo=!1;function Oa(){Oo=!0}function Ss(){Zo=!0}function Ia(A,g,E){this.marker=A,this.from=g,this.to=E}function ta(A,g){if(A)for(var E=0;E<A.length;++E){var S=A[E];if(S.marker==g)return S}}function IA(A,g){for(var E,S=0;S<A.length;++S)A[S]!=g&&(E||(E=[])).push(A[S]);return E}function ho(A,g,E){var S=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));S&&A.markedSpans&&S.has(A.markedSpans)?A.markedSpans.push(g):(A.markedSpans=A.markedSpans?A.markedSpans.concat([g]):[g],S&&S.add(A.markedSpans)),g.marker.attachLine(A)}function Xl(A,g,E){var S;if(A)for(var D=0;D<A.length;++D){var Z=A[D],Ae=Z.marker,Ce=Z.from==null||(Ae.inclusiveLeft?Z.from<=g:Z.from<g);if(Ce||Z.from==g&&Ae.type=="bookmark"&&(!E||!Z.marker.insertLeft)){var Te=Z.to==null||(Ae.inclusiveRight?Z.to>=g:Z.to>g);(S||(S=[])).push(new Ia(Ae,Z.from,Te?null:Z.to))}}return S}function zi(A,g,E){var S;if(A)for(var D=0;D<A.length;++D){var Z=A[D],Ae=Z.marker,Ce=Z.to==null||(Ae.inclusiveRight?Z.to>=g:Z.to>g);if(Ce||Z.from==g&&Ae.type=="bookmark"&&(!E||Z.marker.insertLeft)){var Te=Z.from==null||(Ae.inclusiveLeft?Z.from<=g:Z.from<g);(S||(S=[])).push(new Ia(Ae,Te?null:Z.from-g,Z.to==null?null:Z.to-g))}}return S}function Yr(A,g){if(g.full)return null;var E=vn(A,g.from.line)&&Tr(A,g.from.line).markedSpans,S=vn(A,g.to.line)&&Tr(A,g.to.line).markedSpans;if(!E&&!S)return null;var D=g.from.ch,Z=g.to.ch,Ae=or(g.from,g.to)==0,Ce=Xl(E,D,Ae),Te=zi(S,Z,Ae),je=g.text.length==1,yt=rr(g.text).length+(je?D:0);if(Ce)for(var Mt=0;Mt<Ce.length;++Mt){var en=Ce[Mt];if(en.to==null){var Qt=ta(Te,en.marker);Qt?je&&(en.to=Qt.to==null?null:Qt.to+yt):en.to=D}}if(Te)for(var wn=0;wn<Te.length;++wn){var Ln=Te[wn];if(Ln.to!=null&&(Ln.to+=yt),Ln.from==null){var sr=ta(Ce,Ln.marker);sr||(Ln.from=yt,je&&(Ce||(Ce=[])).push(Ln))}else Ln.from+=yt,je&&(Ce||(Ce=[])).push(Ln)}Ce&&(Ce=Jl(Ce)),Te&&Te!=Ce&&(Te=Jl(Te));var Vn=[Ce];if(!je){var wr=g.text.length-2,yr;if(wr>0&&Ce)for(var Or=0;Or<Ce.length;++Or)Ce[Or].to==null&&(yr||(yr=[])).push(new Ia(Ce[Or].marker,null,null));for(var ni=0;ni<wr;++ni)Vn.push(yr);Vn.push(Te)}return Vn}function Jl(A){for(var g=0;g<A.length;++g){var E=A[g];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&A.splice(g--,1)}return A.length?A:null}function Vi(A,g,E){var S=null;if(A.iter(g.line,E.line+1,function(Qt){if(Qt.markedSpans)for(var wn=0;wn<Qt.markedSpans.length;++wn){var Ln=Qt.markedSpans[wn].marker;Ln.readOnly&&(!S||it(S,Ln)==-1)&&(S||(S=[])).push(Ln)}}),!S)return null;for(var D=[{from:g,to:E}],Z=0;Z<S.length;++Z)for(var Ae=S[Z],Ce=Ae.find(0),Te=0;Te<D.length;++Te){var je=D[Te];if(!(or(je.to,Ce.from)<0||or(je.from,Ce.to)>0)){var yt=[Te,1],Mt=or(je.from,Ce.from),en=or(je.to,Ce.to);(Mt<0||!Ae.inclusiveLeft&&!Mt)&&yt.push({from:je.from,to:Ce.from}),(en>0||!Ae.inclusiveRight&&!en)&&yt.push({from:Ce.to,to:je.to}),D.splice.apply(D,yt),Te+=yt.length-3}}return D}function ao(A){var g=A.markedSpans;if(g){for(var E=0;E<g.length;++E)g[E].marker.detachLine(A);A.markedSpans=null}}function Di(A,g){if(g){for(var E=0;E<g.length;++E)g[E].marker.attachLine(A);A.markedSpans=g}}function J(A){return A.inclusiveLeft?-1:0}function Ie(A){return A.inclusiveRight?1:0}function st(A,g){var E=A.lines.length-g.lines.length;if(E!=0)return E;var S=A.find(),D=g.find(),Z=or(S.from,D.from)||J(A)-J(g);if(Z)return-Z;var Ae=or(S.to,D.to)||Ie(A)-Ie(g);return Ae||g.id-A.id}function $t(A,g){var E=Zo&&A.markedSpans,S;if(E)for(var D=void 0,Z=0;Z<E.length;++Z)D=E[Z],D.marker.collapsed&&(g?D.from:D.to)==null&&(!S||st(S,D.marker)<0)&&(S=D.marker);return S}function Kr(A){return $t(A,!0)}function $n(A){return $t(A,!1)}function ti(A,g){var E=Zo&&A.markedSpans,S;if(E)for(var D=0;D<E.length;++D){var Z=E[D];Z.marker.collapsed&&(Z.from==null||Z.from<g)&&(Z.to==null||Z.to>g)&&(!S||st(S,Z.marker)<0)&&(S=Z.marker)}return S}function ci(A,g,E,S,D){var Z=Tr(A,g),Ae=Zo&&Z.markedSpans;if(Ae)for(var Ce=0;Ce<Ae.length;++Ce){var Te=Ae[Ce];if(Te.marker.collapsed){var je=Te.marker.find(0),yt=or(je.from,E)||J(Te.marker)-J(D),Mt=or(je.to,S)||Ie(Te.marker)-Ie(D);if(!(yt>=0&&Mt<=0||yt<=0&&Mt>=0)&&(yt<=0&&(Te.marker.inclusiveRight&&D.inclusiveLeft?or(je.to,E)>=0:or(je.to,E)>0)||yt>=0&&(Te.marker.inclusiveRight&&D.inclusiveLeft?or(je.from,S)<=0:or(je.from,S)<0)))return!0}}}function Br(A){for(var g;g=Kr(A);)A=g.find(-1,!0).line;return A}function xr(A){for(var g;g=$n(A);)A=g.find(1,!0).line;return A}function ji(A){for(var g,E;g=$n(A);)A=g.find(1,!0).line,(E||(E=[])).push(A);return E}function Xi(A,g){var E=Tr(A,g),S=Br(E);return E==S?g:qe(S)}function Ei(A,g){if(g>A.lastLine())return g;var E=Tr(A,g),S;if(!Wr(A,E))return g;for(;S=$n(E);)E=S.find(1,!0).line;return qe(E)+1}function Wr(A,g){var E=Zo&&g.markedSpans;if(E){for(var S=void 0,D=0;D<E.length;++D)if(S=E[D],!!S.marker.collapsed){if(S.from==null)return!0;if(!S.marker.widgetNode&&S.from==0&&S.marker.inclusiveLeft&&So(A,g,S))return!0}}}function So(A,g,E){if(E.to==null){var S=E.marker.find(1,!0);return So(A,S.line,ta(S.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==g.text.length)return!0;for(var D=void 0,Z=0;Z<g.markedSpans.length;++Z)if(D=g.markedSpans[Z],D.marker.collapsed&&!D.marker.widgetNode&&D.from==E.to&&(D.to==null||D.to!=E.from)&&(D.marker.inclusiveLeft||E.marker.inclusiveRight)&&So(A,g,D))return!0}function Ri(A){A=Br(A);for(var g=0,E=A.parent,S=0;S<E.lines.length;++S){var D=E.lines[S];if(D==A)break;g+=D.height}for(var Z=E.parent;Z;E=Z,Z=E.parent)for(var Ae=0;Ae<Z.children.length;++Ae){var Ce=Z.children[Ae];if(Ce==E)break;g+=Ce.height}return g}function ds(A){if(A.height==0)return 0;for(var g=A.text.length,E,S=A;E=Kr(S);){var D=E.find(0,!0);S=D.from.line,g+=D.from.ch-D.to.ch}for(S=A;E=$n(S);){var Z=E.find(0,!0);g-=S.text.length-Z.from.ch,S=Z.to.line,g+=S.text.length-Z.to.ch}return g}function ma(A){var g=A.display,E=A.doc;g.maxLine=Tr(E,E.first),g.maxLineLength=ds(g.maxLine),g.maxLineChanged=!0,E.iter(function(S){var D=ds(S);D>g.maxLineLength&&(g.maxLineLength=D,g.maxLine=S)})}var Wa=function(A,g,E){this.text=A,Di(this,g),this.height=E?E(this):1};Wa.prototype.lineNo=function(){return qe(this)},jt(Wa);function vu(A,g,E,S){A.text=g,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),ao(A),Di(A,E);var D=S?S(A):1;D!=A.height&&ea(A,D)}function qs(A){A.parent=null,ao(A)}var $d={},ga={};function xl(A,g){if(!A||/^\s*$/.test(A))return null;var E=g.addModeClass?ga:$d;return E[A]||(E[A]=A.replace(/\S+/g,"cm-$&"))}function Vc(A,g){var E=at("span",null,null,x?"padding-right: .1px":null),S={pre:at("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};g.measure={};for(var D=0;D<=(g.rest?g.rest.length:0);D++){var Z=D?g.rest[D-1]:g.line,Ae=void 0;S.pos=0,S.addToken=Vd,Dr(A.display.measure)&&(Ae=ve(Z,A.doc.direction))&&(S.addToken=Ls(S.addToken,Ae)),S.map=[];var Ce=g!=A.display.externalMeasured&&qe(Z);gd(Z,S,Ba(A,Z,Ce)),Z.styleClasses&&(Z.styleClasses.bgClass&&(S.bgClass=Fe(Z.styleClasses.bgClass,S.bgClass||"")),Z.styleClasses.textClass&&(S.textClass=Fe(Z.styleClasses.textClass,S.textClass||""))),S.map.length==0&&S.map.push(0,0,S.content.appendChild(Xr(A.display.measure))),D==0?(g.measure.map=S.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(S.map),(g.measure.caches||(g.measure.caches=[])).push({}))}if(x){var Te=S.content.lastChild;(/\bcm-tab\b/.test(Te.className)||Te.querySelector&&Te.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")}return ct(A,"renderLine",A,g.line,S.pre),S.pre.className&&(S.textClass=Fe(S.pre.className,S.textClass||"")),S}function ju(A){var g=be("span","•","cm-invalidchar");return g.title="\\u"+A.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function Vd(A,g,E,S,D,Z,Ae){if(g){var Ce=A.splitSpaces?Cu(g,A.trailingSpace):g,Te=A.cm.state.specialChars,je=!1,yt;if(!Te.test(g))A.col+=g.length,yt=document.createTextNode(Ce),A.map.push(A.pos,A.pos+g.length,yt),f&&y<9&&(je=!0),A.pos+=g.length;else{yt=document.createDocumentFragment();for(var Mt=0;;){Te.lastIndex=Mt;var en=Te.exec(g),Qt=en?en.index-Mt:g.length-Mt;if(Qt){var wn=document.createTextNode(Ce.slice(Mt,Mt+Qt));f&&y<9?yt.appendChild(be("span",[wn])):yt.appendChild(wn),A.map.push(A.pos,A.pos+Qt,wn),A.col+=Qt,A.pos+=Qt}if(!en)break;Mt+=Qt+1;var Ln=void 0;if(en[0]=="	"){var sr=A.cm.options.tabSize,Vn=sr-A.col%sr;Ln=yt.appendChild(be("span",tn(Vn),"cm-tab")),Ln.setAttribute("role","presentation"),Ln.setAttribute("cm-text","	"),A.col+=Vn}else en[0]=="\r"||en[0]==`
`?(Ln=yt.appendChild(be("span",en[0]=="\r"?"␍":"␤","cm-invalidchar")),Ln.setAttribute("cm-text",en[0]),A.col+=1):(Ln=A.cm.options.specialCharPlaceholder(en[0]),Ln.setAttribute("cm-text",en[0]),f&&y<9?yt.appendChild(be("span",[Ln])):yt.appendChild(Ln),A.col+=1);A.map.push(A.pos,A.pos+1,Ln),A.pos++}}if(A.trailingSpace=Ce.charCodeAt(g.length-1)==32,E||S||D||je||Z||Ae){var wr=E||"";S&&(wr+=S),D&&(wr+=D);var yr=be("span",[yt],wr,Z);if(Ae)for(var Or in Ae)Ae.hasOwnProperty(Or)&&Or!="style"&&Or!="class"&&yr.setAttribute(Or,Ae[Or]);return A.content.appendChild(yr)}A.content.appendChild(yt)}}function Cu(A,g){if(A.length>1&&!/  /.test(A))return A;for(var E=g,S="",D=0;D<A.length;D++){var Z=A.charAt(D);Z==" "&&E&&(D==A.length-1||A.charCodeAt(D+1)==32)&&(Z=" "),S+=Z,E=Z==" "}return S}function Ls(A,g){return function(E,S,D,Z,Ae,Ce,Te){D=D?D+" cm-force-border":"cm-force-border";for(var je=E.pos,yt=je+S.length;;){for(var Mt=void 0,en=0;en<g.length&&(Mt=g[en],!(Mt.to>je&&Mt.from<=je));en++);if(Mt.to>=yt)return A(E,S,D,Z,Ae,Ce,Te);A(E,S.slice(0,Mt.to-je),D,Z,null,Ce,Te),Z=null,S=S.slice(Mt.to-je),je=Mt.to}}}function kA(A,g,E,S){var D=!S&&E.widgetNode;D&&A.map.push(A.pos,A.pos+g,D),!S&&A.cm.display.input.needsContentAttribute&&(D||(D=A.content.appendChild(document.createElement("span"))),D.setAttribute("cm-marker",E.id)),D&&(A.cm.display.input.setUneditable(D),A.content.appendChild(D)),A.pos+=g,A.trailingSpace=!1}function gd(A,g,E){var S=A.markedSpans,D=A.text,Z=0;if(!S){for(var Ae=1;Ae<E.length;Ae+=2)g.addToken(g,D.slice(Z,Z=E[Ae]),xl(E[Ae+1],g.cm.options));return}for(var Ce=D.length,Te=0,je=1,yt="",Mt,en,Qt=0,wn,Ln,sr,Vn,wr;;){if(Qt==Te){wn=Ln=sr=en="",wr=null,Vn=null,Qt=1/0;for(var yr=[],Or=void 0,ni=0;ni<S.length;++ni){var zr=S[ni],Zi=zr.marker;if(Zi.type=="bookmark"&&zr.from==Te&&Zi.widgetNode)yr.push(Zi);else if(zr.from<=Te&&(zr.to==null||zr.to>Te||Zi.collapsed&&zr.to==Te&&zr.from==Te)){if(zr.to!=null&&zr.to!=Te&&Qt>zr.to&&(Qt=zr.to,Ln=""),Zi.className&&(wn+=" "+Zi.className),Zi.css&&(en=(en?en+";":"")+Zi.css),Zi.startStyle&&zr.from==Te&&(sr+=" "+Zi.startStyle),Zi.endStyle&&zr.to==Qt&&(Or||(Or=[])).push(Zi.endStyle,zr.to),Zi.title&&((wr||(wr={})).title=Zi.title),Zi.attributes)for(var jo in Zi.attributes)(wr||(wr={}))[jo]=Zi.attributes[jo];Zi.collapsed&&(!Vn||st(Vn.marker,Zi)<0)&&(Vn=zr)}else zr.from>Te&&Qt>zr.from&&(Qt=zr.from)}if(Or)for(var $a=0;$a<Or.length;$a+=2)Or[$a+1]==Qt&&(Ln+=" "+Or[$a]);if(!Vn||Vn.from==Te)for(var oa=0;oa<yr.length;++oa)kA(g,0,yr[oa]);if(Vn&&(Vn.from||0)==Te){if(kA(g,(Vn.to==null?Ce+1:Vn.to)-Te,Vn.marker,Vn.from==null),Vn.to==null)return;Vn.to==Te&&(Vn=!1)}}if(Te>=Ce)break;for(var _a=Math.min(Ce,Qt);;){if(yt){var Va=Te+yt.length;if(!Vn){var ba=Va>_a?yt.slice(0,_a-Te):yt;g.addToken(g,ba,Mt?Mt+wn:wn,sr,Te+ba.length==Qt?Ln:"",en,wr)}if(Va>=_a){yt=yt.slice(_a-Te),Te=_a;break}Te=Va,sr=""}yt=D.slice(Z,Z=E[je++]),Mt=xl(E[je++],g.cm.options)}}}function Hd(A,g,E){this.line=g,this.rest=ji(g),this.size=this.rest?qe(rr(this.rest))-E+1:1,this.node=this.text=null,this.hidden=Wr(A,g)}function Bc(A,g,E){for(var S=[],D,Z=g;Z<E;Z=D){var Ae=new Hd(A.doc,Tr(A.doc,Z),Z);D=Z+Ae.size,S.push(Ae)}return S}var Oc=null;function ep(A){Oc?Oc.ops.push(A):A.ownsGroup=Oc={ops:[A],delayedCallbacks:[]}}function yd(A){var g=A.delayedCallbacks,E=0;do{for(;E<g.length;E++)g[E].call(null);for(var S=0;S<A.ops.length;S++){var D=A.ops[S];if(D.cursorActivityHandlers)for(;D.cursorActivityCalled<D.cursorActivityHandlers.length;)D.cursorActivityHandlers[D.cursorActivityCalled++].call(null,D.cm)}}while(E<g.length)}function Kp(A,g){var E=A.ownsGroup;if(E)try{yd(E)}finally{Oc=null,g(E)}}var ic=null;function na(A,g){var E=Ye(A,g);if(E.length){var S=Array.prototype.slice.call(arguments,2),D;Oc?D=Oc.delayedCallbacks:ic?D=ic:(D=ic=[],setTimeout(cf,0));for(var Z=function(Ce){D.push(function(){return E[Ce].apply(null,S)})},Ae=0;Ae<E.length;++Ae)Z(Ae)}}function cf(){var A=ic;ic=null;for(var g=0;g<A.length;++g)A[g]()}function xh(A,g,E,S){for(var D=0;D<g.changes.length;D++){var Z=g.changes[D];Z=="text"?hf(A,g):Z=="gutter"?wh(A,g,E,S):Z=="class"?oc(A,g):Z=="widget"&&ff(A,g,S)}g.changes=null}function vd(A){return A.node==A.text&&(A.node=be("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),f&&y<8&&(A.node.style.zIndex=2)),A.node}function df(A,g){var E=g.bgClass?g.bgClass+" "+(g.line.bgClass||""):g.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),g.background)E?g.background.className=E:(g.background.parentNode.removeChild(g.background),g.background=null);else if(E){var S=vd(g);g.background=S.insertBefore(be("div",null,E),S.firstChild),A.display.input.setUneditable(g.background)}}function Cd(A,g){var E=A.display.externalMeasured;return E&&E.line==g.line?(A.display.externalMeasured=null,g.measure=E.measure,E.built):Vc(A,g)}function hf(A,g){var E=g.text.className,S=Cd(A,g);g.text==g.node&&(g.node=S.pre),g.text.parentNode.replaceChild(S.pre,g.text),g.text=S.pre,S.bgClass!=g.bgClass||S.textClass!=g.textClass?(g.bgClass=S.bgClass,g.textClass=S.textClass,oc(A,g)):E&&(g.text.className=E)}function oc(A,g){df(A,g),g.line.wrapClass?vd(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className="");var E=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass;g.text.className=E||""}function wh(A,g,E,S){if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass){var D=vd(g);g.gutterBackground=be("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(A.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px; width: "+S.gutterTotalWidth+"px"),A.display.input.setUneditable(g.gutterBackground),D.insertBefore(g.gutterBackground,g.text)}var Z=g.line.gutterMarkers;if(A.options.lineNumbers||Z){var Ae=vd(g),Ce=g.gutter=be("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px");if(Ce.setAttribute("aria-hidden","true"),A.display.input.setUneditable(Ce),Ae.insertBefore(Ce,g.text),g.line.gutterClass&&(Ce.className+=" "+g.line.gutterClass),A.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(g.lineNumber=Ce.appendChild(be("div",Yn(A.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+S.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),Z)for(var Te=0;Te<A.display.gutterSpecs.length;++Te){var je=A.display.gutterSpecs[Te].className,yt=Z.hasOwnProperty(je)&&Z[je];yt&&Ce.appendChild(be("div",[yt],"CodeMirror-gutter-elt","left: "+S.gutterLeft[je]+"px; width: "+S.gutterWidth[je]+"px"))}}}function ff(A,g,E){g.alignable&&(g.alignable=null);for(var S=Ee("CodeMirror-linewidget"),D=g.node.firstChild,Z=void 0;D;D=Z)Z=D.nextSibling,S.test(D.className)&&g.node.removeChild(D);Sh(A,g,E)}function Mh(A,g,E,S){var D=Cd(A,g);return g.text=g.node=D.pre,D.bgClass&&(g.bgClass=D.bgClass),D.textClass&&(g.textClass=D.textClass),oc(A,g),wh(A,g,E,S),Sh(A,g,S),g.node}function Sh(A,g,E){if(wl(A,g.line,g,E,!0),g.rest)for(var S=0;S<g.rest.length;S++)wl(A,g.rest[S],g,E,!1)}function wl(A,g,E,S,D){if(g.widgets)for(var Z=vd(E),Ae=0,Ce=g.widgets;Ae<Ce.length;++Ae){var Te=Ce[Ae],je=be("div",[Te.node],"CodeMirror-linewidget"+(Te.className?" "+Te.className:""));Te.handleMouseEvents||je.setAttribute("cm-ignore-events","true"),Eh(Te,je,E,S),A.display.input.setUneditable(je),D&&Te.above?Z.insertBefore(je,E.gutter||E.text):Z.appendChild(je),na(Te,"redraw")}}function Eh(A,g,E,S){if(A.noHScroll){(E.alignable||(E.alignable=[])).push(g);var D=S.wrapperWidth;g.style.left=S.fixedPos+"px",A.coverGutter||(D-=S.gutterTotalWidth,g.style.paddingLeft=S.gutterTotalWidth+"px"),g.style.width=D+"px"}A.coverGutter&&(g.style.zIndex=5,g.style.position="relative",A.noHScroll||(g.style.marginLeft=-S.gutterTotalWidth+"px"))}function Nu(A){if(A.height!=null)return A.height;var g=A.doc.cm;if(!g)return 0;if(!Je(document.body,A.node)){var E="position: relative;";A.coverGutter&&(E+="margin-left: -"+g.display.gutters.offsetWidth+"px;"),A.noHScroll&&(E+="width: "+g.display.wrapper.clientWidth+"px;"),De(g.display.measure,be("div",[A.node],null,E))}return A.height=A.node.parentNode.offsetHeight}function AA(A,g){for(var E=Er(g);E!=A.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==A.sizer&&E!=A.mover)return!0}function Hc(A){return A.lineSpace.offsetTop}function Bh(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function Oh(A){if(A.cachedPaddingH)return A.cachedPaddingH;var g=De(A.measure,be("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,S={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(S.left)&&!isNaN(S.right)&&(A.cachedPaddingH=S),S}function Wu(A){return _t-A.display.nativeBarWidth}function cA(A){return A.display.scroller.clientWidth-Wu(A)-A.display.barWidth}function Ul(A){return A.display.scroller.clientHeight-Wu(A)-A.display.barHeight}function Zc(A,g,E){var S=A.options.lineWrapping,D=S&&cA(A);if(!g.measure.heights||S&&g.measure.width!=D){var Z=g.measure.heights=[];if(S){g.measure.width=D;for(var Ae=g.text.firstChild.getClientRects(),Ce=0;Ce<Ae.length-1;Ce++){var Te=Ae[Ce],je=Ae[Ce+1];Math.abs(Te.bottom-je.bottom)>2&&Z.push((Te.bottom+je.top)/2-E.top)}}Z.push(E.bottom-E.top)}}function pf(A,g,E){if(A.line==g)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var S=0;S<A.rest.length;S++)if(A.rest[S]==g)return{map:A.measure.maps[S],cache:A.measure.caches[S]};for(var D=0;D<A.rest.length;D++)if(qe(A.rest[D])>E)return{map:A.measure.maps[D],cache:A.measure.caches[D],before:!0}}}function mf(A,g){g=Br(g);var E=qe(g),S=A.display.externalMeasured=new Hd(A.doc,g,E);S.lineN=E;var D=S.built=Vc(A,S);return S.text=D.pre,De(A.display.lineMeasure,D.pre),S}function Zd(A,g,E,S){return rl(A,ua(A,g),E,S)}function _d(A,g){if(g>=A.display.viewFrom&&g<A.display.viewTo)return A.display.view[dA(A,g)];var E=A.display.externalMeasured;if(E&&g>=E.lineN&&g<E.lineN+E.size)return E}function ua(A,g){var E=qe(g),S=_d(A,E);S&&!S.text?S=null:S&&S.changes&&(xh(A,S,E,lo(A)),A.curOp.forceUpdate=!0),S||(S=mf(A,g));var D=pf(S,g,E);return{line:g,view:S,rect:null,map:D.map,cache:D.cache,before:D.before,hasHeights:!1}}function rl(A,g,E,S,D){g.before&&(E=-1);var Z=E+(S||""),Ae;return g.cache.hasOwnProperty(Z)?Ae=g.cache[Z]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(Zc(A,g.view,g.rect),g.hasHeights=!0),Ae=bd(A,g,E,S),Ae.bogus||(g.cache[Z]=Ae)),{left:Ae.left,right:Ae.right,top:D?Ae.rtop:Ae.top,bottom:D?Ae.rbottom:Ae.bottom}}var Xo={left:0,right:0,top:0,bottom:0};function Ih(A,g,E){for(var S,D,Z,Ae,Ce,Te,je=0;je<A.length;je+=3)if(Ce=A[je],Te=A[je+1],g<Ce?(D=0,Z=1,Ae="left"):g<Te?(D=g-Ce,Z=D+1):(je==A.length-3||g==Te&&A[je+3]>g)&&(Z=Te-Ce,D=Z-1,g>=Te&&(Ae="right")),D!=null){if(S=A[je+2],Ce==Te&&E==(S.insertLeft?"left":"right")&&(Ae=E),E=="left"&&D==0)for(;je&&A[je-2]==A[je-3]&&A[je-1].insertLeft;)S=A[(je-=3)+2],Ae="left";if(E=="right"&&D==Te-Ce)for(;je<A.length-3&&A[je+3]==A[je+4]&&!A[je+5].insertLeft;)S=A[(je+=3)+2],Ae="right";break}return{node:S,start:D,end:Z,collapse:Ae,coverStart:Ce,coverEnd:Te}}function vm(A,g){var E=Xo;if(g=="left")for(var S=0;S<A.length&&(E=A[S]).left==E.right;S++);else for(var D=A.length-1;D>=0&&(E=A[D]).left==E.right;D--);return E}function bd(A,g,E,S){var D=Ih(g.map,E,S),Z=D.node,Ae=D.start,Ce=D.end,Te=D.collapse,je;if(Z.nodeType==3){for(var yt=0;yt<4;yt++){for(;Ae&&nt(g.line.text.charAt(D.coverStart+Ae));)--Ae;for(;D.coverStart+Ce<D.coverEnd&&nt(g.line.text.charAt(D.coverStart+Ce));)++Ce;if(f&&y<9&&Ae==0&&Ce==D.coverEnd-D.coverStart?je=Z.parentNode.getBoundingClientRect():je=vm(Ze(Z,Ae,Ce).getClientRects(),S),je.left||je.right||Ae==0)break;Ce=Ae,Ae=Ae-1,Te="right"}f&&y<11&&(je=_u(A.display.measure,je))}else{Ae>0&&(Te=S="right");var Mt;A.options.lineWrapping&&(Mt=Z.getClientRects()).length>1?je=Mt[S=="right"?Mt.length-1:0]:je=Z.getBoundingClientRect()}if(f&&y<9&&!Ae&&(!je||!je.left&&!je.right)){var en=Z.parentNode.getClientRects()[0];en?je={left:en.left,right:en.left+Qu(A.display),top:en.top,bottom:en.bottom}:je=Xo}for(var Qt=je.top-g.rect.top,wn=je.bottom-g.rect.top,Ln=(Qt+wn)/2,sr=g.view.measure.heights,Vn=0;Vn<sr.length-1&&!(Ln<sr[Vn]);Vn++);var wr=Vn?sr[Vn-1]:0,yr=sr[Vn],Or={left:(Te=="right"?je.right:je.left)-g.rect.left,right:(Te=="left"?je.left:je.right)-g.rect.left,top:wr,bottom:yr};return!je.left&&!je.right&&(Or.bogus=!0),A.options.singleCursorHeightPerLine||(Or.rtop=Qt,Or.rbottom=wn),Or}function _u(A,g){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Ci(A))return g;var E=screen.logicalXDPI/screen.deviceXDPI,S=screen.logicalYDPI/screen.deviceYDPI;return{left:g.left*E,right:g.right*E,top:g.top*S,bottom:g.bottom*S}}function kh(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var g=0;g<A.rest.length;g++)A.measure.caches[g]={}}function gf(A){A.display.externalMeasure=null,Se(A.display.lineMeasure);for(var g=0;g<A.display.view.length;g++)kh(A.display.view[g])}function Ic(A){gf(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function Xd(A){return O&&oe?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function Th(A){return O&&oe?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function Ph(A){var g=Br(A),E=g.widgets,S=0;if(E)for(var D=0;D<E.length;++D)E[D].above&&(S+=Nu(E[D]));return S}function eu(A,g,E,S,D){if(!D){var Z=Ph(g);E.top+=Z,E.bottom+=Z}if(S=="line")return E;S||(S="local");var Ae=Ri(g);if(S=="local"?Ae+=Hc(A.display):Ae-=A.display.viewOffset,S=="page"||S=="window"){var Ce=A.display.lineSpace.getBoundingClientRect();Ae+=Ce.top+(S=="window"?0:Th(bt(A)));var Te=Ce.left+(S=="window"?0:Xd(bt(A)));E.left+=Te,E.right+=Te}return E.top+=Ae,E.bottom+=Ae,E}function Jt(A,g,E){if(E=="div")return g;var S=g.left,D=g.top;if(E=="page")S-=Xd(bt(A)),D-=Th(bt(A));else if(E=="local"||!E){var Z=A.display.sizer.getBoundingClientRect();S+=Z.left,D+=Z.top}var Ae=A.display.lineSpace.getBoundingClientRect();return{left:S-Ae.left,top:D-Ae.top}}function En(A,g,E,S,D){return S||(S=Tr(A.doc,g.line)),eu(A,S,Zd(A,S,g.ch,D),E)}function ln(A,g,E,S,D,Z){S=S||Tr(A.doc,g.line),D||(D=ua(A,S));function Ae(wn,Ln){var sr=rl(A,D,wn,Ln?"right":"left",Z);return Ln?sr.left=sr.right:sr.right=sr.left,eu(A,S,sr,E)}var Ce=ve(S,A.doc.direction),Te=g.ch,je=g.sticky;if(Te>=S.text.length?(Te=S.text.length,je="before"):Te<=0&&(Te=0,je="after"),!Ce)return Ae(je=="before"?Te-1:Te,je=="before");function yt(wn,Ln,sr){var Vn=Ce[Ln],wr=Vn.level==1;return Ae(sr?wn-1:wn,wr!=sr)}var Mt=Oe(Ce,Te,je),en=tr,Qt=yt(Te,Mt,je=="before");return en!=null&&(Qt.other=yt(Te,en,je!="before")),Qt}function Fr(A,g){var E=0;g=ei(A.doc,g),A.options.lineWrapping||(E=Qu(A.display)*g.ch);var S=Tr(A.doc,g.line),D=Ri(S)+Hc(A.display);return{left:E,right:E,top:D,bottom:D+S.height}}function Bi(A,g,E,S,D){var Z=hn(A,g,E);return Z.xRel=D,S&&(Z.outside=S),Z}function fo(A,g,E){var S=A.doc;if(E+=A.display.viewOffset,E<0)return Bi(S.first,0,null,-1,-1);var D=wt(S,E),Z=S.first+S.size-1;if(D>Z)return Bi(S.first+S.size-1,Tr(S,Z).text.length,null,1,1);g<0&&(g=0);for(var Ae=Tr(S,D);;){var Ce=yf(A,Ae,D,g,E),Te=ti(Ae,Ce.ch+(Ce.xRel>0||Ce.outside>0?1:0));if(!Te)return Ce;var je=Te.find(1);if(je.line==D)return je;Ae=Tr(S,D=je.line)}}function ra(A,g,E,S){S-=Ph(g);var D=g.text.length,Z=Ht(function(Ae){return rl(A,E,Ae-1).bottom<=S},D,0);return D=Ht(function(Ae){return rl(A,E,Ae).top>S},Z,D),{begin:Z,end:D}}function is(A,g,E,S){E||(E=ua(A,g));var D=eu(A,g,rl(A,E,S),"line").top;return ra(A,g,E,D)}function TA(A,g,E,S){return A.bottom<=E?!1:A.top>E?!0:(S?A.left:A.right)>g}function yf(A,g,E,S,D){D-=Ri(g);var Z=ua(A,g),Ae=Ph(g),Ce=0,Te=g.text.length,je=!0,yt=ve(g,A.doc.direction);if(yt){var Mt=(A.options.lineWrapping?bu:Gu)(A,g,E,Z,yt,S,D);je=Mt.level!=1,Ce=je?Mt.from:Mt.to-1,Te=je?Mt.to:Mt.from-1}var en=null,Qt=null,wn=Ht(function(ni){var zr=rl(A,Z,ni);return zr.top+=Ae,zr.bottom+=Ae,TA(zr,S,D,!1)?(zr.top<=D&&zr.left<=S&&(en=ni,Qt=zr),!0):!1},Ce,Te),Ln,sr,Vn=!1;if(Qt){var wr=S-Qt.left<Qt.right-S,yr=wr==je;wn=en+(yr?0:1),sr=yr?"after":"before",Ln=wr?Qt.left:Qt.right}else{!je&&(wn==Te||wn==Ce)&&wn++,sr=wn==0?"after":wn==g.text.length?"before":rl(A,Z,wn-(je?1:0)).bottom+Ae<=D==je?"after":"before";var Or=ln(A,hn(E,wn,sr),"line",g,Z);Ln=Or.left,Vn=D<Or.top?-1:D>=Or.bottom?1:0}return wn=St(g.text,wn,1),Bi(E,wn,sr,Vn,S-Ln)}function Gu(A,g,E,S,D,Z,Ae){var Ce=Ht(function(Mt){var en=D[Mt],Qt=en.level!=1;return TA(ln(A,hn(E,Qt?en.to:en.from,Qt?"before":"after"),"line",g,S),Z,Ae,!0)},0,D.length-1),Te=D[Ce];if(Ce>0){var je=Te.level!=1,yt=ln(A,hn(E,je?Te.from:Te.to,je?"after":"before"),"line",g,S);TA(yt,Z,Ae,!0)&&yt.top>Ae&&(Te=D[Ce-1])}return Te}function bu(A,g,E,S,D,Z,Ae){var Ce=ra(A,g,S,Ae),Te=Ce.begin,je=Ce.end;/\s/.test(g.text.charAt(je-1))&&je--;for(var yt=null,Mt=null,en=0;en<D.length;en++){var Qt=D[en];if(!(Qt.from>=je||Qt.to<=Te)){var wn=Qt.level!=1,Ln=rl(A,S,wn?Math.min(je,Qt.to)-1:Math.max(Te,Qt.from)).right,sr=Ln<Z?Z-Ln+1e9:Ln-Z;(!yt||Mt>sr)&&(yt=Qt,Mt=sr)}}return yt||(yt=D[D.length-1]),yt.from<Te&&(yt={from:Te,to:yt.to,level:yt.level}),yt.to>je&&(yt={from:yt.from,to:je,level:yt.level}),yt}var xu;function zl(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(xu==null){xu=be("pre",null,"CodeMirror-line-like");for(var g=0;g<49;++g)xu.appendChild(document.createTextNode("x")),xu.appendChild(be("br"));xu.appendChild(document.createTextNode("x"))}De(A.measure,xu);var E=xu.offsetHeight/50;return E>3&&(A.cachedTextHeight=E),Se(A.measure),E||1}function Qu(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var g=be("span","xxxxxxxxxx"),E=be("pre",[g],"CodeMirror-line-like");De(A.measure,E);var S=g.getBoundingClientRect(),D=(S.right-S.left)/10;return D>2&&(A.cachedCharWidth=D),D||10}function lo(A){for(var g=A.display,E={},S={},D=g.gutters.clientLeft,Z=g.gutters.firstChild,Ae=0;Z;Z=Z.nextSibling,++Ae){var Ce=A.display.gutterSpecs[Ae].className;E[Ce]=Z.offsetLeft+Z.clientLeft+D,S[Ce]=Z.clientWidth}return{fixedPos:Io(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:E,gutterWidth:S,wrapperWidth:g.wrapper.clientWidth}}function Io(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function xd(A){var g=zl(A.display),E=A.options.lineWrapping,S=E&&Math.max(5,A.display.scroller.clientWidth/Qu(A.display)-3);return function(D){if(Wr(A.doc,D))return 0;var Z=0;if(D.widgets)for(var Ae=0;Ae<D.widgets.length;Ae++)D.widgets[Ae].height&&(Z+=D.widgets[Ae].height);return E?Z+(Math.ceil(D.text.length/S)||1)*g:Z+g}}function wd(A){var g=A.doc,E=xd(A);g.iter(function(S){var D=E(S);D!=S.height&&ea(S,D)})}function tu(A,g,E,S){var D=A.display;if(!E&&Er(g).getAttribute("cm-not-content")=="true")return null;var Z,Ae,Ce=D.lineSpace.getBoundingClientRect();try{Z=g.clientX-Ce.left,Ae=g.clientY-Ce.top}catch{return null}var Te=fo(A,Z,Ae),je;if(S&&Te.xRel>0&&(je=Tr(A.doc,Te.line).text).length==Te.ch){var yt=Pe(je,je.length,A.options.tabSize)-je.length;Te=hn(Te.line,Math.max(0,Math.round((Z-Oh(A.display).left)/Qu(A.display))-yt))}return Te}function dA(A,g){if(g>=A.display.viewTo||(g-=A.display.viewFrom,g<0))return null;for(var E=A.display.view,S=0;S<E.length;S++)if(g-=E[S].size,g<0)return S}function jl(A,g,E,S){g==null&&(g=A.doc.first),E==null&&(E=A.doc.first+A.doc.size),S||(S=0);var D=A.display;if(S&&E<D.viewTo&&(D.updateLineNumbers==null||D.updateLineNumbers>g)&&(D.updateLineNumbers=g),A.curOp.viewChanged=!0,g>=D.viewTo)Zo&&Xi(A.doc,g)<D.viewTo&&hA(A);else if(E<=D.viewFrom)Zo&&Ei(A.doc,E+S)>D.viewFrom?hA(A):(D.viewFrom+=S,D.viewTo+=S);else if(g<=D.viewFrom&&E>=D.viewTo)hA(A);else if(g<=D.viewFrom){var Z=nu(A,E,E+S,1);Z?(D.view=D.view.slice(Z.index),D.viewFrom=Z.lineN,D.viewTo+=S):hA(A)}else if(E>=D.viewTo){var Ae=nu(A,g,g,-1);Ae?(D.view=D.view.slice(0,Ae.index),D.viewTo=Ae.lineN):hA(A)}else{var Ce=nu(A,g,g,-1),Te=nu(A,E,E+S,1);Ce&&Te?(D.view=D.view.slice(0,Ce.index).concat(Bc(A,Ce.lineN,Te.lineN)).concat(D.view.slice(Te.index)),D.viewTo+=S):hA(A)}var je=D.externalMeasured;je&&(E<je.lineN?je.lineN+=S:g<je.lineN+je.size&&(D.externalMeasured=null))}function sc(A,g,E){A.curOp.viewChanged=!0;var S=A.display,D=A.display.externalMeasured;if(D&&g>=D.lineN&&g<D.lineN+D.size&&(S.externalMeasured=null),!(g<S.viewFrom||g>=S.viewTo)){var Z=S.view[dA(A,g)];if(Z.node!=null){var Ae=Z.changes||(Z.changes=[]);it(Ae,E)==-1&&Ae.push(E)}}}function hA(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function nu(A,g,E,S){var D=dA(A,g),Z,Ae=A.display.view;if(!Zo||E==A.doc.first+A.doc.size)return{index:D,lineN:E};for(var Ce=A.display.viewFrom,Te=0;Te<D;Te++)Ce+=Ae[Te].size;if(Ce!=g){if(S>0){if(D==Ae.length-1)return null;Z=Ce+Ae[D].size-g,D++}else Z=Ce-g;g+=Z,E+=Z}for(;Xi(A.doc,E)!=E;){if(D==(S<0?0:Ae.length-1))return null;E+=S*Ae[D-(S<0?1:0)].size,D+=S}return{index:D,lineN:E}}function Xc(A,g,E){var S=A.display,D=S.view;D.length==0||g>=S.viewTo||E<=S.viewFrom?(S.view=Bc(A,g,E),S.viewFrom=g):(S.viewFrom>g?S.view=Bc(A,g,S.viewFrom).concat(S.view):S.viewFrom<g&&(S.view=S.view.slice(dA(A,g))),S.viewFrom=g,S.viewTo<E?S.view=S.view.concat(Bc(A,S.viewTo,E)):S.viewTo>E&&(S.view=S.view.slice(0,dA(A,E)))),S.viewTo=E}function Md(A){for(var g=A.display.view,E=0,S=0;S<g.length;S++){var D=g[S];!D.hidden&&(!D.node||D.changes)&&++E}return E}function Ga(A){A.display.input.showSelection(A.display.input.prepareSelection())}function Jc(A,g){g===void 0&&(g=!0);var E=A.doc,S={},D=S.cursors=document.createDocumentFragment(),Z=S.selection=document.createDocumentFragment(),Ae=A.options.$customCursor;Ae&&(g=!0);for(var Ce=0;Ce<E.sel.ranges.length;Ce++)if(!(!g&&Ce==E.sel.primIndex)){var Te=E.sel.ranges[Ce];if(!(Te.from().line>=A.display.viewTo||Te.to().line<A.display.viewFrom)){var je=Te.empty();if(Ae){var yt=Ae(A,Te);yt&&Sd(A,yt,D)}else(je||A.options.showCursorWhenSelecting)&&Sd(A,Te.head,D);je||Kh(A,Te,Z)}}return S}function Sd(A,g,E){var S=ln(A,g,"div",null,null,!A.options.singleCursorHeightPerLine),D=E.appendChild(be("div"," ","CodeMirror-cursor"));if(D.style.left=S.left+"px",D.style.top=S.top+"px",D.style.height=Math.max(0,S.bottom-S.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var Z=En(A,g,"div",null,null),Ae=Z.right-Z.left;D.style.width=(Ae>0?Ae:A.defaultCharWidth())+"px"}if(S.other){var Ce=E.appendChild(be("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));Ce.style.display="",Ce.style.left=S.other.left+"px",Ce.style.top=S.other.top+"px",Ce.style.height=(S.other.bottom-S.other.top)*.85+"px"}}function ac(A,g){return A.top-g.top||A.left-g.left}function Kh(A,g,E){var S=A.display,D=A.doc,Z=document.createDocumentFragment(),Ae=Oh(A.display),Ce=Ae.left,Te=Math.max(S.sizerWidth,cA(A)-S.sizer.offsetLeft)-Ae.right,je=D.direction=="ltr";function yt(yr,Or,ni,zr){Or<0&&(Or=0),Or=Math.round(Or),zr=Math.round(zr),Z.appendChild(be("div",null,"CodeMirror-selected","position: absolute; left: "+yr+`px;
                             top: `+Or+"px; width: "+(ni??Te-yr)+`px;
                             height: `+(zr-Or)+"px"))}function Mt(yr,Or,ni){var zr=Tr(D,yr),Zi=zr.text.length,jo,$a;function oa(ba,hu){return En(A,hn(yr,ba),"div",zr,hu)}function _a(ba,hu,Ra){var Fa=is(A,zr,null,ba),ls=hu=="ltr"==(Ra=="after")?"left":"right",vi=Ra=="after"?Fa.begin:Fa.end-(/\s/.test(zr.text.charAt(Fa.end-1))?2:1);return oa(vi,ls)[ls]}var Va=ve(zr,D.direction);return sn(Va,Or||0,ni??Zi,function(ba,hu,Ra,Fa){var ls=Ra=="ltr",vi=oa(ba,ls?"left":"right"),ms=oa(hu-1,ls?"right":"left"),Ns=Or==null&&ba==0,da=ni==null&&hu==Zi,Bs=Fa==0,ku=!Va||Fa==Va.length-1;if(ms.top-vi.top<=3){var _o=(je?Ns:da)&&Bs,zh=(je?da:Ns)&&ku,Gl=_o?Ce:(ls?vi:ms).left,eA=zh?Te:(ls?ms:vi).right;yt(Gl,vi.top,eA-Gl,vi.bottom)}else{var Cc,yl,Il,Bf;ls?(Cc=je&&Ns&&Bs?Ce:vi.left,yl=je?Te:_a(ba,Ra,"before"),Il=je?Ce:_a(hu,Ra,"after"),Bf=je&&da&&ku?Te:ms.right):(Cc=je?_a(ba,Ra,"before"):Ce,yl=!je&&Ns&&Bs?Te:vi.right,Il=!je&&da&&ku?Ce:ms.left,Bf=je?_a(hu,Ra,"after"):Te),yt(Cc,vi.top,yl-Cc,vi.bottom),vi.bottom<ms.top&&yt(Ce,vi.bottom,null,ms.top),yt(Il,ms.top,Bf-Il,ms.bottom)}(!jo||ac(vi,jo)<0)&&(jo=vi),ac(ms,jo)<0&&(jo=ms),(!$a||ac(vi,$a)<0)&&($a=vi),ac(ms,$a)<0&&($a=ms)}),{start:jo,end:$a}}var en=g.from(),Qt=g.to();if(en.line==Qt.line)Mt(en.line,en.ch,Qt.ch);else{var wn=Tr(D,en.line),Ln=Tr(D,Qt.line),sr=Br(wn)==Br(Ln),Vn=Mt(en.line,en.ch,sr?wn.text.length+1:null).end,wr=Mt(Qt.line,sr?0:null,Qt.ch).start;sr&&(Vn.top<wr.top-2?(yt(Vn.right,Vn.top,null,Vn.bottom),yt(Ce,wr.top,wr.left,wr.bottom)):yt(Vn.right,Vn.top,wr.left-Vn.right,Vn.bottom)),Vn.bottom<wr.top&&yt(Ce,Vn.bottom,null,wr.top)}E.appendChild(Z)}function qu(A){if(A.state.focused){var g=A.display;clearInterval(g.blinker);var E=!0;g.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?g.blinker=setInterval(function(){A.hasFocus()||hs(A),g.cursorDiv.style.visibility=(E=!E)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden")}}function ed(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||Dh(A))}function lc(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&hs(A))},100)}function Dh(A,g){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(ct(A,"focus",A,g),A.state.focused=!0,Me(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),x&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),qu(A))}function hs(A,g){A.state.delayingBlurEvent||(A.state.focused&&(ct(A,"blur",A,g),A.state.focused=!1,me(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function kc(A){for(var g=A.display,E=g.lineDiv.offsetTop,S=Math.max(0,g.scroller.getBoundingClientRect().top),D=g.lineDiv.getBoundingClientRect().top,Z=0,Ae=0;Ae<g.view.length;Ae++){var Ce=g.view[Ae],Te=A.options.lineWrapping,je=void 0,yt=0;if(!Ce.hidden){if(D+=Ce.line.height,f&&y<8){var Mt=Ce.node.offsetTop+Ce.node.offsetHeight;je=Mt-E,E=Mt}else{var en=Ce.node.getBoundingClientRect();je=en.bottom-en.top,!Te&&Ce.text.firstChild&&(yt=Ce.text.firstChild.getBoundingClientRect().right-en.left-1)}var Qt=Ce.line.height-je;if((Qt>.005||Qt<-.005)&&(D<S&&(Z-=Qt),ea(Ce.line,je),PA(Ce.line),Ce.rest))for(var wn=0;wn<Ce.rest.length;wn++)PA(Ce.rest[wn]);if(yt>A.display.sizerWidth){var Ln=Math.ceil(yt/Qu(A.display));Ln>A.display.maxLineLength&&(A.display.maxLineLength=Ln,A.display.maxLine=Ce.line,A.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(g.scroller.scrollTop+=Z)}function PA(A){if(A.widgets)for(var g=0;g<A.widgets.length;++g){var E=A.widgets[g],S=E.node.parentNode;S&&(E.height=S.offsetHeight)}}function Yu(A,g,E){var S=E&&E.top!=null?Math.max(0,E.top):A.scroller.scrollTop;S=Math.floor(S-Hc(A));var D=E&&E.bottom!=null?E.bottom:S+A.wrapper.clientHeight,Z=wt(g,S),Ae=wt(g,D);if(E&&E.ensure){var Ce=E.ensure.from.line,Te=E.ensure.to.line;Ce<Z?(Z=Ce,Ae=wt(g,Ri(Tr(g,Ce))+A.wrapper.clientHeight)):Math.min(Te,g.lastLine())>=Ae&&(Z=wt(g,Ri(Tr(g,Te))-A.wrapper.clientHeight),Ae=Te)}return{from:Z,to:Math.max(Ae,Z+1)}}function Jd(A,g){if(!dt(A,"scrollCursorIntoView")){var E=A.display,S=E.sizer.getBoundingClientRect(),D=null,Z=E.wrapper.ownerDocument;if(g.top+S.top<0?D=!0:g.bottom+S.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(D=!1),D!=null&&!q){var Ae=be("div","​",null,`position: absolute;
                         top: `+(g.top-E.viewOffset-Hc(A.display))+`px;
                         height: `+(g.bottom-g.top+Wu(A)+E.barHeight)+`px;
                         left: `+g.left+"px; width: "+Math.max(2,g.right-g.left)+"px;");A.display.lineSpace.appendChild(Ae),Ae.scrollIntoView(D),A.display.lineSpace.removeChild(Ae)}}}function Ed(A,g,E,S){S==null&&(S=0);var D;!A.options.lineWrapping&&g==E&&(E=g.sticky=="before"?hn(g.line,g.ch+1,"before"):g,g=g.ch?hn(g.line,g.sticky=="before"?g.ch-1:g.ch,"after"):g);for(var Z=0;Z<5;Z++){var Ae=!1,Ce=ln(A,g),Te=!E||E==g?Ce:ln(A,E);D={left:Math.min(Ce.left,Te.left),top:Math.min(Ce.top,Te.top)-S,right:Math.max(Ce.left,Te.left),bottom:Math.max(Ce.bottom,Te.bottom)+S};var je=td(A,D),yt=A.doc.scrollTop,Mt=A.doc.scrollLeft;if(je.scrollTop!=null&&(Tc(A,je.scrollTop),Math.abs(A.doc.scrollTop-yt)>1&&(Ae=!0)),je.scrollLeft!=null&&(dl(A,je.scrollLeft),Math.abs(A.doc.scrollLeft-Mt)>1&&(Ae=!0)),!Ae)break}return D}function uc(A,g){var E=td(A,g);E.scrollTop!=null&&Tc(A,E.scrollTop),E.scrollLeft!=null&&dl(A,E.scrollLeft)}function td(A,g){var E=A.display,S=zl(A.display);g.top<0&&(g.top=0);var D=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:E.scroller.scrollTop,Z=Ul(A),Ae={};g.bottom-g.top>Z&&(g.bottom=g.top+Z);var Ce=A.doc.height+Bh(E),Te=g.top<S,je=g.bottom>Ce-S;if(g.top<D)Ae.scrollTop=Te?0:g.top;else if(g.bottom>D+Z){var yt=Math.min(g.top,(je?Ce:g.bottom)-Z);yt!=D&&(Ae.scrollTop=yt)}var Mt=A.options.fixedGutter?0:E.gutters.offsetWidth,en=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:E.scroller.scrollLeft-Mt,Qt=cA(A)-E.gutters.offsetWidth,wn=g.right-g.left>Qt;return wn&&(g.right=g.left+Qt),g.left<10?Ae.scrollLeft=0:g.left<en?Ae.scrollLeft=Math.max(0,g.left+Mt-(wn?0:10)):g.right>Qt+en-3&&(Ae.scrollLeft=g.right+(wn?0:10)-Qt),Ae}function KA(A,g){g!=null&&(Bd(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+g)}function Oi(A){Bd(A);var g=A.getCursor();A.curOp.scrollToPos={from:g,to:g,margin:A.options.cursorScrollMargin}}function Us(A,g,E){(g!=null||E!=null)&&Bd(A),g!=null&&(A.curOp.scrollLeft=g),E!=null&&(A.curOp.scrollTop=E)}function fA(A,g){Bd(A),A.curOp.scrollToPos=g}function Bd(A){var g=A.curOp.scrollToPos;if(g){A.curOp.scrollToPos=null;var E=Fr(A,g.from),S=Fr(A,g.to);nd(A,E,S,g.margin)}}function nd(A,g,E,S){var D=td(A,{left:Math.min(g.left,E.left),top:Math.min(g.top,E.top)-S,right:Math.max(g.right,E.right),bottom:Math.max(g.bottom,E.bottom)+S});Us(A,D.scrollLeft,D.scrollTop)}function Tc(A,g){Math.abs(A.doc.scrollTop-g)<2||(i||hr(A,{top:g}),DA(A,g,!0),i&&hr(A),mA(A,100))}function DA(A,g,E){g=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,g)),!(A.display.scroller.scrollTop==g&&!E)&&(A.doc.scrollTop=g,A.display.scrollbars.setScrollTop(g),A.display.scroller.scrollTop!=g&&(A.display.scroller.scrollTop=g))}function dl(A,g,E,S){g=Math.max(0,Math.min(g,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((E?g==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-g)<2)&&!S)&&(A.doc.scrollLeft=g,Td(A),A.display.scroller.scrollLeft!=g&&(A.display.scroller.scrollLeft=g),A.display.scrollbars.setScrollLeft(g))}function pA(A){var g=A.display,E=g.gutters.offsetWidth,S=Math.round(A.doc.height+Bh(A.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:A.options.fixedGutter?E:0,docHeight:S,scrollHeight:S+Wu(A)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:E}}var hl=function(A,g,E){this.cm=E;var S=this.vert=be("div",[be("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),D=this.horiz=be("div",[be("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");S.tabIndex=D.tabIndex=-1,A(S),A(D),Ne(S,"scroll",function(){S.clientHeight&&g(S.scrollTop,"vertical")}),Ne(D,"scroll",function(){D.clientWidth&&g(D.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,f&&y<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};hl.prototype.update=function(A){var g=A.scrollWidth>A.clientWidth+1,E=A.scrollHeight>A.clientHeight+1,S=A.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=g?S+"px":"0";var D=A.viewHeight-(g?S:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+D)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(g){this.horiz.style.display="block",this.horiz.style.right=E?S+"px":"0",this.horiz.style.left=A.barLeft+"px";var Z=A.viewWidth-A.barLeft-(E?S:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(S==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?S:0,bottom:g?S:0}},hl.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},hl.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},hl.prototype.zeroWidthHack=function(){var A=$&&!N?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Be,this.disableVert=new Be},hl.prototype.enableZeroWidthBar=function(A,g,E){A.style.visibility="";function S(){var D=A.getBoundingClientRect(),Z=E=="vert"?document.elementFromPoint(D.right-1,(D.top+D.bottom)/2):document.elementFromPoint((D.right+D.left)/2,D.bottom-1);Z!=A?A.style.visibility="hidden":g.set(1e3,S)}g.set(1e3,S)},hl.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var Ac=function(){};Ac.prototype.update=function(){return{bottom:0,right:0}},Ac.prototype.setScrollLeft=function(){},Ac.prototype.setScrollTop=function(){},Ac.prototype.clear=function(){};function $u(A,g){g||(g=pA(A));var E=A.display.barWidth,S=A.display.barHeight;Od(A,g);for(var D=0;D<4&&E!=A.display.barWidth||S!=A.display.barHeight;D++)E!=A.display.barWidth&&A.options.lineWrapping&&kc(A),Od(A,pA(A)),E=A.display.barWidth,S=A.display.barHeight}function Od(A,g){var E=A.display,S=E.scrollbars.update(g);E.sizer.style.paddingRight=(E.barWidth=S.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=S.bottom)+"px",E.heightForcer.style.borderBottom=S.bottom+"px solid transparent",S.right&&S.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=S.bottom+"px",E.scrollbarFiller.style.width=S.right+"px"):E.scrollbarFiller.style.display="",S.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=S.bottom+"px",E.gutterFiller.style.width=g.gutterWidth+"px"):E.gutterFiller.style.display=""}var rd={native:hl,null:Ac};function RA(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&me(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new rd[A.options.scrollbarStyle](function(g){A.display.wrapper.insertBefore(g,A.display.scrollbarFiller),Ne(g,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),g.setAttribute("cm-not-content","true")},function(g,E){E=="horizontal"?dl(A,g):Tc(A,g)},A),A.display.scrollbars.addClass&&Me(A.display.wrapper,A.display.scrollbars.addClass)}var cc=0;function Vu(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++cc,markArrays:null},ep(A.curOp)}function Hu(A){var g=A.curOp;g&&Kp(g,function(E){for(var S=0;S<E.ops.length;S++)E.ops[S].cm.curOp=null;FA(E)})}function FA(A){for(var g=A.ops,E=0;E<g.length;E++)Pc(g[E]);for(var S=0;S<g.length;S++)wu(g[S]);for(var D=0;D<g.length;D++)Rh(g[D]);for(var Z=0;Z<g.length;Z++)ot(g[Z]);for(var Ae=0;Ae<g.length;Ae++)LA(g[Ae])}function Pc(A){var g=A.cm,E=g.display;zs(g),A.updateMaxLine&&ma(g),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<E.viewFrom||A.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&g.options.lineWrapping,A.update=A.mustUpdate&&new ka(g,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function wu(A){A.updatedDisplay=A.mustUpdate&&ia(A.cm,A.update)}function Rh(A){var g=A.cm,E=g.display;A.updatedDisplay&&kc(g),A.barMeasure=pA(g),E.maxLineChanged&&!g.options.lineWrapping&&(A.adjustWidthTo=Zd(g,E.maxLine,E.maxLine.text.length).left+3,g.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+A.adjustWidthTo+Wu(g)+g.display.barWidth),A.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+A.adjustWidthTo-cA(g))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=E.input.prepareSelection())}function ot(A){var g=A.cm;A.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<g.doc.scrollLeft&&dl(g,Math.min(g.display.scroller.scrollLeft,A.maxScrollLeft),!0),g.display.maxLineChanged=!1);var E=A.focus&&A.focus==We(Yt(g));A.preparedSelection&&g.display.input.showSelection(A.preparedSelection,E),(A.updatedDisplay||A.startHeight!=g.doc.height)&&$u(g,A.barMeasure),A.updatedDisplay&&kd(g,A.barMeasure),A.selectionChanged&&qu(g),g.state.focused&&A.updateInput&&g.display.input.reset(A.typing),E&&ed(A.cm)}function LA(A){var g=A.cm,E=g.display,S=g.doc;if(A.updatedDisplay&&Aa(g,A.update),E.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),A.scrollTop!=null&&DA(g,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&dl(g,A.scrollLeft,!0,!0),A.scrollToPos){var D=Ed(g,ei(S,A.scrollToPos.from),ei(S,A.scrollToPos.to),A.scrollToPos.margin);Jd(g,D)}var Z=A.maybeHiddenMarkers,Ae=A.maybeUnhiddenMarkers;if(Z)for(var Ce=0;Ce<Z.length;++Ce)Z[Ce].lines.length||ct(Z[Ce],"hide");if(Ae)for(var Te=0;Te<Ae.length;++Te)Ae[Te].lines.length&&ct(Ae[Te],"unhide");E.wrapper.offsetHeight&&(S.scrollTop=g.display.scroller.scrollTop),A.changeObjs&&ct(g,"changes",g,A.changeObjs),A.update&&A.update.finish()}function ko(A,g){if(A.curOp)return g();Vu(A);try{return g()}finally{Hu(A)}}function mi(A,g){return function(){if(A.curOp)return g.apply(A,arguments);Vu(A);try{return g.apply(A,arguments)}finally{Hu(A)}}}function ii(A){return function(){if(this.curOp)return A.apply(this,arguments);Vu(this);try{return A.apply(this,arguments)}finally{Hu(this)}}}function os(A){return function(){var g=this.cm;if(!g||g.curOp)return A.apply(this,arguments);Vu(g);try{return A.apply(this,arguments)}finally{Hu(g)}}}function mA(A,g){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(g,Kt(eh,A))}function eh(A){var g=A.doc;if(!(g.highlightFrontier>=A.display.viewTo)){var E=+new Date+A.options.workTime,S=Rr(A,g.highlightFrontier),D=[];g.iter(S.line,Math.min(g.first+g.size,A.display.viewTo+500),function(Z){if(S.line>=A.display.viewFrom){var Ae=Z.styles,Ce=Z.text.length>A.options.maxHighlightLength?Ao(g.mode,S.state):null,Te=rc(A,Z,S,!0);Ce&&(S.state=Ce),Z.styles=Te.styles;var je=Z.styleClasses,yt=Te.classes;yt?Z.styleClasses=yt:je&&(Z.styleClasses=null);for(var Mt=!Ae||Ae.length!=Z.styles.length||je!=yt&&(!je||!yt||je.bgClass!=yt.bgClass||je.textClass!=yt.textClass),en=0;!Mt&&en<Ae.length;++en)Mt=Ae[en]!=Z.styles[en];Mt&&D.push(S.line),Z.stateAfter=S.save(),S.nextLine()}else Z.text.length<=A.options.maxHighlightLength&&$i(A,Z.text,S),Z.stateAfter=S.line%5==0?S.save():null,S.nextLine();if(+new Date>E)return mA(A,A.options.workDelay),!0}),g.highlightFrontier=S.line,g.modeFrontier=Math.max(g.modeFrontier,S.line),D.length&&ko(A,function(){for(var Z=0;Z<D.length;Z++)sc(A,D[Z],"text")})}}var ka=function(A,g,E){var S=A.display;this.viewport=g,this.visible=Yu(S,A.doc,g),this.editorIsHidden=!S.wrapper.offsetWidth,this.wrapperHeight=S.wrapper.clientHeight,this.wrapperWidth=S.wrapper.clientWidth,this.oldDisplayWidth=cA(A),this.force=E,this.dims=lo(A),this.events=[]};ka.prototype.signal=function(A,g){Gt(A,g)&&this.events.push(arguments)},ka.prototype.finish=function(){for(var A=0;A<this.events.length;A++)ct.apply(null,this.events[A])};function zs(A){var g=A.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=Wu(A)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=Wu(A)+"px",g.scrollbarsClipped=!0)}function Es(A){if(A.hasFocus())return null;var g=We(Yt(A));if(!g||!Je(A.display.lineDiv,g))return null;var E={activeElt:g};if(window.getSelection){var S=Lt(A).getSelection();S.anchorNode&&S.extend&&Je(A.display.lineDiv,S.anchorNode)&&(E.anchorNode=S.anchorNode,E.anchorOffset=S.anchorOffset,E.focusNode=S.focusNode,E.focusOffset=S.focusOffset)}return E}function Kc(A){if(!(!A||!A.activeElt||A.activeElt==We(gt(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&Je(document.body,A.anchorNode)&&Je(document.body,A.focusNode))){var g=A.activeElt.ownerDocument,E=g.defaultView.getSelection(),S=g.createRange();S.setEnd(A.anchorNode,A.anchorOffset),S.collapse(!1),E.removeAllRanges(),E.addRange(S),E.extend(A.focusNode,A.focusOffset)}}function ia(A,g){var E=A.display,S=A.doc;if(g.editorIsHidden)return hA(A),!1;if(!g.force&&g.visible.from>=E.viewFrom&&g.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&Md(A)==0)return!1;dc(A)&&(hA(A),g.dims=lo(A));var D=S.first+S.size,Z=Math.max(g.visible.from-A.options.viewportMargin,S.first),Ae=Math.min(D,g.visible.to+A.options.viewportMargin);E.viewFrom<Z&&Z-E.viewFrom<20&&(Z=Math.max(S.first,E.viewFrom)),E.viewTo>Ae&&E.viewTo-Ae<20&&(Ae=Math.min(D,E.viewTo)),Zo&&(Z=Xi(A.doc,Z),Ae=Ei(A.doc,Ae));var Ce=Z!=E.viewFrom||Ae!=E.viewTo||E.lastWrapHeight!=g.wrapperHeight||E.lastWrapWidth!=g.wrapperWidth;Xc(A,Z,Ae),E.viewOffset=Ri(Tr(A.doc,E.viewFrom)),A.display.mover.style.top=E.viewOffset+"px";var Te=Md(A);if(!Ce&&Te==0&&!g.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var je=Es(A);return Te>4&&(E.lineDiv.style.display="none"),Id(A,E.updateLineNumbers,g.dims),Te>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,Kc(je),Se(E.cursorDiv),Se(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,Ce&&(E.lastWrapHeight=g.wrapperHeight,E.lastWrapWidth=g.wrapperWidth,mA(A,400)),E.updateLineNumbers=null,!0}function Aa(A,g){for(var E=g.viewport,S=!0;;S=!1){if(!S||!A.options.lineWrapping||g.oldDisplayWidth==cA(A)){if(E&&E.top!=null&&(E={top:Math.min(A.doc.height+Bh(A.display)-Ul(A),E.top)}),g.visible=Yu(A.display,A.doc,E),g.visible.from>=A.display.viewFrom&&g.visible.to<=A.display.viewTo)break}else S&&(g.visible=Yu(A.display,A.doc,E));if(!ia(A,g))break;kc(A);var D=pA(A);Ga(A),$u(A,D),kd(A,D),g.force=!1}g.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(g.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function hr(A,g){var E=new ka(A,g);if(ia(A,E)){kc(A),Aa(A,E);var S=pA(A);Ga(A),$u(A,S),kd(A,S),E.finish()}}function Id(A,g,E){var S=A.display,D=A.options.lineNumbers,Z=S.lineDiv,Ae=Z.firstChild;function Ce(wn){var Ln=wn.nextSibling;return x&&$&&A.display.currentWheelTarget==wn?wn.style.display="none":wn.parentNode.removeChild(wn),Ln}for(var Te=S.view,je=S.viewFrom,yt=0;yt<Te.length;yt++){var Mt=Te[yt];if(!Mt.hidden)if(!Mt.node||Mt.node.parentNode!=Z){var en=Mh(A,Mt,je,E);Z.insertBefore(en,Ae)}else{for(;Ae!=Mt.node;)Ae=Ce(Ae);var Qt=D&&g!=null&&g<=je&&Mt.lineNumber;Mt.changes&&(it(Mt.changes,"gutter")>-1&&(Qt=!1),xh(A,Mt,je,E)),Qt&&(Se(Mt.lineNumber),Mt.lineNumber.appendChild(document.createTextNode(Yn(A.options,je)))),Ae=Mt.node.nextSibling}je+=Mt.size}for(;Ae;)Ae=Ce(Ae)}function ya(A){var g=A.gutters.offsetWidth;A.sizer.style.marginLeft=g+"px",na(A,"gutterChanged",A)}function kd(A,g){A.display.sizer.style.minHeight=g.docHeight+"px",A.display.heightForcer.style.top=g.docHeight+"px",A.display.gutters.style.height=g.docHeight+A.display.barHeight+Wu(A)+"px"}function Td(A){var g=A.display,E=g.view;if(!(!g.alignWidgets&&(!g.gutters.firstChild||!A.options.fixedGutter))){for(var S=Io(g)-g.scroller.scrollLeft+A.doc.scrollLeft,D=g.gutters.offsetWidth,Z=S+"px",Ae=0;Ae<E.length;Ae++)if(!E[Ae].hidden){A.options.fixedGutter&&(E[Ae].gutter&&(E[Ae].gutter.style.left=Z),E[Ae].gutterBackground&&(E[Ae].gutterBackground.style.left=Z));var Ce=E[Ae].alignable;if(Ce)for(var Te=0;Te<Ce.length;Te++)Ce[Te].style.left=Z}A.options.fixedGutter&&(g.gutters.style.left=S+D+"px")}}function dc(A){if(!A.options.lineNumbers)return!1;var g=A.doc,E=Yn(A.options,g.first+g.size-1),S=A.display;if(E.length!=S.lineNumChars){var D=S.measure.appendChild(be("div",[be("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=D.firstChild.offsetWidth,Ae=D.offsetWidth-Z;return S.lineGutter.style.width="",S.lineNumInnerWidth=Math.max(Z,S.lineGutter.offsetWidth-Ae)+1,S.lineNumWidth=S.lineNumInnerWidth+Ae,S.lineNumChars=S.lineNumInnerWidth?E.length:-1,S.lineGutter.style.width=S.lineNumWidth+"px",ya(A.display),!0}return!1}function ru(A,g){for(var E=[],S=!1,D=0;D<A.length;D++){var Z=A[D],Ae=null;if(typeof Z!="string"&&(Ae=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(g)S=!0;else continue;E.push({className:Z,style:Ae})}return g&&!S&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function Ji(A){var g=A.gutters,E=A.gutterSpecs;Se(g),A.lineGutter=null;for(var S=0;S<E.length;++S){var D=E[S],Z=D.className,Ae=D.style,Ce=g.appendChild(be("div",null,"CodeMirror-gutter "+Z));Ae&&(Ce.style.cssText=Ae),Z=="CodeMirror-linenumbers"&&(A.lineGutter=Ce,Ce.style.width=(A.lineNumWidth||1)+"px")}g.style.display=E.length?"":"none",ya(A)}function fl(A){Ji(A.display),jl(A),Td(A)}function Fh(A,g,E,S){var D=this;this.input=E,D.scrollbarFiller=be("div",null,"CodeMirror-scrollbar-filler"),D.scrollbarFiller.setAttribute("cm-not-content","true"),D.gutterFiller=be("div",null,"CodeMirror-gutter-filler"),D.gutterFiller.setAttribute("cm-not-content","true"),D.lineDiv=at("div",null,"CodeMirror-code"),D.selectionDiv=be("div",null,null,"position: relative; z-index: 1"),D.cursorDiv=be("div",null,"CodeMirror-cursors"),D.measure=be("div",null,"CodeMirror-measure"),D.lineMeasure=be("div",null,"CodeMirror-measure"),D.lineSpace=at("div",[D.measure,D.lineMeasure,D.selectionDiv,D.cursorDiv,D.lineDiv],null,"position: relative; outline: none");var Z=at("div",[D.lineSpace],"CodeMirror-lines");D.mover=be("div",[Z],null,"position: relative"),D.sizer=be("div",[D.mover],"CodeMirror-sizer"),D.sizerWidth=null,D.heightForcer=be("div",null,null,"position: absolute; height: "+_t+"px; width: 1px;"),D.gutters=be("div",null,"CodeMirror-gutters"),D.lineGutter=null,D.scroller=be("div",[D.sizer,D.heightForcer,D.gutters],"CodeMirror-scroll"),D.scroller.setAttribute("tabIndex","-1"),D.wrapper=be("div",[D.scrollbarFiller,D.gutterFiller,D.scroller],"CodeMirror"),O&&T>=105&&(D.wrapper.style.clipPath="inset(0px)"),D.wrapper.setAttribute("translate","no"),f&&y<8&&(D.gutters.style.zIndex=-1,D.scroller.style.paddingRight=0),!x&&!(i&&ne)&&(D.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(D.wrapper):A(D.wrapper)),D.viewFrom=D.viewTo=g.first,D.reportedViewFrom=D.reportedViewTo=g.first,D.view=[],D.renderedView=null,D.externalMeasured=null,D.viewOffset=0,D.lastWrapHeight=D.lastWrapWidth=0,D.updateLineNumbers=null,D.nativeBarWidth=D.barHeight=D.barWidth=0,D.scrollbarsClipped=!1,D.lineNumWidth=D.lineNumInnerWidth=D.lineNumChars=null,D.alignWidgets=!1,D.cachedCharWidth=D.cachedTextHeight=D.cachedPaddingH=null,D.maxLine=null,D.maxLineLength=0,D.maxLineChanged=!1,D.wheelDX=D.wheelDY=D.wheelStartX=D.wheelStartY=null,D.shift=!1,D.selForContextMenu=null,D.activeTouch=null,D.gutterSpecs=ru(S.gutters,S.lineNumbers),Ji(D),E.init(D)}var Dc=0,UA=null;f?UA=-.53:i?UA=15:O?UA=-.7:j&&(UA=-1/3);function Rc(A){var g=A.wheelDeltaX,E=A.wheelDeltaY;return g==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(g=A.detail),E==null&&A.detail&&A.axis==A.VERTICAL_AXIS?E=A.detail:E==null&&(E=A.wheelDelta),{x:g,y:E}}function zA(A){var g=Rc(A);return g.x*=UA,g.y*=UA,g}function hc(A,g){O&&T==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var E=Rc(g),S=E.x,D=E.y,Z=UA;g.deltaMode===0&&(S=g.deltaX,D=g.deltaY,Z=1);var Ae=A.display,Ce=Ae.scroller,Te=Ce.scrollWidth>Ce.clientWidth,je=Ce.scrollHeight>Ce.clientHeight;if(S&&Te||D&&je){if(D&&$&&x){e:for(var yt=g.target,Mt=Ae.view;yt!=Ce;yt=yt.parentNode)for(var en=0;en<Mt.length;en++)if(Mt[en].node==yt){A.display.currentWheelTarget=yt;break e}}if(S&&!i&&!F&&Z!=null){D&&je&&Tc(A,Math.max(0,Ce.scrollTop+D*Z)),dl(A,Math.max(0,Ce.scrollLeft+S*Z)),(!D||D&&je)&&xt(g),Ae.wheelStartX=null;return}if(D&&Z!=null){var Qt=D*Z,wn=A.doc.scrollTop,Ln=wn+Ae.wrapper.clientHeight;Qt<0?wn=Math.max(0,wn+Qt-50):Ln=Math.min(A.doc.height,Ln+Qt+50),hr(A,{top:wn,bottom:Ln})}Dc<20&&g.deltaMode!==0&&(Ae.wheelStartX==null?(Ae.wheelStartX=Ce.scrollLeft,Ae.wheelStartY=Ce.scrollTop,Ae.wheelDX=S,Ae.wheelDY=D,setTimeout(function(){if(Ae.wheelStartX!=null){var sr=Ce.scrollLeft-Ae.wheelStartX,Vn=Ce.scrollTop-Ae.wheelStartY,wr=Vn&&Ae.wheelDY&&Vn/Ae.wheelDY||sr&&Ae.wheelDX&&sr/Ae.wheelDX;Ae.wheelStartX=Ae.wheelStartY=null,wr&&(UA=(UA*Dc+wr)/(Dc+1),++Dc)}},200)):(Ae.wheelDX+=S,Ae.wheelDY+=D))}}var bs=function(A,g){this.ranges=A,this.primIndex=g};bs.prototype.primary=function(){return this.ranges[this.primIndex]},bs.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var g=0;g<this.ranges.length;g++){var E=this.ranges[g],S=A.ranges[g];if(!Ki(E.anchor,S.anchor)||!Ki(E.head,S.head))return!1}return!0},bs.prototype.deepCopy=function(){for(var A=[],g=0;g<this.ranges.length;g++)A[g]=new Fo(yo(this.ranges[g].anchor),yo(this.ranges[g].head));return new bs(A,this.primIndex)},bs.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},bs.prototype.contains=function(A,g){g||(g=A);for(var E=0;E<this.ranges.length;E++){var S=this.ranges[E];if(or(g,S.from())>=0&&or(A,S.to())<=0)return E}return-1};var Fo=function(A,g){this.anchor=A,this.head=g};Fo.prototype.from=function(){return Fs(this.anchor,this.head)},Fo.prototype.to=function(){return _s(this.anchor,this.head)},Fo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function iu(A,g,E){var S=A&&A.options.selectionsMayTouch,D=g[E];g.sort(function(en,Qt){return or(en.from(),Qt.from())}),E=it(g,D);for(var Z=1;Z<g.length;Z++){var Ae=g[Z],Ce=g[Z-1],Te=or(Ce.to(),Ae.from());if(S&&!Ae.empty()?Te>0:Te>=0){var je=Fs(Ce.from(),Ae.from()),yt=_s(Ce.to(),Ae.to()),Mt=Ce.empty()?Ae.from()==Ae.head:Ce.from()==Ce.head;Z<=E&&--E,g.splice(--Z,2,new Fo(Mt?yt:je,Mt?je:yt))}}return new bs(g,E)}function Qa(A,g){return new bs([new Fo(A,g||A)],0)}function qa(A){return A.text?hn(A.from.line+A.text.length-1,rr(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function Nl(A,g){if(or(A,g.from)<0)return A;if(or(A,g.to)<=0)return qa(g);var E=A.line+g.text.length-(g.to.line-g.from.line)-1,S=A.ch;return A.line==g.to.line&&(S+=qa(g).ch-g.to.ch),hn(E,S)}function Lo(A,g){for(var E=[],S=0;S<A.sel.ranges.length;S++){var D=A.sel.ranges[S];E.push(new Fo(Nl(D.anchor,g),Nl(D.head,g)))}return iu(A.cm,E,A.sel.primIndex)}function Mu(A,g,E){return A.line==g.line?hn(E.line,A.ch-g.ch+E.ch):hn(E.line+(A.line-g.line),A.ch)}function fc(A,g,E){for(var S=[],D=hn(A.first,0),Z=D,Ae=0;Ae<g.length;Ae++){var Ce=g[Ae],Te=Mu(Ce.from,D,Z),je=Mu(qa(Ce),D,Z);if(D=Ce.to,Z=je,E=="around"){var yt=A.sel.ranges[Ae],Mt=or(yt.head,yt.anchor)<0;S[Ae]=new Fo(Mt?je:Te,Mt?Te:je)}else S[Ae]=new Fo(Te,Te)}return new bs(S,A.sel.primIndex)}function th(A){A.doc.mode=rs(A.options,A.doc.modeOption),jA(A)}function jA(A){A.doc.iter(function(g){g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,mA(A,100),A.state.modeGen++,A.curOp&&jl(A)}function pc(A,g){return g.from.ch==0&&g.to.ch==0&&rr(g.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function Ta(A,g,E,S){function D(wr){return E?E[wr]:null}function Z(wr,yr,Or){vu(wr,yr,Or,S),na(wr,"change",wr,g)}function Ae(wr,yr){for(var Or=[],ni=wr;ni<yr;++ni)Or.push(new Wa(je[ni],D(ni),S));return Or}var Ce=g.from,Te=g.to,je=g.text,yt=Tr(A,Ce.line),Mt=Tr(A,Te.line),en=rr(je),Qt=D(je.length-1),wn=Te.line-Ce.line;if(g.full)A.insert(0,Ae(0,je.length)),A.remove(je.length,A.size-je.length);else if(pc(A,g)){var Ln=Ae(0,je.length-1);Z(Mt,Mt.text,Qt),wn&&A.remove(Ce.line,wn),Ln.length&&A.insert(Ce.line,Ln)}else if(yt==Mt)if(je.length==1)Z(yt,yt.text.slice(0,Ce.ch)+en+yt.text.slice(Te.ch),Qt);else{var sr=Ae(1,je.length-1);sr.push(new Wa(en+yt.text.slice(Te.ch),Qt,S)),Z(yt,yt.text.slice(0,Ce.ch)+je[0],D(0)),A.insert(Ce.line+1,sr)}else if(je.length==1)Z(yt,yt.text.slice(0,Ce.ch)+je[0]+Mt.text.slice(Te.ch),D(0)),A.remove(Ce.line+1,wn);else{Z(yt,yt.text.slice(0,Ce.ch)+je[0],D(0)),Z(Mt,en+Mt.text.slice(Te.ch),Qt);var Vn=Ae(1,je.length-1);wn>1&&A.remove(Ce.line+1,wn-1),A.insert(Ce.line+1,Vn)}na(A,"change",A,g)}function xs(A,g,E){function S(D,Z,Ae){if(D.linked)for(var Ce=0;Ce<D.linked.length;++Ce){var Te=D.linked[Ce];if(Te.doc!=Z){var je=Ae&&Te.sharedHist;E&&!je||(g(Te.doc,je),S(Te.doc,D,je))}}}S(A,null,!0)}function fs(A,g){if(g.cm)throw new Error("This document is already in use.");A.doc=g,g.cm=A,wd(A),th(A),Pr(A),A.options.direction=g.direction,A.options.lineWrapping||ma(A),A.options.mode=g.modeOption,jl(A)}function Pr(A){(A.doc.direction=="rtl"?Me:me)(A.display.lineDiv,"CodeMirror-rtl")}function Hr(A){ko(A,function(){Pr(A),jl(A)})}function NA(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function Su(A,g){var E={from:yo(g.from),to:qa(g),text:tl(A,g.from,g.to)};return ys(A,E,g.from.line,g.to.line+1),xs(A,function(S){return ys(S,E,g.from.line,g.to.line+1)},!0),E}function pl(A){for(;A.length;){var g=rr(A);if(g.ranges)A.pop();else break}}function ou(A,g){if(g)return pl(A.done),rr(A.done);if(A.done.length&&!rr(A.done).ranges)return rr(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),rr(A.done)}function Pd(A,g,E,S){var D=A.history;D.undone.length=0;var Z=+new Date,Ae,Ce;if((D.lastOp==S||D.lastOrigin==g.origin&&g.origin&&(g.origin.charAt(0)=="+"&&D.lastModTime>Z-(A.cm?A.cm.options.historyEventDelay:500)||g.origin.charAt(0)=="*"))&&(Ae=ou(D,D.lastOp==S)))Ce=rr(Ae.changes),or(g.from,g.to)==0&&or(g.from,Ce.to)==0?Ce.to=qa(g):Ae.changes.push(Su(A,g));else{var Te=rr(D.done);for((!Te||!Te.ranges)&&Ml(A.sel,D.done),Ae={changes:[Su(A,g)],generation:D.generation},D.done.push(Ae);D.done.length>D.undoDepth;)D.done.shift(),D.done[0].ranges||D.done.shift()}D.done.push(E),D.generation=++D.maxGeneration,D.lastModTime=D.lastSelTime=Z,D.lastOp=D.lastSelOp=S,D.lastOrigin=D.lastSelOrigin=g.origin,Ce||ct(A,"historyAdded")}function gA(A,g,E,S){var D=g.charAt(0);return D=="*"||D=="+"&&E.ranges.length==S.ranges.length&&E.somethingSelected()==S.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function mc(A,g,E,S){var D=A.history,Z=S&&S.origin;E==D.lastSelOp||Z&&D.lastSelOrigin==Z&&(D.lastModTime==D.lastSelTime&&D.lastOrigin==Z||gA(A,Z,rr(D.done),g))?D.done[D.done.length-1]=g:Ml(g,D.done),D.lastSelTime=+new Date,D.lastSelOrigin=Z,D.lastSelOp=E,S&&S.clearRedo!==!1&&pl(D.undone)}function Ml(A,g){var E=rr(g);E&&E.ranges&&E.equals(A)||g.push(A)}function ys(A,g,E,S){var D=g["spans_"+A.id],Z=0;A.iter(Math.max(A.first,E),Math.min(A.first+A.size,S),function(Ae){Ae.markedSpans&&((D||(D=g["spans_"+A.id]={}))[Z]=Ae.markedSpans),++Z})}function Ys(A){if(!A)return null;for(var g,E=0;E<A.length;++E)A[E].marker.explicitlyCleared?g||(g=A.slice(0,E)):g&&g.push(A[E]);return g?g.length?g:null:A}function id(A,g){var E=g["spans_"+A.id];if(!E)return null;for(var S=[],D=0;D<g.text.length;++D)S.push(Ys(E[D]));return S}function Kd(A,g){var E=id(A,g),S=Yr(A,g);if(!E)return S;if(!S)return E;for(var D=0;D<E.length;++D){var Z=E[D],Ae=S[D];if(Z&&Ae)e:for(var Ce=0;Ce<Ae.length;++Ce){for(var Te=Ae[Ce],je=0;je<Z.length;++je)if(Z[je].marker==Te.marker)continue e;Z.push(Te)}else Ae&&(E[D]=Ae)}return E}function yA(A,g,E){for(var S=[],D=0;D<A.length;++D){var Z=A[D];if(Z.ranges){S.push(E?bs.prototype.deepCopy.call(Z):Z);continue}var Ae=Z.changes,Ce=[];S.push({changes:Ce});for(var Te=0;Te<Ae.length;++Te){var je=Ae[Te],yt=void 0;if(Ce.push({from:je.from,to:je.to,text:je.text}),g)for(var Mt in je)(yt=Mt.match(/^spans_(\d+)$/))&&it(g,Number(yt[1]))>-1&&(rr(Ce)[Mt]=je[Mt],delete je[Mt])}}return S}function js(A,g,E,S){if(S){var D=A.anchor;if(E){var Z=or(g,D)<0;Z!=or(E,D)<0?(D=g,g=E):Z!=or(g,E)<0&&(g=E)}return new Fo(D,g)}else return new Fo(E||g,g)}function Fc(A,g,E,S,D){D==null&&(D=A.cm&&(A.cm.display.shift||A.extend)),va(A,new bs([js(A.sel.primary(),g,E,D)],0),S)}function Eu(A,g,E){for(var S=[],D=A.cm&&(A.cm.display.shift||A.extend),Z=0;Z<A.sel.ranges.length;Z++)S[Z]=js(A.sel.ranges[Z],g[Z],null,D);var Ae=iu(A.cm,S,A.sel.primIndex);va(A,Ae,E)}function Ya(A,g,E,S){var D=A.sel.ranges.slice(0);D[g]=E,va(A,iu(A.cm,D,A.sel.primIndex),S)}function Zu(A,g,E,S){va(A,Qa(g,E),S)}function Lc(A,g,E){var S={ranges:g.ranges,update:function(D){this.ranges=[];for(var Z=0;Z<D.length;Z++)this.ranges[Z]=new Fo(ei(A,D[Z].anchor),ei(A,D[Z].head))},origin:E&&E.origin};return ct(A,"beforeSelectionChange",A,S),A.cm&&ct(A.cm,"beforeSelectionChange",A.cm,S),S.ranges!=g.ranges?iu(A.cm,S.ranges,S.ranges.length-1):g}function Bu(A,g,E){var S=A.history.done,D=rr(S);D&&D.ranges?(S[S.length-1]=g,$s(A,g,E)):va(A,g,E)}function va(A,g,E){$s(A,g,E),mc(A,A.sel,A.cm?A.cm.curOp.id:NaN,E)}function $s(A,g,E){(Gt(A,"beforeSelectionChange")||A.cm&&Gt(A.cm,"beforeSelectionChange"))&&(g=Lc(A,g,E));var S=E&&E.bias||(or(g.primary().head,A.sel.primary().head)<0?-1:1);su(A,WA(A,g,S,!0)),!(E&&E.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&Oi(A.cm)}function su(A,g){g.equals(A.sel)||(A.sel=g,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,qt(A.cm)),na(A,"cursorActivity",A))}function au(A){su(A,WA(A,A.sel,null,!1))}function WA(A,g,E,S){for(var D,Z=0;Z<g.ranges.length;Z++){var Ae=g.ranges[Z],Ce=g.ranges.length==A.sel.ranges.length&&A.sel.ranges[Z],Te=Uc(A,Ae.anchor,Ce&&Ce.anchor,E,S),je=Ae.head==Ae.anchor?Te:Uc(A,Ae.head,Ce&&Ce.head,E,S);(D||Te!=Ae.anchor||je!=Ae.head)&&(D||(D=g.ranges.slice(0,Z)),D[Z]=new Fo(Te,je))}return D?iu(A.cm,D,g.primIndex):g}function lu(A,g,E,S,D){var Z=Tr(A,g.line);if(Z.markedSpans)for(var Ae=0;Ae<Z.markedSpans.length;++Ae){var Ce=Z.markedSpans[Ae],Te=Ce.marker,je="selectLeft"in Te?!Te.selectLeft:Te.inclusiveLeft,yt="selectRight"in Te?!Te.selectRight:Te.inclusiveRight;if((Ce.from==null||(je?Ce.from<=g.ch:Ce.from<g.ch))&&(Ce.to==null||(yt?Ce.to>=g.ch:Ce.to>g.ch))){if(D&&(ct(Te,"beforeCursorEnter"),Te.explicitlyCleared))if(Z.markedSpans){--Ae;continue}else break;if(!Te.atomic)continue;if(E){var Mt=Te.find(S<0?1:-1),en=void 0;if((S<0?yt:je)&&(Mt=vA(A,Mt,-S,Mt&&Mt.line==g.line?Z:null)),Mt&&Mt.line==g.line&&(en=or(Mt,E))&&(S<0?en<0:en>0))return lu(A,Mt,g,S,D)}var Qt=Te.find(S<0?-1:1);return(S<0?je:yt)&&(Qt=vA(A,Qt,S,Qt.line==g.line?Z:null)),Qt?lu(A,Qt,g,S,D):null}}return g}function Uc(A,g,E,S,D){var Z=S||1,Ae=lu(A,g,E,Z,D)||!D&&lu(A,g,E,Z,!0)||lu(A,g,E,-Z,D)||!D&&lu(A,g,E,-Z,!0);return Ae||(A.cantEdit=!0,hn(A.first,0))}function vA(A,g,E,S){return E<0&&g.ch==0?g.line>A.first?ei(A,hn(g.line-1)):null:E>0&&g.ch==(S||Tr(A,g.line)).text.length?g.line<A.first+A.size-1?hn(g.line+1,0):null:new hn(g.line,g.ch+E)}function Sl(A){A.setSelection(hn(A.firstLine(),0),hn(A.lastLine()),Ut)}function Dd(A,g,E){var S={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return S.canceled=!0}};return E&&(S.update=function(D,Z,Ae,Ce){D&&(S.from=ei(A,D)),Z&&(S.to=ei(A,Z)),Ae&&(S.text=Ae),Ce!==void 0&&(S.origin=Ce)}),ct(A,"beforeChange",A,S),A.cm&&ct(A.cm,"beforeChange",A.cm,S),S.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:S.from,to:S.to,text:S.text,origin:S.origin}}function I(A,g,E){if(A.cm){if(!A.cm.curOp)return mi(A.cm,I)(A,g,E);if(A.cm.state.suppressEdits)return}if(!((Gt(A,"beforeChange")||A.cm&&Gt(A.cm,"beforeChange"))&&(g=Dd(A,g,!0),!g))){var S=Oo&&!E&&Vi(A,g.from,g.to);if(S)for(var D=S.length-1;D>=0;--D)l(A,{from:S[D].from,to:S[D].to,text:D?[""]:g.text,origin:g.origin});else l(A,g)}}function l(A,g){if(!(g.text.length==1&&g.text[0]==""&&or(g.from,g.to)==0)){var E=Lo(A,g);Pd(A,g,E,A.cm?A.cm.curOp.id:NaN),w(A,g,E,Yr(A,g));var S=[];xs(A,function(D,Z){!Z&&it(S,D.history)==-1&&(ae(D.history,g),S.push(D.history)),w(D,g,null,Yr(D,g))})}}function c(A,g,E){var S=A.cm&&A.cm.state.suppressEdits;if(!(S&&!E)){for(var D=A.history,Z,Ae=A.sel,Ce=g=="undo"?D.done:D.undone,Te=g=="undo"?D.undone:D.done,je=0;je<Ce.length&&(Z=Ce[je],!(E?Z.ranges&&!Z.equals(A.sel):!Z.ranges));je++);if(je!=Ce.length){for(D.lastOrigin=D.lastSelOrigin=null;;)if(Z=Ce.pop(),Z.ranges){if(Ml(Z,Te),E&&!Z.equals(A.sel)){va(A,Z,{clearRedo:!1});return}Ae=Z}else if(S){Ce.push(Z);return}else break;var yt=[];Ml(Ae,Te),Te.push({changes:yt,generation:D.generation}),D.generation=Z.generation||++D.maxGeneration;for(var Mt=Gt(A,"beforeChange")||A.cm&&Gt(A.cm,"beforeChange"),en=function(Ln){var sr=Z.changes[Ln];if(sr.origin=g,Mt&&!Dd(A,sr,!1))return Ce.length=0,{};yt.push(Su(A,sr));var Vn=Ln?Lo(A,sr):rr(Ce);w(A,sr,Vn,Kd(A,sr)),!Ln&&A.cm&&A.cm.scrollIntoView({from:sr.from,to:qa(sr)});var wr=[];xs(A,function(yr,Or){!Or&&it(wr,yr.history)==-1&&(ae(yr.history,sr),wr.push(yr.history)),w(yr,sr,null,Kd(yr,sr))})},Qt=Z.changes.length-1;Qt>=0;--Qt){var wn=en(Qt);if(wn)return wn.v}}}}function _(A,g){if(g!=0&&(A.first+=g,A.sel=new bs(Dn(A.sel.ranges,function(D){return new Fo(hn(D.anchor.line+g,D.anchor.ch),hn(D.head.line+g,D.head.ch))}),A.sel.primIndex),A.cm)){jl(A.cm,A.first,A.first-g,g);for(var E=A.cm.display,S=E.viewFrom;S<E.viewTo;S++)sc(A.cm,S,"gutter")}}function w(A,g,E,S){if(A.cm&&!A.cm.curOp)return mi(A.cm,w)(A,g,E,S);if(g.to.line<A.first){_(A,g.text.length-1-(g.to.line-g.from.line));return}if(!(g.from.line>A.lastLine())){if(g.from.line<A.first){var D=g.text.length-1-(A.first-g.from.line);_(A,D),g={from:hn(A.first,0),to:hn(g.to.line+D,g.to.ch),text:[rr(g.text)],origin:g.origin}}var Z=A.lastLine();g.to.line>Z&&(g={from:g.from,to:hn(Z,Tr(A,Z).text.length),text:[g.text[0]],origin:g.origin}),g.removed=tl(A,g.from,g.to),E||(E=Lo(A,g)),A.cm?P(A.cm,g,S):Ta(A,g,S),$s(A,E,Ut),A.cantEdit&&Uc(A,hn(A.firstLine(),0))&&(A.cantEdit=!1)}}function P(A,g,E){var S=A.doc,D=A.display,Z=g.from,Ae=g.to,Ce=!1,Te=Z.line;A.options.lineWrapping||(Te=qe(Br(Tr(S,Z.line))),S.iter(Te,Ae.line+1,function(Qt){if(Qt==D.maxLine)return Ce=!0,!0})),S.sel.contains(g.from,g.to)>-1&&qt(A),Ta(S,g,E,xd(A)),A.options.lineWrapping||(S.iter(Te,Z.line+g.text.length,function(Qt){var wn=ds(Qt);wn>D.maxLineLength&&(D.maxLine=Qt,D.maxLineLength=wn,D.maxLineChanged=!0,Ce=!1)}),Ce&&(A.curOp.updateMaxLine=!0)),co(S,Z.line),mA(A,400);var je=g.text.length-(Ae.line-Z.line)-1;g.full?jl(A):Z.line==Ae.line&&g.text.length==1&&!pc(A.doc,g)?sc(A,Z.line,"text"):jl(A,Z.line,Ae.line+1,je);var yt=Gt(A,"changes"),Mt=Gt(A,"change");if(Mt||yt){var en={from:Z,to:Ae,text:g.text,removed:g.removed,origin:g.origin};Mt&&na(A,"change",A,en),yt&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(en)}A.display.selForContextMenu=null}function z(A,g,E,S,D){var Z;S||(S=E),or(S,E)<0&&(Z=[S,E],E=Z[0],S=Z[1]),typeof g=="string"&&(g=A.splitLines(g)),I(A,{from:E,to:S,text:g,origin:D})}function Y(A,g,E,S){E<A.line?A.line+=S:g<A.line&&(A.line=g,A.ch=0)}function ee(A,g,E,S){for(var D=0;D<A.length;++D){var Z=A[D],Ae=!0;if(Z.ranges){Z.copied||(Z=A[D]=Z.deepCopy(),Z.copied=!0);for(var Ce=0;Ce<Z.ranges.length;Ce++)Y(Z.ranges[Ce].anchor,g,E,S),Y(Z.ranges[Ce].head,g,E,S);continue}for(var Te=0;Te<Z.changes.length;++Te){var je=Z.changes[Te];if(E<je.from.line)je.from=hn(je.from.line+S,je.from.ch),je.to=hn(je.to.line+S,je.to.ch);else if(g<=je.to.line){Ae=!1;break}}Ae||(A.splice(0,D+1),D=0)}}function ae(A,g){var E=g.from.line,S=g.to.line,D=g.text.length-(S-E)-1;ee(A.done,E,S,D),ee(A.undone,E,S,D)}function xe(A,g,E,S){var D=g,Z=g;return typeof g=="number"?Z=Tr(A,OA(A,g)):D=qe(g),D==null?null:(S(Z,D)&&A.cm&&sc(A.cm,D,E),Z)}function ke(A){this.lines=A,this.parent=null;for(var g=0,E=0;E<A.length;++E)A[E].parent=this,g+=A[E].height;this.height=g}ke.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,g){for(var E=A,S=A+g;E<S;++E){var D=this.lines[E];this.height-=D.height,qs(D),na(D,"delete")}this.lines.splice(A,g)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,g,E){this.height+=E,this.lines=this.lines.slice(0,A).concat(g).concat(this.lines.slice(A));for(var S=0;S<g.length;++S)g[S].parent=this},iterN:function(A,g,E){for(var S=A+g;A<S;++A)if(E(this.lines[A]))return!0}};function Ke(A){this.children=A;for(var g=0,E=0,S=0;S<A.length;++S){var D=A[S];g+=D.chunkSize(),E+=D.height,D.parent=this}this.size=g,this.height=E,this.parent=null}Ke.prototype={chunkSize:function(){return this.size},removeInner:function(A,g){this.size-=g;for(var E=0;E<this.children.length;++E){var S=this.children[E],D=S.chunkSize();if(A<D){var Z=Math.min(g,D-A),Ae=S.height;if(S.removeInner(A,Z),this.height-=Ae-S.height,D==Z&&(this.children.splice(E--,1),S.parent=null),(g-=Z)==0)break;A=0}else A-=D}if(this.size-g<25&&(this.children.length>1||!(this.children[0]instanceof ke))){var Ce=[];this.collapse(Ce),this.children=[new ke(Ce)],this.children[0].parent=this}},collapse:function(A){for(var g=0;g<this.children.length;++g)this.children[g].collapse(A)},insertInner:function(A,g,E){this.size+=g.length,this.height+=E;for(var S=0;S<this.children.length;++S){var D=this.children[S],Z=D.chunkSize();if(A<=Z){if(D.insertInner(A,g,E),D.lines&&D.lines.length>50){for(var Ae=D.lines.length%25+25,Ce=Ae;Ce<D.lines.length;){var Te=new ke(D.lines.slice(Ce,Ce+=25));D.height-=Te.height,this.children.splice(++S,0,Te),Te.parent=this}D.lines=D.lines.slice(0,Ae),this.maybeSpill()}break}A-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var g=A.children.splice(A.children.length-5,5),E=new Ke(g);if(A.parent){A.size-=E.size,A.height-=E.height;var D=it(A.parent.children,A);A.parent.children.splice(D+1,0,E)}else{var S=new Ke(A.children);S.parent=A,A.children=[S,E],A=S}E.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,g,E){for(var S=0;S<this.children.length;++S){var D=this.children[S],Z=D.chunkSize();if(A<Z){var Ae=Math.min(g,Z-A);if(D.iterN(A,Ae,E))return!0;if((g-=Ae)==0)break;A=0}else A-=Z}}};var $e=function(A,g,E){if(E)for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);this.doc=A,this.node=g};$e.prototype.clear=function(){var A=this.doc.cm,g=this.line.widgets,E=this.line,S=qe(E);if(!(S==null||!g)){for(var D=0;D<g.length;++D)g[D]==this&&g.splice(D--,1);g.length||(E.widgets=null);var Z=Nu(this);ea(E,Math.max(0,E.height-Z)),A&&(ko(A,function(){Xe(A,E,-Z),sc(A,S,"widget")}),na(A,"lineWidgetCleared",A,this,S))}},$e.prototype.changed=function(){var A=this,g=this.height,E=this.doc.cm,S=this.line;this.height=null;var D=Nu(this)-g;D&&(Wr(this.doc,S)||ea(S,S.height+D),E&&ko(E,function(){E.curOp.forceUpdate=!0,Xe(E,S,D),na(E,"lineWidgetChanged",E,A,qe(S))}))},jt($e);function Xe(A,g,E){Ri(g)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&KA(A,E)}function pt(A,g,E,S){var D=new $e(A,E,S),Z=A.cm;return Z&&D.noHScroll&&(Z.display.alignWidgets=!0),xe(A,g,"widget",function(Ae){var Ce=Ae.widgets||(Ae.widgets=[]);if(D.insertAt==null?Ce.push(D):Ce.splice(Math.min(Ce.length,Math.max(0,D.insertAt)),0,D),D.line=Ae,Z&&!Wr(A,Ae)){var Te=Ri(Ae)<A.scrollTop;ea(Ae,Ae.height+Nu(D)),Te&&KA(Z,D.height),Z.curOp.forceUpdate=!0}return!0}),Z&&na(Z,"lineWidgetAdded",Z,D,typeof g=="number"?g:qe(g)),D}var ut=0,mt=function(A,g){this.lines=[],this.type=g,this.doc=A,this.id=++ut};mt.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,g=A&&!A.curOp;if(g&&Vu(A),Gt(this,"clear")){var E=this.find();E&&na(this,"clear",E.from,E.to)}for(var S=null,D=null,Z=0;Z<this.lines.length;++Z){var Ae=this.lines[Z],Ce=ta(Ae.markedSpans,this);A&&!this.collapsed?sc(A,qe(Ae),"text"):A&&(Ce.to!=null&&(D=qe(Ae)),Ce.from!=null&&(S=qe(Ae))),Ae.markedSpans=IA(Ae.markedSpans,Ce),Ce.from==null&&this.collapsed&&!Wr(this.doc,Ae)&&A&&ea(Ae,zl(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var Te=0;Te<this.lines.length;++Te){var je=Br(this.lines[Te]),yt=ds(je);yt>A.display.maxLineLength&&(A.display.maxLine=je,A.display.maxLineLength=yt,A.display.maxLineChanged=!0)}S!=null&&A&&this.collapsed&&jl(A,S,D+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&au(A.doc)),A&&na(A,"markerCleared",A,this,S,D),g&&Hu(A),this.parent&&this.parent.clear()}},mt.prototype.find=function(A,g){A==null&&this.type=="bookmark"&&(A=1);for(var E,S,D=0;D<this.lines.length;++D){var Z=this.lines[D],Ae=ta(Z.markedSpans,this);if(Ae.from!=null&&(E=hn(g?Z:qe(Z),Ae.from),A==-1))return E;if(Ae.to!=null&&(S=hn(g?Z:qe(Z),Ae.to),A==1))return S}return E&&{from:E,to:S}},mt.prototype.changed=function(){var A=this,g=this.find(-1,!0),E=this,S=this.doc.cm;!g||!S||ko(S,function(){var D=g.line,Z=qe(g.line),Ae=_d(S,Z);if(Ae&&(kh(Ae),S.curOp.selectionChanged=S.curOp.forceUpdate=!0),S.curOp.updateMaxLine=!0,!Wr(E.doc,D)&&E.height!=null){var Ce=E.height;E.height=null;var Te=Nu(E)-Ce;Te&&ea(D,D.height+Te)}na(S,"markerChanged",S,A)})},mt.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(!g.maybeHiddenMarkers||it(g.maybeHiddenMarkers,this)==-1)&&(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},mt.prototype.detachLine=function(A){if(this.lines.splice(it(this.lines,A),1),!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(g.maybeHiddenMarkers||(g.maybeHiddenMarkers=[])).push(this)}},jt(mt);function vt(A,g,E,S,D){if(S&&S.shared)return kt(A,g,E,S,D);if(A.cm&&!A.cm.curOp)return mi(A.cm,vt)(A,g,E,S,D);var Z=new mt(A,D),Ae=or(g,E);if(S&&Ue(S,Z,!1),Ae>0||Ae==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=at("span",[Z.replacedWith],"CodeMirror-widget"),S.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),S.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(ci(A,g.line,g,E,Z)||g.line!=E.line&&ci(A,E.line,g,E,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ss()}Z.addToHistory&&Pd(A,{from:g,to:E,origin:"markText"},A.sel,NaN);var Ce=g.line,Te=A.cm,je;if(A.iter(Ce,E.line+1,function(Mt){Te&&Z.collapsed&&!Te.options.lineWrapping&&Br(Mt)==Te.display.maxLine&&(je=!0),Z.collapsed&&Ce!=g.line&&ea(Mt,0),ho(Mt,new Ia(Z,Ce==g.line?g.ch:null,Ce==E.line?E.ch:null),A.cm&&A.cm.curOp),++Ce}),Z.collapsed&&A.iter(g.line,E.line+1,function(Mt){Wr(A,Mt)&&ea(Mt,0)}),Z.clearOnEnter&&Ne(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(Oa(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),Z.collapsed&&(Z.id=++ut,Z.atomic=!0),Te){if(je&&(Te.curOp.updateMaxLine=!0),Z.collapsed)jl(Te,g.line,E.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var yt=g.line;yt<=E.line;yt++)sc(Te,yt,"text");Z.atomic&&au(Te.doc),na(Te,"markerAdded",Te,Z)}return Z}var Bt=function(A,g){this.markers=A,this.primary=g;for(var E=0;E<A.length;++E)A[E].parent=this};Bt.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();na(this,"clear")}},Bt.prototype.find=function(A,g){return this.primary.find(A,g)},jt(Bt);function kt(A,g,E,S,D){S=Ue(S),S.shared=!1;var Z=[vt(A,g,E,S,D)],Ae=Z[0],Ce=S.widgetNode;return xs(A,function(Te){Ce&&(S.widgetNode=Ce.cloneNode(!0)),Z.push(vt(Te,ei(Te,g),ei(Te,E),S,D));for(var je=0;je<Te.linked.length;++je)if(Te.linked[je].isParent)return;Ae=rr(Z)}),new Bt(Z,Ae)}function Rt(A){return A.findMarks(hn(A.first,0),A.clipPos(hn(A.lastLine())),function(g){return g.parent})}function zt(A,g){for(var E=0;E<g.length;E++){var S=g[E],D=S.find(),Z=A.clipPos(D.from),Ae=A.clipPos(D.to);if(or(Z,Ae)){var Ce=vt(A,Z,Ae,S.primary,S.primary.type);S.markers.push(Ce),Ce.parent=S}}}function Tt(A){for(var g=function(S){var D=A[S],Z=[D.primary.doc];xs(D.primary.doc,function(Te){return Z.push(Te)});for(var Ae=0;Ae<D.markers.length;Ae++){var Ce=D.markers[Ae];it(Z,Ce.doc)==-1&&(Ce.parent=null,D.markers.splice(Ae--,1))}},E=0;E<A.length;E++)g(E)}var nn=0,Zt=function(A,g,E,S,D){if(!(this instanceof Zt))return new Zt(A,g,E,S,D);E==null&&(E=0),Ke.call(this,[new ke([new Wa("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var Z=hn(E,0);this.sel=Qa(Z),this.history=new NA(null),this.id=++nn,this.modeOption=g,this.lineSep=S,this.direction=D=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),Ta(this,{from:Z,to:Z,text:A}),va(this,Qa(Z),Ut)};Zt.prototype=dr(Ke.prototype,{constructor:Zt,iter:function(A,g,E){E?this.iterN(A-this.first,g-A,E):this.iterN(this.first,this.first+this.size,A)},insert:function(A,g){for(var E=0,S=0;S<g.length;++S)E+=g[S].height;this.insertInner(A-this.first,g,E)},remove:function(A,g){this.removeInner(A-this.first,g)},getValue:function(A){var g=Os(this,this.first,this.first+this.size);return A===!1?g:g.join(A||this.lineSeparator())},setValue:os(function(A){var g=hn(this.first,0),E=this.first+this.size-1;I(this,{from:g,to:hn(E,Tr(this,E).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&Us(this.cm,0,0),va(this,Qa(g),Ut)}),replaceRange:function(A,g,E,S){g=ei(this,g),E=E?ei(this,E):g,z(this,A,g,E,S)},getRange:function(A,g,E){var S=tl(this,ei(this,A),ei(this,g));return E===!1?S:E===""?S.join(""):S.join(E||this.lineSeparator())},getLine:function(A){var g=this.getLineHandle(A);return g&&g.text},getLineHandle:function(A){if(vn(this,A))return Tr(this,A)},getLineNumber:function(A){return qe(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=Tr(this,A)),Br(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return ei(this,A)},getCursor:function(A){var g=this.sel.primary(),E;return A==null||A=="head"?E=g.head:A=="anchor"?E=g.anchor:A=="end"||A=="to"||A===!1?E=g.to():E=g.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:os(function(A,g,E){Zu(this,ei(this,typeof A=="number"?hn(A,g||0):A),null,E)}),setSelection:os(function(A,g,E){Zu(this,ei(this,A),ei(this,g||A),E)}),extendSelection:os(function(A,g,E){Fc(this,ei(this,A),g&&ei(this,g),E)}),extendSelections:os(function(A,g){Eu(this,nl(this,A),g)}),extendSelectionsBy:os(function(A,g){var E=Dn(this.sel.ranges,A);Eu(this,nl(this,E),g)}),setSelections:os(function(A,g,E){if(A.length){for(var S=[],D=0;D<A.length;D++)S[D]=new Fo(ei(this,A[D].anchor),ei(this,A[D].head||A[D].anchor));g==null&&(g=Math.min(A.length-1,this.sel.primIndex)),va(this,iu(this.cm,S,g),E)}}),addSelection:os(function(A,g,E){var S=this.sel.ranges.slice(0);S.push(new Fo(ei(this,A),ei(this,g||A))),va(this,iu(this.cm,S,S.length-1),E)}),getSelection:function(A){for(var g=this.sel.ranges,E,S=0;S<g.length;S++){var D=tl(this,g[S].from(),g[S].to());E=E?E.concat(D):D}return A===!1?E:E.join(A||this.lineSeparator())},getSelections:function(A){for(var g=[],E=this.sel.ranges,S=0;S<E.length;S++){var D=tl(this,E[S].from(),E[S].to());A!==!1&&(D=D.join(A||this.lineSeparator())),g[S]=D}return g},replaceSelection:function(A,g,E){for(var S=[],D=0;D<this.sel.ranges.length;D++)S[D]=A;this.replaceSelections(S,g,E||"+input")},replaceSelections:os(function(A,g,E){for(var S=[],D=this.sel,Z=0;Z<D.ranges.length;Z++){var Ae=D.ranges[Z];S[Z]={from:Ae.from(),to:Ae.to(),text:this.splitLines(A[Z]),origin:E}}for(var Ce=g&&g!="end"&&fc(this,S,g),Te=S.length-1;Te>=0;Te--)I(this,S[Te]);Ce?Bu(this,Ce):this.cm&&Oi(this.cm)}),undo:os(function(){c(this,"undo")}),redo:os(function(){c(this,"redo")}),undoSelection:os(function(){c(this,"undo",!0)}),redoSelection:os(function(){c(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,g=0,E=0,S=0;S<A.done.length;S++)A.done[S].ranges||++g;for(var D=0;D<A.undone.length;D++)A.undone[D].ranges||++E;return{undo:g,redo:E}},clearHistory:function(){var A=this;this.history=new NA(this.history),xs(this,function(g){return g.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:yA(this.history.done),undone:yA(this.history.undone)}},setHistory:function(A){var g=this.history=new NA(this.history);g.done=yA(A.done.slice(0),null,!0),g.undone=yA(A.undone.slice(0),null,!0)},setGutterMarker:os(function(A,g,E){return xe(this,A,"gutter",function(S){var D=S.gutterMarkers||(S.gutterMarkers={});return D[g]=E,!E&&ce(D)&&(S.gutterMarkers=null),!0})}),clearGutter:os(function(A){var g=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[A]&&xe(g,E,"gutter",function(){return E.gutterMarkers[A]=null,ce(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(A){var g;if(typeof A=="number"){if(!vn(this,A)||(g=A,A=Tr(this,A),!A))return null}else if(g=qe(A),g==null)return null;return{line:g,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:os(function(A,g,E){return xe(this,A,g=="gutter"?"gutter":"class",function(S){var D=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass";if(!S[D])S[D]=E;else{if(Ee(E).test(S[D]))return!1;S[D]+=" "+E}return!0})}),removeLineClass:os(function(A,g,E){return xe(this,A,g=="gutter"?"gutter":"class",function(S){var D=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass",Z=S[D];if(Z)if(E==null)S[D]=null;else{var Ae=Z.match(Ee(E));if(!Ae)return!1;var Ce=Ae.index+Ae[0].length;S[D]=Z.slice(0,Ae.index)+(!Ae.index||Ce==Z.length?"":" ")+Z.slice(Ce)||null}else return!1;return!0})}),addLineWidget:os(function(A,g,E){return pt(this,A,g,E)}),removeLineWidget:function(A){A.clear()},markText:function(A,g,E){return vt(this,ei(this,A),ei(this,g),E,E&&E.type||"range")},setBookmark:function(A,g){var E={replacedWith:g&&(g.nodeType==null?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents};return A=ei(this,A),vt(this,A,A,E,"bookmark")},findMarksAt:function(A){A=ei(this,A);var g=[],E=Tr(this,A.line).markedSpans;if(E)for(var S=0;S<E.length;++S){var D=E[S];(D.from==null||D.from<=A.ch)&&(D.to==null||D.to>=A.ch)&&g.push(D.marker.parent||D.marker)}return g},findMarks:function(A,g,E){A=ei(this,A),g=ei(this,g);var S=[],D=A.line;return this.iter(A.line,g.line+1,function(Z){var Ae=Z.markedSpans;if(Ae)for(var Ce=0;Ce<Ae.length;Ce++){var Te=Ae[Ce];!(Te.to!=null&&D==A.line&&A.ch>=Te.to||Te.from==null&&D!=A.line||Te.from!=null&&D==g.line&&Te.from>=g.ch)&&(!E||E(Te.marker))&&S.push(Te.marker.parent||Te.marker)}++D}),S},getAllMarks:function(){var A=[];return this.iter(function(g){var E=g.markedSpans;if(E)for(var S=0;S<E.length;++S)E[S].from!=null&&A.push(E[S].marker)}),A},posFromIndex:function(A){var g,E=this.first,S=this.lineSeparator().length;return this.iter(function(D){var Z=D.text.length+S;if(Z>A)return g=A,!0;A-=Z,++E}),ei(this,hn(E,g))},indexFromPos:function(A){A=ei(this,A);var g=A.ch;if(A.line<this.first||A.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,A.line,function(S){g+=S.text.length+E}),g},copy:function(A){var g=new Zt(Os(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,A&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(A){A||(A={});var g=this.first,E=this.first+this.size;A.from!=null&&A.from>g&&(g=A.from),A.to!=null&&A.to<E&&(E=A.to);var S=new Zt(Os(this,g,E),A.mode||this.modeOption,g,this.lineSep,this.direction);return A.sharedHist&&(S.history=this.history),(this.linked||(this.linked=[])).push({doc:S,sharedHist:A.sharedHist}),S.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],zt(S,Rt(this)),S},unlinkDoc:function(A){if(A instanceof qo&&(A=A.doc),this.linked)for(var g=0;g<this.linked.length;++g){var E=this.linked[g];if(E.doc==A){this.linked.splice(g,1),A.unlinkDoc(this),Tt(Rt(this));break}}if(A.history==this.history){var S=[A.id];xs(A,function(D){return S.push(D.id)},!0),A.history=new NA(null),A.history.done=yA(this.history.done,S),A.history.undone=yA(this.history.undone,S)}},iterLinkedDocs:function(A){xs(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):ur(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:os(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(g){return g.order=null}),this.cm&&Hr(this.cm))})}),Zt.prototype.eachLine=Zt.prototype.iter;var Mn=0;function Bn(A){var g=this;if(Nn(g),!(dt(g,A)||AA(g.display,A))){xt(A),f&&(Mn=+new Date);var E=tu(g,A,!0),S=A.dataTransfer.files;if(!(!E||g.isReadOnly()))if(S&&S.length&&window.FileReader&&window.File)for(var D=S.length,Z=Array(D),Ae=0,Ce=function(){++Ae==D&&mi(g,function(){E=ei(g.doc,E);var Qt={from:E,to:E,text:g.doc.splitLines(Z.filter(function(wn){return wn!=null}).join(g.doc.lineSeparator())),origin:"paste"};I(g.doc,Qt),Bu(g.doc,Qa(ei(g.doc,E),ei(g.doc,qa(Qt))))})()},Te=function(Qt,wn){if(g.options.allowDropFileTypes&&it(g.options.allowDropFileTypes,Qt.type)==-1){Ce();return}var Ln=new FileReader;Ln.onerror=function(){return Ce()},Ln.onload=function(){var sr=Ln.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(sr)){Ce();return}Z[wn]=sr,Ce()},Ln.readAsText(Qt)},je=0;je<S.length;je++)Te(S[je],je);else{if(g.state.draggingText&&g.doc.sel.contains(E)>-1){g.state.draggingText(A),setTimeout(function(){return g.display.input.focus()},20);return}try{var yt=A.dataTransfer.getData("Text");if(yt){var Mt;if(g.state.draggingText&&!g.state.draggingText.copy&&(Mt=g.listSelections()),$s(g.doc,Qa(E,E)),Mt)for(var en=0;en<Mt.length;++en)z(g.doc,"",Mt[en].anchor,Mt[en].head,"drag");g.replaceSelection(yt,"around","paste"),g.display.input.focus()}}catch{}}}}function yn(A,g){if(f&&(!A.state.draggingText||+new Date-Mn<100)){gr(g);return}if(!(dt(A,g)||AA(A.display,g))&&(g.dataTransfer.setData("Text",A.getSelection()),g.dataTransfer.effectAllowed="copyMove",g.dataTransfer.setDragImage&&!j)){var E=be("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",F&&(E.width=E.height=1,A.display.wrapper.appendChild(E),E._top=E.offsetTop),g.dataTransfer.setDragImage(E,0,0),F&&E.parentNode.removeChild(E)}}function In(A,g){var E=tu(A,g);if(E){var S=document.createDocumentFragment();Sd(A,E,S),A.display.dragCursor||(A.display.dragCursor=be("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),De(A.display.dragCursor,S)}}function Nn(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function Fn(A){if(document.getElementsByClassName){for(var g=document.getElementsByClassName("CodeMirror"),E=[],S=0;S<g.length;S++){var D=g[S].CodeMirror;D&&E.push(D)}E.length&&E[0].operation(function(){for(var Z=0;Z<E.length;Z++)A(E[Z])})}}var pr=!1;function Ti(){pr||(Gi(),pr=!0)}function Gi(){var A;Ne(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,Fn(Uo)},100))}),Ne(window,"blur",function(){return Fn(hs)})}function Uo(A){var g=A.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,A.setSize()}for(var Si={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ps=0;ps<10;ps++)Si[ps+48]=Si[ps+96]=String(ps);for(var To=65;To<=90;To++)Si[To]=String.fromCharCode(To);for(var Po=1;Po<=12;Po++)Si[Po+111]=Si[Po+63235]="F"+Po;var Co={};Co.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Co.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Co.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Co.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Co.default=$?Co.macDefault:Co.pcDefault;function il(A){var g=A.split(/-(?!$)/);A=g[g.length-1];for(var E,S,D,Z,Ae=0;Ae<g.length-1;Ae++){var Ce=g[Ae];if(/^(cmd|meta|m)$/i.test(Ce))Z=!0;else if(/^a(lt)?$/i.test(Ce))E=!0;else if(/^(c|ctrl|control)$/i.test(Ce))S=!0;else if(/^s(hift)?$/i.test(Ce))D=!0;else throw new Error("Unrecognized modifier name: "+Ce)}return E&&(A="Alt-"+A),S&&(A="Ctrl-"+A),Z&&(A="Cmd-"+A),D&&(A="Shift-"+A),A}function Jo(A){var g={};for(var E in A)if(A.hasOwnProperty(E)){var S=A[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(S=="..."){delete A[E];continue}for(var D=Dn(E.split(" "),il),Z=0;Z<D.length;Z++){var Ae=void 0,Ce=void 0;Z==D.length-1?(Ce=D.join(" "),Ae=S):(Ce=D.slice(0,Z+1).join(" "),Ae="...");var Te=g[Ce];if(!Te)g[Ce]=Ae;else if(Te!=Ae)throw new Error("Inconsistent bindings for "+Ce)}delete A[E]}for(var je in g)A[je]=g[je];return A}function es(A,g,E,S){g=Pa(g);var D=g.call?g.call(A,S):g[A];if(D===!1)return"nothing";if(D==="...")return"multi";if(D!=null&&E(D))return"handled";if(g.fallthrough){if(Object.prototype.toString.call(g.fallthrough)!="[object Array]")return es(A,g.fallthrough,E,S);for(var Z=0;Z<g.fallthrough.length;Z++){var Ae=es(A,g.fallthrough[Z],E,S);if(Ae)return Ae}}}function ol(A){var g=typeof A=="string"?A:Si[A.keyCode];return g=="Ctrl"||g=="Alt"||g=="Shift"||g=="Mod"}function CA(A,g,E){var S=A;return g.altKey&&S!="Alt"&&(A="Alt-"+A),(he?g.metaKey:g.ctrlKey)&&S!="Ctrl"&&(A="Ctrl-"+A),(he?g.ctrlKey:g.metaKey)&&S!="Mod"&&(A="Cmd-"+A),!E&&g.shiftKey&&S!="Shift"&&(A="Shift-"+A),A}function uu(A,g){if(F&&A.keyCode==34&&A.char)return!1;var E=Si[A.keyCode];return E==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(E=A.code),CA(E,A,g))}function Pa(A){return typeof A=="string"?Co[A]:A}function El(A,g){for(var E=A.doc.sel.ranges,S=[],D=0;D<E.length;D++){for(var Z=g(E[D]);S.length&&or(Z.from,rr(S).to)<=0;){var Ae=S.pop();if(or(Ae.from,Z.from)<0){Z.from=Ae.from;break}}S.push(Z)}ko(A,function(){for(var Ce=S.length-1;Ce>=0;Ce--)z(A.doc,"",S[Ce].from,S[Ce].to,"+delete");Oi(A)})}function GA(A,g,E){var S=St(A.text,g+E,E);return S<0||S>A.text.length?null:S}function _A(A,g,E){var S=GA(A,g.ch,E);return S==null?null:new hn(g.line,S,E<0?"after":"before")}function QA(A,g,E,S,D){if(A){g.doc.direction=="rtl"&&(D=-D);var Z=ve(E,g.doc.direction);if(Z){var Ae=D<0?rr(Z):Z[0],Ce=D<0==(Ae.level==1),Te=Ce?"after":"before",je;if(Ae.level>0||g.doc.direction=="rtl"){var yt=ua(g,E);je=D<0?E.text.length-1:0;var Mt=rl(g,yt,je).top;je=Ht(function(en){return rl(g,yt,en).top==Mt},D<0==(Ae.level==1)?Ae.from:Ae.to-1,je),Te=="before"&&(je=GA(E,je,1))}else je=D<0?Ae.to:Ae.from;return new hn(S,je,Te)}}return new hn(S,D<0?E.text.length:0,D<0?"before":"after")}function ca(A,g,E,S){var D=ve(g,A.doc.direction);if(!D)return _A(g,E,S);E.ch>=g.text.length?(E.ch=g.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var Z=Oe(D,E.ch,E.sticky),Ae=D[Z];if(A.doc.direction=="ltr"&&Ae.level%2==0&&(S>0?Ae.to>E.ch:Ae.from<E.ch))return _A(g,E,S);var Ce=function(Vn,wr){return GA(g,Vn instanceof hn?Vn.ch:Vn,wr)},Te,je=function(Vn){return A.options.lineWrapping?(Te=Te||ua(A,g),is(A,g,Te,Vn)):{begin:0,end:g.text.length}},yt=je(E.sticky=="before"?Ce(E,-1):E.ch);if(A.doc.direction=="rtl"||Ae.level==1){var Mt=Ae.level==1==S<0,en=Ce(E,Mt?1:-1);if(en!=null&&(Mt?en<=Ae.to&&en<=yt.end:en>=Ae.from&&en>=yt.begin)){var Qt=Mt?"before":"after";return new hn(E.line,en,Qt)}}var wn=function(Vn,wr,yr){for(var Or=function(jo,$a){return $a?new hn(E.line,Ce(jo,1),"before"):new hn(E.line,jo,"after")};Vn>=0&&Vn<D.length;Vn+=wr){var ni=D[Vn],zr=wr>0==(ni.level!=1),Zi=zr?yr.begin:Ce(yr.end,-1);if(ni.from<=Zi&&Zi<ni.to||(Zi=zr?ni.from:Ce(ni.to,-1),yr.begin<=Zi&&Zi<yr.end))return Or(Zi,zr)}},Ln=wn(Z+S,S,yt);if(Ln)return Ln;var sr=S>0?yt.end:Ce(yt.begin,-1);return sr!=null&&!(S>0&&sr==g.text.length)&&(Ln=wn(S>0?0:D.length-1,S,je(sr)),Ln)?Ln:null}var Bl={selectAll:Sl,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),Ut)},killLine:function(A){return El(A,function(g){if(g.empty()){var E=Tr(A.doc,g.head.line).text.length;return g.head.ch==E&&g.head.line<A.lastLine()?{from:g.head,to:hn(g.head.line+1,0)}:{from:g.head,to:hn(g.head.line,E)}}else return{from:g.from(),to:g.to()}})},deleteLine:function(A){return El(A,function(g){return{from:hn(g.from().line,0),to:ei(A.doc,hn(g.to().line+1,0))}})},delLineLeft:function(A){return El(A,function(g){return{from:hn(g.from().line,0),to:g.from()}})},delWrappedLineLeft:function(A){return El(A,function(g){var E=A.charCoords(g.head,"div").top+5,S=A.coordsChar({left:0,top:E},"div");return{from:S,to:g.from()}})},delWrappedLineRight:function(A){return El(A,function(g){var E=A.charCoords(g.head,"div").top+5,S=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:E},"div");return{from:g.from(),to:S}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(hn(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(hn(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(g){return Ka(A,g.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(g){return ss(A,g.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(g){return Au(A,g.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(g){var E=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:E},"div")},Dt)},goLineLeft:function(A){return A.extendSelectionsBy(function(g){var E=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:0,top:E},"div")},Dt)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(g){var E=A.cursorCoords(g.head,"div").top+5,S=A.coordsChar({left:0,top:E},"div");return S.ch<A.getLine(S.line).search(/\S/)?ss(A,g.head):S},Dt)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var g=[],E=A.listSelections(),S=A.options.tabSize,D=0;D<E.length;D++){var Z=E[D].from(),Ae=Pe(A.getLine(Z.line),Z.ch,S);g.push(tn(S-Ae%S))}A.replaceSelections(g)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return ko(A,function(){for(var g=A.listSelections(),E=[],S=0;S<g.length;S++)if(g[S].empty()){var D=g[S].head,Z=Tr(A.doc,D.line).text;if(Z){if(D.ch==Z.length&&(D=new hn(D.line,D.ch-1)),D.ch>0)D=new hn(D.line,D.ch+1),A.replaceRange(Z.charAt(D.ch-1)+Z.charAt(D.ch-2),hn(D.line,D.ch-2),D,"+transpose");else if(D.line>A.doc.first){var Ae=Tr(A.doc,D.line-1).text;Ae&&(D=new hn(D.line,1),A.replaceRange(Z.charAt(0)+A.doc.lineSeparator()+Ae.charAt(Ae.length-1),hn(D.line-1,Ae.length-1),D,"+transpose"))}}E.push(new Fo(D,D))}A.setSelections(E)})},newlineAndIndent:function(A){return ko(A,function(){for(var g=A.listSelections(),E=g.length-1;E>=0;E--)A.replaceRange(A.doc.lineSeparator(),g[E].anchor,g[E].head,"+input");g=A.listSelections();for(var S=0;S<g.length;S++)A.indentLine(g[S].from().line,null,!0);Oi(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function Ka(A,g){var E=Tr(A.doc,g),S=Br(E);return S!=E&&(g=qe(S)),QA(!0,A,S,g,1)}function Au(A,g){var E=Tr(A.doc,g),S=xr(E);return S!=E&&(g=qe(S)),QA(!0,A,E,g,-1)}function ss(A,g){var E=Ka(A,g.line),S=Tr(A.doc,E.line),D=ve(S,A.doc.direction);if(!D||D[0].level==0){var Z=Math.max(E.ch,S.text.search(/\S/)),Ae=g.line==E.line&&g.ch<=Z&&g.ch;return hn(E.line,Ae?0:Z,E.sticky)}return E}function as(A,g,E){if(typeof g=="string"&&(g=Bl[g],!g))return!1;A.display.input.ensurePolled();var S=A.display.shift,D=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),E&&(A.display.shift=!1),D=g(A)!=ft}finally{A.display.shift=S,A.state.suppressEdits=!1}return D}function Ou(A,g,E){for(var S=0;S<A.state.keyMaps.length;S++){var D=es(g,A.state.keyMaps[S],E,A);if(D)return D}return A.options.extraKeys&&es(g,A.options.extraKeys,E,A)||es(g,A.options.keyMap,E,A)}var Vs=new Be;function nh(A,g,E,S){var D=A.state.keySeq;if(D){if(ol(g))return"handled";if(/\'$/.test(g)?A.state.keySeq=null:Vs.set(50,function(){A.state.keySeq==D&&(A.state.keySeq=null,A.display.input.reset())}),vf(A,D+" "+g,E,S))return!0}return vf(A,g,E,S)}function vf(A,g,E,S){var D=Ou(A,g,S);return D=="multi"&&(A.state.keySeq=g),D=="handled"&&na(A,"keyHandled",A,g,E),(D=="handled"||D=="multi")&&(xt(E),qu(A)),!!D}function rh(A,g){var E=uu(g,!0);return E?g.shiftKey&&!A.state.keySeq?nh(A,"Shift-"+E,g,function(S){return as(A,S,!0)})||nh(A,E,g,function(S){if(typeof S=="string"?/^go[A-Z]/.test(S):S.motion)return as(A,S)}):nh(A,E,g,function(S){return as(A,S)}):!1}function Dp(A,g,E){return nh(A,"'"+E+"'",g,function(S){return as(A,S,!0)})}var gc=null;function yc(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&(g.curOp.focus=We(Yt(g)),!dt(g,A))){f&&y<11&&A.keyCode==27&&(A.returnValue=!1);var E=A.keyCode;g.display.shift=E==16||A.shiftKey;var S=rh(g,A);F&&(gc=S?E:null,!S&&E==88&&!Sa&&($?A.metaKey:A.ctrlKey)&&g.replaceSelection("",null,"cut")),i&&!$&&!S&&E==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(g.display.lineDiv.className)&&Ca(g)}}function Ca(A){var g=A.display.lineDiv;Me(g,"CodeMirror-crosshair");function E(S){(S.keyCode==18||!S.altKey)&&(me(g,"CodeMirror-crosshair"),rt(document,"keyup",E),rt(document,"mouseover",E))}Ne(document,"keyup",E),Ne(document,"mouseover",E)}function Xu(A){A.keyCode==16&&(this.doc.sel.shift=!1),dt(this,A)}function od(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&!(AA(g.display,A)||dt(g,A)||A.ctrlKey&&!A.altKey||$&&A.metaKey)){var E=A.keyCode,S=A.charCode;if(F&&E==gc){gc=null,xt(A);return}if(!(F&&(!A.which||A.which<10)&&rh(g,A))){var D=String.fromCharCode(S??E);D!="\b"&&(Dp(g,A,D)||g.display.input.onKeyPress(A))}}}var tp=400,sd=function(A,g,E){this.time=A,this.pos=g,this.button=E};sd.prototype.compare=function(A,g,E){return this.time+tp>A&&or(g,this.pos)==0&&E==this.button};var bA,ml;function Cf(A,g){var E=+new Date;return ml&&ml.compare(E,A,g)?(bA=ml=null,"triple"):bA&&bA.compare(E,A,g)?(ml=new sd(E,A,g),bA=null,"double"):(bA=new sd(E,A,g),ml=null,"single")}function np(A){var g=this,E=g.display;if(!(dt(g,A)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=A.shiftKey,AA(E,A)){x||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!lh(g,A)){var S=tu(g,A),D=on(A),Z=S?Cf(S,D):"single";Lt(g).focus(),D==1&&g.state.selectingText&&g.state.selectingText(A),!(S&&rp(g,D,S,Z,A))&&(D==1?S?Lh(g,S,Z,A):Er(A)==E.scroller&&xt(A):D==2?(S&&Fc(g.doc,S),setTimeout(function(){return E.input.focus()},20)):D==3&&(pe?g.display.input.onContextMenu(A):lc(g)))}}}function rp(A,g,E,S,D){var Z="Click";return S=="double"?Z="Double"+Z:S=="triple"&&(Z="Triple"+Z),Z=(g==1?"Left":g==2?"Middle":"Right")+Z,nh(A,CA(Z,D),D,function(Ae){if(typeof Ae=="string"&&(Ae=Bl[Ae]),!Ae)return!1;var Ce=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),Ce=Ae(A,E)!=ft}finally{A.state.suppressEdits=!1}return Ce})}function ih(A,g,E){var S=A.getOption("configureMouse"),D=S?S(A,g,E):{};if(D.unit==null){var Z=te?E.shiftKey&&E.metaKey:E.altKey;D.unit=Z?"rectangle":g=="single"?"char":g=="double"?"word":"line"}return(D.extend==null||A.doc.extend)&&(D.extend=A.doc.extend||E.shiftKey),D.addNew==null&&(D.addNew=$?E.metaKey:E.ctrlKey),D.moveOnDrag==null&&(D.moveOnDrag=!($?E.altKey:E.ctrlKey)),D}function Lh(A,g,E,S){f?setTimeout(Kt(ed,A),0):A.curOp.focus=We(Yt(A));var D=ih(A,E,S),Z=A.doc.sel,Ae;A.options.dragDrop&&Rn&&!A.isReadOnly()&&E=="single"&&(Ae=Z.contains(g))>-1&&(or((Ae=Z.ranges[Ae]).from(),g)<0||g.xRel>0)&&(or(Ae.to(),g)>0||g.xRel<0)?oh(A,S,g,D):ah(A,S,g,D)}function oh(A,g,E,S){var D=A.display,Z=!1,Ae=mi(A,function(je){x&&(D.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:lc(A)),rt(D.wrapper.ownerDocument,"mouseup",Ae),rt(D.wrapper.ownerDocument,"mousemove",Ce),rt(D.scroller,"dragstart",Te),rt(D.scroller,"drop",Ae),Z||(xt(je),S.addNew||Fc(A.doc,E,null,null,S.extend),x&&!j||f&&y==9?setTimeout(function(){D.wrapper.ownerDocument.body.focus({preventScroll:!0}),D.input.focus()},20):D.input.focus())}),Ce=function(je){Z=Z||Math.abs(g.clientX-je.clientX)+Math.abs(g.clientY-je.clientY)>=10},Te=function(){return Z=!0};x&&(D.scroller.draggable=!0),A.state.draggingText=Ae,Ae.copy=!S.moveOnDrag,Ne(D.wrapper.ownerDocument,"mouseup",Ae),Ne(D.wrapper.ownerDocument,"mousemove",Ce),Ne(D.scroller,"dragstart",Te),Ne(D.scroller,"drop",Ae),A.state.delayingBlurEvent=!0,setTimeout(function(){return D.input.focus()},20),D.scroller.dragDrop&&D.scroller.dragDrop()}function sh(A,g,E){if(E=="char")return new Fo(g,g);if(E=="word")return A.findWordAt(g);if(E=="line")return new Fo(hn(g.line,0),ei(A.doc,hn(g.line+1,0)));var S=E(A,g);return new Fo(S.from,S.to)}function ah(A,g,E,S){f&&lc(A);var D=A.display,Z=A.doc;xt(g);var Ae,Ce,Te=Z.sel,je=Te.ranges;if(S.addNew&&!S.extend?(Ce=Z.sel.contains(E),Ce>-1?Ae=je[Ce]:Ae=new Fo(E,E)):(Ae=Z.sel.primary(),Ce=Z.sel.primIndex),S.unit=="rectangle")S.addNew||(Ae=new Fo(E,E)),E=tu(A,g,!0,!0),Ce=-1;else{var yt=sh(A,E,S.unit);S.extend?Ae=js(Ae,yt.anchor,yt.head,S.extend):Ae=yt}S.addNew?Ce==-1?(Ce=je.length,va(Z,iu(A,je.concat([Ae]),Ce),{scroll:!1,origin:"*mouse"})):je.length>1&&je[Ce].empty()&&S.unit=="char"&&!S.extend?(va(Z,iu(A,je.slice(0,Ce).concat(je.slice(Ce+1)),0),{scroll:!1,origin:"*mouse"}),Te=Z.sel):Ya(Z,Ce,Ae,rn):(Ce=0,va(Z,new bs([Ae],0),rn),Te=Z.sel);var Mt=E;function en(yr){if(or(Mt,yr)!=0)if(Mt=yr,S.unit=="rectangle"){for(var Or=[],ni=A.options.tabSize,zr=Pe(Tr(Z,E.line).text,E.ch,ni),Zi=Pe(Tr(Z,yr.line).text,yr.ch,ni),jo=Math.min(zr,Zi),$a=Math.max(zr,Zi),oa=Math.min(E.line,yr.line),_a=Math.min(A.lastLine(),Math.max(E.line,yr.line));oa<=_a;oa++){var Va=Tr(Z,oa).text,ba=_n(Va,jo,ni);jo==$a?Or.push(new Fo(hn(oa,ba),hn(oa,ba))):Va.length>ba&&Or.push(new Fo(hn(oa,ba),hn(oa,_n(Va,$a,ni))))}Or.length||Or.push(new Fo(E,E)),va(Z,iu(A,Te.ranges.slice(0,Ce).concat(Or),Ce),{origin:"*mouse",scroll:!1}),A.scrollIntoView(yr)}else{var hu=Ae,Ra=sh(A,yr,S.unit),Fa=hu.anchor,ls;or(Ra.anchor,Fa)>0?(ls=Ra.head,Fa=Fs(hu.from(),Ra.anchor)):(ls=Ra.anchor,Fa=_s(hu.to(),Ra.head));var vi=Te.ranges.slice(0);vi[Ce]=Rd(A,new Fo(ei(Z,Fa),ls)),va(Z,iu(A,vi,Ce),rn)}}var Qt=D.wrapper.getBoundingClientRect(),wn=0;function Ln(yr){var Or=++wn,ni=tu(A,yr,!0,S.unit=="rectangle");if(ni)if(or(ni,Mt)!=0){A.curOp.focus=We(Yt(A)),en(ni);var zr=Yu(D,Z);(ni.line>=zr.to||ni.line<zr.from)&&setTimeout(mi(A,function(){wn==Or&&Ln(yr)}),150)}else{var Zi=yr.clientY<Qt.top?-20:yr.clientY>Qt.bottom?20:0;Zi&&setTimeout(mi(A,function(){wn==Or&&(D.scroller.scrollTop+=Zi,Ln(yr))}),50)}}function sr(yr){A.state.selectingText=!1,wn=1/0,yr&&(xt(yr),D.input.focus()),rt(D.wrapper.ownerDocument,"mousemove",Vn),rt(D.wrapper.ownerDocument,"mouseup",wr),Z.history.lastSelOrigin=null}var Vn=mi(A,function(yr){yr.buttons===0||!on(yr)?sr(yr):Ln(yr)}),wr=mi(A,sr);A.state.selectingText=wr,Ne(D.wrapper.ownerDocument,"mousemove",Vn),Ne(D.wrapper.ownerDocument,"mouseup",wr)}function Rd(A,g){var E=g.anchor,S=g.head,D=Tr(A.doc,E.line);if(or(E,S)==0&&E.sticky==S.sticky)return g;var Z=ve(D);if(!Z)return g;var Ae=Oe(Z,E.ch,E.sticky),Ce=Z[Ae];if(Ce.from!=E.ch&&Ce.to!=E.ch)return g;var Te=Ae+(Ce.from==E.ch==(Ce.level!=1)?0:1);if(Te==0||Te==Z.length)return g;var je;if(S.line!=E.line)je=(S.line-E.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var yt=Oe(Z,S.ch,S.sticky),Mt=yt-Ae||(S.ch-E.ch)*(Ce.level==1?-1:1);yt==Te-1||yt==Te?je=Mt<0:je=Mt>0}var en=Z[Te+(je?-1:0)],Qt=je==(en.level==1),wn=Qt?en.from:en.to,Ln=Qt?"after":"before";return E.ch==wn&&E.sticky==Ln?g:new Fo(new hn(E.line,wn,Ln),S)}function _f(A,g,E,S){var D,Z;if(g.touches)D=g.touches[0].clientX,Z=g.touches[0].clientY;else try{D=g.clientX,Z=g.clientY}catch{return!1}if(D>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;S&&xt(g);var Ae=A.display,Ce=Ae.lineDiv.getBoundingClientRect();if(Z>Ce.bottom||!Gt(A,E))return On(g);Z-=Ce.top-Ae.viewOffset;for(var Te=0;Te<A.display.gutterSpecs.length;++Te){var je=Ae.gutters.childNodes[Te];if(je&&je.getBoundingClientRect().right>=D){var yt=wt(A.doc,Z),Mt=A.display.gutterSpecs[Te];return ct(A,E,A,yt,Mt.className,g),On(g)}}}function lh(A,g){return _f(A,g,"gutterClick",!0)}function bf(A,g){AA(A.display,g)||ip(A,g)||dt(A,g,"contextmenu")||pe||A.display.input.onContextMenu(g)}function ip(A,g){return Gt(A,"gutterContextMenu")?_f(A,g,"gutterContextMenu",!1):!1}function Cm(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ic(A)}var Fd={toString:function(){return"CodeMirror.Init"}},xf={},Ol={};function cu(A){var g=A.optionHandlers;function E(S,D,Z,Ae){A.defaults[S]=D,Z&&(g[S]=Ae?function(Ce,Te,je){je!=Fd&&Z(Ce,Te,je)}:Z)}A.defineOption=E,A.Init=Fd,E("value","",function(S,D){return S.setValue(D)},!0),E("mode",null,function(S,D){S.doc.modeOption=D,th(S)},!0),E("indentUnit",2,th,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(S){jA(S),Ic(S),jl(S)},!0),E("lineSeparator",null,function(S,D){if(S.doc.lineSep=D,!!D){var Z=[],Ae=S.doc.first;S.doc.iter(function(Te){for(var je=0;;){var yt=Te.text.indexOf(D,je);if(yt==-1)break;je=yt+D.length,Z.push(hn(Ae,yt))}Ae++});for(var Ce=Z.length-1;Ce>=0;Ce--)z(S.doc,D,Z[Ce],hn(Z[Ce].line,Z[Ce].ch+D.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(S,D,Z){S.state.specialChars=new RegExp(D.source+(D.test("	")?"":"|	"),"g"),Z!=Fd&&S.refresh()}),E("specialCharPlaceholder",ju,function(S){return S.refresh()},!0),E("electricChars",!0),E("inputStyle",ne?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(S,D){return S.getInputField().spellcheck=D},!0),E("autocorrect",!1,function(S,D){return S.getInputField().autocorrect=D},!0),E("autocapitalize",!1,function(S,D){return S.getInputField().autocapitalize=D},!0),E("rtlMoveVisually",!G),E("wholeLineUpdateBefore",!0),E("theme","default",function(S){Cm(S),fl(S)},!0),E("keyMap","default",function(S,D,Z){var Ae=Pa(D),Ce=Z!=Fd&&Pa(Z);Ce&&Ce.detach&&Ce.detach(S,Ae),Ae.attach&&Ae.attach(S,Ce||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,Fp,!0),E("gutters",[],function(S,D){S.display.gutterSpecs=ru(D,S.options.lineNumbers),fl(S)},!0),E("fixedGutter",!0,function(S,D){S.display.gutters.style.left=D?Io(S.display)+"px":"0",S.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(S){return $u(S)},!0),E("scrollbarStyle","native",function(S){RA(S),$u(S),S.display.scrollbars.setScrollTop(S.doc.scrollTop),S.display.scrollbars.setScrollLeft(S.doc.scrollLeft)},!0),E("lineNumbers",!1,function(S,D){S.display.gutterSpecs=ru(S.options.gutters,D),fl(S)},!0),E("firstLineNumber",1,fl,!0),E("lineNumberFormatter",function(S){return S},fl,!0),E("showCursorWhenSelecting",!1,Ga,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(S,D){D=="nocursor"&&(hs(S),S.display.input.blur()),S.display.input.readOnlyChanged(D)}),E("screenReaderLabel",null,function(S,D){D=D===""?null:D,S.display.input.screenReaderLabelChanged(D)}),E("disableInput",!1,function(S,D){D||S.display.input.reset()},!0),E("dragDrop",!0,Rp),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,Ga,!0),E("singleCursorHeightPerLine",!0,Ga,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,jA,!0),E("addModeClass",!1,jA,!0),E("pollInterval",100),E("undoDepth",200,function(S,D){return S.doc.history.undoDepth=D}),E("historyEventDelay",1250),E("viewportMargin",10,function(S){return S.refresh()},!0),E("maxHighlightLength",1e4,jA,!0),E("moveInputWithCursor",!0,function(S,D){D||S.display.input.resetPosition()}),E("tabindex",null,function(S,D){return S.display.input.getField().tabIndex=D||""}),E("autofocus",null),E("direction","ltr",function(S,D){return S.doc.setDirection(D)},!0),E("phrases",null)}function Rp(A,g,E){var S=E&&E!=Fd;if(!g!=!S){var D=A.display.dragFunctions,Z=g?Ne:rt;Z(A.display.scroller,"dragstart",D.start),Z(A.display.scroller,"dragenter",D.enter),Z(A.display.scroller,"dragover",D.over),Z(A.display.scroller,"dragleave",D.leave),Z(A.display.scroller,"drop",D.drop)}}function Fp(A){A.options.lineWrapping?(Me(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(me(A.display.wrapper,"CodeMirror-wrap"),ma(A)),wd(A),jl(A),Ic(A),setTimeout(function(){return $u(A)},100)}function qo(A,g){var E=this;if(!(this instanceof qo))return new qo(A,g);this.options=g=g?Ue(g):{},Ue(xf,g,!1);var S=g.value;typeof S=="string"?S=new Zt(S,g.mode,null,g.lineSeparator,g.direction):g.mode&&(S.modeOption=g.mode),this.doc=S;var D=new qo.inputStyles[g.inputStyle](this),Z=this.display=new Fh(A,S,D,g);Z.wrapper.CodeMirror=this,Cm(this),g.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),RA(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Be,keySeq:null,specialChars:null},g.autofocus&&!ne&&Z.input.focus(),f&&y<11&&setTimeout(function(){return E.display.input.reset(!0)},20),Uh(this),Ti(),Vu(this),this.curOp.forceUpdate=!0,fs(this,S),g.autofocus&&!ne||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&Dh(E)},20):hs(this);for(var Ae in Ol)Ol.hasOwnProperty(Ae)&&Ol[Ae](this,g[Ae],Fd);dc(this),g.finishInit&&g.finishInit(this);for(var Ce=0;Ce<du.length;++Ce)du[Ce](this);Hu(this),x&&g.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}qo.defaults=xf,qo.optionHandlers=Ol;function Uh(A){var g=A.display;Ne(g.scroller,"mousedown",mi(A,np)),f&&y<11?Ne(g.scroller,"dblclick",mi(A,function(Te){if(!dt(A,Te)){var je=tu(A,Te);if(!(!je||lh(A,Te)||AA(A.display,Te))){xt(Te);var yt=A.findWordAt(je);Fc(A.doc,yt.anchor,yt.head)}}})):Ne(g.scroller,"dblclick",function(Te){return dt(A,Te)||xt(Te)}),Ne(g.scroller,"contextmenu",function(Te){return bf(A,Te)}),Ne(g.input.getField(),"contextmenu",function(Te){g.scroller.contains(Te.target)||bf(A,Te)});var E,S={end:0};function D(){g.activeTouch&&(E=setTimeout(function(){return g.activeTouch=null},1e3),S=g.activeTouch,S.end=+new Date)}function Z(Te){if(Te.touches.length!=1)return!1;var je=Te.touches[0];return je.radiusX<=1&&je.radiusY<=1}function Ae(Te,je){if(je.left==null)return!0;var yt=je.left-Te.left,Mt=je.top-Te.top;return yt*yt+Mt*Mt>20*20}Ne(g.scroller,"touchstart",function(Te){if(!dt(A,Te)&&!Z(Te)&&!lh(A,Te)){g.input.ensurePolled(),clearTimeout(E);var je=+new Date;g.activeTouch={start:je,moved:!1,prev:je-S.end<=300?S:null},Te.touches.length==1&&(g.activeTouch.left=Te.touches[0].pageX,g.activeTouch.top=Te.touches[0].pageY)}}),Ne(g.scroller,"touchmove",function(){g.activeTouch&&(g.activeTouch.moved=!0)}),Ne(g.scroller,"touchend",function(Te){var je=g.activeTouch;if(je&&!AA(g,Te)&&je.left!=null&&!je.moved&&new Date-je.start<300){var yt=A.coordsChar(g.activeTouch,"page"),Mt;!je.prev||Ae(je,je.prev)?Mt=new Fo(yt,yt):!je.prev.prev||Ae(je,je.prev.prev)?Mt=A.findWordAt(yt):Mt=new Fo(hn(yt.line,0),ei(A.doc,hn(yt.line+1,0))),A.setSelection(Mt.anchor,Mt.head),A.focus(),xt(Te)}D()}),Ne(g.scroller,"touchcancel",D),Ne(g.scroller,"scroll",function(){g.scroller.clientHeight&&(Tc(A,g.scroller.scrollTop),dl(A,g.scroller.scrollLeft,!0),ct(A,"scroll",A))}),Ne(g.scroller,"mousewheel",function(Te){return hc(A,Te)}),Ne(g.scroller,"DOMMouseScroll",function(Te){return hc(A,Te)}),Ne(g.wrapper,"scroll",function(){return g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),g.dragFunctions={enter:function(Te){dt(A,Te)||gr(Te)},over:function(Te){dt(A,Te)||(In(A,Te),gr(Te))},start:function(Te){return yn(A,Te)},drop:mi(A,Bn),leave:function(Te){dt(A,Te)||Nn(A)}};var Ce=g.input.getField();Ne(Ce,"keyup",function(Te){return Xu.call(A,Te)}),Ne(Ce,"keydown",mi(A,yc)),Ne(Ce,"keypress",mi(A,od)),Ne(Ce,"focus",function(Te){return Dh(A,Te)}),Ne(Ce,"blur",function(Te){return hs(A,Te)})}var du=[];qo.defineInitHook=function(A){return du.push(A)};function uh(A,g,E,S){var D=A.doc,Z;E==null&&(E="add"),E=="smart"&&(D.mode.indent?Z=Rr(A,g).state:E="prev");var Ae=A.options.tabSize,Ce=Tr(D,g),Te=Pe(Ce.text,null,Ae);Ce.stateAfter&&(Ce.stateAfter=null);var je=Ce.text.match(/^\s*/)[0],yt;if(!S&&!/\S/.test(Ce.text))yt=0,E="not";else if(E=="smart"&&(yt=D.mode.indent(Z,Ce.text.slice(je.length),Ce.text),yt==ft||yt>150)){if(!S)return;E="prev"}E=="prev"?g>D.first?yt=Pe(Tr(D,g-1).text,null,Ae):yt=0:E=="add"?yt=Te+A.options.indentUnit:E=="subtract"?yt=Te-A.options.indentUnit:typeof E=="number"&&(yt=Te+E),yt=Math.max(0,yt);var Mt="",en=0;if(A.options.indentWithTabs)for(var Qt=Math.floor(yt/Ae);Qt;--Qt)en+=Ae,Mt+="	";if(en<yt&&(Mt+=tn(yt-en)),Mt!=je)return z(D,Mt,hn(g,0),hn(g,je.length),"+input"),Ce.stateAfter=null,!0;for(var wn=0;wn<D.sel.ranges.length;wn++){var Ln=D.sel.ranges[wn];if(Ln.head.line==g&&Ln.head.ch<je.length){var sr=hn(g,je.length);Ya(D,wn,new Fo(sr,sr));break}}}var Ju=null;function wf(A){Ju=A}function op(A,g,E,S,D){var Z=A.doc;A.display.shift=!1,S||(S=Z.sel);var Ae=+new Date-200,Ce=D=="paste"||A.state.pasteIncoming>Ae,Te=ur(g),je=null;if(Ce&&S.ranges.length>1)if(Ju&&Ju.text.join(`
`)==g){if(S.ranges.length%Ju.text.length==0){je=[];for(var yt=0;yt<Ju.text.length;yt++)je.push(Z.splitLines(Ju.text[yt]))}}else Te.length==S.ranges.length&&A.options.pasteLinesPerSelection&&(je=Dn(Te,function(Vn){return[Vn]}));for(var Mt=A.curOp.updateInput,en=S.ranges.length-1;en>=0;en--){var Qt=S.ranges[en],wn=Qt.from(),Ln=Qt.to();Qt.empty()&&(E&&E>0?wn=hn(wn.line,wn.ch-E):A.state.overwrite&&!Ce?Ln=hn(Ln.line,Math.min(Tr(Z,Ln.line).text.length,Ln.ch+rr(Te).length)):Ce&&Ju&&Ju.lineWise&&Ju.text.join(`
`)==Te.join(`
`)&&(wn=Ln=hn(wn.line,0)));var sr={from:wn,to:Ln,text:je?je[en%je.length]:Te,origin:D||(Ce?"paste":A.state.cutIncoming>Ae?"cut":"+input")};I(A.doc,sr),na(A,"inputRead",A,sr)}g&&!Ce&&Mf(A,g),Oi(A),A.curOp.updateInput<2&&(A.curOp.updateInput=Mt),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function zc(A,g){var E=A.clipboardData&&A.clipboardData.getData("Text");if(E)return A.preventDefault(),!g.isReadOnly()&&!g.options.disableInput&&g.hasFocus()&&ko(g,function(){return op(g,E,0,null,"paste")}),!0}function Mf(A,g){if(!(!A.options.electricChars||!A.options.smartIndent))for(var E=A.doc.sel,S=E.ranges.length-1;S>=0;S--){var D=E.ranges[S];if(!(D.head.ch>100||S&&E.ranges[S-1].head.line==D.head.line)){var Z=A.getModeAt(D.head),Ae=!1;if(Z.electricChars){for(var Ce=0;Ce<Z.electricChars.length;Ce++)if(g.indexOf(Z.electricChars.charAt(Ce))>-1){Ae=uh(A,D.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(Tr(A.doc,D.head.line).text.slice(0,D.head.ch))&&(Ae=uh(A,D.head.line,"smart"));Ae&&na(A,"electricInput",A,D.head.line)}}}function Sf(A){for(var g=[],E=[],S=0;S<A.doc.sel.ranges.length;S++){var D=A.doc.sel.ranges[S].head.line,Z={anchor:hn(D,0),head:hn(D+1,0)};E.push(Z),g.push(A.getRange(Z.anchor,Z.head))}return{text:g,ranges:E}}function Ef(A,g,E,S){A.setAttribute("autocorrect",E?"on":"off"),A.setAttribute("autocapitalize",S?"on":"off"),A.setAttribute("spellcheck",!!g)}function Ld(){var A=be("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),g=be("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?A.style.width="1000px":A.setAttribute("wrap","off"),H&&(A.style.border="1px solid black"),g}function jc(A){var g=A.optionHandlers,E=A.helpers={};A.prototype={constructor:A,focus:function(){Lt(this).focus(),this.display.input.focus()},setOption:function(S,D){var Z=this.options,Ae=Z[S];Z[S]==D&&S!="mode"||(Z[S]=D,g.hasOwnProperty(S)&&mi(this,g[S])(this,D,Ae),ct(this,"optionChange",this,S))},getOption:function(S){return this.options[S]},getDoc:function(){return this.doc},addKeyMap:function(S,D){this.state.keyMaps[D?"push":"unshift"](Pa(S))},removeKeyMap:function(S){for(var D=this.state.keyMaps,Z=0;Z<D.length;++Z)if(D[Z]==S||D[Z].name==S)return D.splice(Z,1),!0},addOverlay:ii(function(S,D){var Z=S.token?S:A.getMode(this.options,S);if(Z.startState)throw new Error("Overlays may not be stateful.");pn(this.state.overlays,{mode:Z,modeSpec:S,opaque:D&&D.opaque,priority:D&&D.priority||0},function(Ae){return Ae.priority}),this.state.modeGen++,jl(this)}),removeOverlay:ii(function(S){for(var D=this.state.overlays,Z=0;Z<D.length;++Z){var Ae=D[Z].modeSpec;if(Ae==S||typeof S=="string"&&Ae.name==S){D.splice(Z,1),this.state.modeGen++,jl(this);return}}}),indentLine:ii(function(S,D,Z){typeof D!="string"&&typeof D!="number"&&(D==null?D=this.options.smartIndent?"smart":"prev":D=D?"add":"subtract"),vn(this.doc,S)&&uh(this,S,D,Z)}),indentSelection:ii(function(S){for(var D=this.doc.sel.ranges,Z=-1,Ae=0;Ae<D.length;Ae++){var Ce=D[Ae];if(Ce.empty())Ce.head.line>Z&&(uh(this,Ce.head.line,S,!0),Z=Ce.head.line,Ae==this.doc.sel.primIndex&&Oi(this));else{var Te=Ce.from(),je=Ce.to(),yt=Math.max(Z,Te.line);Z=Math.min(this.lastLine(),je.line-(je.ch?0:1))+1;for(var Mt=yt;Mt<Z;++Mt)uh(this,Mt,S);var en=this.doc.sel.ranges;Te.ch==0&&D.length==en.length&&en[Ae].from().ch>0&&Ya(this.doc,Ae,new Fo(Te,en[Ae].to()),Ut)}}}),getTokenAt:function(S,D){return Gs(this,S,D)},getLineTokens:function(S,D){return Gs(this,hn(S),D,!0)},getTokenTypeAt:function(S){S=ei(this.doc,S);var D=Ba(this,Tr(this.doc,S.line)),Z=0,Ae=(D.length-1)/2,Ce=S.ch,Te;if(Ce==0)Te=D[2];else for(;;){var je=Z+Ae>>1;if((je?D[je*2-1]:0)>=Ce)Ae=je;else if(D[je*2+1]<Ce)Z=je+1;else{Te=D[je*2+2];break}}var yt=Te?Te.indexOf("overlay "):-1;return yt<0?Te:yt==0?null:Te.slice(0,yt-1)},getModeAt:function(S){var D=this.doc.mode;return D.innerMode?A.innerMode(D,this.getTokenAt(S).state).mode:D},getHelper:function(S,D){return this.getHelpers(S,D)[0]},getHelpers:function(S,D){var Z=[];if(!E.hasOwnProperty(D))return Z;var Ae=E[D],Ce=this.getModeAt(S);if(typeof Ce[D]=="string")Ae[Ce[D]]&&Z.push(Ae[Ce[D]]);else if(Ce[D])for(var Te=0;Te<Ce[D].length;Te++){var je=Ae[Ce[D][Te]];je&&Z.push(je)}else Ce.helperType&&Ae[Ce.helperType]?Z.push(Ae[Ce.helperType]):Ae[Ce.name]&&Z.push(Ae[Ce.name]);for(var yt=0;yt<Ae._global.length;yt++){var Mt=Ae._global[yt];Mt.pred(Ce,this)&&it(Z,Mt.val)==-1&&Z.push(Mt.val)}return Z},getStateAfter:function(S,D){var Z=this.doc;return S=OA(Z,S??Z.first+Z.size-1),Rr(this,S+1,D).state},cursorCoords:function(S,D){var Z,Ae=this.doc.sel.primary();return S==null?Z=Ae.head:typeof S=="object"?Z=ei(this.doc,S):Z=S?Ae.from():Ae.to(),ln(this,Z,D||"page")},charCoords:function(S,D){return En(this,ei(this.doc,S),D||"page")},coordsChar:function(S,D){return S=Jt(this,S,D||"page"),fo(this,S.left,S.top)},lineAtHeight:function(S,D){return S=Jt(this,{top:S,left:0},D||"page").top,wt(this.doc,S+this.display.viewOffset)},heightAtLine:function(S,D,Z){var Ae=!1,Ce;if(typeof S=="number"){var Te=this.doc.first+this.doc.size-1;S<this.doc.first?S=this.doc.first:S>Te&&(S=Te,Ae=!0),Ce=Tr(this.doc,S)}else Ce=S;return eu(this,Ce,{top:0,left:0},D||"page",Z||Ae).top+(Ae?this.doc.height-Ri(Ce):0)},defaultTextHeight:function(){return zl(this.display)},defaultCharWidth:function(){return Qu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(S,D,Z,Ae,Ce){var Te=this.display;S=ln(this,ei(this.doc,S));var je=S.bottom,yt=S.left;if(D.style.position="absolute",D.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(D),Te.sizer.appendChild(D),Ae=="over")je=S.top;else if(Ae=="above"||Ae=="near"){var Mt=Math.max(Te.wrapper.clientHeight,this.doc.height),en=Math.max(Te.sizer.clientWidth,Te.lineSpace.clientWidth);(Ae=="above"||S.bottom+D.offsetHeight>Mt)&&S.top>D.offsetHeight?je=S.top-D.offsetHeight:S.bottom+D.offsetHeight<=Mt&&(je=S.bottom),yt+D.offsetWidth>en&&(yt=en-D.offsetWidth)}D.style.top=je+"px",D.style.left=D.style.right="",Ce=="right"?(yt=Te.sizer.clientWidth-D.offsetWidth,D.style.right="0px"):(Ce=="left"?yt=0:Ce=="middle"&&(yt=(Te.sizer.clientWidth-D.offsetWidth)/2),D.style.left=yt+"px"),Z&&uc(this,{left:yt,top:je,right:yt+D.offsetWidth,bottom:je+D.offsetHeight})},triggerOnKeyDown:ii(yc),triggerOnKeyPress:ii(od),triggerOnKeyUp:Xu,triggerOnMouseDown:ii(np),execCommand:function(S){if(Bl.hasOwnProperty(S))return Bl[S].call(null,this)},triggerElectric:ii(function(S){Mf(this,S)}),findPosH:function(S,D,Z,Ae){var Ce=1;D<0&&(Ce=-1,D=-D);for(var Te=ei(this.doc,S),je=0;je<D&&(Te=xi(this.doc,Te,Ce,Z,Ae),!Te.hitSide);++je);return Te},moveH:ii(function(S,D){var Z=this;this.extendSelectionsBy(function(Ae){return Z.display.shift||Z.doc.extend||Ae.empty()?xi(Z.doc,Ae.head,S,D,Z.options.rtlMoveVisually):S<0?Ae.from():Ae.to()},Dt)}),deleteH:ii(function(S,D){var Z=this.doc.sel,Ae=this.doc;Z.somethingSelected()?Ae.replaceSelection("",null,"+delete"):El(this,function(Ce){var Te=xi(Ae,Ce.head,S,D,!1);return S<0?{from:Te,to:Ce.head}:{from:Ce.head,to:Te}})}),findPosV:function(S,D,Z,Ae){var Ce=1,Te=Ae;D<0&&(Ce=-1,D=-D);for(var je=ei(this.doc,S),yt=0;yt<D;++yt){var Mt=ln(this,je,"div");if(Te==null?Te=Mt.left:Mt.left=Te,je=vc(this,Mt,Ce,Z),je.hitSide)break}return je},moveV:ii(function(S,D){var Z=this,Ae=this.doc,Ce=[],Te=!this.display.shift&&!Ae.extend&&Ae.sel.somethingSelected();if(Ae.extendSelectionsBy(function(yt){if(Te)return S<0?yt.from():yt.to();var Mt=ln(Z,yt.head,"div");yt.goalColumn!=null&&(Mt.left=yt.goalColumn),Ce.push(Mt.left);var en=vc(Z,Mt,S,D);return D=="page"&&yt==Ae.sel.primary()&&KA(Z,En(Z,en,"div").top-Mt.top),en},Dt),Ce.length)for(var je=0;je<Ae.sel.ranges.length;je++)Ae.sel.ranges[je].goalColumn=Ce[je]}),findWordAt:function(S){var D=this.doc,Z=Tr(D,S.line).text,Ae=S.ch,Ce=S.ch;if(Z){var Te=this.getHelper(S,"wordChars");(S.sticky=="before"||Ce==Z.length)&&Ae?--Ae:++Ce;for(var je=Z.charAt(Ae),yt=Qe(je,Te)?function(Mt){return Qe(Mt,Te)}:/\s/.test(je)?function(Mt){return/\s/.test(Mt)}:function(Mt){return!/\s/.test(Mt)&&!Qe(Mt)};Ae>0&&yt(Z.charAt(Ae-1));)--Ae;for(;Ce<Z.length&&yt(Z.charAt(Ce));)++Ce}return new Fo(hn(S.line,Ae),hn(S.line,Ce))},toggleOverwrite:function(S){S!=null&&S==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Me(this.display.cursorDiv,"CodeMirror-overwrite"):me(this.display.cursorDiv,"CodeMirror-overwrite"),ct(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==We(Yt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ii(function(S,D){Us(this,S,D)}),getScrollInfo:function(){var S=this.display.scroller;return{left:S.scrollLeft,top:S.scrollTop,height:S.scrollHeight-Wu(this)-this.display.barHeight,width:S.scrollWidth-Wu(this)-this.display.barWidth,clientHeight:Ul(this),clientWidth:cA(this)}},scrollIntoView:ii(function(S,D){S==null?(S={from:this.doc.sel.primary().head,to:null},D==null&&(D=this.options.cursorScrollMargin)):typeof S=="number"?S={from:hn(S,0),to:null}:S.from==null&&(S={from:S,to:null}),S.to||(S.to=S.from),S.margin=D||0,S.from.line!=null?fA(this,S):nd(this,S.from,S.to,S.margin)}),setSize:ii(function(S,D){var Z=this,Ae=function(Te){return typeof Te=="number"||/^\d+$/.test(String(Te))?Te+"px":Te};S!=null&&(this.display.wrapper.style.width=Ae(S)),D!=null&&(this.display.wrapper.style.height=Ae(D)),this.options.lineWrapping&&gf(this);var Ce=this.display.viewFrom;this.doc.iter(Ce,this.display.viewTo,function(Te){if(Te.widgets){for(var je=0;je<Te.widgets.length;je++)if(Te.widgets[je].noHScroll){sc(Z,Ce,"widget");break}}++Ce}),this.curOp.forceUpdate=!0,ct(this,"refresh",this)}),operation:function(S){return ko(this,S)},startOperation:function(){return Vu(this)},endOperation:function(){return Hu(this)},refresh:ii(function(){var S=this.display.cachedTextHeight;jl(this),this.curOp.forceUpdate=!0,Ic(this),Us(this,this.doc.scrollLeft,this.doc.scrollTop),ya(this.display),(S==null||Math.abs(S-zl(this.display))>.5||this.options.lineWrapping)&&wd(this),ct(this,"refresh",this)}),swapDoc:ii(function(S){var D=this.doc;return D.cm=null,this.state.selectingText&&this.state.selectingText(),fs(this,S),Ic(this),this.display.input.reset(),Us(this,S.scrollLeft,S.scrollTop),this.curOp.forceScroll=!0,na(this,"swapDoc",this,D),D}),phrase:function(S){var D=this.options.phrases;return D&&Object.prototype.hasOwnProperty.call(D,S)?D[S]:S},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},jt(A),A.registerHelper=function(S,D,Z){E.hasOwnProperty(S)||(E[S]=A[S]={_global:[]}),E[S][D]=Z},A.registerGlobalHelper=function(S,D,Z,Ae){A.registerHelper(S,D,Ae),E[S]._global.push({pred:Z,val:Ae})}}function xi(A,g,E,S,D){var Z=g,Ae=E,Ce=Tr(A,g.line),Te=D&&A.direction=="rtl"?-E:E;function je(){var wr=g.line+Te;return wr<A.first||wr>=A.first+A.size?!1:(g=new hn(wr,g.ch,g.sticky),Ce=Tr(A,wr))}function yt(wr){var yr;if(S=="codepoint"){var Or=Ce.text.charCodeAt(g.ch+(E>0?0:-1));if(isNaN(Or))yr=null;else{var ni=E>0?Or>=55296&&Or<56320:Or>=56320&&Or<57343;yr=new hn(g.line,Math.max(0,Math.min(Ce.text.length,g.ch+E*(ni?2:1))),-E)}}else D?yr=ca(A.cm,Ce,g,E):yr=_A(Ce,g,E);if(yr==null)if(!wr&&je())g=QA(D,A.cm,Ce,g.line,Te);else return!1;else g=yr;return!0}if(S=="char"||S=="codepoint")yt();else if(S=="column")yt(!0);else if(S=="word"||S=="group")for(var Mt=null,en=S=="group",Qt=A.cm&&A.cm.getHelper(g,"wordChars"),wn=!0;!(E<0&&!yt(!wn));wn=!1){var Ln=Ce.text.charAt(g.ch)||`
`,sr=Qe(Ln,Qt)?"w":en&&Ln==`
`?"n":!en||/\s/.test(Ln)?null:"p";if(en&&!wn&&!sr&&(sr="s"),Mt&&Mt!=sr){E<0&&(E=1,yt(),g.sticky="after");break}if(sr&&(Mt=sr),E>0&&!yt(!wn))break}var Vn=Uc(A,g,Z,Ae,!0);return Ki(Z,Vn)&&(Vn.hitSide=!0),Vn}function vc(A,g,E,S){var D=A.doc,Z=g.left,Ae;if(S=="page"){var Ce=Math.min(A.display.wrapper.clientHeight,Lt(A).innerHeight||D(A).documentElement.clientHeight),Te=Math.max(Ce-.5*zl(A.display),3);Ae=(E>0?g.bottom:g.top)+E*Te}else S=="line"&&(Ae=E>0?g.bottom+3:g.top-3);for(var je;je=fo(A,Z,Ae),!!je.outside;){if(E<0?Ae<=0:Ae>=D.height){je.hitSide=!0;break}Ae+=E*5}return je}var zo=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};zo.prototype.init=function(A){var g=this,E=this,S=E.cm,D=E.div=A.lineDiv;D.contentEditable=!0,Ef(D,S.options.spellcheck,S.options.autocorrect,S.options.autocapitalize);function Z(Ce){for(var Te=Ce.target;Te;Te=Te.parentNode){if(Te==D)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Te.className))break}return!1}Ne(D,"paste",function(Ce){!Z(Ce)||dt(S,Ce)||zc(Ce,S)||y<=11&&setTimeout(mi(S,function(){return g.updateFromDOM()}),20)}),Ne(D,"compositionstart",function(Ce){g.composing={data:Ce.data,done:!1}}),Ne(D,"compositionupdate",function(Ce){g.composing||(g.composing={data:Ce.data,done:!1})}),Ne(D,"compositionend",function(Ce){g.composing&&(Ce.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)}),Ne(D,"touchstart",function(){return E.forceCompositionEnd()}),Ne(D,"input",function(){g.composing||g.readFromDOMSoon()});function Ae(Ce){if(!(!Z(Ce)||dt(S,Ce))){if(S.somethingSelected())wf({lineWise:!1,text:S.getSelections()}),Ce.type=="cut"&&S.replaceSelection("",null,"cut");else if(S.options.lineWiseCopyCut){var Te=Sf(S);wf({lineWise:!0,text:Te.text}),Ce.type=="cut"&&S.operation(function(){S.setSelections(Te.ranges,0,Ut),S.replaceSelection("",null,"cut")})}else return;if(Ce.clipboardData){Ce.clipboardData.clearData();var je=Ju.text.join(`
`);if(Ce.clipboardData.setData("Text",je),Ce.clipboardData.getData("Text")==je){Ce.preventDefault();return}}var yt=Ld(),Mt=yt.firstChild;Ef(Mt),S.display.lineSpace.insertBefore(yt,S.display.lineSpace.firstChild),Mt.value=Ju.text.join(`
`);var en=We(gt(D));He(Mt),setTimeout(function(){S.display.lineSpace.removeChild(yt),en.focus(),en==D&&E.showPrimarySelection()},50)}}Ne(D,"copy",Ae),Ne(D,"cut",Ae)},zo.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},zo.prototype.prepareSelection=function(){var A=Jc(this.cm,!1);return A.focus=We(gt(this.div))==this.div,A},zo.prototype.showSelection=function(A,g){!A||!this.cm.display.view.length||((A.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(A))},zo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},zo.prototype.showPrimarySelection=function(){var A=this.getSelection(),g=this.cm,E=g.doc.sel.primary(),S=E.from(),D=E.to();if(g.display.viewTo==g.display.viewFrom||S.line>=g.display.viewTo||D.line<g.display.viewFrom){A.removeAllRanges();return}var Z=gl(g,A.anchorNode,A.anchorOffset),Ae=gl(g,A.focusNode,A.focusOffset);if(!(Z&&!Z.bad&&Ae&&!Ae.bad&&or(Fs(Z,Ae),S)==0&&or(_s(Z,Ae),D)==0)){var Ce=g.display.view,Te=S.line>=g.display.viewFrom&&Ud(g,S)||{node:Ce[0].measure.map[2],offset:0},je=D.line<g.display.viewTo&&Ud(g,D);if(!je){var yt=Ce[Ce.length-1].measure,Mt=yt.maps?yt.maps[yt.maps.length-1]:yt.map;je={node:Mt[Mt.length-1],offset:Mt[Mt.length-2]-Mt[Mt.length-3]}}if(!Te||!je){A.removeAllRanges();return}var en=A.rangeCount&&A.getRangeAt(0),Qt;try{Qt=Ze(Te.node,Te.offset,je.offset,je.node)}catch{}Qt&&(!i&&g.state.focused?(A.collapse(Te.node,Te.offset),Qt.collapsed||(A.removeAllRanges(),A.addRange(Qt))):(A.removeAllRanges(),A.addRange(Qt)),en&&A.anchorNode==null?A.addRange(en):i&&this.startGracePeriod()),this.rememberSelection()}},zo.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},zo.prototype.showMultipleSelections=function(A){De(this.cm.display.cursorDiv,A.cursors),De(this.cm.display.selectionDiv,A.selection)},zo.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},zo.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var g=A.getRangeAt(0).commonAncestorContainer;return Je(this.div,g)},zo.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||We(gt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},zo.prototype.blur=function(){this.div.blur()},zo.prototype.getField=function(){return this.div},zo.prototype.supportsTouch=function(){return!0},zo.prototype.receivedFocus=function(){var A=this,g=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):ko(this.cm,function(){return g.cm.curOp.selectionChanged=!0});function E(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},zo.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},zo.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),g=this.cm;if(oe&&O&&this.cm.display.gutterSpecs.length&&Lp(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=gl(g,A.anchorNode,A.anchorOffset),S=gl(g,A.focusNode,A.focusOffset);E&&S&&ko(g,function(){va(g.doc,Qa(E,S),Ut),(E.bad||S.bad)&&(g.curOp.selectionChanged=!0)})}}},zo.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,g=A.display,E=A.doc.sel.primary(),S=E.from(),D=E.to();if(S.ch==0&&S.line>A.firstLine()&&(S=hn(S.line-1,Tr(A.doc,S.line-1).length)),D.ch==Tr(A.doc,D.line).text.length&&D.line<A.lastLine()&&(D=hn(D.line+1,0)),S.line<g.viewFrom||D.line>g.viewTo-1)return!1;var Z,Ae,Ce;S.line==g.viewFrom||(Z=dA(A,S.line))==0?(Ae=qe(g.view[0].line),Ce=g.view[0].node):(Ae=qe(g.view[Z].line),Ce=g.view[Z-1].node.nextSibling);var Te=dA(A,D.line),je,yt;if(Te==g.view.length-1?(je=g.viewTo-1,yt=g.lineDiv.lastChild):(je=qe(g.view[Te+1].line)-1,yt=g.view[Te+1].node.previousSibling),!Ce)return!1;for(var Mt=A.doc.splitLines(e0(A,Ce,yt,Ae,je)),en=tl(A.doc,hn(Ae,0),hn(je,Tr(A.doc,je).text.length));Mt.length>1&&en.length>1;)if(rr(Mt)==rr(en))Mt.pop(),en.pop(),je--;else if(Mt[0]==en[0])Mt.shift(),en.shift(),Ae++;else break;for(var Qt=0,wn=0,Ln=Mt[0],sr=en[0],Vn=Math.min(Ln.length,sr.length);Qt<Vn&&Ln.charCodeAt(Qt)==sr.charCodeAt(Qt);)++Qt;for(var wr=rr(Mt),yr=rr(en),Or=Math.min(wr.length-(Mt.length==1?Qt:0),yr.length-(en.length==1?Qt:0));wn<Or&&wr.charCodeAt(wr.length-wn-1)==yr.charCodeAt(yr.length-wn-1);)++wn;if(Mt.length==1&&en.length==1&&Ae==S.line)for(;Qt&&Qt>S.ch&&wr.charCodeAt(wr.length-wn-1)==yr.charCodeAt(yr.length-wn-1);)Qt--,wn++;Mt[Mt.length-1]=wr.slice(0,wr.length-wn).replace(/^\u200b+/,""),Mt[0]=Mt[0].slice(Qt).replace(/\u200b+$/,"");var ni=hn(Ae,Qt),zr=hn(je,en.length?rr(en).length-wn:0);if(Mt.length>1||Mt[0]||or(ni,zr))return z(A.doc,Mt,ni,zr,"+input"),!0},zo.prototype.ensurePolled=function(){this.forceCompositionEnd()},zo.prototype.reset=function(){this.forceCompositionEnd()},zo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},zo.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},zo.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&ko(this.cm,function(){return jl(A.cm)})},zo.prototype.setUneditable=function(A){A.contentEditable="false"},zo.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||mi(this.cm,op)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},zo.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},zo.prototype.onContextMenu=function(){},zo.prototype.resetPosition=function(){},zo.prototype.needsContentAttribute=!0;function Ud(A,g){var E=_d(A,g.line);if(!E||E.hidden)return null;var S=Tr(A.doc,g.line),D=pf(E,S,g.line),Z=ve(S,A.doc.direction),Ae="left";if(Z){var Ce=Oe(Z,g.ch);Ae=Ce%2?"right":"left"}var Te=Ih(D.map,g.ch,Ae);return Te.offset=Te.collapse=="right"?Te.end:Te.start,Te}function Lp(A){for(var g=A;g;g=g.parentNode)if(/CodeMirror-gutter-wrapper/.test(g.className))return!0;return!1}function Iu(A,g){return g&&(A.bad=!0),A}function e0(A,g,E,S,D){var Z="",Ae=!1,Ce=A.doc.lineSeparator(),Te=!1;function je(Qt){return function(wn){return wn.id==Qt}}function yt(){Ae&&(Z+=Ce,Te&&(Z+=Ce),Ae=Te=!1)}function Mt(Qt){Qt&&(yt(),Z+=Qt)}function en(Qt){if(Qt.nodeType==1){var wn=Qt.getAttribute("cm-text");if(wn){Mt(wn);return}var Ln=Qt.getAttribute("cm-marker"),sr;if(Ln){var Vn=A.findMarks(hn(S,0),hn(D+1,0),je(+Ln));Vn.length&&(sr=Vn[0].find(0))&&Mt(tl(A.doc,sr.from,sr.to).join(Ce));return}if(Qt.getAttribute("contenteditable")=="false")return;var wr=/^(pre|div|p|li|table|br)$/i.test(Qt.nodeName);if(!/^br$/i.test(Qt.nodeName)&&Qt.textContent.length==0)return;wr&&yt();for(var yr=0;yr<Qt.childNodes.length;yr++)en(Qt.childNodes[yr]);/^(pre|p)$/i.test(Qt.nodeName)&&(Te=!0),wr&&(Ae=!0)}else Qt.nodeType==3&&Mt(Qt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;en(g),g!=E;)g=g.nextSibling,Te=!1;return Z}function gl(A,g,E){var S;if(g==A.display.lineDiv){if(S=A.display.lineDiv.childNodes[E],!S)return Iu(A.clipPos(hn(A.display.viewTo-1)),!0);g=null,E=0}else for(S=g;;S=S.parentNode){if(!S||S==A.display.lineDiv)return null;if(S.parentNode&&S.parentNode==A.display.lineDiv)break}for(var D=0;D<A.display.view.length;D++){var Z=A.display.view[D];if(Z.node==S)return _m(Z,g,E)}}function _m(A,g,E){var S=A.text.firstChild,D=!1;if(!g||!Je(S,g))return Iu(hn(qe(A.line),0),!0);if(g==S&&(D=!0,g=S.childNodes[E],E=0,!g)){var Z=A.rest?rr(A.rest):A.line;return Iu(hn(qe(Z),Z.text.length),D)}var Ae=g.nodeType==3?g:null,Ce=g;for(!Ae&&g.childNodes.length==1&&g.firstChild.nodeType==3&&(Ae=g.firstChild,E&&(E=Ae.nodeValue.length));Ce.parentNode!=S;)Ce=Ce.parentNode;var Te=A.measure,je=Te.maps;function yt(sr,Vn,wr){for(var yr=-1;yr<(je?je.length:0);yr++)for(var Or=yr<0?Te.map:je[yr],ni=0;ni<Or.length;ni+=3){var zr=Or[ni+2];if(zr==sr||zr==Vn){var Zi=qe(yr<0?A.line:A.rest[yr]),jo=Or[ni]+wr;return(wr<0||zr!=sr)&&(jo=Or[ni+(wr?1:0)]),hn(Zi,jo)}}}var Mt=yt(Ae,Ce,E);if(Mt)return Iu(Mt,D);for(var en=Ce.nextSibling,Qt=Ae?Ae.nodeValue.length-E:0;en;en=en.nextSibling){if(Mt=yt(en,en.firstChild,0),Mt)return Iu(hn(Mt.line,Mt.ch-Qt),D);Qt+=en.textContent.length}for(var wn=Ce.previousSibling,Ln=E;wn;wn=wn.previousSibling){if(Mt=yt(wn,wn.firstChild,-1),Mt)return Iu(hn(Mt.line,Mt.ch+Ln),D);Ln+=wn.textContent.length}}var Da=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new Be,this.hasSelection=!1,this.composing=null,this.resetting=!1};Da.prototype.init=function(A){var g=this,E=this,S=this.cm;this.createField(A);var D=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),H&&(D.style.width="0px"),Ne(D,"input",function(){f&&y>=9&&g.hasSelection&&(g.hasSelection=null),E.poll()}),Ne(D,"paste",function(Ae){dt(S,Ae)||zc(Ae,S)||(S.state.pasteIncoming=+new Date,E.fastPoll())});function Z(Ae){if(!dt(S,Ae)){if(S.somethingSelected())wf({lineWise:!1,text:S.getSelections()});else if(S.options.lineWiseCopyCut){var Ce=Sf(S);wf({lineWise:!0,text:Ce.text}),Ae.type=="cut"?S.setSelections(Ce.ranges,null,Ut):(E.prevInput="",D.value=Ce.text.join(`
`),He(D))}else return;Ae.type=="cut"&&(S.state.cutIncoming=+new Date)}}Ne(D,"cut",Z),Ne(D,"copy",Z),Ne(A.scroller,"paste",function(Ae){if(!(AA(A,Ae)||dt(S,Ae))){if(!D.dispatchEvent){S.state.pasteIncoming=+new Date,E.focus();return}var Ce=new Event("paste");Ce.clipboardData=Ae.clipboardData,D.dispatchEvent(Ce)}}),Ne(A.lineSpace,"selectstart",function(Ae){AA(A,Ae)||xt(Ae)}),Ne(D,"compositionstart",function(){var Ae=S.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:Ae,range:S.markText(Ae,S.getCursor("to"),{className:"CodeMirror-composing"})}}),Ne(D,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},Da.prototype.createField=function(A){this.wrapper=Ld(),this.textarea=this.wrapper.firstChild;var g=this.cm.options;Ef(this.textarea,g.spellcheck,g.autocorrect,g.autocapitalize)},Da.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},Da.prototype.prepareSelection=function(){var A=this.cm,g=A.display,E=A.doc,S=Jc(A);if(A.options.moveInputWithCursor){var D=ln(A,E.sel.primary().head,"div"),Z=g.wrapper.getBoundingClientRect(),Ae=g.lineDiv.getBoundingClientRect();S.teTop=Math.max(0,Math.min(g.wrapper.clientHeight-10,D.top+Ae.top-Z.top)),S.teLeft=Math.max(0,Math.min(g.wrapper.clientWidth-10,D.left+Ae.left-Z.left))}return S},Da.prototype.showSelection=function(A){var g=this.cm,E=g.display;De(E.cursorDiv,A.cursors),De(E.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},Da.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var g=this.cm;if(this.resetting=!0,g.somethingSelected()){this.prevInput="";var E=g.getSelection();this.textarea.value=E,g.state.focused&&He(this.textarea),f&&y>=9&&(this.hasSelection=E)}else A||(this.prevInput=this.textarea.value="",f&&y>=9&&(this.hasSelection=null));this.resetting=!1}},Da.prototype.getField=function(){return this.textarea},Da.prototype.supportsTouch=function(){return!1},Da.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ne||We(gt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Da.prototype.blur=function(){this.textarea.blur()},Da.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Da.prototype.receivedFocus=function(){this.slowPoll()},Da.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},Da.prototype.fastPoll=function(){var A=!1,g=this;g.pollingFast=!0;function E(){var S=g.poll();!S&&!A?(A=!0,g.polling.set(60,E)):(g.pollingFast=!1,g.slowPoll())}g.polling.set(20,E)},Da.prototype.poll=function(){var A=this,g=this.cm,E=this.textarea,S=this.prevInput;if(this.contextMenuPending||this.resetting||!g.state.focused||go(E)&&!S&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq)return!1;var D=E.value;if(D==S&&!g.somethingSelected())return!1;if(f&&y>=9&&this.hasSelection===D||$&&/[\uf700-\uf7ff]/.test(D))return g.display.input.reset(),!1;if(g.doc.sel==g.display.selForContextMenu){var Z=D.charCodeAt(0);if(Z==8203&&!S&&(S="​"),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var Ae=0,Ce=Math.min(S.length,D.length);Ae<Ce&&S.charCodeAt(Ae)==D.charCodeAt(Ae);)++Ae;return ko(g,function(){op(g,D.slice(Ae),S.length-Ae,null,A.composing?"*compose":null),D.length>1e3||D.indexOf(`
`)>-1?E.value=A.prevInput="":A.prevInput=D,A.composing&&(A.composing.range.clear(),A.composing.range=g.markText(A.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Da.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Da.prototype.onKeyPress=function(){f&&y>=9&&(this.hasSelection=null),this.fastPoll()},Da.prototype.onContextMenu=function(A){var g=this,E=g.cm,S=E.display,D=g.textarea;g.contextMenuPending&&g.contextMenuPending();var Z=tu(E,A),Ae=S.scroller.scrollTop;if(!Z||F)return;var Ce=E.options.resetSelectionOnContextMenu;Ce&&E.doc.sel.contains(Z)==-1&&mi(E,va)(E.doc,Qa(Z),Ut);var Te=D.style.cssText,je=g.wrapper.style.cssText,yt=g.wrapper.offsetParent.getBoundingClientRect();g.wrapper.style.cssText="position: static",D.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-yt.top-5)+"px; left: "+(A.clientX-yt.left-5)+`px;
      z-index: 1000; background: `+(f?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Mt;x&&(Mt=D.ownerDocument.defaultView.scrollY),S.input.focus(),x&&D.ownerDocument.defaultView.scrollTo(null,Mt),S.input.reset(),E.somethingSelected()||(D.value=g.prevInput=" "),g.contextMenuPending=Qt,S.selForContextMenu=E.doc.sel,clearTimeout(S.detectingSelectAll);function en(){if(D.selectionStart!=null){var Ln=E.somethingSelected(),sr="​"+(Ln?D.value:"");D.value="⇚",D.value=sr,g.prevInput=Ln?"":"​",D.selectionStart=1,D.selectionEnd=sr.length,S.selForContextMenu=E.doc.sel}}function Qt(){if(g.contextMenuPending==Qt&&(g.contextMenuPending=!1,g.wrapper.style.cssText=je,D.style.cssText=Te,f&&y<9&&S.scrollbars.setScrollTop(S.scroller.scrollTop=Ae),D.selectionStart!=null)){(!f||f&&y<9)&&en();var Ln=0,sr=function(){S.selForContextMenu==E.doc.sel&&D.selectionStart==0&&D.selectionEnd>0&&g.prevInput=="​"?mi(E,Sl)(E):Ln++<10?S.detectingSelectAll=setTimeout(sr,500):(S.selForContextMenu=null,S.input.reset())};S.detectingSelectAll=setTimeout(sr,200)}}if(f&&y>=9&&en(),pe){gr(A);var wn=function(){rt(window,"mouseup",wn),setTimeout(Qt,20)};Ne(window,"mouseup",wn)}else setTimeout(Qt,50)},Da.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},Da.prototype.setUneditable=function(){},Da.prototype.needsContentAttribute=!1;function sp(A,g){if(g=g?Ue(g):{},g.value=A.value,!g.tabindex&&A.tabIndex&&(g.tabindex=A.tabIndex),!g.placeholder&&A.placeholder&&(g.placeholder=A.placeholder),g.autofocus==null){var E=We(gt(A));g.autofocus=E==A||A.getAttribute("autofocus")!=null&&E==document.body}function S(){A.value=Ce.getValue()}var D;if(A.form&&(Ne(A.form,"submit",S),!g.leaveSubmitMethodAlone)){var Z=A.form;D=Z.submit;try{var Ae=Z.submit=function(){S(),Z.submit=D,Z.submit(),Z.submit=Ae}}catch{}}g.finishInit=function(Te){Te.save=S,Te.getTextArea=function(){return A},Te.toTextArea=function(){Te.toTextArea=isNaN,S(),A.parentNode.removeChild(Te.getWrapperElement()),A.style.display="",A.form&&(rt(A.form,"submit",S),!g.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=D))}},A.style.display="none";var Ce=qo(function(Te){return A.parentNode.insertBefore(Te,A.nextSibling)},g);return Ce}function ap(A){A.off=rt,A.on=Ne,A.wheelEventPixels=zA,A.Doc=Zt,A.splitLines=ur,A.countColumn=Pe,A.findColumn=_n,A.isWordChar=Jn,A.Pass=ft,A.signal=ct,A.Line=Wa,A.changeEnd=qa,A.scrollbarModel=rd,A.Pos=hn,A.cmpPos=or,A.modes=oo,A.mimeModes=Ro,A.resolveMode=Ea,A.getMode=rs,A.modeExtensions=aa,A.extendMode=cl,A.copyState=Ao,A.startState=Zl,A.innerMode=Uu,A.commands=Bl,A.keyMap=Co,A.keyName=uu,A.isModifierKey=ol,A.lookupKey=es,A.normalizeKeyMap=Jo,A.StringStream=so,A.SharedTextMarker=Bt,A.TextMarker=mt,A.LineWidget=$e,A.e_preventDefault=xt,A.e_stopPropagation=Tn,A.e_stop=gr,A.addClass=Me,A.contains=Je,A.rmClass=me,A.keyNames=Si}cu(qo),jc(qo);var Wl="iter insert remove copy getEditor constructor".split(" ");for(var Ah in Zt.prototype)Zt.prototype.hasOwnProperty(Ah)&&it(Wl,Ah)<0&&(qo.prototype[Ah]=function(A){return function(){return A.apply(this.doc,arguments)}}(Zt.prototype[Ah]));return jt(Zt),qo.inputStyles={textarea:Da,contenteditable:zo},qo.defineMode=function(A){!qo.defaults.mode&&A!="null"&&(qo.defaults.mode=A),Pi.apply(this,arguments)},qo.defineMIME=Na,qo.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),qo.defineMIME("text/plain","null"),qo.defineExtension=function(A,g){qo.prototype[A]=g},qo.defineDocExtension=function(A,g){Zt.prototype[A]=g},qo.fromTextArea=sp,ap(qo),qo.version="5.65.18",qo})}(A2)),A2.exports}var Mue=O3();const Mp=Al(Mue);var ST={exports:{}},ET;function Sue(){return ET||(ET=1,function(n,e){(function(t){t(O3())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,a=i.statementIndent,o=i.jsonld,f=i.json||o,y=i.trackScope!==!1,x=i.typescript,B=i.wordCharacters||/[\w$\xa1-\uffff]/,O=function(){function qe(yo){return{type:yo,style:"keyword"}}var wt=qe("keyword a"),vn=qe("keyword b"),Yn=qe("keyword c"),hn=qe("keyword d"),or=qe("operator"),Ki={type:"atom",style:"atom"};return{if:qe("if"),while:wt,with:wt,else:vn,do:vn,try:vn,finally:vn,return:hn,break:hn,continue:hn,new:qe("new"),delete:Yn,void:Yn,throw:Yn,debugger:qe("debugger"),var:qe("var"),const:qe("var"),let:qe("var"),function:qe("function"),catch:qe("catch"),for:qe("for"),switch:qe("switch"),case:qe("case"),default:qe("default"),in:or,typeof:or,instanceof:or,true:Ki,false:Ki,null:Ki,undefined:Ki,NaN:Ki,Infinity:Ki,this:qe("this"),class:qe("class"),super:qe("atom"),yield:Yn,export:qe("export"),import:qe("import"),extends:Yn,await:Yn}}(),T=/[+\-*&%=<>!?|~^@]/,F=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function j(qe){for(var wt=!1,vn,Yn=!1;(vn=qe.next())!=null;){if(!wt){if(vn=="/"&&!Yn)return;vn=="["?Yn=!0:Yn&&vn=="]"&&(Yn=!1)}wt=!wt&&vn=="\\"}}var N,q;function H(qe,wt,vn){return N=qe,q=vn,wt}function oe(qe,wt){var vn=qe.next();if(vn=='"'||vn=="'")return wt.tokenize=ne(vn),wt.tokenize(qe,wt);if(vn=="."&&qe.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return H("number","number");if(vn=="."&&qe.match(".."))return H("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(vn))return H(vn);if(vn=="="&&qe.eat(">"))return H("=>","operator");if(vn=="0"&&qe.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return H("number","number");if(/\d/.test(vn))return qe.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),H("number","number");if(vn=="/")return qe.eat("*")?(wt.tokenize=$,$(qe,wt)):qe.eat("/")?(qe.skipToEnd(),H("comment","comment")):ea(qe,wt,1)?(j(qe),qe.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),H("regexp","string-2")):(qe.eat("="),H("operator","operator",qe.current()));if(vn=="`")return wt.tokenize=te,te(qe,wt);if(vn=="#"&&qe.peek()=="!")return qe.skipToEnd(),H("meta","meta");if(vn=="#"&&qe.eatWhile(B))return H("variable","property");if(vn=="<"&&qe.match("!--")||vn=="-"&&qe.match("->")&&!/\S/.test(qe.string.slice(0,qe.start)))return qe.skipToEnd(),H("comment","comment");if(T.test(vn))return(vn!=">"||!wt.lexical||wt.lexical.type!=">")&&(qe.eat("=")?(vn=="!"||vn=="=")&&qe.eat("="):/[<>*+\-|&?]/.test(vn)&&(qe.eat(vn),vn==">"&&qe.eat(vn))),vn=="?"&&qe.eat(".")?H("."):H("operator","operator",qe.current());if(B.test(vn)){qe.eatWhile(B);var Yn=qe.current();if(wt.lastType!="."){if(O.propertyIsEnumerable(Yn)){var hn=O[Yn];return H(hn.type,hn.style,Yn)}if(Yn=="async"&&qe.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return H("async","keyword",Yn)}return H("variable","variable",Yn)}}function ne(qe){return function(wt,vn){var Yn=!1,hn;if(o&&wt.peek()=="@"&&wt.match(F))return vn.tokenize=oe,H("jsonld-keyword","meta");for(;(hn=wt.next())!=null&&!(hn==qe&&!Yn);)Yn=!Yn&&hn=="\\";return Yn||(vn.tokenize=oe),H("string","string")}}function $(qe,wt){for(var vn=!1,Yn;Yn=qe.next();){if(Yn=="/"&&vn){wt.tokenize=oe;break}vn=Yn=="*"}return H("comment","comment")}function te(qe,wt){for(var vn=!1,Yn;(Yn=qe.next())!=null;){if(!vn&&(Yn=="`"||Yn=="$"&&qe.eat("{"))){wt.tokenize=oe;break}vn=!vn&&Yn=="\\"}return H("quasi","string-2",qe.current())}var G="([{}])";function ie(qe,wt){wt.fatArrowAt&&(wt.fatArrowAt=null);var vn=qe.string.indexOf("=>",qe.start);if(!(vn<0)){if(x){var Yn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(qe.string.slice(qe.start,vn));Yn&&(vn=Yn.index)}for(var hn=0,or=!1,Ki=vn-1;Ki>=0;--Ki){var yo=qe.string.charAt(Ki),_s=G.indexOf(yo);if(_s>=0&&_s<3){if(!hn){++Ki;break}if(--hn==0){yo=="("&&(or=!0);break}}else if(_s>=3&&_s<6)++hn;else if(B.test(yo))or=!0;else if(/["'\/`]/.test(yo))for(;;--Ki){if(Ki==0)return;var Fs=qe.string.charAt(Ki-1);if(Fs==yo&&qe.string.charAt(Ki-2)!="\\"){Ki--;break}}else if(or&&!hn){++Ki;break}}or&&!hn&&(wt.fatArrowAt=Ki)}}var he={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function pe(qe,wt,vn,Yn,hn,or){this.indented=qe,this.column=wt,this.type=vn,this.prev=hn,this.info=or,Yn!=null&&(this.align=Yn)}function Ee(qe,wt){if(!y)return!1;for(var vn=qe.localVars;vn;vn=vn.next)if(vn.name==wt)return!0;for(var Yn=qe.context;Yn;Yn=Yn.prev)for(var vn=Yn.vars;vn;vn=vn.next)if(vn.name==wt)return!0}function me(qe,wt,vn,Yn,hn){var or=qe.cc;for(Se.state=qe,Se.stream=hn,Se.marked=null,Se.cc=or,Se.style=wt,qe.lexical.hasOwnProperty("align")||(qe.lexical.align=!0);;){var Ki=or.length?or.pop():f?it:Pe;if(Ki(vn,Yn)){for(;or.length&&or[or.length-1].lex;)or.pop()();return Se.marked?Se.marked:vn=="variable"&&Ee(qe,Yn)?"variable-2":wt}}}var Se={state:null,column:null,marked:null,cc:null};function De(){for(var qe=arguments.length-1;qe>=0;qe--)Se.cc.push(arguments[qe])}function be(){return De.apply(null,arguments),!0}function at(qe,wt){for(var vn=wt;vn;vn=vn.next)if(vn.name==qe)return!0;return!1}function Ze(qe){var wt=Se.state;if(Se.marked="def",!!y){if(wt.context){if(wt.lexical.info=="var"&&wt.context&&wt.context.block){var vn=Je(qe,wt.context);if(vn!=null){wt.context=vn;return}}else if(!at(qe,wt.localVars)){wt.localVars=new Fe(qe,wt.localVars);return}}i.globalVars&&!at(qe,wt.globalVars)&&(wt.globalVars=new Fe(qe,wt.globalVars))}}function Je(qe,wt){if(wt)if(wt.block){var vn=Je(qe,wt.prev);return vn?vn==wt.prev?wt:new Me(vn,wt.vars,!0):null}else return at(qe,wt.vars)?wt:new Me(wt.prev,new Fe(qe,wt.vars),!1);else return null}function We(qe){return qe=="public"||qe=="private"||qe=="protected"||qe=="abstract"||qe=="readonly"}function Me(qe,wt,vn){this.prev=qe,this.vars=wt,this.block=vn}function Fe(qe,wt){this.name=qe,this.next=wt}var He=new Fe("this",new Fe("arguments",null));function bt(){Se.state.context=new Me(Se.state.context,Se.state.localVars,!1),Se.state.localVars=He}function Yt(){Se.state.context=new Me(Se.state.context,Se.state.localVars,!0),Se.state.localVars=null}bt.lex=Yt.lex=!0;function gt(){Se.state.localVars=Se.state.context.vars,Se.state.context=Se.state.context.prev}gt.lex=!0;function Lt(qe,wt){var vn=function(){var Yn=Se.state,hn=Yn.indented;if(Yn.lexical.type=="stat")hn=Yn.lexical.indented;else for(var or=Yn.lexical;or&&or.type==")"&&or.align;or=or.prev)hn=or.indented;Yn.lexical=new pe(hn,Se.stream.column(),qe,null,Yn.lexical,wt)};return vn.lex=!0,vn}function Kt(){var qe=Se.state;qe.lexical.prev&&(qe.lexical.type==")"&&(qe.indented=qe.lexical.indented),qe.lexical=qe.lexical.prev)}Kt.lex=!0;function Ue(qe){function wt(vn){return vn==qe?be():qe==";"||vn=="}"||vn==")"||vn=="]"?De():be(wt)}return wt}function Pe(qe,wt){return qe=="var"?be(Lt("vardef",wt),Tn,Ue(";"),Kt):qe=="keyword a"?be(Lt("form"),ft,Pe,Kt):qe=="keyword b"?be(Lt("form"),Pe,Kt):qe=="keyword d"?Se.stream.match(/^\s*$/,!1)?be():be(Lt("stat"),rn,Ue(";"),Kt):qe=="debugger"?be(Ue(";")):qe=="{"?be(Lt("}"),Yt,Ht,Kt,gt):qe==";"?be():qe=="if"?(Se.state.lexical.info=="else"&&Se.state.cc[Se.state.cc.length-1]==Kt&&Se.state.cc.pop()(),be(Lt("form"),ft,Pe,Kt,er)):qe=="function"?be(ur):qe=="for"?be(Lt("form"),Yt,Xr,Pe,gt,Kt):qe=="class"||x&&wt=="interface"?(Se.marked="keyword",be(Lt("form",qe=="class"?qe:wt),oo,Kt)):qe=="variable"?x&&wt=="declare"?(Se.marked="keyword",be(Pe)):x&&(wt=="module"||wt=="enum"||wt=="type")&&Se.stream.match(/^\s*\w/,!1)?(Se.marked="keyword",wt=="enum"?be(Tr):wt=="type"?be(Sa,Ue("operator"),ve,Ue(";")):be(Lt("form"),On,Ue("{"),Lt("}"),Ht,Kt,Kt)):x&&wt=="namespace"?(Se.marked="keyword",be(Lt("form"),it,Pe,Kt)):x&&wt=="abstract"?(Se.marked="keyword",be(Pe)):be(Lt("stat"),vr):qe=="switch"?be(Lt("form"),ft,Ue("{"),Lt("}","switch"),Yt,Ht,Kt,Kt,gt):qe=="case"?be(it,Ue(":")):qe=="default"?be(Ue(":")):qe=="catch"?be(Lt("form"),bt,Be,Pe,Kt,gt):qe=="export"?be(Lt("stat"),Ea,Kt):qe=="import"?be(Lt("stat"),aa,Kt):qe=="async"?be(Pe):wt=="@"?be(it,Pe):De(Lt("stat"),it,Ue(";"),Kt)}function Be(qe){if(qe=="(")return be(Yi,Ue(")"))}function it(qe,wt){return Ut(qe,wt,!1)}function _t(qe,wt){return Ut(qe,wt,!0)}function ft(qe){return qe!="("?De():be(Lt(")"),rn,Ue(")"),Kt)}function Ut(qe,wt,vn){if(Se.state.fatArrowAt==Se.stream.start){var Yn=vn?Dn:rr;if(qe=="(")return be(bt,Lt(")"),nt(Yi,")"),Kt,Ue("=>"),Yn,gt);if(qe=="variable")return De(bt,On,Ue("=>"),Yn,gt)}var hn=vn?_n:Dt;return he.hasOwnProperty(qe)?be(hn):qe=="function"?be(ur,hn):qe=="class"||x&&wt=="interface"?(Se.marked="keyword",be(Lt("form"),Ci,Kt)):qe=="keyword c"||qe=="async"?be(vn?_t:it):qe=="("?be(Lt(")"),rn,Ue(")"),Kt,hn):qe=="operator"||qe=="spread"?be(vn?_t:it):qe=="["?be(Lt("]"),so,Kt,hn):qe=="{"?St(Qe,"}",null,hn):qe=="quasi"?De(qn,hn):qe=="new"?be(pn(vn)):be()}function rn(qe){return qe.match(/[;\}\)\],]/)?De():De(it)}function Dt(qe,wt){return qe==","?be(rn):_n(qe,wt,!1)}function _n(qe,wt,vn){var Yn=vn==!1?Dt:_n,hn=vn==!1?it:_t;if(qe=="=>")return be(bt,vn?Dn:rr,gt);if(qe=="operator")return/\+\+|--/.test(wt)||x&&wt=="!"?be(Yn):x&&wt=="<"&&Se.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?be(Lt(">"),nt(ve,">"),Kt,Yn):wt=="?"?be(it,Ue(":"),hn):be(hn);if(qe=="quasi")return De(qn,Yn);if(qe!=";"){if(qe=="(")return St(_t,")","call",Yn);if(qe==".")return be(Jn,Yn);if(qe=="[")return be(Lt("]"),rn,Ue("]"),Kt,Yn);if(x&&wt=="as")return Se.marked="keyword",be(ve,Yn);if(qe=="regexp")return Se.state.lastType=Se.marked="operator",Se.stream.backUp(Se.stream.pos-Se.stream.start-1),be(hn)}}function qn(qe,wt){return qe!="quasi"?De():wt.slice(wt.length-2)!="${"?be(qn):be(rn,tn)}function tn(qe){if(qe=="}")return Se.marked="string-2",Se.state.tokenize=te,be(qn)}function rr(qe){return ie(Se.stream,Se.state),De(qe=="{"?Pe:it)}function Dn(qe){return ie(Se.stream,Se.state),De(qe=="{"?Pe:_t)}function pn(qe){return function(wt){return wt=="."?be(qe?dr:Zn):wt=="variable"&&x?be(Gt,qe?_n:Dt):De(qe?_t:it)}}function Zn(qe,wt){if(wt=="target")return Se.marked="keyword",be(Dt)}function dr(qe,wt){if(wt=="target")return Se.marked="keyword",be(_n)}function vr(qe){return qe==":"?be(Kt,Pe):De(Dt,Ue(";"),Kt)}function Jn(qe){if(qe=="variable")return Se.marked="property",be()}function Qe(qe,wt){if(qe=="async")return Se.marked="property",be(Qe);if(qe=="variable"||Se.style=="keyword"){if(Se.marked="property",wt=="get"||wt=="set")return be(ce);var vn;return x&&Se.state.fatArrowAt==Se.stream.start&&(vn=Se.stream.match(/^\s*:\s*/,!1))&&(Se.state.fatArrowAt=Se.stream.pos+vn[0].length),be(fe)}else{if(qe=="number"||qe=="string")return Se.marked=o?"property":Se.style+" property",be(fe);if(qe=="jsonld-keyword")return be(fe);if(x&&We(wt))return Se.marked="keyword",be(Qe);if(qe=="[")return be(it,sn,Ue("]"),fe);if(qe=="spread")return be(_t,fe);if(wt=="*")return Se.marked="keyword",be(Qe);if(qe==":")return De(fe)}}function ce(qe){return qe!="variable"?De(fe):(Se.marked="property",be(ur))}function fe(qe){if(qe==":")return be(_t);if(qe=="(")return De(ur)}function nt(qe,wt,vn){function Yn(hn,or){if(vn?vn.indexOf(hn)>-1:hn==","){var Ki=Se.state.lexical;return Ki.info=="call"&&(Ki.pos=(Ki.pos||0)+1),be(function(yo,_s){return yo==wt||_s==wt?De():De(qe)},Yn)}return hn==wt||or==wt?be():vn&&vn.indexOf(";")>-1?De(qe):be(Ue(wt))}return function(hn,or){return hn==wt||or==wt?be():De(qe,Yn)}}function St(qe,wt,vn){for(var Yn=3;Yn<arguments.length;Yn++)Se.cc.push(arguments[Yn]);return be(Lt(wt,vn),nt(qe,wt),Kt)}function Ht(qe){return qe=="}"?be():De(Pe,Ht)}function sn(qe,wt){if(x){if(qe==":")return be(ve);if(wt=="?")return be(sn)}}function tr(qe,wt){if(x&&(qe==":"||wt=="in"))return be(ve)}function Oe(qe){if(x&&qe==":")return Se.stream.match(/^\s*\w+\s+is\b/,!1)?be(it,se,ve):be(ve)}function se(qe,wt){if(wt=="is")return Se.marked="keyword",be()}function ve(qe,wt){if(wt=="keyof"||wt=="typeof"||wt=="infer"||wt=="readonly")return Se.marked="keyword",be(wt=="typeof"?_t:ve);if(qe=="variable"||wt=="void")return Se.marked="type",be(qt);if(wt=="|"||wt=="&")return be(ve);if(qe=="string"||qe=="number"||qe=="atom")return be(qt);if(qe=="[")return be(Lt("]"),nt(ve,"]",","),Kt,qt);if(qe=="{")return be(Lt("}"),Ne,Kt,qt);if(qe=="(")return be(nt(dt,")"),p,qt);if(qe=="<")return be(nt(ve,">"),ve);if(qe=="quasi")return De(rt,qt)}function p(qe){if(qe=="=>")return be(ve)}function Ne(qe){return qe.match(/[\}\)\]]/)?be():qe==","||qe==";"?be(Ne):De(Ye,Ne)}function Ye(qe,wt){if(qe=="variable"||Se.style=="keyword")return Se.marked="property",be(Ye);if(wt=="?"||qe=="number"||qe=="string")return be(Ye);if(qe==":")return be(ve);if(qe=="[")return be(Ue("variable"),tr,Ue("]"),Ye);if(qe=="(")return De(go,Ye);if(!qe.match(/[;\}\)\],]/))return be()}function rt(qe,wt){return qe!="quasi"?De():wt.slice(wt.length-2)!="${"?be(rt):be(ve,ct)}function ct(qe){if(qe=="}")return Se.marked="string-2",Se.state.tokenize=te,be(rt)}function dt(qe,wt){return qe=="variable"&&Se.stream.match(/^\s*[?:]/,!1)||wt=="?"?be(dt):qe==":"?be(ve):qe=="spread"?be(dt):De(ve)}function qt(qe,wt){if(wt=="<")return be(Lt(">"),nt(ve,">"),Kt,qt);if(wt=="|"||qe=="."||wt=="&")return be(ve);if(qe=="[")return be(ve,Ue("]"),qt);if(wt=="extends"||wt=="implements")return Se.marked="keyword",be(ve);if(wt=="?")return be(ve,Ue(":"),ve)}function Gt(qe,wt){if(wt=="<")return be(Lt(">"),nt(ve,">"),Kt,qt)}function jt(){return De(ve,xt)}function xt(qe,wt){if(wt=="=")return be(ve)}function Tn(qe,wt){return wt=="enum"?(Se.marked="keyword",be(Tr)):De(On,sn,on,Rn)}function On(qe,wt){if(x&&We(wt))return Se.marked="keyword",be(On);if(qe=="variable")return Ze(wt),be();if(qe=="spread")return be(On);if(qe=="[")return St(Er,"]");if(qe=="{")return St(gr,"}")}function gr(qe,wt){return qe=="variable"&&!Se.stream.match(/^\s*:/,!1)?(Ze(wt),be(on)):(qe=="variable"&&(Se.marked="property"),qe=="spread"?be(On):qe=="}"?De():qe=="["?be(it,Ue("]"),Ue(":"),gr):be(Ue(":"),On,on))}function Er(){return De(On,on)}function on(qe,wt){if(wt=="=")return be(_t)}function Rn(qe){if(qe==",")return be(Tn)}function er(qe,wt){if(qe=="keyword b"&&wt=="else")return be(Lt("form","else"),Pe,Kt)}function Xr(qe,wt){if(wt=="await")return be(Xr);if(qe=="(")return be(Lt(")"),Ur,Kt)}function Ur(qe){return qe=="var"?be(Tn,Dr):qe=="variable"?be(Dr):De(Dr)}function Dr(qe,wt){return qe==")"?be():qe==";"?be(Dr):wt=="in"||wt=="of"?(Se.marked="keyword",be(it,Dr)):De(it,Dr)}function ur(qe,wt){if(wt=="*")return Se.marked="keyword",be(ur);if(qe=="variable")return Ze(wt),be(ur);if(qe=="(")return be(bt,Lt(")"),nt(Yi,")"),Kt,Oe,Pe,gt);if(x&&wt=="<")return be(Lt(">"),nt(jt,">"),Kt,ur)}function go(qe,wt){if(wt=="*")return Se.marked="keyword",be(go);if(qe=="variable")return Ze(wt),be(go);if(qe=="(")return be(bt,Lt(")"),nt(Yi,")"),Kt,Oe,gt);if(x&&wt=="<")return be(Lt(">"),nt(jt,">"),Kt,go)}function Sa(qe,wt){if(qe=="keyword"||qe=="variable")return Se.marked="type",be(Sa);if(wt=="<")return be(Lt(">"),nt(jt,">"),Kt)}function Yi(qe,wt){return wt=="@"&&be(it,Yi),qe=="spread"?be(Yi):x&&We(wt)?(Se.marked="keyword",be(Yi)):x&&qe=="this"?be(sn,on):De(On,sn,on)}function Ci(qe,wt){return qe=="variable"?oo(qe,wt):Ro(qe,wt)}function oo(qe,wt){if(qe=="variable")return Ze(wt),be(Ro)}function Ro(qe,wt){if(wt=="<")return be(Lt(">"),nt(jt,">"),Kt,Ro);if(wt=="extends"||wt=="implements"||x&&qe==",")return wt=="implements"&&(Se.marked="keyword"),be(x?ve:it,Ro);if(qe=="{")return be(Lt("}"),Pi,Kt)}function Pi(qe,wt){if(qe=="async"||qe=="variable"&&(wt=="static"||wt=="get"||wt=="set"||x&&We(wt))&&Se.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return Se.marked="keyword",be(Pi);if(qe=="variable"||Se.style=="keyword")return Se.marked="property",be(Na,Pi);if(qe=="number"||qe=="string")return be(Na,Pi);if(qe=="[")return be(it,sn,Ue("]"),Na,Pi);if(wt=="*")return Se.marked="keyword",be(Pi);if(x&&qe=="(")return De(go,Pi);if(qe==";"||qe==",")return be(Pi);if(qe=="}")return be();if(wt=="@")return be(it,Pi)}function Na(qe,wt){if(wt=="!"||wt=="?")return be(Na);if(qe==":")return be(ve,on);if(wt=="=")return be(_t);var vn=Se.state.lexical.prev,Yn=vn&&vn.info=="interface";return De(Yn?go:ur)}function Ea(qe,wt){return wt=="*"?(Se.marked="keyword",be(Zl,Ue(";"))):wt=="default"?(Se.marked="keyword",be(it,Ue(";"))):qe=="{"?be(nt(rs,"}"),Zl,Ue(";")):De(Pe)}function rs(qe,wt){if(wt=="as")return Se.marked="keyword",be(Ue("variable"));if(qe=="variable")return De(_t,rs)}function aa(qe){return qe=="string"?be():qe=="("?De(it):qe=="."?De(Dt):De(cl,Ao,Zl)}function cl(qe,wt){return qe=="{"?St(cl,"}"):(qe=="variable"&&Ze(wt),wt=="*"&&(Se.marked="keyword"),be(Uu))}function Ao(qe){if(qe==",")return be(cl,Ao)}function Uu(qe,wt){if(wt=="as")return Se.marked="keyword",be(cl)}function Zl(qe,wt){if(wt=="from")return Se.marked="keyword",be(it)}function so(qe){return qe=="]"?be():De(nt(_t,"]"))}function Tr(){return De(Lt("form"),On,Ue("{"),Lt("}"),nt(tl,"}"),Kt,Kt)}function tl(){return De(On,on)}function Os(qe,wt){return qe.lastType=="operator"||qe.lastType==","||T.test(wt.charAt(0))||/[,.]/.test(wt.charAt(0))}function ea(qe,wt,vn){return wt.tokenize==oe&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(wt.lastType)||wt.lastType=="quasi"&&/\{\s*$/.test(qe.string.slice(0,qe.pos-(vn||0)))}return{startState:function(qe){var wt={tokenize:oe,lastType:"sof",cc:[],lexical:new pe((qe||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Me(null,null,!1),indented:qe||0};return i.globalVars&&typeof i.globalVars=="object"&&(wt.globalVars=i.globalVars),wt},token:function(qe,wt){if(qe.sol()&&(wt.lexical.hasOwnProperty("align")||(wt.lexical.align=!1),wt.indented=qe.indentation(),ie(qe,wt)),wt.tokenize!=$&&qe.eatSpace())return null;var vn=wt.tokenize(qe,wt);return N=="comment"?vn:(wt.lastType=N=="operator"&&(q=="++"||q=="--")?"incdec":N,me(wt,vn,N,q,qe))},indent:function(qe,wt){if(qe.tokenize==$||qe.tokenize==te)return t.Pass;if(qe.tokenize!=oe)return 0;var vn=wt&&wt.charAt(0),Yn=qe.lexical,hn;if(!/^\s*else\b/.test(wt))for(var or=qe.cc.length-1;or>=0;--or){var Ki=qe.cc[or];if(Ki==Kt)Yn=Yn.prev;else if(Ki!=er&&Ki!=gt)break}for(;(Yn.type=="stat"||Yn.type=="form")&&(vn=="}"||(hn=qe.cc[qe.cc.length-1])&&(hn==Dt||hn==_n)&&!/^[,\.=+\-*:?[\(]/.test(wt));)Yn=Yn.prev;a&&Yn.type==")"&&Yn.prev.type=="stat"&&(Yn=Yn.prev);var yo=Yn.type,_s=vn==yo;return yo=="vardef"?Yn.indented+(qe.lastType=="operator"||qe.lastType==","?Yn.info.length+1:0):yo=="form"&&vn=="{"?Yn.indented:yo=="form"?Yn.indented+s:yo=="stat"?Yn.indented+(Os(qe,wt)?a||s:0):Yn.info=="switch"&&!_s&&i.doubleIndentSwitch!=!1?Yn.indented+(/^(?:case|default)\b/.test(wt)?s:2*s):Yn.align?Yn.column+(_s?0:1):Yn.indented+(_s?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",blockCommentContinue:f?null:" * ",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:o,jsonMode:f,expressionAllowed:ea,skipExpression:function(qe){me(qe,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),ST.exports}Sue();var BT={exports:{}},OT;function Eue(){return OT||(OT=1,function(n,e){(function(t){t(O3())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(G,ie,he){var pe=document.createElement("div");pe.className="CodeMirror-lint-tooltip cm-s-"+G.options.theme,pe.appendChild(he.cloneNode(!0)),G.state.lint.options.selfContain?G.getWrapperElement().appendChild(pe):document.body.appendChild(pe);function Ee(me){if(!pe.parentNode)return t.off(document,"mousemove",Ee);var Se=Math.max(0,me.clientY-pe.offsetHeight-5),De=Math.max(0,Math.min(me.clientX+5,pe.ownerDocument.defaultView.innerWidth-pe.offsetWidth));pe.style.top=Se+"px",pe.style.left=De+"px"}return t.on(document,"mousemove",Ee),Ee(ie),pe.style.opacity!=null&&(pe.style.opacity=1),pe}function a(G){G.parentNode&&G.parentNode.removeChild(G)}function o(G){G.parentNode&&(G.style.opacity==null&&a(G),G.style.opacity=0,setTimeout(function(){a(G)},600))}function f(G,ie,he,pe){var Ee=s(G,ie,he);function me(){t.off(pe,"mouseout",me),Ee&&(o(Ee),Ee=null)}var Se=setInterval(function(){if(Ee)for(var De=pe;;De=De.parentNode){if(De&&De.nodeType==11&&(De=De.host),De==document.body)return;if(!De){me();break}}if(!Ee)return clearInterval(Se)},400);t.on(pe,"mouseout",me)}function y(G,ie,he){this.marked=[],ie instanceof Function&&(ie={getAnnotations:ie}),(!ie||ie===!0)&&(ie={}),this.options={},this.linterOptions=ie.options||{};for(var pe in x)this.options[pe]=x[pe];for(var pe in ie)x.hasOwnProperty(pe)?ie[pe]!=null&&(this.options[pe]=ie[pe]):ie.options||(this.linterOptions[pe]=ie[pe]);this.timeout=null,this.hasGutter=he,this.onMouseOver=function(Ee){te(G,Ee)},this.waitingFor=0}var x={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function B(G){var ie=G.state.lint;ie.hasGutter&&G.clearGutter(r),ie.options.highlightLines&&O(G);for(var he=0;he<ie.marked.length;++he)ie.marked[he].clear();ie.marked.length=0}function O(G){G.eachLine(function(ie){var he=ie.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(ie.wrapClass);he&&G.removeLineClass(ie,"wrap",he[0])})}function T(G,ie,he,pe,Ee){var me=document.createElement("div"),Se=me;return me.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+he,pe&&(Se=me.appendChild(document.createElement("div")),Se.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),Ee!=!1&&t.on(Se,"mouseover",function(De){f(G,De,ie,Se)}),me}function F(G,ie){return G=="error"?G:ie}function j(G){for(var ie=[],he=0;he<G.length;++he){var pe=G[he],Ee=pe.from.line;(ie[Ee]||(ie[Ee]=[])).push(pe)}return ie}function N(G){var ie=G.severity;ie||(ie="error");var he=document.createElement("div");return he.className="CodeMirror-lint-message CodeMirror-lint-message-"+ie,typeof G.messageHTML<"u"?he.innerHTML=G.messageHTML:he.appendChild(document.createTextNode(G.message)),he}function q(G,ie){var he=G.state.lint,pe=++he.waitingFor;function Ee(){pe=-1,G.off("change",Ee)}G.on("change",Ee),ie(G.getValue(),function(me,Se){G.off("change",Ee),he.waitingFor==pe&&(Se&&me instanceof t&&(me=Se),G.operation(function(){oe(G,me)}))},he.linterOptions,G)}function H(G){var ie=G.state.lint;if(ie){var he=ie.options,pe=he.getAnnotations||G.getHelper(t.Pos(0,0),"lint");if(pe)if(he.async||pe.async)q(G,pe);else{var Ee=pe(G.getValue(),ie.linterOptions,G);if(!Ee)return;Ee.then?Ee.then(function(me){G.operation(function(){oe(G,me)})}):G.operation(function(){oe(G,Ee)})}}}function oe(G,ie){var he=G.state.lint;if(he){var pe=he.options;B(G);for(var Ee=j(ie),me=0;me<Ee.length;++me){var Se=Ee[me];if(Se){for(var De=null,be=he.hasGutter&&document.createDocumentFragment(),at=0;at<Se.length;++at){var Ze=Se[at],Je=Ze.severity;Je||(Je="error"),De=F(De,Je),pe.formatAnnotation&&(Ze=pe.formatAnnotation(Ze)),he.hasGutter&&be.appendChild(N(Ze)),Ze.to&&he.marked.push(G.markText(Ze.from,Ze.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Je,__annotation:Ze}))}he.hasGutter&&G.setGutterMarker(me,r,T(G,be,De,Se.length>1,pe.tooltips)),pe.highlightLines&&G.addLineClass(me,"wrap",i+De)}}pe.onUpdateLinting&&pe.onUpdateLinting(ie,Ee,G)}}function ne(G){var ie=G.state.lint;ie&&(clearTimeout(ie.timeout),ie.timeout=setTimeout(function(){H(G)},ie.options.delay))}function $(G,ie,he){for(var pe=he.target||he.srcElement,Ee=document.createDocumentFragment(),me=0;me<ie.length;me++){var Se=ie[me];Ee.appendChild(N(Se))}f(G,he,Ee,pe)}function te(G,ie){var he=ie.target||ie.srcElement;if(/\bCodeMirror-lint-mark-/.test(he.className)){for(var pe=he.getBoundingClientRect(),Ee=(pe.left+pe.right)/2,me=(pe.top+pe.bottom)/2,Se=G.findMarksAt(G.coordsChar({left:Ee,top:me},"client")),De=[],be=0;be<Se.length;++be){var at=Se[be].__annotation;at&&De.push(at)}De.length&&$(G,De,ie)}}t.defineOption("lint",!1,function(G,ie,he){if(he&&he!=t.Init&&(B(G),G.state.lint.options.lintOnChange!==!1&&G.off("change",ne),t.off(G.getWrapperElement(),"mouseover",G.state.lint.onMouseOver),clearTimeout(G.state.lint.timeout),delete G.state.lint),ie){for(var pe=G.getOption("gutters"),Ee=!1,me=0;me<pe.length;++me)pe[me]==r&&(Ee=!0);var Se=G.state.lint=new y(G,ie,Ee);Se.options.lintOnChange&&G.on("change",ne),Se.options.tooltips!=!1&&Se.options.tooltips!="gutter"&&t.on(G.getWrapperElement(),"mouseover",Se.onMouseOver),H(G)}}),t.defineExtension("performLint",function(){H(this)})})}()),BT.exports}Eue();var IT={exports:{}},kT;function Bue(){return kT||(kT=1,function(n,e){(function(t){t(O3())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function a(O){return O&&O.bracketRegex||/[(){}[\]]/}function o(O,T,F){var j=O.getLineHandle(T.line),N=T.ch-1,q=F&&F.afterCursor;q==null&&(q=/(^| )cm-fat-cursor($| )/.test(O.getWrapperElement().className));var H=a(F),oe=!q&&N>=0&&H.test(j.text.charAt(N))&&s[j.text.charAt(N)]||H.test(j.text.charAt(N+1))&&s[j.text.charAt(++N)];if(!oe)return null;var ne=oe.charAt(1)==">"?1:-1;if(F&&F.strict&&ne>0!=(N==T.ch))return null;var $=O.getTokenTypeAt(i(T.line,N+1)),te=f(O,i(T.line,N+(ne>0?1:0)),ne,$,F);return te==null?null:{from:i(T.line,N),to:te&&te.pos,match:te&&te.ch==oe.charAt(0),forward:ne>0}}function f(O,T,F,j,N){for(var q=N&&N.maxScanLineLength||1e4,H=N&&N.maxScanLines||1e3,oe=[],ne=a(N),$=F>0?Math.min(T.line+H,O.lastLine()+1):Math.max(O.firstLine()-1,T.line-H),te=T.line;te!=$;te+=F){var G=O.getLine(te);if(G){var ie=F>0?0:G.length-1,he=F>0?G.length:-1;if(!(G.length>q))for(te==T.line&&(ie=T.ch-(F<0?1:0));ie!=he;ie+=F){var pe=G.charAt(ie);if(ne.test(pe)&&(j===void 0||(O.getTokenTypeAt(i(te,ie+1))||"")==(j||""))){var Ee=s[pe];if(Ee&&Ee.charAt(1)==">"==F>0)oe.push(pe);else if(oe.length)oe.pop();else return{pos:i(te,ie),ch:pe}}}}}return te-F==(F>0?O.lastLine():O.firstLine())?!1:null}function y(O,T,F){for(var j=O.state.matchBrackets.maxHighlightLineLength||1e3,N=F&&F.highlightNonMatching,q=[],H=O.listSelections(),oe=0;oe<H.length;oe++){var ne=H[oe].empty()&&o(O,H[oe].head,F);if(ne&&(ne.match||N!==!1)&&O.getLine(ne.from.line).length<=j){var $=ne.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";q.push(O.markText(ne.from,i(ne.from.line,ne.from.ch+1),{className:$})),ne.to&&O.getLine(ne.to.line).length<=j&&q.push(O.markText(ne.to,i(ne.to.line,ne.to.ch+1),{className:$}))}}if(q.length){r&&O.state.focused&&O.focus();var te=function(){O.operation(function(){for(var G=0;G<q.length;G++)q[G].clear()})};if(T)setTimeout(te,800);else return te}}function x(O){O.operation(function(){O.state.matchBrackets.currentlyHighlighted&&(O.state.matchBrackets.currentlyHighlighted(),O.state.matchBrackets.currentlyHighlighted=null),O.state.matchBrackets.currentlyHighlighted=y(O,!1,O.state.matchBrackets)})}function B(O){O.state.matchBrackets&&O.state.matchBrackets.currentlyHighlighted&&(O.state.matchBrackets.currentlyHighlighted(),O.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(O,T,F){F&&F!=t.Init&&(O.off("cursorActivity",x),O.off("focus",x),O.off("blur",B),B(O)),T&&(O.state.matchBrackets=typeof T=="object"?T:{},O.on("cursorActivity",x),O.on("focus",x),O.on("blur",B))}),t.defineExtension("matchBrackets",function(){y(this,!0)}),t.defineExtension("findMatchingBracket",function(O,T,F){return(F||typeof T=="boolean")&&(F?(F.strict=T,T=F):T=T?{strict:!0}:null),o(this,O,T)}),t.defineExtension("scanForBracket",function(O,T,F,j){return f(this,O,T,F,j)})})}()),IT.exports}Bue();const Oue=/("(?:[^\\"]|\\.)*")|[:,]/g;function mW(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,f){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const y=JSON.stringify(a,i);if(y===void 0)return y;const x=r-o.length-f;if(y.length<=x){const B=y.replace(Oue,(O,T)=>T||`${O} `);if(B.length<=x)return B}if(i!=null&&(a=JSON.parse(y),i=void 0),typeof a=="object"&&a!==null){const B=o+t,O=[];let T=0,F,j;if(Array.isArray(a)){F="[",j="]";const{length:N}=a;for(;T<N;T++)O.push(s(a[T],B,T===N-1?0:1)||"null")}else{F="{",j="}";const N=Object.keys(a),{length:q}=N;for(;T<q;T++){const H=N[T],oe=`${JSON.stringify(H)}: `,ne=s(a[H],B,oe.length+(T===q-1?0:1));ne!==void 0&&O.push(oe+ne)}}if(O.length>0)return[F,t+O.join(`,
${B}`),j].join(`
${o}`)}return y}(n,"",0)}var rC={exports:{}},Iue=rC.exports,TT;function kue(){return TT||(TT=1,function(n,e){(function(t,r){r(e)})(Iue,function(t){const r={isWhiteSpace:function(Me){return Me===" "||Me===" "||Me==="\uFEFF"||Me>="	"&&Me<="\r"||Me===" "||Me>=" "&&Me<=" "||Me==="\u2028"||Me==="\u2029"||Me===" "||Me===" "||Me==="　"},isWhiteSpaceJSON:function(Me){return Me===" "||Me==="	"||Me===`
`||Me==="\r"},isLineTerminator:function(Me){return Me===`
`||Me==="\r"||Me==="\u2028"||Me==="\u2029"},isLineTerminatorJSON:function(Me){return Me===`
`||Me==="\r"},isIdentifierStart:function(Me){return Me==="$"||Me==="_"||Me>="A"&&Me<="Z"||Me>="a"&&Me<="z"||Me>=""&&r.NonAsciiIdentifierStart.test(Me)},isIdentifierPart:function(Me){return Me==="$"||Me==="_"||Me>="A"&&Me<="Z"||Me>="a"&&Me<="z"||Me>="0"&&Me<="9"||Me>=""&&r.NonAsciiIdentifierPart.test(Me)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(We){return We>="0"&&We<="9"||We>="A"&&We<="F"||We>="a"&&We<="f"}function s(We){return We>="0"&&We<="7"}function a(We){return We>="0"&&We<="9"}function o(We){return We.charCodeAt(0)===65279}const f={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},y=Object.hasOwn,x={};function B(We,Me){(typeof We!="string"||!(We instanceof String))&&(We=String(We));const Fe=Me.mode==="json5",He=Me.ignoreBOM,bt=Me.ignoreComments||Me.mode==="cjson"||Fe,Yt=Me.ignoreTrailingCommas||Fe,gt=Me.ignoreProtoKey,Lt=Me.ignorePrototypeKeys,Kt=Me.allowSingleQuotedStrings||Fe,Ue=Me.allowDuplicateObjectKeys,Pe=Me.reviver,Be=Me.tokenize,it=Me.rawTokens,_t=Me.tokenLocations,ft=Me.tokenPaths,Ut=Fe?r.isLineTerminator:r.isLineTerminatorJSON,rn=Fe?r.isWhiteSpace:r.isWhiteSpaceJSON,Dt=We.length;let _n=0,qn=0,tn=0;const rr=[];let Dn,pn,Zn;if(Be){let Ye=null,rt,ct;Dn=function(){if(Ye!==null)throw Error("internal error, token overlap");rt=_n+1,ct=tn-qn+1,Ye=tn},pn=function(dt,qt){if(Ye!==tn){const Gt={type:dt};it&&(Gt.raw=We.substr(Ye,tn-Ye)),qt!==void 0&&(Gt.value=qt),_t&&(Gt.location={start:{column:ct,line:rt,offset:Ye}}),ft&&(Gt.path=Zn.slice()),rr.push(Gt)}return Ye=null,qt},ft&&(Zn=[])}function dr(){let Ye;return tn<Dt?Ye=`Unexpected token ${JSON.stringify(We[tn])}`:Ye="Unexpected end of input",Ye}function vr(Ye){const rt=tn-qn+1;++_n;const ct=Ee(Ye,We,tn,_n,rt),dt=SyntaxError(ct.message);return dt.reason=Ye,dt.excerpt=ct.excerpt,dt.pointer=ct.pointer,dt.location={start:{column:rt,line:_n,offset:tn}},dt}function Jn(Ye){throw Ye||(Ye=dr()),vr(Ye)}function Qe(Ye){Ye==="\r"&&We[tn]===`
`&&++tn,qn=tn,++_n}function ce(){if(tn<Dt){Dn==null||Dn();const Ye=We[tn++];if(Ye==='"'||Ye==="'"&&Kt){const rt=p(Ye);return pn==null||pn("literal",rt),rt}if(Ye==="{")return pn==null||pn("symbol","{"),tr();if(Ye==="[")return pn==null||pn("symbol","["),Oe();if(Ye==="-"||Ye==="."||a(Ye)||Fe&&(Ye==="+"||Ye==="I"||Ye==="N")){const rt=se();return pn==null||pn("literal",rt),rt}if(Ye==="n")return sn("null"),pn==null||pn("literal",null),null;if(Ye==="t")return sn("true"),pn==null||pn("literal",!0),!0;if(Ye==="f")return sn("false"),pn==null||pn("literal",!1),!1;--tn,pn==null||pn();return}}function fe(){let Ye;if(tn<Dt){Dn==null||Dn();const rt=We[tn++];if(rt==='"'||rt==="'"&&Kt){const ct=p(rt);return pn==null||pn("literal",ct),ct}if(rt==="{")return pn==null||pn("symbol","{"),tr();if(rt==="[")return pn==null||pn("symbol","["),Oe();if(rt==="."||a(rt)){const ct=se();return pn==null||pn("literal",ct),ct}if(Fe&&r.isIdentifierStart(rt)||rt==="\\"&&We[tn]==="u"){const ct=tn-1;if(Ye=ve(),Ye===void 0){tn=ct,pn==null||pn();return}return pn==null||pn("literal",Ye),Ye}--tn,pn==null||pn();return}}function nt(){o(We)&&(Dn==null||Dn(),++tn,pn==null||pn("bom"))}function St(){let Ye;function rt(){Ye||(Ye=!0,--tn,Dn(),++tn)}function ct(){Ye&&(Ye=!1,pn("whitespace"))}for(;tn<Dt;){const dt=We[tn++];if(Ut(dt))Dn&&rt(),Qe(dt);else if(rn(dt))Dn&&rt();else if(dt==="/"&&bt&&(We[tn]==="/"||We[tn]==="*"))Dn&&(--tn,ct(),Dn(),++tn),Ht(We[tn++]==="*"),pn==null||pn("comment");else{--tn;break}}pn&&ct()}function Ht(Ye){for(;tn<Dt;){const rt=We[tn++];if(Ut(rt)){if(!Ye){--tn;return}Qe(rt)}else if(rt==="*"&&Ye&&We[tn]==="/"){++tn;return}}Ye&&Jn("Unclosed multiline comment")}function sn(Ye){const rt=tn;for(let ct=1,dt=Ye.length;ct<dt;++ct)(tn>=Dt||Ye[ct]!==We[tn])&&(tn=rt-1,Jn()),++tn}function tr(){let Ye={},rt=!1;for(;tn<Dt;){St();const ct=fe();Ue===!1&&y(Ye,ct)&&Jn(`Duplicate key: "${ct}"`),St(),Dn==null||Dn();let dt=We[tn++];if(pn==null||pn("symbol",dt),dt==="}"&&ct===void 0)return!Yt&&rt&&(--tn,Jn("Trailing comma in object")),Ye;if(dt===":"&&ct!==void 0){St(),Zn==null||Zn.push(ct);let qt=ce();if(Zn==null||Zn.pop(),qt===void 0&&Jn(`No value found for key "${ct}"`),typeof ct!="string"&&(!Fe||typeof ct!="number")&&Jn(`Wrong key type: "${ct}"`),Lt&&(ct in x||x[ct]!=null)||gt&&ct==="__proto__"||(Pe&&(qt=Pe(ct,qt)),qt!==void 0&&(rt=!0,ct==="__proto__"?Ye=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(qt)}}`),Ye):Ye[ct]=qt)),St(),Dn==null||Dn(),dt=We[tn++],pn==null||pn("symbol",dt),dt!==","){if(dt==="}")return Ye;Jn()}}else--tn,Jn()}Jn()}function Oe(){const Ye=[];for(;tn<Dt;){St(),Zn==null||Zn.push(Ye.length);let rt=ce();Zn==null||Zn.pop(),St(),Dn==null||Dn();const ct=We[tn++];if(pn==null||pn("symbol",ct),rt!==void 0&&(Pe&&(rt=Pe(String(Ye.length),rt)),rt===void 0?(++Ye.length,rt=!0):Ye.push(rt)),ct===",")rt===void 0&&Jn("Elisions are not supported");else{if(ct==="]")return!Yt&&rt===void 0&&Ye.length&&(--tn,Jn("Trailing comma in array")),Ye;--tn,Jn()}}}function se(){--tn;let Ye=tn,rt=We[tn++];const ct=function(dt){const qt=We.substr(Ye,tn-Ye);let Gt;if(dt?Gt=Number.parseInt(qt.replace(/^0o?/,""),8):Gt=Number(qt),Number.isNaN(Gt))--tn,Jn(`Bad numeric literal - "${We.substr(Ye,tn-Ye+1)}"`);else if(!Fe&&!qt.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--tn,Jn(`Non-json numeric literal - "${We.substr(Ye,tn-Ye+1)}"`);else return Gt};if((rt==="-"||rt==="+"&&Fe)&&(rt=We[tn++]),rt==="N"&&Fe)return sn("NaN"),Number.NaN;if(rt==="I"&&Fe)return sn("Infinity"),ct();if(rt>="1"&&rt<="9"){for(;tn<Dt&&a(We[tn]);)++tn;rt=We[tn++]}if(rt==="0"){rt=We[tn++];const dt=rt==="o"||rt==="O"||s(rt),qt=rt==="x"||rt==="X";if(Fe&&(dt||qt)){for(;tn<Dt&&(qt?i:s)(We[tn]);)++tn;let Gt=1;return We[Ye]==="-"?(Gt=-1,++Ye):We[Ye]==="+"&&++Ye,Gt*ct(dt)}}if(rt==="."){for(;tn<Dt&&a(We[tn]);)++tn;rt=We[tn++]}if(rt==="e"||rt==="E"){for(rt=We[tn++],(rt==="-"||rt==="+")&&++tn;tn<Dt&&a(We[tn]);)++tn;rt=We[tn++]}return--tn,ct()}function ve(){--tn;let Ye="";for(;tn<Dt;){let rt=We[tn++];if(rt==="\\"&&We[tn]==="u"&&i(We[tn+1])&&i(We[tn+2])&&i(We[tn+3])&&i(We[tn+4])&&(rt=String.fromCharCode(Number.parseInt(We.substr(tn+1,4),16)),tn+=5),Ye.length)if(r.isIdentifierPart(rt))Ye+=rt;else return--tn,Ye;else if(r.isIdentifierStart(rt))Ye+=rt;else return}Jn()}function p(Ye){let rt="";for(;tn<Dt;){let ct=We[tn++];if(ct===Ye)return rt;if(ct==="\\")if(tn>=Dt&&Jn(),ct=We[tn++],f[ct]&&(Fe||ct!=="v"&&(ct!=="'"||Kt)))rt+=f[ct];else if(Fe&&Ut(ct))Qe(ct);else if(ct==="u"||ct==="x"&&Fe){const dt=ct==="u"?4:2;for(let qt=0;qt<dt;++qt)tn>=Dt&&Jn(),i(We[tn])||Jn("Bad escape sequence"),tn++;rt+=String.fromCharCode(Number.parseInt(We.substr(tn-dt,dt),16))}else if(Fe&&s(ct)){let dt;ct<"4"&&s(We[tn])&&s(We[tn+1])?dt=3:s(We[tn])?dt=2:dt=1,tn+=dt-1,rt+=String.fromCharCode(Number.parseInt(We.substr(tn-dt,dt),8))}else Fe?rt+=ct:(--tn,Jn());else Ut(ct)?Jn():(!Fe&&ct.charCodeAt(0)<32&&(--tn,Jn("Unexpected control character")),rt+=ct)}Jn()}He&&nt(),St();let Ne=ce();if(Ne!==void 0||tn<Dt){if(St(),tn>=Dt)return Pe&&(Ne=Pe("",Ne)),Be?rr:Ne;Jn()}else Jn(tn?"No data, only a whitespace":"No data, empty input")}function O(We,Me){return typeof Me=="function"?Me={reviver:Me}:Me||(Me={}),B(We,Me)}function T(We,Me){Me||(Me={});const Fe=Me.tokenize;Me.tokenize=!0;const He=B(We,Me);return Me.tokenize=Fe,He}function F(We){return We.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function j(We){return We.length===0?"":`/${We.map(F).join("/")}`}function N(We){return We.replace(/~1/g,"/").replace(/~0/g,"~")}function q(We){if(We==="")return[];if(We[0]!=="/")throw new Error('Missing initial "/" in the reference');return We.substr(1).split("/").map(N)}function H(We,Me){const Fe=We.substr(0,Me).split(/\r?\n/),He=Fe.length,bt=Fe[He-1].length+1;return{line:He,column:bt}}function oe(We,Me,Fe){if(Me>1){const He=/\r?\n/g;let bt;for(;bt=He.exec(We);)if(--Me===1)return bt.index+Fe}return Fe-1}function ne(We,Me){const Fe=Math.max(0,Me-20),He=We.substr(Fe,Me-Fe);return(Me>20?"...":"")+He.replace(/\r?\n/g,"")}function $(We,Me){let Fe=Math.max(0,Me-20);Fe+=Me-Fe;const He=We.length-Fe;return We.substr(Fe,Math.min(20,He)).replace(/\r?\n/g,"")+(He>20?"...":"")}function te(We,Me){const Fe=ne(We,Me),He=$(We,Me),bt=`${new Array(Fe.length+1).join("-")}^`;return{excerpt:Fe+He,pointer:bt}}function G(We){let Me=We.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Fe=Me.charAt(0);return Fe>="a"&&(Me=Fe.toUpperCase()+Me.substr(1)),Me}function ie(We,Me){const Fe=/ in JSON at position (\d+)$/.exec(Me);if(Fe){const He=+Fe[1],bt=H(We,He);return{offset:He,line:bt.line,column:bt.column,reason:Me.substr(0,Fe.index)}}}function he(We,Me){const Fe=/ end of JSON input$/.exec(Me);if(Fe){const He=We.length,bt=H(We,He);return{offset:He,line:bt.line,column:bt.column,reason:Me.substr(0,Fe.index+4)}}}function pe(We,Me){const Fe=/ at line (\d+) column (\d+) of the JSON data$/.exec(Me);if(Fe){const He=+Fe[1],bt=+Fe[2];return{offset:oe(We,He,bt),line:He,column:bt,reason:Me.substr(0,Fe.index)}}}function Ee(We,Me,Fe,He,bt){const Yt=te(Me,Fe),gt=Yt.excerpt;let Lt,Kt;return typeof He=="number"?(Kt=Yt.pointer,Lt=`Parse error on line ${He}, column ${bt}:
${gt}
${Kt}
${We}`):Lt=`Parse error in JSON input:
${gt}
${We}`,{message:Lt,excerpt:gt,pointer:Kt}}function me(We,Me){let Fe=G(Me);const He=ie(We,Fe)||he(We,Fe)||pe(We,Fe);let bt,Yt,gt;He?(bt=He.offset,Yt=He.line,gt=He.column,Fe=He.reason):bt=0,Me.reason=Fe;const Lt=Ee(Fe,We,bt,Yt,gt);return Me.message=Lt.message,Me.excerpt=Lt.excerpt,Lt.pointer&&(Me.pointer=Lt.pointer,Me.location={start:{column:gt,line:Yt,offset:bt}}),Me}function Se(We,Me){try{return JSON.parse(We,Me)}catch(Fe){const He=me(We,Fe);if(Fe.location)throw He;return O(We,Me)}}const De=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),be=typeof process<"u"&&process.version.startsWith("v4.");function at(We){return We.ignoreBOM||We.ignoreComments||We.ignoreTrailingCommas||We.allowSingleQuotedStrings||We.allowDuplicateObjectKeys===!1||We.ignoreProtoKey||We.ignorePrototypeKeys||We.mode==="cjson"||We.mode==="json5"||De||be}function Ze(We){if(typeof We=="function")return We;if(We)return We.reviver}function Je(We,Me){return Me||(Me={}),at(Me)?O(We,Me):Se(We,Ze(Me))}t.parse=Je,t.tokenize=T,t.pathToPointer=j,t.pointerToPath=q,t.parseNative=Se,t.parseCustom=O,t.getErrorTexts=Ee,Object.defineProperty(t,"__esModule",{value:!0})})}(rC,rC.exports)),rC.exports}var Tue=kue(),c2={exports:{}},Pue=c2.exports,PT;function Kue(){return PT||(PT=1,function(n,e){(function(t,r){n.exports=r()})(Pue,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Pe,Be){return Be={exports:{}},Pe(Be,Be.exports),Be.exports}var i=r(function(Pe){function Be(){var it=0,_t=1,ft=2,Ut=3,rn=4,Dt=5,_n=6,qn=7,tn=8,rr=9,Dn=10,pn=11,Zn=12,dr=13,vr=14,Jn=15,Qe=16,ce=17,fe=0,nt=1,St=2,Ht=3,sn=4;function tr(p,Ne){return 55296<=p.charCodeAt(Ne)&&p.charCodeAt(Ne)<=56319&&56320<=p.charCodeAt(Ne+1)&&p.charCodeAt(Ne+1)<=57343}function Oe(p,Ne){Ne===void 0&&(Ne=0);var Ye=p.charCodeAt(Ne);if(55296<=Ye&&Ye<=56319&&Ne<p.length-1){var rt=Ye,ct=p.charCodeAt(Ne+1);return 56320<=ct&&ct<=57343?(rt-55296)*1024+(ct-56320)+65536:rt}if(56320<=Ye&&Ye<=57343&&Ne>=1){var rt=p.charCodeAt(Ne-1),ct=Ye;return 55296<=rt&&rt<=56319?(rt-55296)*1024+(ct-56320)+65536:ct}return Ye}function se(p,Ne,Ye){var rt=[p].concat(Ne).concat([Ye]),ct=rt[rt.length-2],dt=Ye,qt=rt.lastIndexOf(vr);if(qt>1&&rt.slice(1,qt).every(function(xt){return xt==Ut})&&[Ut,dr,ce].indexOf(p)==-1)return St;var Gt=rt.lastIndexOf(rn);if(Gt>0&&rt.slice(1,Gt).every(function(xt){return xt==rn})&&[Zn,rn].indexOf(ct)==-1)return rt.filter(function(xt){return xt==rn}).length%2==1?Ht:sn;if(ct==it&&dt==_t)return fe;if(ct==ft||ct==it||ct==_t)return dt==vr&&Ne.every(function(xt){return xt==Ut})?St:nt;if(dt==ft||dt==it||dt==_t)return nt;if(ct==_n&&(dt==_n||dt==qn||dt==rr||dt==Dn))return fe;if((ct==rr||ct==qn)&&(dt==qn||dt==tn))return fe;if((ct==Dn||ct==tn)&&dt==tn)return fe;if(dt==Ut||dt==Jn)return fe;if(dt==Dt)return fe;if(ct==Zn)return fe;var jt=rt.indexOf(Ut)!=-1?rt.lastIndexOf(Ut)-1:rt.length-2;return[dr,ce].indexOf(rt[jt])!=-1&&rt.slice(jt+1,-1).every(function(xt){return xt==Ut})&&dt==vr||ct==Jn&&[Qe,ce].indexOf(dt)!=-1?fe:Ne.indexOf(rn)!=-1?St:ct==rn&&dt==rn?fe:nt}this.nextBreak=function(p,Ne){if(Ne===void 0&&(Ne=0),Ne<0)return 0;if(Ne>=p.length-1)return p.length;for(var Ye=ve(Oe(p,Ne)),rt=[],ct=Ne+1;ct<p.length;ct++)if(!tr(p,ct-1)){var dt=ve(Oe(p,ct));if(se(Ye,rt,dt))return ct;rt.push(dt)}return p.length},this.splitGraphemes=function(p){for(var Ne=[],Ye=0,rt;(rt=this.nextBreak(p,Ye))<p.length;)Ne.push(p.slice(Ye,rt)),Ye=rt;return Ye<p.length&&Ne.push(p.slice(Ye)),Ne},this.iterateGraphemes=function(p){var Ne=0,Ye={next:(function(){var rt,ct;return(ct=this.nextBreak(p,Ne))<p.length?(rt=p.slice(Ne,ct),Ne=ct,{value:rt,done:!1}):Ne<p.length?(rt=p.slice(Ne),Ne=p.length,{value:rt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(Ye[Symbol.iterator]=function(){return Ye}),Ye},this.countGraphemes=function(p){for(var Ne=0,Ye=0,rt;(rt=this.nextBreak(p,Ye))<p.length;)Ye=rt,Ne++;return Ye<p.length&&Ne++,Ne};function ve(p){return 1536<=p&&p<=1541||p==1757||p==1807||p==2274||p==3406||p==69821||70082<=p&&p<=70083||p==72250||72326<=p&&p<=72329||p==73030?Zn:p==13?it:p==10?_t:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||p==173||p==1564||p==6158||p==8203||8206<=p&&p<=8207||p==8232||p==8233||8234<=p&&p<=8238||8288<=p&&p<=8292||p==8293||8294<=p&&p<=8303||55296<=p&&p<=57343||p==65279||65520<=p&&p<=65528||65529<=p&&p<=65531||113824<=p&&p<=113827||119155<=p&&p<=119162||p==917504||p==917505||917506<=p&&p<=917535||917632<=p&&p<=917759||918e3<=p&&p<=921599?ft:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||p==1471||1473<=p&&p<=1474||1476<=p&&p<=1477||p==1479||1552<=p&&p<=1562||1611<=p&&p<=1631||p==1648||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||p==1809||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2260<=p&&p<=2273||2275<=p&&p<=2306||p==2362||p==2364||2369<=p&&p<=2376||p==2381||2385<=p&&p<=2391||2402<=p&&p<=2403||p==2433||p==2492||p==2494||2497<=p&&p<=2500||p==2509||p==2519||2530<=p&&p<=2531||2561<=p&&p<=2562||p==2620||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||p==2641||2672<=p&&p<=2673||p==2677||2689<=p&&p<=2690||p==2748||2753<=p&&p<=2757||2759<=p&&p<=2760||p==2765||2786<=p&&p<=2787||2810<=p&&p<=2815||p==2817||p==2876||p==2878||p==2879||2881<=p&&p<=2884||p==2893||p==2902||p==2903||2914<=p&&p<=2915||p==2946||p==3006||p==3008||p==3021||p==3031||p==3072||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||p==3201||p==3260||p==3263||p==3266||p==3270||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3328<=p&&p<=3329||3387<=p&&p<=3388||p==3390||3393<=p&&p<=3396||p==3405||p==3415||3426<=p&&p<=3427||p==3530||p==3535||3538<=p&&p<=3540||p==3542||p==3551||p==3633||3636<=p&&p<=3642||3655<=p&&p<=3662||p==3761||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||p==3893||p==3895||p==3897||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||p==4038||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||p==4226||4229<=p&&p<=4230||p==4237||p==4253||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||p==6086||6089<=p&&p<=6099||p==6109||6155<=p&&p<=6157||6277<=p&&p<=6278||p==6313||6432<=p&&p<=6434||6439<=p&&p<=6440||p==6450||6457<=p&&p<=6459||6679<=p&&p<=6680||p==6683||p==6742||6744<=p&&p<=6750||p==6752||p==6754||6757<=p&&p<=6764||6771<=p&&p<=6780||p==6783||6832<=p&&p<=6845||p==6846||6912<=p&&p<=6915||p==6964||6966<=p&&p<=6970||p==6972||p==6978||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||p==7142||7144<=p&&p<=7145||p==7149||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||p==7405||p==7412||7416<=p&&p<=7417||7616<=p&&p<=7673||7675<=p&&p<=7679||p==8204||8400<=p&&p<=8412||8413<=p&&p<=8416||p==8417||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||p==11647||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||p==42607||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||p==43010||p==43014||p==43019||43045<=p&&p<=43046||43204<=p&&p<=43205||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||p==43443||43446<=p&&p<=43449||p==43452||p==43493||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||p==43587||p==43596||p==43644||p==43696||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||p==43713||43756<=p&&p<=43757||p==43766||p==44005||p==44008||p==44013||p==64286||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||p==66045||p==66272||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||p==68159||68325<=p&&p<=68326||p==69633||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||p==70003||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||p==70196||70198<=p&&p<=70199||p==70206||p==70367||70371<=p&&p<=70378||70400<=p&&p<=70401||p==70460||p==70462||p==70464||p==70487||70502<=p&&p<=70508||70512<=p&&p<=70516||70712<=p&&p<=70719||70722<=p&&p<=70724||p==70726||p==70832||70835<=p&&p<=70840||p==70842||p==70845||70847<=p&&p<=70848||70850<=p&&p<=70851||p==71087||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||p==71229||71231<=p&&p<=71232||p==71339||p==71341||71344<=p&&p<=71349||p==71351||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||72193<=p&&p<=72198||72201<=p&&p<=72202||72243<=p&&p<=72248||72251<=p&&p<=72254||p==72263||72273<=p&&p<=72278||72281<=p&&p<=72283||72330<=p&&p<=72342||72344<=p&&p<=72345||72752<=p&&p<=72758||72760<=p&&p<=72765||p==72767||72850<=p&&p<=72871||72874<=p&&p<=72880||72882<=p&&p<=72883||72885<=p&&p<=72886||73009<=p&&p<=73014||p==73018||73020<=p&&p<=73021||73023<=p&&p<=73029||p==73031||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||p==119141||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||p==121461||p==121476||121499<=p&&p<=121503||121505<=p&&p<=121519||122880<=p&&p<=122886||122888<=p&&p<=122904||122907<=p&&p<=122913||122915<=p&&p<=122916||122918<=p&&p<=122922||125136<=p&&p<=125142||125252<=p&&p<=125258||917536<=p&&p<=917631||917760<=p&&p<=917999?Ut:127462<=p&&p<=127487?rn:p==2307||p==2363||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||p==2563||2622<=p&&p<=2624||p==2691||2750<=p&&p<=2752||p==2761||2763<=p&&p<=2764||2818<=p&&p<=2819||p==2880||2887<=p&&p<=2888||2891<=p&&p<=2892||p==3007||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||p==3262||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||p==3635||p==3763||3902<=p&&p<=3903||p==3967||p==4145||4155<=p&&p<=4156||4182<=p&&p<=4183||p==4228||p==6070||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||p==6741||p==6743||6765<=p&&p<=6770||p==6916||p==6965||p==6971||6973<=p&&p<=6977||6979<=p&&p<=6980||p==7042||p==7073||7078<=p&&p<=7079||p==7082||p==7143||7146<=p&&p<=7148||p==7150||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||p==7393||7410<=p&&p<=7411||p==7415||43043<=p&&p<=43044||p==43047||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||p==43395||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||p==43597||p==43755||43758<=p&&p<=43759||p==43765||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||p==44012||p==69632||p==69634||p==69762||69808<=p&&p<=69810||69815<=p&&p<=69816||p==69932||p==70018||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||p==70197||70368<=p&&p<=70370||70402<=p&&p<=70403||p==70463||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70709<=p&&p<=70711||70720<=p&&p<=70721||p==70725||70833<=p&&p<=70834||p==70841||70843<=p&&p<=70844||p==70846||p==70849||71088<=p&&p<=71089||71096<=p&&p<=71099||p==71102||71216<=p&&p<=71218||71227<=p&&p<=71228||p==71230||p==71340||71342<=p&&p<=71343||p==71350||71456<=p&&p<=71457||p==71462||72199<=p&&p<=72200||p==72249||72279<=p&&p<=72280||p==72343||p==72751||p==72766||p==72873||p==72881||p==72884||94033<=p&&p<=94078||p==119142||p==119149?Dt:4352<=p&&p<=4447||43360<=p&&p<=43388?_n:4448<=p&&p<=4519||55216<=p&&p<=55238?qn:4520<=p&&p<=4607||55243<=p&&p<=55291?tn:p==44032||p==44060||p==44088||p==44116||p==44144||p==44172||p==44200||p==44228||p==44256||p==44284||p==44312||p==44340||p==44368||p==44396||p==44424||p==44452||p==44480||p==44508||p==44536||p==44564||p==44592||p==44620||p==44648||p==44676||p==44704||p==44732||p==44760||p==44788||p==44816||p==44844||p==44872||p==44900||p==44928||p==44956||p==44984||p==45012||p==45040||p==45068||p==45096||p==45124||p==45152||p==45180||p==45208||p==45236||p==45264||p==45292||p==45320||p==45348||p==45376||p==45404||p==45432||p==45460||p==45488||p==45516||p==45544||p==45572||p==45600||p==45628||p==45656||p==45684||p==45712||p==45740||p==45768||p==45796||p==45824||p==45852||p==45880||p==45908||p==45936||p==45964||p==45992||p==46020||p==46048||p==46076||p==46104||p==46132||p==46160||p==46188||p==46216||p==46244||p==46272||p==46300||p==46328||p==46356||p==46384||p==46412||p==46440||p==46468||p==46496||p==46524||p==46552||p==46580||p==46608||p==46636||p==46664||p==46692||p==46720||p==46748||p==46776||p==46804||p==46832||p==46860||p==46888||p==46916||p==46944||p==46972||p==47e3||p==47028||p==47056||p==47084||p==47112||p==47140||p==47168||p==47196||p==47224||p==47252||p==47280||p==47308||p==47336||p==47364||p==47392||p==47420||p==47448||p==47476||p==47504||p==47532||p==47560||p==47588||p==47616||p==47644||p==47672||p==47700||p==47728||p==47756||p==47784||p==47812||p==47840||p==47868||p==47896||p==47924||p==47952||p==47980||p==48008||p==48036||p==48064||p==48092||p==48120||p==48148||p==48176||p==48204||p==48232||p==48260||p==48288||p==48316||p==48344||p==48372||p==48400||p==48428||p==48456||p==48484||p==48512||p==48540||p==48568||p==48596||p==48624||p==48652||p==48680||p==48708||p==48736||p==48764||p==48792||p==48820||p==48848||p==48876||p==48904||p==48932||p==48960||p==48988||p==49016||p==49044||p==49072||p==49100||p==49128||p==49156||p==49184||p==49212||p==49240||p==49268||p==49296||p==49324||p==49352||p==49380||p==49408||p==49436||p==49464||p==49492||p==49520||p==49548||p==49576||p==49604||p==49632||p==49660||p==49688||p==49716||p==49744||p==49772||p==49800||p==49828||p==49856||p==49884||p==49912||p==49940||p==49968||p==49996||p==50024||p==50052||p==50080||p==50108||p==50136||p==50164||p==50192||p==50220||p==50248||p==50276||p==50304||p==50332||p==50360||p==50388||p==50416||p==50444||p==50472||p==50500||p==50528||p==50556||p==50584||p==50612||p==50640||p==50668||p==50696||p==50724||p==50752||p==50780||p==50808||p==50836||p==50864||p==50892||p==50920||p==50948||p==50976||p==51004||p==51032||p==51060||p==51088||p==51116||p==51144||p==51172||p==51200||p==51228||p==51256||p==51284||p==51312||p==51340||p==51368||p==51396||p==51424||p==51452||p==51480||p==51508||p==51536||p==51564||p==51592||p==51620||p==51648||p==51676||p==51704||p==51732||p==51760||p==51788||p==51816||p==51844||p==51872||p==51900||p==51928||p==51956||p==51984||p==52012||p==52040||p==52068||p==52096||p==52124||p==52152||p==52180||p==52208||p==52236||p==52264||p==52292||p==52320||p==52348||p==52376||p==52404||p==52432||p==52460||p==52488||p==52516||p==52544||p==52572||p==52600||p==52628||p==52656||p==52684||p==52712||p==52740||p==52768||p==52796||p==52824||p==52852||p==52880||p==52908||p==52936||p==52964||p==52992||p==53020||p==53048||p==53076||p==53104||p==53132||p==53160||p==53188||p==53216||p==53244||p==53272||p==53300||p==53328||p==53356||p==53384||p==53412||p==53440||p==53468||p==53496||p==53524||p==53552||p==53580||p==53608||p==53636||p==53664||p==53692||p==53720||p==53748||p==53776||p==53804||p==53832||p==53860||p==53888||p==53916||p==53944||p==53972||p==54e3||p==54028||p==54056||p==54084||p==54112||p==54140||p==54168||p==54196||p==54224||p==54252||p==54280||p==54308||p==54336||p==54364||p==54392||p==54420||p==54448||p==54476||p==54504||p==54532||p==54560||p==54588||p==54616||p==54644||p==54672||p==54700||p==54728||p==54756||p==54784||p==54812||p==54840||p==54868||p==54896||p==54924||p==54952||p==54980||p==55008||p==55036||p==55064||p==55092||p==55120||p==55148||p==55176?rr:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?Dn:p==9757||p==9977||9994<=p&&p<=9997||p==127877||127938<=p&&p<=127940||p==127943||127946<=p&&p<=127948||128066<=p&&p<=128067||128070<=p&&p<=128080||p==128110||128112<=p&&p<=128120||p==128124||128129<=p&&p<=128131||128133<=p&&p<=128135||p==128170||128372<=p&&p<=128373||p==128378||p==128400||128405<=p&&p<=128406||128581<=p&&p<=128583||128587<=p&&p<=128591||p==128675||128692<=p&&p<=128694||p==128704||p==128716||129304<=p&&p<=129308||129310<=p&&p<=129311||p==129318||129328<=p&&p<=129337||129341<=p&&p<=129342||129489<=p&&p<=129501?dr:127995<=p&&p<=127999?vr:p==8205?Jn:p==9792||p==9794||9877<=p&&p<=9878||p==9992||p==10084||p==127752||p==127806||p==127859||p==127891||p==127908||p==127912||p==127979||p==127981||p==128139||128187<=p&&p<=128188||p==128295||p==128300||p==128488||p==128640||p==128658?Qe:128102<=p&&p<=128105?ce:pn}return this}Pe.exports&&(Pe.exports=Be)}),s=new i,a=function(Be,it,_t){for(var ft=s.iterateGraphemes(Be.substring(it)),Ut="",rn=0;rn<_t-it;rn++){var Dt=ft.next();if(Ut+=Dt.value,Dt.done)break}return Ut},o=function(Pe,Be,it,_t,ft,Ut,rn){return{start:{line:Pe,column:Be,offset:it},end:{line:_t,column:ft,offset:Ut},source:rn||null}},f=r(function(Pe,Be){(function(it,_t){Pe.exports=_t()})(t,function(){var it="",_t,ft=Ut;function Ut(Dn,pn){if(typeof Dn!="string")throw new TypeError("expected a string");if(pn===1)return Dn;if(pn===2)return Dn+Dn;var Zn=Dn.length*pn;if(_t!==Dn||typeof _t>"u")_t=Dn,it="";else if(it.length>=Zn)return it.substr(0,Zn);for(;Zn>it.length&&pn>1;)pn&1&&(it+=Dn),pn>>=1,Dn+=Dn;return it+=Dn,it=it.substr(0,Zn),it}var rn=function(pn,Zn,dr){if(pn==null||Zn==null)return pn;var vr=String(pn),Jn=typeof Zn=="number"?Zn:parseInt(Zn,10);if(isNaN(Jn)||!isFinite(Jn))return vr;var Qe=vr.length;if(Qe>=Jn)return vr;var ce=String(dr);ce===""&&(ce=" ");for(var fe=Jn-Qe;ce.length<fe;)ce+=ce;var nt=ce.length>fe?ce.substr(0,fe):ce;return nt+vr},Dt=Object.assign||function(Dn){for(var pn=1;pn<arguments.length;pn++){var Zn=arguments[pn];for(var dr in Zn)Object.prototype.hasOwnProperty.call(Zn,dr)&&(Dn[dr]=Zn[dr])}return Dn};function _n(Dn,pn,Zn,dr){var vr=String(pn),Jn=rn(vr,Zn," "),Qe=ft(" ",dr.tabSize);return Jn+" | "+Dn.replace(/\t/g,Qe)}function qn(Dn,pn,Zn,dr,vr){return Dn.slice(pn,Zn).map(function(Jn,Qe){return _n(Jn,pn+Qe+1,dr,vr)}).join(`
`)}var tn={extraLines:2,tabSize:4},rr=function(pn,Zn,dr,vr){vr=Dt({},tn,vr);var Jn=pn.split(/\r\n?|\n|\f/),Qe=Math.max(1,Zn-vr.extraLines)-1,ce=Math.min(Zn+vr.extraLines,Jn.length),fe=String(ce).length,nt=qn(Jn,Qe,Zn,fe,vr),St=_n(Jn[Zn-1].substring(0,dr-1),Zn,fe,vr),Ht=ft(" ",St.length)+"^",sn=qn(Jn,Zn,ce,fe,vr);return[nt,Ht,sn].filter(Boolean).join(`
`)};return rr})}),y=new Error().stack,x=function(Pe){var Be=Object.create(SyntaxError.prototype);return Object.assign(Be,Pe,{name:"SyntaxError"}),Object.defineProperty(Be,"stack",{get:function(){return y?y.replace(/^(.+\n){1,3}/,String(Be)+`
`):""}}),Be},B=function(Pe,Be,it,_t,ft){throw x({message:_t?Pe+`
`+f(Be,_t,ft):Pe,rawMessage:Pe,source:it,line:_t,column:ft})},O={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Be){for(var it=arguments.length,_t=Array(it>1?it-1:0),ft=1;ft<it;ft++)_t[ft-1]=arguments[ft];return"Unexpected token <"+Be+"> at "+_t.filter(Boolean).join(":")}},T={unexpectedSymbol:function(Be){for(var it=arguments.length,_t=Array(it>1?it-1:0),ft=1;ft<it;ft++)_t[ft-1]=arguments[ft];return"Unexpected symbol <"+Be+"> at "+_t.filter(Boolean).join(":")}},F={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},j={"{":F.LEFT_BRACE,"}":F.RIGHT_BRACE,"[":F.LEFT_BRACKET,"]":F.RIGHT_BRACKET,":":F.COLON,",":F.COMMA},N={true:F.TRUE,false:F.FALSE,null:F.NULL},q={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},H={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},oe={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function ne(Pe){return Pe>="1"&&Pe<="9"}function $(Pe){return Pe>="0"&&Pe<="9"}function te(Pe){return $(Pe)||Pe>="a"&&Pe<="f"||Pe>="A"&&Pe<="F"}function G(Pe){return Pe==="e"||Pe==="E"}function ie(Pe,Be,it,_t){var ft=Pe.charAt(Be);if(ft==="\r")Be++,it++,_t=1,Pe.charAt(Be)===`
`&&Be++;else if(ft===`
`)Be++,it++,_t=1;else if(ft==="	"||ft===" ")Be++,_t++;else return null;return{index:Be,line:it,column:_t}}function he(Pe,Be,it,_t){var ft=Pe.charAt(Be);return ft in j?{type:j[ft],line:it,column:_t+1,index:Be+1,value:null}:null}function pe(Pe,Be,it,_t){for(var ft in N)if(N.hasOwnProperty(ft)&&Pe.substr(Be,ft.length)===ft)return{type:N[ft],line:it,column:_t+ft.length,index:Be+ft.length,value:ft};return null}function Ee(Pe,Be,it,_t){for(var ft=Be,Ut=q._START_;Be<Pe.length;){var rn=Pe.charAt(Be);switch(Ut){case q._START_:{if(rn==='"')Be++,Ut=q.START_QUOTE_OR_CHAR;else return null;break}case q.START_QUOTE_OR_CHAR:{if(rn==="\\")Be++,Ut=q.ESCAPE;else{if(rn==='"')return Be++,{type:F.STRING,line:it,column:_t+Be-ft,index:Be,value:Pe.slice(ft,Be)};Be++}break}case q.ESCAPE:{if(rn in H){if(Be++,rn==="u")for(var Dt=0;Dt<4;Dt++){var _n=Pe.charAt(Be);if(_n&&te(_n))Be++;else return null}Ut=q.START_QUOTE_OR_CHAR}else return null;break}}}}function me(Pe,Be,it,_t){var ft=Be,Ut=Be,rn=oe._START_;e:for(;Be<Pe.length;){var Dt=Pe.charAt(Be);switch(rn){case oe._START_:{if(Dt==="-")rn=oe.MINUS;else if(Dt==="0")Ut=Be+1,rn=oe.ZERO;else if(ne(Dt))Ut=Be+1,rn=oe.DIGIT;else return null;break}case oe.MINUS:{if(Dt==="0")Ut=Be+1,rn=oe.ZERO;else if(ne(Dt))Ut=Be+1,rn=oe.DIGIT;else return null;break}case oe.ZERO:{if(Dt===".")rn=oe.POINT;else if(G(Dt))rn=oe.EXP;else break e;break}case oe.DIGIT:{if($(Dt))Ut=Be+1;else if(Dt===".")rn=oe.POINT;else if(G(Dt))rn=oe.EXP;else break e;break}case oe.POINT:{if($(Dt))Ut=Be+1,rn=oe.DIGIT_FRACTION;else break e;break}case oe.DIGIT_FRACTION:{if($(Dt))Ut=Be+1;else if(G(Dt))rn=oe.EXP;else break e;break}case oe.EXP:{if(Dt==="+"||Dt==="-")rn=oe.EXP_DIGIT_OR_SIGN;else if($(Dt))Ut=Be+1,rn=oe.EXP_DIGIT_OR_SIGN;else break e;break}case oe.EXP_DIGIT_OR_SIGN:{if($(Dt))Ut=Be+1;else break e;break}}Be++}return Ut>0?{type:F.NUMBER,line:it,column:_t+Ut-ft,index:Ut,value:Pe.slice(ft,Ut)}:null}var Se=function(Be,it){for(var _t=1,ft=1,Ut=0,rn=[];Ut<Be.length;){var Dt=[Be,Ut,_t,ft],_n=ie.apply(void 0,Dt);if(_n){Ut=_n.index,_t=_n.line,ft=_n.column;continue}var qn=he.apply(void 0,Dt)||pe.apply(void 0,Dt)||Ee.apply(void 0,Dt)||me.apply(void 0,Dt);if(qn){var tn={type:qn.type,value:qn.value,loc:o(_t,ft,Ut,qn.line,qn.column,qn.index,it.source)};rn.push(tn),Ut=qn.index,_t=qn.line,ft=qn.column}else B(T.unexpectedSymbol(a(Be,Ut,Ut+1),it.source,_t,ft),Be,it.source,_t,ft)}return rn},De={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},be={_START_:0,KEY:1,COLON:2},at={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ze={loc:!0,source:null};function Je(Pe,Be,it){var _t=Be.length>0?Be[Be.length-1].loc.end:{line:1,column:1};B(O.unexpectedEnd(),Pe,it.source,_t.line,_t.column)}function We(Pe){for(var Be=0,it=0;it<4;it++)Be=Be*16+parseInt(Pe[it],16);return String.fromCharCode(Be)}var Me={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Fe=['"',"\\","/"];function He(Pe){for(var Be="",it=0;it<Pe.length;it++){var _t=Pe.charAt(it);if(_t==="\\"){it++;var ft=Pe.charAt(it);if(ft==="u")Be+=We(Pe.substr(it+1,4)),it+=4;else if(Fe.indexOf(ft)!==-1)Be+=ft;else if(ft in Me)Be+=Me[ft];else break}else Be+=_t}return Be}function bt(Pe,Be,it,_t){for(var ft=void 0,Ut={type:"Object",children:[]},rn=De._START_;it<Be.length;){var Dt=Be[it];switch(rn){case De._START_:{if(Dt.type===F.LEFT_BRACE)ft=Dt,rn=De.OPEN_OBJECT,it++;else return null;break}case De.OPEN_OBJECT:{if(Dt.type===F.RIGHT_BRACE)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};var _n=Yt(Pe,Be,it,_t);Ut.children.push(_n.value),rn=De.PROPERTY,it=_n.index;break}case De.PROPERTY:{if(Dt.type===F.RIGHT_BRACE)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};Dt.type===F.COMMA?(rn=De.COMMA,it++):B(O.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}case De.COMMA:{var qn=Yt(Pe,Be,it,_t);qn?(it=qn.index,Ut.children.push(qn.value),rn=De.PROPERTY):B(O.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}}}Je(Pe,Be,_t)}function Yt(Pe,Be,it,_t){for(var ft=void 0,Ut={type:"Property",key:null,value:null},rn=be._START_;it<Be.length;){var Dt=Be[it];switch(rn){case be._START_:{if(Dt.type===F.STRING){var _n={type:"Identifier",value:He(Pe.slice(Dt.loc.start.offset+1,Dt.loc.end.offset-1)),raw:Dt.value};_t.loc&&(_n.loc=Dt.loc),ft=Dt,Ut.key=_n,rn=be.KEY,it++}else return null;break}case be.KEY:{Dt.type===F.COLON?(rn=be.COLON,it++):B(O.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}case be.COLON:{var qn=Kt(Pe,Be,it,_t);return Ut.value=qn.value,_t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,qn.value.loc.end.line,qn.value.loc.end.column,qn.value.loc.end.offset,_t.source)),{value:Ut,index:qn.index}}}}}function gt(Pe,Be,it,_t){for(var ft=void 0,Ut={type:"Array",children:[]},rn=at._START_,Dt=void 0;it<Be.length;)switch(Dt=Be[it],rn){case at._START_:{if(Dt.type===F.LEFT_BRACKET)ft=Dt,rn=at.OPEN_ARRAY,it++;else return null;break}case at.OPEN_ARRAY:{if(Dt.type===F.RIGHT_BRACKET)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};var _n=Kt(Pe,Be,it,_t);it=_n.index,Ut.children.push(_n.value),rn=at.VALUE;break}case at.VALUE:{if(Dt.type===F.RIGHT_BRACKET)return _t.loc&&(Ut.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Dt.loc.end.line,Dt.loc.end.column,Dt.loc.end.offset,_t.source)),{value:Ut,index:it+1};Dt.type===F.COMMA?(rn=at.COMMA,it++):B(O.unexpectedToken(a(Pe,Dt.loc.start.offset,Dt.loc.end.offset),_t.source,Dt.loc.start.line,Dt.loc.start.column),Pe,_t.source,Dt.loc.start.line,Dt.loc.start.column);break}case at.COMMA:{var qn=Kt(Pe,Be,it,_t);it=qn.index,Ut.children.push(qn.value),rn=at.VALUE;break}}Je(Pe,Be,_t)}function Lt(Pe,Be,it,_t){var ft=Be[it],Ut=null;switch(ft.type){case F.STRING:{Ut=He(Pe.slice(ft.loc.start.offset+1,ft.loc.end.offset-1));break}case F.NUMBER:{Ut=Number(ft.value);break}case F.TRUE:{Ut=!0;break}case F.FALSE:{Ut=!1;break}case F.NULL:{Ut=null;break}default:return null}var rn={type:"Literal",value:Ut,raw:ft.value};return _t.loc&&(rn.loc=ft.loc),{value:rn,index:it+1}}function Kt(Pe,Be,it,_t){var ft=Be[it],Ut=Lt.apply(void 0,arguments)||bt.apply(void 0,arguments)||gt.apply(void 0,arguments);if(Ut)return Ut;B(O.unexpectedToken(a(Pe,ft.loc.start.offset,ft.loc.end.offset),_t.source,ft.loc.start.line,ft.loc.start.column),Pe,_t.source,ft.loc.start.line,ft.loc.start.column)}var Ue=function(Pe,Be){Be=Object.assign({},Ze,Be);var it=Se(Pe,Be);it.length===0&&Je(Pe,it,Be);var _t=Kt(Pe,it,0,Be);if(_t.index===it.length)return _t.value;var ft=it[_t.index];B(O.unexpectedToken(a(Pe,ft.loc.start.offset,ft.loc.end.offset),Be.source,ft.loc.start.line,ft.loc.start.column),Pe,Be.source,ft.loc.start.line,ft.loc.start.column)};return Ue})}(c2)),c2.exports}var Due=Kue();const Rue=Al(Due);function fr(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fr=function(){return a},a}fr();fr().s[0]++;Mp.defineMode("mgl",(n,e)=>(fr().f[0]++,fr().s[1]++,Mp.modes.javascript({...n,json:!0},e)));function gW(n){fr().f[1]++;const e=(fr().s[2]++,[]);fr().s[3]++;try{fr().s[4]++,Tue.parse(n)}catch(t){const r=(fr().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(fr().s[6]++,r){fr().b[0][0]++;const i=(fr().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});fr().s[8]++,e.push({from:Mp.Pos(i.first_line-1,i.first_column),to:Mp.Pos(i.last_line-1,i.last_column),message:t})}else fr().b[0][1]++}return fr().s[9]++,e}fr().s[10]++;Mp.registerHelper("lint","json",n=>(fr().f[2]++,fr().s[11]++,gW(n)));fr().s[12]++;Mp.registerHelper("lint","mgl",(n,e,t)=>{fr().f[3]++;const r=(fr().s[13]++,gW(n)),{context:i}=(fr().s[14]++,e);if(fr().s[15]++,r.length>0)return fr().b[1][0]++,fr().s[16]++,r;fr().b[1][1]++;const s=(fr().s[17]++,Rue(n)),a=(fr().s[18]++,JSON.parse(n));function o(y,x){if(fr().f[4]++,fr().s[19]++,y){if(fr().b[2][1]++,fr().s[21]++,x.length<1)return fr().b[3][0]++,fr().s[22]++,y;if(fr().b[3][1]++,fr().s[23]++,y.children){fr().b[4][1]++;const B=(fr().s[25]++,x[0]);let O;return fr().s[26]++,B.match(/^[0-9]+$/)?(fr().b[5][0]++,fr().s[27]++,O=y.children[x[0]]):(fr().b[5][1]++,fr().s[28]++,O=y.children.find(T=>(fr().f[5]++,fr().s[29]++,fr().b[6][0]++,T.key&&(fr().b[6][1]++,T.key.type==="Identifier")&&(fr().b[6][2]++,T.key.value===B))),fr().s[30]++,O?(fr().b[7][0]++,fr().s[31]++,O=O.value):fr().b[7][1]++),fr().s[32]++,o(O,x.slice(1))}else{fr().b[4][0]++,fr().s[24]++;return}}else{fr().b[2][0]++,fr().s[20]++;return}}let f=(fr().s[33]++,null);if(fr().s[34]++,i==="layer"){fr().b[8][0]++;const y=(fr().s[35]++,Xf({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[a]}));fr().s[36]++,y?(fr().b[9][0]++,fr().s[37]++,f={result:"error",value:y.filter(x=>(fr().f[6]++,fr().s[38]++,!x.message.match(/^layers\[0\]: source ".*" not found$/))).map(x=>{fr().f[7]++;const B=(fr().s[39]++,x.message.replace(/^layers\[0\]./,"").split(":"));return fr().s[40]++,{name:"",key:B[0],message:B[1]}})}):fr().b[9][1]++}else if(fr().b[8][1]++,fr().s[41]++,i==="expression")fr().b[10][0]++,fr().s[42]++,f=WH.createExpression(a,e.spec);else throw fr().b[10][1]++,fr().s[43]++,new Error(`Invalid context ${i}`);if(fr().s[44]++,(f==null?void 0:f.result)==="error"){fr().b[11][0]++;const y=(fr().s[45]++,f.value);fr().s[46]++,y.forEach(x=>{fr().f[8]++;const{key:B,message:O}=(fr().s[47]++,x);if(fr().s[48]++,B)if(fr().b[12][1]++,fr().s[52]++,B){fr().b[13][0]++;const T=(fr().s[53]++,B.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),F=(fr().s[54]++,o(s,T));if(fr().s[55]++,F)fr().b[14][1]++;else{fr().b[14][0]++,fr().s[56]++,console.warn("Something went wrong parsing error:",x),fr().s[57]++;return}const{loc:j}=(fr().s[58]++,F),{start:N,end:q}=(fr().s[59]++,j);fr().s[60]++,r.push({from:Mp.Pos(N.line-1,N.column),to:Mp.Pos(q.line-1,q.column),message:O})}else fr().b[13][1]++;else{fr().b[12][0]++;const T=(fr().s[49]++,t.getLineHandle(t.lastLine())),F=(fr().s[50]++,{from:Mp.Pos(t.firstLine(),0),to:Mp.Pos(t.lastLine(),T.text.length),message:O});fr().s[51]++,r.push(F)}})}else fr().b[11][1]++;return fr().s[61]++,r});function br(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return br=function(){return a},a}br();class yW extends nr.Component{constructor(t){br().f[5]++,br().s[4]++;super(t);Pn(this,"_keyEvent");Pn(this,"_doc");Pn(this,"_el",(br().s[2]++,null));Pn(this,"_cancelNextChange",(br().s[3]++,!1));Pn(this,"onPointerDown",(br().s[11]++,()=>{br().f[7]++,br().s[12]++,this._keyEvent="pointer"}));Pn(this,"onFocus",(br().s[13]++,()=>{br().f[8]++,br().s[14]++,this.props.onFocus?(br().b[2][0]++,br().s[15]++,this.props.onFocus()):br().b[2][1]++,br().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));Pn(this,"onBlur",(br().s[17]++,()=>{br().f[9]++,br().s[18]++,this._keyEvent="keyboard",br().s[19]++,this.props.onBlur?(br().b[3][0]++,br().s[20]++,this.props.onBlur()):br().b[3][1]++,br().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));Pn(this,"onChange",(br().s[28]++,t=>{if(br().f[12]++,br().s[29]++,this._cancelNextChange){br().b[6][0]++,br().s[30]++,this._cancelNextChange=!1,br().s[31]++,this.setState({prevValue:this._doc.getValue()}),br().s[32]++;return}else br().b[6][1]++;const r=(br().s[33]++,this._doc.getValue());if(br().s[34]++,this.state.prevValue!==r){br().b[7][0]++;let i,s;br().s[35]++;try{br().s[36]++,i=JSON.parse(r)}catch(a){br().s[37]++,s=a,br().s[38]++,console.warn(a)}br().s[39]++,br().b[9][0]++,s&&(br().b[9][1]++,this.props.onJSONInvalid)?(br().b[8][0]++,br().s[40]++,this.props.onJSONInvalid()):(br().b[8][1]++,br().s[41]++,this.props.onChange?(br().b[10][0]++,br().s[42]++,this.props.onChange(i)):br().b[10][1]++,br().s[43]++,this.props.onJSONValid?(br().b[11][0]++,br().s[44]++,this.props.onJSONValid()):br().b[11][1]++)}else br().b[7][1]++;br().s[45]++,this.setState({prevValue:r})}));br().s[5]++,this._keyEvent="keyboard",br().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){br().f[6]++,br().s[7]++,this._doc=Mp(this._el,{value:this.props.getValue(this.props.layer),mode:(br().b[0][0]++,this.props.mode||(br().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(br().b[1][0]++,this.props.lint||(br().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),br().s[8]++,this._doc.on("change",this.onChange),br().s[9]++,this._doc.on("focus",this.onFocus),br().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){br().f[10]++,br().s[22]++,this._doc.off("change",this.onChange),br().s[23]++,this._doc.off("focus",this.onFocus),br().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){br().f[11]++,br().s[25]++,br().b[5][0]++,!this.state.isEditing&&(br().b[5][1]++,t.layer!==this.props.layer)?(br().b[4][0]++,br().s[26]++,this._cancelNextChange=!0,br().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):br().b[4][1]++}render(){br().f[13]++;const t=(br().s[46]++,this.props.t),{showMessage:r}=(br().s[47]++,this.state),i=(br().s[48]++,{});return br().s[49]++,this.props.maxHeight?(br().b[12][0]++,br().s[50]++,i.maxHeight=this.props.maxHeight):br().b[12][1]++,br().s[51]++,ue.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[ue.jsx("div",{className:hm("JSONEditor__message",{"JSONEditor__message--on":r}),children:ue.jsxs(U0,{t,children:["Press ",ue.jsx("kbd",{children:"ESC"})," to lose focus"]})}),ue.jsx("div",{className:hm("codemirror-container",this.props.className),ref:s=>(br().f[14]++,br().s[52]++,this._el=s),style:i})]})}}Pn(yW,"defaultProps",(br().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(br().f[0]++,br().s[1]++,mW(t,{indent:2,maxLength:40})),onFocus:()=>{br().f[1]++},onBlur:()=>{br().f[2]++},onJSONInvalid:()=>{br().f[3]++},onJSONValid:()=>{br().f[4]++}}));const Fue=(br().s[53]++,Ws()(yW));function px(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return px=function(){return a},a}px();class YO extends nr.Component{render(){return px().f[0]++,px().s[0]++,ue.jsx(Fue,{...this.props})}}var t_="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",Lue="M7,10L12,15L17,10H7Z",Uue="M7,15L12,10L17,15H7Z",$O="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Qg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qg=function(){return a},a}Qg();const VO=(Qg().s[0]++,["all","any","none"]);Qg().s[1]++;const zue=(Qg().s[2]++,Object.keys(ns.filter_operator.values).filter(n=>(Qg().f[0]++,Qg().s[3]++,VO.indexOf(n)<0)));function bi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return bi=function(){return a},a}bi();function jue(n){return bi().f[0]++,bi().s[0]++,n===""?(bi().b[0][0]++,bi().s[1]++,n):(bi().b[0][1]++,bi().s[2]++,isNaN(n)?(bi().b[1][0]++,bi().s[3]++,n):(bi().b[1][1]++,bi().s[4]++,parseFloat(n)))}function Nue(n){bi().f[1]++;const e=(bi().s[5]++,typeof n=="string");if(bi().s[6]++,e)bi().b[2][1]++;else return bi().b[2][0]++,bi().s[7]++,n;return bi().s[8]++,n.match(/^\s*true\s*$/)?(bi().b[3][0]++,bi().s[9]++,!0):(bi().b[3][1]++,bi().s[10]++,n.match(/^\s*false\s*$/)?(bi().b[4][0]++,bi().s[11]++,!1):(bi().b[4][1]++,bi().s[12]++,n))}function Wue(n){return bi().f[2]++,bi().s[13]++,n=jue(n),bi().s[14]++,n=Nue(n),bi().s[15]++,n}class vW extends nr.Component{onFilterPartChanged(e,t,r){bi().f[3]++;let i=(bi().s[17]++,[e,t,...r.map(Wue)]);bi().s[18]++,bi().b[6][0]++,e==="has"||(bi().b[6][1]++,e==="!has")?(bi().b[5][0]++,bi().s[19]++,i=[e,t]):(bi().b[5][1]++,bi().s[20]++,r.length===0?(bi().b[7][0]++,bi().s[21]++,i=[e,t,""]):bi().b[7][1]++),bi().s[22]++,this.props.onChange(i)}render(){bi().f[4]++;const e=(bi().s[23]++,this.props.filter),t=(bi().s[24]++,e[0]),r=(bi().s[25]++,e[1]),i=(bi().s[26]++,e.slice(2));return bi().s[27]++,ue.jsxs("div",{className:"maputnik-filter-editor-single",children:[ue.jsx("div",{className:"maputnik-filter-editor-property",children:ue.jsx(hv,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(bi().f[5]++,bi().s[28]++,[s,s])),onChange:s=>(bi().f[6]++,bi().s[29]++,this.onFilterPartChanged(t,s,i))})}),ue.jsx("div",{className:"maputnik-filter-editor-operator",children:ue.jsx(s1,{"aria-label":"function",value:t,onChange:s=>(bi().f[7]++,bi().s[30]++,this.onFilterPartChanged(s,r,i)),options:zue})}),(bi().b[8][0]++,i.length>0&&(bi().b[8][1]++,ue.jsx("div",{className:"maputnik-filter-editor-args",children:ue.jsx(Zf,{"aria-label":"value",value:i.join(","),onChange:s=>(bi().f[8]++,bi().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}Pn(vW,"defaultProps",(bi().s[16]++,{properties:{}}));function Dy(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="cef1671f65ba48cf49a518a548a597faa051d67d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SAOD,KAPC;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cef1671f65ba48cf49a518a548a597faa051d67d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Dy=function(){return a},a}Dy();class Gue extends nr.Component{render(){Dy().f[0]++;const e=(Dy().s[0]++,this.props.t);return Dy().s[1]++,ue.jsxs("div",{className:"maputnik-filter-editor-block",children:[ue.jsx("div",{className:"maputnik-filter-editor-block-action",children:ue.jsx(el,{className:"maputnik-delete-filter",onClick:this.props.onDelete,title:e("Delete filter block"),children:ue.jsx(iv,{})})}),ue.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children})]})}}const Que=(Dy().s[2]++,Ws()(Gue));var rw,KT;function que(){if(KT)return rw;KT=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",a="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",f="(?:"+a+"|"+o+")",y="[^"+e+"]",x="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",O="\\u200d",T=f+"?",F="["+i+"]?",j="(?:"+O+"(?:"+[y,x,B].join("|")+")"+F+T+")*",N=F+T+j,q="(?:"+[y+a+"?",a,x,B,s].join("|")+")",H=RegExp(o+"(?="+o+")|"+q+N,"g"),oe=RegExp("["+O+e+t+r+i+"]"),ne=typeof window=="object"&&window&&window.Object===Object&&window,$=typeof self=="object"&&self&&self.Object===Object&&self,te=ne||$||Function("return this")();function G(gt){return gt.split("")}function ie(gt){return oe.test(gt)}function he(gt){return ie(gt)?pe(gt):G(gt)}function pe(gt){return gt.match(H)||[]}var Ee=Object.prototype,me=Ee.toString,Se=te.Symbol,De=Se?Se.prototype:void 0,be=De?De.toString:void 0;function at(gt,Lt,Kt){var Ue=-1,Pe=gt.length;Lt<0&&(Lt=-Lt>Pe?0:Pe+Lt),Kt=Kt>Pe?Pe:Kt,Kt<0&&(Kt+=Pe),Pe=Lt>Kt?0:Kt-Lt>>>0,Lt>>>=0;for(var Be=Array(Pe);++Ue<Pe;)Be[Ue]=gt[Ue+Lt];return Be}function Ze(gt){if(typeof gt=="string")return gt;if(Fe(gt))return be?be.call(gt):"";var Lt=gt+"";return Lt=="0"&&1/gt==-1/0?"-0":Lt}function Je(gt,Lt,Kt){var Ue=gt.length;return Kt=Kt===void 0?Ue:Kt,!Lt&&Kt>=Ue?gt:at(gt,Lt,Kt)}function We(gt){return function(Lt){Lt=He(Lt);var Kt=ie(Lt)?he(Lt):void 0,Ue=Kt?Kt[0]:Lt.charAt(0),Pe=Kt?Je(Kt,1).join(""):Lt.slice(1);return Ue[gt]()+Pe}}function Me(gt){return!!gt&&typeof gt=="object"}function Fe(gt){return typeof gt=="symbol"||Me(gt)&&me.call(gt)==n}function He(gt){return gt==null?"":Ze(gt)}function bt(gt){return Yt(He(gt).toLowerCase())}var Yt=We("toUpperCase");return rw=bt,rw}var Yue=que();const HO=Al(Yue);function $p(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return $p=function(){return a},a}$p();function I3(n){$p().f[0]++;let e;const t=($p().s[0]++,n.split("-"));return $p().s[1]++,t.length>1?($p().b[0][0]++,$p().s[2]++,e=n.split("-").slice(1).join(" ")):($p().b[0][1]++,$p().s[3]++,e=n),$p().s[4]++,HO(e)}function Bo(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Bo=function(){return a},a}Bo();class CW extends nr.Component{constructor(t){Bo().f[2]++,Bo().s[1]++;super(t);Pn(this,"onJSONInvalid",(Bo().s[3]++,t=>{Bo().f[3]++,Bo().s[4]++,this.setState({jsonError:!0})}));Pn(this,"onJSONValid",(Bo().s[5]++,()=>{Bo().f[4]++,Bo().s[6]++,this.setState({jsonError:!1})}));Bo().s[2]++,this.state={jsonError:!1}}render(){Bo().f[5]++;const{t,errors:r,fieldName:i,fieldType:s,value:a,canUndo:o}=(Bo().s[7]++,this.props),{jsonError:f}=(Bo().s[8]++,this.state),y=(Bo().s[9]++,o?(Bo().b[0][0]++,!o()):(Bo().b[0][1]++,!0)),x=(Bo().s[10]++,ue.jsxs(ue.Fragment,{children:[(Bo().b[1][0]++,this.props.onUndo&&(Bo().b[1][1]++,ue.jsx(el,{onClick:this.props.onUndo,disabled:y,className:"maputnik-delete-stop",title:t("Revert from expression"),children:ue.jsx(RZ,{})},"undo_action"))),ue.jsx(el,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:ue.jsx(iv,{})},"delete_action")]})),B=(Bo().s[11]++,s===void 0?(Bo().b[2][0]++,i):(Bo().b[2][1]++,`${s}.${i}`)),O=(Bo().s[12]++,r[B]),T=(Bo().s[13]++,`${B}[`),F=(Bo().s[14]++,[]);function j(N){return Bo().f[6]++,Bo().s[15]++,mW(N,{indent:2,maxLength:38})}return Bo().s[16]++,f?(Bo().b[3][0]++,Bo().s[17]++,F.push({message:"Invalid JSON"})):(Bo().b[3][1]++,Bo().s[18]++,Object.entries(r).filter(([N,q])=>(Bo().f[7]++,Bo().s[19]++,N.startsWith(T))).forEach(([N,q])=>(Bo().f[8]++,Bo().s[20]++,F.push(q))),Bo().s[21]++,O?(Bo().b[4][0]++,Bo().s[22]++,F.push(O)):Bo().b[4][1]++),Bo().s[23]++,ue.jsx(pa,{error:F,fieldSpec:this.props.fieldSpec,label:t(I3(this.props.fieldName)),action:x,wideMode:!0,children:ue.jsx(YO,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:a,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:j,onChange:this.props.onChange})})}}Pn(CW,"defaultProps",(Bo().s[0]++,{errors:{},onFocus:()=>{Bo().f[0]++},onBlur:()=>{Bo().f[1]++}}));const _W=(Bo().s[24]++,Ws()(CW));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Un=function(){return a},a}Un();function B0(n){Un().f[0]++;const e=(Un().s[0]++,Un().b[0][0]++,n.filter||(Un().b[0][1]++,["all"]));if(Un().s[1]++,Array.isArray(e))Un().b[1][1]++;else return Un().b[1][0]++,Un().s[2]++,e;let t=(Un().s[3]++,e[0]),r=(Un().s[4]++,e.slice(1));return Un().s[5]++,VO.indexOf(t)<0?(Un().b[2][0]++,Un().s[6]++,t="all",Un().s[7]++,r=[e.slice(0)]):Un().b[2][1]++,Un().s[8]++,[t,...r]}function $ue(n){return Un().f[1]++,Un().s[9]++,NH(Vue(n)).layers[0].filter}function Vue(n){return Un().f[2]++,Un().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Hue=(Un().s[11]++,["all","any","none"]);function DT(n){if(Un().f[3]++,Un().s[12]++,Un().b[4][0]++,n.length===1&&(Un().b[4][1]++,Hue.includes(n[0])))return Un().b[3][0]++,Un().s[13]++,!0;Un().b[3][1]++;const e=(Un().s[14]++,hC(n));return Un().s[15]++,!Bx.isEqual(e,n)}function RT(n){return Un().f[4]++,Un().s[16]++,VO.indexOf(n[0])>=0}function Zue(n){return Un().f[5]++,Un().s[17]++,RT(n)?(Un().b[5][0]++,Un().s[18]++,n.slice(1).map(e=>(Un().f[6]++,Un().s[19]++,RT(e))).filter(e=>(Un().f[7]++,Un().s[20]++,e==!0)).length>0):(Un().b[5][1]++,Un().s[21]++,!1)}class bW extends nr.Component{constructor(t){Un().f[8]++,Un().s[23]++;super(t);Pn(this,"addFilterItem",(Un().s[31]++,()=>{Un().f[11]++;const t=(Un().s[32]++,B0(this.props).slice(0));Un().s[33]++,t.push(["==","name",""]),Un().s[34]++,this.props.onChange(t)}));Pn(this,"onToggleDoc",(Un().s[35]++,t=>{Un().f[12]++,Un().s[36]++,this.setState({showDoc:t})}));Pn(this,"makeFilter",(Un().s[37]++,()=>{Un().f[13]++,Un().s[38]++,this.setState({displaySimpleFilter:!0})}));Pn(this,"makeExpression",(Un().s[39]++,()=>{Un().f[14]++;const t=(Un().s[40]++,B0(this.props));Un().s[41]++,this.props.onChange($ue(t)),Un().s[42]++,this.setState({displaySimpleFilter:!1})}));Un().s[24]++,this.state={showDoc:!1,displaySimpleFilter:DT(B0(t))}}onFilterPartChanged(t,r){Un().f[9]++;const i=(Un().s[25]++,B0(this.props).slice(0));Un().s[26]++,i[t]=r,Un().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Un().f[10]++;const r=(Un().s[28]++,B0(this.props).slice(0));Un().s[29]++,r.splice(t+1,1),Un().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Un().f[15]++;const i=(Un().s[43]++,DT(B0(t)));return Un().s[44]++,Un().b[7][0]++,!i&&(Un().b[7][1]++,r.displaySimpleFilter===!0)?(Un().b[6][0]++,Un().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Un().b[6][1]++,Un().s[46]++,Un().b[9][0]++,i&&(Un().b[9][1]++,r.displaySimpleFilter===!1)?(Un().b[8][0]++,Un().s[47]++,{valueIsSimpleFilter:!0}):(Un().b[8][1]++,Un().s[48]++,{valueIsSimpleFilter:!1}))}render(){Un().f[16]++;const{errors:t,t:r}=(Un().s[49]++,this.props),{displaySimpleFilter:i}=(Un().s[50]++,this.state),s=(Un().s[51]++,{doc:Ps.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),a=(Un().s[52]++,["all"]),o=(Un().s[53]++,Un().b[10][0]++,i&&(Un().b[10][1]++,Zue(B0(this.props))));if(Un().s[54]++,o)return Un().b[11][0]++,Un().s[55]++,ue.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[ue.jsx("p",{children:r("Nested filters are not supported.")}),ue.jsxs(el,{onClick:this.makeExpression,title:r("Convert to expression"),children:[ue.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:t_})}),r("Upgrade to expression")]})]});if(Un().b[11][1]++,Un().s[56]++,i){Un().b[12][0]++;const f=(Un().s[57]++,B0(this.props)),y=(Un().s[58]++,f[0]),x=(Un().s[59]++,f.slice(1)),B=(Un().s[60]++,ue.jsx("div",{children:ue.jsx(el,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:t_})})})})),O=(Un().s[61]++,x.map((T,F)=>{Un().f[17]++;const j=(Un().s[62]++,t[`filter[${F+1}]`]);return Un().s[63]++,ue.jsxs("div",{children:[ue.jsx(Que,{onDelete:this.deleteFilterItem.bind(this,F),children:ue.jsx(vW,{properties:this.props.properties,filter:T,onChange:this.onFilterPartChanged.bind(this,F+1)})},F),(Un().b[13][0]++,j&&(Un().b[13][1]++,ue.jsx("div",{className:"maputnik-inline-error",children:j.message},"error")))]},`block-${F}`)}));return Un().s[64]++,ue.jsxs(ue.Fragment,{children:[ue.jsx(pa,{fieldSpec:s,label:r("Filter"),action:B,children:ue.jsx(s1,{value:y,onChange:T=>(Un().f[18]++,Un().s[65]++,this.onFilterPartChanged(0,T)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),O,ue.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:ue.jsxs(el,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:$O})})," ",r("Add filter")]})},"buttons"),ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Un().b[14][0]++,""):(Un().b[14][1]++,"none")},children:ue.jsx(GO,{fieldSpec:s})},"doc")]})}else{Un().b[12][1]++;const{filter:f}=(Un().s[66]++,this.props);return Un().s[67]++,ue.jsxs(ue.Fragment,{children:[ue.jsx(_W,{onDelete:()=>{Un().f[19]++,Un().s[68]++,this.setState({displaySimpleFilter:!0}),Un().s[69]++,this.props.onChange(a)},fieldName:"filter",fieldSpec:s,value:f,errors:t,onChange:this.props.onChange}),(Un().b[15][0]++,this.state.valueIsSimpleFilter&&(Un().b[15][1]++,ue.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",ue.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}Pn(bW,"defaultProps",(Un().s[22]++,{filter:["all"]}));const Xue=(Un().s[70]++,Ws()(bW));var z1={},fh={},j1={},iw,FT;function xW(){if(FT)return iw;FT=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return iw=n,iw}var ow,LT;function Tp(){if(LT)return ow;LT=1;var n=xW(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return ow=t,ow}var sw,UT;function I_(){if(UT)return sw;UT=1;var n=Tp(),e=n.Symbol;return sw=e,sw}var aw,zT;function Jue(){if(zT)return aw;zT=1;var n=I_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(a){var o=t.call(a,i),f=a[i];try{a[i]=void 0;var y=!0}catch{}var x=r.call(a);return y&&(o?a[i]=f:delete a[i]),x}return aw=s,aw}var lw,jT;function eAe(){if(jT)return lw;jT=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return lw=t,lw}var uw,NT;function a1(){if(NT)return uw;NT=1;var n=I_(),e=Jue(),t=eAe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return uw=a,uw}var Aw,WT;function Af(){if(WT)return Aw;WT=1;var n=Array.isArray;return Aw=n,Aw}var cw,GT;function ym(){if(GT)return cw;GT=1;function n(e){return e!=null&&typeof e=="object"}return cw=n,cw}var dw,QT;function tAe(){if(QT)return dw;QT=1;var n=a1(),e=Af(),t=ym(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return dw=i,dw}var hw,qT;function nAe(){if(qT)return hw;qT=1;function n(e){return function(t,r,i){for(var s=-1,a=Object(t),o=i(t),f=o.length;f--;){var y=o[e?f:++s];if(r(a[y],y,a)===!1)break}return t}}return hw=n,hw}var fw,YT;function wW(){if(YT)return fw;YT=1;var n=nAe(),e=n();return fw=e,fw}var pw,$T;function rAe(){if($T)return pw;$T=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return pw=n,pw}var mw,VT;function iAe(){if(VT)return mw;VT=1;var n=a1(),e=ym(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return mw=r,mw}var gw,HT;function ZO(){if(HT)return gw;HT=1;var n=iAe(),e=ym(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return gw=s,gw}var iC={exports:{}},yw,ZT;function oAe(){if(ZT)return yw;ZT=1;function n(){return!1}return yw=n,yw}iC.exports;var XT;function k3(){return XT||(XT=1,function(n,e){var t=Tp(),r=oAe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,a=s&&s.exports===i,o=a?t.Buffer:void 0,f=o?o.isBuffer:void 0,y=f||r;n.exports=y}(iC,iC.exports)),iC.exports}var vw,JT;function XO(){if(JT)return vw;JT=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return vw=t,vw}var Cw,eP;function JO(){if(eP)return Cw;eP=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return Cw=e,Cw}var _w,tP;function sAe(){if(tP)return _w;tP=1;var n=a1(),e=JO(),t=ym(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",f="[object Function]",y="[object Map]",x="[object Number]",B="[object Object]",O="[object RegExp]",T="[object Set]",F="[object String]",j="[object WeakMap]",N="[object ArrayBuffer]",q="[object DataView]",H="[object Float32Array]",oe="[object Float64Array]",ne="[object Int8Array]",$="[object Int16Array]",te="[object Int32Array]",G="[object Uint8Array]",ie="[object Uint8ClampedArray]",he="[object Uint16Array]",pe="[object Uint32Array]",Ee={};Ee[H]=Ee[oe]=Ee[ne]=Ee[$]=Ee[te]=Ee[G]=Ee[ie]=Ee[he]=Ee[pe]=!0,Ee[r]=Ee[i]=Ee[N]=Ee[s]=Ee[q]=Ee[a]=Ee[o]=Ee[f]=Ee[y]=Ee[x]=Ee[B]=Ee[O]=Ee[T]=Ee[F]=Ee[j]=!1;function me(Se){return t(Se)&&e(Se.length)&&!!Ee[n(Se)]}return _w=me,_w}var bw,nP;function e7(){if(nP)return bw;nP=1;function n(e){return function(t){return e(t)}}return bw=n,bw}var oC={exports:{}};oC.exports;var rP;function t7(){return rP||(rP=1,function(n,e){var t=xW(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s&&t.process,o=function(){try{var f=i&&i.require&&i.require("util").types;return f||a&&a.binding&&a.binding("util")}catch{}}();n.exports=o}(oC,oC.exports)),oC.exports}var xw,iP;function n7(){if(iP)return xw;iP=1;var n=sAe(),e=e7(),t=t7(),r=t&&t.isTypedArray,i=r?e(r):n;return xw=i,xw}var ww,oP;function MW(){if(oP)return ww;oP=1;var n=rAe(),e=ZO(),t=Af(),r=k3(),i=XO(),s=n7(),a=Object.prototype,o=a.hasOwnProperty;function f(y,x){var B=t(y),O=!B&&e(y),T=!B&&!O&&r(y),F=!B&&!O&&!T&&s(y),j=B||O||T||F,N=j?n(y.length,String):[],q=N.length;for(var H in y)(x||o.call(y,H))&&!(j&&(H=="length"||T&&(H=="offset"||H=="parent")||F&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||i(H,q)))&&N.push(H);return N}return ww=f,ww}var Mw,sP;function r7(){if(sP)return Mw;sP=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return Mw=e,Mw}var Sw,aP;function SW(){if(aP)return Sw;aP=1;function n(e,t){return function(r){return e(t(r))}}return Sw=n,Sw}var Ew,lP;function aAe(){if(lP)return Ew;lP=1;var n=SW(),e=n(Object.keys,Object);return Ew=e,Ew}var Bw,uP;function lAe(){if(uP)return Bw;uP=1;var n=r7(),e=aAe(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return Bw=i,Bw}var Ow,AP;function Jf(){if(AP)return Ow;AP=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Ow=n,Ow}var Iw,cP;function i7(){if(cP)return Iw;cP=1;var n=a1(),e=Jf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var f=n(o);return f==r||f==i||f==t||f==s}return Iw=a,Iw}var kw,dP;function fv(){if(dP)return kw;dP=1;var n=i7(),e=JO();function t(r){return r!=null&&e(r.length)&&!n(r)}return kw=t,kw}var Tw,hP;function k_(){if(hP)return Tw;hP=1;var n=MW(),e=lAe(),t=fv();function r(i){return t(i)?n(i):e(i)}return Tw=r,Tw}var Pw,fP;function EW(){if(fP)return Pw;fP=1;var n=wW(),e=k_();function t(r,i){return r&&n(r,i,e)}return Pw=t,Pw}var Kw,pP;function T3(){if(pP)return Kw;pP=1;function n(e){return e}return Kw=n,Kw}var Dw,mP;function BW(){if(mP)return Dw;mP=1;var n=T3();function e(t){return typeof t=="function"?t:n}return Dw=e,Dw}var Rw,gP;function o7(){if(gP)return Rw;gP=1;var n=EW(),e=BW();function t(r,i){return r&&n(r,e(i))}return Rw=t,Rw}var Fw,yP;function s7(){if(yP)return Fw;yP=1;var n=SW(),e=n(Object.getPrototypeOf,Object);return Fw=e,Fw}var Lw,vP;function OW(){if(vP)return Lw;vP=1;var n=a1(),e=s7(),t=ym(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,f=a.call(Object);function y(x){if(!t(x)||n(x)!=r)return!1;var B=e(x);if(B===null)return!0;var O=o.call(B,"constructor")&&B.constructor;return typeof O=="function"&&O instanceof O&&a.call(O)==f}return Lw=y,Lw}var Uw,CP;function IW(){if(CP)return Uw;CP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return Uw=n,Uw}var zw,_P;function uAe(){if(_P)return zw;_P=1;function n(){this.__data__=[],this.size=0}return zw=n,zw}var jw,bP;function T_(){if(bP)return jw;bP=1;function n(e,t){return e===t||e!==e&&t!==t}return jw=n,jw}var Nw,xP;function P3(){if(xP)return Nw;xP=1;var n=T_();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return Nw=e,Nw}var Ww,wP;function AAe(){if(wP)return Ww;wP=1;var n=P3(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,a=n(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():t.call(s,a,1),--this.size,!0}return Ww=r,Ww}var Gw,MP;function cAe(){if(MP)return Gw;MP=1;var n=P3();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Gw=e,Gw}var Qw,SP;function dAe(){if(SP)return Qw;SP=1;var n=P3();function e(t){return n(this.__data__,t)>-1}return Qw=e,Qw}var qw,EP;function hAe(){if(EP)return qw;EP=1;var n=P3();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return qw=e,qw}var Yw,BP;function K3(){if(BP)return Yw;BP=1;var n=uAe(),e=AAe(),t=cAe(),r=dAe(),i=hAe();function s(a){var o=-1,f=a==null?0:a.length;for(this.clear();++o<f;){var y=a[o];this.set(y[0],y[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,Yw=s,Yw}var $w,OP;function fAe(){if(OP)return $w;OP=1;var n=K3();function e(){this.__data__=new n,this.size=0}return $w=e,$w}var Vw,IP;function pAe(){if(IP)return Vw;IP=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Vw=n,Vw}var Hw,kP;function mAe(){if(kP)return Hw;kP=1;function n(e){return this.__data__.get(e)}return Hw=n,Hw}var Zw,TP;function gAe(){if(TP)return Zw;TP=1;function n(e){return this.__data__.has(e)}return Zw=n,Zw}var Xw,PP;function yAe(){if(PP)return Xw;PP=1;var n=Tp(),e=n["__core-js_shared__"];return Xw=e,Xw}var Jw,KP;function vAe(){if(KP)return Jw;KP=1;var n=yAe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Jw=t,Jw}var eM,DP;function kW(){if(DP)return eM;DP=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return eM=t,eM}var tM,RP;function CAe(){if(RP)return tM;RP=1;var n=i7(),e=vAe(),t=Jf(),r=kW(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,f=a.toString,y=o.hasOwnProperty,x=RegExp("^"+f.call(y).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(O){if(!t(O)||e(O))return!1;var T=n(O)?x:s;return T.test(r(O))}return tM=B,tM}var nM,FP;function _Ae(){if(FP)return nM;FP=1;function n(e,t){return e==null?void 0:e[t]}return nM=n,nM}var rM,LP;function l1(){if(LP)return rM;LP=1;var n=CAe(),e=_Ae();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return rM=t,rM}var iM,UP;function a7(){if(UP)return iM;UP=1;var n=l1(),e=Tp(),t=n(e,"Map");return iM=t,iM}var oM,zP;function D3(){if(zP)return oM;zP=1;var n=l1(),e=n(Object,"create");return oM=e,oM}var sM,jP;function bAe(){if(jP)return sM;jP=1;var n=D3();function e(){this.__data__=n?n(null):{},this.size=0}return sM=e,sM}var aM,NP;function xAe(){if(NP)return aM;NP=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return aM=n,aM}var lM,WP;function wAe(){if(WP)return lM;WP=1;var n=D3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var a=this.__data__;if(n){var o=a[s];return o===e?void 0:o}return r.call(a,s)?a[s]:void 0}return lM=i,lM}var uM,GP;function MAe(){if(GP)return uM;GP=1;var n=D3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return uM=r,uM}var AM,QP;function SAe(){if(QP)return AM;QP=1;var n=D3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return AM=t,AM}var cM,qP;function EAe(){if(qP)return cM;qP=1;var n=bAe(),e=xAe(),t=wAe(),r=MAe(),i=SAe();function s(a){var o=-1,f=a==null?0:a.length;for(this.clear();++o<f;){var y=a[o];this.set(y[0],y[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,cM=s,cM}var dM,YP;function BAe(){if(YP)return dM;YP=1;var n=EAe(),e=K3(),t=a7();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return dM=r,dM}var hM,$P;function OAe(){if($P)return hM;$P=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return hM=n,hM}var fM,VP;function R3(){if(VP)return fM;VP=1;var n=OAe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return fM=e,fM}var pM,HP;function IAe(){if(HP)return pM;HP=1;var n=R3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return pM=e,pM}var mM,ZP;function kAe(){if(ZP)return mM;ZP=1;var n=R3();function e(t){return n(this,t).get(t)}return mM=e,mM}var gM,XP;function TAe(){if(XP)return gM;XP=1;var n=R3();function e(t){return n(this,t).has(t)}return gM=e,gM}var yM,JP;function PAe(){if(JP)return yM;JP=1;var n=R3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return yM=e,yM}var vM,eK;function l7(){if(eK)return vM;eK=1;var n=BAe(),e=IAe(),t=kAe(),r=TAe(),i=PAe();function s(a){var o=-1,f=a==null?0:a.length;for(this.clear();++o<f;){var y=a[o];this.set(y[0],y[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,vM=s,vM}var CM,tK;function KAe(){if(tK)return CM;tK=1;var n=K3(),e=a7(),t=l7(),r=200;function i(s,a){var o=this.__data__;if(o instanceof n){var f=o.__data__;if(!e||f.length<r-1)return f.push([s,a]),this.size=++o.size,this;o=this.__data__=new t(f)}return o.set(s,a),this.size=o.size,this}return CM=i,CM}var _M,nK;function F3(){if(nK)return _M;nK=1;var n=K3(),e=fAe(),t=pAe(),r=mAe(),i=gAe(),s=KAe();function a(o){var f=this.__data__=new n(o);this.size=f.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,_M=a,_M}var bM,rK;function DAe(){if(rK)return bM;rK=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return bM=e,bM}var xM,iK;function RAe(){if(iK)return xM;iK=1;function n(e){return this.__data__.has(e)}return xM=n,xM}var wM,oK;function FAe(){if(oK)return wM;oK=1;var n=l7(),e=DAe(),t=RAe();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new n;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,wM=r,wM}var MM,sK;function LAe(){if(sK)return MM;sK=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return MM=n,MM}var SM,aK;function UAe(){if(aK)return SM;aK=1;function n(e,t){return e.has(t)}return SM=n,SM}var EM,lK;function TW(){if(lK)return EM;lK=1;var n=FAe(),e=LAe(),t=UAe(),r=1,i=2;function s(a,o,f,y,x,B){var O=f&r,T=a.length,F=o.length;if(T!=F&&!(O&&F>T))return!1;var j=B.get(a),N=B.get(o);if(j&&N)return j==o&&N==a;var q=-1,H=!0,oe=f&i?new n:void 0;for(B.set(a,o),B.set(o,a);++q<T;){var ne=a[q],$=o[q];if(y)var te=O?y($,ne,q,o,a,B):y(ne,$,q,a,o,B);if(te!==void 0){if(te)continue;H=!1;break}if(oe){if(!e(o,function(G,ie){if(!t(oe,ie)&&(ne===G||x(ne,G,f,y,B)))return oe.push(ie)})){H=!1;break}}else if(!(ne===$||x(ne,$,f,y,B))){H=!1;break}}return B.delete(a),B.delete(o),H}return EM=s,EM}var BM,uK;function PW(){if(uK)return BM;uK=1;var n=Tp(),e=n.Uint8Array;return BM=e,BM}var OM,AK;function zAe(){if(AK)return OM;AK=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return OM=n,OM}var IM,cK;function jAe(){if(cK)return IM;cK=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return IM=n,IM}var kM,dK;function NAe(){if(dK)return kM;dK=1;var n=I_(),e=PW(),t=T_(),r=TW(),i=zAe(),s=jAe(),a=1,o=2,f="[object Boolean]",y="[object Date]",x="[object Error]",B="[object Map]",O="[object Number]",T="[object RegExp]",F="[object Set]",j="[object String]",N="[object Symbol]",q="[object ArrayBuffer]",H="[object DataView]",oe=n?n.prototype:void 0,ne=oe?oe.valueOf:void 0;function $(te,G,ie,he,pe,Ee,me){switch(ie){case H:if(te.byteLength!=G.byteLength||te.byteOffset!=G.byteOffset)return!1;te=te.buffer,G=G.buffer;case q:return!(te.byteLength!=G.byteLength||!Ee(new e(te),new e(G)));case f:case y:case O:return t(+te,+G);case x:return te.name==G.name&&te.message==G.message;case T:case j:return te==G+"";case B:var Se=i;case F:var De=he&a;if(Se||(Se=s),te.size!=G.size&&!De)return!1;var be=me.get(te);if(be)return be==G;he|=o,me.set(te,G);var at=r(Se(te),Se(G),he,pe,Ee,me);return me.delete(te),at;case N:if(ne)return ne.call(te)==ne.call(G)}return!1}return kM=$,kM}var TM,hK;function KW(){if(hK)return TM;hK=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return TM=n,TM}var PM,fK;function DW(){if(fK)return PM;fK=1;var n=KW(),e=Af();function t(r,i,s){var a=i(r);return e(r)?a:n(a,s(r))}return PM=t,PM}var KM,pK;function WAe(){if(pK)return KM;pK=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[s++]=o)}return a}return KM=n,KM}var DM,mK;function RW(){if(mK)return DM;mK=1;function n(){return[]}return DM=n,DM}var RM,gK;function u7(){if(gK)return RM;gK=1;var n=WAe(),e=RW(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),n(i(a),function(o){return r.call(a,o)}))}:e;return RM=s,RM}var FM,yK;function FW(){if(yK)return FM;yK=1;var n=DW(),e=u7(),t=k_();function r(i){return n(i,t,e)}return FM=r,FM}var LM,vK;function GAe(){if(vK)return LM;vK=1;var n=FW(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o,f,y,x){var B=o&e,O=n(s),T=O.length,F=n(a),j=F.length;if(T!=j&&!B)return!1;for(var N=T;N--;){var q=O[N];if(!(B?q in a:r.call(a,q)))return!1}var H=x.get(s),oe=x.get(a);if(H&&oe)return H==a&&oe==s;var ne=!0;x.set(s,a),x.set(a,s);for(var $=B;++N<T;){q=O[N];var te=s[q],G=a[q];if(f)var ie=B?f(G,te,q,a,s,x):f(te,G,q,s,a,x);if(!(ie===void 0?te===G||y(te,G,o,f,x):ie)){ne=!1;break}$||($=q=="constructor")}if(ne&&!$){var he=s.constructor,pe=a.constructor;he!=pe&&"constructor"in s&&"constructor"in a&&!(typeof he=="function"&&he instanceof he&&typeof pe=="function"&&pe instanceof pe)&&(ne=!1)}return x.delete(s),x.delete(a),ne}return LM=i,LM}var UM,CK;function QAe(){if(CK)return UM;CK=1;var n=l1(),e=Tp(),t=n(e,"DataView");return UM=t,UM}var zM,_K;function qAe(){if(_K)return zM;_K=1;var n=l1(),e=Tp(),t=n(e,"Promise");return zM=t,zM}var jM,bK;function YAe(){if(bK)return jM;bK=1;var n=l1(),e=Tp(),t=n(e,"Set");return jM=t,jM}var NM,xK;function $Ae(){if(xK)return NM;xK=1;var n=l1(),e=Tp(),t=n(e,"WeakMap");return NM=t,NM}var WM,wK;function L3(){if(wK)return WM;wK=1;var n=QAe(),e=a7(),t=qAe(),r=YAe(),i=$Ae(),s=a1(),a=kW(),o="[object Map]",f="[object Object]",y="[object Promise]",x="[object Set]",B="[object WeakMap]",O="[object DataView]",T=a(n),F=a(e),j=a(t),N=a(r),q=a(i),H=s;return(n&&H(new n(new ArrayBuffer(1)))!=O||e&&H(new e)!=o||t&&H(t.resolve())!=y||r&&H(new r)!=x||i&&H(new i)!=B)&&(H=function(oe){var ne=s(oe),$=ne==f?oe.constructor:void 0,te=$?a($):"";if(te)switch(te){case T:return O;case F:return o;case j:return y;case N:return x;case q:return B}return ne}),WM=H,WM}var GM,MK;function VAe(){if(MK)return GM;MK=1;var n=F3(),e=TW(),t=NAe(),r=GAe(),i=L3(),s=Af(),a=k3(),o=n7(),f=1,y="[object Arguments]",x="[object Array]",B="[object Object]",O=Object.prototype,T=O.hasOwnProperty;function F(j,N,q,H,oe,ne){var $=s(j),te=s(N),G=$?x:i(j),ie=te?x:i(N);G=G==y?B:G,ie=ie==y?B:ie;var he=G==B,pe=ie==B,Ee=G==ie;if(Ee&&a(j)){if(!a(N))return!1;$=!0,he=!1}if(Ee&&!he)return ne||(ne=new n),$||o(j)?e(j,N,q,H,oe,ne):t(j,N,G,q,H,oe,ne);if(!(q&f)){var me=he&&T.call(j,"__wrapped__"),Se=pe&&T.call(N,"__wrapped__");if(me||Se){var De=me?j.value():j,be=Se?N.value():N;return ne||(ne=new n),oe(De,be,q,H,ne)}}return Ee?(ne||(ne=new n),r(j,N,q,H,oe,ne)):!1}return GM=F,GM}var QM,SK;function LW(){if(SK)return QM;SK=1;var n=VAe(),e=ym();function t(r,i,s,a,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,a,t,o)}return QM=t,QM}var qM,EK;function HAe(){if(EK)return qM;EK=1;var n=F3(),e=LW(),t=1,r=2;function i(s,a,o,f){var y=o.length,x=y,B=!f;if(s==null)return!x;for(s=Object(s);y--;){var O=o[y];if(B&&O[2]?O[1]!==s[O[0]]:!(O[0]in s))return!1}for(;++y<x;){O=o[y];var T=O[0],F=s[T],j=O[1];if(B&&O[2]){if(F===void 0&&!(T in s))return!1}else{var N=new n;if(f)var q=f(F,j,T,s,a,N);if(!(q===void 0?e(j,F,t|r,f,N):q))return!1}}return!0}return qM=i,qM}var YM,BK;function UW(){if(BK)return YM;BK=1;var n=Jf();function e(t){return t===t&&!n(t)}return YM=e,YM}var $M,OK;function ZAe(){if(OK)return $M;OK=1;var n=UW(),e=k_();function t(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,n(o)]}return i}return $M=t,$M}var VM,IK;function zW(){if(IK)return VM;IK=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return VM=n,VM}var HM,kK;function XAe(){if(kK)return HM;kK=1;var n=HAe(),e=ZAe(),t=zW();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(a){return a===i||n(a,i,s)}}return HM=r,HM}var ZM,TK;function U3(){if(TK)return ZM;TK=1;var n=a1(),e=ym(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return ZM=r,ZM}var XM,PK;function A7(){if(PK)return XM;PK=1;var n=Af(),e=U3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||a!=null&&s in Object(a)}return XM=i,XM}var JM,KK;function JAe(){if(KK)return JM;KK=1;var n=l7(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],f=s.cache;if(f.has(o))return f.get(o);var y=r.apply(this,a);return s.cache=f.set(o,y)||f,y};return s.cache=new(t.Cache||n),s}return t.Cache=n,JM=t,JM}var eS,DK;function ece(){if(DK)return eS;DK=1;var n=JAe(),e=500;function t(r){var i=n(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return eS=t,eS}var tS,RK;function tce(){if(RK)return tS;RK=1;var n=ece(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,f,y){s.push(f?y.replace(t,"$1"):o||a)}),s});return tS=r,tS}var nS,FK;function nce(){if(FK)return nS;FK=1;var n=I_(),e=IW(),t=Af(),r=U3(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(t(o))return e(o,a)+"";if(r(o))return s?s.call(o):"";var f=o+"";return f=="0"&&1/o==-1/0?"-0":f}return nS=a,nS}var rS,LK;function rce(){if(LK)return rS;LK=1;var n=nce();function e(t){return t==null?"":n(t)}return rS=e,rS}var iS,UK;function jW(){if(UK)return iS;UK=1;var n=Af(),e=A7(),t=tce(),r=rce();function i(s,a){return n(s)?s:e(s,a)?[s]:t(r(s))}return iS=i,iS}var oS,zK;function z3(){if(zK)return oS;zK=1;var n=U3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return oS=e,oS}var sS,jK;function NW(){if(jK)return sS;jK=1;var n=jW(),e=z3();function t(r,i){i=n(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return sS=t,sS}var aS,NK;function ice(){if(NK)return aS;NK=1;var n=NW();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return aS=e,aS}var lS,WK;function oce(){if(WK)return lS;WK=1;function n(e,t){return e!=null&&t in Object(e)}return lS=n,lS}var uS,GK;function sce(){if(GK)return uS;GK=1;var n=jW(),e=ZO(),t=Af(),r=XO(),i=JO(),s=z3();function a(o,f,y){f=n(f,o);for(var x=-1,B=f.length,O=!1;++x<B;){var T=s(f[x]);if(!(O=o!=null&&y(o,T)))break;o=o[T]}return O||++x!=B?O:(B=o==null?0:o.length,!!B&&i(B)&&r(T,B)&&(t(o)||e(o)))}return uS=a,uS}var AS,QK;function ace(){if(QK)return AS;QK=1;var n=oce(),e=sce();function t(r,i){return r!=null&&e(r,i,n)}return AS=t,AS}var cS,qK;function lce(){if(qK)return cS;qK=1;var n=LW(),e=ice(),t=ace(),r=A7(),i=UW(),s=zW(),a=z3(),o=1,f=2;function y(x,B){return r(x)&&i(B)?s(a(x),B):function(O){var T=e(O,x);return T===void 0&&T===B?t(O,x):n(B,T,o|f)}}return cS=y,cS}var dS,YK;function uce(){if(YK)return dS;YK=1;function n(e){return function(t){return t==null?void 0:t[e]}}return dS=n,dS}var hS,$K;function Ace(){if($K)return hS;$K=1;var n=NW();function e(t){return function(r){return n(r,t)}}return hS=e,hS}var fS,VK;function cce(){if(VK)return fS;VK=1;var n=uce(),e=Ace(),t=A7(),r=z3();function i(s){return t(s)?n(r(s)):e(s)}return fS=i,fS}var pS,HK;function dce(){if(HK)return pS;HK=1;var n=XAe(),e=lce(),t=T3(),r=Af(),i=cce();function s(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?r(a)?e(a[0],a[1]):n(a):i(a)}return pS=s,pS}var mS,ZK;function hce(){if(ZK)return mS;ZK=1;var n=fv();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var a=i.length,o=r?a:-1,f=Object(i);(r?o--:++o<a)&&s(f[o],o,f)!==!1;);return i}}return mS=e,mS}var gS,XK;function WW(){if(XK)return gS;XK=1;var n=EW(),e=hce(),t=e(n);return gS=t,gS}var yS,JK;function fce(){if(JK)return yS;JK=1;var n=WW(),e=fv();function t(r,i){var s=-1,a=e(r)?Array(r.length):[];return n(r,function(o,f,y){a[++s]=i(o,f,y)}),a}return yS=t,yS}var vS,eD;function pce(){if(eD)return vS;eD=1;var n=IW(),e=dce(),t=fce(),r=Af();function i(s,a){var o=r(s)?n:t;return o(s,e(a,3))}return vS=i,vS}var tD;function mce(){if(tD)return j1;tD=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.flattenNames=void 0;var n=tAe(),e=f(n),t=o7(),r=f(t),i=OW(),s=f(i),a=pce(),o=f(a);function f(x){return x&&x.__esModule?x:{default:x}}var y=j1.flattenNames=function x(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=[];return(0,o.default)(B,function(T){Array.isArray(T)?x(T).map(function(F){return O.push(F)}):(0,s.default)(T)?(0,r.default)(T,function(F,j){F===!0&&O.push(j),O.push(j+"-"+F)}):(0,e.default)(T)&&O.push(T)}),O};return j1.default=y,j1}var N1={},CS,nD;function GW(){if(nD)return CS;nD=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return CS=n,CS}var _S,rD;function QW(){if(rD)return _S;rD=1;var n=l1(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return _S=e,_S}var bS,iD;function c7(){if(iD)return bS;iD=1;var n=QW();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return bS=e,bS}var xS,oD;function qW(){if(oD)return xS;oD=1;var n=c7(),e=T_(),t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o){var f=s[a];(!(r.call(s,a)&&e(f,o))||o===void 0&&!(a in s))&&n(s,a,o)}return xS=i,xS}var wS,sD;function P_(){if(sD)return wS;sD=1;var n=qW(),e=c7();function t(r,i,s,a){var o=!s;s||(s={});for(var f=-1,y=i.length;++f<y;){var x=i[f],B=a?a(s[x],r[x],x,s,r):void 0;B===void 0&&(B=r[x]),o?e(s,x,B):n(s,x,B)}return s}return wS=t,wS}var MS,aD;function gce(){if(aD)return MS;aD=1;var n=P_(),e=k_();function t(r,i){return r&&n(i,e(i),r)}return MS=t,MS}var SS,lD;function yce(){if(lD)return SS;lD=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return SS=n,SS}var ES,uD;function vce(){if(uD)return ES;uD=1;var n=Jf(),e=r7(),t=yce(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!n(a))return t(a);var o=e(a),f=[];for(var y in a)y=="constructor"&&(o||!i.call(a,y))||f.push(y);return f}return ES=s,ES}var BS,AD;function K_(){if(AD)return BS;AD=1;var n=MW(),e=vce(),t=fv();function r(i){return t(i)?n(i,!0):e(i)}return BS=r,BS}var OS,cD;function Cce(){if(cD)return OS;cD=1;var n=P_(),e=K_();function t(r,i){return r&&n(i,e(i),r)}return OS=t,OS}var sC={exports:{}};sC.exports;var dD;function YW(){return dD||(dD=1,function(n,e){var t=Tp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function f(y,x){if(x)return y.slice();var B=y.length,O=o?o(B):new y.constructor(B);return y.copy(O),O}n.exports=f}(sC,sC.exports)),sC.exports}var IS,hD;function $W(){if(hD)return IS;hD=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return IS=n,IS}var kS,fD;function _ce(){if(fD)return kS;fD=1;var n=P_(),e=u7();function t(r,i){return n(r,e(r),i)}return kS=t,kS}var TS,pD;function VW(){if(pD)return TS;pD=1;var n=KW(),e=s7(),t=u7(),r=RW(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)n(o,t(a)),a=e(a);return o}:r;return TS=s,TS}var PS,mD;function bce(){if(mD)return PS;mD=1;var n=P_(),e=VW();function t(r,i){return n(r,e(r),i)}return PS=t,PS}var KS,gD;function xce(){if(gD)return KS;gD=1;var n=DW(),e=VW(),t=K_();function r(i){return n(i,t,e)}return KS=r,KS}var DS,yD;function wce(){if(yD)return DS;yD=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return DS=t,DS}var RS,vD;function d7(){if(vD)return RS;vD=1;var n=PW();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return RS=e,RS}var FS,CD;function Mce(){if(CD)return FS;CD=1;var n=d7();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return FS=e,FS}var LS,_D;function Sce(){if(_D)return LS;_D=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return LS=e,LS}var US,bD;function Ece(){if(bD)return US;bD=1;var n=I_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return US=r,US}var zS,xD;function HW(){if(xD)return zS;xD=1;var n=d7();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return zS=e,zS}var jS,wD;function Bce(){if(wD)return jS;wD=1;var n=d7(),e=Mce(),t=Sce(),r=Ece(),i=HW(),s="[object Boolean]",a="[object Date]",o="[object Map]",f="[object Number]",y="[object RegExp]",x="[object Set]",B="[object String]",O="[object Symbol]",T="[object ArrayBuffer]",F="[object DataView]",j="[object Float32Array]",N="[object Float64Array]",q="[object Int8Array]",H="[object Int16Array]",oe="[object Int32Array]",ne="[object Uint8Array]",$="[object Uint8ClampedArray]",te="[object Uint16Array]",G="[object Uint32Array]";function ie(he,pe,Ee){var me=he.constructor;switch(pe){case T:return n(he);case s:case a:return new me(+he);case F:return e(he,Ee);case j:case N:case q:case H:case oe:case ne:case $:case te:case G:return i(he,Ee);case o:return new me;case f:case B:return new me(he);case y:return t(he);case x:return new me;case O:return r(he)}}return jS=ie,jS}var NS,MD;function Oce(){if(MD)return NS;MD=1;var n=Jf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return NS=t,NS}var WS,SD;function ZW(){if(SD)return WS;SD=1;var n=Oce(),e=s7(),t=r7();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return WS=r,WS}var GS,ED;function Ice(){if(ED)return GS;ED=1;var n=L3(),e=ym(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return GS=r,GS}var QS,BD;function kce(){if(BD)return QS;BD=1;var n=Ice(),e=e7(),t=t7(),r=t&&t.isMap,i=r?e(r):n;return QS=i,QS}var qS,OD;function Tce(){if(OD)return qS;OD=1;var n=L3(),e=ym(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return qS=r,qS}var YS,ID;function Pce(){if(ID)return YS;ID=1;var n=Tce(),e=e7(),t=t7(),r=t&&t.isSet,i=r?e(r):n;return YS=i,YS}var $S,kD;function Kce(){if(kD)return $S;kD=1;var n=F3(),e=GW(),t=qW(),r=gce(),i=Cce(),s=YW(),a=$W(),o=_ce(),f=bce(),y=FW(),x=xce(),B=L3(),O=wce(),T=Bce(),F=ZW(),j=Af(),N=k3(),q=kce(),H=Jf(),oe=Pce(),ne=k_(),$=K_(),te=1,G=2,ie=4,he="[object Arguments]",pe="[object Array]",Ee="[object Boolean]",me="[object Date]",Se="[object Error]",De="[object Function]",be="[object GeneratorFunction]",at="[object Map]",Ze="[object Number]",Je="[object Object]",We="[object RegExp]",Me="[object Set]",Fe="[object String]",He="[object Symbol]",bt="[object WeakMap]",Yt="[object ArrayBuffer]",gt="[object DataView]",Lt="[object Float32Array]",Kt="[object Float64Array]",Ue="[object Int8Array]",Pe="[object Int16Array]",Be="[object Int32Array]",it="[object Uint8Array]",_t="[object Uint8ClampedArray]",ft="[object Uint16Array]",Ut="[object Uint32Array]",rn={};rn[he]=rn[pe]=rn[Yt]=rn[gt]=rn[Ee]=rn[me]=rn[Lt]=rn[Kt]=rn[Ue]=rn[Pe]=rn[Be]=rn[at]=rn[Ze]=rn[Je]=rn[We]=rn[Me]=rn[Fe]=rn[He]=rn[it]=rn[_t]=rn[ft]=rn[Ut]=!0,rn[Se]=rn[De]=rn[bt]=!1;function Dt(_n,qn,tn,rr,Dn,pn){var Zn,dr=qn&te,vr=qn&G,Jn=qn&ie;if(tn&&(Zn=Dn?tn(_n,rr,Dn,pn):tn(_n)),Zn!==void 0)return Zn;if(!H(_n))return _n;var Qe=j(_n);if(Qe){if(Zn=O(_n),!dr)return a(_n,Zn)}else{var ce=B(_n),fe=ce==De||ce==be;if(N(_n))return s(_n,dr);if(ce==Je||ce==he||fe&&!Dn){if(Zn=vr||fe?{}:F(_n),!dr)return vr?f(_n,i(Zn,_n)):o(_n,r(Zn,_n))}else{if(!rn[ce])return Dn?_n:{};Zn=T(_n,ce,dr)}}pn||(pn=new n);var nt=pn.get(_n);if(nt)return nt;pn.set(_n,Zn),oe(_n)?_n.forEach(function(sn){Zn.add(Dt(sn,qn,tn,sn,_n,pn))}):q(_n)&&_n.forEach(function(sn,tr){Zn.set(tr,Dt(sn,qn,tn,tr,_n,pn))});var St=Jn?vr?x:y:vr?$:ne,Ht=Qe?void 0:St(_n);return e(Ht||_n,function(sn,tr){Ht&&(tr=sn,sn=_n[tr]),t(Zn,tr,Dt(sn,qn,tn,tr,_n,pn))}),Zn}return $S=Dt,$S}var VS,TD;function Dce(){if(TD)return VS;TD=1;var n=Kce(),e=1,t=4;function r(i){return n(i,e|t)}return VS=r,VS}var PD;function Rce(){if(PD)return N1;PD=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.mergeClasses=void 0;var n=o7(),e=s(n),t=Dce(),r=s(t),i=Object.assign||function(o){for(var f=1;f<arguments.length;f++){var y=arguments[f];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(o[x]=y[x])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var a=N1.mergeClasses=function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=f.default&&(0,r.default)(f.default)||{};return y.map(function(B){var O=f[B];return O&&(0,e.default)(O,function(T,F){x[F]||(x[F]={}),x[F]=i({},x[F],O[F])}),B}),x};return N1.default=a,N1}var W1={},KD;function Fce(){if(KD)return W1;KD=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.autoprefix=void 0;var n=o7(),e=r(n),t=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(a[y]=f[y])}return a};function r(a){return a&&a.__esModule?a:{default:a}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var f=o&&o.split(" ");return{position:"absolute",top:f&&f[0],right:f&&f[1],bottom:f&&f[2],left:f&&f[3]}},extend:function(o,f){var y=f[o];return y||{extend:o}}},s=W1.autoprefix=function(o){var f={};return(0,e.default)(o,function(y,x){var B={};(0,e.default)(y,function(O,T){var F=i[T];F?B=t({},B,F(O)):B[T]=O}),f[x]=B}),f};return W1.default=s,W1}var G1={},DD;function Lce(){if(DD)return G1;DD=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.hover=void 0;var n=Object.assign||function(f){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=ja(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function s(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function a(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}var o=G1.hover=function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){a(O,B);function O(){var T,F,j,N;i(this,O);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(F=(j=s(this,(T=O.__proto__||Object.getPrototypeOf(O)).call.apply(T,[this].concat(H))),j),j.state={hover:!1},j.handleMouseOver=function(){return j.setState({hover:!0})},j.handleMouseOut=function(){return j.setState({hover:!1})},j.render=function(){return t.default.createElement(x,{onMouseOver:j.handleMouseOver,onMouseOut:j.handleMouseOut},t.default.createElement(y,n({},j.props,j.state)))},F),s(j,N)}return O}(t.default.Component)};return G1.default=o,G1}var Q1={},RD;function Uce(){if(RD)return Q1;RD=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.active=void 0;var n=Object.assign||function(f){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=ja(),t=r(e);function r(f){return f&&f.__esModule?f:{default:f}}function i(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function s(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function a(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}var o=Q1.active=function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){a(O,B);function O(){var T,F,j,N;i(this,O);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(F=(j=s(this,(T=O.__proto__||Object.getPrototypeOf(O)).call.apply(T,[this].concat(H))),j),j.state={active:!1},j.handleMouseDown=function(){return j.setState({active:!0})},j.handleMouseUp=function(){return j.setState({active:!1})},j.render=function(){return t.default.createElement(x,{onMouseDown:j.handleMouseDown,onMouseUp:j.handleMouseUp},t.default.createElement(y,n({},j.props,j.state)))},F),s(j,N)}return O}(t.default.Component)};return Q1.default=o,Q1}var Wb={},FD;function zce(){if(FD)return Wb;FD=1,Object.defineProperty(Wb,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=f};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return Wb.default=n,Wb}var LD;function Pp(){if(LD)return fh;LD=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.ReactCSS=fh.loop=fh.handleActive=fh.handleHover=fh.hover=void 0;var n=mce(),e=O(n),t=Rce(),r=O(t),i=Fce(),s=O(i),a=Lce(),o=O(a),f=Uce(),y=O(f),x=zce(),B=O(x);function O(F){return F&&F.__esModule?F:{default:F}}fh.hover=o.default,fh.handleHover=o.default,fh.handleActive=y.default,fh.loop=B.default;var T=fh.ReactCSS=function(j){for(var N=arguments.length,q=Array(N>1?N-1:0),H=1;H<N;H++)q[H-1]=arguments[H];var oe=(0,e.default)(q),ne=(0,r.default)(j,oe);return(0,s.default)(ne)};return fh.default=T,fh}var HS,UD;function XW(){if(UD)return HS;UD=1;var n=c7(),e=T_();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return HS=t,HS}var ZS,zD;function jce(){if(zD)return ZS;zD=1;var n=fv(),e=ym();function t(r){return e(r)&&n(r)}return ZS=t,ZS}var XS,jD;function JW(){if(jD)return XS;jD=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return XS=n,XS}var JS,ND;function Nce(){if(ND)return JS;ND=1;var n=P_(),e=K_();function t(r){return n(r,e(r))}return JS=t,JS}var eE,WD;function Wce(){if(WD)return eE;WD=1;var n=XW(),e=YW(),t=HW(),r=$W(),i=ZW(),s=ZO(),a=Af(),o=jce(),f=k3(),y=i7(),x=Jf(),B=OW(),O=n7(),T=JW(),F=Nce();function j(N,q,H,oe,ne,$,te){var G=T(N,H),ie=T(q,H),he=te.get(ie);if(he){n(N,H,he);return}var pe=$?$(G,ie,H+"",N,q,te):void 0,Ee=pe===void 0;if(Ee){var me=a(ie),Se=!me&&f(ie),De=!me&&!Se&&O(ie);pe=ie,me||Se||De?a(G)?pe=G:o(G)?pe=r(G):Se?(Ee=!1,pe=e(ie,!0)):De?(Ee=!1,pe=t(ie,!0)):pe=[]:B(ie)||s(ie)?(pe=G,s(G)?pe=F(G):(!x(G)||y(G))&&(pe=i(ie))):Ee=!1}Ee&&(te.set(ie,pe),ne(pe,ie,oe,$,te),te.delete(ie)),n(N,H,pe)}return eE=j,eE}var tE,GD;function Gce(){if(GD)return tE;GD=1;var n=F3(),e=XW(),t=wW(),r=Wce(),i=Jf(),s=K_(),a=JW();function o(f,y,x,B,O){f!==y&&t(y,function(T,F){if(O||(O=new n),i(T))r(f,y,F,x,o,B,O);else{var j=B?B(a(f,F),T,F+"",f,y,O):void 0;j===void 0&&(j=T),e(f,F,j)}},s)}return tE=o,tE}var nE,QD;function Qce(){if(QD)return nE;QD=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return nE=n,nE}var rE,qD;function qce(){if(qD)return rE;qD=1;var n=Qce(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,f=e(a.length-i,0),y=Array(f);++o<f;)y[o]=a[i+o];o=-1;for(var x=Array(i+1);++o<i;)x[o]=a[o];return x[i]=s(y),n(r,this,x)}}return rE=t,rE}var iE,YD;function Yce(){if(YD)return iE;YD=1;function n(e){return function(){return e}}return iE=n,iE}var oE,$D;function $ce(){if($D)return oE;$D=1;var n=Yce(),e=QW(),t=T3(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return oE=r,oE}var sE,VD;function Vce(){if(VD)return sE;VD=1;var n=800,e=16,t=Date.now;function r(i){var s=0,a=0;return function(){var o=t(),f=e-(o-a);if(a=o,f>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return sE=r,sE}var aE,HD;function Hce(){if(HD)return aE;HD=1;var n=$ce(),e=Vce(),t=e(n);return aE=t,aE}var lE,ZD;function Zce(){if(ZD)return lE;ZD=1;var n=T3(),e=qce(),t=Hce();function r(i,s){return t(e(i,s,n),i+"")}return lE=r,lE}var uE,XD;function Xce(){if(XD)return uE;XD=1;var n=T_(),e=fv(),t=XO(),r=Jf();function i(s,a,o){if(!r(o))return!1;var f=typeof a;return(f=="number"?e(o)&&t(a,o.length):f=="string"&&a in o)?n(o[a],s):!1}return uE=i,uE}var AE,JD;function Jce(){if(JD)return AE;JD=1;var n=Zce(),e=Xce();function t(r){return n(function(i,s){var a=-1,o=s.length,f=o>1?s[o-1]:void 0,y=o>2?s[2]:void 0;for(f=r.length>3&&typeof f=="function"?(o--,f):void 0,y&&e(s[0],s[1],y)&&(f=o<3?void 0:f,o=1),i=Object(i);++a<o;){var x=s[a];x&&r(i,x,a,f)}return i})}return AE=t,AE}var cE,eR;function eG(){if(eR)return cE;eR=1;var n=Gce(),e=Jce(),t=e(function(r,i,s){n(r,i,s)});return cE=t,cE}var dE={},q1={},Gb={},tR;function ede(){return tR||(tR=1,Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.calculateChange=function(e,t,r,i,s){var a=s.clientWidth,o=s.clientHeight,f=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,y=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,x=f-(s.getBoundingClientRect().left+window.pageXOffset),B=y-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var O=void 0;if(B<0?O=0:B>o?O=1:O=Math.round(B*100/o)/100,t.a!==O)return{h:t.h,s:t.s,l:t.l,a:O,source:"rgb"}}else{var T=void 0;if(x<0?T=0:x>a?T=1:T=Math.round(x*100/a)/100,i!==T)return{h:t.h,s:t.s,l:t.l,a:T,source:"rgb"}}return null}),Gb}var Y1={},jv={},nR;function tde(){if(nR)return jv;nR=1,Object.defineProperty(jv,"__esModule",{value:!0});var n={},e=jv.render=function(r,i,s,a){if(typeof document>"u"&&!a)return null;var o=a?new a:document.createElement("canvas");o.width=s*2,o.height=s*2;var f=o.getContext("2d");return f?(f.fillStyle=r,f.fillRect(0,0,o.width,o.height),f.fillStyle=i,f.fillRect(0,0,s,s),f.translate(s,s),f.fillRect(0,0,s,s),o.toDataURL()):null};return jv.get=function(r,i,s,a){var o=r+"-"+i+"-"+s+(a?"-server":"");if(n[o])return n[o];var f=e(r,i,s,a);return n[o]=f,f},jv}var rR;function h7(){if(rR)return Y1;rR=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.Checkboard=void 0;var n=Object.assign||function(x){for(var B=1;B<arguments.length;B++){var O=arguments[B];for(var T in O)Object.prototype.hasOwnProperty.call(O,T)&&(x[T]=O[T])}return x},e=ja(),t=f(e),r=Pp(),i=f(r),s=tde(),a=o(s);function o(x){if(x&&x.__esModule)return x;var B={};if(x!=null)for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(B[O]=x[O]);return B.default=x,B}function f(x){return x&&x.__esModule?x:{default:x}}var y=Y1.Checkboard=function(B){var O=B.white,T=B.grey,F=B.size,j=B.renderers,N=B.borderRadius,q=B.boxShadow,H=B.children,oe=(0,i.default)({default:{grid:{borderRadius:N,boxShadow:q,absolute:"0px 0px 0px 0px",background:"url("+a.get(O,T,F,j.canvas)+") center left"}}});return(0,e.isValidElement)(H)?t.default.cloneElement(H,n({},H.props,{style:n({},H.props.style,oe.grid)})):t.default.createElement("div",{style:oe.grid})};return y.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},Y1.default=y,Y1}var iR;function nde(){if(iR)return q1;iR=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.Alpha=void 0;var n=Object.assign||function(N){for(var q=1;q<arguments.length;q++){var H=arguments[q];for(var oe in H)Object.prototype.hasOwnProperty.call(H,oe)&&(N[oe]=H[oe])}return N},e=function(){function N(q,H){for(var oe=0;oe<H.length;oe++){var ne=H[oe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(q,ne.key,ne)}}return function(q,H,oe){return H&&N(q.prototype,H),oe&&N(q,oe),q}}(),t=ja(),r=B(t),i=Pp(),s=B(i),a=ede(),o=x(a),f=h7(),y=B(f);function x(N){if(N&&N.__esModule)return N;var q={};if(N!=null)for(var H in N)Object.prototype.hasOwnProperty.call(N,H)&&(q[H]=N[H]);return q.default=N,q}function B(N){return N&&N.__esModule?N:{default:N}}function O(N,q){if(!(N instanceof q))throw new TypeError("Cannot call a class as a function")}function T(N,q){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:N}function F(N,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);N.prototype=Object.create(q&&q.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(N,q):N.__proto__=q)}var j=q1.Alpha=function(N){F(q,N);function q(){var H,oe,ne,$;O(this,q);for(var te=arguments.length,G=Array(te),ie=0;ie<te;ie++)G[ie]=arguments[ie];return $=(oe=(ne=T(this,(H=q.__proto__||Object.getPrototypeOf(q)).call.apply(H,[this].concat(G))),ne),ne.handleChange=function(he){var pe=o.calculateChange(he,ne.props.hsl,ne.props.direction,ne.props.a,ne.container);pe&&typeof ne.props.onChange=="function"&&ne.props.onChange(pe,he)},ne.handleMouseDown=function(he){ne.handleChange(he),window.addEventListener("mousemove",ne.handleChange),window.addEventListener("mouseup",ne.handleMouseUp)},ne.handleMouseUp=function(){ne.unbindEventListeners()},ne.unbindEventListeners=function(){window.removeEventListener("mousemove",ne.handleChange),window.removeEventListener("mouseup",ne.handleMouseUp)},oe),T(ne,$)}return e(q,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var oe=this,ne=this.props.rgb,$=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:ne.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+ne.r+","+ne.g+","+ne.b+`, 0) 0%,
           rgba(`+ne.r+","+ne.g+","+ne.b+", 1) 100%)"},pointer:{left:0,top:ne.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:$.alpha},r.default.createElement("div",{style:$.checkboard},r.default.createElement(y.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:$.gradient}),r.default.createElement("div",{style:$.container,ref:function(G){return oe.container=G},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:$.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:$.slider}))))}}]),q}(t.PureComponent||t.Component);return q1.default=j,q1}var $1={},oR;function rde(){if(oR)return $1;oR=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.EditableInput=void 0;var n=function(){function H(oe,ne){for(var $=0;$<ne.length;$++){var te=ne[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}return function(oe,ne,$){return ne&&H(oe.prototype,ne),$&&H(oe,$),oe}}(),e=ja(),t=s(e),r=Pp(),i=s(r);function s(H){return H&&H.__esModule?H:{default:H}}function a(H,oe,ne){return oe in H?Object.defineProperty(H,oe,{value:ne,enumerable:!0,configurable:!0,writable:!0}):H[oe]=ne,H}function o(H,oe){if(!(H instanceof oe))throw new TypeError("Cannot call a class as a function")}function f(H,oe){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:H}function y(H,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);H.prototype=Object.create(oe&&oe.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(H,oe):H.__proto__=oe)}var x=1,B=38,O=40,T=[B,O],F=function(oe){return T.indexOf(oe)>-1},j=function(oe){return Number(String(oe).replace(/%/g,""))},N=1,q=$1.EditableInput=function(H){y(oe,H);function oe(ne){o(this,oe);var $=f(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return $.handleBlur=function(){$.state.blurValue&&$.setState({value:$.state.blurValue,blurValue:null})},$.handleChange=function(te){$.setUpdatedValue(te.target.value,te)},$.handleKeyDown=function(te){var G=j(te.target.value);if(!isNaN(G)&&F(te.keyCode)){var ie=$.getArrowOffset(),he=te.keyCode===B?G+ie:G-ie;$.setUpdatedValue(he,te)}},$.handleDrag=function(te){if($.props.dragLabel){var G=Math.round($.props.value+te.movementX);G>=0&&G<=$.props.dragMax&&$.props.onChange&&$.props.onChange($.getValueObjectWithLabel(G),te)}},$.handleMouseDown=function(te){$.props.dragLabel&&(te.preventDefault(),$.handleDrag(te),window.addEventListener("mousemove",$.handleDrag),window.addEventListener("mouseup",$.handleMouseUp))},$.handleMouseUp=function(){$.unbindEventListeners()},$.unbindEventListeners=function(){window.removeEventListener("mousemove",$.handleDrag),window.removeEventListener("mouseup",$.handleMouseUp)},$.state={value:String(ne.value).toUpperCase(),blurValue:String(ne.value).toUpperCase()},$.inputId="rc-editable-input-"+N++,$}return n(oe,[{key:"componentDidUpdate",value:function($,te){this.props.value!==this.state.value&&($.value!==this.props.value||te.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function($){return a({},this.props.label,$)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||x}},{key:"setUpdatedValue",value:function($,te){var G=this.props.label?this.getValueObjectWithLabel($):$;this.props.onChange&&this.props.onChange(G,te),this.setState({value:$})}},{key:"render",value:function(){var $=this,te=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:te.wrap},t.default.createElement("input",{id:this.inputId,style:te.input,ref:function(ie){return $.input=ie},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:te.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),oe}(e.PureComponent||e.Component);return $1.default=q,$1}var V1={},Qb={},sR;function ide(){return sR||(sR=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.calculateChange=function(e,t,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,y=o-(i.getBoundingClientRect().left+window.pageXOffset),x=f-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var B=void 0;if(x<0)B=359;else if(x>a)B=0;else{var O=-(x*100/a)+100;B=360*O/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var T=void 0;if(y<0)T=0;else if(y>s)T=359;else{var F=y*100/s;T=360*F/100}if(r.h!==T)return{h:T,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),Qb}var aR;function ode(){if(aR)return V1;aR=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.Hue=void 0;var n=function(){function T(F,j){for(var N=0;N<j.length;N++){var q=j[N];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(F,q.key,q)}}return function(F,j,N){return j&&T(F.prototype,j),N&&T(F,N),F}}(),e=ja(),t=f(e),r=Pp(),i=f(r),s=ide(),a=o(s);function o(T){if(T&&T.__esModule)return T;var F={};if(T!=null)for(var j in T)Object.prototype.hasOwnProperty.call(T,j)&&(F[j]=T[j]);return F.default=T,F}function f(T){return T&&T.__esModule?T:{default:T}}function y(T,F){if(!(T instanceof F))throw new TypeError("Cannot call a class as a function")}function x(T,F){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:T}function B(T,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);T.prototype=Object.create(F&&F.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(T,F):T.__proto__=F)}var O=V1.Hue=function(T){B(F,T);function F(){var j,N,q,H;y(this,F);for(var oe=arguments.length,ne=Array(oe),$=0;$<oe;$++)ne[$]=arguments[$];return H=(N=(q=x(this,(j=F.__proto__||Object.getPrototypeOf(F)).call.apply(j,[this].concat(ne))),q),q.handleChange=function(te){var G=a.calculateChange(te,q.props.direction,q.props.hsl,q.container);G&&typeof q.props.onChange=="function"&&q.props.onChange(G,te)},q.handleMouseDown=function(te){q.handleChange(te),window.addEventListener("mousemove",q.handleChange),window.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},N),x(q,H)}return n(F,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var N=this,q=this.props.direction,H=q===void 0?"horizontal":q,oe=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:H==="vertical"});return t.default.createElement("div",{style:oe.hue},t.default.createElement("div",{className:"hue-"+H,style:oe.container,ref:function($){return N.container=$},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:oe.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:oe.slider}))))}}]),F}(e.PureComponent||e.Component);return V1.default=O,V1}var H1={},lR;function sde(){if(lR)return H1;lR=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.Raised=void 0;var n=ja(),e=f(n),t=Op(),r=f(t),i=Pp(),s=f(i),a=eG(),o=f(a);function f(x){return x&&x.__esModule?x:{default:x}}var y=H1.Raised=function(B){var O=B.zDepth,T=B.radius,F=B.background,j=B.children,N=B.styles,q=N===void 0?{}:N,H=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+O+"px "+O*4+"px rgba(0,0,0,.24)",borderRadius:T,background:F}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},q),{"zDepth-1":O===1});return e.default.createElement("div",{style:H.wrap},e.default.createElement("div",{style:H.bg}),e.default.createElement("div",{style:H.content},j))};return y.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},y.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},H1.default=y,H1}var Z1={},hE,uR;function ade(){if(uR)return hE;uR=1;var n=Tp(),e=function(){return n.Date.now()};return hE=e,hE}var fE,AR;function lde(){if(AR)return fE;AR=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return fE=e,fE}var pE,cR;function ude(){if(cR)return pE;cR=1;var n=lde(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return pE=t,pE}var mE,dR;function Ade(){if(dR)return mE;dR=1;var n=ude(),e=Jf(),t=U3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function f(y){if(typeof y=="number")return y;if(t(y))return r;if(e(y)){var x=typeof y.valueOf=="function"?y.valueOf():y;y=e(x)?x+"":x}if(typeof y!="string")return y===0?y:+y;y=n(y);var B=s.test(y);return B||a.test(y)?o(y.slice(2),B?2:8):i.test(y)?r:+y}return mE=f,mE}var gE,hR;function tG(){if(hR)return gE;hR=1;var n=Jf(),e=ade(),t=Ade(),r="Expected a function",i=Math.max,s=Math.min;function a(o,f,y){var x,B,O,T,F,j,N=0,q=!1,H=!1,oe=!0;if(typeof o!="function")throw new TypeError(r);f=t(f)||0,n(y)&&(q=!!y.leading,H="maxWait"in y,O=H?i(t(y.maxWait)||0,f):O,oe="trailing"in y?!!y.trailing:oe);function ne(Se){var De=x,be=B;return x=B=void 0,N=Se,T=o.apply(be,De),T}function $(Se){return N=Se,F=setTimeout(ie,f),q?ne(Se):T}function te(Se){var De=Se-j,be=Se-N,at=f-De;return H?s(at,O-be):at}function G(Se){var De=Se-j,be=Se-N;return j===void 0||De>=f||De<0||H&&be>=O}function ie(){var Se=e();if(G(Se))return he(Se);F=setTimeout(ie,te(Se))}function he(Se){return F=void 0,oe&&x?ne(Se):(x=B=void 0,T)}function pe(){F!==void 0&&clearTimeout(F),N=0,x=j=B=F=void 0}function Ee(){return F===void 0?T:he(e())}function me(){var Se=e(),De=G(Se);if(x=arguments,B=this,j=Se,De){if(F===void 0)return $(j);if(H)return clearTimeout(F),F=setTimeout(ie,f),ne(j)}return F===void 0&&(F=setTimeout(ie,f)),T}return me.cancel=pe,me.flush=Ee,me}return gE=a,gE}var yE,fR;function cde(){if(fR)return yE;fR=1;var n=tG(),e=Jf(),t="Expected a function";function r(i,s,a){var o=!0,f=!0;if(typeof i!="function")throw new TypeError(t);return e(a)&&(o="leading"in a?!!a.leading:o,f="trailing"in a?!!a.trailing:f),n(i,s,{leading:o,maxWait:s,trailing:f})}return yE=r,yE}var qb={},pR;function dde(){return pR||(pR=1,Object.defineProperty(qb,"__esModule",{value:!0}),qb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,y=o-(r.getBoundingClientRect().left+window.pageXOffset),x=f-(r.getBoundingClientRect().top+window.pageYOffset);y<0?y=0:y>s&&(y=s),x<0?x=0:x>a&&(x=a);var B=y/s,O=1-x/a;return{h:t.h,s:B,v:O,a:t.a,source:"hsv"}}),qb}var mR;function hde(){if(mR)return Z1;mR=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.Saturation=void 0;var n=function(){function j(N,q){for(var H=0;H<q.length;H++){var oe=q[H];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(N,oe.key,oe)}}return function(N,q,H){return q&&j(N.prototype,q),H&&j(N,H),N}}(),e=ja(),t=x(e),r=Pp(),i=x(r),s=cde(),a=x(s),o=dde(),f=y(o);function y(j){if(j&&j.__esModule)return j;var N={};if(j!=null)for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(N[q]=j[q]);return N.default=j,N}function x(j){return j&&j.__esModule?j:{default:j}}function B(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function O(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function T(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var F=Z1.Saturation=function(j){T(N,j);function N(q){B(this,N);var H=O(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,q));return H.handleChange=function(oe){typeof H.props.onChange=="function"&&H.throttle(H.props.onChange,f.calculateChange(oe,H.props.hsl,H.container),oe)},H.handleMouseDown=function(oe){H.handleChange(oe);var ne=H.getContainerRenderWindow();ne.addEventListener("mousemove",H.handleChange),ne.addEventListener("mouseup",H.handleMouseUp)},H.handleMouseUp=function(){H.unbindEventListeners()},H.throttle=(0,a.default)(function(oe,ne,$){oe(ne,$)},50),H}return n(N,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var H=this.container,oe=window;!oe.document.contains(H)&&oe.parent!==oe;)oe=oe.parent;return oe}},{key:"unbindEventListeners",value:function(){var H=this.getContainerRenderWindow();H.removeEventListener("mousemove",this.handleChange),H.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var H=this,oe=this.props.style||{},ne=oe.color,$=oe.white,te=oe.black,G=oe.pointer,ie=oe.circle,he=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:ne,white:$,black:te,pointer:G,circle:ie}},{custom:!!this.props.style});return t.default.createElement("div",{style:he.color,ref:function(Ee){return H.container=Ee},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:he.white,className:"saturation-white"},t.default.createElement("div",{style:he.black,className:"saturation-black"}),t.default.createElement("div",{style:he.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:he.circle}))))}}]),N}(e.PureComponent||e.Component);return Z1.default=F,Z1}var X1={},Gd={},vE,gR;function fde(){if(gR)return vE;gR=1;var n=GW(),e=WW(),t=BW(),r=Af();function i(s,a){var o=r(s)?n:e;return o(s,t(a))}return vE=i,vE}var CE,yR;function pde(){return yR||(yR=1,CE=fde()),CE}var d2={exports:{}},mde=d2.exports,vR;function gde(){return vR||(vR=1,function(n,e){(function(t,r){n.exports=r()})(mde,function(){function t(Ue){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},t(Ue)}var r=/^\s+/,i=/\s+$/;function s(Ue,Pe){if(Ue=Ue||"",Pe=Pe||{},Ue instanceof s)return Ue;if(!(this instanceof s))return new s(Ue,Pe);var Be=a(Ue);this._originalInput=Ue,this._r=Be.r,this._g=Be.g,this._b=Be.b,this._a=Be.a,this._roundA=Math.round(100*this._a)/100,this._format=Pe.format||Be.format,this._gradientType=Pe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Be.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Pe=this.toRgb();return(Pe.r*299+Pe.g*587+Pe.b*114)/1e3},getLuminance:function(){var Pe=this.toRgb(),Be,it,_t,ft,Ut,rn;return Be=Pe.r/255,it=Pe.g/255,_t=Pe.b/255,Be<=.03928?ft=Be/12.92:ft=Math.pow((Be+.055)/1.055,2.4),it<=.03928?Ut=it/12.92:Ut=Math.pow((it+.055)/1.055,2.4),_t<=.03928?rn=_t/12.92:rn=Math.pow((_t+.055)/1.055,2.4),.2126*ft+.7152*Ut+.0722*rn},setAlpha:function(Pe){return this._a=De(Pe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Pe=x(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,v:Pe.v,a:this._a}},toHsvString:function(){var Pe=x(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),_t=Math.round(Pe.v*100);return this._a==1?"hsv("+Be+", "+it+"%, "+_t+"%)":"hsva("+Be+", "+it+"%, "+_t+"%, "+this._roundA+")"},toHsl:function(){var Pe=f(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,l:Pe.l,a:this._a}},toHslString:function(){var Pe=f(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),_t=Math.round(Pe.l*100);return this._a==1?"hsl("+Be+", "+it+"%, "+_t+"%)":"hsla("+Be+", "+it+"%, "+_t+"%, "+this._roundA+")"},toHex:function(Pe){return O(this._r,this._g,this._b,Pe)},toHexString:function(Pe){return"#"+this.toHex(Pe)},toHex8:function(Pe){return T(this._r,this._g,this._b,this._a,Pe)},toHex8String:function(Pe){return"#"+this.toHex8(Pe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(be(this._r,255)*100)+"%",g:Math.round(be(this._g,255)*100)+"%",b:Math.round(be(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%)":"rgba("+Math.round(be(this._r,255)*100)+"%, "+Math.round(be(this._g,255)*100)+"%, "+Math.round(be(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:me[O(this._r,this._g,this._b,!0)]||!1},toFilter:function(Pe){var Be="#"+F(this._r,this._g,this._b,this._a),it=Be,_t=this._gradientType?"GradientType = 1, ":"";if(Pe){var ft=s(Pe);it="#"+F(ft._r,ft._g,ft._b,ft._a)}return"progid:DXImageTransform.Microsoft.gradient("+_t+"startColorstr="+Be+",endColorstr="+it+")"},toString:function(Pe){var Be=!!Pe;Pe=Pe||this._format;var it=!1,_t=this._a<1&&this._a>=0,ft=!Be&&_t&&(Pe==="hex"||Pe==="hex6"||Pe==="hex3"||Pe==="hex4"||Pe==="hex8"||Pe==="name");return ft?Pe==="name"&&this._a===0?this.toName():this.toRgbString():(Pe==="rgb"&&(it=this.toRgbString()),Pe==="prgb"&&(it=this.toPercentageRgbString()),(Pe==="hex"||Pe==="hex6")&&(it=this.toHexString()),Pe==="hex3"&&(it=this.toHexString(!0)),Pe==="hex4"&&(it=this.toHex8String(!0)),Pe==="hex8"&&(it=this.toHex8String()),Pe==="name"&&(it=this.toName()),Pe==="hsl"&&(it=this.toHslString()),Pe==="hsv"&&(it=this.toHsvString()),it||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Pe,Be){var it=Pe.apply(null,[this].concat([].slice.call(Be)));return this._r=it._r,this._g=it._g,this._b=it._b,this.setAlpha(it._a),this},lighten:function(){return this._applyModification(H,arguments)},brighten:function(){return this._applyModification(oe,arguments)},darken:function(){return this._applyModification(ne,arguments)},desaturate:function(){return this._applyModification(j,arguments)},saturate:function(){return this._applyModification(N,arguments)},greyscale:function(){return this._applyModification(q,arguments)},spin:function(){return this._applyModification($,arguments)},_applyCombination:function(Pe,Be){return Pe.apply(null,[this].concat([].slice.call(Be)))},analogous:function(){return this._applyCombination(he,arguments)},complement:function(){return this._applyCombination(te,arguments)},monochromatic:function(){return this._applyCombination(pe,arguments)},splitcomplement:function(){return this._applyCombination(ie,arguments)},triad:function(){return this._applyCombination(G,[3])},tetrad:function(){return this._applyCombination(G,[4])}},s.fromRatio=function(Ue,Pe){if(t(Ue)=="object"){var Be={};for(var it in Ue)Ue.hasOwnProperty(it)&&(it==="a"?Be[it]=Ue[it]:Be[it]=Fe(Ue[it]));Ue=Be}return s(Ue,Pe)};function a(Ue){var Pe={r:0,g:0,b:0},Be=1,it=null,_t=null,ft=null,Ut=!1,rn=!1;return typeof Ue=="string"&&(Ue=Lt(Ue)),t(Ue)=="object"&&(gt(Ue.r)&&gt(Ue.g)&&gt(Ue.b)?(Pe=o(Ue.r,Ue.g,Ue.b),Ut=!0,rn=String(Ue.r).substr(-1)==="%"?"prgb":"rgb"):gt(Ue.h)&&gt(Ue.s)&&gt(Ue.v)?(it=Fe(Ue.s),_t=Fe(Ue.v),Pe=B(Ue.h,it,_t),Ut=!0,rn="hsv"):gt(Ue.h)&&gt(Ue.s)&&gt(Ue.l)&&(it=Fe(Ue.s),ft=Fe(Ue.l),Pe=y(Ue.h,it,ft),Ut=!0,rn="hsl"),Ue.hasOwnProperty("a")&&(Be=Ue.a)),Be=De(Be),{ok:Ut,format:Ue.format||rn,r:Math.min(255,Math.max(Pe.r,0)),g:Math.min(255,Math.max(Pe.g,0)),b:Math.min(255,Math.max(Pe.b,0)),a:Be}}function o(Ue,Pe,Be){return{r:be(Ue,255)*255,g:be(Pe,255)*255,b:be(Be,255)*255}}function f(Ue,Pe,Be){Ue=be(Ue,255),Pe=be(Pe,255),Be=be(Be,255);var it=Math.max(Ue,Pe,Be),_t=Math.min(Ue,Pe,Be),ft,Ut,rn=(it+_t)/2;if(it==_t)ft=Ut=0;else{var Dt=it-_t;switch(Ut=rn>.5?Dt/(2-it-_t):Dt/(it+_t),it){case Ue:ft=(Pe-Be)/Dt+(Pe<Be?6:0);break;case Pe:ft=(Be-Ue)/Dt+2;break;case Be:ft=(Ue-Pe)/Dt+4;break}ft/=6}return{h:ft,s:Ut,l:rn}}function y(Ue,Pe,Be){var it,_t,ft;Ue=be(Ue,360),Pe=be(Pe,100),Be=be(Be,100);function Ut(_n,qn,tn){return tn<0&&(tn+=1),tn>1&&(tn-=1),tn<1/6?_n+(qn-_n)*6*tn:tn<1/2?qn:tn<2/3?_n+(qn-_n)*(2/3-tn)*6:_n}if(Pe===0)it=_t=ft=Be;else{var rn=Be<.5?Be*(1+Pe):Be+Pe-Be*Pe,Dt=2*Be-rn;it=Ut(Dt,rn,Ue+1/3),_t=Ut(Dt,rn,Ue),ft=Ut(Dt,rn,Ue-1/3)}return{r:it*255,g:_t*255,b:ft*255}}function x(Ue,Pe,Be){Ue=be(Ue,255),Pe=be(Pe,255),Be=be(Be,255);var it=Math.max(Ue,Pe,Be),_t=Math.min(Ue,Pe,Be),ft,Ut,rn=it,Dt=it-_t;if(Ut=it===0?0:Dt/it,it==_t)ft=0;else{switch(it){case Ue:ft=(Pe-Be)/Dt+(Pe<Be?6:0);break;case Pe:ft=(Be-Ue)/Dt+2;break;case Be:ft=(Ue-Pe)/Dt+4;break}ft/=6}return{h:ft,s:Ut,v:rn}}function B(Ue,Pe,Be){Ue=be(Ue,360)*6,Pe=be(Pe,100),Be=be(Be,100);var it=Math.floor(Ue),_t=Ue-it,ft=Be*(1-Pe),Ut=Be*(1-_t*Pe),rn=Be*(1-(1-_t)*Pe),Dt=it%6,_n=[Be,Ut,ft,ft,rn,Be][Dt],qn=[rn,Be,Be,Ut,ft,ft][Dt],tn=[ft,ft,rn,Be,Be,Ut][Dt];return{r:_n*255,g:qn*255,b:tn*255}}function O(Ue,Pe,Be,it){var _t=[Me(Math.round(Ue).toString(16)),Me(Math.round(Pe).toString(16)),Me(Math.round(Be).toString(16))];return it&&_t[0].charAt(0)==_t[0].charAt(1)&&_t[1].charAt(0)==_t[1].charAt(1)&&_t[2].charAt(0)==_t[2].charAt(1)?_t[0].charAt(0)+_t[1].charAt(0)+_t[2].charAt(0):_t.join("")}function T(Ue,Pe,Be,it,_t){var ft=[Me(Math.round(Ue).toString(16)),Me(Math.round(Pe).toString(16)),Me(Math.round(Be).toString(16)),Me(He(it))];return _t&&ft[0].charAt(0)==ft[0].charAt(1)&&ft[1].charAt(0)==ft[1].charAt(1)&&ft[2].charAt(0)==ft[2].charAt(1)&&ft[3].charAt(0)==ft[3].charAt(1)?ft[0].charAt(0)+ft[1].charAt(0)+ft[2].charAt(0)+ft[3].charAt(0):ft.join("")}function F(Ue,Pe,Be,it){var _t=[Me(He(it)),Me(Math.round(Ue).toString(16)),Me(Math.round(Pe).toString(16)),Me(Math.round(Be).toString(16))];return _t.join("")}s.equals=function(Ue,Pe){return!Ue||!Pe?!1:s(Ue).toRgbString()==s(Pe).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function j(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.s-=Pe/100,Be.s=at(Be.s),s(Be)}function N(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.s+=Pe/100,Be.s=at(Be.s),s(Be)}function q(Ue){return s(Ue).desaturate(100)}function H(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.l+=Pe/100,Be.l=at(Be.l),s(Be)}function oe(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toRgb();return Be.r=Math.max(0,Math.min(255,Be.r-Math.round(255*-(Pe/100)))),Be.g=Math.max(0,Math.min(255,Be.g-Math.round(255*-(Pe/100)))),Be.b=Math.max(0,Math.min(255,Be.b-Math.round(255*-(Pe/100)))),s(Be)}function ne(Ue,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Ue).toHsl();return Be.l-=Pe/100,Be.l=at(Be.l),s(Be)}function $(Ue,Pe){var Be=s(Ue).toHsl(),it=(Be.h+Pe)%360;return Be.h=it<0?360+it:it,s(Be)}function te(Ue){var Pe=s(Ue).toHsl();return Pe.h=(Pe.h+180)%360,s(Pe)}function G(Ue,Pe){if(isNaN(Pe)||Pe<=0)throw new Error("Argument to polyad must be a positive number");for(var Be=s(Ue).toHsl(),it=[s(Ue)],_t=360/Pe,ft=1;ft<Pe;ft++)it.push(s({h:(Be.h+ft*_t)%360,s:Be.s,l:Be.l}));return it}function ie(Ue){var Pe=s(Ue).toHsl(),Be=Pe.h;return[s(Ue),s({h:(Be+72)%360,s:Pe.s,l:Pe.l}),s({h:(Be+216)%360,s:Pe.s,l:Pe.l})]}function he(Ue,Pe,Be){Pe=Pe||6,Be=Be||30;var it=s(Ue).toHsl(),_t=360/Be,ft=[s(Ue)];for(it.h=(it.h-(_t*Pe>>1)+720)%360;--Pe;)it.h=(it.h+_t)%360,ft.push(s(it));return ft}function pe(Ue,Pe){Pe=Pe||6;for(var Be=s(Ue).toHsv(),it=Be.h,_t=Be.s,ft=Be.v,Ut=[],rn=1/Pe;Pe--;)Ut.push(s({h:it,s:_t,v:ft})),ft=(ft+rn)%1;return Ut}s.mix=function(Ue,Pe,Be){Be=Be===0?0:Be||50;var it=s(Ue).toRgb(),_t=s(Pe).toRgb(),ft=Be/100,Ut={r:(_t.r-it.r)*ft+it.r,g:(_t.g-it.g)*ft+it.g,b:(_t.b-it.b)*ft+it.b,a:(_t.a-it.a)*ft+it.a};return s(Ut)},s.readability=function(Ue,Pe){var Be=s(Ue),it=s(Pe);return(Math.max(Be.getLuminance(),it.getLuminance())+.05)/(Math.min(Be.getLuminance(),it.getLuminance())+.05)},s.isReadable=function(Ue,Pe,Be){var it=s.readability(Ue,Pe),_t,ft;switch(ft=!1,_t=Kt(Be),_t.level+_t.size){case"AAsmall":case"AAAlarge":ft=it>=4.5;break;case"AAlarge":ft=it>=3;break;case"AAAsmall":ft=it>=7;break}return ft},s.mostReadable=function(Ue,Pe,Be){var it=null,_t=0,ft,Ut,rn,Dt;Be=Be||{},Ut=Be.includeFallbackColors,rn=Be.level,Dt=Be.size;for(var _n=0;_n<Pe.length;_n++)ft=s.readability(Ue,Pe[_n]),ft>_t&&(_t=ft,it=s(Pe[_n]));return s.isReadable(Ue,it,{level:rn,size:Dt})||!Ut?it:(Be.includeFallbackColors=!1,s.mostReadable(Ue,["#fff","#000"],Be))};var Ee=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},me=s.hexNames=Se(Ee);function Se(Ue){var Pe={};for(var Be in Ue)Ue.hasOwnProperty(Be)&&(Pe[Ue[Be]]=Be);return Pe}function De(Ue){return Ue=parseFloat(Ue),(isNaN(Ue)||Ue<0||Ue>1)&&(Ue=1),Ue}function be(Ue,Pe){Je(Ue)&&(Ue="100%");var Be=We(Ue);return Ue=Math.min(Pe,Math.max(0,parseFloat(Ue))),Be&&(Ue=parseInt(Ue*Pe,10)/100),Math.abs(Ue-Pe)<1e-6?1:Ue%Pe/parseFloat(Pe)}function at(Ue){return Math.min(1,Math.max(0,Ue))}function Ze(Ue){return parseInt(Ue,16)}function Je(Ue){return typeof Ue=="string"&&Ue.indexOf(".")!=-1&&parseFloat(Ue)===1}function We(Ue){return typeof Ue=="string"&&Ue.indexOf("%")!=-1}function Me(Ue){return Ue.length==1?"0"+Ue:""+Ue}function Fe(Ue){return Ue<=1&&(Ue=Ue*100+"%"),Ue}function He(Ue){return Math.round(parseFloat(Ue)*255).toString(16)}function bt(Ue){return Ze(Ue)/255}var Yt=function(){var Ue="[-\\+]?\\d+%?",Pe="[-\\+]?\\d*\\.\\d+%?",Be="(?:"+Pe+")|(?:"+Ue+")",it="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?",_t="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?";return{CSS_UNIT:new RegExp(Be),rgb:new RegExp("rgb"+it),rgba:new RegExp("rgba"+_t),hsl:new RegExp("hsl"+it),hsla:new RegExp("hsla"+_t),hsv:new RegExp("hsv"+it),hsva:new RegExp("hsva"+_t),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function gt(Ue){return!!Yt.CSS_UNIT.exec(Ue)}function Lt(Ue){Ue=Ue.replace(r,"").replace(i,"").toLowerCase();var Pe=!1;if(Ee[Ue])Ue=Ee[Ue],Pe=!0;else if(Ue=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Be;return(Be=Yt.rgb.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3]}:(Be=Yt.rgba.exec(Ue))?{r:Be[1],g:Be[2],b:Be[3],a:Be[4]}:(Be=Yt.hsl.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3]}:(Be=Yt.hsla.exec(Ue))?{h:Be[1],s:Be[2],l:Be[3],a:Be[4]}:(Be=Yt.hsv.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3]}:(Be=Yt.hsva.exec(Ue))?{h:Be[1],s:Be[2],v:Be[3],a:Be[4]}:(Be=Yt.hex8.exec(Ue))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),a:bt(Be[4]),format:Pe?"name":"hex8"}:(Be=Yt.hex6.exec(Ue))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),format:Pe?"name":"hex"}:(Be=Yt.hex4.exec(Ue))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),a:bt(Be[4]+""+Be[4]),format:Pe?"name":"hex8"}:(Be=Yt.hex3.exec(Ue))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),format:Pe?"name":"hex"}:!1}function Kt(Ue){var Pe,Be;return Ue=Ue||{level:"AA",size:"small"},Pe=(Ue.level||"AA").toUpperCase(),Be=(Ue.size||"small").toLowerCase(),Pe!=="AA"&&Pe!=="AAA"&&(Pe="AA"),Be!=="small"&&Be!=="large"&&(Be="small"),{level:Pe,size:Be}}return s})}(d2)),d2.exports}var CR;function nG(){if(CR)return Gd;CR=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.isvalidColorString=Gd.red=Gd.getContrastingColor=Gd.isValidHex=Gd.toState=Gd.simpleCheckForValidColor=void 0;var n=pde(),e=i(n),t=gde(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}Gd.simpleCheckForValidColor=function(o){var f=["r","g","b","a","h","s","l","v"],y=0,x=0;return(0,e.default)(f,function(B){if(o[B]&&(y+=1,isNaN(o[B])||(x+=1),B==="s"||B==="l")){var O=/^\d+%$/;O.test(o[B])&&(x+=1)}}),y===x?o:!1};var s=Gd.toState=function(o,f){var y=o.hex?(0,r.default)(o.hex):(0,r.default)(o),x=y.toHsl(),B=y.toHsv(),O=y.toRgb(),T=y.toHex();x.s===0&&(x.h=f||0,B.h=f||0);var F=T==="000000"&&O.a===0;return{hsl:x,hex:F?"transparent":"#"+T,rgb:O,hsv:B,oldHue:o.h||f||x.h,source:o.source}};return Gd.isValidHex=function(o){if(o==="transparent")return!0;var f=String(o).charAt(0)==="#"?1:0;return o.length!==4+f&&o.length<7+f&&(0,r.default)(o).isValid()},Gd.getContrastingColor=function(o){if(!o)return"#fff";var f=s(o);if(f.hex==="transparent")return"rgba(0,0,0,0.4)";var y=(f.rgb.r*299+f.rgb.g*587+f.rgb.b*114)/1e3;return y>=128?"#000":"#fff"},Gd.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Gd.isvalidColorString=function(o,f){var y=o.replace("°","");return(0,r.default)(f+" ("+y+")")._ok},Gd}var _R;function yde(){if(_R)return X1;_R=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.ColorWrap=void 0;var n=Object.assign||function(F){for(var j=1;j<arguments.length;j++){var N=arguments[j];for(var q in N)Object.prototype.hasOwnProperty.call(N,q)&&(F[q]=N[q])}return F},e=function(){function F(j,N){for(var q=0;q<N.length;q++){var H=N[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,N,q){return N&&F(j.prototype,N),q&&F(j,q),j}}(),t=ja(),r=y(t),i=tG(),s=y(i),a=nG(),o=f(a);function f(F){if(F&&F.__esModule)return F;var j={};if(F!=null)for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(j[N]=F[N]);return j.default=F,j}function y(F){return F&&F.__esModule?F:{default:F}}function x(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}function B(F,j){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:F}function O(F,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);F.prototype=Object.create(j&&j.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(F,j):F.__proto__=j)}var T=X1.ColorWrap=function(j){var N=function(q){O(H,q);function H(oe){x(this,H);var ne=B(this,(H.__proto__||Object.getPrototypeOf(H)).call(this));return ne.handleChange=function($,te){var G=o.simpleCheckForValidColor($);if(G){var ie=o.toState($,$.h||ne.state.oldHue);ne.setState(ie),ne.props.onChangeComplete&&ne.debounce(ne.props.onChangeComplete,ie,te),ne.props.onChange&&ne.props.onChange(ie,te)}},ne.handleSwatchHover=function($,te){var G=o.simpleCheckForValidColor($);if(G){var ie=o.toState($,$.h||ne.state.oldHue);ne.props.onSwatchHover&&ne.props.onSwatchHover(ie,te)}},ne.state=n({},o.toState(oe.color,0)),ne.debounce=(0,s.default)(function($,te,G){$(te,G)},100),ne}return e(H,[{key:"render",value:function(){var ne={};return this.props.onSwatchHover&&(ne.onSwatchHover=this.handleSwatchHover),r.default.createElement(j,n({},this.props,this.state,{onChange:this.handleChange},ne))}}],[{key:"getDerivedStateFromProps",value:function(ne,$){return n({},o.toState(ne.color,$.oldHue))}}]),H}(t.PureComponent||t.Component);return N.propTypes=n({},j.propTypes),N.defaultProps=n({},j.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),N};return X1.default=T,X1}var J1={},Nv={},bR;function vde(){if(bR)return Nv;bR=1,Object.defineProperty(Nv,"__esModule",{value:!0}),Nv.handleFocus=void 0;var n=Object.assign||function(f){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(f[B]=x[B])}return f},e=function(){function f(y,x){for(var B=0;B<x.length;B++){var O=x[B];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,x,B){return x&&f(y.prototype,x),B&&f(y,B),y}}(),t=ja(),r=i(t);function i(f){return f&&f.__esModule?f:{default:f}}function s(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}function a(f,y){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:f}function o(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(f,y):f.__proto__=y)}return Nv.handleFocus=function(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){o(O,B);function O(){var T,F,j,N;s(this,O);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(F=(j=a(this,(T=O.__proto__||Object.getPrototypeOf(O)).call.apply(T,[this].concat(H))),j),j.state={focus:!1},j.handleFocus=function(){return j.setState({focus:!0})},j.handleBlur=function(){return j.setState({focus:!1})},F),a(j,N)}return e(O,[{key:"render",value:function(){return r.default.createElement(x,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(y,n({},this.props,this.state)))}}]),O}(r.default.Component)},Nv}var xR;function Cde(){if(xR)return J1;xR=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.Swatch=void 0;var n=Object.assign||function(B){for(var O=1;O<arguments.length;O++){var T=arguments[O];for(var F in T)Object.prototype.hasOwnProperty.call(T,F)&&(B[F]=T[F])}return B},e=ja(),t=f(e),r=Pp(),i=f(r),s=vde(),a=h7(),o=f(a);function f(B){return B&&B.__esModule?B:{default:B}}var y=13,x=J1.Swatch=function(O){var T=O.color,F=O.style,j=O.onClick,N=j===void 0?function(){}:j,q=O.onHover,H=O.title,oe=H===void 0?T:H,ne=O.children,$=O.focus,te=O.focusStyle,G=te===void 0?{}:te,ie=T==="transparent",he=(0,i.default)({default:{swatch:n({background:T,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},F,$?G:{})}}),pe=function(be){return N(T,be)},Ee=function(be){return be.keyCode===y&&N(T,be)},me=function(be){return q(T,be)},Se={};return q&&(Se.onMouseOver=me),t.default.createElement("div",n({style:he.swatch,onClick:pe,title:oe,tabIndex:0,onKeyDown:Ee},Se),ne,ie&&t.default.createElement(o.default,{borderRadius:he.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return J1.default=(0,s.handleFocus)(x),J1}var wR;function rG(){return wR||(wR=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=nde();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return y(e).default}});var t=h7();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return y(t).default}});var r=rde();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return y(r).default}});var i=ode();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return y(i).default}});var s=sde();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return y(s).default}});var a=hde();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return y(a).default}});var o=yde();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return y(o).default}});var f=Cde();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return y(f).default}});function y(x){return x&&x.__esModule?x:{default:x}}}(dE)),dE}var ey={},_E,MR;function _de(){if(MR)return _E;MR=1;function n(e){return e===void 0}return _E=n,_E}var Yb={},SR;function bde(){if(SR)return Yb;SR=1,Object.defineProperty(Yb,"__esModule",{value:!0});var n=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var f=arguments[o];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(a[y]=f[y])}return a},e=ja(),t=r(e);function r(a){return a&&a.__esModule?a:{default:a}}function i(a,o){var f={};for(var y in a)o.indexOf(y)>=0||Object.prototype.hasOwnProperty.call(a,y)&&(f[y]=a[y]);return f}var s=24;return Yb.default=function(a){var o=a.fill,f=o===void 0?"currentColor":o,y=a.width,x=y===void 0?s:y,B=a.height,O=B===void 0?s:B,T=a.style,F=T===void 0?{}:T,j=i(a,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:f,width:x,height:O},F)},j),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Yb}var ER;function xde(){if(ER)return ey;ER=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.ChromeFields=void 0;var n=function(){function H(oe,ne){for(var $=0;$<ne.length;$++){var te=ne[$];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}return function(oe,ne,$){return ne&&H(oe.prototype,ne),$&&H(oe,$),oe}}(),e=ja(),t=T(e),r=Pp(),i=T(r),s=nG(),a=O(s),o=_de(),f=T(o),y=rG(),x=bde(),B=T(x);function O(H){if(H&&H.__esModule)return H;var oe={};if(H!=null)for(var ne in H)Object.prototype.hasOwnProperty.call(H,ne)&&(oe[ne]=H[ne]);return oe.default=H,oe}function T(H){return H&&H.__esModule?H:{default:H}}function F(H,oe){if(!(H instanceof oe))throw new TypeError("Cannot call a class as a function")}function j(H,oe){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:H}function N(H,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);H.prototype=Object.create(oe&&oe.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(H,oe):H.__proto__=oe)}var q=ey.ChromeFields=function(H){N(oe,H);function oe(ne){F(this,oe);var $=j(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return $.toggleViews=function(){$.state.view==="hex"?$.setState({view:"rgb"}):$.state.view==="rgb"?$.setState({view:"hsl"}):$.state.view==="hsl"&&($.props.hsl.a===1?$.setState({view:"hex"}):$.setState({view:"rgb"}))},$.handleChange=function(te,G){te.hex?a.isValidHex(te.hex)&&$.props.onChange({hex:te.hex,source:"hex"},G):te.r||te.g||te.b?$.props.onChange({r:te.r||$.props.rgb.r,g:te.g||$.props.rgb.g,b:te.b||$.props.rgb.b,source:"rgb"},G):te.a?(te.a<0?te.a=0:te.a>1&&(te.a=1),$.props.onChange({h:$.props.hsl.h,s:$.props.hsl.s,l:$.props.hsl.l,a:Math.round(te.a*100)/100,source:"rgb"},G)):(te.h||te.s||te.l)&&(typeof te.s=="string"&&te.s.includes("%")&&(te.s=te.s.replace("%","")),typeof te.l=="string"&&te.l.includes("%")&&(te.l=te.l.replace("%","")),te.s==1?te.s=.01:te.l==1&&(te.l=.01),$.props.onChange({h:te.h||$.props.hsl.h,s:Number((0,f.default)(te.s)?$.props.hsl.s:te.s),l:Number((0,f.default)(te.l)?$.props.hsl.l:te.l),source:"hsl"},G))},$.showHighlight=function(te){te.currentTarget.style.background="#eee"},$.hideHighlight=function(te){te.currentTarget.style.background="transparent"},ne.hsl.a!==1&&ne.view==="hex"?$.state={view:"rgb"}:$.state={view:ne.view},$}return n(oe,[{key:"render",value:function(){var $=this,te=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),G=void 0;return this.state.view==="hex"?G=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?G=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(G=t.default.createElement("div",{style:te.fields,className:"flexbox-fix"},t.default.createElement("div",{style:te.field},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.field},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:te.alpha},t.default.createElement(y.EditableInput,{style:{input:te.input,label:te.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:te.wrap,className:"flexbox-fix"},G,t.default.createElement("div",{style:te.toggle},t.default.createElement("div",{style:te.icon,onClick:this.toggleViews,ref:function(he){return $.icon=he}},t.default.createElement(B.default,{style:te.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function($,te){return $.hsl.a!==1&&te.view==="hex"?{view:"rgb"}:null}}]),oe}(t.default.Component);return q.defaultProps={view:"hex"},ey.default=q,ey}var ty={},BR;function wde(){if(BR)return ty;BR=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.ChromePointer=void 0;var n=ja(),e=i(n),t=Pp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=ty.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return ty.default=s,ty}var ny={},OR;function Mde(){if(OR)return ny;OR=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.ChromePointerCircle=void 0;var n=ja(),e=i(n),t=Pp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=ny.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return ny.default=s,ny}var IR;function Sde(){if(IR)return z1;IR=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.Chrome=void 0;var n=ja(),e=j(n),t=Op(),r=j(t),i=Pp(),s=j(i),a=eG(),o=j(a),f=rG(),y=xde(),x=j(y),B=wde(),O=j(B),T=Mde(),F=j(T);function j(q){return q&&q.__esModule?q:{default:q}}var N=z1.Chrome=function(H){var oe=H.width,ne=H.onChange,$=H.disableAlpha,te=H.rgb,G=H.hsl,ie=H.hsv,he=H.hex,pe=H.renderers,Ee=H.styles,me=Ee===void 0?{}:Ee,Se=H.className,De=Se===void 0?"":Se,be=H.defaultView,at=(0,s.default)((0,o.default)({default:{picker:{width:oe,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+te.r+", "+te.g+", "+te.b+", "+te.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},me),{disableAlpha:$});return e.default.createElement("div",{style:at.picker,className:"chrome-picker "+De},e.default.createElement("div",{style:at.saturation},e.default.createElement(f.Saturation,{style:at.Saturation,hsl:G,hsv:ie,pointer:F.default,onChange:ne})),e.default.createElement("div",{style:at.body},e.default.createElement("div",{style:at.controls,className:"flexbox-fix"},e.default.createElement("div",{style:at.color},e.default.createElement("div",{style:at.swatch},e.default.createElement("div",{style:at.active}),e.default.createElement(f.Checkboard,{renderers:pe}))),e.default.createElement("div",{style:at.toggles},e.default.createElement("div",{style:at.hue},e.default.createElement(f.Hue,{style:at.Hue,hsl:G,pointer:O.default,onChange:ne})),e.default.createElement("div",{style:at.alpha},e.default.createElement(f.Alpha,{style:at.Alpha,rgb:te,hsl:G,pointer:O.default,renderers:pe,onChange:ne})))),e.default.createElement(x.default,{rgb:te,hsl:G,hex:he,view:be,onChange:ne,disableAlpha:$})))};return N.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},N.defaultProps={width:225,disableAlpha:!1,styles:{}},z1.default=(0,f.ColorWrap)(N),z1}var Ede=Sde();const Bde=Al(Ede);function no(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return no=function(){return a},a}no();function Ode(n){no().f[0]++;const e=(no().s[0]++,n.rgb);return no().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class iG extends nr.Component{constructor(t){no().f[1]++,no().s[4]++;super(t);Pn(this,"state",(no().s[2]++,{pickerOpened:!1}));Pn(this,"colorInput",(no().s[3]++,null));Pn(this,"calcPickerOffset",(no().s[7]++,()=>{no().f[3]++;const t=(no().s[8]++,this.colorInput);if(no().s[9]++,t){no().b[0][0]++;const r=(no().s[10]++,t.getBoundingClientRect());return no().s[11]++,{top:r.top,left:r.left+196}}else return no().b[0][1]++,no().s[12]++,{top:160,left:555}}));Pn(this,"togglePicker",(no().s[13]++,()=>{no().f[4]++,no().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));no().s[5]++,this.onChangeNoCheck=w6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){no().f[2]++,no().s[6]++,this.props.onChange(t)}get color(){no().f[5]++,no().s[15]++;try{return no().s[16]++,SA(this.props.value).rgb()}catch(t){return no().s[17]++,console.warn("Error parsing color: ",t),no().s[18]++,SA("rgb(255,255,255)")}}onChange(t){no().f[6]++,no().s[19]++,this.props.onChange(t===""?(no().b[1][0]++,void 0):(no().b[1][1]++,t))}render(){no().f[7]++;const t=(no().s[20]++,this.calcPickerOffset()),r=(no().s[21]++,this.color.object()),i=(no().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),s=(no().s[23]++,ue.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[ue.jsx(Bde,{color:i,onChange:o=>(no().f[8]++,no().s[24]++,this.onChangeNoCheck(Ode(o)))}),ue.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),a=(no().s[25]++,{backgroundColor:this.props.value});return no().s[26]++,ue.jsxs("div",{className:"maputnik-color-wrapper",children:[(no().b[2][0]++,this.state.pickerOpened&&(no().b[2][1]++,s)),ue.jsx("div",{className:"maputnik-color-swatch",style:a}),ue.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:o=>(no().f[9]++,no().s[27]++,this.colorInput=o),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(no().b[3][0]++,this.props.value):(no().b[3][1]++,""),onChange:o=>(no().f[10]++,no().s[28]++,this.onChange(o.target.value))})]})}}function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gn=function(){return a},a}gn();class pm extends nr.Component{constructor(t){gn().f[0]++,gn().s[2]++;super(t);Pn(this,"_keyboardEvent",(gn().s[1]++,!1));Pn(this,"resetValue",(gn().s[26]++,()=>{if(gn().f[4]++,gn().s[27]++,this.setState({editing:!1}),gn().s[28]++,this.state.value)gn().b[16][1]++;else{gn().b[16][0]++,gn().s[29]++;return}gn().s[30]++,this.isValid(this.state.value)?gn().b[17][1]++:(gn().b[17][0]++,gn().s[31]++,this.isValid(this.props.value)?(gn().b[18][0]++,gn().s[32]++,this.changeValue(this.props.value),gn().s[33]++,this.setState({dirtyValue:this.props.value})):(gn().b[18][1]++,gn().s[34]++,this.changeValue(void 0),gn().s[35]++,this.setState({dirtyValue:void 0})))}));Pn(this,"onChangeRange",(gn().s[36]++,t=>{gn().f[5]++;let r=(gn().s[37]++,parseFloat(t.target.value));const i=(gn().s[38]++,this.props.rangeStep);let s=(gn().s[39]++,r);if(gn().s[40]++,i){gn().b[19][0]++;const a=(gn().s[41]++,r%i);gn().s[42]++,this._keyboardEvent?(gn().b[20][0]++,gn().s[43]++,r<+this.state.dirtyValue?(gn().b[21][0]++,gn().s[44]++,r=this.state.value-i):(gn().b[21][1]++,gn().s[45]++,r=this.state.value+i),gn().s[46]++,s=r):(gn().b[20][1]++,gn().s[47]++,a<i/2?(gn().b[22][0]++,gn().s[48]++,r=r-a):(gn().b[22][1]++,gn().s[49]++,r=r+(i-a)))}else gn().b[19][1]++;gn().s[50]++,this._keyboardEvent=!1,gn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),gn().s[52]++,this.setState({value:r,dirtyValue:s}),gn().s[53]++,this.props.onChange?(gn().b[23][0]++,gn().s[54]++,this.props.onChange(r)):gn().b[23][1]++}));gn().s[3]++,this.state={uuid:+Xy(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return gn().f[1]++,gn().s[4]++,gn().b[1][0]++,!r.editing&&(gn().b[1][1]++,t.value!==r.value)?(gn().b[0][0]++,gn().s[5]++,{value:t.value,dirtyValue:t.value}):(gn().b[0][1]++,gn().s[6]++,null)}changeValue(t){gn().f[2]++;const r=(gn().s[7]++,gn().b[3][0]++,t===""||(gn().b[3][1]++,t===void 0)?(gn().b[2][0]++,void 0):(gn().b[2][1]++,+t)),i=(gn().s[8]++,this.props.value!==r);gn().s[9]++,gn().b[5][0]++,this.isValid(r)&&(gn().b[5][1]++,i)?(gn().b[4][0]++,gn().s[10]++,this.props.onChange?(gn().b[6][0]++,gn().s[11]++,this.props.onChange(r)):gn().b[6][1]++,gn().s[12]++,this.setState({value:r})):(gn().b[4][1]++,gn().s[13]++,gn().b[8][0]++,!this.isValid(r)&&(gn().b[8][1]++,i)?(gn().b[7][0]++,gn().s[14]++,this.setState({value:void 0})):gn().b[7][1]++),gn().s[15]++,this.setState({dirtyValue:t===""?(gn().b[9][0]++,void 0):(gn().b[9][1]++,t)})}isValid(t){if(gn().f[3]++,gn().s[16]++,t===void 0)return gn().b[10][0]++,gn().s[17]++,!0;gn().b[10][1]++;const r=(gn().s[18]++,+t);return gn().s[19]++,isNaN(r)?(gn().b[11][0]++,gn().s[20]++,!1):(gn().b[11][1]++,gn().s[21]++,gn().b[13][0]++,!isNaN(this.props.min)&&(gn().b[13][1]++,r<this.props.min)?(gn().b[12][0]++,gn().s[22]++,!1):(gn().b[12][1]++,gn().s[23]++,gn().b[15][0]++,!isNaN(this.props.max)&&(gn().b[15][1]++,r>this.props.max)?(gn().b[14][0]++,gn().s[24]++,!1):(gn().b[14][1]++,gn().s[25]++,!0)))}render(){var t,r;if(gn().f[6]++,gn().s[55]++,gn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(gn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(gn().b[25][2]++,this.props.min!==void 0)&&(gn().b[25][3]++,this.props.max!==void 0)&&(gn().b[25][4]++,this.props.allowRange)){gn().b[24][0]++;const i=(gn().s[56]++,this.state.editing?(gn().b[26][0]++,this.state.dirtyValue):(gn().b[26][1]++,this.state.value)),s=(gn().s[57]++,this.props.default===void 0?(gn().b[27][0]++,""):(gn().b[27][1]++,this.props.default));let a;return gn().s[58]++,this.state.editingRange?(gn().b[28][0]++,gn().s[59]++,a=this.state.value):(gn().b[28][1]++,gn().s[60]++,a=i),gn().s[61]++,ue.jsxs("div",{className:"maputnik-number-container",children:[ue.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(gn().b[29][0]++,s):(gn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{gn().f[7]++,gn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{gn().f[8]++,gn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{gn().f[9]++,gn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{gn().f[10]++,gn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),ue.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:a===void 0?(gn().b[30][0]++,""):(gn().b[30][1]++,a),onFocus:o=>{gn().f[11]++,gn().s[66]++,this.setState({editing:!0})},onChange:o=>{gn().f[12]++,gn().s[67]++,this.changeValue(o.target.value)},onBlur:o=>{gn().f[13]++,gn().s[68]++,this.setState({editing:!1}),gn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{gn().b[24][1]++;const i=(gn().s[70]++,this.state.editing?(gn().b[31][0]++,this.state.dirtyValue):(gn().b[31][1]++,this.state.value));return gn().s[71]++,ue.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(gn().b[32][0]++,""):(gn().b[32][1]++,i),onChange:s=>(gn().f[14]++,gn().s[72]++,this.changeValue(s.target.value)),onFocus:()=>{gn().f[15]++,gn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}Pn(pm,"defaultProps",(gn().s[0]++,{rangeStep:1}));function Vp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vp=function(){return a},a}Vp();class f7 extends nr.Component{constructor(){super(...arguments);Pn(this,"onChange",(Vp().s[1]++,()=>{Vp().f[0]++,Vp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return Vp().f[1]++,Vp().s[3]++,ue.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[ue.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),ue.jsx("div",{className:"maputnik-checkbox-box",children:ue.jsx("svg",{style:{display:this.props.value?(Vp().b[0][0]++,"inline"):(Vp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:ue.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}Pn(f7,"defaultProps",(Vp().s[0]++,{value:!1}));function Vr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vr=function(){return a},a}Vr();var v6;let oG=(v6=class extends nr.Component{constructor(e){Vr().f[0]++,Vr().s[1]++,super(e),Vr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Vr().f[1]++;const r=(Vr().s[3]++,[]),i=(Vr().s[4]++,t.initialPropsValue.slice(0));return Vr().s[5]++,Array(e.length).fill(null).map((s,a)=>{Vr().f[2]++,Vr().s[6]++,e.value[a]===t.initialPropsValue[a]?(Vr().b[0][0]++,Vr().s[7]++,r[a]=t.value[a]):(Vr().b[0][1]++,Vr().s[8]++,r[a]=t.value[a],Vr().s[9]++,i[a]=t.value[a])}),Vr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Vr().f[3]++,Vr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Vr().f[4]++;const i=(Vr().s[12]++,e[r]);return Vr().s[13]++,Vr().b[1][0]++,!(i===void 0||(Vr().b[1][1]++,i===""))})}changeValue(e,t){Vr().f[5]++;const r=(Vr().s[14]++,this.state.value.slice(0));Vr().s[15]++,r[e]=t,Vr().s[16]++,this.setState({value:r},()=>{Vr().f[6]++,Vr().s[17]++,Vr().b[3][0]++,this.isComplete(r)&&(Vr().b[3][1]++,this.props.onChange)?(Vr().b[2][0]++,Vr().s[18]++,this.props.onChange(r)):(Vr().b[2][1]++,Vr().s[19]++,this.props.onChange?(Vr().b[4][0]++,Vr().s[20]++,this.props.onChange(void 0)):Vr().b[4][1]++)})}render(){Vr().f[7]++;const{value:e}=(Vr().s[21]++,this.state),t=(Vr().s[22]++,Vr().b[5][0]++,e.length>0&&(Vr().b[5][1]++,!e.every(i=>(Vr().f[8]++,Vr().s[23]++,Vr().b[6][0]++,i===""||(Vr().b[6][1]++,i===void 0))))),r=(Vr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(Vr().f[9]++,Vr().s[25]++,this.props.type==="number"?(Vr().b[7][0]++,Vr().s[26]++,ue.jsx(pm,{default:(Vr().b[9][0]++,t||(Vr().b[9][1]++,!this.props.default)?(Vr().b[8][0]++,void 0):(Vr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(Vr().b[10][0]++,!0):(Vr().b[10][1]++,!1),onChange:a=>(Vr().f[10]++,Vr().s[27]++,this.changeValue(s,a)),"aria-label":(Vr().b[11][0]++,this.props["aria-label"]||(Vr().b[11][1]++,this.props.label))},s)):(Vr().b[7][1]++,Vr().s[28]++,ue.jsx(Zf,{default:(Vr().b[13][0]++,t||(Vr().b[13][1]++,!this.props.default)?(Vr().b[12][0]++,void 0):(Vr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(Vr().b[14][0]++,!0):(Vr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(Vr().b[15][0]++,this.props["aria-label"]||(Vr().b[15][1]++,this.props.label))},s)))));return Vr().s[29]++,ue.jsx("div",{className:"maputnik-array",children:r})}},Pn(v6,"defaultProps",(Vr().s[0]++,{value:[],default:[]})),v6);function sA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="c4660c9ecb80d9f1ce71e70441154e1e765b77ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAErG;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4660c9ecb80d9f1ce71e70441154e1e765b77ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return sA=function(){return a},a}sA();class Ide extends nr.Component{render(){sA().f[0]++;let e=(sA().s[0]++,this.props.options);sA().s[1]++,sA().b[1][0]++,e.length>0&&(sA().b[1][1]++,!Array.isArray(e[0]))?(sA().b[0][0]++,sA().s[2]++,e=e.map(i=>(sA().f[1]++,sA().s[3]++,[i,i]))):sA().b[0][1]++;const t=(sA().s[4]++,sA().b[2][0]++,this.props.value||(sA().b[2][1]++,e[0][0])),r=(sA().s[5]++,e.map(([i,s])=>(sA().f[2]++,sA().s[6]++,ue.jsxs("label",{className:hm("maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[ue.jsx("input",{type:"radio",name:this.props.name,onChange:a=>(sA().f[3]++,sA().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return sA().s[8]++,ue.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Dl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Dl=function(){return a},a}Dl();function kde(n){Dl().f[0]++;let e=(Dl().s[0]++,0);return Dl().s[1]++,n.forEach(([t,r])=>{Dl().f[1]++,Dl().s[2]++,e+=r.length}),Dl().s[3]++,e}class p7 extends nr.Component{render(){Dl().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Dl().s[4]++,this.props);return Dl().s[5]++,Dl().b[1][0]++,e.length<=3&&(Dl().b[1][1]++,kde(e)<=20)?(Dl().b[0][0]++,Dl().s[6]++,ue.jsx(Ide,{name:i,options:e,value:(Dl().b[2][0]++,t||(Dl().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Dl().b[3][0]++,this.props["aria-label"]||(Dl().b[3][1]++,s))})):(Dl().b[0][1]++,Dl().s[7]++,ue.jsx(s1,{options:e,value:(Dl().b[4][0]++,t||(Dl().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Dl().b[5][0]++,this.props["aria-label"]||(Dl().b[5][1]++,s))}))}}function Ry(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ry=function(){return a},a}Ry();class Tde extends nr.Component{render(){Ry().f[0]++;const e=(Ry().s[0]++,this.props.t);return Ry().s[1]++,ue.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const bE=(Ry().s[2]++,Ws()(Tde));function ro(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ro=function(){return a},a}ro();function xE(n,e){if(ro().f[0]++,ro().s[0]++,n===""){ro().b[0][0]++,ro().s[1]++;return}else ro().b[0][1]++;let t;ro().s[2]++;const r=a=>{ro().f[1]++,ro().s[3]++;try{const o=(ro().s[4]++,new URL(a));return ro().s[5]++,o.protocol}catch{ro().s[6]++;return}},i=(ro().s[7]++,r(n)),s=(ro().s[8]++,window.location.protocol==="https:");return ro().s[9]++,i?(ro().b[1][1]++,ro().s[13]++,ro().b[4][0]++,i&&(ro().b[4][1]++,i==="http:")&&(ro().b[4][2]++,window.location.protocol==="https:")?(ro().b[3][0]++,ro().s[14]++,t=ue.jsx(bE,{children:ue.jsxs(U0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",ue.jsx("code",{children:"https://"})," domain"]})})):ro().b[3][1]++):(ro().b[1][0]++,ro().s[10]++,s?(ro().b[2][0]++,ro().s[11]++,t=ue.jsx(bE,{children:ue.jsxs(U0,{t:e,children:["Must provide protocol: ",ue.jsx("code",{children:"https://"})]})})):(ro().b[2][1]++,ro().s[12]++,t=ue.jsx(bE,{children:ue.jsxs(U0,{t:e,children:["Must provide protocol: ",ue.jsx("code",{children:"http://"})," or ",ue.jsx("code",{children:"https://"})]})}))),ro().s[15]++,t}class sG extends nr.Component{constructor(t){ro().f[3]++,ro().s[17]++;super(t);Pn(this,"onInput",(ro().s[19]++,t=>{ro().f[4]++,ro().s[20]++,this.setState({error:xE(t,this.props.t)}),ro().s[21]++,this.props.onInput?(ro().b[5][0]++,ro().s[22]++,this.props.onInput(t)):ro().b[5][1]++}));Pn(this,"onChange",(ro().s[23]++,t=>{ro().f[5]++,ro().s[24]++,this.setState({error:xE(t,this.props.t)}),ro().s[25]++,this.props.onChange(t)}));ro().s[18]++,this.state={error:xE(t.value,t.t)}}render(){return ro().f[6]++,ro().s[26]++,ue.jsxs("div",{children:[ue.jsx(Zf,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}Pn(sG,"defaultProps",(ro().s[16]++,{onInput:()=>{ro().f[2]++}}));const m7=(ro().s[27]++,Ws()(sG));function Lr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Lr=function(){return a},a}Lr();class Pde extends nr.Component{constructor(){super(...arguments);Pn(this,"addValue",(Lr().s[5]++,()=>{Lr().f[2]++;const t=(Lr().s[6]++,this.values.slice(0));if(Lr().s[7]++,this.props.type==="number")Lr().b[2][0]++,Lr().s[8]++,t.push(0);else if(Lr().b[2][1]++,Lr().s[9]++,this.props.type==="url")Lr().b[3][0]++,Lr().s[10]++,t.push("");else if(Lr().b[3][1]++,Lr().s[11]++,this.props.type==="enum"){Lr().b[4][0]++;const{fieldSpec:r}=(Lr().s[12]++,this.props),i=(Lr().s[13]++,Object.keys(r.values)[0]);Lr().s[14]++,t.push(i)}else Lr().b[4][1]++,Lr().s[15]++,t.push("");Lr().s[16]++,this.props.onChange?(Lr().b[5][0]++,Lr().s[17]++,this.props.onChange(t)):Lr().b[5][1]++}))}changeValue(t,r){Lr().f[0]++;const i=(Lr().s[0]++,this.values.slice(0));Lr().s[1]++,i[t]=r,Lr().s[2]++,this.props.onChange?(Lr().b[0][0]++,Lr().s[3]++,this.props.onChange(i)):Lr().b[0][1]++}get values(){return Lr().f[1]++,Lr().s[4]++,Lr().b[1][0]++,this.props.value||(Lr().b[1][1]++,this.props.default)||(Lr().b[1][2]++,[])}deleteValue(t){Lr().f[3]++;const r=(Lr().s[18]++,this.values.slice(0));Lr().s[19]++,r.splice(t,1),Lr().s[20]++,this.props.onChange?(Lr().b[6][0]++,Lr().s[21]++,this.props.onChange(r.length>0?(Lr().b[7][0]++,r):(Lr().b[7][1]++,void 0))):Lr().b[6][1]++}render(){Lr().f[4]++;const t=(Lr().s[22]++,this.props.t),r=(Lr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Lr().s[24]++,this.values.map((s,a)=>{var y;Lr().f[5]++;const o=(Lr().s[25]++,ue.jsx(Kde,{onClick:this.deleteValue.bind(this,a),...r}));let f;if(Lr().s[26]++,this.props.type==="url")Lr().b[8][0]++,Lr().s[27]++,f=ue.jsx(m7,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[9][0]++,this.props["aria-label"]||(Lr().b[9][1]++,this.props.label))});else if(Lr().b[8][1]++,Lr().s[28]++,this.props.type==="number")Lr().b[10][0]++,Lr().s[29]++,f=ue.jsx(pm,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[11][0]++,this.props["aria-label"]||(Lr().b[11][1]++,this.props.label))});else if(Lr().b[10][1]++,Lr().s[30]++,this.props.type==="enum"){Lr().b[12][0]++;const x=(Lr().s[31]++,Object.keys((y=this.props.fieldSpec)==null?void 0:y.values).map(B=>(Lr().f[6]++,Lr().s[32]++,[B,HO(B)])));Lr().s[33]++,f=ue.jsx(p7,{options:x,value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[13][0]++,this.props["aria-label"]||(Lr().b[13][1]++,this.props.label))})}else Lr().b[12][1]++,Lr().s[34]++,f=ue.jsx(Zf,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(Lr().b[14][0]++,this.props["aria-label"]||(Lr().b[14][1]++,this.props.label))});return Lr().s[35]++,ue.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[ue.jsx("div",{className:"maputnik-array-block-action",children:o}),ue.jsx("div",{className:"maputnik-array-block-content",children:f})]},a)}));return Lr().s[36]++,ue.jsxs("div",{className:"maputnik-array",children:[i,ue.jsx(el,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const aG=(Lr().s[37]++,Ws()(Pde));class Kde extends nr.Component{render(){Lr().f[7]++;const e=(Lr().s[38]++,this.props.t);return Lr().s[39]++,ue.jsx(el,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:ue.jsx(WO,{label:ue.jsx(iv,{})})})}}function fa(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fa=function(){return a},a}fa();class lG extends nr.Component{get values(){fa().f[0]++;const e=(fa().s[1]++,fa().b[0][0]++,this.props.value||(fa().b[0][1]++,this.props.default)||(fa().b[0][2]++,[]));return fa().s[2]++,e[e.length-1]!==""?(fa().b[1][0]++,fa().s[3]++,e.concat("")):(fa().b[1][1]++,fa().s[4]++,e)}changeFont(e,t){fa().f[1]++;const r=(fa().s[5]++,this.values.slice(0));fa().s[6]++,r[e]=t;const i=(fa().s[7]++,r.filter(s=>(fa().f[2]++,fa().s[8]++,s!==void 0)).filter(s=>(fa().f[3]++,fa().s[9]++,s!=="")));fa().s[10]++,this.props.onChange(i)}render(){fa().f[4]++;const e=(fa().s[11]++,this.values.map((t,r)=>{var i;return fa().f[5]++,fa().s[12]++,ue.jsx("li",{children:ue.jsx(hv,{"aria-label":(fa().b[2][0]++,this.props["aria-label"]||(fa().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(s=>(fa().f[6]++,fa().s[13]++,[s,s])),onChange:this.changeFont.bind(this,r)})},r)}));return fa().s[14]++,ue.jsx("ul",{className:"maputnik-font",children:e})}}Pn(lG,"defaultProps",(fa().s[0]++,{fonts:[]}));function po(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return po=function(){return a},a}po();const Dde=(po().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let Fy=class extends nr.Component{childNodes(){var t,r;po().f[0]++;const e=(po().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(po().f[1]++,po().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(po().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return po().b[0][0]++,po().s[4]++,ue.jsx(pm,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":po().b[0][1]++;{const i=(po().s[5]++,Object.keys((po().b[1][0]++,this.props.fieldSpec.values||(po().b[1][1]++,[]))).map(s=>(po().f[2]++,po().s[6]++,[s,HO(s)])));return po().s[7]++,ue.jsx(p7,{...e,options:i})}case"resolvedImage":po().b[0][2]++;case"formatted":po().b[0][3]++;case"string":if(po().b[0][4]++,po().s[8]++,Dde.indexOf(this.props.fieldName)>=0){po().b[2][0]++;const i=(po().s[9]++,po().b[3][0]++,this.props.fieldSpec.values||(po().b[3][1]++,[]));return po().s[10]++,ue.jsx(hv,{...e,options:i.map(s=>(po().f[3]++,po().s[11]++,[s,s]))})}else return po().b[2][1]++,po().s[12]++,ue.jsx(Zf,{...e});case"color":return po().b[0][5]++,po().s[13]++,ue.jsx(iG,{...e});case"boolean":return po().b[0][6]++,po().s[14]++,ue.jsx(f7,{...e});case"array":return po().b[0][7]++,po().s[15]++,this.props.fieldName==="text-font"?(po().b[4][0]++,po().s[16]++,ue.jsx(lG,{...e,fonts:this.props.fieldSpec.values})):(po().b[4][1]++,po().s[17]++,this.props.fieldSpec.length?(po().b[5][0]++,po().s[18]++,ue.jsx(oG,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(po().b[5][1]++,po().s[19]++,ue.jsx(aG,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return po().b[0][8]++,po().s[20]++,null}}render(){return po().f[4]++,po().s[21]++,ue.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function ZA(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ZA=function(){return a},a}ZA();class n_ extends nr.Component{constructor(t){ZA().f[0]++,ZA().s[0]++;super(t);Pn(this,"_labelId");Pn(this,"onToggleDoc",(ZA().s[3]++,t=>{ZA().f[1]++,ZA().s[4]++,this.setState({showDoc:t})}));ZA().s[1]++,this._labelId=Xy("fieldset_label_"),ZA().s[2]++,this.state={showDoc:!1}}render(){return ZA().f[2]++,ZA().s[5]++,ue.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(ZA().b[0][0]++,this.props.fieldSpec&&(ZA().b[0][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:ue.jsx(WO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(ZA().b[1][0]++,!this.props.fieldSpec&&(ZA().b[1][1]++,ue.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),ue.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),ue.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(ZA().b[2][0]++,this.props.fieldSpec&&(ZA().b[2][1]++,ue.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(ZA().b[3][0]++,""):(ZA().b[3][1]++,"none")},children:ue.jsx(GO,{fieldSpec:this.props.fieldSpec})})))]})}}function Zs(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Zs=function(){return a},a}Zs();const Rde=(Zs().s[0]++,{color:()=>(Zs().f[0]++,Zs().s[1]++,pa),enum:({fieldSpec:n})=>(Zs().f[1]++,Zs().s[2]++,Object.keys(n.values).length<=3?(Zs().b[0][0]++,n_):(Zs().b[0][1]++,pa)),boolean:()=>(Zs().f[2]++,Zs().s[3]++,pa),array:()=>(Zs().f[3]++,Zs().s[4]++,n_),resolvedImage:()=>(Zs().f[4]++,Zs().s[5]++,pa),number:()=>(Zs().f[5]++,Zs().s[6]++,pa),string:()=>(Zs().f[6]++,Zs().s[7]++,pa),formatted:()=>(Zs().f[7]++,Zs().s[8]++,pa),padding:()=>(Zs().f[8]++,Zs().s[9]++,pa)});class Fde extends nr.Component{render(){var i;Zs().f[9]++;const e=(Zs().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=(Zs().s[11]++,Rde[e]);let r;return Zs().s[12]++,t?(Zs().b[1][0]++,Zs().s[13]++,r=t(this.props)):(Zs().b[1][1]++,Zs().s[14]++,console.warn("No such type for '%s'",e),Zs().s[15]++,r=pa),Zs().s[16]++,ue.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:ue.jsx(Fy,{...this.props})})}}function fd(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fd=function(){return a},a}fd();class Lde extends nr.Component{render(){fd().f[0]++;const e=(fd().s[0]++,this.props.t);let t,r,i;return fd().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(fd().b[0][0]++,fd().s[2]++,i=ue.jsx(el,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:t_})})}),fd().s[3]++,t=ue.jsx(el,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:ue.jsx(FZ,{})}),fd().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(fd().b[1][0]++,fd().s[5]++,r=ue.jsx(el,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:ue.jsx(LZ,{})})):fd().b[1][1]++,fd().s[6]++,ue.jsxs("div",{children:[i,r,t]})):(fd().b[0][1]++,fd().s[7]++,ue.jsx("div",{children:i}))}}const Ude=(fd().s[8]++,Ws()(Lde));function Hp(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Hp=function(){return a},a}Hp();class uG extends nr.Component{render(){Hp().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Hp().s[1]++,this.props),i=(Hp().s[2]++,ue.jsx(Ude,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Hp().s[3]++,e[r+"."+t]);return Hp().s[4]++,ue.jsx(Fde,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:I3((Hp().b[0][0]++,this.props.fieldName||(Hp().b[0][1]++,""))),action:i})}}Pn(uG,"defaultProps",(Hp().s[0]++,{errors:{}}));function ph(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ph=function(){return a},a}ph();function AG(n,e){ph().f[0]++;const t=(ph().s[0]++,+n),r=(ph().s[1]++,+e);return ph().s[2]++,t<r?(ph().b[0][0]++,ph().s[3]++,-1):(ph().b[0][1]++,ph().s[4]++,t>r?(ph().b[1][0]++,ph().s[5]++,1):(ph().b[1][1]++,ph().s[6]++,0))}function yp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return yp=function(){return a},a}yp();function Uf(n){if(yp().f[0]++,yp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return yp().b[0][0]++,yp().s[1]++,n.default;yp().b[0][1]++;const e=(yp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return yp().s[3]++,yp().b[1][0]++,e[n.type]||(yp().b[1][1]++,"")}function Ly(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ly=function(){return a},a}Ly();class zde extends nr.Component{render(){Ly().f[0]++;const e=(Ly().s[0]++,this.props.t);return Ly().s[1]++,ue.jsx(el,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:ue.jsx(iv,{})})}}const cG=(Ly().s[2]++,Ws()(zde));function mn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mn=function(){return a},a}mn();function kR(n,e){mn().f[0]++;let t;return mn().s[0]++,mn().b[1][0]++,n.value&&(mn().b[1][1]++,n.value.stops)?(mn().b[0][0]++,mn().s[1]++,n.value.stops.forEach((r,i)=>{mn().f[1]++,mn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?mn().b[2][1]++:(mn().b[2][0]++,mn().s[3]++,t?mn().b[3][1]++:(mn().b[3][0]++,mn().s[4]++,t={...e}),mn().s[5]++,t[i]=Xy("stop-"))})):mn().b[0][1]++,mn().s[6]++,t}class jde extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(mn().s[7]++,{refs:{}}));Pn(this,"onChange",(mn().s[32]++,(t,r)=>{if(mn().f[11]++,mn().s[33]++,r.type==="identity")mn().b[9][0]++,mn().s[34]++,r={type:r.type,property:r.property};else{mn().b[9][1]++;const i=(mn().s[35]++,r.type==="categorical"?(mn().b[10][0]++,""):(mn().b[10][1]++,0));mn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},Uf(this.props.fieldSpec)],[{zoom:10,value:i},Uf(this.props.fieldSpec)]],...r}}mn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){mn().f[2]++;const t=(mn().s[8]++,kR(this.props,this.state));mn().s[9]++,t?(mn().b[4][0]++,mn().s[10]++,this.setState({refs:t})):mn().b[4][1]++}static getDerivedStateFromProps(t,r){mn().f[3]++;const i=(mn().s[11]++,kR(t,r));return mn().s[12]++,i?(mn().b[5][0]++,mn().s[13]++,{refs:i}):(mn().b[5][1]++,mn().s[14]++,null)}getFieldFunctionType(t){return mn().f[4]++,mn().s[15]++,t.expression.interpolated?(mn().b[6][0]++,mn().s[16]++,"exponential"):(mn().b[6][1]++,mn().s[17]++,t.type==="number"?(mn().b[7][0]++,mn().s[18]++,"interval"):(mn().b[7][1]++,mn().s[19]++,"categorical"))}getDataFunctionTypes(t){return mn().f[5]++,mn().s[20]++,t.expression.interpolated?(mn().b[8][0]++,mn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(mn().b[8][1]++,mn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){mn().f[6]++;const r=(mn().s[23]++,t.map((s,a)=>(mn().f[7]++,mn().s[24]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(mn().f[8]++,mn().s[25]++,AG(s.data[0].zoom,a.data[0].zoom)))),i=(mn().s[26]++,{});return mn().s[27]++,r.forEach((s,a)=>{mn().f[9]++,mn().s[28]++,i[a]=s.ref}),mn().s[29]++,this.setState({refs:i}),mn().s[30]++,r.map(s=>(mn().f[10]++,mn().s[31]++,s.data))}changeStop(t,r,i){var f;mn().f[12]++;const s=(mn().s[38]++,mn().b[11][0]++,((f=this.props.value)==null?void 0:f.stops.slice(0))||(mn().b[11][1]++,[]));mn().s[39]++,s[t]=[{value:r.value,zoom:r.zoom===void 0?(mn().b[12][0]++,0):(mn().b[12][1]++,r.zoom)},i];const a=(mn().s[40]++,this.orderStopsByZoom(s)),o=(mn().s[41]++,{...this.props.value,stops:a});mn().s[42]++,this.onChange(this.props.fieldName,o)}changeBase(t){mn().f[13]++;const r=(mn().s[43]++,{...this.props.value,base:t});mn().s[44]++,r.base===void 0?(mn().b[13][0]++,mn().s[45]++,delete r.base):mn().b[13][1]++,mn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){mn().f[14]++,mn().s[47]++,mn().b[15][0]++,t==="interpolate"&&(mn().b[15][1]++,this.props.onChangeToZoomFunction)?(mn().b[14][0]++,mn().s[48]++,this.props.onChangeToZoomFunction()):(mn().b[14][1]++,mn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){mn().f[15]++,mn().s[50]++,r?(mn().b[16][0]++,mn().s[51]++,this.props.value[t]=r):(mn().b[16][1]++,mn().s[52]++,delete this.props.value[t]),mn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,s,a,o,f,y,x,B;mn().f[16]++;const t=(mn().s[54]++,this.props.t);mn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(mn().b[17][0]++,mn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):mn().b[17][1]++;let r;return mn().s[57]++,(s=this.props.value)!=null&&s.stops?(mn().b[18][0]++,mn().s[58]++,r=this.props.value.stops.map((O,T)=>{var te,G;mn().f[17]++;const F=(mn().s[59]++,typeof O[0]=="object"?(mn().b[19][0]++,O[0].zoom):(mn().b[19][1]++,void 0)),j=(mn().s[60]++,this.state.refs[T]),N=(mn().s[61]++,typeof O[0]=="object"?(mn().b[20][0]++,O[0].value):(mn().b[20][1]++,O[0])),q=(mn().s[62]++,O[1]),H=(mn().s[63]++,ue.jsx(cG,{onClick:(te=this.props.onDeleteStop)==null?void 0:te.bind(this,T)})),oe=(mn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:N,onChange:ie=>(mn().f[18]++,mn().s[65]++,this.changeStop(T,{zoom:F,value:ie},q))});let ne;mn().s[66]++,((G=this.props.value)==null?void 0:G.type)==="categorical"?(mn().b[21][0]++,mn().s[67]++,ne=ue.jsx(Zf,{...oe})):(mn().b[21][1]++,mn().s[68]++,ne=ue.jsx(pm,{...oe}));let $=(mn().s[69]++,null);return mn().s[70]++,F!==void 0?(mn().b[22][0]++,mn().s[71]++,$=ue.jsx("div",{children:ue.jsx(pm,{"aria-label":"Zoom",value:F,onChange:ie=>(mn().f[19]++,mn().s[72]++,this.changeStop(T,{zoom:ie,value:N},q)),min:0,max:22})})):mn().b[22][1]++,mn().s[73]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:$}),ue.jsx("td",{children:ne}),ue.jsx("td",{children:ue.jsx(Fy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:q,onChange:(ie,he)=>(mn().f[20]++,mn().s[74]++,this.changeStop(T,{zoom:F,value:N},he))})}),ue.jsx("td",{children:H})]},j)})):mn().b[18][1]++,mn().s[75]++,ue.jsx("div",{className:"maputnik-data-spec-block",children:ue.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ue.jsx("legend",{children:I3(this.props.fieldName)}),ue.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ue.jsx(pa,{label:t("Function"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(s1,{value:this.props.value.type,onChange:O=>(mn().f[21]++,mn().s[76]++,this.changeDataType(O)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(mn().b[23][0]++,((a=this.props.value)==null?void 0:a.type)!=="identity"&&(mn().b[23][1]++,ue.jsx(pa,{label:t("Base"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Fy,{fieldName:"base",fieldSpec:ns.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(O,T)=>(mn().f[22]++,mn().s[77]++,this.changeBase(T))})})},"base"))),ue.jsx(pa,{label:"Property",children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Zf,{value:(f=this.props.value)==null?void 0:f.property,title:t("Input a data property to base styles off of."),onChange:O=>(mn().f[23]++,mn().s[78]++,this.changeDataProperty("property",O))})})},"property"),(mn().b[24][0]++,r&&(mn().b[24][1]++,ue.jsx(pa,{label:t("Default"),children:ue.jsx(Fy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(y=this.props.value)==null?void 0:y.default,onChange:(O,T)=>(mn().f[24]++,mn().s[79]++,this.changeDataProperty("default",T))})},"default"))),(mn().b[25][0]++,r&&(mn().b[25][1]++,ue.jsx("div",{className:"maputnik-function-stop",children:ue.jsxs("table",{className:"maputnik-function-stop-table",children:[ue.jsx("caption",{children:t("Stops")}),ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:t("Zoom")}),ue.jsx("th",{children:t("Input value")}),ue.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ue.jsx("tbody",{children:r})]})}))),ue.jsxs("div",{className:"maputnik-toolbox",children:[(mn().b[26][0]++,r&&(mn().b[26][1]++,ue.jsxs(el,{className:"maputnik-add-stop",onClick:(x=this.props.onAddStop)==null?void 0:x.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:$O})})," ",t("Add stop")]}))),ue.jsxs(el,{className:"maputnik-add-stop",onClick:(B=this.props.onExpressionClick)==null?void 0:B.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:t_})})," ",t("Convert to expression")]})]})]})]})})}}const Nde=(mn().s[80]++,Ws()(jde));function Mr(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Mr=function(){return a},a}Mr();function TR(n,e){Mr().f[0]++;let t=(Mr().s[0]++,{});return Mr().s[1]++,Mr().b[1][0]++,n.value&&(Mr().b[1][1]++,n.value.stops)?(Mr().b[0][0]++,Mr().s[2]++,n.value.stops.forEach((r,i)=>{Mr().f[1]++,Mr().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(Mr().b[2][0]++,Mr().s[4]++,t?Mr().b[3][1]++:(Mr().b[3][0]++,Mr().s[5]++,t={...e}),Mr().s[6]++,t[i]=Xy("stop-")):(Mr().b[2][1]++,Mr().s[7]++,t[i]=e.refs[i])})):Mr().b[0][1]++,Mr().s[8]++,t}class dG extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(Mr().s[10]++,{refs:{}}));Pn(this,"changeDataType",(Mr().s[36]++,t=>{Mr().f[11]++,Mr().s[37]++,Mr().b[8][0]++,t!=="interpolate"&&(Mr().b[8][1]++,this.props.onChangeToDataFunction)?(Mr().b[7][0]++,Mr().s[38]++,this.props.onChangeToDataFunction(t)):Mr().b[7][1]++}))}componentDidMount(){Mr().f[2]++;const t=(Mr().s[11]++,TR(this.props,this.state));Mr().s[12]++,t?(Mr().b[4][0]++,Mr().s[13]++,this.setState({refs:t})):Mr().b[4][1]++}static getDerivedStateFromProps(t,r){Mr().f[3]++;const i=(Mr().s[14]++,TR(t,r));return Mr().s[15]++,i?(Mr().b[5][0]++,Mr().s[16]++,{refs:i}):(Mr().b[5][1]++,Mr().s[17]++,null)}orderStopsByZoom(t){Mr().f[4]++;const r=(Mr().s[18]++,t.map((s,a)=>(Mr().f[5]++,Mr().s[19]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(Mr().f[6]++,Mr().s[20]++,AG(s.data[0],a.data[0])))),i=(Mr().s[21]++,{});return Mr().s[22]++,r.forEach((s,a)=>{Mr().f[7]++,Mr().s[23]++,i[a]=s.ref}),Mr().s[24]++,this.setState({refs:i}),Mr().s[25]++,r.map(s=>(Mr().f[8]++,Mr().s[26]++,s.data))}changeZoomStop(t,r,i){Mr().f[9]++;const s=(Mr().s[27]++,this.props.value.stops.slice(0));Mr().s[28]++,s[t]=[r,i];const a=(Mr().s[29]++,this.orderStopsByZoom(s)),o=(Mr().s[30]++,{...this.props.value,stops:a});Mr().s[31]++,this.props.onChange(this.props.fieldName,o)}changeBase(t){Mr().f[10]++;const r=(Mr().s[32]++,{...this.props.value,base:t});Mr().s[33]++,r.base===void 0?(Mr().b[6][0]++,Mr().s[34]++,delete r.base):Mr().b[6][1]++,Mr().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,s,a,o;Mr().f[12]++;const t=(Mr().s[39]++,this.props.t),r=(Mr().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((f,y)=>{var T;Mr().f[13]++;const x=(Mr().s[41]++,f[0]),B=(Mr().s[42]++,f[1]),O=(Mr().s[43]++,ue.jsx(cG,{onClick:(T=this.props.onDeleteStop)==null?void 0:T.bind(this,y)}));return Mr().s[44]++,ue.jsxs("tr",{children:[ue.jsx("td",{children:ue.jsx(pm,{"aria-label":t("Zoom"),value:x,onChange:F=>(Mr().f[14]++,Mr().s[45]++,this.changeZoomStop(y,F,B)),min:0,max:22})}),ue.jsx("td",{children:ue.jsx(Fy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:B,onChange:(F,j)=>(Mr().f[15]++,Mr().s[46]++,this.changeZoomStop(y,x,j))})}),ue.jsx("td",{children:O})]},`${f[0]}-${f[1]}`)}));return Mr().s[47]++,ue.jsx("div",{className:"maputnik-data-spec-block",children:ue.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[ue.jsx("legend",{children:I3(this.props.fieldName)}),ue.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[ue.jsx(pa,{label:t("Function"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(s1,{value:"interpolate",onChange:f=>(Mr().f[16]++,Mr().s[48]++,this.changeDataType(f)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),ue.jsx(pa,{label:t("Base"),children:ue.jsx("div",{className:"maputnik-data-spec-property-input",children:ue.jsx(Fy,{fieldName:"base",fieldSpec:ns.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(f,y)=>(Mr().f[17]++,Mr().s[49]++,this.changeBase(y))})})}),ue.jsx("div",{className:"maputnik-function-stop",children:ue.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[ue.jsx("caption",{children:t("Stops")}),ue.jsx("thead",{children:ue.jsxs("tr",{children:[ue.jsx("th",{children:t("Zoom")}),ue.jsx("th",{rowSpan:2,children:t("Output value")})]})}),ue.jsx("tbody",{children:r})]})}),ue.jsxs("div",{className:"maputnik-toolbox",children:[ue.jsxs(el,{className:"maputnik-add-stop",onClick:(a=this.props.onAddStop)==null?void 0:a.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:$O})})," ",t("Add stop")]}),ue.jsxs(el,{className:"maputnik-add-stop",onClick:(o=this.props.onExpressionClick)==null?void 0:o.bind(this),children:[ue.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:ue.jsx("path",{fill:"currentColor",d:t_})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return Mr().f[18]++,Mr().s[50]++,t["property-type"]==="data-driven"?(Mr().b[9][0]++,Mr().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(Mr().b[9][1]++,Mr().s[52]++,["interpolate"])}}Pn(dG,"defaultProps",(Mr().s[9]++,{errors:{}}));const Wde=(Mr().s[53]++,Ws()(dG));function Ft(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ft=function(){return a},a}Ft();function PR(n){return Ft().f[0]++,Ft().s[0]++,Ft().b[0][0]++,Array.isArray(n)&&(Ft().b[0][1]++,n.length===2)&&(Ft().b[0][2]++,n[0]==="literal")}function KR(n){return Ft().f[1]++,Ft().s[1]++,Ft().b[1][0]++,Array.isArray(n)&&(Ft().b[1][1]++,n.length===2)&&(Ft().b[1][2]++,n[0]==="get")}function Gde(n){return Ft().f[2]++,Ft().s[2]++,Ft().b[2][0]++,typeof n=="object"&&(Ft().b[2][1]++,n.stops)&&(Ft().b[2][2]++,typeof n.property>"u")&&(Ft().b[2][3]++,Array.isArray(n.stops))&&(Ft().b[2][4]++,n.stops.length>1)&&(Ft().b[2][5]++,n.stops.every(e=>(Ft().f[3]++,Ft().s[3]++,Ft().b[3][0]++,Array.isArray(e)&&(Ft().b[3][1]++,e.length===2))))}function hG(n){return Ft().f[4]++,Ft().s[4]++,Ft().b[4][0]++,typeof n=="object"&&(Ft().b[4][1]++,n.type==="identity")&&(Ft().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function Qde(n){return Ft().f[5]++,Ft().s[5]++,Ft().b[5][0]++,typeof n=="object"&&(Ft().b[5][1]++,n.stops)&&(Ft().b[5][2]++,typeof n.property<"u")&&(Ft().b[5][3]++,n.stops.length>1)&&(Ft().b[5][4]++,Array.isArray(n.stops))&&(Ft().b[5][5]++,n.stops.every(e=>(Ft().f[6]++,Ft().s[6]++,Ft().b[6][0]++,Array.isArray(e)&&(Ft().b[6][1]++,e.length===2)&&(Ft().b[6][2]++,typeof e[0]=="object"))))}function qde(n){return Ft().f[7]++,Ft().s[7]++,Ft().b[7][0]++,hG(n)||(Ft().b[7][1]++,Qde(n))}function g7(n){Ft().f[8]++;const e=(Ft().s[8]++,["string","boolean","number"]);return Ft().s[9]++,e.includes(typeof n)}function Yde(n){return Ft().f[9]++,Ft().s[10]++,Array.isArray(n)?(Ft().b[8][0]++,Ft().s[11]++,n.every(g7)):(Ft().b[8][1]++,Ft().s[12]++,!1)}function DR(n,e=(Ft().b[9][0]++,{})){return Ft().f[10]++,Ft().s[13]++,n===void 0?(Ft().b[10][0]++,Ft().s[14]++,"value"):(Ft().b[10][1]++,Ft().s[15]++,g7(n)?(Ft().b[11][0]++,Ft().s[16]++,"value"):(Ft().b[11][1]++,Ft().s[17]++,Ft().b[13][0]++,e.type==="array"&&(Ft().b[13][1]++,Yde(n))?(Ft().b[12][0]++,Ft().s[18]++,"value"):(Ft().b[12][1]++,Ft().s[19]++,Gde(n)?(Ft().b[14][0]++,Ft().s[20]++,"zoom_function"):(Ft().b[14][1]++,Ft().s[21]++,qde(n)?(Ft().b[15][0]++,Ft().s[22]++,"data_function"):(Ft().b[15][1]++,Ft().s[23]++,"expression")))))}class $de extends nr.Component{constructor(t){Ft().f[11]++,Ft().s[24]++;super(t);Pn(this,"addStop",(Ft().s[34]++,()=>{Ft().f[14]++;const t=(Ft().s[35]++,this.props.value.stops.slice(0)),r=(Ft().s[36]++,t[t.length-1]);Ft().s[37]++,typeof r[0]=="object"?(Ft().b[19][0]++,Ft().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Ft().b[19][1]++,Ft().s[39]++,t.push([r[0]+1,r[1]]));const i=(Ft().s[40]++,{...this.props.value,stops:t});Ft().s[41]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"deleteExpression",(Ft().s[42]++,()=>{Ft().f[15]++;const{fieldSpec:t,fieldName:r}=(Ft().s[43]++,this.props);Ft().s[44]++,this.props.onChange(r,t.default),Ft().s[45]++,this.setState({dataType:"value"})}));Pn(this,"deleteStop",(Ft().s[46]++,t=>{Ft().f[16]++;const r=(Ft().s[47]++,this.props.value.stops.slice(0));Ft().s[48]++,r.splice(t,1);let i=(Ft().s[49]++,{...this.props.value,stops:r});Ft().s[50]++,r.length===1?(Ft().b[20][0]++,Ft().s[51]++,i=r[0][1]):Ft().b[20][1]++,Ft().s[52]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeZoomFunction",(Ft().s[53]++,()=>{Ft().f[17]++;const{value:t}=(Ft().s[54]++,this.props);let r;Ft().s[55]++,typeof t=="object"?(Ft().b[21][0]++,Ft().s[56]++,t.stops?(Ft().b[22][0]++,Ft().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Ft().f[18]++,Ft().s[58]++,[i[0].zoom,(Ft().b[23][0]++,i[1]||(Ft().b[23][1]++,Uf(this.props.fieldSpec)))]))}):(Ft().b[22][1]++,Ft().s[59]++,r={base:t.base,stops:[[6,Uf(this.props.fieldSpec)],[10,Uf(this.props.fieldSpec)]]})):(Ft().b[21][1]++,Ft().s[60]++,r={stops:[[6,(Ft().b[24][0]++,t||(Ft().b[24][1]++,Uf(this.props.fieldSpec)))],[10,(Ft().b[25][0]++,t||(Ft().b[25][1]++,Uf(this.props.fieldSpec)))]]}),Ft().s[61]++,this.props.onChange(this.props.fieldName,r)}));Pn(this,"undoExpression",(Ft().s[62]++,()=>{Ft().f[19]++;const{value:t,fieldName:r}=(Ft().s[63]++,this.props);Ft().s[64]++,KR(t)?(Ft().b[26][0]++,Ft().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Ft().s[66]++,this.setState({dataType:"value"})):(Ft().b[26][1]++,Ft().s[67]++,PR(t)?(Ft().b[27][0]++,Ft().s[68]++,this.props.onChange(r,t[1]),Ft().s[69]++,this.setState({dataType:"value"})):Ft().b[27][1]++)}));Pn(this,"canUndo",(Ft().s[70]++,()=>{Ft().f[20]++;const{value:t,fieldSpec:r}=(Ft().s[71]++,this.props);return Ft().s[72]++,Ft().b[28][0]++,KR(t)||(Ft().b[28][1]++,PR(t))||(Ft().b[28][2]++,g7(t))||(Ft().b[28][3]++,Array.isArray(t)&&(Ft().b[28][4]++,r.type==="array"))}));Pn(this,"makeExpression",(Ft().s[73]++,()=>{Ft().f[21]++;const{value:t,fieldSpec:r}=(Ft().s[74]++,this.props);let i;Ft().s[75]++,Ft().b[30][0]++,typeof t=="object"&&(Ft().b[30][1]++,"stops"in t)?(Ft().b[29][0]++,Ft().s[76]++,i=GH.convertFunction(t,r)):(Ft().b[29][1]++,Ft().s[77]++,hG(t)?(Ft().b[31][0]++,Ft().s[78]++,i=["get",t.property]):(Ft().b[31][1]++,Ft().s[79]++,i=["literal",(Ft().b[32][0]++,t||(Ft().b[32][1]++,this.props.fieldSpec.default))])),Ft().s[80]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeDataFunction",(Ft().s[81]++,()=>{Ft().f[22]++;const t=(Ft().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Ft().s[83]++,t==="categorical"?(Ft().b[33][0]++,""):(Ft().b[33][1]++,0)),{value:i}=(Ft().s[84]++,this.props);let s;Ft().s[85]++,typeof i=="object"?(Ft().b[34][0]++,Ft().s[86]++,i.stops?(Ft().b[35][0]++,Ft().s[87]++,s={property:"",type:t,base:i.base,stops:i.stops.map(a=>(Ft().f[23]++,Ft().s[88]++,[{zoom:a[0],value:r},(Ft().b[36][0]++,a[1]||(Ft().b[36][1]++,Uf(this.props.fieldSpec)))]))}):(Ft().b[35][1]++,Ft().s[89]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},Uf(this.props.fieldSpec)],[{zoom:10,value:r},Uf(this.props.fieldSpec)]]})):(Ft().b[34][1]++,Ft().s[90]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Ft().b[37][0]++,this.props.value||(Ft().b[37][1]++,Uf(this.props.fieldSpec)))],[{zoom:10,value:r},(Ft().b[38][0]++,this.props.value||(Ft().b[38][1]++,Uf(this.props.fieldSpec)))]]}),Ft().s[91]++,this.props.onChange(this.props.fieldName,s)}));Pn(this,"onMarkEditing",(Ft().s[92]++,()=>{Ft().f[24]++,Ft().s[93]++,this.setState({isEditing:!0})}));Pn(this,"onUnmarkEditing",(Ft().s[94]++,()=>{Ft().f[25]++,Ft().s[95]++,this.setState({isEditing:!1})}));Ft().s[25]++,this.state={dataType:DR(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Ft().f[12]++,Ft().s[26]++,r.isEditing?(Ft().b[16][0]++,Ft().s[27]++,{}):(Ft().b[16][1]++,Ft().s[28]++,{isEditing:!1,dataType:DR(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Ft().f[13]++,Ft().s[29]++,t.expression.interpolated?(Ft().b[17][0]++,Ft().s[30]++,"exponential"):(Ft().b[17][1]++,Ft().s[31]++,t.type==="number"?(Ft().b[18][0]++,Ft().s[32]++,"interval"):(Ft().b[18][1]++,Ft().s[33]++,"categorical"))}render(){Ft().f[26]++;const{dataType:t}=(Ft().s[96]++,this.state),r=(Ft().s[97]++,this.props.fieldSpec.default===this.props.value?(Ft().b[39][0]++,"maputnik-default-property"):(Ft().b[39][1]++,"maputnik-modified-property"));let i;return Ft().s[98]++,t==="expression"?(Ft().b[40][0]++,Ft().s[99]++,i=ue.jsx(_W,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Ft().b[40][1]++,Ft().s[100]++,t==="zoom_function"?(Ft().b[41][0]++,Ft().s[101]++,i=ue.jsx(Wde,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Ft().b[41][1]++,Ft().s[102]++,t==="data_function"?(Ft().b[42][0]++,Ft().s[103]++,i=ue.jsx(Nde,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Ft().b[42][1]++,Ft().s[104]++,i=ue.jsx(uG,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Ft().s[105]++,ue.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function mo(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mo=function(){return a},a}mo();const Vde=(mo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Hde(n,e,t){mo().f[0]++;const r=(mo().s[1]++,fG(n,e,t)),i=(mo().s[2]++,n[r+"_"+e]),s=(mo().s[3]++,i[t]);return mo().s[4]++,Vde.indexOf(t)>=0?(mo().b[0][0]++,mo().s[5]++,{...s,values:n.$root.sprite.values}):(mo().b[0][1]++,mo().s[6]++,t==="text-font"?(mo().b[1][0]++,mo().s[7]++,{...s,values:n.$root.glyphs.values}):(mo().b[1][1]++,mo().s[8]++,s))}function fG(n,e,t){mo().f[1]++;const r=(mo().s[9]++,mo().b[2][0]++,n["paint_"+e]||(mo().b[2][1]++,{}));return mo().s[10]++,t in r?(mo().b[3][0]++,mo().s[11]++,"paint"):(mo().b[3][1]++,mo().s[12]++,"layout")}class Zde extends nr.Component{constructor(){super(...arguments);Pn(this,"onPropertyChange",(mo().s[13]++,(t,r)=>{mo().f[2]++;const i=(mo().s[14]++,fG(this.props.spec,this.props.layer.type,t));mo().s[15]++,this.props.onChange(i,t,r)}))}render(){mo().f[3]++;const{errors:t}=(mo().s[16]++,this.props),r=(mo().s[17]++,this.props.groupFields.map(i=>{mo().f[4]++;const s=(mo().s[18]++,Hde(this.props.spec,this.props.layer.type,i)),a=(mo().s[19]++,mo().b[4][0]++,this.props.layer.paint||(mo().b[4][1]++,{})),o=(mo().s[20]++,mo().b[5][0]++,this.props.layer.layout||(mo().b[5][1]++,{})),f=(mo().s[21]++,i in a?(mo().b[6][0]++,a[i]):(mo().b[6][1]++,o[i])),y=(mo().s[22]++,i in a?(mo().b[7][0]++,"paint"):(mo().b[7][1]++,"layout"));return mo().s[23]++,ue.jsx($de,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:f,fieldType:y,fieldSpec:s},i)}));return mo().s[24]++,ue.jsx("div",{className:"maputnik-property-group",children:r})}}var wE,RR;function Xde(){return RR||(RR=1,wE=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var a in r)t.d(s,a,(function(o){return r[o]}).bind(null,a));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=Op()},function(n,e){n.exports=ja()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(F){for(var j,N=1,q=arguments.length;N<q;N++)for(var H in j=arguments[N])Object.prototype.hasOwnProperty.call(j,H)&&(F[H]=j[H]);return F}).apply(this,arguments)},a=function(F,j){var N={};for(var q in F)Object.prototype.hasOwnProperty.call(F,q)&&j.indexOf(q)<0&&(N[q]=F[q]);if(F!=null&&typeof Object.getOwnPropertySymbols=="function"){var H=0;for(q=Object.getOwnPropertySymbols(F);H<q.length;H++)j.indexOf(q[H])<0&&Object.prototype.propertyIsEnumerable.call(F,q[H])&&(N[q[H]]=F[q[H]])}return N},o=0,f=r.forwardRef(function(F,j){var N=F.title,q=N===void 0?null:N,H=F.description,oe=H===void 0?null:H,ne=F.size,$=ne===void 0?null:ne,te=F.color,G=te===void 0?"currentColor":te,ie=F.horizontal,he=ie===void 0?null:ie,pe=F.vertical,Ee=pe===void 0?null:pe,me=F.rotate,Se=me===void 0?null:me,De=F.spin,be=De===void 0?null:De,at=F.style,Ze=at===void 0?{}:at,Je=F.children,We=a(F,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var Me,Fe=be!==null&&be,He=r.Children.map(Je,function(Lt){var Kt=Lt;Fe!==!0&&(Fe=(be===null?Kt.props.spin:be)===!0);var Ue=Kt.props.size;typeof $=="number"&&typeof Kt.props.size=="number"&&(Ue=Kt.props.size/$);var Pe={size:Ue,color:G===null?Kt.props.color:G,horizontal:he===null?Kt.props.horizontal:he,vertical:Ee===null?Kt.props.vertical:Ee,rotate:Se===null?Kt.props.rotate:Se,spin:be===null?Kt.props.spin:be,inStack:!0};return r.cloneElement(Kt,Pe)});$!==null&&(Ze.width=typeof $=="string"?$:1.5*$+"rem");var bt,Yt="stack_labelledby_"+o,gt="stack_describedby_"+o;if(q)Me=oe?Yt+" "+gt:Yt;else if(bt="presentation",oe)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:j,viewBox:"0 0 24 24",style:Ze,role:bt,"aria-labelledby":Me},We),q&&r.createElement("title",{id:Yt},q),oe&&r.createElement("desc",{id:gt},oe),Fe&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),He)});f.displayName="Stack",f.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},f.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var y=f;t.d(e,"Icon",function(){return T}),t.d(e,"Stack",function(){return y});var x=function(){return(x=Object.assign||function(F){for(var j,N=1,q=arguments.length;N<q;N++)for(var H in j=arguments[N])Object.prototype.hasOwnProperty.call(j,H)&&(F[H]=j[H]);return F}).apply(this,arguments)},B=function(F,j){var N={};for(var q in F)Object.prototype.hasOwnProperty.call(F,q)&&j.indexOf(q)<0&&(N[q]=F[q]);if(F!=null&&typeof Object.getOwnPropertySymbols=="function"){var H=0;for(q=Object.getOwnPropertySymbols(F);H<q.length;H++)j.indexOf(q[H])<0&&Object.prototype.propertyIsEnumerable.call(F,q[H])&&(N[q[H]]=F[q[H]])}return N},O=0,T=r.forwardRef(function(F,j){var N=F.path,q=F.id,H=q===void 0?++O:q,oe=F.title,ne=oe===void 0?null:oe,$=F.description,te=$===void 0?null:$,G=F.size,ie=G===void 0?null:G,he=F.color,pe=he===void 0?"currentColor":he,Ee=F.horizontal,me=Ee!==void 0&&Ee,Se=F.vertical,De=Se!==void 0&&Se,be=F.rotate,at=be===void 0?0:be,Ze=F.spin,Je=Ze!==void 0&&Ze,We=F.style,Me=We===void 0?{}:We,Fe=F.inStack,He=Fe!==void 0&&Fe,bt=B(F,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),Yt={},gt=[];ie!==null&&(He?gt.push("scale("+ie+")"):(Me.width=typeof ie=="string"?ie:1.5*ie+"rem",Me.height=Me.width)),me&&gt.push("scaleX(-1)"),De&&gt.push("scaleY(-1)"),at!==0&&gt.push("rotate("+at+"deg)"),pe!==null&&(Yt.fill=pe);var Lt=r.createElement("path",x({d:N,style:Yt},He?bt:{})),Kt=Lt;gt.length>0&&(Me.transform=gt.join(" "),Me.transformOrigin="center",He&&(Kt=r.createElement("g",{style:Me},Lt,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Ue,Pe=Kt,Be=Je===!0||typeof Je!="number"?2:Je,it=!He&&(me||De);if(Be<0&&(it=!it),Je&&(Pe=r.createElement("g",{style:{animation:"spin"+(it?"-inverse":"")+" linear "+Math.abs(Be)+"s infinite",transformOrigin:"center"}},Kt,!(me||De||at!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),He)return Pe;var _t,ft="icon_labelledby_"+H,Ut="icon_describedby_"+H;if(ne)Ue=te?ft+" "+Ut:ft;else if(_t="presentation",te)throw new Error("title attribute required when description is set");return r.createElement("svg",x({ref:j,viewBox:"0 0 24 24",style:Me,role:_t,"aria-labelledby":Ue},bt),ne&&r.createElement("title",{id:ft},ne),te&&r.createElement("desc",{id:Ut},te),!He&&Je&&(it?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Pe)});T.displayName="Icon",T.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},T.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=T}])),wE}var Jde=Xde();const FR=Al(Jde);function xy(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return xy=function(){return a},a}xy();class ehe extends nr.Component{render(){return xy().f[0]++,xy().s[0]++,ue.jsxs(dW,{uuid:this.props.id,children:[ue.jsx(pW,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(xy().f[1]++,xy().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:ue.jsxs(vue,{className:"maputnik-layer-editor-group__button",children:[ue.jsx("span",{style:{flexGrow:1},children:this.props.title}),ue.jsx(FR,{path:Uue,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),ue.jsx(FR,{path:Lue,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),ue.jsx(xue,{children:this.props.children})]})}}function Uy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Uy=function(){return a},a}Uy();class the extends nr.Component{render(){Uy().f[0]++;const e=(Uy().s[0]++,this.props.t);return Uy().s[1]++,ue.jsx(pa,{label:e("Min Zoom"),fieldSpec:ns.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:ue.jsx(pm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ns.layer.minzoom.minimum,max:ns.layer.minzoom.maximum,default:ns.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const nhe=(Uy().s[2]++,Ws()(the));function zy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return zy=function(){return a},a}zy();class rhe extends nr.Component{render(){zy().f[0]++;const e=(zy().s[0]++,this.props.t);return zy().s[1]++,ue.jsx(pa,{label:e("Max Zoom"),fieldSpec:ns.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:ue.jsx(pm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ns.layer.maxzoom.minimum,max:ns.layer.maxzoom.maximum,default:ns.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const ihe=(zy().s[2]++,Ws()(rhe));function Lg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Lg=function(){return a},a}Lg();class ohe extends nr.Component{render(){Lg().f[0]++;const e=(Lg().s[0]++,this.props.t),t=(Lg().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Lg().s[2]++,ue.jsx(pa,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:ue.jsx(Zf,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const she=(Lg().s[3]++,Ws()(ohe)),ahe={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},lhe={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},uhe={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},Ahe={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},che={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},dhe={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},hhe={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},fhe={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},phe={groups:[]},$b={line:ahe,background:lhe,fill:uhe,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:Ahe,symbol:che,raster:dhe,hillshade:hhe,heatmap:fhe,invalid:phe};function wy(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return wy=function(){return a},a}wy();function pG(n){return wy().f[0]++,wy().s[0]++,n===""?(wy().b[0][0]++,"[empty_string]"):(wy().b[0][1]++,`'${n}'`)}function Kn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Kn=function(){return a},a}Kn();function mG(n,e){return Kn().f[0]++,Kn().s[0]++,$b[n]?(Kn().b[0][0]++,{...$b[n],groups:$b[n].groups.map(t=>(Kn().f[1]++,Kn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(Kn().b[0][1]++,$b.invalid)}function LR(n,e){Kn().f[2]++;const t=(Kn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(Kn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(Kn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Kn().s[5]++,[t,r].concat(mG(n,e).groups).concat([i])}class jB extends nr.Component{constructor(e){Kn().f[6]++,Kn().s[8]++,super(e);const t=(Kn().s[9]++,{});Kn().s[10]++,LR(this.props.layer.type,e.t).forEach(r=>{Kn().f[7]++,Kn().s[11]++,t[r.title]=!0}),Kn().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Kn().f[8]++;const r=(Kn().s[13]++,{...t.editorGroups});return Kn().s[14]++,mG(e.layer.type,e.t).groups.forEach(i=>{Kn().f[9]++,Kn().s[15]++,i.title in r?Kn().b[1][1]++:(Kn().b[1][0]++,Kn().s[16]++,r[i.title]=!0)}),Kn().s[17]++,{editorGroups:r}}getChildContext(){return Kn().f[10]++,Kn().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){Kn().f[11]++,Kn().s[19]++,this.props.onLayerChanged(this.props.layerIndex,Kle(this.props.layer,e,t,r))}onGroupToggle(e,t){Kn().f[12]++;const r=(Kn().s[20]++,{...this.state.editorGroups,[e]:t});Kn().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){Kn().f[13]++;let r=(Kn().s[22]++,"");Kn().s[23]++,this.props.layer.metadata?(Kn().b[2][0]++,Kn().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):Kn().b[2][1]++;const{errors:i,layerIndex:s}=(Kn().s[25]++,this.props),a=(Kn().s[26]++,{});Kn().s[27]++,i.forEach(y=>{Kn().f[14]++,Kn().s[28]++,Kn().b[4][0]++,y.parsed&&(Kn().b[4][1]++,y.parsed.type==="layer")&&(Kn().b[4][2]++,y.parsed.data.index==s)?(Kn().b[3][0]++,Kn().s[29]++,a[y.parsed.data.key]={message:y.parsed.data.message}):Kn().b[3][1]++});let o;const f=(Kn().s[30]++,this.props.layer);switch(Kn().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,f.source)?(Kn().b[5][0]++,Kn().s[32]++,o=this.props.sources[f.source].layers):Kn().b[5][1]++,Kn().s[33]++,e){case"layer":return Kn().b[6][0]++,Kn().s[34]++,ue.jsxs("div",{children:[ue.jsx(JN,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:a.id,onChange:y=>(Kn().f[15]++,Kn().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,y))}),ue.jsx(XN,{disabled:!0,error:a.type,value:this.props.layer.type,onChange:y=>(Kn().f[16]++,Kn().s[36]++,this.props.onLayerChanged(this.props.layerIndex,Ple(this.props.layer,y)))}),(Kn().b[7][0]++,this.props.layer.type!=="background"&&(Kn().b[7][1]++,ue.jsx(tW,{error:a.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:y=>(Kn().f[17]++,Kn().s[37]++,this.changeProperty(null,"source",y))}))),(Kn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(Kn().b[8][1]++,ue.jsx(rW,{error:a["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:y=>(Kn().f[18]++,Kn().s[38]++,this.changeProperty(null,"source-layer",y))}))),ue.jsx(nhe,{error:a.minzoom,value:this.props.layer.minzoom,onChange:y=>(Kn().f[19]++,Kn().s[39]++,this.changeProperty(null,"minzoom",y))}),ue.jsx(ihe,{error:a.maxzoom,value:this.props.layer.maxzoom,onChange:y=>(Kn().f[20]++,Kn().s[40]++,this.changeProperty(null,"maxzoom",y))}),ue.jsx(she,{error:a.comment,value:r,onChange:y=>(Kn().f[21]++,Kn().s[41]++,this.changeProperty("metadata","maputnik:comment",y==""?(Kn().b[9][0]++,void 0):(Kn().b[9][1]++,y)))})]});case"filter":return Kn().b[6][1]++,Kn().s[42]++,ue.jsx("div",{children:ue.jsx("div",{className:"maputnik-filter-editor-wrapper",children:ue.jsx(Xue,{errors:a,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:y=>(Kn().f[22]++,Kn().s[43]++,this.changeProperty(null,"filter",y))})})});case"properties":return Kn().b[6][2]++,Kn().s[44]++,ue.jsx(Zde,{errors:a,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Kn().b[6][3]++,Kn().s[45]++,ue.jsx(YO,{layer:this.props.layer,onChange:y=>{Kn().f[23]++,Kn().s[46]++,this.props.onLayerChanged(this.props.layerIndex,y)}});default:return Kn().b[6][4]++,Kn().s[47]++,ue.jsx(ue.Fragment,{})}}moveLayer(e){Kn().f[24]++,Kn().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Kn().f[25]++;const e=(Kn().s[49]++,this.props.t),t=(Kn().s[50]++,[]),r=(Kn().s[51]++,this.props.layer.type),i=(Kn().s[52]++,LR(r,e).filter(f=>(Kn().f[26]++,Kn().s[53]++,Kn().b[10][0]++,!(r==="background"&&(Kn().b[10][1]++,f.type==="source")))).map(f=>{Kn().f[27]++;const y=(Kn().s[54]++,f.id);return Kn().s[55]++,t.push(y),Kn().s[56]++,ue.jsx(ehe,{"data-wd-key":f.title,id:y,title:f.title,isActive:this.state.editorGroups[f.title],onActiveToggle:this.onGroupToggle.bind(this,f.title),children:this.renderGroupType(f.type,f.fields)},y)})),s=(Kn().s[57]++,Kn().b[11][0]++,this.props.layer.layout||(Kn().b[11][1]++,{})),a=(Kn().s[58]++,{delete:{text:e("Delete"),handler:()=>(Kn().f[28]++,Kn().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(Kn().f[29]++,Kn().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(Kn().b[12][0]++,e("Show")):(Kn().b[12][1]++,e("Hide")),handler:()=>(Kn().f[30]++,Kn().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Kn().f[31]++,Kn().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Kn().f[32]++,Kn().s[63]++,this.moveLayer(1))}});function o(f,y){Kn().f[33]++,Kn().s[64]++,y.stopPropagation(),Kn().s[65]++,a[f].handler()}return Kn().s[66]++,ue.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[ue.jsx("header",{children:ue.jsxs("div",{className:"layer-header",children:[ue.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:pG(this.props.layer.id)})}),ue.jsx("div",{className:"layer-header__info",children:ue.jsxs(Nb.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[ue.jsx(Nb.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:ue.jsx(GZ,{className:"more-menu__button__svg"})}),ue.jsx(Nb.Menu,{children:ue.jsx("ul",{className:"more-menu__menu",children:Object.keys(a).map(f=>{Kn().f[34]++;const y=(Kn().s[67]++,a[f]);return Kn().s[68]++,ue.jsx("li",{children:ue.jsx(Nb.MenuItem,{value:f,className:"more-menu__menu__item",children:y.text})},f)})})})]})})]})}),ue.jsx(sue,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}Pn(jB,"defaultProps",(Kn().s[6]++,{onLayerChanged:()=>{Kn().f[3]++},onLayerIdChange:()=>{Kn().f[4]++},onLayerDestroyed:()=>{Kn().f[5]++}})),Pn(jB,"childContextTypes",(Kn().s[7]++,{reactIconBase:fi.object}));const mhe=(Kn().s[69]++,Ws()(jB));var UR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},ghe=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),yhe=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),vhe=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),Che=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),_he=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),bhe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,xhe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zR=3,whe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",bhe]],jR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Mhe(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new _he:typeof navigator<"u"?Ehe(navigator.userAgent):Ohe()}function She(n){return n!==""&&whe.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function Ehe(n){var e=She(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Che;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<zR&&(i=UR(UR([],i,!0),Ihe(zR-i.length),!0)):i=[];var s=i.join("."),a=Bhe(n),o=xhe.exec(n);return o&&o[1]?new vhe(t,s,a,o[1]):new ghe(t,s,a)}function Bhe(n){for(var e=0,t=jR.length;e<t;e++){var r=jR[e],i=r[0],s=r[1],a=s.exec(n);if(a)return i}return null}function Ohe(){var n=typeof process<"u"&&process.version;return n?new yhe(process.version.slice(1)):null}function Ihe(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const khe="maputnik",The="2.1.1",Phe="A MapLibre GL visual style editor",Khe="module",Dhe="''",Rhe={start:"vite",build:"tsc && vite build --base=/maputnik/","build-desktop":"tsc && vite build --base=/ && cd desktop && make","i18n:refresh":"i18next 'src/**/*.{ts,tsx,js,jsx}'",lint:"eslint",test:"cypress run","cy:open":"cypress open","lint-css":'stylelint "src/styles/*.scss"',"sort-styles":"jq 'sort_by(.id)' src/config/styles.json > tmp.json && mv tmp.json src/config/styles.json"},Fhe={type:"git",url:"https://github.com/maplibre/maputnik"},Lhe="Lukas Martinelli",Uhe="MIT",zhe="https://github.com/maplibre/maputnik#readme",jhe={"@mapbox/mapbox-gl-rtl-text":"^0.3.0","@maplibre/maplibre-gl-geocoder":"^1.7.1","@maplibre/maplibre-gl-inspect":"^1.7.1","@maplibre/maplibre-gl-style-spec":"^23.1.0","@mdi/js":"^7.4.47","@mdi/react":"^1.6.1","@prantlf/jsonlint":"^16.0.0","array-move":"^4.0.0",buffer:"^6.0.3",classnames:"^2.5.1",codemirror:"^5.65.18",color:"^5.0.0","detect-browser":"^5.3.0",events:"^3.3.0","file-saver":"^2.0.5",i18next:"^24.2.2","i18next-browser-languagedetector":"^8.0.4","i18next-resources-to-backend":"^1.2.1","json-stringify-pretty-compact":"^4.0.0","json-to-ast":"^2.1.0",lodash:"^4.17.21","lodash.capitalize":"^4.2.1","lodash.clamp":"^4.0.3","lodash.clonedeep":"^4.5.0","lodash.get":"^4.4.2","lodash.isequal":"^4.5.0","lodash.throttle":"^4.1.1","maplibre-gl":"^5.1.0","maputnik-design":"github:maputnik/design#172b06c",ol:"^10.4.0","ol-mapbox-style":"^12.4.0",pmtiles:"^4.1.0","prop-types":"^15.8.1",react:"^18.2.0","react-accessible-accordion":"^5.0.0","react-aria-menubutton":"^7.0.3","react-aria-modal":"^5.0.2","react-autobind":"^1.0.6","react-autocomplete":"^1.8.1","react-collapse":"^5.1.1","react-color":"^2.19.3","react-dom":"^18.2.0","react-file-reader-input":"^2.0.0","react-i18next":"^15.4.0","react-icon-base":"^2.1.2","react-icons":"^5.4.0","react-sortable-hoc":"^2.0.0","reconnecting-websocket":"^4.4.0",slugify:"^1.6.6","string-hash":"^1.1.3",url:"^0.11.4"},Nhe={esversion:6},Whe={extends:"stylelint-config-recommended-scss",rules:{"no-descending-specificity":null,"media-feature-name-no-unknown":[!0,{ignoreMediaFeatureNames:["prefers-reduced-motion"]}]}},Ghe={"@cypress/code-coverage":"^3.13.11","@eslint/js":"^9.19.0","@istanbuljs/nyc-config-typescript":"^1.0.2","@rollup/plugin-replace":"^6.0.2","@shellygo/cypress-test-utils":"^4.1.12","@types/codemirror":"^5.60.15","@types/color":"^4.2.0","@types/cors":"^2.8.17","@types/file-saver":"^2.0.7","@types/geojson":"^7946.0.16","@types/json-to-ast":"^2.1.4","@types/lodash.capitalize":"^4.2.9","@types/lodash.clamp":"^4.0.9","@types/lodash.clonedeep":"^4.5.9","@types/lodash.get":"^4.4.9","@types/lodash.isequal":"^4.5.8","@types/lodash.throttle":"^4.1.9","@types/randomcolor":"^0.5.9","@types/react":"^18.2.67","@types/react-aria-menubutton":"^6.2.14","@types/react-aria-modal":"^5.0.0","@types/react-autocomplete":"^1.8.11","@types/react-collapse":"^5.0.4","@types/react-color":"^3.0.13","@types/react-dom":"^18.2.22","@types/react-file-reader-input":"^2.0.4","@types/react-icon-base":"^2.1.6","@types/string-hash":"^1.1.3","@types/uuid":"^10.0.0","@types/wicg-file-system-access":"^2023.10.5","@vitejs/plugin-react":"^4.3.4",cors:"^2.8.5",cypress:"^14.0.2","cypress-plugin-tab":"^1.0.5",eslint:"^9.19.0","eslint-plugin-react":"^7.37.4","eslint-plugin-react-hooks":"^5.1.0","eslint-plugin-react-refresh":"^0.4.18","i18next-parser":"^9.1.0",istanbul:"^0.4.5","istanbul-lib-coverage":"^3.2.2",postcss:"^8.5.1","react-hot-loader":"^4.13.1",sass:"^1.83.4",stylelint:"^16.14.1","stylelint-config-recommended-scss":"^14.1.0","stylelint-scss":"^6.11.0",typescript:"^5.7.3","typescript-eslint":"^8.22.0",uuid:"^11.0.5",vite:"^6.1.0","vite-plugin-istanbul":"^6.0.2"},NR={name:khe,version:The,description:Phe,type:Khe,main:Dhe,scripts:Rhe,repository:Fhe,author:Lhe,license:Uhe,homepage:zhe,dependencies:jhe,jshintConfig:Nhe,stylelint:Whe,devDependencies:Ghe},Qhe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Qi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qi=function(){return a},a}Qi();const qhe=(Qi().s[0]++,Mhe()),Vb=(Qi().s[1]++,["chrome","firefox"].indexOf(qhe.name)>-1);class xg extends nr.Component{render(){return Qi().f[0]++,Qi().s[2]++,ue.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class Yhe extends nr.Component{render(){return Qi().f[1]++,Qi().s[3]++,ue.jsx("a",{className:hm("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class WR extends nr.Component{render(){return Qi().f[2]++,Qi().s[4]++,ue.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class Hb extends nr.Component{render(){return Qi().f[3]++,Qi().s[5]++,ue.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class $he extends nr.Component{constructor(){super(...arguments);Pn(this,"state",(Qi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));Pn(this,"onSkip",(Qi().s[9]++,t=>{if(Qi().f[6]++,Qi().s[10]++,t==="map")Qi().b[0][0]++,Qi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Qi().b[0][1]++;const r=(Qi().s[12]++,document.querySelector("#skip-target-"+t));Qi().s[13]++,r.focus()}}))}handleSelection(t){Qi().f[4]++,Qi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Qi().f[5]++,Qi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Qi().f[7]++;const t=(Qi().s[14]++,this.props.t),r=(Qi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!Vb},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!Vb},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!Vb},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!Vb}]),i=(Qi().s[16]++,r.find(s=>(Qi().f[8]++,Qi().s[17]++,s.id===this.props.mapState)));return Qi().s[18]++,ue.jsx("nav",{className:"maputnik-toolbar",children:ue.jsxs("div",{className:"maputnik-toolbar__inner",children:[ue.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[ue.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:s=>(Qi().f[9]++,Qi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),ue.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:s=>(Qi().f[10]++,Qi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),ue.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:s=>(Qi().f[11]++,Qi().s[21]++,this.onSkip("map")),children:t("Map view")}),ue.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[ue.jsx("img",{src:Qhe,alt:t("Maputnik on GitHub")}),ue.jsxs("h1",{children:[ue.jsx("span",{className:"maputnik-toolbar-name",children:NR.name}),ue.jsxs("span",{className:"maputnik-toolbar-version",children:["v",NR.version]})]})]})]}),ue.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[ue.jsxs(Hb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[ue.jsx(kZ,{}),ue.jsx(xg,{children:t("Open")})]}),ue.jsxs(Hb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[ue.jsx(q6,{}),ue.jsx(xg,{children:t("Save")})]}),ue.jsxs(Hb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[ue.jsx(UZ,{}),ue.jsx(xg,{children:t("Data Sources")})]}),ue.jsxs(Hb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[ue.jsx(TZ,{}),ue.jsx(xg,{children:t("Style Settings")})]}),ue.jsxs(WR,{wdKey:"nav:inspect",children:[ue.jsx(SZ,{}),ue.jsxs(xg,{children:[t("View"),ue.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:s=>(Qi().f[12]++,Qi().s[22]++,this.handleSelection(s.target.value)),value:i==null?void 0:i.id,children:[r.filter(s=>(Qi().f[13]++,Qi().s[23]++,s.group==="general")).map(s=>(Qi().f[14]++,Qi().s[24]++,ue.jsx("option",{value:s.id,disabled:s.disabled,"data-wd-key":s.id,children:s.title},s.id))),ue.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(s=>(Qi().f[15]++,Qi().s[25]++,s.group==="color-accessibility")).map(s=>(Qi().f[16]++,Qi().s[26]++,ue.jsx("option",{value:s.id,disabled:s.disabled,children:s.title},s.id)))})]})]})]}),ue.jsxs(WR,{wdKey:"nav:language",children:[ue.jsx(IZ,{}),ue.jsxs(xg,{children:["Language",ue.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:s=>(Qi().f[17]++,Qi().s[27]++,this.handleLanguageChange(s.target.value)),value:this.props.i18n.language,children:Object.entries(pL).map(([s,a])=>(Qi().f[18]++,Qi().s[28]++,ue.jsx("option",{value:s,children:a},s)))})]})]}),ue.jsxs(Yhe,{href:"https://github.com/maplibre/maputnik/wiki",children:[ue.jsx(EZ,{}),ue.jsx(xg,{children:t("Help")})]})]})]})})}}const Vhe=(Qi().s[29]++,Ws()($he));function mx(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mx=function(){return a},a}mx();class Hhe extends nr.Component{render(){return mx().f[0]++,mx().s[0]++,ue.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function Cp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cp=function(){return a},a}Cp();class gG extends nr.Component{getChildContext(){return Cp().f[0]++,Cp().s[1]++,{reactIconBase:{size:14}}}render(){return Cp().f[1]++,Cp().s[2]++,document.body.dir=this.props.i18n.dir(),Cp().s[3]++,ue.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,ue.jsxs("div",{className:"maputnik-layout-main",children:[ue.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),ue.jsx("div",{className:"maputnik-layout-drawer",children:ue.jsx(Hhe,{children:this.props.layerEditor})}),this.props.map]}),(Cp().b[0][0]++,this.props.bottom&&(Cp().b[0][1]++,ue.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}Pn(gG,"childContextTypes",(Cp().s[0]++,{reactIconBase:fi.object}));const Zhe=(Cp().s[4]++,Ws()(gG));function ll(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ll=function(){return a},a}ll();class yG extends nr.Component{render(){var s,a;ll().f[1]++;const{t:e,selectedLayerIndex:t}=(ll().s[1]++,this.props),r=(ll().s[2]++,(s=this.props.errors)==null?void 0:s.map((o,f)=>{var x;ll().f[2]++;let y;if(ll().s[3]++,ll().b[1][0]++,o.parsed&&(ll().b[1][1]++,o.parsed.type==="layer")){ll().b[0][0]++;const{parsed:B}=(ll().s[4]++,o),O=(ll().s[5]++,(x=this.props.mapStyle)==null?void 0:x.layers[B.data.index].id);ll().s[6]++,y=ue.jsxs(ue.Fragment,{children:[ue.jsxs(U0,{t:e,children:["Layer ",ue.jsx("span",{children:pG(O)}),": ",B.data.message]}),(ll().b[2][0]++,t!==B.data.index&&(ll().b[2][1]++,ue.jsxs(ue.Fragment,{children:[" — ",ue.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(ll().f[3]++,ll().s[7]++,this.props.onLayerSelect(B.data.index)),children:e("switch to layer")})]})))]})}else ll().b[0][1]++,ll().s[8]++,y=o.message;return ll().s[9]++,ue.jsx("p",{className:"maputnik-message-panel-error",children:y},"error-"+f)})),i=(ll().s[10]++,(a=this.props.infos)==null?void 0:a.map((o,f)=>(ll().f[4]++,ll().s[11]++,ue.jsx("p",{children:o},"info-"+f))));return ll().s[12]++,ue.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}Pn(yG,"defaultProps",(ll().s[0]++,{onLayerSelect:()=>{ll().f[0]++}}));const Xhe=(ll().s[13]++,Ws()(yG));function gx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gx=function(){return a},a}gx();class yx extends nr.Component{render(){return gx().f[0]++,gx().s[0]++,ue.jsx(n_,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(oG,{...this.props})})}}function vx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return vx=function(){return a},a}vx();class bp extends nr.Component{render(){return vx().f[0]++,vx().s[0]++,ue.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(pm,{...this.props})})}}function Cx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cx=function(){return a},a}Cx();class Jp extends nr.Component{render(){return Cx().f[0]++,Cx().s[0]++,ue.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(Zf,{...this.props})})}}function _x(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _x=function(){return a},a}_x();class Jy extends nr.Component{render(){return _x().f[0]++,_x().s[0]++,ue.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(m7,{...this.props})})}}function bx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return bx=function(){return a},a}bx();class j3 extends nr.Component{render(){return bx().f[0]++,bx().s[0]++,ue.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(s1,{...this.props})})}}function xx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return xx=function(){return a},a}xx();class Jhe extends nr.Component{render(){return xx().f[0]++,xx().s[0]++,ue.jsx(n_,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(p7,{...this.props})})}}function wx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return wx=function(){return a},a}wx();class efe extends nr.Component{render(){return wx().f[0]++,wx().s[0]++,ue.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:ue.jsx(iG,{...this.props})})}}function r_(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return r_=function(){return a},a}r_();r_().s[0]++;const vG=n=>(r_().f[0]++,r_().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Ui(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ui=function(){return a},a}Ui();class tfe extends nr.Component{changeTransitionProperty(e,t){Ui().f[0]++;const r=(Ui().s[0]++,{...this.props.mapStyle.transition});Ui().s[1]++,t===void 0?(Ui().b[0][0]++,Ui().s[2]++,delete r[e]):(Ui().b[0][1]++,Ui().s[3]++,r[e]=t),Ui().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Ui().f[1]++;const r=(Ui().s[5]++,{...this.props.mapStyle.light});Ui().s[6]++,t===void 0?(Ui().b[1][0]++,Ui().s[7]++,delete r[e]):(Ui().b[1][1]++,Ui().s[8]++,r[e]=t),Ui().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Ui().f[2]++;const r=(Ui().s[10]++,{...this.props.mapStyle.terrain});Ui().s[11]++,t===void 0?(Ui().b[2][0]++,Ui().s[12]++,delete r[e]):(Ui().b[2][1]++,Ui().s[13]++,r[e]=t),Ui().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Ui().f[3]++;const r=(Ui().s[15]++,{...this.props.mapStyle});Ui().s[16]++,t===void 0?(Ui().b[3][0]++,Ui().s[17]++,delete r[e]):(Ui().b[3][1]++,Ui().s[18]++,r[e]=t),Ui().s[19]++,this.props.onStyleChanged(r)}render(){Ui().f[4]++;const e=(Ui().s[20]++,Ui().b[4][0]++,this.props.mapStyle.metadata||(Ui().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Ui().s[21]++,this.props),s=(Ui().s[22]++,vG(t)),a=(Ui().s[23]++,Ui().b[5][0]++,this.props.mapStyle.light||(Ui().b[5][1]++,{})),o=(Ui().s[24]++,Ui().b[6][0]++,this.props.mapStyle.transition||(Ui().b[6][1]++,{})),f=(Ui().s[25]++,Ui().b[7][0]++,this.props.mapStyle.terrain||(Ui().b[7][1]++,{}));return Ui().s[26]++,ue.jsx(X0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:ue.jsxs("div",{className:"modal:settings",children:[ue.jsx(Jp,{label:t("Name"),fieldSpec:ns.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),ue.jsx(Jp,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),ue.jsx(Jy,{fieldSpec:ns.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),ue.jsx(Jy,{label:t("Glyphs URL"),fieldSpec:ns.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),ue.jsx(Jp,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),ue.jsx(Jp,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),ue.jsx(Jp,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),ue.jsx(yx,{label:t("Center"),fieldSpec:ns.$root.center,length:2,type:"number",value:(Ui().b[8][0]++,i.center||(Ui().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),ue.jsx(bp,{label:t("Zoom"),fieldSpec:ns.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),ue.jsx(bp,{label:t("Bearing"),fieldSpec:ns.$root.bearing,value:i.bearing,default:ns.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),ue.jsx(bp,{label:t("Pitch"),fieldSpec:ns.$root.pitch,value:i.pitch,default:ns.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),ue.jsx(Jhe,{label:t("Light anchor"),fieldSpec:ns.light.anchor,name:"light-anchor",value:a.anchor,options:Object.keys(ns.light.anchor.values),default:ns.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),ue.jsx(efe,{label:t("Light color"),fieldSpec:ns.light.color,value:a.color,default:ns.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),ue.jsx(bp,{label:t("Light intensity"),fieldSpec:ns.light.intensity,value:a.intensity,default:ns.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),ue.jsx(yx,{label:t("Light position"),fieldSpec:ns.light.position,type:"number",length:ns.light.position.length,value:a.position,default:ns.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),ue.jsx(Jp,{label:t("Terrain source"),fieldSpec:ns.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:f.source,onChange:this.changeTerrainProperty.bind(this,"source")}),ue.jsx(bp,{label:t("Terrain exaggeration"),fieldSpec:ns.terrain.exaggeration,value:f.exaggeration,default:ns.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),ue.jsx(bp,{label:t("Transition delay"),fieldSpec:ns.transition.delay,value:o.delay,default:ns.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),ue.jsx(bp,{label:t("Transition duration"),fieldSpec:ns.transition.duration,value:o.duration,default:ns.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),ue.jsx(j3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Ui().b[9][0]++,e["maputnik:renderer"]||(Ui().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const nfe=(Ui().s[27]++,Ws()(tfe));var h2={exports:{}},rfe=h2.exports,GR;function ife(){return GR||(GR=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",rfe,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),r=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(s,a){if(typeof s!="string")throw new Error("slugify: string argument expected");a=typeof a=="string"?{replacement:a}:a||{};var o=r[a.locale]||{},f=a.replacement===void 0?"-":a.replacement,y=a.trim===void 0?!0:a.trim,x=s.normalize().split("").reduce(function(B,O){var T=o[O];return T===void 0&&(T=t[O]),T===void 0&&(T=O),T===f&&(T=" "),B+T.replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return a.strict&&(x=x.replace(/[^A-Za-z0-9\s]/g,"")),y&&(x=x.trim()),x=x.replace(/\s+/g,f),a.lower&&(x=x.toLowerCase()),x}return i.extend=function(s){Object.assign(t,s)},i})}(h2)),h2.exports}var ofe=ife();const sfe=Al(ofe);var f2={exports:{}},afe=f2.exports,QR;function lfe(){return QR||(QR=1,function(n,e){(function(t,r){r()})(afe,function(){function t(y,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function r(y,x,B){var O=new XMLHttpRequest;O.open("GET",y),O.responseType="blob",O.onload=function(){f(O.response,x,B)},O.onerror=function(){console.error("could not download file")},O.send()}function i(y){var x=new XMLHttpRequest;x.open("HEAD",y,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function s(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(x)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(y,x,B){var O=a.URL||a.webkitURL,T=document.createElement("a");x=x||y.name||"download",T.download=x,T.rel="noopener",typeof y=="string"?(T.href=y,T.origin===location.origin?s(T):i(T.href)?r(y,x,B):s(T,T.target="_blank")):(T.href=O.createObjectURL(y),setTimeout(function(){O.revokeObjectURL(T.href)},4e4),setTimeout(function(){s(T)},0))}:"msSaveOrOpenBlob"in navigator?function(y,x,B){if(x=x||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(t(y,B),x);else if(i(y))r(y,x,B);else{var O=document.createElement("a");O.href=y,O.target="_blank",setTimeout(function(){s(O)})}}:function(y,x,B,O){if(O=O||open("","_blank"),O&&(O.document.title=O.document.body.innerText="downloading..."),typeof y=="string")return r(y,x,B);var T=y.type==="application/octet-stream",F=/constructor/i.test(a.HTMLElement)||a.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||T&&F||o)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var oe=N.result;oe=j?oe:oe.replace(/^data:[^;]*;/,"data:attachment/file;"),O?O.location.href=oe:location=oe,O=null},N.readAsDataURL(y)}else{var q=a.URL||a.webkitURL,H=q.createObjectURL(y);O?O.location=H:location.href=H,O=null,setTimeout(function(){q.revokeObjectURL(H)},4e4)}});a.saveAs=f.saveAs=f,n.exports=f})}(f2)),f2.exports}var qR=lfe();const ufe="5.1.0",Afe="get_your_own_OpIi9ZULNHzrESv6T2vL",cfe="b71f7f0ba4064f5eb9e903859a9cf5c6",CG={openmaptiles:Afe,thunderforest:cfe};function lr(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return lr=function(){return a},a}lr();const dfe=(lr().s[0]++,bG({version:8,sources:{},layers:[]}));function _G(){return lr().f[0]++,lr().s[1]++,Math.random().toString(36).substring(2,9)}function hfe(n){return lr().f[1]++,lr().s[2]++,lr().b[1][0]++,!("id"in n)||(lr().b[1][1]++,!n.id)?(lr().b[0][0]++,lr().s[3]++,n.id=_G(),lr().s[4]++,n):(lr().b[0][1]++,lr().s[5]++,n)}function ffe(n){lr().f[2]++;const e=(lr().s[6]++,n.layers.map(t=>{lr().f[3]++;const r=(lr().s[7]++,{...t});return lr().s[8]++,delete r.interactive,lr().s[9]++,r}));return lr().s[10]++,{...n,layers:e}}function pfe(n){return lr().f[4]++,lr().s[11]++,{...n,layers:K$(n.layers)}}function bG(n){return lr().f[5]++,lr().s[12]++,ffe(pfe(hfe(n)))}function mfe(n,e){lr().f[6]++,lr().s[13]++;for(let t=(lr().s[14]++,0);t<n.length;t++){if(lr().s[15]++,n[t].id===e)return lr().b[2][0]++,lr().s[16]++,t;lr().b[2][1]++}return lr().s[17]++,null}function y7(n,e,t){lr().f[7]++;const r=(lr().s[18]++,lr().b[3][0]++,e.metadata||(lr().b[3][1]++,{}));let i=(lr().s[19]++,r[`maputnik:${n}_access_token`]);return lr().s[20]++,lr().b[5][0]++,t.allowFallback&&(lr().b[5][1]++,!i)?(lr().b[4][0]++,lr().s[21]++,i=CG[n]):lr().b[4][1]++,lr().s[22]++,i}function gfe(n,e,t=(lr().b[6][0]++,{})){var y;lr().f[8]++;const r=(lr().s[23]++,n.sources[e]);if(lr().s[24]++,r)lr().b[7][1]++;else return lr().b[7][0]++,lr().s[25]++,n;if(lr().s[26]++,lr().b[9][0]++,!("url"in r)||(lr().b[9][1]++,!r.url))return lr().b[8][0]++,lr().s[27]++,n;lr().b[8][1]++;let i=(lr().s[28]++,e);lr().s[29]++,lr().b[11][0]++,e==="thunderforest_transport"||(lr().b[11][1]++,e==="thunderforest_outdoors")?(lr().b[10][0]++,lr().s[30]++,i="thunderforest"):(lr().b[10][1]++,lr().s[31]++,lr().b[13][0]++,"url"in r&&(lr().b[13][1]++,(y=r.url)==null?void 0:y.match(/\.stadiamaps\.com/))?(lr().b[12][0]++,lr().s[32]++,i="stadia"):lr().b[12][1]++);const s=(lr().s[33]++,y7(i,n,t));if(lr().s[34]++,s)lr().b[14][1]++;else return lr().b[14][0]++,lr().s[35]++,n;let a;lr().s[36]++,i=="stadia"?(lr().b[15][0]++,lr().s[37]++,a=`${r.url}?api_key=${s}`):(lr().b[15][1]++,lr().s[38]++,a=r.url.replace("{key}",s));const o=(lr().s[39]++,{...n.sources,[e]:{...r,url:a}}),f=(lr().s[40]++,{...n,sources:o});return lr().s[41]++,f}function yfe(n,e=(lr().b[16][0]++,{})){lr().f[9]++;let t=(lr().s[42]++,n);if(lr().s[43]++,Object.keys(n.sources).forEach(r=>{lr().f[10]++,lr().s[44]++,t=gfe(t,r,e)}),lr().s[45]++,lr().b[18][0]++,n.glyphs&&(lr().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(lr().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){lr().b[17][0]++;const r=(lr().s[46]++,y7("openmaptiles",n,e));lr().s[47]++,r?(lr().b[19][0]++,lr().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):lr().b[19][1]++}else lr().b[17][1]++;return lr().s[49]++,t}function vfe(n){lr().f[11]++;const e=(lr().s[50]++,{...n.metadata});return lr().s[51]++,delete e["maputnik:openmaptiles_access_token"],lr().s[52]++,delete e["maputnik:thunderforest_access_token"],lr().s[53]++,delete e["maputnik:stadia_access_token"],lr().s[54]++,{...n,metadata:e}}const Ec={ensureStyleValidity:bG,emptyStyle:dfe,indexOfLayer:mfe,generateId:_G,getAccessToken:y7,replaceAccessTokens:yfe,stripAccessTokens:vfe};function Qr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qr=function(){return a},a}Qr();const YR=(Qr().s[0]++,ufe),$R=(Qr().s[1]++,typeof window.showSaveFilePicker=="function");class Cfe extends nr.Component{tokenizedStyle(){return Qr().f[0]++,Qr().s[2]++,jU(Ec.stripAccessTokens(Ec.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Qr().f[1]++,Qr().s[3]++,this.props.mapStyle.name?(Qr().b[0][0]++,Qr().s[4]++,sfe(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Qr().b[0][1]++,Qr().s[5]++,this.props.mapStyle.id)}createHtml(){Qr().f[2]++;const e=(Qr().s[6]++,this.tokenizedStyle()),t=(Qr().s[7]++,Qr().b[1][0]++,this.props.mapStyle.name||(Qr().b[1][1]++,this.props.t("Map"))),r=(Qr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${YR}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${YR}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Qr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Qr().s[10]++,this.exportName());Qr().s[11]++,qR.saveAs(i,s+".html")}async saveStyle(){Qr().f[3]++;const e=(Qr().s[12]++,this.tokenizedStyle());if(Qr().s[13]++,$R)Qr().b[2][1]++;else{Qr().b[2][0]++;const i=(Qr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Qr().s[15]++,this.exportName());Qr().s[16]++,qR.saveAs(i,s+".json"),Qr().s[17]++;return}let t=(Qr().s[18]++,this.props.fileHandle);if(Qr().s[19]++,t==null)if(Qr().b[3][0]++,Qr().s[20]++,t=await this.createFileHandle(),Qr().s[21]++,this.props.onSetFileHandle(t),Qr().s[22]++,t==null){Qr().b[4][0]++,Qr().s[23]++;return}else Qr().b[4][1]++;else Qr().b[3][1]++;const r=(Qr().s[24]++,await t.createWritable());Qr().s[25]++,await r.write(e),Qr().s[26]++,await r.close(),Qr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Qr().f[4]++;const e=(Qr().s[28]++,this.tokenizedStyle()),t=(Qr().s[29]++,await this.createFileHandle());if(Qr().s[30]++,this.props.onSetFileHandle(t),Qr().s[31]++,t==null){Qr().b[5][0]++,Qr().s[32]++;return}else Qr().b[5][1]++;const r=(Qr().s[33]++,await t.createWritable());Qr().s[34]++,await r.write(e),Qr().s[35]++,await r.close(),Qr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Qr().f[5]++;const e=(Qr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Qr().s[38]++,await window.showSaveFilePicker(e));return Qr().s[39]++,this.props.onSetFileHandle(t),Qr().s[40]++,t}changeMetadataProperty(e,t){Qr().f[6]++;const r=(Qr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Qr().s[42]++,this.props.onStyleChanged(r)}render(){Qr().f[7]++;const e=(Qr().s[43]++,this.props.t),t=(Qr().s[44]++,vG(e));return Qr().s[45]++,ue.jsx(X0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Save Style")}),ue.jsx("p",{children:e("Save the JSON style to your computer.")}),ue.jsxs("div",{children:[ue.jsx(Jp,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Qr().b[6][0]++,this.props.mapStyle.metadata||(Qr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),ue.jsx(Jp,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Qr().b[7][0]++,this.props.mapStyle.metadata||(Qr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),ue.jsx(Jp,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Qr().b[8][0]++,this.props.mapStyle.metadata||(Qr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),ue.jsxs("div",{className:"maputnik-modal-export-buttons",children:[ue.jsxs(el,{onClick:this.saveStyle.bind(this),children:[ue.jsx(q6,{}),e("Save")]}),(Qr().b[9][0]++,$R&&(Qr().b[9][1]++,ue.jsxs(el,{onClick:this.saveStyleAs.bind(this),children:[ue.jsx(q6,{}),e("Save as")]}))),ue.jsxs(el,{onClick:this.createHtml.bind(this),children:[ue.jsx(zZ,{}),e("Create HTML")]})]})]})})}}const _fe=(Qr().s[46]++,Ws()(Cfe));function Mx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Mx=function(){return a},a}Mx();class xG extends nr.Component{render(){return Mx().f[0]++,Mx().s[0]++,ue.jsx(n_,{label:this.props.label,children:ue.jsx(aG,{...this.props})})}}function Sx(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sx=function(){return a},a}Sx();class bfe extends nr.Component{render(){return Sx().f[0]++,Sx().s[0]++,ue.jsx(pa,{label:this.props.label,children:ue.jsx(f7,{...this.props})})}}function Qn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Qn=function(){return a},a}Qn();class ME extends nr.Component{render(){Qn().f[0]++;const e=(Qn().s[0]++,this.props.t);return Qn().s[1]++,ue.jsxs("div",{children:[ue.jsx(Jy,{label:e("TileJSON URL"),fieldSpec:Ps.source_vector.url,value:this.props.source.url,onChange:t=>(Qn().f[1]++,Qn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class SE extends nr.Component{changeTileUrls(e){Qn().f[2]++,Qn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Qn().f[3]++;const e=(Qn().s[4]++,Qn().b[0][0]++,this.props.source.tiles||(Qn().b[0][1]++,[]));return Qn().s[5]++,ue.jsx(xG,{label:this.props.t("Tile URL"),fieldSpec:Ps.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Qn().f[4]++;const e=(Qn().s[6]++,this.props.t);return Qn().s[7]++,ue.jsxs("div",{children:[this.renderTileUrls(),ue.jsx(j3,{label:e("Scheme Type"),fieldSpec:Ps.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Qn().f[5]++,Qn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),ue.jsx(bp,{label:e("Min Zoom"),fieldSpec:Ps.source_vector.minzoom,value:(Qn().b[1][0]++,this.props.source.minzoom||(Qn().b[1][1]++,0)),onChange:t=>(Qn().f[6]++,Qn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),ue.jsx(bp,{label:e("Max Zoom"),fieldSpec:Ps.source_vector.maxzoom,value:(Qn().b[2][0]++,this.props.source.maxzoom||(Qn().b[2][1]++,22)),onChange:t=>(Qn().f[7]++,Qn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Qn().s[11]++;const wG=n=>(Qn().f[8]++,Qn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class xfe extends nr.Component{render(){Qn().f[9]++;const e=(Qn().s[13]++,this.props.t);Qn().s[14]++;const t=(r,i)=>{Qn().f[10]++;const s=(Qn().s[15]++,this.props.source.coordinates.slice(0));Qn().s[16]++,s[r]=i,Qn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return Qn().s[18]++,ue.jsxs("div",{children:[ue.jsx(Jy,{label:e("Image URL"),fieldSpec:Ps.source_image.url,value:this.props.source.url,onChange:r=>(Qn().f[11]++,Qn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),wG(e).map(({label:r,key:i},s)=>(Qn().f[12]++,Qn().s[20]++,ue.jsx(yx,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(Qn().f[13]++,Qn().s[21]++,t(s,a))},i)))]})}}class wfe extends nr.Component{render(){Qn().f[14]++;const e=(Qn().s[22]++,this.props.t);Qn().s[23]++;const t=(i,s)=>{Qn().f[15]++;const a=(Qn().s[24]++,this.props.source.coordinates.slice(0));Qn().s[25]++,a[i]=s,Qn().s[26]++,this.props.onChange({...this.props.source,coordinates:a})};Qn().s[27]++;const r=i=>{Qn().f[16]++,Qn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Qn().s[29]++,ue.jsxs("div",{children:[ue.jsx(xG,{label:e("Video URL"),fieldSpec:Ps.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),wG(e).map(({label:i,key:s},a)=>(Qn().f[17]++,Qn().s[30]++,ue.jsx(yx,{label:i,length:2,type:"number",value:this.props.source.coordinates[a],default:[0,0],onChange:o=>(Qn().f[18]++,Qn().s[31]++,t(a,o))},s)))]})}}class Mfe extends nr.Component{render(){Qn().f[19]++;const e=(Qn().s[32]++,this.props.t);return Qn().s[33]++,ue.jsx(Jy,{label:e("GeoJSON URL"),fieldSpec:Ps.source_geojson.data,value:this.props.source.data,onChange:t=>(Qn().f[20]++,Qn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class Sfe extends nr.Component{render(){Qn().f[21]++;const e=(Qn().s[35]++,this.props.t);return Qn().s[36]++,ue.jsxs("div",{children:[ue.jsx(pa,{label:e("GeoJSON"),fieldSpec:Ps.source_geojson.data,children:ue.jsx(YO,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Qn().f[22]++,Qn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),ue.jsx(bfe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Qn().f[23]++,Qn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class Efe extends nr.Component{render(){Qn().f[24]++;const e=(Qn().s[39]++,this.props.t);return Qn().s[40]++,ue.jsxs("div",{children:[ue.jsx(Jy,{label:e("PMTiles URL"),fieldSpec:Ps.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Qn().f[25]++,Qn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Qn().b[3][0]++,t):(Qn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class Bfe extends nr.Component{render(){Qn().f[26]++;const e=(Qn().s[42]++,this.props.t),t=(Qn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Qn().s[44]++,this.props.mode){case"geojson_url":return Qn().b[4][0]++,Qn().s[45]++,ue.jsx(Mfe,{...t});case"geojson_json":return Qn().b[4][1]++,Qn().s[46]++,ue.jsx(Sfe,{...t});case"tilejson_vector":return Qn().b[4][2]++,Qn().s[47]++,ue.jsx(ME,{...t});case"tile_vector":return Qn().b[4][3]++,Qn().s[48]++,ue.jsx(SE,{...t});case"tilejson_raster":return Qn().b[4][4]++,Qn().s[49]++,ue.jsx(ME,{...t});case"tile_raster":return Qn().b[4][5]++,Qn().s[50]++,ue.jsx(SE,{...t,children:ue.jsx(bp,{label:e("Tile Size"),fieldSpec:Ps.source_raster.tileSize,onChange:r=>(Qn().f[27]++,Qn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Qn().b[5][0]++,this.props.source.tileSize||(Qn().b[5][1]++,Ps.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Qn().b[4][6]++,Qn().s[52]++,ue.jsx(ME,{...t});case"tilexyz_raster-dem":return Qn().b[4][7]++,Qn().s[53]++,ue.jsxs(SE,{...t,children:[ue.jsx(bp,{label:e("Tile Size"),fieldSpec:Ps.source_raster_dem.tileSize,onChange:r=>(Qn().f[28]++,Qn().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Qn().b[6][0]++,this.props.source.tileSize||(Qn().b[6][1]++,Ps.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),ue.jsx(j3,{label:e("Encoding"),fieldSpec:Ps.source_raster_dem.encoding,options:Object.keys(Ps.source_raster_dem.encoding.values),onChange:r=>(Qn().f[29]++,Qn().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(Qn().b[7][0]++,this.props.source.encoding||(Qn().b[7][1]++,Ps.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Qn().b[4][8]++,Qn().s[56]++,ue.jsx(Efe,{...t});case"image":return Qn().b[4][9]++,Qn().s[57]++,ue.jsx(xfe,{...t});case"video":return Qn().b[4][10]++,Qn().s[58]++,ue.jsx(wfe,{...t});default:return Qn().b[4][11]++,Qn().s[59]++,null}}}const MG=(Qn().s[60]++,Ws()(Bfe));function Sp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sp=function(){return a},a}Sp();function Ofe(n,e){Sp().f[0]++;const t=(Sp().s[0]++,{...n.sources});return Sp().s[1]++,delete t[e],Sp().s[2]++,{...n,sources:t}}function VR(n,e,t){return Sp().f[1]++,Sp().s[3]++,SG(n,e,t)}function SG(n,e,t){Sp().f[2]++;const r=(Sp().s[4]++,{...n.sources,[e]:t});return Sp().s[5]++,{...n,sources:r}}const Ife={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},kfe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},Tfe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},Pfe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},HR={openmaptiles:Ife,thunderforest_transport:kfe,thunderforest_outdoors:Tfe,open_zoomstack:Pfe};function un(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return un=function(){return a},a}un();class Kfe extends nr.Component{render(){return un().f[0]++,un().s[0]++,ue.jsx("div",{className:"maputnik-public-source",children:ue.jsxs(el,{className:"maputnik-public-source-select",onClick:()=>(un().f[1]++,un().s[1]++,this.props.onSelect(this.props.id)),children:[ue.jsxs("div",{className:"maputnik-public-source-info",children:[ue.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),ue.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(QU,{})]})})}}function Dfe(n){return un().f[2]++,un().s[2]++,n.type==="raster"?(un().b[0][0]++,un().s[3]++,n.tiles?(un().b[1][0]++,un().s[4]++,"tile_raster"):(un().b[1][1]++,un().s[5]++,"tilejson_raster")):(un().b[0][1]++,un().s[6]++,n.type==="raster-dem"?(un().b[2][0]++,un().s[7]++,n.tiles?(un().b[3][0]++,un().s[8]++,"tilexyz_raster-dem"):(un().b[3][1]++,un().s[9]++,"tilejson_raster-dem")):(un().b[2][1]++,un().s[10]++,n.type==="vector"?(un().b[4][0]++,un().s[11]++,n.tiles?(un().b[5][0]++,un().s[12]++,"tile_vector"):(un().b[5][1]++,un().s[13]++,un().b[7][0]++,n.url&&(un().b[7][1]++,n.url.startsWith("pmtiles://"))?(un().b[6][0]++,un().s[14]++,"pmtiles_vector"):(un().b[6][1]++,un().s[15]++,"tilejson_vector"))):(un().b[4][1]++,un().s[16]++,n.type==="geojson"?(un().b[8][0]++,un().s[17]++,typeof n.data=="string"?(un().b[9][0]++,un().s[18]++,"geojson_url"):(un().b[9][1]++,un().s[19]++,"geojson_json")):(un().b[8][1]++,un().s[20]++,n.type==="image"?(un().b[10][0]++,un().s[21]++,"image"):(un().b[10][1]++,un().s[22]++,n.type==="video"?(un().b[11][0]++,un().s[23]++,"video"):(un().b[11][1]++,un().s[24]++,null))))))}class Rfe extends nr.Component{render(){un().f[3]++;const e=(un().s[25]++,this.props.t);return un().s[26]++,ue.jsxs("div",{className:"maputnik-active-source-type-editor",children:[ue.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[ue.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(el,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(un().f[4]++,un().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:ue.jsx(iv,{})})]}),ue.jsx("div",{className:"maputnik-active-source-type-editor-content",children:ue.jsx(MG,{onChange:this.props.onChange,mode:Dfe(this.props.source),source:this.props.source})})]})}}class Ffe extends nr.Component{constructor(t){un().f[5]++,un().s[28]++;super(t);Pn(this,"onAdd",(un().s[45]++,()=>{un().f[7]++;const{source:t,sourceId:r}=(un().s[46]++,this.state);un().s[47]++,this.props.onAdd(r,t)}));Pn(this,"onChangeSource",(un().s[48]++,t=>{un().f[8]++,un().s[49]++,this.setState({source:t})}));un().s[29]++,this.state={mode:"tilejson_vector",sourceId:Ec.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){un().f[6]++;const r=(un().s[30]++,un().b[12][0]++,(un().b[13][0]++,this.state||(un().b[13][1]++,{})).source||(un().b[12][1]++,{})),{protocol:i}=(un().s[31]++,window.location);switch(un().s[32]++,t){case"pmtiles_vector":return un().b[14][0]++,un().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return un().b[14][1]++,un().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return un().b[14][2]++,un().s[35]++,{type:"geojson",cluster:(un().b[15][0]++,r.cluster||(un().b[15][1]++,!1)),data:""};case"tilejson_vector":return un().b[14][3]++,un().s[36]++,{type:"vector",url:(un().b[16][0]++,r.url||(un().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return un().b[14][4]++,un().s[37]++,{type:"vector",tiles:(un().b[17][0]++,r.tiles||(un().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(un().b[18][0]++,r.minzoom||(un().b[18][1]++,0)),maxzoom:(un().b[19][0]++,r.maxzoom||(un().b[19][1]++,14)),scheme:(un().b[20][0]++,r.scheme||(un().b[20][1]++,"xyz"))};case"tilejson_raster":return un().b[14][5]++,un().s[38]++,{type:"raster",url:(un().b[21][0]++,r.url||(un().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return un().b[14][6]++,un().s[39]++,{type:"raster",tiles:(un().b[22][0]++,r.tiles||(un().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[23][0]++,r.minzoom||(un().b[23][1]++,0)),maxzoom:(un().b[24][0]++,r.maxzoom||(un().b[24][1]++,14)),scheme:(un().b[25][0]++,r.scheme||(un().b[25][1]++,"xyz")),tileSize:(un().b[26][0]++,r.tileSize||(un().b[26][1]++,512))};case"tilejson_raster-dem":return un().b[14][7]++,un().s[40]++,{type:"raster-dem",url:(un().b[27][0]++,r.url||(un().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return un().b[14][8]++,un().s[41]++,{type:"raster-dem",tiles:(un().b[28][0]++,r.tiles||(un().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(un().b[29][0]++,r.minzoom||(un().b[29][1]++,0)),maxzoom:(un().b[30][0]++,r.maxzoom||(un().b[30][1]++,14)),tileSize:(un().b[31][0]++,r.tileSize||(un().b[31][1]++,512))};case"image":return un().b[14][9]++,un().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return un().b[14][10]++,un().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return un().b[14][11]++,un().s[44]++,{}}}render(){un().f[9]++;const t=(un().s[50]++,this.props.t),r=(un().s[51]++,{doc:ns.source_vector.type.doc});return un().s[52]++,ue.jsxs("div",{className:"maputnik-add-source",children:[ue.jsx(Jp,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(un().f[10]++,un().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),ue.jsx(j3,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["pmtiles_vector",t("Vector (PMTiles)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(un().f[11]++,un().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),ue.jsx(MG,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),ue.jsx(el,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class Lfe extends nr.Component{stripTitle(e){un().f[12]++;const t=(un().s[55]++,{...e});return un().s[56]++,delete t.title,un().s[57]++,t}render(){un().f[13]++;const{t:e,mapStyle:t}=(un().s[58]++,this.props),r=(un().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(un().s[60]++,Object.keys(t.sources).map(a=>{un().f[14]++;const o=(un().s[61]++,t.sources[a]);return un().s[62]++,ue.jsx(Rfe,{sourceId:a,source:o,onChange:f=>(un().f[15]++,un().s[63]++,this.props.onStyleChanged(SG(t,a,f))),onDelete:()=>(un().f[16]++,un().s[64]++,this.props.onStyleChanged(Ofe(t,a))),...r},a)})),s=(un().s[65]++,Object.keys(HR).filter(a=>(un().f[17]++,un().s[66]++,!(a in t.sources))).map(a=>{un().f[18]++;const o=(un().s[67]++,HR[a]);return un().s[68]++,ue.jsx(Kfe,{id:a,type:o.type,title:o.title,onSelect:()=>(un().f[19]++,un().s[69]++,this.props.onStyleChanged(VR(t,a,this.stripTitle(o))))},a)}));return un().s[70]++,ue.jsxs(X0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Active Sources")}),i]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Choose Public Source")}),ue.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),ue.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:e("Add New Source")}),ue.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),ue.jsx(Ffe,{onAdd:(a,o)=>(un().f[20]++,un().s[71]++,this.props.onStyleChanged(VR(t,a,o))),...r})]})]})}}const Ufe=(un().s[72]++,Ws()(Lfe));var Zb={},ZR;function zfe(){if(ZR)return Zb;ZR=1,Object.defineProperty(Zb,"__esModule",{value:!0});var n=Object.assign||function(F){for(var j=1;j<arguments.length;j++){var N=arguments[j];for(var q in N)Object.prototype.hasOwnProperty.call(N,q)&&(F[q]=N[q])}return F},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},t=function(){function F(j,N){for(var q=0;q<N.length;q++){var H=N[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,N,q){return N&&F(j.prototype,N),q&&F(j,q),j}}(),r=ja(),i=f(r),s=o_(),a=o(s);function o(F){return F&&F.__esModule?F:{default:F}}function f(F){if(F&&F.__esModule)return F;var j={};if(F!=null)for(var N in F)Object.prototype.hasOwnProperty.call(F,N)&&(j[N]=F[N]);return j.default=F,j}function y(F,j){var N={};for(var q in F)j.indexOf(q)>=0||Object.prototype.hasOwnProperty.call(F,q)&&(N[q]=F[q]);return N}function x(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}function B(F,j){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:F}function O(F,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);F.prototype=Object.create(j&&j.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(F,j):F.__proto__=j)}var T=function(F){O(j,F);function j(N){x(this,j);var q=B(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,N));q.handleChange=function(oe){var ne=Array.prototype.slice.call(oe.target.files),$=(q.props.as||"url").toLowerCase();Promise.all(ne.map(function(te){return new Promise(function(G,ie){var he=new FileReader;switch(he.onload=function(pe){G([pe,te])},$){case"binary":{he.readAsBinaryString(te);break}case"buffer":{he.readAsArrayBuffer(te);break}case"text":{he.readAsText(te);break}case"url":{he.readAsDataURL(te);break}}})})).then(function(te){q.props.onChange(oe,te)})},q.triggerInput=function(){var oe=a.default.findDOMNode(q._reactFileReaderInput);oe&&oe.click()};var H=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!H.File||!H.FileReader||!H.FileList||!H.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),q}return t(j,[{key:"render",value:function(){var q=this,H=this.props;H.as;var oe=H.children,ne=H.style,$=y(H,["as","children","style"]),te=oe?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:ne},i.createElement("input",n({},$,{type:"file",ref:function(ie){q._reactFileReaderInput=ie},onChange:this.handleChange,onClick:function(){q._reactFileReaderInput.value=null},style:te})),oe)}}]),j}(i.Component);return Zb.default=T,Zb}var jfe=zfe();const Nfe=Al(jfe);function mh(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mh=function(){return a},a}mh();class Wfe extends nr.Component{underlayOnClick(e){mh().f[0]++,mh().s[0]++,e.stopPropagation()}render(){mh().f[1]++;const e=(mh().s[1]++,this.props.t);return mh().s[2]++,ue.jsxs(X0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(mh().f[2]++,mh().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(mh().f[3]++,mh().s[4]++,this.props.onCancel()),children:[ue.jsx("p",{children:this.props.message}),ue.jsx("p",{className:"maputnik-dialog__buttons",children:ue.jsx(el,{onClick:t=>(mh().f[4]++,mh().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const Gfe=(mh().s[6]++,Ws()(Wfe)),EG=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function ar(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ar=function(){return a},a}ar();class Qfe extends nr.Component{render(){return ar().f[0]++,ar().s[0]++,ue.jsx("div",{className:"maputnik-public-style",children:ue.jsxs(el,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(ar().f[1]++,ar().s[1]++,this.props.onSelect(this.props.url)),children:[ue.jsxs("div",{className:"maputnik-public-style-header",children:[ue.jsx("div",{children:this.props.title}),ue.jsx("span",{className:"maputnik-space"}),ue.jsx(QU,{})]}),ue.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class qfe extends nr.Component{constructor(t){ar().f[2]++,ar().s[2]++;super(t);Pn(this,"onStyleSelect",(ar().s[10]++,t=>{ar().f[5]++,ar().s[11]++,this.clearError();let r=(ar().s[12]++,!1);ar().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return ar().f[6]++,ar().s[14]++,i.json()}).then(i=>{if(ar().f[7]++,ar().s[15]++,r){ar().b[2][0]++,ar().s[16]++;return}else ar().b[2][1]++;ar().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const s=(ar().s[18]++,Ec.ensureStyleValidity(i));ar().s[19]++,console.log("Loaded style ",s.id),ar().s[20]++,this.props.onStyleOpen(s),ar().s[21]++,this.onOpenToggle()}).catch(i=>{ar().f[8]++,ar().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),ar().s[23]++,console.error(i),ar().s[24]++,console.warn("Could not open the style URL",t)}),ar().s[25]++,this.setState({activeRequest:{abort:function(){ar().f[9]++,ar().s[26]++,r=!0}},activeRequestUrl:t})}));Pn(this,"onSubmitUrl",(ar().s[27]++,t=>{ar().f[10]++,ar().s[28]++,t.preventDefault(),ar().s[29]++,this.onStyleSelect(this.state.styleUrl)}));Pn(this,"onOpenFile",(ar().s[30]++,async()=>{ar().f[11]++,ar().s[31]++,this.clearError();const t=(ar().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(ar().s[33]++,await window.showOpenFilePicker(t)),i=(ar().s[34]++,await r.getFile()),s=(ar().s[35]++,await i.text());let a;ar().s[36]++;try{ar().s[37]++,a=JSON.parse(s)}catch(o){ar().s[38]++,this.setState({error:o.toString()}),ar().s[39]++;return}return ar().s[40]++,a=Ec.ensureStyleValidity(a),ar().s[41]++,this.props.onStyleOpen(a,r),ar().s[42]++,this.onOpenToggle(),ar().s[43]++,i}));Pn(this,"onFileChanged",(ar().s[44]++,async(t,r)=>{ar().f[12]++;const[,i]=(ar().s[45]++,r[0]),s=(ar().s[46]++,new FileReader);ar().s[47]++,this.clearError(),ar().s[48]++,s.readAsText(i,"UTF-8"),ar().s[49]++,s.onload=a=>{var f;ar().f[13]++;let o;ar().s[50]++;try{ar().s[51]++,o=JSON.parse((f=a.target)==null?void 0:f.result)}catch(y){ar().s[52]++,this.setState({error:y.toString()}),ar().s[53]++;return}ar().s[54]++,o=Ec.ensureStyleValidity(o),ar().s[55]++,this.props.onStyleOpen(o),ar().s[56]++,this.onOpenToggle()},ar().s[57]++,s.onerror=a=>(ar().f[14]++,ar().s[58]++,console.log(a.target))}));Pn(this,"onChangeUrl",(ar().s[62]++,t=>{ar().f[16]++,ar().s[63]++,this.setState({styleUrl:t})}));ar().s[3]++,this.state={styleUrl:""}}clearError(){ar().f[3]++,ar().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){ar().f[4]++,ar().s[5]++,t?(ar().b[0][0]++,ar().s[6]++,t.stopPropagation()):ar().b[0][1]++,ar().s[7]++,this.state.activeRequest?(ar().b[1][0]++,ar().s[8]++,this.state.activeRequest.abort(),ar().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):ar().b[1][1]++}onOpenToggle(){ar().f[15]++,ar().s[59]++,this.setState({styleUrl:""}),ar().s[60]++,this.clearError(),ar().s[61]++,this.props.onOpenToggle()}render(){ar().f[17]++;const t=(ar().s[64]++,this.props.t),r=(ar().s[65]++,EG.map(s=>(ar().f[18]++,ar().s[66]++,ue.jsx(Qfe,{url:s.url,title:s.title,thumbnailUrl:s.thumbnail,onSelect:this.onStyleSelect},s.id))));let i;return ar().s[67]++,this.state.error?(ar().b[3][0]++,ar().s[68]++,i=ue.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,ue.jsx("a",{href:"#",onClick:()=>(ar().f[19]++,ar().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:"×"})]})):ar().b[3][1]++,ar().s[70]++,ue.jsxs("div",{children:[ue.jsxs(X0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(ar().f[20]++,ar().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:t("Open local Style")}),ue.jsx("p",{children:t("Open a local JSON style from your computer.")}),ue.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(ar().b[4][0]++,ue.jsxs(el,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[ue.jsx(XI,{})," ",t("Open Style")]})):(ar().b[4][1]++,ue.jsx(Nfe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:ue.jsxs(el,{className:"maputnik-upload-button",children:[ue.jsx(XI,{})," ",t("Open Style")]})}))})]}),ue.jsx("section",{className:"maputnik-modal-section",children:ue.jsxs("form",{onSubmit:this.onSubmitUrl,children:[ue.jsx("h1",{children:t("Load from URL")}),ue.jsx("p",{children:ue.jsxs(U0,{t,children:["Load from a URL. Note that the URL must have ",ue.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),ue.jsx(m7,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),ue.jsx("div",{children:ue.jsx(el,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[ue.jsx("h1",{children:t("Gallery Styles")}),ue.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),ue.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),ue.jsx(Gfe,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:s=>(ar().f[21]++,ar().s[72]++,this.onCancelActiveRequest(s)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const Yfe=(ar().s[73]++,Ws()(qfe));function jf(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return jf=function(){return a},a}jf();class $fe extends nr.Component{render(){jf().f[0]++;const e=(jf().s[0]++,this.props.t),t=(jf().s[1]++,[{key:ue.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:ue.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:ue.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:ue.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:ue.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:ue.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:ue.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:ue.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(jf().s[2]++,[{key:ue.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:ue.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:ue.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:ue.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:ue.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:ue.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:ue.jsxs(ue.Fragment,{children:[ue.jsx("kbd",{children:"Shift"})," + ",ue.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return jf().s[3]++,ue.jsx(X0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ue.jsx("p",{children:ue.jsxs(U0,{t:e,children:["Press ",ue.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),ue.jsx("dl",{children:t.map((i,s)=>(jf().f[1]++,jf().s[4]++,ue.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[ue.jsx("dt",{children:i.key},"dt"+s),ue.jsx("dd",{children:i.text},"dd"+s)]},s)))}),ue.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),ue.jsx("ul",{children:r.map((i,s)=>(jf().f[2]++,jf().s[5]++,ue.jsxs("li",{children:[ue.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const Vfe=(jf().s[6]++,Ws()($fe));function aA(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return aA=function(){return a},a}aA();class Hfe extends nr.Component{render(){aA().f[0]++;const{t:e,mapView:t}=(aA().s[0]++,this.props),r=(aA().s[1]++,Math.round(t.zoom)+1),i=(aA().s[2]++,+t.center.lng.toFixed(5)),s=(aA().s[3]++,+t.center.lat.toFixed(5));return aA().s[4]++,ue.jsxs(X0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[ue.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[ue.jsx("h1",{children:e("Options")}),(aA().b[0][0]++,this.props.renderer==="mlgljs"&&(aA().b[0][1]++,ue.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([a,o])=>(aA().f[1]++,aA().s[5]++,ue.jsx("li",{children:ue.jsxs("label",{children:[ue.jsx("input",{type:"checkbox",checked:o,onChange:f=>(aA().f[2]++,aA().s[6]++,this.props.onChangeMaplibreGlDebug(a,f.target.checked))})," ",a]})},a)))}))),(aA().b[1][0]++,this.props.renderer==="ol"&&(aA().b[1][1]++,ue.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([a,o])=>(aA().f[3]++,aA().s[7]++,ue.jsx("li",{children:ue.jsxs("label",{children:[ue.jsx("input",{type:"checkbox",checked:o,onChange:f=>(aA().f[4]++,aA().s[8]++,this.props.onChangeOpenlayersDebug(a,f.target.checked))})," ",a]})},a)))})))]}),ue.jsxs("section",{className:"maputnik-modal-section",children:[ue.jsx("h1",{children:"Links"}),ue.jsx("p",{children:ue.jsxs(U0,{t:e,children:[ue.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"})," — Opens the current view on openstreetmap.org"]})})]})]})}}const Zfe=(aA().s[9]++,Ws()(Hfe));var wg={},aC={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var Xfe=aC.exports,XR;function Jfe(){return XR||(XR=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var a,o=2147483647,f=36,y=1,x=26,B=38,O=700,T=72,F=128,j="-",N=/^xn--/,q=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,oe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ne=f-y,$=Math.floor,te=String.fromCharCode,G;function ie(Me){throw new RangeError(oe[Me])}function he(Me,Fe){for(var He=Me.length,bt=[];He--;)bt[He]=Fe(Me[He]);return bt}function pe(Me,Fe){var He=Me.split("@"),bt="";He.length>1&&(bt=He[0]+"@",Me=He[1]),Me=Me.replace(H,".");var Yt=Me.split("."),gt=he(Yt,Fe).join(".");return bt+gt}function Ee(Me){for(var Fe=[],He=0,bt=Me.length,Yt,gt;He<bt;)Yt=Me.charCodeAt(He++),Yt>=55296&&Yt<=56319&&He<bt?(gt=Me.charCodeAt(He++),(gt&64512)==56320?Fe.push(((Yt&1023)<<10)+(gt&1023)+65536):(Fe.push(Yt),He--)):Fe.push(Yt);return Fe}function me(Me){return he(Me,function(Fe){var He="";return Fe>65535&&(Fe-=65536,He+=te(Fe>>>10&1023|55296),Fe=56320|Fe&1023),He+=te(Fe),He}).join("")}function Se(Me){return Me-48<10?Me-22:Me-65<26?Me-65:Me-97<26?Me-97:f}function De(Me,Fe){return Me+22+75*(Me<26)-((Fe!=0)<<5)}function be(Me,Fe,He){var bt=0;for(Me=He?$(Me/O):Me>>1,Me+=$(Me/Fe);Me>ne*x>>1;bt+=f)Me=$(Me/ne);return $(bt+(ne+1)*Me/(Me+B))}function at(Me){var Fe=[],He=Me.length,bt,Yt=0,gt=F,Lt=T,Kt,Ue,Pe,Be,it,_t,ft,Ut,rn;for(Kt=Me.lastIndexOf(j),Kt<0&&(Kt=0),Ue=0;Ue<Kt;++Ue)Me.charCodeAt(Ue)>=128&&ie("not-basic"),Fe.push(Me.charCodeAt(Ue));for(Pe=Kt>0?Kt+1:0;Pe<He;){for(Be=Yt,it=1,_t=f;Pe>=He&&ie("invalid-input"),ft=Se(Me.charCodeAt(Pe++)),(ft>=f||ft>$((o-Yt)/it))&&ie("overflow"),Yt+=ft*it,Ut=_t<=Lt?y:_t>=Lt+x?x:_t-Lt,!(ft<Ut);_t+=f)rn=f-Ut,it>$(o/rn)&&ie("overflow"),it*=rn;bt=Fe.length+1,Lt=be(Yt-Be,bt,Be==0),$(Yt/bt)>o-gt&&ie("overflow"),gt+=$(Yt/bt),Yt%=bt,Fe.splice(Yt++,0,gt)}return me(Fe)}function Ze(Me){var Fe,He,bt,Yt,gt,Lt,Kt,Ue,Pe,Be,it,_t=[],ft,Ut,rn,Dt;for(Me=Ee(Me),ft=Me.length,Fe=F,He=0,gt=T,Lt=0;Lt<ft;++Lt)it=Me[Lt],it<128&&_t.push(te(it));for(bt=Yt=_t.length,Yt&&_t.push(j);bt<ft;){for(Kt=o,Lt=0;Lt<ft;++Lt)it=Me[Lt],it>=Fe&&it<Kt&&(Kt=it);for(Ut=bt+1,Kt-Fe>$((o-He)/Ut)&&ie("overflow"),He+=(Kt-Fe)*Ut,Fe=Kt,Lt=0;Lt<ft;++Lt)if(it=Me[Lt],it<Fe&&++He>o&&ie("overflow"),it==Fe){for(Ue=He,Pe=f;Be=Pe<=gt?y:Pe>=gt+x?x:Pe-gt,!(Ue<Be);Pe+=f)Dt=Ue-Be,rn=f-Be,_t.push(te(De(Be+Dt%rn,0))),Ue=$(Dt/rn);_t.push(te(De(Ue,0))),gt=be(He,Ut,bt==Yt),He=0,++bt}++He,++Fe}return _t.join("")}function Je(Me){return pe(Me,function(Fe){return N.test(Fe)?at(Fe.slice(4).toLowerCase()):Fe})}function We(Me){return pe(Me,function(Fe){return q.test(Fe)?"xn--"+Ze(Fe):Fe})}if(a={version:"1.4.1",ucs2:{decode:Ee,encode:me},decode:at,encode:Ze,toASCII:We,toUnicode:Je},r&&i)if(n.exports==r)i.exports=a;else for(G in a)a.hasOwnProperty(G)&&(r[G]=a[G]);else t.punycode=a})(Xfe)}(aC,aC.exports)),aC.exports}var EE,JR;function pv(){return JR||(JR=1,EE=TypeError),EE}const epe={},tpe=Object.freeze(Object.defineProperty({__proto__:null,default:epe},Symbol.toStringTag,{value:"Module"})),npe=GB(tpe);var BE,eF;function N3(){if(eF)return BE;eF=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,f=typeof WeakMap=="function"&&WeakMap.prototype,y=f?WeakMap.prototype.has:null,x=typeof WeakSet=="function"&&WeakSet.prototype,B=x?WeakSet.prototype.has:null,O=typeof WeakRef=="function"&&WeakRef.prototype,T=O?WeakRef.prototype.deref:null,F=Boolean.prototype.valueOf,j=Object.prototype.toString,N=Function.prototype.toString,q=String.prototype.match,H=String.prototype.slice,oe=String.prototype.replace,ne=String.prototype.toUpperCase,$=String.prototype.toLowerCase,te=RegExp.prototype.test,G=Array.prototype.concat,ie=Array.prototype.join,he=Array.prototype.slice,pe=Math.floor,Ee=typeof BigInt=="function"?BigInt.prototype.valueOf:null,me=Object.getOwnPropertySymbols,Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,De=typeof Symbol=="function"&&typeof Symbol.iterator=="object",be=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===De||!0)?Symbol.toStringTag:null,at=Object.prototype.propertyIsEnumerable,Ze=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Oe){return Oe.__proto__}:null);function Je(Oe,se){if(Oe===1/0||Oe===-1/0||Oe!==Oe||Oe&&Oe>-1e3&&Oe<1e3||te.call(/e/,se))return se;var ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Oe=="number"){var p=Oe<0?-pe(-Oe):pe(Oe);if(p!==Oe){var Ne=String(p),Ye=H.call(se,Ne.length+1);return oe.call(Ne,ve,"$&_")+"."+oe.call(oe.call(Ye,/([0-9]{3})/g,"$&_"),/_$/,"")}}return oe.call(se,ve,"$&_")}var We=npe,Me=We.custom,Fe=ft(Me)?Me:null,He={__proto__:null,double:'"',single:"'"},bt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};BE=function Oe(se,ve,p,Ne){var Ye=ve||{};if(Dt(Ye,"quoteStyle")&&!Dt(He,Ye.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Dt(Ye,"maxStringLength")&&(typeof Ye.maxStringLength=="number"?Ye.maxStringLength<0&&Ye.maxStringLength!==1/0:Ye.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var rt=Dt(Ye,"customInspect")?Ye.customInspect:!0;if(typeof rt!="boolean"&&rt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Dt(Ye,"indent")&&Ye.indent!==null&&Ye.indent!=="	"&&!(parseInt(Ye.indent,10)===Ye.indent&&Ye.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Dt(Ye,"numericSeparator")&&typeof Ye.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ct=Ye.numericSeparator;if(typeof se>"u")return"undefined";if(se===null)return"null";if(typeof se=="boolean")return se?"true":"false";if(typeof se=="string")return Jn(se,Ye);if(typeof se=="number"){if(se===0)return 1/0/se>0?"0":"-0";var dt=String(se);return ct?Je(se,dt):dt}if(typeof se=="bigint"){var qt=String(se)+"n";return ct?Je(se,qt):qt}var Gt=typeof Ye.depth>"u"?5:Ye.depth;if(typeof p>"u"&&(p=0),p>=Gt&&Gt>0&&typeof se=="object")return Lt(se)?"[Array]":"[Object]";var jt=Ht(Ye,p);if(typeof Ne>"u")Ne=[];else if(tn(Ne,se)>=0)return"[Circular]";function xt(Ro,Pi,Na){if(Pi&&(Ne=he.call(Ne),Ne.push(Pi)),Na){var Ea={depth:Ye.depth};return Dt(Ye,"quoteStyle")&&(Ea.quoteStyle=Ye.quoteStyle),Oe(Ro,Ea,p+1,Ne)}return Oe(Ro,Ye,p+1,Ne)}if(typeof se=="function"&&!Ue(se)){var Tn=qn(se),On=tr(se,xt);return"[Function"+(Tn?": "+Tn:" (anonymous)")+"]"+(On.length>0?" { "+ie.call(On,", ")+" }":"")}if(ft(se)){var gr=De?oe.call(String(se),/^(Symbol\(.*\))_[^)]*$/,"$1"):Se.call(se);return typeof se=="object"&&!De?ce(gr):gr}if(vr(se)){for(var Er="<"+$.call(String(se.nodeName)),on=se.attributes||[],Rn=0;Rn<on.length;Rn++)Er+=" "+on[Rn].name+"="+Yt(gt(on[Rn].value),"double",Ye);return Er+=">",se.childNodes&&se.childNodes.length&&(Er+="..."),Er+="</"+$.call(String(se.nodeName))+">",Er}if(Lt(se)){if(se.length===0)return"[]";var er=tr(se,xt);return jt&&!St(er)?"["+sn(er,jt)+"]":"[ "+ie.call(er,", ")+" ]"}if(Pe(se)){var Xr=tr(se,xt);return!("cause"in Error.prototype)&&"cause"in se&&!at.call(se,"cause")?"{ ["+String(se)+"] "+ie.call(G.call("[cause]: "+xt(se.cause),Xr),", ")+" }":Xr.length===0?"["+String(se)+"]":"{ ["+String(se)+"] "+ie.call(Xr,", ")+" }"}if(typeof se=="object"&&rt){if(Fe&&typeof se[Fe]=="function"&&We)return We(se,{depth:Gt-p});if(rt!=="symbol"&&typeof se.inspect=="function")return se.inspect()}if(rr(se)){var Ur=[];return r&&r.call(se,function(Ro,Pi){Ur.push(xt(Pi,se,!0)+" => "+xt(Ro,se))}),nt("Map",t.call(se),Ur,jt)}if(Zn(se)){var Dr=[];return o&&o.call(se,function(Ro){Dr.push(xt(Ro,se))}),nt("Set",a.call(se),Dr,jt)}if(Dn(se))return fe("WeakMap");if(dr(se))return fe("WeakSet");if(pn(se))return fe("WeakRef");if(it(se))return ce(xt(Number(se)));if(Ut(se))return ce(xt(Ee.call(se)));if(_t(se))return ce(F.call(se));if(Be(se))return ce(xt(String(se)));if(typeof window<"u"&&se===window)return"{ [object Window] }";if(typeof globalThis<"u"&&se===globalThis||typeof window<"u"&&se===window)return"{ [object globalThis] }";if(!Kt(se)&&!Ue(se)){var ur=tr(se,xt),go=Ze?Ze(se)===Object.prototype:se instanceof Object||se.constructor===Object,Sa=se instanceof Object?"":"null prototype",Yi=!go&&be&&Object(se)===se&&be in se?H.call(_n(se),8,-1):Sa?"Object":"",Ci=go||typeof se.constructor!="function"?"":se.constructor.name?se.constructor.name+" ":"",oo=Ci+(Yi||Sa?"["+ie.call(G.call([],Yi||[],Sa||[]),": ")+"] ":"");return ur.length===0?oo+"{}":jt?oo+"{"+sn(ur,jt)+"}":oo+"{ "+ie.call(ur,", ")+" }"}return String(se)};function Yt(Oe,se,ve){var p=ve.quoteStyle||se,Ne=He[p];return Ne+Oe+Ne}function gt(Oe){return oe.call(String(Oe),/"/g,"&quot;")}function Lt(Oe){return _n(Oe)==="[object Array]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Kt(Oe){return _n(Oe)==="[object Date]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Ue(Oe){return _n(Oe)==="[object RegExp]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Pe(Oe){return _n(Oe)==="[object Error]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function Be(Oe){return _n(Oe)==="[object String]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function it(Oe){return _n(Oe)==="[object Number]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function _t(Oe){return _n(Oe)==="[object Boolean]"&&(!be||!(typeof Oe=="object"&&be in Oe))}function ft(Oe){if(De)return Oe&&typeof Oe=="object"&&Oe instanceof Symbol;if(typeof Oe=="symbol")return!0;if(!Oe||typeof Oe!="object"||!Se)return!1;try{return Se.call(Oe),!0}catch{}return!1}function Ut(Oe){if(!Oe||typeof Oe!="object"||!Ee)return!1;try{return Ee.call(Oe),!0}catch{}return!1}var rn=Object.prototype.hasOwnProperty||function(Oe){return Oe in this};function Dt(Oe,se){return rn.call(Oe,se)}function _n(Oe){return j.call(Oe)}function qn(Oe){if(Oe.name)return Oe.name;var se=q.call(N.call(Oe),/^function\s*([\w$]+)/);return se?se[1]:null}function tn(Oe,se){if(Oe.indexOf)return Oe.indexOf(se);for(var ve=0,p=Oe.length;ve<p;ve++)if(Oe[ve]===se)return ve;return-1}function rr(Oe){if(!t||!Oe||typeof Oe!="object")return!1;try{t.call(Oe);try{a.call(Oe)}catch{return!0}return Oe instanceof Map}catch{}return!1}function Dn(Oe){if(!y||!Oe||typeof Oe!="object")return!1;try{y.call(Oe,y);try{B.call(Oe,B)}catch{return!0}return Oe instanceof WeakMap}catch{}return!1}function pn(Oe){if(!T||!Oe||typeof Oe!="object")return!1;try{return T.call(Oe),!0}catch{}return!1}function Zn(Oe){if(!a||!Oe||typeof Oe!="object")return!1;try{a.call(Oe);try{t.call(Oe)}catch{return!0}return Oe instanceof Set}catch{}return!1}function dr(Oe){if(!B||!Oe||typeof Oe!="object")return!1;try{B.call(Oe,B);try{y.call(Oe,y)}catch{return!0}return Oe instanceof WeakSet}catch{}return!1}function vr(Oe){return!Oe||typeof Oe!="object"?!1:typeof HTMLElement<"u"&&Oe instanceof HTMLElement?!0:typeof Oe.nodeName=="string"&&typeof Oe.getAttribute=="function"}function Jn(Oe,se){if(Oe.length>se.maxStringLength){var ve=Oe.length-se.maxStringLength,p="... "+ve+" more character"+(ve>1?"s":"");return Jn(H.call(Oe,0,se.maxStringLength),se)+p}var Ne=bt[se.quoteStyle||"single"];Ne.lastIndex=0;var Ye=oe.call(oe.call(Oe,Ne,"\\$1"),/[\x00-\x1f]/g,Qe);return Yt(Ye,"single",se)}function Qe(Oe){var se=Oe.charCodeAt(0),ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[se];return ve?"\\"+ve:"\\x"+(se<16?"0":"")+ne.call(se.toString(16))}function ce(Oe){return"Object("+Oe+")"}function fe(Oe){return Oe+" { ? }"}function nt(Oe,se,ve,p){var Ne=p?sn(ve,p):ie.call(ve,", ");return Oe+" ("+se+") {"+Ne+"}"}function St(Oe){for(var se=0;se<Oe.length;se++)if(tn(Oe[se],`
`)>=0)return!1;return!0}function Ht(Oe,se){var ve;if(Oe.indent==="	")ve="	";else if(typeof Oe.indent=="number"&&Oe.indent>0)ve=ie.call(Array(Oe.indent+1)," ");else return null;return{base:ve,prev:ie.call(Array(se+1),ve)}}function sn(Oe,se){if(Oe.length===0)return"";var ve=`
`+se.prev+se.base;return ve+ie.call(Oe,","+ve)+`
`+se.prev}function tr(Oe,se){var ve=Lt(Oe),p=[];if(ve){p.length=Oe.length;for(var Ne=0;Ne<Oe.length;Ne++)p[Ne]=Dt(Oe,Ne)?se(Oe[Ne],Oe):""}var Ye=typeof me=="function"?me(Oe):[],rt;if(De){rt={};for(var ct=0;ct<Ye.length;ct++)rt["$"+Ye[ct]]=Ye[ct]}for(var dt in Oe)Dt(Oe,dt)&&(ve&&String(Number(dt))===dt&&dt<Oe.length||De&&rt["$"+dt]instanceof Symbol||(te.call(/[^\w$]/,dt)?p.push(se(dt,Oe)+": "+se(Oe[dt],Oe)):p.push(dt+": "+se(Oe[dt],Oe))));if(typeof me=="function")for(var qt=0;qt<Ye.length;qt++)at.call(Oe,Ye[qt])&&p.push("["+se(Ye[qt])+"]: "+se(Oe[Ye[qt]],Oe));return p}return BE}var OE,tF;function rpe(){if(tF)return OE;tF=1;var n=N3(),e=pv(),t=function(o,f,y){for(var x=o,B;(B=x.next)!=null;x=B)if(B.key===f)return x.next=B.next,y||(B.next=o.next,o.next=B),B},r=function(o,f){if(o){var y=t(o,f);return y&&y.value}},i=function(o,f,y){var x=t(o,f);x?x.value=y:o.next={key:f,next:o.next,value:y}},s=function(o,f){return o?!!t(o,f):!1},a=function(o,f){if(o)return t(o,f,!0)};return OE=function(){var f,y={assert:function(x){if(!y.has(x))throw new e("Side channel does not contain "+n(x))},delete:function(x){var B=f&&f.next,O=a(f,x);return O&&B&&B===O&&(f=void 0),!!O},get:function(x){return r(f,x)},has:function(x){return s(f,x)},set:function(x,B){f||(f={next:void 0}),i(f,x,B)}};return y},OE}var IE,nF;function BG(){return nF||(nF=1,IE=Object),IE}var kE,rF;function ipe(){return rF||(rF=1,kE=Error),kE}var TE,iF;function ope(){return iF||(iF=1,TE=EvalError),TE}var PE,oF;function spe(){return oF||(oF=1,PE=RangeError),PE}var KE,sF;function ape(){return sF||(sF=1,KE=ReferenceError),KE}var DE,aF;function lpe(){return aF||(aF=1,DE=SyntaxError),DE}var RE,lF;function upe(){return lF||(lF=1,RE=URIError),RE}var FE,uF;function Ape(){return uF||(uF=1,FE=Math.abs),FE}var LE,AF;function cpe(){return AF||(AF=1,LE=Math.floor),LE}var UE,cF;function dpe(){return cF||(cF=1,UE=Math.max),UE}var zE,dF;function hpe(){return dF||(dF=1,zE=Math.min),zE}var jE,hF;function fpe(){return hF||(hF=1,jE=Math.pow),jE}var NE,fF;function ppe(){return fF||(fF=1,NE=Math.round),NE}var WE,pF;function mpe(){return pF||(pF=1,WE=Number.isNaN||function(e){return e!==e}),WE}var GE,mF;function gpe(){if(mF)return GE;mF=1;var n=mpe();return GE=function(t){return n(t)||t===0?t:t<0?-1:1},GE}var QE,gF;function ype(){return gF||(gF=1,QE=Object.getOwnPropertyDescriptor),QE}var qE,yF;function OG(){if(yF)return qE;yF=1;var n=ype();if(n)try{n([],"length")}catch{n=null}return qE=n,qE}var YE,vF;function vpe(){if(vF)return YE;vF=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return YE=n,YE}var $E,CF;function Cpe(){return CF||(CF=1,$E=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),$E}var VE,_F;function _pe(){if(_F)return VE;_F=1;var n=typeof Symbol<"u"&&Symbol,e=Cpe();return VE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},VE}var HE,bF;function IG(){return bF||(bF=1,HE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),HE}var ZE,xF;function kG(){if(xF)return ZE;xF=1;var n=BG();return ZE=n.getPrototypeOf||null,ZE}var XE,wF;function bpe(){if(wF)return XE;wF=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(f,y){for(var x=[],B=0;B<f.length;B+=1)x[B]=f[B];for(var O=0;O<y.length;O+=1)x[O+f.length]=y[O];return x},s=function(f,y){for(var x=[],B=y,O=0;B<f.length;B+=1,O+=1)x[O]=f[B];return x},a=function(o,f){for(var y="",x=0;x<o.length;x+=1)y+=o[x],x+1<o.length&&(y+=f);return y};return XE=function(f){var y=this;if(typeof y!="function"||e.apply(y)!==r)throw new TypeError(n+y);for(var x=s(arguments,1),B,O=function(){if(this instanceof B){var q=y.apply(this,i(x,arguments));return Object(q)===q?q:this}return y.apply(f,i(x,arguments))},T=t(0,y.length-x.length),F=[],j=0;j<T;j++)F[j]="$"+j;if(B=Function("binder","return function ("+a(F,",")+"){ return binder.apply(this,arguments); }")(O),y.prototype){var N=function(){};N.prototype=y.prototype,B.prototype=new N,N.prototype=null}return B},XE}var JE,MF;function W3(){if(MF)return JE;MF=1;var n=bpe();return JE=Function.prototype.bind||n,JE}var e6,SF;function v7(){return SF||(SF=1,e6=Function.prototype.call),e6}var t6,EF;function TG(){return EF||(EF=1,t6=Function.prototype.apply),t6}var n6,BF;function xpe(){return BF||(BF=1,n6=typeof Reflect<"u"&&Reflect&&Reflect.apply),n6}var r6,OF;function wpe(){if(OF)return r6;OF=1;var n=W3(),e=TG(),t=v7(),r=xpe();return r6=r||n.call(t,e),r6}var i6,IF;function PG(){if(IF)return i6;IF=1;var n=W3(),e=pv(),t=v7(),r=wpe();return i6=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},i6}var o6,kF;function Mpe(){if(kF)return o6;kF=1;var n=PG(),e=OG(),t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return o6=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,o6}var s6,TF;function Spe(){if(TF)return s6;TF=1;var n=IG(),e=kG(),t=Mpe();return s6=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,s6}var a6,PF;function Epe(){if(PF)return a6;PF=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=W3();return a6=t.call(n,e),a6}var l6,KF;function C7(){if(KF)return l6;KF=1;var n,e=BG(),t=ipe(),r=ope(),i=spe(),s=ape(),a=lpe(),o=pv(),f=upe(),y=Ape(),x=cpe(),B=dpe(),O=hpe(),T=fpe(),F=ppe(),j=gpe(),N=Function,q=function(Pe){try{return N('"use strict"; return ('+Pe+").constructor;")()}catch{}},H=OG(),oe=vpe(),ne=function(){throw new o},$=H?function(){try{return arguments.callee,ne}catch{try{return H(arguments,"callee").get}catch{return ne}}}():ne,te=_pe()(),G=Spe(),ie=kG(),he=IG(),pe=TG(),Ee=v7(),me={},Se=typeof Uint8Array>"u"||!G?n:G(Uint8Array),De={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":te&&G?G([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":me,"%AsyncGenerator%":me,"%AsyncGeneratorFunction%":me,"%AsyncIteratorPrototype%":me,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":N,"%GeneratorFunction%":me,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":te&&G?G(G([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!te||!G?n:G(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":H,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!te||!G?n:G(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":te&&G?G(""[Symbol.iterator]()):n,"%Symbol%":te?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":$,"%TypedArray%":Se,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":f,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Ee,"%Function.prototype.apply%":pe,"%Object.defineProperty%":oe,"%Object.getPrototypeOf%":ie,"%Math.abs%":y,"%Math.floor%":x,"%Math.max%":B,"%Math.min%":O,"%Math.pow%":T,"%Math.round%":F,"%Math.sign%":j,"%Reflect.getPrototypeOf%":he};if(G)try{null.error}catch(Pe){var be=G(G(Pe));De["%Error.prototype%"]=be}var at=function Pe(Be){var it;if(Be==="%AsyncFunction%")it=q("async function () {}");else if(Be==="%GeneratorFunction%")it=q("function* () {}");else if(Be==="%AsyncGeneratorFunction%")it=q("async function* () {}");else if(Be==="%AsyncGenerator%"){var _t=Pe("%AsyncGeneratorFunction%");_t&&(it=_t.prototype)}else if(Be==="%AsyncIteratorPrototype%"){var ft=Pe("%AsyncGenerator%");ft&&G&&(it=G(ft.prototype))}return De[Be]=it,it},Ze={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Je=W3(),We=Epe(),Me=Je.call(Ee,Array.prototype.concat),Fe=Je.call(pe,Array.prototype.splice),He=Je.call(Ee,String.prototype.replace),bt=Je.call(Ee,String.prototype.slice),Yt=Je.call(Ee,RegExp.prototype.exec),gt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Lt=/\\(\\)?/g,Kt=function(Be){var it=bt(Be,0,1),_t=bt(Be,-1);if(it==="%"&&_t!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(_t==="%"&&it!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var ft=[];return He(Be,gt,function(Ut,rn,Dt,_n){ft[ft.length]=Dt?He(_n,Lt,"$1"):rn||Ut}),ft},Ue=function(Be,it){var _t=Be,ft;if(We(Ze,_t)&&(ft=Ze[_t],_t="%"+ft[0]+"%"),We(De,_t)){var Ut=De[_t];if(Ut===me&&(Ut=at(_t)),typeof Ut>"u"&&!it)throw new o("intrinsic "+Be+" exists, but is not available. Please file an issue!");return{alias:ft,name:_t,value:Ut}}throw new a("intrinsic "+Be+" does not exist!")};return l6=function(Be,it){if(typeof Be!="string"||Be.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof it!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Yt(/^%?[^%]*%?$/,Be)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _t=Kt(Be),ft=_t.length>0?_t[0]:"",Ut=Ue("%"+ft+"%",it),rn=Ut.name,Dt=Ut.value,_n=!1,qn=Ut.alias;qn&&(ft=qn[0],Fe(_t,Me([0,1],qn)));for(var tn=1,rr=!0;tn<_t.length;tn+=1){var Dn=_t[tn],pn=bt(Dn,0,1),Zn=bt(Dn,-1);if((pn==='"'||pn==="'"||pn==="`"||Zn==='"'||Zn==="'"||Zn==="`")&&pn!==Zn)throw new a("property names with quotes must have matching quotes");if((Dn==="constructor"||!rr)&&(_n=!0),ft+="."+Dn,rn="%"+ft+"%",We(De,rn))Dt=De[rn];else if(Dt!=null){if(!(Dn in Dt)){if(!it)throw new o("base intrinsic for "+Be+" exists, but the property is not available.");return}if(H&&tn+1>=_t.length){var dr=H(Dt,Dn);rr=!!dr,rr&&"get"in dr&&!("originalValue"in dr.get)?Dt=dr.get:Dt=Dt[Dn]}else rr=We(Dt,Dn),Dt=Dt[Dn];rr&&!_n&&(De[rn]=Dt)}}return Dt},l6}var u6,DF;function KG(){if(DF)return u6;DF=1;var n=C7(),e=PG(),t=e([n("%String.prototype.indexOf%")]);return u6=function(i,s){var a=n(i,!!s);return typeof a=="function"&&t(i,".prototype.")>-1?e([a]):a},u6}var A6,RF;function DG(){if(RF)return A6;RF=1;var n=C7(),e=KG(),t=N3(),r=pv(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),a=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),f=e("Map.prototype.delete",!0),y=e("Map.prototype.size",!0);return A6=!!i&&function(){var B,O={assert:function(T){if(!O.has(T))throw new r("Side channel does not contain "+t(T))},delete:function(T){if(B){var F=f(B,T);return y(B)===0&&(B=void 0),F}return!1},get:function(T){if(B)return s(B,T)},has:function(T){return B?o(B,T):!1},set:function(T,F){B||(B=new i),a(B,T,F)}};return O},A6}var c6,FF;function Bpe(){if(FF)return c6;FF=1;var n=C7(),e=KG(),t=N3(),r=DG(),i=pv(),s=n("%WeakMap%",!0),a=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),f=e("WeakMap.prototype.has",!0),y=e("WeakMap.prototype.delete",!0);return c6=s?function(){var B,O,T={assert:function(F){if(!T.has(F))throw new i("Side channel does not contain "+t(F))},delete:function(F){if(s&&F&&(typeof F=="object"||typeof F=="function")){if(B)return y(B,F)}else if(r&&O)return O.delete(F);return!1},get:function(F){return s&&F&&(typeof F=="object"||typeof F=="function")&&B?a(B,F):O&&O.get(F)},has:function(F){return s&&F&&(typeof F=="object"||typeof F=="function")&&B?f(B,F):!!O&&O.has(F)},set:function(F,j){s&&F&&(typeof F=="object"||typeof F=="function")?(B||(B=new s),o(B,F,j)):r&&(O||(O=r()),O.set(F,j))}};return T}:r,c6}var d6,LF;function Ope(){if(LF)return d6;LF=1;var n=pv(),e=N3(),t=rpe(),r=DG(),i=Bpe(),s=i||r||t;return d6=function(){var o,f={assert:function(y){if(!f.has(y))throw new n("Side channel does not contain "+e(y))},delete:function(y){return!!o&&o.delete(y)},get:function(y){return o&&o.get(y)},has:function(y){return!!o&&o.has(y)},set:function(y,x){o||(o=s()),o.set(y,x)}};return f},d6}var h6,UF;function _7(){if(UF)return h6;UF=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return h6={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},h6}var f6,zF;function RG(){if(zF)return f6;zF=1;var n=_7(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var N=[],q=0;q<256;++q)N.push("%"+((q<16?"0":"")+q.toString(16)).toUpperCase());return N}(),i=function(q){for(;q.length>1;){var H=q.pop(),oe=H.obj[H.prop];if(t(oe)){for(var ne=[],$=0;$<oe.length;++$)typeof oe[$]<"u"&&ne.push(oe[$]);H.obj[H.prop]=ne}}},s=function(q,H){for(var oe=H&&H.plainObjects?{__proto__:null}:{},ne=0;ne<q.length;++ne)typeof q[ne]<"u"&&(oe[ne]=q[ne]);return oe},a=function N(q,H,oe){if(!H)return q;if(typeof H!="object"&&typeof H!="function"){if(t(q))q.push(H);else if(q&&typeof q=="object")(oe&&(oe.plainObjects||oe.allowPrototypes)||!e.call(Object.prototype,H))&&(q[H]=!0);else return[q,H];return q}if(!q||typeof q!="object")return[q].concat(H);var ne=q;return t(q)&&!t(H)&&(ne=s(q,oe)),t(q)&&t(H)?(H.forEach(function($,te){if(e.call(q,te)){var G=q[te];G&&typeof G=="object"&&$&&typeof $=="object"?q[te]=N(G,$,oe):q.push($)}else q[te]=$}),q):Object.keys(H).reduce(function($,te){var G=H[te];return e.call($,te)?$[te]=N($[te],G,oe):$[te]=G,$},ne)},o=function(q,H){return Object.keys(H).reduce(function(oe,ne){return oe[ne]=H[ne],oe},q)},f=function(N,q,H){var oe=N.replace(/\+/g," ");if(H==="iso-8859-1")return oe.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(oe)}catch{return oe}},y=1024,x=function(q,H,oe,ne,$){if(q.length===0)return q;var te=q;if(typeof q=="symbol"?te=Symbol.prototype.toString.call(q):typeof q!="string"&&(te=String(q)),oe==="iso-8859-1")return escape(te).replace(/%u[0-9a-f]{4}/gi,function(Se){return"%26%23"+parseInt(Se.slice(2),16)+"%3B"});for(var G="",ie=0;ie<te.length;ie+=y){for(var he=te.length>=y?te.slice(ie,ie+y):te,pe=[],Ee=0;Ee<he.length;++Ee){var me=he.charCodeAt(Ee);if(me===45||me===46||me===95||me===126||me>=48&&me<=57||me>=65&&me<=90||me>=97&&me<=122||$===n.RFC1738&&(me===40||me===41)){pe[pe.length]=he.charAt(Ee);continue}if(me<128){pe[pe.length]=r[me];continue}if(me<2048){pe[pe.length]=r[192|me>>6]+r[128|me&63];continue}if(me<55296||me>=57344){pe[pe.length]=r[224|me>>12]+r[128|me>>6&63]+r[128|me&63];continue}Ee+=1,me=65536+((me&1023)<<10|he.charCodeAt(Ee)&1023),pe[pe.length]=r[240|me>>18]+r[128|me>>12&63]+r[128|me>>6&63]+r[128|me&63]}G+=pe.join("")}return G},B=function(q){for(var H=[{obj:{o:q},prop:"o"}],oe=[],ne=0;ne<H.length;++ne)for(var $=H[ne],te=$.obj[$.prop],G=Object.keys(te),ie=0;ie<G.length;++ie){var he=G[ie],pe=te[he];typeof pe=="object"&&pe!==null&&oe.indexOf(pe)===-1&&(H.push({obj:te,prop:he}),oe.push(pe))}return i(H),q},O=function(q){return Object.prototype.toString.call(q)==="[object RegExp]"},T=function(q){return!q||typeof q!="object"?!1:!!(q.constructor&&q.constructor.isBuffer&&q.constructor.isBuffer(q))},F=function(q,H){return[].concat(q,H)},j=function(q,H){if(t(q)){for(var oe=[],ne=0;ne<q.length;ne+=1)oe.push(H(q[ne]));return oe}return H(q)};return f6={arrayToObject:s,assign:o,combine:F,compact:B,decode:f,encode:x,isBuffer:T,isRegExp:O,maybeMap:j,merge:a},f6}var p6,jF;function Ipe(){if(jF)return p6;jF=1;var n=Ope(),e=RG(),t=_7(),r=Object.prototype.hasOwnProperty,i={brackets:function(N){return N+"[]"},comma:"comma",indices:function(N,q){return N+"["+q+"]"},repeat:function(N){return N}},s=Array.isArray,a=Array.prototype.push,o=function(j,N){a.apply(j,s(N)?N:[N])},f=Date.prototype.toISOString,y=t.default,x={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:y,formatter:t.formatters[y],indices:!1,serializeDate:function(N){return f.call(N)},skipNulls:!1,strictNullHandling:!1},B=function(N){return typeof N=="string"||typeof N=="number"||typeof N=="boolean"||typeof N=="symbol"||typeof N=="bigint"},O={},T=function j(N,q,H,oe,ne,$,te,G,ie,he,pe,Ee,me,Se,De,be,at,Ze){for(var Je=N,We=Ze,Me=0,Fe=!1;(We=We.get(O))!==void 0&&!Fe;){var He=We.get(N);if(Me+=1,typeof He<"u"){if(He===Me)throw new RangeError("Cyclic object value");Fe=!0}typeof We.get(O)>"u"&&(Me=0)}if(typeof he=="function"?Je=he(q,Je):Je instanceof Date?Je=me(Je):H==="comma"&&s(Je)&&(Je=e.maybeMap(Je,function(rn){return rn instanceof Date?me(rn):rn})),Je===null){if($)return ie&&!be?ie(q,x.encoder,at,"key",Se):q;Je=""}if(B(Je)||e.isBuffer(Je)){if(ie){var bt=be?q:ie(q,x.encoder,at,"key",Se);return[De(bt)+"="+De(ie(Je,x.encoder,at,"value",Se))]}return[De(q)+"="+De(String(Je))]}var Yt=[];if(typeof Je>"u")return Yt;var gt;if(H==="comma"&&s(Je))be&&ie&&(Je=e.maybeMap(Je,ie)),gt=[{value:Je.length>0?Je.join(",")||null:void 0}];else if(s(he))gt=he;else{var Lt=Object.keys(Je);gt=pe?Lt.sort(pe):Lt}var Kt=G?String(q).replace(/\./g,"%2E"):String(q),Ue=oe&&s(Je)&&Je.length===1?Kt+"[]":Kt;if(ne&&s(Je)&&Je.length===0)return Ue+"[]";for(var Pe=0;Pe<gt.length;++Pe){var Be=gt[Pe],it=typeof Be=="object"&&Be&&typeof Be.value<"u"?Be.value:Je[Be];if(!(te&&it===null)){var _t=Ee&&G?String(Be).replace(/\./g,"%2E"):String(Be),ft=s(Je)?typeof H=="function"?H(Ue,_t):Ue:Ue+(Ee?"."+_t:"["+_t+"]");Ze.set(N,Me);var Ut=n();Ut.set(O,Ze),o(Yt,j(it,ft,H,oe,ne,$,te,G,H==="comma"&&be&&s(Je)?null:ie,he,pe,Ee,me,Se,De,be,at,Ut))}}return Yt},F=function(N){if(!N)return x;if(typeof N.allowEmptyArrays<"u"&&typeof N.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof N.encodeDotInKeys<"u"&&typeof N.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(N.encoder!==null&&typeof N.encoder<"u"&&typeof N.encoder!="function")throw new TypeError("Encoder has to be a function.");var q=N.charset||x.charset;if(typeof N.charset<"u"&&N.charset!=="utf-8"&&N.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var H=t.default;if(typeof N.format<"u"){if(!r.call(t.formatters,N.format))throw new TypeError("Unknown format option provided.");H=N.format}var oe=t.formatters[H],ne=x.filter;(typeof N.filter=="function"||s(N.filter))&&(ne=N.filter);var $;if(N.arrayFormat in i?$=N.arrayFormat:"indices"in N?$=N.indices?"indices":"repeat":$=x.arrayFormat,"commaRoundTrip"in N&&typeof N.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var te=typeof N.allowDots>"u"?N.encodeDotInKeys===!0?!0:x.allowDots:!!N.allowDots;return{addQueryPrefix:typeof N.addQueryPrefix=="boolean"?N.addQueryPrefix:x.addQueryPrefix,allowDots:te,allowEmptyArrays:typeof N.allowEmptyArrays=="boolean"?!!N.allowEmptyArrays:x.allowEmptyArrays,arrayFormat:$,charset:q,charsetSentinel:typeof N.charsetSentinel=="boolean"?N.charsetSentinel:x.charsetSentinel,commaRoundTrip:!!N.commaRoundTrip,delimiter:typeof N.delimiter>"u"?x.delimiter:N.delimiter,encode:typeof N.encode=="boolean"?N.encode:x.encode,encodeDotInKeys:typeof N.encodeDotInKeys=="boolean"?N.encodeDotInKeys:x.encodeDotInKeys,encoder:typeof N.encoder=="function"?N.encoder:x.encoder,encodeValuesOnly:typeof N.encodeValuesOnly=="boolean"?N.encodeValuesOnly:x.encodeValuesOnly,filter:ne,format:H,formatter:oe,serializeDate:typeof N.serializeDate=="function"?N.serializeDate:x.serializeDate,skipNulls:typeof N.skipNulls=="boolean"?N.skipNulls:x.skipNulls,sort:typeof N.sort=="function"?N.sort:null,strictNullHandling:typeof N.strictNullHandling=="boolean"?N.strictNullHandling:x.strictNullHandling}};return p6=function(j,N){var q=j,H=F(N),oe,ne;typeof H.filter=="function"?(ne=H.filter,q=ne("",q)):s(H.filter)&&(ne=H.filter,oe=ne);var $=[];if(typeof q!="object"||q===null)return"";var te=i[H.arrayFormat],G=te==="comma"&&H.commaRoundTrip;oe||(oe=Object.keys(q)),H.sort&&oe.sort(H.sort);for(var ie=n(),he=0;he<oe.length;++he){var pe=oe[he],Ee=q[pe];H.skipNulls&&Ee===null||o($,T(Ee,pe,te,G,H.allowEmptyArrays,H.strictNullHandling,H.skipNulls,H.encodeDotInKeys,H.encode?H.encoder:null,H.filter,H.sort,H.allowDots,H.serializeDate,H.format,H.formatter,H.encodeValuesOnly,H.charset,ie))}var me=$.join(H.delimiter),Se=H.addQueryPrefix===!0?"?":"";return H.charsetSentinel&&(H.charset==="iso-8859-1"?Se+="utf8=%26%2310003%3B&":Se+="utf8=%E2%9C%93&"),me.length>0?Se+me:""},p6}var m6,NF;function kpe(){if(NF)return m6;NF=1;var n=RG(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(O){return O.replace(/&#(\d+);/g,function(T,F){return String.fromCharCode(parseInt(F,10))})},s=function(O,T){return O&&typeof O=="string"&&T.comma&&O.indexOf(",")>-1?O.split(","):O},a="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",f=function(T,F){var j={__proto__:null},N=F.ignoreQueryPrefix?T.replace(/^\?/,""):T;N=N.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var q=F.parameterLimit===1/0?void 0:F.parameterLimit,H=N.split(F.delimiter,q),oe=-1,ne,$=F.charset;if(F.charsetSentinel)for(ne=0;ne<H.length;++ne)H[ne].indexOf("utf8=")===0&&(H[ne]===o?$="utf-8":H[ne]===a&&($="iso-8859-1"),oe=ne,ne=H.length);for(ne=0;ne<H.length;++ne)if(ne!==oe){var te=H[ne],G=te.indexOf("]="),ie=G===-1?te.indexOf("="):G+1,he,pe;ie===-1?(he=F.decoder(te,r.decoder,$,"key"),pe=F.strictNullHandling?null:""):(he=F.decoder(te.slice(0,ie),r.decoder,$,"key"),pe=n.maybeMap(s(te.slice(ie+1),F),function(me){return F.decoder(me,r.decoder,$,"value")})),pe&&F.interpretNumericEntities&&$==="iso-8859-1"&&(pe=i(String(pe))),te.indexOf("[]=")>-1&&(pe=t(pe)?[pe]:pe);var Ee=e.call(j,he);Ee&&F.duplicates==="combine"?j[he]=n.combine(j[he],pe):(!Ee||F.duplicates==="last")&&(j[he]=pe)}return j},y=function(O,T,F,j){for(var N=j?T:s(T,F),q=O.length-1;q>=0;--q){var H,oe=O[q];if(oe==="[]"&&F.parseArrays)H=F.allowEmptyArrays&&(N===""||F.strictNullHandling&&N===null)?[]:[].concat(N);else{H=F.plainObjects?{__proto__:null}:{};var ne=oe.charAt(0)==="["&&oe.charAt(oe.length-1)==="]"?oe.slice(1,-1):oe,$=F.decodeDotInKeys?ne.replace(/%2E/g,"."):ne,te=parseInt($,10);!F.parseArrays&&$===""?H={0:N}:!isNaN(te)&&oe!==$&&String(te)===$&&te>=0&&F.parseArrays&&te<=F.arrayLimit?(H=[],H[te]=N):$!=="__proto__"&&(H[$]=N)}N=H}return N},x=function(T,F,j,N){if(T){var q=j.allowDots?T.replace(/\.([^.[]+)/g,"[$1]"):T,H=/(\[[^[\]]*])/,oe=/(\[[^[\]]*])/g,ne=j.depth>0&&H.exec(q),$=ne?q.slice(0,ne.index):q,te=[];if($){if(!j.plainObjects&&e.call(Object.prototype,$)&&!j.allowPrototypes)return;te.push($)}for(var G=0;j.depth>0&&(ne=oe.exec(q))!==null&&G<j.depth;){if(G+=1,!j.plainObjects&&e.call(Object.prototype,ne[1].slice(1,-1))&&!j.allowPrototypes)return;te.push(ne[1])}if(ne){if(j.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+j.depth+" and strictDepth is true");te.push("["+q.slice(ne.index)+"]")}return y(te,F,j,N)}},B=function(T){if(!T)return r;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.decodeDotInKeys<"u"&&typeof T.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(T.decoder!==null&&typeof T.decoder<"u"&&typeof T.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var F=typeof T.charset>"u"?r.charset:T.charset,j=typeof T.duplicates>"u"?r.duplicates:T.duplicates;if(j!=="combine"&&j!=="first"&&j!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var N=typeof T.allowDots>"u"?T.decodeDotInKeys===!0?!0:r.allowDots:!!T.allowDots;return{allowDots:N,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof T.allowPrototypes=="boolean"?T.allowPrototypes:r.allowPrototypes,allowSparse:typeof T.allowSparse=="boolean"?T.allowSparse:r.allowSparse,arrayLimit:typeof T.arrayLimit=="number"?T.arrayLimit:r.arrayLimit,charset:F,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:r.charsetSentinel,comma:typeof T.comma=="boolean"?T.comma:r.comma,decodeDotInKeys:typeof T.decodeDotInKeys=="boolean"?T.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof T.decoder=="function"?T.decoder:r.decoder,delimiter:typeof T.delimiter=="string"||n.isRegExp(T.delimiter)?T.delimiter:r.delimiter,depth:typeof T.depth=="number"||T.depth===!1?+T.depth:r.depth,duplicates:j,ignoreQueryPrefix:T.ignoreQueryPrefix===!0,interpretNumericEntities:typeof T.interpretNumericEntities=="boolean"?T.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof T.parameterLimit=="number"?T.parameterLimit:r.parameterLimit,parseArrays:T.parseArrays!==!1,plainObjects:typeof T.plainObjects=="boolean"?T.plainObjects:r.plainObjects,strictDepth:typeof T.strictDepth=="boolean"?!!T.strictDepth:r.strictDepth,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:r.strictNullHandling}};return m6=function(O,T){var F=B(T);if(O===""||O===null||typeof O>"u")return F.plainObjects?{__proto__:null}:{};for(var j=typeof O=="string"?f(O,F):O,N=F.plainObjects?{__proto__:null}:{},q=Object.keys(j),H=0;H<q.length;++H){var oe=q[H],ne=x(oe,j[oe],F,typeof O=="string");N=n.merge(N,ne,F)}return F.allowSparse===!0?N:n.compact(N)},m6}var g6,WF;function Tpe(){if(WF)return g6;WF=1;var n=Ipe(),e=kpe(),t=_7();return g6={formats:t,parse:e,stringify:n},g6}var GF;function Ppe(){if(GF)return wg;GF=1;var n=Jfe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(a),f=["%","/","?",";","#"].concat(o),y=["/","?","#"],x=255,B=/^[+a-z0-9A-Z_-]{0,63}$/,O=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},F={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},N=Tpe();function q($,te,G){if($&&typeof $=="object"&&$ instanceof e)return $;var ie=new e;return ie.parse($,te,G),ie}e.prototype.parse=function($,te,G){if(typeof $!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof $);var ie=$.indexOf("?"),he=ie!==-1&&ie<$.indexOf("#")?"?":"#",pe=$.split(he),Ee=/\\/g;pe[0]=pe[0].replace(Ee,"/"),$=pe.join(he);var me=$;if(me=me.trim(),!G&&$.split("#").length===1){var Se=i.exec(me);if(Se)return this.path=me,this.href=me,this.pathname=Se[1],Se[2]?(this.search=Se[2],te?this.query=N.parse(this.search.substr(1)):this.query=this.search.substr(1)):te&&(this.search="",this.query={}),this}var De=t.exec(me);if(De){De=De[0];var be=De.toLowerCase();this.protocol=be,me=me.substr(De.length)}if(G||De||me.match(/^\/\/[^@/]+@[^@/]+/)){var at=me.substr(0,2)==="//";at&&!(De&&F[De])&&(me=me.substr(2),this.slashes=!0)}if(!F[De]&&(at||De&&!j[De])){for(var Ze=-1,Je=0;Je<y.length;Je++){var We=me.indexOf(y[Je]);We!==-1&&(Ze===-1||We<Ze)&&(Ze=We)}var Me,Fe;Ze===-1?Fe=me.lastIndexOf("@"):Fe=me.lastIndexOf("@",Ze),Fe!==-1&&(Me=me.slice(0,Fe),me=me.slice(Fe+1),this.auth=decodeURIComponent(Me)),Ze=-1;for(var Je=0;Je<f.length;Je++){var We=me.indexOf(f[Je]);We!==-1&&(Ze===-1||We<Ze)&&(Ze=We)}Ze===-1&&(Ze=me.length),this.host=me.slice(0,Ze),me=me.slice(Ze),this.parseHost(),this.hostname=this.hostname||"";var He=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!He)for(var bt=this.hostname.split(/\./),Je=0,Yt=bt.length;Je<Yt;Je++){var gt=bt[Je];if(gt&&!gt.match(B)){for(var Lt="",Kt=0,Ue=gt.length;Kt<Ue;Kt++)gt.charCodeAt(Kt)>127?Lt+="x":Lt+=gt[Kt];if(!Lt.match(B)){var Pe=bt.slice(0,Je),Be=bt.slice(Je+1),it=gt.match(O);it&&(Pe.push(it[1]),Be.unshift(it[2])),Be.length&&(me="/"+Be.join(".")+me),this.hostname=Pe.join(".");break}}}this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),He||(this.hostname=n.toASCII(this.hostname));var _t=this.port?":"+this.port:"",ft=this.hostname||"";this.host=ft+_t,this.href+=this.host,He&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),me[0]!=="/"&&(me="/"+me))}if(!T[be])for(var Je=0,Yt=o.length;Je<Yt;Je++){var Ut=o[Je];if(me.indexOf(Ut)!==-1){var rn=encodeURIComponent(Ut);rn===Ut&&(rn=escape(Ut)),me=me.split(Ut).join(rn)}}var Dt=me.indexOf("#");Dt!==-1&&(this.hash=me.substr(Dt),me=me.slice(0,Dt));var _n=me.indexOf("?");if(_n!==-1?(this.search=me.substr(_n),this.query=me.substr(_n+1),te&&(this.query=N.parse(this.query)),me=me.slice(0,_n)):te&&(this.search="",this.query={}),me&&(this.pathname=me),j[be]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _t=this.pathname||"",qn=this.search||"";this.path=_t+qn}return this.href=this.format(),this};function H($){return typeof $=="string"&&($=q($)),$ instanceof e?$.format():e.prototype.format.call($)}e.prototype.format=function(){var $=this.auth||"";$&&($=encodeURIComponent($),$=$.replace(/%3A/i,":"),$+="@");var te=this.protocol||"",G=this.pathname||"",ie=this.hash||"",he=!1,pe="";this.host?he=$+this.host:this.hostname&&(he=$+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(he+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(pe=N.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Ee=this.search||pe&&"?"+pe||"";return te&&te.substr(-1)!==":"&&(te+=":"),this.slashes||(!te||j[te])&&he!==!1?(he="//"+(he||""),G&&G.charAt(0)!=="/"&&(G="/"+G)):he||(he=""),ie&&ie.charAt(0)!=="#"&&(ie="#"+ie),Ee&&Ee.charAt(0)!=="?"&&(Ee="?"+Ee),G=G.replace(/[?#]/g,function(me){return encodeURIComponent(me)}),Ee=Ee.replace("#","%23"),te+he+G+Ee+ie};function oe($,te){return q($,!1,!0).resolve(te)}e.prototype.resolve=function($){return this.resolveObject(q($,!1,!0)).format()};function ne($,te){return $?q($,!1,!0).resolveObject(te):te}return e.prototype.resolveObject=function($){if(typeof $=="string"){var te=new e;te.parse($,!1,!0),$=te}for(var G=new e,ie=Object.keys(this),he=0;he<ie.length;he++){var pe=ie[he];G[pe]=this[pe]}if(G.hash=$.hash,$.href==="")return G.href=G.format(),G;if($.slashes&&!$.protocol){for(var Ee=Object.keys($),me=0;me<Ee.length;me++){var Se=Ee[me];Se!=="protocol"&&(G[Se]=$[Se])}return j[G.protocol]&&G.hostname&&!G.pathname&&(G.pathname="/",G.path=G.pathname),G.href=G.format(),G}if($.protocol&&$.protocol!==G.protocol){if(!j[$.protocol]){for(var De=Object.keys($),be=0;be<De.length;be++){var at=De[be];G[at]=$[at]}return G.href=G.format(),G}if(G.protocol=$.protocol,!$.host&&!F[$.protocol]){for(var Yt=($.pathname||"").split("/");Yt.length&&!($.host=Yt.shift()););$.host||($.host=""),$.hostname||($.hostname=""),Yt[0]!==""&&Yt.unshift(""),Yt.length<2&&Yt.unshift(""),G.pathname=Yt.join("/")}else G.pathname=$.pathname;if(G.search=$.search,G.query=$.query,G.host=$.host||"",G.auth=$.auth,G.hostname=$.hostname||$.host,G.port=$.port,G.pathname||G.search){var Ze=G.pathname||"",Je=G.search||"";G.path=Ze+Je}return G.slashes=G.slashes||$.slashes,G.href=G.format(),G}var We=G.pathname&&G.pathname.charAt(0)==="/",Me=$.host||$.pathname&&$.pathname.charAt(0)==="/",Fe=Me||We||G.host&&$.pathname,He=Fe,bt=G.pathname&&G.pathname.split("/")||[],Yt=$.pathname&&$.pathname.split("/")||[],gt=G.protocol&&!j[G.protocol];if(gt&&(G.hostname="",G.port=null,G.host&&(bt[0]===""?bt[0]=G.host:bt.unshift(G.host)),G.host="",$.protocol&&($.hostname=null,$.port=null,$.host&&(Yt[0]===""?Yt[0]=$.host:Yt.unshift($.host)),$.host=null),Fe=Fe&&(Yt[0]===""||bt[0]==="")),Me)G.host=$.host||$.host===""?$.host:G.host,G.hostname=$.hostname||$.hostname===""?$.hostname:G.hostname,G.search=$.search,G.query=$.query,bt=Yt;else if(Yt.length)bt||(bt=[]),bt.pop(),bt=bt.concat(Yt),G.search=$.search,G.query=$.query;else if($.search!=null){if(gt){G.host=bt.shift(),G.hostname=G.host;var Lt=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Lt&&(G.auth=Lt.shift(),G.hostname=Lt.shift(),G.host=G.hostname)}return G.search=$.search,G.query=$.query,(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.href=G.format(),G}if(!bt.length)return G.pathname=null,G.search?G.path="/"+G.search:G.path=null,G.href=G.format(),G;for(var Kt=bt.slice(-1)[0],Ue=(G.host||$.host||bt.length>1)&&(Kt==="."||Kt==="..")||Kt==="",Pe=0,Be=bt.length;Be>=0;Be--)Kt=bt[Be],Kt==="."?bt.splice(Be,1):Kt===".."?(bt.splice(Be,1),Pe++):Pe&&(bt.splice(Be,1),Pe--);if(!Fe&&!He)for(;Pe--;Pe)bt.unshift("..");Fe&&bt[0]!==""&&(!bt[0]||bt[0].charAt(0)!=="/")&&bt.unshift(""),Ue&&bt.join("/").substr(-1)!=="/"&&bt.push("");var it=bt[0]===""||bt[0]&&bt[0].charAt(0)==="/";if(gt){G.hostname=it?"":bt.length?bt.shift():"",G.host=G.hostname;var Lt=G.host&&G.host.indexOf("@")>0?G.host.split("@"):!1;Lt&&(G.auth=Lt.shift(),G.hostname=Lt.shift(),G.host=G.hostname)}return Fe=Fe||G.host&&bt.length,Fe&&!it&&bt.unshift(""),bt.length>0?G.pathname=bt.join("/"):(G.pathname=null,G.path=null),(G.pathname!==null||G.search!==null)&&(G.path=(G.pathname?G.pathname:"")+(G.search?G.search:"")),G.auth=$.auth||G.auth,G.slashes=G.slashes||$.slashes,G.href=G.format(),G},e.prototype.parseHost=function(){var $=this.host,te=r.exec($);te&&(te=te[0],te!==":"&&(this.port=te.substr(1)),$=$.substr(0,$.length-te.length)),$&&(this.hostname=$)},wg.parse=q,wg.resolve=oe,wg.resolveObject=ne,wg.format=H,wg.Url=e,wg}var Kpe=Ppe();const QF=Al(Kpe);function Cs(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Cs=function(){return a},a}Cs();function FG(n,e,t){Cs().f[0]++,Cs().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(Cs().f[1]++,Cs().s[1]++,r.ok)Cs().b[0][1]++;else throw Cs().b[0][0]++,Cs().s[2]++,new Error("Failed to load metadata for "+n);return Cs().s[3]++,r.json()}).then(r=>{Cs().f[2]++,Cs().s[4]++,t(r)}).catch(()=>{Cs().f[3]++,Cs().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),Cs().s[6]++,t(e)})}function Dpe(n,e){if(Cs().f[4]++,Cs().s[7]++,n)Cs().b[1][1]++;else return Cs().b[1][0]++,Cs().s[8]++,e([]);const t=(Cs().s[9]++,QF.parse(n)),r=(Cs().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");Cs().s[11]++,t.pathname===r?(Cs().b[2][0]++,Cs().s[12]++,t.pathname="/fontstacks.json"):(Cs().b[2][1]++,Cs().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(Cs().s[14]++,QF.format(t));Cs().s[15]++,FG(i,[],e)}function Rpe(n,e){if(Cs().f[5]++,Cs().s[16]++,n)Cs().b[3][1]++;else return Cs().b[3][0]++,Cs().s[17]++,e([]);const t=(Cs().s[18]++,n+".json");Cs().s[19]++,FG(t,{},r=>(Cs().f[6]++,Cs().s[20]++,e(Object.keys(r))))}function JA(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="16cd8175e865a1f27680600ab24a4fbadf5fb4b2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cd8175e865a1f27680600ab24a4fbadf5fb4b2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return JA=function(){return a},a}JA();function Fpe(){JA().f[0]++;const n=(JA().s[0]++,new URL(window.location.href));return JA().s[1]++,n.searchParams.get("style")}function LG(n,e){JA().f[1]++,JA().s[2]++,console.log("Loading style",n),JA().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return JA().f[2]++,JA().s[4]++,t.json()}).then(function(t){JA().f[3]++,JA().s[5]++,e(Ec.ensureStyleValidity(t))}).catch(function(){JA().f[4]++,JA().s[6]++,console.warn("Could not fetch default style",n),JA().s[7]++,e(Ec.emptyStyle)})}function qF(){JA().f[5]++;const n=(JA().s[8]++,new URL(window.location.href));JA().s[9]++,n.searchParams.delete("style"),JA().s[10]++,window.history.replaceState({},document.title,n.toString())}function qd(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return qd=function(){return a},a}qd();function UG(n,e){qd().f[0]++;const t=(qd().s[0]++,U$(n,e));return qd().s[1]++,t.map(r=>(qd().f[1]++,qd().s[2]++,r.command+" "+r.args.join(" ")))}function Lpe(n,e){return qd().f[2]++,qd().s[3]++,UG(n,e).map(t=>(qd().f[3]++,qd().s[4]++,"Undo "+t))}function Upe(n,e){return qd().f[4]++,qd().s[5]++,UG(n,e).map(t=>(qd().f[5]++,qd().s[6]++,"Redo "+t))}function pi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return pi=function(){return a},a}pi();const i_=(pi().s[0]++,"maputnik"),zG=(pi().s[1]++,"style"),YF=(pi().s[2]++,{latest:[i_,"latest_style"].join(":"),accessToken:[i_,"access_token"].join(":")}),zpe=(pi().s[3]++,EG[0].url);function $F(n){pi().f[0]++,pi().s[4]++,LG(zpe,n)}function jpe(){pi().f[1]++;const n=(pi().s[5]++,[]);pi().s[6]++;for(let e=(pi().s[7]++,0);e<window.localStorage.length;e++){const t=(pi().s[8]++,window.localStorage.key(e));pi().s[9]++,jG(t)?(pi().b[0][0]++,pi().s[10]++,n.push(Npe(t))):pi().b[0][1]++}return pi().s[11]++,n}function jG(n){pi().f[2]++;const e=(pi().s[12]++,n.split(":"));return pi().s[13]++,pi().b[1][0]++,e.length===3&&(pi().b[1][1]++,e[0]===i_)&&(pi().b[1][2]++,e[1]===zG)}function Npe(n){if(pi().f[3]++,pi().s[14]++,jG(n))pi().b[2][1]++;else throw pi().b[2][0]++,pi().s[15]++,"Key is not a valid style key";const e=(pi().s[16]++,n.split(":")),t=(pi().s[17]++,e[2]);return pi().s[18]++,t}function VF(n){return pi().f[4]++,pi().s[19]++,[i_,zG,n].join(":")}class HF{constructor(){Pn(this,"mapStyles");pi().f[5]++,pi().s[20]++,this.mapStyles=jpe()}init(e){pi().f[6]++,pi().s[21]++,e(null)}purge(){pi().f[7]++,pi().s[22]++;for(let e=(pi().s[23]++,0);e<window.localStorage.length;e++){const t=(pi().s[24]++,window.localStorage.key(e));pi().s[25]++,t.startsWith(i_)?(pi().b[3][0]++,pi().s[26]++,window.localStorage.removeItem(t)):pi().b[3][1]++}}latestStyle(e){if(pi().f[8]++,pi().s[27]++,this.mapStyles.length===0)return pi().b[4][0]++,pi().s[28]++,$F(e);pi().b[4][1]++;const t=(pi().s[29]++,window.localStorage.getItem(YF.latest)),r=(pi().s[30]++,window.localStorage.getItem(VF(t)));if(pi().s[31]++,r)return pi().b[5][0]++,pi().s[32]++,e(JSON.parse(r));pi().b[5][1]++,pi().s[33]++,$F(e)}save(e){pi().f[9]++,pi().s[34]++,e=Ec.ensureStyleValidity(e);const t=(pi().s[35]++,VF(e.id));return pi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),pi().s[37]++,window.localStorage.setItem(YF.latest,e.id),pi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var NB=function(n,e){return NB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},NB(n,e)};function NG(n,e){NB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Wpe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function Gpe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function Qpe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Gpe(arguments[e]));return n}var WG=function(){function n(e,t){this.target=t,this.type=e}return n}(),qpe=function(n){NG(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(WG),Ype=function(n){NG(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(WG);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var $pe=function(){if(typeof WebSocket<"u")return WebSocket},Vpe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},Mg={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Hpe=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var a=i._options.minUptime,o=a===void 0?Mg.minUptime:a;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(f){return i._ws.send(f)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(f){return i._callEventListener(s,f)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(a){return i._callEventListener(s,a)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(a){return i._callEventListener(s,a)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(a){return i._callEventListener(s,a)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?Mg.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=Wpe(i),a=s.next();!a.done;a=s.next()){var o=a.value;this._callEventListener(e,o)}}catch(f){t={error:f}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Qpe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?Mg.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?Mg.minReconnectionDelay:i,a=e.maxReconnectionDelay,o=a===void 0?Mg.maxReconnectionDelay:a,f=0;return this._retryCount>0&&(f=s*Math.pow(r,this._retryCount-1),f>o&&(f=o)),this._debug("next delay",f),f},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?Mg.maxRetries:r,s=t.connectionTimeout,a=s===void 0?Mg.connectionTimeout:s,o=t.WebSocket,f=o===void 0?$pe():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!Vpe(f))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(y){e._closeCalled||(e._debug("connect",{url:y,protocols:e._protocols}),e._ws=e._protocols?new f(y,e._protocols):new f(y),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},a))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new qpe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Ype(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function yi(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return yi=function(){return a},a}yi();class Zpe{constructor(e){Pn(this,"localUrl");Pn(this,"websocketUrl");Pn(this,"latestStyleId",(yi().s[0]++,void 0));Pn(this,"onLocalStyleChange");yi().f[0]++,yi().s[1]++,this.onLocalStyleChange=(yi().b[0][0]++,e.onLocalStyleChange||(yi().b[0][1]++,()=>{yi().f[1]++}));const t=(yi().s[2]++,yi().b[1][0]++,e.port||(yi().b[1][1]++,"8000")),r=(yi().s[3]++,yi().b[2][0]++,e.host||(yi().b[2][1]++,"localhost"));yi().s[4]++,this.localUrl=`http://${r}:${t}`,yi().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,yi().s[6]++,this.init=this.init.bind(this)}init(e){yi().f[2]++,yi().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(yi().f[3]++,yi().s[8]++,t.json())).then(t=>{yi().f[4]++;const r=(yi().s[9]++,t);yi().s[10]++,this.latestStyleId=r[0],yi().s[11]++,this.notifyLocalChanges(),yi().s[12]++,e(null)}).catch(()=>{yi().f[5]++,yi().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){yi().f[6]++;const e=(yi().s[14]++,new Hpe(this.websocketUrl));yi().s[15]++,e.onmessage=t=>{if(yi().f[7]++,yi().s[16]++,t.data)yi().b[3][1]++;else{yi().b[3][0]++,yi().s[17]++;return}yi().s[18]++,console.log("Received style update from API");let r=(yi().s[19]++,Ec.emptyStyle);yi().s[20]++;try{yi().s[21]++,r=JSON.parse(t.data)}catch(s){yi().s[22]++,console.error(s)}const i=(yi().s[23]++,Ec.ensureStyleValidity(r));yi().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(yi().f[8]++,yi().s[25]++,this.latestStyleId)yi().b[4][0]++,yi().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return yi().f[9]++,yi().s[27]++,t.json()}).then(function(t){yi().f[10]++,yi().s[28]++,e(Ec.ensureStyleValidity(t))});else throw yi().b[4][1]++,yi().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){yi().f[11]++;const t=(yi().s[30]++,jU(Ec.stripAccessTokens(Ec.replaceAccessTokens(e)))),r=(yi().s[31]++,e.id);return yi().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){yi().f[12]++,yi().s[33]++,i?(yi().b[5][0]++,yi().s[34]++,console.error(i)):yi().b[5][1]++}),yi().s[35]++,e}}function _l(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _l=function(){return a},a}_l();class Xpe{constructor(e=(_l().b[0][0]++,[])){Pn(this,"revisions");Pn(this,"currentIdx");_l().f[0]++,_l().s[0]++,this.revisions=e,_l().s[1]++,this.currentIdx=e.length-1}get latest(){return _l().f[1]++,_l().s[2]++,this.revisions[this.revisions.length-1]}get current(){return _l().f[2]++,_l().s[3]++,this.revisions[this.currentIdx]}addRevision(e){_l().f[3]++,_l().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),_l().s[5]++,this.revisions.push(e),_l().s[6]++,this.currentIdx++}undo(){return _l().f[4]++,_l().s[7]++,this.currentIdx>0?(_l().b[1][0]++,_l().s[8]++,this.currentIdx--):_l().b[1][1]++,_l().s[9]++,this.current}redo(){return _l().f[5]++,_l().s[10]++,this.currentIdx<this.revisions.length-1?(_l().b[2][0]++,_l().s[11]++,this.currentIdx++):_l().b[2][1]++,_l().s[12]++,this.current}}var y6,ZF;function Jpe(){if(ZF)return y6;ZF=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,f=typeof window=="object"&&window&&window.Object===Object&&window,y=typeof self=="object"&&self&&self.Object===Object&&self,x=f||y||Function("return this")(),B=Object.prototype,O=B.toString,T=Math.max,F=Math.min,j=function(){return x.Date.now()};function N(te,G,ie){var he,pe,Ee,me,Se,De,be=0,at=!1,Ze=!1,Je=!0;if(typeof te!="function")throw new TypeError(n);G=$(G)||0,H(ie)&&(at=!!ie.leading,Ze="maxWait"in ie,Ee=Ze?T($(ie.maxWait)||0,G):Ee,Je="trailing"in ie?!!ie.trailing:Je);function We(Ue){var Pe=he,Be=pe;return he=pe=void 0,be=Ue,me=te.apply(Be,Pe),me}function Me(Ue){return be=Ue,Se=setTimeout(bt,G),at?We(Ue):me}function Fe(Ue){var Pe=Ue-De,Be=Ue-be,it=G-Pe;return Ze?F(it,Ee-Be):it}function He(Ue){var Pe=Ue-De,Be=Ue-be;return De===void 0||Pe>=G||Pe<0||Ze&&Be>=Ee}function bt(){var Ue=j();if(He(Ue))return Yt(Ue);Se=setTimeout(bt,Fe(Ue))}function Yt(Ue){return Se=void 0,Je&&he?We(Ue):(he=pe=void 0,me)}function gt(){Se!==void 0&&clearTimeout(Se),be=0,he=De=pe=Se=void 0}function Lt(){return Se===void 0?me:Yt(j())}function Kt(){var Ue=j(),Pe=He(Ue);if(he=arguments,pe=this,De=Ue,Pe){if(Se===void 0)return Me(De);if(Ze)return Se=setTimeout(bt,G),We(De)}return Se===void 0&&(Se=setTimeout(bt,G)),me}return Kt.cancel=gt,Kt.flush=Lt,Kt}function q(te,G,ie){var he=!0,pe=!0;if(typeof te!="function")throw new TypeError(n);return H(ie)&&(he="leading"in ie?!!ie.leading:he,pe="trailing"in ie?!!ie.trailing:pe),N(te,G,{leading:he,maxWait:G,trailing:pe})}function H(te){var G=typeof te;return!!te&&(G=="object"||G=="function")}function oe(te){return!!te&&typeof te=="object"}function ne(te){return typeof te=="symbol"||oe(te)&&O.call(te)==t}function $(te){if(typeof te=="number")return te;if(ne(te))return e;if(H(te)){var G=typeof te.valueOf=="function"?te.valueOf():te;te=H(G)?G+"":G}if(typeof te!="string")return te===0?te:+te;te=te.replace(r,"");var ie=s.test(te);return ie||a.test(te)?o(te.slice(2),ie?2:8):i.test(te)?e:+te}return y6=q,y6}var eme=Jpe();const tme=Al(eme);var lC={exports:{}};lC.exports;var XF;function nme(){return XF||(XF=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",f="[object Array]",y="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",O="[object Error]",T="[object Function]",F="[object GeneratorFunction]",j="[object Map]",N="[object Number]",q="[object Null]",H="[object Object]",oe="[object Promise]",ne="[object Proxy]",$="[object RegExp]",te="[object Set]",G="[object String]",ie="[object Symbol]",he="[object Undefined]",pe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Se="[object Float32Array]",De="[object Float64Array]",be="[object Int8Array]",at="[object Int16Array]",Ze="[object Int32Array]",Je="[object Uint8Array]",We="[object Uint8ClampedArray]",Me="[object Uint16Array]",Fe="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,bt=/^\[object .+?Constructor\]$/,Yt=/^(?:0|[1-9]\d*)$/,gt={};gt[Se]=gt[De]=gt[be]=gt[at]=gt[Ze]=gt[Je]=gt[We]=gt[Me]=gt[Fe]=!0,gt[o]=gt[f]=gt[Ee]=gt[x]=gt[me]=gt[B]=gt[O]=gt[T]=gt[j]=gt[N]=gt[H]=gt[$]=gt[te]=gt[G]=gt[pe]=!1;var Lt=typeof window=="object"&&window&&window.Object===Object&&window,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Ue=Lt||Kt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,_t=it&&Lt.process,ft=function(){try{return _t&&_t.binding&&_t.binding("util")}catch{}}(),Ut=ft&&ft.isTypedArray;function rn(J,Ie){for(var st=-1,$t=J==null?0:J.length,Kr=0,$n=[];++st<$t;){var ti=J[st];Ie(ti,st,J)&&($n[Kr++]=ti)}return $n}function Dt(J,Ie){for(var st=-1,$t=Ie.length,Kr=J.length;++st<$t;)J[Kr+st]=Ie[st];return J}function _n(J,Ie){for(var st=-1,$t=J==null?0:J.length;++st<$t;)if(Ie(J[st],st,J))return!0;return!1}function qn(J,Ie){for(var st=-1,$t=Array(J);++st<J;)$t[st]=Ie(st);return $t}function tn(J){return function(Ie){return J(Ie)}}function rr(J,Ie){return J.has(Ie)}function Dn(J,Ie){return J==null?void 0:J[Ie]}function pn(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t,Kr){st[++Ie]=[Kr,$t]}),st}function Zn(J,Ie){return function(st){return J(Ie(st))}}function dr(J){var Ie=-1,st=Array(J.size);return J.forEach(function($t){st[++Ie]=$t}),st}var vr=Array.prototype,Jn=Function.prototype,Qe=Object.prototype,ce=Ue["__core-js_shared__"],fe=Jn.toString,nt=Qe.hasOwnProperty,St=function(){var J=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return J?"Symbol(src)_1."+J:""}(),Ht=Qe.toString,sn=RegExp("^"+fe.call(nt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=it?Ue.Buffer:void 0,Oe=Ue.Symbol,se=Ue.Uint8Array,ve=Qe.propertyIsEnumerable,p=vr.splice,Ne=Oe?Oe.toStringTag:void 0,Ye=Object.getOwnPropertySymbols,rt=tr?tr.isBuffer:void 0,ct=Zn(Object.keys,Object),dt=$i(Ue,"DataView"),qt=$i(Ue,"Map"),Gt=$i(Ue,"Promise"),jt=$i(Ue,"Set"),xt=$i(Ue,"WeakMap"),Tn=$i(Object,"create"),On=Oo(dt),gr=Oo(qt),Er=Oo(Gt),on=Oo(jt),Rn=Oo(xt),er=Oe?Oe.prototype:void 0,Xr=er?er.valueOf:void 0;function Ur(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function Dr(){this.__data__=Tn?Tn(null):{},this.size=0}function ur(J){var Ie=this.has(J)&&delete this.__data__[J];return this.size-=Ie?1:0,Ie}function go(J){var Ie=this.__data__;if(Tn){var st=Ie[J];return st===r?void 0:st}return nt.call(Ie,J)?Ie[J]:void 0}function Sa(J){var Ie=this.__data__;return Tn?Ie[J]!==void 0:nt.call(Ie,J)}function Yi(J,Ie){var st=this.__data__;return this.size+=this.has(J)?0:1,st[J]=Tn&&Ie===void 0?r:Ie,this}Ur.prototype.clear=Dr,Ur.prototype.delete=ur,Ur.prototype.get=go,Ur.prototype.has=Sa,Ur.prototype.set=Yi;function Ci(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function oo(){this.__data__=[],this.size=0}function Ro(J){var Ie=this.__data__,st=or(Ie,J);if(st<0)return!1;var $t=Ie.length-1;return st==$t?Ie.pop():p.call(Ie,st,1),--this.size,!0}function Pi(J){var Ie=this.__data__,st=or(Ie,J);return st<0?void 0:Ie[st][1]}function Na(J){return or(this.__data__,J)>-1}function Ea(J,Ie){var st=this.__data__,$t=or(st,J);return $t<0?(++this.size,st.push([J,Ie])):st[$t][1]=Ie,this}Ci.prototype.clear=oo,Ci.prototype.delete=Ro,Ci.prototype.get=Pi,Ci.prototype.has=Na,Ci.prototype.set=Ea;function rs(J){var Ie=-1,st=J==null?0:J.length;for(this.clear();++Ie<st;){var $t=J[Ie];this.set($t[0],$t[1])}}function aa(){this.size=0,this.__data__={hash:new Ur,map:new(qt||Ci),string:new Ur}}function cl(J){var Ie=Rr(this,J).delete(J);return this.size-=Ie?1:0,Ie}function Ao(J){return Rr(this,J).get(J)}function Uu(J){return Rr(this,J).has(J)}function Zl(J,Ie){var st=Rr(this,J),$t=st.size;return st.set(J,Ie),this.size+=st.size==$t?0:1,this}rs.prototype.clear=aa,rs.prototype.delete=cl,rs.prototype.get=Ao,rs.prototype.has=Uu,rs.prototype.set=Zl;function so(J){var Ie=-1,st=J==null?0:J.length;for(this.__data__=new rs;++Ie<st;)this.add(J[Ie])}function Tr(J){return this.__data__.set(J,r),this}function tl(J){return this.__data__.has(J)}so.prototype.add=so.prototype.push=Tr,so.prototype.has=tl;function Os(J){var Ie=this.__data__=new Ci(J);this.size=Ie.size}function ea(){this.__data__=new Ci,this.size=0}function qe(J){var Ie=this.__data__,st=Ie.delete(J);return this.size=Ie.size,st}function wt(J){return this.__data__.get(J)}function vn(J){return this.__data__.has(J)}function Yn(J,Ie){var st=this.__data__;if(st instanceof Ci){var $t=st.__data__;if(!qt||$t.length<t-1)return $t.push([J,Ie]),this.size=++st.size,this;st=this.__data__=new rs($t)}return st.set(J,Ie),this.size=st.size,this}Os.prototype.clear=ea,Os.prototype.delete=qe,Os.prototype.get=wt,Os.prototype.has=vn,Os.prototype.set=Yn;function hn(J,Ie){var st=Ss(J),$t=!st&&Oa(J),Kr=!st&&!$t&&ta(J),$n=!st&&!$t&&!Kr&&Jl(J),ti=st||$t||Kr||$n,ci=ti?qn(J.length,String):[],Br=ci.length;for(var xr in J)nt.call(J,xr)&&!(ti&&(xr=="length"||Kr&&(xr=="offset"||xr=="parent")||$n&&(xr=="buffer"||xr=="byteLength"||xr=="byteOffset")||Gs(xr,Br)))&&ci.push(xr);return ci}function or(J,Ie){for(var st=J.length;st--;)if(Zo(J[st][0],Ie))return st;return-1}function Ki(J,Ie,st){var $t=Ie(J);return Ss(J)?$t:Dt($t,st(J))}function yo(J){return J==null?J===void 0?he:q:Ne&&Ne in Object(J)?vo(J):co(J)}function _s(J){return Yr(J)&&yo(J)==o}function Fs(J,Ie,st,$t,Kr){return J===Ie?!0:J==null||Ie==null||!Yr(J)&&!Yr(Ie)?J!==J&&Ie!==Ie:OA(J,Ie,st,$t,Fs,Kr)}function OA(J,Ie,st,$t,Kr,$n){var ti=Ss(J),ci=Ss(Ie),Br=ti?f:Mo(J),xr=ci?f:Mo(Ie);Br=Br==o?H:Br,xr=xr==o?H:xr;var ji=Br==H,Xi=xr==H,Ei=Br==xr;if(Ei&&ta(J)){if(!ta(Ie))return!1;ti=!0,ji=!1}if(Ei&&!ji)return $n||($n=new Os),ti||Jl(J)?Ai(J,Ie,st,$t,Kr,$n):la(J,Ie,Br,st,$t,Kr,$n);if(!(st&i)){var Wr=ji&&nt.call(J,"__wrapped__"),So=Xi&&nt.call(Ie,"__wrapped__");if(Wr||So){var Ri=Wr?J.value():J,ds=So?Ie.value():Ie;return $n||($n=new Os),Kr(Ri,ds,st,$t,$n)}}return Ei?($n||($n=new Os),rc(J,Ie,st,$t,Kr,$n)):!1}function ei(J){if(!zi(J)||zu(J))return!1;var Ie=ho(J)?sn:bt;return Ie.test(Oo(J))}function Mi(J){return Yr(J)&&Xl(J.length)&&!!gt[yo(J)]}function nl(J){if(!bl(J))return ct(J);var Ie=[];for(var st in Object(J))nt.call(J,st)&&st!="constructor"&&Ie.push(st);return Ie}function Ai(J,Ie,st,$t,Kr,$n){var ti=st&i,ci=J.length,Br=Ie.length;if(ci!=Br&&!(ti&&Br>ci))return!1;var xr=$n.get(J);if(xr&&$n.get(Ie))return xr==Ie;var ji=-1,Xi=!0,Ei=st&s?new so:void 0;for($n.set(J,Ie),$n.set(Ie,J);++ji<ci;){var Wr=J[ji],So=Ie[ji];if($t)var Ri=ti?$t(So,Wr,ji,Ie,J,$n):$t(Wr,So,ji,J,Ie,$n);if(Ri!==void 0){if(Ri)continue;Xi=!1;break}if(Ei){if(!_n(Ie,function(ds,ma){if(!rr(Ei,ma)&&(Wr===ds||Kr(Wr,ds,st,$t,$n)))return Ei.push(ma)})){Xi=!1;break}}else if(!(Wr===So||Kr(Wr,So,st,$t,$n))){Xi=!1;break}}return $n.delete(J),$n.delete(Ie),Xi}function la(J,Ie,st,$t,Kr,$n,ti){switch(st){case me:if(J.byteLength!=Ie.byteLength||J.byteOffset!=Ie.byteOffset)return!1;J=J.buffer,Ie=Ie.buffer;case Ee:return!(J.byteLength!=Ie.byteLength||!$n(new se(J),new se(Ie)));case x:case B:case N:return Zo(+J,+Ie);case O:return J.name==Ie.name&&J.message==Ie.message;case $:case G:return J==Ie+"";case j:var ci=pn;case te:var Br=$t&i;if(ci||(ci=dr),J.size!=Ie.size&&!Br)return!1;var xr=ti.get(J);if(xr)return xr==Ie;$t|=s,ti.set(J,Ie);var ji=Ai(ci(J),ci(Ie),$t,Kr,$n,ti);return ti.delete(J),ji;case ie:if(Xr)return Xr.call(J)==Xr.call(Ie)}return!1}function rc(J,Ie,st,$t,Kr,$n){var ti=st&i,ci=Ba(J),Br=ci.length,xr=Ba(Ie),ji=xr.length;if(Br!=ji&&!ti)return!1;for(var Xi=Br;Xi--;){var Ei=ci[Xi];if(!(ti?Ei in Ie:nt.call(Ie,Ei)))return!1}var Wr=$n.get(J);if(Wr&&$n.get(Ie))return Wr==Ie;var So=!0;$n.set(J,Ie),$n.set(Ie,J);for(var Ri=ti;++Xi<Br;){Ei=ci[Xi];var ds=J[Ei],ma=Ie[Ei];if($t)var Wa=ti?$t(ma,ds,Ei,Ie,J,$n):$t(ds,ma,Ei,J,Ie,$n);if(!(Wa===void 0?ds===ma||Kr(ds,ma,st,$t,$n):Wa)){So=!1;break}Ri||(Ri=Ei=="constructor")}if(So&&!Ri){var vu=J.constructor,qs=Ie.constructor;vu!=qs&&"constructor"in J&&"constructor"in Ie&&!(typeof vu=="function"&&vu instanceof vu&&typeof qs=="function"&&qs instanceof qs)&&(So=!1)}return $n.delete(J),$n.delete(Ie),So}function Ba(J){return Ki(J,Vi,yu)}function Rr(J,Ie){var st=J.__data__;return Qs(Ie)?st[typeof Ie=="string"?"string":"hash"]:st.map}function $i(J,Ie){var st=Dn(J,Ie);return ei(st)?st:void 0}function vo(J){var Ie=nt.call(J,Ne),st=J[Ne];try{J[Ne]=void 0;var $t=!0}catch{}var Kr=Ht.call(J);return $t&&(Ie?J[Ne]=st:delete J[Ne]),Kr}var yu=Ye?function(J){return J==null?[]:(J=Object(J),rn(Ye(J),function(Ie){return ve.call(J,Ie)}))}:ao,Mo=yo;(dt&&Mo(new dt(new ArrayBuffer(1)))!=me||qt&&Mo(new qt)!=j||Gt&&Mo(Gt.resolve())!=oe||jt&&Mo(new jt)!=te||xt&&Mo(new xt)!=pe)&&(Mo=function(J){var Ie=yo(J),st=Ie==H?J.constructor:void 0,$t=st?Oo(st):"";if($t)switch($t){case On:return me;case gr:return j;case Er:return oe;case on:return te;case Rn:return pe}return Ie});function Gs(J,Ie){return Ie=Ie??a,!!Ie&&(typeof J=="number"||Yt.test(J))&&J>-1&&J%1==0&&J<Ie}function Qs(J){var Ie=typeof J;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?J!=="__proto__":J===null}function zu(J){return!!St&&St in J}function bl(J){var Ie=J&&J.constructor,st=typeof Ie=="function"&&Ie.prototype||Qe;return J===st}function co(J){return Ht.call(J)}function Oo(J){if(J!=null){try{return fe.call(J)}catch{}try{return J+""}catch{}}return""}function Zo(J,Ie){return J===Ie||J!==J&&Ie!==Ie}var Oa=_s(function(){return arguments}())?_s:function(J){return Yr(J)&&nt.call(J,"callee")&&!ve.call(J,"callee")},Ss=Array.isArray;function Ia(J){return J!=null&&Xl(J.length)&&!ho(J)}var ta=rt||Di;function IA(J,Ie){return Fs(J,Ie)}function ho(J){if(!zi(J))return!1;var Ie=yo(J);return Ie==T||Ie==F||Ie==y||Ie==ne}function Xl(J){return typeof J=="number"&&J>-1&&J%1==0&&J<=a}function zi(J){var Ie=typeof J;return J!=null&&(Ie=="object"||Ie=="function")}function Yr(J){return J!=null&&typeof J=="object"}var Jl=Ut?tn(Ut):Mi;function Vi(J){return Ia(J)?hn(J):nl(J)}function ao(){return[]}function Di(){return!1}n.exports=IA}(lC,lC.exports)),lC.exports}var rme=nme();const WB=Al(rme);function Li(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Li=function(){return a},a}Li();class ime{constructor(e=(Li().b[0][0]++,{})){Pn(this,"onSourcesChange");Pn(this,"onVectorLayersChange");Pn(this,"throttledAnalyzeVectorLayerFields");Pn(this,"_sources");Pn(this,"_vectorLayers");Li().f[0]++,Li().s[0]++,this.onSourcesChange=(Li().b[1][0]++,e.onSourcesChange||(Li().b[1][1]++,()=>{Li().f[1]++})),Li().s[1]++,this.onVectorLayersChange=(Li().b[2][0]++,e.onVectorLayersChange||(Li().b[2][1]++,()=>{Li().f[2]++})),Li().s[2]++,this._sources={},Li().s[3]++,this._vectorLayers={},Li().s[4]++,this.throttledAnalyzeVectorLayerFields=tme(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Li().f[3]++;const t=(Li().s[5]++,{...this._sources});Li().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Li().f[4]++,Li().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Li().s[8]++,WB(t,this._sources)?Li().b[3][1]++:(Li().b[3][0]++,Li().s[9]++,this.onSourcesChange(this._sources)),Li().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Li().f[5]++;const t=(Li().s[11]++,{...this._vectorLayers});Li().s[12]++,Object.keys(this._sources).forEach(r=>{Li().f[6]++,Li().s[13]++,(Li().b[4][0]++,this._sources[r]||(Li().b[4][1]++,[])).forEach(i=>{Li().f[7]++;const s=(Li().s[14]++,Li().b[5][0]++,this._vectorLayers[i]||(Li().b[5][1]++,{})),a=(Li().s[15]++,{sourceLayer:i});Li().s[16]++,e.querySourceFeatures(r,a).forEach(o=>{Li().f[8]++,Li().s[17]++,Object.keys(o.properties).forEach(f=>{Li().f[9]++;const y=(Li().s[18]++,Li().b[6][0]++,s[f]||(Li().b[6][1]++,{}));Li().s[19]++,y[o.properties[f]]={},Li().s[20]++,s[f]=y})}),Li().s[21]++,this._vectorLayers[i]=s})}),Li().s[22]++,WB(t,this._vectorLayers)?Li().b[7][1]++:(Li().b[7][0]++,Li().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Li().f[10]++,Li().s[24]++,this._sources}get vectorLayers(){return Li().f[11]++,Li().s[25]++,this._vectorLayers}}function Xs(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Xs=function(){return a},a}Xs();const wC=(Xs().s[0]++,{});function b7(){Xs().f[0]++;const n=(Xs().s[1]++,new URL(window.location.href).searchParams),e=(Xs().s[2]++,n.get("debug"));return Xs().s[3]++,e?(Xs().b[0][0]++,Xs().s[4]++,!!e.match(/^(|1|true)$/)):(Xs().b[0][1]++,Xs().s[5]++,!1)}function GG(){return Xs().f[1]++,Xs().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function ome(n,e,t){if(Xs().f[2]++,Xs().s[7]++,b7())Xs().b[1][1]++;else throw Xs().b[1][0]++,Xs().s[8]++,GG();Xs().s[9]++,wC[n]=(Xs().b[2][0]++,wC[n]||(Xs().b[2][1]++,{})),Xs().s[10]++,wC[n][e]=t}function sme(n,e){if(Xs().f[3]++,Xs().s[11]++,b7())Xs().b[3][1]++;else throw Xs().b[3][0]++,Xs().s[12]++,GG();if(Xs().s[13]++,Object.prototype.hasOwnProperty.call(wC,n))return Xs().b[4][0]++,Xs().s[14]++,wC[n][e];Xs().b[4][1]++}const Bg=(Xs().s[15]++,{enabled:b7,get:sme,set:ome});Xs().s[16]++;window.debug=Bg;function we(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="bafcb93873c2a71cab2bdafeb2ce6a3195766cd8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:37,column:0},end:{line:37,column:30}},1:{start:{line:39,column:29},end:{line:39,column:60}},2:{start:{line:40,column:26},end:{line:40,column:54}},3:{start:{line:41,column:31},end:{line:41,column:64}},4:{start:{line:42,column:2},end:{line:54,column:3}},5:{start:{line:43,column:24},end:{line:43,column:95}},6:{start:{line:44,column:4},end:{line:46,column:5}},7:{start:{line:45,column:6},end:{line:45,column:47}},8:{start:{line:47,column:9},end:{line:54,column:3}},9:{start:{line:48,column:24},end:{line:48,column:96}},10:{start:{line:49,column:4},end:{line:51,column:5}},11:{start:{line:50,column:6},end:{line:50,column:47}},12:{start:{line:53,column:4},end:{line:53,column:15}},13:{start:{line:57,column:2},end:{line:66,column:4}},14:{start:{line:73,column:4},end:{line:73,column:17}},15:{start:{line:74,column:4},end:{line:74,column:19}},16:{start:{line:75,column:4},end:{line:75,column:45}},17:{start:{line:76,column:19},end:{line:76,column:75}},18:{start:{line:77,column:15},end:{line:77,column:38}},19:{start:{line:78,column:4},end:{line:80,column:5}},20:{start:{line:79,column:6},end:{line:79,column:34}},21:{start:{line:81,column:4},end:{line:85,column:7}},22:{start:{line:82,column:40},end:{line:82,column:86}},23:{start:{line:86,column:22},end:{line:137,column:5}},24:{start:{line:90,column:10},end:{line:90,column:40}},25:{start:{line:96,column:10},end:{line:96,column:35}},26:{start:{line:102,column:10},end:{line:102,column:37}},27:{start:{line:108,column:10},end:{line:108,column:38}},28:{start:{line:114,column:10},end:{line:114,column:39}},29:{start:{line:120,column:10},end:{line:122,column:12}},30:{start:{line:128,column:10},end:{line:128,column:63}},31:{start:{line:134,column:10},end:{line:134,column:36}},32:{start:{line:138,column:4},end:{line:151,column:7}},33:{start:{line:139,column:6},end:{line:150,column:7}},34:{start:{line:140,column:8},end:{line:140,column:24}},35:{start:{line:141,column:8},end:{line:141,column:30}},36:{start:{line:142,column:13},end:{line:150,column:7}},37:{start:{line:143,column:25},end:{line:145,column:10}},38:{start:{line:144,column:10},end:{line:144,column:41}},39:{start:{line:146,column:8},end:{line:149,column:9}},40:{start:{line:147,column:10},end:{line:147,column:44}},41:{start:{line:148,column:10},end:{line:148,column:29}},42:{start:{line:152,column:21},end:{line:152,column:38}},43:{start:{line:153,column:4},end:{line:172,column:5}},44:{start:{line:154,column:6},end:{line:154,column:41}},45:{start:{line:155,column:6},end:{line:155,column:74}},46:{start:{line:155,column:43},end:{line:155,column:72}},47:{start:{line:156,column:6},end:{line:156,column:31}},48:{start:{line:158,column:6},end:{line:160,column:7}},49:{start:{line:159,column:8},end:{line:159,column:33}},50:{start:{line:161,column:6},end:{line:171,column:9}},51:{start:{line:162,column:8},end:{line:165,column:9}},52:{start:{line:163,column:10},end:{line:163,column:74}},53:{start:{line:164,column:10},end:{line:164,column:45}},54:{start:{line:166,column:8},end:{line:166,column:104}},55:{start:{line:166,column:50},end:{line:166,column:102}},56:{start:{line:167,column:8},end:{line:170,column:9}},57:{start:{line:168,column:10},end:{line:168,column:63}},58:{start:{line:169,column:10},end:{line:169,column:69}},59:{start:{line:173,column:4},end:{line:176,column:5}},60:{start:{line:174,column:6},end:{line:174,column:65}},61:{start:{line:175,column:6},end:{line:175,column:59}},62:{start:{line:177,column:4},end:{line:211,column:6}},63:{start:{line:212,column:4},end:{line:214,column:7}},64:{start:{line:213,column:35},end:{line:213,column:69}},65:{start:{line:216,column:19},end:{line:234,column:3}},66:{start:{line:217,column:4},end:{line:233,column:5}},67:{start:{line:218,column:6},end:{line:224,column:7}},68:{start:{line:219,column:8},end:{line:219,column:27}},69:{start:{line:220,column:8},end:{line:220,column:22}},70:{start:{line:221,column:13},end:{line:224,column:7}},71:{start:{line:222,column:8},end:{line:222,column:27}},72:{start:{line:223,column:8},end:{line:223,column:22}},73:{start:{line:226,column:6},end:{line:232,column:7}},74:{start:{line:227,column:8},end:{line:227,column:27}},75:{start:{line:228,column:8},end:{line:228,column:22}},76:{start:{line:229,column:13},end:{line:232,column:7}},77:{start:{line:230,column:8},end:{line:230,column:27}},78:{start:{line:231,column:8},end:{line:231,column:22}},79:{start:{line:236,column:4},end:{line:236,column:60}},80:{start:{line:239,column:4},end:{line:239,column:63}},81:{start:{line:242,column:4},end:{line:242,column:40}},82:{start:{line:245,column:21},end:{line:245,column:55}},83:{start:{line:246,column:24},end:{line:246,column:93}},84:{start:{line:247,column:21},end:{line:247,column:110}},85:{start:{line:248,column:4},end:{line:250,column:7}},86:{start:{line:249,column:6},end:{line:249,column:80}},87:{start:{line:253,column:4},end:{line:255,column:7}},88:{start:{line:254,column:6},end:{line:254,column:80}},89:{start:{line:257,column:29},end:{line:271,column:3}},90:{start:{line:258,column:4},end:{line:262,column:5}},91:{start:{line:259,column:6},end:{line:261,column:9}},92:{start:{line:263,column:25},end:{line:269,column:5}},93:{start:{line:270,column:4},end:{line:270,column:38}},94:{start:{line:272,column:19},end:{line:395,column:3}},95:{start:{line:273,column:4},end:{line:278,column:6}},96:{start:{line:279,column:4},end:{line:281,column:5}},97:{start:{line:280,column:6},end:{line:280,column:71}},98:{start:{line:282,column:4},end:{line:284,column:5}},99:{start:{line:283,column:6},end:{line:283,column:71}},100:{start:{line:285,column:4},end:{line:289,column:5}},101:{start:{line:286,column:6},end:{line:288,column:7}},102:{start:{line:287,column:8},end:{line:287,column:63}},103:{start:{line:290,column:4},end:{line:292,column:5}},104:{start:{line:291,column:6},end:{line:291,column:44}},105:{start:{line:293,column:19},end:{line:293,column:51}},106:{start:{line:294,column:24},end:{line:294,column:26}},107:{start:{line:295,column:4},end:{line:306,column:5}},108:{start:{line:296,column:26},end:{line:296,column:42}},109:{start:{line:297,column:6},end:{line:305,column:9}},110:{start:{line:298,column:8},end:{line:303,column:9}},111:{start:{line:299,column:24},end:{line:301,column:11}},112:{start:{line:302,column:10},end:{line:302,column:34}},113:{start:{line:304,column:8},end:{line:304,column:40}},114:{start:{line:307,column:25},end:{line:358,column:6}},115:{start:{line:308,column:23},end:{line:308,column:109}},116:{start:{line:309,column:6},end:{line:322,column:7}},117:{start:{line:310,column:35},end:{line:310,column:43}},118:{start:{line:311,column:8},end:{line:321,column:10}},119:{start:{line:323,column:33},end:{line:323,column:100}},120:{start:{line:324,column:6},end:{line:337,column:7}},121:{start:{line:325,column:35},end:{line:325,column:53}},122:{start:{line:326,column:8},end:{line:336,column:10}},123:{start:{line:338,column:25},end:{line:338,column:88}},124:{start:{line:339,column:6},end:{line:357,column:7}},125:{start:{line:340,column:52},end:{line:340,column:62}},126:{start:{line:341,column:20},end:{line:341,column:78}},127:{start:{line:342,column:8},end:{line:352,column:10}},128:{start:{line:354,column:8},end:{line:356,column:10}},129:{start:{line:359,column:24},end:{line:359,column:30}},130:{start:{line:360,column:4},end:{line:374,column:5}},131:{start:{line:361,column:6},end:{line:361,column:42}},132:{start:{line:362,column:6},end:{line:373,column:9}},133:{start:{line:363,column:28},end:{line:363,column:33}},134:{start:{line:364,column:8},end:{line:372,column:9}},135:{start:{line:365,column:10},end:{line:371,column:11}},136:{start:{line:366,column:28},end:{line:366,column:49}},137:{start:{line:367,column:30},end:{line:367,column:69}},138:{start:{line:368,column:12},end:{line:368,column:44}},139:{start:{line:370,column:12},end:{line:370,column:30}},140:{start:{line:375,column:4},end:{line:377,column:5}},141:{start:{line:376,column:6},end:{line:376,column:40}},142:{start:{line:378,column:4},end:{line:380,column:5}},143:{start:{line:379,column:6},end:{line:379,column:40}},144:{start:{line:381,column:4},end:{line:383,column:5}},145:{start:{line:382,column:6},end:{line:382,column:47}},146:{start:{line:384,column:4},end:{line:386,column:5}},147:{start:{line:385,column:6},end:{line:385,column:31}},148:{start:{line:387,column:4},end:{line:394,column:7}},149:{start:{line:392,column:6},end:{line:392,column:26}},150:{start:{line:393,column:6},end:{line:393,column:27}},151:{start:{line:396,column:11},end:{line:403,column:3}},152:{start:{line:397,column:24},end:{line:397,column:49}},153:{start:{line:398,column:21},end:{line:398,column:67}},154:{start:{line:399,column:4},end:{line:399,column:61}},155:{start:{line:400,column:4},end:{line:402,column:7}},156:{start:{line:404,column:11},end:{line:411,column:3}},157:{start:{line:405,column:24},end:{line:405,column:49}},158:{start:{line:406,column:21},end:{line:406,column:67}},159:{start:{line:407,column:4},end:{line:407,column:61}},160:{start:{line:408,column:4},end:{line:410,column:7}},161:{start:{line:412,column:16},end:{line:426,column:3}},162:{start:{line:413,column:33},end:{line:413,column:37}},163:{start:{line:414,column:17},end:{line:414,column:43}},164:{start:{line:415,column:4},end:{line:415,column:53}},165:{start:{line:416,column:4},end:{line:416,column:53}},166:{start:{line:417,column:4},end:{line:417,column:38}},167:{start:{line:417,column:31},end:{line:417,column:38}},168:{start:{line:418,column:4},end:{line:422,column:5}},169:{start:{line:419,column:6},end:{line:421,column:9}},170:{start:{line:423,column:4},end:{line:423,column:29}},171:{start:{line:424,column:4},end:{line:424,column:49}},172:{start:{line:425,column:4},end:{line:425,column:32}},173:{start:{line:427,column:19},end:{line:433,column:3}},174:{start:{line:428,column:25},end:{line:431,column:5}},175:{start:{line:432,column:4},end:{line:432,column:38}},176:{start:{line:434,column:19},end:{line:439,column:3}},177:{start:{line:435,column:19},end:{line:435,column:45}},178:{start:{line:436,column:28},end:{line:436,column:43}},179:{start:{line:437,column:4},end:{line:437,column:37}},180:{start:{line:438,column:4},end:{line:438,column:41}},181:{start:{line:440,column:16},end:{line:447,column:3}},182:{start:{line:441,column:19},end:{line:441,column:45}},183:{start:{line:442,column:26},end:{line:442,column:41}},184:{start:{line:443,column:24},end:{line:443,column:55}},185:{start:{line:444,column:4},end:{line:444,column:46}},186:{start:{line:445,column:4},end:{line:445,column:48}},187:{start:{line:446,column:4},end:{line:446,column:39}},188:{start:{line:448,column:28},end:{line:457,column:3}},189:{start:{line:449,column:19},end:{line:449,column:45}},190:{start:{line:450,column:26},end:{line:450,column:41}},191:{start:{line:451,column:18},end:{line:451,column:45}},192:{start:{line:452,column:26},end:{line:452,column:70}},193:{start:{line:453,column:4},end:{line:453,column:88}},194:{start:{line:454,column:4},end:{line:454,column:33}},195:{start:{line:455,column:4},end:{line:455,column:33}},196:{start:{line:456,column:4},end:{line:456,column:39}},197:{start:{line:458,column:20},end:{line:465,column:3}},198:{start:{line:459,column:26},end:{line:459,column:61}},199:{start:{line:460,column:4},end:{line:463,column:6}},200:{start:{line:464,column:4},end:{line:464,column:39}},201:{start:{line:466,column:19},end:{line:470,column:3}},202:{start:{line:467,column:26},end:{line:467,column:61}},203:{start:{line:468,column:4},end:{line:468,column:33}},204:{start:{line:469,column:4},end:{line:469,column:39}},205:{start:{line:471,column:16},end:{line:475,column:3}},206:{start:{line:472,column:4},end:{line:474,column:27}},207:{start:{line:476,column:21},end:{line:490,column:3}},208:{start:{line:477,column:21},end:{line:477,column:44}},209:{start:{line:478,column:4},end:{line:489,column:5}},210:{start:{line:479,column:27},end:{line:485,column:7}},211:{start:{line:486,column:6},end:{line:486,column:26}},212:{start:{line:488,column:6},end:{line:488,column:22}},213:{start:{line:491,column:14},end:{line:495,column:3}},214:{start:{line:492,column:4},end:{line:492,column:34}},215:{start:{line:493,column:4},end:{line:493,column:47}},216:{start:{line:494,column:4},end:{line:494,column:34}},217:{start:{line:497,column:23},end:{line:497,column:25}},218:{start:{line:498,column:4},end:{line:538,column:5}},219:{start:{line:499,column:6},end:{line:537,column:7}},220:{start:{line:500,column:8},end:{line:503,column:10}},221:{start:{line:504,column:18},end:{line:504,column:25}},222:{start:{line:505,column:8},end:{line:509,column:9}},223:{start:{line:506,column:10},end:{line:506,column:62}},224:{start:{line:508,column:10},end:{line:508,column:63}},225:{start:{line:510,column:32},end:{line:523,column:9}},226:{start:{line:511,column:10},end:{line:513,column:11}},227:{start:{line:512,column:12},end:{line:512,column:19}},228:{start:{line:514,column:26},end:{line:516,column:12}},229:{start:{line:517,column:10},end:{line:519,column:11}},230:{start:{line:518,column:12},end:{line:518,column:47}},231:{start:{line:520,column:10},end:{line:522,column:13}},232:{start:{line:524,column:8},end:{line:534,column:9}},233:{start:{line:525,column:10},end:{line:527,column:13}},234:{start:{line:525,column:69},end:{line:525,column:90}},235:{start:{line:526,column:12},end:{line:526,column:74}},236:{start:{line:529,column:10},end:{line:533,column:13}},237:{start:{line:531,column:32},end:{line:531,column:47}},238:{start:{line:531,column:64},end:{line:531,column:85}},239:{start:{line:532,column:12},end:{line:532,column:74}},240:{start:{line:536,column:8},end:{line:536,column:86}},241:{start:{line:539,column:4},end:{line:544,column:5}},242:{start:{line:540,column:6},end:{line:540,column:39}},243:{start:{line:541,column:6},end:{line:543,column:9}},244:{start:{line:547,column:21},end:{line:547,column:55}},245:{start:{line:548,column:4},end:{line:548,column:53}},246:{start:{line:550,column:16},end:{line:554,column:3}},247:{start:{line:551,column:4},end:{line:553,column:7}},248:{start:{line:556,column:40},end:{line:556,column:50}},249:{start:{line:557,column:21},end:{line:568,column:5}},250:{start:{line:560,column:8},end:{line:562,column:11}},251:{start:{line:565,column:8},end:{line:565,column:44}},252:{start:{line:566,column:8},end:{line:566,column:28}},253:{start:{line:569,column:21},end:{line:569,column:40}},254:{start:{line:571,column:4},end:{line:593,column:5}},255:{start:{line:572,column:6},end:{line:580,column:8}},256:{start:{line:582,column:6},end:{line:592,column:8}},257:{start:{line:595,column:4},end:{line:597,column:5}},258:{start:{line:596,column:6},end:{line:596,column:63}},259:{start:{line:598,column:25},end:{line:598,column:27}},260:{start:{line:599,column:4},end:{line:601,column:5}},261:{start:{line:600,column:6},end:{line:600,column:52}},262:{start:{line:602,column:4},end:{line:602,column:160}},263:{start:{line:604,column:18},end:{line:622,column:3}},264:{start:{line:605,column:43},end:{line:605,column:53}},265:{start:{line:606,column:35},end:{line:606,column:45}},266:{start:{line:607,column:16},end:{line:607,column:38}},267:{start:{line:608,column:20},end:{line:608,column:50}},268:{start:{line:609,column:4},end:{line:609,column:70}},269:{start:{line:610,column:23},end:{line:610,column:122}},270:{start:{line:610,column:66},end:{line:610,column:91}},271:{start:{line:610,column:109},end:{line:610,column:121}},272:{start:{line:611,column:4},end:{line:615,column:5}},273:{start:{line:612,column:6},end:{line:612,column:58}},274:{start:{line:614,column:6},end:{line:614,column:39}},275:{start:{line:616,column:4},end:{line:620,column:5}},276:{start:{line:617,column:6},end:{line:617,column:38}},277:{start:{line:618,column:11},end:{line:620,column:5}},278:{start:{line:619,column:6},end:{line:619,column:46}},279:{start:{line:621,column:4},end:{line:621,column:71}},280:{start:{line:623,column:27},end:{line:668,column:3}},281:{start:{line:624,column:16},end:{line:624,column:38}},282:{start:{line:625,column:23},end:{line:625,column:52}},283:{start:{line:626,column:4},end:{line:638,column:5}},284:{start:{line:627,column:21},end:{line:627,column:42}},285:{start:{line:628,column:23},end:{line:628,column:25}},286:{start:{line:629,column:6},end:{line:631,column:9}},287:{start:{line:630,column:8},end:{line:630,column:35}},288:{start:{line:632,column:6},end:{line:637,column:9}},289:{start:{line:639,column:17},end:{line:639,column:45}},290:{start:{line:640,column:4},end:{line:642,column:5}},291:{start:{line:641,column:6},end:{line:641,column:29}},292:{start:{line:643,column:17},end:{line:643,column:46}},293:{start:{line:644,column:4},end:{line:667,column:5}},294:{start:{line:645,column:6},end:{line:666,column:7}},295:{start:{line:646,column:22},end:{line:646,column:37}},296:{start:{line:647,column:46},end:{line:650,column:9}},297:{start:{line:651,column:20},end:{line:651,column:24}},298:{start:{line:652,column:8},end:{line:657,column:9}},299:{start:{line:653,column:33},end:{line:653,column:63}},300:{start:{line:654,column:10},end:{line:656,column:11}},301:{start:{line:655,column:12},end:{line:655,column:26}},302:{start:{line:658,column:8},end:{line:663,column:9}},303:{start:{line:659,column:10},end:{line:662,column:13}},304:{start:{line:665,column:8},end:{line:665,column:26}},305:{start:{line:669,column:18},end:{line:674,column:3}},306:{start:{line:670,column:4},end:{line:673,column:27}},307:{start:{line:676,column:4},end:{line:681,column:27}},308:{start:{line:684,column:4},end:{line:684,column:60}},309:{start:{line:687,column:4},end:{line:687,column:34}},310:{start:{line:689,column:28},end:{line:696,column:3}},311:{start:{line:690,column:4},end:{line:695,column:7}},312:{start:{line:697,column:28},end:{line:704,column:3}},313:{start:{line:698,column:4},end:{line:703,column:7}},314:{start:{line:706,column:19},end:{line:706,column:51}},315:{start:{line:707,column:26},end:{line:707,column:92}},316:{start:{line:708,column:36},end:{line:721,column:5}},317:{start:{line:722,column:38},end:{line:736,column:5}},318:{start:{line:737,column:24},end:{line:756,column:14}},319:{start:{line:757,column:24},end:{line:767,column:14}},320:{start:{line:768,column:35},end:{line:828,column:8}},321:{start:{line:829,column:4},end:{line:839,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:38,column:9},end:{line:38,column:28}},loc:{start:{line:38,column:44},end:{line:55,column:1}},line:38},1:{name:"updateRootSpec",decl:{start:{line:56,column:9},end:{line:56,column:23}},loc:{start:{line:56,column:52},end:{line:67,column:1}},line:56},2:{name:"(anonymous_2)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:21},end:{line:215,column:3}},line:72},3:{name:"(anonymous_3)",decl:{start:{line:82,column:26},end:{line:82,column:27}},loc:{start:{line:82,column:40},end:{line:82,column:86}},line:82},4:{name:"(anonymous_4)",decl:{start:{line:89,column:17},end:{line:89,column:18}},loc:{start:{line:89,column:23},end:{line:91,column:9}},line:89},5:{name:"(anonymous_5)",decl:{start:{line:95,column:17},end:{line:95,column:18}},loc:{start:{line:95,column:23},end:{line:97,column:9}},line:95},6:{name:"(anonymous_6)",decl:{start:{line:101,column:17},end:{line:101,column:18}},loc:{start:{line:101,column:23},end:{line:103,column:9}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:107,column:17},end:{line:107,column:18}},loc:{start:{line:107,column:23},end:{line:109,column:9}},line:107},8:{name:"(anonymous_8)",decl:{start:{line:113,column:17},end:{line:113,column:18}},loc:{start:{line:113,column:23},end:{line:115,column:9}},line:113},9:{name:"(anonymous_9)",decl:{start:{line:119,column:17},end:{line:119,column:18}},loc:{start:{line:119,column:23},end:{line:123,column:9}},line:119},10:{name:"(anonymous_10)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:23},end:{line:129,column:9}},line:127},11:{name:"(anonymous_11)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:23},end:{line:135,column:9}},line:133},12:{name:"(anonymous_12)",decl:{start:{line:138,column:44},end:{line:138,column:45}},loc:{start:{line:138,column:51},end:{line:151,column:5}},line:138},13:{name:"(anonymous_13)",decl:{start:{line:143,column:40},end:{line:143,column:41}},loc:{start:{line:143,column:55},end:{line:145,column:9}},line:143},14:{name:"(anonymous_14)",decl:{start:{line:155,column:29},end:{line:155,column:30}},loc:{start:{line:155,column:43},end:{line:155,column:72}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:161,column:27},end:{line:161,column:28}},loc:{start:{line:161,column:36},end:{line:171,column:7}},line:161},16:{name:"(anonymous_16)",decl:{start:{line:166,column:36},end:{line:166,column:37}},loc:{start:{line:166,column:50},end:{line:166,column:102}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:213,column:28},end:{line:213,column:29}},loc:{start:{line:213,column:35},end:{line:213,column:69}},line:213},18:{name:"(anonymous_18)",decl:{start:{line:216,column:19},end:{line:216,column:20}},loc:{start:{line:216,column:26},end:{line:234,column:3}},line:216},19:{name:"(anonymous_19)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:22},end:{line:237,column:3}},line:235},20:{name:"(anonymous_20)",decl:{start:{line:238,column:2},end:{line:238,column:3}},loc:{start:{line:238,column:25},end:{line:240,column:3}},line:238},21:{name:"(anonymous_21)",decl:{start:{line:241,column:2},end:{line:241,column:3}},loc:{start:{line:241,column:27},end:{line:243,column:3}},line:241},22:{name:"(anonymous_22)",decl:{start:{line:244,column:2},end:{line:244,column:3}},loc:{start:{line:244,column:27},end:{line:251,column:3}},line:244},23:{name:"(anonymous_23)",decl:{start:{line:248,column:37},end:{line:248,column:38}},loc:{start:{line:248,column:48},end:{line:250,column:5}},line:248},24:{name:"(anonymous_24)",decl:{start:{line:252,column:2},end:{line:252,column:3}},loc:{start:{line:252,column:23},end:{line:256,column:3}},line:252},25:{name:"(anonymous_25)",decl:{start:{line:253,column:36},end:{line:253,column:37}},loc:{start:{line:253,column:47},end:{line:255,column:5}},line:253},26:{name:"(anonymous_26)",decl:{start:{line:257,column:29},end:{line:257,column:30}},loc:{start:{line:257,column:50},end:{line:271,column:3}},line:257},27:{name:"(anonymous_27)",decl:{start:{line:272,column:19},end:{line:272,column:20}},loc:{start:{line:272,column:44},end:{line:395,column:3}},line:272},28:{name:"(anonymous_28)",decl:{start:{line:297,column:30},end:{line:297,column:31}},loc:{start:{line:297,column:48},end:{line:305,column:7}},line:297},29:{name:"(anonymous_29)",decl:{start:{line:307,column:56},end:{line:307,column:57}},loc:{start:{line:307,column:67},end:{line:358,column:5}},line:307},30:{name:"(anonymous_30)",decl:{start:{line:362,column:21},end:{line:362,column:22}},loc:{start:{line:362,column:32},end:{line:373,column:7}},line:362},31:{name:"(anonymous_31)",decl:{start:{line:391,column:7},end:{line:391,column:8}},loc:{start:{line:391,column:13},end:{line:394,column:5}},line:391},32:{name:"(anonymous_32)",decl:{start:{line:396,column:11},end:{line:396,column:12}},loc:{start:{line:396,column:17},end:{line:403,column:3}},line:396},33:{name:"(anonymous_33)",decl:{start:{line:404,column:11},end:{line:404,column:12}},loc:{start:{line:404,column:17},end:{line:411,column:3}},line:404},34:{name:"(anonymous_34)",decl:{start:{line:412,column:16},end:{line:412,column:17}},loc:{start:{line:412,column:26},end:{line:426,column:3}},line:412},35:{name:"(anonymous_35)",decl:{start:{line:427,column:19},end:{line:427,column:20}},loc:{start:{line:427,column:38},end:{line:433,column:3}},line:427},36:{name:"(anonymous_36)",decl:{start:{line:434,column:19},end:{line:434,column:20}},loc:{start:{line:434,column:30},end:{line:439,column:3}},line:434},37:{name:"(anonymous_37)",decl:{start:{line:440,column:16},end:{line:440,column:17}},loc:{start:{line:440,column:27},end:{line:447,column:3}},line:440},38:{name:"(anonymous_38)",decl:{start:{line:448,column:28},end:{line:448,column:29}},loc:{start:{line:448,column:39},end:{line:457,column:3}},line:448},39:{name:"(anonymous_39)",decl:{start:{line:458,column:20},end:{line:458,column:21}},loc:{start:{line:458,column:46},end:{line:465,column:3}},line:458},40:{name:"(anonymous_40)",decl:{start:{line:466,column:19},end:{line:466,column:20}},loc:{start:{line:466,column:37},end:{line:470,column:3}},line:466},41:{name:"(anonymous_41)",decl:{start:{line:471,column:16},end:{line:471,column:17}},loc:{start:{line:471,column:30},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:21},end:{line:476,column:22}},loc:{start:{line:476,column:35},end:{line:490,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:491,column:14},end:{line:491,column:15}},loc:{start:{line:491,column:40},end:{line:495,column:3}},line:491},44:{name:"(anonymous_44)",decl:{start:{line:496,column:2},end:{line:496,column:3}},loc:{start:{line:496,column:17},end:{line:545,column:3}},line:496},45:{name:"(anonymous_45)",decl:{start:{line:510,column:32},end:{line:510,column:33}},loc:{start:{line:510,column:42},end:{line:523,column:9}},line:510},46:{name:"(anonymous_46)",decl:{start:{line:525,column:59},end:{line:525,column:60}},loc:{start:{line:525,column:69},end:{line:525,column:90}},line:525},47:{name:"(anonymous_47)",decl:{start:{line:525,column:98},end:{line:525,column:99}},loc:{start:{line:525,column:107},end:{line:527,column:11}},line:525},48:{name:"(anonymous_48)",decl:{start:{line:531,column:18},end:{line:531,column:19}},loc:{start:{line:531,column:32},end:{line:531,column:47}},line:531},49:{name:"(anonymous_49)",decl:{start:{line:531,column:54},end:{line:531,column:55}},loc:{start:{line:531,column:64},end:{line:531,column:85}},line:531},50:{name:"(anonymous_50)",decl:{start:{line:531,column:93},end:{line:531,column:94}},loc:{start:{line:531,column:102},end:{line:533,column:11}},line:531},51:{name:"(anonymous_51)",decl:{start:{line:546,column:2},end:{line:546,column:3}},loc:{start:{line:546,column:17},end:{line:549,column:3}},line:546},52:{name:"(anonymous_52)",decl:{start:{line:550,column:16},end:{line:550,column:17}},loc:{start:{line:550,column:29},end:{line:554,column:3}},line:550},53:{name:"(anonymous_53)",decl:{start:{line:555,column:2},end:{line:555,column:3}},loc:{start:{line:555,column:16},end:{line:603,column:3}},line:555},54:{name:"(anonymous_54)",decl:{start:{line:559,column:27},end:{line:559,column:28}},loc:{start:{line:559,column:42},end:{line:563,column:7}},line:559},55:{name:"(anonymous_55)",decl:{start:{line:564,column:20},end:{line:564,column:21}},loc:{start:{line:564,column:27},end:{line:567,column:7}},line:564},56:{name:"(anonymous_56)",decl:{start:{line:604,column:18},end:{line:604,column:19}},loc:{start:{line:604,column:24},end:{line:622,column:3}},line:604},57:{name:"(anonymous_57)",decl:{start:{line:610,column:50},end:{line:610,column:51}},loc:{start:{line:610,column:66},end:{line:610,column:91}},line:610},58:{name:"(anonymous_58)",decl:{start:{line:610,column:100},end:{line:610,column:101}},loc:{start:{line:610,column:109},end:{line:610,column:121}},line:610},59:{name:"(anonymous_59)",decl:{start:{line:623,column:27},end:{line:623,column:28}},loc:{start:{line:623,column:41},end:{line:668,column:3}},line:623},60:{name:"(anonymous_60)",decl:{start:{line:629,column:21},end:{line:629,column:22}},loc:{start:{line:629,column:36},end:{line:631,column:7}},line:629},61:{name:"(anonymous_61)",decl:{start:{line:669,column:18},end:{line:669,column:19}},loc:{start:{line:669,column:29},end:{line:674,column:3}},line:669},62:{name:"(anonymous_62)",decl:{start:{line:675,column:2},end:{line:675,column:3}},loc:{start:{line:675,column:29},end:{line:682,column:3}},line:675},63:{name:"(anonymous_63)",decl:{start:{line:683,column:2},end:{line:683,column:3}},loc:{start:{line:683,column:25},end:{line:685,column:3}},line:683},64:{name:"(anonymous_64)",decl:{start:{line:686,column:2},end:{line:686,column:3}},loc:{start:{line:686,column:30},end:{line:688,column:3}},line:686},65:{name:"(anonymous_65)",decl:{start:{line:689,column:28},end:{line:689,column:29}},loc:{start:{line:689,column:44},end:{line:696,column:3}},line:689},66:{name:"(anonymous_66)",decl:{start:{line:697,column:28},end:{line:697,column:29}},loc:{start:{line:697,column:44},end:{line:704,column:3}},line:697},67:{name:"(anonymous_67)",decl:{start:{line:705,column:2},end:{line:705,column:3}},loc:{start:{line:705,column:11},end:{line:840,column:3}},line:705}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:47,column:9},end:{line:54,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},6:{loc:{start:{line:78,column:8},end:{line:78,column:89}},type:"binary-expr",locations:[{start:{line:78,column:8},end:{line:78,column:20}},{start:{line:78,column:25},end:{line:78,column:54}},{start:{line:78,column:58},end:{line:78,column:88}}],line:78},7:{loc:{start:{line:121,column:12},end:{line:121,column:61}},type:"cond-expr",locations:[{start:{line:121,column:44},end:{line:121,column:53}},{start:{line:121,column:56},end:{line:121,column:61}}],line:121},8:{loc:{start:{line:139,column:6},end:{line:150,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:150,column:7}},{start:{line:142,column:13},end:{line:150,column:7}}],line:139},9:{loc:{start:{line:142,column:13},end:{line:150,column:7}},type:"if",locations:[{start:{line:142,column:13},end:{line:150,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:142},10:{loc:{start:{line:142,column:17},end:{line:142,column:88}},type:"binary-expr",locations:[{start:{line:142,column:17},end:{line:142,column:44}},{start:{line:142,column:48},end:{line:142,column:88}}],line:142},11:{loc:{start:{line:146,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:146,column:8},end:{line:149,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},12:{loc:{start:{line:153,column:4},end:{line:172,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:172,column:5}},{start:{line:157,column:11},end:{line:172,column:5}}],line:153},13:{loc:{start:{line:153,column:8},end:{line:153,column:104}},type:"binary-expr",locations:[{start:{line:153,column:8},end:{line:153,column:16}},{start:{line:153,column:20},end:{line:153,column:104}}],line:153},14:{loc:{start:{line:158,column:6},end:{line:160,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:160,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:158},15:{loc:{start:{line:162,column:8},end:{line:165,column:9}},type:"if",locations:[{start:{line:162,column:8},end:{line:165,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:162},16:{loc:{start:{line:167,column:8},end:{line:170,column:9}},type:"if",locations:[{start:{line:167,column:8},end:{line:170,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:167},17:{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},18:{loc:{start:{line:217,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:217,column:4},end:{line:233,column:5}},{start:{line:225,column:11},end:{line:233,column:5}}],line:217},19:{loc:{start:{line:218,column:6},end:{line:224,column:7}},type:"if",locations:[{start:{line:218,column:6},end:{line:224,column:7}},{start:{line:221,column:13},end:{line:224,column:7}}],line:218},20:{loc:{start:{line:218,column:10},end:{line:218,column:53}},type:"binary-expr",locations:[{start:{line:218,column:10},end:{line:218,column:19}},{start:{line:218,column:23},end:{line:218,column:33}},{start:{line:218,column:37},end:{line:218,column:53}}],line:218},21:{loc:{start:{line:221,column:13},end:{line:224,column:7}},type:"if",locations:[{start:{line:221,column:13},end:{line:224,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:221},22:{loc:{start:{line:221,column:17},end:{line:221,column:46}},type:"binary-expr",locations:[{start:{line:221,column:17},end:{line:221,column:26}},{start:{line:221,column:30},end:{line:221,column:46}}],line:221},23:{loc:{start:{line:226,column:6},end:{line:232,column:7}},type:"if",locations:[{start:{line:226,column:6},end:{line:232,column:7}},{start:{line:229,column:13},end:{line:232,column:7}}],line:226},24:{loc:{start:{line:226,column:10},end:{line:226,column:39}},type:"binary-expr",locations:[{start:{line:226,column:10},end:{line:226,column:19}},{start:{line:226,column:23},end:{line:226,column:39}}],line:226},25:{loc:{start:{line:229,column:13},end:{line:232,column:7}},type:"if",locations:[{start:{line:229,column:13},end:{line:232,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:229},26:{loc:{start:{line:229,column:17},end:{line:229,column:46}},type:"binary-expr",locations:[{start:{line:229,column:17},end:{line:229,column:26}},{start:{line:229,column:30},end:{line:229,column:46}}],line:229},27:{loc:{start:{line:245,column:21},end:{line:245,column:55}},type:"binary-expr",locations:[{start:{line:245,column:21},end:{line:245,column:49}},{start:{line:245,column:53},end:{line:245,column:55}}],line:245},28:{loc:{start:{line:246,column:24},end:{line:246,column:93}},type:"binary-expr",locations:[{start:{line:246,column:24},end:{line:246,column:70}},{start:{line:246,column:74},end:{line:246,column:93}}],line:246},29:{loc:{start:{line:247,column:21},end:{line:247,column:110}},type:"cond-expr",locations:[{start:{line:247,column:55},end:{line:247,column:96}},{start:{line:247,column:99},end:{line:247,column:110}}],line:247},30:{loc:{start:{line:258,column:4},end:{line:262,column:5}},type:"if",locations:[{start:{line:258,column:4},end:{line:262,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:258},31:{loc:{start:{line:258,column:8},end:{line:258,column:123}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:40}},{start:{line:258,column:44},end:{line:258,column:123}}],line:258},32:{loc:{start:{line:272,column:30},end:{line:272,column:39}},type:"default-arg",locations:[{start:{line:272,column:37},end:{line:272,column:39}}],line:272},33:{loc:{start:{line:279,column:4},end:{line:281,column:5}},type:"if",locations:[{start:{line:279,column:4},end:{line:281,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:279},34:{loc:{start:{line:279,column:8},end:{line:279,column:62}},type:"binary-expr",locations:[{start:{line:279,column:8},end:{line:279,column:23}},{start:{line:279,column:27},end:{line:279,column:62}}],line:279},35:{loc:{start:{line:282,column:4},end:{line:284,column:5}},type:"if",locations:[{start:{line:282,column:4},end:{line:284,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},36:{loc:{start:{line:282,column:8},end:{line:282,column:62}},type:"binary-expr",locations:[{start:{line:282,column:8},end:{line:282,column:23}},{start:{line:282,column:27},end:{line:282,column:62}}],line:282},37:{loc:{start:{line:286,column:6},end:{line:288,column:7}},type:"if",locations:[{start:{line:286,column:6},end:{line:288,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:10},end:{line:286,column:69}},type:"binary-expr",locations:[{start:{line:286,column:10},end:{line:286,column:16}},{start:{line:286,column:20},end:{line:286,column:35}},{start:{line:286,column:39},end:{line:286,column:69}}],line:286},39:{loc:{start:{line:290,column:4},end:{line:292,column:5}},type:"if",locations:[{start:{line:290,column:4},end:{line:292,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:290},40:{loc:{start:{line:293,column:19},end:{line:293,column:51}},type:"binary-expr",locations:[{start:{line:293,column:19},end:{line:293,column:45}},{start:{line:293,column:49},end:{line:293,column:51}}],line:293},41:{loc:{start:{line:295,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:295,column:4},end:{line:306,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:295},42:{loc:{start:{line:295,column:8},end:{line:295,column:35}},type:"binary-expr",locations:[{start:{line:295,column:8},end:{line:295,column:16}},{start:{line:295,column:20},end:{line:295,column:35}}],line:295},43:{loc:{start:{line:298,column:8},end:{line:303,column:9}},type:"if",locations:[{start:{line:298,column:8},end:{line:303,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:298},44:{loc:{start:{line:298,column:12},end:{line:298,column:56}},type:"binary-expr",locations:[{start:{line:298,column:12},end:{line:298,column:27}},{start:{line:298,column:31},end:{line:298,column:56}}],line:298},45:{loc:{start:{line:309,column:6},end:{line:322,column:7}},type:"if",locations:[{start:{line:309,column:6},end:{line:322,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:309},46:{loc:{start:{line:324,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:324,column:6},end:{line:337,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:324},47:{loc:{start:{line:339,column:6},end:{line:357,column:7}},type:"if",locations:[{start:{line:339,column:6},end:{line:357,column:7}},{start:{line:353,column:13},end:{line:357,column:7}}],line:339},48:{loc:{start:{line:341,column:20},end:{line:341,column:78}},type:"cond-expr",locations:[{start:{line:341,column:40},end:{line:341,column:67}},{start:{line:341,column:70},end:{line:341,column:78}}],line:341},49:{loc:{start:{line:341,column:20},end:{line:341,column:37}},type:"binary-expr",locations:[{start:{line:341,column:20},end:{line:341,column:25}},{start:{line:341,column:29},end:{line:341,column:37}}],line:341},50:{loc:{start:{line:360,column:4},end:{line:374,column:5}},type:"if",locations:[{start:{line:360,column:4},end:{line:374,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:360},51:{loc:{start:{line:364,column:8},end:{line:372,column:9}},type:"if",locations:[{start:{line:364,column:8},end:{line:372,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},52:{loc:{start:{line:375,column:4},end:{line:377,column:5}},type:"if",locations:[{start:{line:375,column:4},end:{line:377,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:375},53:{loc:{start:{line:378,column:4},end:{line:380,column:5}},type:"if",locations:[{start:{line:378,column:4},end:{line:380,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:378},54:{loc:{start:{line:381,column:4},end:{line:383,column:5}},type:"if",locations:[{start:{line:381,column:4},end:{line:383,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:381},55:{loc:{start:{line:384,column:4},end:{line:386,column:5}},type:"if",locations:[{start:{line:384,column:4},end:{line:386,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:384},56:{loc:{start:{line:417,column:4},end:{line:417,column:38}},type:"if",locations:[{start:{line:417,column:4},end:{line:417,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:417},57:{loc:{start:{line:418,column:4},end:{line:422,column:5}},type:"if",locations:[{start:{line:418,column:4},end:{line:422,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:418},58:{loc:{start:{line:452,column:26},end:{line:452,column:70}},type:"cond-expr",locations:[{start:{line:452,column:46},end:{line:452,column:65}},{start:{line:452,column:68},end:{line:452,column:70}}],line:452},59:{loc:{start:{line:453,column:31},end:{line:453,column:87}},type:"cond-expr",locations:[{start:{line:453,column:69},end:{line:453,column:78}},{start:{line:453,column:81},end:{line:453,column:87}}],line:453},60:{loc:{start:{line:477,column:21},end:{line:477,column:44}},type:"binary-expr",locations:[{start:{line:477,column:21},end:{line:477,column:38}},{start:{line:477,column:42},end:{line:477,column:44}}],line:477},61:{loc:{start:{line:478,column:4},end:{line:489,column:5}},type:"if",locations:[{start:{line:478,column:4},end:{line:489,column:5}},{start:{line:487,column:11},end:{line:489,column:5}}],line:478},62:{loc:{start:{line:499,column:6},end:{line:537,column:7}},type:"if",locations:[{start:{line:499,column:6},end:{line:537,column:7}},{start:{line:535,column:13},end:{line:537,column:7}}],line:499},63:{loc:{start:{line:499,column:10},end:{line:499,column:149}},type:"binary-expr",locations:[{start:{line:499,column:10},end:{line:499,column:72}},{start:{line:499,column:76},end:{line:499,column:97}},{start:{line:499,column:101},end:{line:499,column:149}}],line:499},64:{loc:{start:{line:511,column:10},end:{line:513,column:11}},type:"if",locations:[{start:{line:511,column:10},end:{line:513,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:511},65:{loc:{start:{line:524,column:8},end:{line:534,column:9}},type:"if",locations:[{start:{line:524,column:8},end:{line:534,column:9}},{start:{line:528,column:15},end:{line:534,column:9}}],line:524},66:{loc:{start:{line:536,column:26},end:{line:536,column:85}},type:"binary-expr",locations:[{start:{line:536,column:26},end:{line:536,column:49}},{start:{line:536,column:53},end:{line:536,column:85}}],line:536},67:{loc:{start:{line:539,column:4},end:{line:544,column:5}},type:"if",locations:[{start:{line:539,column:4},end:{line:544,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:539},68:{loc:{start:{line:547,column:21},end:{line:547,column:55}},type:"binary-expr",locations:[{start:{line:547,column:21},end:{line:547,column:49}},{start:{line:547,column:53},end:{line:547,column:55}}],line:547},69:{loc:{start:{line:548,column:11},end:{line:548,column:52}},type:"binary-expr",locations:[{start:{line:548,column:11},end:{line:548,column:40}},{start:{line:548,column:44},end:{line:548,column:52}}],line:548},70:{loc:{start:{line:558,column:16},end:{line:558,column:41}},type:"binary-expr",locations:[{start:{line:558,column:16},end:{line:558,column:29}},{start:{line:558,column:33},end:{line:558,column:41}}],line:558},71:{loc:{start:{line:571,column:4},end:{line:593,column:5}},type:"if",locations:[{start:{line:571,column:4},end:{line:593,column:5}},{start:{line:581,column:11},end:{line:593,column:5}}],line:571},72:{loc:{start:{line:595,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:597,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:595},73:{loc:{start:{line:599,column:4},end:{line:601,column:5}},type:"if",locations:[{start:{line:599,column:4},end:{line:601,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:599},74:{loc:{start:{line:610,column:66},end:{line:610,column:91}},type:"cond-expr",locations:[{start:{line:610,column:81},end:{line:610,column:84}},{start:{line:610,column:87},end:{line:610,column:91}}],line:610},75:{loc:{start:{line:611,column:4},end:{line:615,column:5}},type:"if",locations:[{start:{line:611,column:4},end:{line:615,column:5}},{start:{line:613,column:11},end:{line:615,column:5}}],line:611},76:{loc:{start:{line:616,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:616,column:4},end:{line:620,column:5}},{start:{line:618,column:11},end:{line:620,column:5}}],line:616},77:{loc:{start:{line:618,column:11},end:{line:620,column:5}},type:"if",locations:[{start:{line:618,column:11},end:{line:620,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:618},78:{loc:{start:{line:626,column:4},end:{line:638,column:5}},type:"if",locations:[{start:{line:626,column:4},end:{line:638,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},79:{loc:{start:{line:626,column:8},end:{line:626,column:39}},type:"binary-expr",locations:[{start:{line:626,column:8},end:{line:626,column:18}},{start:{line:626,column:22},end:{line:626,column:39}}],line:626},80:{loc:{start:{line:640,column:4},end:{line:642,column:5}},type:"if",locations:[{start:{line:640,column:4},end:{line:642,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:640},81:{loc:{start:{line:640,column:8},end:{line:640,column:27}},type:"binary-expr",locations:[{start:{line:640,column:8},end:{line:640,column:12}},{start:{line:640,column:16},end:{line:640,column:27}}],line:640},82:{loc:{start:{line:644,column:4},end:{line:667,column:5}},type:"if",locations:[{start:{line:644,column:4},end:{line:667,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:644},83:{loc:{start:{line:652,column:8},end:{line:657,column:9}},type:"if",locations:[{start:{line:652,column:8},end:{line:657,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:652},84:{loc:{start:{line:654,column:10},end:{line:656,column:11}},type:"if",locations:[{start:{line:654,column:10},end:{line:656,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:654},85:{loc:{start:{line:658,column:8},end:{line:663,column:9}},type:"if",locations:[{start:{line:658,column:8},end:{line:663,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:658},86:{loc:{start:{line:706,column:19},end:{line:706,column:51}},type:"binary-expr",locations:[{start:{line:706,column:19},end:{line:706,column:45}},{start:{line:706,column:49},end:{line:706,column:51}}],line:706},87:{loc:{start:{line:707,column:26},end:{line:707,column:92}},type:"cond-expr",locations:[{start:{line:707,column:46},end:{line:707,column:83}},{start:{line:707,column:86},end:{line:707,column:92}}],line:707},88:{loc:{start:{line:737,column:24},end:{line:756,column:14}},type:"cond-expr",locations:[{start:{line:737,column:56},end:{line:756,column:5}},{start:{line:756,column:8},end:{line:756,column:14}}],line:737},89:{loc:{start:{line:757,column:24},end:{line:767,column:14}},type:"cond-expr",locations:[{start:{line:757,column:97},end:{line:767,column:5}},{start:{line:767,column:8},end:{line:767,column:14}}],line:757}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0,320:0,321:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0],86:[0,0],87:[0,0],88:[0,0],89:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AA+uBmB,SAAA,KAkNA,YAlNA;AA9uBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEW,eAAA,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEM,cAAA,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH;AAEI,YAAA,IAAK,WAAW,YAAY,GAAG;AAChC,cAAI,QAAQ,IAAK,OAAO,EAAE,CAAC,EAAG,YAAY,EAAE,EAC1C,KAAK,CAAQ,SAAA,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL,OAAO;AACL,gBAAM,KAAM;AAAA,YACV,MAAM;AAAA,UACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL;AAAA,MACF,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AAEQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bafcb93873c2a71cab2bdafeb2ce6a3195766cd8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return we=function(){return a},a}we();we().s[0]++;window.Buffer=oY.Buffer;function Xb(n,e){we().f[0]++;const t=(we().s[1]++,n.match(/\.tilehosting\.com/)),r=(we().s[2]++,n.match(/\.maptiler\.com/)),i=(we().s[3]++,n.match(/\.thunderforest\.com/));if(we().s[4]++,we().b[1][0]++,t||(we().b[1][1]++,r)){we().b[0][0]++;const s=(we().s[5]++,Ec.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(we().s[6]++,s)return we().b[2][0]++,we().s[7]++,n.replace("{key}",s);we().b[2][1]++}else if(we().b[0][1]++,we().s[8]++,i){we().b[3][0]++;const s=(we().s[9]++,Ec.getAccessToken("thunderforest",e,{allowFallback:!0}));if(we().s[10]++,s)return we().b[4][0]++,we().s[11]++,n.replace("{key}",s);we().b[4][1]++}else return we().b[3][1]++,we().s[12]++,n}function JF(n,e,t){return we().f[1]++,we().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class ame extends nr.Component{constructor(t){we().f[2]++,we().s[14]++;super(t);Pn(this,"revisionStore");Pn(this,"styleStore");Pn(this,"layerWatcher");Pn(this,"handleKeyPress",(we().s[65]++,t=>{we().f[18]++,we().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(we().b[18][0]++,we().s[67]++,we().b[20][0]++,t.metaKey&&(we().b[20][1]++,t.shiftKey)&&(we().b[20][2]++,t.keyCode===90)?(we().b[19][0]++,we().s[68]++,t.preventDefault(),we().s[69]++,this.onRedo()):(we().b[19][1]++,we().s[70]++,we().b[22][0]++,t.metaKey&&(we().b[22][1]++,t.keyCode===90)?(we().b[21][0]++,we().s[71]++,t.preventDefault(),we().s[72]++,this.onUndo()):we().b[21][1]++)):(we().b[18][1]++,we().s[73]++,we().b[24][0]++,t.ctrlKey&&(we().b[24][1]++,t.keyCode===90)?(we().b[23][0]++,we().s[74]++,t.preventDefault(),we().s[75]++,this.onUndo()):(we().b[23][1]++,we().s[76]++,we().b[26][0]++,t.ctrlKey&&(we().b[26][1]++,t.keyCode===89)?(we().b[25][0]++,we().s[77]++,t.preventDefault(),we().s[78]++,this.onRedo()):we().b[25][1]++))}));Pn(this,"onChangeMetadataProperty",(we().s[89]++,(t,r)=>{we().f[26]++,we().s[90]++,we().b[31][0]++,t==="maputnik:renderer"&&(we().b[31][1]++,r!==lY(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(we().b[30][0]++,we().s[91]++,this.setState({mapState:"map"})):we().b[30][1]++;const i=(we().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});we().s[93]++,this.onStyleChanged(i)}));Pn(this,"onStyleChanged",(we().s[94]++,(t,r=(we().b[32][0]++,{}))=>{we().f[27]++,we().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},we().s[96]++,we().b[34][0]++,t.glyphs&&(we().b[34][1]++,typeof t.glyphs=="string")?(we().b[33][0]++,we().s[97]++,t.glyphs=Xb(t.glyphs,t)):we().b[33][1]++,we().s[98]++,we().b[36][0]++,t.sprite&&(we().b[36][1]++,typeof t.sprite=="string")?(we().b[35][0]++,we().s[99]++,t.sprite=Xb(t.sprite,t)):we().b[35][1]++,we().s[100]++;for(const[f,y]of Object.entries(t.sources))we().s[101]++,we().b[38][0]++,y&&(we().b[38][1]++,"url"in y)&&(we().b[38][2]++,typeof y.url=="string")?(we().b[37][0]++,we().s[102]++,y.url=Xb(y.url,t)):we().b[37][1]++;we().s[103]++,r.initialLoad?(we().b[39][0]++,we().s[104]++,this.getInitialStateFromUrl(t)):we().b[39][1]++;const i=(we().s[105]++,we().b[40][0]++,Xf(t)||(we().b[40][1]++,[])),s=(we().s[106]++,[]);if(we().s[107]++,we().b[42][0]++,t&&(we().b[42][1]++,t.layers)){we().b[41][0]++;const f=(we().s[108]++,new window.Map);we().s[109]++,t.layers.forEach((y,x)=>{if(we().f[28]++,we().s[110]++,we().b[44][0]++,y.id===""&&(we().b[44][1]++,f.has(y.id))){we().b[43][0]++;const B=(we().s[111]++,new Error(`layers[${x}]: duplicate layer id [empty_string], previously used`));we().s[112]++,s.push(B)}else we().b[43][1]++;we().s[113]++,f.set(y.id,!0)})}else we().b[41][1]++;const a=(we().s[114]++,s.concat(i).map(f=>{we().f[29]++;const y=(we().s[115]++,f.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(we().s[116]++,y){we().b[45][0]++;const[,O,T]=(we().s[117]++,y);return we().s[118]++,{message:f.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"id",message:T}}}}else we().b[45][1]++;const x=(we().s[119]++,f.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(we().s[120]++,x){we().b[46][0]++;const[,O,T]=(we().s[121]++,x);return we().s[122]++,{message:f.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:"source",message:T}}}}else we().b[46][1]++;const B=(we().s[123]++,f.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(we().s[124]++,B){we().b[47][0]++;const[,O,T,F,j]=(we().s[125]++,B),N=(we().s[126]++,we().b[49][0]++,T&&(we().b[49][1]++,F)?(we().b[48][0]++,[T,F].join(".")):(we().b[48][1]++,F));return we().s[127]++,{message:f.message,parsed:{type:"layer",data:{index:parseInt(O,10),key:N,message:j}}}}else return we().b[47][1]++,we().s[128]++,{message:f.message}}));let o=(we().s[129]++,void 0);we().s[130]++,i.length>0?(we().b[50][0]++,we().s[131]++,o=sI(t),we().s[132]++,i.forEach(f=>{we().f[30]++;const{message:y}=(we().s[133]++,f);if(we().s[134]++,y){we().b[51][0]++,we().s[135]++;try{const x=(we().s[136]++,y.split(":")[0]),B=(we().s[137]++,x.match(/^\S+?\[\d+\]\.[^[]+/)[0]);we().s[138]++,Bx.unset(o,B)}catch(x){we().s[139]++,console.warn(x)}}else we().b[51][1]++})):we().b[50][1]++,we().s[140]++,t.glyphs!==this.state.mapStyle.glyphs?(we().b[52][0]++,we().s[141]++,this.updateFonts(t.glyphs)):we().b[52][1]++,we().s[142]++,t.sprite!==this.state.mapStyle.sprite?(we().b[53][0]++,we().s[143]++,this.updateIcons(t.sprite)):we().b[53][1]++,we().s[144]++,r.addRevision?(we().b[54][0]++,we().s[145]++,this.revisionStore.addRevision(t)):we().b[54][1]++,we().s[146]++,r.save?(we().b[55][0]++,we().s[147]++,this.saveStyle(t)):we().b[55][1]++,we().s[148]++,this.setState({mapStyle:t,dirtyMapStyle:o,errors:a},()=>{we().f[31]++,we().s[149]++,this.fetchSources(),we().s[150]++,this.setStateInUrl()})}));Pn(this,"onUndo",(we().s[151]++,()=>{we().f[32]++;const t=(we().s[152]++,this.revisionStore.undo()),r=(we().s[153]++,Lpe(this.state.mapStyle,t));we().s[154]++,this.onStyleChanged(t,{addRevision:!1}),we().s[155]++,this.setState({infos:r})}));Pn(this,"onRedo",(we().s[156]++,()=>{we().f[33]++;const t=(we().s[157]++,this.revisionStore.redo()),r=(we().s[158]++,Upe(this.state.mapStyle,t));we().s[159]++,this.onStyleChanged(t,{addRevision:!1}),we().s[160]++,this.setState({infos:r})}));Pn(this,"onMoveLayer",(we().s[161]++,t=>{we().f[34]++;let{oldIndex:r,newIndex:i}=(we().s[162]++,t),s=(we().s[163]++,this.state.mapStyle.layers);if(we().s[164]++,r=lI(r,0,s.length-1),we().s[165]++,i=lI(i,0,s.length-1),we().s[166]++,r===i){we().b[56][0]++,we().s[167]++;return}else we().b[56][1]++;we().s[168]++,r===this.state.selectedLayerIndex?(we().b[57][0]++,we().s[169]++,this.setState({selectedLayerIndex:i})):we().b[57][1]++,we().s[170]++,s=s.slice(0),we().s[171]++,cY(s,r,i),we().s[172]++,this.onLayersChange(s)}));Pn(this,"onLayersChange",(we().s[173]++,t=>{we().f[35]++;const r=(we().s[174]++,{...this.state.mapStyle,layers:t});we().s[175]++,this.onStyleChanged(r)}));Pn(this,"onLayerDestroy",(we().s[176]++,t=>{we().f[36]++;const r=(we().s[177]++,this.state.mapStyle.layers),i=(we().s[178]++,r.slice(0));we().s[179]++,i.splice(t,1),we().s[180]++,this.onLayersChange(i)}));Pn(this,"onLayerCopy",(we().s[181]++,t=>{we().f[37]++;const r=(we().s[182]++,this.state.mapStyle.layers),i=(we().s[183]++,r.slice(0)),s=(we().s[184]++,sI(i[t]));we().s[185]++,s.id=s.id+"-copy",we().s[186]++,i.splice(t,0,s),we().s[187]++,this.onLayersChange(i)}));Pn(this,"onLayerVisibilityToggle",(we().s[188]++,t=>{we().f[38]++;const r=(we().s[189]++,this.state.mapStyle.layers),i=(we().s[190]++,r.slice(0)),s=(we().s[191]++,{...i[t]}),a=(we().s[192]++,"layout"in s?(we().b[58][0]++,{...s.layout}):(we().b[58][1]++,{}));we().s[193]++,a.visibility=a.visibility==="none"?(we().b[59][0]++,"visible"):(we().b[59][1]++,"none"),we().s[194]++,s.layout=a,we().s[195]++,i[t]=s,we().s[196]++,this.onLayersChange(i)}));Pn(this,"onLayerIdChange",(we().s[197]++,(t,r,i)=>{we().f[39]++;const s=(we().s[198]++,this.state.mapStyle.layers.slice(0));we().s[199]++,s[t]={...s[t],id:i},we().s[200]++,this.onLayersChange(s)}));Pn(this,"onLayerChanged",(we().s[201]++,(t,r)=>{we().f[40]++;const i=(we().s[202]++,this.state.mapStyle.layers.slice(0));we().s[203]++,i[t]=r,we().s[204]++,this.onLayersChange(i)}));Pn(this,"setMapState",(we().s[205]++,t=>{we().f[41]++,we().s[206]++,this.setState({mapState:t},this.setStateInUrl)}));Pn(this,"setDefaultValues",(we().s[207]++,t=>{we().f[42]++;const r=(we().s[208]++,we().b[60][0]++,t.metadata||(we().b[60][1]++,{}));if(we().s[209]++,r["maputnik:renderer"]===void 0){we().b[61][0]++;const i=(we().s[210]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return we().s[211]++,i}else return we().b[61][1]++,we().s[212]++,t}));Pn(this,"openStyle",(we().s[213]++,(t,r)=>{we().f[43]++,we().s[214]++,this.setState({fileHandle:r}),we().s[215]++,t=this.setDefaultValues(t),we().s[216]++,this.onStyleChanged(t)}));Pn(this,"onMapChange",(we().s[246]++,t=>{we().f[52]++,we().s[247]++,this.setState({mapView:t})}));Pn(this,"setStateInUrl",(we().s[263]++,()=>{we().f[56]++;const{mapState:t,mapStyle:r,isOpen:i}=(we().s[264]++,this.state),{selectedLayerIndex:s}=(we().s[265]++,this.state),a=(we().s[266]++,new URL(location.href)),o=(we().s[267]++,pI(JSON.stringify(r)));we().s[268]++,a.searchParams.set("layer",`${o}~${s}`);const f=(we().s[269]++,Object.entries(i).map(([y,x])=>(we().f[57]++,we().s[270]++,x===!0?(we().b[74][0]++,y):(we().b[74][1]++,null))).filter(y=>(we().f[58]++,we().s[271]++,y!==null)));we().s[272]++,f.length>0?(we().b[75][0]++,we().s[273]++,a.searchParams.set("modal",f.join(","))):(we().b[75][1]++,we().s[274]++,a.searchParams.delete("modal")),we().s[275]++,t==="map"?(we().b[76][0]++,we().s[276]++,a.searchParams.delete("view")):(we().b[76][1]++,we().s[277]++,t==="inspect"?(we().b[77][0]++,we().s[278]++,a.searchParams.set("view","inspect")):we().b[77][1]++),we().s[279]++,history.replaceState({selectedLayerIndex:s},"Maputnik",a.href)}));Pn(this,"getInitialStateFromUrl",(we().s[280]++,t=>{we().f[59]++;const r=(we().s[281]++,new URL(location.href)),i=(we().s[282]++,r.searchParams.get("modal"));if(we().s[283]++,we().b[79][0]++,i&&(we().b[79][1]++,i!=="")){we().b[78][0]++;const o=(we().s[284]++,i.split(",")),f=(we().s[285]++,{});we().s[286]++,o.forEach(y=>{we().f[60]++,we().s[287]++,f[y]=!0}),we().s[288]++,this.setState({isOpen:{...this.state.isOpen,...f}})}else we().b[78][1]++;const s=(we().s[289]++,r.searchParams.get("view"));we().s[290]++,we().b[81][0]++,s&&(we().b[81][1]++,s!=="")?(we().b[80][0]++,we().s[291]++,this.setMapState(s)):we().b[80][1]++;const a=(we().s[292]++,r.searchParams.get("layer"));if(we().s[293]++,a){we().b[82][0]++,we().s[294]++;try{const o=(we().s[295]++,a.split("~")),[f,y]=(we().s[296]++,[o[0],parseInt(o[1],10)]);let x=(we().s[297]++,!0);if(we().s[298]++,f!=="-"){we().b[83][0]++;const B=(we().s[299]++,pI(JSON.stringify(t)));we().s[300]++,B!==parseInt(f,10)?(we().b[84][0]++,we().s[301]++,x=!1):we().b[84][1]++}else we().b[83][1]++;we().s[302]++,x?(we().b[85][0]++,we().s[303]++,this.setState({selectedLayerIndex:y,selectedLayerOriginalId:t.layers[y].id})):we().b[85][1]++}catch(o){we().s[304]++,console.warn(o)}}else we().b[82][1]++}));Pn(this,"onLayerSelect",(we().s[305]++,t=>{we().f[61]++,we().s[306]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));Pn(this,"onChangeOpenlayersDebug",(we().s[310]++,(t,r)=>{we().f[65]++,we().s[311]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));Pn(this,"onChangeMaplibreGlDebug",(we().s[312]++,(t,r)=>{we().f[66]++,we().s[313]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));we().s[15]++,Hq(this),we().s[16]++,this.revisionStore=new Xpe;const r=(we().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(we().s[18]++,r.get("localport"));we().s[19]++,we().b[6][0]++,i==null&&(we().b[6][1]++,window.location.port!=="80")&&(we().b[6][2]++,window.location.port!=="443")?(we().b[5][0]++,we().s[20]++,i=window.location.port):we().b[5][1]++,we().s[21]++,this.styleStore=new Zpe({onLocalStyleChange:o=>(we().f[3]++,we().s[22]++,this.onStyleChanged(o,{save:!1})),port:i,host:r.get("localhost")});const s=(we().s[23]++,[{key:"?",handler:()=>{we().f[4]++,we().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{we().f[5]++,we().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{we().f[6]++,we().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{we().f[7]++,we().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{we().f[8]++,we().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{we().f[9]++,we().s[29]++,this.setMapState(this.state.mapState==="map"?(we().b[7][0]++,"inspect"):(we().b[7][1]++,"map"))}},{key:"m",handler:()=>{we().f[10]++,we().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{we().f[11]++,we().s[31]++,this.toggleModal("debug")}}]);we().s[32]++,document.body.addEventListener("keyup",o=>{if(we().f[12]++,we().s[33]++,o.key==="Escape")we().b[8][0]++,we().s[34]++,o.target.blur(),we().s[35]++,document.body.focus();else if(we().b[8][1]++,we().s[36]++,we().b[10][0]++,this.state.isOpen.shortcuts||(we().b[10][1]++,document.activeElement===document.body)){we().b[9][0]++;const f=(we().s[37]++,s.find(y=>(we().f[13]++,we().s[38]++,y.key===o.key)));we().s[39]++,f?(we().b[11][0]++,we().s[40]++,this.setModal("shortcuts",!1),we().s[41]++,f.handler()):we().b[11][1]++}else we().b[9][1]++});const a=(we().s[42]++,Fpe());we().s[43]++,we().b[13][0]++,a&&(we().b[13][1]++,window.confirm("Load style from URL: "+a+" and discard current changes?"))?(we().b[12][0]++,we().s[44]++,this.styleStore=new HF,we().s[45]++,LG(a,o=>(we().f[14]++,we().s[46]++,this.onStyleChanged(o))),we().s[47]++,qF()):(we().b[12][1]++,we().s[48]++,a?(we().b[14][0]++,we().s[49]++,qF()):we().b[14][1]++,we().s[50]++,this.styleStore.init(o=>{we().f[15]++,we().s[51]++,o?(we().b[15][0]++,we().s[52]++,console.log("Falling back to local storage for storing styles"),we().s[53]++,this.styleStore=new HF):we().b[15][1]++,we().s[54]++,this.styleStore.latestStyle(f=>(we().f[16]++,we().s[55]++,this.onStyleChanged(f,{initialLoad:!0}))),we().s[56]++,Bg.enabled()?(we().b[16][0]++,we().s[57]++,Bg.set("maputnik","styleStore",this.styleStore),we().s[58]++,Bg.set("maputnik","revisionStore",this.revisionStore)):we().b[16][1]++})),we().s[59]++,Bg.enabled()?(we().b[17][0]++,we().s[60]++,Bg.set("maputnik","revisionStore",this.revisionStore),we().s[61]++,Bg.set("maputnik","styleStore",this.styleStore)):we().b[17][1]++,we().s[62]++,this.state={errors:[],infos:[],mapStyle:Ec.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Ps,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},we().s[63]++,this.layerWatcher=new ime({onVectorLayersChange:o=>(we().f[17]++,we().s[64]++,this.setState({vectorLayers:o}))})}componentDidMount(){we().f[19]++,we().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){we().f[20]++,we().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){we().f[21]++,we().s[81]++,this.styleStore.save(t)}updateFonts(t){we().f[22]++;const r=(we().s[82]++,we().b[27][0]++,this.state.mapStyle.metadata||(we().b[27][1]++,{})),i=(we().s[83]++,we().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(we().b[28][1]++,CG.openmaptiles)),s=(we().s[84]++,typeof t=="string"?(we().b[29][0]++,t.replace("{key}",i)):(we().b[29][1]++,t));we().s[85]++,Dpe(s,a=>{we().f[23]++,we().s[86]++,this.setState({spec:JF(this.state.spec,"glyphs",a)})})}updateIcons(t){we().f[24]++,we().s[87]++,Rpe(t,r=>{we().f[25]++,we().s[88]++,this.setState({spec:JF(this.state.spec,"sprite",r)})})}fetchSources(){we().f[44]++;const t=(we().s[217]++,{});we().s[218]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(we().s[219]++,we().b[63][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(we().b[63][1]++,i.type==="vector")&&(we().b[63][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){we().b[62][0]++,we().s[220]++,t[r]={type:i.type,layers:[]};let s=(we().s[221]++,i.url);we().s[222]++;try{we().s[223]++,s=Xb(s,this.state.mapStyle)}catch(o){we().s[224]++,console.warn("Failed to setFetchAccessToken: ",o)}we().s[225]++;const a=o=>{if(we().f[45]++,we().s[226]++,Object.prototype.hasOwnProperty.call(o,"vector_layers"))we().b[64][1]++;else{we().b[64][0]++,we().s[227]++;return}const f=(we().s[228]++,Object.assign({},{[r]:this.state.sources[r]}));we().s[229]++;for(const y of o.vector_layers)we().s[230]++,f[r].layers.push(y.id);we().s[231]++,this.setState({sources:f})};we().s[232]++,s.startsWith("pmtiles://")?(we().b[65][0]++,we().s[233]++,new E6(s.substr(10)).getTileJson("").then(o=>(we().f[46]++,we().s[234]++,a(o))).catch(o=>{we().f[47]++,we().s[235]++,console.error("Failed to process sources for '%s'",s,o)})):(we().b[65][1]++,we().s[236]++,fetch(s,{mode:"cors"}).then(o=>(we().f[48]++,we().s[237]++,o.json())).then(o=>(we().f[49]++,we().s[238]++,a(o))).catch(o=>{we().f[50]++,we().s[239]++,console.error("Failed to process sources for '%s'",s,o)}))}else we().b[62][1]++,we().s[240]++,t[r]=(we().b[66][0]++,this.state.sources[r]||(we().b[66][1]++,this.state.mapStyle.sources[r]));we().s[241]++,WB(this.state.sources,t)?we().b[67][1]++:(we().b[67][0]++,we().s[242]++,console.debug("Setting sources"),we().s[243]++,this.setState({sources:t}))}_getRenderer(){we().f[51]++;const t=(we().s[244]++,we().b[68][0]++,this.state.mapStyle.metadata||(we().b[68][1]++,{}));return we().s[245]++,we().b[69][0]++,t["maputnik:renderer"]||(we().b[69][1]++,"mlgljs")}mapRenderer(){we().f[53]++;const{mapStyle:t,dirtyMapStyle:r}=(we().s[248]++,this.state),i=(we().s[249]++,{mapStyle:(we().b[70][0]++,r||(we().b[70][1]++,t)),replaceAccessTokens:y=>(we().f[54]++,we().s[250]++,Ec.replaceAccessTokens(y,{allowFallback:!0})),onDataChange:y=>{we().f[55]++,we().s[251]++,this.layerWatcher.analyzeMap(y.map),we().s[252]++,this.fetchSources()}}),s=(we().s[253]++,this._getRenderer());let a;we().s[254]++,s==="ol"?(we().b[71][0]++,we().s[255]++,a=ue.jsx(_se,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(we().b[71][1]++,we().s[256]++,a=ue.jsx(PX,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let o;we().s[257]++,this.state.mapState.match(/^filter-/)?(we().b[72][0]++,we().s[258]++,o=this.state.mapState.replace(/^filter-/,"")):we().b[72][1]++;const f=(we().s[259]++,{});return we().s[260]++,o?(we().b[73][0]++,we().s[261]++,f.filter=`url('#${o}')`):we().b[73][1]++,we().s[262]++,ue.jsx("div",{style:f,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:a})}setModal(t,r){we().f[62]++,we().s[307]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){we().f[63]++,we().s[308]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){we().f[64]++,we().s[309]++,this.setState({fileHandle:t})}render(){we().f[67]++;const t=(we().s[314]++,we().b[86][0]++,this.state.mapStyle.layers||(we().b[86][1]++,[])),r=(we().s[315]++,t.length>0?(we().b[87][0]++,t[this.state.selectedLayerIndex]):(we().b[87][1]++,void 0)),i=(we().s[316]++,ue.jsx(Vhe,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),s=(we().s[317]++,ue.jsx(Lle,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),a=(we().s[318]++,r?(we().b[88][0]++,ue.jsx(mhe,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(we().b[88][1]++,void 0)),o=(we().s[319]++,this.state.errors.length+this.state.infos.length>0?(we().b[89][0]++,ue.jsx(Xhe,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(we().b[89][1]++,void 0)),f=(we().s[320]++,ue.jsxs("div",{children:[ue.jsx(Zfe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),ue.jsx(Vfe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),ue.jsx(nfe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),ue.jsx(_fe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),ue.jsx(Yfe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),ue.jsx(Ufe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return we().s[321]++,ue.jsx(Zhe,{toolbar:i,layerList:s,layerEditor:a,map:this.mapRenderer(),bottom:o,modals:f})}}const lme=FQ.createRoot(document.querySelector("#app"));lme.render(ue.jsx(C6.Provider,{value:{className:"react-icons"},children:ue.jsx(ame,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-Cb9Aytjl.js.map
