var FW=Object.defineProperty;var UW=(n,e,t)=>e in n?FW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var On=(n,e,t)=>UW(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function La(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function _B(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var I3={exports:{}},ev={},k3={exports:{}},ys={},t8;function zW(){if(t8)return ys;t8=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.iterator;function S(Ne){return Ne===null||typeof Ne!="object"?null:(Ne=E&&Ne[E]||Ne["@@iterator"],typeof Ne=="function"?Ne:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,U={};function z(Ne,at,wt){this.props=Ne,this.context=at,this.refs=U,this.updater=wt||O}z.prototype.isReactComponent={},z.prototype.setState=function(Ne,at){if(typeof Ne!="object"&&typeof Ne!="function"&&Ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ne,at,"setState")},z.prototype.forceUpdate=function(Ne){this.updater.enqueueForceUpdate(this,Ne,"forceUpdate")};function q(){}q.prototype=z.prototype;function Q(Ne,at,wt){this.props=Ne,this.context=at,this.refs=U,this.updater=wt||O}var re=Q.prototype=new q;re.constructor=Q,k(re,z.prototype),re.isPureReactComponent=!0;var X=Array.isArray,Y=Object.prototype.hasOwnProperty,J={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function ie(Ne,at,wt){var Ct,ft={},Lt=null,Kt=null;if(at!=null)for(Ct in at.ref!==void 0&&(Kt=at.ref),at.key!==void 0&&(Lt=""+at.key),at)Y.call(at,Ct)&&!N.hasOwnProperty(Ct)&&(ft[Ct]=at[Ct]);var Fe=arguments.length-2;if(Fe===1)ft.children=wt;else if(1<Fe){for(var Te=Array(Fe),Se=0;Se<Fe;Se++)Te[Se]=arguments[Se+2];ft.children=Te}if(Ne&&Ne.defaultProps)for(Ct in Fe=Ne.defaultProps,Fe)ft[Ct]===void 0&&(ft[Ct]=Fe[Ct]);return{$$typeof:n,type:Ne,key:Lt,ref:Kt,props:ft,_owner:J.current}}function he(Ne,at){return{$$typeof:n,type:Ne.type,key:at,ref:Ne.ref,props:Ne.props,_owner:Ne._owner}}function de(Ne){return typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===n}function we(Ne){var at={"=":"=0",":":"=2"};return"$"+Ne.replace(/[=:]/g,function(wt){return at[wt]})}var fe=/\/+/g;function be(Ne,at){return typeof Ne=="object"&&Ne!==null&&Ne.key!=null?we(""+Ne.key):at.toString(36)}function Pe(Ne,at,wt,Ct,ft){var Lt=typeof Ne;(Lt==="undefined"||Lt==="boolean")&&(Ne=null);var Kt=!1;if(Ne===null)Kt=!0;else switch(Lt){case"string":case"number":Kt=!0;break;case"object":switch(Ne.$$typeof){case n:case e:Kt=!0}}if(Kt)return Kt=Ne,ft=ft(Kt),Ne=Ct===""?"."+be(Kt,0):Ct,X(ft)?(wt="",Ne!=null&&(wt=Ne.replace(fe,"$&/")+"/"),Pe(ft,at,wt,"",function(Se){return Se})):ft!=null&&(de(ft)&&(ft=he(ft,wt+(!ft.key||Kt&&Kt.key===ft.key?"":(""+ft.key).replace(fe,"$&/")+"/")+Ne)),at.push(ft)),1;if(Kt=0,Ct=Ct===""?".":Ct+":",X(Ne))for(var Fe=0;Fe<Ne.length;Fe++){Lt=Ne[Fe];var Te=Ct+be(Lt,Fe);Kt+=Pe(Lt,at,wt,Te,ft)}else if(Te=S(Ne),typeof Te=="function")for(Ne=Te.call(Ne),Fe=0;!(Lt=Ne.next()).done;)Lt=Lt.value,Te=Ct+be(Lt,Fe++),Kt+=Pe(Lt,at,wt,Te,ft);else if(Lt==="object")throw at=String(Ne),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(Ne).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.");return Kt}function pe(Ne,at,wt){if(Ne==null)return Ne;var Ct=[],ft=0;return Pe(Ne,Ct,"","",function(Lt){return at.call(wt,Lt,ft++)}),Ct}function it(Ne){if(Ne._status===-1){var at=Ne._result;at=at(),at.then(function(wt){(Ne._status===0||Ne._status===-1)&&(Ne._status=1,Ne._result=wt)},function(wt){(Ne._status===0||Ne._status===-1)&&(Ne._status=2,Ne._result=wt)}),Ne._status===-1&&(Ne._status=0,Ne._result=at)}if(Ne._status===1)return Ne._result.default;throw Ne._result}var We={current:null},$e={transition:null},ht={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:$e,ReactCurrentOwner:J};function De(){throw Error("act(...) is not supported in production builds of React.")}return ys.Children={map:pe,forEach:function(Ne,at,wt){pe(Ne,function(){at.apply(this,arguments)},wt)},count:function(Ne){var at=0;return pe(Ne,function(){at++}),at},toArray:function(Ne){return pe(Ne,function(at){return at})||[]},only:function(Ne){if(!de(Ne))throw Error("React.Children.only expected to receive a single React element child.");return Ne}},ys.Component=z,ys.Fragment=t,ys.Profiler=i,ys.PureComponent=Q,ys.StrictMode=r,ys.Suspense=d,ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ht,ys.act=De,ys.cloneElement=function(Ne,at,wt){if(Ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ne+".");var Ct=k({},Ne.props),ft=Ne.key,Lt=Ne.ref,Kt=Ne._owner;if(at!=null){if(at.ref!==void 0&&(Lt=at.ref,Kt=J.current),at.key!==void 0&&(ft=""+at.key),Ne.type&&Ne.type.defaultProps)var Fe=Ne.type.defaultProps;for(Te in at)Y.call(at,Te)&&!N.hasOwnProperty(Te)&&(Ct[Te]=at[Te]===void 0&&Fe!==void 0?Fe[Te]:at[Te])}var Te=arguments.length-2;if(Te===1)Ct.children=wt;else if(1<Te){Fe=Array(Te);for(var Se=0;Se<Te;Se++)Fe[Se]=arguments[Se+2];Ct.children=Fe}return{$$typeof:n,type:Ne.type,key:ft,ref:Lt,props:Ct,_owner:Kt}},ys.createContext=function(Ne){return Ne={$$typeof:a,_currentValue:Ne,_currentValue2:Ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ne.Provider={$$typeof:s,_context:Ne},Ne.Consumer=Ne},ys.createElement=ie,ys.createFactory=function(Ne){var at=ie.bind(null,Ne);return at.type=Ne,at},ys.createRef=function(){return{current:null}},ys.forwardRef=function(Ne){return{$$typeof:o,render:Ne}},ys.isValidElement=de,ys.lazy=function(Ne){return{$$typeof:b,_payload:{_status:-1,_result:Ne},_init:it}},ys.memo=function(Ne,at){return{$$typeof:g,type:Ne,compare:at===void 0?null:at}},ys.startTransition=function(Ne){var at=$e.transition;$e.transition={};try{Ne()}finally{$e.transition=at}},ys.unstable_act=De,ys.useCallback=function(Ne,at){return We.current.useCallback(Ne,at)},ys.useContext=function(Ne){return We.current.useContext(Ne)},ys.useDebugValue=function(){},ys.useDeferredValue=function(Ne){return We.current.useDeferredValue(Ne)},ys.useEffect=function(Ne,at){return We.current.useEffect(Ne,at)},ys.useId=function(){return We.current.useId()},ys.useImperativeHandle=function(Ne,at,wt){return We.current.useImperativeHandle(Ne,at,wt)},ys.useInsertionEffect=function(Ne,at){return We.current.useInsertionEffect(Ne,at)},ys.useLayoutEffect=function(Ne,at){return We.current.useLayoutEffect(Ne,at)},ys.useMemo=function(Ne,at){return We.current.useMemo(Ne,at)},ys.useReducer=function(Ne,at,wt){return We.current.useReducer(Ne,at,wt)},ys.useRef=function(Ne){return We.current.useRef(Ne)},ys.useState=function(Ne){return We.current.useState(Ne)},ys.useSyncExternalStore=function(Ne,at,wt){return We.current.useSyncExternalStore(Ne,at,wt)},ys.useTransition=function(){return We.current.useTransition()},ys.version="18.3.1",ys}var n8;function Fa(){return n8||(n8=1,k3.exports=zW()),k3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r8;function jW(){if(r8)return ev;r8=1;var n=Fa(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,d,g){var b,E={},S=null,O=null;g!==void 0&&(S=""+g),d.key!==void 0&&(S=""+d.key),d.ref!==void 0&&(O=d.ref);for(b in d)r.call(d,b)&&!s.hasOwnProperty(b)&&(E[b]=d[b]);if(o&&o.defaultProps)for(b in d=o.defaultProps,d)E[b]===void 0&&(E[b]=d[b]);return{$$typeof:e,type:o,key:S,ref:O,props:E,_owner:i.current}}return ev.Fragment=t,ev.jsx=a,ev.jsxs=a,ev}var i8;function NW(){return i8||(i8=1,I3.exports=jW()),I3.exports}var le=NW(),ui=Fa();const Zn=La(ui);var UL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZE=Zn.createContext&&Zn.createContext(UL),GW=["attr","size","title"];function WW(n,e){if(n==null)return{};var t=QW(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function QW(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Rb(){return Rb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rb.apply(this,arguments)}function o8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Kb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?o8(Object(t),!0).forEach(function(r){qW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qW(n,e,t){return e=YW(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YW(n){var e=$W(n,"string");return typeof e=="symbol"?e:e+""}function $W(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zL(n){return n&&n.map((e,t)=>Zn.createElement(e.tag,Kb({key:t},e.attr),zL(e.child)))}function eu(n){return e=>Zn.createElement(VW,Rb({attr:Kb({},n.attr)},e),zL(n.child))}function VW(n){var e=t=>{var{attr:r,size:i,title:s}=n,a=WW(n,GW),o=i||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Zn.createElement("svg",Rb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:d,style:Kb(Kb({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&Zn.createElement("title",null,s),n.children)};return ZE!==void 0?Zn.createElement(ZE.Consumer,null,t=>e(t)):e(UL)}var BC={},T3={exports:{}},dh={},P3={exports:{}},R3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s8;function HW(){return s8||(s8=1,function(n){function e($e,ht){var De=$e.length;$e.push(ht);e:for(;0<De;){var Ne=De-1>>>1,at=$e[Ne];if(0<i(at,ht))$e[Ne]=ht,$e[De]=at,De=Ne;else break e}}function t($e){return $e.length===0?null:$e[0]}function r($e){if($e.length===0)return null;var ht=$e[0],De=$e.pop();if(De!==ht){$e[0]=De;e:for(var Ne=0,at=$e.length,wt=at>>>1;Ne<wt;){var Ct=2*(Ne+1)-1,ft=$e[Ct],Lt=Ct+1,Kt=$e[Lt];if(0>i(ft,De))Lt<at&&0>i(Kt,ft)?($e[Ne]=Kt,$e[Lt]=De,Ne=Lt):($e[Ne]=ft,$e[Ct]=De,Ne=Ct);else if(Lt<at&&0>i(Kt,De))$e[Ne]=Kt,$e[Lt]=De,Ne=Lt;else break e}}return ht}function i($e,ht){var De=$e.sortIndex-ht.sortIndex;return De!==0?De:$e.id-ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var d=[],g=[],b=1,E=null,S=3,O=!1,k=!1,U=!1,z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re($e){for(var ht=t(g);ht!==null;){if(ht.callback===null)r(g);else if(ht.startTime<=$e)r(g),ht.sortIndex=ht.expirationTime,e(d,ht);else break;ht=t(g)}}function X($e){if(U=!1,re($e),!k)if(t(d)!==null)k=!0,it(Y);else{var ht=t(g);ht!==null&&We(X,ht.startTime-$e)}}function Y($e,ht){k=!1,U&&(U=!1,q(ie),ie=-1),O=!0;var De=S;try{for(re(ht),E=t(d);E!==null&&(!(E.expirationTime>ht)||$e&&!we());){var Ne=E.callback;if(typeof Ne=="function"){E.callback=null,S=E.priorityLevel;var at=Ne(E.expirationTime<=ht);ht=n.unstable_now(),typeof at=="function"?E.callback=at:E===t(d)&&r(d),re(ht)}else r(d);E=t(d)}if(E!==null)var wt=!0;else{var Ct=t(g);Ct!==null&&We(X,Ct.startTime-ht),wt=!1}return wt}finally{E=null,S=De,O=!1}}var J=!1,N=null,ie=-1,he=5,de=-1;function we(){return!(n.unstable_now()-de<he)}function fe(){if(N!==null){var $e=n.unstable_now();de=$e;var ht=!0;try{ht=N(!0,$e)}finally{ht?be():(J=!1,N=null)}}else J=!1}var be;if(typeof Q=="function")be=function(){Q(fe)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,pe=Pe.port2;Pe.port1.onmessage=fe,be=function(){pe.postMessage(null)}}else be=function(){z(fe,0)};function it($e){N=$e,J||(J=!0,be())}function We($e,ht){ie=z(function(){$e(n.unstable_now())},ht)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($e){$e.callback=null},n.unstable_continueExecution=function(){k||O||(k=!0,it(Y))},n.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<$e?Math.floor(1e3/$e):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function($e){switch(S){case 1:case 2:case 3:var ht=3;break;default:ht=S}var De=S;S=ht;try{return $e()}finally{S=De}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($e,ht){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var De=S;S=$e;try{return ht()}finally{S=De}},n.unstable_scheduleCallback=function($e,ht,De){var Ne=n.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Ne+De:Ne):De=Ne,$e){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=De+at,$e={id:b++,callback:ht,priorityLevel:$e,startTime:De,expirationTime:at,sortIndex:-1},De>Ne?($e.sortIndex=De,e(g,$e),t(d)===null&&$e===t(g)&&(U?(q(ie),ie=-1):U=!0,We(X,De-Ne))):($e.sortIndex=at,e(d,$e),k||O||(k=!0,it(Y))),$e},n.unstable_shouldYield=we,n.unstable_wrapCallback=function($e){var ht=S;return function(){var De=S;S=ht;try{return $e.apply(this,arguments)}finally{S=De}}}}(R3)),R3}var a8;function ZW(){return a8||(a8=1,P3.exports=HW()),P3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l8;function XW(){if(l8)return dh;l8=1;var n=Fa(),e=ZW();function t(m){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+m,L=1;L<arguments.length;L++)_+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,_){a(m,_),a(m+"Capture",_)}function a(m,_){for(i[m]=_,m=0;m<_.length;m++)r.add(_[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},E={};function S(m){return d.call(E,m)?!0:d.call(b,m)?!1:g.test(m)?E[m]=!0:(b[m]=!0,!1)}function O(m,_,L,W){if(L!==null&&L.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return W?!1:L!==null?!L.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function k(m,_,L,W){if(_===null||typeof _>"u"||O(m,_,L,W))return!0;if(W)return!1;if(L!==null)switch(L.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function U(m,_,L,W,ae,ge,Ze){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=W,this.attributeNamespace=ae,this.mustUseProperty=L,this.propertyName=m,this.type=_,this.sanitizeURL=ge,this.removeEmptyString=Ze}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){z[m]=new U(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var _=m[0];z[_]=new U(_,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){z[m]=new U(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){z[m]=new U(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){z[m]=new U(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){z[m]=new U(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){z[m]=new U(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){z[m]=new U(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){z[m]=new U(m,5,!1,m.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function Q(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var _=m.replace(q,Q);z[_]=new U(_,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var _=m.replace(q,Q);z[_]=new U(_,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var _=m.replace(q,Q);z[_]=new U(_,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){z[m]=new U(m,1,!1,m.toLowerCase(),null,!1,!1)}),z.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){z[m]=new U(m,1,!1,m.toLowerCase(),null,!0,!0)});function re(m,_,L,W){var ae=z.hasOwnProperty(_)?z[_]:null;(ae!==null?ae.type!==0:W||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(k(_,L,ae,W)&&(L=null),W||ae===null?S(_)&&(L===null?m.removeAttribute(_):m.setAttribute(_,""+L)):ae.mustUseProperty?m[ae.propertyName]=L===null?ae.type===3?!1:"":L:(_=ae.attributeName,W=ae.attributeNamespace,L===null?m.removeAttribute(_):(ae=ae.type,L=ae===3||ae===4&&L===!0?"":""+L,W?m.setAttributeNS(W,_,L):m.setAttribute(_,L))))}var X=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),J=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),we=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),$e=Symbol.iterator;function ht(m){return m===null||typeof m!="object"?null:(m=$e&&m[$e]||m["@@iterator"],typeof m=="function"?m:null)}var De=Object.assign,Ne;function at(m){if(Ne===void 0)try{throw Error()}catch(L){var _=L.stack.trim().match(/\n( *(at )?)/);Ne=_&&_[1]||""}return`
`+Ne+m}var wt=!1;function Ct(m,_){if(!m||wt)return"";wt=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Cn){var W=Cn}Reflect.construct(m,[],_)}else{try{_.call()}catch(Cn){W=Cn}m.call(_.prototype)}else{try{throw Error()}catch(Cn){W=Cn}m()}}catch(Cn){if(Cn&&W&&typeof Cn.stack=="string"){for(var ae=Cn.stack.split(`
`),ge=W.stack.split(`
`),Ze=ae.length-1,It=ge.length-1;1<=Ze&&0<=It&&ae[Ze]!==ge[It];)It--;for(;1<=Ze&&0<=It;Ze--,It--)if(ae[Ze]!==ge[It]){if(Ze!==1||It!==1)do if(Ze--,It--,0>It||ae[Ze]!==ge[It]){var Gt=`
`+ae[Ze].replace(" at new "," at ");return m.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",m.displayName)),Gt}while(1<=Ze&&0<=It);break}}}finally{wt=!1,Error.prepareStackTrace=L}return(m=m?m.displayName||m.name:"")?at(m):""}function ft(m){switch(m.tag){case 5:return at(m.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 2:case 15:return m=Ct(m.type,!1),m;case 11:return m=Ct(m.type.render,!1),m;case 1:return m=Ct(m.type,!0),m;default:return""}}function Lt(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case J:return"Portal";case he:return"Profiler";case ie:return"StrictMode";case be:return"Suspense";case Pe:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case we:return(m.displayName||"Context")+".Consumer";case de:return(m._context.displayName||"Context")+".Provider";case fe:var _=m.render;return m=m.displayName,m||(m=_.displayName||_.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case pe:return _=m.displayName||null,_!==null?_:Lt(m.type)||"Memo";case it:_=m._payload,m=m._init;try{return Lt(m(_))}catch{}}return null}function Kt(m){var _=m.type;switch(m.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=_.render,m=m.displayName||m.name||"",_.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lt(_);case 8:return _===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Fe(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Te(m){var _=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Se(m){var _=Te(m)?"checked":"value",L=Object.getOwnPropertyDescriptor(m.constructor.prototype,_),W=""+m[_];if(!m.hasOwnProperty(_)&&typeof L<"u"&&typeof L.get=="function"&&typeof L.set=="function"){var ae=L.get,ge=L.set;return Object.defineProperty(m,_,{configurable:!0,get:function(){return ae.call(this)},set:function(Ze){W=""+Ze,ge.call(this,Ze)}}),Object.defineProperty(m,_,{enumerable:L.enumerable}),{getValue:function(){return W},setValue:function(Ze){W=""+Ze},stopTracking:function(){m._valueTracker=null,delete m[_]}}}}function Je(m){m._valueTracker||(m._valueTracker=Se(m))}function yt(m){if(!m)return!1;var _=m._valueTracker;if(!_)return!0;var L=_.getValue(),W="";return m&&(W=Te(m)?m.checked?"true":"false":m.value),m=W,m!==L?(_.setValue(m),!0):!1}function dt(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Ut(m,_){var L=_.checked;return De({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:L??m._wrapperState.initialChecked})}function en(m,_){var L=_.defaultValue==null?"":_.defaultValue,W=_.checked!=null?_.checked:_.defaultChecked;L=Fe(_.value!=null?_.value:L),m._wrapperState={initialChecked:W,initialValue:L,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function Nt(m,_){_=_.checked,_!=null&&re(m,"checked",_,!1)}function yn(m,_){Nt(m,_);var L=Fe(_.value),W=_.type;if(L!=null)W==="number"?(L===0&&m.value===""||m.value!=L)&&(m.value=""+L):m.value!==""+L&&(m.value=""+L);else if(W==="submit"||W==="reset"){m.removeAttribute("value");return}_.hasOwnProperty("value")?Rr(m,_.type,L):_.hasOwnProperty("defaultValue")&&Rr(m,_.type,Fe(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(m.defaultChecked=!!_.defaultChecked)}function jn(m,_,L){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var W=_.type;if(!(W!=="submit"&&W!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+m._wrapperState.initialValue,L||_===m.value||(m.value=_),m.defaultValue=_}L=m.name,L!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,L!==""&&(m.name=L)}function Rr(m,_,L){(_!=="number"||dt(m.ownerDocument)!==m)&&(L==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+L&&(m.defaultValue=""+L))}var sr=Array.isArray;function Jn(m,_,L,W){if(m=m.options,_){_={};for(var ae=0;ae<L.length;ae++)_["$"+L[ae]]=!0;for(L=0;L<m.length;L++)ae=_.hasOwnProperty("$"+m[L].value),m[L].selected!==ae&&(m[L].selected=ae),ae&&W&&(m[L].defaultSelected=!0)}else{for(L=""+Fe(L),_=null,ae=0;ae<m.length;ae++){if(m[ae].value===L){m[ae].selected=!0,W&&(m[ae].defaultSelected=!0);return}_!==null||m[ae].disabled||(_=m[ae])}_!==null&&(_.selected=!0)}}function mr(m,_){if(_.dangerouslySetInnerHTML!=null)throw Error(t(91));return De({},_,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function pr(m,_){var L=_.value;if(L==null){if(L=_.children,_=_.defaultValue,L!=null){if(_!=null)throw Error(t(92));if(sr(L)){if(1<L.length)throw Error(t(93));L=L[0]}_=L}_==null&&(_=""),L=_}m._wrapperState={initialValue:Fe(L)}}function xr(m,_){var L=Fe(_.value),W=Fe(_.defaultValue);L!=null&&(L=""+L,L!==m.value&&(m.value=L),_.defaultValue==null&&m.defaultValue!==L&&(m.defaultValue=L)),W!=null&&(m.defaultValue=""+W)}function Qn(m){var _=m.textContent;_===m._wrapperState.initialValue&&_!==""&&_!==null&&(m.value=_)}function Er(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(m,_){return m==null||m==="http://www.w3.org/1999/xhtml"?Er(_):m==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var Ae,me=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,L,W,ae){MSApp.execUnsafeLocalFunction(function(){return m(_,L,W,ae)})}:m}(function(m,_){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=_;else{for(Ae=Ae||document.createElement("div"),Ae.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=Ae.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;_.firstChild;)m.appendChild(_.firstChild)}});function Xe(m,_){if(_){var L=m.firstChild;if(L&&L===m.lastChild&&L.nodeType===3){L.nodeValue=_;return}}m.textContent=_}var Et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yt=["Webkit","ms","Moz","O"];Object.keys(Et).forEach(function(m){Yt.forEach(function(_){_=_+m.charAt(0).toUpperCase()+m.substring(1),Et[_]=Et[m]})});function nn(m,_,L){return _==null||typeof _=="boolean"||_===""?"":L||typeof _!="number"||_===0||Et.hasOwnProperty(m)&&Et[m]?(""+_).trim():_+"px"}function rr(m,_){m=m.style;for(var L in _)if(_.hasOwnProperty(L)){var W=L.indexOf("--")===0,ae=nn(L,_[L],W);L==="float"&&(L="cssFloat"),W?m.setProperty(L,ae):m[L]=ae}}var Ee=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oe(m,_){if(_){if(Ee[m]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(t(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(t(61))}if(_.style!=null&&typeof _.style!="object")throw Error(t(62))}}function ve(m,_){if(m.indexOf("-")===-1)return typeof _.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p=null;function ze(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var rt=null,pt=null,Bt=null;function vt(m){if(m=Ki(m)){if(typeof rt!="function")throw Error(t(280));var _=m.stateNode;_&&(_=Es(_),rt(m.stateNode,m.type,_))}}function Xt(m){pt?Bt?Bt.push(m):Bt=[m]:pt=m}function tn(){if(pt){var m=pt,_=Bt;if(Bt=pt=null,vt(m),_)for(m=0;m<_.length;m++)vt(_[m])}}function zt(m,_){return m(_)}function _t(){}var Tn=!1;function Sn(m,_,L){if(Tn)return m(_,L);Tn=!0;try{return zt(m,_,L)}finally{Tn=!1,(pt!==null||Bt!==null)&&(_t(),tn())}}function Ar(m,_){var L=m.stateNode;if(L===null)return null;var W=Es(L);if(W===null)return null;L=W[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(W=!W.disabled)||(m=m.type,W=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!W;break e;default:m=!1}if(m)return null;if(L&&typeof L!="function")throw Error(t(231,_,typeof L));return L}var wr=!1;if(o)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){wr=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{wr=!1}function Fn(m,_,L,W,ae,ge,Ze,It,Gt){var Cn=Array.prototype.slice.call(arguments,3);try{_.apply(L,Cn)}catch(ar){this.onError(ar)}}var Rn=!1,Br=null,Mr=!1,Kr=null,ir={onError:function(m){Rn=!0,Br=m}};function co(m,_,L,W,ae,ge,Ze,It,Gt){Rn=!1,Br=null,Fn.apply(ir,arguments)}function Sa(m,_,L,W,ae,ge,Ze,It,Gt){if(co.apply(this,arguments),Rn){if(Rn){var Cn=Br;Rn=!1,Br=null}else throw Error(t(198));Mr||(Mr=!0,Kr=Cn)}}function qi(m){var _=m,L=m;if(m.alternate)for(;_.return;)_=_.return;else{m=_;do _=m,_.flags&4098&&(L=_.return),m=_.return;while(m)}return _.tag===3?L:null}function yi(m){if(m.tag===13){var _=m.memoizedState;if(_===null&&(m=m.alternate,m!==null&&(_=m.memoizedState)),_!==null)return _.dehydrated}return null}function oo(m){if(qi(m)!==m)throw Error(t(188))}function Mo(m){var _=m.alternate;if(!_){if(_=qi(m),_===null)throw Error(t(188));return _!==m?null:m}for(var L=m,W=_;;){var ae=L.return;if(ae===null)break;var ge=ae.alternate;if(ge===null){if(W=ae.return,W!==null){L=W;continue}break}if(ae.child===ge.child){for(ge=ae.child;ge;){if(ge===L)return oo(ae),m;if(ge===W)return oo(ae),_;ge=ge.sibling}throw Error(t(188))}if(L.return!==W.return)L=ae,W=ge;else{for(var Ze=!1,It=ae.child;It;){if(It===L){Ze=!0,L=ae,W=ge;break}if(It===W){Ze=!0,W=ae,L=ge;break}It=It.sibling}if(!Ze){for(It=ge.child;It;){if(It===L){Ze=!0,L=ge,W=ae;break}if(It===W){Ze=!0,W=ge,L=ae;break}It=It.sibling}if(!Ze)throw Error(t(189))}}if(L.alternate!==W)throw Error(t(190))}if(L.tag!==3)throw Error(t(188));return L.stateNode.current===L?m:_}function Ti(m){return m=Mo(m),m!==null?Ua(m):null}function Ua(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var _=Ua(m);if(_!==null)return _;m=m.sibling}return null}var Ea=e.unstable_scheduleCallback,ns=e.unstable_cancelCallback,Aa=e.unstable_shouldYield,Al=e.unstable_requestPaint,ao=e.unstable_now,Pu=e.unstable_getCurrentPriorityLevel,tu=e.unstable_ImmediatePriority,so=e.unstable_UserBlockingPriority,Dr=e.unstable_NormalPriority,Za=e.unstable_LowPriority,Ps=e.unstable_IdlePriority,ia=null,Qe=null;function bt(m){if(Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(ia,m,void 0,(m.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:er,Nn=Math.log,un=Math.LN2;function er(m){return m>>>=0,m===0?32:31-(Nn(m)/un|0)|0}var Pi=64,ho=4194304;function _s(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Ns(m,_){var L=m.pendingLanes;if(L===0)return 0;var W=0,ae=m.suspendedLanes,ge=m.pingedLanes,Ze=L&268435455;if(Ze!==0){var It=Ze&~ae;It!==0?W=_s(It):(ge&=Ze,ge!==0&&(W=_s(ge)))}else Ze=L&~ae,Ze!==0?W=_s(Ze):ge!==0&&(W=_s(ge));if(W===0)return 0;if(_!==0&&_!==W&&!(_&ae)&&(ae=W&-W,ge=_&-_,ae>=ge||ae===16&&(ge&4194240)!==0))return _;if(W&4&&(W|=L&16),_=m.entangledLanes,_!==0)for(m=m.entanglements,_&=W;0<_;)L=31-fn(_),ae=1<<L,W|=m[L],_&=~ae;return W}function vA(m,_){switch(m){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(m,_){for(var L=m.suspendedLanes,W=m.pingedLanes,ae=m.expirationTimes,ge=m.pendingLanes;0<ge;){var Ze=31-fn(ge),It=1<<Ze,Gt=ae[Ze];Gt===-1?(!(It&L)||It&W)&&(ae[Ze]=vA(It,_)):Gt<=_&&(m.expiredLanes|=It),ge&=~It}}function wi(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Xa(){var m=Pi;return Pi<<=1,!(Pi&4194240)&&(Pi=64),m}function Ai(m){for(var _=[],L=0;31>L;L++)_.push(m);return _}function ca(m,_,L){m.pendingLanes|=_,_!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,_=31-fn(_),m[_]=L}function iA(m,_){var L=m.pendingLanes&~_;m.pendingLanes=_,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=_,m.mutableReadLanes&=_,m.entangledLanes&=_,_=m.entanglements;var W=m.eventTimes;for(m=m.expirationTimes;0<L;){var ae=31-fn(L),ge=1<<ae;_[ae]=0,W[ae]=-1,m[ae]=-1,L&=~ge}}function ls(m,_){var L=m.entangledLanes|=_;for(m=m.entanglements;L;){var W=31-fn(L),ae=1<<W;ae&_|m[W]&_&&(m[W]|=_),L&=~ae}}var Lr=0;function Ei(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var Ja,Rs,So,Gs,hu,zl=!1,rs=[],Vs=null,fo=null,ms=null,Ms=new Map,el=new Map,Ks=[],El="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oA(m,_){switch(m){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Ms.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(_.pointerId)}}function Vi(m,_,L,W,ae,ge){return m===null||m.nativeEvent!==ge?(m={blockedOn:_,domEventName:L,eventSystemFlags:W,nativeEvent:ge,targetContainers:[ae]},_!==null&&(_=Ki(_),_!==null&&Rs(_)),m):(m.eventSystemFlags|=W,_=m.targetContainers,ae!==null&&_.indexOf(ae)===-1&&_.push(ae),m)}function nu(m,_,L,W,ae){switch(_){case"focusin":return Vs=Vi(Vs,m,_,L,W,ae),!0;case"dragenter":return fo=Vi(fo,m,_,L,W,ae),!0;case"mouseover":return ms=Vi(ms,m,_,L,W,ae),!0;case"pointerover":var ge=ae.pointerId;return Ms.set(ge,Vi(Ms.get(ge)||null,m,_,L,W,ae)),!0;case"gotpointercapture":return ge=ae.pointerId,el.set(ge,Vi(el.get(ge)||null,m,_,L,W,ae)),!0}return!1}function Ui(m){var _=Bo(m.target);if(_!==null){var L=qi(_);if(L!==null){if(_=L.tag,_===13){if(_=yi(L),_!==null){m.blockedOn=_,hu(m.priority,function(){So(L)});return}}else if(_===3&&L.stateNode.current.memoizedState.isDehydrated){m.blockedOn=L.tag===3?L.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Jr(m){if(m.blockedOn!==null)return!1;for(var _=m.targetContainers;0<_.length;){var L=si(m.domEventName,m.eventSystemFlags,_[0],m.nativeEvent);if(L===null){L=m.nativeEvent;var W=new L.constructor(L.type,L);p=W,L.target.dispatchEvent(W),p=null}else return _=Ki(L),_!==null&&Rs(_),m.blockedOn=L,!1;_.shift()}return!0}function ru(m,_,L){Jr(m)&&L.delete(_)}function Ni(){zl=!1,Vs!==null&&Jr(Vs)&&(Vs=null),fo!==null&&Jr(fo)&&(fo=null),ms!==null&&Jr(ms)&&(ms=null),Ms.forEach(ru),el.forEach(ru)}function lo(m,_){m.blockedOn===_&&(m.blockedOn=null,zl||(zl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ni)))}function Ri(m){function _(ae){return lo(ae,m)}if(0<rs.length){lo(rs[0],m);for(var L=1;L<rs.length;L++){var W=rs[L];W.blockedOn===m&&(W.blockedOn=null)}}for(Vs!==null&&lo(Vs,m),fo!==null&&lo(fo,m),ms!==null&&lo(ms,m),Ms.forEach(_),el.forEach(_),L=0;L<Ks.length;L++)W=Ks[L],W.blockedOn===m&&(W.blockedOn=null);for(;0<Ks.length&&(L=Ks[0],L.blockedOn===null);)Ui(L),L.blockedOn===null&&Ks.shift()}var ee=X.ReactCurrentBatchConfig,Be=!0;function tt(m,_,L,W){var ae=Lr,ge=ee.transition;ee.transition=null;try{Lr=1,Or(m,_,L,W)}finally{Lr=ae,ee.transition=ge}}function qt(m,_,L,W){var ae=Lr,ge=ee.transition;ee.transition=null;try{Lr=4,Or(m,_,L,W)}finally{Lr=ae,ee.transition=ge}}function Or(m,_,L,W){if(Be){var ae=si(m,_,L,W);if(ae===null)Jd(m,_,W,Gn,L),oA(m,W);else if(nu(ae,m,_,L,W))W.stopPropagation();else if(oA(m,W),_&4&&-1<El.indexOf(m)){for(;ae!==null;){var ge=Ki(ae);if(ge!==null&&Ja(ge),ge=si(m,_,L,W),ge===null&&Jd(m,_,W,Gn,L),ge===ae)break;ae=ge}ae!==null&&W.stopPropagation()}else Jd(m,_,W,null,L)}}var Gn=null;function si(m,_,L,W){if(Gn=null,m=ze(W),m=Bo(m),m!==null)if(_=qi(m),_===null)m=null;else if(L=_.tag,L===13){if(m=yi(_),m!==null)return m;m=null}else if(L===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;m=null}else _!==m&&(m=null);return Gn=m,null}function ci(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pu()){case tu:return 1;case so:return 4;case Dr:case Za:return 16;case Ps:return 536870912;default:return 16}default:return 16}}var gr=null,Ir=null,vi=null;function Eo(){if(vi)return vi;var m,_=Ir,L=_.length,W,ae="value"in gr?gr.value:gr.textContent,ge=ae.length;for(m=0;m<L&&_[m]===ae[m];m++);var Ze=L-m;for(W=1;W<=Ze&&_[L-W]===ae[ge-W];W++);return vi=ae.slice(m,1<W?1-W:void 0)}function ki(m){var _=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&_===13&&(m=13)):m=_,m===10&&(m=13),32<=m||m===13?m:0}function qr(){return!0}function Hi(){return!1}function Zi(m){function _(L,W,ae,ge,Ze){this._reactName=L,this._targetInst=ae,this.type=W,this.nativeEvent=ge,this.target=Ze,this.currentTarget=null;for(var It in m)m.hasOwnProperty(It)&&(L=m[It],this[It]=L?L(ge):ge[It]);return this.isDefaultPrevented=(ge.defaultPrevented!=null?ge.defaultPrevented:ge.returnValue===!1)?qr:Hi,this.isPropagationStopped=Hi,this}return De(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var L=this.nativeEvent;L&&(L.preventDefault?L.preventDefault():typeof L.returnValue!="unknown"&&(L.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var L=this.nativeEvent;L&&(L.stopPropagation?L.stopPropagation():typeof L.cancelBubble!="unknown"&&(L.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),_}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=Zi(us),za=De({},us,{view:0,detail:0}),fu=Zi(za),Hs,dc,Ba,cl=De({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xh,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Ba&&(Ba&&m.type==="mousemove"?(Hs=m.screenX-Ba.screenX,dc=m.screenY-Ba.screenY):dc=Hs=0,Ba=m),Hs)},movementY:function(m){return"movementY"in m?m.movementY:dc}}),ld=Zi(cl),Ru=De({},cl,{dataTransfer:0}),Ku=Zi(Ru),bh=De({},za,{relatedTarget:0}),Ss=Zi(bh),Du=De({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),ud=Zi(Du),gp=De({},us,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),sA=Zi(gp),qd=De({},us,{data:0}),Lc=Zi(qd),yp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zs(m){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(m):(m=hc[m])?!!_[m]:!1}function xh(){return Zs}var ef=De({},za,{key:function(m){if(m.key){var _=yp[m.key]||m.key;if(_!=="Unidentified")return _}return m.type==="keypress"?(m=ki(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Rf[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xh,charCode:function(m){return m.type==="keypress"?ki(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?ki(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Ad=Zi(ef),tf=De({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=Zi(tf),fc=De({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xh}),wh=Zi(fc),Mh=De({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),dd=Zi(Mh),am=De({},cl,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Fc=Zi(am),pu=[9,13,27,32],Sh=o&&"CompositionEvent"in window,mu=null;o&&"documentMode"in document&&(mu=document.documentMode);var aA=o&&"TextEvent"in window&&!mu,Uc=o&&(!Sh||mu&&8<mu&&11>=mu),Yd=" ",nf=!1;function iu(m,_){switch(m){case"keyup":return pu.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var WA=!1;function zc(m,_){switch(m){case"compositionend":return Bl(_);case"keypress":return _.which!==32?null:(nf=!0,Yd);case"textInput":return m=_.data,m===Yd&&nf?null:m;default:return null}}function rf(m,_){if(WA)return m==="compositionend"||!Sh&&iu(m,_)?(m=Eo(),vi=Ir=gr=null,WA=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return Uc&&_.locale!=="ko"?null:_.data;default:return null}}var Kf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _==="input"?!!Kf[m.type]:_==="textarea"}function _A(m,_,L,W){Xt(W),_=vc(_,"onChange"),0<_.length&&(L=new ya("onChange","change",null,L,W),m.push({event:L,listeners:_}))}var tl=null,Ol=null;function $o(m){Xd(m,0)}function Eh(m){var _=$r(m);if(yt(_))return m}function lm(m,_){if(m==="change")return _}var jc=!1;if(o){var Lu;if(o){var $d="oninput"in document;if(!$d){var Vd=document.createElement("div");Vd.setAttribute("oninput","return;"),$d=typeof Vd.oninput=="function"}Lu=$d}else Lu=!1;jc=Lu&&(!document.documentMode||9<document.documentMode)}function pc(){tl&&(tl.detachEvent("onpropertychange",Hd),Ol=tl=null)}function Hd(m){if(m.propertyName==="value"&&Eh(Ol)){var _=[];_A(_,Ol,m,ze(m)),Sn($o,_)}}function of(m,_,L){m==="focusin"?(pc(),tl=_,Ol=L,tl.attachEvent("onpropertychange",Hd)):m==="focusout"&&pc()}function mc(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Eh(Ol)}function gu(m,_){if(m==="click")return Eh(_)}function $t(m,_){if(m==="input"||m==="change")return Eh(_)}function kn(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}var sn=typeof Object.is=="function"?Object.is:kn;function Ur(m,_){if(sn(m,_))return!0;if(typeof m!="object"||m===null||typeof _!="object"||_===null)return!1;var L=Object.keys(m),W=Object.keys(_);if(L.length!==W.length)return!1;for(W=0;W<L.length;W++){var ae=L[W];if(!d.call(_,ae)||!sn(m[ae],_[ae]))return!1}return!0}function _i(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Co(m,_){var L=_i(m);m=0;for(var W;L;){if(L.nodeType===3){if(W=m+L.textContent.length,m<=_&&W>=_)return{node:L,offset:_-m};m=W}e:{for(;L;){if(L.nextSibling){L=L.nextSibling;break e}L=L.parentNode}L=void 0}L=_i(L)}}function oa(m,_){return m&&_?m===_?!0:m&&m.nodeType===3?!1:_&&_.nodeType===3?oa(m,_.parentNode):"contains"in m?m.contains(_):m.compareDocumentPosition?!!(m.compareDocumentPosition(_)&16):!1:!1}function Vo(){for(var m=window,_=dt();_ instanceof m.HTMLIFrameElement;){try{var L=typeof _.contentWindow.location.href=="string"}catch{L=!1}if(L)m=_.contentWindow;else break;_=dt(m.document)}return _}function QA(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _&&(_==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||_==="textarea"||m.contentEditable==="true")}function vp(m){var _=Vo(),L=m.focusedElem,W=m.selectionRange;if(_!==L&&L&&L.ownerDocument&&oa(L.ownerDocument.documentElement,L)){if(W!==null&&QA(L)){if(_=W.start,m=W.end,m===void 0&&(m=_),"selectionStart"in L)L.selectionStart=_,L.selectionEnd=Math.min(m,L.value.length);else if(m=(_=L.ownerDocument||document)&&_.defaultView||window,m.getSelection){m=m.getSelection();var ae=L.textContent.length,ge=Math.min(W.start,ae);W=W.end===void 0?ge:Math.min(W.end,ae),!m.extend&&ge>W&&(ae=W,W=ge,ge=ae),ae=Co(L,ge);var Ze=Co(L,W);ae&&Ze&&(m.rangeCount!==1||m.anchorNode!==ae.node||m.anchorOffset!==ae.offset||m.focusNode!==Ze.node||m.focusOffset!==Ze.offset)&&(_=_.createRange(),_.setStart(ae.node,ae.offset),m.removeAllRanges(),ge>W?(m.addRange(_),m.extend(Ze.node,Ze.offset)):(_.setEnd(Ze.node,Ze.offset),m.addRange(_)))}}for(_=[],m=L;m=m.parentNode;)m.nodeType===1&&_.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<_.length;L++)m=_[L],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Il=o&&"documentMode"in document&&11>=document.documentMode,yu=null,qA=null,kl=null,Gi=!1;function YA(m,_,L){var W=L.window===L?L.document:L.nodeType===9?L:L.ownerDocument;Gi||yu==null||yu!==dt(W)||(W=yu,"selectionStart"in W&&QA(W)?W={start:W.selectionStart,end:W.selectionEnd}:(W=(W.ownerDocument&&W.ownerDocument.defaultView||window).getSelection(),W={anchorNode:W.anchorNode,anchorOffset:W.anchorOffset,focusNode:W.focusNode,focusOffset:W.focusOffset}),kl&&Ur(kl,W)||(kl=W,W=vc(qA,"onSelect"),0<W.length&&(_=new ya("onSelect","select",null,_,L),m.push({event:_,listeners:W}),_.target=yu)))}function Uo(m,_){var L={};return L[m.toLowerCase()]=_.toLowerCase(),L["Webkit"+m]="webkit"+_,L["Moz"+m]="moz"+_,L}var Nc={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionend:Uo("Transition","TransitionEnd")},$A={},CA={};o&&(CA=document.createElement("div").style,"AnimationEvent"in window||(delete Nc.animationend.animation,delete Nc.animationiteration.animation,delete Nc.animationstart.animation),"TransitionEvent"in window||delete Nc.transitionend.transition);function lA(m){if($A[m])return $A[m];if(!Nc[m])return m;var _=Nc[m],L;for(L in _)if(_.hasOwnProperty(L)&&L in CA)return $A[m]=_[L];return m}var Tl=lA("animationend"),gc=lA("animationiteration"),vu=lA("animationstart"),jl=lA("transitionend"),Gc=new Map,Zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(m,_){Gc.set(m,_),s(_,[m])}for(var fd=0;fd<Zd.length;fd++){var yc=Zd[fd],VA=yc.toLowerCase(),sf=yc[0].toUpperCase()+yc.slice(1);ja(VA,"on"+sf)}ja(Tl,"onAnimationEnd"),ja(gc,"onAnimationIteration"),ja(vu,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(jl,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HA=new Set("cancel close invalid load scroll toggle".split(" ").concat(bA));function Wc(m,_,L){var W=m.type||"unknown-event";m.currentTarget=L,Sa(W,_,void 0,m),m.currentTarget=null}function Xd(m,_){_=(_&4)!==0;for(var L=0;L<m.length;L++){var W=m[L],ae=W.event;W=W.listeners;e:{var ge=void 0;if(_)for(var Ze=W.length-1;0<=Ze;Ze--){var It=W[Ze],Gt=It.instance,Cn=It.currentTarget;if(It=It.listener,Gt!==ge&&ae.isPropagationStopped())break e;Wc(ae,It,Cn),ge=Gt}else for(Ze=0;Ze<W.length;Ze++){if(It=W[Ze],Gt=It.instance,Cn=It.currentTarget,It=It.listener,Gt!==ge&&ae.isPropagationStopped())break e;Wc(ae,It,Cn),ge=Gt}}}if(Mr)throw m=Kr,Mr=!1,Kr=null,m}function Ho(m,_){var L=_[$c];L===void 0&&(L=_[$c]=new Set);var W=m+"__bubble";L.has(W)||(qc(_,m,2,!1),L.add(W))}function Qc(m,_,L){var W=0;_&&(W|=4),qc(L,m,W,_)}var ZA="_reactListening"+Math.random().toString(36).slice(2);function Fu(m){if(!m[ZA]){m[ZA]=!0,r.forEach(function(L){L!=="selectionchange"&&(HA.has(L)||Qc(L,!1,m),Qc(L,!0,m))});var _=m.nodeType===9?m:m.ownerDocument;_===null||_[ZA]||(_[ZA]=!0,Qc("selectionchange",!1,_))}}function qc(m,_,L,W){switch(ci(_)){case 1:var ae=tt;break;case 4:ae=qt;break;default:ae=Or}L=ae.bind(null,_,L,m),ae=void 0,!wr||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(ae=!0),W?ae!==void 0?m.addEventListener(_,L,{capture:!0,passive:ae}):m.addEventListener(_,L,!0):ae!==void 0?m.addEventListener(_,L,{passive:ae}):m.addEventListener(_,L,!1)}function Jd(m,_,L,W,ae){var ge=W;if(!(_&1)&&!(_&2)&&W!==null)e:for(;;){if(W===null)return;var Ze=W.tag;if(Ze===3||Ze===4){var It=W.stateNode.containerInfo;if(It===ae||It.nodeType===8&&It.parentNode===ae)break;if(Ze===4)for(Ze=W.return;Ze!==null;){var Gt=Ze.tag;if((Gt===3||Gt===4)&&(Gt=Ze.stateNode.containerInfo,Gt===ae||Gt.nodeType===8&&Gt.parentNode===ae))return;Ze=Ze.return}for(;It!==null;){if(Ze=Bo(It),Ze===null)return;if(Gt=Ze.tag,Gt===5||Gt===6){W=ge=Ze;continue e}It=It.parentNode}}W=W.return}Sn(function(){var Cn=ge,ar=ze(L),dr=[];e:{var $n=Gc.get(m);if($n!==void 0){var zr=ya,ii=m;switch(m){case"keypress":if(ki(L)===0)break e;case"keydown":case"keyup":zr=Ad;break;case"focusin":ii="focus",zr=Ss;break;case"focusout":ii="blur",zr=Ss;break;case"beforeblur":case"afterblur":zr=Ss;break;case"click":if(L.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zr=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zr=Ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zr=wh;break;case Tl:case gc:case vu:zr=ud;break;case jl:zr=dd;break;case"scroll":zr=fu;break;case"wheel":zr=Fc;break;case"copy":case"cut":case"paste":zr=sA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zr=cd}var li=(_&4)!==0,sl=!li&&m==="scroll",an=li?$n!==null?$n+"Capture":null:$n;li=[];for(var Zt=Cn,An;Zt!==null;){An=Zt;var yr=An.stateNode;if(An.tag===5&&yr!==null&&(An=yr,an!==null&&(yr=Ar(Zt,an),yr!=null&&li.push(Yc(Zt,yr,An)))),sl)break;Zt=Zt.return}0<li.length&&($n=new zr($n,ii,null,L,ar),dr.push({event:$n,listeners:li}))}}if(!(_&7)){e:{if($n=m==="mouseover"||m==="pointerover",zr=m==="mouseout"||m==="pointerout",$n&&L!==p&&(ii=L.relatedTarget||L.fromElement)&&(Bo(ii)||ii[_u]))break e;if((zr||$n)&&($n=ar.window===ar?ar:($n=ar.ownerDocument)?$n.defaultView||$n.parentWindow:window,zr?(ii=L.relatedTarget||L.toElement,zr=Cn,ii=ii?Bo(ii):null,ii!==null&&(sl=qi(ii),ii!==sl||ii.tag!==5&&ii.tag!==6)&&(ii=null)):(zr=null,ii=Cn),zr!==ii)){if(li=ld,yr="onMouseLeave",an="onMouseEnter",Zt="mouse",(m==="pointerout"||m==="pointerover")&&(li=cd,yr="onPointerLeave",an="onPointerEnter",Zt="pointer"),sl=zr==null?$n:$r(zr),An=ii==null?$n:$r(ii),$n=new li(yr,Zt+"leave",zr,L,ar),$n.target=sl,$n.relatedTarget=An,yr=null,Bo(ar)===Cn&&(li=new li(an,Zt+"enter",ii,L,ar),li.target=An,li.relatedTarget=sl,yr=li),sl=yr,zr&&ii)t:{for(li=zr,an=ii,Zt=0,An=li;An;An=As(An))Zt++;for(An=0,yr=an;yr;yr=As(yr))An++;for(;0<Zt-An;)li=As(li),Zt--;for(;0<An-Zt;)an=As(an),An--;for(;Zt--;){if(li===an||an!==null&&li===an.alternate)break t;li=As(li),an=As(an)}li=null}else li=null;zr!==null&&zo(dr,$n,zr,li,!1),ii!==null&&sl!==null&&zo(dr,sl,ii,li,!0)}}e:{if($n=Cn?$r(Cn):window,zr=$n.nodeName&&$n.nodeName.toLowerCase(),zr==="select"||zr==="input"&&$n.type==="file")var ni=lm;else if(hd($n))if(jc)ni=$t;else{ni=mc;var Ii=of}else(zr=$n.nodeName)&&zr.toLowerCase()==="input"&&($n.type==="checkbox"||$n.type==="radio")&&(ni=gu);if(ni&&(ni=ni(m,Cn))){_A(dr,ni,L,ar);break e}Ii&&Ii(m,$n,Cn),m==="focusout"&&(Ii=$n._wrapperState)&&Ii.controlled&&$n.type==="number"&&Rr($n,"number",$n.value)}switch(Ii=Cn?$r(Cn):window,m){case"focusin":(hd(Ii)||Ii.contentEditable==="true")&&(yu=Ii,qA=Cn,kl=null);break;case"focusout":kl=qA=yu=null;break;case"mousedown":Gi=!0;break;case"contextmenu":case"mouseup":case"dragend":Gi=!1,YA(dr,L,ar);break;case"selectionchange":if(Il)break;case"keydown":case"keyup":YA(dr,L,ar)}var Oi;if(Sh)e:{switch(m){case"compositionstart":var zi="onCompositionStart";break e;case"compositionend":zi="onCompositionEnd";break e;case"compositionupdate":zi="onCompositionUpdate";break e}zi=void 0}else WA?iu(m,L)&&(zi="onCompositionEnd"):m==="keydown"&&L.keyCode===229&&(zi="onCompositionStart");zi&&(Uc&&L.locale!=="ko"&&(WA||zi!=="onCompositionStart"?zi==="onCompositionEnd"&&WA&&(Oi=Eo()):(gr=ar,Ir="value"in gr?gr.value:gr.textContent,WA=!0)),Ii=vc(Cn,zi),0<Ii.length&&(zi=new Lc(zi,m,null,L,ar),dr.push({event:zi,listeners:Ii}),Oi?zi.data=Oi:(Oi=Bl(L),Oi!==null&&(zi.data=Oi)))),(Oi=aA?zc(m,L):rf(m,L))&&(Cn=vc(Cn,"onBeforeInput"),0<Cn.length&&(ar=new Lc("onBeforeInput","beforeinput",null,L,ar),dr.push({event:ar,listeners:Cn}),ar.data=Oi))}Xd(dr,_)})}function Yc(m,_,L){return{instance:m,listener:_,currentTarget:L}}function vc(m,_){for(var L=_+"Capture",W=[];m!==null;){var ae=m,ge=ae.stateNode;ae.tag===5&&ge!==null&&(ae=ge,ge=Ar(m,L),ge!=null&&W.unshift(Yc(m,ge,ae)),ge=Ar(m,_),ge!=null&&W.push(Yc(m,ge,ae))),m=m.return}return W}function As(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function zo(m,_,L,W,ae){for(var ge=_._reactName,Ze=[];L!==null&&L!==W;){var It=L,Gt=It.alternate,Cn=It.stateNode;if(Gt!==null&&Gt===W)break;It.tag===5&&Cn!==null&&(It=Cn,ae?(Gt=Ar(L,ge),Gt!=null&&Ze.unshift(Yc(L,Gt,It))):ae||(Gt=Ar(L,ge),Gt!=null&&Ze.push(Yc(L,Gt,It)))),L=L.return}Ze.length!==0&&m.push({event:_,listeners:Ze})}var cs=/\r\n?/g,Df=/\u0000|\uFFFD/g;function pd(m){return(typeof m=="string"?m:""+m).replace(cs,`
`).replace(Df,"")}function md(m,_,L){if(_=pd(_),pd(m)!==_&&L)throw Error(t(425))}function Uu(){}var XA=null,Nl=null;function xA(m,_){return m==="textarea"||m==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,JA=typeof clearTimeout=="function"?clearTimeout:void 0,zu=typeof Promise=="function"?Promise:void 0,gd=typeof queueMicrotask=="function"?queueMicrotask:typeof zu<"u"?function(m){return zu.resolve(null).then(m).catch(ju)}:dl;function ju(m){setTimeout(function(){throw m})}function eh(m,_){var L=_,W=0;do{var ae=L.nextSibling;if(m.removeChild(L),ae&&ae.nodeType===8)if(L=ae.data,L==="/$"){if(W===0){m.removeChild(ae),Ri(_);return}W--}else L!=="$"&&L!=="$?"&&L!=="$!"||W++;L=ae}while(L);Ri(_)}function ec(m){for(;m!=null;m=m.nextSibling){var _=m.nodeType;if(_===1||_===3)break;if(_===8){if(_=m.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return m}function Nu(m){m=m.previousSibling;for(var _=0;m;){if(m.nodeType===8){var L=m.data;if(L==="$"||L==="$!"||L==="$?"){if(_===0)return m;_--}else L==="/$"&&_++}m=m.previousSibling}return null}var Gu=Math.random().toString(36).slice(2),wA="__reactFiber$"+Gu,_c="__reactProps$"+Gu,_u="__reactContainer$"+Gu,$c="__reactEvents$"+Gu,et="__reactListeners$"+Gu,Na="__reactHandles$"+Gu;function Bo(m){var _=m[wA];if(_)return _;for(var L=m.parentNode;L;){if(_=L[_u]||L[wA]){if(L=_.alternate,_.child!==null||L!==null&&L.child!==null)for(m=Nu(m);m!==null;){if(L=m[wA])return L;m=Nu(m)}return _}m=L,L=m.parentNode}return null}function Ki(m){return m=m[wA]||m[_u],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function $r(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function Es(m){return m[_c]||null}var yd=[],th=-1;function Oa(m){return{current:m}}function Ws(m){0>th||(m.current=yd[th],yd[th]=null,th--)}function Cs(m,_){th++,yd[th]=m.current,m.current=_}var uA={},Bs=Oa(uA),fr=Oa(!1),va=uA;function Vc(m,_){var L=m.type.contextTypes;if(!L)return uA;var W=m.stateNode;if(W&&W.__reactInternalMemoizedUnmaskedChildContext===_)return W.__reactInternalMemoizedMaskedChildContext;var ae={},ge;for(ge in L)ae[ge]=_[ge];return W&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=_,m.__reactInternalMemoizedMaskedChildContext=ae),ae}function Ia(m){return m=m.childContextTypes,m!=null}function tc(){Ws(fr),Ws(Bs)}function vd(m,_,L){if(Bs.current!==uA)throw Error(t(168));Cs(Bs,_),Cs(fr,L)}function _d(m,_,L){var W=m.stateNode;if(_=_.childContextTypes,typeof W.getChildContext!="function")return L;W=W.getChildContext();for(var ae in W)if(!(ae in _))throw Error(t(108,Kt(m)||"Unknown",ae));return De({},L,W)}function Mi(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||uA,va=Bs.current,Cs(Bs,m),Cs(fr,fr.current),!0}function Cd(m,_,L){var W=m.stateNode;if(!W)throw Error(t(169));L?(m=_d(m,_,va),W.__reactInternalMemoizedMergedChildContext=m,Ws(fr),Ws(Bs),Cs(Bs,m)):Ws(fr),Cs(fr,L)}var Gl=null,bd=!1,xd=!1;function MA(m){Gl===null?Gl=[m]:Gl.push(m)}function nc(m){bd=!0,MA(m)}function AA(){if(!xd&&Gl!==null){xd=!0;var m=0,_=Lr;try{var L=Gl;for(Lr=1;m<L.length;m++){var W=L[m];do W=W(!0);while(W!==null)}Gl=null,bd=!1}catch(ae){throw Gl!==null&&(Gl=Gl.slice(m+1)),Ea(tu,AA),ae}finally{Lr=_,xd=!1}}return null}var Cc=[],Os=0,bo=null,Cu=0,Ga=[],Ds=0,Zo=null,ou=1,Wu="";function bc(m,_){Cc[Os++]=Cu,Cc[Os++]=bo,bo=m,Cu=_}function nh(m,_,L){Ga[Ds++]=ou,Ga[Ds++]=Wu,Ga[Ds++]=Zo,Zo=m;var W=ou;m=Wu;var ae=32-fn(W)-1;W&=~(1<<ae),L+=1;var ge=32-fn(_)+ae;if(30<ge){var Ze=ae-ae%5;ge=(W&(1<<Ze)-1).toString(32),W>>=Ze,ae-=Ze,ou=1<<32-fn(_)+ae|L<<ae|W,Wu=ge+m}else ou=1<<ge|L<<ae|W,Wu=m}function SA(m){m.return!==null&&(bc(m,1),nh(m,1,0))}function xc(m){for(;m===bo;)bo=Cc[--Os],Cc[Os]=null,Cu=Cc[--Os],Cc[Os]=null;for(;m===Zo;)Zo=Ga[--Ds],Ga[Ds]=null,Wu=Ga[--Ds],Ga[Ds]=null,ou=Ga[--Ds],Ga[Ds]=null}var gs=null,da=null,hr=!1,Hr=null;function Qu(m,_){var L=Zu(5,null,null,0);L.elementType="DELETED",L.stateNode=_,L.return=m,_=m.deletions,_===null?(m.deletions=[L],m.flags|=16):_.push(L)}function rc(m,_){switch(m.tag){case 5:var L=m.type;return _=_.nodeType!==1||L.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(m.stateNode=_,gs=m,da=ec(_.firstChild),!0):!1;case 6:return _=m.pendingProps===""||_.nodeType!==3?null:_,_!==null?(m.stateNode=_,gs=m,da=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(L=Zo!==null?{id:ou,overflow:Wu}:null,m.memoizedState={dehydrated:_,treeContext:L,retryLane:1073741824},L=Zu(18,null,null,0),L.stateNode=_,L.return=m,m.child=L,gs=m,da=null,!0):!1;default:return!1}}function bu(m){return(m.mode&1)!==0&&(m.flags&128)===0}function bs(m){if(hr){var _=da;if(_){var L=_;if(!rc(m,_)){if(bu(m))throw Error(t(418));_=ec(L.nextSibling);var W=gs;_&&rc(m,_)?Qu(W,L):(m.flags=m.flags&-4097|2,hr=!1,gs=m)}}else{if(bu(m))throw Error(t(418));m.flags=m.flags&-4097|2,hr=!1,gs=m}}}function Lf(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;gs=m}function su(m){if(m!==gs)return!1;if(!hr)return Lf(m),hr=!0,!1;var _;if((_=m.tag!==3)&&!(_=m.tag!==5)&&(_=m.type,_=_!=="head"&&_!=="body"&&!xA(m.type,m.memoizedProps)),_&&(_=da)){if(bu(m))throw Ff(),Error(t(418));for(;_;)Qu(m,_),_=ec(_.nextSibling)}if(Lf(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,_=0;m;){if(m.nodeType===8){var L=m.data;if(L==="/$"){if(_===0){da=ec(m.nextSibling);break e}_--}else L!=="$"&&L!=="$!"&&L!=="$?"||_++}m=m.nextSibling}da=null}}else da=gs?ec(m.stateNode.nextSibling):null;return!0}function Ff(){for(var m=da;m;)m=ec(m.nextSibling)}function xu(){da=gs=null,hr=!1}function Po(m){Hr===null?Hr=[m]:Hr.push(m)}var Is=X.ReactCurrentBatchConfig;function rh(m,_,L){if(m=L.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(t(309));var W=L.stateNode}if(!W)throw Error(t(147,m));var ae=W,ge=""+m;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ge?_.ref:(_=function(Ze){var It=ae.refs;Ze===null?delete It[ge]:It[ge]=Ze},_._stringRef=ge,_)}if(typeof m!="string")throw Error(t(284));if(!L._owner)throw Error(t(290,m))}return m}function EA(m,_){throw m=Object.prototype.toString.call(_),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":m))}function ih(m){var _=m._init;return _(m._payload)}function BA(m){function _(an,Zt){if(m){var An=an.deletions;An===null?(an.deletions=[Zt],an.flags|=16):An.push(Zt)}}function L(an,Zt){if(!m)return null;for(;Zt!==null;)_(an,Zt),Zt=Zt.sibling;return null}function W(an,Zt){for(an=new Map;Zt!==null;)Zt.key!==null?an.set(Zt.key,Zt):an.set(Zt.index,Zt),Zt=Zt.sibling;return an}function ae(an,Zt){return an=Kd(an,Zt),an.index=0,an.sibling=null,an}function ge(an,Zt,An){return an.index=An,m?(An=an.alternate,An!==null?(An=An.index,An<Zt?(an.flags|=2,Zt):An):(an.flags|=2,Zt)):(an.flags|=1048576,Zt)}function Ze(an){return m&&an.alternate===null&&(an.flags|=2),an}function It(an,Zt,An,yr){return Zt===null||Zt.tag!==6?(Zt=Q0(An,an.mode,yr),Zt.return=an,Zt):(Zt=ae(Zt,An),Zt.return=an,Zt)}function Gt(an,Zt,An,yr){var ni=An.type;return ni===N?ar(an,Zt,An.props.children,yr,An.key):Zt!==null&&(Zt.elementType===ni||typeof ni=="object"&&ni!==null&&ni.$$typeof===it&&ih(ni)===Zt.type)?(yr=ae(Zt,An.props),yr.ref=rh(an,Zt,An),yr.return=an,yr):(yr=r0(An.type,An.key,An.props,null,an.mode,yr),yr.ref=rh(an,Zt,An),yr.return=an,yr)}function Cn(an,Zt,An,yr){return Zt===null||Zt.tag!==4||Zt.stateNode.containerInfo!==An.containerInfo||Zt.stateNode.implementation!==An.implementation?(Zt=i0(An,an.mode,yr),Zt.return=an,Zt):(Zt=ae(Zt,An.children||[]),Zt.return=an,Zt)}function ar(an,Zt,An,yr,ni){return Zt===null||Zt.tag!==7?(Zt=gf(An,an.mode,yr,ni),Zt.return=an,Zt):(Zt=ae(Zt,An),Zt.return=an,Zt)}function dr(an,Zt,An){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number")return Zt=Q0(""+Zt,an.mode,An),Zt.return=an,Zt;if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case Y:return An=r0(Zt.type,Zt.key,Zt.props,null,an.mode,An),An.ref=rh(an,null,Zt),An.return=an,An;case J:return Zt=i0(Zt,an.mode,An),Zt.return=an,Zt;case it:var yr=Zt._init;return dr(an,yr(Zt._payload),An)}if(sr(Zt)||ht(Zt))return Zt=gf(Zt,an.mode,An,null),Zt.return=an,Zt;EA(an,Zt)}return null}function $n(an,Zt,An,yr){var ni=Zt!==null?Zt.key:null;if(typeof An=="string"&&An!==""||typeof An=="number")return ni!==null?null:It(an,Zt,""+An,yr);if(typeof An=="object"&&An!==null){switch(An.$$typeof){case Y:return An.key===ni?Gt(an,Zt,An,yr):null;case J:return An.key===ni?Cn(an,Zt,An,yr):null;case it:return ni=An._init,$n(an,Zt,ni(An._payload),yr)}if(sr(An)||ht(An))return ni!==null?null:ar(an,Zt,An,yr,null);EA(an,An)}return null}function zr(an,Zt,An,yr,ni){if(typeof yr=="string"&&yr!==""||typeof yr=="number")return an=an.get(An)||null,It(Zt,an,""+yr,ni);if(typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case Y:return an=an.get(yr.key===null?An:yr.key)||null,Gt(Zt,an,yr,ni);case J:return an=an.get(yr.key===null?An:yr.key)||null,Cn(Zt,an,yr,ni);case it:var Ii=yr._init;return zr(an,Zt,An,Ii(yr._payload),ni)}if(sr(yr)||ht(yr))return an=an.get(An)||null,ar(Zt,an,yr,ni,null);EA(Zt,yr)}return null}function ii(an,Zt,An,yr){for(var ni=null,Ii=null,Oi=Zt,zi=Zt=0,Ls=null;Oi!==null&&zi<An.length;zi++){Oi.index>zi?(Ls=Oi,Oi=null):Ls=Oi.sibling;var Jo=$n(an,Oi,An[zi],yr);if(Jo===null){Oi===null&&(Oi=Ls);break}m&&Oi&&Jo.alternate===null&&_(an,Oi),Zt=ge(Jo,Zt,zi),Ii===null?ni=Jo:Ii.sibling=Jo,Ii=Jo,Oi=Ls}if(zi===An.length)return L(an,Oi),hr&&bc(an,zi),ni;if(Oi===null){for(;zi<An.length;zi++)Oi=dr(an,An[zi],yr),Oi!==null&&(Zt=ge(Oi,Zt,zi),Ii===null?ni=Oi:Ii.sibling=Oi,Ii=Oi);return hr&&bc(an,zi),ni}for(Oi=W(an,Oi);zi<An.length;zi++)Ls=zr(Oi,an,zi,An[zi],yr),Ls!==null&&(m&&Ls.alternate!==null&&Oi.delete(Ls.key===null?zi:Ls.key),Zt=ge(Ls,Zt,zi),Ii===null?ni=Ls:Ii.sibling=Ls,Ii=Ls);return m&&Oi.forEach(function(Uh){return _(an,Uh)}),hr&&bc(an,zi),ni}function li(an,Zt,An,yr){var ni=ht(An);if(typeof ni!="function")throw Error(t(150));if(An=ni.call(An),An==null)throw Error(t(151));for(var Ii=ni=null,Oi=Zt,zi=Zt=0,Ls=null,Jo=An.next();Oi!==null&&!Jo.done;zi++,Jo=An.next()){Oi.index>zi?(Ls=Oi,Oi=null):Ls=Oi.sibling;var Uh=$n(an,Oi,Jo.value,yr);if(Uh===null){Oi===null&&(Oi=Ls);break}m&&Oi&&Uh.alternate===null&&_(an,Oi),Zt=ge(Uh,Zt,zi),Ii===null?ni=Uh:Ii.sibling=Uh,Ii=Uh,Oi=Ls}if(Jo.done)return L(an,Oi),hr&&bc(an,zi),ni;if(Oi===null){for(;!Jo.done;zi++,Jo=An.next())Jo=dr(an,Jo.value,yr),Jo!==null&&(Zt=ge(Jo,Zt,zi),Ii===null?ni=Jo:Ii.sibling=Jo,Ii=Jo);return hr&&bc(an,zi),ni}for(Oi=W(an,Oi);!Jo.done;zi++,Jo=An.next())Jo=zr(Oi,an,zi,Jo.value,yr),Jo!==null&&(m&&Jo.alternate!==null&&Oi.delete(Jo.key===null?zi:Jo.key),Zt=ge(Jo,Zt,zi),Ii===null?ni=Jo:Ii.sibling=Jo,Ii=Jo);return m&&Oi.forEach(function(Zg){return _(an,Zg)}),hr&&bc(an,zi),ni}function sl(an,Zt,An,yr){if(typeof An=="object"&&An!==null&&An.type===N&&An.key===null&&(An=An.props.children),typeof An=="object"&&An!==null){switch(An.$$typeof){case Y:e:{for(var ni=An.key,Ii=Zt;Ii!==null;){if(Ii.key===ni){if(ni=An.type,ni===N){if(Ii.tag===7){L(an,Ii.sibling),Zt=ae(Ii,An.props.children),Zt.return=an,an=Zt;break e}}else if(Ii.elementType===ni||typeof ni=="object"&&ni!==null&&ni.$$typeof===it&&ih(ni)===Ii.type){L(an,Ii.sibling),Zt=ae(Ii,An.props),Zt.ref=rh(an,Ii,An),Zt.return=an,an=Zt;break e}L(an,Ii);break}else _(an,Ii);Ii=Ii.sibling}An.type===N?(Zt=gf(An.props.children,an.mode,yr,An.key),Zt.return=an,an=Zt):(yr=r0(An.type,An.key,An.props,null,an.mode,yr),yr.ref=rh(an,Zt,An),yr.return=an,an=yr)}return Ze(an);case J:e:{for(Ii=An.key;Zt!==null;){if(Zt.key===Ii)if(Zt.tag===4&&Zt.stateNode.containerInfo===An.containerInfo&&Zt.stateNode.implementation===An.implementation){L(an,Zt.sibling),Zt=ae(Zt,An.children||[]),Zt.return=an,an=Zt;break e}else{L(an,Zt);break}else _(an,Zt);Zt=Zt.sibling}Zt=i0(An,an.mode,yr),Zt.return=an,an=Zt}return Ze(an);case it:return Ii=An._init,sl(an,Zt,Ii(An._payload),yr)}if(sr(An))return ii(an,Zt,An,yr);if(ht(An))return li(an,Zt,An,yr);EA(an,An)}return typeof An=="string"&&An!==""||typeof An=="number"?(An=""+An,Zt!==null&&Zt.tag===6?(L(an,Zt.sibling),Zt=ae(Zt,An),Zt.return=an,an=Zt):(L(an,Zt),Zt=Q0(An,an.mode,yr),Zt.return=an,an=Zt),Ze(an)):L(an,Zt)}return sl}var Qs=BA(!0),wc=BA(!1),Wl=Oa(null),hl=null,qu=null,Mc=null;function wu(){Mc=qu=hl=null}function _a(m){var _=Wl.current;Ws(Wl),m._currentValue=_}function Xs(m,_,L){for(;m!==null;){var W=m.alternate;if((m.childLanes&_)!==_?(m.childLanes|=_,W!==null&&(W.childLanes|=_)):W!==null&&(W.childLanes&_)!==_&&(W.childLanes|=_),m===L)break;m=m.return}}function au(m,_){hl=m,Mc=qu=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&_&&(ql=!0),m.firstContext=null)}function lu(m){var _=m._currentValue;if(Mc!==m)if(m={context:m,memoizedValue:_,next:null},qu===null){if(hl===null)throw Error(t(308));qu=m,hl.dependencies={lanes:0,firstContext:m}}else qu=qu.next=m;return _}var cA=null;function Mu(m){cA===null?cA=[m]:cA.push(m)}function Sc(m,_,L,W){var ae=_.interleaved;return ae===null?(L.next=L,Mu(_)):(L.next=ae.next,ae.next=L),_.interleaved=L,Yu(m,W)}function Yu(m,_){m.lanes|=_;var L=m.alternate;for(L!==null&&(L.lanes|=_),L=m,m=m.return;m!==null;)m.childLanes|=_,L=m.alternate,L!==null&&(L.childLanes|=_),L=m,m=m.return;return L.tag===3?L.stateNode:null}var Ql=!1;function wd(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T(m,_){m=m.updateQueue,_.updateQueue===m&&(_.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function l(m,_){return{eventTime:m,lane:_,tag:0,payload:null,callback:null,next:null}}function c(m,_,L){var W=m.updateQueue;if(W===null)return null;if(W=W.shared,gi&2){var ae=W.pending;return ae===null?_.next=_:(_.next=ae.next,ae.next=_),W.pending=_,Yu(m,L)}return ae=W.interleaved,ae===null?(_.next=_,Mu(W)):(_.next=ae.next,ae.next=_),W.interleaved=_,Yu(m,L)}function C(m,_,L){if(_=_.updateQueue,_!==null&&(_=_.shared,(L&4194240)!==0)){var W=_.lanes;W&=m.pendingLanes,L|=W,_.lanes=L,ls(m,L)}}function M(m,_){var L=m.updateQueue,W=m.alternate;if(W!==null&&(W=W.updateQueue,L===W)){var ae=null,ge=null;if(L=L.firstBaseUpdate,L!==null){do{var Ze={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};ge===null?ae=ge=Ze:ge=ge.next=Ze,L=L.next}while(L!==null);ge===null?ae=ge=_:ge=ge.next=_}else ae=ge=_;L={baseState:W.baseState,firstBaseUpdate:ae,lastBaseUpdate:ge,shared:W.shared,effects:W.effects},m.updateQueue=L;return}m=L.lastBaseUpdate,m===null?L.firstBaseUpdate=_:m.next=_,L.lastBaseUpdate=_}function R(m,_,L,W){var ae=m.updateQueue;Ql=!1;var ge=ae.firstBaseUpdate,Ze=ae.lastBaseUpdate,It=ae.shared.pending;if(It!==null){ae.shared.pending=null;var Gt=It,Cn=Gt.next;Gt.next=null,Ze===null?ge=Cn:Ze.next=Cn,Ze=Gt;var ar=m.alternate;ar!==null&&(ar=ar.updateQueue,It=ar.lastBaseUpdate,It!==Ze&&(It===null?ar.firstBaseUpdate=Cn:It.next=Cn,ar.lastBaseUpdate=Gt))}if(ge!==null){var dr=ae.baseState;Ze=0,ar=Cn=Gt=null,It=ge;do{var $n=It.lane,zr=It.eventTime;if((W&$n)===$n){ar!==null&&(ar=ar.next={eventTime:zr,lane:0,tag:It.tag,payload:It.payload,callback:It.callback,next:null});e:{var ii=m,li=It;switch($n=_,zr=L,li.tag){case 1:if(ii=li.payload,typeof ii=="function"){dr=ii.call(zr,dr,$n);break e}dr=ii;break e;case 3:ii.flags=ii.flags&-65537|128;case 0:if(ii=li.payload,$n=typeof ii=="function"?ii.call(zr,dr,$n):ii,$n==null)break e;dr=De({},dr,$n);break e;case 2:Ql=!0}}It.callback!==null&&It.lane!==0&&(m.flags|=64,$n=ae.effects,$n===null?ae.effects=[It]:$n.push(It))}else zr={eventTime:zr,lane:$n,tag:It.tag,payload:It.payload,callback:It.callback,next:null},ar===null?(Cn=ar=zr,Gt=dr):ar=ar.next=zr,Ze|=$n;if(It=It.next,It===null){if(It=ae.shared.pending,It===null)break;$n=It,It=$n.next,$n.next=null,ae.lastBaseUpdate=$n,ae.shared.pending=null}}while(!0);if(ar===null&&(Gt=dr),ae.baseState=Gt,ae.firstBaseUpdate=Cn,ae.lastBaseUpdate=ar,_=ae.shared.interleaved,_!==null){ae=_;do Ze|=ae.lane,ae=ae.next;while(ae!==_)}else ge===null&&(ae.shared.lanes=0);yl|=Ze,m.lanes=Ze,m.memoizedState=dr}}function j(m,_,L){if(m=_.effects,_.effects=null,m!==null)for(_=0;_<m.length;_++){var W=m[_],ae=W.callback;if(ae!==null){if(W.callback=null,W=L,typeof ae!="function")throw Error(t(191,ae));ae.call(W)}}}var $={},te=Oa($),se=Oa($),xe=Oa($);function Oe(m){if(m===$)throw Error(t(174));return m}function ke(m,_){switch(Cs(xe,_),Cs(se,m),Cs(te,$),m=_.nodeType,m){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:Ge(null,"");break;default:m=m===8?_.parentNode:_,_=m.namespaceURI||null,m=m.tagName,_=Ge(_,m)}Ws(te),Cs(te,_)}function qe(){Ws(te),Ws(se),Ws(xe)}function Ve(m){Oe(xe.current);var _=Oe(te.current),L=Ge(_,m.type);_!==L&&(Cs(se,m),Cs(te,L))}function ut(m){se.current===m&&(Ws(te),Ws(se))}var ot=Oa(0);function At(m){for(var _=m;_!==null;){if(_.tag===13){var L=_.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||L.data==="$?"||L.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var mt=[];function St(){for(var m=0;m<mt.length;m++)mt[m]._workInProgressVersionPrimary=null;mt.length=0}var kt=X.ReactCurrentDispatcher,Pt=X.ReactCurrentBatchConfig,Ft=0,Tt=null,Jt=null,Vt=null,vn=!1,_n=!1,mn=0,Bn=0;function Un(){throw Error(t(321))}function wn(m,_){if(_===null)return!1;for(var L=0;L<_.length&&L<m.length;L++)if(!sn(m[L],_[L]))return!1;return!0}function kr(m,_,L,W,ae,ge){if(Ft=ge,Tt=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,kt.current=m===null||m.memoizedState===null?_p:Ec,m=L(W,ae),_n){ge=0;do{if(_n=!1,mn=0,25<=ge)throw Error(t(301));ge+=1,Vt=Jt=null,_.updateQueue=null,kt.current=kA,m=L(W,ae)}while(_n)}if(kt.current=Ed,_=Jt!==null&&Jt.next!==null,Ft=0,Vt=Jt=Tt=null,vn=!1,_)throw Error(t(300));return m}function Bi(){var m=mn!==0;return mn=0,m}function $i(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Tt.memoizedState=Vt=m:Vt=Vt.next=m,Vt}function Oo(){if(Jt===null){var m=Tt.alternate;m=m!==null?m.memoizedState:null}else m=Jt.next;var _=Vt===null?Tt.memoizedState:Vt.next;if(_!==null)Vt=_,Jt=m;else{if(m===null)throw Error(t(310));Jt=m,m={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Vt===null?Tt.memoizedState=Vt=m:Vt=Vt.next=m}return Vt}function Si(m,_){return typeof _=="function"?_(m):_}function jo(m){var _=Oo(),L=_.queue;if(L===null)throw Error(t(311));L.lastRenderedReducer=m;var W=Jt,ae=W.baseQueue,ge=L.pending;if(ge!==null){if(ae!==null){var Ze=ae.next;ae.next=ge.next,ge.next=Ze}W.baseQueue=ae=ge,L.pending=null}if(ae!==null){ge=ae.next,W=W.baseState;var It=Ze=null,Gt=null,Cn=ge;do{var ar=Cn.lane;if((Ft&ar)===ar)Gt!==null&&(Gt=Gt.next={lane:0,action:Cn.action,hasEagerState:Cn.hasEagerState,eagerState:Cn.eagerState,next:null}),W=Cn.hasEagerState?Cn.eagerState:m(W,Cn.action);else{var dr={lane:ar,action:Cn.action,hasEagerState:Cn.hasEagerState,eagerState:Cn.eagerState,next:null};Gt===null?(It=Gt=dr,Ze=W):Gt=Gt.next=dr,Tt.lanes|=ar,yl|=ar}Cn=Cn.next}while(Cn!==null&&Cn!==ge);Gt===null?Ze=W:Gt.next=It,sn(W,_.memoizedState)||(ql=!0),_.memoizedState=W,_.baseState=Ze,_.baseQueue=Gt,L.lastRenderedState=W}if(m=L.interleaved,m!==null){ae=m;do ge=ae.lane,Tt.lanes|=ge,yl|=ge,ae=ae.next;while(ae!==m)}else ae===null&&(L.lanes=0);return[_.memoizedState,L.dispatch]}function No(m){var _=Oo(),L=_.queue;if(L===null)throw Error(t(311));L.lastRenderedReducer=m;var W=L.dispatch,ae=L.pending,ge=_.memoizedState;if(ae!==null){L.pending=null;var Ze=ae=ae.next;do ge=m(ge,Ze.action),Ze=Ze.next;while(Ze!==ae);sn(ge,_.memoizedState)||(ql=!0),_.memoizedState=ge,_.baseQueue===null&&(_.baseState=ge),L.lastRenderedState=ge}return[ge,W]}function xo(){}function yo(m,_){var L=Tt,W=Oo(),ae=_(),ge=!sn(W.memoizedState,ae);if(ge&&(W.memoizedState=ae,ql=!0),W=W.queue,Js(ds.bind(null,L,W,m),[m]),W.getSnapshot!==_||ge||Vt!==null&&Vt.memoizedState.tag&1){if(L.flags|=2048,pl(9,Go.bind(null,L,W,ae,_),void 0,null),Xo===null)throw Error(t(349));Ft&30||ka(L,_,ae)}return ae}function ka(m,_,L){m.flags|=16384,m={getSnapshot:_,value:L},_=Tt.updateQueue,_===null?(_={lastEffect:null,stores:null},Tt.updateQueue=_,_.stores=[m]):(L=_.stores,L===null?_.stores=[m]:L.push(m))}function Go(m,_,L,W){_.value=L,_.getSnapshot=W,Wa(_)&&$u(m)}function ds(m,_,L){return L(function(){Wa(_)&&$u(m)})}function Wa(m){var _=m.getSnapshot;m=m.value;try{var L=_();return!sn(m,L)}catch{return!0}}function $u(m){var _=Yu(m,1);_!==null&&Jc(_,m,1,-1)}function fl(m){var _=$i();return typeof m=="function"&&(m=m()),_.memoizedState=_.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:m},_.queue=m,m=m.dispatch=ic.bind(null,Tt,m),[_.memoizedState,m]}function pl(m,_,L,W){return m={tag:m,create:_,destroy:L,deps:W,next:null},_=Tt.updateQueue,_===null?(_={lastEffect:null,stores:null},Tt.updateQueue=_,_.lastEffect=m.next=m):(L=_.lastEffect,L===null?_.lastEffect=m.next=m:(W=L.next,L.next=m,m.next=W,_.lastEffect=m)),m}function uu(){return Oo().memoizedState}function OA(m,_,L,W){var ae=$i();Tt.flags|=m,ae.memoizedState=pl(1|_,L,void 0,W===void 0?null:W)}function IA(m,_,L,W){var ae=Oo();W=W===void 0?null:W;var ge=void 0;if(Jt!==null){var Ze=Jt.memoizedState;if(ge=Ze.destroy,W!==null&&wn(W,Ze.deps)){ae.memoizedState=pl(_,L,ge,W);return}}Tt.flags|=m,ae.memoizedState=pl(1|_,L,ge,W)}function Vu(m,_){return OA(8390656,8,m,_)}function Js(m,_){return IA(2048,8,m,_)}function ml(m,_){return IA(4,2,m,_)}function sa(m,_){return IA(4,4,m,_)}function Pl(m,_){if(typeof _=="function")return m=m(),_(m),function(){_(null)};if(_!=null)return m=m(),_.current=m,function(){_.current=null}}function xs(m,_,L){return L=L!=null?L.concat([m]):null,IA(4,4,Pl.bind(null,_,m),L)}function qs(){}function nl(m,_){var L=Oo();_=_===void 0?null:_;var W=L.memoizedState;return W!==null&&_!==null&&wn(_,W[1])?W[0]:(L.memoizedState=[m,_],m)}function rl(m,_){var L=Oo();_=_===void 0?null:_;var W=L.memoizedState;return W!==null&&_!==null&&wn(_,W[1])?W[0]:(m=m(),L.memoizedState=[m,_],m)}function Md(m,_,L){return Ft&21?(sn(L,_)||(L=Xa(),Tt.lanes|=L,yl|=L,m.baseState=!0),_):(m.baseState&&(m.baseState=!1,ql=!0),m.memoizedState=L)}function Bh(m,_){var L=Lr;Lr=L!==0&&4>L?L:4,m(!0);var W=Pt.transition;Pt.transition={};try{m(!1),_()}finally{Lr=L,Pt.transition=W}}function Oh(){return Oo().memoizedState}function Sd(m,_,L){var W=Kh(m);if(L={lane:W,action:L,hasEagerState:!1,eagerState:null,next:null},Ih(m))Ta(_,L);else if(L=Sc(m,_,L,W),L!==null){var ae=dA();Jc(L,m,W,ae),Au(L,_,W)}}function ic(m,_,L){var W=Kh(m),ae={lane:W,action:L,hasEagerState:!1,eagerState:null,next:null};if(Ih(m))Ta(_,ae);else{var ge=m.alternate;if(m.lanes===0&&(ge===null||ge.lanes===0)&&(ge=_.lastRenderedReducer,ge!==null))try{var Ze=_.lastRenderedState,It=ge(Ze,L);if(ae.hasEagerState=!0,ae.eagerState=It,sn(It,Ze)){var Gt=_.interleaved;Gt===null?(ae.next=ae,Mu(_)):(ae.next=Gt.next,Gt.next=ae),_.interleaved=ae;return}}catch{}finally{}L=Sc(m,_,ae,W),L!==null&&(ae=dA(),Jc(L,m,W,ae),Au(L,_,W))}}function Ih(m){var _=m.alternate;return m===Tt||_!==null&&_===Tt}function Ta(m,_){_n=vn=!0;var L=m.pending;L===null?_.next=_:(_.next=L.next,L.next=_),m.pending=_}function Au(m,_,L){if(L&4194240){var W=_.lanes;W&=m.pendingLanes,L|=W,_.lanes=L,ls(m,L)}}var Ed={readContext:lu,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},_p={readContext:lu,useCallback:function(m,_){return $i().memoizedState=[m,_===void 0?null:_],m},useContext:lu,useEffect:Vu,useImperativeHandle:function(m,_,L){return L=L!=null?L.concat([m]):null,OA(4194308,4,Pl.bind(null,_,m),L)},useLayoutEffect:function(m,_){return OA(4194308,4,m,_)},useInsertionEffect:function(m,_){return OA(4,2,m,_)},useMemo:function(m,_){var L=$i();return _=_===void 0?null:_,m=m(),L.memoizedState=[m,_],m},useReducer:function(m,_,L){var W=$i();return _=L!==void 0?L(_):_,W.memoizedState=W.baseState=_,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:_},W.queue=m,m=m.dispatch=Sd.bind(null,Tt,m),[W.memoizedState,m]},useRef:function(m){var _=$i();return m={current:m},_.memoizedState=m},useState:fl,useDebugValue:qs,useDeferredValue:function(m){return $i().memoizedState=m},useTransition:function(){var m=fl(!1),_=m[0];return m=Bh.bind(null,m[1]),$i().memoizedState=m,[_,m]},useMutableSource:function(){},useSyncExternalStore:function(m,_,L){var W=Tt,ae=$i();if(hr){if(L===void 0)throw Error(t(407));L=L()}else{if(L=_(),Xo===null)throw Error(t(349));Ft&30||ka(W,_,L)}ae.memoizedState=L;var ge={value:L,getSnapshot:_};return ae.queue=ge,Vu(ds.bind(null,W,ge,m),[m]),W.flags|=2048,pl(9,Go.bind(null,W,ge,L,_),void 0,null),L},useId:function(){var m=$i(),_=Xo.identifierPrefix;if(hr){var L=Wu,W=ou;L=(W&~(1<<32-fn(W)-1)).toString(32)+L,_=":"+_+"R"+L,L=mn++,0<L&&(_+="H"+L.toString(32)),_+=":"}else L=Bn++,_=":"+_+"r"+L.toString(32)+":";return m.memoizedState=_},unstable_isNewReconciler:!1},Ec={readContext:lu,useCallback:nl,useContext:lu,useEffect:Js,useImperativeHandle:xs,useInsertionEffect:ml,useLayoutEffect:sa,useMemo:rl,useReducer:jo,useRef:uu,useState:function(){return jo(Si)},useDebugValue:qs,useDeferredValue:function(m){var _=Oo();return Md(_,Jt.memoizedState,m)},useTransition:function(){var m=jo(Si)[0],_=Oo().memoizedState;return[m,_]},useMutableSource:xo,useSyncExternalStore:yo,useId:Oh,unstable_isNewReconciler:!1},kA={readContext:lu,useCallback:nl,useContext:lu,useEffect:Js,useImperativeHandle:xs,useInsertionEffect:ml,useLayoutEffect:sa,useMemo:rl,useReducer:No,useRef:uu,useState:function(){return No(Si)},useDebugValue:qs,useDeferredValue:function(m){var _=Oo();return Jt===null?_.memoizedState=m:Md(_,Jt.memoizedState,m)},useTransition:function(){var m=No(Si)[0],_=Oo().memoizedState;return[m,_]},useMutableSource:xo,useSyncExternalStore:yo,useId:Oh,unstable_isNewReconciler:!1};function Qa(m,_){if(m&&m.defaultProps){_=De({},_),m=m.defaultProps;for(var L in m)_[L]===void 0&&(_[L]=m[L]);return _}return _}function Cp(m,_,L,W){_=m.memoizedState,L=L(W,_),L=L==null?_:De({},_,L),m.memoizedState=L,m.lanes===0&&(m.updateQueue.baseState=L)}var kh={isMounted:function(m){return(m=m._reactInternals)?qi(m)===m:!1},enqueueSetState:function(m,_,L){m=m._reactInternals;var W=dA(),ae=Kh(m),ge=l(W,ae);ge.payload=_,L!=null&&(ge.callback=L),_=c(m,ge,ae),_!==null&&(Jc(_,m,ae,W),C(_,m,ae))},enqueueReplaceState:function(m,_,L){m=m._reactInternals;var W=dA(),ae=Kh(m),ge=l(W,ae);ge.tag=1,ge.payload=_,L!=null&&(ge.callback=L),_=c(m,ge,ae),_!==null&&(Jc(_,m,ae,W),C(_,m,ae))},enqueueForceUpdate:function(m,_){m=m._reactInternals;var L=dA(),W=Kh(m),ae=l(L,W);ae.tag=2,_!=null&&(ae.callback=_),_=c(m,ae,W),_!==null&&(Jc(_,m,W,L),C(_,m,W))}};function bp(m,_,L,W,ae,ge,Ze){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(W,ge,Ze):_.prototype&&_.prototype.isPureReactComponent?!Ur(L,W)||!Ur(ae,ge):!0}function oh(m,_,L){var W=!1,ae=uA,ge=_.contextType;return typeof ge=="object"&&ge!==null?ge=lu(ge):(ae=Ia(_)?va:Bs.current,W=_.contextTypes,ge=(W=W!=null)?Vc(m,ae):uA),_=new _(L,ge),m.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=kh,m.stateNode=_,_._reactInternals=m,W&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=ae,m.__reactInternalMemoizedMaskedChildContext=ge),_}function Bc(m,_,L,W){m=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(L,W),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(L,W),_.state!==m&&kh.enqueueReplaceState(_,_.state,null)}function um(m,_,L,W){var ae=m.stateNode;ae.props=L,ae.state=m.memoizedState,ae.refs={},wd(m);var ge=_.contextType;typeof ge=="object"&&ge!==null?ae.context=lu(ge):(ge=Ia(_)?va:Bs.current,ae.context=Vc(m,ge)),ae.state=m.memoizedState,ge=_.getDerivedStateFromProps,typeof ge=="function"&&(Cp(m,_,ge,L),ae.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof ae.getSnapshotBeforeUpdate=="function"||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(_=ae.state,typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount(),_!==ae.state&&kh.enqueueReplaceState(ae,ae.state,null),R(m,L,ae,W),ae.state=m.memoizedState),typeof ae.componentDidMount=="function"&&(m.flags|=4194308)}function oc(m,_){try{var L="",W=_;do L+=ft(W),W=W.return;while(W);var ae=L}catch(ge){ae=`
Error generating stack: `+ge.message+`
`+ge.stack}return{value:m,source:_,stack:ae,digest:null}}function Th(m,_,L){return{value:m,source:null,stack:L??null,digest:_??null}}function Bd(m,_){try{console.error(_.value)}catch(L){setTimeout(function(){throw L})}}var xp=typeof WeakMap=="function"?WeakMap:Map;function sh(m,_,L){L=l(-1,L),L.tag=3,L.payload={element:null};var W=_.value;return L.callback=function(){hf||(hf=!0,$m=W),Bd(m,_)},L}function Uf(m,_,L){L=l(-1,L),L.tag=3;var W=m.type.getDerivedStateFromError;if(typeof W=="function"){var ae=_.value;L.payload=function(){return W(ae)},L.callback=function(){Bd(m,_)}}var ge=m.stateNode;return ge!==null&&typeof ge.componentDidCatch=="function"&&(L.callback=function(){Bd(m,_),typeof W!="function"&&(ff===null?ff=new Set([this]):ff.add(this));var Ze=_.stack;this.componentDidCatch(_.value,{componentStack:Ze!==null?Ze:""})}),L}function zf(m,_,L){var W=m.pingCache;if(W===null){W=m.pingCache=new xp;var ae=new Set;W.set(_,ae)}else ae=W.get(_),ae===void 0&&(ae=new Set,W.set(_,ae));ae.has(L)||(ae.add(L),m=qg.bind(null,m,_,L),_.then(m,m))}function wp(m){do{var _;if((_=m.tag===13)&&(_=m.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return m;m=m.return}while(m!==null);return null}function Od(m,_,L,W,ae){return m.mode&1?(m.flags|=65536,m.lanes=ae,m):(m===_?m.flags|=65536:(m.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(_=l(-1,1),_.tag=2,c(L,_,1))),L.lanes|=1),m)}var af=X.ReactCurrentOwner,ql=!1;function Rl(m,_,L,W){_.child=m===null?wc(_,null,L,W):Qs(_,m.child,L,W)}function Am(m,_,L,W,ae){L=L.render;var ge=_.ref;return au(_,ae),W=kr(m,_,L,W,ge,ae),L=Bi(),m!==null&&!ql?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~ae,Su(m,_,ae)):(hr&&L&&SA(_),_.flags|=1,Rl(m,_,W,ae),_.child)}function jf(m,_,L,W,ae){if(m===null){var ge=L.type;return typeof ge=="function"&&!qf(ge)&&ge.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(_.tag=15,_.type=ge,Io(m,_,ge,W,ae)):(m=r0(L.type,null,W,_,_.mode,ae),m.ref=_.ref,m.return=_,_.child=m)}if(ge=m.child,!(m.lanes&ae)){var Ze=ge.memoizedProps;if(L=L.compare,L=L!==null?L:Ur,L(Ze,W)&&m.ref===_.ref)return Su(m,_,ae)}return _.flags|=1,m=Kd(ge,W),m.ref=_.ref,m.return=_,_.child=m}function Io(m,_,L,W,ae){if(m!==null){var ge=m.memoizedProps;if(Ur(ge,W)&&m.ref===_.ref)if(ql=!1,_.pendingProps=W=ge,(m.lanes&ae)!==0)m.flags&131072&&(ql=!0);else return _.lanes=m.lanes,Su(m,_,ae)}return Id(m,_,L,W,ae)}function Hu(m,_,L){var W=_.pendingProps,ae=W.children,ge=m!==null?m.memoizedState:null;if(W.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Kl,ks),ks|=L;else{if(!(L&1073741824))return m=ge!==null?ge.baseLanes|L:L,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:m,cachePool:null,transitions:null},_.updateQueue=null,Cs(Kl,ks),ks|=m,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},W=ge!==null?ge.baseLanes:L,Cs(Kl,ks),ks|=W}else ge!==null?(W=ge.baseLanes|L,_.memoizedState=null):W=L,Cs(Kl,ks),ks|=W;return Rl(m,_,ae,L),_.child}function lf(m,_){var L=_.ref;(m===null&&L!==null||m!==null&&m.ref!==L)&&(_.flags|=512,_.flags|=2097152)}function Id(m,_,L,W,ae){var ge=Ia(L)?va:Bs.current;return ge=Vc(_,ge),au(_,ae),L=kr(m,_,L,W,ge,ae),W=Bi(),m!==null&&!ql?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~ae,Su(m,_,ae)):(hr&&W&&SA(_),_.flags|=1,Rl(m,_,L,ae),_.child)}function TA(m,_,L,W,ae){if(Ia(L)){var ge=!0;Mi(_)}else ge=!1;if(au(_,ae),_.stateNode===null)Sp(m,_),oh(_,L,W),um(_,L,W,ae),W=!0;else if(m===null){var Ze=_.stateNode,It=_.memoizedProps;Ze.props=It;var Gt=Ze.context,Cn=L.contextType;typeof Cn=="object"&&Cn!==null?Cn=lu(Cn):(Cn=Ia(L)?va:Bs.current,Cn=Vc(_,Cn));var ar=L.getDerivedStateFromProps,dr=typeof ar=="function"||typeof Ze.getSnapshotBeforeUpdate=="function";dr||typeof Ze.UNSAFE_componentWillReceiveProps!="function"&&typeof Ze.componentWillReceiveProps!="function"||(It!==W||Gt!==Cn)&&Bc(_,Ze,W,Cn),Ql=!1;var $n=_.memoizedState;Ze.state=$n,R(_,W,Ze,ae),Gt=_.memoizedState,It!==W||$n!==Gt||fr.current||Ql?(typeof ar=="function"&&(Cp(_,L,ar,W),Gt=_.memoizedState),(It=Ql||bp(_,L,It,W,$n,Gt,Cn))?(dr||typeof Ze.UNSAFE_componentWillMount!="function"&&typeof Ze.componentWillMount!="function"||(typeof Ze.componentWillMount=="function"&&Ze.componentWillMount(),typeof Ze.UNSAFE_componentWillMount=="function"&&Ze.UNSAFE_componentWillMount()),typeof Ze.componentDidMount=="function"&&(_.flags|=4194308)):(typeof Ze.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=W,_.memoizedState=Gt),Ze.props=W,Ze.state=Gt,Ze.context=Cn,W=It):(typeof Ze.componentDidMount=="function"&&(_.flags|=4194308),W=!1)}else{Ze=_.stateNode,T(m,_),It=_.memoizedProps,Cn=_.type===_.elementType?It:Qa(_.type,It),Ze.props=Cn,dr=_.pendingProps,$n=Ze.context,Gt=L.contextType,typeof Gt=="object"&&Gt!==null?Gt=lu(Gt):(Gt=Ia(L)?va:Bs.current,Gt=Vc(_,Gt));var zr=L.getDerivedStateFromProps;(ar=typeof zr=="function"||typeof Ze.getSnapshotBeforeUpdate=="function")||typeof Ze.UNSAFE_componentWillReceiveProps!="function"&&typeof Ze.componentWillReceiveProps!="function"||(It!==dr||$n!==Gt)&&Bc(_,Ze,W,Gt),Ql=!1,$n=_.memoizedState,Ze.state=$n,R(_,W,Ze,ae);var ii=_.memoizedState;It!==dr||$n!==ii||fr.current||Ql?(typeof zr=="function"&&(Cp(_,L,zr,W),ii=_.memoizedState),(Cn=Ql||bp(_,L,Cn,W,$n,ii,Gt)||!1)?(ar||typeof Ze.UNSAFE_componentWillUpdate!="function"&&typeof Ze.componentWillUpdate!="function"||(typeof Ze.componentWillUpdate=="function"&&Ze.componentWillUpdate(W,ii,Gt),typeof Ze.UNSAFE_componentWillUpdate=="function"&&Ze.UNSAFE_componentWillUpdate(W,ii,Gt)),typeof Ze.componentDidUpdate=="function"&&(_.flags|=4),typeof Ze.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof Ze.componentDidUpdate!="function"||It===m.memoizedProps&&$n===m.memoizedState||(_.flags|=4),typeof Ze.getSnapshotBeforeUpdate!="function"||It===m.memoizedProps&&$n===m.memoizedState||(_.flags|=1024),_.memoizedProps=W,_.memoizedState=ii),Ze.props=W,Ze.state=ii,Ze.context=Gt,W=Cn):(typeof Ze.componentDidUpdate!="function"||It===m.memoizedProps&&$n===m.memoizedState||(_.flags|=4),typeof Ze.getSnapshotBeforeUpdate!="function"||It===m.memoizedProps&&$n===m.memoizedState||(_.flags|=1024),W=!1)}return Ph(m,_,L,W,ge,ae)}function Ph(m,_,L,W,ae,ge){lf(m,_);var Ze=(_.flags&128)!==0;if(!W&&!Ze)return ae&&Cd(_,L,!1),Su(m,_,ge);W=_.stateNode,af.current=_;var It=Ze&&typeof L.getDerivedStateFromError!="function"?null:W.render();return _.flags|=1,m!==null&&Ze?(_.child=Qs(_,m.child,null,ge),_.child=Qs(_,null,It,ge)):Rl(m,_,It,ge),_.memoizedState=W.state,ae&&Cd(_,L,!0),_.child}function Mp(m){var _=m.stateNode;_.pendingContext?vd(m,_.pendingContext,_.pendingContext!==_.context):_.context&&vd(m,_.context,!1),ke(m,_.containerInfo)}function Oc(m,_,L,W,ae){return xu(),Po(ae),_.flags|=256,Rl(m,_,L,W),_.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function Af(m){return{baseLanes:m,cachePool:null,transitions:null}}function ah(m,_,L){var W=_.pendingProps,ae=ot.current,ge=!1,Ze=(_.flags&128)!==0,It;if((It=Ze)||(It=m!==null&&m.memoizedState===null?!1:(ae&2)!==0),It?(ge=!0,_.flags&=-129):(m===null||m.memoizedState!==null)&&(ae|=1),Cs(ot,ae&1),m===null)return bs(_),m=_.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(_.mode&1?m.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(Ze=W.children,m=W.fallback,ge?(W=_.mode,ge=_.child,Ze={mode:"hidden",children:Ze},!(W&1)&&ge!==null?(ge.childLanes=0,ge.pendingProps=Ze):ge=mm(Ze,W,0,null),m=gf(m,W,L,null),ge.return=_,m.return=_,ge.sibling=m,_.child=ge,_.child.memoizedState=Af(L),_.memoizedState=uf,m):kd(_,Ze));if(ae=m.memoizedState,ae!==null&&(It=ae.dehydrated,It!==null))return di(m,_,Ze,W,It,ae,L);if(ge){ge=W.fallback,Ze=_.mode,ae=m.child,It=ae.sibling;var Gt={mode:"hidden",children:W.children};return!(Ze&1)&&_.child!==ae?(W=_.child,W.childLanes=0,W.pendingProps=Gt,_.deletions=null):(W=Kd(ae,Gt),W.subtreeFlags=ae.subtreeFlags&14680064),It!==null?ge=Kd(It,ge):(ge=gf(ge,Ze,L,null),ge.flags|=2),ge.return=_,W.return=_,W.sibling=ge,_.child=W,W=ge,ge=_.child,Ze=m.child.memoizedState,Ze=Ze===null?Af(L):{baseLanes:Ze.baseLanes|L,cachePool:null,transitions:Ze.transitions},ge.memoizedState=Ze,ge.childLanes=m.childLanes&~L,_.memoizedState=uf,W}return ge=m.child,m=ge.sibling,W=Kd(ge,{mode:"visible",children:W.children}),!(_.mode&1)&&(W.lanes=L),W.return=_,W.sibling=null,m!==null&&(L=_.deletions,L===null?(_.deletions=[m],_.flags|=16):L.push(m)),_.child=W,_.memoizedState=null,W}function kd(m,_){return _=mm({mode:"visible",children:_},m.mode,0,null),_.return=m,m.child=_}function Hc(m,_,L,W){return W!==null&&Po(W),Qs(_,m.child,null,L),m=kd(_,_.pendingProps.children),m.flags|=2,_.memoizedState=null,m}function di(m,_,L,W,ae,ge,Ze){if(L)return _.flags&256?(_.flags&=-257,W=Th(Error(t(422))),Hc(m,_,Ze,W)):_.memoizedState!==null?(_.child=m.child,_.flags|=128,null):(ge=W.fallback,ae=_.mode,W=mm({mode:"visible",children:W.children},ae,0,null),ge=gf(ge,ae,Ze,null),ge.flags|=2,W.return=_,ge.return=_,W.sibling=ge,_.child=W,_.mode&1&&Qs(_,m.child,null,Ze),_.child.memoizedState=Af(Ze),_.memoizedState=uf,ge);if(!(_.mode&1))return Hc(m,_,Ze,null);if(ae.data==="$!"){if(W=ae.nextSibling&&ae.nextSibling.dataset,W)var It=W.dgst;return W=It,ge=Error(t(419)),W=Th(ge,W,void 0),Hc(m,_,Ze,W)}if(It=(Ze&m.childLanes)!==0,ql||It){if(W=Xo,W!==null){switch(Ze&-Ze){case 4:ae=2;break;case 16:ae=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ae=32;break;case 536870912:ae=268435456;break;default:ae=0}ae=ae&(W.suspendedLanes|Ze)?0:ae,ae!==0&&ae!==ge.retryLane&&(ge.retryLane=ae,Yu(m,ae),Jc(W,m,ae,-1))}return Jm(),W=Th(Error(t(421))),Hc(m,_,Ze,W)}return ae.data==="$?"?(_.flags|=128,_.child=m.child,_=W0.bind(null,m),ae._reactRetry=_,null):(m=ge.treeContext,da=ec(ae.nextSibling),gs=_,hr=!0,Hr=null,m!==null&&(Ga[Ds++]=ou,Ga[Ds++]=Wu,Ga[Ds++]=Zo,ou=m.id,Wu=m.overflow,Zo=_),_=kd(_,W.children),_.flags|=4096,_)}function Zc(m,_,L){m.lanes|=_;var W=m.alternate;W!==null&&(W.lanes|=_),Xs(m.return,_,L)}function is(m,_,L,W,ae){var ge=m.memoizedState;ge===null?m.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:W,tail:L,tailMode:ae}:(ge.isBackwards=_,ge.rendering=null,ge.renderingStartTime=0,ge.last=W,ge.tail=L,ge.tailMode=ae)}function Td(m,_,L){var W=_.pendingProps,ae=W.revealOrder,ge=W.tail;if(Rl(m,_,W.children,L),W=ot.current,W&2)W=W&1|2,_.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=_.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Zc(m,L,_);else if(m.tag===19)Zc(m,L,_);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===_)break e;for(;m.sibling===null;){if(m.return===null||m.return===_)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}W&=1}if(Cs(ot,W),!(_.mode&1))_.memoizedState=null;else switch(ae){case"forwards":for(L=_.child,ae=null;L!==null;)m=L.alternate,m!==null&&At(m)===null&&(ae=L),L=L.sibling;L=ae,L===null?(ae=_.child,_.child=null):(ae=L.sibling,L.sibling=null),is(_,!1,ae,L,ge);break;case"backwards":for(L=null,ae=_.child,_.child=null;ae!==null;){if(m=ae.alternate,m!==null&&At(m)===null){_.child=ae;break}m=ae.sibling,ae.sibling=L,L=ae,ae=m}is(_,!0,L,null,ge);break;case"together":is(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Sp(m,_){!(_.mode&1)&&m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2)}function Su(m,_,L){if(m!==null&&(_.dependencies=m.dependencies),yl|=_.lanes,!(L&_.childLanes))return null;if(m!==null&&_.child!==m.child)throw Error(t(153));if(_.child!==null){for(m=_.child,L=Kd(m,m.pendingProps),_.child=L,L.return=_;m.sibling!==null;)m=m.sibling,L=L.sibling=Kd(m,m.pendingProps),L.return=_;L.sibling=null}return _.child}function Ym(m,_,L){switch(_.tag){case 3:Mp(_),xu();break;case 5:Ve(_);break;case 1:Ia(_.type)&&Mi(_);break;case 4:ke(_,_.stateNode.containerInfo);break;case 10:var W=_.type._context,ae=_.memoizedProps.value;Cs(Wl,W._currentValue),W._currentValue=ae;break;case 13:if(W=_.memoizedState,W!==null)return W.dehydrated!==null?(Cs(ot,ot.current&1),_.flags|=128,null):L&_.child.childLanes?ah(m,_,L):(Cs(ot,ot.current&1),m=Su(m,_,L),m!==null?m.sibling:null);Cs(ot,ot.current&1);break;case 19:if(W=(L&_.childLanes)!==0,m.flags&128){if(W)return Td(m,_,L);_.flags|=128}if(ae=_.memoizedState,ae!==null&&(ae.rendering=null,ae.tail=null,ae.lastEffect=null),Cs(ot,ot.current),W)break;return null;case 22:case 23:return _.lanes=0,Hu(m,_,L)}return Su(m,_,L)}var gl,cm,ha,dm;gl=function(m,_){for(var L=_.child;L!==null;){if(L.tag===5||L.tag===6)m.appendChild(L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===_)break;for(;L.sibling===null;){if(L.return===null||L.return===_)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},cm=function(){},ha=function(m,_,L,W){var ae=m.memoizedProps;if(ae!==W){m=_.stateNode,Oe(te.current);var ge=null;switch(L){case"input":ae=Ut(m,ae),W=Ut(m,W),ge=[];break;case"select":ae=De({},ae,{value:void 0}),W=De({},W,{value:void 0}),ge=[];break;case"textarea":ae=mr(m,ae),W=mr(m,W),ge=[];break;default:typeof ae.onClick!="function"&&typeof W.onClick=="function"&&(m.onclick=Uu)}oe(L,W);var Ze;L=null;for(Cn in ae)if(!W.hasOwnProperty(Cn)&&ae.hasOwnProperty(Cn)&&ae[Cn]!=null)if(Cn==="style"){var It=ae[Cn];for(Ze in It)It.hasOwnProperty(Ze)&&(L||(L={}),L[Ze]="")}else Cn!=="dangerouslySetInnerHTML"&&Cn!=="children"&&Cn!=="suppressContentEditableWarning"&&Cn!=="suppressHydrationWarning"&&Cn!=="autoFocus"&&(i.hasOwnProperty(Cn)?ge||(ge=[]):(ge=ge||[]).push(Cn,null));for(Cn in W){var Gt=W[Cn];if(It=ae!=null?ae[Cn]:void 0,W.hasOwnProperty(Cn)&&Gt!==It&&(Gt!=null||It!=null))if(Cn==="style")if(It){for(Ze in It)!It.hasOwnProperty(Ze)||Gt&&Gt.hasOwnProperty(Ze)||(L||(L={}),L[Ze]="");for(Ze in Gt)Gt.hasOwnProperty(Ze)&&It[Ze]!==Gt[Ze]&&(L||(L={}),L[Ze]=Gt[Ze])}else L||(ge||(ge=[]),ge.push(Cn,L)),L=Gt;else Cn==="dangerouslySetInnerHTML"?(Gt=Gt?Gt.__html:void 0,It=It?It.__html:void 0,Gt!=null&&It!==Gt&&(ge=ge||[]).push(Cn,Gt)):Cn==="children"?typeof Gt!="string"&&typeof Gt!="number"||(ge=ge||[]).push(Cn,""+Gt):Cn!=="suppressContentEditableWarning"&&Cn!=="suppressHydrationWarning"&&(i.hasOwnProperty(Cn)?(Gt!=null&&Cn==="onScroll"&&Ho("scroll",m),ge||It===Gt||(ge=[])):(ge=ge||[]).push(Cn,Gt))}L&&(ge=ge||[]).push("style",L);var Cn=ge;(_.updateQueue=Cn)&&(_.flags|=4)}},dm=function(m,_,L,W){L!==W&&(_.flags|=4)};function cf(m,_){if(!hr)switch(m.tailMode){case"hidden":_=m.tail;for(var L=null;_!==null;)_.alternate!==null&&(L=_),_=_.sibling;L===null?m.tail=null:L.sibling=null;break;case"collapsed":L=m.tail;for(var W=null;L!==null;)L.alternate!==null&&(W=L),L=L.sibling;W===null?_||m.tail===null?m.tail=null:m.tail.sibling=null:W.sibling=null}}function il(m){var _=m.alternate!==null&&m.alternate.child===m.child,L=0,W=0;if(_)for(var ae=m.child;ae!==null;)L|=ae.lanes|ae.childLanes,W|=ae.subtreeFlags&14680064,W|=ae.flags&14680064,ae.return=m,ae=ae.sibling;else for(ae=m.child;ae!==null;)L|=ae.lanes|ae.childLanes,W|=ae.subtreeFlags,W|=ae.flags,ae.return=m,ae=ae.sibling;return m.subtreeFlags|=W,m.childLanes=L,_}function Ep(m,_,L){var W=_.pendingProps;switch(xc(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return il(_),null;case 1:return Ia(_.type)&&tc(),il(_),null;case 3:return W=_.stateNode,qe(),Ws(fr),Ws(Bs),St(),W.pendingContext&&(W.context=W.pendingContext,W.pendingContext=null),(m===null||m.child===null)&&(su(_)?_.flags|=4:m===null||m.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,Hr!==null&&(Hm(Hr),Hr=null))),cm(m,_),il(_),null;case 5:ut(_);var ae=Oe(xe.current);if(L=_.type,m!==null&&_.stateNode!=null)ha(m,_,L,W,ae),m.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!W){if(_.stateNode===null)throw Error(t(166));return il(_),null}if(m=Oe(te.current),su(_)){W=_.stateNode,L=_.type;var ge=_.memoizedProps;switch(W[wA]=_,W[_c]=ge,m=(_.mode&1)!==0,L){case"dialog":Ho("cancel",W),Ho("close",W);break;case"iframe":case"object":case"embed":Ho("load",W);break;case"video":case"audio":for(ae=0;ae<bA.length;ae++)Ho(bA[ae],W);break;case"source":Ho("error",W);break;case"img":case"image":case"link":Ho("error",W),Ho("load",W);break;case"details":Ho("toggle",W);break;case"input":en(W,ge),Ho("invalid",W);break;case"select":W._wrapperState={wasMultiple:!!ge.multiple},Ho("invalid",W);break;case"textarea":pr(W,ge),Ho("invalid",W)}oe(L,ge),ae=null;for(var Ze in ge)if(ge.hasOwnProperty(Ze)){var It=ge[Ze];Ze==="children"?typeof It=="string"?W.textContent!==It&&(ge.suppressHydrationWarning!==!0&&md(W.textContent,It,m),ae=["children",It]):typeof It=="number"&&W.textContent!==""+It&&(ge.suppressHydrationWarning!==!0&&md(W.textContent,It,m),ae=["children",""+It]):i.hasOwnProperty(Ze)&&It!=null&&Ze==="onScroll"&&Ho("scroll",W)}switch(L){case"input":Je(W),jn(W,ge,!0);break;case"textarea":Je(W),Qn(W);break;case"select":case"option":break;default:typeof ge.onClick=="function"&&(W.onclick=Uu)}W=ae,_.updateQueue=W,W!==null&&(_.flags|=4)}else{Ze=ae.nodeType===9?ae:ae.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Er(L)),m==="http://www.w3.org/1999/xhtml"?L==="script"?(m=Ze.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof W.is=="string"?m=Ze.createElement(L,{is:W.is}):(m=Ze.createElement(L),L==="select"&&(Ze=m,W.multiple?Ze.multiple=!0:W.size&&(Ze.size=W.size))):m=Ze.createElementNS(m,L),m[wA]=_,m[_c]=W,gl(m,_,!1,!1),_.stateNode=m;e:{switch(Ze=ve(L,W),L){case"dialog":Ho("cancel",m),Ho("close",m),ae=W;break;case"iframe":case"object":case"embed":Ho("load",m),ae=W;break;case"video":case"audio":for(ae=0;ae<bA.length;ae++)Ho(bA[ae],m);ae=W;break;case"source":Ho("error",m),ae=W;break;case"img":case"image":case"link":Ho("error",m),Ho("load",m),ae=W;break;case"details":Ho("toggle",m),ae=W;break;case"input":en(m,W),ae=Ut(m,W),Ho("invalid",m);break;case"option":ae=W;break;case"select":m._wrapperState={wasMultiple:!!W.multiple},ae=De({},W,{value:void 0}),Ho("invalid",m);break;case"textarea":pr(m,W),ae=mr(m,W),Ho("invalid",m);break;default:ae=W}oe(L,ae),It=ae;for(ge in It)if(It.hasOwnProperty(ge)){var Gt=It[ge];ge==="style"?rr(m,Gt):ge==="dangerouslySetInnerHTML"?(Gt=Gt?Gt.__html:void 0,Gt!=null&&me(m,Gt)):ge==="children"?typeof Gt=="string"?(L!=="textarea"||Gt!=="")&&Xe(m,Gt):typeof Gt=="number"&&Xe(m,""+Gt):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?Gt!=null&&ge==="onScroll"&&Ho("scroll",m):Gt!=null&&re(m,ge,Gt,Ze))}switch(L){case"input":Je(m),jn(m,W,!1);break;case"textarea":Je(m),Qn(m);break;case"option":W.value!=null&&m.setAttribute("value",""+Fe(W.value));break;case"select":m.multiple=!!W.multiple,ge=W.value,ge!=null?Jn(m,!!W.multiple,ge,!1):W.defaultValue!=null&&Jn(m,!!W.multiple,W.defaultValue,!0);break;default:typeof ae.onClick=="function"&&(m.onclick=Uu)}switch(L){case"button":case"input":case"select":case"textarea":W=!!W.autoFocus;break e;case"img":W=!0;break e;default:W=!1}}W&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return il(_),null;case 6:if(m&&_.stateNode!=null)dm(m,_,m.memoizedProps,W);else{if(typeof W!="string"&&_.stateNode===null)throw Error(t(166));if(L=Oe(xe.current),Oe(te.current),su(_)){if(W=_.stateNode,L=_.memoizedProps,W[wA]=_,(ge=W.nodeValue!==L)&&(m=gs,m!==null))switch(m.tag){case 3:md(W.nodeValue,L,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&md(W.nodeValue,L,(m.mode&1)!==0)}ge&&(_.flags|=4)}else W=(L.nodeType===9?L:L.ownerDocument).createTextNode(W),W[wA]=_,_.stateNode=W}return il(_),null;case 13:if(Ws(ot),W=_.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(hr&&da!==null&&_.mode&1&&!(_.flags&128))Ff(),xu(),_.flags|=98560,ge=!1;else if(ge=su(_),W!==null&&W.dehydrated!==null){if(m===null){if(!ge)throw Error(t(318));if(ge=_.memoizedState,ge=ge!==null?ge.dehydrated:null,!ge)throw Error(t(317));ge[wA]=_}else xu(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;il(_),ge=!1}else Hr!==null&&(Hm(Hr),Hr=null),ge=!0;if(!ge)return _.flags&65536?_:null}return _.flags&128?(_.lanes=L,_):(W=W!==null,W!==(m!==null&&m.memoizedState!==null)&&W&&(_.child.flags|=8192,_.mode&1&&(m===null||ot.current&1?Ro===0&&(Ro=3):Jm())),_.updateQueue!==null&&(_.flags|=4),il(_),null);case 4:return qe(),cm(m,_),m===null&&Fu(_.stateNode.containerInfo),il(_),null;case 10:return _a(_.type._context),il(_),null;case 17:return Ia(_.type)&&tc(),il(_),null;case 19:if(Ws(ot),ge=_.memoizedState,ge===null)return il(_),null;if(W=(_.flags&128)!==0,Ze=ge.rendering,Ze===null)if(W)cf(ge,!1);else{if(Ro!==0||m!==null&&m.flags&128)for(m=_.child;m!==null;){if(Ze=At(m),Ze!==null){for(_.flags|=128,cf(ge,!1),W=Ze.updateQueue,W!==null&&(_.updateQueue=W,_.flags|=4),_.subtreeFlags=0,W=L,L=_.child;L!==null;)ge=L,m=W,ge.flags&=14680066,Ze=ge.alternate,Ze===null?(ge.childLanes=0,ge.lanes=m,ge.child=null,ge.subtreeFlags=0,ge.memoizedProps=null,ge.memoizedState=null,ge.updateQueue=null,ge.dependencies=null,ge.stateNode=null):(ge.childLanes=Ze.childLanes,ge.lanes=Ze.lanes,ge.child=Ze.child,ge.subtreeFlags=0,ge.deletions=null,ge.memoizedProps=Ze.memoizedProps,ge.memoizedState=Ze.memoizedState,ge.updateQueue=Ze.updateQueue,ge.type=Ze.type,m=Ze.dependencies,ge.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),L=L.sibling;return Cs(ot,ot.current&1|2),_.child}m=m.sibling}ge.tail!==null&&ao()>Nf&&(_.flags|=128,W=!0,cf(ge,!1),_.lanes=4194304)}else{if(!W)if(m=At(Ze),m!==null){if(_.flags|=128,W=!0,L=m.updateQueue,L!==null&&(_.updateQueue=L,_.flags|=4),cf(ge,!0),ge.tail===null&&ge.tailMode==="hidden"&&!Ze.alternate&&!hr)return il(_),null}else 2*ao()-ge.renderingStartTime>Nf&&L!==1073741824&&(_.flags|=128,W=!0,cf(ge,!1),_.lanes=4194304);ge.isBackwards?(Ze.sibling=_.child,_.child=Ze):(L=ge.last,L!==null?L.sibling=Ze:_.child=Ze,ge.last=Ze)}return ge.tail!==null?(_=ge.tail,ge.rendering=_,ge.tail=_.sibling,ge.renderingStartTime=ao(),_.sibling=null,L=ot.current,Cs(ot,W?L&1|2:L&1),_):(il(_),null);case 22:case 23:return z0(),W=_.memoizedState!==null,m!==null&&m.memoizedState!==null!==W&&(_.flags|=8192),W&&_.mode&1?ks&1073741824&&(il(_),_.subtreeFlags&6&&(_.flags|=8192)):il(_),null;case 24:return null;case 25:return null}throw Error(t(156,_.tag))}function A(m,_){switch(xc(_),_.tag){case 1:return Ia(_.type)&&tc(),m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 3:return qe(),Ws(fr),Ws(Bs),St(),m=_.flags,m&65536&&!(m&128)?(_.flags=m&-65537|128,_):null;case 5:return ut(_),null;case 13:if(Ws(ot),m=_.memoizedState,m!==null&&m.dehydrated!==null){if(_.alternate===null)throw Error(t(340));xu()}return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 19:return Ws(ot),null;case 4:return qe(),null;case 10:return _a(_.type._context),null;case 22:case 23:return z0(),null;case 24:return null;default:return null}}var y=!1,I=!1,B=typeof WeakSet=="function"?WeakSet:Set,K=null;function H(m,_){var L=m.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(W){ol(m,_,W)}else L.current=null}function ue(m,_,L){try{L()}catch(W){ol(m,_,W)}}var _e=!1;function Ie(m,_){if(XA=Be,m=Vo(),QA(m)){if("selectionStart"in m)var L={start:m.selectionStart,end:m.selectionEnd};else e:{L=(L=m.ownerDocument)&&L.defaultView||window;var W=L.getSelection&&L.getSelection();if(W&&W.rangeCount!==0){L=W.anchorNode;var ae=W.anchorOffset,ge=W.focusNode;W=W.focusOffset;try{L.nodeType,ge.nodeType}catch{L=null;break e}var Ze=0,It=-1,Gt=-1,Cn=0,ar=0,dr=m,$n=null;t:for(;;){for(var zr;dr!==L||ae!==0&&dr.nodeType!==3||(It=Ze+ae),dr!==ge||W!==0&&dr.nodeType!==3||(Gt=Ze+W),dr.nodeType===3&&(Ze+=dr.nodeValue.length),(zr=dr.firstChild)!==null;)$n=dr,dr=zr;for(;;){if(dr===m)break t;if($n===L&&++Cn===ae&&(It=Ze),$n===ge&&++ar===W&&(Gt=Ze),(zr=dr.nextSibling)!==null)break;dr=$n,$n=dr.parentNode}dr=zr}L=It===-1||Gt===-1?null:{start:It,end:Gt}}else L=null}L=L||{start:0,end:0}}else L=null;for(Nl={focusedElem:m,selectionRange:L},Be=!1,K=_;K!==null;)if(_=K,m=_.child,(_.subtreeFlags&1028)!==0&&m!==null)m.return=_,K=m;else for(;K!==null;){_=K;try{var ii=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(ii!==null){var li=ii.memoizedProps,sl=ii.memoizedState,an=_.stateNode,Zt=an.getSnapshotBeforeUpdate(_.elementType===_.type?li:Qa(_.type,li),sl);an.__reactInternalSnapshotBeforeUpdate=Zt}break;case 3:var An=_.stateNode.containerInfo;An.nodeType===1?An.textContent="":An.nodeType===9&&An.documentElement&&An.removeChild(An.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(yr){ol(_,_.return,yr)}if(m=_.sibling,m!==null){m.return=_.return,K=m;break}K=_.return}return ii=_e,_e=!1,ii}function Ue(m,_,L){var W=_.updateQueue;if(W=W!==null?W.lastEffect:null,W!==null){var ae=W=W.next;do{if((ae.tag&m)===m){var ge=ae.destroy;ae.destroy=void 0,ge!==void 0&&ue(_,L,ge)}ae=ae.next}while(ae!==W)}}function ct(m,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var L=_=_.next;do{if((L.tag&m)===m){var W=L.create;L.destroy=W()}L=L.next}while(L!==_)}}function xt(m){var _=m.ref;if(_!==null){var L=m.stateNode;switch(m.tag){case 5:m=L;break;default:m=L}typeof _=="function"?_(m):_.current=m}}function Ht(m){var _=m.alternate;_!==null&&(m.alternate=null,Ht(_)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(_=m.stateNode,_!==null&&(delete _[wA],delete _[_c],delete _[$c],delete _[et],delete _[Na])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Wt(m){return m.tag===5||m.tag===3||m.tag===4}function xn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Wt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Pn(m,_,L){var W=m.tag;if(W===5||W===6)m=m.stateNode,_?L.nodeType===8?L.parentNode.insertBefore(m,_):L.insertBefore(m,_):(L.nodeType===8?(_=L.parentNode,_.insertBefore(m,L)):(_=L,_.appendChild(m)),L=L._reactRootContainer,L!=null||_.onclick!==null||(_.onclick=Uu));else if(W!==4&&(m=m.child,m!==null))for(Pn(m,_,L),m=m.sibling;m!==null;)Pn(m,_,L),m=m.sibling}function Yn(m,_,L){var W=m.tag;if(W===5||W===6)m=m.stateNode,_?L.insertBefore(m,_):L.appendChild(m);else if(W!==4&&(m=m.child,m!==null))for(Yn(m,_,L),m=m.sibling;m!==null;)Yn(m,_,L),m=m.sibling}var Xn=null,_r=!1;function ur(m,_,L){for(L=L.child;L!==null;)Fr(m,_,L),L=L.sibling}function Fr(m,_,L){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(ia,L)}catch{}switch(L.tag){case 5:I||H(L,_);case 6:var W=Xn,ae=_r;Xn=null,ur(m,_,L),Xn=W,_r=ae,Xn!==null&&(_r?(m=Xn,L=L.stateNode,m.nodeType===8?m.parentNode.removeChild(L):m.removeChild(L)):Xn.removeChild(L.stateNode));break;case 18:Xn!==null&&(_r?(m=Xn,L=L.stateNode,m.nodeType===8?eh(m.parentNode,L):m.nodeType===1&&eh(m,L),Ri(m)):eh(Xn,L.stateNode));break;case 4:W=Xn,ae=_r,Xn=L.stateNode.containerInfo,_r=!0,ur(m,_,L),Xn=W,_r=ae;break;case 0:case 11:case 14:case 15:if(!I&&(W=L.updateQueue,W!==null&&(W=W.lastEffect,W!==null))){ae=W=W.next;do{var ge=ae,Ze=ge.destroy;ge=ge.tag,Ze!==void 0&&(ge&2||ge&4)&&ue(L,_,Ze),ae=ae.next}while(ae!==W)}ur(m,_,L);break;case 1:if(!I&&(H(L,_),W=L.stateNode,typeof W.componentWillUnmount=="function"))try{W.props=L.memoizedProps,W.state=L.memoizedState,W.componentWillUnmount()}catch(It){ol(L,_,It)}ur(m,_,L);break;case 21:ur(m,_,L);break;case 22:L.mode&1?(I=(W=I)||L.memoizedState!==null,ur(m,_,L),I=W):ur(m,_,L);break;default:ur(m,_,L)}}function ai(m){var _=m.updateQueue;if(_!==null){m.updateQueue=null;var L=m.stateNode;L===null&&(L=m.stateNode=new B),_.forEach(function(W){var ae=Yg.bind(null,m,W);L.has(W)||(L.add(W),W.then(ae,ae))})}}function Gr(m,_){var L=_.deletions;if(L!==null)for(var W=0;W<L.length;W++){var ae=L[W];try{var ge=m,Ze=_,It=Ze;e:for(;It!==null;){switch(It.tag){case 5:Xn=It.stateNode,_r=!1;break e;case 3:Xn=It.stateNode.containerInfo,_r=!0;break e;case 4:Xn=It.stateNode.containerInfo,_r=!0;break e}It=It.return}if(Xn===null)throw Error(t(160));Fr(ge,Ze,ae),Xn=null,_r=!1;var Gt=ae.alternate;Gt!==null&&(Gt.return=null),ae.return=null}catch(Cn){ol(ae,_,Cn)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)Xi(_,m),_=_.sibling}function Xi(m,_){var L=m.alternate,W=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Gr(_,m),ko(m),W&4){try{Ue(3,m,m.return),ct(3,m)}catch(li){ol(m,m.return,li)}try{Ue(5,m,m.return)}catch(li){ol(m,m.return,li)}}break;case 1:Gr(_,m),ko(m),W&512&&L!==null&&H(L,L.return);break;case 5:if(Gr(_,m),ko(m),W&512&&L!==null&&H(L,L.return),m.flags&32){var ae=m.stateNode;try{Xe(ae,"")}catch(li){ol(m,m.return,li)}}if(W&4&&(ae=m.stateNode,ae!=null)){var ge=m.memoizedProps,Ze=L!==null?L.memoizedProps:ge,It=m.type,Gt=m.updateQueue;if(m.updateQueue=null,Gt!==null)try{It==="input"&&ge.type==="radio"&&ge.name!=null&&Nt(ae,ge),ve(It,Ze);var Cn=ve(It,ge);for(Ze=0;Ze<Gt.length;Ze+=2){var ar=Gt[Ze],dr=Gt[Ze+1];ar==="style"?rr(ae,dr):ar==="dangerouslySetInnerHTML"?me(ae,dr):ar==="children"?Xe(ae,dr):re(ae,ar,dr,Cn)}switch(It){case"input":yn(ae,ge);break;case"textarea":xr(ae,ge);break;case"select":var $n=ae._wrapperState.wasMultiple;ae._wrapperState.wasMultiple=!!ge.multiple;var zr=ge.value;zr!=null?Jn(ae,!!ge.multiple,zr,!1):$n!==!!ge.multiple&&(ge.defaultValue!=null?Jn(ae,!!ge.multiple,ge.defaultValue,!0):Jn(ae,!!ge.multiple,ge.multiple?[]:"",!1))}ae[_c]=ge}catch(li){ol(m,m.return,li)}}break;case 6:if(Gr(_,m),ko(m),W&4){if(m.stateNode===null)throw Error(t(162));ae=m.stateNode,ge=m.memoizedProps;try{ae.nodeValue=ge}catch(li){ol(m,m.return,li)}}break;case 3:if(Gr(_,m),ko(m),W&4&&L!==null&&L.memoizedState.isDehydrated)try{Ri(_.containerInfo)}catch(li){ol(m,m.return,li)}break;case 4:Gr(_,m),ko(m);break;case 13:Gr(_,m),ko(m),ae=m.child,ae.flags&8192&&(ge=ae.memoizedState!==null,ae.stateNode.isHidden=ge,!ge||ae.alternate!==null&&ae.alternate.memoizedState!==null||(df=ao())),W&4&&ai(m);break;case 22:if(ar=L!==null&&L.memoizedState!==null,m.mode&1?(I=(Cn=I)||ar,Gr(_,m),I=Cn):Gr(_,m),ko(m),W&8192){if(Cn=m.memoizedState!==null,(m.stateNode.isHidden=Cn)&&!ar&&m.mode&1)for(K=m,ar=m.child;ar!==null;){for(dr=K=ar;K!==null;){switch($n=K,zr=$n.child,$n.tag){case 0:case 11:case 14:case 15:Ue(4,$n,$n.return);break;case 1:H($n,$n.return);var ii=$n.stateNode;if(typeof ii.componentWillUnmount=="function"){W=$n,L=$n.return;try{_=W,ii.props=_.memoizedProps,ii.state=_.memoizedState,ii.componentWillUnmount()}catch(li){ol(W,L,li)}}break;case 5:H($n,$n.return);break;case 22:if($n.memoizedState!==null){ba(dr);continue}}zr!==null?(zr.return=$n,K=zr):ba(dr)}ar=ar.sibling}e:for(ar=null,dr=m;;){if(dr.tag===5){if(ar===null){ar=dr;try{ae=dr.stateNode,Cn?(ge=ae.style,typeof ge.setProperty=="function"?ge.setProperty("display","none","important"):ge.display="none"):(It=dr.stateNode,Gt=dr.memoizedProps.style,Ze=Gt!=null&&Gt.hasOwnProperty("display")?Gt.display:null,It.style.display=nn("display",Ze))}catch(li){ol(m,m.return,li)}}}else if(dr.tag===6){if(ar===null)try{dr.stateNode.nodeValue=Cn?"":dr.memoizedProps}catch(li){ol(m,m.return,li)}}else if((dr.tag!==22&&dr.tag!==23||dr.memoizedState===null||dr===m)&&dr.child!==null){dr.child.return=dr,dr=dr.child;continue}if(dr===m)break e;for(;dr.sibling===null;){if(dr.return===null||dr.return===m)break e;ar===dr&&(ar=null),dr=dr.return}ar===dr&&(ar=null),dr.sibling.return=dr.return,dr=dr.sibling}}break;case 19:Gr(_,m),ko(m),W&4&&ai(m);break;case 21:break;default:Gr(_,m),ko(m)}}function ko(m){var _=m.flags;if(_&2){try{e:{for(var L=m.return;L!==null;){if(Wt(L)){var W=L;break e}L=L.return}throw Error(t(160))}switch(W.tag){case 5:var ae=W.stateNode;W.flags&32&&(Xe(ae,""),W.flags&=-33);var ge=xn(m);Yn(m,ge,ae);break;case 3:case 4:var Ze=W.stateNode.containerInfo,It=xn(m);Pn(m,It,Ze);break;default:throw Error(t(161))}}catch(Gt){ol(m,m.return,Gt)}m.flags&=-3}_&4096&&(m.flags&=-4097)}function qa(m,_,L){K=m,aa(m)}function aa(m,_,L){for(var W=(m.mode&1)!==0;K!==null;){var ae=K,ge=ae.child;if(ae.tag===22&&W){var Ze=ae.memoizedState!==null||y;if(!Ze){var It=ae.alternate,Gt=It!==null&&It.memoizedState!==null||I;It=y;var Cn=I;if(y=Ze,(I=Gt)&&!Cn)for(K=ae;K!==null;)Ze=K,Gt=Ze.child,Ze.tag===22&&Ze.memoizedState!==null?Pa(ae):Gt!==null?(Gt.return=Ze,K=Gt):Pa(ae);for(;ge!==null;)K=ge,aa(ge),ge=ge.sibling;K=ae,y=It,I=Cn}Ca(m)}else ae.subtreeFlags&8772&&ge!==null?(ge.return=ae,K=ge):Ca(m)}}function Ca(m){for(;K!==null;){var _=K;if(_.flags&8772){var L=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:I||ct(5,_);break;case 1:var W=_.stateNode;if(_.flags&4&&!I)if(L===null)W.componentDidMount();else{var ae=_.elementType===_.type?L.memoizedProps:Qa(_.type,L.memoizedProps);W.componentDidUpdate(ae,L.memoizedState,W.__reactInternalSnapshotBeforeUpdate)}var ge=_.updateQueue;ge!==null&&j(_,ge,W);break;case 3:var Ze=_.updateQueue;if(Ze!==null){if(L=null,_.child!==null)switch(_.child.tag){case 5:L=_.child.stateNode;break;case 1:L=_.child.stateNode}j(_,Ze,L)}break;case 5:var It=_.stateNode;if(L===null&&_.flags&4){L=It;var Gt=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Gt.autoFocus&&L.focus();break;case"img":Gt.src&&(L.src=Gt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var Cn=_.alternate;if(Cn!==null){var ar=Cn.memoizedState;if(ar!==null){var dr=ar.dehydrated;dr!==null&&Ri(dr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}I||_.flags&512&&xt(_)}catch($n){ol(_,_.return,$n)}}if(_===m){K=null;break}if(L=_.sibling,L!==null){L.return=_.return,K=L;break}K=_.return}}function ba(m){for(;K!==null;){var _=K;if(_===m){K=null;break}var L=_.sibling;if(L!==null){L.return=_.return,K=L;break}K=_.return}}function Pa(m){for(;K!==null;){var _=K;try{switch(_.tag){case 0:case 11:case 15:var L=_.return;try{ct(4,_)}catch(Gt){ol(_,L,Gt)}break;case 1:var W=_.stateNode;if(typeof W.componentDidMount=="function"){var ae=_.return;try{W.componentDidMount()}catch(Gt){ol(_,ae,Gt)}}var ge=_.return;try{xt(_)}catch(Gt){ol(_,ge,Gt)}break;case 5:var Ze=_.return;try{xt(_)}catch(Gt){ol(_,Ze,Gt)}}}catch(Gt){ol(_,_.return,Gt)}if(_===m){K=null;break}var It=_.sibling;if(It!==null){It.return=_.return,K=It;break}K=_.return}}var Yl=Math.ceil,Ya=X.ReactCurrentDispatcher,xa=X.ReactCurrentOwner,hs=X.ReactCurrentBatchConfig,gi=0,Xo=null,la=null,fa=0,ks=0,Kl=Oa(0),Ro=0,Pd=null,yl=0,PA=0,Xc=0,vl=null,_l=null,df=0,Nf=1/0,Rh=null,hf=!1,$m=null,ff=null,Vm=!1,pf=null,RA=0,hm=0,F0=null,fm=-1,Gf=0;function dA(){return gi&6?ao():fm!==-1?fm:fm=ao()}function Kh(m){return m.mode&1?gi&2&&fa!==0?fa&-fa:Is.transition!==null?(Gf===0&&(Gf=Xa()),Gf):(m=Lr,m!==0||(m=window.event,m=m===void 0?16:ci(m.type)),m):1}function Jc(m,_,L,W){if(50<hm)throw hm=0,F0=null,Error(t(185));ca(m,L,W),(!(gi&2)||m!==Xo)&&(m===Xo&&(!(gi&2)&&(PA|=L),Ro===4&&mf(m,fa)),sc(m,W),L===1&&gi===0&&!(_.mode&1)&&(Nf=ao()+500,bd&&AA()))}function sc(m,_){var L=m.callbackNode;ri(m,_);var W=Ns(m,m===Xo?fa:0);if(W===0)L!==null&&ns(L),m.callbackNode=null,m.callbackPriority=0;else if(_=W&-W,m.callbackPriority!==_){if(L!=null&&ns(L),_===1)m.tag===0?nc(Qg.bind(null,m)):MA(Qg.bind(null,m)),gd(function(){!(gi&6)&&AA()}),L=null;else{switch(Ei(W)){case 1:L=tu;break;case 4:L=so;break;case 16:L=Dr;break;case 536870912:L=Ps;break;default:L=Dr}L=Op(L,Wf.bind(null,m))}m.callbackPriority=_,m.callbackNode=L}}function Wf(m,_){if(fm=-1,Gf=0,gi&6)throw Error(t(327));var L=m.callbackNode;if(Bp()&&m.callbackNode!==L)return null;var W=Ns(m,m===Xo?fa:0);if(W===0)return null;if(W&30||W&m.expiredLanes||_)_=$a(m,W);else{_=W;var ae=gi;gi|=2;var ge=Xm();(Xo!==m||fa!==_)&&(Rh=null,Nf=ao()+500,Rd(m,_));do try{Wy();break}catch(It){j0(m,It)}while(!0);wu(),Ya.current=ge,gi=ae,la!==null?_=0:(Xo=null,fa=0,_=Ro)}if(_!==0){if(_===2&&(ae=wi(m),ae!==0&&(W=ae,_=U0(m,ae))),_===1)throw L=Pd,Rd(m,0),mf(m,W),sc(m,ao()),L;if(_===6)mf(m,W);else{if(ae=m.current.alternate,!(W&30)&&!Gy(ae)&&(_=$a(m,W),_===2&&(ge=wi(m),ge!==0&&(W=ge,_=U0(m,ge))),_===1))throw L=Pd,Rd(m,0),mf(m,W),sc(m,ao()),L;switch(m.finishedWork=ae,m.finishedLanes=W,_){case 0:case 1:throw Error(t(345));case 2:Dh(m,_l,Rh);break;case 3:if(mf(m,W),(W&130023424)===W&&(_=df+500-ao(),10<_)){if(Ns(m,0)!==0)break;if(ae=m.suspendedLanes,(ae&W)!==W){dA(),m.pingedLanes|=m.suspendedLanes&ae;break}m.timeoutHandle=dl(Dh.bind(null,m,_l,Rh),_);break}Dh(m,_l,Rh);break;case 4:if(mf(m,W),(W&4194240)===W)break;for(_=m.eventTimes,ae=-1;0<W;){var Ze=31-fn(W);ge=1<<Ze,Ze=_[Ze],Ze>ae&&(ae=Ze),W&=~ge}if(W=ae,W=ao()-W,W=(120>W?120:480>W?480:1080>W?1080:1920>W?1920:3e3>W?3e3:4320>W?4320:1960*Yl(W/1960))-W,10<W){m.timeoutHandle=dl(Dh.bind(null,m,_l,Rh),W);break}Dh(m,_l,Rh);break;case 5:Dh(m,_l,Rh);break;default:throw Error(t(329))}}}return sc(m,ao()),m.callbackNode===L?Wf.bind(null,m):null}function U0(m,_){var L=vl;return m.current.memoizedState.isDehydrated&&(Rd(m,_).flags|=256),m=$a(m,_),m!==2&&(_=_l,_l=L,_!==null&&Hm(_)),m}function Hm(m){_l===null?_l=m:_l.push.apply(_l,m)}function Gy(m){for(var _=m;;){if(_.flags&16384){var L=_.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var W=0;W<L.length;W++){var ae=L[W],ge=ae.getSnapshot;ae=ae.value;try{if(!sn(ge(),ae))return!1}catch{return!1}}}if(L=_.child,_.subtreeFlags&16384&&L!==null)L.return=_,_=L;else{if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function mf(m,_){for(_&=~Xc,_&=~PA,m.suspendedLanes|=_,m.pingedLanes&=~_,m=m.expirationTimes;0<_;){var L=31-fn(_),W=1<<L;m[L]=-1,_&=~W}}function Qg(m){if(gi&6)throw Error(t(327));Bp();var _=Ns(m,0);if(!(_&1))return sc(m,ao()),null;var L=$a(m,_);if(m.tag!==0&&L===2){var W=wi(m);W!==0&&(_=W,L=U0(m,W))}if(L===1)throw L=Pd,Rd(m,0),mf(m,_),sc(m,ao()),L;if(L===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=_,Dh(m,_l,Rh),sc(m,ao()),null}function Zm(m,_){var L=gi;gi|=1;try{return m(_)}finally{gi=L,gi===0&&(Nf=ao()+500,bd&&AA())}}function Qf(m){pf!==null&&pf.tag===0&&!(gi&6)&&Bp();var _=gi;gi|=1;var L=hs.transition,W=Lr;try{if(hs.transition=null,Lr=1,m)return m()}finally{Lr=W,hs.transition=L,gi=_,!(gi&6)&&AA()}}function z0(){ks=Kl.current,Ws(Kl)}function Rd(m,_){m.finishedWork=null,m.finishedLanes=0;var L=m.timeoutHandle;if(L!==-1&&(m.timeoutHandle=-1,JA(L)),la!==null)for(L=la.return;L!==null;){var W=L;switch(xc(W),W.tag){case 1:W=W.type.childContextTypes,W!=null&&tc();break;case 3:qe(),Ws(fr),Ws(Bs),St();break;case 5:ut(W);break;case 4:qe();break;case 13:Ws(ot);break;case 19:Ws(ot);break;case 10:_a(W.type._context);break;case 22:case 23:z0()}L=L.return}if(Xo=m,la=m=Kd(m.current,null),fa=ks=_,Ro=0,Pd=null,Xc=PA=yl=0,_l=vl=null,cA!==null){for(_=0;_<cA.length;_++)if(L=cA[_],W=L.interleaved,W!==null){L.interleaved=null;var ae=W.next,ge=L.pending;if(ge!==null){var Ze=ge.next;ge.next=ae,W.next=Ze}L.pending=W}cA=null}return m}function j0(m,_){do{var L=la;try{if(wu(),kt.current=Ed,vn){for(var W=Tt.memoizedState;W!==null;){var ae=W.queue;ae!==null&&(ae.pending=null),W=W.next}vn=!1}if(Ft=0,Vt=Jt=Tt=null,_n=!1,mn=0,xa.current=null,L===null||L.return===null){Ro=1,Pd=_,la=null;break}e:{var ge=m,Ze=L.return,It=L,Gt=_;if(_=fa,It.flags|=32768,Gt!==null&&typeof Gt=="object"&&typeof Gt.then=="function"){var Cn=Gt,ar=It,dr=ar.tag;if(!(ar.mode&1)&&(dr===0||dr===11||dr===15)){var $n=ar.alternate;$n?(ar.updateQueue=$n.updateQueue,ar.memoizedState=$n.memoizedState,ar.lanes=$n.lanes):(ar.updateQueue=null,ar.memoizedState=null)}var zr=wp(Ze);if(zr!==null){zr.flags&=-257,Od(zr,Ze,It,ge,_),zr.mode&1&&zf(ge,Cn,_),_=zr,Gt=Cn;var ii=_.updateQueue;if(ii===null){var li=new Set;li.add(Gt),_.updateQueue=li}else ii.add(Gt);break e}else{if(!(_&1)){zf(ge,Cn,_),Jm();break e}Gt=Error(t(426))}}else if(hr&&It.mode&1){var sl=wp(Ze);if(sl!==null){!(sl.flags&65536)&&(sl.flags|=256),Od(sl,Ze,It,ge,_),Po(oc(Gt,It));break e}}ge=Gt=oc(Gt,It),Ro!==4&&(Ro=2),vl===null?vl=[ge]:vl.push(ge),ge=Ze;do{switch(ge.tag){case 3:ge.flags|=65536,_&=-_,ge.lanes|=_;var an=sh(ge,Gt,_);M(ge,an);break e;case 1:It=Gt;var Zt=ge.type,An=ge.stateNode;if(!(ge.flags&128)&&(typeof Zt.getDerivedStateFromError=="function"||An!==null&&typeof An.componentDidCatch=="function"&&(ff===null||!ff.has(An)))){ge.flags|=65536,_&=-_,ge.lanes|=_;var yr=Uf(ge,It,_);M(ge,yr);break e}}ge=ge.return}while(ge!==null)}e0(L)}catch(ni){_=ni,la===L&&L!==null&&(la=L=L.return);continue}break}while(!0)}function Xm(){var m=Ya.current;return Ya.current=Ed,m===null?Ed:m}function Jm(){(Ro===0||Ro===3||Ro===2)&&(Ro=4),Xo===null||!(yl&268435455)&&!(PA&268435455)||mf(Xo,fa)}function $a(m,_){var L=gi;gi|=2;var W=Xm();(Xo!==m||fa!==_)&&(Rh=null,Rd(m,_));do try{N0();break}catch(ae){j0(m,ae)}while(!0);if(wu(),gi=L,Ya.current=W,la!==null)throw Error(t(261));return Xo=null,fa=0,Ro}function N0(){for(;la!==null;)G0(la)}function Wy(){for(;la!==null&&!Aa();)G0(la)}function G0(m){var _=Lh(m.alternate,m,ks);m.memoizedProps=m.pendingProps,_===null?e0(m):la=_,xa.current=null}function e0(m){var _=m;do{var L=_.alternate;if(m=_.return,_.flags&32768){if(L=A(L,_),L!==null){L.flags&=32767,la=L;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Ro=6,la=null;return}}else if(L=Ep(L,_,ks),L!==null){la=L;return}if(_=_.sibling,_!==null){la=_;return}la=_=m}while(_!==null);Ro===0&&(Ro=5)}function Dh(m,_,L){var W=Lr,ae=hs.transition;try{hs.transition=null,Lr=1,Qy(m,_,L,W)}finally{hs.transition=ae,Lr=W}return null}function Qy(m,_,L,W){do Bp();while(pf!==null);if(gi&6)throw Error(t(327));L=m.finishedWork;var ae=m.finishedLanes;if(L===null)return null;if(m.finishedWork=null,m.finishedLanes=0,L===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ge=L.lanes|L.childLanes;if(iA(m,ge),m===Xo&&(la=Xo=null,fa=0),!(L.subtreeFlags&2064)&&!(L.flags&2064)||Vm||(Vm=!0,Op(Dr,function(){return Bp(),null})),ge=(L.flags&15990)!==0,L.subtreeFlags&15990||ge){ge=hs.transition,hs.transition=null;var Ze=Lr;Lr=1;var It=gi;gi|=4,xa.current=null,Ie(m,L),Xi(L,m),vp(Nl),Be=!!XA,Nl=XA=null,m.current=L,qa(L),Al(),gi=It,Lr=Ze,hs.transition=ge}else m.current=L;if(Vm&&(Vm=!1,pf=m,RA=ae),ge=m.pendingLanes,ge===0&&(ff=null),bt(L.stateNode),sc(m,ao()),_!==null)for(W=m.onRecoverableError,L=0;L<_.length;L++)ae=_[L],W(ae.value,{componentStack:ae.stack,digest:ae.digest});if(hf)throw hf=!1,m=$m,$m=null,m;return RA&1&&m.tag!==0&&Bp(),ge=m.pendingLanes,ge&1?m===F0?hm++:(hm=0,F0=m):hm=0,AA(),null}function Bp(){if(pf!==null){var m=Ei(RA),_=hs.transition,L=Lr;try{if(hs.transition=null,Lr=16>m?16:m,pf===null)var W=!1;else{if(m=pf,pf=null,RA=0,gi&6)throw Error(t(331));var ae=gi;for(gi|=4,K=m.current;K!==null;){var ge=K,Ze=ge.child;if(K.flags&16){var It=ge.deletions;if(It!==null){for(var Gt=0;Gt<It.length;Gt++){var Cn=It[Gt];for(K=Cn;K!==null;){var ar=K;switch(ar.tag){case 0:case 11:case 15:Ue(8,ar,ge)}var dr=ar.child;if(dr!==null)dr.return=ar,K=dr;else for(;K!==null;){ar=K;var $n=ar.sibling,zr=ar.return;if(Ht(ar),ar===Cn){K=null;break}if($n!==null){$n.return=zr,K=$n;break}K=zr}}}var ii=ge.alternate;if(ii!==null){var li=ii.child;if(li!==null){ii.child=null;do{var sl=li.sibling;li.sibling=null,li=sl}while(li!==null)}}K=ge}}if(ge.subtreeFlags&2064&&Ze!==null)Ze.return=ge,K=Ze;else e:for(;K!==null;){if(ge=K,ge.flags&2048)switch(ge.tag){case 0:case 11:case 15:Ue(9,ge,ge.return)}var an=ge.sibling;if(an!==null){an.return=ge.return,K=an;break e}K=ge.return}}var Zt=m.current;for(K=Zt;K!==null;){Ze=K;var An=Ze.child;if(Ze.subtreeFlags&2064&&An!==null)An.return=Ze,K=An;else e:for(Ze=Zt;K!==null;){if(It=K,It.flags&2048)try{switch(It.tag){case 0:case 11:case 15:ct(9,It)}}catch(ni){ol(It,It.return,ni)}if(It===Ze){K=null;break e}var yr=It.sibling;if(yr!==null){yr.return=It.return,K=yr;break e}K=It.return}}if(gi=ae,AA(),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(ia,m)}catch{}W=!0}return W}finally{Lr=L,hs.transition=_}}return!1}function t0(m,_,L){_=oc(L,_),_=sh(m,_,1),m=c(m,_,1),_=dA(),m!==null&&(ca(m,1,_),sc(m,_))}function ol(m,_,L){if(m.tag===3)t0(m,m,L);else for(;_!==null;){if(_.tag===3){t0(_,m,L);break}else if(_.tag===1){var W=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof W.componentDidCatch=="function"&&(ff===null||!ff.has(W))){m=oc(L,m),m=Uf(_,m,1),_=c(_,m,1),m=dA(),_!==null&&(ca(_,1,m),sc(_,m));break}}_=_.return}}function qg(m,_,L){var W=m.pingCache;W!==null&&W.delete(_),_=dA(),m.pingedLanes|=m.suspendedLanes&L,Xo===m&&(fa&L)===L&&(Ro===4||Ro===3&&(fa&130023424)===fa&&500>ao()-df?Rd(m,0):Xc|=L),sc(m,_)}function hA(m,_){_===0&&(m.mode&1?(_=ho,ho<<=1,!(ho&130023424)&&(ho=4194304)):_=1);var L=dA();m=Yu(m,_),m!==null&&(ca(m,_,L),sc(m,L))}function W0(m){var _=m.memoizedState,L=0;_!==null&&(L=_.retryLane),hA(m,L)}function Yg(m,_){var L=0;switch(m.tag){case 13:var W=m.stateNode,ae=m.memoizedState;ae!==null&&(L=ae.retryLane);break;case 19:W=m.stateNode;break;default:throw Error(t(314))}W!==null&&W.delete(_),hA(m,L)}var Lh;Lh=function(m,_,L){if(m!==null)if(m.memoizedProps!==_.pendingProps||fr.current)ql=!0;else{if(!(m.lanes&L)&&!(_.flags&128))return ql=!1,Ym(m,_,L);ql=!!(m.flags&131072)}else ql=!1,hr&&_.flags&1048576&&nh(_,Cu,_.index);switch(_.lanes=0,_.tag){case 2:var W=_.type;Sp(m,_),m=_.pendingProps;var ae=Vc(_,Bs.current);au(_,L),ae=kr(null,_,W,m,ae,L);var ge=Bi();return _.flags|=1,typeof ae=="object"&&ae!==null&&typeof ae.render=="function"&&ae.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Ia(W)?(ge=!0,Mi(_)):ge=!1,_.memoizedState=ae.state!==null&&ae.state!==void 0?ae.state:null,wd(_),ae.updater=kh,_.stateNode=ae,ae._reactInternals=_,um(_,W,m,L),_=Ph(null,_,W,!0,ge,L)):(_.tag=0,hr&&ge&&SA(_),Rl(null,_,ae,L),_=_.child),_;case 16:W=_.elementType;e:{switch(Sp(m,_),m=_.pendingProps,ae=W._init,W=ae(W._payload),_.type=W,ae=_.tag=n0(W),m=Qa(W,m),ae){case 0:_=Id(null,_,W,m,L);break e;case 1:_=TA(null,_,W,m,L);break e;case 11:_=Am(null,_,W,m,L);break e;case 14:_=jf(null,_,W,Qa(W.type,m),L);break e}throw Error(t(306,W,""))}return _;case 0:return W=_.type,ae=_.pendingProps,ae=_.elementType===W?ae:Qa(W,ae),Id(m,_,W,ae,L);case 1:return W=_.type,ae=_.pendingProps,ae=_.elementType===W?ae:Qa(W,ae),TA(m,_,W,ae,L);case 3:e:{if(Mp(_),m===null)throw Error(t(387));W=_.pendingProps,ge=_.memoizedState,ae=ge.element,T(m,_),R(_,W,null,L);var Ze=_.memoizedState;if(W=Ze.element,ge.isDehydrated)if(ge={element:W,isDehydrated:!1,cache:Ze.cache,pendingSuspenseBoundaries:Ze.pendingSuspenseBoundaries,transitions:Ze.transitions},_.updateQueue.baseState=ge,_.memoizedState=ge,_.flags&256){ae=oc(Error(t(423)),_),_=Oc(m,_,W,L,ae);break e}else if(W!==ae){ae=oc(Error(t(424)),_),_=Oc(m,_,W,L,ae);break e}else for(da=ec(_.stateNode.containerInfo.firstChild),gs=_,hr=!0,Hr=null,L=wc(_,null,W,L),_.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(xu(),W===ae){_=Su(m,_,L);break e}Rl(m,_,W,L)}_=_.child}return _;case 5:return Ve(_),m===null&&bs(_),W=_.type,ae=_.pendingProps,ge=m!==null?m.memoizedProps:null,Ze=ae.children,xA(W,ae)?Ze=null:ge!==null&&xA(W,ge)&&(_.flags|=32),lf(m,_),Rl(m,_,Ze,L),_.child;case 6:return m===null&&bs(_),null;case 13:return ah(m,_,L);case 4:return ke(_,_.stateNode.containerInfo),W=_.pendingProps,m===null?_.child=Qs(_,null,W,L):Rl(m,_,W,L),_.child;case 11:return W=_.type,ae=_.pendingProps,ae=_.elementType===W?ae:Qa(W,ae),Am(m,_,W,ae,L);case 7:return Rl(m,_,_.pendingProps,L),_.child;case 8:return Rl(m,_,_.pendingProps.children,L),_.child;case 12:return Rl(m,_,_.pendingProps.children,L),_.child;case 10:e:{if(W=_.type._context,ae=_.pendingProps,ge=_.memoizedProps,Ze=ae.value,Cs(Wl,W._currentValue),W._currentValue=Ze,ge!==null)if(sn(ge.value,Ze)){if(ge.children===ae.children&&!fr.current){_=Su(m,_,L);break e}}else for(ge=_.child,ge!==null&&(ge.return=_);ge!==null;){var It=ge.dependencies;if(It!==null){Ze=ge.child;for(var Gt=It.firstContext;Gt!==null;){if(Gt.context===W){if(ge.tag===1){Gt=l(-1,L&-L),Gt.tag=2;var Cn=ge.updateQueue;if(Cn!==null){Cn=Cn.shared;var ar=Cn.pending;ar===null?Gt.next=Gt:(Gt.next=ar.next,ar.next=Gt),Cn.pending=Gt}}ge.lanes|=L,Gt=ge.alternate,Gt!==null&&(Gt.lanes|=L),Xs(ge.return,L,_),It.lanes|=L;break}Gt=Gt.next}}else if(ge.tag===10)Ze=ge.type===_.type?null:ge.child;else if(ge.tag===18){if(Ze=ge.return,Ze===null)throw Error(t(341));Ze.lanes|=L,It=Ze.alternate,It!==null&&(It.lanes|=L),Xs(Ze,L,_),Ze=ge.sibling}else Ze=ge.child;if(Ze!==null)Ze.return=ge;else for(Ze=ge;Ze!==null;){if(Ze===_){Ze=null;break}if(ge=Ze.sibling,ge!==null){ge.return=Ze.return,Ze=ge;break}Ze=Ze.return}ge=Ze}Rl(m,_,ae.children,L),_=_.child}return _;case 9:return ae=_.type,W=_.pendingProps.children,au(_,L),ae=lu(ae),W=W(ae),_.flags|=1,Rl(m,_,W,L),_.child;case 14:return W=_.type,ae=Qa(W,_.pendingProps),ae=Qa(W.type,ae),jf(m,_,W,ae,L);case 15:return Io(m,_,_.type,_.pendingProps,L);case 17:return W=_.type,ae=_.pendingProps,ae=_.elementType===W?ae:Qa(W,ae),Sp(m,_),_.tag=1,Ia(W)?(m=!0,Mi(_)):m=!1,au(_,L),oh(_,W,ae),um(_,W,ae,L),Ph(null,_,W,!0,m,L);case 19:return Td(m,_,L);case 22:return Hu(m,_,L)}throw Error(t(156,_.tag))};function Op(m,_){return Ea(m,_)}function pm(m,_,L,W){this.tag=m,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=W,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zu(m,_,L,W){return new pm(m,_,L,W)}function qf(m){return m=m.prototype,!(!m||!m.isReactComponent)}function n0(m){if(typeof m=="function")return qf(m)?1:0;if(m!=null){if(m=m.$$typeof,m===fe)return 11;if(m===pe)return 14}return 2}function Kd(m,_){var L=m.alternate;return L===null?(L=Zu(m.tag,_,m.key,m.mode),L.elementType=m.elementType,L.type=m.type,L.stateNode=m.stateNode,L.alternate=m,m.alternate=L):(L.pendingProps=_,L.type=m.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=m.flags&14680064,L.childLanes=m.childLanes,L.lanes=m.lanes,L.child=m.child,L.memoizedProps=m.memoizedProps,L.memoizedState=m.memoizedState,L.updateQueue=m.updateQueue,_=m.dependencies,L.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},L.sibling=m.sibling,L.index=m.index,L.ref=m.ref,L}function r0(m,_,L,W,ae,ge){var Ze=2;if(W=m,typeof m=="function")qf(m)&&(Ze=1);else if(typeof m=="string")Ze=5;else e:switch(m){case N:return gf(L.children,ae,ge,_);case ie:Ze=8,ae|=8;break;case he:return m=Zu(12,L,_,ae|2),m.elementType=he,m.lanes=ge,m;case be:return m=Zu(13,L,_,ae),m.elementType=be,m.lanes=ge,m;case Pe:return m=Zu(19,L,_,ae),m.elementType=Pe,m.lanes=ge,m;case We:return mm(L,ae,ge,_);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case de:Ze=10;break e;case we:Ze=9;break e;case fe:Ze=11;break e;case pe:Ze=14;break e;case it:Ze=16,W=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return _=Zu(Ze,L,_,ae),_.elementType=m,_.type=W,_.lanes=ge,_}function gf(m,_,L,W){return m=Zu(7,m,W,_),m.lanes=L,m}function mm(m,_,L,W){return m=Zu(22,m,W,_),m.elementType=We,m.lanes=L,m.stateNode={isHidden:!1},m}function Q0(m,_,L){return m=Zu(6,m,null,_),m.lanes=L,m}function i0(m,_,L){return _=Zu(4,m.children!==null?m.children:[],m.key,_),_.lanes=L,_.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},_}function $g(m,_,L,W,ae){this.tag=_,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ai(0),this.expirationTimes=Ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.identifierPrefix=W,this.onRecoverableError=ae,this.mutableSourceEagerHydrationData=null}function gm(m,_,L,W,ae,ge,Ze,It,Gt){return m=new $g(m,_,L,It,Gt),_===1?(_=1,ge===!0&&(_|=8)):_=0,ge=Zu(3,null,null,_),m.current=ge,ge.stateNode=m,ge.memoizedState={element:W,isDehydrated:L,cache:null,transitions:null,pendingSuspenseBoundaries:null},wd(ge),m}function q0(m,_,L){var W=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:W==null?null:""+W,children:m,containerInfo:_,implementation:L}}function Vg(m){if(!m)return uA;m=m._reactInternals;e:{if(qi(m)!==m||m.tag!==1)throw Error(t(170));var _=m;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Ia(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(t(171))}if(m.tag===1){var L=m.type;if(Ia(L))return _d(m,L,_)}return _}function Hg(m,_,L,W,ae,ge,Ze,It,Gt){return m=gm(L,W,!0,m,ae,ge,Ze,It,Gt),m.context=Vg(null),L=m.current,W=dA(),ae=Kh(L),ge=l(W,ae),ge.callback=_??null,c(L,ge,ae),m.current.lanes=ae,ca(m,ae,W),sc(m,W),m}function ym(m,_,L,W){var ae=_.current,ge=dA(),Ze=Kh(ae);return L=Vg(L),_.context===null?_.context=L:_.pendingContext=L,_=l(ge,Ze),_.payload={element:m},W=W===void 0?null:W,W!==null&&(_.callback=W),m=c(ae,_,Ze),m!==null&&(Jc(m,ae,Ze,ge),C(m,ae,Ze)),Ze}function vm(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function Ip(m,_){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var L=m.retryLane;m.retryLane=L!==0&&L<_?L:_}}function ed(m,_){Ip(m,_),(m=m.alternate)&&Ip(m,_)}var Fh=typeof reportError=="function"?reportError:function(m){console.error(m)};function o0(m){this._internalRoot=m}Yf.prototype.render=o0.prototype.render=function(m){var _=this._internalRoot;if(_===null)throw Error(t(409));ym(m,_,null,null)},Yf.prototype.unmount=o0.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var _=m.containerInfo;Qf(function(){ym(null,m,null,null)}),_[_u]=null}};function Yf(m){this._internalRoot=m}Yf.prototype.unstable_scheduleHydration=function(m){if(m){var _=Gs();m={blockedOn:null,target:m,priority:_};for(var L=0;L<Ks.length&&_!==0&&_<Ks[L].priority;L++);Ks.splice(L,0,m),L===0&&Ui(m)}};function s0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function a0(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function _m(){}function Y0(m,_,L,W,ae){if(ae){if(typeof W=="function"){var ge=W;W=function(){var Cn=vm(Ze);ge.call(Cn)}}var Ze=Hg(_,W,m,0,null,!1,!1,"",_m);return m._reactRootContainer=Ze,m[_u]=Ze.current,Fu(m.nodeType===8?m.parentNode:m),Qf(),Ze}for(;ae=m.lastChild;)m.removeChild(ae);if(typeof W=="function"){var It=W;W=function(){var Cn=vm(Gt);It.call(Cn)}}var Gt=gm(m,0,!1,null,null,!1,!1,"",_m);return m._reactRootContainer=Gt,m[_u]=Gt.current,Fu(m.nodeType===8?m.parentNode:m),Qf(function(){ym(_,Gt,L,W)}),Gt}function l0(m,_,L,W,ae){var ge=L._reactRootContainer;if(ge){var Ze=ge;if(typeof ae=="function"){var It=ae;ae=function(){var Gt=vm(Ze);It.call(Gt)}}ym(_,Ze,m,ae)}else Ze=Y0(L,_,m,ae,W);return vm(Ze)}Ja=function(m){switch(m.tag){case 3:var _=m.stateNode;if(_.current.memoizedState.isDehydrated){var L=_s(_.pendingLanes);L!==0&&(ls(_,L|1),sc(_,ao()),!(gi&6)&&(Nf=ao()+500,AA()))}break;case 13:Qf(function(){var W=Yu(m,1);if(W!==null){var ae=dA();Jc(W,m,1,ae)}}),ed(m,1)}},Rs=function(m){if(m.tag===13){var _=Yu(m,134217728);if(_!==null){var L=dA();Jc(_,m,134217728,L)}ed(m,134217728)}},So=function(m){if(m.tag===13){var _=Kh(m),L=Yu(m,_);if(L!==null){var W=dA();Jc(L,m,_,W)}ed(m,_)}},Gs=function(){return Lr},hu=function(m,_){var L=Lr;try{return Lr=m,_()}finally{Lr=L}},rt=function(m,_,L){switch(_){case"input":if(yn(m,L),_=L.name,L.type==="radio"&&_!=null){for(L=m;L.parentNode;)L=L.parentNode;for(L=L.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<L.length;_++){var W=L[_];if(W!==m&&W.form===m.form){var ae=Es(W);if(!ae)throw Error(t(90));yt(W),yn(W,ae)}}}break;case"textarea":xr(m,L);break;case"select":_=L.value,_!=null&&Jn(m,!!L.multiple,_,!1)}},zt=Zm,_t=Qf;var kp={usingClientEntryPoint:!1,Events:[Ki,$r,Es,Xt,tn,Zm]},$f={findFiberByHostInstance:Bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tp={bundleType:$f.bundleType,version:$f.version,rendererPackageName:$f.rendererPackageName,rendererConfig:$f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Ti(m),m===null?null:m.stateNode},findFiberByHostInstance:$f.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cm.isDisabled&&Cm.supportsFiber)try{ia=Cm.inject(Tp),Qe=Cm}catch{}}return dh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kp,dh.createPortal=function(m,_){var L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s0(_))throw Error(t(200));return q0(m,_,null,L)},dh.createRoot=function(m,_){if(!s0(m))throw Error(t(299));var L=!1,W="",ae=Fh;return _!=null&&(_.unstable_strictMode===!0&&(L=!0),_.identifierPrefix!==void 0&&(W=_.identifierPrefix),_.onRecoverableError!==void 0&&(ae=_.onRecoverableError)),_=gm(m,1,!1,null,null,L,!1,W,ae),m[_u]=_.current,Fu(m.nodeType===8?m.parentNode:m),new o0(_)},dh.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var _=m._reactInternals;if(_===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=Ti(_),m=m===null?null:m.stateNode,m},dh.flushSync=function(m){return Qf(m)},dh.hydrate=function(m,_,L){if(!a0(_))throw Error(t(200));return l0(null,m,_,!0,L)},dh.hydrateRoot=function(m,_,L){if(!s0(m))throw Error(t(405));var W=L!=null&&L.hydratedSources||null,ae=!1,ge="",Ze=Fh;if(L!=null&&(L.unstable_strictMode===!0&&(ae=!0),L.identifierPrefix!==void 0&&(ge=L.identifierPrefix),L.onRecoverableError!==void 0&&(Ze=L.onRecoverableError)),_=Hg(_,null,m,1,L??null,ae,!1,ge,Ze),m[_u]=_.current,Fu(m),W)for(m=0;m<W.length;m++)L=W[m],ae=L._getVersion,ae=ae(L._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[L,ae]:_.mutableSourceEagerHydrationData.push(L,ae);return new Yf(_)},dh.render=function(m,_,L){if(!a0(_))throw Error(t(200));return l0(null,m,_,!1,L)},dh.unmountComponentAtNode=function(m){if(!a0(m))throw Error(t(40));return m._reactRootContainer?(Qf(function(){l0(null,null,m,!1,function(){m._reactRootContainer=null,m[_u]=null})}),!0):!1},dh.unstable_batchedUpdates=Zm,dh.unstable_renderSubtreeIntoContainer=function(m,_,L,W){if(!a0(L))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return l0(m,_,L,!1,W)},dh.version="18.3.1-next-f1338f8080-20240426",dh}var u8;function I_(){if(u8)return T3.exports;u8=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),T3.exports=XW(),T3.exports}var A8;function JW(){if(A8)return BC;A8=1;var n=I_();return BC.createRoot=n.createRoot,BC.hydrateRoot=n.hydrateRoot,BC}var eQ=JW();const tQ="modulepreload",nQ=function(n){return"/maputnik/"+n},c8={},tv=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(d=>{if(d=nQ(d),d in c8)return;c8[d]=!0;const g=d.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":tQ,g||(E.as="script"),E.crossOrigin="",E.href=d,o&&E.setAttribute("nonce",o),document.head.appendChild(E),g)return new Promise((S,O)=>{E.addEventListener("load",S),E.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},rQ=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},wo=n=>typeof n=="string",nv=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},d8=n=>n==null?"":""+n,iQ=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},oQ=/###/g,h8=n=>n&&n.indexOf("###")>-1?n.replace(oQ,"."):n,f8=n=>!n||wo(n),Lv=(n,e,t)=>{const r=wo(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(f8(n))return{};const s=h8(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return f8(n)?{}:{obj:n,k:h8(r[i])}},p8=(n,e,t)=>{const{obj:r,k:i}=Lv(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=Lv(n,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=Lv(n,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},sQ=(n,e,t,r)=>{const{obj:i,k:s}=Lv(n,e,Object);i[s]=i[s]||[],i[s].push(t)},Db=(n,e)=>{const{obj:t,k:r}=Lv(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},aQ=(n,e,t)=>{const r=Db(n,t);return r!==void 0?r:Db(e,t)},jL=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?wo(n[r])||n[r]instanceof String||wo(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):jL(n[r],e[r],t):n[r]=e[r]);return n},r1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var lQ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const uQ=n=>wo(n)?n.replace(/[&<>"'\/]/g,e=>lQ[e]):n;class AQ{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const cQ=[" ",",","?","!",";"],dQ=new AQ(20),hQ=(n,e,t)=>{e=e||"",t=t||"";const r=cQ.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const i=dQ.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!i.test(n);if(!s){const a=n.indexOf(t);a>0&&!i.test(n.substring(0,a))&&(s=!0)}return s},XE=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let a,o="";for(let d=s;d<r.length;++d)if(d!==s&&(o+=t),o+=r[d],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&d<r.length-1)continue;s+=d-s+1;break}i=a}return i},Lb=n=>n==null?void 0:n.replace("_","-"),fQ={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class Fb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||fQ,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(wo(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Fb(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Fb(this.logger,e)}}var Qp=new Fb;class Y2{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,d]=a;for(let g=0;g<d;g++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,d]=a;for(let g=0;g<d;g++)o.apply(o,[e,...r])})}}class m8 extends Y2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var g,b;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):wo(r)&&s?o.push(...r.split(s)):o.push(r)));const d=Db(this.data,o);return!d&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),d||!a||!wo(r)?d:XE((b=(g=this.data)==null?void 0:g[e])==null?void 0:b[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),p8(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(wo(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let d=Db(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?jL(d,r,s):d={...d,...r},p8(this.data,o,d),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var NL={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,t,r,i))??e}),e}};const g8={};class Ub extends Y2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),iQ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Qp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!hQ(e,r,i);if(a&&!o){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:wo(s)?[s]:s};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(s=g.shift()),e=g.join(i)}return{key:e,namespaces:wo(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),d=o[o.length-1],g=t.lng||this.language,b=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((g==null?void 0:g.toLowerCase())==="cimode"){if(b){const X=t.nsSeparator||this.options.nsSeparator;return i?{res:`${d}${X}${a}`,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(t)}:`${d}${X}${a}`}return i?{res:a,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:d,usedParams:this.getUsedParamsDetails(t)}:a}const E=this.resolve(e,t);let S=E==null?void 0:E.res;const O=(E==null?void 0:E.usedKey)||a,k=(E==null?void 0:E.exactUsedKey)||a,U=Object.prototype.toString.apply(S),z=["[object Number]","[object Function]","[object RegExp]"],q=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,Q=!this.i18nFormat||this.i18nFormat.handleAsObject,re=!wo(S)&&typeof S!="boolean"&&typeof S!="number";if(Q&&S&&re&&z.indexOf(U)<0&&!(wo(q)&&Array.isArray(S))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const X=this.options.returnedObjectHandler?this.options.returnedObjectHandler(O,S,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(E.res=X,E.usedParams=this.getUsedParamsDetails(t),E):X}if(s){const X=Array.isArray(S),Y=X?[]:{},J=X?k:O;for(const N in S)if(Object.prototype.hasOwnProperty.call(S,N)){const ie=`${J}${s}${N}`;Y[N]=this.translate(ie,{...t,joinArrays:!1,ns:o}),Y[N]===ie&&(Y[N]=S[N])}S=Y}}else if(Q&&wo(q)&&Array.isArray(S))S=S.join(q),S&&(S=this.extendTranslation(S,e,t,r));else{let X=!1,Y=!1;const J=t.count!==void 0&&!wo(t.count),N=Ub.hasDefaultValue(t),ie=J?this.pluralResolver.getSuffix(g,t.count,t):"",he=t.ordinal&&J?this.pluralResolver.getSuffix(g,t.count,{ordinal:!1}):"",de=J&&!t.ordinal&&t.count===0,we=de&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${ie}`]||t[`defaultValue${he}`]||t.defaultValue;!this.isValidLookup(S)&&N&&(X=!0,S=we),this.isValidLookup(S)||(Y=!0,S=a);const be=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Y?void 0:S,Pe=N&&we!==S&&this.options.updateMissing;if(Y||X||Pe){if(this.logger.log(Pe?"updateKey":"missingKey",g,d,a,Pe?we:S),s){const $e=this.resolve(a,{...t,keySeparator:!1});$e&&$e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let pe=[];const it=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&it&&it[0])for(let $e=0;$e<it.length;$e++)pe.push(it[$e]);else this.options.saveMissingTo==="all"?pe=this.languageUtils.toResolveHierarchy(t.lng||this.language):pe.push(t.lng||this.language);const We=($e,ht,De)=>{var at;const Ne=N&&De!==S?De:be;this.options.missingKeyHandler?this.options.missingKeyHandler($e,d,ht,Ne,Pe,t):(at=this.backendConnector)!=null&&at.saveMissing&&this.backendConnector.saveMissing($e,d,ht,Ne,Pe,t),this.emit("missingKey",$e,d,ht,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&J?pe.forEach($e=>{const ht=this.pluralResolver.getSuffixes($e,t);de&&t[`defaultValue${this.options.pluralSeparator}zero`]&&ht.indexOf(`${this.options.pluralSeparator}zero`)<0&&ht.push(`${this.options.pluralSeparator}zero`),ht.forEach(De=>{We([$e],a+De,t[`defaultValue${De}`]||we)})}):We(pe,a,we))}S=this.extendTranslation(S,e,t,E,r),Y&&S===a&&this.options.appendNamespaceToMissingKey&&(S=`${d}:${a}`),(Y||X)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${a}`:a,X?S:void 0))}return i?(E.res=S,E.usedParams=this.getUsedParamsDetails(t),E):S}extendTranslation(e,t,r,i,s){var g,b;var a=this;if((g=this.i18nFormat)!=null&&g.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const E=wo(e)&&(((b=r==null?void 0:r.interpolation)==null?void 0:b.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let S;if(E){const k=e.match(this.interpolator.nestingRegexp);S=k&&k.length}let O=r.replace&&!wo(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(O={...this.options.interpolation.defaultVariables,...O}),e=this.interpolator.interpolate(e,O,r.lng||this.language||i.usedLng,r),E){const k=e.match(this.interpolator.nestingRegexp),U=k&&k.length;S<U&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var k=arguments.length,U=new Array(k),z=0;z<k;z++)U[z]=arguments[z];return(s==null?void 0:s[0])===U[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${U[0]} in key: ${t[0]}`),null):a.translate(...U,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,d=wo(o)?[o]:o;return e!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(e=NL.handle(d,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,a,o;return wo(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(d,t),b=g.key;i=b;let E=g.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const S=t.count!==void 0&&!wo(t.count),O=S&&!t.ordinal&&t.count===0,k=t.context!==void 0&&(wo(t.context)||typeof t.context=="number")&&t.context!=="",U=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);E.forEach(z=>{var q,Q;this.isValidLookup(r)||(o=z,!g8[`${U[0]}-${z}`]&&((q=this.utils)!=null&&q.hasLoadedNamespace)&&!((Q=this.utils)!=null&&Q.hasLoadedNamespace(o))&&(g8[`${U[0]}-${z}`]=!0,this.logger.warn(`key "${i}" for languages "${U.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),U.forEach(re=>{var J;if(this.isValidLookup(r))return;a=re;const X=[b];if((J=this.i18nFormat)!=null&&J.addLookupKeys)this.i18nFormat.addLookupKeys(X,b,re,z,t);else{let N;S&&(N=this.pluralResolver.getSuffix(re,t.count,t));const ie=`${this.options.pluralSeparator}zero`,he=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(S&&(X.push(b+N),t.ordinal&&N.indexOf(he)===0&&X.push(b+N.replace(he,this.options.pluralSeparator)),O&&X.push(b+ie)),k){const de=`${b}${this.options.contextSeparator}${t.context}`;X.push(de),S&&(X.push(de+N),t.ordinal&&N.indexOf(he)===0&&X.push(de+N.replace(he,this.options.pluralSeparator)),O&&X.push(de+ie))}}let Y;for(;Y=X.pop();)this.isValidLookup(r)||(s=Y,r=this.getResource(re,z,Y,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!wo(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class y8{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qp.create("languageUtils")}getScriptPartFromCode(e){if(e=Lb(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Lb(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(wo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),wo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return wo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):wo(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{i.indexOf(a)<0&&s(this.formatLanguageCode(a))}),i}}const v8={zero:0,one:1,two:2,few:3,many:4,other:5},_8={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class pQ{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Qp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Lb(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),_8;if(!e.match(/-|_/))return _8;const d=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(d,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>v8[i]-v8[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const C8=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=aQ(n,e,t);return!s&&i&&wo(t)&&(s=XE(n,t,r),s===void 0&&(s=XE(e,t,r))),s},K3=n=>n.replace(/\$/g,"$$$$");class mQ{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Qp.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:d,formatSeparator:g,unescapeSuffix:b,unescapePrefix:E,nestingPrefix:S,nestingPrefixEscaped:O,nestingSuffix:k,nestingSuffixEscaped:U,nestingOptionsSeparator:z,maxReplaces:q,alwaysFormat:Q}=e.interpolation;this.escape=t!==void 0?t:uQ,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?r1(s):a||"{{",this.suffix=o?r1(o):d||"}}",this.formatSeparator=g||",",this.unescapePrefix=b?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=S?r1(S):O||r1("$t("),this.nestingSuffix=k?r1(k):U||r1(")"),this.nestingOptionsSeparator=z||",",this.maxReplaces=q||1e3,this.alwaysFormat=Q!==void 0?Q:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var O;let s,a,o;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=k=>{if(k.indexOf(this.formatSeparator)<0){const Q=C8(t,d,k,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Q,void 0,r,{...i,...t,interpolationkey:k}):Q}const U=k.split(this.formatSeparator),z=U.shift().trim(),q=U.join(this.formatSeparator).trim();return this.format(C8(t,d,z,this.options.keySeparator,this.options.ignoreJSONStructure),q,r,{...i,...t,interpolationkey:z})};this.resetRegExp();const b=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((O=i==null?void 0:i.interpolation)==null?void 0:O.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:k=>K3(k)},{regex:this.regexp,safeValue:k=>this.escapeValue?K3(this.escape(k)):K3(k)}].forEach(k=>{for(o=0;s=k.regex.exec(e);){const U=s[1].trim();if(a=g(U),a===void 0)if(typeof b=="function"){const q=b(e,s,i);a=wo(q)?q:""}else if(i&&Object.prototype.hasOwnProperty.call(i,U))a="";else if(E){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${U} for interpolating ${e}`),a="";else!wo(a)&&!this.useRawValueToEscape&&(a=d8(a));const z=k.safeValue(a);if(e=e.replace(s[0],z),E?(k.regex.lastIndex+=a.length,k.regex.lastIndex-=s[0].length):k.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,a;const o=(d,g)=>{const b=this.nestingOptionsSeparator;if(d.indexOf(b)<0)return d;const E=d.split(new RegExp(`${b}[ ]*{`));let S=`{${E[1]}`;d=E[0],S=this.interpolate(S,a);const O=S.match(/'/g),k=S.match(/"/g);(((O==null?void 0:O.length)??0)%2===0&&!k||k.length%2!==0)&&(S=S.replace(/'/g,'"'));try{a=JSON.parse(S),g&&(a={...g,...a})}catch(U){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,U),`${d}${b}${S}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,d};for(;i=this.nestingRegexp.exec(e);){let d=[];a={...r},a=a.replace&&!wo(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const b=i[1].split(this.formatSeparator).map(E=>E.trim());i[1]=b.shift(),d=b,g=!0}if(s=t(o.call(this,i[1].trim(),a),a),s&&i[0]===e&&!wo(s))return s;wo(s)||(s=d8(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),g&&(s=d.reduce((b,E)=>this.format(b,E,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const gQ=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...d]=a.split(":"),g=d.join(":").trim().replace(/^'+|'+$/g,""),b=o.trim();t[b]||(t[b]=g),g==="false"&&(t[b]=!1),g==="true"&&(t[b]=!0),isNaN(g)||(t[b]=parseInt(g,10))}})}return{formatName:e,formatOptions:t}},i1=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=e[a];return o||(o=n(Lb(r),i),e[a]=o),o(t)}};class yQ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Qp.create("formatter"),this.options=e,this.formats={number:i1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:i1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:i1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:i1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:i1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=i1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(d=>d.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,d)=>{var E;const{formatName:g,formatOptions:b}=gQ(d);if(this.formats[g]){let S=o;try{const O=((E=i==null?void 0:i.formatParams)==null?void 0:E[i.interpolationkey])||{},k=O.locale||O.lng||i.locale||i.lng||r;S=this.formats[g](o,k,{...b,...i,...O})}catch(O){this.logger.warn(O)}return S}else this.logger.warn(`there was no format function for ${g}`);return o},e)}}const vQ=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class _Q extends Y2{constructor(e,t,r){var s,a;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Qp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},a={},o={},d={};return e.forEach(g=>{let b=!0;t.forEach(E=>{const S=`${g}|${E}`;!r.reload&&this.store.hasResourceBundle(g,E)?this.state[S]=2:this.state[S]<0||(this.state[S]===1?a[S]===void 0&&(a[S]=!0):(this.state[S]=1,b=!1,a[S]===void 0&&(a[S]=!0),s[S]===void 0&&(s[S]=!0),d[E]===void 0&&(d[E]=!0)))}),b||(o[g]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(d)}}loaded(e,t,r){const i=e.split("|"),s=i[0],a=i[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(d=>{sQ(d.loaded,[s],a),vQ(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(g=>{o[g]||(o[g]={});const b=d.loaded[g];b.length&&b.forEach(E=>{o[g][E]===void 0&&(o[g][E]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(d=>!d.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:a});return}this.readingCalls++;const o=(g,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(g&&b&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,a)},s);return}a(g,b)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const g=d(e,t);g&&typeof g.then=="function"?g.then(b=>o(null,b)).catch(o):o(null,g)}catch(g){o(g)}return}return d(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();wo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),wo(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,r,i,s){var d,g,b,E,S;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((g=(d=this.services)==null?void 0:d.utils)!=null&&g.hasLoadedNamespace&&!((E=(b=this.services)==null?void 0:b.utils)!=null&&E.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((S=this.backend)!=null&&S.create){const O={...a,isUpdate:s},k=this.backend.create.bind(this.backend);if(k.length<6)try{let U;k.length===5?U=k(e,t,r,i,O):U=k(e,t,r,i),U&&typeof U.then=="function"?U.then(z=>o(null,z)).catch(o):o(null,U)}catch(U){o(U)}else k(e,t,r,i,o,O)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const b8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),wo(n[1])&&(e.defaultValue=n[1]),wo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),x8=n=>{var e,t;return wo(n.ns)&&(n.ns=[n.ns]),wo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),wo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},OC=()=>{},CQ=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Vv extends Y2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=x8(e),this.services={},this.logger=Qp,this.modules={external:[]},CQ(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(wo(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=b8();this.options={...i,...this.options,...x8(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=b=>b?typeof b=="function"?new b:b:null;if(!this.options.isClone){this.modules.logger?Qp.init(s(this.modules.logger),this.options):Qp.init(null,this.options);let b;this.modules.formatter?b=this.modules.formatter:b=yQ;const E=new y8(this.options);this.store=new m8(this.options.resources,this.options);const S=this.services;S.logger=Qp,S.resourceStore=this.store,S.languageUtils=E,S.pluralResolver=new pQ(E,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(S.formatter=s(b),S.formatter.init(S,this.options),this.options.interpolation.format=S.formatter.format.bind(S.formatter)),S.interpolator=new mQ(this.options),S.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},S.backendConnector=new _Q(s(this.modules.backend),S.resourceStore,S,this.options),S.backendConnector.on("*",function(O){for(var k=arguments.length,U=new Array(k>1?k-1:0),z=1;z<k;z++)U[z-1]=arguments[z];e.emit(O,...U)}),this.modules.languageDetector&&(S.languageDetector=s(this.modules.languageDetector),S.languageDetector.init&&S.languageDetector.init(S,this.options.detection,this.options)),this.modules.i18nFormat&&(S.i18nFormat=s(this.modules.i18nFormat),S.i18nFormat.init&&S.i18nFormat.init(this)),this.translator=new Ub(this.services,this.options),this.translator.on("*",function(O){for(var k=arguments.length,U=new Array(k>1?k-1:0),z=1;z<k;z++)U[z-1]=arguments[z];e.emit(O,...U)}),this.modules.external.forEach(O=>{O.init&&O.init(this)})}if(this.format=this.options.interpolation.format,r||(r=OC),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(b=>{this[b]=function(){return e.store[b](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(b=>{this[b]=function(){return e.store[b](...arguments),e}});const d=nv(),g=()=>{const b=(E,S)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(S),r(E,S)};if(this.languages&&!this.isInitialized)return b(null,this.t.bind(this));this.changeLanguage(this.options.lng,b)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),d}loadResources(e){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OC;const i=wo(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],d=g=>{if(!g||g==="cimode")return;this.services.languageUtils.toResolveHierarchy(g).forEach(E=>{E!=="cimode"&&o.indexOf(E)<0&&o.push(E)})};i?d(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(b=>d(b)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,g=>d(g)),this.services.backendConnector.load(o,this.options.ns,g=>{!g&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(g)})}else r(null)}reloadResources(e,t,r){const i=nv();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=OC),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&NL.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=nv();this.emit("languageChanging",e);const s=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,g)=>{g?(s(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(d,function(){return r.t(...arguments)})},o=d=>{var b,E;!e&&!d&&this.services.languageDetector&&(d=[]);const g=wo(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);g&&(this.language||s(g),this.translator.language||this.translator.changeLanguage(g),(E=(b=this.services.languageDetector)==null?void 0:b.cacheUserLanguage)==null||E.call(b,g)),this.loadResources(g,S=>{a(S,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(a,o){let d;if(typeof o!="object"){for(var g=arguments.length,b=new Array(g>2?g-2:0),E=2;E<g;E++)b[E-2]=arguments[E];d=i.options.overloadTranslationOptionHandler([a,o].concat(b))}else d={...o};d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||s.keyPrefix);const S=i.options.keySeparator||".";let O;return d.keyPrefix&&Array.isArray(a)?O=a.map(k=>`${d.keyPrefix}${S}${k}`):O=d.keyPrefix?`${d.keyPrefix}${S}${a}`:a,i.t(O,d)};return wo(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,d)=>{const g=this.services.backendConnector.state[`${o}|${d}`];return g===-1||g===0||g===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(s,e)))}loadNamespaces(e,t){const r=nv();return this.options.ns?(wo(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=nv();wo(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=i.concat(s),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new y8(b8());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Vv(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OC;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Vv(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((d,g)=>(d[g]={...this.store.data[g]},Object.keys(d[g]).reduce((b,E)=>(b[E]={...d[g][E]},b),{})),{});s.store=new m8(o,i),s.services.resourceStore=s.store}return s.translator=new Ub(s.services,i),s.translator.on("*",function(o){for(var d=arguments.length,g=new Array(d>1?d-1:0),b=1;b<d;b++)g[b-1]=arguments[b];s.emit(o,...g)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Dc=Vv.createInstance();Dc.createInstance=Vv.createInstance;Dc.createInstance;Dc.dir;Dc.init;Dc.loadResources;Dc.reloadResources;Dc.use;Dc.changeLanguage;Dc.getFixedT;Dc.t;Dc.exists;Dc.setDefaultNamespace;Dc.hasLoadedNamespace;Dc.loadNamespaces;Dc.loadLanguages;const{slice:bQ,forEach:xQ}=[];function wQ(n){return xQ.call(bQ.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}const w8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,MQ=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!w8.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!w8.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},M8={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=MQ(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var SQ={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return M8.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&M8.create(t,n,r,i,s)}},EQ={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let o=0;o<a.length;o++){const d=a[o].indexOf("=");d>0&&a[o].substring(0,d)===e&&(t=a[o].substring(d+1))}}return t}};let rv=null;const S8=()=>{if(rv!==null)return rv;try{rv=window!=="undefined"&&window.localStorage!==null;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{rv=!1}return rv};var BQ={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&S8())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&S8()&&window.localStorage.setItem(t,n)}};let iv=null;const E8=()=>{if(iv!==null)return iv;try{iv=window!=="undefined"&&window.sessionStorage!==null;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{iv=!1}return iv};var OQ={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&E8())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&E8()&&window.sessionStorage.setItem(t,n)}},IQ={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},kQ={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},TQ={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},PQ={name:"subdomain",lookup(n){var i,s;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let GL=!1;try{document.cookie,GL=!0}catch{}const WL=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];GL||WL.splice(1,1);const RQ=()=>({order:WL,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class QL{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=wQ(t,this.options||{},RQ()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(SQ),this.addDetector(EQ),this.addDetector(BQ),this.addDetector(OQ),this.addDetector(IQ),this.addDetector(kQ),this.addDetector(TQ),this.addDetector(PQ)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}QL.type="languageDetector";var KQ=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var a=e(r,i);a&&typeof a.then=="function"?a.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,a)}catch(o){s(o)}return}e(r,i,s);return}s(null,e[r]&&e[r][i])}}},D3,B8;function DQ(){return B8||(B8=1,D3={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),D3}var LQ=DQ();const FQ=La(LQ);var UQ=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function O8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(FQ[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(UQ),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var a=s[1].trim(),o=[a,""];a.indexOf("=")>-1&&(o=a.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var zQ=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,jQ=/^\s*$/,NQ=Object.create(null);function qL(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(qL,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var GQ={parse:function(n,e){e||(e={}),e.components||(e.components=NQ);var t,r=[],i=[],s=-1,a=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(zQ,function(d,g){if(a){if(d!=="</"+t.name+">")return;a=!1}var b,E=d.charAt(1)!=="/",S=d.startsWith("<!--"),O=g+d.length,k=n.charAt(O);if(S){var U=O8(d);return s<0?(r.push(U),r):((b=i[s]).children.push(U),r)}if(E&&(s++,(t=O8(d)).type==="tag"&&e.components[t.name]&&(t.type="component",a=!0),t.voidElement||a||!k||k==="<"||t.children.push({type:"text",content:n.slice(O,n.indexOf("<",O))}),s===0&&r.push(t),(b=i[s-1])&&b.children.push(t),i[s]=t),(!E||t.voidElement)&&(s>-1&&(t.voidElement||t.name===d.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!a&&k!=="<"&&k)){b=s===-1?r:i[s].children;var z=n.indexOf("<",O),q=n.slice(O,z===-1?void 0:z);jQ.test(q)&&(q=" "),(z>-1&&s+b.length>=0||q!==" ")&&b.push({type:"text",content:q})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+qL("",t)},"")}};const yb=(n,e,t,r)=>{var s,a,o,d;const i=[t,{code:e,...r||{}}];if((a=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&a.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);Hh(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(d=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&d.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},I8={},Hv=(n,e,t,r)=>{Hh(t)&&I8[t]||(Hh(t)&&(I8[t]=new Date),yb(n,e,t,r))},YL=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},JE=(n,e,t)=>{n.loadNamespaces(e,YL(n,t))},k8=(n,e,t,r)=>{if(Hh(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return JE(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,YL(n,r))},WQ=(n,e,t={})=>!e.languages||!e.languages.length?(Hv(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),QQ=n=>n.displayName||n.name||(Hh(n)&&n.length>0?n:"Unknown"),Hh=n=>typeof n=="string",hg=n=>typeof n=="object"&&n!==null,qQ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,YQ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},$Q=n=>YQ[n],VQ=n=>n.replace(qQ,$Q);let e6={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:VQ};const HQ=(n={})=>{e6={...e6,...n}},$L=()=>e6;let VL;const ZQ=n=>{VL=n},CB=()=>VL,L3=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},F3=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?N1(e):e},XQ=n=>Array.isArray(n)&&n.every(ui.isValidElement),N1=n=>Array.isArray(n)?n:[n],JQ=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},HL=(n,e,t,r)=>{if(!n)return"";let i="";const s=N1(n),a=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,d)=>{if(Hh(o)){i+=`${o}`;return}if(ui.isValidElement(o)){const{props:g,type:b}=o,E=Object.keys(g).length,S=a.indexOf(b)>-1,O=g.children;if(!O&&S&&!E){i+=`<${b}/>`;return}if(!O&&(!S||E)||g.i18nIsDynamicList){i+=`<${d}></${d}>`;return}if(S&&E===1&&Hh(O)){i+=`<${b}>${O}</${b}>`;return}const k=HL(O,e,t,r);i+=`<${d}>${k}</${d}>`;return}if(o===null){yb(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(hg(o)){const{format:g,...b}=o,E=Object.keys(b);if(E.length===1){const S=g?`${E[0]}, ${g}`:E[0];i+=`{{${S}}}`;return}yb(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}yb(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},eq=(n,e,t,r,i,s)=>{if(e==="")return[];const a=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(a.map(z=>`<${z}`).join("|")).test(e);if(!n&&!o&&!s)return[e];const d={},g=z=>{N1(z).forEach(Q=>{Hh(Q)||(L3(Q)?g(F3(Q)):hg(Q)&&!ui.isValidElement(Q)&&Object.assign(d,Q))})};g(n);const b=GQ.parse(`<0>${e}</0>`),E={...d,...i},S=(z,q,Q)=>{var Y;const re=F3(z),X=k(re,q.children,Q);return XQ(re)&&X.length===0||(Y=z.props)!=null&&Y.i18nIsDynamicList?re:X},O=(z,q,Q,re,X)=>{z.dummy?(z.children=q,Q.push(ui.cloneElement(z,{key:re},X?void 0:q))):Q.push(...ui.Children.map([z],Y=>{const J={...Y.props};return delete J.i18nIsDynamicList,ui.createElement(Y.type,{...J,key:re,ref:Y.ref},X?null:q)}))},k=(z,q,Q)=>{const re=N1(z);return N1(q).reduce((Y,J,N)=>{var he,de;const ie=((de=(he=J.children)==null?void 0:he[0])==null?void 0:de.content)&&t.services.interpolator.interpolate(J.children[0].content,E,t.language);if(J.type==="tag"){let we=re[parseInt(J.name,10)];Q.length===1&&!we&&(we=Q[0][J.name]),we||(we={});const fe=Object.keys(J.attrs).length!==0?JQ({props:J.attrs},we):we,be=ui.isValidElement(fe),Pe=be&&L3(J,!0)&&!J.voidElement,pe=o&&hg(fe)&&fe.dummy&&!be,it=hg(n)&&Object.hasOwnProperty.call(n,J.name);if(Hh(fe)){const We=t.services.interpolator.interpolate(fe,E,t.language);Y.push(We)}else if(L3(fe)||Pe){const We=S(fe,J,Q);O(fe,We,Y,N)}else if(pe){const We=k(re,J.children,Q);O(fe,We,Y,N)}else if(Number.isNaN(parseFloat(J.name)))if(it){const We=S(fe,J,Q);O(fe,We,Y,N,J.voidElement)}else if(r.transSupportBasicHtmlNodes&&a.indexOf(J.name)>-1)if(J.voidElement)Y.push(ui.createElement(J.name,{key:`${J.name}-${N}`}));else{const We=k(re,J.children,Q);Y.push(ui.createElement(J.name,{key:`${J.name}-${N}`},We))}else if(J.voidElement)Y.push(`<${J.name} />`);else{const We=k(re,J.children,Q);Y.push(`<${J.name}>${We}</${J.name}>`)}else if(hg(fe)&&!be){const We=J.children[0]?ie:null;We&&Y.push(We)}else O(fe,ie,Y,N,J.children.length!==1||!ie)}else if(J.type==="text"){const we=r.transWrapTextNodes,fe=s?r.unescape(t.services.interpolator.interpolate(J.content,E,t.language)):t.services.interpolator.interpolate(J.content,E,t.language);we?Y.push(ui.createElement(we,{key:`${J.name}-${N}`},fe)):Y.push(fe)}return Y},[])},U=k([{dummy:!0,children:n||[]}],b,N1(n||[]));return F3(U[0])},ZL=(n,e,t)=>{const r=n.key||e,i=ui.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return ui.createElement(ui.Fragment,null,i)}return ui.createElement(s)},tq=(n,e)=>n.map((t,r)=>ZL(t,r,e)),nq=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:ZL(n[r],r,e)})}),t},rq=(n,e,t,r)=>n?Array.isArray(n)?tq(n,e):hg(n)?nq(n,e):(Hv(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function iq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:d,ns:g,i18n:b,t:E,shouldUnescape:S,...O}){var fe,be,Pe,pe,it,We;const k=b||CB();if(!k)return Hv(k,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const U=E||k.t.bind(k)||($e=>$e),z={...$L(),...(fe=k.options)==null?void 0:fe.react};let q=g||U.ns||((be=k.options)==null?void 0:be.defaultNS);q=Hh(q)?[q]:q||["translation"];const Q=HL(n,z,k,r),re=o||Q||z.transEmptyNodeValue||r,{hashTransKey:X}=z,Y=r||(X?X(Q||re):Q||re);(pe=(Pe=k.options)==null?void 0:Pe.interpolation)!=null&&pe.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...k.options.interpolation.defaultVariables}:{...k.options.interpolation.defaultVariables});const J=a||e!==void 0&&!((We=(it=k.options)==null?void 0:it.interpolation)!=null&&We.alwaysFormat)||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},N={...s,context:i||s.context,count:e,...a,...J,defaultValue:re,ns:q},ie=Y?U(Y,N):re,he=rq(d,ie,k,r),de=eq(he||n,ie,k,z,N,S),we=t??z.defaultTransParent;return we?ui.createElement(we,O,de):de}const oq={type:"3rdParty",init(n){HQ(n.options.react),ZQ(n)}},XL=ui.createContext();class sq{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function M0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:a,defaults:o,components:d,ns:g,i18n:b,t:E,shouldUnescape:S,...O}){var Q;const{i18n:k,defaultNS:U}=ui.useContext(XL)||{},z=b||k||CB(),q=E||(z==null?void 0:z.t.bind(z));return iq({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:a,defaults:o,components:d,ns:g||(q==null?void 0:q.ns)||U||((Q=z==null?void 0:z.options)==null?void 0:Q.defaultNS),i18n:z,t:E,shouldUnescape:S,...O})}const aq=(n,e)=>{const t=ui.useRef();return ui.useEffect(()=>{t.current=n},[n,e]),t.current},JL=(n,e,t,r)=>n.getFixedT(e,t,r),lq=(n,e,t,r)=>ui.useCallback(JL(n,e,t,r),[n,e,t,r]),uq=(n,e={})=>{var X,Y,J,N;const{i18n:t}=e,{i18n:r,defaultNS:i}=ui.useContext(XL)||{},s=t||r||CB();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new sq),!s){Hv(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ie=(de,we)=>Hh(we)?we:hg(we)&&Hh(we.defaultValue)?we.defaultValue:Array.isArray(de)?de[de.length-1]:de,he=[ie,{},!1];return he.t=ie,he.i18n={},he.ready=!1,he}(X=s.options.react)!=null&&X.wait&&Hv(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...$L(),...s.options.react,...e},{useSuspense:o,keyPrefix:d}=a;let g=i||((Y=s.options)==null?void 0:Y.defaultNS);g=Hh(g)?[g]:g||["translation"],(N=(J=s.reportNamespaces).addUsedNamespaces)==null||N.call(J,g);const b=(s.isInitialized||s.initializedStoreOnce)&&g.every(ie=>WQ(ie,s,a)),E=lq(s,e.lng||null,a.nsMode==="fallback"?g:g[0],d),S=()=>E,O=()=>JL(s,e.lng||null,a.nsMode==="fallback"?g:g[0],d),[k,U]=ui.useState(S);let z=g.join();e.lng&&(z=`${e.lng}${z}`);const q=aq(z),Q=ui.useRef(!0);ui.useEffect(()=>{const{bindI18n:ie,bindI18nStore:he}=a;Q.current=!0,!b&&!o&&(e.lng?k8(s,e.lng,g,()=>{Q.current&&U(O)}):JE(s,g,()=>{Q.current&&U(O)})),b&&q&&q!==z&&Q.current&&U(O);const de=()=>{Q.current&&U(O)};return ie&&(s==null||s.on(ie,de)),he&&(s==null||s.store.on(he,de)),()=>{Q.current=!1,s&&(ie==null||ie.split(" ").forEach(we=>s.off(we,de))),he&&s&&he.split(" ").forEach(we=>s.store.off(we,de))}},[s,z]),ui.useEffect(()=>{Q.current&&b&&U(S)},[s,d,b]);const re=[k,s,b];if(re.t=k,re.i18n=s,re.ready=b,b||!b&&!o)return re;throw new Promise(ie=>{e.lng?k8(s,e.lng,g,()=>ie()):JE(s,g,()=>ie())})},$s=(n,e={})=>function(r){function i({forwardedRef:a,...o}){const[d,g,b]=uq(n,{...o,keyPrefix:e.keyPrefix}),E={...o,t:d,i18n:g,tReady:b};return e.withRef&&a?E.ref=a:!e.withRef&&a&&(E.forwardedRef=a),ui.createElement(r,E)}i.displayName=`withI18nextTranslation(${QQ(r)})`,i.WrappedComponent=r;const s=(a,o)=>ui.createElement(i,Object.assign({},a,{forwardedRef:o}));return e.withRef?ui.forwardRef(s):i};function Sl(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="d8f26cf16d2bfe94f6075e04546db610e7ce65b5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:12,column:1}},1:{start:{line:13,column:0},end:{line:39,column:3}},2:{start:{line:15,column:4},end:{line:17,column:5}},3:{start:{line:16,column:6},end:{line:16,column:16}},4:{start:{line:18,column:4},end:{line:18,column:514}},5:{start:{line:18,column:119},end:{line:18,column:158}},6:{start:{line:18,column:198},end:{line:18,column:237}},7:{start:{line:18,column:277},end:{line:18,column:316}},8:{start:{line:18,column:356},end:{line:18,column:395}},9:{start:{line:18,column:435},end:{line:18,column:474}},10:{start:{line:34,column:4},end:{line:36,column:5}},11:{start:{line:35,column:6},end:{line:35,column:13}},12:{start:{line:37,column:4},end:{line:37,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:21},end:{line:14,column:22}},loc:{start:{line:14,column:35},end:{line:19,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:18,column:113},end:{line:18,column:114}},loc:{start:{line:18,column:119},end:{line:18,column:158}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:18,column:192},end:{line:18,column:193}},loc:{start:{line:18,column:198},end:{line:18,column:237}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:18,column:271},end:{line:18,column:272}},loc:{start:{line:18,column:277},end:{line:18,column:316}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:18,column:350},end:{line:18,column:351}},loc:{start:{line:18,column:356},end:{line:18,column:395}},line:18},5:{name:"(anonymous_5)",decl:{start:{line:18,column:429},end:{line:18,column:430}},loc:{start:{line:18,column:435},end:{line:18,column:474}},line:18},6:{name:"(anonymous_6)",decl:{start:{line:33,column:21},end:{line:33,column:22}},loc:{start:{line:33,column:41},end:{line:38,column:3}},line:33}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:17,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,2aAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d8f26cf16d2bfe94f6075e04546db610e7ce65b5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Sl=function(){return a},a}Sl();const eF=(Sl().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",ja:"",zh:""});Sl().s[1]++;Dc.use(QL).use(KQ((n,e)=>(Sl().f[0]++,Sl().s[2]++,n==="en"?(Sl().b[0][0]++,Sl().s[3]++,{}):(Sl().b[0][1]++,Sl().s[4]++,rQ(Object.assign({"./locales/de/translation.json":()=>(Sl().f[1]++,Sl().s[5]++,tv(()=>import("./translation-jw99Nxvk.js"),[])),"./locales/fr/translation.json":()=>(Sl().f[2]++,Sl().s[6]++,tv(()=>import("./translation-BG6vn6wi.js"),[])),"./locales/he/translation.json":()=>(Sl().f[3]++,Sl().s[7]++,tv(()=>import("./translation-y_pBWWYu.js"),[])),"./locales/ja/translation.json":()=>(Sl().f[4]++,Sl().s[8]++,tv(()=>import("./translation-CM4Rn8lU.js"),[])),"./locales/zh/translation.json":()=>(Sl().f[5]++,Sl().s[9]++,tv(()=>import("./translation-DHsMJ3Qo.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(oq).init({supportedLngs:Object.keys(eF),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(Sl().f[6]++,Sl().s[10]++,n[0]==="en"){Sl().b[1][0]++,Sl().s[11]++;return}else Sl().b[1][1]++;Sl().s[12]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var IC={exports:{}},T8;function Aq(){return T8||(T8=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(a){if(a===void 0){console.error("Autobind error: No context provided.");return}var o=Object.getPrototypeOf(a);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(o),r.forEach(function(d){var g=Object.getOwnPropertyDescriptor(o,d);if(g===void 0){console.warn('Autobind: "'+d+'" method not found in class.');return}t.indexOf(d)!==-1||typeof g.value!="function"||Object.defineProperty(o,d,s(o,d,g))})}function s(a,o,d){var g=d.value;return{configurable:!0,get:function(){if(this===a||this.hasOwnProperty(o))return g;var E=g.bind(this);return Object.defineProperty(this,o,{value:E,configurable:!0,writable:!0}),E}}}n.exports=e.default}(IC,IC.exports)),IC.exports}var U3,P8;function cq(){return P8||(P8=1,U3=Aq()),U3}var dq=cq();const hq=La(dq);var gv={exports:{}};gv.exports;var R8;function fq(){return R8||(R8=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",d="[object Date]",g="[object Error]",b="[object Function]",E="[object GeneratorFunction]",S="[object Map]",O="[object Number]",k="[object Object]",U="[object Promise]",z="[object RegExp]",q="[object Set]",Q="[object String]",re="[object Symbol]",X="[object WeakMap]",Y="[object ArrayBuffer]",J="[object DataView]",N="[object Float32Array]",ie="[object Float64Array]",he="[object Int8Array]",de="[object Int16Array]",we="[object Int32Array]",fe="[object Uint8Array]",be="[object Uint8ClampedArray]",Pe="[object Uint16Array]",pe="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,We=/\w*$/,$e=/^\[object .+?Constructor\]$/,ht=/^(?:0|[1-9]\d*)$/,De={};De[s]=De[a]=De[Y]=De[J]=De[o]=De[d]=De[N]=De[ie]=De[he]=De[de]=De[we]=De[S]=De[O]=De[k]=De[z]=De[q]=De[Q]=De[re]=De[fe]=De[be]=De[Pe]=De[pe]=!0,De[g]=De[b]=De[X]=!1;var Ne=typeof window=="object"&&window&&window.Object===Object&&window,at=typeof self=="object"&&self&&self.Object===Object&&self,wt=Ne||at||Function("return this")(),Ct=e&&!e.nodeType&&e,ft=Ct&&!0&&n&&!n.nodeType&&n,Lt=ft&&ft.exports===Ct;function Kt(ee,Be){return ee.set(Be[0],Be[1]),ee}function Fe(ee,Be){return ee.add(Be),ee}function Te(ee,Be){for(var tt=-1,qt=ee?ee.length:0;++tt<qt&&Be(ee[tt],tt,ee)!==!1;);return ee}function Se(ee,Be){for(var tt=-1,qt=Be.length,Or=ee.length;++tt<qt;)ee[Or+tt]=Be[tt];return ee}function Je(ee,Be,tt,qt){for(var Or=-1,Gn=ee?ee.length:0;++Or<Gn;)tt=Be(tt,ee[Or],Or,ee);return tt}function yt(ee,Be){for(var tt=-1,qt=Array(ee);++tt<ee;)qt[tt]=Be(tt);return qt}function dt(ee,Be){return ee==null?void 0:ee[Be]}function Ut(ee){var Be=!1;if(ee!=null&&typeof ee.toString!="function")try{Be=!!(ee+"")}catch{}return Be}function en(ee){var Be=-1,tt=Array(ee.size);return ee.forEach(function(qt,Or){tt[++Be]=[Or,qt]}),tt}function Nt(ee,Be){return function(tt){return ee(Be(tt))}}function yn(ee){var Be=-1,tt=Array(ee.size);return ee.forEach(function(qt){tt[++Be]=qt}),tt}var jn=Array.prototype,Rr=Function.prototype,sr=Object.prototype,Jn=wt["__core-js_shared__"],mr=function(){var ee=/[^.]+$/.exec(Jn&&Jn.keys&&Jn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),pr=Rr.toString,xr=sr.hasOwnProperty,Qn=sr.toString,Er=RegExp("^"+pr.call(xr).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=Lt?wt.Buffer:void 0,Ae=wt.Symbol,me=wt.Uint8Array,Xe=Nt(Object.getPrototypeOf,Object),Et=Object.create,Yt=sr.propertyIsEnumerable,nn=jn.splice,rr=Object.getOwnPropertySymbols,Ee=Ge?Ge.isBuffer:void 0,oe=Nt(Object.keys,Object),ve=Lr(wt,"DataView"),p=Lr(wt,"Map"),ze=Lr(wt,"Promise"),rt=Lr(wt,"Set"),pt=Lr(wt,"WeakMap"),Bt=Lr(Object,"create"),vt=fo(ve),Xt=fo(p),tn=fo(ze),zt=fo(rt),_t=fo(pt),Tn=Ae?Ae.prototype:void 0,Sn=Tn?Tn.valueOf:void 0;function Ar(ee){var Be=-1,tt=ee?ee.length:0;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function wr(){this.__data__=Bt?Bt(null):{}}function rn(ee){return this.has(ee)&&delete this.__data__[ee]}function Fn(ee){var Be=this.__data__;if(Bt){var tt=Be[ee];return tt===r?void 0:tt}return xr.call(Be,ee)?Be[ee]:void 0}function Rn(ee){var Be=this.__data__;return Bt?Be[ee]!==void 0:xr.call(Be,ee)}function Br(ee,Be){var tt=this.__data__;return tt[ee]=Bt&&Be===void 0?r:Be,this}Ar.prototype.clear=wr,Ar.prototype.delete=rn,Ar.prototype.get=Fn,Ar.prototype.has=Rn,Ar.prototype.set=Br;function Mr(ee){var Be=-1,tt=ee?ee.length:0;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function Kr(){this.__data__=[]}function ir(ee){var Be=this.__data__,tt=Za(Be,ee);if(tt<0)return!1;var qt=Be.length-1;return tt==qt?Be.pop():nn.call(Be,tt,1),!0}function co(ee){var Be=this.__data__,tt=Za(Be,ee);return tt<0?void 0:Be[tt][1]}function Sa(ee){return Za(this.__data__,ee)>-1}function qi(ee,Be){var tt=this.__data__,qt=Za(tt,ee);return qt<0?tt.push([ee,Be]):tt[qt][1]=Be,this}Mr.prototype.clear=Kr,Mr.prototype.delete=ir,Mr.prototype.get=co,Mr.prototype.has=Sa,Mr.prototype.set=qi;function yi(ee){var Be=-1,tt=ee?ee.length:0;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function oo(){this.__data__={hash:new Ar,map:new(p||Mr),string:new Ar}}function Mo(ee){return ls(this,ee).delete(ee)}function Ti(ee){return ls(this,ee).get(ee)}function Ua(ee){return ls(this,ee).has(ee)}function Ea(ee,Be){return ls(this,ee).set(ee,Be),this}yi.prototype.clear=oo,yi.prototype.delete=Mo,yi.prototype.get=Ti,yi.prototype.has=Ua,yi.prototype.set=Ea;function ns(ee){this.__data__=new Mr(ee)}function Aa(){this.__data__=new Mr}function Al(ee){return this.__data__.delete(ee)}function ao(ee){return this.__data__.get(ee)}function Pu(ee){return this.__data__.has(ee)}function tu(ee,Be){var tt=this.__data__;if(tt instanceof Mr){var qt=tt.__data__;if(!p||qt.length<t-1)return qt.push([ee,Be]),this;tt=this.__data__=new yi(qt)}return tt.set(ee,Be),this}ns.prototype.clear=Aa,ns.prototype.delete=Al,ns.prototype.get=ao,ns.prototype.has=Pu,ns.prototype.set=tu;function so(ee,Be){var tt=Ks(ee)||el(ee)?yt(ee.length,String):[],qt=tt.length,Or=!!qt;for(var Gn in ee)xr.call(ee,Gn)&&!(Or&&(Gn=="length"||hu(Gn,qt)))&&tt.push(Gn);return tt}function Dr(ee,Be,tt){var qt=ee[Be];(!(xr.call(ee,Be)&&Ms(qt,tt))||tt===void 0&&!(Be in ee))&&(ee[Be]=tt)}function Za(ee,Be){for(var tt=ee.length;tt--;)if(Ms(ee[tt][0],Be))return tt;return-1}function Ps(ee,Be){return ee&&Ai(Be,Ni(Be),ee)}function ia(ee,Be,tt,qt,Or,Gn,si){var ci;if(qt&&(ci=Gn?qt(ee,Or,Gn,si):qt(ee)),ci!==void 0)return ci;if(!Jr(ee))return ee;var gr=Ks(ee);if(gr){if(ci=Rs(ee),!Be)return Xa(ee,ci)}else{var Ir=Ja(ee),vi=Ir==b||Ir==E;if(Vi(ee))return er(ee,Be);if(Ir==k||Ir==s||vi&&!Gn){if(Ut(ee))return Gn?ee:{};if(ci=So(vi?{}:ee),!Be)return ca(ee,Ps(ci,ee))}else{if(!De[Ir])return Gn?ee:{};ci=Gs(ee,Ir,ia,Be)}}si||(si=new ns);var Eo=si.get(ee);if(Eo)return Eo;if(si.set(ee,ci),!gr)var ki=tt?iA(ee):Ni(ee);return Te(ki||ee,function(qr,Hi){ki&&(Hi=qr,qr=ee[Hi]),Dr(ci,Hi,ia(qr,Be,tt,qt,Hi,ee,si))}),ci}function Qe(ee){return Jr(ee)?Et(ee):{}}function bt(ee,Be,tt){var qt=Be(ee);return Ks(ee)?qt:Se(qt,tt(ee))}function fn(ee){return Qn.call(ee)}function Nn(ee){if(!Jr(ee)||rs(ee))return!1;var Be=nu(ee)||Ut(ee)?Er:$e;return Be.test(fo(ee))}function un(ee){if(!Vs(ee))return oe(ee);var Be=[];for(var tt in Object(ee))xr.call(ee,tt)&&tt!="constructor"&&Be.push(tt);return Be}function er(ee,Be){if(Be)return ee.slice();var tt=new ee.constructor(ee.length);return ee.copy(tt),tt}function Pi(ee){var Be=new ee.constructor(ee.byteLength);return new me(Be).set(new me(ee)),Be}function ho(ee,Be){var tt=Be?Pi(ee.buffer):ee.buffer;return new ee.constructor(tt,ee.byteOffset,ee.byteLength)}function _s(ee,Be,tt){var qt=Be?tt(en(ee),!0):en(ee);return Je(qt,Kt,new ee.constructor)}function Ns(ee){var Be=new ee.constructor(ee.source,We.exec(ee));return Be.lastIndex=ee.lastIndex,Be}function vA(ee,Be,tt){var qt=Be?tt(yn(ee),!0):yn(ee);return Je(qt,Fe,new ee.constructor)}function ri(ee){return Sn?Object(Sn.call(ee)):{}}function wi(ee,Be){var tt=Be?Pi(ee.buffer):ee.buffer;return new ee.constructor(tt,ee.byteOffset,ee.length)}function Xa(ee,Be){var tt=-1,qt=ee.length;for(Be||(Be=Array(qt));++tt<qt;)Be[tt]=ee[tt];return Be}function Ai(ee,Be,tt,qt){tt||(tt={});for(var Or=-1,Gn=Be.length;++Or<Gn;){var si=Be[Or],ci=void 0;Dr(tt,si,ci===void 0?ee[si]:ci)}return tt}function ca(ee,Be){return Ai(ee,Ei(ee),Be)}function iA(ee){return bt(ee,Ni,Ei)}function ls(ee,Be){var tt=ee.__data__;return zl(Be)?tt[typeof Be=="string"?"string":"hash"]:tt.map}function Lr(ee,Be){var tt=dt(ee,Be);return Nn(tt)?tt:void 0}var Ei=rr?Nt(rr,Object):lo,Ja=fn;(ve&&Ja(new ve(new ArrayBuffer(1)))!=J||p&&Ja(new p)!=S||ze&&Ja(ze.resolve())!=U||rt&&Ja(new rt)!=q||pt&&Ja(new pt)!=X)&&(Ja=function(ee){var Be=Qn.call(ee),tt=Be==k?ee.constructor:void 0,qt=tt?fo(tt):void 0;if(qt)switch(qt){case vt:return J;case Xt:return S;case tn:return U;case zt:return q;case _t:return X}return Be});function Rs(ee){var Be=ee.length,tt=ee.constructor(Be);return Be&&typeof ee[0]=="string"&&xr.call(ee,"index")&&(tt.index=ee.index,tt.input=ee.input),tt}function So(ee){return typeof ee.constructor=="function"&&!Vs(ee)?Qe(Xe(ee)):{}}function Gs(ee,Be,tt,qt){var Or=ee.constructor;switch(Be){case Y:return Pi(ee);case o:case d:return new Or(+ee);case J:return ho(ee,qt);case N:case ie:case he:case de:case we:case fe:case be:case Pe:case pe:return wi(ee,qt);case S:return _s(ee,qt,tt);case O:case Q:return new Or(ee);case z:return Ns(ee);case q:return vA(ee,qt,tt);case re:return ri(ee)}}function hu(ee,Be){return Be=Be??i,!!Be&&(typeof ee=="number"||ht.test(ee))&&ee>-1&&ee%1==0&&ee<Be}function zl(ee){var Be=typeof ee;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ee!=="__proto__":ee===null}function rs(ee){return!!mr&&mr in ee}function Vs(ee){var Be=ee&&ee.constructor,tt=typeof Be=="function"&&Be.prototype||sr;return ee===tt}function fo(ee){if(ee!=null){try{return pr.call(ee)}catch{}try{return ee+""}catch{}}return""}function ms(ee){return ia(ee,!0,!0)}function Ms(ee,Be){return ee===Be||ee!==ee&&Be!==Be}function el(ee){return oA(ee)&&xr.call(ee,"callee")&&(!Yt.call(ee,"callee")||Qn.call(ee)==s)}var Ks=Array.isArray;function El(ee){return ee!=null&&Ui(ee.length)&&!nu(ee)}function oA(ee){return ru(ee)&&El(ee)}var Vi=Ee||Ri;function nu(ee){var Be=Jr(ee)?Qn.call(ee):"";return Be==b||Be==E}function Ui(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=i}function Jr(ee){var Be=typeof ee;return!!ee&&(Be=="object"||Be=="function")}function ru(ee){return!!ee&&typeof ee=="object"}function Ni(ee){return El(ee)?so(ee):un(ee)}function lo(){return[]}function Ri(){return!1}n.exports=ms}(gv,gv.exports)),gv.exports}var pq=fq();const K8=La(pq);var z3,D8;function mq(){if(D8)return z3;D8=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,o=Object.prototype,d=o.toString;function g(U,z,q){return U===U&&(q!==void 0&&(U=U<=q?U:q),z!==void 0&&(U=U>=z?U:z)),U}function b(U){var z=typeof U;return!!U&&(z=="object"||z=="function")}function E(U){return!!U&&typeof U=="object"}function S(U){return typeof U=="symbol"||E(U)&&d.call(U)==e}function O(U){if(typeof U=="number")return U;if(S(U))return n;if(b(U)){var z=typeof U.valueOf=="function"?U.valueOf():U;U=b(z)?z+"":z}if(typeof U!="string")return U===0?U:+U;U=U.replace(t,"");var q=i.test(U);return q||s.test(U)?a(U.slice(2),q?2:8):r.test(U)?n:+U}function k(U,z,q){return q===void 0&&(q=z,z=void 0),q!==void 0&&(q=O(q),q=q===q?q:0),z!==void 0&&(z=O(z),z=z===z?z:0),g(O(U),z,q)}return z3=k,z3}var gq=mq();const L8=La(gq);var j3={},ov={},F8;function yq(){if(F8)return ov;F8=1,ov.byteLength=o,ov.toByteArray=g,ov.fromByteArray=S;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(O){var k=O.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=O.indexOf("=");U===-1&&(U=k);var z=U===k?0:4-U%4;return[U,z]}function o(O){var k=a(O),U=k[0],z=k[1];return(U+z)*3/4-z}function d(O,k,U){return(k+U)*3/4-U}function g(O){var k,U=a(O),z=U[0],q=U[1],Q=new t(d(O,z,q)),re=0,X=q>0?z-4:z,Y;for(Y=0;Y<X;Y+=4)k=e[O.charCodeAt(Y)]<<18|e[O.charCodeAt(Y+1)]<<12|e[O.charCodeAt(Y+2)]<<6|e[O.charCodeAt(Y+3)],Q[re++]=k>>16&255,Q[re++]=k>>8&255,Q[re++]=k&255;return q===2&&(k=e[O.charCodeAt(Y)]<<2|e[O.charCodeAt(Y+1)]>>4,Q[re++]=k&255),q===1&&(k=e[O.charCodeAt(Y)]<<10|e[O.charCodeAt(Y+1)]<<4|e[O.charCodeAt(Y+2)]>>2,Q[re++]=k>>8&255,Q[re++]=k&255),Q}function b(O){return n[O>>18&63]+n[O>>12&63]+n[O>>6&63]+n[O&63]}function E(O,k,U){for(var z,q=[],Q=k;Q<U;Q+=3)z=(O[Q]<<16&16711680)+(O[Q+1]<<8&65280)+(O[Q+2]&255),q.push(b(z));return q.join("")}function S(O){for(var k,U=O.length,z=U%3,q=[],Q=16383,re=0,X=U-z;re<X;re+=Q)q.push(E(O,re,re+Q>X?X:re+Q));return z===1?(k=O[U-1],q.push(n[k>>2]+n[k<<4&63]+"==")):z===2&&(k=(O[U-2]<<8)+O[U-1],q.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),q.join("")}return ov}var kC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var U8;function vq(){return U8||(U8=1,kC.read=function(n,e,t,r,i){var s,a,o=i*8-r-1,d=(1<<o)-1,g=d>>1,b=-7,E=t?i-1:0,S=t?-1:1,O=n[e+E];for(E+=S,s=O&(1<<-b)-1,O>>=-b,b+=o;b>0;s=s*256+n[e+E],E+=S,b-=8);for(a=s&(1<<-b)-1,s>>=-b,b+=r;b>0;a=a*256+n[e+E],E+=S,b-=8);if(s===0)s=1-g;else{if(s===d)return a?NaN:(O?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-g}return(O?-1:1)*a*Math.pow(2,s-r)},kC.write=function(n,e,t,r,i,s){var a,o,d,g=s*8-i-1,b=(1<<g)-1,E=b>>1,S=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=r?0:s-1,k=r?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=b):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),a+E>=1?e+=S/d:e+=S*Math.pow(2,1-E),e*d>=2&&(a++,d/=2),a+E>=b?(o=0,a=b):a+E>=1?(o=(e*d-1)*Math.pow(2,i),a=a+E):(o=e*Math.pow(2,E-1)*Math.pow(2,i),a=0));i>=8;n[t+O]=o&255,O+=k,o/=256,i-=8);for(a=a<<i|o,g+=i;g>0;n[t+O]=a&255,O+=k,a/=256,g-=8);n[t+O-k]|=U*128}),kC}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var z8;function _q(){return z8||(z8=1,function(n){const e=yq(),t=vq(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=Q,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const Ge=new Uint8Array(1),Ae={foo:function(){return 42}};return Object.setPrototypeOf(Ae,Uint8Array.prototype),Object.setPrototypeOf(Ge,Ae),Ge.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(Ge){if(Ge>i)throw new RangeError('The value "'+Ge+'" is invalid for option "size"');const Ae=new Uint8Array(Ge);return Object.setPrototypeOf(Ae,o.prototype),Ae}function o(Ge,Ae,me){if(typeof Ge=="number"){if(typeof Ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(Ge)}return d(Ge,Ae,me)}o.poolSize=8192;function d(Ge,Ae,me){if(typeof Ge=="string")return S(Ge,Ae);if(ArrayBuffer.isView(Ge))return k(Ge);if(Ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge);if(mr(Ge,ArrayBuffer)||Ge&&mr(Ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(mr(Ge,SharedArrayBuffer)||Ge&&mr(Ge.buffer,SharedArrayBuffer)))return U(Ge,Ae,me);if(typeof Ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Xe=Ge.valueOf&&Ge.valueOf();if(Xe!=null&&Xe!==Ge)return o.from(Xe,Ae,me);const Et=z(Ge);if(Et)return Et;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ge[Symbol.toPrimitive]=="function")return o.from(Ge[Symbol.toPrimitive]("string"),Ae,me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge)}o.from=function(Ge,Ae,me){return d(Ge,Ae,me)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function g(Ge){if(typeof Ge!="number")throw new TypeError('"size" argument must be of type number');if(Ge<0)throw new RangeError('The value "'+Ge+'" is invalid for option "size"')}function b(Ge,Ae,me){return g(Ge),Ge<=0?a(Ge):Ae!==void 0?typeof me=="string"?a(Ge).fill(Ae,me):a(Ge).fill(Ae):a(Ge)}o.alloc=function(Ge,Ae,me){return b(Ge,Ae,me)};function E(Ge){return g(Ge),a(Ge<0?0:q(Ge)|0)}o.allocUnsafe=function(Ge){return E(Ge)},o.allocUnsafeSlow=function(Ge){return E(Ge)};function S(Ge,Ae){if((typeof Ae!="string"||Ae==="")&&(Ae="utf8"),!o.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);const me=re(Ge,Ae)|0;let Xe=a(me);const Et=Xe.write(Ge,Ae);return Et!==me&&(Xe=Xe.slice(0,Et)),Xe}function O(Ge){const Ae=Ge.length<0?0:q(Ge.length)|0,me=a(Ae);for(let Xe=0;Xe<Ae;Xe+=1)me[Xe]=Ge[Xe]&255;return me}function k(Ge){if(mr(Ge,Uint8Array)){const Ae=new Uint8Array(Ge);return U(Ae.buffer,Ae.byteOffset,Ae.byteLength)}return O(Ge)}function U(Ge,Ae,me){if(Ae<0||Ge.byteLength<Ae)throw new RangeError('"offset" is outside of buffer bounds');if(Ge.byteLength<Ae+(me||0))throw new RangeError('"length" is outside of buffer bounds');let Xe;return Ae===void 0&&me===void 0?Xe=new Uint8Array(Ge):me===void 0?Xe=new Uint8Array(Ge,Ae):Xe=new Uint8Array(Ge,Ae,me),Object.setPrototypeOf(Xe,o.prototype),Xe}function z(Ge){if(o.isBuffer(Ge)){const Ae=q(Ge.length)|0,me=a(Ae);return me.length===0||Ge.copy(me,0,0,Ae),me}if(Ge.length!==void 0)return typeof Ge.length!="number"||pr(Ge.length)?a(0):O(Ge);if(Ge.type==="Buffer"&&Array.isArray(Ge.data))return O(Ge.data)}function q(Ge){if(Ge>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Ge|0}function Q(Ge){return+Ge!=Ge&&(Ge=0),o.alloc(+Ge)}o.isBuffer=function(Ae){return Ae!=null&&Ae._isBuffer===!0&&Ae!==o.prototype},o.compare=function(Ae,me){if(mr(Ae,Uint8Array)&&(Ae=o.from(Ae,Ae.offset,Ae.byteLength)),mr(me,Uint8Array)&&(me=o.from(me,me.offset,me.byteLength)),!o.isBuffer(Ae)||!o.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ae===me)return 0;let Xe=Ae.length,Et=me.length;for(let Yt=0,nn=Math.min(Xe,Et);Yt<nn;++Yt)if(Ae[Yt]!==me[Yt]){Xe=Ae[Yt],Et=me[Yt];break}return Xe<Et?-1:Et<Xe?1:0},o.isEncoding=function(Ae){switch(String(Ae).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(Ae,me){if(!Array.isArray(Ae))throw new TypeError('"list" argument must be an Array of Buffers');if(Ae.length===0)return o.alloc(0);let Xe;if(me===void 0)for(me=0,Xe=0;Xe<Ae.length;++Xe)me+=Ae[Xe].length;const Et=o.allocUnsafe(me);let Yt=0;for(Xe=0;Xe<Ae.length;++Xe){let nn=Ae[Xe];if(mr(nn,Uint8Array))Yt+nn.length>Et.length?(o.isBuffer(nn)||(nn=o.from(nn)),nn.copy(Et,Yt)):Uint8Array.prototype.set.call(Et,nn,Yt);else if(o.isBuffer(nn))nn.copy(Et,Yt);else throw new TypeError('"list" argument must be an Array of Buffers');Yt+=nn.length}return Et};function re(Ge,Ae){if(o.isBuffer(Ge))return Ge.length;if(ArrayBuffer.isView(Ge)||mr(Ge,ArrayBuffer))return Ge.byteLength;if(typeof Ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ge);const me=Ge.length,Xe=arguments.length>2&&arguments[2]===!0;if(!Xe&&me===0)return 0;let Et=!1;for(;;)switch(Ae){case"ascii":case"latin1":case"binary":return me;case"utf8":case"utf-8":return yn(Ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me*2;case"hex":return me>>>1;case"base64":return sr(Ge).length;default:if(Et)return Xe?-1:yn(Ge).length;Ae=(""+Ae).toLowerCase(),Et=!0}}o.byteLength=re;function X(Ge,Ae,me){let Xe=!1;if((Ae===void 0||Ae<0)&&(Ae=0),Ae>this.length||((me===void 0||me>this.length)&&(me=this.length),me<=0)||(me>>>=0,Ae>>>=0,me<=Ae))return"";for(Ge||(Ge="utf8");;)switch(Ge){case"hex":return ht(this,Ae,me);case"utf8":case"utf-8":return Pe(this,Ae,me);case"ascii":return We(this,Ae,me);case"latin1":case"binary":return $e(this,Ae,me);case"base64":return be(this,Ae,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,Ae,me);default:if(Xe)throw new TypeError("Unknown encoding: "+Ge);Ge=(Ge+"").toLowerCase(),Xe=!0}}o.prototype._isBuffer=!0;function Y(Ge,Ae,me){const Xe=Ge[Ae];Ge[Ae]=Ge[me],Ge[me]=Xe}o.prototype.swap16=function(){const Ae=this.length;if(Ae%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let me=0;me<Ae;me+=2)Y(this,me,me+1);return this},o.prototype.swap32=function(){const Ae=this.length;if(Ae%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let me=0;me<Ae;me+=4)Y(this,me,me+3),Y(this,me+1,me+2);return this},o.prototype.swap64=function(){const Ae=this.length;if(Ae%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let me=0;me<Ae;me+=8)Y(this,me,me+7),Y(this,me+1,me+6),Y(this,me+2,me+5),Y(this,me+3,me+4);return this},o.prototype.toString=function(){const Ae=this.length;return Ae===0?"":arguments.length===0?Pe(this,0,Ae):X.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(Ae){if(!o.isBuffer(Ae))throw new TypeError("Argument must be a Buffer");return this===Ae?!0:o.compare(this,Ae)===0},o.prototype.inspect=function(){let Ae="";const me=n.INSPECT_MAX_BYTES;return Ae=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(Ae+=" ... "),"<Buffer "+Ae+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(Ae,me,Xe,Et,Yt){if(mr(Ae,Uint8Array)&&(Ae=o.from(Ae,Ae.offset,Ae.byteLength)),!o.isBuffer(Ae))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ae);if(me===void 0&&(me=0),Xe===void 0&&(Xe=Ae?Ae.length:0),Et===void 0&&(Et=0),Yt===void 0&&(Yt=this.length),me<0||Xe>Ae.length||Et<0||Yt>this.length)throw new RangeError("out of range index");if(Et>=Yt&&me>=Xe)return 0;if(Et>=Yt)return-1;if(me>=Xe)return 1;if(me>>>=0,Xe>>>=0,Et>>>=0,Yt>>>=0,this===Ae)return 0;let nn=Yt-Et,rr=Xe-me;const Ee=Math.min(nn,rr),oe=this.slice(Et,Yt),ve=Ae.slice(me,Xe);for(let p=0;p<Ee;++p)if(oe[p]!==ve[p]){nn=oe[p],rr=ve[p];break}return nn<rr?-1:rr<nn?1:0};function J(Ge,Ae,me,Xe,Et){if(Ge.length===0)return-1;if(typeof me=="string"?(Xe=me,me=0):me>2147483647?me=2147483647:me<-2147483648&&(me=-2147483648),me=+me,pr(me)&&(me=Et?0:Ge.length-1),me<0&&(me=Ge.length+me),me>=Ge.length){if(Et)return-1;me=Ge.length-1}else if(me<0)if(Et)me=0;else return-1;if(typeof Ae=="string"&&(Ae=o.from(Ae,Xe)),o.isBuffer(Ae))return Ae.length===0?-1:N(Ge,Ae,me,Xe,Et);if(typeof Ae=="number")return Ae=Ae&255,typeof Uint8Array.prototype.indexOf=="function"?Et?Uint8Array.prototype.indexOf.call(Ge,Ae,me):Uint8Array.prototype.lastIndexOf.call(Ge,Ae,me):N(Ge,[Ae],me,Xe,Et);throw new TypeError("val must be string, number or Buffer")}function N(Ge,Ae,me,Xe,Et){let Yt=1,nn=Ge.length,rr=Ae.length;if(Xe!==void 0&&(Xe=String(Xe).toLowerCase(),Xe==="ucs2"||Xe==="ucs-2"||Xe==="utf16le"||Xe==="utf-16le")){if(Ge.length<2||Ae.length<2)return-1;Yt=2,nn/=2,rr/=2,me/=2}function Ee(ve,p){return Yt===1?ve[p]:ve.readUInt16BE(p*Yt)}let oe;if(Et){let ve=-1;for(oe=me;oe<nn;oe++)if(Ee(Ge,oe)===Ee(Ae,ve===-1?0:oe-ve)){if(ve===-1&&(ve=oe),oe-ve+1===rr)return ve*Yt}else ve!==-1&&(oe-=oe-ve),ve=-1}else for(me+rr>nn&&(me=nn-rr),oe=me;oe>=0;oe--){let ve=!0;for(let p=0;p<rr;p++)if(Ee(Ge,oe+p)!==Ee(Ae,p)){ve=!1;break}if(ve)return oe}return-1}o.prototype.includes=function(Ae,me,Xe){return this.indexOf(Ae,me,Xe)!==-1},o.prototype.indexOf=function(Ae,me,Xe){return J(this,Ae,me,Xe,!0)},o.prototype.lastIndexOf=function(Ae,me,Xe){return J(this,Ae,me,Xe,!1)};function ie(Ge,Ae,me,Xe){me=Number(me)||0;const Et=Ge.length-me;Xe?(Xe=Number(Xe),Xe>Et&&(Xe=Et)):Xe=Et;const Yt=Ae.length;Xe>Yt/2&&(Xe=Yt/2);let nn;for(nn=0;nn<Xe;++nn){const rr=parseInt(Ae.substr(nn*2,2),16);if(pr(rr))return nn;Ge[me+nn]=rr}return nn}function he(Ge,Ae,me,Xe){return Jn(yn(Ae,Ge.length-me),Ge,me,Xe)}function de(Ge,Ae,me,Xe){return Jn(jn(Ae),Ge,me,Xe)}function we(Ge,Ae,me,Xe){return Jn(sr(Ae),Ge,me,Xe)}function fe(Ge,Ae,me,Xe){return Jn(Rr(Ae,Ge.length-me),Ge,me,Xe)}o.prototype.write=function(Ae,me,Xe,Et){if(me===void 0)Et="utf8",Xe=this.length,me=0;else if(Xe===void 0&&typeof me=="string")Et=me,Xe=this.length,me=0;else if(isFinite(me))me=me>>>0,isFinite(Xe)?(Xe=Xe>>>0,Et===void 0&&(Et="utf8")):(Et=Xe,Xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Yt=this.length-me;if((Xe===void 0||Xe>Yt)&&(Xe=Yt),Ae.length>0&&(Xe<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Et||(Et="utf8");let nn=!1;for(;;)switch(Et){case"hex":return ie(this,Ae,me,Xe);case"utf8":case"utf-8":return he(this,Ae,me,Xe);case"ascii":case"latin1":case"binary":return de(this,Ae,me,Xe);case"base64":return we(this,Ae,me,Xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,Ae,me,Xe);default:if(nn)throw new TypeError("Unknown encoding: "+Et);Et=(""+Et).toLowerCase(),nn=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function be(Ge,Ae,me){return Ae===0&&me===Ge.length?e.fromByteArray(Ge):e.fromByteArray(Ge.slice(Ae,me))}function Pe(Ge,Ae,me){me=Math.min(Ge.length,me);const Xe=[];let Et=Ae;for(;Et<me;){const Yt=Ge[Et];let nn=null,rr=Yt>239?4:Yt>223?3:Yt>191?2:1;if(Et+rr<=me){let Ee,oe,ve,p;switch(rr){case 1:Yt<128&&(nn=Yt);break;case 2:Ee=Ge[Et+1],(Ee&192)===128&&(p=(Yt&31)<<6|Ee&63,p>127&&(nn=p));break;case 3:Ee=Ge[Et+1],oe=Ge[Et+2],(Ee&192)===128&&(oe&192)===128&&(p=(Yt&15)<<12|(Ee&63)<<6|oe&63,p>2047&&(p<55296||p>57343)&&(nn=p));break;case 4:Ee=Ge[Et+1],oe=Ge[Et+2],ve=Ge[Et+3],(Ee&192)===128&&(oe&192)===128&&(ve&192)===128&&(p=(Yt&15)<<18|(Ee&63)<<12|(oe&63)<<6|ve&63,p>65535&&p<1114112&&(nn=p))}}nn===null?(nn=65533,rr=1):nn>65535&&(nn-=65536,Xe.push(nn>>>10&1023|55296),nn=56320|nn&1023),Xe.push(nn),Et+=rr}return it(Xe)}const pe=4096;function it(Ge){const Ae=Ge.length;if(Ae<=pe)return String.fromCharCode.apply(String,Ge);let me="",Xe=0;for(;Xe<Ae;)me+=String.fromCharCode.apply(String,Ge.slice(Xe,Xe+=pe));return me}function We(Ge,Ae,me){let Xe="";me=Math.min(Ge.length,me);for(let Et=Ae;Et<me;++Et)Xe+=String.fromCharCode(Ge[Et]&127);return Xe}function $e(Ge,Ae,me){let Xe="";me=Math.min(Ge.length,me);for(let Et=Ae;Et<me;++Et)Xe+=String.fromCharCode(Ge[Et]);return Xe}function ht(Ge,Ae,me){const Xe=Ge.length;(!Ae||Ae<0)&&(Ae=0),(!me||me<0||me>Xe)&&(me=Xe);let Et="";for(let Yt=Ae;Yt<me;++Yt)Et+=xr[Ge[Yt]];return Et}function De(Ge,Ae,me){const Xe=Ge.slice(Ae,me);let Et="";for(let Yt=0;Yt<Xe.length-1;Yt+=2)Et+=String.fromCharCode(Xe[Yt]+Xe[Yt+1]*256);return Et}o.prototype.slice=function(Ae,me){const Xe=this.length;Ae=~~Ae,me=me===void 0?Xe:~~me,Ae<0?(Ae+=Xe,Ae<0&&(Ae=0)):Ae>Xe&&(Ae=Xe),me<0?(me+=Xe,me<0&&(me=0)):me>Xe&&(me=Xe),me<Ae&&(me=Ae);const Et=this.subarray(Ae,me);return Object.setPrototypeOf(Et,o.prototype),Et};function Ne(Ge,Ae,me){if(Ge%1!==0||Ge<0)throw new RangeError("offset is not uint");if(Ge+Ae>me)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(Ae,me,Xe){Ae=Ae>>>0,me=me>>>0,Xe||Ne(Ae,me,this.length);let Et=this[Ae],Yt=1,nn=0;for(;++nn<me&&(Yt*=256);)Et+=this[Ae+nn]*Yt;return Et},o.prototype.readUintBE=o.prototype.readUIntBE=function(Ae,me,Xe){Ae=Ae>>>0,me=me>>>0,Xe||Ne(Ae,me,this.length);let Et=this[Ae+--me],Yt=1;for(;me>0&&(Yt*=256);)Et+=this[Ae+--me]*Yt;return Et},o.prototype.readUint8=o.prototype.readUInt8=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,1,this.length),this[Ae]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,2,this.length),this[Ae]|this[Ae+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,2,this.length),this[Ae]<<8|this[Ae+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,4,this.length),(this[Ae]|this[Ae+1]<<8|this[Ae+2]<<16)+this[Ae+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,4,this.length),this[Ae]*16777216+(this[Ae+1]<<16|this[Ae+2]<<8|this[Ae+3])},o.prototype.readBigUInt64LE=Qn(function(Ae){Ae=Ae>>>0,dt(Ae,"offset");const me=this[Ae],Xe=this[Ae+7];(me===void 0||Xe===void 0)&&Ut(Ae,this.length-8);const Et=me+this[++Ae]*2**8+this[++Ae]*2**16+this[++Ae]*2**24,Yt=this[++Ae]+this[++Ae]*2**8+this[++Ae]*2**16+Xe*2**24;return BigInt(Et)+(BigInt(Yt)<<BigInt(32))}),o.prototype.readBigUInt64BE=Qn(function(Ae){Ae=Ae>>>0,dt(Ae,"offset");const me=this[Ae],Xe=this[Ae+7];(me===void 0||Xe===void 0)&&Ut(Ae,this.length-8);const Et=me*2**24+this[++Ae]*2**16+this[++Ae]*2**8+this[++Ae],Yt=this[++Ae]*2**24+this[++Ae]*2**16+this[++Ae]*2**8+Xe;return(BigInt(Et)<<BigInt(32))+BigInt(Yt)}),o.prototype.readIntLE=function(Ae,me,Xe){Ae=Ae>>>0,me=me>>>0,Xe||Ne(Ae,me,this.length);let Et=this[Ae],Yt=1,nn=0;for(;++nn<me&&(Yt*=256);)Et+=this[Ae+nn]*Yt;return Yt*=128,Et>=Yt&&(Et-=Math.pow(2,8*me)),Et},o.prototype.readIntBE=function(Ae,me,Xe){Ae=Ae>>>0,me=me>>>0,Xe||Ne(Ae,me,this.length);let Et=me,Yt=1,nn=this[Ae+--Et];for(;Et>0&&(Yt*=256);)nn+=this[Ae+--Et]*Yt;return Yt*=128,nn>=Yt&&(nn-=Math.pow(2,8*me)),nn},o.prototype.readInt8=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,1,this.length),this[Ae]&128?(255-this[Ae]+1)*-1:this[Ae]},o.prototype.readInt16LE=function(Ae,me){Ae=Ae>>>0,me||Ne(Ae,2,this.length);const Xe=this[Ae]|this[Ae+1]<<8;return Xe&32768?Xe|4294901760:Xe},o.prototype.readInt16BE=function(Ae,me){Ae=Ae>>>0,me||Ne(Ae,2,this.length);const Xe=this[Ae+1]|this[Ae]<<8;return Xe&32768?Xe|4294901760:Xe},o.prototype.readInt32LE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,4,this.length),this[Ae]|this[Ae+1]<<8|this[Ae+2]<<16|this[Ae+3]<<24},o.prototype.readInt32BE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,4,this.length),this[Ae]<<24|this[Ae+1]<<16|this[Ae+2]<<8|this[Ae+3]},o.prototype.readBigInt64LE=Qn(function(Ae){Ae=Ae>>>0,dt(Ae,"offset");const me=this[Ae],Xe=this[Ae+7];(me===void 0||Xe===void 0)&&Ut(Ae,this.length-8);const Et=this[Ae+4]+this[Ae+5]*2**8+this[Ae+6]*2**16+(Xe<<24);return(BigInt(Et)<<BigInt(32))+BigInt(me+this[++Ae]*2**8+this[++Ae]*2**16+this[++Ae]*2**24)}),o.prototype.readBigInt64BE=Qn(function(Ae){Ae=Ae>>>0,dt(Ae,"offset");const me=this[Ae],Xe=this[Ae+7];(me===void 0||Xe===void 0)&&Ut(Ae,this.length-8);const Et=(me<<24)+this[++Ae]*2**16+this[++Ae]*2**8+this[++Ae];return(BigInt(Et)<<BigInt(32))+BigInt(this[++Ae]*2**24+this[++Ae]*2**16+this[++Ae]*2**8+Xe)}),o.prototype.readFloatLE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,4,this.length),t.read(this,Ae,!0,23,4)},o.prototype.readFloatBE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,4,this.length),t.read(this,Ae,!1,23,4)},o.prototype.readDoubleLE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,8,this.length),t.read(this,Ae,!0,52,8)},o.prototype.readDoubleBE=function(Ae,me){return Ae=Ae>>>0,me||Ne(Ae,8,this.length),t.read(this,Ae,!1,52,8)};function at(Ge,Ae,me,Xe,Et,Yt){if(!o.isBuffer(Ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ae>Et||Ae<Yt)throw new RangeError('"value" argument is out of bounds');if(me+Xe>Ge.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(Ae,me,Xe,Et){if(Ae=+Ae,me=me>>>0,Xe=Xe>>>0,!Et){const rr=Math.pow(2,8*Xe)-1;at(this,Ae,me,Xe,rr,0)}let Yt=1,nn=0;for(this[me]=Ae&255;++nn<Xe&&(Yt*=256);)this[me+nn]=Ae/Yt&255;return me+Xe},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(Ae,me,Xe,Et){if(Ae=+Ae,me=me>>>0,Xe=Xe>>>0,!Et){const rr=Math.pow(2,8*Xe)-1;at(this,Ae,me,Xe,rr,0)}let Yt=Xe-1,nn=1;for(this[me+Yt]=Ae&255;--Yt>=0&&(nn*=256);)this[me+Yt]=Ae/nn&255;return me+Xe},o.prototype.writeUint8=o.prototype.writeUInt8=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,1,255,0),this[me]=Ae&255,me+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,2,65535,0),this[me]=Ae&255,this[me+1]=Ae>>>8,me+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,2,65535,0),this[me]=Ae>>>8,this[me+1]=Ae&255,me+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,4,4294967295,0),this[me+3]=Ae>>>24,this[me+2]=Ae>>>16,this[me+1]=Ae>>>8,this[me]=Ae&255,me+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,4,4294967295,0),this[me]=Ae>>>24,this[me+1]=Ae>>>16,this[me+2]=Ae>>>8,this[me+3]=Ae&255,me+4};function wt(Ge,Ae,me,Xe,Et){yt(Ae,Xe,Et,Ge,me,7);let Yt=Number(Ae&BigInt(4294967295));Ge[me++]=Yt,Yt=Yt>>8,Ge[me++]=Yt,Yt=Yt>>8,Ge[me++]=Yt,Yt=Yt>>8,Ge[me++]=Yt;let nn=Number(Ae>>BigInt(32)&BigInt(4294967295));return Ge[me++]=nn,nn=nn>>8,Ge[me++]=nn,nn=nn>>8,Ge[me++]=nn,nn=nn>>8,Ge[me++]=nn,me}function Ct(Ge,Ae,me,Xe,Et){yt(Ae,Xe,Et,Ge,me,7);let Yt=Number(Ae&BigInt(4294967295));Ge[me+7]=Yt,Yt=Yt>>8,Ge[me+6]=Yt,Yt=Yt>>8,Ge[me+5]=Yt,Yt=Yt>>8,Ge[me+4]=Yt;let nn=Number(Ae>>BigInt(32)&BigInt(4294967295));return Ge[me+3]=nn,nn=nn>>8,Ge[me+2]=nn,nn=nn>>8,Ge[me+1]=nn,nn=nn>>8,Ge[me]=nn,me+8}o.prototype.writeBigUInt64LE=Qn(function(Ae,me=0){return wt(this,Ae,me,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Qn(function(Ae,me=0){return Ct(this,Ae,me,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(Ae,me,Xe,Et){if(Ae=+Ae,me=me>>>0,!Et){const Ee=Math.pow(2,8*Xe-1);at(this,Ae,me,Xe,Ee-1,-Ee)}let Yt=0,nn=1,rr=0;for(this[me]=Ae&255;++Yt<Xe&&(nn*=256);)Ae<0&&rr===0&&this[me+Yt-1]!==0&&(rr=1),this[me+Yt]=(Ae/nn>>0)-rr&255;return me+Xe},o.prototype.writeIntBE=function(Ae,me,Xe,Et){if(Ae=+Ae,me=me>>>0,!Et){const Ee=Math.pow(2,8*Xe-1);at(this,Ae,me,Xe,Ee-1,-Ee)}let Yt=Xe-1,nn=1,rr=0;for(this[me+Yt]=Ae&255;--Yt>=0&&(nn*=256);)Ae<0&&rr===0&&this[me+Yt+1]!==0&&(rr=1),this[me+Yt]=(Ae/nn>>0)-rr&255;return me+Xe},o.prototype.writeInt8=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,1,127,-128),Ae<0&&(Ae=255+Ae+1),this[me]=Ae&255,me+1},o.prototype.writeInt16LE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,2,32767,-32768),this[me]=Ae&255,this[me+1]=Ae>>>8,me+2},o.prototype.writeInt16BE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,2,32767,-32768),this[me]=Ae>>>8,this[me+1]=Ae&255,me+2},o.prototype.writeInt32LE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,4,2147483647,-2147483648),this[me]=Ae&255,this[me+1]=Ae>>>8,this[me+2]=Ae>>>16,this[me+3]=Ae>>>24,me+4},o.prototype.writeInt32BE=function(Ae,me,Xe){return Ae=+Ae,me=me>>>0,Xe||at(this,Ae,me,4,2147483647,-2147483648),Ae<0&&(Ae=4294967295+Ae+1),this[me]=Ae>>>24,this[me+1]=Ae>>>16,this[me+2]=Ae>>>8,this[me+3]=Ae&255,me+4},o.prototype.writeBigInt64LE=Qn(function(Ae,me=0){return wt(this,Ae,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Qn(function(Ae,me=0){return Ct(this,Ae,me,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ft(Ge,Ae,me,Xe,Et,Yt){if(me+Xe>Ge.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("Index out of range")}function Lt(Ge,Ae,me,Xe,Et){return Ae=+Ae,me=me>>>0,Et||ft(Ge,Ae,me,4),t.write(Ge,Ae,me,Xe,23,4),me+4}o.prototype.writeFloatLE=function(Ae,me,Xe){return Lt(this,Ae,me,!0,Xe)},o.prototype.writeFloatBE=function(Ae,me,Xe){return Lt(this,Ae,me,!1,Xe)};function Kt(Ge,Ae,me,Xe,Et){return Ae=+Ae,me=me>>>0,Et||ft(Ge,Ae,me,8),t.write(Ge,Ae,me,Xe,52,8),me+8}o.prototype.writeDoubleLE=function(Ae,me,Xe){return Kt(this,Ae,me,!0,Xe)},o.prototype.writeDoubleBE=function(Ae,me,Xe){return Kt(this,Ae,me,!1,Xe)},o.prototype.copy=function(Ae,me,Xe,Et){if(!o.isBuffer(Ae))throw new TypeError("argument should be a Buffer");if(Xe||(Xe=0),!Et&&Et!==0&&(Et=this.length),me>=Ae.length&&(me=Ae.length),me||(me=0),Et>0&&Et<Xe&&(Et=Xe),Et===Xe||Ae.length===0||this.length===0)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(Xe<0||Xe>=this.length)throw new RangeError("Index out of range");if(Et<0)throw new RangeError("sourceEnd out of bounds");Et>this.length&&(Et=this.length),Ae.length-me<Et-Xe&&(Et=Ae.length-me+Xe);const Yt=Et-Xe;return this===Ae&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(me,Xe,Et):Uint8Array.prototype.set.call(Ae,this.subarray(Xe,Et),me),Yt},o.prototype.fill=function(Ae,me,Xe,Et){if(typeof Ae=="string"){if(typeof me=="string"?(Et=me,me=0,Xe=this.length):typeof Xe=="string"&&(Et=Xe,Xe=this.length),Et!==void 0&&typeof Et!="string")throw new TypeError("encoding must be a string");if(typeof Et=="string"&&!o.isEncoding(Et))throw new TypeError("Unknown encoding: "+Et);if(Ae.length===1){const nn=Ae.charCodeAt(0);(Et==="utf8"&&nn<128||Et==="latin1")&&(Ae=nn)}}else typeof Ae=="number"?Ae=Ae&255:typeof Ae=="boolean"&&(Ae=Number(Ae));if(me<0||this.length<me||this.length<Xe)throw new RangeError("Out of range index");if(Xe<=me)return this;me=me>>>0,Xe=Xe===void 0?this.length:Xe>>>0,Ae||(Ae=0);let Yt;if(typeof Ae=="number")for(Yt=me;Yt<Xe;++Yt)this[Yt]=Ae;else{const nn=o.isBuffer(Ae)?Ae:o.from(Ae,Et),rr=nn.length;if(rr===0)throw new TypeError('The value "'+Ae+'" is invalid for argument "value"');for(Yt=0;Yt<Xe-me;++Yt)this[Yt+me]=nn[Yt%rr]}return this};const Fe={};function Te(Ge,Ae,me){Fe[Ge]=class extends me{constructor(){super(),Object.defineProperty(this,"message",{value:Ae.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ge}]`,this.stack,delete this.name}get code(){return Ge}set code(Et){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Et,writable:!0})}toString(){return`${this.name} [${Ge}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(Ge){return Ge?`${Ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(Ge,Ae){return`The "${Ge}" argument must be of type number. Received type ${typeof Ae}`},TypeError),Te("ERR_OUT_OF_RANGE",function(Ge,Ae,me){let Xe=`The value of "${Ge}" is out of range.`,Et=me;return Number.isInteger(me)&&Math.abs(me)>2**32?Et=Se(String(me)):typeof me=="bigint"&&(Et=String(me),(me>BigInt(2)**BigInt(32)||me<-(BigInt(2)**BigInt(32)))&&(Et=Se(Et)),Et+="n"),Xe+=` It must be ${Ae}. Received ${Et}`,Xe},RangeError);function Se(Ge){let Ae="",me=Ge.length;const Xe=Ge[0]==="-"?1:0;for(;me>=Xe+4;me-=3)Ae=`_${Ge.slice(me-3,me)}${Ae}`;return`${Ge.slice(0,me)}${Ae}`}function Je(Ge,Ae,me){dt(Ae,"offset"),(Ge[Ae]===void 0||Ge[Ae+me]===void 0)&&Ut(Ae,Ge.length-(me+1))}function yt(Ge,Ae,me,Xe,Et,Yt){if(Ge>me||Ge<Ae){const nn=typeof Ae=="bigint"?"n":"";let rr;throw Ae===0||Ae===BigInt(0)?rr=`>= 0${nn} and < 2${nn} ** ${(Yt+1)*8}${nn}`:rr=`>= -(2${nn} ** ${(Yt+1)*8-1}${nn}) and < 2 ** ${(Yt+1)*8-1}${nn}`,new Fe.ERR_OUT_OF_RANGE("value",rr,Ge)}Je(Xe,Et,Yt)}function dt(Ge,Ae){if(typeof Ge!="number")throw new Fe.ERR_INVALID_ARG_TYPE(Ae,"number",Ge)}function Ut(Ge,Ae,me){throw Math.floor(Ge)!==Ge?(dt(Ge,me),new Fe.ERR_OUT_OF_RANGE("offset","an integer",Ge)):Ae<0?new Fe.ERR_BUFFER_OUT_OF_BOUNDS:new Fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Ae}`,Ge)}const en=/[^+/0-9A-Za-z-_]/g;function Nt(Ge){if(Ge=Ge.split("=")[0],Ge=Ge.trim().replace(en,""),Ge.length<2)return"";for(;Ge.length%4!==0;)Ge=Ge+"=";return Ge}function yn(Ge,Ae){Ae=Ae||1/0;let me;const Xe=Ge.length;let Et=null;const Yt=[];for(let nn=0;nn<Xe;++nn){if(me=Ge.charCodeAt(nn),me>55295&&me<57344){if(!Et){if(me>56319){(Ae-=3)>-1&&Yt.push(239,191,189);continue}else if(nn+1===Xe){(Ae-=3)>-1&&Yt.push(239,191,189);continue}Et=me;continue}if(me<56320){(Ae-=3)>-1&&Yt.push(239,191,189),Et=me;continue}me=(Et-55296<<10|me-56320)+65536}else Et&&(Ae-=3)>-1&&Yt.push(239,191,189);if(Et=null,me<128){if((Ae-=1)<0)break;Yt.push(me)}else if(me<2048){if((Ae-=2)<0)break;Yt.push(me>>6|192,me&63|128)}else if(me<65536){if((Ae-=3)<0)break;Yt.push(me>>12|224,me>>6&63|128,me&63|128)}else if(me<1114112){if((Ae-=4)<0)break;Yt.push(me>>18|240,me>>12&63|128,me>>6&63|128,me&63|128)}else throw new Error("Invalid code point")}return Yt}function jn(Ge){const Ae=[];for(let me=0;me<Ge.length;++me)Ae.push(Ge.charCodeAt(me)&255);return Ae}function Rr(Ge,Ae){let me,Xe,Et;const Yt=[];for(let nn=0;nn<Ge.length&&!((Ae-=2)<0);++nn)me=Ge.charCodeAt(nn),Xe=me>>8,Et=me%256,Yt.push(Et),Yt.push(Xe);return Yt}function sr(Ge){return e.toByteArray(Nt(Ge))}function Jn(Ge,Ae,me,Xe){let Et;for(Et=0;Et<Xe&&!(Et+me>=Ae.length||Et>=Ge.length);++Et)Ae[Et+me]=Ge[Et];return Et}function mr(Ge,Ae){return Ge instanceof Ae||Ge!=null&&Ge.constructor!=null&&Ge.constructor.name!=null&&Ge.constructor.name===Ae.name}function pr(Ge){return Ge!==Ge}const xr=function(){const Ge="0123456789abcdef",Ae=new Array(256);for(let me=0;me<16;++me){const Xe=me*16;for(let Et=0;Et<16;++Et)Ae[Xe+Et]=Ge[me]+Ge[Et]}return Ae}();function Qn(Ge){return typeof BigInt>"u"?Er:Ge}function Er(){throw new Error("BigInt not supported")}}(j3)),j3}var Cq=_q();const bq=La(Cq);var N3,j8;function xq(){if(j8)return N3;j8=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,o=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/[\\^$.*+?()[\]{}|]/g,b=/\\(\\)?/g,E=/^\[object .+?Constructor\]$/,S=typeof window=="object"&&window&&window.Object===Object&&window,O=typeof self=="object"&&self&&self.Object===Object&&self,k=S||O||Function("return this")();function U(oe,ve){return oe==null?void 0:oe[ve]}function z(oe){var ve=!1;if(oe!=null&&typeof oe.toString!="function")try{ve=!!(oe+"")}catch{}return ve}var q=Array.prototype,Q=Function.prototype,re=Object.prototype,X=k["__core-js_shared__"],Y=function(){var oe=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return oe?"Symbol(src)_1."+oe:""}(),J=Q.toString,N=re.hasOwnProperty,ie=re.toString,he=RegExp("^"+J.call(N).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),de=k.Symbol,we=q.splice,fe=sr(k,"Map"),be=sr(Object,"create"),Pe=de?de.prototype:void 0,pe=Pe?Pe.toString:void 0;function it(oe){var ve=-1,p=oe?oe.length:0;for(this.clear();++ve<p;){var ze=oe[ve];this.set(ze[0],ze[1])}}function We(){this.__data__=be?be(null):{}}function $e(oe){return this.has(oe)&&delete this.__data__[oe]}function ht(oe){var ve=this.__data__;if(be){var p=ve[oe];return p===e?void 0:p}return N.call(ve,oe)?ve[oe]:void 0}function De(oe){var ve=this.__data__;return be?ve[oe]!==void 0:N.call(ve,oe)}function Ne(oe,ve){var p=this.__data__;return p[oe]=be&&ve===void 0?e:ve,this}it.prototype.clear=We,it.prototype.delete=$e,it.prototype.get=ht,it.prototype.has=De,it.prototype.set=Ne;function at(oe){var ve=-1,p=oe?oe.length:0;for(this.clear();++ve<p;){var ze=oe[ve];this.set(ze[0],ze[1])}}function wt(){this.__data__=[]}function Ct(oe){var ve=this.__data__,p=Ut(ve,oe);if(p<0)return!1;var ze=ve.length-1;return p==ze?ve.pop():we.call(ve,p,1),!0}function ft(oe){var ve=this.__data__,p=Ut(ve,oe);return p<0?void 0:ve[p][1]}function Lt(oe){return Ut(this.__data__,oe)>-1}function Kt(oe,ve){var p=this.__data__,ze=Ut(p,oe);return ze<0?p.push([oe,ve]):p[ze][1]=ve,this}at.prototype.clear=wt,at.prototype.delete=Ct,at.prototype.get=ft,at.prototype.has=Lt,at.prototype.set=Kt;function Fe(oe){var ve=-1,p=oe?oe.length:0;for(this.clear();++ve<p;){var ze=oe[ve];this.set(ze[0],ze[1])}}function Te(){this.__data__={hash:new it,map:new(fe||at),string:new it}}function Se(oe){return Rr(this,oe).delete(oe)}function Je(oe){return Rr(this,oe).get(oe)}function yt(oe){return Rr(this,oe).has(oe)}function dt(oe,ve){return Rr(this,oe).set(oe,ve),this}Fe.prototype.clear=Te,Fe.prototype.delete=Se,Fe.prototype.get=Je,Fe.prototype.has=yt,Fe.prototype.set=dt;function Ut(oe,ve){for(var p=oe.length;p--;)if(Ae(oe[p][0],ve))return p;return-1}function en(oe,ve){ve=Jn(ve,oe)?[ve]:jn(ve);for(var p=0,ze=ve.length;oe!=null&&p<ze;)oe=oe[Qn(ve[p++])];return p&&p==ze?oe:void 0}function Nt(oe){if(!Et(oe)||pr(oe))return!1;var ve=Xe(oe)||z(oe)?he:E;return ve.test(Er(oe))}function yn(oe){if(typeof oe=="string")return oe;if(nn(oe))return pe?pe.call(oe):"";var ve=oe+"";return ve=="0"&&1/oe==-1/0?"-0":ve}function jn(oe){return me(oe)?oe:xr(oe)}function Rr(oe,ve){var p=oe.__data__;return mr(ve)?p[typeof ve=="string"?"string":"hash"]:p.map}function sr(oe,ve){var p=U(oe,ve);return Nt(p)?p:void 0}function Jn(oe,ve){if(me(oe))return!1;var p=typeof oe;return p=="number"||p=="symbol"||p=="boolean"||oe==null||nn(oe)?!0:a.test(oe)||!s.test(oe)||ve!=null&&oe in Object(ve)}function mr(oe){var ve=typeof oe;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?oe!=="__proto__":oe===null}function pr(oe){return!!Y&&Y in oe}var xr=Ge(function(oe){oe=rr(oe);var ve=[];return o.test(oe)&&ve.push(""),oe.replace(d,function(p,ze,rt,pt){ve.push(rt?pt.replace(b,"$1"):ze||p)}),ve});function Qn(oe){if(typeof oe=="string"||nn(oe))return oe;var ve=oe+"";return ve=="0"&&1/oe==-1/0?"-0":ve}function Er(oe){if(oe!=null){try{return J.call(oe)}catch{}try{return oe+""}catch{}}return""}function Ge(oe,ve){if(typeof oe!="function"||ve&&typeof ve!="function")throw new TypeError(n);var p=function(){var ze=arguments,rt=ve?ve.apply(this,ze):ze[0],pt=p.cache;if(pt.has(rt))return pt.get(rt);var Bt=oe.apply(this,ze);return p.cache=pt.set(rt,Bt),Bt};return p.cache=new(Ge.Cache||Fe),p}Ge.Cache=Fe;function Ae(oe,ve){return oe===ve||oe!==oe&&ve!==ve}var me=Array.isArray;function Xe(oe){var ve=Et(oe)?ie.call(oe):"";return ve==t||ve==r}function Et(oe){var ve=typeof oe;return!!oe&&(ve=="object"||ve=="function")}function Yt(oe){return!!oe&&typeof oe=="object"}function nn(oe){return typeof oe=="symbol"||Yt(oe)&&ie.call(oe)==i}function rr(oe){return oe==null?"":yn(oe)}function Ee(oe,ve,p){var ze=oe==null?void 0:en(oe,ve);return ze===void 0?p:ze}return N3=Ee,N3}var wq=xq();const Mq=La(wq);var yv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Sq=yv.exports,N8;function Eq(){return N8||(N8=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",g=500,b="__lodash_placeholder__",E=1,S=2,O=4,k=1,U=2,z=1,q=2,Q=4,re=8,X=16,Y=32,J=64,N=128,ie=256,he=512,de=30,we="...",fe=800,be=16,Pe=1,pe=2,it=3,We=1/0,$e=9007199254740991,ht=17976931348623157e292,De=NaN,Ne=4294967295,at=Ne-1,wt=Ne>>>1,Ct=[["ary",N],["bind",z],["bindKey",q],["curry",re],["curryRight",X],["flip",he],["partial",Y],["partialRight",J],["rearg",ie]],ft="[object Arguments]",Lt="[object Array]",Kt="[object AsyncFunction]",Fe="[object Boolean]",Te="[object Date]",Se="[object DOMException]",Je="[object Error]",yt="[object Function]",dt="[object GeneratorFunction]",Ut="[object Map]",en="[object Number]",Nt="[object Null]",yn="[object Object]",jn="[object Promise]",Rr="[object Proxy]",sr="[object RegExp]",Jn="[object Set]",mr="[object String]",pr="[object Symbol]",xr="[object Undefined]",Qn="[object WeakMap]",Er="[object WeakSet]",Ge="[object ArrayBuffer]",Ae="[object DataView]",me="[object Float32Array]",Xe="[object Float64Array]",Et="[object Int8Array]",Yt="[object Int16Array]",nn="[object Int32Array]",rr="[object Uint8Array]",Ee="[object Uint8ClampedArray]",oe="[object Uint16Array]",ve="[object Uint32Array]",p=/\b__p \+= '';/g,ze=/\b(__p \+=) '' \+/g,rt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39);/g,Bt=/[&<>"']/g,vt=RegExp(pt.source),Xt=RegExp(Bt.source),tn=/<%-([\s\S]+?)%>/g,zt=/<%([\s\S]+?)%>/g,_t=/<%=([\s\S]+?)%>/g,Tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sn=/^\w*$/,Ar=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wr=/[\\^$.*+?()[\]{}|]/g,rn=RegExp(wr.source),Fn=/^\s+/,Rn=/\s/,Br=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mr=/\{\n\/\* \[wrapped with (.+)\] \*/,Kr=/,? & /,ir=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,co=/[()=,{}\[\]\/\s]/,Sa=/\\(\\)?/g,qi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yi=/\w*$/,oo=/^[-+]0x[0-9a-f]+$/i,Mo=/^0b[01]+$/i,Ti=/^\[object .+?Constructor\]$/,Ua=/^0o[0-7]+$/i,Ea=/^(?:0|[1-9]\d*)$/,ns=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Aa=/($^)/,Al=/['\n\r\u2028\u2029\\]/g,ao="\\ud800-\\udfff",Pu="\\u0300-\\u036f",tu="\\ufe20-\\ufe2f",so="\\u20d0-\\u20ff",Dr=Pu+tu+so,Za="\\u2700-\\u27bf",Ps="a-z\\xdf-\\xf6\\xf8-\\xff",ia="\\xac\\xb1\\xd7\\xf7",Qe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bt="\\u2000-\\u206f",fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nn="A-Z\\xc0-\\xd6\\xd8-\\xde",un="\\ufe0e\\ufe0f",er=ia+Qe+bt+fn,Pi="[']",ho="["+ao+"]",_s="["+er+"]",Ns="["+Dr+"]",vA="\\d+",ri="["+Za+"]",wi="["+Ps+"]",Xa="[^"+ao+er+vA+Za+Ps+Nn+"]",Ai="\\ud83c[\\udffb-\\udfff]",ca="(?:"+Ns+"|"+Ai+")",iA="[^"+ao+"]",ls="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ei="["+Nn+"]",Ja="\\u200d",Rs="(?:"+wi+"|"+Xa+")",So="(?:"+Ei+"|"+Xa+")",Gs="(?:"+Pi+"(?:d|ll|m|re|s|t|ve))?",hu="(?:"+Pi+"(?:D|LL|M|RE|S|T|VE))?",zl=ca+"?",rs="["+un+"]?",Vs="(?:"+Ja+"(?:"+[iA,ls,Lr].join("|")+")"+rs+zl+")*",fo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ms="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ms=rs+zl+Vs,el="(?:"+[ri,ls,Lr].join("|")+")"+Ms,Ks="(?:"+[iA+Ns+"?",Ns,ls,Lr,ho].join("|")+")",El=RegExp(Pi,"g"),oA=RegExp(Ns,"g"),Vi=RegExp(Ai+"(?="+Ai+")|"+Ks+Ms,"g"),nu=RegExp([Ei+"?"+wi+"+"+Gs+"(?="+[_s,Ei,"$"].join("|")+")",So+"+"+hu+"(?="+[_s,Ei+Rs,"$"].join("|")+")",Ei+"?"+Rs+"+"+Gs,Ei+"+"+hu,ms,fo,vA,el].join("|"),"g"),Ui=RegExp("["+Ja+ao+Dr+un+"]"),Jr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ru=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ni=-1,lo={};lo[me]=lo[Xe]=lo[Et]=lo[Yt]=lo[nn]=lo[rr]=lo[Ee]=lo[oe]=lo[ve]=!0,lo[ft]=lo[Lt]=lo[Ge]=lo[Fe]=lo[Ae]=lo[Te]=lo[Je]=lo[yt]=lo[Ut]=lo[en]=lo[yn]=lo[sr]=lo[Jn]=lo[mr]=lo[Qn]=!1;var Ri={};Ri[ft]=Ri[Lt]=Ri[Ge]=Ri[Ae]=Ri[Fe]=Ri[Te]=Ri[me]=Ri[Xe]=Ri[Et]=Ri[Yt]=Ri[nn]=Ri[Ut]=Ri[en]=Ri[yn]=Ri[sr]=Ri[Jn]=Ri[mr]=Ri[pr]=Ri[rr]=Ri[Ee]=Ri[oe]=Ri[ve]=!0,Ri[Je]=Ri[yt]=Ri[Qn]=!1;var ee={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Or=parseFloat,Gn=parseInt,si=typeof window=="object"&&window&&window.Object===Object&&window,ci=typeof self=="object"&&self&&self.Object===Object&&self,gr=si||ci||Function("return this")(),Ir=e&&!e.nodeType&&e,vi=Ir&&!0&&n&&!n.nodeType&&n,Eo=vi&&vi.exports===Ir,ki=Eo&&si.process,qr=function(){try{var $t=vi&&vi.require&&vi.require("util").types;return $t||ki&&ki.binding&&ki.binding("util")}catch{}}(),Hi=qr&&qr.isArrayBuffer,Zi=qr&&qr.isDate,us=qr&&qr.isMap,ya=qr&&qr.isRegExp,za=qr&&qr.isSet,fu=qr&&qr.isTypedArray;function Hs($t,kn,sn){switch(sn.length){case 0:return $t.call(kn);case 1:return $t.call(kn,sn[0]);case 2:return $t.call(kn,sn[0],sn[1]);case 3:return $t.call(kn,sn[0],sn[1],sn[2])}return $t.apply(kn,sn)}function dc($t,kn,sn,Ur){for(var _i=-1,Co=$t==null?0:$t.length;++_i<Co;){var oa=$t[_i];kn(Ur,oa,sn(oa),$t)}return Ur}function Ba($t,kn){for(var sn=-1,Ur=$t==null?0:$t.length;++sn<Ur&&kn($t[sn],sn,$t)!==!1;);return $t}function cl($t,kn){for(var sn=$t==null?0:$t.length;sn--&&kn($t[sn],sn,$t)!==!1;);return $t}function ld($t,kn){for(var sn=-1,Ur=$t==null?0:$t.length;++sn<Ur;)if(!kn($t[sn],sn,$t))return!1;return!0}function Ru($t,kn){for(var sn=-1,Ur=$t==null?0:$t.length,_i=0,Co=[];++sn<Ur;){var oa=$t[sn];kn(oa,sn,$t)&&(Co[_i++]=oa)}return Co}function Ku($t,kn){var sn=$t==null?0:$t.length;return!!sn&&Zs($t,kn,0)>-1}function bh($t,kn,sn){for(var Ur=-1,_i=$t==null?0:$t.length;++Ur<_i;)if(sn(kn,$t[Ur]))return!0;return!1}function Ss($t,kn){for(var sn=-1,Ur=$t==null?0:$t.length,_i=Array(Ur);++sn<Ur;)_i[sn]=kn($t[sn],sn,$t);return _i}function Du($t,kn){for(var sn=-1,Ur=kn.length,_i=$t.length;++sn<Ur;)$t[_i+sn]=kn[sn];return $t}function ud($t,kn,sn,Ur){var _i=-1,Co=$t==null?0:$t.length;for(Ur&&Co&&(sn=$t[++_i]);++_i<Co;)sn=kn(sn,$t[_i],_i,$t);return sn}function gp($t,kn,sn,Ur){var _i=$t==null?0:$t.length;for(Ur&&_i&&(sn=$t[--_i]);_i--;)sn=kn(sn,$t[_i],_i,$t);return sn}function sA($t,kn){for(var sn=-1,Ur=$t==null?0:$t.length;++sn<Ur;)if(kn($t[sn],sn,$t))return!0;return!1}var qd=tf("length");function Lc($t){return $t.split("")}function yp($t){return $t.match(ir)||[]}function Rf($t,kn,sn){var Ur;return sn($t,function(_i,Co,oa){if(kn(_i,Co,oa))return Ur=Co,!1}),Ur}function hc($t,kn,sn,Ur){for(var _i=$t.length,Co=sn+(Ur?1:-1);Ur?Co--:++Co<_i;)if(kn($t[Co],Co,$t))return Co;return-1}function Zs($t,kn,sn){return kn===kn?Eh($t,kn,sn):hc($t,ef,sn)}function xh($t,kn,sn,Ur){for(var _i=sn-1,Co=$t.length;++_i<Co;)if(Ur($t[_i],kn))return _i;return-1}function ef($t){return $t!==$t}function Ad($t,kn){var sn=$t==null?0:$t.length;return sn?Mh($t,kn)/sn:De}function tf($t){return function(kn){return kn==null?t:kn[$t]}}function cd($t){return function(kn){return $t==null?t:$t[kn]}}function fc($t,kn,sn,Ur,_i){return _i($t,function(Co,oa,Vo){sn=Ur?(Ur=!1,Co):kn(sn,Co,oa,Vo)}),sn}function wh($t,kn){var sn=$t.length;for($t.sort(kn);sn--;)$t[sn]=$t[sn].value;return $t}function Mh($t,kn){for(var sn,Ur=-1,_i=$t.length;++Ur<_i;){var Co=kn($t[Ur]);Co!==t&&(sn=sn===t?Co:sn+Co)}return sn}function dd($t,kn){for(var sn=-1,Ur=Array($t);++sn<$t;)Ur[sn]=kn(sn);return Ur}function am($t,kn){return Ss(kn,function(sn){return[sn,$t[sn]]})}function Fc($t){return $t&&$t.slice(0,$d($t)+1).replace(Fn,"")}function pu($t){return function(kn){return $t(kn)}}function Sh($t,kn){return Ss(kn,function(sn){return $t[sn]})}function mu($t,kn){return $t.has(kn)}function aA($t,kn){for(var sn=-1,Ur=$t.length;++sn<Ur&&Zs(kn,$t[sn],0)>-1;);return sn}function Uc($t,kn){for(var sn=$t.length;sn--&&Zs(kn,$t[sn],0)>-1;);return sn}function Yd($t,kn){for(var sn=$t.length,Ur=0;sn--;)$t[sn]===kn&&++Ur;return Ur}var nf=cd(ee),iu=cd(Be);function Bl($t){return"\\"+qt[$t]}function WA($t,kn){return $t==null?t:$t[kn]}function zc($t){return Ui.test($t)}function rf($t){return Jr.test($t)}function Kf($t){for(var kn,sn=[];!(kn=$t.next()).done;)sn.push(kn.value);return sn}function hd($t){var kn=-1,sn=Array($t.size);return $t.forEach(function(Ur,_i){sn[++kn]=[_i,Ur]}),sn}function _A($t,kn){return function(sn){return $t(kn(sn))}}function tl($t,kn){for(var sn=-1,Ur=$t.length,_i=0,Co=[];++sn<Ur;){var oa=$t[sn];(oa===kn||oa===b)&&($t[sn]=b,Co[_i++]=sn)}return Co}function Ol($t){var kn=-1,sn=Array($t.size);return $t.forEach(function(Ur){sn[++kn]=Ur}),sn}function $o($t){var kn=-1,sn=Array($t.size);return $t.forEach(function(Ur){sn[++kn]=[Ur,Ur]}),sn}function Eh($t,kn,sn){for(var Ur=sn-1,_i=$t.length;++Ur<_i;)if($t[Ur]===kn)return Ur;return-1}function lm($t,kn,sn){for(var Ur=sn+1;Ur--;)if($t[Ur]===kn)return Ur;return Ur}function jc($t){return zc($t)?pc($t):qd($t)}function Lu($t){return zc($t)?Hd($t):Lc($t)}function $d($t){for(var kn=$t.length;kn--&&Rn.test($t.charAt(kn)););return kn}var Vd=cd(tt);function pc($t){for(var kn=Vi.lastIndex=0;Vi.test($t);)++kn;return kn}function Hd($t){return $t.match(Vi)||[]}function of($t){return $t.match(nu)||[]}var mc=function $t(kn){kn=kn==null?gr:gu.defaults(gr.Object(),kn,gu.pick(gr,ru));var sn=kn.Array,Ur=kn.Date,_i=kn.Error,Co=kn.Function,oa=kn.Math,Vo=kn.Object,QA=kn.RegExp,vp=kn.String,Il=kn.TypeError,yu=sn.prototype,qA=Co.prototype,kl=Vo.prototype,Gi=kn["__core-js_shared__"],YA=qA.toString,Uo=kl.hasOwnProperty,Nc=0,$A=function(){var x=/[^.]+$/.exec(Gi&&Gi.keys&&Gi.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),CA=kl.toString,lA=YA.call(Vo),Tl=gr._,gc=QA("^"+YA.call(Uo).replace(wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vu=Eo?kn.Buffer:t,jl=kn.Symbol,Gc=kn.Uint8Array,Zd=vu?vu.allocUnsafe:t,ja=_A(Vo.getPrototypeOf,Vo),fd=Vo.create,yc=kl.propertyIsEnumerable,VA=yu.splice,sf=jl?jl.isConcatSpreadable:t,bA=jl?jl.iterator:t,HA=jl?jl.toStringTag:t,Wc=function(){try{var x=Td(Vo,"defineProperty");return x({},"",{}),x}catch{}}(),Xd=kn.clearTimeout!==gr.clearTimeout&&kn.clearTimeout,Ho=Ur&&Ur.now!==gr.Date.now&&Ur.now,Qc=kn.setTimeout!==gr.setTimeout&&kn.setTimeout,ZA=oa.ceil,Fu=oa.floor,qc=Vo.getOwnPropertySymbols,Jd=vu?vu.isBuffer:t,Yc=kn.isFinite,vc=yu.join,As=_A(Vo.keys,Vo),zo=oa.max,cs=oa.min,Df=Ur.now,pd=kn.parseInt,md=oa.random,Uu=yu.reverse,XA=Td(kn,"DataView"),Nl=Td(kn,"Map"),xA=Td(kn,"Promise"),dl=Td(kn,"Set"),JA=Td(kn,"WeakMap"),zu=Td(Vo,"create"),gd=JA&&new JA,ju={},eh=ba(XA),ec=ba(Nl),Nu=ba(xA),Gu=ba(dl),wA=ba(JA),_c=jl?jl.prototype:t,_u=_c?_c.valueOf:t,$c=_c?_c.toString:t;function et(x){if(xl(x)&&!vo(x)&&!(x instanceof $r)){if(x instanceof Ki)return x;if(Uo.call(x,"__wrapped__"))return Yl(x)}return new Ki(x)}var Na=function(){function x(){}return function(P){if(!bl(P))return{};if(fd)return fd(P);x.prototype=P;var V=new x;return x.prototype=t,V}}();function Bo(){}function Ki(x,P){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=t}et.templateSettings={escape:tn,evaluate:zt,interpolate:_t,variable:"",imports:{_:et}},et.prototype=Bo.prototype,et.prototype.constructor=et,Ki.prototype=Na(Bo.prototype),Ki.prototype.constructor=Ki;function $r(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ne,this.__views__=[]}function Es(){var x=new $r(this.__wrapped__);return x.__actions__=Ta(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=Ta(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=Ta(this.__views__),x}function yd(){if(this.__filtered__){var x=new $r(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function th(){var x=this.__wrapped__.value(),P=this.__dir__,V=vo(x),ye=P<0,Ye=V?x.length:0,lt=cm(0,Ye,this.__views__),Rt=lt.start,Qt=lt.end,on=Qt-Rt,Wn=ye?Qt:Rt-1,qn=this.__iteratees__,cr=qn.length,Zr=0,xi=cs(on,this.__takeCount__);if(!V||!ye&&Ye==on&&xi==on)return pl(x,this.__actions__);var Ji=[];e:for(;on--&&Zr<xi;){Wn+=P;for(var os=-1,eo=x[Wn];++os<cr;){var ws=qn[os],Fs=ws.iteratee,Nh=ws.type,zd=Fs(eo);if(Nh==pe)eo=zd;else if(!zd){if(Nh==Pe)continue e;break e}}Ji[Zr++]=eo}return Ji}$r.prototype=Na(Bo.prototype),$r.prototype.constructor=$r;function Oa(x){var P=-1,V=x==null?0:x.length;for(this.clear();++P<V;){var ye=x[P];this.set(ye[0],ye[1])}}function Ws(){this.__data__=zu?zu(null):{},this.size=0}function Cs(x){var P=this.has(x)&&delete this.__data__[x];return this.size-=P?1:0,P}function uA(x){var P=this.__data__;if(zu){var V=P[x];return V===d?t:V}return Uo.call(P,x)?P[x]:t}function Bs(x){var P=this.__data__;return zu?P[x]!==t:Uo.call(P,x)}function fr(x,P){var V=this.__data__;return this.size+=this.has(x)?0:1,V[x]=zu&&P===t?d:P,this}Oa.prototype.clear=Ws,Oa.prototype.delete=Cs,Oa.prototype.get=uA,Oa.prototype.has=Bs,Oa.prototype.set=fr;function va(x){var P=-1,V=x==null?0:x.length;for(this.clear();++P<V;){var ye=x[P];this.set(ye[0],ye[1])}}function Vc(){this.__data__=[],this.size=0}function Ia(x){var P=this.__data__,V=gs(P,x);if(V<0)return!1;var ye=P.length-1;return V==ye?P.pop():VA.call(P,V,1),--this.size,!0}function tc(x){var P=this.__data__,V=gs(P,x);return V<0?t:P[V][1]}function vd(x){return gs(this.__data__,x)>-1}function _d(x,P){var V=this.__data__,ye=gs(V,x);return ye<0?(++this.size,V.push([x,P])):V[ye][1]=P,this}va.prototype.clear=Vc,va.prototype.delete=Ia,va.prototype.get=tc,va.prototype.has=vd,va.prototype.set=_d;function Mi(x){var P=-1,V=x==null?0:x.length;for(this.clear();++P<V;){var ye=x[P];this.set(ye[0],ye[1])}}function Cd(){this.size=0,this.__data__={hash:new Oa,map:new(Nl||va),string:new Oa}}function Gl(x){var P=Zc(this,x).delete(x);return this.size-=P?1:0,P}function bd(x){return Zc(this,x).get(x)}function xd(x){return Zc(this,x).has(x)}function MA(x,P){var V=Zc(this,x),ye=V.size;return V.set(x,P),this.size+=V.size==ye?0:1,this}Mi.prototype.clear=Cd,Mi.prototype.delete=Gl,Mi.prototype.get=bd,Mi.prototype.has=xd,Mi.prototype.set=MA;function nc(x){var P=-1,V=x==null?0:x.length;for(this.__data__=new Mi;++P<V;)this.add(x[P])}function AA(x){return this.__data__.set(x,d),this}function Cc(x){return this.__data__.has(x)}nc.prototype.add=nc.prototype.push=AA,nc.prototype.has=Cc;function Os(x){var P=this.__data__=new va(x);this.size=P.size}function bo(){this.__data__=new va,this.size=0}function Cu(x){var P=this.__data__,V=P.delete(x);return this.size=P.size,V}function Ga(x){return this.__data__.get(x)}function Ds(x){return this.__data__.has(x)}function Zo(x,P){var V=this.__data__;if(V instanceof va){var ye=V.__data__;if(!Nl||ye.length<i-1)return ye.push([x,P]),this.size=++V.size,this;V=this.__data__=new Mi(ye)}return V.set(x,P),this.size=V.size,this}Os.prototype.clear=bo,Os.prototype.delete=Cu,Os.prototype.get=Ga,Os.prototype.has=Ds,Os.prototype.set=Zo;function ou(x,P){var V=vo(x),ye=!V&&bm(x),Ye=!V&&!ye&&zh(x),lt=!V&&!ye&&!Ye&&Kp(x),Rt=V||ye||Ye||lt,Qt=Rt?dd(x.length,vp):[],on=Qt.length;for(var Wn in x)(P||Uo.call(x,Wn))&&!(Rt&&(Wn=="length"||Ye&&(Wn=="offset"||Wn=="parent")||lt&&(Wn=="buffer"||Wn=="byteLength"||Wn=="byteOffset")||I(Wn,on)))&&Qt.push(Wn);return Qt}function Wu(x){var P=x.length;return P?x[vn(0,P-1)]:t}function bc(x,P){return qa(Ta(x),bu(P,0,x.length))}function nh(x){return qa(Ta(x))}function SA(x,P,V){(V!==t&&!lh(x[P],V)||V===t&&!(P in x))&&Qu(x,P,V)}function xc(x,P,V){var ye=x[P];(!(Uo.call(x,P)&&lh(ye,V))||V===t&&!(P in x))&&Qu(x,P,V)}function gs(x,P){for(var V=x.length;V--;)if(lh(x[V][0],P))return V;return-1}function da(x,P,V,ye){return Po(x,function(Ye,lt,Rt){P(ye,Ye,V(Ye),Rt)}),ye}function hr(x,P){return x&&Au(P,Nr(P),x)}function Hr(x,P){return x&&Au(P,Qr(P),x)}function Qu(x,P,V){P=="__proto__"&&Wc?Wc(x,P,{configurable:!0,enumerable:!0,value:V,writable:!0}):x[P]=V}function rc(x,P){for(var V=-1,ye=P.length,Ye=sn(ye),lt=x==null;++V<ye;)Ye[V]=lt?t:bn(x,P[V]);return Ye}function bu(x,P,V){return x===x&&(V!==t&&(x=x<=V?x:V),P!==t&&(x=x>=P?x:P)),x}function bs(x,P,V,ye,Ye,lt){var Rt,Qt=P&E,on=P&S,Wn=P&O;if(V&&(Rt=Ye?V(x,ye,Ye,lt):V(x)),Rt!==t)return Rt;if(!bl(x))return x;var qn=vo(x);if(qn){if(Rt=cf(x),!Qt)return Ta(x,Rt)}else{var cr=gl(x),Zr=cr==yt||cr==dt;if(zh(x))return xs(x,Qt);if(cr==yn||cr==ft||Zr&&!Ye){if(Rt=on||Zr?{}:il(x),!Qt)return on?_p(x,Hr(Rt,x)):Ed(x,hr(Rt,x))}else{if(!Ri[cr])return Ye?x:{};Rt=Ep(x,cr,Qt)}}lt||(lt=new Os);var xi=lt.get(x);if(xi)return xi;lt.set(x,Rt),t1(x)?x.forEach(function(eo){Rt.add(bs(eo,P,V,eo,x,lt))}):fC(x)&&x.forEach(function(eo,ws){Rt.set(ws,bs(eo,P,V,ws,x,lt))});var Ji=Wn?on?Af:uf:on?Qr:Nr,os=qn?t:Ji(x);return Ba(os||x,function(eo,ws){os&&(ws=eo,eo=x[ws]),xc(Rt,ws,bs(eo,P,V,ws,x,lt))}),Rt}function Lf(x){var P=Nr(x);return function(V){return su(V,x,P)}}function su(x,P,V){var ye=V.length;if(x==null)return!ye;for(x=Vo(x);ye--;){var Ye=V[ye],lt=P[Ye],Rt=x[Ye];if(Rt===t&&!(Ye in x)||!lt(Rt))return!1}return!0}function Ff(x,P,V){if(typeof x!="function")throw new Il(a);return ai(function(){x.apply(t,V)},P)}function xu(x,P,V,ye){var Ye=-1,lt=Ku,Rt=!0,Qt=x.length,on=[],Wn=P.length;if(!Qt)return on;V&&(P=Ss(P,pu(V))),ye?(lt=bh,Rt=!1):P.length>=i&&(lt=mu,Rt=!1,P=new nc(P));e:for(;++Ye<Qt;){var qn=x[Ye],cr=V==null?qn:V(qn);if(qn=ye||qn!==0?qn:0,Rt&&cr===cr){for(var Zr=Wn;Zr--;)if(P[Zr]===cr)continue e;on.push(qn)}else lt(P,cr,ye)||on.push(qn)}return on}var Po=Qa(hl),Is=Qa(qu,!0);function rh(x,P){var V=!0;return Po(x,function(ye,Ye,lt){return V=!!P(ye,Ye,lt),V}),V}function EA(x,P,V){for(var ye=-1,Ye=x.length;++ye<Ye;){var lt=x[ye],Rt=P(lt);if(Rt!=null&&(Qt===t?Rt===Rt&&!KA(Rt):V(Rt,Qt)))var Qt=Rt,on=lt}return on}function ih(x,P,V,ye){var Ye=x.length;for(V=w(V),V<0&&(V=-V>Ye?0:Ye+V),ye=ye===t||ye>Ye?Ye:w(ye),ye<0&&(ye+=Ye),ye=V>ye?0:D(ye);V<ye;)x[V++]=P;return x}function BA(x,P){var V=[];return Po(x,function(ye,Ye,lt){P(ye,Ye,lt)&&V.push(ye)}),V}function Qs(x,P,V,ye,Ye){var lt=-1,Rt=x.length;for(V||(V=y),Ye||(Ye=[]);++lt<Rt;){var Qt=x[lt];P>0&&V(Qt)?P>1?Qs(Qt,P-1,V,ye,Ye):Du(Ye,Qt):ye||(Ye[Ye.length]=Qt)}return Ye}var wc=Cp(),Wl=Cp(!0);function hl(x,P){return x&&wc(x,P,Nr)}function qu(x,P){return x&&Wl(x,P,Nr)}function Mc(x,P){return Ru(P,function(V){return ac(x[V])})}function wu(x,P){P=Js(P,x);for(var V=0,ye=P.length;x!=null&&V<ye;)x=x[Ca(P[V++])];return V&&V==ye?x:t}function _a(x,P,V){var ye=P(x);return vo(x)?ye:Du(ye,V(x))}function Xs(x){return x==null?x===t?xr:Nt:HA&&HA in Vo(x)?Sp(x):Pn(x)}function au(x,P){return x>P}function lu(x,P){return x!=null&&Uo.call(x,P)}function cA(x,P){return x!=null&&P in Vo(x)}function Mu(x,P,V){return x>=cs(P,V)&&x<zo(P,V)}function Sc(x,P,V){for(var ye=V?bh:Ku,Ye=x[0].length,lt=x.length,Rt=lt,Qt=sn(lt),on=1/0,Wn=[];Rt--;){var qn=x[Rt];Rt&&P&&(qn=Ss(qn,pu(P))),on=cs(qn.length,on),Qt[Rt]=!V&&(P||Ye>=120&&qn.length>=120)?new nc(Rt&&qn):t}qn=x[0];var cr=-1,Zr=Qt[0];e:for(;++cr<Ye&&Wn.length<on;){var xi=qn[cr],Ji=P?P(xi):xi;if(xi=V||xi!==0?xi:0,!(Zr?mu(Zr,Ji):ye(Wn,Ji,V))){for(Rt=lt;--Rt;){var os=Qt[Rt];if(!(os?mu(os,Ji):ye(x[Rt],Ji,V)))continue e}Zr&&Zr.push(Ji),Wn.push(xi)}}return Wn}function Yu(x,P,V,ye){return hl(x,function(Ye,lt,Rt){P(ye,V(Ye),lt,Rt)}),ye}function Ql(x,P,V){P=Js(P,x),x=Xn(x,P);var ye=x==null?x:x[Ca(RA(P))];return ye==null?t:Hs(ye,x,V)}function wd(x){return xl(x)&&Xs(x)==ft}function T(x){return xl(x)&&Xs(x)==Ge}function l(x){return xl(x)&&Xs(x)==Te}function c(x,P,V,ye,Ye){return x===P?!0:x==null||P==null||!xl(x)&&!xl(P)?x!==x&&P!==P:C(x,P,V,ye,c,Ye)}function C(x,P,V,ye,Ye,lt){var Rt=vo(x),Qt=vo(P),on=Rt?Lt:gl(x),Wn=Qt?Lt:gl(P);on=on==ft?yn:on,Wn=Wn==ft?yn:Wn;var qn=on==yn,cr=Wn==yn,Zr=on==Wn;if(Zr&&zh(x)){if(!zh(P))return!1;Rt=!0,qn=!1}if(Zr&&!qn)return lt||(lt=new Os),Rt||Kp(x)?TA(x,P,V,ye,Ye,lt):Ph(x,P,on,V,ye,Ye,lt);if(!(V&k)){var xi=qn&&Uo.call(x,"__wrapped__"),Ji=cr&&Uo.call(P,"__wrapped__");if(xi||Ji){var os=xi?x.value():x,eo=Ji?P.value():P;return lt||(lt=new Os),Ye(os,eo,V,ye,lt)}}return Zr?(lt||(lt=new Os),Mp(x,P,V,ye,Ye,lt)):!1}function M(x){return xl(x)&&gl(x)==Ut}function R(x,P,V,ye){var Ye=V.length,lt=Ye,Rt=!ye;if(x==null)return!lt;for(x=Vo(x);Ye--;){var Qt=V[Ye];if(Rt&&Qt[2]?Qt[1]!==x[Qt[0]]:!(Qt[0]in x))return!1}for(;++Ye<lt;){Qt=V[Ye];var on=Qt[0],Wn=x[on],qn=Qt[1];if(Rt&&Qt[2]){if(Wn===t&&!(on in x))return!1}else{var cr=new Os;if(ye)var Zr=ye(Wn,qn,on,x,P,cr);if(!(Zr===t?c(qn,Wn,k|U,ye,cr):Zr))return!1}}return!0}function j(x){if(!bl(x)||_e(x))return!1;var P=ac(x)?gc:Ti;return P.test(ba(x))}function $(x){return xl(x)&&Xs(x)==sr}function te(x){return xl(x)&&gl(x)==Jn}function se(x){return xl(x)&&V0(x.length)&&!!lo[Xs(x)]}function xe(x){return typeof x=="function"?x:x==null?ch:typeof x=="object"?vo(x)?ot(x[0],x[1]):ut(x):JI(x)}function Oe(x){if(!Ue(x))return As(x);var P=[];for(var V in Vo(x))Uo.call(x,V)&&V!="constructor"&&P.push(V);return P}function ke(x){if(!bl(x))return xn(x);var P=Ue(x),V=[];for(var ye in x)ye=="constructor"&&(P||!Uo.call(x,ye))||V.push(ye);return V}function qe(x,P){return x<P}function Ve(x,P){var V=-1,ye=Ic(x)?sn(x.length):[];return Po(x,function(Ye,lt,Rt){ye[++V]=P(Ye,lt,Rt)}),ye}function ut(x){var P=is(x);return P.length==1&&P[0][2]?xt(P[0][0],P[0][1]):function(V){return V===x||R(V,x,P)}}function ot(x,P){return K(x)&&ct(P)?xt(Ca(x),P):function(V){var ye=bn(V,x);return ye===t&&ye===P?Dn(V,x):c(P,ye,k|U)}}function At(x,P,V,ye,Ye){x!==P&&wc(P,function(lt,Rt){if(Ye||(Ye=new Os),bl(lt))mt(x,P,Rt,V,At,ye,Ye);else{var Qt=ye?ye(ur(x,Rt),lt,Rt+"",x,P,Ye):t;Qt===t&&(Qt=lt),SA(x,Rt,Qt)}},Qr)}function mt(x,P,V,ye,Ye,lt,Rt){var Qt=ur(x,V),on=ur(P,V),Wn=Rt.get(on);if(Wn){SA(x,V,Wn);return}var qn=lt?lt(Qt,on,V+"",x,P,Rt):t,cr=qn===t;if(cr){var Zr=vo(on),xi=!Zr&&zh(on),Ji=!Zr&&!xi&&Kp(on);qn=on,Zr||xi||Ji?vo(Qt)?qn=Qt:Cl(Qt)?qn=Ta(Qt):xi?(cr=!1,qn=xs(on,!0)):Ji?(cr=!1,qn=Bh(on,!0)):qn=[]:Vf(on)||bm(on)?(qn=Qt,bm(Qt)?qn=G(Qt):(!bl(Qt)||ac(Qt))&&(qn=il(on))):cr=!1}cr&&(Rt.set(on,qn),Ye(qn,on,ye,lt,Rt),Rt.delete(on)),SA(x,V,qn)}function St(x,P){var V=x.length;if(V)return P+=P<0?V:0,I(P,V)?x[P]:t}function kt(x,P,V){P.length?P=Ss(P,function(lt){return vo(lt)?function(Rt){return wu(Rt,lt.length===1?lt[0]:lt)}:lt}):P=[ch];var ye=-1;P=Ss(P,pu(di()));var Ye=Ve(x,function(lt,Rt,Qt){var on=Ss(P,function(Wn){return Wn(lt)});return{criteria:on,index:++ye,value:lt}});return wh(Ye,function(lt,Rt){return Sd(lt,Rt,V)})}function Pt(x,P){return Ft(x,P,function(V,ye){return Dn(x,ye)})}function Ft(x,P,V){for(var ye=-1,Ye=P.length,lt={};++ye<Ye;){var Rt=P[ye],Qt=wu(x,Rt);V(Qt,Rt)&&kr(lt,Js(Rt,x),Qt)}return lt}function Tt(x){return function(P){return wu(P,x)}}function Jt(x,P,V,ye){var Ye=ye?xh:Zs,lt=-1,Rt=P.length,Qt=x;for(x===P&&(P=Ta(P)),V&&(Qt=Ss(x,pu(V)));++lt<Rt;)for(var on=0,Wn=P[lt],qn=V?V(Wn):Wn;(on=Ye(Qt,qn,on,ye))>-1;)Qt!==x&&VA.call(Qt,on,1),VA.call(x,on,1);return x}function Vt(x,P){for(var V=x?P.length:0,ye=V-1;V--;){var Ye=P[V];if(V==ye||Ye!==lt){var lt=Ye;I(Ye)?VA.call(x,Ye,1):Wa(x,Ye)}}return x}function vn(x,P){return x+Fu(md()*(P-x+1))}function _n(x,P,V,ye){for(var Ye=-1,lt=zo(ZA((P-x)/(V||1)),0),Rt=sn(lt);lt--;)Rt[ye?lt:++Ye]=x,x+=V;return Rt}function mn(x,P){var V="";if(!x||P<1||P>$e)return V;do P%2&&(V+=x),P=Fu(P/2),P&&(x+=x);while(P);return V}function Bn(x,P){return Gr(Yn(x,P,ch),x+"")}function Un(x){return Wu(Do(x))}function wn(x,P){var V=Do(x);return qa(V,bu(P,0,V.length))}function kr(x,P,V,ye){if(!bl(x))return x;P=Js(P,x);for(var Ye=-1,lt=P.length,Rt=lt-1,Qt=x;Qt!=null&&++Ye<lt;){var on=Ca(P[Ye]),Wn=V;if(on==="__proto__"||on==="constructor"||on==="prototype")return x;if(Ye!=Rt){var qn=Qt[on];Wn=ye?ye(qn,on,Qt):t,Wn===t&&(Wn=bl(qn)?qn:I(P[Ye+1])?[]:{})}xc(Qt,on,Wn),Qt=Qt[on]}return x}var Bi=gd?function(x,P){return gd.set(x,P),x}:ch,$i=Wc?function(x,P){return Wc(x,"toString",{configurable:!0,enumerable:!1,value:Ud(P),writable:!0})}:ch;function Oo(x){return qa(Do(x))}function Si(x,P,V){var ye=-1,Ye=x.length;P<0&&(P=-P>Ye?0:Ye+P),V=V>Ye?Ye:V,V<0&&(V+=Ye),Ye=P>V?0:V-P>>>0,P>>>=0;for(var lt=sn(Ye);++ye<Ye;)lt[ye]=x[ye+P];return lt}function jo(x,P){var V;return Po(x,function(ye,Ye,lt){return V=P(ye,Ye,lt),!V}),!!V}function No(x,P,V){var ye=0,Ye=x==null?ye:x.length;if(typeof P=="number"&&P===P&&Ye<=wt){for(;ye<Ye;){var lt=ye+Ye>>>1,Rt=x[lt];Rt!==null&&!KA(Rt)&&(V?Rt<=P:Rt<P)?ye=lt+1:Ye=lt}return Ye}return xo(x,P,ch,V)}function xo(x,P,V,ye){var Ye=0,lt=x==null?0:x.length;if(lt===0)return 0;P=V(P);for(var Rt=P!==P,Qt=P===null,on=KA(P),Wn=P===t;Ye<lt;){var qn=Fu((Ye+lt)/2),cr=V(x[qn]),Zr=cr!==t,xi=cr===null,Ji=cr===cr,os=KA(cr);if(Rt)var eo=ye||Ji;else Wn?eo=Ji&&(ye||Zr):Qt?eo=Ji&&Zr&&(ye||!xi):on?eo=Ji&&Zr&&!xi&&(ye||!os):xi||os?eo=!1:eo=ye?cr<=P:cr<P;eo?Ye=qn+1:lt=qn}return cs(lt,at)}function yo(x,P){for(var V=-1,ye=x.length,Ye=0,lt=[];++V<ye;){var Rt=x[V],Qt=P?P(Rt):Rt;if(!V||!lh(Qt,on)){var on=Qt;lt[Ye++]=Rt===0?0:Rt}}return lt}function ka(x){return typeof x=="number"?x:KA(x)?De:+x}function Go(x){if(typeof x=="string")return x;if(vo(x))return Ss(x,Go)+"";if(KA(x))return $c?$c.call(x):"";var P=x+"";return P=="0"&&1/x==-1/0?"-0":P}function ds(x,P,V){var ye=-1,Ye=Ku,lt=x.length,Rt=!0,Qt=[],on=Qt;if(V)Rt=!1,Ye=bh;else if(lt>=i){var Wn=P?null:Am(x);if(Wn)return Ol(Wn);Rt=!1,Ye=mu,on=new nc}else on=P?[]:Qt;e:for(;++ye<lt;){var qn=x[ye],cr=P?P(qn):qn;if(qn=V||qn!==0?qn:0,Rt&&cr===cr){for(var Zr=on.length;Zr--;)if(on[Zr]===cr)continue e;P&&on.push(cr),Qt.push(qn)}else Ye(on,cr,V)||(on!==Qt&&on.push(cr),Qt.push(qn))}return Qt}function Wa(x,P){return P=Js(P,x),x=Xn(x,P),x==null||delete x[Ca(RA(P))]}function $u(x,P,V,ye){return kr(x,P,V(wu(x,P)),ye)}function fl(x,P,V,ye){for(var Ye=x.length,lt=ye?Ye:-1;(ye?lt--:++lt<Ye)&&P(x[lt],lt,x););return V?Si(x,ye?0:lt,ye?lt+1:Ye):Si(x,ye?lt+1:0,ye?Ye:lt)}function pl(x,P){var V=x;return V instanceof $r&&(V=V.value()),ud(P,function(ye,Ye){return Ye.func.apply(Ye.thisArg,Du([ye],Ye.args))},V)}function uu(x,P,V){var ye=x.length;if(ye<2)return ye?ds(x[0]):[];for(var Ye=-1,lt=sn(ye);++Ye<ye;)for(var Rt=x[Ye],Qt=-1;++Qt<ye;)Qt!=Ye&&(lt[Ye]=xu(lt[Ye]||Rt,x[Qt],P,V));return ds(Qs(lt,1),P,V)}function OA(x,P,V){for(var ye=-1,Ye=x.length,lt=P.length,Rt={};++ye<Ye;){var Qt=ye<lt?P[ye]:t;V(Rt,x[ye],Qt)}return Rt}function IA(x){return Cl(x)?x:[]}function Vu(x){return typeof x=="function"?x:ch}function Js(x,P){return vo(x)?x:K(x,P)?[x]:aa(ne(x))}var ml=Bn;function sa(x,P,V){var ye=x.length;return V=V===t?ye:V,!P&&V>=ye?x:Si(x,P,V)}var Pl=Xd||function(x){return gr.clearTimeout(x)};function xs(x,P){if(P)return x.slice();var V=x.length,ye=Zd?Zd(V):new x.constructor(V);return x.copy(ye),ye}function qs(x){var P=new x.constructor(x.byteLength);return new Gc(P).set(new Gc(x)),P}function nl(x,P){var V=P?qs(x.buffer):x.buffer;return new x.constructor(V,x.byteOffset,x.byteLength)}function rl(x){var P=new x.constructor(x.source,yi.exec(x));return P.lastIndex=x.lastIndex,P}function Md(x){return _u?Vo(_u.call(x)):{}}function Bh(x,P){var V=P?qs(x.buffer):x.buffer;return new x.constructor(V,x.byteOffset,x.length)}function Oh(x,P){if(x!==P){var V=x!==t,ye=x===null,Ye=x===x,lt=KA(x),Rt=P!==t,Qt=P===null,on=P===P,Wn=KA(P);if(!Qt&&!Wn&&!lt&&x>P||lt&&Rt&&on&&!Qt&&!Wn||ye&&Rt&&on||!V&&on||!Ye)return 1;if(!ye&&!lt&&!Wn&&x<P||Wn&&V&&Ye&&!ye&&!lt||Qt&&V&&Ye||!Rt&&Ye||!on)return-1}return 0}function Sd(x,P,V){for(var ye=-1,Ye=x.criteria,lt=P.criteria,Rt=Ye.length,Qt=V.length;++ye<Rt;){var on=Oh(Ye[ye],lt[ye]);if(on){if(ye>=Qt)return on;var Wn=V[ye];return on*(Wn=="desc"?-1:1)}}return x.index-P.index}function ic(x,P,V,ye){for(var Ye=-1,lt=x.length,Rt=V.length,Qt=-1,on=P.length,Wn=zo(lt-Rt,0),qn=sn(on+Wn),cr=!ye;++Qt<on;)qn[Qt]=P[Qt];for(;++Ye<Rt;)(cr||Ye<lt)&&(qn[V[Ye]]=x[Ye]);for(;Wn--;)qn[Qt++]=x[Ye++];return qn}function Ih(x,P,V,ye){for(var Ye=-1,lt=x.length,Rt=-1,Qt=V.length,on=-1,Wn=P.length,qn=zo(lt-Qt,0),cr=sn(qn+Wn),Zr=!ye;++Ye<qn;)cr[Ye]=x[Ye];for(var xi=Ye;++on<Wn;)cr[xi+on]=P[on];for(;++Rt<Qt;)(Zr||Ye<lt)&&(cr[xi+V[Rt]]=x[Ye++]);return cr}function Ta(x,P){var V=-1,ye=x.length;for(P||(P=sn(ye));++V<ye;)P[V]=x[V];return P}function Au(x,P,V,ye){var Ye=!V;V||(V={});for(var lt=-1,Rt=P.length;++lt<Rt;){var Qt=P[lt],on=ye?ye(V[Qt],x[Qt],Qt,V,x):t;on===t&&(on=x[Qt]),Ye?Qu(V,Qt,on):xc(V,Qt,on)}return V}function Ed(x,P){return Au(x,Su(x),P)}function _p(x,P){return Au(x,Ym(x),P)}function Ec(x,P){return function(V,ye){var Ye=vo(V)?dc:da,lt=P?P():{};return Ye(V,x,di(ye,2),lt)}}function kA(x){return Bn(function(P,V){var ye=-1,Ye=V.length,lt=Ye>1?V[Ye-1]:t,Rt=Ye>2?V[2]:t;for(lt=x.length>3&&typeof lt=="function"?(Ye--,lt):t,Rt&&B(V[0],V[1],Rt)&&(lt=Ye<3?t:lt,Ye=1),P=Vo(P);++ye<Ye;){var Qt=V[ye];Qt&&x(P,Qt,ye,lt)}return P})}function Qa(x,P){return function(V,ye){if(V==null)return V;if(!Ic(V))return x(V,ye);for(var Ye=V.length,lt=P?Ye:-1,Rt=Vo(V);(P?lt--:++lt<Ye)&&ye(Rt[lt],lt,Rt)!==!1;);return V}}function Cp(x){return function(P,V,ye){for(var Ye=-1,lt=Vo(P),Rt=ye(P),Qt=Rt.length;Qt--;){var on=Rt[x?Qt:++Ye];if(V(lt[on],on,lt)===!1)break}return P}}function kh(x,P,V){var ye=P&z,Ye=Bc(x);function lt(){var Rt=this&&this!==gr&&this instanceof lt?Ye:x;return Rt.apply(ye?V:this,arguments)}return lt}function bp(x){return function(P){P=ne(P);var V=zc(P)?Lu(P):t,ye=V?V[0]:P.charAt(0),Ye=V?sa(V,1).join(""):P.slice(1);return ye[x]()+Ye}}function oh(x){return function(P){return ud(SC(Z0(P).replace(El,"")),x,"")}}function Bc(x){return function(){var P=arguments;switch(P.length){case 0:return new x;case 1:return new x(P[0]);case 2:return new x(P[0],P[1]);case 3:return new x(P[0],P[1],P[2]);case 4:return new x(P[0],P[1],P[2],P[3]);case 5:return new x(P[0],P[1],P[2],P[3],P[4]);case 6:return new x(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new x(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var V=Na(x.prototype),ye=x.apply(V,P);return bl(ye)?ye:V}}function um(x,P,V){var ye=Bc(x);function Ye(){for(var lt=arguments.length,Rt=sn(lt),Qt=lt,on=Hc(Ye);Qt--;)Rt[Qt]=arguments[Qt];var Wn=lt<3&&Rt[0]!==on&&Rt[lt-1]!==on?[]:tl(Rt,on);if(lt-=Wn.length,lt<V)return ql(x,P,Bd,Ye.placeholder,t,Rt,Wn,t,t,V-lt);var qn=this&&this!==gr&&this instanceof Ye?ye:x;return Hs(qn,this,Rt)}return Ye}function oc(x){return function(P,V,ye){var Ye=Vo(P);if(!Ic(P)){var lt=di(V,3);P=Nr(P),V=function(Qt){return lt(Ye[Qt],Qt,Ye)}}var Rt=x(P,V,ye);return Rt>-1?Ye[lt?P[Rt]:Rt]:t}}function Th(x){return Oc(function(P){var V=P.length,ye=V,Ye=Ki.prototype.thru;for(x&&P.reverse();ye--;){var lt=P[ye];if(typeof lt!="function")throw new Il(a);if(Ye&&!Rt&&kd(lt)=="wrapper")var Rt=new Ki([],!0)}for(ye=Rt?ye:V;++ye<V;){lt=P[ye];var Qt=kd(lt),on=Qt=="wrapper"?ah(lt):t;on&&ue(on[0])&&on[1]==(N|re|Y|ie)&&!on[4].length&&on[9]==1?Rt=Rt[kd(on[0])].apply(Rt,on[3]):Rt=lt.length==1&&ue(lt)?Rt[Qt]():Rt.thru(lt)}return function(){var Wn=arguments,qn=Wn[0];if(Rt&&Wn.length==1&&vo(qn))return Rt.plant(qn).value();for(var cr=0,Zr=V?P[cr].apply(this,Wn):qn;++cr<V;)Zr=P[cr].call(this,Zr);return Zr}})}function Bd(x,P,V,ye,Ye,lt,Rt,Qt,on,Wn){var qn=P&N,cr=P&z,Zr=P&q,xi=P&(re|X),Ji=P&he,os=Zr?t:Bc(x);function eo(){for(var ws=arguments.length,Fs=sn(ws),Nh=ws;Nh--;)Fs[Nh]=arguments[Nh];if(xi)var zd=Hc(eo),Gh=Yd(Fs,zd);if(ye&&(Fs=ic(Fs,ye,Ye,xi)),lt&&(Fs=Ih(Fs,lt,Rt,xi)),ws-=Gh,xi&&ws<Wn){var eA=tl(Fs,zd);return ql(x,P,Bd,eo.placeholder,V,Fs,eA,Qt,on,Wn-ws)}var Xf=cr?V:this,Em=Zr?Xf[x]:x;return ws=Fs.length,Qt?Fs=_r(Fs,Qt):Ji&&ws>1&&Fs.reverse(),qn&&on<ws&&(Fs.length=on),this&&this!==gr&&this instanceof eo&&(Em=os||Bc(Em)),Em.apply(Xf,Fs)}return eo}function xp(x,P){return function(V,ye){return Yu(V,x,P(ye),{})}}function sh(x,P){return function(V,ye){var Ye;if(V===t&&ye===t)return P;if(V!==t&&(Ye=V),ye!==t){if(Ye===t)return ye;typeof V=="string"||typeof ye=="string"?(V=Go(V),ye=Go(ye)):(V=ka(V),ye=ka(ye)),Ye=x(V,ye)}return Ye}}function Uf(x){return Oc(function(P){return P=Ss(P,pu(di())),Bn(function(V){var ye=this;return x(P,function(Ye){return Hs(Ye,ye,V)})})})}function zf(x,P){P=P===t?" ":Go(P);var V=P.length;if(V<2)return V?mn(P,x):P;var ye=mn(P,ZA(x/jc(P)));return zc(P)?sa(Lu(ye),0,x).join(""):ye.slice(0,x)}function wp(x,P,V,ye){var Ye=P&z,lt=Bc(x);function Rt(){for(var Qt=-1,on=arguments.length,Wn=-1,qn=ye.length,cr=sn(qn+on),Zr=this&&this!==gr&&this instanceof Rt?lt:x;++Wn<qn;)cr[Wn]=ye[Wn];for(;on--;)cr[Wn++]=arguments[++Qt];return Hs(Zr,Ye?V:this,cr)}return Rt}function Od(x){return function(P,V,ye){return ye&&typeof ye!="number"&&B(P,V,ye)&&(V=ye=t),P=v(P),V===t?(V=P,P=0):V=v(V),ye=ye===t?P<V?1:-1:v(ye),_n(P,V,ye,x)}}function af(x){return function(P,V){return typeof P=="string"&&typeof V=="string"||(P=F(P),V=F(V)),x(P,V)}}function ql(x,P,V,ye,Ye,lt,Rt,Qt,on,Wn){var qn=P&re,cr=qn?Rt:t,Zr=qn?t:Rt,xi=qn?lt:t,Ji=qn?t:lt;P|=qn?Y:J,P&=~(qn?J:Y),P&Q||(P&=-4);var os=[x,P,Ye,xi,cr,Ji,Zr,Qt,on,Wn],eo=V.apply(t,os);return ue(x)&&Fr(eo,os),eo.placeholder=ye,Xi(eo,x,P)}function Rl(x){var P=oa[x];return function(V,ye){if(V=F(V),ye=ye==null?0:cs(w(ye),292),ye&&Yc(V)){var Ye=(ne(V)+"e").split("e"),lt=P(Ye[0]+"e"+(+Ye[1]+ye));return Ye=(ne(lt)+"e").split("e"),+(Ye[0]+"e"+(+Ye[1]-ye))}return P(V)}}var Am=dl&&1/Ol(new dl([,-0]))[1]==We?function(x){return new dl(x)}:E3;function jf(x){return function(P){var V=gl(P);return V==Ut?hd(P):V==Jn?$o(P):am(P,x(P))}}function Io(x,P,V,ye,Ye,lt,Rt,Qt){var on=P&q;if(!on&&typeof x!="function")throw new Il(a);var Wn=ye?ye.length:0;if(Wn||(P&=-97,ye=Ye=t),Rt=Rt===t?Rt:zo(w(Rt),0),Qt=Qt===t?Qt:w(Qt),Wn-=Ye?Ye.length:0,P&J){var qn=ye,cr=Ye;ye=Ye=t}var Zr=on?t:ah(x),xi=[x,P,V,ye,Ye,qn,cr,lt,Rt,Qt];if(Zr&&Wt(xi,Zr),x=xi[0],P=xi[1],V=xi[2],ye=xi[3],Ye=xi[4],Qt=xi[9]=xi[9]===t?on?0:x.length:zo(xi[9]-Wn,0),!Qt&&P&(re|X)&&(P&=-25),!P||P==z)var Ji=kh(x,P,V);else P==re||P==X?Ji=um(x,P,Qt):(P==Y||P==(z|Y))&&!Ye.length?Ji=wp(x,P,V,ye):Ji=Bd.apply(t,xi);var os=Zr?Bi:Fr;return Xi(os(Ji,xi),x,P)}function Hu(x,P,V,ye){return x===t||lh(x,kl[V])&&!Uo.call(ye,V)?P:x}function lf(x,P,V,ye,Ye,lt){return bl(x)&&bl(P)&&(lt.set(P,x),At(x,P,t,lf,lt),lt.delete(P)),x}function Id(x){return Vf(x)?t:x}function TA(x,P,V,ye,Ye,lt){var Rt=V&k,Qt=x.length,on=P.length;if(Qt!=on&&!(Rt&&on>Qt))return!1;var Wn=lt.get(x),qn=lt.get(P);if(Wn&&qn)return Wn==P&&qn==x;var cr=-1,Zr=!0,xi=V&U?new nc:t;for(lt.set(x,P),lt.set(P,x);++cr<Qt;){var Ji=x[cr],os=P[cr];if(ye)var eo=Rt?ye(os,Ji,cr,P,x,lt):ye(Ji,os,cr,x,P,lt);if(eo!==t){if(eo)continue;Zr=!1;break}if(xi){if(!sA(P,function(ws,Fs){if(!mu(xi,Fs)&&(Ji===ws||Ye(Ji,ws,V,ye,lt)))return xi.push(Fs)})){Zr=!1;break}}else if(!(Ji===os||Ye(Ji,os,V,ye,lt))){Zr=!1;break}}return lt.delete(x),lt.delete(P),Zr}function Ph(x,P,V,ye,Ye,lt,Rt){switch(V){case Ae:if(x.byteLength!=P.byteLength||x.byteOffset!=P.byteOffset)return!1;x=x.buffer,P=P.buffer;case Ge:return!(x.byteLength!=P.byteLength||!lt(new Gc(x),new Gc(P)));case Fe:case Te:case en:return lh(+x,+P);case Je:return x.name==P.name&&x.message==P.message;case sr:case mr:return x==P+"";case Ut:var Qt=hd;case Jn:var on=ye&k;if(Qt||(Qt=Ol),x.size!=P.size&&!on)return!1;var Wn=Rt.get(x);if(Wn)return Wn==P;ye|=U,Rt.set(x,P);var qn=TA(Qt(x),Qt(P),ye,Ye,lt,Rt);return Rt.delete(x),qn;case pr:if(_u)return _u.call(x)==_u.call(P)}return!1}function Mp(x,P,V,ye,Ye,lt){var Rt=V&k,Qt=uf(x),on=Qt.length,Wn=uf(P),qn=Wn.length;if(on!=qn&&!Rt)return!1;for(var cr=on;cr--;){var Zr=Qt[cr];if(!(Rt?Zr in P:Uo.call(P,Zr)))return!1}var xi=lt.get(x),Ji=lt.get(P);if(xi&&Ji)return xi==P&&Ji==x;var os=!0;lt.set(x,P),lt.set(P,x);for(var eo=Rt;++cr<on;){Zr=Qt[cr];var ws=x[Zr],Fs=P[Zr];if(ye)var Nh=Rt?ye(Fs,ws,Zr,P,x,lt):ye(ws,Fs,Zr,x,P,lt);if(!(Nh===t?ws===Fs||Ye(ws,Fs,V,ye,lt):Nh)){os=!1;break}eo||(eo=Zr=="constructor")}if(os&&!eo){var zd=x.constructor,Gh=P.constructor;zd!=Gh&&"constructor"in x&&"constructor"in P&&!(typeof zd=="function"&&zd instanceof zd&&typeof Gh=="function"&&Gh instanceof Gh)&&(os=!1)}return lt.delete(x),lt.delete(P),os}function Oc(x){return Gr(Yn(x,t,Xc),x+"")}function uf(x){return _a(x,Nr,Su)}function Af(x){return _a(x,Qr,Ym)}var ah=gd?function(x){return gd.get(x)}:E3;function kd(x){for(var P=x.name+"",V=ju[P],ye=Uo.call(ju,P)?V.length:0;ye--;){var Ye=V[ye],lt=Ye.func;if(lt==null||lt==x)return Ye.name}return P}function Hc(x){var P=Uo.call(et,"placeholder")?et:x;return P.placeholder}function di(){var x=et.iteratee||M3;return x=x===M3?xe:x,arguments.length?x(arguments[0],arguments[1]):x}function Zc(x,P){var V=x.__data__;return H(P)?V[typeof P=="string"?"string":"hash"]:V.map}function is(x){for(var P=Nr(x),V=P.length;V--;){var ye=P[V],Ye=x[ye];P[V]=[ye,Ye,ct(Ye)]}return P}function Td(x,P){var V=WA(x,P);return j(V)?V:t}function Sp(x){var P=Uo.call(x,HA),V=x[HA];try{x[HA]=t;var ye=!0}catch{}var Ye=CA.call(x);return ye&&(P?x[HA]=V:delete x[HA]),Ye}var Su=qc?function(x){return x==null?[]:(x=Vo(x),Ru(qc(x),function(P){return yc.call(x,P)}))}:B3,Ym=qc?function(x){for(var P=[];x;)Du(P,Su(x)),x=ja(x);return P}:B3,gl=Xs;(XA&&gl(new XA(new ArrayBuffer(1)))!=Ae||Nl&&gl(new Nl)!=Ut||xA&&gl(xA.resolve())!=jn||dl&&gl(new dl)!=Jn||JA&&gl(new JA)!=Qn)&&(gl=function(x){var P=Xs(x),V=P==yn?x.constructor:t,ye=V?ba(V):"";if(ye)switch(ye){case eh:return Ae;case ec:return Ut;case Nu:return jn;case Gu:return Jn;case wA:return Qn}return P});function cm(x,P,V){for(var ye=-1,Ye=V.length;++ye<Ye;){var lt=V[ye],Rt=lt.size;switch(lt.type){case"drop":x+=Rt;break;case"dropRight":P-=Rt;break;case"take":P=cs(P,x+Rt);break;case"takeRight":x=zo(x,P-Rt);break}}return{start:x,end:P}}function ha(x){var P=x.match(Mr);return P?P[1].split(Kr):[]}function dm(x,P,V){P=Js(P,x);for(var ye=-1,Ye=P.length,lt=!1;++ye<Ye;){var Rt=Ca(P[ye]);if(!(lt=x!=null&&V(x,Rt)))break;x=x[Rt]}return lt||++ye!=Ye?lt:(Ye=x==null?0:x.length,!!Ye&&V0(Ye)&&I(Rt,Ye)&&(vo(x)||bm(x)))}function cf(x){var P=x.length,V=new x.constructor(P);return P&&typeof x[0]=="string"&&Uo.call(x,"index")&&(V.index=x.index,V.input=x.input),V}function il(x){return typeof x.constructor=="function"&&!Ue(x)?Na(ja(x)):{}}function Ep(x,P,V){var ye=x.constructor;switch(P){case Ge:return qs(x);case Fe:case Te:return new ye(+x);case Ae:return nl(x,V);case me:case Xe:case Et:case Yt:case nn:case rr:case Ee:case oe:case ve:return Bh(x,V);case Ut:return new ye;case en:case mr:return new ye(x);case sr:return rl(x);case Jn:return new ye;case pr:return Md(x)}}function A(x,P){var V=P.length;if(!V)return x;var ye=V-1;return P[ye]=(V>1?"& ":"")+P[ye],P=P.join(V>2?", ":" "),x.replace(Br,`{
/* [wrapped with `+P+`] */
`)}function y(x){return vo(x)||bm(x)||!!(sf&&x&&x[sf])}function I(x,P){var V=typeof x;return P=P??$e,!!P&&(V=="number"||V!="symbol"&&Ea.test(x))&&x>-1&&x%1==0&&x<P}function B(x,P,V){if(!bl(V))return!1;var ye=typeof P;return(ye=="number"?Ic(V)&&I(P,V.length):ye=="string"&&P in V)?lh(V[P],x):!1}function K(x,P){if(vo(x))return!1;var V=typeof x;return V=="number"||V=="symbol"||V=="boolean"||x==null||KA(x)?!0:Sn.test(x)||!Tn.test(x)||P!=null&&x in Vo(P)}function H(x){var P=typeof x;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?x!=="__proto__":x===null}function ue(x){var P=kd(x),V=et[P];if(typeof V!="function"||!(P in $r.prototype))return!1;if(x===V)return!0;var ye=ah(V);return!!ye&&x===ye[0]}function _e(x){return!!$A&&$A in x}var Ie=Gi?ac:O3;function Ue(x){var P=x&&x.constructor,V=typeof P=="function"&&P.prototype||kl;return x===V}function ct(x){return x===x&&!bl(x)}function xt(x,P){return function(V){return V==null?!1:V[x]===P&&(P!==t||x in Vo(V))}}function Ht(x){var P=yr(x,function(ye){return V.size===g&&V.clear(),ye}),V=P.cache;return P}function Wt(x,P){var V=x[1],ye=P[1],Ye=V|ye,lt=Ye<(z|q|N),Rt=ye==N&&V==re||ye==N&&V==ie&&x[7].length<=P[8]||ye==(N|ie)&&P[7].length<=P[8]&&V==re;if(!(lt||Rt))return x;ye&z&&(x[2]=P[2],Ye|=V&z?0:Q);var Qt=P[3];if(Qt){var on=x[3];x[3]=on?ic(on,Qt,P[4]):Qt,x[4]=on?tl(x[3],b):P[4]}return Qt=P[5],Qt&&(on=x[5],x[5]=on?Ih(on,Qt,P[6]):Qt,x[6]=on?tl(x[5],b):P[6]),Qt=P[7],Qt&&(x[7]=Qt),ye&N&&(x[8]=x[8]==null?P[8]:cs(x[8],P[8])),x[9]==null&&(x[9]=P[9]),x[0]=P[0],x[1]=Ye,x}function xn(x){var P=[];if(x!=null)for(var V in Vo(x))P.push(V);return P}function Pn(x){return CA.call(x)}function Yn(x,P,V){return P=zo(P===t?x.length-1:P,0),function(){for(var ye=arguments,Ye=-1,lt=zo(ye.length-P,0),Rt=sn(lt);++Ye<lt;)Rt[Ye]=ye[P+Ye];Ye=-1;for(var Qt=sn(P+1);++Ye<P;)Qt[Ye]=ye[Ye];return Qt[P]=V(Rt),Hs(x,this,Qt)}}function Xn(x,P){return P.length<2?x:wu(x,Si(P,0,-1))}function _r(x,P){for(var V=x.length,ye=cs(P.length,V),Ye=Ta(x);ye--;){var lt=P[ye];x[ye]=I(lt,V)?Ye[lt]:t}return x}function ur(x,P){if(!(P==="constructor"&&typeof x[P]=="function")&&P!="__proto__")return x[P]}var Fr=ko(Bi),ai=Qc||function(x,P){return gr.setTimeout(x,P)},Gr=ko($i);function Xi(x,P,V){var ye=P+"";return Gr(x,A(ye,Pa(ha(ye),V)))}function ko(x){var P=0,V=0;return function(){var ye=Df(),Ye=be-(ye-V);if(V=ye,Ye>0){if(++P>=fe)return arguments[0]}else P=0;return x.apply(t,arguments)}}function qa(x,P){var V=-1,ye=x.length,Ye=ye-1;for(P=P===t?ye:P;++V<P;){var lt=vn(V,Ye),Rt=x[lt];x[lt]=x[V],x[V]=Rt}return x.length=P,x}var aa=Ht(function(x){var P=[];return x.charCodeAt(0)===46&&P.push(""),x.replace(Ar,function(V,ye,Ye,lt){P.push(Ye?lt.replace(Sa,"$1"):ye||V)}),P});function Ca(x){if(typeof x=="string"||KA(x))return x;var P=x+"";return P=="0"&&1/x==-1/0?"-0":P}function ba(x){if(x!=null){try{return YA.call(x)}catch{}try{return x+""}catch{}}return""}function Pa(x,P){return Ba(Ct,function(V){var ye="_."+V[0];P&V[1]&&!Ku(x,ye)&&x.push(ye)}),x.sort()}function Yl(x){if(x instanceof $r)return x.clone();var P=new Ki(x.__wrapped__,x.__chain__);return P.__actions__=Ta(x.__actions__),P.__index__=x.__index__,P.__values__=x.__values__,P}function Ya(x,P,V){(V?B(x,P,V):P===t)?P=1:P=zo(w(P),0);var ye=x==null?0:x.length;if(!ye||P<1)return[];for(var Ye=0,lt=0,Rt=sn(ZA(ye/P));Ye<ye;)Rt[lt++]=Si(x,Ye,Ye+=P);return Rt}function xa(x){for(var P=-1,V=x==null?0:x.length,ye=0,Ye=[];++P<V;){var lt=x[P];lt&&(Ye[ye++]=lt)}return Ye}function hs(){var x=arguments.length;if(!x)return[];for(var P=sn(x-1),V=arguments[0],ye=x;ye--;)P[ye-1]=arguments[ye];return Du(vo(V)?Ta(V):[V],Qs(P,1))}var gi=Bn(function(x,P){return Cl(x)?xu(x,Qs(P,1,Cl,!0)):[]}),Xo=Bn(function(x,P){var V=RA(P);return Cl(V)&&(V=t),Cl(x)?xu(x,Qs(P,1,Cl,!0),di(V,2)):[]}),la=Bn(function(x,P){var V=RA(P);return Cl(V)&&(V=t),Cl(x)?xu(x,Qs(P,1,Cl,!0),t,V):[]});function fa(x,P,V){var ye=x==null?0:x.length;return ye?(P=V||P===t?1:w(P),Si(x,P<0?0:P,ye)):[]}function ks(x,P,V){var ye=x==null?0:x.length;return ye?(P=V||P===t?1:w(P),P=ye-P,Si(x,0,P<0?0:P)):[]}function Kl(x,P){return x&&x.length?fl(x,di(P,3),!0,!0):[]}function Ro(x,P){return x&&x.length?fl(x,di(P,3),!0):[]}function Pd(x,P,V,ye){var Ye=x==null?0:x.length;return Ye?(V&&typeof V!="number"&&B(x,P,V)&&(V=0,ye=Ye),ih(x,P,V,ye)):[]}function yl(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var Ye=V==null?0:w(V);return Ye<0&&(Ye=zo(ye+Ye,0)),hc(x,di(P,3),Ye)}function PA(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var Ye=ye-1;return V!==t&&(Ye=w(V),Ye=V<0?zo(ye+Ye,0):cs(Ye,ye-1)),hc(x,di(P,3),Ye,!0)}function Xc(x){var P=x==null?0:x.length;return P?Qs(x,1):[]}function vl(x){var P=x==null?0:x.length;return P?Qs(x,We):[]}function _l(x,P){var V=x==null?0:x.length;return V?(P=P===t?1:w(P),Qs(x,P)):[]}function df(x){for(var P=-1,V=x==null?0:x.length,ye={};++P<V;){var Ye=x[P];ye[Ye[0]]=Ye[1]}return ye}function Nf(x){return x&&x.length?x[0]:t}function Rh(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var Ye=V==null?0:w(V);return Ye<0&&(Ye=zo(ye+Ye,0)),Zs(x,P,Ye)}function hf(x){var P=x==null?0:x.length;return P?Si(x,0,-1):[]}var $m=Bn(function(x){var P=Ss(x,IA);return P.length&&P[0]===x[0]?Sc(P):[]}),ff=Bn(function(x){var P=RA(x),V=Ss(x,IA);return P===RA(V)?P=t:V.pop(),V.length&&V[0]===x[0]?Sc(V,di(P,2)):[]}),Vm=Bn(function(x){var P=RA(x),V=Ss(x,IA);return P=typeof P=="function"?P:t,P&&V.pop(),V.length&&V[0]===x[0]?Sc(V,t,P):[]});function pf(x,P){return x==null?"":vc.call(x,P)}function RA(x){var P=x==null?0:x.length;return P?x[P-1]:t}function hm(x,P,V){var ye=x==null?0:x.length;if(!ye)return-1;var Ye=ye;return V!==t&&(Ye=w(V),Ye=Ye<0?zo(ye+Ye,0):cs(Ye,ye-1)),P===P?lm(x,P,Ye):hc(x,ef,Ye,!0)}function F0(x,P){return x&&x.length?St(x,w(P)):t}var fm=Bn(Gf);function Gf(x,P){return x&&x.length&&P&&P.length?Jt(x,P):x}function dA(x,P,V){return x&&x.length&&P&&P.length?Jt(x,P,di(V,2)):x}function Kh(x,P,V){return x&&x.length&&P&&P.length?Jt(x,P,t,V):x}var Jc=Oc(function(x,P){var V=x==null?0:x.length,ye=rc(x,P);return Vt(x,Ss(P,function(Ye){return I(Ye,V)?+Ye:Ye}).sort(Oh)),ye});function sc(x,P){var V=[];if(!(x&&x.length))return V;var ye=-1,Ye=[],lt=x.length;for(P=di(P,3);++ye<lt;){var Rt=x[ye];P(Rt,ye,x)&&(V.push(Rt),Ye.push(ye))}return Vt(x,Ye),V}function Wf(x){return x==null?x:Uu.call(x)}function U0(x,P,V){var ye=x==null?0:x.length;return ye?(V&&typeof V!="number"&&B(x,P,V)?(P=0,V=ye):(P=P==null?0:w(P),V=V===t?ye:w(V)),Si(x,P,V)):[]}function Hm(x,P){return No(x,P)}function Gy(x,P,V){return xo(x,P,di(V,2))}function mf(x,P){var V=x==null?0:x.length;if(V){var ye=No(x,P);if(ye<V&&lh(x[ye],P))return ye}return-1}function Qg(x,P){return No(x,P,!0)}function Zm(x,P,V){return xo(x,P,di(V,2),!0)}function Qf(x,P){var V=x==null?0:x.length;if(V){var ye=No(x,P,!0)-1;if(lh(x[ye],P))return ye}return-1}function z0(x){return x&&x.length?yo(x):[]}function Rd(x,P){return x&&x.length?yo(x,di(P,2)):[]}function j0(x){var P=x==null?0:x.length;return P?Si(x,1,P):[]}function Xm(x,P,V){return x&&x.length?(P=V||P===t?1:w(P),Si(x,0,P<0?0:P)):[]}function Jm(x,P,V){var ye=x==null?0:x.length;return ye?(P=V||P===t?1:w(P),P=ye-P,Si(x,P<0?0:P,ye)):[]}function $a(x,P){return x&&x.length?fl(x,di(P,3),!1,!0):[]}function N0(x,P){return x&&x.length?fl(x,di(P,3)):[]}var Wy=Bn(function(x){return ds(Qs(x,1,Cl,!0))}),G0=Bn(function(x){var P=RA(x);return Cl(P)&&(P=t),ds(Qs(x,1,Cl,!0),di(P,2))}),e0=Bn(function(x){var P=RA(x);return P=typeof P=="function"?P:t,ds(Qs(x,1,Cl,!0),t,P)});function Dh(x){return x&&x.length?ds(x):[]}function Qy(x,P){return x&&x.length?ds(x,di(P,2)):[]}function Bp(x,P){return P=typeof P=="function"?P:t,x&&x.length?ds(x,t,P):[]}function t0(x){if(!(x&&x.length))return[];var P=0;return x=Ru(x,function(V){if(Cl(V))return P=zo(V.length,P),!0}),dd(P,function(V){return Ss(x,tf(V))})}function ol(x,P){if(!(x&&x.length))return[];var V=t0(x);return P==null?V:Ss(V,function(ye){return Hs(P,t,ye)})}var qg=Bn(function(x,P){return Cl(x)?xu(x,P):[]}),hA=Bn(function(x){return uu(Ru(x,Cl))}),W0=Bn(function(x){var P=RA(x);return Cl(P)&&(P=t),uu(Ru(x,Cl),di(P,2))}),Yg=Bn(function(x){var P=RA(x);return P=typeof P=="function"?P:t,uu(Ru(x,Cl),t,P)}),Lh=Bn(t0);function Op(x,P){return OA(x||[],P||[],xc)}function pm(x,P){return OA(x||[],P||[],kr)}var Zu=Bn(function(x){var P=x.length,V=P>1?x[P-1]:t;return V=typeof V=="function"?(x.pop(),V):t,ol(x,V)});function qf(x){var P=et(x);return P.__chain__=!0,P}function n0(x,P){return P(x),x}function Kd(x,P){return P(x)}var r0=Oc(function(x){var P=x.length,V=P?x[0]:0,ye=this.__wrapped__,Ye=function(lt){return rc(lt,x)};return P>1||this.__actions__.length||!(ye instanceof $r)||!I(V)?this.thru(Ye):(ye=ye.slice(V,+V+(P?1:0)),ye.__actions__.push({func:Kd,args:[Ye],thisArg:t}),new Ki(ye,this.__chain__).thru(function(lt){return P&&!lt.length&&lt.push(t),lt}))});function gf(){return qf(this)}function mm(){return new Ki(this.value(),this.__chain__)}function Q0(){this.__values__===t&&(this.__values__=h(this.value()));var x=this.__index__>=this.__values__.length,P=x?t:this.__values__[this.__index__++];return{done:x,value:P}}function i0(){return this}function $g(x){for(var P,V=this;V instanceof Bo;){var ye=Yl(V);ye.__index__=0,ye.__values__=t,P?Ye.__wrapped__=ye:P=ye;var Ye=ye;V=V.__wrapped__}return Ye.__wrapped__=x,P}function gm(){var x=this.__wrapped__;if(x instanceof $r){var P=x;return this.__actions__.length&&(P=new $r(this)),P=P.reverse(),P.__actions__.push({func:Kd,args:[Wf],thisArg:t}),new Ki(P,this.__chain__)}return this.thru(Wf)}function q0(){return pl(this.__wrapped__,this.__actions__)}var Vg=Ec(function(x,P,V){Uo.call(x,V)?++x[V]:Qu(x,V,1)});function Hg(x,P,V){var ye=vo(x)?ld:rh;return V&&B(x,P,V)&&(P=t),ye(x,di(P,3))}function ym(x,P){var V=vo(x)?Ru:BA;return V(x,di(P,3))}var vm=oc(yl),Ip=oc(PA);function ed(x,P){return Qs(kp(x,P),1)}function Fh(x,P){return Qs(kp(x,P),We)}function o0(x,P,V){return V=V===t?1:w(V),Qs(kp(x,P),V)}function Yf(x,P){var V=vo(x)?Ba:Po;return V(x,di(P,3))}function s0(x,P){var V=vo(x)?cl:Is;return V(x,di(P,3))}var a0=Ec(function(x,P,V){Uo.call(x,V)?x[V].push(P):Qu(x,V,[P])});function _m(x,P,V,ye){x=Ic(x)?x:Do(x),V=V&&!ye?w(V):0;var Ye=x.length;return V<0&&(V=zo(Ye+V,0)),xm(x)?V<=Ye&&x.indexOf(P,V)>-1:!!Ye&&Zs(x,P,V)>-1}var Y0=Bn(function(x,P,V){var ye=-1,Ye=typeof P=="function",lt=Ic(x)?sn(x.length):[];return Po(x,function(Rt){lt[++ye]=Ye?Hs(P,Rt,V):Ql(Rt,P,V)}),lt}),l0=Ec(function(x,P,V){Qu(x,V,P)});function kp(x,P){var V=vo(x)?Ss:Ve;return V(x,di(P,3))}function $f(x,P,V,ye){return x==null?[]:(vo(P)||(P=P==null?[]:[P]),V=ye?t:V,vo(V)||(V=V==null?[]:[V]),kt(x,P,V))}var Tp=Ec(function(x,P,V){x[V?0:1].push(P)},function(){return[[],[]]});function Cm(x,P,V){var ye=vo(x)?ud:fc,Ye=arguments.length<3;return ye(x,di(P,4),V,Ye,Po)}function m(x,P,V){var ye=vo(x)?gp:fc,Ye=arguments.length<3;return ye(x,di(P,4),V,Ye,Is)}function _(x,P){var V=vo(x)?Ru:BA;return V(x,ni(di(P,3)))}function L(x){var P=vo(x)?Wu:Un;return P(x)}function W(x,P,V){(V?B(x,P,V):P===t)?P=1:P=w(P);var ye=vo(x)?bc:wn;return ye(x,P)}function ae(x){var P=vo(x)?nh:Oo;return P(x)}function ge(x){if(x==null)return 0;if(Ic(x))return xm(x)?jc(x):x.length;var P=gl(x);return P==Ut||P==Jn?x.size:Oe(x).length}function Ze(x,P,V){var ye=vo(x)?sA:jo;return V&&B(x,P,V)&&(P=t),ye(x,di(P,3))}var It=Bn(function(x,P){if(x==null)return[];var V=P.length;return V>1&&B(x,P[0],P[1])?P=[]:V>2&&B(P[0],P[1],P[2])&&(P=[P[0]]),kt(x,Qs(P,1),[])}),Gt=Ho||function(){return gr.Date.now()};function Cn(x,P){if(typeof P!="function")throw new Il(a);return x=w(x),function(){if(--x<1)return P.apply(this,arguments)}}function ar(x,P,V){return P=V?t:P,P=x&&P==null?x.length:P,Io(x,N,t,t,t,t,P)}function dr(x,P){var V;if(typeof P!="function")throw new Il(a);return x=w(x),function(){return--x>0&&(V=P.apply(this,arguments)),x<=1&&(P=t),V}}var $n=Bn(function(x,P,V){var ye=z;if(V.length){var Ye=tl(V,Hc($n));ye|=Y}return Io(x,ye,P,V,Ye)}),zr=Bn(function(x,P,V){var ye=z|q;if(V.length){var Ye=tl(V,Hc(zr));ye|=Y}return Io(P,ye,x,V,Ye)});function ii(x,P,V){P=V?t:P;var ye=Io(x,re,t,t,t,t,t,P);return ye.placeholder=ii.placeholder,ye}function li(x,P,V){P=V?t:P;var ye=Io(x,X,t,t,t,t,t,P);return ye.placeholder=li.placeholder,ye}function sl(x,P,V){var ye,Ye,lt,Rt,Qt,on,Wn=0,qn=!1,cr=!1,Zr=!0;if(typeof x!="function")throw new Il(a);P=F(P)||0,bl(V)&&(qn=!!V.leading,cr="maxWait"in V,lt=cr?zo(F(V.maxWait)||0,P):lt,Zr="trailing"in V?!!V.trailing:Zr);function xi(eA){var Xf=ye,Em=Ye;return ye=Ye=t,Wn=eA,Rt=x.apply(Em,Xf),Rt}function Ji(eA){return Wn=eA,Qt=ai(ws,P),qn?xi(eA):Rt}function os(eA){var Xf=eA-on,Em=eA-Wn,e8=P-Xf;return cr?cs(e8,lt-Em):e8}function eo(eA){var Xf=eA-on,Em=eA-Wn;return on===t||Xf>=P||Xf<0||cr&&Em>=lt}function ws(){var eA=Gt();if(eo(eA))return Fs(eA);Qt=ai(ws,os(eA))}function Fs(eA){return Qt=t,Zr&&ye?xi(eA):(ye=Ye=t,Rt)}function Nh(){Qt!==t&&Pl(Qt),Wn=0,ye=on=Ye=Qt=t}function zd(){return Qt===t?Rt:Fs(Gt())}function Gh(){var eA=Gt(),Xf=eo(eA);if(ye=arguments,Ye=this,on=eA,Xf){if(Qt===t)return Ji(on);if(cr)return Pl(Qt),Qt=ai(ws,P),xi(on)}return Qt===t&&(Qt=ai(ws,P)),Rt}return Gh.cancel=Nh,Gh.flush=zd,Gh}var an=Bn(function(x,P){return Ff(x,1,P)}),Zt=Bn(function(x,P,V){return Ff(x,F(P)||0,V)});function An(x){return Io(x,he)}function yr(x,P){if(typeof x!="function"||P!=null&&typeof P!="function")throw new Il(a);var V=function(){var ye=arguments,Ye=P?P.apply(this,ye):ye[0],lt=V.cache;if(lt.has(Ye))return lt.get(Ye);var Rt=x.apply(this,ye);return V.cache=lt.set(Ye,Rt)||lt,Rt};return V.cache=new(yr.Cache||Mi),V}yr.Cache=Mi;function ni(x){if(typeof x!="function")throw new Il(a);return function(){var P=arguments;switch(P.length){case 0:return!x.call(this);case 1:return!x.call(this,P[0]);case 2:return!x.call(this,P[0],P[1]);case 3:return!x.call(this,P[0],P[1],P[2])}return!x.apply(this,P)}}function Ii(x){return dr(2,x)}var Oi=ml(function(x,P){P=P.length==1&&vo(P[0])?Ss(P[0],pu(di())):Ss(Qs(P,1),pu(di()));var V=P.length;return Bn(function(ye){for(var Ye=-1,lt=cs(ye.length,V);++Ye<lt;)ye[Ye]=P[Ye].call(this,ye[Ye]);return Hs(x,this,ye)})}),zi=Bn(function(x,P){var V=tl(P,Hc(zi));return Io(x,Y,t,P,V)}),Ls=Bn(function(x,P){var V=tl(P,Hc(Ls));return Io(x,J,t,P,V)}),Jo=Oc(function(x,P){return Io(x,ie,t,t,t,P)});function Uh(x,P){if(typeof x!="function")throw new Il(a);return P=P===t?P:w(P),Bn(x,P)}function Zg(x,P){if(typeof x!="function")throw new Il(a);return P=P==null?0:zo(w(P),0),Bn(function(V){var ye=V[P],Ye=sa(V,0,P);return ye&&Du(Ye,ye),Hs(x,this,Ye)})}function oC(x,P,V){var ye=!0,Ye=!0;if(typeof x!="function")throw new Il(a);return bl(V)&&(ye="leading"in V?!!V.leading:ye,Ye="trailing"in V?!!V.trailing:Ye),sl(x,P,{leading:ye,maxWait:P,trailing:Ye})}function sC(x){return ar(x,1)}function aC(x,P){return zi(Vu(P),x)}function lC(){if(!arguments.length)return[];var x=arguments[0];return vo(x)?x:[x]}function A3(x){return bs(x,O)}function uC(x,P){return P=typeof P=="function"?P:t,bs(x,O,P)}function Pp(x){return bs(x,E|O)}function AC(x,P){return P=typeof P=="function"?P:t,bs(x,E|O,P)}function cC(x,P){return P==null||su(x,P,Nr(P))}function lh(x,P){return x===P||x!==x&&P!==P}var dC=af(au),c3=af(function(x,P){return x>=P}),bm=wd(function(){return arguments}())?wd:function(x){return xl(x)&&Uo.call(x,"callee")&&!yc.call(x,"callee")},vo=sn.isArray,$0=Hi?pu(Hi):T;function Ic(x){return x!=null&&V0(x.length)&&!ac(x)}function Cl(x){return xl(x)&&Ic(x)}function hC(x){return x===!0||x===!1||xl(x)&&Xs(x)==Fe}var zh=Jd||O3,Xg=Zi?pu(Zi):l;function Jg(x){return xl(x)&&x.nodeType===1&&!Vf(x)}function d3(x){if(x==null)return!0;if(Ic(x)&&(vo(x)||typeof x=="string"||typeof x.splice=="function"||zh(x)||Kp(x)||bm(x)))return!x.length;var P=gl(x);if(P==Ut||P==Jn)return!x.size;if(Ue(x))return!Oe(x).length;for(var V in x)if(Uo.call(x,V))return!1;return!0}function h3(x,P){return c(x,P)}function f3(x,P,V){V=typeof V=="function"?V:t;var ye=V?V(x,P):t;return ye===t?c(x,P,t,V):!!ye}function Rp(x){if(!xl(x))return!1;var P=Xs(x);return P==Je||P==Se||typeof x.message=="string"&&typeof x.name=="string"&&!Vf(x)}function fA(x){return typeof x=="number"&&Yc(x)}function ac(x){if(!bl(x))return!1;var P=Xs(x);return P==yt||P==dt||P==Kt||P==Rr}function e1(x){return typeof x=="number"&&x==w(x)}function V0(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=$e}function bl(x){var P=typeof x;return x!=null&&(P=="object"||P=="function")}function xl(x){return x!=null&&typeof x=="object"}var fC=us?pu(us):M;function pC(x,P){return x===P||R(x,P,is(P))}function mC(x,P,V){return V=typeof V=="function"?V:t,R(x,P,is(P),V)}function p3(x){return $y(x)&&x!=+x}function gC(x){if(Ie(x))throw new _i(s);return j(x)}function qy(x){return x===null}function Yy(x){return x==null}function $y(x){return typeof x=="number"||xl(x)&&Xs(x)==en}function Vf(x){if(!xl(x)||Xs(x)!=yn)return!1;var P=ja(x);if(P===null)return!0;var V=Uo.call(P,"constructor")&&P.constructor;return typeof V=="function"&&V instanceof V&&YA.call(V)==lA}var H0=ya?pu(ya):$;function yC(x){return e1(x)&&x>=-9007199254740991&&x<=$e}var t1=za?pu(za):te;function xm(x){return typeof x=="string"||!vo(x)&&xl(x)&&Xs(x)==mr}function KA(x){return typeof x=="symbol"||xl(x)&&Xs(x)==pr}var Kp=fu?pu(fu):se;function Vy(x){return x===t}function Hy(x){return xl(x)&&gl(x)==Qn}function m3(x){return xl(x)&&Xs(x)==Er}var f=af(qe),u=af(function(x,P){return x<=P});function h(x){if(!x)return[];if(Ic(x))return xm(x)?Lu(x):Ta(x);if(bA&&x[bA])return Kf(x[bA]());var P=gl(x),V=P==Ut?hd:P==Jn?Ol:Do;return V(x)}function v(x){if(!x)return x===0?x:0;if(x=F(x),x===We||x===-1/0){var P=x<0?-1:1;return P*ht}return x===x?x:0}function w(x){var P=v(x),V=P%1;return P===P?V?P-V:P:0}function D(x){return x?bu(w(x),0,Ne):0}function F(x){if(typeof x=="number")return x;if(KA(x))return De;if(bl(x)){var P=typeof x.valueOf=="function"?x.valueOf():x;x=bl(P)?P+"":P}if(typeof x!="string")return x===0?x:+x;x=Fc(x);var V=Mo.test(x);return V||Ua.test(x)?Gn(x.slice(2),V?2:8):oo.test(x)?De:+x}function G(x){return Au(x,Qr(x))}function Z(x){return x?bu(w(x),-9007199254740991,$e):x===0?x:0}function ne(x){return x==null?"":Go(x)}var ce=kA(function(x,P){if(Ue(P)||Ic(P)){Au(P,Nr(P),x);return}for(var V in P)Uo.call(P,V)&&xc(x,V,P[V])}),Ce=kA(function(x,P){Au(P,Qr(P),x)}),Re=kA(function(x,P,V,ye){Au(P,Qr(P),x,ye)}),Le=kA(function(x,P,V,ye){Au(P,Nr(P),x,ye)}),je=Oc(rc);function He(x,P){var V=Na(x);return P==null?V:hr(V,P)}var st=Bn(function(x,P){x=Vo(x);var V=-1,ye=P.length,Ye=ye>2?P[2]:t;for(Ye&&B(P[0],P[1],Ye)&&(ye=1);++V<ye;)for(var lt=P[V],Rt=Qr(lt),Qt=-1,on=Rt.length;++Qt<on;){var Wn=Rt[Qt],qn=x[Wn];(qn===t||lh(qn,kl[Wn])&&!Uo.call(x,Wn))&&(x[Wn]=lt[Wn])}return x}),gt=Bn(function(x){return x.push(t,lf),Hs($l,t,x)});function jt(x,P){return Rf(x,di(P,3),hl)}function Mt(x,P){return Rf(x,di(P,3),qu)}function Ke(x,P){return x==null?x:wc(x,di(P,3),Qr)}function nt(x,P){return x==null?x:Wl(x,di(P,3),Qr)}function Ot(x,P){return x&&hl(x,di(P,3))}function ln(x,P){return x&&qu(x,di(P,3))}function Ln(x){return x==null?[]:Mc(x,Nr(x))}function pn(x){return x==null?[]:Mc(x,Qr(x))}function bn(x,P,V){var ye=x==null?t:wu(x,P);return ye===t?V:ye}function Vn(x,P){return x!=null&&dm(x,P,lu)}function Dn(x,P){return x!=null&&dm(x,P,cA)}var lr=xp(function(x,P,V){P!=null&&typeof P.toString!="function"&&(P=CA.call(P)),x[P]=V},Ud(ch)),En=xp(function(x,P,V){P!=null&&typeof P.toString!="function"&&(P=CA.call(P)),Uo.call(x,P)?x[P].push(V):x[P]=[V]},di),Wr=Bn(Ql);function Nr(x){return Ic(x)?ou(x):Oe(x)}function Qr(x){return Ic(x)?ou(x,!0):ke(x)}function ei(x,P){var V={};return P=di(P,3),hl(x,function(ye,Ye,lt){Qu(V,P(ye,Ye,lt),ye)}),V}function Ko(x,P){var V={};return P=di(P,3),hl(x,function(ye,Ye,lt){Qu(V,Ye,P(ye,Ye,lt))}),V}var al=kA(function(x,P,V){At(x,P,V)}),$l=kA(function(x,P,V,ye){At(x,P,V,ye)}),Xu=Oc(function(x,P){var V={};if(x==null)return V;var ye=!1;P=Ss(P,function(lt){return lt=Js(lt,x),ye||(ye=lt.length>1),lt}),Au(x,Af(x),V),ye&&(V=bs(V,E|S|O,Id));for(var Ye=P.length;Ye--;)Wa(V,P[Ye]);return V});function uh(x,P){return Eu(x,ni(di(P)))}var lc=Oc(function(x,P){return x==null?{}:Pt(x,P)});function Eu(x,P){if(x==null)return{};var V=Ss(Af(x),function(ye){return[ye]});return P=di(P),Ft(x,V,function(ye,Ye){return P(ye,Ye[0])})}function pA(x,P,V){P=Js(P,x);var ye=-1,Ye=P.length;for(Ye||(Ye=1,x=t);++ye<Ye;){var lt=x==null?t:x[Ca(P[ye])];lt===t&&(ye=Ye,lt=V),x=ac(lt)?lt.call(x):lt}return x}function wl(x,P,V){return x==null?x:kr(x,P,V)}function cu(x,P,V,ye){return ye=typeof ye=="function"?ye:t,x==null?x:kr(x,P,V,ye)}var DA=jf(Nr),LA=jf(Qr);function uc(x,P,V){var ye=vo(x),Ye=ye||zh(x)||Kp(x);if(P=di(P,4),V==null){var lt=x&&x.constructor;Ye?V=ye?new lt:[]:bl(x)?V=ac(lt)?Na(ja(x)):{}:V={}}return(Ye?Ba:hl)(x,function(Rt,Qt,on){return P(V,Rt,Qt,on)}),V}function du(x,P){return x==null?!0:Wa(x,P)}function Dd(x,P,V){return x==null?x:$u(x,P,Vu(V))}function kc(x,P,V,ye){return ye=typeof ye=="function"?ye:t,x==null?x:$u(x,P,Vu(V),ye)}function Do(x){return x==null?[]:Sh(x,Nr(x))}function mA(x){return x==null?[]:Sh(x,Qr(x))}function Va(x,P,V){return V===t&&(V=P,P=t),V!==t&&(V=F(V),V=V===V?V:0),P!==t&&(P=F(P),P=P===P?P:0),bu(F(x),P,V)}function ll(x,P,V){return P=v(P),V===t?(V=P,P=0):V=v(V),x=F(x),Mu(x,P,V)}function Bu(x,P,V){if(V&&typeof V!="boolean"&&B(x,P,V)&&(P=V=t),V===t&&(typeof P=="boolean"?(V=P,P=t):typeof x=="boolean"&&(V=x,x=t)),x===t&&P===t?(x=0,P=1):(x=v(x),P===t?(P=x,x=0):P=v(P)),x>P){var ye=x;x=P,P=ye}if(V||x%1||P%1){var Ye=md();return cs(x+Ye*(P-x+Or("1e-"+((Ye+"").length-1))),P)}return vn(x,P)}var wm=oh(function(x,P,V){return P=P.toLowerCase(),x+(V?td(P):P)});function td(x){return Jy(ne(x).toLowerCase())}function Z0(x){return x=ne(x),x&&x.replace(ns,nf).replace(oA,"")}function Ah(x,P,V){x=ne(x),P=Go(P);var ye=x.length;V=V===t?ye:bu(w(V),0,ye);var Ye=V;return V-=P.length,V>=0&&x.slice(V,Ye)==P}function nd(x){return x=ne(x),x&&Xt.test(x)?x.replace(Bt,iu):x}function Ju(x){return x=ne(x),x&&rn.test(x)?x.replace(wr,"\\$&"):x}var Ld=oh(function(x,P,V){return x+(V?"-":"")+P.toLowerCase()}),Hf=oh(function(x,P,V){return x+(V?" ":"")+P.toLowerCase()}),vC=bp("toLowerCase");function _C(x,P,V){x=ne(x),P=w(P);var ye=P?jc(x):0;if(!P||ye>=P)return x;var Ye=(P-ye)/2;return zf(Fu(Ye),V)+x+zf(ZA(Ye),V)}function CC(x,P,V){x=ne(x),P=w(P);var ye=P?jc(x):0;return P&&ye<P?x+zf(P-ye,V):x}function bC(x,P,V){x=ne(x),P=w(P);var ye=P?jc(x):0;return P&&ye<P?zf(P-ye,V)+x:x}function Zy(x,P,V){return V||P==null?P=0:P&&(P=+P),pd(ne(x).replace(Fn,""),P||0)}function Xy(x,P,V){return(V?B(x,P,V):P===t)?P=1:P=w(P),mn(ne(x),P)}function Zf(){var x=arguments,P=ne(x[0]);return x.length<3?P:P.replace(x[1],x[2])}var xC=oh(function(x,P,V){return x+(V?"_":"")+P.toLowerCase()});function wC(x,P,V){return V&&typeof V!="number"&&B(x,P,V)&&(P=V=t),V=V===t?Ne:V>>>0,V?(x=ne(x),x&&(typeof P=="string"||P!=null&&!H0(P))&&(P=Go(P),!P&&zc(x))?sa(Lu(x),0,V):x.split(P,V)):[]}var g3=oh(function(x,P,V){return x+(V?" ":"")+Jy(P)});function y3(x,P,V){return x=ne(x),V=V==null?0:bu(w(V),0,x.length),P=Go(P),x.slice(V,V+P.length)==P}function v3(x,P,V){var ye=et.templateSettings;V&&B(x,P,V)&&(P=t),x=ne(x),P=Re({},P,ye,Hu);var Ye=Re({},P.imports,ye.imports,Hu),lt=Nr(Ye),Rt=Sh(Ye,lt),Qt,on,Wn=0,qn=P.interpolate||Aa,cr="__p += '",Zr=QA((P.escape||Aa).source+"|"+qn.source+"|"+(qn===_t?qi:Aa).source+"|"+(P.evaluate||Aa).source+"|$","g"),xi="//# sourceURL="+(Uo.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ni+"]")+`
`;x.replace(Zr,function(eo,ws,Fs,Nh,zd,Gh){return Fs||(Fs=Nh),cr+=x.slice(Wn,Gh).replace(Al,Bl),ws&&(Qt=!0,cr+=`' +
__e(`+ws+`) +
'`),zd&&(on=!0,cr+=`';
`+zd+`;
__p += '`),Fs&&(cr+=`' +
((__t = (`+Fs+`)) == null ? '' : __t) +
'`),Wn=Gh+eo.length,eo}),cr+=`';
`;var Ji=Uo.call(P,"variable")&&P.variable;if(!Ji)cr=`with (obj) {
`+cr+`
}
`;else if(co.test(Ji))throw new _i(o);cr=(on?cr.replace(p,""):cr).replace(ze,"$1").replace(rt,"$1;"),cr="function("+(Ji||"obj")+`) {
`+(Ji?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Qt?", __e = _.escape":"")+(on?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+cr+`return __p
}`;var os=EC(function(){return Co(lt,xi+"return "+cr).apply(t,Rt)});if(os.source=cr,Rp(os))throw os;return os}function _3(x){return ne(x).toLowerCase()}function C3(x){return ne(x).toUpperCase()}function b3(x,P,V){if(x=ne(x),x&&(V||P===t))return Fc(x);if(!x||!(P=Go(P)))return x;var ye=Lu(x),Ye=Lu(P),lt=aA(ye,Ye),Rt=Uc(ye,Ye)+1;return sa(ye,lt,Rt).join("")}function x3(x,P,V){if(x=ne(x),x&&(V||P===t))return x.slice(0,$d(x)+1);if(!x||!(P=Go(P)))return x;var ye=Lu(x),Ye=Uc(ye,Lu(P))+1;return sa(ye,0,Ye).join("")}function w3(x,P,V){if(x=ne(x),x&&(V||P===t))return x.replace(Fn,"");if(!x||!(P=Go(P)))return x;var ye=Lu(x),Ye=aA(ye,Lu(P));return sa(ye,Ye).join("")}function jh(x,P){var V=de,ye=we;if(bl(P)){var Ye="separator"in P?P.separator:Ye;V="length"in P?w(P.length):V,ye="omission"in P?Go(P.omission):ye}x=ne(x);var lt=x.length;if(zc(x)){var Rt=Lu(x);lt=Rt.length}if(V>=lt)return x;var Qt=V-jc(ye);if(Qt<1)return ye;var on=Rt?sa(Rt,0,Qt).join(""):x.slice(0,Qt);if(Ye===t)return on+ye;if(Rt&&(Qt+=on.length-Qt),H0(Ye)){if(x.slice(Qt).search(Ye)){var Wn,qn=on;for(Ye.global||(Ye=QA(Ye.source,ne(yi.exec(Ye))+"g")),Ye.lastIndex=0;Wn=Ye.exec(qn);)var cr=Wn.index;on=on.slice(0,cr===t?Qt:cr)}}else if(x.indexOf(Go(Ye),Qt)!=Qt){var Zr=on.lastIndexOf(Ye);Zr>-1&&(on=on.slice(0,Zr))}return on+ye}function n1(x){return x=ne(x),x&&vt.test(x)?x.replace(pt,Vd):x}var MC=oh(function(x,P,V){return x+(V?" ":"")+P.toUpperCase()}),Jy=bp("toUpperCase");function SC(x,P,V){return x=ne(x),P=V?t:P,P===t?rf(x)?of(x):yp(x):x.match(P)||[]}var EC=Bn(function(x,P){try{return Hs(x,t,P)}catch(V){return Rp(V)?V:new _i(V)}}),FA=Oc(function(x,P){return Ba(P,function(V){V=Ca(V),Qu(x,V,$n(x[V],x))}),x});function Fd(x){var P=x==null?0:x.length,V=di();return x=P?Ss(x,function(ye){if(typeof ye[1]!="function")throw new Il(a);return[V(ye[0]),ye[1]]}):[],Bn(function(ye){for(var Ye=-1;++Ye<P;){var lt=x[Ye];if(Hs(lt[0],this,ye))return Hs(lt[1],this,ye)}})}function Mm(x){return Lf(bs(x,E))}function Ud(x){return function(){return x}}function Sm(x,P){return x==null||x!==x?P:x}var yf=Th(),iW=Th(!0);function ch(x){return x}function M3(x){return xe(typeof x=="function"?x:bs(x,E))}function oW(x){return ut(bs(x,E))}function sW(x,P){return ot(x,bs(P,E))}var aW=Bn(function(x,P){return function(V){return Ql(V,x,P)}}),lW=Bn(function(x,P){return function(V){return Ql(x,V,P)}});function S3(x,P,V){var ye=Nr(P),Ye=Mc(P,ye);V==null&&!(bl(P)&&(Ye.length||!ye.length))&&(V=P,P=x,x=this,Ye=Mc(P,Nr(P)));var lt=!(bl(V)&&"chain"in V)||!!V.chain,Rt=ac(x);return Ba(Ye,function(Qt){var on=P[Qt];x[Qt]=on,Rt&&(x.prototype[Qt]=function(){var Wn=this.__chain__;if(lt||Wn){var qn=x(this.__wrapped__),cr=qn.__actions__=Ta(this.__actions__);return cr.push({func:on,args:arguments,thisArg:x}),qn.__chain__=Wn,qn}return on.apply(x,Du([this.value()],arguments))})}),x}function uW(){return gr._===this&&(gr._=Tl),this}function E3(){}function AW(x){return x=w(x),Bn(function(P){return St(P,x)})}var cW=Uf(Ss),dW=Uf(ld),hW=Uf(sA);function JI(x){return K(x)?tf(Ca(x)):Tt(x)}function fW(x){return function(P){return x==null?t:wu(x,P)}}var pW=Od(),mW=Od(!0);function B3(){return[]}function O3(){return!1}function gW(){return{}}function yW(){return""}function vW(){return!0}function _W(x,P){if(x=w(x),x<1||x>$e)return[];var V=Ne,ye=cs(x,Ne);P=di(P),x-=Ne;for(var Ye=dd(ye,P);++V<x;)P(V);return Ye}function CW(x){return vo(x)?Ss(x,Ca):KA(x)?[x]:Ta(aa(ne(x)))}function bW(x){var P=++Nc;return ne(x)+P}var xW=sh(function(x,P){return x+P},0),wW=Rl("ceil"),MW=sh(function(x,P){return x/P},1),SW=Rl("floor");function EW(x){return x&&x.length?EA(x,ch,au):t}function BW(x,P){return x&&x.length?EA(x,di(P,2),au):t}function OW(x){return Ad(x,ch)}function IW(x,P){return Ad(x,di(P,2))}function kW(x){return x&&x.length?EA(x,ch,qe):t}function TW(x,P){return x&&x.length?EA(x,di(P,2),qe):t}var PW=sh(function(x,P){return x*P},1),RW=Rl("round"),KW=sh(function(x,P){return x-P},0);function DW(x){return x&&x.length?Mh(x,ch):0}function LW(x,P){return x&&x.length?Mh(x,di(P,2)):0}return et.after=Cn,et.ary=ar,et.assign=ce,et.assignIn=Ce,et.assignInWith=Re,et.assignWith=Le,et.at=je,et.before=dr,et.bind=$n,et.bindAll=FA,et.bindKey=zr,et.castArray=lC,et.chain=qf,et.chunk=Ya,et.compact=xa,et.concat=hs,et.cond=Fd,et.conforms=Mm,et.constant=Ud,et.countBy=Vg,et.create=He,et.curry=ii,et.curryRight=li,et.debounce=sl,et.defaults=st,et.defaultsDeep=gt,et.defer=an,et.delay=Zt,et.difference=gi,et.differenceBy=Xo,et.differenceWith=la,et.drop=fa,et.dropRight=ks,et.dropRightWhile=Kl,et.dropWhile=Ro,et.fill=Pd,et.filter=ym,et.flatMap=ed,et.flatMapDeep=Fh,et.flatMapDepth=o0,et.flatten=Xc,et.flattenDeep=vl,et.flattenDepth=_l,et.flip=An,et.flow=yf,et.flowRight=iW,et.fromPairs=df,et.functions=Ln,et.functionsIn=pn,et.groupBy=a0,et.initial=hf,et.intersection=$m,et.intersectionBy=ff,et.intersectionWith=Vm,et.invert=lr,et.invertBy=En,et.invokeMap=Y0,et.iteratee=M3,et.keyBy=l0,et.keys=Nr,et.keysIn=Qr,et.map=kp,et.mapKeys=ei,et.mapValues=Ko,et.matches=oW,et.matchesProperty=sW,et.memoize=yr,et.merge=al,et.mergeWith=$l,et.method=aW,et.methodOf=lW,et.mixin=S3,et.negate=ni,et.nthArg=AW,et.omit=Xu,et.omitBy=uh,et.once=Ii,et.orderBy=$f,et.over=cW,et.overArgs=Oi,et.overEvery=dW,et.overSome=hW,et.partial=zi,et.partialRight=Ls,et.partition=Tp,et.pick=lc,et.pickBy=Eu,et.property=JI,et.propertyOf=fW,et.pull=fm,et.pullAll=Gf,et.pullAllBy=dA,et.pullAllWith=Kh,et.pullAt=Jc,et.range=pW,et.rangeRight=mW,et.rearg=Jo,et.reject=_,et.remove=sc,et.rest=Uh,et.reverse=Wf,et.sampleSize=W,et.set=wl,et.setWith=cu,et.shuffle=ae,et.slice=U0,et.sortBy=It,et.sortedUniq=z0,et.sortedUniqBy=Rd,et.split=wC,et.spread=Zg,et.tail=j0,et.take=Xm,et.takeRight=Jm,et.takeRightWhile=$a,et.takeWhile=N0,et.tap=n0,et.throttle=oC,et.thru=Kd,et.toArray=h,et.toPairs=DA,et.toPairsIn=LA,et.toPath=CW,et.toPlainObject=G,et.transform=uc,et.unary=sC,et.union=Wy,et.unionBy=G0,et.unionWith=e0,et.uniq=Dh,et.uniqBy=Qy,et.uniqWith=Bp,et.unset=du,et.unzip=t0,et.unzipWith=ol,et.update=Dd,et.updateWith=kc,et.values=Do,et.valuesIn=mA,et.without=qg,et.words=SC,et.wrap=aC,et.xor=hA,et.xorBy=W0,et.xorWith=Yg,et.zip=Lh,et.zipObject=Op,et.zipObjectDeep=pm,et.zipWith=Zu,et.entries=DA,et.entriesIn=LA,et.extend=Ce,et.extendWith=Re,S3(et,et),et.add=xW,et.attempt=EC,et.camelCase=wm,et.capitalize=td,et.ceil=wW,et.clamp=Va,et.clone=A3,et.cloneDeep=Pp,et.cloneDeepWith=AC,et.cloneWith=uC,et.conformsTo=cC,et.deburr=Z0,et.defaultTo=Sm,et.divide=MW,et.endsWith=Ah,et.eq=lh,et.escape=nd,et.escapeRegExp=Ju,et.every=Hg,et.find=vm,et.findIndex=yl,et.findKey=jt,et.findLast=Ip,et.findLastIndex=PA,et.findLastKey=Mt,et.floor=SW,et.forEach=Yf,et.forEachRight=s0,et.forIn=Ke,et.forInRight=nt,et.forOwn=Ot,et.forOwnRight=ln,et.get=bn,et.gt=dC,et.gte=c3,et.has=Vn,et.hasIn=Dn,et.head=Nf,et.identity=ch,et.includes=_m,et.indexOf=Rh,et.inRange=ll,et.invoke=Wr,et.isArguments=bm,et.isArray=vo,et.isArrayBuffer=$0,et.isArrayLike=Ic,et.isArrayLikeObject=Cl,et.isBoolean=hC,et.isBuffer=zh,et.isDate=Xg,et.isElement=Jg,et.isEmpty=d3,et.isEqual=h3,et.isEqualWith=f3,et.isError=Rp,et.isFinite=fA,et.isFunction=ac,et.isInteger=e1,et.isLength=V0,et.isMap=fC,et.isMatch=pC,et.isMatchWith=mC,et.isNaN=p3,et.isNative=gC,et.isNil=Yy,et.isNull=qy,et.isNumber=$y,et.isObject=bl,et.isObjectLike=xl,et.isPlainObject=Vf,et.isRegExp=H0,et.isSafeInteger=yC,et.isSet=t1,et.isString=xm,et.isSymbol=KA,et.isTypedArray=Kp,et.isUndefined=Vy,et.isWeakMap=Hy,et.isWeakSet=m3,et.join=pf,et.kebabCase=Ld,et.last=RA,et.lastIndexOf=hm,et.lowerCase=Hf,et.lowerFirst=vC,et.lt=f,et.lte=u,et.max=EW,et.maxBy=BW,et.mean=OW,et.meanBy=IW,et.min=kW,et.minBy=TW,et.stubArray=B3,et.stubFalse=O3,et.stubObject=gW,et.stubString=yW,et.stubTrue=vW,et.multiply=PW,et.nth=F0,et.noConflict=uW,et.noop=E3,et.now=Gt,et.pad=_C,et.padEnd=CC,et.padStart=bC,et.parseInt=Zy,et.random=Bu,et.reduce=Cm,et.reduceRight=m,et.repeat=Xy,et.replace=Zf,et.result=pA,et.round=RW,et.runInContext=$t,et.sample=L,et.size=ge,et.snakeCase=xC,et.some=Ze,et.sortedIndex=Hm,et.sortedIndexBy=Gy,et.sortedIndexOf=mf,et.sortedLastIndex=Qg,et.sortedLastIndexBy=Zm,et.sortedLastIndexOf=Qf,et.startCase=g3,et.startsWith=y3,et.subtract=KW,et.sum=DW,et.sumBy=LW,et.template=v3,et.times=_W,et.toFinite=v,et.toInteger=w,et.toLength=D,et.toLower=_3,et.toNumber=F,et.toSafeInteger=Z,et.toString=ne,et.toUpper=C3,et.trim=b3,et.trimEnd=x3,et.trimStart=w3,et.truncate=jh,et.unescape=n1,et.uniqueId=bW,et.upperCase=MC,et.upperFirst=Jy,et.each=Yf,et.eachRight=s0,et.first=Nf,S3(et,function(){var x={};return hl(et,function(P,V){Uo.call(et.prototype,V)||(x[V]=P)}),x}(),{chain:!1}),et.VERSION=r,Ba(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){et[x].placeholder=et}),Ba(["drop","take"],function(x,P){$r.prototype[x]=function(V){V=V===t?1:zo(w(V),0);var ye=this.__filtered__&&!P?new $r(this):this.clone();return ye.__filtered__?ye.__takeCount__=cs(V,ye.__takeCount__):ye.__views__.push({size:cs(V,Ne),type:x+(ye.__dir__<0?"Right":"")}),ye},$r.prototype[x+"Right"]=function(V){return this.reverse()[x](V).reverse()}}),Ba(["filter","map","takeWhile"],function(x,P){var V=P+1,ye=V==Pe||V==it;$r.prototype[x]=function(Ye){var lt=this.clone();return lt.__iteratees__.push({iteratee:di(Ye,3),type:V}),lt.__filtered__=lt.__filtered__||ye,lt}}),Ba(["head","last"],function(x,P){var V="take"+(P?"Right":"");$r.prototype[x]=function(){return this[V](1).value()[0]}}),Ba(["initial","tail"],function(x,P){var V="drop"+(P?"":"Right");$r.prototype[x]=function(){return this.__filtered__?new $r(this):this[V](1)}}),$r.prototype.compact=function(){return this.filter(ch)},$r.prototype.find=function(x){return this.filter(x).head()},$r.prototype.findLast=function(x){return this.reverse().find(x)},$r.prototype.invokeMap=Bn(function(x,P){return typeof x=="function"?new $r(this):this.map(function(V){return Ql(V,x,P)})}),$r.prototype.reject=function(x){return this.filter(ni(di(x)))},$r.prototype.slice=function(x,P){x=w(x);var V=this;return V.__filtered__&&(x>0||P<0)?new $r(V):(x<0?V=V.takeRight(-x):x&&(V=V.drop(x)),P!==t&&(P=w(P),V=P<0?V.dropRight(-P):V.take(P-x)),V)},$r.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},$r.prototype.toArray=function(){return this.take(Ne)},hl($r.prototype,function(x,P){var V=/^(?:filter|find|map|reject)|While$/.test(P),ye=/^(?:head|last)$/.test(P),Ye=et[ye?"take"+(P=="last"?"Right":""):P],lt=ye||/^find/.test(P);Ye&&(et.prototype[P]=function(){var Rt=this.__wrapped__,Qt=ye?[1]:arguments,on=Rt instanceof $r,Wn=Qt[0],qn=on||vo(Rt),cr=function(ws){var Fs=Ye.apply(et,Du([ws],Qt));return ye&&Zr?Fs[0]:Fs};qn&&V&&typeof Wn=="function"&&Wn.length!=1&&(on=qn=!1);var Zr=this.__chain__,xi=!!this.__actions__.length,Ji=lt&&!Zr,os=on&&!xi;if(!lt&&qn){Rt=os?Rt:new $r(this);var eo=x.apply(Rt,Qt);return eo.__actions__.push({func:Kd,args:[cr],thisArg:t}),new Ki(eo,Zr)}return Ji&&os?x.apply(this,Qt):(eo=this.thru(cr),Ji?ye?eo.value()[0]:eo.value():eo)})}),Ba(["pop","push","shift","sort","splice","unshift"],function(x){var P=yu[x],V=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",ye=/^(?:pop|shift)$/.test(x);et.prototype[x]=function(){var Ye=arguments;if(ye&&!this.__chain__){var lt=this.value();return P.apply(vo(lt)?lt:[],Ye)}return this[V](function(Rt){return P.apply(vo(Rt)?Rt:[],Ye)})}}),hl($r.prototype,function(x,P){var V=et[P];if(V){var ye=V.name+"";Uo.call(ju,ye)||(ju[ye]=[]),ju[ye].push({name:P,func:V})}}),ju[Bd(t,q).name]=[{name:"wrapper",func:t}],$r.prototype.clone=Es,$r.prototype.reverse=yd,$r.prototype.value=th,et.prototype.at=r0,et.prototype.chain=gf,et.prototype.commit=mm,et.prototype.next=Q0,et.prototype.plant=$g,et.prototype.reverse=gm,et.prototype.toJSON=et.prototype.valueOf=et.prototype.value=q0,et.prototype.first=et.prototype.head,bA&&(et.prototype[bA]=i0),et},gu=mc();vi?((vi.exports=gu)._=gu,Ir._=gu):gr._=gu}).call(Sq)}(yv,yv.exports)),yv.exports}var $2=Eq();const t6=La($2);function Bq(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var G3,G8;function Oq(){if(G8)return G3;G8=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return G3=n,G3}var Iq=Oq();const W8=La(Iq);var kq=8,Tq={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Pq={"*":{type:"source"}},Rq=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Kq={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Dq={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Lq={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Fq={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Uq={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},zq={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},jq={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Nq=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Gq={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wq={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Qq={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qq={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yq={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$q={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vq={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hq={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zq={type:"array",value:"*"},Xq={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Jq={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},eY={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},tY={type:"array",value:"*",minimum:1},nY={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},rY={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},iY={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},oY={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},sY=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],aY={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},lY={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},uY={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},AY={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},cY={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},dY={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},hY={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fY={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pY={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},mY={"*":{type:"string"}},Ys={$version:kq,$root:Tq,sources:Pq,source:Rq,source_vector:Kq,source_raster:Dq,source_raster_dem:Lq,source_geojson:Fq,source_video:Uq,source_image:zq,layer:jq,layout:Nq,layout_background:Gq,layout_fill:Wq,layout_circle:Qq,layout_heatmap:qq,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Yq,layout_symbol:$q,layout_raster:Vq,layout_hillshade:Hq,filter:Zq,filter_operator:Xq,geometry_type:Jq,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:eY,expression:tY,light:nY,sky:rY,terrain:iY,projection:oY,paint:sY,paint_fill:aY,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:lY,paint_circle:uY,paint_heatmap:AY,paint_symbol:cY,paint_raster:dY,paint_hillshade:hY,paint_background:fY,transition:pY,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:mY};const gY=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function yY(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return gY.forEach(r=>{r in e&&(t[r]=e[r])}),t}function vY(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=yY(n[t],e[n[t].ref]));return n}function wa(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!wa(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!wa(n[r],e[r]))return!1;return!0}return n===e}function Cf(n,e){n.push(e)}function tF(n,e,t){Cf(t,{command:"addSource",args:[n,e[n]]})}function nF(n,e,t){Cf(e,{command:"removeSource",args:[n]}),t[n]=!0}function _Y(n,e,t,r){nF(n,t,r),tF(n,e,t)}function CY(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!wa(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!wa(n[t][r],e[t][r]))return!1;return!0}function bY(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||nF(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?wa(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&CY(n,e,i)?Cf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):_Y(i,e,t,r)):tF(i,e,t))}function TC(n,e,t,r,i,s){n=n||{},e=e||{};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(wa(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]}));for(const a in e)!Object.prototype.hasOwnProperty.call(e,a)||Object.prototype.hasOwnProperty.call(n,a)||wa(n[a],e[a])||t.push({command:s,args:[r,a,e[a],i]})}function Q8(n){return n.id}function q8(n,e){return n[e.id]=e,n}function xY(n,e,t){n=n||[],e=e||[];const r=n.map(Q8),i=e.map(Q8),s=n.reduce(q8,{}),a=e.reduce(q8,{}),o=r.slice(),d=Object.create(null);let g,b,E,S,O;for(let k=0,U=0;k<r.length;k++)g=r[k],Object.prototype.hasOwnProperty.call(a,g)?U++:(Cf(t,{command:"removeLayer",args:[g]}),o.splice(o.indexOf(g,U),1));for(let k=0,U=0;k<i.length;k++)g=i[i.length-1-k],o[o.length-1-k]!==g&&(Object.prototype.hasOwnProperty.call(s,g)?(Cf(t,{command:"removeLayer",args:[g]}),o.splice(o.lastIndexOf(g,o.length-U),1)):U++,S=o[o.length-k],Cf(t,{command:"addLayer",args:[a[g],S]}),o.splice(o.length-k,0,g),d[g]=!0);for(let k=0;k<i.length;k++)if(g=i[k],b=s[g],E=a[g],!(d[g]||wa(b,E))){if(!wa(b.source,E.source)||!wa(b["source-layer"],E["source-layer"])||!wa(b.type,E.type)){Cf(t,{command:"removeLayer",args:[g]}),S=o[o.lastIndexOf(g)+1],Cf(t,{command:"addLayer",args:[E,S]});continue}TC(b.layout,E.layout,t,g,null,"setLayoutProperty"),TC(b.paint,E.paint,t,g,null,"setPaintProperty"),wa(b.filter,E.filter)||Cf(t,{command:"setFilter",args:[g,E.filter]}),(!wa(b.minzoom,E.minzoom)||!wa(b.maxzoom,E.maxzoom))&&Cf(t,{command:"setLayerZoomRange",args:[g,E.minzoom,E.maxzoom]});for(O in b)Object.prototype.hasOwnProperty.call(b,O)&&(O==="layout"||O==="paint"||O==="filter"||O==="metadata"||O==="minzoom"||O==="maxzoom"||(O.indexOf("paint.")===0?TC(b[O],E[O],t,g,O.slice(6),"setPaintProperty"):wa(b[O],E[O])||Cf(t,{command:"setLayerProperty",args:[g,O,E[O]]})));for(O in E)!Object.prototype.hasOwnProperty.call(E,O)||Object.prototype.hasOwnProperty.call(b,O)||O==="layout"||O==="paint"||O==="filter"||O==="metadata"||O==="minzoom"||O==="maxzoom"||(O.indexOf("paint.")===0?TC(b[O],E[O],t,g,O.slice(6),"setPaintProperty"):wa(b[O],E[O])||Cf(t,{command:"setLayerProperty",args:[g,O,E[O]]}))}}function wY(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!wa(n.version,e.version))return[{command:"setStyle",args:[e]}];wa(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),wa(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),wa(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),wa(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),wa(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),wa(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),wa(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),wa(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),wa(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),wa(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),wa(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),wa(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),wa(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];bY(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(a=>{"source"in a&&r[a.source]?t.push({command:"removeLayer",args:[a.id]}):s.push(a)}),t=t.concat(i),xY(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class Sr{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function py(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class Gp extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}let MY=class rF{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new rF(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}};const V2={kind:"null"},Pr={kind:"number"},ss={kind:"string"},Wo={kind:"boolean"},Vp={kind:"color"},H2={kind:"projectionDefinition"},J1={kind:"object"},qo={kind:"value"},SY={kind:"error"},Z2={kind:"collator"},X2={kind:"formatted"},J2={kind:"padding"},k_={kind:"resolvedImage"},ex={kind:"variableAnchorOffsetCollection"};function Yh(n,e){return{kind:"array",itemType:n,N:e}}function Zl(n){if(n.kind==="array"){const e=Zl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const EY=[V2,Pr,ss,Wo,Vp,H2,X2,J1,Yh(qo),J2,k_,ex];function Zv(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Zv(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of EY)if(!Zv(t,e))return null}}return`Expected ${Zl(n)} but found ${Zl(e)} instead.`}function bB(n,e){return e.some(t=>t.kind===n.kind)}function Cg(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function o1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const iF=.96422,oF=1,sF=.82521,aF=4/29,ey=6/29,lF=3*ey*ey,BY=ey*ey*ey,OY=Math.PI/180,IY=180/Math.PI;function uF(n){return n=n%360,n<0&&(n+=360),n}function AF([n,e,t,r]){n=W3(n),e=W3(e),t=W3(t);let i,s;const a=Q3((.2225045*n+.7168786*e+.0606169*t)/oF);n===e&&e===t?i=s=a:(i=Q3((.4360747*n+.3850649*e+.1430804*t)/iF),s=Q3((.0139322*n+.0971045*e+.7141733*t)/sF));const o=116*a-16;return[o<0?0:o,500*(i-a),200*(a-s),r]}function W3(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Q3(n){return n>BY?Math.pow(n,1/3):n/lF+aF}function cF([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,a=isNaN(t)?i:i-t/200;return i=oF*Y3(i),s=iF*Y3(s),a=sF*Y3(a),[q3(3.1338561*s-1.6168667*i-.4906146*a),q3(-.9787684*s+1.9161415*i+.033454*a),q3(.0719453*s-.2289914*i+1.4052427*a),r]}function q3(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function Y3(n){return n>ey?n*n*n:lF*(n-aF)}function kY(n){const[e,t,r,i]=AF(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?uF(Math.atan2(r,t)*IY):NaN,s,e,i]}function TY([n,e,t,r]){return n=isNaN(n)?0:n*OY,cF([t,Math.cos(n)*e,Math.sin(n)*e,r])}function PY([n,e,t,r]){n=uF(n),e/=100,t/=100;function i(s){const a=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(a-3,9-a,1))}return[i(0),i(8),i(4),r]}function RY(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=KY[n];if(e){const[i,s,a]=e;return[i/255,s/255,a/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let a=1;return[PC(n.slice(a,a+=s)),PC(n.slice(a,a+=s)),PC(n.slice(a,a+=s)),PC(n.slice(a,a+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[a,o,d,g,b,E,S,O,k,U,z,q]=s,Q=[g||" ",S||" ",U].join("");if(Q==="  "||Q==="  /"||Q===",,"||Q===",,,"){const re=[d,E,k].join(""),X=re==="%%%"?100:re===""?255:0;if(X){const Y=[R1(+o/X,0,1),R1(+b/X,0,1),R1(+O/X,0,1),z?Y8(+z,q):1];if($8(Y))return Y}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,a,o,d,g,b,E,S]=r,O=[a||" ",d||" ",b].join("");if(O==="  "||O==="  /"||O===",,"||O===",,,"){const k=[+s,R1(+o,0,100),R1(+g,0,100),E?Y8(+E,S):1];if($8(k))return PY(k)}}}function PC(n){return parseInt(n.padEnd(2,n),16)/255}function Y8(n,e){return R1(e?n/100:n,0,1)}function R1(n,e,t){return Math.min(Math.max(e,n),t)}function $8(n){return!n.some(Number.isNaN)}const KY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function S0(n,e,t){return n+t*(e-n)}function Xv(n,e,t){return n.map((r,i)=>S0(r,e[i],t))}function DY(n){return n==="rgb"||n==="hcl"||n==="lab"}let Ul=class K1{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof K1)return e;if(typeof e!="string")return;const t=RY(e);if(t)return new K1(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",kY(this.rgb))}get lab(){return this.overwriteGetter("lab",AF(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,a,o,d]=Xv(e.rgb,t.rgb,r);return new K1(s,a,o,d,!1)}case"hcl":{const[s,a,o,d]=e.hcl,[g,b,E,S]=t.hcl;let O,k;if(!isNaN(s)&&!isNaN(g)){let re=g-s;g>s&&re>180?re-=360:g<s&&s-g>180&&(re+=360),O=s+r*re}else isNaN(s)?isNaN(g)?O=NaN:(O=g,(o===1||o===0)&&(k=b)):(O=s,(E===1||E===0)&&(k=a));const[U,z,q,Q]=TY([O,k??S0(a,b,r),S0(o,E,r),S0(d,S,r)]);return new K1(U,z,q,Q,!1)}case"lab":{const[s,a,o,d]=cF(Xv(e.lab,t.lab,r));return new K1(s,a,o,d,!1)}}}};Ul.black=new Ul(0,0,0,1);Ul.white=new Ul(1,1,1,1);Ul.transparent=new Ul(0,0,0,0);Ul.red=new Ul(1,0,0,1);let xB=class{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}};const LY=["bottom","center","top"];let n6=class{constructor(e,t,r,i,s,a){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=a}},Ey=class vb{constructor(e){this.sections=e}static fromString(e){return new vb([new n6(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof vb?e:vb.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}};class Wd{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Wd)return e;if(typeof e=="number")return new Wd([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Wd(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Wd(Xv(e.values,t.values,r))}}let rA=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const FY=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Bf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Bf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!FY.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Bf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new rA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const a=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new rA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);a.push(i[o]);const[d,g]=i[o+1],[b,E]=s[o+1];a.push([S0(d,b,r),S0(g,E,r)])}return new Bf(a)}}let Dg=class dF{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new dF({name:e,available:!1}):null}};class xf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new xf(e,t,r)}static parse(e){if(e instanceof xf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new xf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new xf(e.from,e.to,e.transition);if(typeof e=="string")return new xf(e,e,1)}}function hF(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Jv(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof xf||n instanceof Ul||n instanceof xB||n instanceof Ey||n instanceof Wd||n instanceof Bf||n instanceof Dg)return!0;if(Array.isArray(n)){for(const e of n)if(!Jv(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!Jv(n[e]))return!1;return!0}else return!1}function NA(n){if(n===null)return V2;if(typeof n=="string")return ss;if(typeof n=="boolean")return Wo;if(typeof n=="number")return Pr;if(n instanceof Ul)return Vp;if(n instanceof xf)return H2;if(n instanceof xB)return Z2;if(n instanceof Ey)return X2;if(n instanceof Wd)return J2;if(n instanceof Bf)return ex;if(n instanceof Dg)return k_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=NA(r);if(!t)t=i;else{if(t===i)continue;t=qo;break}}return Yh(t||qo,e)}else return J1}function Fv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Ul||n instanceof xf||n instanceof Ey||n instanceof Wd||n instanceof Bf||n instanceof Dg?n.toString():JSON.stringify(n)}let zb=class fF{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Jv(e[1]))return t.error("invalid value");const r=e[1];let i=NA(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new fF(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}};const RC={string:ss,number:Pr,boolean:Wo,object:J1};let Rm=class pF{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in RC)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=RC[g],r++}else o=qo;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],r++}i=Yh(o,d)}else{if(!RC[s])throw new Error(`Types doesn't contain name = ${s}`);i=RC[s]}const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,qo);if(!o)return null;a.push(o)}return new pF(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(Zv(this.type,NA(r))){if(t===this.args.length-1)throw new rA(`Expected value to be of type ${Zl(this.type)}, but found ${Zl(NA(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const V8={"to-boolean":Wo,"to-color":Vp,"to-number":Pr,"to-string":ss};let G1=class mF{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!V8[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=V8[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,qo);if(!o)return null;s.push(o)}return new mF(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Ul)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=hF(t[0],t[1],t[2],t[3]),!r))return new Ul(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new rA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Wd.parse(t);if(i)return i}throw new rA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Bf.parse(t);if(i)return i}throw new rA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new rA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ey.fromString(Fv(this.args[0].evaluate(e)));case"resolvedImage":return Dg.fromString(Fv(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Fv(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};const UY=["Unknown","Point","LineString","Polygon"];let gF=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?UY[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ul.parse(e)),t}},yF=class vF{constructor(e,t,r=[],i,s=new MY,a=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=a,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new Rm(s,[i]):a==="coerce"?new G1(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,d=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&d.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&(d.kind==="string"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(d.kind==="value"||d.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="padding"&&(d.kind==="value"||d.kind==="number"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(o.kind==="variableAnchorOffsetCollection"&&(d.kind==="value"||d.kind==="array"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,d))return null}if(!(a instanceof zb)&&a.type.kind!=="resolvedImage"&&this._isConstant(a)){const o=new gF;try{a=new zb(a.type,a.evaluate(o))}catch(d){return this.error(d.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new vF(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Gp(r,e))}checkSubtype(e,t){const r=Zv(e,t);return r&&this.error(r),r}},_F=class CF{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new CF(r,i):null}outputDefined(){return this.result.outputDefined()}},bF=class xF{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new xF(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},zY=class wF{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Pr),i=t.parse(e[2],2,Yh(t.expectedType||qo));if(!r||!i)return null;const s=i.type;return new wF(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new rA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new rA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new rA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},jY=class MF{constructor(e,t){this.type=Wo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,qo),i=t.parse(e[2],2,qo);return!r||!i?null:bB(r.type,[Wo,ss,Pr,V2,qo])?new MF(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Cg(t,["boolean","string","number","null"]))throw new rA(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(NA(t))} instead.`);if(!Cg(r,["string","array"]))throw new rA(`Expected second argument to be of type array or string, but found ${Zl(NA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},NY=class r6{constructor(e,t,r){this.type=Pr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,qo),i=t.parse(e[2],2,qo);if(!r||!i)return null;if(!bB(r.type,[Wo,ss,Pr,V2,qo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Pr);return s?new r6(r,i,s):null}else return new r6(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Cg(t,["boolean","string","number","null"]))throw new rA(`Expected first argument to be of type boolean, string, number or null, but found ${Zl(NA(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Cg(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(Cg(r,["array"]))return r.indexOf(t,i);throw new rA(`Expected second argument to be of type array or string, but found ${Zl(NA(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},GY=class SF{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const E=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const k of b){if(typeof k!="number"&&typeof k!="string")return S.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return S.error("Numeric branch labels must be integer values.");if(!r)r=NA(k);else if(S.checkSubtype(r,NA(k)))return null;if(typeof s[String(k)]<"u")return S.error("Branch labels must be unique.");s[String(k)]=a.length}const O=t.parse(E,g,i);if(!O)return null;i=i||O.type,a.push(O)}const o=t.parse(e[1],1,qo);if(!o)return null;const d=t.parse(e[e.length-1],e.length-1,i);return!d||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new SF(r,i,o,s,a,d)}evaluate(e){const t=this.input.evaluate(e);return(NA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},WY=class EF{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,Wo);if(!o)return null;const d=t.parse(e[a+1],a+1,r);if(!d)return null;i.push([o,d]),r=r||d.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new EF(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}},QY=class i6{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,qo),i=t.parse(e[2],2,Pr);if(!r||!i)return null;if(!bB(r.type,[Yh(qo),ss,qo]))return t.error(`Expected first argument to be of type array or string, but found ${Zl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Pr);return s?new i6(r.type,r,i,s):null}else return new i6(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Cg(t,["string"]))return[...t].slice(r,i).join("");if(Cg(t,["array"]))return t.slice(r,i);throw new rA(`Expected first argument to be of type array or string, but found ${Zl(NA(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function tx(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new rA("Input is not a number.");return 0}let BF=class OF{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Pr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],d=e[a+1],g=a,b=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const E=t.parse(d,b,s);if(!E)return null;s=s||E.type,i.push([o,E])}return new OF(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=tx(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function qY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $3,H8;function YY(){if(H8)return $3;H8=1,$3=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}var o=0,d=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:d=r,r=(d-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},$3}var $Y=YY(),VY=qY($Y);let Lm=class o6{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=V3(t,e.base,r,i);else if(e.name==="linear")s=V3(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new VY(a[0],a[1],a[2],a[3]).solve(V3(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Pr),!s)return null;const o=[];let d=null;r==="interpolate-hcl"||r==="interpolate-lab"?d=Vp:t.expectedType&&t.expectedType.kind!=="value"&&(d=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],E=a[g+1],S=g+3,O=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(o.length&&o[o.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const k=t.parse(E,O,d);if(!k)return null;d=d||k.type,o.push([b,k])}return!o1(d,Pr)&&!o1(d,H2)&&!o1(d,Vp)&&!o1(d,J2)&&!o1(d,ex)&&!o1(d,Yh(Pr))?t.error(`Type ${Zl(d)} is not interpolatable.`):new o6(d,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=tx(t,i),o=t[a],d=t[a+1],g=o6.interpolationFactor(this.interpolation,i,o,d),b=r[a].evaluate(e),E=r[a+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return S0(b,E,g);case"color":return Ul.interpolate(b,E,g);case"padding":return Wd.interpolate(b,E,g);case"variableAnchorOffsetCollection":return Bf.interpolate(b,E,g);case"array":return Xv(b,E,g);case"projectionDefinition":return xf.interpolate(b,E,g)}case"interpolate-hcl":return Ul.interpolate(b,E,g,"hcl");case"interpolate-lab":return Ul.interpolate(b,E,g,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function V3(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const HY={color:Ul.interpolate,number:S0,padding:Wd.interpolate,variableAnchorOffsetCollection:Bf.interpolate,array:Xv};let IF=class s6{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const d=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!d)return null;r=r||d.type,s.push(d)}if(!r)throw new Error("No output type");return i&&s.some(o=>Zv(i,o.type))?new s6(qo,s):new s6(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof Dg&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function Z8(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ZY(n,e,t){return e===t}function XY(n,e,t){return e!==t}function JY(n,e,t){return e<t}function e$(n,e,t){return e>t}function t$(n,e,t){return e<=t}function n$(n,e,t){return e>=t}function kF(n,e,t,r){return r.compare(e,t)===0}function r$(n,e,t,r){return!kF(n,e,t,r)}function i$(n,e,t,r){return r.compare(e,t)<0}function o$(n,e,t,r){return r.compare(e,t)>0}function s$(n,e,t,r){return r.compare(e,t)<=0}function a$(n,e,t,r){return r.compare(e,t)>=0}function By(n,e,t){const r=n!=="=="&&n!=="!=";return class TF{constructor(s,a,o){this.type=Wo,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let d=a.parse(s[1],1,qo);if(!d)return null;if(!Z8(o,d.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${Zl(d.type)}'.`);let g=a.parse(s[2],2,qo);if(!g)return null;if(!Z8(o,g.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${Zl(g.type)}'.`);if(d.type.kind!==g.type.kind&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${Zl(d.type)}' and '${Zl(g.type)}'.`);r&&(d.type.kind==="value"&&g.type.kind!=="value"?d=new Rm(g.type,[d]):d.type.kind!=="value"&&g.type.kind==="value"&&(g=new Rm(d.type,[g])));let b=null;if(s.length===4){if(d.type.kind!=="string"&&g.type.kind!=="string"&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(s[3],3,Z2),!b)return null}return new TF(d,g,b)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const d=NA(a),g=NA(o);if(d.kind!==g.kind||!(d.kind==="string"||d.kind==="number"))throw new rA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${d.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const d=NA(a),g=NA(o);if(d.kind!=="string"||g.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const l$=By("==",ZY,kF),u$=By("!=",XY,r$),A$=By("<",JY,i$),c$=By(">",e$,o$),d$=By("<=",t$,s$),h$=By(">=",n$,a$);let PF=class RF{constructor(e,t,r){this.type=Z2,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Wo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Wo);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,ss),!a)?null:new RF(i,s,a)}evaluate(e){return new xB(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},f$=class KF{constructor(e,t,r,i,s){this.type=ss,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Pr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,ss),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,ss),!a))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,Pr),!o))return null;let d=null;return i["max-fraction-digits"]&&(d=t.parse(i["max-fraction-digits"],1,Pr),!d)?null:new KF(r,s,a,o,d)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},p$=class DF{constructor(e){this.type=X2,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let d=null;if(o["font-scale"]&&(d=t.parse(o["font-scale"],1,Pr),!d))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,Yh(ss)),!g))return null;let b=null;if(o["text-color"]&&(b=t.parse(o["text-color"],1,Vp),!b))return null;let E=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!LY.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(E=t.parse(o["vertical-align"],1,ss),!E)return null}const S=i[i.length-1];S.scale=d,S.font=g,S.textColor=b,S.verticalAlign=E}else{const d=t.parse(e[a],1,qo);if(!d)return null;const g=d.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:d,scale:null,font:null,textColor:null,verticalAlign:null})}}return new DF(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return NA(i)===k_?new n6("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new n6(Fv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new Ey(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}},m$=class LF{constructor(e){this.type=k_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ss);return r?new LF(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Dg.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}},g$=class FF{constructor(e){this.type=Pr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Zl(r.type)} instead.`):new FF(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new rA(`Expected value to be of type string or array, but found ${Zl(NA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}};const Hp=8192;function y$(n,e){const t=v$(n[0]),r=C$(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*Hp),Math.round(r*i*Hp)]}function wB(n,e){const t=Math.pow(2,e.z),r=(n[0]/Hp+e.x)/t,i=(n[1]/Hp+e.y)/t;return[_$(r),b$(i)]}function v$(n){return(180+n)/360}function _$(n){return n*360-180}function C$(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function b$(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function T_(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function e_(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function x$(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function w$(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function nx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return B$(s,i)===0?!1:!!(X8(n,e,t,r)&&X8(t,r,n,e))}function M$(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(nx(n,e,r[i],r[i+1]))return!0;return!1}function Oy(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(w$(n,i[s],i[s+1]))return t;x$(n,i[s],i[s+1])&&(r=!r)}return r}function S$(n,e){for(const t of e)if(Oy(n,t))return!0;return!1}function UF(n,e){for(const t of n)if(!Oy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(M$(n[t],n[t+1],e))return!1;return!0}function E$(n,e){for(const t of e)if(UF(n,t))return!0;return!1}function B$(n,e){return n[0]*e[1]-n[1]*e[0]}function X8(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],d=r[0]-t[0],g=r[1]-t[1],b=i*g-d*s,E=a*g-d*o;return b>0&&E<0||b<0&&E>0}function MB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=y$(n[i][a],t);T_(e,o),s.push(o)}r.push(s)}return r}function zF(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=MB(n[i],e,t);r.push(s)}return r}function jF(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}T_(e,n)}function O$(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function J8(n,e,t,r){const i=Math.pow(2,r.z)*Hp,s=[r.x*Hp,r.y*Hp],a=[];for(const o of n)for(const d of o){const g=[d.x+s[0],d.y+s[1]];jF(g,e,t,i),a.push(g)}return a}function e7(n,e,t,r){const i=Math.pow(2,r.z)*Hp,s=[r.x*Hp,r.y*Hp],a=[];for(const o of n){const d=[];for(const g of o){const b=[g.x+s[0],g.y+s[1]];T_(e,b),d.push(b)}a.push(d)}if(e[2]-e[0]<=i/2){O$(e);for(const o of a)for(const d of o)jF(d,e,t,i)}return a}function I$(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=MB(e.coordinates,r,i),a=J8(n.geometry(),t,r,i);if(!e_(t,r))return!1;for(const o of a)if(!Oy(o,s))return!1}if(e.type==="MultiPolygon"){const s=zF(e.coordinates,r,i),a=J8(n.geometry(),t,r,i);if(!e_(t,r))return!1;for(const o of a)if(!S$(o,s))return!1}return!0}function k$(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=MB(e.coordinates,r,i),a=e7(n.geometry(),t,r,i);if(!e_(t,r))return!1;for(const o of a)if(!UF(o,s))return!1}if(e.type==="MultiPolygon"){const s=zF(e.coordinates,r,i),a=e7(n.geometry(),t,r,i);if(!e_(t,r))return!1;for(const o of a)if(!E$(o,s))return!1}return!0}let SB=class _b{constructor(e,t){this.type=Wo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Jv(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:a,coordinates:o}=s.geometry;a==="Polygon"&&i.push(o),a==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new _b(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new _b(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new _b(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return I$(e,this.geometries);if(e.geometryType()==="LineString")return k$(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}};class NF{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,a=t[s];if(r(i,a)>=0)break;t[e]=a,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let a=(e<<1)+1;const o=a+1;if(o<this.length&&r(t[o],t[a])<0&&(a=o),r(t[a],s)>=0)break;t[e]=t[a],e=a}t[e]=s}}function T$(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const a of n){const o=P$(a);o!==0&&(a.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[a]):i.push(a))}return i&&r.push(i),r}function P$(n){let e=0;for(let t=0,r=n.length,i=r-1,s,a;t<r;i=t++)s=n[t],a=n[i],e+=(a.x-s.x)*(s.y+a.y);return e}const R$=6378.137,t7=1/298.257223563,n7=t7*(2-t7),r7=Math.PI/180;class EB{constructor(e){const t=r7*R$*1e3,r=Math.cos(e*r7),i=1/(1-n7*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-n7)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,a,o;for(let d=0;d<e.length-1;d++){let g=e[d][0],b=e[d][1],E=this.wrap(e[d+1][0]-g)*this.kx,S=(e[d+1][1]-b)*this.ky,O=0;(E!==0||S!==0)&&(O=(this.wrap(t[0]-g)*this.kx*E+(t[1]-b)*this.ky*S)/(E*E+S*S),O>1?(g=e[d+1][0],b=e[d+1][1]):O>0&&(g+=E/this.kx*O,b+=S/this.ky*O)),E=this.wrap(t[0]-g)*this.kx,S=(t[1]-b)*this.ky;const k=E*E+S*S;k<r&&(r=k,i=g,s=b,a=d,o=O)}return{point:[i,s],index:a,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const a6=100,l6=50;function GF(n,e){return e[0]-n[0]}function jb(n){return n[1]-n[0]+1}function Nm(n,e){return n[1]>=n[0]&&n[1]<e}function u6(n,e){if(n[0]>n[1])return[null,null];const t=jb(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function A6(n,e){if(!Nm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)T_(t,n[r]);return t}function c6(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)T_(e,r);return e}function i7(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function BB(n,e,t){if(!i7(n)||!i7(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function fg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function OB(n,e,t,r,i){const s=Math.min(fg(n,[t,r],i),fg(e,[t,r],i)),a=Math.min(fg(t,[n,e],i),fg(r,[n,e],i));return Math.min(s,a)}function K$(n,e,t,r,i){if(!(Nm(e,n.length)&&Nm(r,t.length)))return 1/0;let a=1/0;for(let o=e[0];o<e[1];++o){const d=n[o],g=n[o+1];for(let b=r[0];b<r[1];++b){const E=t[b],S=t[b+1];if(nx(d,g,E,S))return 0;a=Math.min(a,OB(d,g,E,S,i))}}return a}function D$(n,e,t,r,i){if(!(Nm(e,n.length)&&Nm(r,t.length)))return NaN;let a=1/0;for(let o=e[0];o<=e[1];++o)for(let d=r[0];d<=r[1];++d)if(a=Math.min(a,i.distance(n[o],t[d])),a===0)return a;return a}function L$(n,e,t){if(Oy(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],a=i[i.length-1];if(s!==a&&(r=Math.min(r,fg(n,[a,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function F$(n,e,t,r){if(!Nm(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(Oy(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const a=n[s],o=n[s+1];for(const d of t)for(let g=0,b=d.length,E=b-1;g<b;E=g++){const S=d[E],O=d[g];if(nx(a,o,S,O))return 0;i=Math.min(i,OB(a,o,S,O,r))}}return i}function o7(n,e){for(const t of n)for(const r of t)if(Oy(r,e,!0))return!0;return!1}function U$(n,e,t,r=1/0){const i=c6(n),s=c6(e);if(r!==1/0&&BB(i,s,t)>=r)return r;if(e_(i,s)){if(o7(n,e))return 0}else if(o7(e,n))return 0;let a=1/0;for(const o of n)for(let d=0,g=o.length,b=g-1;d<g;b=d++){const E=o[b],S=o[d];for(const O of e)for(let k=0,U=O.length,z=U-1;k<U;z=k++){const q=O[z],Q=O[k];if(nx(E,S,q,Q))return 0;a=Math.min(a,OB(E,S,q,Q,t))}}return a}function s7(n,e,t,r,i,s){if(!s)return;const a=BB(A6(r,s),i,t);a<e&&n.push([a,s,[0,0]])}function KC(n,e,t,r,i,s,a){if(!s||!a)return;const o=BB(A6(r,s),A6(i,a),t);o<e&&n.push([o,s,a])}function Nb(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const a=new NF([[0,[0,n.length-1],[0,0]]],GF),o=c6(t);for(;a.length>0;){const d=a.pop();if(d[0]>=s)continue;const g=d[1],b=e?l6:a6;if(jb(g)<=b){if(!Nm(g,n.length))return NaN;if(e){const E=F$(n,g,t,r);if(isNaN(E)||E===0)return E;s=Math.min(s,E)}else for(let E=g[0];E<=g[1];++E){const S=L$(n[E],t,r);if(s=Math.min(s,S),s===0)return 0}}else{const E=u6(g,e);s7(a,s,r,n,o,E[0]),s7(a,s,r,n,o,E[1])}}return s}function Gb(n,e,t,r,i,s=1/0){let a=Math.min(s,i.distance(n[0],t[0]));if(a===0)return a;const o=new NF([[0,[0,n.length-1],[0,t.length-1]]],GF);for(;o.length>0;){const d=o.pop();if(d[0]>=a)continue;const g=d[1],b=d[2],E=e?l6:a6,S=r?l6:a6;if(jb(g)<=E&&jb(b)<=S){if(!Nm(g,n.length)&&Nm(b,t.length))return NaN;let O;if(e&&r)O=K$(n,g,t,b,i),a=Math.min(a,O);else if(e&&!r){const k=n.slice(g[0],g[1]+1);for(let U=b[0];U<=b[1];++U)if(O=fg(t[U],k,i),a=Math.min(a,O),a===0)return a}else if(!e&&r){const k=t.slice(b[0],b[1]+1);for(let U=g[0];U<=g[1];++U)if(O=fg(n[U],k,i),a=Math.min(a,O),a===0)return a}else O=D$(n,g,t,b,i),a=Math.min(a,O)}else{const O=u6(g,e),k=u6(b,r);KC(o,a,i,n,t,O[0],k[0]),KC(o,a,i,n,t,O[0],k[1]),KC(o,a,i,n,t,O[1],k[0]),KC(o,a,i,n,t,O[1],k[1])}}return a}function z$(n,e){const t=n.geometry(),r=t.flat().map(a=>wB([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new EB(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,Gb(r,!1,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Gb(r,!1,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Nb(r,!1,a.coordinates,i,s));break}if(s===0)return s}return s}function j$(n,e){const t=n.geometry(),r=t.flat().map(a=>wB([a.x,a.y],n.canonical));if(t.length===0)return NaN;const i=new EB(r[0][1]);let s=1/0;for(const a of e){switch(a.type){case"Point":s=Math.min(s,Gb(r,!0,[a.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Gb(r,!0,a.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Nb(r,!0,a.coordinates,i,s));break}if(s===0)return s}return s}function N$(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=T$(t).map(a=>a.map(o=>o.map(d=>wB([d.x,d.y],n.canonical)))),i=new EB(r[0][0][0][1]);let s=1/0;for(const a of e)for(const o of r){switch(a.type){case"Point":s=Math.min(s,Nb([a.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,Nb(a.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,U$(o,a.coordinates,i,s));break}if(s===0)return s}return s}function H3(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class bg{constructor(e,t){this.type=Pr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Jv(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new bg(r,r.features.map(i=>H3(i.geometry)).flat());if(r.type==="Feature")return new bg(r,H3(r.geometry));if("type"in r&&"coordinates"in r)return new bg(r,H3(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return z$(e,this.geometries);if(e.geometryType()==="LineString")return j$(e,this.geometries);if(e.geometryType()==="Polygon")return N$(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const IB={"==":l$,"!=":u$,">":c$,"<":A$,">=":h$,"<=":d$,array:Rm,at:zY,boolean:Rm,case:WY,coalesce:IF,collator:PF,format:p$,image:m$,in:jY,"index-of":NY,interpolate:Lm,"interpolate-hcl":Lm,"interpolate-lab":Lm,length:g$,let:_F,literal:zb,match:GY,number:Rm,"number-format":f$,object:Rm,slice:QY,step:BF,string:Rm,"to-boolean":G1,"to-color":G1,"to-number":G1,"to-string":G1,var:bF,within:SB,distance:bg};let Iy=class vv{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=vv.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let d=null;for(const[g,b]of o){d=new yF(t.registry,Wb,t.path,null,t.scope);const E=[];let S=!1;for(let O=1;O<e.length;O++){const k=e[O],U=Array.isArray(g)?g[O-1]:g.type,z=d.parse(k,1+E.length,U);if(!z){S=!0;break}E.push(z)}if(!S){if(Array.isArray(g)&&g.length!==E.length){d.error(`Expected ${g.length} arguments, but found ${E.length} instead.`);continue}for(let O=0;O<E.length;O++){const k=Array.isArray(g)?g[O]:g.type,U=E[O];d.concat(O+1).checkSubtype(k,U.type)}if(d.errors.length===0)return new vv(r,s,b,E)}}if(o.length===1)t.errors.push(...d.errors);else{const b=(o.length?o:a).map(([S])=>W$(S)).join(" | "),E=[];for(let S=1;S<e.length;S++){const O=t.parse(e[S],1+E.length);if(!O)return null;E.push(Zl(O.type))}t.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(e,t){vv.definitions=t;for(const r in t)e[r]=vv}};function a7(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=hF(e,t,r,s);if(a)throw new rA(a);return new Ul(e/255,t/255,r/255,s,!1)}function l7(n,e){return n in e}function Z3(n,e){const t=e[n];return typeof t>"u"?null:t}function G$(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function X0(n){return{type:n}}Iy.register(IB,{error:[SY,[ss],(n,[e])=>{throw new rA(e.evaluate(n))}],typeof:[ss,[qo],(n,[e])=>Zl(NA(e.evaluate(n)))],"to-rgba":[Yh(Pr,4),[Vp],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[Vp,[Pr,Pr,Pr],a7],rgba:[Vp,[Pr,Pr,Pr,Pr],a7],has:{type:Wo,overloads:[[[ss],(n,[e])=>l7(e.evaluate(n),n.properties())],[[ss,J1],(n,[e,t])=>l7(e.evaluate(n),t.evaluate(n))]]},get:{type:qo,overloads:[[[ss],(n,[e])=>Z3(e.evaluate(n),n.properties())],[[ss,J1],(n,[e,t])=>Z3(e.evaluate(n),t.evaluate(n))]]},"feature-state":[qo,[ss],(n,[e])=>Z3(e.evaluate(n),n.featureState||{})],properties:[J1,[],n=>n.properties()],"geometry-type":[ss,[],n=>n.geometryType()],id:[qo,[],n=>n.id()],zoom:[Pr,[],n=>n.globals.zoom],"heatmap-density":[Pr,[],n=>n.globals.heatmapDensity||0],"line-progress":[Pr,[],n=>n.globals.lineProgress||0],accumulated:[qo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Pr,X0(Pr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Pr,X0(Pr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Pr,overloads:[[[Pr,Pr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Pr],(n,[e])=>-e.evaluate(n)]]},"/":[Pr,[Pr,Pr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Pr,[Pr,Pr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Pr,[],()=>Math.LN2],pi:[Pr,[],()=>Math.PI],e:[Pr,[],()=>Math.E],"^":[Pr,[Pr,Pr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Pr,[Pr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))],log2:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Pr,[Pr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Pr,[Pr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Pr,[Pr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Pr,[Pr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Pr,[Pr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Pr,[Pr],(n,[e])=>Math.atan(e.evaluate(n))],min:[Pr,X0(Pr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Pr,X0(Pr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Pr,[Pr],(n,[e])=>Math.abs(e.evaluate(n))],round:[Pr,[Pr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Pr,[Pr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Pr,[Pr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Wo,[ss,qo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Wo,[qo],(n,[e])=>n.id()===e.value],"filter-type-==":[Wo,[ss],(n,[e])=>n.geometryType()===e.value],"filter-<":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Wo,[ss,qo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Wo,[qo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Wo,[qo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Wo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Wo,[Yh(ss)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Wo,[Yh(qo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Wo,[ss,Yh(qo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Wo,[ss,Yh(qo)],(n,[e,t])=>G$(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Wo,overloads:[[[Wo,Wo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[X0(Wo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Wo,overloads:[[[Wo,Wo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[X0(Wo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Wo,[Wo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Wo,[ss],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[ss,[ss],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[ss,[ss],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[ss,X0(qo),(n,e)=>e.map(t=>Fv(t.evaluate(n))).join("")],"resolved-locale":[ss,[Z2],(n,[e])=>e.evaluate(n).resolvedLocale()]});function W$(n){return Array.isArray(n)?`(${n.map(Zl).join(", ")})`:`(${Zl(n.type)}...)`}function Wb(n){if(n instanceof bF)return Wb(n.boundExpression);if(n instanceof Iy&&n.name==="error")return!1;if(n instanceof PF)return!1;if(n instanceof SB)return!1;if(n instanceof bg)return!1;const e=n instanceof G1||n instanceof Rm;let t=!0;return n.eachChild(r=>{e?t=t&&Wb(r):t=t&&r instanceof zb}),t?rx(n)&&ix(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function rx(n){if(n instanceof Iy){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof SB||n instanceof bg)return!1;let e=!0;return n.eachChild(t=>{e&&!rx(t)&&(e=!1)}),e}function t_(n){if(n instanceof Iy&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!t_(t)&&(e=!1)}),e}function ix(n,e){if(n instanceof Iy&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!ix(r,e)&&(t=!1)}),t}function d6(n){return{result:"success",value:n}}function D1(n){return{result:"error",value:n}}function Qb(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function WF(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function kB(n){return!!n.expression&&n.expression.interpolated}function js(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function P_(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Q$(n){return n}function TB(n,e){const t=e.type==="color",r=n.stops&&typeof n.stops[0][0]=="object",i=r||n.property!==void 0,s=r||!i,a=n.type||(kB(e)?"exponential":"interval");if(t||e.type==="padding"){const b=t?Ul.parse:Wd.parse;n=py({},n),n.stops&&(n.stops=n.stops.map(E=>[E[0],b(E[1])])),n.default?n.default=b(n.default):n.default=b(e.default)}if(n.colorSpace&&!DY(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);let o,d,g;if(a==="exponential")o=u7;else if(a==="interval")o=Y$;else if(a==="categorical"){o=q$,d=Object.create(null);for(const b of n.stops)d[b[0]]=b[1];g=typeof n.stops[0][0]}else if(a==="identity")o=$$;else throw new Error(`Unknown function type "${a}"`);if(r){const b={},E=[];for(let k=0;k<n.stops.length;k++){const U=n.stops[k],z=U[0].zoom;b[z]===void 0&&(b[z]={zoom:z,type:n.type,property:n.property,default:n.default,stops:[]},E.push(z)),b[z].stops.push([U[0].value,U[1]])}const S=[];for(const k of E)S.push([b[k].zoom,TB(b[k],e)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:Lm.interpolationFactor.bind(void 0,O),zoomStops:S.map(k=>k[0]),evaluate({zoom:k},U){return u7({stops:S,base:n.base},e,k).evaluate(k,U)}}}else if(s){const b=a==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:Lm.interpolationFactor.bind(void 0,b),zoomStops:n.stops.map(E=>E[0]),evaluate:({zoom:E})=>o(n,e,E,d,g)}}else return{kind:"source",evaluate(b,E){const S=E&&E.properties?E.properties[n.property]:void 0;return S===void 0?R_(n.default,e.default):o(n,e,S,d,g)}}}function R_(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function q$(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return R_(s,n.default,e.default)}function Y$(n,e,t){if(js(t)!=="number")return R_(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=tx(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function u7(n,e,t){const r=n.base!==void 0?n.base:1;if(js(t)!=="number")return R_(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=tx(n.stops.map(b=>b[0]),t),a=V$(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],d=n.stops[s+1][1],g=HY[e.type]||Q$;return typeof o.evaluate=="function"?{evaluate(...b){const E=o.evaluate.apply(void 0,b),S=d.evaluate.apply(void 0,b);if(!(E===void 0||S===void 0))return g(E,S,a,n.colorSpace)}}:g(o,d,a,n.colorSpace)}function $$(n,e,t){switch(e.type){case"color":t=Ul.parse(t);break;case"formatted":t=Ey.fromString(t.toString());break;case"resolvedImage":t=Dg.fromString(t.toString());break;case"padding":t=Wd.parse(t);break;default:js(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return R_(t,n.default,e.default)}function V$(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}let QF=class{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new gF,this._defaultValue=t?J$(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new rA(`Expected value to be one of ${Object.keys(this._enumValues).map(d=>JSON.stringify(d)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}};function K_(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in IB}function PB(n,e){const t=new yF(IB,Wb,[],e?X$(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?d6(new QF(r,e)):D1(t.errors)}let h6=class{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!t_(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}},f6=class{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!t_(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Lm.interpolationFactor(this.interpolationType,e,t,r):0}};function H$(n){return n._styleExpression!==void 0}function RB(n,e){const t=PB(n,e);if(t.result==="error")return t;const r=t.value.expression,i=rx(r);if(!i&&!Qb(e))return D1([new Gp("","data expressions not supported")]);const s=ix(r,["zoom"]);if(!s&&!WF(e))return D1([new Gp("","zoom expressions not supported")]);const a=Cb(r);if(!a&&!s)return D1([new Gp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Gp)return D1([a]);if(a instanceof Lm&&!kB(e))return D1([new Gp("",'"interpolate" expressions cannot be used with this property')]);if(!a)return d6(i?new h6("constant",t.value):new h6("source",t.value));const o=a instanceof Lm?a.interpolation:void 0;return d6(i?new f6("camera",t.value,a.labels,o):new f6("composite",t.value,a.labels,o))}class ox{constructor(e,t){this._parameters=e,this._specification=t,py(this,TB(this._parameters,this._specification))}static deserialize(e){return new ox(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Z$(n,e){if(P_(n))return new ox(n,e);if(K_(n)){const t=RB(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Ul.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Wd.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=Bf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=xf.parse(n)),{kind:"constant",evaluate:()=>t}}}function Cb(n){let e=null;if(n instanceof _F)e=Cb(n.result);else if(n instanceof IF){for(const t of n.args)if(e=Cb(t),e)break}else(n instanceof BF||n instanceof Lm)&&n.input instanceof Iy&&n.input.name==="zoom"&&(e=n);return e instanceof Gp||n.eachChild(t=>{const r=Cb(t);r instanceof Gp?e=r:!e&&r?e=new Gp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Gp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function X$(n){const e={color:Vp,string:ss,number:Pr,enum:ss,boolean:Wo,formatted:X2,padding:J2,projectionDefinition:H2,resolvedImage:k_,variableAnchorOffsetCollection:ex};return n.type==="array"?Yh(e[n.value]||qo,n.length):e[n.type]}function J$(n){return n.type==="color"&&P_(n.default)?new Ul(0,0,0,0):n.type==="color"?Ul.parse(n.default)||null:n.type==="padding"?Wd.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?Bf.parse(n.default)||null:n.type==="projectionDefinition"?xf.parse(n.default)||null:n.default===void 0?null:n.default}function sx(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!sx(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Uv(n,e={}){if(sx(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return tV(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(a=>{const o={},d=Uv(a,o),g=eV(o);return g===!0?d:["case",g,d,!1]})]}case"all":{const[,...i]=t,s=i.map(a=>Uv(a,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",Uv(["any",...i],{})]}case"in":{const[,i,...s]=t;return A7(i,s)}case"!in":{const[,i,...s]=t;return A7(i,s,!0)}case"has":return c7(t[1]);case"!has":return["!",c7(t[1])];default:return!0}}function eV(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function tV(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function A7(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const a of e)if(typeof a!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const a=e.sort().filter((o,d)=>d===0||e[d-1]!==o);return["match",r,a,!t,t]}return t?["all",...e.map(a=>["!=",r,a])]:["any",...e.map(a=>["==",r,a])]}function c7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function n_(n){return typeof n=="object"?["literal",n]:n}function qF(n,e){let t=n.stops;if(!t)return nV(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],YF(a[1])]:[a[0],n_(a[1])]),r?rV(n,e,t):s?oV(n,e,t):p6(n,e,t)}function nV(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,n_(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function KB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function rV(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const d=t[o],g=d[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],s.push(g)),i[g].push([d[0].value,d[1]])}if(LB({},e)==="exponential"){const o=[KB(n),["linear"],["zoom"]];for(const d of s){const g=p6(r[d],e,i[d]);ty(o,d,g,!1)}return o}else{const o=["step",["zoom"]];for(const d of s){const g=p6(r[d],e,i[d]);ty(o,d,g,!0)}return DB(o),o}}function iV(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function d7(n,e){const t=n_(iV(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function p6(n,e,t){const r=LB(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(d7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)ty(s,a[0],a[1],!1);return s.push(d7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)ty(s,a[0],a[1],!0);return DB(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,n_(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[KB(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)ty(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,n_(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function oV(n,e,t,r=["zoom"]){const i=LB(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[KB(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)ty(s,o[0],o[1],a);return DB(s),s}function DB(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function ty(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function LB(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function YF(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function sV(n){for(let e=0;e<Ys.layout.length;e++)for(const t in Ys[Ys.layout[e]])if(t===n)return Ys[Ys.layout[e]][t];for(let e=0;e<Ys.paint.length;e++)for(const t in Ys[Ys.paint[e]])if(t===n)return Ys[Ys.paint[e]][t];return null}function aV(n,e){for(const t in n.sources)e(n.sources[t])}function zv(n,e){for(const t of n.layers)e(t)}function FB(n,e,t){function r(i,s){const a=i[s];a&&Object.keys(a).forEach(o=>{t({path:[i.id,s,o],key:o,value:a[o],reference:sV(o),set(d){a[o]=d}})})}zv(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function $F(n){const e=n.key,t=n.value;return t?[new Sr(e,t,"constants have been deprecated as of v8")]:[]}function Iu(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Bg(n){if(Array.isArray(n))return n.map(Bg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=Bg(n[t]);return e}return Iu(n)}function Mf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,a=n.styleSpec,o=n.validateSpec;let d=[];const g=js(t);if(g!=="object")return[new Sr(e,t,`object expected, ${g} found`)];for(const b in t){const E=b.split(".")[0],S=r[E]||r["*"];let O;if(i[E])O=i[E];else if(r[E])O=o;else if(i["*"])O=i["*"];else if(r["*"])O=o;else{d.push(new Sr(e,t[b],`unknown property "${b}"`));continue}d=d.concat(O({key:(e&&`${e}.`)+b,value:t[b],valueSpec:S,style:s,styleSpec:a,object:t,objectKey:b,validateSpec:o},t))}for(const b in r)i[b]||r[b].required&&r[b].default===void 0&&t[b]===void 0&&d.push(new Sr(e,t,`missing required property "${b}"`));return d}function UB(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.key,o=n.arrayElementValidator||r;if(js(e)!=="array")return[new Sr(a,e,`array expected, ${js(e)} found`)];if(t.length&&e.length!==t.length)return[new Sr(a,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Sr(a,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let d={type:t.value,values:t.values};s.$version<7&&(d.function=t.function),js(t.value)==="object"&&(d=t.value);let g=[];for(let b=0;b<e.length;b++)g=g.concat(o({array:e,arrayIndex:b,value:e[b],valueSpec:d,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${a}[${b}]`}));return g}function zB(n){const e=n.key,t=n.value,r=n.valueSpec;let i=js(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new Sr(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new Sr(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new Sr(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function VF(n){const e=n.valueSpec,t=Iu(n.value.type);let r,i={},s,a;const o=t!=="categorical"&&n.value.property===void 0,d=!o,g=js(n.value.stops)==="array"&&js(n.value.stops[0])==="array"&&js(n.value.stops[0][0])==="object",b=Mf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:E,default:k}});return t==="identity"&&o&&b.push(new Sr(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&b.push(new Sr(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!kB(n.valueSpec)&&b.push(new Sr(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(d&&!Qb(n.valueSpec)?b.push(new Sr(n.key,n.value,"property functions not supported")):o&&!WF(n.valueSpec)&&b.push(new Sr(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||g)&&n.value.property===void 0&&b.push(new Sr(n.key,n.value,'"property" property is required')),b;function E(U){if(t==="identity")return[new Sr(U.key,U.value,'identity function may not have a "stops" property')];let z=[];const q=U.value;return z=z.concat(UB({key:U.key,value:q,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:S})),js(q)==="array"&&q.length===0&&z.push(new Sr(U.key,q,"array must have at least one stop")),z}function S(U){let z=[];const q=U.value,Q=U.key;if(js(q)!=="array")return[new Sr(Q,q,`array expected, ${js(q)} found`)];if(q.length!==2)return[new Sr(Q,q,`array length 2 expected, length ${q.length} found`)];if(g){if(js(q[0])!=="object")return[new Sr(Q,q,`object expected, ${js(q[0])} found`)];if(q[0].zoom===void 0)return[new Sr(Q,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new Sr(Q,q,"object stop key must have value")];if(a&&a>Iu(q[0].zoom))return[new Sr(Q,q[0].zoom,"stop zoom values must appear in ascending order")];Iu(q[0].zoom)!==a&&(a=Iu(q[0].zoom),s=void 0,i={}),z=z.concat(Mf({key:`${Q}[0]`,value:q[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:zB,value:O}}))}else z=z.concat(O({key:`${Q}[0]`,value:q[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},q));return K_(Bg(q[1]))?z.concat([new Sr(`${Q}[1]`,q[1],"expressions are not allowed in function stops.")]):z.concat(U.validateSpec({key:`${Q}[1]`,value:q[1],valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function O(U,z){const q=js(U.value),Q=Iu(U.value),re=U.value!==null?U.value:z;if(!r)r=q;else if(q!==r)return[new Sr(U.key,re,`${q} stop domain type must match previous stop domain type ${r}`)];if(q!=="number"&&q!=="string"&&q!=="boolean")return[new Sr(U.key,re,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&t!=="categorical"){let X=`number expected, ${q} found`;return Qb(e)&&t===void 0&&(X+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Sr(U.key,re,X)]}return t==="categorical"&&q==="number"&&(!isFinite(Q)||Math.floor(Q)!==Q)?[new Sr(U.key,re,`integer expected, found ${Q}`)]:t!=="categorical"&&q==="number"&&s!==void 0&&Q<s?[new Sr(U.key,re,"stop domain values must appear in ascending order")]:(s=Q,t==="categorical"&&Q in i?[new Sr(U.key,re,"stop domain values must be unique")]:(i[Q]=!0,[]))}function k(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:e,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}function my(n){const e=(n.expressionContext==="property"?RB:PB)(Bg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new Sr(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Sr(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!t_(t))return[new Sr(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!t_(t))return[new Sr(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!ix(t,["zoom","feature-state"]))return[new Sr(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!rx(t))return[new Sr(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lV(n){const e=n.value,t=n.key,r=js(e);return r!=="boolean"?[new Sr(t,e,`boolean expected, ${r} found`)]:[]}function uV(n){const e=n.key,t=n.value,r=js(t);return r!=="string"?[new Sr(e,t,`color expected, ${r} found`)]:Ul.parse(String(t))?[]:[new Sr(e,t,`color expected, "${t}" found`)]}function r_(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(Iu(t))===-1&&i.push(new Sr(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(Iu(t))===-1&&i.push(new Sr(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function jB(n){return sx(Bg(n.value))?my(py({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):HF(n)}function HF(n){const e=n.value,t=n.key;if(js(e)!=="array")return[new Sr(t,e,`array expected, ${js(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new Sr(t,e,"filter array must have at least 1 element")];switch(s=s.concat(r_({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),Iu(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Iu(e[1])==="$type"&&s.push(new Sr(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new Sr(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=js(e[1]),i!=="string"&&s.push(new Sr(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=js(e[a]),Iu(e[1])==="$type"?s=s.concat(r_({key:`${t}[${a}]`,value:e[a],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new Sr(`${t}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let a=1;a<e.length;a++)s=s.concat(HF({key:`${t}[${a}]`,value:e[a],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=js(e[1]),e.length!==2?s.push(new Sr(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new Sr(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function ZF(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,a=n.value,o=n.objectKey,d=s[`${e}_${n.layerType}`];if(!d)return[];const g=o.match(/^(.*)-transition$/);if(e==="paint"&&g&&d[g[1]]&&d[g[1]].transition)return r({key:t,value:a,valueSpec:s.transition,style:i,styleSpec:s});const b=n.valueSpec||d[o];if(!b)return[new Sr(t,a,`unknown property "${o}"`)];let E;if(js(a)==="string"&&Qb(b)&&!b.tokens&&(E=/^{([^}]+)}$/.exec(a)))return[new Sr(t,a,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(E[1])} }\`.`)];const S=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&S.push(new Sr(t,a,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&P_(Bg(a))&&Iu(a.type)==="identity"&&S.push(new Sr(t,a,'"text-font" does not support identity functions'))),S.concat(r({key:n.key,value:a,valueSpec:b,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function XF(n){return ZF(n,"paint")}function JF(n){return ZF(n,"layout")}function eU(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;!t.type&&!t.ref&&e.push(new Sr(r,t,'either "type" or "ref" is required'));let a=Iu(t.type);const o=Iu(t.ref);if(t.id){const d=Iu(t.id);for(let g=0;g<n.arrayIndex;g++){const b=i.layers[g];Iu(b.id)===d&&e.push(new Sr(r,t.id,`duplicate layer id "${t.id}", previously used at line ${b.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(g=>{g in t&&e.push(new Sr(r,t[g],`"${g}" is prohibited for ref layers`))});let d;i.layers.forEach(g=>{Iu(g.id)===o&&(d=g)}),d?d.ref?e.push(new Sr(r,t.ref,"ref cannot reference another ref layer")):a=Iu(d.type):e.push(new Sr(r,t.ref,`ref layer "${o}" not found`))}else if(a!=="background")if(!t.source)e.push(new Sr(r,t,'missing required property "source"'));else{const d=i.sources&&i.sources[t.source],g=d&&Iu(d.type);d?g==="vector"&&a==="raster"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a raster source`)):g!=="raster-dem"&&a==="hillshade"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a raster-dem source`)):g==="raster"&&a!=="raster"?e.push(new Sr(r,t.source,`layer "${t.id}" requires a vector source`)):g==="vector"&&!t["source-layer"]?e.push(new Sr(r,t,`layer "${t.id}" must specify a "source-layer"`)):g==="raster-dem"&&a!=="hillshade"?e.push(new Sr(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):a==="line"&&t.paint&&t.paint["line-gradient"]&&(g!=="geojson"||!d.lineMetrics)&&e.push(new Sr(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Sr(r,t.source,`source "${t.source}" not found`))}return e=e.concat(Mf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:jB,layout(d){return Mf({layer:t,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(g){return JF(py({layerType:a},g))}}})},paint(d){return Mf({layer:t,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(g){return XF(py({layerType:a},g))}}})}}})),e}function Og(n){const e=n.value,t=n.key,r=js(e);return r!=="string"?[new Sr(t,e,`string expected, ${r} found`)]:[]}function AV(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,a=n.style;let o=[];const d=js(r);if(r===void 0)return o;if(d!=="object")return o.push(new Sr("source_raster_dem",r,`object expected, ${d} found`)),o;const b=Iu(r.encoding)==="custom",E=["redFactor","greenFactor","blueFactor","baseShift"],S=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const O in r)!b&&E.includes(O)?o.push(new Sr(O,r[O],`In "${t}": "${O}" is only valid when "encoding" is set to "custom". ${S} encoding found`)):s[O]?o=o.concat(n.validateSpec({key:O,value:r[O],valueSpec:s[O],validateSpec:n.validateSpec,style:a,styleSpec:i})):o.push(new Sr(O,r[O],`unknown property "${O}"`));return o}const h7={promoteId:cV};function tU(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new Sr(t,e,'"type" is required')];const a=Iu(e.type);let o;switch(a){case"vector":case"raster":return o=Mf({key:t,value:e,valueSpec:r[`source_${a.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:h7,validateSpec:s}),o;case"raster-dem":return o=AV({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=Mf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:h7}),e.cluster)for(const d in e.clusterProperties){const[g,b]=e.clusterProperties[d],E=typeof g=="string"?[g,["accumulated"],["get",d]]:g;o.push(...my({key:`${t}.${d}.map`,value:b,validateSpec:s,expressionContext:"cluster-map"})),o.push(...my({key:`${t}.${d}.reduce`,value:E,validateSpec:s,expressionContext:"cluster-reduce"}))}return o;case"video":return Mf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return Mf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new Sr(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return r_({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:s,styleSpec:r})}}function cV({key:n,value:e}){if(js(e)==="string")return Og({key:n,value:e});{const t=[];for(const r in e)t.push(...Og({key:`${n}.${r}`,value:e[r]}));return t}}function nU(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const a=js(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Sr("light",e,`object expected, ${a} found`)]),s;for(const o in e){const d=o.match(/^(.*)-transition$/);d&&r[d[1]]&&r[d[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Sr(o,e[o],`unknown property "${o}"`)])}return s}function rU(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=js(e);if(e===void 0)return[];if(s!=="object")return[new Sr("sky",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return a}function iU(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const a=js(e);if(e===void 0)return s;if(a!=="object")return s=s.concat([new Sr("terrain",e,`object expected, ${a} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return s}function dV(n){return Og(n).length===0?[]:my(n)}function hV(n){return Og(n).length===0?[]:my(n)}function fV(n){const e=n.key,t=n.value;if(js(t)==="array"){if(t.length<1||t.length>4)return[new Sr(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let a=0;a<t.length;a++)s=s.concat(n.validateSpec({key:`${e}[${a}]`,value:t[a],validateSpec:n.validateSpec,valueSpec:i}));return s}else return zB({key:e,value:t,valueSpec:{}})}function pV(n){const e=n.key,t=n.value,r=js(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new Sr(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let a=0;a<t.length;a+=2)s=s.concat(r_({key:`${e}[${a}]`,value:t[a],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(UB({key:`${e}[${a+1}]`,value:t[a+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function oU(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const a in t){t[a].id&&i.includes(t[a].id)&&e.push(new Sr(r,t,`all the sprites' ids must be unique, but ${t[a].id} is duplicated`)),i.push(t[a].id),t[a].url&&s.includes(t[a].url)&&e.push(new Sr(r,t,`all the sprites' URLs must be unique, but ${t[a].url} is duplicated`)),s.push(t[a].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Mf({key:`${r}[${a}]`,value:t[a],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Og({key:r,value:t})}function mV(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=js(e);if(e===void 0)return[];if(s!=="object")return[new Sr("projection",e,`object expected, ${s} found`)];let a=[];for(const o in e)r[o]?a=a.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):a=a.concat([new Sr(o,e[o],`unknown property "${o}"`)]);return a}function gV(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=js(t);return r==="array"&&!vV(t)&&!yV(t)?[new Sr(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new Sr(e,t,`projection expected, invalid type "${r}" found`)]}function yV(n){return!!["interpolate","step","literal"].includes(n[0])}function vV(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}const f7={"*"(){return[]},array:UB,boolean:lV,number:zB,color:uV,constants:$F,enum:r_,filter:jB,function:VF,layer:eU,object:Mf,source:tU,light:nU,sky:rU,terrain:iU,projection:mV,projectionDefinition:gV,string:Og,formatted:dV,resolvedImage:hV,padding:fV,variableAnchorOffsetCollection:pV,sprite:oU};function jv(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=jv,t.expression&&P_(Iu(e))?VF(n):t.expression&&K_(Bg(e))?my(n):t.type&&f7[t.type]?f7[t.type](n):Mf(py({},n,{valueSpec:t.type?r[t.type]:t}))}function sU(n){const e=n.value,t=n.key,r=Og(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new Sr(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new Sr(t,e,'"glyphs" url must include a "{range}" token'))),r}function Tf(n,e=Ys){let t=[];return t=t.concat(jv({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:jv,objectElementValidators:{glyphs:sU,"*"(){return[]}}})),n.constants&&(t=t.concat($F({key:"constants",value:n.constants,style:n,styleSpec:e,validateSpec:jv}))),aU(t)}Tf.source=om(im(tU));Tf.sprite=om(im(oU));Tf.glyphs=om(im(sU));Tf.light=om(im(nU));Tf.sky=om(im(rU));Tf.terrain=om(im(iU));Tf.layer=om(im(eU));Tf.filter=om(im(jB));Tf.paintProperty=om(im(XF));Tf.layoutProperty=om(im(JF));function im(n){return function(e){return n({...e,validateSpec:jv})}}function aU(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function om(n){return function(...e){return aU(n.apply(this,e))}}const _V=/("(?:[^\\"]|\\.)*")|[:,]/g;function CV(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,d){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-o.length-d;if(g.length<=b){const E=g.replace(_V,(S,O)=>O||`${S} `);if(E.length<=b)return E}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const E=o+t,S=[];let O=0,k,U;if(Array.isArray(a)){k="[",U="]";const{length:z}=a;for(;O<z;O++)S.push(s(a[O],E,O===z-1?0:1)||"null")}else{k="{",U="}";const z=Object.keys(a),{length:q}=z;for(;O<q;O++){const Q=z[O],re=`${JSON.stringify(Q)}: `,X=s(a[Q],E,re.length+(O===q-1?0:1));X!==void 0&&S.push(re+X)}}if(S.length>0)return[k,t+S.join(`,
${E}`),U].join(`
${o}`)}return g}(n,"",0)}function p7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function lU(n,e=2){return n=p7(n,Ys.$root),n.layers&&(n.layers=n.layers.map(t=>p7(t,Ys.layer))),CV(n,{indent:e})}function X3(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function m7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function m6(n,e){return typeof e=="string"&&e[0]==="@"?m6(n,n.constants[e]):e}function bV(n){return Array.isArray(n.stops)}function sv(n,e,t){n[t]=n[e],delete n[e]}function xV(n){n.version=8,aV(n,i=>{i.type==="video"&&i.url!==void 0&&sv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),zv(n,i=>{X3(i,s=>{s["symbol-min-distance"]!==void 0&&sv(s,"symbol-min-distance","symbol-spacing")}),m7(i,s=>{s["background-image"]!==void 0&&sv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&sv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&sv(s,"fill-image","fill-pattern")})}),FB(n,{paint:!0,layout:!0},i=>{const s=m6(n,i.value);bV(s)&&s.stops.forEach(a=>{a[1]=m6(n,a[1])}),i.set(s)}),delete n.constants,zv(n,i=>{X3(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),m7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(a){return a.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(a=>{a[1]=s(a[1])}),i;throw new Error("unexpected font value")}zv(n,i=>{X3(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function wV(n){const e=[];return zv(n,t=>{t.filter&&(t.filter=Uv(t.filter))}),FB(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{K_(r)||(typeof r=="object"&&!Array.isArray(r)?(s(qF(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(YF(r)))}),n}function MV(n){return JSON.parse(SV(JSON.stringify(n)))}function SV(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,a,o]=r.slice(1);return[s,a]=[s,a].map(d=>d.endsWith("%")?d:`${parseFloat(d)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,a,o].filter(Boolean).join(",")})"`}return e})}function EV(n){let e=!1;if(n.version===7&&(n=xV(n),e=!0),n.version===8&&(e=!!wV(n),e=!0),FB(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(MV(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const BV={StyleExpression:QF,StylePropertyFunction:ox,ZoomConstantExpression:h6,ZoomDependentExpression:f6,createExpression:PB,createPropertyExpression:RB,isExpression:K_,isExpressionFilter:sx,isZoomExpression:H$,normalizePropertyExpression:Z$},OV={convertFunction:qF,createFunction:TB,isFunction:P_};var ax=I_();const IV=La(ax);var bb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.0.1/LICENSE.txt
 */var kV=bb.exports,g7;function TV(){return g7||(g7=1,function(n,e){(function(t,r){n.exports=r()})(kV,function(){var t={},r={};function i(a,o,d){if(r[a]=d,a==="index"){var g="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",b={};return r.shared(b),r.index(t,b),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),t}}i("shared",["exports"],function(a){function o(f,u,h,v){return new(h||(h=Promise))(function(w,D){function F(ne){try{Z(v.next(ne))}catch(ce){D(ce)}}function G(ne){try{Z(v.throw(ne))}catch(ce){D(ce)}}function Z(ne){var ce;ne.done?w(ne.value):(ce=ne.value,ce instanceof h?ce:new h(function(Ce){Ce(ce)})).then(F,G)}Z((v=v.apply(f,u||[])).next())})}function d(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g,b;function E(){if(b)return g;function f(u,h){this.x=u,this.y=h}return b=1,g=f,f.prototype={clone:function(){return new f(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,h){return this.clone()._rotateAround(u,h)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var h=u.x-this.x,v=u.y-this.y;return h*h+v*v},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,h){return Math.atan2(this.x*h-this.y*u,this.x*u+this.y*h)},_matMult:function(u){var h=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=h,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var h=Math.cos(u),v=Math.sin(u),w=v*this.x+h*this.y;return this.x=h*this.x-v*this.y,this.y=w,this},_rotateAround:function(u,h){var v=Math.cos(u),w=Math.sin(u),D=h.y+w*(this.x-h.x)+v*(this.y-h.y);return this.x=h.x+v*(this.x-h.x)-w*(this.y-h.y),this.y=D,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(u){return u instanceof f?u:Array.isArray(u)?new f(u[0],u[1]):u},g}typeof SuppressedError=="function"&&SuppressedError;var S,O,k=d(E()),U=function(){if(O)return S;function f(u,h,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=w}return O=1,S=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var D=this.sampleCurveX(v)-u;if(Math.abs(D)<h)return v;var F=this.sampleCurveDerivativeX(v);if(Math.abs(F)<1e-6)break;v-=D/F}var G=0,Z=1;for(v=u,w=0;w<20&&(D=this.sampleCurveX(v),!(Math.abs(D-u)<h));w++)u>D?G=v:Z=v,v=.5*(Z-G)+G;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},S}(),z=d(U);let q,Q;function re(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function X(){if(Q==null&&(Q=!1,re())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let v=0;v<5*5;v++){const w=4*v;u.fillStyle=`rgb(${w},${w+1},${w+2})`,u.fillRect(v%5,Math.floor(v/5),1,1)}const h=u.getImageData(0,0,5,5).data;for(let v=0;v<5*5*4;v++)if(v%4!=3&&h[v]!==v){Q=!0;break}}}return Q||!1}var Y,J=1e-6,N=typeof Float32Array<"u"?Float32Array:Array;function ie(){var f=new N(9);return N!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function he(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function de(){var f=new N(3);return N!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function we(f,u,h){var v=new N(3);return v[0]=f,v[1]=u,v[2]=h,v}function fe(f,u,h){var v=u[0],w=u[1],D=u[2],F=u[3];return f[0]=h[0]*v+h[4]*w+h[8]*D+h[12]*F,f[1]=h[1]*v+h[5]*w+h[9]*D+h[13]*F,f[2]=h[2]*v+h[6]*w+h[10]*D+h[14]*F,f[3]=h[3]*v+h[7]*w+h[11]*D+h[15]*F,f}function be(){var f=new N(4);return N!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Pe(){var f=new N(2);return N!=Float32Array&&(f[0]=0,f[1]=0),f}function pe(f,u){var h=new N(2);return h[0]=f,h[1]=u,h}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)}),de(),Y=new N(4),N!=Float32Array&&(Y[0]=0,Y[1]=0,Y[2]=0,Y[3]=0),de(),we(1,0,0),we(0,1,0),be(),be(),ie(),Pe();const it=8192;function We(f,u,h){return u*(it/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}function $e(f,u){return(f%u+u)%u}function ht(f,u,h){return f*(1-h)+u*h}function De(f){if(f<=0)return 0;if(f>=1)return 1;const u=f*f,h=u*f;return 4*(f<.5?h:3*(f-u)+h-.75)}function Ne(f,u,h,v){const w=new z(f,u,h,v);return D=>w.solve(D)}const at=Ne(.25,.1,.25,1);function wt(f,u,h){return Math.min(h,Math.max(u,f))}function Ct(f,u,h){const v=h-u,w=((f-u)%v+v)%v+u;return w===u?h:w}function ft(f,...u){for(const h of u)for(const v in h)f[v]=h[v];return f}let Lt=1;function Kt(f,u,h){const v={};for(const w in f)v[w]=u.call(this,f[w],w,f);return v}function Fe(f,u,h){const v={};for(const w in f)u.call(this,f[w],w,f)&&(v[w]=f[w]);return v}function Te(f){return Array.isArray(f)?f.map(Te):typeof f=="object"&&f?Kt(f,Te):f}const Se={};function Je(f){Se[f]||(typeof console<"u"&&console.warn(f),Se[f]=!0)}function yt(f,u,h){return(h.y-f.y)*(u.x-f.x)>(u.y-f.y)*(h.x-f.x)}function dt(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let Ut=null;function en(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const Nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function yn(f,u,h,v,w){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const D=new VideoFrame(f,{timestamp:0});try{const F=D==null?void 0:D.format;if(!F||!F.startsWith("BGR")&&!F.startsWith("RGB"))throw new Error(`Unrecognized format ${F}`);const G=F.startsWith("BGR"),Z=new Uint8ClampedArray(v*w*4);if(yield D.copyTo(Z,function(ne,ce,Ce,Re,Le){const je=4*Math.max(1,0),He=(Math.max(0,Ce)-Ce)*Re*4+je,st=4*Re,gt=Math.max(0,ce),jt=Math.max(0,Ce);return{rect:{x:gt,y:jt,width:Math.min(ne.width,ce+Re)-gt,height:Math.min(ne.height,Ce+Le)-jt},layout:[{offset:He,stride:st}]}}(f,u,h,v,w)),G)for(let ne=0;ne<Z.length;ne+=4){const ce=Z[ne];Z[ne]=Z[ne+2],Z[ne+2]=ce}return Z}finally{D.close()}})}let jn,Rr;function sr(f){return f/Math.PI*180}const Jn="AbortError";function mr(){return new Error(Jn)}const pr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function xr(f){return pr.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Qn="global-dispatcher";class Er extends Error{constructor(u,h,v,w){super(`AJAXError: ${h} (${u}): ${v}`),this.status=u,this.statusText=h,this.url=v,this.body=w}}const Ge=()=>dt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ae=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const v=xr(f.url);if(v)return v(f,u);if(dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Qn},u)}if(!(/^file:/.test(h=f.url)||/^file:/.test(Ge())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(v,w){return o(this,void 0,void 0,function*(){const D=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:Ge(),signal:w.signal});let F,G;v.type!=="json"||D.headers.has("Accept")||D.headers.set("Accept","application/json");try{F=yield fetch(D)}catch(ne){throw new Er(0,ne.message,v.url,new Blob)}if(!F.ok){const ne=yield F.blob();throw new Er(F.status,F.statusText,v.url,ne)}G=v.type==="arrayBuffer"||v.type==="image"?F.arrayBuffer():v.type==="json"?F.json():F.text();const Z=yield G;if(w.signal.aborted)throw mr();return{data:Z,cacheControl:F.headers.get("Cache-Control"),expires:F.headers.get("Expires")}})}(f,u);if(dt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Qn},u)}var h;return function(v,w){return new Promise((D,F)=>{var G;const Z=new XMLHttpRequest;Z.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(Z.responseType="arraybuffer");for(const ne in v.headers)Z.setRequestHeader(ne,v.headers[ne]);v.type==="json"&&(Z.responseType="text",!((G=v.headers)===null||G===void 0)&&G.Accept||Z.setRequestHeader("Accept","application/json")),Z.withCredentials=v.credentials==="include",Z.onerror=()=>{F(new Error(Z.statusText))},Z.onload=()=>{if(!w.signal.aborted)if((Z.status>=200&&Z.status<300||Z.status===0)&&Z.response!==null){let ne=Z.response;if(v.type==="json")try{ne=JSON.parse(Z.response)}catch(ce){return void F(ce)}D({data:ne,cacheControl:Z.getResponseHeader("Cache-Control"),expires:Z.getResponseHeader("Expires")})}else{const ne=new Blob([Z.response],{type:Z.getResponseHeader("Content-Type")});F(new Er(Z.status,Z.statusText,v.url,ne))}},w.signal.addEventListener("abort",()=>{Z.abort(),F(mr())}),Z.send(v.body)})}(f,u)};function me(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),h=window.location;return u.protocol===h.protocol&&u.host===h.host}function Xe(f,u,h){h[f]&&h[f].indexOf(u)!==-1||(h[f]=h[f]||[],h[f].push(u))}function Et(f,u,h){if(h&&h[f]){const v=h[f].indexOf(u);v!==-1&&h[f].splice(v,1)}}class Yt{constructor(u,h={}){ft(this,h),this.type=u}}class nn extends Yt{constructor(u,h={}){super("error",ft({error:u},h))}}class rr{on(u,h){return this._listeners=this._listeners||{},Xe(u,h,this._listeners),{unsubscribe:()=>{this.off(u,h)}}}off(u,h){return Et(u,h,this._listeners),Et(u,h,this._oneTimeListeners),this}once(u,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Xe(u,h,this._oneTimeListeners),this):new Promise(v=>this.once(u,v))}fire(u,h){typeof u=="string"&&(u=new Yt(u,h||{}));const v=u.type;if(this.listens(v)){u.target=this;const w=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const G of w)G.call(this,u);const D=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const G of D)Et(v,G,this._oneTimeListeners),G.call(this,u);const F=this._eventedParent;F&&(ft(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(u))}else u instanceof nn&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,h){return this._eventedParent=u,this._eventedParentData=h,this}}var Ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const oe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ve(f,u){const h={};for(const v in f)v!=="ref"&&(h[v]=f[v]);return oe.forEach(v=>{v in u&&(h[v]=u[v])}),h}function p(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let h=0;h<f.length;h++)if(!p(f[h],u[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const h in f)if(!p(f[h],u[h]))return!1;return!0}return f===u}function ze(f,u){f.push(u)}function rt(f,u,h){ze(h,{command:"addSource",args:[f,u[f]]})}function pt(f,u,h){ze(u,{command:"removeSource",args:[f]}),h[f]=!0}function Bt(f,u,h,v){pt(f,h,v),rt(f,u,h)}function vt(f,u,h){let v;for(v in f[h])if(Object.prototype.hasOwnProperty.call(f[h],v)&&v!=="data"&&!p(f[h][v],u[h][v]))return!1;for(v in u[h])if(Object.prototype.hasOwnProperty.call(u[h],v)&&v!=="data"&&!p(f[h][v],u[h][v]))return!1;return!0}function Xt(f,u,h,v,w,D){f=f||{},u=u||{};for(const F in f)Object.prototype.hasOwnProperty.call(f,F)&&(p(f[F],u[F])||h.push({command:D,args:[v,F,u[F],w]}));for(const F in u)Object.prototype.hasOwnProperty.call(u,F)&&!Object.prototype.hasOwnProperty.call(f,F)&&(p(f[F],u[F])||h.push({command:D,args:[v,F,u[F],w]}))}function tn(f){return f.id}function zt(f,u){return f[u.id]=u,f}class _t{constructor(u,h,v,w){this.message=(u?`${u}: `:"")+v,w&&(this.identifier=w),h!=null&&h.__line__&&(this.line=h.__line__)}}function Tn(f,...u){for(const h of u)for(const v in h)f[v]=h[v];return f}class Sn extends Error{constructor(u,h){super(h),this.message=h,this.key=u}}class Ar{constructor(u,h=[]){this.parent=u,this.bindings={};for(const[v,w]of h)this.bindings[v]=w}concat(u){return new Ar(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const wr={kind:"null"},rn={kind:"number"},Fn={kind:"string"},Rn={kind:"boolean"},Br={kind:"color"},Mr={kind:"projectionDefinition"},Kr={kind:"object"},ir={kind:"value"},co={kind:"collator"},Sa={kind:"formatted"},qi={kind:"padding"},yi={kind:"resolvedImage"},oo={kind:"variableAnchorOffsetCollection"};function Mo(f,u){return{kind:"array",itemType:f,N:u}}function Ti(f){if(f.kind==="array"){const u=Ti(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Ua=[wr,rn,Fn,Rn,Br,Mr,Sa,Kr,Mo(ir),qi,yi,oo];function Ea(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Ea(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const h of Ua)if(!Ea(h,u))return null}}return`Expected ${Ti(f)} but found ${Ti(u)} instead.`}function ns(f,u){return u.some(h=>h.kind===f.kind)}function Aa(f,u){return u.some(h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f)}function Al(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const ao=.96422,Pu=.82521,tu=4/29,so=6/29,Dr=3*so*so,Za=so*so*so,Ps=Math.PI/180,ia=180/Math.PI;function Qe(f){return(f%=360)<0&&(f+=360),f}function bt([f,u,h,v]){let w,D;const F=Nn((.2225045*(f=fn(f))+.7168786*(u=fn(u))+.0606169*(h=fn(h)))/1);f===u&&u===h?w=D=F:(w=Nn((.4360747*f+.3850649*u+.1430804*h)/ao),D=Nn((.0139322*f+.0971045*u+.7141733*h)/Pu));const G=116*F-16;return[G<0?0:G,500*(w-F),200*(F-D),v]}function fn(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Nn(f){return f>Za?Math.pow(f,1/3):f/Dr+tu}function un([f,u,h,v]){let w=(f+16)/116,D=isNaN(u)?w:w+u/500,F=isNaN(h)?w:w-h/200;return w=1*Pi(w),D=ao*Pi(D),F=Pu*Pi(F),[er(3.1338561*D-1.6168667*w-.4906146*F),er(-.9787684*D+1.9161415*w+.033454*F),er(.0719453*D-.2289914*w+1.4052427*F),v]}function er(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Pi(f){return f>so?f*f*f:Dr*(f-tu)}function ho(f){return parseInt(f.padEnd(2,f),16)/255}function _s(f,u){return Ns(u?f/100:f,0,1)}function Ns(f,u,h){return Math.min(Math.max(u,f),h)}function vA(f){return!f.some(Number.isNaN)}const ri={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wi(f,u,h){return f+h*(u-f)}function Xa(f,u,h){return f.map((v,w)=>wi(v,u[w],h))}class Ai{constructor(u,h,v,w=1,D=!0){this.r=u,this.g=h,this.b=v,this.a=w,D||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[u,h,v,w]))}static parse(u){if(u instanceof Ai)return u;if(typeof u!="string")return;const h=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=ri[v];if(w){const[F,G,Z]=w;return[F/255,G/255,Z/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const F=v.length<6?1:2;let G=1;return[ho(v.slice(G,G+=F)),ho(v.slice(G,G+=F)),ho(v.slice(G,G+=F)),ho(v.slice(G,G+F)||"ff")]}if(v.startsWith("rgb")){const F=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(F){const[G,Z,ne,ce,Ce,Re,Le,je,He,st,gt,jt]=F,Mt=[ce||" ",Le||" ",st].join("");if(Mt==="  "||Mt==="  /"||Mt===",,"||Mt===",,,"){const Ke=[ne,Re,He].join(""),nt=Ke==="%%%"?100:Ke===""?255:0;if(nt){const Ot=[Ns(+Z/nt,0,1),Ns(+Ce/nt,0,1),Ns(+je/nt,0,1),gt?_s(+gt,jt):1];if(vA(Ot))return Ot}}return}}const D=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[F,G,Z,ne,ce,Ce,Re,Le,je]=D,He=[Z||" ",ce||" ",Re].join("");if(He==="  "||He==="  /"||He===",,"||He===",,,"){const st=[+G,Ns(+ne,0,100),Ns(+Ce,0,100),Le?_s(+Le,je):1];if(vA(st))return function([gt,jt,Mt,Ke]){function nt(Ot){const ln=(Ot+gt/30)%12,Ln=jt*Math.min(Mt,1-Mt);return Mt-Ln*Math.max(-1,Math.min(ln-3,9-ln,1))}return gt=Qe(gt),jt/=100,Mt/=100,[nt(0),nt(8),nt(4),Ke]}(st)}}}(u);return h?new Ai(...h,!1):void 0}get rgb(){const{r:u,g:h,b:v,a:w}=this,D=w||1/0;return this.overwriteGetter("rgb",[u/D,h/D,v/D,w])}get hcl(){return this.overwriteGetter("hcl",function(u){const[h,v,w,D]=bt(u),F=Math.sqrt(v*v+w*w);return[Math.round(1e4*F)?Qe(Math.atan2(w,v)*ia):NaN,F,h,D]}(this.rgb))}get lab(){return this.overwriteGetter("lab",bt(this.rgb))}overwriteGetter(u,h){return Object.defineProperty(this,u,{value:h}),h}toString(){const[u,h,v,w]=this.rgb;return`rgba(${[u,h,v].map(D=>Math.round(255*D)).join(",")},${w})`}static interpolate(u,h,v,w="rgb"){switch(w){case"rgb":{const[D,F,G,Z]=Xa(u.rgb,h.rgb,v);return new Ai(D,F,G,Z,!1)}case"hcl":{const[D,F,G,Z]=u.hcl,[ne,ce,Ce,Re]=h.hcl;let Le,je;if(isNaN(D)||isNaN(ne))isNaN(D)?isNaN(ne)?Le=NaN:(Le=ne,G!==1&&G!==0||(je=ce)):(Le=D,Ce!==1&&Ce!==0||(je=F));else{let Mt=ne-D;ne>D&&Mt>180?Mt-=360:ne<D&&D-ne>180&&(Mt+=360),Le=D+v*Mt}const[He,st,gt,jt]=function([Mt,Ke,nt,Ot]){return Mt=isNaN(Mt)?0:Mt*Ps,un([nt,Math.cos(Mt)*Ke,Math.sin(Mt)*Ke,Ot])}([Le,je??wi(F,ce,v),wi(G,Ce,v),wi(Z,Re,v)]);return new Ai(He,st,gt,jt,!1)}case"lab":{const[D,F,G,Z]=un(Xa(u.lab,h.lab,v));return new Ai(D,F,G,Z,!1)}}}}Ai.black=new Ai(0,0,0,1),Ai.white=new Ai(1,1,1,1),Ai.transparent=new Ai(0,0,0,0),Ai.red=new Ai(1,0,0,1);class ca{constructor(u,h,v){this.sensitivity=u?h?"variant":"case":h?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,h){return this.collator.compare(u,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class iA{constructor(u,h,v,w,D){this.text=u,this.image=h,this.scale=v,this.fontStack=w,this.textColor=D}}class ls{constructor(u){this.sections=u}static fromString(u){return new ls([new iA(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof ls?u:ls.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Lr{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Lr)return u;if(typeof u=="number")return new Lr([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const h of u)if(typeof h!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Lr(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){return new Lr(Xa(u.values,h.values,v))}}class Ei{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const Ja=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Rs{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Rs)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let h=0;h<u.length;h+=2){const v=u[h],w=u[h+1];if(typeof v!="string"||!Ja.has(v)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new Rs(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,v){const w=u.values,D=h.values;if(w.length!==D.length)throw new Ei(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${h.toString()}`);const F=[];for(let G=0;G<w.length;G+=2){if(w[G]!==D[G])throw new Ei(`Cannot interpolate values containing mismatched anchors. from[${G}]: ${w[G]}, to[${G}]: ${D[G]}`);F.push(w[G]);const[Z,ne]=w[G+1],[ce,Ce]=D[G+1];F.push([wi(Z,ce,v),wi(ne,Ce,v)])}return new Rs(F)}}class So{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new So({name:u,available:!1}):null}}class Gs{constructor(u,h,v){this.from=u,this.to=h,this.transition=v}static interpolate(u,h,v){return new Gs(u,h,v)}static parse(u){return u instanceof Gs?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new Gs(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new Gs(u.from,u.to,u.transition):typeof u=="string"?new Gs(u,u,1):void 0}}function hu(f,u,h,v){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof h=="number"&&h>=0&&h<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[f,u,h,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[f,u,h,v]:[f,u,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function zl(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Gs||f instanceof Ai||f instanceof ca||f instanceof ls||f instanceof Lr||f instanceof Rs||f instanceof So)return!0;if(Array.isArray(f)){for(const u of f)if(!zl(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!zl(f[u]))return!1;return!0}return!1}function rs(f){if(f===null)return wr;if(typeof f=="string")return Fn;if(typeof f=="boolean")return Rn;if(typeof f=="number")return rn;if(f instanceof Ai)return Br;if(f instanceof Gs)return Mr;if(f instanceof ca)return co;if(f instanceof ls)return Sa;if(f instanceof Lr)return qi;if(f instanceof Rs)return oo;if(f instanceof So)return yi;if(Array.isArray(f)){const u=f.length;let h;for(const v of f){const w=rs(v);if(h){if(h===w)continue;h=ir;break}h=w}return Mo(h||ir,u)}return Kr}function Vs(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof Ai||f instanceof Gs||f instanceof ls||f instanceof Lr||f instanceof Rs||f instanceof So?f.toString():JSON.stringify(f)}class fo{constructor(u,h){this.type=u,this.value=h}static parse(u,h){if(u.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!zl(u[1]))return h.error("invalid value");const v=u[1];let w=rs(v);const D=h.expectedType;return w.kind!=="array"||w.N!==0||!D||D.kind!=="array"||typeof D.N=="number"&&D.N!==0||(w=D),new fo(w,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ms={string:Fn,number:rn,boolean:Rn,object:Kr};class Ms{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v,w=1;const D=u[0];if(D==="array"){let G,Z;if(u.length>2){const ne=u[1];if(typeof ne!="string"||!(ne in ms)||ne==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);G=ms[ne],w++}else G=ir;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return h.error('The length argument to "array" must be a positive integer literal',2);Z=u[2],w++}v=Mo(G,Z)}else{if(!ms[D])throw new Error(`Types doesn't contain name = ${D}`);v=ms[D]}const F=[];for(;w<u.length;w++){const G=h.parse(u[w],w,ir);if(!G)return null;F.push(G)}return new Ms(v,F)}evaluate(u){for(let h=0;h<this.args.length;h++){const v=this.args[h].evaluate(u);if(!Ea(this.type,rs(v)))return v;if(h===this.args.length-1)throw new Ei(`Expected value to be of type ${Ti(this.type)}, but found ${Ti(rs(v))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const el={"to-boolean":Rn,"to-color":Br,"to-number":rn,"to-string":Fn};class Ks{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[0];if(!el[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&u.length!==2)return h.error("Expected one argument.");const w=el[v],D=[];for(let F=1;F<u.length;F++){const G=h.parse(u[F],F,ir);if(!G)return null;D.push(G)}return new Ks(w,D)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let h,v;for(const w of this.args){if(h=w.evaluate(u),v=null,h instanceof Ai)return h;if(typeof h=="string"){const D=u.parseColor(h);if(D)return D}else if(Array.isArray(h)&&(v=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:hu(h[0],h[1],h[2],h[3]),!v))return new Ai(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Ei(v||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const v of this.args){h=v.evaluate(u);const w=Lr.parse(h);if(w)return w}throw new Ei(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const v of this.args){h=v.evaluate(u);const w=Rs.parse(h);if(w)return w}throw new Ei(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const v of this.args){if(h=v.evaluate(u),h===null)return 0;const w=Number(h);if(!isNaN(w))return w}throw new Ei(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return ls.fromString(Vs(this.args[0].evaluate(u)));case"resolvedImage":return So.fromString(Vs(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return Vs(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const El=["Unknown","Point","LineString","Polygon"];class oA{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?El[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let h=this._parseColorCache[u];return h||(h=this._parseColorCache[u]=Ai.parse(u)),h}}class Vi{constructor(u,h,v=[],w,D=new Ar,F=[]){this.registry=u,this.path=v,this.key=v.map(G=>`[${G}]`).join(""),this.scope=D,this.errors=F,this.expectedType=w,this._isConstant=h}parse(u,h,v,w,D={}){return h?this.concat(h,v,w)._parse(u,D):this._parse(u,D)}_parse(u,h){function v(w,D,F){return F==="assert"?new Ms(D,[w]):F==="coerce"?new Ks(D,[w]):w}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=u[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const D=this.registry[w];if(D){let F=D.parse(u,this);if(!F)return null;if(this.expectedType){const G=this.expectedType,Z=F.type;if(G.kind!=="string"&&G.kind!=="number"&&G.kind!=="boolean"&&G.kind!=="object"&&G.kind!=="array"||Z.kind!=="value")if(G.kind!=="projectionDefinition"||Z.kind!=="string"&&Z.kind!=="array")if(G.kind!=="color"&&G.kind!=="formatted"&&G.kind!=="resolvedImage"||Z.kind!=="value"&&Z.kind!=="string")if(G.kind!=="padding"||Z.kind!=="value"&&Z.kind!=="number"&&Z.kind!=="array")if(G.kind!=="variableAnchorOffsetCollection"||Z.kind!=="value"&&Z.kind!=="array"){if(this.checkSubtype(G,Z))return null}else F=v(F,G,h.typeAnnotation||"coerce");else F=v(F,G,h.typeAnnotation||"coerce");else F=v(F,G,h.typeAnnotation||"coerce");else F=v(F,G,h.typeAnnotation||"coerce");else F=v(F,G,h.typeAnnotation||"assert")}if(!(F instanceof fo)&&F.type.kind!=="resolvedImage"&&this._isConstant(F)){const G=new oA;try{F=new fo(F.type,F.evaluate(G))}catch(Z){return this.error(Z.message),null}}return F}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,h,v){const w=typeof u=="number"?this.path.concat(u):this.path,D=v?this.scope.concat(v):this.scope;return new Vi(this.registry,this._isConstant,w,h||null,D,this.errors)}error(u,...h){const v=`${this.key}${h.map(w=>`[${w}]`).join("")}`;this.errors.push(new Sn(v,u))}checkSubtype(u,h){const v=Ea(u,h);return v&&this.error(v),v}}class nu{constructor(u,h){this.type=h.type,this.bindings=[].concat(u),this.result=h}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const h of this.bindings)u(h[1]);u(this.result)}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const v=[];for(let D=1;D<u.length-1;D+=2){const F=u[D];if(typeof F!="string")return h.error(`Expected string, but found ${typeof F} instead.`,D);if(/[^a-zA-Z0-9_]/.test(F))return h.error("Variable names must contain only alphanumeric characters or '_'.",D);const G=h.parse(u[D+1],D+1);if(!G)return null;v.push([F,G])}const w=h.parse(u[u.length-1],u.length-1,h.expectedType,v);return w?new nu(v,w):null}outputDefined(){return this.result.outputDefined()}}class Ui{constructor(u,h){this.type=h.type,this.name=u,this.boundExpression=h}static parse(u,h){if(u.length!==2||typeof u[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const v=u[1];return h.scope.has(v)?new Ui(v,h.scope.get(v)):h.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Jr{constructor(u,h,v){this.type=u,this.index=h,this.input=v}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,rn),w=h.parse(u[2],2,Mo(h.expectedType||ir));return v&&w?new Jr(w.type.itemType,v,w):null}evaluate(u){const h=this.index.evaluate(u),v=this.input.evaluate(u);if(h<0)throw new Ei(`Array index out of bounds: ${h} < 0.`);if(h>=v.length)throw new Ei(`Array index out of bounds: ${h} > ${v.length-1}.`);if(h!==Math.floor(h))throw new Ei(`Array index must be an integer, but found ${h} instead.`);return v[h]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class ru{constructor(u,h){this.type=Rn,this.needle=u,this.haystack=h}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,ir),w=h.parse(u[2],2,ir);return v&&w?ns(v.type,[Rn,Fn,rn,wr,ir])?new ru(v,w):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(v.type)} instead`):null}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!v)return!1;if(!Aa(h,["boolean","string","number","null"]))throw new Ei(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(rs(h))} instead.`);if(!Aa(v,["string","array"]))throw new Ei(`Expected second argument to be of type array or string, but found ${Ti(rs(v))} instead.`);return v.indexOf(h)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Ni{constructor(u,h,v){this.type=rn,this.needle=u,this.haystack=h,this.fromIndex=v}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,ir),w=h.parse(u[2],2,ir);if(!v||!w)return null;if(!ns(v.type,[Rn,Fn,rn,wr,ir]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(v.type)} instead`);if(u.length===4){const D=h.parse(u[3],3,rn);return D?new Ni(v,w,D):null}return new Ni(v,w)}evaluate(u){const h=this.needle.evaluate(u),v=this.haystack.evaluate(u);if(!Aa(h,["boolean","string","number","null"]))throw new Ei(`Expected first argument to be of type boolean, string, number or null, but found ${Ti(rs(h))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(u)),Aa(v,["string"])){const D=v.indexOf(h,w);return D===-1?-1:[...v.slice(0,D)].length}if(Aa(v,["array"]))return v.indexOf(h,w);throw new Ei(`Expected second argument to be of type array or string, but found ${Ti(rs(v))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class lo{constructor(u,h,v,w,D,F){this.inputType=u,this.type=h,this.input=v,this.cases=w,this.outputs=D,this.otherwise=F}static parse(u,h){if(u.length<5)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return h.error("Expected an even number of arguments.");let v,w;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);const D={},F=[];for(let ne=2;ne<u.length-1;ne+=2){let ce=u[ne];const Ce=u[ne+1];Array.isArray(ce)||(ce=[ce]);const Re=h.concat(ne);if(ce.length===0)return Re.error("Expected at least one branch label.");for(const je of ce){if(typeof je!="number"&&typeof je!="string")return Re.error("Branch labels must be numbers or strings.");if(typeof je=="number"&&Math.abs(je)>Number.MAX_SAFE_INTEGER)return Re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof je=="number"&&Math.floor(je)!==je)return Re.error("Numeric branch labels must be integer values.");if(v){if(Re.checkSubtype(v,rs(je)))return null}else v=rs(je);if(D[String(je)]!==void 0)return Re.error("Branch labels must be unique.");D[String(je)]=F.length}const Le=h.parse(Ce,ne,w);if(!Le)return null;w=w||Le.type,F.push(Le)}const G=h.parse(u[1],1,ir);if(!G)return null;const Z=h.parse(u[u.length-1],u.length-1,w);return Z?G.type.kind!=="value"&&h.concat(1).checkSubtype(v,G.type)?null:new lo(v,w,G,D,F,Z):null}evaluate(u){const h=this.input.evaluate(u);return(rs(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class Ri{constructor(u,h,v){this.type=u,this.branches=h,this.otherwise=v}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return h.error("Expected an odd number of arguments.");let v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const w=[];for(let F=1;F<u.length-1;F+=2){const G=h.parse(u[F],F,Rn);if(!G)return null;const Z=h.parse(u[F+1],F+1,v);if(!Z)return null;w.push([G,Z]),v=v||Z.type}const D=h.parse(u[u.length-1],u.length-1,v);if(!D)return null;if(!v)throw new Error("Can't infer output type");return new Ri(v,w,D)}evaluate(u){for(const[h,v]of this.branches)if(h.evaluate(u))return v.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[h,v]of this.branches)u(h),u(v);u(this.otherwise)}outputDefined(){return this.branches.every(([u,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class ee{constructor(u,h,v,w){this.type=u,this.input=h,this.beginIndex=v,this.endIndex=w}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const v=h.parse(u[1],1,ir),w=h.parse(u[2],2,rn);if(!v||!w)return null;if(!ns(v.type,[Mo(ir),Fn,ir]))return h.error(`Expected first argument to be of type array or string, but found ${Ti(v.type)} instead`);if(u.length===4){const D=h.parse(u[3],3,rn);return D?new ee(v.type,v,w,D):null}return new ee(v.type,v,w)}evaluate(u){const h=this.input.evaluate(u),v=this.beginIndex.evaluate(u);let w;if(this.endIndex&&(w=this.endIndex.evaluate(u)),Aa(h,["string"]))return[...h].slice(v,w).join("");if(Aa(h,["array"]))return h.slice(v,w);throw new Ei(`Expected first argument to be of type array or string, but found ${Ti(rs(h))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Be(f,u){const h=f.length-1;let v,w,D=0,F=h,G=0;for(;D<=F;)if(G=Math.floor((D+F)/2),v=f[G],w=f[G+1],v<=u){if(G===h||u<w)return G;D=G+1}else{if(!(v>u))throw new Ei("Input is not a number.");F=G-1}return 0}class tt{constructor(u,h,v){this.type=u,this.input=h,this.labels=[],this.outputs=[];for(const[w,D]of v)this.labels.push(w),this.outputs.push(D)}static parse(u,h){if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");const v=h.parse(u[1],1,rn);if(!v)return null;const w=[];let D=null;h.expectedType&&h.expectedType.kind!=="value"&&(D=h.expectedType);for(let F=1;F<u.length;F+=2){const G=F===1?-1/0:u[F],Z=u[F+1],ne=F,ce=F+1;if(typeof G!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(w.length&&w[w.length-1][0]>=G)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ne);const Ce=h.parse(Z,ce,D);if(!Ce)return null;D=D||Ce.type,w.push([G,Ce])}return new tt(D,v,w)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return v[0].evaluate(u);const D=h.length;return w>=h[D-1]?v[D-1].evaluate(u):v[Be(h,w)].evaluate(u)}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function qt(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Or,Gn,si=function(){if(Gn)return Or;function f(u,h,v,w){this.cx=3*u,this.bx=3*(v-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=v,this.p2y=w}return Gn=1,Or=f,f.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var v=u,w=0;w<8;w++){var D=this.sampleCurveX(v)-u;if(Math.abs(D)<h)return v;var F=this.sampleCurveDerivativeX(v);if(Math.abs(F)<1e-6)break;v-=D/F}var G=0,Z=1;for(v=u,w=0;w<20&&(D=this.sampleCurveX(v),!(Math.abs(D-u)<h));w++)u>D?G=v:Z=v,v=.5*(Z-G)+G;return v},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},Or}(),ci=qt(si);class gr{constructor(u,h,v,w,D){this.type=u,this.operator=h,this.interpolation=v,this.input=w,this.labels=[],this.outputs=[];for(const[F,G]of D)this.labels.push(F),this.outputs.push(G)}static interpolationFactor(u,h,v,w){let D=0;if(u.name==="exponential")D=Ir(h,u.base,v,w);else if(u.name==="linear")D=Ir(h,1,v,w);else if(u.name==="cubic-bezier"){const F=u.controlPoints;D=new ci(F[0],F[1],F[2],F[3]).solve(Ir(h,1,v,w))}return D}static parse(u,h){let[v,w,D,...F]=u;if(!Array.isArray(w)||w.length===0)return h.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const ne=w[1];if(typeof ne!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:ne}}else{if(w[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const ne=w.slice(1);if(ne.length!==4||ne.some(ce=>typeof ce!="number"||ce<0||ce>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:ne}}}if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(D=h.parse(D,2,rn),!D)return null;const G=[];let Z=null;v==="interpolate-hcl"||v==="interpolate-lab"?Z=Br:h.expectedType&&h.expectedType.kind!=="value"&&(Z=h.expectedType);for(let ne=0;ne<F.length;ne+=2){const ce=F[ne],Ce=F[ne+1],Re=ne+3,Le=ne+4;if(typeof ce!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Re);if(G.length&&G[G.length-1][0]>=ce)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Re);const je=h.parse(Ce,Le,Z);if(!je)return null;Z=Z||je.type,G.push([ce,je])}return Al(Z,rn)||Al(Z,Mr)||Al(Z,Br)||Al(Z,qi)||Al(Z,oo)||Al(Z,Mo(rn))?new gr(Z,v,w,D,G):h.error(`Type ${Ti(Z)} is not interpolatable.`)}evaluate(u){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return v[0].evaluate(u);const D=h.length;if(w>=h[D-1])return v[D-1].evaluate(u);const F=Be(h,w),G=gr.interpolationFactor(this.interpolation,w,h[F],h[F+1]),Z=v[F].evaluate(u),ne=v[F+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wi(Z,ne,G);case"color":return Ai.interpolate(Z,ne,G);case"padding":return Lr.interpolate(Z,ne,G);case"variableAnchorOffsetCollection":return Rs.interpolate(Z,ne,G);case"array":return Xa(Z,ne,G);case"projectionDefinition":return Gs.interpolate(Z,ne,G)}case"interpolate-hcl":return Ai.interpolate(Z,ne,G,"hcl");case"interpolate-lab":return Ai.interpolate(Z,ne,G,"lab")}}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function Ir(f,u,h,v){const w=v-h,D=f-h;return w===0?0:u===1?D/w:(Math.pow(u,D)-1)/(Math.pow(u,w)-1)}const vi={color:Ai.interpolate,number:wi,padding:Lr.interpolate,variableAnchorOffsetCollection:Rs.interpolate,array:Xa};class Eo{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let v=null;const w=h.expectedType;w&&w.kind!=="value"&&(v=w);const D=[];for(const G of u.slice(1)){const Z=h.parse(G,1+D.length,v,void 0,{typeAnnotation:"omit"});if(!Z)return null;v=v||Z.type,D.push(Z)}if(!v)throw new Error("No output type");const F=w&&D.some(G=>Ea(w,G.type));return new Eo(F?ir:v,D)}evaluate(u){let h,v=null,w=0;for(const D of this.args)if(w++,v=D.evaluate(u),v&&v instanceof So&&!v.available&&(h||(h=v.name),v=null,w===this.args.length&&(v=h)),v!==null)break;return v}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function ki(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function qr(f,u,h,v){return v.compare(u,h)===0}function Hi(f,u,h){const v=f!=="=="&&f!=="!=";return class uU{constructor(D,F,G){this.type=Rn,this.lhs=D,this.rhs=F,this.collator=G,this.hasUntypedArgument=D.type.kind==="value"||F.type.kind==="value"}static parse(D,F){if(D.length!==3&&D.length!==4)return F.error("Expected two or three arguments.");const G=D[0];let Z=F.parse(D[1],1,ir);if(!Z)return null;if(!ki(G,Z.type))return F.concat(1).error(`"${G}" comparisons are not supported for type '${Ti(Z.type)}'.`);let ne=F.parse(D[2],2,ir);if(!ne)return null;if(!ki(G,ne.type))return F.concat(2).error(`"${G}" comparisons are not supported for type '${Ti(ne.type)}'.`);if(Z.type.kind!==ne.type.kind&&Z.type.kind!=="value"&&ne.type.kind!=="value")return F.error(`Cannot compare types '${Ti(Z.type)}' and '${Ti(ne.type)}'.`);v&&(Z.type.kind==="value"&&ne.type.kind!=="value"?Z=new Ms(ne.type,[Z]):Z.type.kind!=="value"&&ne.type.kind==="value"&&(ne=new Ms(Z.type,[ne])));let ce=null;if(D.length===4){if(Z.type.kind!=="string"&&ne.type.kind!=="string"&&Z.type.kind!=="value"&&ne.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(ce=F.parse(D[3],3,co),!ce)return null}return new uU(Z,ne,ce)}evaluate(D){const F=this.lhs.evaluate(D),G=this.rhs.evaluate(D);if(v&&this.hasUntypedArgument){const Z=rs(F),ne=rs(G);if(Z.kind!==ne.kind||Z.kind!=="string"&&Z.kind!=="number")throw new Ei(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${Z.kind}, ${ne.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const Z=rs(F),ne=rs(G);if(Z.kind!=="string"||ne.kind!=="string")return u(D,F,G)}return this.collator?h(D,F,G,this.collator.evaluate(D)):u(D,F,G)}eachChild(D){D(this.lhs),D(this.rhs),this.collator&&D(this.collator)}outputDefined(){return!0}}}const Zi=Hi("==",function(f,u,h){return u===h},qr),us=Hi("!=",function(f,u,h){return u!==h},function(f,u,h,v){return!qr(0,u,h,v)}),ya=Hi("<",function(f,u,h){return u<h},function(f,u,h,v){return v.compare(u,h)<0}),za=Hi(">",function(f,u,h){return u>h},function(f,u,h,v){return v.compare(u,h)>0}),fu=Hi("<=",function(f,u,h){return u<=h},function(f,u,h,v){return v.compare(u,h)<=0}),Hs=Hi(">=",function(f,u,h){return u>=h},function(f,u,h,v){return v.compare(u,h)>=0});class dc{constructor(u,h,v){this.type=co,this.locale=v,this.caseSensitive=u,this.diacriticSensitive=h}static parse(u,h){if(u.length!==2)return h.error("Expected one argument.");const v=u[1];if(typeof v!="object"||Array.isArray(v))return h.error("Collator options argument must be an object.");const w=h.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,Rn);if(!w)return null;const D=h.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,Rn);if(!D)return null;let F=null;return v.locale&&(F=h.parse(v.locale,1,Fn),!F)?null:new dc(w,D,F)}evaluate(u){return new ca(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Ba{constructor(u,h,v,w,D){this.type=Fn,this.number=u,this.locale=h,this.currency=v,this.minFractionDigits=w,this.maxFractionDigits=D}static parse(u,h){if(u.length!==3)return h.error("Expected two arguments.");const v=h.parse(u[1],1,rn);if(!v)return null;const w=u[2];if(typeof w!="object"||Array.isArray(w))return h.error("NumberFormat options argument must be an object.");let D=null;if(w.locale&&(D=h.parse(w.locale,1,Fn),!D))return null;let F=null;if(w.currency&&(F=h.parse(w.currency,1,Fn),!F))return null;let G=null;if(w["min-fraction-digits"]&&(G=h.parse(w["min-fraction-digits"],1,rn),!G))return null;let Z=null;return w["max-fraction-digits"]&&(Z=h.parse(w["max-fraction-digits"],1,rn),!Z)?null:new Ba(v,D,F,G,Z)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class cl{constructor(u){this.type=Sa,this.sections=u}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const v=u[1];if(!Array.isArray(v)&&typeof v=="object")return h.error("First argument must be an image or text section.");const w=[];let D=!1;for(let F=1;F<=u.length-1;++F){const G=u[F];if(D&&typeof G=="object"&&!Array.isArray(G)){D=!1;let Z=null;if(G["font-scale"]&&(Z=h.parse(G["font-scale"],1,rn),!Z))return null;let ne=null;if(G["text-font"]&&(ne=h.parse(G["text-font"],1,Mo(Fn)),!ne))return null;let ce=null;if(G["text-color"]&&(ce=h.parse(G["text-color"],1,Br),!ce))return null;const Ce=w[w.length-1];Ce.scale=Z,Ce.font=ne,Ce.textColor=ce}else{const Z=h.parse(u[F],1,ir);if(!Z)return null;const ne=Z.type.kind;if(ne!=="string"&&ne!=="value"&&ne!=="null"&&ne!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");D=!0,w.push({content:Z,scale:null,font:null,textColor:null})}}return new cl(w)}evaluate(u){return new ls(this.sections.map(h=>{const v=h.content.evaluate(u);return rs(v)===yi?new iA("",v,null,null,null):new iA(Vs(v),null,h.scale?h.scale.evaluate(u):null,h.font?h.font.evaluate(u).join(","):null,h.textColor?h.textColor.evaluate(u):null)}))}eachChild(u){for(const h of this.sections)u(h.content),h.scale&&u(h.scale),h.font&&u(h.font),h.textColor&&u(h.textColor)}outputDefined(){return!1}}class ld{constructor(u){this.type=yi,this.input=u}static parse(u,h){if(u.length!==2)return h.error("Expected two arguments.");const v=h.parse(u[1],1,Fn);return v?new ld(v):h.error("No image name provided.")}evaluate(u){const h=this.input.evaluate(u),v=So.fromString(h);return v&&u.availableImages&&(v.available=u.availableImages.indexOf(h)>-1),v}eachChild(u){u(this.input)}outputDefined(){return!1}}class Ru{constructor(u){this.type=rn,this.input=u}static parse(u,h){if(u.length!==2)return h.error(`Expected 1 argument, but found ${u.length-1} instead.`);const v=h.parse(u[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Ti(v.type)} instead.`):new Ru(v):null}evaluate(u){const h=this.input.evaluate(u);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new Ei(`Expected value to be of type string or array, but found ${Ti(rs(h))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const Ku=8192;function bh(f,u){const h=(180+f[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,w=Math.pow(2,u.z);return[Math.round(h*w*Ku),Math.round(v*w*Ku)]}function Ss(f,u){const h=Math.pow(2,u.z);return[(w=(f[0]/Ku+u.x)/h,360*w-180),(v=(f[1]/Ku+u.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,w}function Du(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function ud(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function gp(f,u,h){const v=f[0]-u[0],w=f[1]-u[1],D=f[0]-h[0],F=f[1]-h[1];return v*F-D*w==0&&v*D<=0&&w*F<=0}function sA(f,u,h,v){return(w=[v[0]-h[0],v[1]-h[1]])[0]*(D=[u[0]-f[0],u[1]-f[1]])[1]-w[1]*D[0]!=0&&!(!Zs(f,u,h,v)||!Zs(h,v,f,u));var w,D}function qd(f,u,h){for(const v of h)for(let w=0;w<v.length-1;++w)if(sA(f,u,v[w],v[w+1]))return!0;return!1}function Lc(f,u,h=!1){let v=!1;for(const G of u)for(let Z=0;Z<G.length-1;Z++){if(gp(f,G[Z],G[Z+1]))return h;(D=G[Z])[1]>(w=f)[1]!=(F=G[Z+1])[1]>w[1]&&w[0]<(F[0]-D[0])*(w[1]-D[1])/(F[1]-D[1])+D[0]&&(v=!v)}var w,D,F;return v}function yp(f,u){for(const h of u)if(Lc(f,h))return!0;return!1}function Rf(f,u){for(const h of f)if(!Lc(h,u))return!1;for(let h=0;h<f.length-1;++h)if(qd(f[h],f[h+1],u))return!1;return!0}function hc(f,u){for(const h of u)if(Rf(f,h))return!0;return!1}function Zs(f,u,h,v){const w=v[0]-h[0],D=v[1]-h[1],F=(f[0]-h[0])*D-w*(f[1]-h[1]),G=(u[0]-h[0])*D-w*(u[1]-h[1]);return F>0&&G<0||F<0&&G>0}function xh(f,u,h){const v=[];for(let w=0;w<f.length;w++){const D=[];for(let F=0;F<f[w].length;F++){const G=bh(f[w][F],h);Du(u,G),D.push(G)}v.push(D)}return v}function ef(f,u,h){const v=[];for(let w=0;w<f.length;w++){const D=xh(f[w],u,h);v.push(D)}return v}function Ad(f,u,h,v){if(f[0]<h[0]||f[0]>h[2]){const w=.5*v;let D=f[0]-h[0]>w?-v:h[0]-f[0]>w?v:0;D===0&&(D=f[0]-h[2]>w?-v:h[2]-f[0]>w?v:0),f[0]+=D}Du(u,f)}function tf(f,u,h,v){const w=Math.pow(2,v.z)*Ku,D=[v.x*Ku,v.y*Ku],F=[];for(const G of f)for(const Z of G){const ne=[Z.x+D[0],Z.y+D[1]];Ad(ne,u,h,w),F.push(ne)}return F}function cd(f,u,h,v){const w=Math.pow(2,v.z)*Ku,D=[v.x*Ku,v.y*Ku],F=[];for(const Z of f){const ne=[];for(const ce of Z){const Ce=[ce.x+D[0],ce.y+D[1]];Du(u,Ce),ne.push(Ce)}F.push(ne)}if(u[2]-u[0]<=w/2){(G=u)[0]=G[1]=1/0,G[2]=G[3]=-1/0;for(const Z of F)for(const ne of Z)Ad(ne,u,h,w)}var G;return F}class fc{constructor(u,h){this.type=Rn,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(zl(u[1])){const v=u[1];if(v.type==="FeatureCollection"){const w=[];for(const D of v.features){const{type:F,coordinates:G}=D.geometry;F==="Polygon"&&w.push(G),F==="MultiPolygon"&&w.push(...G)}if(w.length)return new fc(v,{type:"MultiPolygon",coordinates:w})}else if(v.type==="Feature"){const w=v.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new fc(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new fc(v,v)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const w=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(v.type==="Polygon"){const G=xh(v.coordinates,D,F),Z=tf(h.geometry(),w,D,F);if(!ud(w,D))return!1;for(const ne of Z)if(!Lc(ne,G))return!1}if(v.type==="MultiPolygon"){const G=ef(v.coordinates,D,F),Z=tf(h.geometry(),w,D,F);if(!ud(w,D))return!1;for(const ne of Z)if(!yp(ne,G))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const w=[1/0,1/0,-1/0,-1/0],D=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(v.type==="Polygon"){const G=xh(v.coordinates,D,F),Z=cd(h.geometry(),w,D,F);if(!ud(w,D))return!1;for(const ne of Z)if(!Rf(ne,G))return!1}if(v.type==="MultiPolygon"){const G=ef(v.coordinates,D,F),Z=cd(h.geometry(),w,D,F);if(!ud(w,D))return!1;for(const ne of Z)if(!hc(ne,G))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let wh=class{constructor(f=[],u=(h,v)=>h<v?-1:h>v?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:h}=this,v=u[f];for(;f>0;){const w=f-1>>1,D=u[w];if(h(v,D)>=0)break;u[f]=D,f=w}u[f]=v}_down(f){const{data:u,compare:h}=this,v=this.length>>1,w=u[f];for(;f<v;){let D=1+(f<<1);const F=D+1;if(F<this.length&&h(u[F],u[D])<0&&(D=F),h(u[D],w)>=0)break;u[f]=u[D],f=D}u[f]=w}};function Mh(f,u,h=0,v=f.length-1,w=am){for(;v>h;){if(v-h>600){const Z=v-h+1,ne=u-h+1,ce=Math.log(Z),Ce=.5*Math.exp(2*ce/3),Re=.5*Math.sqrt(ce*Ce*(Z-Ce)/Z)*(ne-Z/2<0?-1:1);Mh(f,u,Math.max(h,Math.floor(u-ne*Ce/Z+Re)),Math.min(v,Math.floor(u+(Z-ne)*Ce/Z+Re)),w)}const D=f[u];let F=h,G=v;for(dd(f,h,u),w(f[v],D)>0&&dd(f,h,v);F<G;){for(dd(f,F,G),F++,G--;w(f[F],D)<0;)F++;for(;w(f[G],D)>0;)G--}w(f[h],D)===0?dd(f,h,G):(G++,dd(f,G,v)),G<=u&&(h=G+1),u<=G&&(v=G-1)}}function dd(f,u,h){const v=f[u];f[u]=f[h],f[h]=v}function am(f,u){return f<u?-1:f>u?1:0}function Fc(f,u){if(f.length<=1)return[f];const h=[];let v,w;for(const D of f){const F=Sh(D);F!==0&&(D.area=Math.abs(F),w===void 0&&(w=F<0),w===F<0?(v&&h.push(v),v=[D]):v.push(D))}if(v&&h.push(v),u>1)for(let D=0;D<h.length;D++)h[D].length<=u||(Mh(h[D],u,1,h[D].length-1,pu),h[D]=h[D].slice(0,u));return h}function pu(f,u){return u.area-f.area}function Sh(f){let u=0;for(let h,v,w=0,D=f.length,F=D-1;w<D;F=w++)h=f[w],v=f[F],u+=(v.x-h.x)*(h.y+v.y);return u}const mu=1/298.257223563,aA=mu*(2-mu),Uc=Math.PI/180;class Yd{constructor(u){const h=6378.137*Uc*1e3,v=Math.cos(u*Uc),w=1/(1-aA*(1-v*v)),D=Math.sqrt(w);this.kx=h*D*v,this.ky=h*D*w*(1-aA)}distance(u,h){const v=this.wrap(u[0]-h[0])*this.kx,w=(u[1]-h[1])*this.ky;return Math.sqrt(v*v+w*w)}pointOnLine(u,h){let v,w,D,F,G=1/0;for(let Z=0;Z<u.length-1;Z++){let ne=u[Z][0],ce=u[Z][1],Ce=this.wrap(u[Z+1][0]-ne)*this.kx,Re=(u[Z+1][1]-ce)*this.ky,Le=0;Ce===0&&Re===0||(Le=(this.wrap(h[0]-ne)*this.kx*Ce+(h[1]-ce)*this.ky*Re)/(Ce*Ce+Re*Re),Le>1?(ne=u[Z+1][0],ce=u[Z+1][1]):Le>0&&(ne+=Ce/this.kx*Le,ce+=Re/this.ky*Le)),Ce=this.wrap(h[0]-ne)*this.kx,Re=(h[1]-ce)*this.ky;const je=Ce*Ce+Re*Re;je<G&&(G=je,v=ne,w=ce,D=Z,F=Le)}return{point:[v,w],index:D,t:Math.max(0,Math.min(1,F))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function nf(f,u){return u[0]-f[0]}function iu(f){return f[1]-f[0]+1}function Bl(f,u){return f[1]>=f[0]&&f[1]<u}function WA(f,u){if(f[0]>f[1])return[null,null];const h=iu(f);if(u){if(h===2)return[f,null];const w=Math.floor(h/2);return[[f[0],f[0]+w],[f[0]+w,f[1]]]}if(h===1)return[f,null];const v=Math.floor(h/2)-1;return[[f[0],f[0]+v],[f[0]+v+1,f[1]]]}function zc(f,u){if(!Bl(u,f.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let v=u[0];v<=u[1];++v)Du(h,f[v]);return h}function rf(f){const u=[1/0,1/0,-1/0,-1/0];for(const h of f)for(const v of h)Du(u,v);return u}function Kf(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function hd(f,u,h){if(!Kf(f)||!Kf(u))return NaN;let v=0,w=0;return f[2]<u[0]&&(v=u[0]-f[2]),f[0]>u[2]&&(v=f[0]-u[2]),f[1]>u[3]&&(w=f[1]-u[3]),f[3]<u[1]&&(w=u[1]-f[3]),h.distance([0,0],[v,w])}function _A(f,u,h){const v=h.pointOnLine(u,f);return h.distance(f,v.point)}function tl(f,u,h,v,w){const D=Math.min(_A(f,[h,v],w),_A(u,[h,v],w)),F=Math.min(_A(h,[f,u],w),_A(v,[f,u],w));return Math.min(D,F)}function Ol(f,u,h,v,w){if(!Bl(u,f.length)||!Bl(v,h.length))return 1/0;let D=1/0;for(let F=u[0];F<u[1];++F){const G=f[F],Z=f[F+1];for(let ne=v[0];ne<v[1];++ne){const ce=h[ne],Ce=h[ne+1];if(sA(G,Z,ce,Ce))return 0;D=Math.min(D,tl(G,Z,ce,Ce,w))}}return D}function $o(f,u,h,v,w){if(!Bl(u,f.length)||!Bl(v,h.length))return NaN;let D=1/0;for(let F=u[0];F<=u[1];++F)for(let G=v[0];G<=v[1];++G)if(D=Math.min(D,w.distance(f[F],h[G])),D===0)return D;return D}function Eh(f,u,h){if(Lc(f,u,!0))return 0;let v=1/0;for(const w of u){const D=w[0],F=w[w.length-1];if(D!==F&&(v=Math.min(v,_A(f,[F,D],h)),v===0))return v;const G=h.pointOnLine(w,f);if(v=Math.min(v,h.distance(f,G.point)),v===0)return v}return v}function lm(f,u,h,v){if(!Bl(u,f.length))return NaN;for(let D=u[0];D<=u[1];++D)if(Lc(f[D],h,!0))return 0;let w=1/0;for(let D=u[0];D<u[1];++D){const F=f[D],G=f[D+1];for(const Z of h)for(let ne=0,ce=Z.length,Ce=ce-1;ne<ce;Ce=ne++){const Re=Z[Ce],Le=Z[ne];if(sA(F,G,Re,Le))return 0;w=Math.min(w,tl(F,G,Re,Le,v))}}return w}function jc(f,u){for(const h of f)for(const v of h)if(Lc(v,u,!0))return!0;return!1}function Lu(f,u,h,v=1/0){const w=rf(f),D=rf(u);if(v!==1/0&&hd(w,D,h)>=v)return v;if(ud(w,D)){if(jc(f,u))return 0}else if(jc(u,f))return 0;let F=1/0;for(const G of f)for(let Z=0,ne=G.length,ce=ne-1;Z<ne;ce=Z++){const Ce=G[ce],Re=G[Z];for(const Le of u)for(let je=0,He=Le.length,st=He-1;je<He;st=je++){const gt=Le[st],jt=Le[je];if(sA(Ce,Re,gt,jt))return 0;F=Math.min(F,tl(Ce,Re,gt,jt,h))}}return F}function $d(f,u,h,v,w,D){if(!D)return;const F=hd(zc(v,D),w,h);F<u&&f.push([F,D,[0,0]])}function Vd(f,u,h,v,w,D,F){if(!D||!F)return;const G=hd(zc(v,D),zc(w,F),h);G<u&&f.push([G,D,F])}function pc(f,u,h,v,w=1/0){let D=Math.min(v.distance(f[0],h[0][0]),w);if(D===0)return D;const F=new wh([[0,[0,f.length-1],[0,0]]],nf),G=rf(h);for(;F.length>0;){const Z=F.pop();if(Z[0]>=D)continue;const ne=Z[1],ce=u?50:100;if(iu(ne)<=ce){if(!Bl(ne,f.length))return NaN;if(u){const Ce=lm(f,ne,h,v);if(isNaN(Ce)||Ce===0)return Ce;D=Math.min(D,Ce)}else for(let Ce=ne[0];Ce<=ne[1];++Ce){const Re=Eh(f[Ce],h,v);if(D=Math.min(D,Re),D===0)return 0}}else{const Ce=WA(ne,u);$d(F,D,v,f,G,Ce[0]),$d(F,D,v,f,G,Ce[1])}}return D}function Hd(f,u,h,v,w,D=1/0){let F=Math.min(D,w.distance(f[0],h[0]));if(F===0)return F;const G=new wh([[0,[0,f.length-1],[0,h.length-1]]],nf);for(;G.length>0;){const Z=G.pop();if(Z[0]>=F)continue;const ne=Z[1],ce=Z[2],Ce=u?50:100,Re=v?50:100;if(iu(ne)<=Ce&&iu(ce)<=Re){if(!Bl(ne,f.length)&&Bl(ce,h.length))return NaN;let Le;if(u&&v)Le=Ol(f,ne,h,ce,w),F=Math.min(F,Le);else if(u&&!v){const je=f.slice(ne[0],ne[1]+1);for(let He=ce[0];He<=ce[1];++He)if(Le=_A(h[He],je,w),F=Math.min(F,Le),F===0)return F}else if(!u&&v){const je=h.slice(ce[0],ce[1]+1);for(let He=ne[0];He<=ne[1];++He)if(Le=_A(f[He],je,w),F=Math.min(F,Le),F===0)return F}else Le=$o(f,ne,h,ce,w),F=Math.min(F,Le)}else{const Le=WA(ne,u),je=WA(ce,v);Vd(G,F,w,f,h,Le[0],je[0]),Vd(G,F,w,f,h,Le[0],je[1]),Vd(G,F,w,f,h,Le[1],je[0]),Vd(G,F,w,f,h,Le[1],je[1])}}return F}function of(f){return f.type==="MultiPolygon"?f.coordinates.map(u=>({type:"Polygon",coordinates:u})):f.type==="MultiLineString"?f.coordinates.map(u=>({type:"LineString",coordinates:u})):f.type==="MultiPoint"?f.coordinates.map(u=>({type:"Point",coordinates:u})):[f]}class mc{constructor(u,h){this.type=rn,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(zl(u[1])){const v=u[1];if(v.type==="FeatureCollection")return new mc(v,v.features.map(w=>of(w.geometry)).flat());if(v.type==="Feature")return new mc(v,of(v.geometry));if("type"in v&&"coordinates"in v)return new mc(v,of(v))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,v){const w=h.geometry(),D=w.flat().map(Z=>Ss([Z.x,Z.y],h.canonical));if(w.length===0)return NaN;const F=new Yd(D[0][1]);let G=1/0;for(const Z of v){switch(Z.type){case"Point":G=Math.min(G,Hd(D,!1,[Z.coordinates],!1,F,G));break;case"LineString":G=Math.min(G,Hd(D,!1,Z.coordinates,!0,F,G));break;case"Polygon":G=Math.min(G,pc(D,!1,Z.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,v){const w=h.geometry(),D=w.flat().map(Z=>Ss([Z.x,Z.y],h.canonical));if(w.length===0)return NaN;const F=new Yd(D[0][1]);let G=1/0;for(const Z of v){switch(Z.type){case"Point":G=Math.min(G,Hd(D,!0,[Z.coordinates],!1,F,G));break;case"LineString":G=Math.min(G,Hd(D,!0,Z.coordinates,!0,F,G));break;case"Polygon":G=Math.min(G,pc(D,!0,Z.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="Polygon")return function(h,v){const w=h.geometry();if(w.length===0||w[0].length===0)return NaN;const D=Fc(w,0).map(Z=>Z.map(ne=>ne.map(ce=>Ss([ce.x,ce.y],h.canonical)))),F=new Yd(D[0][0][0][1]);let G=1/0;for(const Z of v)for(const ne of D){switch(Z.type){case"Point":G=Math.min(G,pc([Z.coordinates],!1,ne,F,G));break;case"LineString":G=Math.min(G,pc(Z.coordinates,!0,ne,F,G));break;case"Polygon":G=Math.min(G,Lu(ne,Z.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const gu={"==":Zi,"!=":us,">":za,"<":ya,">=":Hs,"<=":fu,array:Ms,at:Jr,boolean:Ms,case:Ri,coalesce:Eo,collator:dc,format:cl,image:ld,in:ru,"index-of":Ni,interpolate:gr,"interpolate-hcl":gr,"interpolate-lab":gr,length:Ru,let:nu,literal:fo,match:lo,number:Ms,"number-format":Ba,object:Ms,slice:ee,step:tt,string:Ms,"to-boolean":Ks,"to-color":Ks,"to-number":Ks,"to-string":Ks,var:Ui,within:fc,distance:mc};class $t{constructor(u,h,v,w){this.name=u,this.type=h,this._evaluate=v,this.args=w}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,h){const v=u[0],w=$t.definitions[v];if(!w)return h.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const D=Array.isArray(w)?w[0]:w.type,F=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,G=F.filter(([ne])=>!Array.isArray(ne)||ne.length===u.length-1);let Z=null;for(const[ne,ce]of G){Z=new Vi(h.registry,Co,h.path,null,h.scope);const Ce=[];let Re=!1;for(let Le=1;Le<u.length;Le++){const je=u[Le],He=Array.isArray(ne)?ne[Le-1]:ne.type,st=Z.parse(je,1+Ce.length,He);if(!st){Re=!0;break}Ce.push(st)}if(!Re)if(Array.isArray(ne)&&ne.length!==Ce.length)Z.error(`Expected ${ne.length} arguments, but found ${Ce.length} instead.`);else{for(let Le=0;Le<Ce.length;Le++){const je=Array.isArray(ne)?ne[Le]:ne.type,He=Ce[Le];Z.concat(Le+1).checkSubtype(je,He.type)}if(Z.errors.length===0)return new $t(v,D,ce,Ce)}}if(G.length===1)h.errors.push(...Z.errors);else{const ne=(G.length?G:F).map(([Ce])=>{return Re=Ce,Array.isArray(Re)?`(${Re.map(Ti).join(", ")})`:`(${Ti(Re.type)}...)`;var Re}).join(" | "),ce=[];for(let Ce=1;Ce<u.length;Ce++){const Re=h.parse(u[Ce],1+ce.length);if(!Re)return null;ce.push(Ti(Re.type))}h.error(`Expected arguments of type ${ne}, but found (${ce.join(", ")}) instead.`)}return null}static register(u,h){$t.definitions=h;for(const v in h)u[v]=$t}}function kn(f,[u,h,v,w]){u=u.evaluate(f),h=h.evaluate(f),v=v.evaluate(f);const D=w?w.evaluate(f):1,F=hu(u,h,v,D);if(F)throw new Ei(F);return new Ai(u/255,h/255,v/255,D,!1)}function sn(f,u){return f in u}function Ur(f,u){const h=u[f];return h===void 0?null:h}function _i(f){return{type:f}}function Co(f){if(f instanceof Ui)return Co(f.boundExpression);if(f instanceof $t&&f.name==="error"||f instanceof dc||f instanceof fc||f instanceof mc)return!1;const u=f instanceof Ks||f instanceof Ms;let h=!0;return f.eachChild(v=>{h=u?h&&Co(v):h&&v instanceof fo}),!!h&&oa(f)&&QA(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oa(f){if(f instanceof $t&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof fc||f instanceof mc)return!1;let u=!0;return f.eachChild(h=>{u&&!oa(h)&&(u=!1)}),u}function Vo(f){if(f instanceof $t&&f.name==="feature-state")return!1;let u=!0;return f.eachChild(h=>{u&&!Vo(h)&&(u=!1)}),u}function QA(f,u){if(f instanceof $t&&u.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild(v=>{h&&!QA(v,u)&&(h=!1)}),h}function vp(f){return{result:"success",value:f}}function Il(f){return{result:"error",value:f}}function yu(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function qA(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function kl(f){return!!f.expression&&f.expression.interpolated}function Gi(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function YA(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Uo(f){return f}function Nc(f,u){const h=u.type==="color",v=f.stops&&typeof f.stops[0][0]=="object",w=v||!(v||f.property!==void 0),D=f.type||(kl(u)?"exponential":"interval");if(h||u.type==="padding"){const ce=h?Ai.parse:Lr.parse;(f=Tn({},f)).stops&&(f.stops=f.stops.map(Ce=>[Ce[0],ce(Ce[1])])),f.default=ce(f.default?f.default:u.default)}if(f.colorSpace&&(F=f.colorSpace)!=="rgb"&&F!=="hcl"&&F!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var F;let G,Z,ne;if(D==="exponential")G=Tl;else if(D==="interval")G=lA;else if(D==="categorical"){G=CA,Z=Object.create(null);for(const ce of f.stops)Z[ce[0]]=ce[1];ne=typeof f.stops[0][0]}else{if(D!=="identity")throw new Error(`Unknown function type "${D}"`);G=gc}if(v){const ce={},Ce=[];for(let je=0;je<f.stops.length;je++){const He=f.stops[je],st=He[0].zoom;ce[st]===void 0&&(ce[st]={zoom:st,type:f.type,property:f.property,default:f.default,stops:[]},Ce.push(st)),ce[st].stops.push([He[0].value,He[1]])}const Re=[];for(const je of Ce)Re.push([ce[je].zoom,Nc(ce[je],u)]);const Le={name:"linear"};return{kind:"composite",interpolationType:Le,interpolationFactor:gr.interpolationFactor.bind(void 0,Le),zoomStops:Re.map(je=>je[0]),evaluate:({zoom:je},He)=>Tl({stops:Re,base:f.base},u,je).evaluate(je,He)}}if(w){const ce=D==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ce,interpolationFactor:gr.interpolationFactor.bind(void 0,ce),zoomStops:f.stops.map(Ce=>Ce[0]),evaluate:({zoom:Ce})=>G(f,u,Ce,Z,ne)}}return{kind:"source",evaluate(ce,Ce){const Re=Ce&&Ce.properties?Ce.properties[f.property]:void 0;return Re===void 0?$A(f.default,u.default):G(f,u,Re,Z,ne)}}}function $A(f,u,h){return f!==void 0?f:u!==void 0?u:h!==void 0?h:void 0}function CA(f,u,h,v,w){return $A(typeof h===w?v[h]:void 0,f.default,u.default)}function lA(f,u,h){if(Gi(h)!=="number")return $A(f.default,u.default);const v=f.stops.length;if(v===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[v-1][0])return f.stops[v-1][1];const w=Be(f.stops.map(D=>D[0]),h);return f.stops[w][1]}function Tl(f,u,h){const v=f.base!==void 0?f.base:1;if(Gi(h)!=="number")return $A(f.default,u.default);const w=f.stops.length;if(w===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[w-1][0])return f.stops[w-1][1];const D=Be(f.stops.map(ce=>ce[0]),h),F=function(ce,Ce,Re,Le){const je=Le-Re,He=ce-Re;return je===0?0:Ce===1?He/je:(Math.pow(Ce,He)-1)/(Math.pow(Ce,je)-1)}(h,v,f.stops[D][0],f.stops[D+1][0]),G=f.stops[D][1],Z=f.stops[D+1][1],ne=vi[u.type]||Uo;return typeof G.evaluate=="function"?{evaluate(...ce){const Ce=G.evaluate.apply(void 0,ce),Re=Z.evaluate.apply(void 0,ce);if(Ce!==void 0&&Re!==void 0)return ne(Ce,Re,F,f.colorSpace)}}:ne(G,Z,F,f.colorSpace)}function gc(f,u,h){switch(u.type){case"color":h=Ai.parse(h);break;case"formatted":h=ls.fromString(h.toString());break;case"resolvedImage":h=So.fromString(h.toString());break;case"padding":h=Lr.parse(h);break;default:Gi(h)===u.type||u.type==="enum"&&u.values[h]||(h=void 0)}return $A(h,f.default,u.default)}$t.register(gu,{error:[{kind:"error"},[Fn],(f,[u])=>{throw new Ei(u.evaluate(f))}],typeof:[Fn,[ir],(f,[u])=>Ti(rs(u.evaluate(f)))],"to-rgba":[Mo(rn,4),[Br],(f,[u])=>{const[h,v,w,D]=u.evaluate(f).rgb;return[255*h,255*v,255*w,D]}],rgb:[Br,[rn,rn,rn],kn],rgba:[Br,[rn,rn,rn,rn],kn],has:{type:Rn,overloads:[[[Fn],(f,[u])=>sn(u.evaluate(f),f.properties())],[[Fn,Kr],(f,[u,h])=>sn(u.evaluate(f),h.evaluate(f))]]},get:{type:ir,overloads:[[[Fn],(f,[u])=>Ur(u.evaluate(f),f.properties())],[[Fn,Kr],(f,[u,h])=>Ur(u.evaluate(f),h.evaluate(f))]]},"feature-state":[ir,[Fn],(f,[u])=>Ur(u.evaluate(f),f.featureState||{})],properties:[Kr,[],f=>f.properties()],"geometry-type":[Fn,[],f=>f.geometryType()],id:[ir,[],f=>f.id()],zoom:[rn,[],f=>f.globals.zoom],"heatmap-density":[rn,[],f=>f.globals.heatmapDensity||0],"line-progress":[rn,[],f=>f.globals.lineProgress||0],accumulated:[ir,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[rn,_i(rn),(f,u)=>{let h=0;for(const v of u)h+=v.evaluate(f);return h}],"*":[rn,_i(rn),(f,u)=>{let h=1;for(const v of u)h*=v.evaluate(f);return h}],"-":{type:rn,overloads:[[[rn,rn],(f,[u,h])=>u.evaluate(f)-h.evaluate(f)],[[rn],(f,[u])=>-u.evaluate(f)]]},"/":[rn,[rn,rn],(f,[u,h])=>u.evaluate(f)/h.evaluate(f)],"%":[rn,[rn,rn],(f,[u,h])=>u.evaluate(f)%h.evaluate(f)],ln2:[rn,[],()=>Math.LN2],pi:[rn,[],()=>Math.PI],e:[rn,[],()=>Math.E],"^":[rn,[rn,rn],(f,[u,h])=>Math.pow(u.evaluate(f),h.evaluate(f))],sqrt:[rn,[rn],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[rn,[rn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[rn,[rn],(f,[u])=>Math.log(u.evaluate(f))],log2:[rn,[rn],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[rn,[rn],(f,[u])=>Math.sin(u.evaluate(f))],cos:[rn,[rn],(f,[u])=>Math.cos(u.evaluate(f))],tan:[rn,[rn],(f,[u])=>Math.tan(u.evaluate(f))],asin:[rn,[rn],(f,[u])=>Math.asin(u.evaluate(f))],acos:[rn,[rn],(f,[u])=>Math.acos(u.evaluate(f))],atan:[rn,[rn],(f,[u])=>Math.atan(u.evaluate(f))],min:[rn,_i(rn),(f,u)=>Math.min(...u.map(h=>h.evaluate(f)))],max:[rn,_i(rn),(f,u)=>Math.max(...u.map(h=>h.evaluate(f)))],abs:[rn,[rn],(f,[u])=>Math.abs(u.evaluate(f))],round:[rn,[rn],(f,[u])=>{const h=u.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[rn,[rn],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[rn,[rn],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[Rn,[Fn,ir],(f,[u,h])=>f.properties()[u.value]===h.value],"filter-id-==":[Rn,[ir],(f,[u])=>f.id()===u.value],"filter-type-==":[Rn,[Fn],(f,[u])=>f.geometryType()===u.value],"filter-<":[Rn,[Fn,ir],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v<w}],"filter-id-<":[Rn,[ir],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h<v}],"filter->":[Rn,[Fn,ir],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v>w}],"filter-id->":[Rn,[ir],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h>v}],"filter-<=":[Rn,[Fn,ir],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v<=w}],"filter-id-<=":[Rn,[ir],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h<=v}],"filter->=":[Rn,[Fn,ir],(f,[u,h])=>{const v=f.properties()[u.value],w=h.value;return typeof v==typeof w&&v>=w}],"filter-id->=":[Rn,[ir],(f,[u])=>{const h=f.id(),v=u.value;return typeof h==typeof v&&h>=v}],"filter-has":[Rn,[ir],(f,[u])=>u.value in f.properties()],"filter-has-id":[Rn,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Rn,[Mo(Fn)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[Rn,[Mo(ir)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[Rn,[Fn,Mo(ir)],(f,[u,h])=>h.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[Rn,[Fn,Mo(ir)],(f,[u,h])=>function(v,w,D,F){for(;D<=F;){const G=D+F>>1;if(w[G]===v)return!0;w[G]>v?F=G-1:D=G+1}return!1}(f.properties()[u.value],h.value,0,h.value.length-1)],all:{type:Rn,overloads:[[[Rn,Rn],(f,[u,h])=>u.evaluate(f)&&h.evaluate(f)],[_i(Rn),(f,u)=>{for(const h of u)if(!h.evaluate(f))return!1;return!0}]]},any:{type:Rn,overloads:[[[Rn,Rn],(f,[u,h])=>u.evaluate(f)||h.evaluate(f)],[_i(Rn),(f,u)=>{for(const h of u)if(h.evaluate(f))return!0;return!1}]]},"!":[Rn,[Rn],(f,[u])=>!u.evaluate(f)],"is-supported-script":[Rn,[Fn],(f,[u])=>{const h=f.globals&&f.globals.isSupportedScript;return!h||h(u.evaluate(f))}],upcase:[Fn,[Fn],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Fn,[Fn],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Fn,_i(ir),(f,u)=>u.map(h=>Vs(h.evaluate(f))).join("")],"resolved-locale":[Fn,[co],(f,[u])=>u.evaluate(f).resolvedLocale()]});class vu{constructor(u,h){var v;this.expression=u,this._warningHistory={},this._evaluator=new oA,this._defaultValue=h?(v=h).type==="color"&&YA(v.default)?new Ai(0,0,0,0):v.type==="color"?Ai.parse(v.default)||null:v.type==="padding"?Lr.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Rs.parse(v.default)||null:v.type==="projectionDefinition"?Gs.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(u,h,v,w,D,F){return this._evaluator.globals=u,this._evaluator.feature=h,this._evaluator.featureState=v,this._evaluator.canonical=w,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(u,h,v,w,D,F){this._evaluator.globals=u,this._evaluator.feature=h||null,this._evaluator.featureState=v||null,this._evaluator.canonical=w,this._evaluator.availableImages=D||null,this._evaluator.formattedSection=F||null;try{const G=this.expression.evaluate(this._evaluator);if(G==null||typeof G=="number"&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new Ei(`Expected value to be one of ${Object.keys(this._enumValues).map(Z=>JSON.stringify(Z)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(G.message)),this._defaultValue}}}function jl(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in gu}function Gc(f,u){const h=new Vi(gu,Co,[],u?function(w){const D={color:Br,string:Fn,number:rn,enum:Fn,boolean:Rn,formatted:Sa,padding:qi,projectionDefinition:Mr,resolvedImage:yi,variableAnchorOffsetCollection:oo};return w.type==="array"?Mo(D[w.value]||ir,w.length):D[w.type]}(u):void 0),v=h.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?vp(new vu(v,u)):Il(h.errors)}class Zd{constructor(u,h){this.kind=u,this._styleExpression=h,this.isStateDependent=u!=="constant"&&!Vo(h.expression)}evaluateWithoutErrorHandling(u,h,v,w,D,F){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,w,D,F)}evaluate(u,h,v,w,D,F){return this._styleExpression.evaluate(u,h,v,w,D,F)}}class ja{constructor(u,h,v,w){this.kind=u,this.zoomStops=v,this._styleExpression=h,this.isStateDependent=u!=="camera"&&!Vo(h.expression),this.interpolationType=w}evaluateWithoutErrorHandling(u,h,v,w,D,F){return this._styleExpression.evaluateWithoutErrorHandling(u,h,v,w,D,F)}evaluate(u,h,v,w,D,F){return this._styleExpression.evaluate(u,h,v,w,D,F)}interpolationFactor(u,h,v){return this.interpolationType?gr.interpolationFactor(this.interpolationType,u,h,v):0}}function fd(f,u){const h=Gc(f,u);if(h.result==="error")return h;const v=h.value.expression,w=oa(v);if(!w&&!yu(u))return Il([new Sn("","data expressions not supported")]);const D=QA(v,["zoom"]);if(!D&&!qA(u))return Il([new Sn("","zoom expressions not supported")]);const F=VA(v);return F||D?F instanceof Sn?Il([F]):F instanceof gr&&!kl(u)?Il([new Sn("",'"interpolate" expressions cannot be used with this property')]):vp(F?new ja(w?"camera":"composite",h.value,F.labels,F instanceof gr?F.interpolation:void 0):new Zd(w?"constant":"source",h.value)):Il([new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yc{constructor(u,h){this._parameters=u,this._specification=h,Tn(this,Nc(this._parameters,this._specification))}static deserialize(u){return new yc(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function VA(f){let u=null;if(f instanceof nu)u=VA(f.result);else if(f instanceof Eo){for(const h of f.args)if(u=VA(h),u)break}else(f instanceof tt||f instanceof gr)&&f.input instanceof $t&&f.input.name==="zoom"&&(u=f);return u instanceof Sn||f.eachChild(h=>{const v=VA(h);v instanceof Sn?u=v:!u&&v?u=new Sn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&v&&u!==v&&(u=new Sn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function sf(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!sf(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const bA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function HA(f){if(f==null)return{filter:()=>!0,needGeometry:!1};sf(f)||(f=Ho(f));const u=Gc(f,bA);if(u.result==="error")throw new Error(u.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,v,w)=>u.value.evaluate(h,v,{},w),needGeometry:Xd(f)}}function Wc(f,u){return f<u?-1:f>u?1:0}function Xd(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(Xd(f[u]))return!0;return!1}function Ho(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?Qc(f[1],f[2],"=="):u==="!="?qc(Qc(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Qc(f[1],f[2],u):u==="any"?(h=f.slice(1),["any"].concat(h.map(Ho))):u==="all"?["all"].concat(f.slice(1).map(Ho)):u==="none"?["all"].concat(f.slice(1).map(Ho).map(qc)):u==="in"?ZA(f[1],f.slice(2)):u==="!in"?qc(ZA(f[1],f.slice(2))):u==="has"?Fu(f[1]):u!=="!has"||qc(Fu(f[1]));var h}function Qc(f,u,h){switch(f){case"$type":return[`filter-type-${h}`,u];case"$id":return[`filter-id-${h}`,u];default:return[`filter-${h}`,f,u]}}function ZA(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(h=>typeof h!=typeof u[0])?["filter-in-large",f,["literal",u.sort(Wc)]]:["filter-in-small",f,["literal",u]]}}function Fu(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function qc(f){return["!",f]}function Jd(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let w="[";for(const D of f)w+=`${Jd(D)},`;return`${w}]`}const h=Object.keys(f).sort();let v="{";for(let w=0;w<h.length;w++)v+=`${JSON.stringify(h[w])}:${Jd(f[h[w]])},`;return`${v}}`}function Yc(f){let u="";for(const h of oe)u+=`/${Jd(f[h])}`;return u}function vc(f){const u=f.value;return u?[new _t(f.key,u,"constants have been deprecated as of v8")]:[]}function As(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function zo(f){if(Array.isArray(f))return f.map(zo);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const h in f)u[h]=zo(f[h]);return u}return As(f)}function cs(f){const u=f.key,h=f.value,v=f.valueSpec||{},w=f.objectElementValidators||{},D=f.style,F=f.styleSpec,G=f.validateSpec;let Z=[];const ne=Gi(h);if(ne!=="object")return[new _t(u,h,`object expected, ${ne} found`)];for(const ce in h){const Ce=ce.split(".")[0],Re=v[Ce]||v["*"];let Le;if(w[Ce])Le=w[Ce];else if(v[Ce])Le=G;else if(w["*"])Le=w["*"];else{if(!v["*"]){Z.push(new _t(u,h[ce],`unknown property "${ce}"`));continue}Le=G}Z=Z.concat(Le({key:(u&&`${u}.`)+ce,value:h[ce],valueSpec:Re,style:D,styleSpec:F,object:h,objectKey:ce,validateSpec:G},h))}for(const ce in v)w[ce]||v[ce].required&&v[ce].default===void 0&&h[ce]===void 0&&Z.push(new _t(u,h,`missing required property "${ce}"`));return Z}function Df(f){const u=f.value,h=f.valueSpec,v=f.style,w=f.styleSpec,D=f.key,F=f.arrayElementValidator||f.validateSpec;if(Gi(u)!=="array")return[new _t(D,u,`array expected, ${Gi(u)} found`)];if(h.length&&u.length!==h.length)return[new _t(D,u,`array length ${h.length} expected, length ${u.length} found`)];if(h["min-length"]&&u.length<h["min-length"])return[new _t(D,u,`array length at least ${h["min-length"]} expected, length ${u.length} found`)];let G={type:h.value,values:h.values};w.$version<7&&(G.function=h.function),Gi(h.value)==="object"&&(G=h.value);let Z=[];for(let ne=0;ne<u.length;ne++)Z=Z.concat(F({array:u,arrayIndex:ne,value:u[ne],valueSpec:G,validateSpec:f.validateSpec,style:v,styleSpec:w,key:`${D}[${ne}]`}));return Z}function pd(f){const u=f.key,h=f.value,v=f.valueSpec;let w=Gi(h);return w==="number"&&h!=h&&(w="NaN"),w!=="number"?[new _t(u,h,`number expected, ${w} found`)]:"minimum"in v&&h<v.minimum?[new _t(u,h,`${h} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&h>v.maximum?[new _t(u,h,`${h} is greater than the maximum value ${v.maximum}`)]:[]}function md(f){const u=f.valueSpec,h=As(f.value.type);let v,w,D,F={};const G=h!=="categorical"&&f.value.property===void 0,Z=!G,ne=Gi(f.value.stops)==="array"&&Gi(f.value.stops[0])==="array"&&Gi(f.value.stops[0][0])==="object",ce=cs({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(Le){if(h==="identity")return[new _t(Le.key,Le.value,'identity function may not have a "stops" property')];let je=[];const He=Le.value;return je=je.concat(Df({key:Le.key,value:He,valueSpec:Le.valueSpec,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,arrayElementValidator:Ce})),Gi(He)==="array"&&He.length===0&&je.push(new _t(Le.key,He,"array must have at least one stop")),je},default:function(Le){return Le.validateSpec({key:Le.key,value:Le.value,valueSpec:u,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec})}}});return h==="identity"&&G&&ce.push(new _t(f.key,f.value,'missing required property "property"')),h==="identity"||f.value.stops||ce.push(new _t(f.key,f.value,'missing required property "stops"')),h==="exponential"&&f.valueSpec.expression&&!kl(f.valueSpec)&&ce.push(new _t(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(Z&&!yu(f.valueSpec)?ce.push(new _t(f.key,f.value,"property functions not supported")):G&&!qA(f.valueSpec)&&ce.push(new _t(f.key,f.value,"zoom functions not supported"))),h!=="categorical"&&!ne||f.value.property!==void 0||ce.push(new _t(f.key,f.value,'"property" property is required')),ce;function Ce(Le){let je=[];const He=Le.value,st=Le.key;if(Gi(He)!=="array")return[new _t(st,He,`array expected, ${Gi(He)} found`)];if(He.length!==2)return[new _t(st,He,`array length 2 expected, length ${He.length} found`)];if(ne){if(Gi(He[0])!=="object")return[new _t(st,He,`object expected, ${Gi(He[0])} found`)];if(He[0].zoom===void 0)return[new _t(st,He,"object stop key must have zoom")];if(He[0].value===void 0)return[new _t(st,He,"object stop key must have value")];if(D&&D>As(He[0].zoom))return[new _t(st,He[0].zoom,"stop zoom values must appear in ascending order")];As(He[0].zoom)!==D&&(D=As(He[0].zoom),w=void 0,F={}),je=je.concat(cs({key:`${st}[0]`,value:He[0],valueSpec:{zoom:{}},validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec,objectElementValidators:{zoom:pd,value:Re}}))}else je=je.concat(Re({key:`${st}[0]`,value:He[0],valueSpec:{},validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec},He));return jl(zo(He[1]))?je.concat([new _t(`${st}[1]`,He[1],"expressions are not allowed in function stops.")]):je.concat(Le.validateSpec({key:`${st}[1]`,value:He[1],valueSpec:u,validateSpec:Le.validateSpec,style:Le.style,styleSpec:Le.styleSpec}))}function Re(Le,je){const He=Gi(Le.value),st=As(Le.value),gt=Le.value!==null?Le.value:je;if(v){if(He!==v)return[new _t(Le.key,gt,`${He} stop domain type must match previous stop domain type ${v}`)]}else v=He;if(He!=="number"&&He!=="string"&&He!=="boolean")return[new _t(Le.key,gt,"stop domain value must be a number, string, or boolean")];if(He!=="number"&&h!=="categorical"){let jt=`number expected, ${He} found`;return yu(u)&&h===void 0&&(jt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _t(Le.key,gt,jt)]}return h!=="categorical"||He!=="number"||isFinite(st)&&Math.floor(st)===st?h!=="categorical"&&He==="number"&&w!==void 0&&st<w?[new _t(Le.key,gt,"stop domain values must appear in ascending order")]:(w=st,h==="categorical"&&st in F?[new _t(Le.key,gt,"stop domain values must be unique")]:(F[st]=!0,[])):[new _t(Le.key,gt,`integer expected, found ${st}`)]}}function Uu(f){const u=(f.expressionContext==="property"?fd:Gc)(zo(f.value),f.valueSpec);if(u.result==="error")return u.value.map(v=>new _t(`${f.key}${v.key}`,f.value,v.message));const h=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!h.outputDefined())return[new _t(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Vo(h))return[new _t(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Vo(h))return[new _t(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!QA(h,["zoom","feature-state"]))return[new _t(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!oa(h))return[new _t(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function XA(f){const u=f.key,h=f.value,v=f.valueSpec,w=[];return Array.isArray(v.values)?v.values.indexOf(As(h))===-1&&w.push(new _t(u,h,`expected one of [${v.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(v.values).indexOf(As(h))===-1&&w.push(new _t(u,h,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(h)} found`)),w}function Nl(f){return sf(zo(f.value))?Uu(Tn({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xA(f)}function xA(f){const u=f.value,h=f.key;if(Gi(u)!=="array")return[new _t(h,u,`array expected, ${Gi(u)} found`)];const v=f.styleSpec;let w,D=[];if(u.length<1)return[new _t(h,u,"filter array must have at least 1 element")];switch(D=D.concat(XA({key:`${h}[0]`,value:u[0],valueSpec:v.filter_operator,style:f.style,styleSpec:f.styleSpec})),As(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&As(u[1])==="$type"&&D.push(new _t(h,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&D.push(new _t(h,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(w=Gi(u[1]),w!=="string"&&D.push(new _t(`${h}[1]`,u[1],`string expected, ${w} found`)));for(let F=2;F<u.length;F++)w=Gi(u[F]),As(u[1])==="$type"?D=D.concat(XA({key:`${h}[${F}]`,value:u[F],valueSpec:v.geometry_type,style:f.style,styleSpec:f.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&D.push(new _t(`${h}[${F}]`,u[F],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let F=1;F<u.length;F++)D=D.concat(xA({key:`${h}[${F}]`,value:u[F],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":w=Gi(u[1]),u.length!==2?D.push(new _t(h,u,`filter array for "${u[0]}" operator must have 2 elements`)):w!=="string"&&D.push(new _t(`${h}[1]`,u[1],`string expected, ${w} found`))}return D}function dl(f,u){const h=f.key,v=f.validateSpec,w=f.style,D=f.styleSpec,F=f.value,G=f.objectKey,Z=D[`${u}_${f.layerType}`];if(!Z)return[];const ne=G.match(/^(.*)-transition$/);if(u==="paint"&&ne&&Z[ne[1]]&&Z[ne[1]].transition)return v({key:h,value:F,valueSpec:D.transition,style:w,styleSpec:D});const ce=f.valueSpec||Z[G];if(!ce)return[new _t(h,F,`unknown property "${G}"`)];let Ce;if(Gi(F)==="string"&&yu(ce)&&!ce.tokens&&(Ce=/^{([^}]+)}$/.exec(F)))return[new _t(h,F,`"${G}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ce[1])} }\`.`)];const Re=[];return f.layerType==="symbol"&&(G==="text-field"&&w&&!w.glyphs&&Re.push(new _t(h,F,'use of "text-field" requires a style "glyphs" property')),G==="text-font"&&YA(zo(F))&&As(F.type)==="identity"&&Re.push(new _t(h,F,'"text-font" does not support identity functions'))),Re.concat(v({key:f.key,value:F,valueSpec:ce,style:w,styleSpec:D,expressionContext:"property",propertyType:u,propertyKey:G}))}function JA(f){return dl(f,"paint")}function zu(f){return dl(f,"layout")}function gd(f){let u=[];const h=f.value,v=f.key,w=f.style,D=f.styleSpec;h.type||h.ref||u.push(new _t(v,h,'either "type" or "ref" is required'));let F=As(h.type);const G=As(h.ref);if(h.id){const Z=As(h.id);for(let ne=0;ne<f.arrayIndex;ne++){const ce=w.layers[ne];As(ce.id)===Z&&u.push(new _t(v,h.id,`duplicate layer id "${h.id}", previously used at line ${ce.id.__line__}`))}}if("ref"in h){let Z;["type","source","source-layer","filter","layout"].forEach(ne=>{ne in h&&u.push(new _t(v,h[ne],`"${ne}" is prohibited for ref layers`))}),w.layers.forEach(ne=>{As(ne.id)===G&&(Z=ne)}),Z?Z.ref?u.push(new _t(v,h.ref,"ref cannot reference another ref layer")):F=As(Z.type):u.push(new _t(v,h.ref,`ref layer "${G}" not found`))}else if(F!=="background")if(h.source){const Z=w.sources&&w.sources[h.source],ne=Z&&As(Z.type);Z?ne==="vector"&&F==="raster"?u.push(new _t(v,h.source,`layer "${h.id}" requires a raster source`)):ne!=="raster-dem"&&F==="hillshade"?u.push(new _t(v,h.source,`layer "${h.id}" requires a raster-dem source`)):ne==="raster"&&F!=="raster"?u.push(new _t(v,h.source,`layer "${h.id}" requires a vector source`)):ne!=="vector"||h["source-layer"]?ne==="raster-dem"&&F!=="hillshade"?u.push(new _t(v,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!h.paint||!h.paint["line-gradient"]||ne==="geojson"&&Z.lineMetrics||u.push(new _t(v,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new _t(v,h,`layer "${h.id}" must specify a "source-layer"`)):u.push(new _t(v,h.source,`source "${h.source}" not found`))}else u.push(new _t(v,h,'missing required property "source"'));return u=u.concat(cs({key:v,value:h,valueSpec:D.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${v}.type`,value:h.type,valueSpec:D.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:h,objectKey:"type"}),filter:Nl,layout:Z=>cs({layer:h,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,validateSpec:Z.validateSpec,objectElementValidators:{"*":ne=>zu(Tn({layerType:F},ne))}}),paint:Z=>cs({layer:h,key:Z.key,value:Z.value,style:Z.style,styleSpec:Z.styleSpec,validateSpec:Z.validateSpec,objectElementValidators:{"*":ne=>JA(Tn({layerType:F},ne))}})}})),u}function ju(f){const u=f.value,h=f.key,v=Gi(u);return v!=="string"?[new _t(h,u,`string expected, ${v} found`)]:[]}const eh={promoteId:function({key:f,value:u}){if(Gi(u)==="string")return ju({key:f,value:u});{const h=[];for(const v in u)h.push(...ju({key:`${f}.${v}`,value:u[v]}));return h}}};function ec(f){const u=f.value,h=f.key,v=f.styleSpec,w=f.style,D=f.validateSpec;if(!u.type)return[new _t(h,u,'"type" is required')];const F=As(u.type);let G;switch(F){case"vector":case"raster":return G=cs({key:h,value:u,valueSpec:v[`source_${F.replace("-","_")}`],style:f.style,styleSpec:v,objectElementValidators:eh,validateSpec:D}),G;case"raster-dem":return G=function(Z){var ne;const ce=(ne=Z.sourceName)!==null&&ne!==void 0?ne:"",Ce=Z.value,Re=Z.styleSpec,Le=Re.source_raster_dem,je=Z.style;let He=[];const st=Gi(Ce);if(Ce===void 0)return He;if(st!=="object")return He.push(new _t("source_raster_dem",Ce,`object expected, ${st} found`)),He;const gt=As(Ce.encoding)==="custom",jt=["redFactor","greenFactor","blueFactor","baseShift"],Mt=Z.value.encoding?`"${Z.value.encoding}"`:"Default";for(const Ke in Ce)!gt&&jt.includes(Ke)?He.push(new _t(Ke,Ce[Ke],`In "${ce}": "${Ke}" is only valid when "encoding" is set to "custom". ${Mt} encoding found`)):Le[Ke]?He=He.concat(Z.validateSpec({key:Ke,value:Ce[Ke],valueSpec:Le[Ke],validateSpec:Z.validateSpec,style:je,styleSpec:Re})):He.push(new _t(Ke,Ce[Ke],`unknown property "${Ke}"`));return He}({sourceName:h,value:u,style:f.style,styleSpec:v,validateSpec:D}),G;case"geojson":if(G=cs({key:h,value:u,valueSpec:v.source_geojson,style:w,styleSpec:v,validateSpec:D,objectElementValidators:eh}),u.cluster)for(const Z in u.clusterProperties){const[ne,ce]=u.clusterProperties[Z],Ce=typeof ne=="string"?[ne,["accumulated"],["get",Z]]:ne;G.push(...Uu({key:`${h}.${Z}.map`,value:ce,validateSpec:D,expressionContext:"cluster-map"})),G.push(...Uu({key:`${h}.${Z}.reduce`,value:Ce,validateSpec:D,expressionContext:"cluster-reduce"}))}return G;case"video":return cs({key:h,value:u,valueSpec:v.source_video,style:w,validateSpec:D,styleSpec:v});case"image":return cs({key:h,value:u,valueSpec:v.source_image,style:w,validateSpec:D,styleSpec:v});case"canvas":return[new _t(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return XA({key:`${h}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,validateSpec:D,styleSpec:v})}}function Nu(f){const u=f.value,h=f.styleSpec,v=h.light,w=f.style;let D=[];const F=Gi(u);if(u===void 0)return D;if(F!=="object")return D=D.concat([new _t("light",u,`object expected, ${F} found`)]),D;for(const G in u){const Z=G.match(/^(.*)-transition$/);D=D.concat(Z&&v[Z[1]]&&v[Z[1]].transition?f.validateSpec({key:G,value:u[G],valueSpec:h.transition,validateSpec:f.validateSpec,style:w,styleSpec:h}):v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],validateSpec:f.validateSpec,style:w,styleSpec:h}):[new _t(G,u[G],`unknown property "${G}"`)])}return D}function Gu(f){const u=f.value,h=f.styleSpec,v=h.sky,w=f.style,D=Gi(u);if(u===void 0)return[];if(D!=="object")return[new _t("sky",u,`object expected, ${D} found`)];let F=[];for(const G in u)F=F.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],style:w,styleSpec:h}):[new _t(G,u[G],`unknown property "${G}"`)]);return F}function wA(f){const u=f.value,h=f.styleSpec,v=h.terrain,w=f.style;let D=[];const F=Gi(u);if(u===void 0)return D;if(F!=="object")return D=D.concat([new _t("terrain",u,`object expected, ${F} found`)]),D;for(const G in u)D=D.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],validateSpec:f.validateSpec,style:w,styleSpec:h}):[new _t(G,u[G],`unknown property "${G}"`)]);return D}function _c(f){let u=[];const h=f.value,v=f.key;if(Array.isArray(h)){const w=[],D=[];for(const F in h)h[F].id&&w.includes(h[F].id)&&u.push(new _t(v,h,`all the sprites' ids must be unique, but ${h[F].id} is duplicated`)),w.push(h[F].id),h[F].url&&D.includes(h[F].url)&&u.push(new _t(v,h,`all the sprites' URLs must be unique, but ${h[F].url} is duplicated`)),D.push(h[F].url),u=u.concat(cs({key:`${v}[${F}]`,value:h[F],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return ju({key:v,value:h})}const _u={"*":()=>[],array:Df,boolean:function(f){const u=f.value,h=f.key,v=Gi(u);return v!=="boolean"?[new _t(h,u,`boolean expected, ${v} found`)]:[]},number:pd,color:function(f){const u=f.key,h=f.value,v=Gi(h);return v!=="string"?[new _t(u,h,`color expected, ${v} found`)]:Ai.parse(String(h))?[]:[new _t(u,h,`color expected, "${h}" found`)]},constants:vc,enum:XA,filter:Nl,function:md,layer:gd,object:cs,source:ec,light:Nu,sky:Gu,terrain:wA,projection:function(f){const u=f.value,h=f.styleSpec,v=h.projection,w=f.style,D=Gi(u);if(u===void 0)return[];if(D!=="object")return[new _t("projection",u,`object expected, ${D} found`)];let F=[];for(const G in u)F=F.concat(v[G]?f.validateSpec({key:G,value:u[G],valueSpec:v[G],style:w,styleSpec:h}):[new _t(G,u[G],`unknown property "${G}"`)]);return F},projectionDefinition:function(f){const u=f.key;let h=f.value;h=h instanceof String?h.valueOf():h;const v=Gi(h);return v!=="array"||function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"}(h)||function(w){return!!["interpolate","step","literal"].includes(w[0])}(h)?["array","string"].includes(v)?[]:[new _t(u,h,`projection expected, invalid type "${v}" found`)]:[new _t(u,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:ju,formatted:function(f){return ju(f).length===0?[]:Uu(f)},resolvedImage:function(f){return ju(f).length===0?[]:Uu(f)},padding:function(f){const u=f.key,h=f.value;if(Gi(h)==="array"){if(h.length<1||h.length>4)return[new _t(u,h,`padding requires 1 to 4 values; ${h.length} values found`)];const v={type:"number"};let w=[];for(let D=0;D<h.length;D++)w=w.concat(f.validateSpec({key:`${u}[${D}]`,value:h[D],validateSpec:f.validateSpec,valueSpec:v}));return w}return pd({key:u,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const u=f.key,h=f.value,v=Gi(h),w=f.styleSpec;if(v!=="array"||h.length<1||h.length%2!=0)return[new _t(u,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let D=[];for(let F=0;F<h.length;F+=2)D=D.concat(XA({key:`${u}[${F}]`,value:h[F],valueSpec:w.layout_symbol["text-anchor"]})),D=D.concat(Df({key:`${u}[${F+1}]`,value:h[F+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:w}));return D},sprite:_c};function $c(f){const u=f.value,h=f.valueSpec,v=f.styleSpec;return f.validateSpec=$c,h.expression&&YA(As(u))?md(f):h.expression&&jl(zo(u))?Uu(f):h.type&&_u[h.type]?_u[h.type](f):cs(Tn({},f,{valueSpec:h.type?v[h.type]:h}))}function et(f){const u=f.value,h=f.key,v=ju(f);return v.length||(u.indexOf("{fontstack}")===-1&&v.push(new _t(h,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&v.push(new _t(h,u,'"glyphs" url must include a "{range}" token'))),v}function Na(f,u=Ee){let h=[];return h=h.concat($c({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:$c,objectElementValidators:{glyphs:et,"*":()=>[]}})),f.constants&&(h=h.concat(vc({key:"constants",value:f.constants,style:f,styleSpec:u,validateSpec:$c}))),Ki(h)}function Bo(f){return function(u){return f({...u,validateSpec:$c})}}function Ki(f){return[].concat(f).sort((u,h)=>u.line-h.line)}function $r(f){return function(...u){return Ki(f.apply(this,u))}}Na.source=$r(Bo(ec)),Na.sprite=$r(Bo(_c)),Na.glyphs=$r(Bo(et)),Na.light=$r(Bo(Nu)),Na.sky=$r(Bo(Gu)),Na.terrain=$r(Bo(wA)),Na.layer=$r(Bo(gd)),Na.filter=$r(Bo(Nl)),Na.paintProperty=$r(Bo(JA)),Na.layoutProperty=$r(Bo(zu));const Es=Na,yd=Es.light,th=Es.sky,Oa=Es.paintProperty,Ws=Es.layoutProperty;function Cs(f,u){let h=!1;if(u&&u.length)for(const v of u)f.fire(new nn(new Error(v.message))),h=!0;return h}class uA{constructor(u,h,v){const w=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const F=new Int32Array(this.arrayBuffer);u=F[0],this.d=(h=F[1])+2*(v=F[2]);for(let Z=0;Z<this.d*this.d;Z++){const ne=F[3+Z],ce=F[3+Z+1];w.push(ne===ce?null:F.subarray(ne,ce))}const G=F[3+w.length+1];this.keys=F.subarray(F[3+w.length],G),this.bboxes=F.subarray(G),this.insert=this._insertReadonly}else{this.d=h+2*v;for(let F=0;F<this.d*this.d;F++)w.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=u,this.padding=v,this.scale=h/u,this.uid=0;const D=v/h*u;this.min=-D,this.max=u+D}insert(u,h,v,w,D){this._forEachCell(h,v,w,D,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(D)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,h,v,w,D,F){this.cells[D].push(F)}query(u,h,v,w,D){const F=this.min,G=this.max;if(u<=F&&h<=F&&G<=v&&G<=w&&!D)return Array.prototype.slice.call(this.keys);{const Z=[];return this._forEachCell(u,h,v,w,this._queryCell,Z,{},D),Z}}_queryCell(u,h,v,w,D,F,G,Z){const ne=this.cells[D];if(ne!==null){const ce=this.keys,Ce=this.bboxes;for(let Re=0;Re<ne.length;Re++){const Le=ne[Re];if(G[Le]===void 0){const je=4*Le;(Z?Z(Ce[je+0],Ce[je+1],Ce[je+2],Ce[je+3]):u<=Ce[je+2]&&h<=Ce[je+3]&&v>=Ce[je+0]&&w>=Ce[je+1])?(G[Le]=!0,F.push(ce[Le])):G[Le]=!1}}}}_forEachCell(u,h,v,w,D,F,G,Z){const ne=this._convertToCellCoord(u),ce=this._convertToCellCoord(h),Ce=this._convertToCellCoord(v),Re=this._convertToCellCoord(w);for(let Le=ne;Le<=Ce;Le++)for(let je=ce;je<=Re;je++){const He=this.d*je+Le;if((!Z||Z(this._convertFromCellCoord(Le),this._convertFromCellCoord(je),this._convertFromCellCoord(Le+1),this._convertFromCellCoord(je+1)))&&D.call(this,u,h,v,w,He,F,G,Z))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,h=3+this.cells.length+1+1;let v=0;for(let F=0;F<this.cells.length;F++)v+=this.cells[F].length;const w=new Int32Array(h+v+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let D=h;for(let F=0;F<u.length;F++){const G=u[F];w[3+F]=D,w.set(G,D),D+=G.length}return w[3+u.length]=D,w.set(this.keys,D),D+=this.keys.length,w[3+u.length+1]=D,w.set(this.bboxes,D),D+=this.bboxes.length,w.buffer}static serialize(u,h){const v=u.toArrayBuffer();return h&&h.push(v),{buffer:v}}static deserialize(u){return new uA(u.buffer)}}const Bs={};function fr(f,u,h={}){if(Bs[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Bs[f]={klass:u,omit:h.omit||[],shallow:h.shallow||[]}}fr("Object",Object),fr("TransferableGridIndex",uA),fr("Color",Ai),fr("Error",Error),fr("AJAXError",Er),fr("ResolvedImage",So),fr("StylePropertyFunction",yc),fr("StyleExpression",vu,{omit:["_evaluator"]}),fr("ZoomDependentExpression",ja),fr("ZoomConstantExpression",Zd),fr("CompoundExpression",$t,{omit:["_evaluate"]});for(const f in gu)gu[f]._classRegistryKey||fr(`Expression_${f}`,gu[f]);function va(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Vc(f){return f.$name||f.constructor._classRegistryKey}function Ia(f){return!function(u){if(u===null||typeof u!="object")return!1;const h=Vc(u);return!(!h||h==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||va(f)||en(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function tc(f,u){if(Ia(f))return(va(f)||en(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const D=[];for(const F of f)D.push(tc(F,u));return D}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const h=Vc(f);if(!h)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Bs[h])throw new Error(`${h} is not registered.`);const{klass:v}=Bs[h],w=v.serialize?v.serialize(f,u):{};if(v.serialize){if(u&&w===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const D in f){if(!f.hasOwnProperty(D)||Bs[h].omit.indexOf(D)>=0)continue;const F=f[D];w[D]=Bs[h].shallow.indexOf(D)>=0?F:tc(F,u)}f instanceof Error&&(w.message=f.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(w.$name=h),w}function vd(f){if(Ia(f))return f;if(Array.isArray(f))return f.map(vd);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=Vc(f)||"Object";if(!Bs[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:h}=Bs[u];if(!h)throw new Error(`can't deserialize unregistered class ${u}`);if(h.deserialize)return h.deserialize(f);const v=Object.create(h.prototype);for(const w of Object.keys(f)){if(w==="$name")continue;const D=f[w];v[w]=Bs[u].shallow.indexOf(w)>=0?D:vd(D)}return v}class _d{constructor(){this.first=!0}update(u,h){const v=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=h),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=v,!0))}}const Mi={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Cd(f){for(const u of f)if(AA(u.charCodeAt(0)))return!0;return!1}function Gl(f){for(const u of f)if(!MA(u.charCodeAt(0)))return!1;return!0}function bd(f){const u=f.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(u.join("|"),"u")}const xd=bd(["Arab","Dupl","Mong","Ougr","Syrc"]);function MA(f){return!xd.test(String.fromCodePoint(f))}const nc=bd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function AA(f){return!(f!==746&&f!==747&&(f<4352||!(Mi["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Mi["CJK Compatibility"](f)||Mi["CJK Strokes"](f)||!(!Mi["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Mi["Enclosed CJK Letters and Months"](f)||Mi["Ideographic Description Characters"](f)||Mi.Kanbun(f)||Mi.Katakana(f)&&f!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Mi["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Mi["Vertical Forms"](f)||Mi["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||nc.test(String.fromCodePoint(f)))))}function Cc(f){return!(AA(f)||function(u){return!!(Mi["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Mi["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Mi["Letterlike Symbols"](u)||Mi["Number Forms"](u)||Mi["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Mi["Control Pictures"](u)&&u!==9251||Mi["Optical Character Recognition"](u)||Mi["Enclosed Alphanumerics"](u)||Mi["Geometric Shapes"](u)||Mi["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Mi["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Mi["CJK Symbols and Punctuation"](u)||Mi.Katakana(u)||Mi["Private Use Area"](u)||Mi["CJK Compatibility Forms"](u)||Mi["Small Form Variants"](u)||Mi["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(f))}const Os=bd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function bo(f){return Os.test(String.fromCodePoint(f))}function Cu(f,u){return!(!u&&bo(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Mi.Khmer(f))}function Ga(f){for(const u of f)if(bo(u.charCodeAt(0)))return!0;return!1}const Ds=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Ds.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,u){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const h=f.pluginURL,v=new Promise(D=>{this.loadScriptResolve=D});u(h);const w=new Promise(D=>setTimeout(()=>D(),this.TIMEOUT));if(yield Promise.race([v,w]),this.isParsed()){const D={pluginStatus:"loaded",pluginURL:h};return this.setState(D),D}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class Zo{constructor(u,h){this.zoom=u,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _d,this.transition={})}isSupportedScript(u){return function(h,v){for(const w of h)if(!Cu(w.charCodeAt(0),v))return!1;return!0}(u,Ds.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,h=u-Math.floor(u),v=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*h}}}class ou{constructor(u,h){this.property=u,this.value=h,this.expression=function(v,w){if(YA(v))return new yc(v,w);if(jl(v)){const D=fd(v,w);if(D.result==="error")throw new Error(D.value.map(F=>`${F.key}: ${F.message}`).join(", "));return D.value}{let D=v;return w.type==="color"&&typeof v=="string"?D=Ai.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?D=Rs.parse(v):w.type==="projectionDefinition"&&typeof v=="string"&&(D=Gs.parse(v)):D=Lr.parse(v),{kind:"constant",evaluate:()=>D}}}(h===void 0?u.specification.default:h,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,h,v){return this.property.possiblyEvaluate(this,u,h,v)}}class Wu{constructor(u){this.property=u,this.value=new ou(u,void 0)}transitioned(u,h){return new nh(this.property,this.value,h,ft({},u.transition,this.transition),u.now)}untransitioned(){return new nh(this.property,this.value,null,{},0)}}class bc{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Te(this._values[u].value.value)}setValue(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Wu(this._values[u].property)),this._values[u].value=new ou(this._values[u].property,h===null?void 0:Te(h))}getTransition(u){return Te(this._values[u].transition)}setTransition(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Wu(this._values[u].property)),this._values[u].transition=Te(h)||void 0}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v);const w=this.getTransition(h);w!==void 0&&(u[`${h}-transition`]=w)}return u}transitioned(u,h){const v=new SA(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].transitioned(u,h._values[w]);return v}untransitioned(){const u=new SA(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].untransitioned();return u}}class nh{constructor(u,h,v,w,D){this.property=u,this.value=h,this.begin=D+w.delay||0,this.end=this.begin+w.duration||0,u.specification.transition&&(w.delay||w.duration)&&(this.prior=v)}possiblyEvaluate(u,h,v){const w=u.now||0,D=this.value.possiblyEvaluate(u,h,v),F=this.prior;if(F){if(w>this.end)return this.prior=null,D;if(this.value.isDataDriven())return this.prior=null,D;if(w<this.begin)return F.possiblyEvaluate(u,h,v);{const G=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,h,v),D,De(G))}}return D}}class SA{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,h,v){const w=new da(this._properties);for(const D of Object.keys(this._values))w._values[D]=this._values[D].possiblyEvaluate(u,h,v);return w}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class xc{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Te(this._values[u].value)}setValue(u,h){this._values[u]=new ou(this._values[u].property,h===null?void 0:Te(h))}serialize(){const u={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(u[h]=v)}return u}possiblyEvaluate(u,h,v){const w=new da(this._properties);for(const D of Object.keys(this._values))w._values[D]=this._values[D].possiblyEvaluate(u,h,v);return w}}class gs{constructor(u,h,v){this.property=u,this.value=h,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,h,v,w){return this.property.evaluate(this.value,this.parameters,u,h,v,w)}}class da{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class hr{constructor(u){this.specification=u}possiblyEvaluate(u,h){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(h)}interpolate(u,h,v){const w=vi[this.specification.type];return w?w(u,h,v):u}}class Hr{constructor(u,h){this.specification=u,this.overrides=h}possiblyEvaluate(u,h,v,w){return new gs(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(h,null,{},v,w)}:u.expression,h)}interpolate(u,h,v){if(u.value.kind!=="constant"||h.value.kind!=="constant")return u;if(u.value.value===void 0||h.value.value===void 0)return new gs(this,{kind:"constant",value:void 0},u.parameters);const w=vi[this.specification.type];if(w){const D=w(u.value.value,h.value.value,v);return new gs(this,{kind:"constant",value:D},u.parameters)}return u}evaluate(u,h,v,w,D,F){return u.kind==="constant"?u.value:u.evaluate(h,v,w,D,F)}}class Qu extends Hr{possiblyEvaluate(u,h,v,w){if(u.value===void 0)return new gs(this,{kind:"constant",value:void 0},h);if(u.expression.kind==="constant"){const D=u.expression.evaluate(h,null,{},v,w),F=u.property.specification.type==="resolvedImage"&&typeof D!="string"?D.name:D,G=this._calculate(F,F,F,h);return new gs(this,{kind:"constant",value:G},h)}if(u.expression.kind==="camera"){const D=this._calculate(u.expression.evaluate({zoom:h.zoom-1}),u.expression.evaluate({zoom:h.zoom}),u.expression.evaluate({zoom:h.zoom+1}),h);return new gs(this,{kind:"constant",value:D},h)}return new gs(this,u.expression,h)}evaluate(u,h,v,w,D,F){if(u.kind==="source"){const G=u.evaluate(h,v,w,D,F);return this._calculate(G,G,G,h)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(h.zoom)-1},v,w),u.evaluate({zoom:Math.floor(h.zoom)},v,w),u.evaluate({zoom:Math.floor(h.zoom)+1},v,w),h):u.value}_calculate(u,h,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class rc{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,w){if(u.value!==void 0){if(u.expression.kind==="constant"){const D=u.expression.evaluate(h,null,{},v,w);return this._calculate(D,D,D,h)}return this._calculate(u.expression.evaluate(new Zo(Math.floor(h.zoom-1),h)),u.expression.evaluate(new Zo(Math.floor(h.zoom),h)),u.expression.evaluate(new Zo(Math.floor(h.zoom+1),h)),h)}}_calculate(u,h,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:v,to:h}}interpolate(u){return u}}class bu{constructor(u){this.specification=u}possiblyEvaluate(u,h,v,w){return!!u.expression.evaluate(h,null,{},v,w)}interpolate(){return!1}}class bs{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in u){const v=u[h];v.specification.overridable&&this.overridableProperties.push(h);const w=this.defaultPropertyValues[h]=new ou(v,void 0),D=this.defaultTransitionablePropertyValues[h]=new Wu(v);this.defaultTransitioningPropertyValues[h]=D.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=w.possiblyEvaluate({})}}}fr("DataDrivenProperty",Hr),fr("DataConstantProperty",hr),fr("CrossFadedDataDrivenProperty",Qu),fr("CrossFadedProperty",rc),fr("ColorRampProperty",bu);const Lf="-transition";class su extends rr{constructor(u,h){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),h.layout&&(this._unevaluatedLayout=new xc(h.layout)),h.paint)){this._transitionablePaint=new bc(h.paint);for(const v in u.paint)this.setPaintProperty(v,u.paint[v],{validate:!1});for(const v in u.layout)this.setLayoutProperty(v,u.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new da(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,h,v={}){h!=null&&this._validate(Ws,`layers.${this.id}.layout.${u}`,u,h,v)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,h):this.visibility=h)}getPaintProperty(u){return u.endsWith(Lf)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,h,v={}){if(h!=null&&this._validate(Oa,`layers.${this.id}.paint.${u}`,u,h,v))return!1;if(u.endsWith(Lf))return this._transitionablePaint.setTransition(u.slice(0,-11),h||void 0),!1;{const w=this._transitionablePaint._values[u],D=w.property.specification["property-type"]==="cross-faded-data-driven",F=w.value.isDataDriven(),G=w.value;this._transitionablePaint.setValue(u,h),this._handleSpecialPaintPropertyUpdate(u);const Z=this._transitionablePaint._values[u].value;return Z.isDataDriven()||F||D||this._handleOverridablePaintPropertyUpdate(u,G,Z)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,h,v){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,h){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,h)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Fe(u,(h,v)=>!(h===void 0||v==="layout"&&!Object.keys(h).length||v==="paint"&&!Object.keys(h).length))}_validate(u,h,v,w,D={}){return(!D||D.validate!==!1)&&Cs(this,u.call(Es,{key:h,layerType:this.type,objectKey:v,value:w,styleSpec:Ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const h=this.paint.get(u);if(h instanceof gs&&yu(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Ff={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class xu{constructor(u,h){this._structArray=u,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Po{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,h){return u._trim(),h&&(u.isTransferred=!0,h.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const h=Object.create(this.prototype);return h.arrayBuffer=u.arrayBuffer,h.length=u.length,h.capacity=u.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Is(f,u=1){let h=0,v=0;return{members:f.map(w=>{const D=Ff[w.type].BYTES_PER_ELEMENT,F=h=rh(h,Math.max(u,D)),G=w.components||1;return v=Math.max(v,D),h+=D*G,{name:w.name,type:w.type,components:G,offset:F}}),size:rh(h,Math.max(v,u)),alignment:u}}function rh(f,u){return Math.ceil(f/u)*u}class EA extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.int16[w+0]=h,this.int16[w+1]=v,u}}EA.prototype.bytesPerElement=4,fr("StructArrayLayout2i4",EA);class ih extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const D=3*u;return this.int16[D+0]=h,this.int16[D+1]=v,this.int16[D+2]=w,u}}ih.prototype.bytesPerElement=6,fr("StructArrayLayout3i6",ih);class BA extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w){const D=this.length;return this.resize(D+1),this.emplace(D,u,h,v,w)}emplace(u,h,v,w,D){const F=4*u;return this.int16[F+0]=h,this.int16[F+1]=v,this.int16[F+2]=w,this.int16[F+3]=D,u}}BA.prototype.bytesPerElement=8,fr("StructArrayLayout4i8",BA);class Qs extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,D,F)}emplace(u,h,v,w,D,F,G){const Z=6*u;return this.int16[Z+0]=h,this.int16[Z+1]=v,this.int16[Z+2]=w,this.int16[Z+3]=D,this.int16[Z+4]=F,this.int16[Z+5]=G,u}}Qs.prototype.bytesPerElement=12,fr("StructArrayLayout2i4i12",Qs);class wc extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,D,F)}emplace(u,h,v,w,D,F,G){const Z=4*u,ne=8*u;return this.int16[Z+0]=h,this.int16[Z+1]=v,this.uint8[ne+4]=w,this.uint8[ne+5]=D,this.uint8[ne+6]=F,this.uint8[ne+7]=G,u}}wc.prototype.bytesPerElement=8,fr("StructArrayLayout2i4ub8",wc);class Wl extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.float32[w+0]=h,this.float32[w+1]=v,u}}Wl.prototype.bytesPerElement=8,fr("StructArrayLayout2f8",Wl);class hl extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F,G,Z,ne,ce){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,u,h,v,w,D,F,G,Z,ne,ce)}emplace(u,h,v,w,D,F,G,Z,ne,ce,Ce){const Re=10*u;return this.uint16[Re+0]=h,this.uint16[Re+1]=v,this.uint16[Re+2]=w,this.uint16[Re+3]=D,this.uint16[Re+4]=F,this.uint16[Re+5]=G,this.uint16[Re+6]=Z,this.uint16[Re+7]=ne,this.uint16[Re+8]=ce,this.uint16[Re+9]=Ce,u}}hl.prototype.bytesPerElement=20,fr("StructArrayLayout10ui20",hl);class qu extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F,G,Z,ne,ce,Ce,Re){const Le=this.length;return this.resize(Le+1),this.emplace(Le,u,h,v,w,D,F,G,Z,ne,ce,Ce,Re)}emplace(u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le){const je=12*u;return this.int16[je+0]=h,this.int16[je+1]=v,this.int16[je+2]=w,this.int16[je+3]=D,this.uint16[je+4]=F,this.uint16[je+5]=G,this.uint16[je+6]=Z,this.uint16[je+7]=ne,this.int16[je+8]=ce,this.int16[je+9]=Ce,this.int16[je+10]=Re,this.int16[je+11]=Le,u}}qu.prototype.bytesPerElement=24,fr("StructArrayLayout4i4ui4i24",qu);class Mc extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const D=3*u;return this.float32[D+0]=h,this.float32[D+1]=v,this.float32[D+2]=w,u}}Mc.prototype.bytesPerElement=12,fr("StructArrayLayout3f12",Mc);class wu extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint32[1*u+0]=h,u}}wu.prototype.bytesPerElement=4,fr("StructArrayLayout1ul4",wu);class _a extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F,G,Z,ne){const ce=this.length;return this.resize(ce+1),this.emplace(ce,u,h,v,w,D,F,G,Z,ne)}emplace(u,h,v,w,D,F,G,Z,ne,ce){const Ce=10*u,Re=5*u;return this.int16[Ce+0]=h,this.int16[Ce+1]=v,this.int16[Ce+2]=w,this.int16[Ce+3]=D,this.int16[Ce+4]=F,this.int16[Ce+5]=G,this.uint32[Re+3]=Z,this.uint16[Ce+8]=ne,this.uint16[Ce+9]=ce,u}}_a.prototype.bytesPerElement=20,fr("StructArrayLayout6i1ul2ui20",_a);class Xs extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,D,F)}emplace(u,h,v,w,D,F,G){const Z=6*u;return this.int16[Z+0]=h,this.int16[Z+1]=v,this.int16[Z+2]=w,this.int16[Z+3]=D,this.int16[Z+4]=F,this.int16[Z+5]=G,u}}Xs.prototype.bytesPerElement=12,fr("StructArrayLayout2i2i2i12",Xs);class au extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D){const F=this.length;return this.resize(F+1),this.emplace(F,u,h,v,w,D)}emplace(u,h,v,w,D,F){const G=4*u,Z=8*u;return this.float32[G+0]=h,this.float32[G+1]=v,this.float32[G+2]=w,this.int16[Z+6]=D,this.int16[Z+7]=F,u}}au.prototype.bytesPerElement=16,fr("StructArrayLayout2f1f2i16",au);class lu extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,v,w,D,F)}emplace(u,h,v,w,D,F,G){const Z=16*u,ne=4*u,ce=8*u;return this.uint8[Z+0]=h,this.uint8[Z+1]=v,this.float32[ne+1]=w,this.float32[ne+2]=D,this.int16[ce+6]=F,this.int16[ce+7]=G,u}}lu.prototype.bytesPerElement=16,fr("StructArrayLayout2ub2f2i16",lu);class cA extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const D=3*u;return this.uint16[D+0]=h,this.uint16[D+1]=v,this.uint16[D+2]=w,u}}cA.prototype.bytesPerElement=6,fr("StructArrayLayout3ui6",cA);class Mu extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He,st,gt){const jt=this.length;return this.resize(jt+1),this.emplace(jt,u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He,st,gt)}emplace(u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He,st,gt,jt){const Mt=24*u,Ke=12*u,nt=48*u;return this.int16[Mt+0]=h,this.int16[Mt+1]=v,this.uint16[Mt+2]=w,this.uint16[Mt+3]=D,this.uint32[Ke+2]=F,this.uint32[Ke+3]=G,this.uint32[Ke+4]=Z,this.uint16[Mt+10]=ne,this.uint16[Mt+11]=ce,this.uint16[Mt+12]=Ce,this.float32[Ke+7]=Re,this.float32[Ke+8]=Le,this.uint8[nt+36]=je,this.uint8[nt+37]=He,this.uint8[nt+38]=st,this.uint32[Ke+10]=gt,this.int16[Mt+22]=jt,u}}Mu.prototype.bytesPerElement=48,fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Mu);class Sc extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He,st,gt,jt,Mt,Ke,nt,Ot,ln,Ln,pn,bn,Vn,Dn){const lr=this.length;return this.resize(lr+1),this.emplace(lr,u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He,st,gt,jt,Mt,Ke,nt,Ot,ln,Ln,pn,bn,Vn,Dn)}emplace(u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He,st,gt,jt,Mt,Ke,nt,Ot,ln,Ln,pn,bn,Vn,Dn,lr){const En=32*u,Wr=16*u;return this.int16[En+0]=h,this.int16[En+1]=v,this.int16[En+2]=w,this.int16[En+3]=D,this.int16[En+4]=F,this.int16[En+5]=G,this.int16[En+6]=Z,this.int16[En+7]=ne,this.uint16[En+8]=ce,this.uint16[En+9]=Ce,this.uint16[En+10]=Re,this.uint16[En+11]=Le,this.uint16[En+12]=je,this.uint16[En+13]=He,this.uint16[En+14]=st,this.uint16[En+15]=gt,this.uint16[En+16]=jt,this.uint16[En+17]=Mt,this.uint16[En+18]=Ke,this.uint16[En+19]=nt,this.uint16[En+20]=Ot,this.uint16[En+21]=ln,this.uint16[En+22]=Ln,this.uint32[Wr+12]=pn,this.float32[Wr+13]=bn,this.float32[Wr+14]=Vn,this.uint16[En+30]=Dn,this.uint16[En+31]=lr,u}}Sc.prototype.bytesPerElement=64,fr("StructArrayLayout8i15ui1ul2f2ui64",Sc);class Yu extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.float32[1*u+0]=h,u}}Yu.prototype.bytesPerElement=4,fr("StructArrayLayout1f4",Yu);class Ql extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const D=3*u;return this.uint16[6*u+0]=h,this.float32[D+1]=v,this.float32[D+2]=w,u}}Ql.prototype.bytesPerElement=12,fr("StructArrayLayout1ui2f12",Ql);class wd extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,v){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,v)}emplace(u,h,v,w){const D=4*u;return this.uint32[2*u+0]=h,this.uint16[D+2]=v,this.uint16[D+3]=w,u}}wd.prototype.bytesPerElement=8,fr("StructArrayLayout1ul2ui8",wd);class T extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h){const v=this.length;return this.resize(v+1),this.emplace(v,u,h)}emplace(u,h,v){const w=2*u;return this.uint16[w+0]=h,this.uint16[w+1]=v,u}}T.prototype.bytesPerElement=4,fr("StructArrayLayout2ui4",T);class l extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint16[1*u+0]=h,u}}l.prototype.bytesPerElement=2,fr("StructArrayLayout1ui2",l);class c extends Po{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,v,w){const D=this.length;return this.resize(D+1),this.emplace(D,u,h,v,w)}emplace(u,h,v,w,D){const F=4*u;return this.float32[F+0]=h,this.float32[F+1]=v,this.float32[F+2]=w,this.float32[F+3]=D,u}}c.prototype.bytesPerElement=16,fr("StructArrayLayout4f16",c);class C extends xu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}C.prototype.size=20;class M extends _a{get(u){return new C(this,u)}}fr("CollisionBoxArray",M);class R extends xu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}R.prototype.size=48;class j extends Mu{get(u){return new R(this,u)}}fr("PlacedSymbolArray",j);class $ extends xu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}$.prototype.size=64;class te extends Sc{get(u){return new $(this,u)}}fr("SymbolInstanceArray",te);class se extends Yu{getoffsetX(u){return this.float32[1*u+0]}}fr("GlyphOffsetArray",se);class xe extends ih{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}fr("SymbolLineVertexArray",xe);class Oe extends xu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Oe.prototype.size=12;class ke extends Ql{get(u){return new Oe(this,u)}}fr("TextAnchorOffsetArray",ke);class qe extends xu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qe.prototype.size=8;class Ve extends wd{get(u){return new qe(this,u)}}fr("FeatureIndexArray",Ve);class ut extends EA{}class ot extends EA{}class At extends EA{}class mt extends Qs{}class St extends wc{}class kt extends Wl{}class Pt extends hl{}class Ft extends qu{}class Tt extends Mc{}class Jt extends wu{}class Vt extends Xs{}class vn extends lu{}class _n extends cA{}class mn extends T{}const Bn=Is([{name:"a_pos",components:2,type:"Int16"}],4),{members:Un}=Bn;class wn{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,h,v,w){const D=this.segments[this.segments.length-1];return u>wn.MAX_VERTEX_ARRAY_LENGTH&&Je(`Max vertices per segment is ${wn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${wn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!D||D.vertexLength+u>wn.MAX_VERTEX_ARRAY_LENGTH||D.sortKey!==w?this.createNewSegment(h,v,w):D}createNewSegment(u,h,v){const w={vertexOffset:u.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(w.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(u,h,v){return this.prepareSegment(0,u,h,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const h in u.vaos)u.vaos[h].destroy()}static simpleSegment(u,h,v,w){return new wn([{vertexOffset:u,primitiveOffset:h,vertexLength:v,primitiveLength:w,vaos:{},sortKey:0}])}}function kr(f,u){return 256*(f=wt(Math.floor(f),0,255))+wt(Math.floor(u),0,255)}wn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fr("SegmentVector",wn);const Bi=Is([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var $i,Oo,Si,jo={exports:{}},No={exports:{}},xo={exports:{}},yo=function(){if(Si)return jo.exports;Si=1;var f=($i||($i=1,No.exports=function(h,v){var w,D,F,G,Z,ne,ce,Ce;for(D=h.length-(w=3&h.length),F=v,Z=3432918353,ne=461845907,Ce=0;Ce<D;)ce=255&h.charCodeAt(Ce)|(255&h.charCodeAt(++Ce))<<8|(255&h.charCodeAt(++Ce))<<16|(255&h.charCodeAt(++Ce))<<24,++Ce,F=27492+(65535&(G=5*(65535&(F=(F^=ce=(65535&(ce=(ce=(65535&ce)*Z+(((ce>>>16)*Z&65535)<<16)&4294967295)<<15|ce>>>17))*ne+(((ce>>>16)*ne&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(G>>>16)&65535)<<16);switch(ce=0,w){case 3:ce^=(255&h.charCodeAt(Ce+2))<<16;case 2:ce^=(255&h.charCodeAt(Ce+1))<<8;case 1:F^=ce=(65535&(ce=(ce=(65535&(ce^=255&h.charCodeAt(Ce)))*Z+(((ce>>>16)*Z&65535)<<16)&4294967295)<<15|ce>>>17))*ne+(((ce>>>16)*ne&65535)<<16)&4294967295}return F^=h.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}),No.exports),u=(Oo||(Oo=1,xo.exports=function(h,v){for(var w,D=h.length,F=v^D,G=0;D>=4;)w=1540483477*(65535&(w=255&h.charCodeAt(G)|(255&h.charCodeAt(++G))<<8|(255&h.charCodeAt(++G))<<16|(255&h.charCodeAt(++G))<<24))+((1540483477*(w>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),D-=4,++G;switch(D){case 3:F^=(255&h.charCodeAt(G+2))<<16;case 2:F^=(255&h.charCodeAt(G+1))<<8;case 1:F=1540483477*(65535&(F^=255&h.charCodeAt(G)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}),xo.exports);return jo.exports=f,jo.exports.murmur3=f,jo.exports.murmur2=u,jo.exports}(),ka=d(yo);class Go{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,h,v,w){this.ids.push(ds(u)),this.positions.push(h,v,w)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ds(u);let v=0,w=this.ids.length-1;for(;v<w;){const F=v+w>>1;this.ids[F]>=h?w=F:v=F+1}const D=[];for(;this.ids[v]===h;)D.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return D}static serialize(u,h){const v=new Float64Array(u.ids),w=new Uint32Array(u.positions);return Wa(v,w,0,v.length-1),h&&h.push(v.buffer,w.buffer),{ids:v,positions:w}}static deserialize(u){const h=new Go;return h.ids=u.ids,h.positions=u.positions,h.indexed=!0,h}}function ds(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:ka(String(f))}function Wa(f,u,h,v){for(;h<v;){const w=f[h+v>>1];let D=h-1,F=v+1;for(;;){do D++;while(f[D]<w);do F--;while(f[F]>w);if(D>=F)break;$u(f,D,F),$u(u,3*D,3*F),$u(u,3*D+1,3*F+1),$u(u,3*D+2,3*F+2)}F-h<v-F?(Wa(f,u,h,F),h=F+1):(Wa(f,u,F+1,v),v=F)}}function $u(f,u,h){const v=f[u];f[u]=f[h],f[h]=v}fr("FeaturePositionMap",Go);class fl{constructor(u,h){this.gl=u.gl,this.location=h}}class pl extends fl{constructor(u,h){super(u,h),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class uu extends fl{constructor(u,h){super(u,h),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class OA extends fl{constructor(u,h){super(u,h),this.current=Ai.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const IA=new Float32Array(16);function Vu(f){return[kr(255*f.r,255*f.g),kr(255*f.b,255*f.a)]}class Js{constructor(u,h,v){this.value=u,this.uniformNames=h.map(w=>`u_${w}`),this.type=v}setUniform(u,h,v){u.set(v.constantOr(this.value))}getBinding(u,h,v){return this.type==="color"?new OA(u,h):new pl(u,h)}}class ml{constructor(u,h){this.uniformNames=h.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=u.tlbr}setUniform(u,h,v,w){const D=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;D&&u.set(D)}getBinding(u,h,v){return v.substr(0,9)==="u_pattern"?new uu(u,h):new pl(u,h)}}class sa{constructor(u,h,v,w){this.expression=u,this.type=v,this.maxValue=0,this.paintVertexAttributes=h.map(D=>({name:`a_${D}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(u,h,v,w,D){const F=this.paintVertexArray.length,G=this.expression.evaluate(new Zo(0),h,{},w,[],D);this.paintVertexArray.resize(u),this._setPaintValue(F,u,G)}updatePaintArray(u,h,v,w){const D=this.expression.evaluate({zoom:0},v,w);this._setPaintValue(u,h,D)}_setPaintValue(u,h,v){if(this.type==="color"){const w=Vu(v);for(let D=u;D<h;D++)this.paintVertexArray.emplace(D,w[0],w[1])}else{for(let w=u;w<h;w++)this.paintVertexArray.emplace(w,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Pl{constructor(u,h,v,w,D,F){this.expression=u,this.uniformNames=h.map(G=>`u_${G}_t`),this.type=v,this.useIntegerZoom=w,this.zoom=D,this.maxValue=0,this.paintVertexAttributes=h.map(G=>({name:`a_${G}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(u,h,v,w,D){const F=this.expression.evaluate(new Zo(this.zoom),h,{},w,[],D),G=this.expression.evaluate(new Zo(this.zoom+1),h,{},w,[],D),Z=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(Z,u,F,G)}updatePaintArray(u,h,v,w){const D=this.expression.evaluate({zoom:this.zoom},v,w),F=this.expression.evaluate({zoom:this.zoom+1},v,w);this._setPaintValue(u,h,D,F)}_setPaintValue(u,h,v,w){if(this.type==="color"){const D=Vu(v),F=Vu(w);for(let G=u;G<h;G++)this.paintVertexArray.emplace(G,D[0],D[1],F[0],F[1])}else{for(let D=u;D<h;D++)this.paintVertexArray.emplace(D,v,w);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(w))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,h){const v=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=wt(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);u.set(w)}getBinding(u,h,v){return new pl(u,h)}}class xs{constructor(u,h,v,w,D,F){this.expression=u,this.type=h,this.useIntegerZoom=v,this.zoom=w,this.layerId=F,this.zoomInPaintVertexArray=new D,this.zoomOutPaintVertexArray=new D}populatePaintArray(u,h,v){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(w,u,h.patterns&&h.patterns[this.layerId],v)}updatePaintArray(u,h,v,w,D){this._setPaintValues(u,h,v.patterns&&v.patterns[this.layerId],D)}_setPaintValues(u,h,v,w){if(!w||!v)return;const{min:D,mid:F,max:G}=v,Z=w[D],ne=w[F],ce=w[G];if(Z&&ne&&ce)for(let Ce=u;Ce<h;Ce++)this.zoomInPaintVertexArray.emplace(Ce,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],ne.pixelRatio,Z.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ce,ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],ce.tl[0],ce.tl[1],ce.br[0],ce.br[1],ne.pixelRatio,ce.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Bi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Bi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class qs{constructor(u,h,v){this.binders={},this._buffers=[];const w=[];for(const D in u.paint._values){if(!v(D))continue;const F=u.paint.get(D);if(!(F instanceof gs&&yu(F.property.specification)))continue;const G=rl(D,u.type),Z=F.value,ne=F.property.specification.type,ce=F.property.useIntegerZoom,Ce=F.property.specification["property-type"],Re=Ce==="cross-faded"||Ce==="cross-faded-data-driven";if(Z.kind==="constant")this.binders[D]=Re?new ml(Z.value,G):new Js(Z.value,G,ne),w.push(`/u_${D}`);else if(Z.kind==="source"||Re){const Le=Md(D,ne,"source");this.binders[D]=Re?new xs(Z,ne,ce,h,Le,u.id):new sa(Z,G,ne,Le),w.push(`/a_${D}`)}else{const Le=Md(D,ne,"composite");this.binders[D]=new Pl(Z,G,ne,ce,h,Le),w.push(`/z_${D}`)}}this.cacheKey=w.sort().join("")}getMaxValue(u){const h=this.binders[u];return h instanceof sa||h instanceof Pl?h.maxValue:0}populatePaintArrays(u,h,v,w,D){for(const F in this.binders){const G=this.binders[F];(G instanceof sa||G instanceof Pl||G instanceof xs)&&G.populatePaintArray(u,h,v,w,D)}}setConstantPatternPositions(u,h){for(const v in this.binders){const w=this.binders[v];w instanceof ml&&w.setConstantPatternPositions(u,h)}}updatePaintArrays(u,h,v,w,D){let F=!1;for(const G in u){const Z=h.getPositions(G);for(const ne of Z){const ce=v.feature(ne.index);for(const Ce in this.binders){const Re=this.binders[Ce];if((Re instanceof sa||Re instanceof Pl||Re instanceof xs)&&Re.expression.isStateDependent===!0){const Le=w.paint.get(Ce);Re.expression=Le.value,Re.updatePaintArray(ne.start,ne.end,ce,u[G],D),F=!0}}}}return F}defines(){const u=[];for(const h in this.binders){const v=this.binders[h];(v instanceof Js||v instanceof ml)&&u.push(...v.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return u}getBinderAttributes(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof sa||v instanceof Pl)for(let w=0;w<v.paintVertexAttributes.length;w++)u.push(v.paintVertexAttributes[w].name);else if(v instanceof xs)for(let w=0;w<Bi.members.length;w++)u.push(Bi.members[w].name)}return u}getBinderUniforms(){const u=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof Js||v instanceof ml||v instanceof Pl)for(const w of v.uniformNames)u.push(w)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,h){const v=[];for(const w in this.binders){const D=this.binders[w];if(D instanceof Js||D instanceof ml||D instanceof Pl){for(const F of D.uniformNames)if(h[F]){const G=D.getBinding(u,h[F],F);v.push({name:F,property:w,binding:G})}}}return v}setUniforms(u,h,v,w){for(const{name:D,property:F,binding:G}of h)this.binders[F].setUniform(G,w,v.get(F),D)}updatePaintBuffers(u){this._buffers=[];for(const h in this.binders){const v=this.binders[h];if(u&&v instanceof xs){const w=u.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(v instanceof sa||v instanceof Pl)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(u){for(const h in this.binders){const v=this.binders[h];(v instanceof sa||v instanceof Pl||v instanceof xs)&&v.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const h=this.binders[u];(h instanceof sa||h instanceof Pl||h instanceof xs)&&h.destroy()}}}class nl{constructor(u,h,v=()=>!0){this.programConfigurations={};for(const w of u)this.programConfigurations[w.id]=new qs(w,h,v);this.needsUpload=!1,this._featureMap=new Go,this._bufferOffset=0}populatePaintArrays(u,h,v,w,D,F){for(const G in this.programConfigurations)this.programConfigurations[G].populatePaintArrays(u,h,w,D,F);h.id!==void 0&&this._featureMap.add(h.id,v,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,h,v,w){for(const D of v)this.needsUpload=this.programConfigurations[D.id].updatePaintArrays(u,this._featureMap,h,D,w)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function rl(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function Md(f,u,h){const v={color:{source:Wl,composite:c},number:{source:Yu,composite:Wl}},w=function(D){return{"line-pattern":{source:Pt,composite:Pt},"fill-pattern":{source:Pt,composite:Pt},"fill-extrusion-pattern":{source:Pt,composite:Pt}}[D]}(f);return w&&w[h]||v[u][h]}fr("ConstantBinder",Js),fr("CrossFadedConstantBinder",ml),fr("SourceExpressionBinder",sa),fr("CrossFadedCompositeBinder",xs),fr("CompositeExpressionBinder",Pl),fr("ProgramConfiguration",qs,{omit:["_buffers"]}),fr("ProgramConfigurationSet",nl);const Bh=Math.pow(2,14)-1,Oh=-Bh-1;function Sd(f){const u=it/f.extent,h=f.loadGeometry();for(let v=0;v<h.length;v++){const w=h[v];for(let D=0;D<w.length;D++){const F=w[D],G=Math.round(F.x*u),Z=Math.round(F.y*u);F.x=wt(G,Oh,Bh),F.y=wt(Z,Oh,Bh),(G<F.x||G>F.x+1||Z<F.y||Z>F.y+1)&&Je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function ic(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Sd(f):[]}}const Ih=-32768;function Ta(f,u,h,v,w){f.emplaceBack(Ih+8*u+v,Ih+8*h+w)}class Au{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new ot,this.indexArray=new _n,this.segments=new wn,this.programConfigurations=new nl(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){const w=this.layers[0],D=[];let F=null,G=!1,Z=w.type==="heatmap";if(w.type==="circle"){const ce=w;F=ce.layout.get("circle-sort-key"),G=!F.isConstant(),Z=Z||ce.paint.get("circle-pitch-alignment")==="map"}const ne=Z?h.subdivisionGranularity.circle:1;for(const{feature:ce,id:Ce,index:Re,sourceLayerIndex:Le}of u){const je=this.layers[0]._featureFilter.needGeometry,He=ic(ce,je);if(!this.layers[0]._featureFilter.filter(new Zo(this.zoom),He,v))continue;const st=G?F.evaluate(He,{},v):void 0,gt={id:Ce,properties:ce.properties,type:ce.type,sourceLayerIndex:Le,index:Re,geometry:je?He.geometry:Sd(ce),patterns:{},sortKey:st};D.push(gt)}G&&D.sort((ce,Ce)=>ce.sortKey-Ce.sortKey);for(const ce of D){const{geometry:Ce,index:Re,sourceLayerIndex:Le}=ce,je=u[Re].feature;this.addFeature(ce,Ce,Re,v,ne),h.featureIndex.insert(je,Ce,Re,Le,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Un),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,h,v,w,D=1){let F;switch(D){case 1:F=[0,7];break;case 3:F=[0,2,5,7];break;case 5:F=[0,1,3,4,6,7];break;case 7:F=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${D}; valid values are 1, 3, 5, 7.`)}const G=F.length;for(const Z of h)for(const ne of Z){const ce=ne.x,Ce=ne.y;if(ce<0||ce>=it||Ce<0||Ce>=it)continue;const Re=this.segments.prepareSegment(G*G,this.layoutVertexArray,this.indexArray,u.sortKey),Le=Re.vertexLength;for(let je=0;je<G;je++)for(let He=0;He<G;He++)Ta(this.layoutVertexArray,ce,Ce,F[He],F[je]);for(let je=0;je<G-1;je++)for(let He=0;He<G-1;He++){const st=Le+je*G+He,gt=Le+(je+1)*G+He;this.indexArray.emplaceBack(st,gt+1,st+1),this.indexArray.emplaceBack(st,gt,gt+1)}Re.vertexLength+=G*G,Re.primitiveLength+=(G-1)*(G-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,{},w)}}function Ed(f,u){for(let h=0;h<f.length;h++)if(Bc(u,f[h]))return!0;for(let h=0;h<u.length;h++)if(Bc(f,u[h]))return!0;return!!Qa(f,u)}function _p(f,u,h){return!!Bc(f,u)||!!kh(u,f,h)}function Ec(f,u){if(f.length===1)return oh(u,f[0]);for(let h=0;h<u.length;h++){const v=u[h];for(let w=0;w<v.length;w++)if(Bc(f,v[w]))return!0}for(let h=0;h<f.length;h++)if(oh(u,f[h]))return!0;for(let h=0;h<u.length;h++)if(Qa(f,u[h]))return!0;return!1}function kA(f,u,h){if(f.length>1){if(Qa(f,u))return!0;for(let v=0;v<u.length;v++)if(kh(u[v],f,h))return!0}for(let v=0;v<f.length;v++)if(kh(f[v],u,h))return!0;return!1}function Qa(f,u){if(f.length===0||u.length===0)return!1;for(let h=0;h<f.length-1;h++){const v=f[h],w=f[h+1];for(let D=0;D<u.length-1;D++)if(Cp(v,w,u[D],u[D+1]))return!0}return!1}function Cp(f,u,h,v){return yt(f,h,v)!==yt(u,h,v)&&yt(f,u,h)!==yt(f,u,v)}function kh(f,u,h){const v=h*h;if(u.length===1)return f.distSqr(u[0])<v;for(let w=1;w<u.length;w++)if(bp(f,u[w-1],u[w])<v)return!0;return!1}function bp(f,u,h){const v=u.distSqr(h);if(v===0)return f.distSqr(u);const w=((f.x-u.x)*(h.x-u.x)+(f.y-u.y)*(h.y-u.y))/v;return f.distSqr(w<0?u:w>1?h:h.sub(u)._mult(w)._add(u))}function oh(f,u){let h,v,w,D=!1;for(let F=0;F<f.length;F++){h=f[F];for(let G=0,Z=h.length-1;G<h.length;Z=G++)v=h[G],w=h[Z],v.y>u.y!=w.y>u.y&&u.x<(w.x-v.x)*(u.y-v.y)/(w.y-v.y)+v.x&&(D=!D)}return D}function Bc(f,u){let h=!1;for(let v=0,w=f.length-1;v<f.length;w=v++){const D=f[v],F=f[w];D.y>u.y!=F.y>u.y&&u.x<(F.x-D.x)*(u.y-D.y)/(F.y-D.y)+D.x&&(h=!h)}return h}function um(f,u,h){const v=h[0],w=h[2];if(f.x<v.x&&u.x<v.x||f.x>w.x&&u.x>w.x||f.y<v.y&&u.y<v.y||f.y>w.y&&u.y>w.y)return!1;const D=yt(f,u,h[0]);return D!==yt(f,u,h[1])||D!==yt(f,u,h[2])||D!==yt(f,u,h[3])}function oc(f,u,h){const v=u.paint.get(f).value;return v.kind==="constant"?v.value:h.programConfigurations.get(u.id).getMaxValue(f)}function Th(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Bd(f,u,h,v,w){if(!u[0]&&!u[1])return f;const D=k.convert(u)._mult(w);h==="viewport"&&D._rotate(-v);const F=[];for(let G=0;G<f.length;G++)F.push(f[G].sub(D));return F}let xp,sh;fr("CircleBucket",Au,{omit:["layers"]});var Uf={get paint(){return sh=sh||new bs({"circle-radius":new Hr(Ee.paint_circle["circle-radius"]),"circle-color":new Hr(Ee.paint_circle["circle-color"]),"circle-blur":new Hr(Ee.paint_circle["circle-blur"]),"circle-opacity":new Hr(Ee.paint_circle["circle-opacity"]),"circle-translate":new hr(Ee.paint_circle["circle-translate"]),"circle-translate-anchor":new hr(Ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new hr(Ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new hr(Ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hr(Ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hr(Ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hr(Ee.paint_circle["circle-stroke-opacity"])})},get layout(){return xp=xp||new bs({"circle-sort-key":new Hr(Ee.layout_circle["circle-sort-key"])})}};class zf extends su{constructor(u){super(u,Uf)}createBucket(u){return new Au(u)}queryRadius(u){const h=u;return oc("circle-radius",this,h)+oc("circle-stroke-width",this,h)+Th(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:D,pixelsToTileUnits:F,pixelPosMatrix:G}){const Z=Bd(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-D.bearingInRadians,F),ne=this.paint.get("circle-radius").evaluate(h,v)+this.paint.get("circle-stroke-width").evaluate(h,v),ce=this.paint.get("circle-pitch-alignment")==="map",Ce=ce?Z:function(Le,je){return Le.map(He=>wp(He,je))}(Z,G),Re=ce?ne*F:ne;for(const Le of w)for(const je of Le){const He=ce?je:wp(je,G);let st=Re;const gt=fe([],[je.x,je.y,0,1],G);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?st*=gt[3]/D.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(st*=D.cameraToCenterDistance/gt[3]),_p(Ce,He,st))return!0}return!1}}function wp(f,u){const h=fe([],[f.x,f.y,0,1],u);return new k(h[0]/h[3],h[1]/h[3])}class Od extends Au{}let af;fr("HeatmapBucket",Od,{omit:["layers"]});var ql={get paint(){return af=af||new bs({"heatmap-radius":new Hr(Ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hr(Ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new hr(Ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bu(Ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new hr(Ee.paint_heatmap["heatmap-opacity"])})}};function Rl(f,{width:u,height:h},v,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==u*h*v)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${u*h*v}`)}else w=new Uint8Array(u*h*v);return f.width=u,f.height=h,f.data=w,f}function Am(f,{width:u,height:h},v){if(u===f.width&&h===f.height)return;const w=Rl({},{width:u,height:h},v);jf(f,w,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,h)},v),f.width=u,f.height=h,f.data=w.data}function jf(f,u,h,v,w,D){if(w.width===0||w.height===0)return u;if(w.width>f.width||w.height>f.height||h.x>f.width-w.width||h.y>f.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>u.width||w.height>u.height||v.x>u.width-w.width||v.y>u.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const F=f.data,G=u.data;if(F===G)throw new Error("srcData equals dstData, so image is already copied");for(let Z=0;Z<w.height;Z++){const ne=((h.y+Z)*f.width+h.x)*D,ce=((v.y+Z)*u.width+v.x)*D;for(let Ce=0;Ce<w.width*D;Ce++)G[ce+Ce]=F[ne+Ce]}return u}class Io{constructor(u,h){Rl(this,u,1,h)}resize(u){Am(this,u,1)}clone(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,w,D){jf(u,h,v,w,D,1)}}class Hu{constructor(u,h){Rl(this,u,4,h)}resize(u){Am(this,u,4)}replace(u,h){h?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Hu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,v,w,D){jf(u,h,v,w,D,4)}}function lf(f){const u={},h=f.resolution||256,v=f.clips?f.clips.length:1,w=f.image||new Hu({width:h,height:v});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const D=(F,G,Z)=>{u[f.evaluationKey]=Z;const ne=f.expression.evaluate(u);w.data[F+G+0]=Math.floor(255*ne.r/ne.a),w.data[F+G+1]=Math.floor(255*ne.g/ne.a),w.data[F+G+2]=Math.floor(255*ne.b/ne.a),w.data[F+G+3]=Math.floor(255*ne.a)};if(f.clips)for(let F=0,G=0;F<v;++F,G+=4*h)for(let Z=0,ne=0;Z<h;Z++,ne+=4){const ce=Z/(h-1),{start:Ce,end:Re}=f.clips[F];D(G,ne,Ce*(1-ce)+Re*ce)}else for(let F=0,G=0;F<h;F++,G+=4)D(0,G,F/(h-1));return w}fr("AlphaImage",Io),fr("RGBAImage",Hu);const Id="big-fb";class TA extends su{createBucket(u){return new Od(u)}constructor(u){super(u,ql),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Id)&&this.heatmapFbos.delete(Id)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ph;var Mp={get paint(){return Ph=Ph||new bs({"hillshade-illumination-direction":new hr(Ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new hr(Ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new hr(Ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new hr(Ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new hr(Ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new hr(Ee.paint_hillshade["hillshade-accent-color"])})}};class Oc extends su{constructor(u){super(u,Mp)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const uf=Is([{name:"a_pos",components:2,type:"Int16"}],4),{members:Af}=uf;function ah(f,u,h){const v=h.patternDependencies;let w=!1;for(const D of u){const F=D.paint.get(`${f}-pattern`);F.isConstant()||(w=!0);const G=F.constantOr(null);G&&(w=!0,v[G.to]=!0,v[G.from]=!0)}return w}function kd(f,u,h,v,w){const D=w.patternDependencies;for(const F of u){const G=F.paint.get(`${f}-pattern`).value;if(G.kind!=="constant"){let Z=G.evaluate({zoom:v-1},h,{},w.availableImages),ne=G.evaluate({zoom:v},h,{},w.availableImages),ce=G.evaluate({zoom:v+1},h,{},w.availableImages);Z=Z&&Z.name?Z.name:Z,ne=ne&&ne.name?ne.name:ne,ce=ce&&ce.name?ce.name:ce,D[Z]=!0,D[ne]=!0,D[ce]=!0,h.patterns[F.id]={min:Z,mid:ne,max:ce}}}return h}function Hc(f,u,h,v,w){let D;if(w===function(F,G,Z,ne){let ce=0;for(let Ce=G,Re=Z-ne;Ce<Z;Ce+=ne)ce+=(F[Re]-F[Ce])*(F[Ce+1]+F[Re+1]),Re=Ce;return ce}(f,u,h,v)>0)for(let F=u;F<h;F+=v)D=_e(F/v|0,f[F],f[F+1],D);else for(let F=h-v;F>=u;F-=v)D=_e(F/v|0,f[F],f[F+1],D);return D&&y(D,D.next)&&(Ie(D),D=D.next),D}function di(f,u){if(!f)return f;u||(u=f);let h,v=f;do if(h=!1,v.steiner||!y(v,v.next)&&A(v.prev,v,v.next)!==0)v=v.next;else{if(Ie(v),v=u=v.prev,v===v.next)break;h=!0}while(h||v!==u);return u}function Zc(f,u,h,v,w,D,F){if(!f)return;!F&&D&&function(Z,ne,ce,Ce){let Re=Z;do Re.z===0&&(Re.z=ha(Re.x,Re.y,ne,ce,Ce)),Re.prevZ=Re.prev,Re.nextZ=Re.next,Re=Re.next;while(Re!==Z);Re.prevZ.nextZ=null,Re.prevZ=null,function(Le){let je,He=1;do{let st,gt=Le;Le=null;let jt=null;for(je=0;gt;){je++;let Mt=gt,Ke=0;for(let Ot=0;Ot<He&&(Ke++,Mt=Mt.nextZ,Mt);Ot++);let nt=He;for(;Ke>0||nt>0&&Mt;)Ke!==0&&(nt===0||!Mt||gt.z<=Mt.z)?(st=gt,gt=gt.nextZ,Ke--):(st=Mt,Mt=Mt.nextZ,nt--),jt?jt.nextZ=st:Le=st,st.prevZ=jt,jt=st;gt=Mt}jt.nextZ=null,He*=2}while(je>1)}(Re)}(f,v,w,D);let G=f;for(;f.prev!==f.next;){const Z=f.prev,ne=f.next;if(D?Td(f,v,w,D):is(f))u.push(Z.i,f.i,ne.i),Ie(f),f=ne.next,G=ne.next;else if((f=ne)===G){F?F===1?Zc(f=Sp(di(f),u),u,h,v,w,D,2):F===2&&Su(f,u,h,v,w,D):Zc(di(f),u,h,v,w,D,1);break}}}function is(f){const u=f.prev,h=f,v=f.next;if(A(u,h,v)>=0)return!1;const w=u.x,D=h.x,F=v.x,G=u.y,Z=h.y,ne=v.y,ce=Math.min(w,D,F),Ce=Math.min(G,Z,ne),Re=Math.max(w,D,F),Le=Math.max(G,Z,ne);let je=v.next;for(;je!==u;){if(je.x>=ce&&je.x<=Re&&je.y>=Ce&&je.y<=Le&&il(w,G,D,Z,F,ne,je.x,je.y)&&A(je.prev,je,je.next)>=0)return!1;je=je.next}return!0}function Td(f,u,h,v){const w=f.prev,D=f,F=f.next;if(A(w,D,F)>=0)return!1;const G=w.x,Z=D.x,ne=F.x,ce=w.y,Ce=D.y,Re=F.y,Le=Math.min(G,Z,ne),je=Math.min(ce,Ce,Re),He=Math.max(G,Z,ne),st=Math.max(ce,Ce,Re),gt=ha(Le,je,u,h,v),jt=ha(He,st,u,h,v);let Mt=f.prevZ,Ke=f.nextZ;for(;Mt&&Mt.z>=gt&&Ke&&Ke.z<=jt;){if(Mt.x>=Le&&Mt.x<=He&&Mt.y>=je&&Mt.y<=st&&Mt!==w&&Mt!==F&&il(G,ce,Z,Ce,ne,Re,Mt.x,Mt.y)&&A(Mt.prev,Mt,Mt.next)>=0||(Mt=Mt.prevZ,Ke.x>=Le&&Ke.x<=He&&Ke.y>=je&&Ke.y<=st&&Ke!==w&&Ke!==F&&il(G,ce,Z,Ce,ne,Re,Ke.x,Ke.y)&&A(Ke.prev,Ke,Ke.next)>=0))return!1;Ke=Ke.nextZ}for(;Mt&&Mt.z>=gt;){if(Mt.x>=Le&&Mt.x<=He&&Mt.y>=je&&Mt.y<=st&&Mt!==w&&Mt!==F&&il(G,ce,Z,Ce,ne,Re,Mt.x,Mt.y)&&A(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.prevZ}for(;Ke&&Ke.z<=jt;){if(Ke.x>=Le&&Ke.x<=He&&Ke.y>=je&&Ke.y<=st&&Ke!==w&&Ke!==F&&il(G,ce,Z,Ce,ne,Re,Ke.x,Ke.y)&&A(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.nextZ}return!0}function Sp(f,u){let h=f;do{const v=h.prev,w=h.next.next;!y(v,w)&&I(v,h,h.next,w)&&H(v,w)&&H(w,v)&&(u.push(v.i,h.i,w.i),Ie(h),Ie(h.next),h=f=w),h=h.next}while(h!==f);return di(h)}function Su(f,u,h,v,w,D){let F=f;do{let G=F.next.next;for(;G!==F.prev;){if(F.i!==G.i&&Ep(F,G)){let Z=ue(F,G);return F=di(F,F.next),Z=di(Z,Z.next),Zc(F,u,h,v,w,D,0),void Zc(Z,u,h,v,w,D,0)}G=G.next}F=F.next}while(F!==f)}function Ym(f,u){let h=f.x-u.x;return h===0&&(h=f.y-u.y,h===0)&&(h=(f.next.y-f.y)/(f.next.x-f.x)-(u.next.y-u.y)/(u.next.x-u.x)),h}function gl(f,u){const h=function(w,D){let F=D;const G=w.x,Z=w.y;let ne,ce=-1/0;if(y(w,F))return F;do{if(y(w,F.next))return F.next;if(Z<=F.y&&Z>=F.next.y&&F.next.y!==F.y){const He=F.x+(Z-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(He<=G&&He>ce&&(ce=He,ne=F.x<F.next.x?F:F.next,He===G))return ne}F=F.next}while(F!==D);if(!ne)return null;const Ce=ne,Re=ne.x,Le=ne.y;let je=1/0;F=ne;do{if(G>=F.x&&F.x>=Re&&G!==F.x&&cf(Z<Le?G:ce,Z,Re,Le,Z<Le?ce:G,Z,F.x,F.y)){const He=Math.abs(Z-F.y)/(G-F.x);H(F,w)&&(He<je||He===je&&(F.x>ne.x||F.x===ne.x&&cm(ne,F)))&&(ne=F,je=He)}F=F.next}while(F!==Ce);return ne}(f,u);if(!h)return u;const v=ue(h,f);return di(v,v.next),di(h,h.next)}function cm(f,u){return A(f.prev,f,u.prev)<0&&A(u.next,f,f.next)<0}function ha(f,u,h,v,w){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*w|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-v)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function dm(f){let u=f,h=f;do(u.x<h.x||u.x===h.x&&u.y<h.y)&&(h=u),u=u.next;while(u!==f);return h}function cf(f,u,h,v,w,D,F,G){return(w-F)*(u-G)>=(f-F)*(D-G)&&(f-F)*(v-G)>=(h-F)*(u-G)&&(h-F)*(D-G)>=(w-F)*(v-G)}function il(f,u,h,v,w,D,F,G){return!(f===F&&u===G)&&cf(f,u,h,v,w,D,F,G)}function Ep(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!function(h,v){let w=h;do{if(w.i!==h.i&&w.next.i!==h.i&&w.i!==v.i&&w.next.i!==v.i&&I(w,w.next,h,v))return!0;w=w.next}while(w!==h);return!1}(f,u)&&(H(f,u)&&H(u,f)&&function(h,v){let w=h,D=!1;const F=(h.x+v.x)/2,G=(h.y+v.y)/2;do w.y>G!=w.next.y>G&&w.next.y!==w.y&&F<(w.next.x-w.x)*(G-w.y)/(w.next.y-w.y)+w.x&&(D=!D),w=w.next;while(w!==h);return D}(f,u)&&(A(f.prev,f,u.prev)||A(f,u.prev,u))||y(f,u)&&A(f.prev,f,f.next)>0&&A(u.prev,u,u.next)>0)}function A(f,u,h){return(u.y-f.y)*(h.x-u.x)-(u.x-f.x)*(h.y-u.y)}function y(f,u){return f.x===u.x&&f.y===u.y}function I(f,u,h,v){const w=K(A(f,u,h)),D=K(A(f,u,v)),F=K(A(h,v,f)),G=K(A(h,v,u));return w!==D&&F!==G||!(w!==0||!B(f,h,u))||!(D!==0||!B(f,v,u))||!(F!==0||!B(h,f,v))||!(G!==0||!B(h,u,v))}function B(f,u,h){return u.x<=Math.max(f.x,h.x)&&u.x>=Math.min(f.x,h.x)&&u.y<=Math.max(f.y,h.y)&&u.y>=Math.min(f.y,h.y)}function K(f){return f>0?1:f<0?-1:0}function H(f,u){return A(f.prev,f,f.next)<0?A(f,u,f.next)>=0&&A(f,f.prev,u)>=0:A(f,u,f.prev)<0||A(f,f.next,u)<0}function ue(f,u){const h=Ue(f.i,f.x,f.y),v=Ue(u.i,u.x,u.y),w=f.next,D=u.prev;return f.next=u,u.prev=f,h.next=w,w.prev=h,v.next=h,h.prev=v,D.next=v,v.prev=D,v}function _e(f,u,h,v){const w=Ue(f,u,h);return v?(w.next=v.next,w.prev=v,v.next.prev=w,v.next=w):(w.prev=w,w.next=w),w}function Ie(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Ue(f,u,h){return{i:f,x:u,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class ct{constructor(u,h){if(h>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=h}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class xt{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}xt.noSubdivision=new xt({fill:new ct(0,0),line:new ct(0,0),tile:new ct(0,0),stencil:new ct(0,0),circle:1}),fr("SubdivisionGranularityExpression",ct),fr("SubdivisionGranularitySetting",xt);const Ht=-32768,Wt=32767;class xn{constructor(u,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=it/u,this._canonical=h}_getKey(u,h){return(u+=32768)<<16|(h+=32768)<<0}_vertexToIndex(u,h){if(u<-32768||h<-32768||u>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(u),w=0|Math.round(h),D=this._getKey(v,w);if(this._vertexDictionary.has(D))return this._vertexDictionary.get(D);const F=this._vertexBuffer.length/2;return this._vertexDictionary.set(D,F),this._vertexBuffer.push(v,w),F}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(w,D){const F=[];for(let G=0;G<D.length;G+=3){const Z=D[G],ne=D[G+1],ce=D[G+2],Ce=w[2*Z],Re=w[2*Z+1];(w[2*ne]-Ce)*(w[2*ce+1]-Re)-(w[2*ne+1]-Re)*(w[2*ce]-Ce)>0?(F.push(Z),F.push(ce),F.push(ne)):(F.push(Z),F.push(ne),F.push(ce))}return F}(this._vertexBuffer,u);const h=[],v=u.length;for(let w=0;w<v;w+=3){const D=[u[w+0],u[w+1],u[w+2]],F=[this._vertexBuffer[2*u[w+0]+0],this._vertexBuffer[2*u[w+0]+1],this._vertexBuffer[2*u[w+1]+0],this._vertexBuffer[2*u[w+1]+1],this._vertexBuffer[2*u[w+2]+0],this._vertexBuffer[2*u[w+2]+1]];let G=1/0,Z=1/0,ne=-1/0,ce=-1/0;for(let He=0;He<3;He++){const st=F[2*He],gt=F[2*He+1];G=Math.min(G,st),ne=Math.max(ne,st),Z=Math.min(Z,gt),ce=Math.max(ce,gt)}if(G===ne||Z===ce)continue;const Ce=Math.floor(G/this._granularityCellSize),Re=Math.ceil(ne/this._granularityCellSize),Le=Math.floor(Z/this._granularityCellSize),je=Math.ceil(ce/this._granularityCellSize);if(Ce!==Re||Le!==je)for(let He=Le;He<je;He++){const st=this._scanlineGenerateVertexRingForCellRow(He,F,D);Xn(this._vertexBuffer,st,h)}else h.push(...D)}return h}_scanlineGenerateVertexRingForCellRow(u,h,v){const w=u*this._granularityCellSize,D=w+this._granularityCellSize,F=[];for(let G=0;G<3;G++){const Z=h[2*G],ne=h[2*G+1],ce=h[2*(G+1)%6],Ce=h[(2*(G+1)+1)%6],Re=h[2*(G+2)%6],Le=h[(2*(G+2)+1)%6],je=ce-Z,He=Ce-ne,st=je===0,gt=He===0,jt=(w-ne)/He,Mt=(D-ne)/He,Ke=Math.min(jt,Mt),nt=Math.max(jt,Mt);if(!gt&&(Ke>=1||nt<=0)||gt&&(ne<w||ne>D)){Ce>=w&&Ce<=D&&F.push(v[(G+1)%3]);continue}!gt&&Ke>0&&F.push(this._vertexToIndex(Z+je*Ke,ne+He*Ke));const Ot=Z+je*Math.max(Ke,0),ln=Z+je*Math.min(nt,1);st||this._generateIntraEdgeVertices(F,Z,ne,ce,Ce,Ot,ln),!gt&&nt<1&&F.push(this._vertexToIndex(Z+je*nt,ne+He*nt)),(gt||Ce>=w&&Ce<=D)&&F.push(v[(G+1)%3]),!gt&&(Ce<=w||Ce>=D)&&this._generateInterEdgeVertices(F,Z,ne,ce,Ce,Re,Le,ln,w,D)}return F}_generateIntraEdgeVertices(u,h,v,w,D,F,G){const Z=w-h,ne=D-v,ce=ne===0,Ce=ce?Math.min(h,w):Math.min(F,G),Re=ce?Math.max(h,w):Math.max(F,G),Le=Math.floor(Ce/this._granularityCellSize)+1,je=Math.ceil(Re/this._granularityCellSize)-1;if(ce?h<w:F<G)for(let He=Le;He<=je;He++){const st=He*this._granularityCellSize;u.push(this._vertexToIndex(st,v+ne*(st-h)/Z))}else for(let He=je;He>=Le;He--){const st=He*this._granularityCellSize;u.push(this._vertexToIndex(st,v+ne*(st-h)/Z))}}_generateInterEdgeVertices(u,h,v,w,D,F,G,Z,ne,ce){const Ce=D-v,Re=F-w,Le=G-D,je=(ne-D)/Le,He=(ce-D)/Le,st=Math.min(je,He),gt=Math.max(je,He),jt=w+Re*st;let Mt=Math.floor(Math.min(jt,Z)/this._granularityCellSize)+1,Ke=Math.ceil(Math.max(jt,Z)/this._granularityCellSize)-1,nt=Z<jt;const Ot=Le===0;if(Ot&&(G===ne||G===ce))return;if(Ot||st>=1||gt<=0){const Ln=v-G,pn=F+(h-F)*Math.min((ne-G)/Ln,(ce-G)/Ln);Mt=Math.floor(Math.min(pn,Z)/this._granularityCellSize)+1,Ke=Math.ceil(Math.max(pn,Z)/this._granularityCellSize)-1,nt=Z<pn}const ln=Ce>0?ce:ne;if(nt)for(let Ln=Mt;Ln<=Ke;Ln++)u.push(this._vertexToIndex(Ln*this._granularityCellSize,ln));else for(let Ln=Ke;Ln>=Mt;Ln--)u.push(this._vertexToIndex(Ln*this._granularityCellSize,ln))}_generateOutline(u){const h=[];for(const v of u){const w=Yn(v,this._granularity,!0),D=this._pointArrayToIndices(w),F=[];for(let G=1;G<D.length;G++)F.push(D[G-1]),F.push(D[G]);h.push(F)}return h}_handlePoles(u){let h=!1,v=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(h||v)&&this._fillPoles(u,h,v)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let h=0;h<u.length;h+=2){const v=u[h+1];v===Ht&&(u[h+1]=-32767),v===Wt&&(u[h+1]=32766)}}_generatePoleQuad(u,h,v,w,D,F){w>D!=(F===Ht)?(u.push(h),u.push(v),u.push(this._vertexToIndex(w,F)),u.push(v),u.push(this._vertexToIndex(D,F)),u.push(this._vertexToIndex(w,F))):(u.push(v),u.push(h),u.push(this._vertexToIndex(w,F)),u.push(this._vertexToIndex(D,F)),u.push(v),u.push(this._vertexToIndex(w,F)))}_fillPoles(u,h,v){const w=this._vertexBuffer,D=it,F=u.length;for(let G=2;G<F;G+=3){const Z=u[G-2],ne=u[G-1],ce=u[G],Ce=w[2*Z],Re=w[2*Z+1],Le=w[2*ne],je=w[2*ne+1],He=w[2*ce],st=w[2*ce+1];h&&(Re===0&&je===0&&this._generatePoleQuad(u,Z,ne,Ce,Le,Ht),je===0&&st===0&&this._generatePoleQuad(u,ne,ce,Le,He,Ht),st===0&&Re===0&&this._generatePoleQuad(u,ce,Z,He,Ce,Ht)),v&&(Re===D&&je===D&&this._generatePoleQuad(u,Z,ne,Ce,Le,Wt),je===D&&st===D&&this._generatePoleQuad(u,ne,ce,Le,He,Wt),st===D&&Re===D&&this._generatePoleQuad(u,ce,Z,He,Ce,Wt))}}_initializeVertices(u){for(let h=0;h<u.length;h+=2)this._vertexToIndex(u[h],u[h+1])}subdividePolygonInternal(u,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:w}=function(G){const Z=[],ne=[];for(const ce of G)if(ce.length!==0){ce!==G[0]&&Z.push(ne.length/2);for(let Ce=0;Ce<ce.length;Ce++)ne.push(ce[Ce].x),ne.push(ce[Ce].y)}return{flattened:ne,holeIndices:Z}}(u);let D;this._initializeVertices(v);try{const G=function(ne,ce,Ce=2){const Re=ce&&ce.length,Le=Re?ce[0]*Ce:ne.length;let je=Hc(ne,0,Le,Ce,!0);const He=[];if(!je||je.next===je.prev)return He;let st,gt,jt;if(Re&&(je=function(Mt,Ke,nt,Ot){const ln=[];for(let Ln=0,pn=Ke.length;Ln<pn;Ln++){const bn=Hc(Mt,Ke[Ln]*Ot,Ln<pn-1?Ke[Ln+1]*Ot:Mt.length,Ot,!1);bn===bn.next&&(bn.steiner=!0),ln.push(dm(bn))}ln.sort(Ym);for(let Ln=0;Ln<ln.length;Ln++)nt=gl(ln[Ln],nt);return nt}(ne,ce,je,Ce)),ne.length>80*Ce){st=1/0,gt=1/0;let Mt=-1/0,Ke=-1/0;for(let nt=Ce;nt<Le;nt+=Ce){const Ot=ne[nt],ln=ne[nt+1];Ot<st&&(st=Ot),ln<gt&&(gt=ln),Ot>Mt&&(Mt=Ot),ln>Ke&&(Ke=ln)}jt=Math.max(Mt-st,Ke-gt),jt=jt!==0?32767/jt:0}return Zc(je,He,Ce,st,gt,jt,0),He}(v,w),Z=this._convertIndices(v,G);D=this._subdivideTrianglesScanline(Z)}catch(G){console.error(G)}let F=[];return h&&(F=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(D),{verticesFlattened:this._vertexBuffer,indicesTriangles:D,indicesLineList:F}}_convertIndices(u,h){const v=[];for(let w=0;w<h.length;w++)v.push(this._vertexToIndex(u[2*h[w]],u[2*h[w]+1]));return v}_pointArrayToIndices(u){const h=[];for(let v=0;v<u.length;v++){const w=u[v];h.push(this._vertexToIndex(w.x,w.y))}return h}}function Pn(f,u,h,v=!0){return new xn(h,u).subdividePolygonInternal(f,v)}function Yn(f,u,h=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const v=f[0],w=f[f.length-1],D=h&&(v.x!==w.x||v.y!==w.y);if(u<2)return D?[...f,f[0]]:[...f];const F=Math.floor(it/u),G=[];G.push(new k(f[0].x,f[0].y));const Z=f.length,ne=D?Z:Z-1;for(let ce=0;ce<ne;ce++){const Ce=f[ce],Re=ce<Z-1?f[ce+1]:f[0],Le=Ce.x,je=Ce.y,He=Re.x,st=Re.y,gt=Le!==He,jt=je!==st;if(!gt&&!jt)continue;const Mt=He-Le,Ke=st-je,nt=Math.abs(Mt),Ot=Math.abs(Ke);let ln=Le,Ln=je;for(;;){const bn=Mt>0?(Math.floor(ln/F)+1)*F:(Math.ceil(ln/F)-1)*F,Vn=Ke>0?(Math.floor(Ln/F)+1)*F:(Math.ceil(Ln/F)-1)*F,Dn=Math.abs(ln-bn),lr=Math.abs(Ln-Vn),En=Math.abs(ln-He),Wr=Math.abs(Ln-st),Nr=gt?Dn/nt:Number.POSITIVE_INFINITY,Qr=jt?lr/Ot:Number.POSITIVE_INFINITY;if((En<=Dn||!gt)&&(Wr<=lr||!jt))break;if(Nr<Qr&&gt||!jt){ln=bn,Ln+=Ke*Nr;const ei=new k(ln,Math.round(Ln));G[G.length-1].x===ei.x&&G[G.length-1].y===ei.y||G.push(ei)}else{ln+=Mt*Qr,Ln=Vn;const ei=new k(Math.round(ln),Ln);G[G.length-1].x===ei.x&&G[G.length-1].y===ei.y||G.push(ei)}}const pn=new k(He,st);G[G.length-1].x===pn.x&&G[G.length-1].y===pn.y||G.push(pn)}return G}function Xn(f,u,h){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,w=f[2*u[0]];for(let Z=1;Z<u.length;Z++){const ne=f[2*u[Z]];ne<w&&(w=ne,v=Z)}const D=u.length;let F=v,G=(F+1)%D;for(;;){const Z=F-1>=0?F-1:D-1,ne=(G+1)%D,ce=f[2*u[Z]],Ce=f[2*u[ne]],Re=f[2*u[F]],Le=f[2*u[F]+1],je=f[2*u[G]+1];let He=!1;if(ce<Ce)He=!0;else if(ce>Ce)He=!1;else{const st=je-Le,gt=-(f[2*u[G]]-Re),jt=Le<je?1:-1;((ce-Re)*st+(f[2*u[Z]+1]-Le)*gt)*jt>((Ce-Re)*st+(f[2*u[ne]+1]-Le)*gt)*jt&&(He=!0)}if(He){const st=u[Z],gt=u[F],jt=u[G];st!==gt&&st!==jt&&gt!==jt&&h.push(jt,gt,st),F--,F<0&&(F=D-1)}else{const st=u[ne],gt=u[F],jt=u[G];st!==gt&&st!==jt&&gt!==jt&&h.push(jt,gt,st),G++,G>=D&&(G=0)}if(Z===ne)break}}function _r(f,u,h,v,w,D,F,G,Z){const ne=w.length/2,ce=F&&G&&Z;if(ne<wn.MAX_VERTEX_ARRAY_LENGTH){const Ce=u.prepareSegment(ne,h,v),Re=Ce.vertexLength;for(let He=0;He<D.length;He+=3)v.emplaceBack(Re+D[He],Re+D[He+1],Re+D[He+2]);let Le,je;Ce.vertexLength+=ne,Ce.primitiveLength+=D.length/3,ce&&(je=F.prepareSegment(ne,h,G),Le=je.vertexLength,je.vertexLength+=ne);for(let He=0;He<w.length;He+=2)f(w[He],w[He+1]);if(ce)for(let He=0;He<Z.length;He++){const st=Z[He];for(let gt=1;gt<st.length;gt+=2)G.emplaceBack(Le+st[gt-1],Le+st[gt]);je.primitiveLength+=st.length/2}}else(function(Ce,Re,Le,je,He,st){const gt=[];for(let Ot=0;Ot<je.length/2;Ot++)gt.push(-1);const jt={count:0};let Mt=0,Ke=Ce.getOrCreateLatestSegment(Re,Le),nt=Ke.vertexLength;for(let Ot=2;Ot<He.length;Ot+=3){const ln=He[Ot-2],Ln=He[Ot-1],pn=He[Ot];let bn=gt[ln]<Mt,Vn=gt[Ln]<Mt,Dn=gt[pn]<Mt;Ke.vertexLength+((bn?1:0)+(Vn?1:0)+(Dn?1:0))>wn.MAX_VERTEX_ARRAY_LENGTH&&(Ke=Ce.createNewSegment(Re,Le),Mt=jt.count,bn=!0,Vn=!0,Dn=!0,nt=0);const lr=ur(gt,je,st,jt,ln,bn,Ke),En=ur(gt,je,st,jt,Ln,Vn,Ke),Wr=ur(gt,je,st,jt,pn,Dn,Ke);Le.emplaceBack(nt+lr-Mt,nt+En-Mt,nt+Wr-Mt),Ke.primitiveLength++}})(u,h,v,w,D,f),ce&&function(Ce,Re,Le,je,He,st){const gt=[];for(let Ot=0;Ot<je.length/2;Ot++)gt.push(-1);const jt={count:0};let Mt=0,Ke=Ce.getOrCreateLatestSegment(Re,Le),nt=Ke.vertexLength;for(let Ot=0;Ot<He.length;Ot++){const ln=He[Ot];for(let Ln=1;Ln<He[Ot].length;Ln+=2){const pn=ln[Ln-1],bn=ln[Ln];let Vn=gt[pn]<Mt,Dn=gt[bn]<Mt;Ke.vertexLength+((Vn?1:0)+(Dn?1:0))>wn.MAX_VERTEX_ARRAY_LENGTH&&(Ke=Ce.createNewSegment(Re,Le),Mt=jt.count,Vn=!0,Dn=!0,nt=0);const lr=ur(gt,je,st,jt,pn,Vn,Ke),En=ur(gt,je,st,jt,bn,Dn,Ke);Le.emplaceBack(nt+lr-Mt,nt+En-Mt),Ke.primitiveLength++}}}(F,h,G,w,Z,f),u.forceNewSegmentOnNextPrepare(),F==null||F.forceNewSegmentOnNextPrepare()}function ur(f,u,h,v,w,D,F){if(D){const G=v.count;return h(u[2*w],u[2*w+1]),f[w]=v.count,v.count++,F.vertexLength++,G}return f[w]}class Fr{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new At,this.indexArray=new _n,this.indexArray2=new mn,this.programConfigurations=new nl(u.layers,u.zoom),this.segments=new wn,this.segments2=new wn,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=ah("fill",this.layers,h);const w=this.layers[0].layout.get("fill-sort-key"),D=!w.isConstant(),F=[];for(const{feature:G,id:Z,index:ne,sourceLayerIndex:ce}of u){const Ce=this.layers[0]._featureFilter.needGeometry,Re=ic(G,Ce);if(!this.layers[0]._featureFilter.filter(new Zo(this.zoom),Re,v))continue;const Le=D?w.evaluate(Re,{},v,h.availableImages):void 0,je={id:Z,properties:G.properties,type:G.type,sourceLayerIndex:ce,index:ne,geometry:Ce?Re.geometry:Sd(G),patterns:{},sortKey:Le};F.push(je)}D&&F.sort((G,Z)=>G.sortKey-Z.sortKey);for(const G of F){const{geometry:Z,index:ne,sourceLayerIndex:ce}=G;if(this.hasPattern){const Ce=kd("fill",this.layers,G,this.zoom,h);this.patternFeatures.push(Ce)}else this.addFeature(G,Z,ne,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[ne].feature,Z,ne,ce,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Af),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,h,v,w,D,F){for(const G of Fc(h,500)){const Z=Pn(G,w,F.fill.getGranularityForZoomLevel(w.z)),ne=this.layoutVertexArray;_r((ce,Ce)=>{ne.emplaceBack(ce,Ce)},this.segments,this.layoutVertexArray,this.indexArray,Z.verticesFlattened,Z.indicesTriangles,this.segments2,this.indexArray2,Z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,w)}}let ai,Gr;fr("FillBucket",Fr,{omit:["layers","patternFeatures"]});var Xi={get paint(){return Gr=Gr||new bs({"fill-antialias":new hr(Ee.paint_fill["fill-antialias"]),"fill-opacity":new Hr(Ee.paint_fill["fill-opacity"]),"fill-color":new Hr(Ee.paint_fill["fill-color"]),"fill-outline-color":new Hr(Ee.paint_fill["fill-outline-color"]),"fill-translate":new hr(Ee.paint_fill["fill-translate"]),"fill-translate-anchor":new hr(Ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qu(Ee.paint_fill["fill-pattern"])})},get layout(){return ai=ai||new bs({"fill-sort-key":new Hr(Ee.layout_fill["fill-sort-key"])})}};class ko extends su{constructor(u){super(u,Xi)}recalculate(u,h){super.recalculate(u,h);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new Fr(u)}queryRadius(){return Th(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:h,transform:v,pixelsToTileUnits:w}){return Ec(Bd(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,w),h)}isTileClipped(){return!0}}const qa=Is([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),aa=Is([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ca}=qa;var ba,Pa,Yl,Ya,xa,hs,gi,Xo={};function la(){if(Pa)return ba;Pa=1;var f=E();function u(w,D,F,G,Z){this.properties={},this.extent=F,this.type=0,this._pbf=w,this._geometry=-1,this._keys=G,this._values=Z,w.readFields(h,this,D)}function h(w,D,F){w==1?D.id=F.readVarint():w==2?function(G,Z){for(var ne=G.readVarint()+G.pos;G.pos<ne;){var ce=Z._keys[G.readVarint()],Ce=Z._values[G.readVarint()];Z.properties[ce]=Ce}}(F,D):w==3?D.type=F.readVarint():w==4&&(D._geometry=F.pos)}function v(w){for(var D,F,G=0,Z=0,ne=w.length,ce=ne-1;Z<ne;ce=Z++)G+=((F=w[ce]).x-(D=w[Z]).x)*(D.y+F.y);return G}return ba=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var D,F=w.readVarint()+w.pos,G=1,Z=0,ne=0,ce=0,Ce=[];w.pos<F;){if(Z<=0){var Re=w.readVarint();G=7&Re,Z=Re>>3}if(Z--,G===1||G===2)ne+=w.readSVarint(),ce+=w.readSVarint(),G===1&&(D&&Ce.push(D),D=[]),D.push(new f(ne,ce));else{if(G!==7)throw new Error("unknown command "+G);D&&D.push(D[0].clone())}}return D&&Ce.push(D),Ce},u.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var D=w.readVarint()+w.pos,F=1,G=0,Z=0,ne=0,ce=1/0,Ce=-1/0,Re=1/0,Le=-1/0;w.pos<D;){if(G<=0){var je=w.readVarint();F=7&je,G=je>>3}if(G--,F===1||F===2)(Z+=w.readSVarint())<ce&&(ce=Z),Z>Ce&&(Ce=Z),(ne+=w.readSVarint())<Re&&(Re=ne),ne>Le&&(Le=ne);else if(F!==7)throw new Error("unknown command "+F)}return[ce,Re,Ce,Le]},u.prototype.toGeoJSON=function(w,D,F){var G,Z,ne=this.extent*Math.pow(2,F),ce=this.extent*w,Ce=this.extent*D,Re=this.loadGeometry(),Le=u.types[this.type];function je(gt){for(var jt=0;jt<gt.length;jt++){var Mt=gt[jt];gt[jt]=[360*(Mt.x+ce)/ne-180,360/Math.PI*Math.atan(Math.exp((180-360*(Mt.y+Ce)/ne)*Math.PI/180))-90]}}switch(this.type){case 1:var He=[];for(G=0;G<Re.length;G++)He[G]=Re[G][0];je(Re=He);break;case 2:for(G=0;G<Re.length;G++)je(Re[G]);break;case 3:for(Re=function(gt){var jt=gt.length;if(jt<=1)return[gt];for(var Mt,Ke,nt=[],Ot=0;Ot<jt;Ot++){var ln=v(gt[Ot]);ln!==0&&(Ke===void 0&&(Ke=ln<0),Ke===ln<0?(Mt&&nt.push(Mt),Mt=[gt[Ot]]):Mt.push(gt[Ot]))}return Mt&&nt.push(Mt),nt}(Re),G=0;G<Re.length;G++)for(Z=0;Z<Re[G].length;Z++)je(Re[G][Z])}Re.length===1?Re=Re[0]:Le="Multi"+Le;var st={type:"Feature",geometry:{type:Le,coordinates:Re},properties:this.properties};return"id"in this&&(st.id=this.id),st},ba}function fa(){if(Ya)return Yl;Ya=1;var f=la();function u(v,w){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=v,this._keys=[],this._values=[],this._features=[],v.readFields(h,this,w),this.length=this._features.length}function h(v,w,D){v===15?w.version=D.readVarint():v===1?w.name=D.readString():v===5?w.extent=D.readVarint():v===2?w._features.push(D.pos):v===3?w._keys.push(D.readString()):v===4&&w._values.push(function(F){for(var G=null,Z=F.readVarint()+F.pos;F.pos<Z;){var ne=F.readVarint()>>3;G=ne===1?F.readString():ne===2?F.readFloat():ne===3?F.readDouble():ne===4?F.readVarint64():ne===5?F.readVarint():ne===6?F.readSVarint():ne===7?F.readBoolean():null}return G}(D))}return Yl=u,u.prototype.feature=function(v){if(v<0||v>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[v];var w=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,w,this.extent,this._keys,this._values)},Yl}function ks(){return gi||(gi=1,Xo.VectorTile=function(){if(hs)return xa;hs=1;var f=fa();function u(h,v,w){if(h===3){var D=new f(w,w.readVarint()+w.pos);D.length&&(v[D.name]=D)}}return xa=function(h,v){this.layers=h.readFields(u,{},v)},xa}(),Xo.VectorTileFeature=la(),Xo.VectorTileLayer=fa()),Xo}var Kl=d(ks());const Ro=Kl.VectorTileFeature.types,Pd=Math.pow(2,13);function yl(f,u,h,v,w,D,F,G){f.emplaceBack(u,h,2*Math.floor(v*Pd)+F,w*Pd*2,D*Pd*2,Math.round(G))}class PA{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new mt,this.centroidVertexArray=new ut,this.indexArray=new _n,this.programConfigurations=new nl(u.layers,u.zoom),this.segments=new wn,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.features=[],this.hasPattern=ah("fill-extrusion",this.layers,h);for(const{feature:w,id:D,index:F,sourceLayerIndex:G}of u){const Z=this.layers[0]._featureFilter.needGeometry,ne=ic(w,Z);if(!this.layers[0]._featureFilter.filter(new Zo(this.zoom),ne,v))continue;const ce={id:D,sourceLayerIndex:G,index:F,geometry:Z?ne.geometry:Sd(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(kd("fill-extrusion",this.layers,ce,this.zoom,h)):this.addFeature(ce,ce.geometry,F,v,{},h.subdivisionGranularity),h.featureIndex.insert(w,ce.geometry,F,G,this.index,!0)}}addFeatures(u,h,v){for(const w of this.features){const{geometry:D}=w;this.addFeature(w,D,w.index,h,v,u.subdivisionGranularity)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Ca),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,aa.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,h,v,w,D,F){for(const G of Fc(h,500)){const Z={x:0,y:0,sampleCount:0},ne=this.layoutVertexArray.length;this.processPolygon(Z,w,u,G,F);const ce=this.layoutVertexArray.length-ne,Ce=Math.floor(Z.x/Z.sampleCount),Re=Math.floor(Z.y/Z.sampleCount);for(let Le=0;Le<ce;Le++)this.centroidVertexArray.emplaceBack(Ce,Re)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,w)}processPolygon(u,h,v,w,D){if(w.length<1||_l(w[0]))return;for(const Ce of w)Ce.length!==0&&Xc(u,Ce);const F={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},G=D.fill.getGranularityForZoomLevel(h.z),Z=Ro[v.type]==="Polygon";for(const Ce of w){if(Ce.length===0||_l(Ce))continue;const Re=Yn(Ce,G,Z);this._generateSideFaces(Re,F)}if(!Z)return;const ne=Pn(w,h,G,!1),ce=this.layoutVertexArray;_r((Ce,Re)=>{yl(ce,Ce,Re,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,ne.verticesFlattened,ne.indicesTriangles)}_generateSideFaces(u,h){let v=0;for(let w=1;w<u.length;w++){const D=u[w],F=u[w-1];if(vl(D,F))continue;h.segment.vertexLength+4>wn.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const G=D.sub(F)._perp()._unit(),Z=F.dist(D);v+Z>32768&&(v=0),yl(this.layoutVertexArray,D.x,D.y,G.x,G.y,0,0,v),yl(this.layoutVertexArray,D.x,D.y,G.x,G.y,0,1,v),v+=Z,yl(this.layoutVertexArray,F.x,F.y,G.x,G.y,0,0,v),yl(this.layoutVertexArray,F.x,F.y,G.x,G.y,0,1,v);const ne=h.segment.vertexLength;this.indexArray.emplaceBack(ne,ne+2,ne+1),this.indexArray.emplaceBack(ne+1,ne+2,ne+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function Xc(f,u){for(let h=0;h<u.length;h++){const v=u[h];h===u.length-1&&u[0].x===v.x&&u[0].y===v.y||(f.x+=v.x,f.y+=v.y,f.sampleCount++)}}function vl(f,u){return f.x===u.x&&(f.x<0||f.x>it)||f.y===u.y&&(f.y<0||f.y>it)}function _l(f){return f.every(u=>u.x<0)||f.every(u=>u.x>it)||f.every(u=>u.y<0)||f.every(u=>u.y>it)}let df;fr("FillExtrusionBucket",PA,{omit:["layers","features"]});var Nf={get paint(){return df=df||new bs({"fill-extrusion-opacity":new hr(Ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hr(Ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new hr(Ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new hr(Ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qu(Ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hr(Ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hr(Ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new hr(Ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Rh extends su{constructor(u){super(u,Nf)}createBucket(u){return new PA(u)}queryRadius(){return Th(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:D,pixelsToTileUnits:F,pixelPosMatrix:G}){const Z=Bd(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-D.bearingInRadians,F),ne=this.paint.get("fill-extrusion-height").evaluate(h,v),ce=this.paint.get("fill-extrusion-base").evaluate(h,v),Ce=function(Le,je,He){const st=[];for(const gt of Le){const jt=[gt.x,gt.y,0,1];fe(jt,jt,je),st.push(new k(jt[0]/jt[3],jt[1]/jt[3]))}return st}(Z,G),Re=function(Le,je,He,st){const gt=[],jt=[],Mt=st[8]*je,Ke=st[9]*je,nt=st[10]*je,Ot=st[11]*je,ln=st[8]*He,Ln=st[9]*He,pn=st[10]*He,bn=st[11]*He;for(const Vn of Le){const Dn=[],lr=[];for(const En of Vn){const Wr=En.x,Nr=En.y,Qr=st[0]*Wr+st[4]*Nr+st[12],ei=st[1]*Wr+st[5]*Nr+st[13],Ko=st[2]*Wr+st[6]*Nr+st[14],al=st[3]*Wr+st[7]*Nr+st[15],$l=Ko+nt,Xu=al+Ot,uh=Qr+ln,lc=ei+Ln,Eu=Ko+pn,pA=al+bn,wl=new k((Qr+Mt)/Xu,(ei+Ke)/Xu);wl.z=$l/Xu,Dn.push(wl);const cu=new k(uh/pA,lc/pA);cu.z=Eu/pA,lr.push(cu)}gt.push(Dn),jt.push(lr)}return[gt,jt]}(w,ce,ne,G);return function(Le,je,He){let st=1/0;Ec(He,je)&&(st=$m(He,je[0]));for(let gt=0;gt<je.length;gt++){const jt=je[gt],Mt=Le[gt];for(let Ke=0;Ke<jt.length-1;Ke++){const nt=jt[Ke],Ot=[nt,jt[Ke+1],Mt[Ke+1],Mt[Ke],nt];Ed(He,Ot)&&(st=Math.min(st,$m(He,Ot)))}}return st!==1/0&&st}(Re[0],Re[1],Ce)}}function hf(f,u){return f.x*u.x+f.y*u.y}function $m(f,u){if(f.length===1){let h=0;const v=u[h++];let w;for(;!w||v.equals(w);)if(w=u[h++],!w)return 1/0;for(;h<u.length;h++){const D=u[h],F=f[0],G=w.sub(v),Z=D.sub(v),ne=F.sub(v),ce=hf(G,G),Ce=hf(G,Z),Re=hf(Z,Z),Le=hf(ne,G),je=hf(ne,Z),He=ce*Re-Ce*Ce,st=(Re*Le-Ce*je)/He,gt=(ce*je-Ce*Le)/He,jt=v.z*(1-st-gt)+w.z*st+D.z*gt;if(isFinite(jt))return jt}return 1/0}{let h=1/0;for(const v of u)h=Math.min(h,v.z);return h}}const ff=Is([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Vm}=ff,pf=Is([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:RA}=pf,hm=Kl.VectorTileFeature.types,F0=Math.cos(Math.PI/180*37.5),fm=Math.pow(2,14)/.5;class Gf{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new St,this.layoutVertexArray2=new kt,this.indexArray=new _n,this.programConfigurations=new nl(u.layers,u.zoom),this.segments=new wn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,v){this.hasPattern=ah("line",this.layers,h);const w=this.layers[0].layout.get("line-sort-key"),D=!w.isConstant(),F=[];for(const{feature:G,id:Z,index:ne,sourceLayerIndex:ce}of u){const Ce=this.layers[0]._featureFilter.needGeometry,Re=ic(G,Ce);if(!this.layers[0]._featureFilter.filter(new Zo(this.zoom),Re,v))continue;const Le=D?w.evaluate(Re,{},v):void 0,je={id:Z,properties:G.properties,type:G.type,sourceLayerIndex:ce,index:ne,geometry:Ce?Re.geometry:Sd(G),patterns:{},sortKey:Le};F.push(je)}D&&F.sort((G,Z)=>G.sortKey-Z.sortKey);for(const G of F){const{geometry:Z,index:ne,sourceLayerIndex:ce}=G;if(this.hasPattern){const Ce=kd("line",this.layers,G,this.zoom,h);this.patternFeatures.push(Ce)}else this.addFeature(G,Z,ne,v,{},h.subdivisionGranularity);h.featureIndex.insert(u[ne].feature,Z,ne,ce,this.index)}}update(u,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,v)}addFeatures(u,h,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,v,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,RA)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Vm),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,h,v,w,D,F){const G=this.layers[0].layout,Z=G.get("line-join").evaluate(u,{}),ne=G.get("line-cap"),ce=G.get("line-miter-limit"),Ce=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Re of h)this.addLine(Re,u,Z,ne,ce,Ce,w,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,v,D,w)}addLine(u,h,v,w,D,F,G,Z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Yn(u,G?Z.line.getGranularityForZoomLevel(G.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Mt=0;Mt<u.length-1;Mt++)this.totalDistance+=u[Mt].dist(u[Mt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ne=hm[h.type]==="Polygon";let ce=u.length;for(;ce>=2&&u[ce-1].equals(u[ce-2]);)ce--;let Ce=0;for(;Ce<ce-1&&u[Ce].equals(u[Ce+1]);)Ce++;if(ce<(ne?3:2))return;v==="bevel"&&(D=1.05);const Re=this.overscaling<=16?15*it/(512*this.overscaling):0,Le=this.segments.prepareSegment(10*ce,this.layoutVertexArray,this.indexArray);let je,He,st,gt,jt;this.e1=this.e2=-1,ne&&(je=u[ce-2],jt=u[Ce].sub(je)._unit()._perp());for(let Mt=Ce;Mt<ce;Mt++){if(st=Mt===ce-1?ne?u[Ce+1]:void 0:u[Mt+1],st&&u[Mt].equals(st))continue;jt&&(gt=jt),je&&(He=je),je=u[Mt],jt=st?st.sub(je)._unit()._perp():gt,gt=gt||jt;let Ke=gt.add(jt);Ke.x===0&&Ke.y===0||Ke._unit();const nt=gt.x*jt.x+gt.y*jt.y,Ot=Ke.x*jt.x+Ke.y*jt.y,ln=Ot!==0?1/Ot:1/0,Ln=2*Math.sqrt(2-2*Ot),pn=Ot<F0&&He&&st,bn=gt.x*jt.y-gt.y*jt.x>0;if(pn&&Mt>Ce){const lr=je.dist(He);if(lr>2*Re){const En=je.sub(je.sub(He)._mult(Re/lr)._round());this.updateDistance(He,En),this.addCurrentVertex(En,gt,0,0,Le),He=En}}const Vn=He&&st;let Dn=Vn?v:ne?"butt":w;if(Vn&&Dn==="round"&&(ln<F?Dn="miter":ln<=2&&(Dn="fakeround")),Dn==="miter"&&ln>D&&(Dn="bevel"),Dn==="bevel"&&(ln>2&&(Dn="flipbevel"),ln<D&&(Dn="miter")),He&&this.updateDistance(He,je),Dn==="miter")Ke._mult(ln),this.addCurrentVertex(je,Ke,0,0,Le);else if(Dn==="flipbevel"){if(ln>100)Ke=jt.mult(-1);else{const lr=ln*gt.add(jt).mag()/gt.sub(jt).mag();Ke._perp()._mult(lr*(bn?-1:1))}this.addCurrentVertex(je,Ke,0,0,Le),this.addCurrentVertex(je,Ke.mult(-1),0,0,Le)}else if(Dn==="bevel"||Dn==="fakeround"){const lr=-Math.sqrt(ln*ln-1),En=bn?lr:0,Wr=bn?0:lr;if(He&&this.addCurrentVertex(je,gt,En,Wr,Le),Dn==="fakeround"){const Nr=Math.round(180*Ln/Math.PI/20);for(let Qr=1;Qr<Nr;Qr++){let ei=Qr/Nr;if(ei!==.5){const al=ei-.5;ei+=ei*al*(ei-1)*((1.0904+nt*(nt*(3.55645-1.43519*nt)-3.2452))*al*al+(.848013+nt*(.215638*nt-1.06021)))}const Ko=jt.sub(gt)._mult(ei)._add(gt)._unit()._mult(bn?-1:1);this.addHalfVertex(je,Ko.x,Ko.y,!1,bn,0,Le)}}st&&this.addCurrentVertex(je,jt,-En,-Wr,Le)}else if(Dn==="butt")this.addCurrentVertex(je,Ke,0,0,Le);else if(Dn==="square"){const lr=He?1:-1;this.addCurrentVertex(je,Ke,lr,lr,Le)}else Dn==="round"&&(He&&(this.addCurrentVertex(je,gt,0,0,Le),this.addCurrentVertex(je,gt,1,1,Le,!0)),st&&(this.addCurrentVertex(je,jt,-1,-1,Le,!0),this.addCurrentVertex(je,jt,0,0,Le)));if(pn&&Mt<ce-1){const lr=je.dist(st);if(lr>2*Re){const En=je.add(st.sub(je)._mult(Re/lr)._round());this.updateDistance(je,En),this.addCurrentVertex(En,jt,0,0,Le),je=En}}}}addCurrentVertex(u,h,v,w,D,F=!1){const G=h.y*w-h.x,Z=-h.y-h.x*w;this.addHalfVertex(u,h.x+h.y*v,h.y-h.x*v,F,!1,v,D),this.addHalfVertex(u,G,Z,F,!0,-w,D),this.distance>fm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,h,v,w,D,F))}addHalfVertex({x:u,y:h},v,w,D,F,G,Z){const ne=.5*(this.lineClips?this.scaledDistance*(fm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(D?1:0),(h<<1)+(F?1:0),Math.round(63*v)+128,Math.round(63*w)+128,1+(G===0?0:G<0?-1:1)|(63&ne)<<2,ne>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ce=Z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ce,this.e2),Z.primitiveLength++),F?this.e2=ce:this.e1=ce}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,h){this.distance+=u.dist(h),this.updateScaledDistance()}}let dA,Kh;fr("LineBucket",Gf,{omit:["layers","patternFeatures"]});var Jc={get paint(){return Kh=Kh||new bs({"line-opacity":new Hr(Ee.paint_line["line-opacity"]),"line-color":new Hr(Ee.paint_line["line-color"]),"line-translate":new hr(Ee.paint_line["line-translate"]),"line-translate-anchor":new hr(Ee.paint_line["line-translate-anchor"]),"line-width":new Hr(Ee.paint_line["line-width"]),"line-gap-width":new Hr(Ee.paint_line["line-gap-width"]),"line-offset":new Hr(Ee.paint_line["line-offset"]),"line-blur":new Hr(Ee.paint_line["line-blur"]),"line-dasharray":new rc(Ee.paint_line["line-dasharray"]),"line-pattern":new Qu(Ee.paint_line["line-pattern"]),"line-gradient":new bu(Ee.paint_line["line-gradient"])})},get layout(){return dA=dA||new bs({"line-cap":new hr(Ee.layout_line["line-cap"]),"line-join":new Hr(Ee.layout_line["line-join"]),"line-miter-limit":new hr(Ee.layout_line["line-miter-limit"]),"line-round-limit":new hr(Ee.layout_line["line-round-limit"]),"line-sort-key":new Hr(Ee.layout_line["line-sort-key"])})}};class sc extends Hr{possiblyEvaluate(u,h){return h=new Zo(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(u,h)}evaluate(u,h,v,w){return h=ft({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(u,h,v,w)}}let Wf;class U0 extends su{constructor(u){super(u,Jc),this.gradientVersion=0,Wf||(Wf=new sc(Jc.paint.properties["line-width"].specification),Wf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof tt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,h){super.recalculate(u,h),this.paint._values["line-floorwidth"]=Wf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new Gf(u)}queryRadius(u){const h=u,v=Hm(oc("line-width",this,h),oc("line-gap-width",this,h)),w=oc("line-offset",this,h);return v/2+Math.abs(w)+Th(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:v,geometry:w,transform:D,pixelsToTileUnits:F}){const G=Bd(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-D.bearingInRadians,F),Z=F/2*Hm(this.paint.get("line-width").evaluate(h,v),this.paint.get("line-gap-width").evaluate(h,v)),ne=this.paint.get("line-offset").evaluate(h,v);return ne&&(w=function(ce,Ce){const Re=[];for(let Le=0;Le<ce.length;Le++){const je=ce[Le],He=[];for(let st=0;st<je.length;st++){const gt=je[st-1],jt=je[st],Mt=je[st+1],Ke=st===0?new k(0,0):jt.sub(gt)._unit()._perp(),nt=st===je.length-1?new k(0,0):Mt.sub(jt)._unit()._perp(),Ot=Ke._add(nt)._unit(),ln=Ot.x*nt.x+Ot.y*nt.y;ln!==0&&Ot._mult(1/ln),He.push(Ot._mult(Ce)._add(jt))}Re.push(He)}return Re}(w,ne*F)),function(ce,Ce,Re){for(let Le=0;Le<Ce.length;Le++){const je=Ce[Le];if(ce.length>=3){for(let He=0;He<je.length;He++)if(Bc(ce,je[He]))return!0}if(kA(ce,je,Re))return!0}return!1}(G,w,Z)}isTileClipped(){return!0}}function Hm(f,u){return u>0?u+2*f:f}const Gy=Is([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mf=Is([{name:"a_projected_pos",components:3,type:"Float32"}],4);Is([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Qg=Is([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Is([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Zm=Is([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Qf=Is([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function z0(f,u,h){return f.sections.forEach(v=>{v.text=function(w,D,F){const G=D.layout.get("text-transform").evaluate(F,{});return G==="uppercase"?w=w.toLocaleUpperCase():G==="lowercase"&&(w=w.toLocaleLowerCase()),Ds.applyArabicShaping&&(w=Ds.applyArabicShaping(w)),w}(v.text,u,h)}),f}Is([{name:"triangle",components:3,type:"Uint16"}]),Is([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Is([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Is([{type:"Float32",name:"offsetX"}]),Is([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Is([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Rd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var j0,Xm,Jm,$a=24,N0={};function Wy(){return j0||(j0=1,N0.read=function(f,u,h,v,w){var D,F,G=8*w-v-1,Z=(1<<G)-1,ne=Z>>1,ce=-7,Ce=h?w-1:0,Re=h?-1:1,Le=f[u+Ce];for(Ce+=Re,D=Le&(1<<-ce)-1,Le>>=-ce,ce+=G;ce>0;D=256*D+f[u+Ce],Ce+=Re,ce-=8);for(F=D&(1<<-ce)-1,D>>=-ce,ce+=v;ce>0;F=256*F+f[u+Ce],Ce+=Re,ce-=8);if(D===0)D=1-ne;else{if(D===Z)return F?NaN:1/0*(Le?-1:1);F+=Math.pow(2,v),D-=ne}return(Le?-1:1)*F*Math.pow(2,D-v)},N0.write=function(f,u,h,v,w,D){var F,G,Z,ne=8*D-w-1,ce=(1<<ne)-1,Ce=ce>>1,Re=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,Le=v?0:D-1,je=v?1:-1,He=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(G=isNaN(u)?1:0,F=ce):(F=Math.floor(Math.log(u)/Math.LN2),u*(Z=Math.pow(2,-F))<1&&(F--,Z*=2),(u+=F+Ce>=1?Re/Z:Re*Math.pow(2,1-Ce))*Z>=2&&(F++,Z/=2),F+Ce>=ce?(G=0,F=ce):F+Ce>=1?(G=(u*Z-1)*Math.pow(2,w),F+=Ce):(G=u*Math.pow(2,Ce-1)*Math.pow(2,w),F=0));w>=8;f[h+Le]=255&G,Le+=je,G/=256,w-=8);for(F=F<<w|G,ne+=w;ne>0;f[h+Le]=255&F,Le+=je,F/=256,ne-=8);f[h+Le-je]|=128*He}),N0}function G0(){if(Jm)return Xm;Jm=1,Xm=u;var f=Wy();function u(Ke){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Ke)?Ke:new Uint8Array(Ke||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var h=4294967296,v=1/h,w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function D(Ke){return Ke.type===u.Bytes?Ke.readVarint()+Ke.pos:Ke.pos+1}function F(Ke,nt,Ot){return Ot?4294967296*nt+(Ke>>>0):4294967296*(nt>>>0)+(Ke>>>0)}function G(Ke,nt,Ot){var ln=nt<=16383?1:nt<=2097151?2:nt<=268435455?3:Math.floor(Math.log(nt)/(7*Math.LN2));Ot.realloc(ln);for(var Ln=Ot.pos-1;Ln>=Ke;Ln--)Ot.buf[Ln+ln]=Ot.buf[Ln]}function Z(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeVarint(Ke[Ot])}function ne(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeSVarint(Ke[Ot])}function ce(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeFloat(Ke[Ot])}function Ce(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeDouble(Ke[Ot])}function Re(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeBoolean(Ke[Ot])}function Le(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeFixed32(Ke[Ot])}function je(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeSFixed32(Ke[Ot])}function He(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeFixed64(Ke[Ot])}function st(Ke,nt){for(var Ot=0;Ot<Ke.length;Ot++)nt.writeSFixed64(Ke[Ot])}function gt(Ke,nt){return(Ke[nt]|Ke[nt+1]<<8|Ke[nt+2]<<16)+16777216*Ke[nt+3]}function jt(Ke,nt,Ot){Ke[Ot]=nt,Ke[Ot+1]=nt>>>8,Ke[Ot+2]=nt>>>16,Ke[Ot+3]=nt>>>24}function Mt(Ke,nt){return(Ke[nt]|Ke[nt+1]<<8|Ke[nt+2]<<16)+(Ke[nt+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Ke,nt,Ot){for(Ot=Ot||this.length;this.pos<Ot;){var ln=this.readVarint(),Ln=ln>>3,pn=this.pos;this.type=7&ln,Ke(Ln,nt,this),this.pos===pn&&this.skip(ln)}return nt},readMessage:function(Ke,nt){return this.readFields(Ke,nt,this.readVarint()+this.pos)},readFixed32:function(){var Ke=gt(this.buf,this.pos);return this.pos+=4,Ke},readSFixed32:function(){var Ke=Mt(this.buf,this.pos);return this.pos+=4,Ke},readFixed64:function(){var Ke=gt(this.buf,this.pos)+gt(this.buf,this.pos+4)*h;return this.pos+=8,Ke},readSFixed64:function(){var Ke=gt(this.buf,this.pos)+Mt(this.buf,this.pos+4)*h;return this.pos+=8,Ke},readFloat:function(){var Ke=f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Ke},readDouble:function(){var Ke=f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Ke},readVarint:function(Ke){var nt,Ot,ln=this.buf;return nt=127&(Ot=ln[this.pos++]),Ot<128?nt:(nt|=(127&(Ot=ln[this.pos++]))<<7,Ot<128?nt:(nt|=(127&(Ot=ln[this.pos++]))<<14,Ot<128?nt:(nt|=(127&(Ot=ln[this.pos++]))<<21,Ot<128?nt:function(Ln,pn,bn){var Vn,Dn,lr=bn.buf;if(Vn=(112&(Dn=lr[bn.pos++]))>>4,Dn<128||(Vn|=(127&(Dn=lr[bn.pos++]))<<3,Dn<128)||(Vn|=(127&(Dn=lr[bn.pos++]))<<10,Dn<128)||(Vn|=(127&(Dn=lr[bn.pos++]))<<17,Dn<128)||(Vn|=(127&(Dn=lr[bn.pos++]))<<24,Dn<128)||(Vn|=(1&(Dn=lr[bn.pos++]))<<31,Dn<128))return F(Ln,Vn,pn);throw new Error("Expected varint not more than 10 bytes")}(nt|=(15&(Ot=ln[this.pos]))<<28,Ke,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Ke=this.readVarint();return Ke%2==1?(Ke+1)/-2:Ke/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Ke=this.readVarint()+this.pos,nt=this.pos;return this.pos=Ke,Ke-nt>=12&&w?function(Ot,ln,Ln){return w.decode(Ot.subarray(ln,Ln))}(this.buf,nt,Ke):function(Ot,ln,Ln){for(var pn="",bn=ln;bn<Ln;){var Vn,Dn,lr,En=Ot[bn],Wr=null,Nr=En>239?4:En>223?3:En>191?2:1;if(bn+Nr>Ln)break;Nr===1?En<128&&(Wr=En):Nr===2?(192&(Vn=Ot[bn+1]))==128&&(Wr=(31&En)<<6|63&Vn)<=127&&(Wr=null):Nr===3?(Dn=Ot[bn+2],(192&(Vn=Ot[bn+1]))==128&&(192&Dn)==128&&((Wr=(15&En)<<12|(63&Vn)<<6|63&Dn)<=2047||Wr>=55296&&Wr<=57343)&&(Wr=null)):Nr===4&&(Dn=Ot[bn+2],lr=Ot[bn+3],(192&(Vn=Ot[bn+1]))==128&&(192&Dn)==128&&(192&lr)==128&&((Wr=(15&En)<<18|(63&Vn)<<12|(63&Dn)<<6|63&lr)<=65535||Wr>=1114112)&&(Wr=null)),Wr===null?(Wr=65533,Nr=1):Wr>65535&&(Wr-=65536,pn+=String.fromCharCode(Wr>>>10&1023|55296),Wr=56320|1023&Wr),pn+=String.fromCharCode(Wr),bn+=Nr}return pn}(this.buf,nt,Ke)},readBytes:function(){var Ke=this.readVarint()+this.pos,nt=this.buf.subarray(this.pos,Ke);return this.pos=Ke,nt},readPackedVarint:function(Ke,nt){if(this.type!==u.Bytes)return Ke.push(this.readVarint(nt));var Ot=D(this);for(Ke=Ke||[];this.pos<Ot;)Ke.push(this.readVarint(nt));return Ke},readPackedSVarint:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSVarint());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readSVarint());return Ke},readPackedBoolean:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readBoolean());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readBoolean());return Ke},readPackedFloat:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFloat());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readFloat());return Ke},readPackedDouble:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readDouble());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readDouble());return Ke},readPackedFixed32:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFixed32());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readFixed32());return Ke},readPackedSFixed32:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSFixed32());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readSFixed32());return Ke},readPackedFixed64:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readFixed64());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readFixed64());return Ke},readPackedSFixed64:function(Ke){if(this.type!==u.Bytes)return Ke.push(this.readSFixed64());var nt=D(this);for(Ke=Ke||[];this.pos<nt;)Ke.push(this.readSFixed64());return Ke},skip:function(Ke){var nt=7&Ke;if(nt===u.Varint)for(;this.buf[this.pos++]>127;);else if(nt===u.Bytes)this.pos=this.readVarint()+this.pos;else if(nt===u.Fixed32)this.pos+=4;else{if(nt!==u.Fixed64)throw new Error("Unimplemented type: "+nt);this.pos+=8}},writeTag:function(Ke,nt){this.writeVarint(Ke<<3|nt)},realloc:function(Ke){for(var nt=this.length||16;nt<this.pos+Ke;)nt*=2;if(nt!==this.length){var Ot=new Uint8Array(nt);Ot.set(this.buf),this.buf=Ot,this.length=nt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Ke){this.realloc(4),jt(this.buf,Ke,this.pos),this.pos+=4},writeSFixed32:function(Ke){this.realloc(4),jt(this.buf,Ke,this.pos),this.pos+=4},writeFixed64:function(Ke){this.realloc(8),jt(this.buf,-1&Ke,this.pos),jt(this.buf,Math.floor(Ke*v),this.pos+4),this.pos+=8},writeSFixed64:function(Ke){this.realloc(8),jt(this.buf,-1&Ke,this.pos),jt(this.buf,Math.floor(Ke*v),this.pos+4),this.pos+=8},writeVarint:function(Ke){(Ke=+Ke||0)>268435455||Ke<0?function(nt,Ot){var ln,Ln;if(nt>=0?(ln=nt%4294967296|0,Ln=nt/4294967296|0):(Ln=~(-nt/4294967296),4294967295^(ln=~(-nt%4294967296))?ln=ln+1|0:(ln=0,Ln=Ln+1|0)),nt>=18446744073709552e3||nt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ot.realloc(10),function(pn,bn,Vn){Vn.buf[Vn.pos++]=127&pn|128,pn>>>=7,Vn.buf[Vn.pos++]=127&pn|128,pn>>>=7,Vn.buf[Vn.pos++]=127&pn|128,pn>>>=7,Vn.buf[Vn.pos++]=127&pn|128,Vn.buf[Vn.pos]=127&(pn>>>=7)}(ln,0,Ot),function(pn,bn){var Vn=(7&pn)<<4;bn.buf[bn.pos++]|=Vn|((pn>>>=3)?128:0),pn&&(bn.buf[bn.pos++]=127&pn|((pn>>>=7)?128:0),pn&&(bn.buf[bn.pos++]=127&pn|((pn>>>=7)?128:0),pn&&(bn.buf[bn.pos++]=127&pn|((pn>>>=7)?128:0),pn&&(bn.buf[bn.pos++]=127&pn|((pn>>>=7)?128:0),pn&&(bn.buf[bn.pos++]=127&pn)))))}(Ln,Ot)}(Ke,this):(this.realloc(4),this.buf[this.pos++]=127&Ke|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=127&(Ke>>>=7)|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=127&(Ke>>>=7)|(Ke>127?128:0),Ke<=127||(this.buf[this.pos++]=Ke>>>7&127))))},writeSVarint:function(Ke){this.writeVarint(Ke<0?2*-Ke-1:2*Ke)},writeBoolean:function(Ke){this.writeVarint(!!Ke)},writeString:function(Ke){Ke=String(Ke),this.realloc(4*Ke.length),this.pos++;var nt=this.pos;this.pos=function(ln,Ln,pn){for(var bn,Vn,Dn=0;Dn<Ln.length;Dn++){if((bn=Ln.charCodeAt(Dn))>55295&&bn<57344){if(!Vn){bn>56319||Dn+1===Ln.length?(ln[pn++]=239,ln[pn++]=191,ln[pn++]=189):Vn=bn;continue}if(bn<56320){ln[pn++]=239,ln[pn++]=191,ln[pn++]=189,Vn=bn;continue}bn=Vn-55296<<10|bn-56320|65536,Vn=null}else Vn&&(ln[pn++]=239,ln[pn++]=191,ln[pn++]=189,Vn=null);bn<128?ln[pn++]=bn:(bn<2048?ln[pn++]=bn>>6|192:(bn<65536?ln[pn++]=bn>>12|224:(ln[pn++]=bn>>18|240,ln[pn++]=bn>>12&63|128),ln[pn++]=bn>>6&63|128),ln[pn++]=63&bn|128)}return pn}(this.buf,Ke,this.pos);var Ot=this.pos-nt;Ot>=128&&G(nt,Ot,this),this.pos=nt-1,this.writeVarint(Ot),this.pos+=Ot},writeFloat:function(Ke){this.realloc(4),f.write(this.buf,Ke,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Ke){this.realloc(8),f.write(this.buf,Ke,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Ke){var nt=Ke.length;this.writeVarint(nt),this.realloc(nt);for(var Ot=0;Ot<nt;Ot++)this.buf[this.pos++]=Ke[Ot]},writeRawMessage:function(Ke,nt){this.pos++;var Ot=this.pos;Ke(nt,this);var ln=this.pos-Ot;ln>=128&&G(Ot,ln,this),this.pos=Ot-1,this.writeVarint(ln),this.pos+=ln},writeMessage:function(Ke,nt,Ot){this.writeTag(Ke,u.Bytes),this.writeRawMessage(nt,Ot)},writePackedVarint:function(Ke,nt){nt.length&&this.writeMessage(Ke,Z,nt)},writePackedSVarint:function(Ke,nt){nt.length&&this.writeMessage(Ke,ne,nt)},writePackedBoolean:function(Ke,nt){nt.length&&this.writeMessage(Ke,Re,nt)},writePackedFloat:function(Ke,nt){nt.length&&this.writeMessage(Ke,ce,nt)},writePackedDouble:function(Ke,nt){nt.length&&this.writeMessage(Ke,Ce,nt)},writePackedFixed32:function(Ke,nt){nt.length&&this.writeMessage(Ke,Le,nt)},writePackedSFixed32:function(Ke,nt){nt.length&&this.writeMessage(Ke,je,nt)},writePackedFixed64:function(Ke,nt){nt.length&&this.writeMessage(Ke,He,nt)},writePackedSFixed64:function(Ke,nt){nt.length&&this.writeMessage(Ke,st,nt)},writeBytesField:function(Ke,nt){this.writeTag(Ke,u.Bytes),this.writeBytes(nt)},writeFixed32Field:function(Ke,nt){this.writeTag(Ke,u.Fixed32),this.writeFixed32(nt)},writeSFixed32Field:function(Ke,nt){this.writeTag(Ke,u.Fixed32),this.writeSFixed32(nt)},writeFixed64Field:function(Ke,nt){this.writeTag(Ke,u.Fixed64),this.writeFixed64(nt)},writeSFixed64Field:function(Ke,nt){this.writeTag(Ke,u.Fixed64),this.writeSFixed64(nt)},writeVarintField:function(Ke,nt){this.writeTag(Ke,u.Varint),this.writeVarint(nt)},writeSVarintField:function(Ke,nt){this.writeTag(Ke,u.Varint),this.writeSVarint(nt)},writeStringField:function(Ke,nt){this.writeTag(Ke,u.Bytes),this.writeString(nt)},writeFloatField:function(Ke,nt){this.writeTag(Ke,u.Fixed32),this.writeFloat(nt)},writeDoubleField:function(Ke,nt){this.writeTag(Ke,u.Fixed64),this.writeDouble(nt)},writeBooleanField:function(Ke,nt){this.writeVarintField(Ke,!!nt)}},Xm}var e0=d(G0());const Dh=3;function Qy(f,u,h){f===1&&h.readMessage(Bp,u)}function Bp(f,u,h){if(f===3){const{id:v,bitmap:w,width:D,height:F,left:G,top:Z,advance:ne}=h.readMessage(t0,{});u.push({id:v,bitmap:new Io({width:D+2*Dh,height:F+2*Dh},w),metrics:{width:D,height:F,left:G,top:Z,advance:ne}})}}function t0(f,u,h){f===1?u.id=h.readVarint():f===2?u.bitmap=h.readBytes():f===3?u.width=h.readVarint():f===4?u.height=h.readVarint():f===5?u.left=h.readSVarint():f===6?u.top=h.readSVarint():f===7&&(u.advance=h.readVarint())}const ol=Dh;function qg(f){let u=0,h=0;for(const F of f)u+=F.w*F.h,h=Math.max(h,F.w);f.sort((F,G)=>G.h-F.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),h),h:1/0}];let w=0,D=0;for(const F of f)for(let G=v.length-1;G>=0;G--){const Z=v[G];if(!(F.w>Z.w||F.h>Z.h)){if(F.x=Z.x,F.y=Z.y,D=Math.max(D,F.y+F.h),w=Math.max(w,F.x+F.w),F.w===Z.w&&F.h===Z.h){const ne=v.pop();G<v.length&&(v[G]=ne)}else F.h===Z.h?(Z.x+=F.w,Z.w-=F.w):F.w===Z.w?(Z.y+=F.h,Z.h-=F.h):(v.push({x:Z.x+F.w,y:Z.y,w:Z.w-F.w,h:F.h}),Z.y+=F.h,Z.h-=F.h);break}}return{w,h:D,fill:u/(w*D)||0}}const hA=1;class W0{constructor(u,{pixelRatio:h,version:v,stretchX:w,stretchY:D,content:F,textFitWidth:G,textFitHeight:Z}){this.paddedRect=u,this.pixelRatio=h,this.stretchX=w,this.stretchY=D,this.content=F,this.version=v,this.textFitWidth=G,this.textFitHeight=Z}get tl(){return[this.paddedRect.x+hA,this.paddedRect.y+hA]}get br(){return[this.paddedRect.x+this.paddedRect.w-hA,this.paddedRect.y+this.paddedRect.h-hA]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*hA)/this.pixelRatio,(this.paddedRect.h-2*hA)/this.pixelRatio]}}class Yg{constructor(u,h){const v={},w={};this.haveRenderCallbacks=[];const D=[];this.addImages(u,v,D),this.addImages(h,w,D);const{w:F,h:G}=qg(D),Z=new Hu({width:F||1,height:G||1});for(const ne in u){const ce=u[ne],Ce=v[ne].paddedRect;Hu.copy(ce.data,Z,{x:0,y:0},{x:Ce.x+hA,y:Ce.y+hA},ce.data)}for(const ne in h){const ce=h[ne],Ce=w[ne].paddedRect,Re=Ce.x+hA,Le=Ce.y+hA,je=ce.data.width,He=ce.data.height;Hu.copy(ce.data,Z,{x:0,y:0},{x:Re,y:Le},ce.data),Hu.copy(ce.data,Z,{x:0,y:He-1},{x:Re,y:Le-1},{width:je,height:1}),Hu.copy(ce.data,Z,{x:0,y:0},{x:Re,y:Le+He},{width:je,height:1}),Hu.copy(ce.data,Z,{x:je-1,y:0},{x:Re-1,y:Le},{width:1,height:He}),Hu.copy(ce.data,Z,{x:0,y:0},{x:Re+je,y:Le},{width:1,height:He})}this.image=Z,this.iconPositions=v,this.patternPositions=w}addImages(u,h,v){for(const w in u){const D=u[w],F={x:0,y:0,w:D.data.width+2*hA,h:D.data.height+2*hA};v.push(F),h[w]=new W0(F,D),D.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(u,h){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in u.updatedImages)this.patchUpdatedImage(this.iconPositions[v],u.getImage(v),h),this.patchUpdatedImage(this.patternPositions[v],u.getImage(v),h)}patchUpdatedImage(u,h,v){if(!u||!h||u.version===h.version)return;u.version=h.version;const[w,D]=u.tl;v.update(h.data,void 0,{x:w,y:D})}}var Lh;fr("ImagePosition",W0),fr("ImageAtlas",Yg),a.ai=void 0,(Lh=a.ai||(a.ai={}))[Lh.none=0]="none",Lh[Lh.horizontal=1]="horizontal",Lh[Lh.vertical=2]="vertical",Lh[Lh.horizontalOnly=3]="horizontalOnly";const Op=-17;class pm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,h){const v=new pm;return v.scale=u||1,v.fontStack=h,v}static forImage(u){const h=new pm;return h.imageName=u,h}}class Zu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,h){const v=new Zu;for(let w=0;w<u.sections.length;w++){const D=u.sections[w];D.image?v.addImageSection(D):v.addTextSection(D,h)}return v}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let h="";for(let v=0;v<u.length;v++){const w=u.charCodeAt(v+1)||null,D=u.charCodeAt(v-1)||null;h+=w&&Cc(w)&&!Rd[u[v+1]]||D&&Cc(D)&&!Rd[u[v-1]]||!Rd[u[v]]?u[v]:Rd[u[v]]}return h}(this.text)}trim(){let u=0;for(let v=0;v<this.text.length&&n0[this.text.charCodeAt(v)];v++)u++;let h=this.text.length;for(let v=this.text.length-1;v>=0&&v>=u&&n0[this.text.charCodeAt(v)];v--)h--;this.text=this.text.substring(u,h),this.sectionIndex=this.sectionIndex.slice(u,h)}substring(u,h){const v=new Zu;return v.text=this.text.substring(u,h),v.sectionIndex=this.sectionIndex.slice(u,h),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,h)=>Math.max(u,this.sections[h].scale),0)}addTextSection(u,h){this.text+=u.text,this.sections.push(pm.forText(u.scale,u.fontStack||h));const v=this.sections.length-1;for(let w=0;w<u.text.length;++w)this.sectionIndex.push(v)}addImageSection(u){const h=u.image?u.image.name:"";if(h.length===0)return void Je("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(pm.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function qf(f,u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je){const He=Zu.fromFeature(f,w);let st;Ce===a.ai.vertical&&He.verticalizePunctuation();const{processBidirectionalText:gt,processStyledBidirectionalText:jt}=Ds;if(gt&&He.sections.length===1){st=[];const nt=gt(He.toString(),gm(He,ne,D,u,v,Le));for(const Ot of nt){const ln=new Zu;ln.text=Ot,ln.sections=He.sections;for(let Ln=0;Ln<Ot.length;Ln++)ln.sectionIndex.push(0);st.push(ln)}}else if(jt){st=[];const nt=jt(He.text,He.sectionIndex,gm(He,ne,D,u,v,Le));for(const Ot of nt){const ln=new Zu;ln.text=Ot[0],ln.sectionIndex=Ot[1],ln.sections=He.sections,st.push(ln)}}else st=function(nt,Ot){const ln=[],Ln=nt.text;let pn=0;for(const bn of Ot)ln.push(nt.substring(pn,bn)),pn=bn;return pn<Ln.length&&ln.push(nt.substring(pn,Ln.length)),ln}(He,gm(He,ne,D,u,v,Le));const Mt=[],Ke={positionedLines:Mt,text:He.toString(),top:ce[1],bottom:ce[1],left:ce[0],right:ce[0],writingMode:Ce,iconsInText:!1,verticalizable:!1};return function(nt,Ot,ln,Ln,pn,bn,Vn,Dn,lr,En,Wr,Nr){let Qr=0,ei=Op,Ko=0,al=0;const $l=Dn==="right"?1:Dn==="left"?0:.5;let Xu=0;for(const wl of pn){wl.trim();const cu=wl.getMaxScale(),DA=(cu-1)*$a,LA={positionedGlyphs:[],lineOffset:0};nt.positionedLines[Xu]=LA;const uc=LA.positionedGlyphs;let du=0;if(!wl.length()){ei+=bn,++Xu;continue}for(let kc=0;kc<wl.length();kc++){const Do=wl.getSection(kc),mA=wl.getSectionIndex(kc),Va=wl.getCharCode(kc);let ll=0,Bu=null,wm=null,td=null,Z0=$a;const Ah=!(lr===a.ai.horizontal||!Wr&&!AA(Va)||Wr&&(n0[Va]||(uh=Va,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(uh)))));if(Do.imageName){const nd=Ln[Do.imageName];if(!nd)continue;td=Do.imageName,nt.iconsInText=nt.iconsInText||!0,wm=nd.paddedRect;const Ju=nd.displaySize;Do.scale=Do.scale*$a/Nr,Bu={width:Ju[0],height:Ju[1],left:hA,top:-3,advance:Ah?Ju[1]:Ju[0]},ll=DA+($a-Ju[1]*Do.scale),Z0=Bu.advance;const Ld=Ah?Ju[0]*Do.scale-$a*cu:Ju[1]*Do.scale-$a*cu;Ld>0&&Ld>du&&(du=Ld)}else{const nd=ln[Do.fontStack],Ju=nd&&nd[Va];if(Ju&&Ju.rect)wm=Ju.rect,Bu=Ju.metrics;else{const Ld=Ot[Do.fontStack],Hf=Ld&&Ld[Va];if(!Hf)continue;Bu=Hf.metrics}ll=(cu-Do.scale)*$a}Ah?(nt.verticalizable=!0,uc.push({glyph:Va,imageName:td,x:Qr,y:ei+ll,vertical:Ah,scale:Do.scale,fontStack:Do.fontStack,sectionIndex:mA,metrics:Bu,rect:wm}),Qr+=Z0*Do.scale+En):(uc.push({glyph:Va,imageName:td,x:Qr,y:ei+ll,vertical:Ah,scale:Do.scale,fontStack:Do.fontStack,sectionIndex:mA,metrics:Bu,rect:wm}),Qr+=Bu.advance*Do.scale+En)}uc.length!==0&&(Ko=Math.max(Qr-En,Ko),Vg(uc,0,uc.length-1,$l,du)),Qr=0;const Dd=bn*cu+du;LA.lineOffset=Math.max(du,DA),ei+=Dd,al=Math.max(Dd,al),++Xu}var uh;const lc=ei-Op,{horizontalAlign:Eu,verticalAlign:pA}=q0(Vn);(function(wl,cu,DA,LA,uc,du,Dd,kc,Do){const mA=(cu-DA)*uc;let Va=0;Va=du!==Dd?-kc*LA-Op:(-LA*Do+.5)*Dd;for(const ll of wl)for(const Bu of ll.positionedGlyphs)Bu.x+=mA,Bu.y+=Va})(nt.positionedLines,$l,Eu,pA,Ko,al,bn,lc,pn.length),nt.top+=-pA*lc,nt.bottom=nt.top+lc,nt.left+=-Eu*Ko,nt.right=nt.left+Ko}(Ke,u,h,v,st,F,G,Z,Ce,ne,Re,je),!function(nt){for(const Ot of nt)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(Mt)&&Ke}const n0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Kd={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},r0={40:!0};function gf(f,u,h,v,w,D){if(u.imageName){const F=v[u.imageName];return F?F.displaySize[0]*u.scale*$a/D+w:0}{const F=h[u.fontStack],G=F&&F[f];return G?G.metrics.advance*u.scale+w:0}}function mm(f,u,h,v){const w=Math.pow(f-u,2);return v?f<u?w/2:2*w:w+Math.abs(h)*h}function Q0(f,u,h){let v=0;return f===10&&(v-=1e4),h&&(v+=150),f!==40&&f!==65288||(v+=50),u!==41&&u!==65289||(v+=50),v}function i0(f,u,h,v,w,D){let F=null,G=mm(u,h,w,D);for(const Z of v){const ne=mm(u-Z.x,h,w,D)+Z.badness;ne<=G&&(F=Z,G=ne)}return{index:f,x:u,priorBreak:F,badness:G}}function $g(f){return f?$g(f.priorBreak).concat(f.index):[]}function gm(f,u,h,v,w,D){if(!f)return[];const F=[],G=function(Ce,Re,Le,je,He,st){let gt=0;for(let jt=0;jt<Ce.length();jt++){const Mt=Ce.getSection(jt);gt+=gf(Ce.getCharCode(jt),Mt,je,He,Re,st)}return gt/Math.max(1,Math.ceil(gt/Le))}(f,u,h,v,w,D),Z=f.text.indexOf("")>=0;let ne=0;for(let Ce=0;Ce<f.length();Ce++){const Re=f.getSection(Ce),Le=f.getCharCode(Ce);if(n0[Le]||(ne+=gf(Le,Re,v,w,u,D)),Ce<f.length()-1){const je=!((ce=Le)<11904)&&(!!Mi["CJK Compatibility Forms"](ce)||!!Mi["CJK Compatibility"](ce)||!!Mi["CJK Strokes"](ce)||!!Mi["CJK Symbols and Punctuation"](ce)||!!Mi["Enclosed CJK Letters and Months"](ce)||!!Mi["Halfwidth and Fullwidth Forms"](ce)||!!Mi["Ideographic Description Characters"](ce)||!!Mi["Vertical Forms"](ce)||nc.test(String.fromCodePoint(ce)));(Kd[Le]||je||Re.imageName||Ce!==f.length()-2&&r0[f.getCharCode(Ce+1)])&&F.push(i0(Ce+1,ne,G,F,Q0(Le,f.getCharCode(Ce+1),je&&Z),!1))}}var ce;return $g(i0(f.length(),ne,G,F,0,!0))}function q0(f){let u=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:u,verticalAlign:h}}function Vg(f,u,h,v,w){if(!v&&!w)return;const D=f[h],F=(f[h].x+D.metrics.advance*D.scale)*v;for(let G=u;G<=h;G++)f[G].x-=F,f[G].y+=w}function Hg(f,u,h){const{horizontalAlign:v,verticalAlign:w}=q0(h),D=u[0]-f.displaySize[0]*v,F=u[1]-f.displaySize[1]*w;return{image:f,top:F,bottom:F+f.displaySize[1],left:D,right:D+f.displaySize[0]}}function ym(f){var u,h;let v=f.left,w=f.top,D=f.right-v,F=f.bottom-w;const G=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",Z=(h=f.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",ne=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(Z==="proportional"){if(G==="stretchOnly"&&D/F<ne||G==="proportional"){const ce=Math.ceil(F*ne);v*=ce/D,D=ce}}else if(G==="proportional"&&Z==="stretchOnly"&&ne!==0&&D/F>ne){const ce=Math.ceil(D/ne);w*=ce/F,F=ce}return{x1:v,y1:w,x2:v+D,y2:w+F}}function vm(f,u,h,v,w,D){const F=f.image;let G;if(F.content){const st=F.content,gt=F.pixelRatio||1;G=[st[0]/gt,st[1]/gt,F.displaySize[0]-st[2]/gt,F.displaySize[1]-st[3]/gt]}const Z=u.left*D,ne=u.right*D;let ce,Ce,Re,Le;h==="width"||h==="both"?(Le=w[0]+Z-v[3],Ce=w[0]+ne+v[1]):(Le=w[0]+(Z+ne-F.displaySize[0])/2,Ce=Le+F.displaySize[0]);const je=u.top*D,He=u.bottom*D;return h==="height"||h==="both"?(ce=w[1]+je-v[0],Re=w[1]+He+v[2]):(ce=w[1]+(je+He-F.displaySize[1])/2,Re=ce+F.displaySize[1]),{image:F,top:ce,right:Ce,bottom:Re,left:Le,collisionPadding:G}}const Ip=255,ed=128,Fh=Ip*ed;function o0(f,u){const{expression:h}=u;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Zo(f+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:w}=h;let D=0;for(;D<v.length&&v[D]<=f;)D++;D=Math.max(0,D-1);let F=D;for(;F<v.length&&v[F]<f+1;)F++;F=Math.min(v.length-1,F);const G=v[D],Z=v[F];return h.kind==="composite"?{kind:"composite",minZoom:G,maxZoom:Z,interpolationType:w}:{kind:"camera",minZoom:G,maxZoom:Z,minSize:h.evaluate(new Zo(G)),maxSize:h.evaluate(new Zo(Z)),interpolationType:w}}}function Yf(f,u,h){let v="never";const w=f.get(u);return w?v=w:f.get(h)&&(v="always"),v}const s0=Kl.VectorTileFeature.types,a0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _m(f,u,h,v,w,D,F,G,Z,ne,ce,Ce,Re){const Le=G?Math.min(Fh,Math.round(G[0])):0,je=G?Math.min(Fh,Math.round(G[1])):0;f.emplaceBack(u,h,Math.round(32*v),Math.round(32*w),D,F,(Le<<1)+(Z?1:0),je,16*ne,16*ce,256*Ce,256*Re)}function Y0(f,u,h){f.emplaceBack(u.x,u.y,h),f.emplaceBack(u.x,u.y,h),f.emplaceBack(u.x,u.y,h),f.emplaceBack(u.x,u.y,h)}function l0(f){for(const u of f.sections)if(Ga(u.text))return!0;return!1}class kp{constructor(u){this.layoutVertexArray=new Ft,this.indexArray=new _n,this.programConfigurations=u,this.segments=new wn,this.dynamicLayoutVertexArray=new Tt,this.opacityVertexArray=new Jt,this.hasVisibleVertices=!1,this.placedSymbolArray=new j}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,h,v,w){this.isEmpty()||(v&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Gy.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,mf.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,a0,!0),this.opacityVertexBuffer.itemSize=1),(v||w)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fr("SymbolBuffers",kp);class $f{constructor(u,h,v){this.layoutVertexArray=new u,this.layoutAttributes=h,this.indexArray=new v,this.segments=new wn,this.collisionVertexArray=new vn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Qg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fr("CollisionBuffers",$f);class Tp{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(F=>F.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=o0(this.zoom,h["text-size"]),this.iconSizeData=o0(this.zoom,h["icon-size"]);const v=this.layers[0].layout,w=v.get("symbol-sort-key"),D=v.get("symbol-z-order");this.canOverlap=Yf(v,"text-overlap","text-allow-overlap")!=="never"||Yf(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=D!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(D==="viewport-y"||D==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(F=>a.ai[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=u.sourceID}createArrays(){this.text=new kp(new nl(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new kp(new nl(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new se,this.lineVertexArray=new xe,this.symbolInstances=new te,this.textAnchorOffsets=new ke}calculateGlyphDependencies(u,h,v,w,D){for(let F=0;F<u.length;F++)if(h[u.charCodeAt(F)]=!0,(v||w)&&D){const G=Rd[u.charAt(F)];G&&(h[G.charCodeAt(0)]=!0)}}populate(u,h,v){const w=this.layers[0],D=w.layout,F=D.get("text-font"),G=D.get("text-field"),Z=D.get("icon-image"),ne=(G.value.kind!=="constant"||G.value.value instanceof ls&&!G.value.value.isEmpty()||G.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),ce=Z.value.kind!=="constant"||!!Z.value.value||Object.keys(Z.parameters).length>0,Ce=D.get("symbol-sort-key");if(this.features=[],!ne&&!ce)return;const Re=h.iconDependencies,Le=h.glyphDependencies,je=h.availableImages,He=new Zo(this.zoom);for(const{feature:st,id:gt,index:jt,sourceLayerIndex:Mt}of u){const Ke=w._featureFilter.needGeometry,nt=ic(st,Ke);if(!w._featureFilter.filter(He,nt,v))continue;let Ot,ln;if(Ke||(nt.geometry=Sd(st)),ne){const pn=w.getValueAndResolveTokens("text-field",nt,v,je),bn=ls.factory(pn),Vn=this.hasRTLText=this.hasRTLText||l0(bn);(!Vn||Ds.getRTLTextPluginStatus()==="unavailable"||Vn&&Ds.isParsed())&&(Ot=z0(bn,w,nt))}if(ce){const pn=w.getValueAndResolveTokens("icon-image",nt,v,je);ln=pn instanceof So?pn:So.fromString(pn)}if(!Ot&&!ln)continue;const Ln=this.sortFeaturesByKey?Ce.evaluate(nt,{},v):void 0;if(this.features.push({id:gt,text:Ot,icon:ln,index:jt,sourceLayerIndex:Mt,geometry:nt.geometry,properties:st.properties,type:s0[st.type],sortKey:Ln}),ln&&(Re[ln.name]=!0),Ot){const pn=F.evaluate(nt,{},v).join(","),bn=D.get("text-rotation-alignment")!=="viewport"&&D.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const Vn of Ot.sections)if(Vn.image)Re[Vn.image.name]=!0;else{const Dn=Cd(Ot.toString()),lr=Vn.fontStack||pn,En=Le[lr]=Le[lr]||{};this.calculateGlyphDependencies(Vn.text,En,bn,this.allowVerticalPlacement,Dn)}}}D.get("symbol-placement")==="line"&&(this.features=function(st){const gt={},jt={},Mt=[];let Ke=0;function nt(pn){Mt.push(st[pn]),Ke++}function Ot(pn,bn,Vn){const Dn=jt[pn];return delete jt[pn],jt[bn]=Dn,Mt[Dn].geometry[0].pop(),Mt[Dn].geometry[0]=Mt[Dn].geometry[0].concat(Vn[0]),Dn}function ln(pn,bn,Vn){const Dn=gt[bn];return delete gt[bn],gt[pn]=Dn,Mt[Dn].geometry[0].shift(),Mt[Dn].geometry[0]=Vn[0].concat(Mt[Dn].geometry[0]),Dn}function Ln(pn,bn,Vn){const Dn=Vn?bn[0][bn[0].length-1]:bn[0][0];return`${pn}:${Dn.x}:${Dn.y}`}for(let pn=0;pn<st.length;pn++){const bn=st[pn],Vn=bn.geometry,Dn=bn.text?bn.text.toString():null;if(!Dn){nt(pn);continue}const lr=Ln(Dn,Vn),En=Ln(Dn,Vn,!0);if(lr in jt&&En in gt&&jt[lr]!==gt[En]){const Wr=ln(lr,En,Vn),Nr=Ot(lr,En,Mt[Wr].geometry);delete gt[lr],delete jt[En],jt[Ln(Dn,Mt[Nr].geometry,!0)]=Nr,Mt[Wr].geometry=null}else lr in jt?Ot(lr,En,Vn):En in gt?ln(lr,En,Vn):(nt(pn),gt[lr]=Ke-1,jt[En]=Ke-1)}return Mt.filter(pn=>pn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((st,gt)=>st.sortKey-gt.sortKey)}update(u,h,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,h,this.layers,v),this.icon.programConfigurations.updatePaintArrays(u,h,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,h){const v=this.lineVertexArray.length;if(u.segment!==void 0){let w=u.dist(h[u.segment+1]),D=u.dist(h[u.segment]);const F={};for(let G=u.segment+1;G<h.length;G++)F[G]={x:h[G].x,y:h[G].y,tileUnitDistanceFromAnchor:w},G<h.length-1&&(w+=h[G+1].dist(h[G]));for(let G=u.segment||0;G>=0;G--)F[G]={x:h[G].x,y:h[G].y,tileUnitDistanceFromAnchor:D},G>0&&(D+=h[G-1].dist(h[G]));for(let G=0;G<h.length;G++){const Z=F[G];this.lineVertexArray.emplaceBack(Z.x,Z.y,Z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(u,h,v,w,D,F,G,Z,ne,ce,Ce,Re){const Le=u.indexArray,je=u.layoutVertexArray,He=u.segments.prepareSegment(4*h.length,je,Le,this.canOverlap?F.sortKey:void 0),st=this.glyphOffsetArray.length,gt=He.vertexLength,jt=this.allowVerticalPlacement&&G===a.ai.vertical?Math.PI/2:0,Mt=F.text&&F.text.sections;for(let Ke=0;Ke<h.length;Ke++){const{tl:nt,tr:Ot,bl:ln,br:Ln,tex:pn,pixelOffsetTL:bn,pixelOffsetBR:Vn,minFontScaleX:Dn,minFontScaleY:lr,glyphOffset:En,isSDF:Wr,sectionIndex:Nr}=h[Ke],Qr=He.vertexLength,ei=En[1];_m(je,Z.x,Z.y,nt.x,ei+nt.y,pn.x,pn.y,v,Wr,bn.x,bn.y,Dn,lr),_m(je,Z.x,Z.y,Ot.x,ei+Ot.y,pn.x+pn.w,pn.y,v,Wr,Vn.x,bn.y,Dn,lr),_m(je,Z.x,Z.y,ln.x,ei+ln.y,pn.x,pn.y+pn.h,v,Wr,bn.x,Vn.y,Dn,lr),_m(je,Z.x,Z.y,Ln.x,ei+Ln.y,pn.x+pn.w,pn.y+pn.h,v,Wr,Vn.x,Vn.y,Dn,lr),Y0(u.dynamicLayoutVertexArray,Z,jt),Le.emplaceBack(Qr,Qr+2,Qr+1),Le.emplaceBack(Qr+1,Qr+2,Qr+3),He.vertexLength+=4,He.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(En[0]),Ke!==h.length-1&&Nr===h[Ke+1].sectionIndex||u.programConfigurations.populatePaintArrays(je.length,F,F.index,{},Re,Mt&&Mt[Nr])}u.placedSymbolArray.emplaceBack(Z.x,Z.y,st,this.glyphOffsetArray.length-st,gt,ne,ce,Z.segment,v?v[0]:0,v?v[1]:0,w[0],w[1],G,0,!1,0,Ce)}_addCollisionDebugVertex(u,h,v,w,D,F){return h.emplaceBack(0,0),u.emplaceBack(v.x,v.y,w,D,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(u,h,v,w,D,F,G){const Z=D.segments.prepareSegment(4,D.layoutVertexArray,D.indexArray),ne=Z.vertexLength,ce=D.layoutVertexArray,Ce=D.collisionVertexArray,Re=G.anchorX,Le=G.anchorY;this._addCollisionDebugVertex(ce,Ce,F,Re,Le,new k(u,h)),this._addCollisionDebugVertex(ce,Ce,F,Re,Le,new k(v,h)),this._addCollisionDebugVertex(ce,Ce,F,Re,Le,new k(v,w)),this._addCollisionDebugVertex(ce,Ce,F,Re,Le,new k(u,w)),Z.vertexLength+=4;const je=D.indexArray;je.emplaceBack(ne,ne+1),je.emplaceBack(ne+1,ne+2),je.emplaceBack(ne+2,ne+3),je.emplaceBack(ne+3,ne),Z.primitiveLength+=4}addDebugCollisionBoxes(u,h,v,w){for(let D=u;D<h;D++){const F=this.collisionBoxArray.get(D);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,w?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $f(Vt,Zm.members,mn),this.iconCollisionBox=new $f(Vt,Zm.members,mn);for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(u,h,v,w,D,F,G,Z,ne){const ce={};for(let Ce=h;Ce<v;Ce++){const Re=u.get(Ce);ce.textBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.textFeatureIndex=Re.featureIndex;break}for(let Ce=w;Ce<D;Ce++){const Re=u.get(Ce);ce.verticalTextBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.verticalTextFeatureIndex=Re.featureIndex;break}for(let Ce=F;Ce<G;Ce++){const Re=u.get(Ce);ce.iconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.iconFeatureIndex=Re.featureIndex;break}for(let Ce=Z;Ce<ne;Ce++){const Re=u.get(Ce);ce.verticalIconBox={x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,anchorPointX:Re.anchorPointX,anchorPointY:Re.anchorPointY},ce.verticalIconFeatureIndex=Re.featureIndex;break}return ce}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const v=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,h){const v=u.placedSymbolArray.get(h),w=v.vertexStartIndex+4*v.numGlyphs;for(let D=v.vertexStartIndex;D<w;D+=4)u.indexArray.emplaceBack(D,D+2,D+1),u.indexArray.emplaceBack(D+1,D+2,D+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(u),v=Math.cos(u),w=[],D=[],F=[];for(let G=0;G<this.symbolInstances.length;++G){F.push(G);const Z=this.symbolInstances.get(G);w.push(0|Math.round(h*Z.anchorX+v*Z.anchorY)),D.push(Z.featureIndex)}return F.sort((G,Z)=>w[G]-w[Z]||D[Z]-D[G]),F}addToSortKeyRanges(u,h){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===h?v.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const v=this.symbolInstances.get(h);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((w,D,F)=>{w>=0&&F.indexOf(w)===D&&this.addIndicesForPlacedSymbol(this.text,w)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Cm,m;fr("SymbolBucket",Tp,{omit:["layers","collisionBoxArray","features","compareText"]}),Tp.MAX_GLYPHS=65535,Tp.addDynamicAttributes=Y0;var _={get paint(){return m=m||new bs({"icon-opacity":new Hr(Ee.paint_symbol["icon-opacity"]),"icon-color":new Hr(Ee.paint_symbol["icon-color"]),"icon-halo-color":new Hr(Ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hr(Ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hr(Ee.paint_symbol["icon-halo-blur"]),"icon-translate":new hr(Ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new hr(Ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hr(Ee.paint_symbol["text-opacity"]),"text-color":new Hr(Ee.paint_symbol["text-color"],{runtimeType:Br,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Hr(Ee.paint_symbol["text-halo-color"]),"text-halo-width":new Hr(Ee.paint_symbol["text-halo-width"]),"text-halo-blur":new Hr(Ee.paint_symbol["text-halo-blur"]),"text-translate":new hr(Ee.paint_symbol["text-translate"]),"text-translate-anchor":new hr(Ee.paint_symbol["text-translate-anchor"])})},get layout(){return Cm=Cm||new bs({"symbol-placement":new hr(Ee.layout_symbol["symbol-placement"]),"symbol-spacing":new hr(Ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new hr(Ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hr(Ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new hr(Ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new hr(Ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new hr(Ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new hr(Ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new hr(Ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new hr(Ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hr(Ee.layout_symbol["icon-size"]),"icon-text-fit":new hr(Ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new hr(Ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hr(Ee.layout_symbol["icon-image"]),"icon-rotate":new Hr(Ee.layout_symbol["icon-rotate"]),"icon-padding":new Hr(Ee.layout_symbol["icon-padding"]),"icon-keep-upright":new hr(Ee.layout_symbol["icon-keep-upright"]),"icon-offset":new Hr(Ee.layout_symbol["icon-offset"]),"icon-anchor":new Hr(Ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new hr(Ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new hr(Ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new hr(Ee.layout_symbol["text-rotation-alignment"]),"text-field":new Hr(Ee.layout_symbol["text-field"]),"text-font":new Hr(Ee.layout_symbol["text-font"]),"text-size":new Hr(Ee.layout_symbol["text-size"]),"text-max-width":new Hr(Ee.layout_symbol["text-max-width"]),"text-line-height":new hr(Ee.layout_symbol["text-line-height"]),"text-letter-spacing":new Hr(Ee.layout_symbol["text-letter-spacing"]),"text-justify":new Hr(Ee.layout_symbol["text-justify"]),"text-radial-offset":new Hr(Ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new hr(Ee.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Hr(Ee.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Hr(Ee.layout_symbol["text-anchor"]),"text-max-angle":new hr(Ee.layout_symbol["text-max-angle"]),"text-writing-mode":new hr(Ee.layout_symbol["text-writing-mode"]),"text-rotate":new Hr(Ee.layout_symbol["text-rotate"]),"text-padding":new hr(Ee.layout_symbol["text-padding"]),"text-keep-upright":new hr(Ee.layout_symbol["text-keep-upright"]),"text-transform":new Hr(Ee.layout_symbol["text-transform"]),"text-offset":new Hr(Ee.layout_symbol["text-offset"]),"text-allow-overlap":new hr(Ee.layout_symbol["text-allow-overlap"]),"text-overlap":new hr(Ee.layout_symbol["text-overlap"]),"text-ignore-placement":new hr(Ee.layout_symbol["text-ignore-placement"]),"text-optional":new hr(Ee.layout_symbol["text-optional"])})}};class L{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:wr,this.defaultValue=u}evaluate(u){if(u.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(u.formattedSection))return h.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fr("FormatSectionOverride",L,{omit:["defaultValue"]});class W extends su{constructor(u){super(u,_)}recalculate(u,h){if(super.recalculate(u,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const w=[];for(const D of v)w.indexOf(D)<0&&w.push(D);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,h,v,w){const D=this.layout.get(u).evaluate(h,{},v,w),F=this._unevaluatedLayout._values[u];return F.isDataDriven()||jl(F.value)||!D?D:function(G,Z){return Z.replace(/{([^{}]+)}/g,(ne,ce)=>G&&ce in G?String(G[ce]):"")}(h.properties,D)}createBucket(u){return new Tp(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of _.paint.overridableProperties){if(!W.hasPaintOverride(this.layout,u))continue;const h=this.paint.get(u),v=new L(h),w=new vu(v,h.property.specification);let D=null;D=h.value.kind==="constant"||h.value.kind==="source"?new Zd("source",w):new ja("composite",w,h.value.zoomStops),this.paint._values[u]=new gs(h.property,D,h.parameters)}}_handleOverridablePaintPropertyUpdate(u,h,v){return!(!this.layout||h.isDataDriven()||v.isDataDriven())&&W.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,h){const v=u.get("text-field"),w=_.paint.properties[h];let D=!1;const F=G=>{for(const Z of G)if(w.overrides&&w.overrides.hasOverride(Z))return void(D=!0)};if(v.value.kind==="constant"&&v.value.value instanceof ls)F(v.value.value.sections);else if(v.value.kind==="source"){const G=ne=>{D||(ne instanceof fo&&rs(ne.value)===Sa?F(ne.value.sections):ne instanceof cl?F(ne.sections):ne.eachChild(G))},Z=v.value;Z._styleExpression&&G(Z._styleExpression.expression)}return D}}let ae;var ge={get paint(){return ae=ae||new bs({"background-color":new hr(Ee.paint_background["background-color"]),"background-pattern":new rc(Ee.paint_background["background-pattern"]),"background-opacity":new hr(Ee.paint_background["background-opacity"])})}};class Ze extends su{constructor(u){super(u,ge)}}let It;var Gt={get paint(){return It=It||new bs({"raster-opacity":new hr(Ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new hr(Ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new hr(Ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new hr(Ee.paint_raster["raster-brightness-max"]),"raster-saturation":new hr(Ee.paint_raster["raster-saturation"]),"raster-contrast":new hr(Ee.paint_raster["raster-contrast"]),"raster-resampling":new hr(Ee.paint_raster["raster-resampling"]),"raster-fade-duration":new hr(Ee.paint_raster["raster-fade-duration"])})}};class Cn extends su{constructor(u){super(u,Gt)}}class ar extends su{constructor(u){super(u,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class dr{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const $n=63710088e-1;class zr{constructor(u,h){if(isNaN(u)||isNaN(h))throw new Error(`Invalid LngLat object: (${u}, ${h})`);if(this.lng=+u,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zr(Ct(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const h=Math.PI/180,v=this.lat*h,w=u.lat*h,D=Math.sin(v)*Math.sin(w)+Math.cos(v)*Math.cos(w)*Math.cos((u.lng-this.lng)*h);return $n*Math.acos(Math.min(D,1))}static convert(u){if(u instanceof zr)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new zr(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new zr(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ii=2*Math.PI*$n;function li(f){return ii*Math.cos(f*Math.PI/180)}function sl(f){return(180+f)/360}function an(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function Zt(f,u){return f/li(u)}function An(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function yr(f,u){return f*li(An(u))}class ni{constructor(u,h,v=0){this.x=+u,this.y=+h,this.z=+v}static fromLngLat(u,h=0){const v=zr.convert(u);return new ni(sl(v.lng),an(v.lat),Zt(h,v.lat))}toLngLat(){return new zr(360*this.x-180,An(this.y))}toAltitude(){return yr(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ii*(u=An(this.y),1/Math.cos(u*Math.PI/180));var u}}function Ii(f,u,h){var v=2*Math.PI*6378137/256/Math.pow(2,h);return[f*v-2*Math.PI*6378137/2,u*v-2*Math.PI*6378137/2]}class Oi{constructor(u,h,v){if(!function(w,D,F){return!(w<0||w>25||F<0||F>=Math.pow(2,w)||D<0||D>=Math.pow(2,w))}(u,h,v))throw new Error(`x=${h}, y=${v}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=h,this.y=v,this.key=Jo(0,u,u,h,v)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,h,v){const w=(F=this.y,G=this.z,Z=Ii(256*(D=this.x),256*(F=Math.pow(2,G)-F-1),G),ne=Ii(256*(D+1),256*(F+1),G),Z[0]+","+Z[1]+","+ne[0]+","+ne[1]);var D,F,G,Z,ne;const ce=function(Ce,Re,Le){let je,He="";for(let st=Ce;st>0;st--)je=1<<st-1,He+=(Re&je?1:0)+(Le&je?2:0);return He}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,ce).replace(/{bbox-epsg-3857}/g,w)}isChildOf(u){const h=this.z-u.z;return h>0&&u.x===this.x>>h&&u.y===this.y>>h}getTilePoint(u){const h=Math.pow(2,this.z);return new k((u.x*h-this.x)*it,(u.y*h-this.y)*it)}toString(){return`${this.z}/${this.x}/${this.y}`}}class zi{constructor(u,h){this.wrap=u,this.canonical=h,this.key=Jo(u,h.z,h.z,h.x,h.y)}}class Ls{constructor(u,h,v,w,D){if(this.terrainRttPosMatrix32f=null,u<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${v}`);this.overscaledZ=u,this.wrap=h,this.canonical=new Oi(v,+w,+D),this.key=Jo(h,u,v,w,D)}clone(){return new Ls(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-u;return u>this.canonical.z?new Ls(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ls(u,this.wrap,u,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(u,h){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-u;return u>this.canonical.z?Jo(this.wrap*+h,u,this.canonical.z,this.canonical.x,this.canonical.y):Jo(this.wrap*+h,u,u,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const h=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>h&&u.canonical.y===this.canonical.y>>h}children(u){if(this.overscaledZ>=u)return[new Ls(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,v=2*this.canonical.x,w=2*this.canonical.y;return[new Ls(h,this.wrap,h,v,w),new Ls(h,this.wrap,h,v+1,w),new Ls(h,this.wrap,h,v,w+1),new Ls(h,this.wrap,h,v+1,w+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Ls(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Ls(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new zi(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new ni(u.x-this.wrap,u.y))}}function Jo(f,u,h,v,w){(f*=2)<0&&(f=-1*f-1);const D=1<<h;return(D*D*f+D*w+v).toString(36)+h.toString(36)+u.toString(36)}fr("CanonicalTileID",Oi),fr("OverscaledTileID",Ls,{omit:["terrainRttPosMatrix32f"]});class Uh{constructor(u,h,v,w=1,D=1,F=1,G=0){if(this.uid=u,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void Je(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const Z=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=D,this.blueFactor=F,this.baseShift=G;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let ne=0;ne<Z;ne++)this.data[this._idx(-1,ne)]=this.data[this._idx(0,ne)],this.data[this._idx(Z,ne)]=this.data[this._idx(Z-1,ne)],this.data[this._idx(ne,-1)]=this.data[this._idx(ne,0)],this.data[this._idx(ne,Z)]=this.data[this._idx(ne,Z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z-1,0)],this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z-1)],this.data[this._idx(Z,Z)]=this.data[this._idx(Z-1,Z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let ne=0;ne<Z;ne++)for(let ce=0;ce<Z;ce++){const Ce=this.get(ne,ce);Ce>this.max&&(this.max=Ce),Ce<this.min&&(this.min=Ce)}}get(u,h){const v=new Uint8Array(this.data.buffer),w=4*this._idx(u,h);return this.unpack(v[w],v[w+1],v[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,h){if(u<-1||u>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(u+1)}unpack(u,h,v){return u*this.redFactor+h*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new Hu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,h,v){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let w=h*this.dim,D=h*this.dim+this.dim,F=v*this.dim,G=v*this.dim+this.dim;switch(h){case-1:w=D-1;break;case 1:D=w+1}switch(v){case-1:F=G-1;break;case 1:G=F+1}const Z=-h*this.dim,ne=-v*this.dim;for(let ce=F;ce<G;ce++)for(let Ce=w;Ce<D;Ce++)this.data[this._idx(Ce,ce)]=u.data[this._idx(Ce+Z,ce+ne)]}}fr("DEMData",Uh);class Zg{constructor(u){this._stringToNumber={},this._numberToString=[];for(let h=0;h<u.length;h++){const v=u[h];this._stringToNumber[v]=h,this._numberToString[h]=v}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class oC{constructor(u,h,v,w,D){this.type="Feature",this._vectorTileFeature=u,u._z=h,u._x=v,u._y=w,this.properties=u.properties,this.id=D}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(u[h]=this[h]);return u}}class sC{constructor(u,h){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new uA(it,16,0),this.grid3D=new uA(it,16,0),this.featureIndexArray=new Ve,this.promoteId=h}insert(u,h,v,w,D,F){const G=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,w,D);const Z=F?this.grid3D:this.grid;for(let ne=0;ne<h.length;ne++){const ce=h[ne],Ce=[1/0,1/0,-1/0,-1/0];for(let Re=0;Re<ce.length;Re++){const Le=ce[Re];Ce[0]=Math.min(Ce[0],Le.x),Ce[1]=Math.min(Ce[1],Le.y),Ce[2]=Math.max(Ce[2],Le.x),Ce[3]=Math.max(Ce[3],Le.y)}Ce[0]<it&&Ce[1]<it&&Ce[2]>=0&&Ce[3]>=0&&Z.insert(G,Ce[0],Ce[1],Ce[2],Ce[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Kl.VectorTile(new e0(this.rawTileData)).layers,this.sourceLayerCoder=new Zg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,h,v,w){this.loadVTLayers();const D=u.params,F=it/u.tileSize/u.scale,G=HA(D.filter),Z=u.queryGeometry,ne=u.queryPadding*F,ce=lC(Z),Ce=this.grid.query(ce.minX-ne,ce.minY-ne,ce.maxX+ne,ce.maxY+ne),Re=lC(u.cameraQueryGeometry),Le=this.grid3D.query(Re.minX-ne,Re.minY-ne,Re.maxX+ne,Re.maxY+ne,(st,gt,jt,Mt)=>function(Ke,nt,Ot,ln,Ln){for(const bn of Ke)if(nt<=bn.x&&Ot<=bn.y&&ln>=bn.x&&Ln>=bn.y)return!0;const pn=[new k(nt,Ot),new k(nt,Ln),new k(ln,Ln),new k(ln,Ot)];if(Ke.length>2){for(const bn of pn)if(Bc(Ke,bn))return!0}for(let bn=0;bn<Ke.length-1;bn++)if(um(Ke[bn],Ke[bn+1],pn))return!0;return!1}(u.cameraQueryGeometry,st-ne,gt-ne,jt+ne,Mt+ne));for(const st of Le)Ce.push(st);Ce.sort(A3);const je={};let He;for(let st=0;st<Ce.length;st++){const gt=Ce[st];if(gt===He)continue;He=gt;const jt=this.featureIndexArray.get(gt);let Mt=null;this.loadMatchingFeature(je,jt.bucketIndex,jt.sourceLayerIndex,jt.featureIndex,G,D.layers,D.availableImages,h,v,w,(Ke,nt,Ot)=>(Mt||(Mt=Sd(Ke)),nt.queryIntersectsFeature({queryGeometry:Z,feature:Ke,featureState:Ot,geometry:Mt,zoom:this.z,transform:u.transform,pixelsToTileUnits:F,pixelPosMatrix:u.pixelPosMatrix})))}return je}loadMatchingFeature(u,h,v,w,D,F,G,Z,ne,ce,Ce){const Re=this.bucketLayerIDs[h];if(F&&!Re.some(st=>F.has(st)))return;const Le=this.sourceLayerCoder.decode(v),je=this.vtLayers[Le].feature(w);if(D.needGeometry){const st=ic(je,!0);if(!D.filter(new Zo(this.tileID.overscaledZ),st,this.tileID.canonical))return}else if(!D.filter(new Zo(this.tileID.overscaledZ),je))return;const He=this.getId(je,Le);for(let st=0;st<Re.length;st++){const gt=Re[st];if(F&&!F.has(gt))continue;const jt=Z[gt];if(!jt)continue;let Mt={};He&&ce&&(Mt=ce.getState(jt.sourceLayer||"_geojsonTileLayer",He));const Ke=ft({},ne[gt]);Ke.paint=aC(Ke.paint,jt.paint,je,Mt,G),Ke.layout=aC(Ke.layout,jt.layout,je,Mt,G);const nt=!Ce||Ce(je,jt,Mt);if(!nt)continue;const Ot=new oC(je,this.z,this.x,this.y,He);Ot.layer=Ke;let ln=u[gt];ln===void 0&&(ln=u[gt]=[]),ln.push({featureIndex:w,feature:Ot,intersectionZ:nt})}}lookupSymbolFeatures(u,h,v,w,D,F,G,Z){const ne={};this.loadVTLayers();const ce=HA(D);for(const Ce of u)this.loadMatchingFeature(ne,v,w,Ce,ce,F,G,Z,h);return ne}hasLayer(u){for(const h of this.bucketLayerIDs)for(const v of h)if(u===v)return!0;return!1}getId(u,h){var v;let w=u.id;return this.promoteId&&(w=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((v=u.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(w=Number(u.properties.cluster_id))),w}}function aC(f,u,h,v,w){return Kt(f,(D,F)=>{const G=u instanceof da?u.get(F):null;return G&&G.evaluate?G.evaluate(h,v,w):G})}function lC(f){let u=1/0,h=1/0,v=-1/0,w=-1/0;for(const D of f)u=Math.min(u,D.x),h=Math.min(h,D.y),v=Math.max(v,D.x),w=Math.max(w,D.y);return{minX:u,minY:h,maxX:v,maxY:w}}function A3(f,u){return u-f}function uC(f,u,h,v,w){const D=[];for(let F=0;F<f.length;F++){const G=f[F];let Z;for(let ne=0;ne<G.length-1;ne++){let ce=G[ne],Ce=G[ne+1];ce.x<u&&Ce.x<u||(ce.x<u?ce=new k(u,ce.y+(u-ce.x)/(Ce.x-ce.x)*(Ce.y-ce.y))._round():Ce.x<u&&(Ce=new k(u,ce.y+(u-ce.x)/(Ce.x-ce.x)*(Ce.y-ce.y))._round()),ce.y<h&&Ce.y<h||(ce.y<h?ce=new k(ce.x+(h-ce.y)/(Ce.y-ce.y)*(Ce.x-ce.x),h)._round():Ce.y<h&&(Ce=new k(ce.x+(h-ce.y)/(Ce.y-ce.y)*(Ce.x-ce.x),h)._round()),ce.x>=v&&Ce.x>=v||(ce.x>=v?ce=new k(v,ce.y+(v-ce.x)/(Ce.x-ce.x)*(Ce.y-ce.y))._round():Ce.x>=v&&(Ce=new k(v,ce.y+(v-ce.x)/(Ce.x-ce.x)*(Ce.y-ce.y))._round()),ce.y>=w&&Ce.y>=w||(ce.y>=w?ce=new k(ce.x+(w-ce.y)/(Ce.y-ce.y)*(Ce.x-ce.x),w)._round():Ce.y>=w&&(Ce=new k(ce.x+(w-ce.y)/(Ce.y-ce.y)*(Ce.x-ce.x),w)._round()),Z&&ce.equals(Z[Z.length-1])||(Z=[ce],D.push(Z)),Z.push(Ce)))))}}return D}fr("FeatureIndex",sC,{omit:["rawTileData","sourceLayerCoder"]});class Pp extends k{constructor(u,h,v,w){super(u,h),this.angle=v,w!==void 0&&(this.segment=w)}clone(){return new Pp(this.x,this.y,this.angle,this.segment)}}function AC(f,u,h,v,w){if(u.segment===void 0||h===0)return!0;let D=u,F=u.segment+1,G=0;for(;G>-h/2;){if(F--,F<0)return!1;G-=f[F].dist(D),D=f[F]}G+=f[F].dist(f[F+1]),F++;const Z=[];let ne=0;for(;G<h/2;){const ce=f[F],Ce=f[F+1];if(!Ce)return!1;let Re=f[F-1].angleTo(ce)-ce.angleTo(Ce);for(Re=Math.abs((Re+3*Math.PI)%(2*Math.PI)-Math.PI),Z.push({distance:G,angleDelta:Re}),ne+=Re;G-Z[0].distance>v;)ne-=Z.shift().angleDelta;if(ne>w)return!1;F++,G+=ce.dist(Ce)}return!0}function cC(f){let u=0;for(let h=0;h<f.length-1;h++)u+=f[h].dist(f[h+1]);return u}function lh(f,u,h){return f?.6*u*h:0}function dC(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function c3(f,u,h,v,w,D){const F=lh(h,w,D),G=dC(h,v)*D;let Z=0;const ne=cC(f)/2;for(let ce=0;ce<f.length-1;ce++){const Ce=f[ce],Re=f[ce+1],Le=Ce.dist(Re);if(Z+Le>ne){const je=(ne-Z)/Le,He=vi.number(Ce.x,Re.x,je),st=vi.number(Ce.y,Re.y,je),gt=new Pp(He,st,Re.angleTo(Ce),ce);return gt._round(),!F||AC(f,gt,G,F,u)?gt:void 0}Z+=Le}}function bm(f,u,h,v,w,D,F,G,Z){const ne=lh(v,D,F),ce=dC(v,w),Ce=ce*F,Re=f[0].x===0||f[0].x===Z||f[0].y===0||f[0].y===Z;return u-Ce<u/4&&(u=Ce+u/4),vo(f,Re?u/2*G%u:(ce/2+2*D)*F*G%u,u,ne,h,Ce,Re,!1,Z)}function vo(f,u,h,v,w,D,F,G,Z){const ne=D/2,ce=cC(f);let Ce=0,Re=u-h,Le=[];for(let je=0;je<f.length-1;je++){const He=f[je],st=f[je+1],gt=He.dist(st),jt=st.angleTo(He);for(;Re+h<Ce+gt;){Re+=h;const Mt=(Re-Ce)/gt,Ke=vi.number(He.x,st.x,Mt),nt=vi.number(He.y,st.y,Mt);if(Ke>=0&&Ke<Z&&nt>=0&&nt<Z&&Re-ne>=0&&Re+ne<=ce){const Ot=new Pp(Ke,nt,jt,je);Ot._round(),v&&!AC(f,Ot,D,v,w)||Le.push(Ot)}}Ce+=gt}return G||Le.length||F||(Le=vo(f,Ce/2,h,v,w,D,F,!0,Z)),Le}fr("Anchor",Pp);const $0=hA;function Ic(f,u,h,v){const w=[],D=f.image,F=D.pixelRatio,G=D.paddedRect.w-2*$0,Z=D.paddedRect.h-2*$0;let ne={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const ce=D.stretchX||[[0,G]],Ce=D.stretchY||[[0,Z]],Re=(En,Wr)=>En+Wr[1]-Wr[0],Le=ce.reduce(Re,0),je=Ce.reduce(Re,0),He=G-Le,st=Z-je;let gt=0,jt=Le,Mt=0,Ke=je,nt=0,Ot=He,ln=0,Ln=st;if(D.content&&v){const En=D.content,Wr=En[2]-En[0],Nr=En[3]-En[1];(D.textFitWidth||D.textFitHeight)&&(ne=ym(f)),gt=Cl(ce,0,En[0]),Mt=Cl(Ce,0,En[1]),jt=Cl(ce,En[0],En[2]),Ke=Cl(Ce,En[1],En[3]),nt=En[0]-gt,ln=En[1]-Mt,Ot=Wr-jt,Ln=Nr-Ke}const pn=ne.x1,bn=ne.y1,Vn=ne.x2-pn,Dn=ne.y2-bn,lr=(En,Wr,Nr,Qr)=>{const ei=zh(En.stretch-gt,jt,Vn,pn),Ko=Xg(En.fixed-nt,Ot,En.stretch,Le),al=zh(Wr.stretch-Mt,Ke,Dn,bn),$l=Xg(Wr.fixed-ln,Ln,Wr.stretch,je),Xu=zh(Nr.stretch-gt,jt,Vn,pn),uh=Xg(Nr.fixed-nt,Ot,Nr.stretch,Le),lc=zh(Qr.stretch-Mt,Ke,Dn,bn),Eu=Xg(Qr.fixed-ln,Ln,Qr.stretch,je),pA=new k(ei,al),wl=new k(Xu,al),cu=new k(Xu,lc),DA=new k(ei,lc),LA=new k(Ko/F,$l/F),uc=new k(uh/F,Eu/F),du=u*Math.PI/180;if(du){const Do=Math.sin(du),mA=Math.cos(du),Va=[mA,-Do,Do,mA];pA._matMult(Va),wl._matMult(Va),DA._matMult(Va),cu._matMult(Va)}const Dd=En.stretch+En.fixed,kc=Wr.stretch+Wr.fixed;return{tl:pA,tr:wl,bl:DA,br:cu,tex:{x:D.paddedRect.x+$0+Dd,y:D.paddedRect.y+$0+kc,w:Nr.stretch+Nr.fixed-Dd,h:Qr.stretch+Qr.fixed-kc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:LA,pixelOffsetBR:uc,minFontScaleX:Ot/F/Vn,minFontScaleY:Ln/F/Dn,isSDF:h}};if(v&&(D.stretchX||D.stretchY)){const En=hC(ce,He,Le),Wr=hC(Ce,st,je);for(let Nr=0;Nr<En.length-1;Nr++){const Qr=En[Nr],ei=En[Nr+1];for(let Ko=0;Ko<Wr.length-1;Ko++)w.push(lr(Qr,Wr[Ko],ei,Wr[Ko+1]))}}else w.push(lr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:G+1},{fixed:0,stretch:Z+1}));return w}function Cl(f,u,h){let v=0;for(const w of f)v+=Math.max(u,Math.min(h,w[1]))-Math.max(u,Math.min(h,w[0]));return v}function hC(f,u,h){const v=[{fixed:-1,stretch:0}];for(const[w,D]of f){const F=v[v.length-1];v.push({fixed:w-F.stretch,stretch:F.stretch}),v.push({fixed:w-F.stretch,stretch:F.stretch+(D-w)})}return v.push({fixed:u+$0,stretch:h}),v}function zh(f,u,h,v){return f/u*h+v}function Xg(f,u,h,v){return f-u*h/v}class Jg{constructor(u,h,v,w,D,F,G,Z,ne,ce){var Ce;if(this.boxStartIndex=u.length,ne){let Re=F.top,Le=F.bottom;const je=F.collisionPadding;je&&(Re-=je[1],Le+=je[3]);let He=Le-Re;He>0&&(He=Math.max(10,He),this.circleDiameter=He)}else{const Re=!((Ce=F.image)===null||Ce===void 0)&&Ce.content&&(F.image.textFitWidth||F.image.textFitHeight)?ym(F):{x1:F.left,y1:F.top,x2:F.right,y2:F.bottom};Re.y1=Re.y1*G-Z[0],Re.y2=Re.y2*G+Z[2],Re.x1=Re.x1*G-Z[3],Re.x2=Re.x2*G+Z[1];const Le=F.collisionPadding;if(Le&&(Re.x1-=Le[0]*G,Re.y1-=Le[1]*G,Re.x2+=Le[2]*G,Re.y2+=Le[3]*G),ce){const je=new k(Re.x1,Re.y1),He=new k(Re.x2,Re.y1),st=new k(Re.x1,Re.y2),gt=new k(Re.x2,Re.y2),jt=ce*Math.PI/180;je._rotate(jt),He._rotate(jt),st._rotate(jt),gt._rotate(jt),Re.x1=Math.min(je.x,He.x,st.x,gt.x),Re.x2=Math.max(je.x,He.x,st.x,gt.x),Re.y1=Math.min(je.y,He.y,st.y,gt.y),Re.y2=Math.max(je.y,He.y,st.y,gt.y)}u.emplaceBack(h.x,h.y,Re.x1,Re.y1,Re.x2,Re.y2,v,w,D)}this.boxEndIndex=u.length}}class d3{constructor(u=[],h=(v,w)=>v<w?-1:v>w?1:0){if(this.data=u,this.length=this.data.length,this.compare=h,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:h,compare:v}=this,w=h[u];for(;u>0;){const D=u-1>>1,F=h[D];if(v(w,F)>=0)break;h[u]=F,u=D}h[u]=w}_down(u){const{data:h,compare:v}=this,w=this.length>>1,D=h[u];for(;u<w;){let F=1+(u<<1);const G=F+1;if(G<this.length&&v(h[G],h[F])<0&&(F=G),v(h[F],D)>=0)break;h[u]=h[F],u=F}h[u]=D}}function h3(f,u=1,h=!1){let v=1/0,w=1/0,D=-1/0,F=-1/0;const G=f[0];for(let Le=0;Le<G.length;Le++){const je=G[Le];(!Le||je.x<v)&&(v=je.x),(!Le||je.y<w)&&(w=je.y),(!Le||je.x>D)&&(D=je.x),(!Le||je.y>F)&&(F=je.y)}const Z=Math.min(D-v,F-w);let ne=Z/2;const ce=new d3([],f3);if(Z===0)return new k(v,w);for(let Le=v;Le<D;Le+=Z)for(let je=w;je<F;je+=Z)ce.push(new Rp(Le+ne,je+ne,ne,f));let Ce=function(Le){let je=0,He=0,st=0;const gt=Le[0];for(let jt=0,Mt=gt.length,Ke=Mt-1;jt<Mt;Ke=jt++){const nt=gt[jt],Ot=gt[Ke],ln=nt.x*Ot.y-Ot.x*nt.y;He+=(nt.x+Ot.x)*ln,st+=(nt.y+Ot.y)*ln,je+=3*ln}return new Rp(He/je,st/je,0,Le)}(f),Re=ce.length;for(;ce.length;){const Le=ce.pop();(Le.d>Ce.d||!Ce.d)&&(Ce=Le,h&&console.log("found best %d after %d probes",Math.round(1e4*Le.d)/1e4,Re)),Le.max-Ce.d<=u||(ne=Le.h/2,ce.push(new Rp(Le.p.x-ne,Le.p.y-ne,ne,f)),ce.push(new Rp(Le.p.x+ne,Le.p.y-ne,ne,f)),ce.push(new Rp(Le.p.x-ne,Le.p.y+ne,ne,f)),ce.push(new Rp(Le.p.x+ne,Le.p.y+ne,ne,f)),Re+=4)}return h&&(console.log(`num probes: ${Re}`),console.log(`best distance: ${Ce.d}`)),Ce.p}function f3(f,u){return u.max-f.max}function Rp(f,u,h,v){this.p=new k(f,u),this.h=h,this.d=function(w,D){let F=!1,G=1/0;for(let Z=0;Z<D.length;Z++){const ne=D[Z];for(let ce=0,Ce=ne.length,Re=Ce-1;ce<Ce;Re=ce++){const Le=ne[ce],je=ne[Re];Le.y>w.y!=je.y>w.y&&w.x<(je.x-Le.x)*(w.y-Le.y)/(je.y-Le.y)+Le.x&&(F=!F),G=Math.min(G,bp(w,Le,je))}}return(F?1:-1)*Math.sqrt(G)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var fA;a.av=void 0,(fA=a.av||(a.av={}))[fA.center=1]="center",fA[fA.left=2]="left",fA[fA.right=3]="right",fA[fA.top=4]="top",fA[fA.bottom=5]="bottom",fA[fA["top-left"]=6]="top-left",fA[fA["top-right"]=7]="top-right",fA[fA["bottom-left"]=8]="bottom-left",fA[fA["bottom-right"]=9]="bottom-right";const ac=7,e1=Number.POSITIVE_INFINITY;function V0(f,u){return u[1]!==e1?function(h,v,w){let D=0,F=0;switch(v=Math.abs(v),w=Math.abs(w),h){case"top-right":case"top-left":case"top":F=w-ac;break;case"bottom-right":case"bottom-left":case"bottom":F=-w+ac}switch(h){case"top-right":case"bottom-right":case"right":D=-v;break;case"top-left":case"bottom-left":case"left":D=v}return[D,F]}(f,u[0],u[1]):function(h,v){let w=0,D=0;v<0&&(v=0);const F=v/Math.SQRT2;switch(h){case"top-right":case"top-left":D=F-ac;break;case"bottom-right":case"bottom-left":D=-F+ac;break;case"bottom":D=-v+ac;break;case"top":D=v-ac}switch(h){case"top-right":case"bottom-right":w=-F;break;case"top-left":case"bottom-left":w=F;break;case"left":w=v;break;case"right":w=-v}return[w,D]}(f,u[0])}function bl(f,u,h){var v;const w=f.layout,D=(v=w.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(u,{},h);if(D){const G=D.values,Z=[];for(let ne=0;ne<G.length;ne+=2){const ce=Z[ne]=G[ne],Ce=G[ne+1].map(Re=>Re*$a);ce.startsWith("top")?Ce[1]-=ac:ce.startsWith("bottom")&&(Ce[1]+=ac),Z[ne+1]=Ce}return new Rs(Z)}const F=w.get("text-variable-anchor");if(F){let G;G=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(u,{},h)*$a,e1]:w.get("text-offset").evaluate(u,{},h).map(ne=>ne*$a);const Z=[];for(const ne of F)Z.push(ne,V0(ne,G));return new Rs(Z)}return null}function xl(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fC(f,u,h,v,w,D,F,G,Z,ne,ce,Ce){let Re=D.textMaxSize.evaluate(u,{});Re===void 0&&(Re=F);const Le=f.layers[0].layout,je=Le.get("icon-offset").evaluate(u,{},ce),He=mC(h.horizontal),st=F/24,gt=f.tilePixelRatio*st,jt=f.tilePixelRatio*Re/24,Mt=f.tilePixelRatio*G,Ke=f.tilePixelRatio*Le.get("symbol-spacing"),nt=Le.get("text-padding")*f.tilePixelRatio,Ot=function(Nr,Qr,ei,Ko=1){const al=Nr.get("icon-padding").evaluate(Qr,{},ei),$l=al&&al.values;return[$l[0]*Ko,$l[1]*Ko,$l[2]*Ko,$l[3]*Ko]}(Le,u,ce,f.tilePixelRatio),ln=Le.get("text-max-angle")/180*Math.PI,Ln=Le.get("text-rotation-alignment")!=="viewport"&&Le.get("symbol-placement")!=="point",pn=Le.get("icon-rotation-alignment")==="map"&&Le.get("symbol-placement")!=="point",bn=Le.get("symbol-placement"),Vn=Ke/2,Dn=Le.get("icon-text-fit");let lr;v&&Dn!=="none"&&(f.allowVerticalPlacement&&h.vertical&&(lr=vm(v,h.vertical,Dn,Le.get("icon-text-fit-padding"),je,st)),He&&(v=vm(v,He,Dn,Le.get("icon-text-fit-padding"),je,st)));const En=ce?Ce.line.getGranularityForZoomLevel(ce.z):1,Wr=(Nr,Qr)=>{Qr.x<0||Qr.x>=it||Qr.y<0||Qr.y>=it||function(ei,Ko,al,$l,Xu,uh,lc,Eu,pA,wl,cu,DA,LA,uc,du,Dd,kc,Do,mA,Va,ll,Bu,wm,td,Z0){const Ah=ei.addToLineVertexArray(Ko,al);let nd,Ju,Ld,Hf,vC=0,_C=0,CC=0,bC=0,Zy=-1,Xy=-1;const Zf={};let xC=ka("");if(ei.allowVerticalPlacement&&$l.vertical){const FA=Eu.layout.get("text-rotate").evaluate(ll,{},td)+90;Ld=new Jg(pA,Ko,wl,cu,DA,$l.vertical,LA,uc,du,FA),lc&&(Hf=new Jg(pA,Ko,wl,cu,DA,lc,kc,Do,du,FA))}if(Xu){const FA=Eu.layout.get("icon-rotate").evaluate(ll,{}),Fd=Eu.layout.get("icon-text-fit")!=="none",Mm=Ic(Xu,FA,wm,Fd),Ud=lc?Ic(lc,FA,wm,Fd):void 0;Ju=new Jg(pA,Ko,wl,cu,DA,Xu,kc,Do,!1,FA),vC=4*Mm.length;const Sm=ei.iconSizeData;let yf=null;Sm.kind==="source"?(yf=[ed*Eu.layout.get("icon-size").evaluate(ll,{})],yf[0]>Fh&&Je(`${ei.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)):Sm.kind==="composite"&&(yf=[ed*Bu.compositeIconSizes[0].evaluate(ll,{},td),ed*Bu.compositeIconSizes[1].evaluate(ll,{},td)],(yf[0]>Fh||yf[1]>Fh)&&Je(`${ei.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)),ei.addSymbols(ei.icon,Mm,yf,Va,mA,ll,a.ai.none,Ko,Ah.lineStartIndex,Ah.lineLength,-1,td),Zy=ei.icon.placedSymbolArray.length-1,Ud&&(_C=4*Ud.length,ei.addSymbols(ei.icon,Ud,yf,Va,mA,ll,a.ai.vertical,Ko,Ah.lineStartIndex,Ah.lineLength,-1,td),Xy=ei.icon.placedSymbolArray.length-1)}const wC=Object.keys($l.horizontal);for(const FA of wC){const Fd=$l.horizontal[FA];if(!nd){xC=ka(Fd.text);const Ud=Eu.layout.get("text-rotate").evaluate(ll,{},td);nd=new Jg(pA,Ko,wl,cu,DA,Fd,LA,uc,du,Ud)}const Mm=Fd.positionedLines.length===1;if(CC+=pC(ei,Ko,Fd,uh,Eu,du,ll,Dd,Ah,$l.vertical?a.ai.horizontal:a.ai.horizontalOnly,Mm?wC:[FA],Zf,Zy,Bu,td),Mm)break}$l.vertical&&(bC+=pC(ei,Ko,$l.vertical,uh,Eu,du,ll,Dd,Ah,a.ai.vertical,["vertical"],Zf,Xy,Bu,td));const g3=nd?nd.boxStartIndex:ei.collisionBoxArray.length,y3=nd?nd.boxEndIndex:ei.collisionBoxArray.length,v3=Ld?Ld.boxStartIndex:ei.collisionBoxArray.length,_3=Ld?Ld.boxEndIndex:ei.collisionBoxArray.length,C3=Ju?Ju.boxStartIndex:ei.collisionBoxArray.length,b3=Ju?Ju.boxEndIndex:ei.collisionBoxArray.length,x3=Hf?Hf.boxStartIndex:ei.collisionBoxArray.length,w3=Hf?Hf.boxEndIndex:ei.collisionBoxArray.length;let jh=-1;const n1=(FA,Fd)=>FA&&FA.circleDiameter?Math.max(FA.circleDiameter,Fd):Fd;jh=n1(nd,jh),jh=n1(Ld,jh),jh=n1(Ju,jh),jh=n1(Hf,jh);const MC=jh>-1?1:0;MC&&(jh*=Z0/$a),ei.glyphOffsetArray.length>=Tp.MAX_GLYPHS&&Je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ll.sortKey!==void 0&&ei.addToSortKeyRanges(ei.symbolInstances.length,ll.sortKey);const Jy=bl(Eu,ll,td),[SC,EC]=function(FA,Fd){const Mm=FA.length,Ud=Fd==null?void 0:Fd.values;if((Ud==null?void 0:Ud.length)>0)for(let Sm=0;Sm<Ud.length;Sm+=2){const yf=Ud[Sm+1];FA.emplaceBack(a.av[Ud[Sm]],yf[0],yf[1])}return[Mm,FA.length]}(ei.textAnchorOffsets,Jy);ei.symbolInstances.emplaceBack(Ko.x,Ko.y,Zf.right>=0?Zf.right:-1,Zf.center>=0?Zf.center:-1,Zf.left>=0?Zf.left:-1,Zf.vertical||-1,Zy,Xy,xC,g3,y3,v3,_3,C3,b3,x3,w3,wl,CC,bC,vC,_C,MC,0,LA,jh,SC,EC)}(f,Qr,Nr,h,v,w,lr,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,gt,[nt,nt,nt,nt],Ln,Z,Mt,Ot,pn,je,u,D,ne,ce,F)};if(bn==="line")for(const Nr of uC(u.geometry,0,0,it,it)){const Qr=Yn(Nr,En),ei=bm(Qr,Ke,ln,h.vertical||He,v,24,jt,f.overscaling,it);for(const Ko of ei)He&&p3(f,He.text,Vn,Ko)||Wr(Qr,Ko)}else if(bn==="line-center"){for(const Nr of u.geometry)if(Nr.length>1){const Qr=Yn(Nr,En),ei=c3(Qr,ln,h.vertical||He,v,24,jt);ei&&Wr(Qr,ei)}}else if(u.type==="Polygon")for(const Nr of Fc(u.geometry,0)){const Qr=h3(Nr,16);Wr(Yn(Nr[0],En,!0),new Pp(Qr.x,Qr.y,0))}else if(u.type==="LineString")for(const Nr of u.geometry){const Qr=Yn(Nr,En);Wr(Qr,new Pp(Qr[0].x,Qr[0].y,0))}else if(u.type==="Point")for(const Nr of u.geometry)for(const Qr of Nr)Wr([Qr],new Pp(Qr.x,Qr.y,0))}function pC(f,u,h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je){const He=function(jt,Mt,Ke,nt,Ot,ln,Ln,pn){const bn=nt.layout.get("text-rotate").evaluate(ln,{})*Math.PI/180,Vn=[];for(const Dn of Mt.positionedLines)for(const lr of Dn.positionedGlyphs){if(!lr.rect)continue;const En=lr.rect||{};let Wr=ol+1,Nr=!0,Qr=1,ei=0;const Ko=(Ot||pn)&&lr.vertical,al=lr.metrics.advance*lr.scale/2;if(pn&&Mt.verticalizable&&(ei=Dn.lineOffset/2-(lr.imageName?-($a-lr.metrics.width*lr.scale)/2:(lr.scale-1)*$a)),lr.imageName){const Do=Ln[lr.imageName];Nr=Do.sdf,Qr=Do.pixelRatio,Wr=hA/Qr}const $l=Ot?[lr.x+al,lr.y]:[0,0];let Xu=Ot?[0,0]:[lr.x+al+Ke[0],lr.y+Ke[1]-ei],uh=[0,0];Ko&&(uh=Xu,Xu=[0,0]);const lc=lr.metrics.isDoubleResolution?2:1,Eu=(lr.metrics.left-Wr)*lr.scale-al+Xu[0],pA=(-lr.metrics.top-Wr)*lr.scale+Xu[1],wl=Eu+En.w/lc*lr.scale/Qr,cu=pA+En.h/lc*lr.scale/Qr,DA=new k(Eu,pA),LA=new k(wl,pA),uc=new k(Eu,cu),du=new k(wl,cu);if(Ko){const Do=new k(-al,al-Op),mA=-Math.PI/2,Va=$a/2-al,ll=new k(5-Op-Va,-(lr.imageName?Va:0)),Bu=new k(...uh);DA._rotateAround(mA,Do)._add(ll)._add(Bu),LA._rotateAround(mA,Do)._add(ll)._add(Bu),uc._rotateAround(mA,Do)._add(ll)._add(Bu),du._rotateAround(mA,Do)._add(ll)._add(Bu)}if(bn){const Do=Math.sin(bn),mA=Math.cos(bn),Va=[mA,-Do,Do,mA];DA._matMult(Va),LA._matMult(Va),uc._matMult(Va),du._matMult(Va)}const Dd=new k(0,0),kc=new k(0,0);Vn.push({tl:DA,tr:LA,bl:uc,br:du,tex:En,writingMode:Mt.writingMode,glyphOffset:$l,sectionIndex:lr.sectionIndex,isSDF:Nr,pixelOffsetTL:Dd,pixelOffsetBR:kc,minFontScaleX:0,minFontScaleY:0})}return Vn}(0,h,G,w,D,F,v,f.allowVerticalPlacement),st=f.textSizeData;let gt=null;st.kind==="source"?(gt=[ed*w.layout.get("text-size").evaluate(F,{})],gt[0]>Fh&&Je(`${f.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)):st.kind==="composite"&&(gt=[ed*Le.compositeTextSizes[0].evaluate(F,{},je),ed*Le.compositeTextSizes[1].evaluate(F,{},je)],(gt[0]>Fh||gt[1]>Fh)&&Je(`${f.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)),f.addSymbols(f.text,He,gt,G,D,F,ne,u,Z.lineStartIndex,Z.lineLength,Re,je);for(const jt of ce)Ce[jt]=f.text.placedSymbolArray.length-1;return 4*He.length}function mC(f){for(const u in f)return f[u];return null}function p3(f,u,h,v){const w=f.compareText;if(u in w){const D=w[u];for(let F=D.length-1;F>=0;F--)if(v.dist(D[F])<h)return!0}else w[u]=[];return w[u].push(v),!1}const gC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class qy{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,v]=new Uint8Array(u,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=v>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const D=gC[15&v];if(!D)throw new Error("Unrecognized array type.");const[F]=new Uint16Array(u,2,1),[G]=new Uint32Array(u,4,1);return new qy(G,F,D,u)}constructor(u,h=64,v=Float64Array,w){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=v,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const D=gC.indexOf(this.ArrayType),F=2*u*this.ArrayType.BYTES_PER_ELEMENT,G=u*this.IndexArrayType.BYTES_PER_ELEMENT,Z=(8-G%8)%8;if(D<0)throw new Error(`Unexpected typed array class: ${v}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+Z,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+F+G+Z),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+Z,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+D]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=u)}add(u,h){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=u,this.coords[this._pos++]=h,v}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return Yy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,h,v,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:D,coords:F,nodeSize:G}=this,Z=[0,D.length-1,0],ne=[];for(;Z.length;){const ce=Z.pop()||0,Ce=Z.pop()||0,Re=Z.pop()||0;if(Ce-Re<=G){for(let st=Re;st<=Ce;st++){const gt=F[2*st],jt=F[2*st+1];gt>=u&&gt<=v&&jt>=h&&jt<=w&&ne.push(D[st])}continue}const Le=Re+Ce>>1,je=F[2*Le],He=F[2*Le+1];je>=u&&je<=v&&He>=h&&He<=w&&ne.push(D[Le]),(ce===0?u<=je:h<=He)&&(Z.push(Re),Z.push(Le-1),Z.push(1-ce)),(ce===0?v>=je:w>=He)&&(Z.push(Le+1),Z.push(Ce),Z.push(1-ce))}return ne}within(u,h,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:D,nodeSize:F}=this,G=[0,w.length-1,0],Z=[],ne=v*v;for(;G.length;){const ce=G.pop()||0,Ce=G.pop()||0,Re=G.pop()||0;if(Ce-Re<=F){for(let st=Re;st<=Ce;st++)yC(D[2*st],D[2*st+1],u,h)<=ne&&Z.push(w[st]);continue}const Le=Re+Ce>>1,je=D[2*Le],He=D[2*Le+1];yC(je,He,u,h)<=ne&&Z.push(w[Le]),(ce===0?u-v<=je:h-v<=He)&&(G.push(Re),G.push(Le-1),G.push(1-ce)),(ce===0?u+v>=je:h+v>=He)&&(G.push(Le+1),G.push(Ce),G.push(1-ce))}return Z}}function Yy(f,u,h,v,w,D){if(w-v<=h)return;const F=v+w>>1;$y(f,u,F,v,w,D),Yy(f,u,h,v,F-1,1-D),Yy(f,u,h,F+1,w,1-D)}function $y(f,u,h,v,w,D){for(;w>v;){if(w-v>600){const ne=w-v+1,ce=h-v+1,Ce=Math.log(ne),Re=.5*Math.exp(2*Ce/3),Le=.5*Math.sqrt(Ce*Re*(ne-Re)/ne)*(ce-ne/2<0?-1:1);$y(f,u,h,Math.max(v,Math.floor(h-ce*Re/ne+Le)),Math.min(w,Math.floor(h+(ne-ce)*Re/ne+Le)),D)}const F=u[2*h+D];let G=v,Z=w;for(Vf(f,u,v,h),u[2*w+D]>F&&Vf(f,u,v,w);G<Z;){for(Vf(f,u,G,Z),G++,Z--;u[2*G+D]<F;)G++;for(;u[2*Z+D]>F;)Z--}u[2*v+D]===F?Vf(f,u,v,Z):(Z++,Vf(f,u,Z,w)),Z<=h&&(v=Z+1),h<=Z&&(w=Z-1)}}function Vf(f,u,h,v){H0(f,h,v),H0(u,2*h,2*v),H0(u,2*h+1,2*v+1)}function H0(f,u,h){const v=f[u];f[u]=f[h],f[h]=v}function yC(f,u,h,v){const w=f-h,D=u-v;return w*w+D*D}var t1;a.ce=void 0,(t1=a.ce||(a.ce={})).create="create",t1.load="load",t1.fullLoad="fullLoad";let xm=null,KA=[];const Kp=1e3/60,Vy="loadTime",Hy="fullLoadTime",m3={mark(f){performance.mark(f)},frame(f){const u=f;xm!=null&&KA.push(u-xm),xm=u},clearMetrics(){xm=null,KA=[],performance.clearMeasures(Vy),performance.clearMeasures(Hy);for(const f in a.ce)performance.clearMarks(a.ce[f])},getPerformanceMetrics(){performance.measure(Vy,a.ce.create,a.ce.load),performance.measure(Hy,a.ce.create,a.ce.fullLoad);const f=performance.getEntriesByName(Vy)[0].duration,u=performance.getEntriesByName(Hy)[0].duration,h=KA.length,v=1/(KA.reduce((D,F)=>D+F,0)/h/1e3),w=KA.filter(D=>D>Kp).reduce((D,F)=>D+(F-Kp)/Kp,0);return{loadTime:f,fullLoadTime:u,fps:v,percentDroppedFrames:w/(h+w)*100,totalFrames:h}}};a.$=_t,a.A=N,a.B=th,a.C=function(f){if(Ut==null){const u=f.navigator?f.navigator.userAgent:null;Ut=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Ut},a.D=hr,a.E=rr,a.F=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new dr(()=>this.process()),this.subscription=function(h,v,w,D){return h.addEventListener(v,w,!1),{unsubscribe:()=>{h.removeEventListener(v,w,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=dt(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise((h,v)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[w]={resolve:h,reject:v},u&&u.signal.addEventListener("abort",()=>{delete this.resolveRejects[w];const G={id:w,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(G)},{once:!0});const D=[],F=Object.assign(Object.assign({},f),{id:w,sourceMapId:this.mapId,origin:location.origin,data:tc(f.data,D)});this.target.postMessage(F,{transfer:D})})}receive(f){const u=f.data,h=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[h];const v=this.abortControllers[h];return delete this.abortControllers[h],void(v&&v.abort())}if(dt(self)||u.mustQueue)return this.tasks[h]=u,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return o(this,void 0,void 0,function*(){if(u.type==="<response>"){const w=this.resolveRejects[f];return delete this.resolveRejects[f],w?void(u.error?w.reject(vd(u.error)):w.resolve(vd(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=vd(u.data),v=new AbortController;this.abortControllers[f]=v;try{const w=yield this.messageHandlers[u.type](u.sourceMapId,h,v);this.completeTask(f,null,w)}catch(w){this.completeTask(f,w)}})}completeTask(f,u,h){const v=[];delete this.abortControllers[f];const w={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?tc(u):null,data:tc(h,v)};this.target.postMessage(w,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.G=Qn,a.H=function(){var f=new N(16);return N!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.I=W0,a.J=function(f,u,h){var v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He=h[0],st=h[1],gt=h[2];return u===f?(f[12]=u[0]*He+u[4]*st+u[8]*gt+u[12],f[13]=u[1]*He+u[5]*st+u[9]*gt+u[13],f[14]=u[2]*He+u[6]*st+u[10]*gt+u[14],f[15]=u[3]*He+u[7]*st+u[11]*gt+u[15]):(w=u[1],D=u[2],F=u[3],G=u[4],Z=u[5],ne=u[6],ce=u[7],Ce=u[8],Re=u[9],Le=u[10],je=u[11],f[0]=v=u[0],f[1]=w,f[2]=D,f[3]=F,f[4]=G,f[5]=Z,f[6]=ne,f[7]=ce,f[8]=Ce,f[9]=Re,f[10]=Le,f[11]=je,f[12]=v*He+G*st+Ce*gt+u[12],f[13]=w*He+Z*st+Re*gt+u[13],f[14]=D*He+ne*st+Le*gt+u[14],f[15]=F*He+ce*st+je*gt+u[15]),f},a.K=function(f,u,h){var v=h[0],w=h[1],D=h[2];return f[0]=u[0]*v,f[1]=u[1]*v,f[2]=u[2]*v,f[3]=u[3]*v,f[4]=u[4]*w,f[5]=u[5]*w,f[6]=u[6]*w,f[7]=u[7]*w,f[8]=u[8]*D,f[9]=u[9]*D,f[10]=u[10]*D,f[11]=u[11]*D,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.L=function(f,u,h){var v=u[0],w=u[1],D=u[2],F=u[3],G=u[4],Z=u[5],ne=u[6],ce=u[7],Ce=u[8],Re=u[9],Le=u[10],je=u[11],He=u[12],st=u[13],gt=u[14],jt=u[15],Mt=h[0],Ke=h[1],nt=h[2],Ot=h[3];return f[0]=Mt*v+Ke*G+nt*Ce+Ot*He,f[1]=Mt*w+Ke*Z+nt*Re+Ot*st,f[2]=Mt*D+Ke*ne+nt*Le+Ot*gt,f[3]=Mt*F+Ke*ce+nt*je+Ot*jt,f[4]=(Mt=h[4])*v+(Ke=h[5])*G+(nt=h[6])*Ce+(Ot=h[7])*He,f[5]=Mt*w+Ke*Z+nt*Re+Ot*st,f[6]=Mt*D+Ke*ne+nt*Le+Ot*gt,f[7]=Mt*F+Ke*ce+nt*je+Ot*jt,f[8]=(Mt=h[8])*v+(Ke=h[9])*G+(nt=h[10])*Ce+(Ot=h[11])*He,f[9]=Mt*w+Ke*Z+nt*Re+Ot*st,f[10]=Mt*D+Ke*ne+nt*Le+Ot*gt,f[11]=Mt*F+Ke*ce+nt*je+Ot*jt,f[12]=(Mt=h[12])*v+(Ke=h[13])*G+(nt=h[14])*Ce+(Ot=h[15])*He,f[13]=Mt*w+Ke*Z+nt*Re+Ot*st,f[14]=Mt*D+Ke*ne+nt*Le+Ot*gt,f[15]=Mt*F+Ke*ce+nt*je+Ot*jt,f},a.M=function(f,u){const h={};for(let v=0;v<u.length;v++){const w=u[v];w in f&&(h[w]=f[w])}return h},a.N=zr,a.O=sl,a.P=k,a.Q=an,a.R=Hu,a.S=Ls,a.T=bc,a.U=re,a.V=X,a.W=yn,a.X=it,a.Y=ni,a.Z=Oi,a._=o,a.a=pr,a.a$=function(){return new Float64Array(16)},a.a0=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(h=>{u.onloadstart=()=>{h(u)};for(const v of f){const w=window.document.createElement("source");me(v)||(u.crossOrigin="Anonymous"),w.src=v,u.appendChild(w)}})},a.a1=function(){return Lt++},a.a2=M,a.a3=Tp,a.a4=HA,a.a5=ic,a.a6=oC,a.a7=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,v,w,D)=>{const F=w||D;return u[v]=!F||F.toLowerCase(),""}),u["max-age"]){const h=parseInt(u["max-age"],10);isNaN(h)?delete u["max-age"]:u["max-age"]=h}return u},a.a8=function(f){return Math.log(f)/Math.LN2},a.a9=function(f){var u=f[0],h=f[1];return u*u+h*h},a.aA=Is,a.aB=xt,a.aC=ut,a.aD=wn,a.aE=_n,a.aF=85.051129,a.aG=function(f){return Math.pow(2,f)},a.aH=Zt,a.aI=Ct,a.aJ=sr,a.aK=yr,a.aL=function(f,u,h){return f[0]=u[0]*h,f[1]=u[1]*h,f[2]=u[2]*h,f},a.aM=function(f,u,h){return f[0]=u[0]+h[0],f[1]=u[1]+h[1],f[2]=u[2]+h[2],f},a.aN=function(f){var u=new N(3);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u},a.aO=function(f,u,h){return f[0]=u[0]*h[0],f[1]=u[1]*h[1],f[2]=u[2]*h[2],f[3]=u[3]*h[3],f},a.aP=function(f,u,h){return f[0]=u[0]-h[0],f[1]=u[1]-h[1],f[2]=u[2]-h[2],f},a.aQ=function(f,u){var h=u[0],v=u[1],w=u[2],D=h*h+v*v+w*w;return D>0&&(D=1/Math.sqrt(D)),f[0]=u[0]*D,f[1]=u[1]*D,f[2]=u[2]*D,f},a.aR=function(f,u,h){var v=u[0],w=u[1],D=u[2],F=h[0],G=h[1],Z=h[2];return f[0]=w*Z-D*G,f[1]=D*F-v*Z,f[2]=v*G-w*F,f},a.aS=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]},a.aT=zi,a.aU=Jo,a.aV=function(f,u,h,v,w){var D,F=1/Math.tan(u/2);return f[0]=F/h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=F,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,w!=null&&w!==1/0?(f[10]=(w+v)*(D=1/(v-w)),f[14]=2*w*v*D):(f[10]=-1,f[14]=-2*v),f},a.aW=function(f){var u=new N(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},a.aX=function(f,u,h){var v=Math.sin(h),w=Math.cos(h),D=u[0],F=u[1],G=u[2],Z=u[3],ne=u[4],ce=u[5],Ce=u[6],Re=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=D*w+ne*v,f[1]=F*w+ce*v,f[2]=G*w+Ce*v,f[3]=Z*w+Re*v,f[4]=ne*w-D*v,f[5]=ce*w-F*v,f[6]=Ce*w-G*v,f[7]=Re*w-Z*v,f},a.aY=function(f,u,h){var v=Math.sin(h),w=Math.cos(h),D=u[4],F=u[5],G=u[6],Z=u[7],ne=u[8],ce=u[9],Ce=u[10],Re=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=D*w+ne*v,f[5]=F*w+ce*v,f[6]=G*w+Ce*v,f[7]=Z*w+Re*v,f[8]=ne*w-D*v,f[9]=ce*w-F*v,f[10]=Ce*w-G*v,f[11]=Re*w-Z*v,f},a.aZ=function(){const f=new Float32Array(16);return he(f),f},a.a_=function(){const f=new Float64Array(16);return he(f),f},a.aa=function(f){return f*Math.PI/180},a.ab=wt,a.ac=function(f,u){const h=[];for(const v in f)v in u||h.push(v);return h},a.ad=Pe,a.ae=function(f){return Math.hypot(f[0],f[1])},a.af=function(f){return f[0]=0,f[1]=0,f},a.ag=function(f,u,h){return f[0]=u[0]*h,f[1]=u[1]*h,f},a.ah=function(f,u){let h=0,v=0;if(f.kind==="constant")v=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:w,minZoom:D,maxZoom:F}=f,G=w?wt(gr.interpolationFactor(w,u,D,F),0,1):0;f.kind==="camera"?v=vi.number(f.minSize,f.maxSize,G):h=G}return{uSizeT:h,uSize:v}},a.aj=function(f,{uSize:u,uSizeT:h},{lowerSize:v,upperSize:w}){return f.kind==="source"?v/ed:f.kind==="composite"?vi.number(v/ed,w/ed,h):u},a.ak=Y0,a.al=fe,a.am=function(f,u,h,v){const w=u.y-f.y,D=u.x-f.x,F=v.y-h.y,G=v.x-h.x,Z=F*D-G*w;if(Z===0)return null;const ne=(G*(f.y-h.y)-F*(f.x-h.x))/Z;return new k(f.x+ne*D,f.y+ne*w)},a.an=function(f,u){var h=u[0],v=u[1],w=u[2],D=u[3],F=u[4],G=u[5],Z=u[6],ne=u[7],ce=u[8],Ce=u[9],Re=u[10],Le=u[11],je=u[12],He=u[13],st=u[14],gt=u[15],jt=h*G-v*F,Mt=h*Z-w*F,Ke=h*ne-D*F,nt=v*Z-w*G,Ot=v*ne-D*G,ln=w*ne-D*Z,Ln=ce*He-Ce*je,pn=ce*st-Re*je,bn=ce*gt-Le*je,Vn=Ce*st-Re*He,Dn=Ce*gt-Le*He,lr=Re*gt-Le*st,En=jt*lr-Mt*Dn+Ke*Vn+nt*bn-Ot*pn+ln*Ln;return En?(f[0]=(G*lr-Z*Dn+ne*Vn)*(En=1/En),f[1]=(w*Dn-v*lr-D*Vn)*En,f[2]=(He*ln-st*Ot+gt*nt)*En,f[3]=(Re*Ot-Ce*ln-Le*nt)*En,f[4]=(Z*bn-F*lr-ne*pn)*En,f[5]=(h*lr-w*bn+D*pn)*En,f[6]=(st*Ke-je*ln-gt*Mt)*En,f[7]=(ce*ln-Re*Ke+Le*Mt)*En,f[8]=(F*Dn-G*bn+ne*Ln)*En,f[9]=(v*bn-h*Dn-D*Ln)*En,f[10]=(je*Ot-He*Ke+gt*jt)*En,f[11]=(Ce*Ke-ce*Ot-Le*jt)*En,f[12]=(G*pn-F*Vn-Z*Ln)*En,f[13]=(h*Vn-v*pn+w*Ln)*En,f[14]=(He*Mt-je*nt-st*jt)*En,f[15]=(ce*nt-Ce*Mt+Re*jt)*En,f):null},a.ao=uC,a.ap=Ed,a.aq=he,a.ar=function(f){let u=1/0,h=1/0,v=-1/0,w=-1/0;for(const D of f)u=Math.min(u,D.x),h=Math.min(h,D.y),v=Math.max(v,D.x),w=Math.max(w,D.y);return[u,h,v,w]},a.as=$a,a.at=We,a.au=function(f,u,h,v,w=!1){if(!h[0]&&!h[1])return[0,0];const D=w?v==="map"?-f.bearingInRadians:0:v==="viewport"?f.bearingInRadians:0;if(D){const F=Math.sin(D),G=Math.cos(D);h=[h[0]*G-h[1]*F,h[0]*F+h[1]*G]}return[w?h[0]:We(u,h[0],f.zoom),w?h[1]:We(u,h[1],f.zoom)]},a.aw=Yf,a.ax=xl,a.ay=q0,a.az=qy,a.b=en,a.b$=f=>f.type==="line",a.b0=function(f,u,h){const v=new Float64Array(4);return function(w,D,F,G){var Z=.5*Math.PI/180;D*=Z,F*=Z,G*=Z;var ne=Math.sin(D),ce=Math.cos(D),Ce=Math.sin(F),Re=Math.cos(F),Le=Math.sin(G),je=Math.cos(G);w[0]=ne*Re*je-ce*Ce*Le,w[1]=ce*Ce*je+ne*Re*Le,w[2]=ce*Re*Le-ne*Ce*je,w[3]=ce*Re*je+ne*Ce*Le}(v,f,u-90,h),v},a.b1=function(f,u,h,v){var w,D,F,G,Z,ne=u[0],ce=u[1],Ce=u[2],Re=u[3],Le=h[0],je=h[1],He=h[2],st=h[3];return(D=ne*Le+ce*je+Ce*He+Re*st)<0&&(D=-D,Le=-Le,je=-je,He=-He,st=-st),1-D>J?(w=Math.acos(D),F=Math.sin(w),G=Math.sin((1-v)*w)/F,Z=Math.sin(v*w)/F):(G=1-v,Z=v),f[0]=G*ne+Z*Le,f[1]=G*ce+Z*je,f[2]=G*Ce+Z*He,f[3]=G*Re+Z*st,f},a.b2=function(f){const u=new Float64Array(9);var h,v,w,D,F,G,Z,ne,ce,Ce,Re,Le,je,He,st,gt,jt,Mt;Ce=(w=(v=f)[0])*(Z=w+w),Re=(D=v[1])*Z,je=(F=v[2])*Z,He=F*(ne=D+D),gt=(G=v[3])*Z,jt=G*ne,Mt=G*(ce=F+F),(h=u)[0]=1-(Le=D*ne)-(st=F*ce),h[3]=Re-Mt,h[6]=je+jt,h[1]=Re+Mt,h[4]=1-Ce-st,h[7]=He-gt,h[2]=je-jt,h[5]=He+gt,h[8]=1-Ce-Le;const Ke=sr(-Math.asin(wt(u[2],-1,1)));let nt,Ot;return Math.hypot(u[5],u[8])<.001?(nt=0,Ot=-sr(Math.atan2(u[3],u[4]))):(nt=sr(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Ot=sr(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:nt,pitch:Ke+90,bearing:Ot}},a.b3=function(f,u){return f.roll==u.roll&&f.pitch==u.pitch&&f.bearing==u.bearing},a.b4=Ai,a.b5=pl,a.b6=Ht,a.b7=Wt,a.b8=ct,a.b9=ht,a.bA=Kt,a.bB=Fe,a.bC=class extends fl{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.bD=class extends fl{constructor(f,u){super(f,u),this.current=IA}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.bE=uu,a.bF=OA,a.bG=class extends fl{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.bH=class extends fl{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.bI=ie,a.bJ=function(f,u){var h=Math.sin(u),v=Math.cos(u);return f[0]=v,f[1]=h,f[2]=0,f[3]=-h,f[4]=v,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},a.bK=function(f,u,h){var v=u[0],w=u[1],D=u[2];return f[0]=v*h[0]+w*h[3]+D*h[6],f[1]=v*h[1]+w*h[4]+D*h[7],f[2]=v*h[2]+w*h[5]+D*h[8],f},a.bL=function(f,u,h,v,w,D,F){var G=1/(u-h),Z=1/(v-w),ne=1/(D-F);return f[0]=-2*G,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*Z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*ne,f[11]=0,f[12]=(u+h)*G,f[13]=(w+v)*Z,f[14]=(F+D)*ne,f[15]=1,f},a.bM=class extends au{},a.bN=Qf,a.bO=class extends cA{},a.bP=Id,a.bQ=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.bR=lf,a.bS=function(f,u,h){var v=u[0],w=u[1],D=u[2],F=h[3]*v+h[7]*w+h[11]*D+h[15];return f[0]=(h[0]*v+h[4]*w+h[8]*D+h[12])/(F=F||1),f[1]=(h[1]*v+h[5]*w+h[9]*D+h[13])/F,f[2]=(h[2]*v+h[6]*w+h[10]*D+h[14])/F,f},a.bT=class extends BA{},a.bU=class extends l{},a.bV=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},a.bW=function(f,u){var h=f[0],v=f[1],w=f[2],D=f[3],F=f[4],G=f[5],Z=f[6],ne=f[7],ce=f[8],Ce=f[9],Re=f[10],Le=f[11],je=f[12],He=f[13],st=f[14],gt=f[15],jt=u[0],Mt=u[1],Ke=u[2],nt=u[3],Ot=u[4],ln=u[5],Ln=u[6],pn=u[7],bn=u[8],Vn=u[9],Dn=u[10],lr=u[11],En=u[12],Wr=u[13],Nr=u[14],Qr=u[15];return Math.abs(h-jt)<=J*Math.max(1,Math.abs(h),Math.abs(jt))&&Math.abs(v-Mt)<=J*Math.max(1,Math.abs(v),Math.abs(Mt))&&Math.abs(w-Ke)<=J*Math.max(1,Math.abs(w),Math.abs(Ke))&&Math.abs(D-nt)<=J*Math.max(1,Math.abs(D),Math.abs(nt))&&Math.abs(F-Ot)<=J*Math.max(1,Math.abs(F),Math.abs(Ot))&&Math.abs(G-ln)<=J*Math.max(1,Math.abs(G),Math.abs(ln))&&Math.abs(Z-Ln)<=J*Math.max(1,Math.abs(Z),Math.abs(Ln))&&Math.abs(ne-pn)<=J*Math.max(1,Math.abs(ne),Math.abs(pn))&&Math.abs(ce-bn)<=J*Math.max(1,Math.abs(ce),Math.abs(bn))&&Math.abs(Ce-Vn)<=J*Math.max(1,Math.abs(Ce),Math.abs(Vn))&&Math.abs(Re-Dn)<=J*Math.max(1,Math.abs(Re),Math.abs(Dn))&&Math.abs(Le-lr)<=J*Math.max(1,Math.abs(Le),Math.abs(lr))&&Math.abs(je-En)<=J*Math.max(1,Math.abs(je),Math.abs(En))&&Math.abs(He-Wr)<=J*Math.max(1,Math.abs(He),Math.abs(Wr))&&Math.abs(st-Nr)<=J*Math.max(1,Math.abs(st),Math.abs(Nr))&&Math.abs(gt-Qr)<=J*Math.max(1,Math.abs(gt),Math.abs(Qr))},a.bX=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},a.bY=f=>f.type==="symbol",a.bZ=f=>f.type==="circle",a.b_=f=>f.type==="heatmap",a.ba=De,a.bb=Gs,a.bc=function(f,u,h,v,w){return ht(v,w,wt((f-u)/(h-u),0,1))},a.bd=$e,a.be=function(){return new Float64Array(4)},a.bf=function(){return new Float64Array(3)},a.bg=function(f,u,h,v){var w=[],D=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],D[0]=w[0]*Math.cos(v)-w[1]*Math.sin(v),D[1]=w[0]*Math.sin(v)+w[1]*Math.cos(v),D[2]=w[2],f[0]=D[0]+h[0],f[1]=D[1]+h[1],f[2]=D[2]+h[2],f},a.bh=function(f,u,h,v){var w=[],D=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],D[0]=w[0],D[1]=w[1]*Math.cos(v)-w[2]*Math.sin(v),D[2]=w[1]*Math.sin(v)+w[2]*Math.cos(v),f[0]=D[0]+h[0],f[1]=D[1]+h[1],f[2]=D[2]+h[2],f},a.bi=function(f,u,h,v){var w=[],D=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],D[0]=w[2]*Math.sin(v)+w[0]*Math.cos(v),D[1]=w[1],D[2]=w[2]*Math.cos(v)-w[0]*Math.sin(v),f[0]=D[0]+h[0],f[1]=D[1]+h[1],f[2]=D[2]+h[2],f},a.bj=function(f,u,h){var v=Math.sin(h),w=Math.cos(h),D=u[0],F=u[1],G=u[2],Z=u[3],ne=u[8],ce=u[9],Ce=u[10],Re=u[11];return u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=D*w-ne*v,f[1]=F*w-ce*v,f[2]=G*w-Ce*v,f[3]=Z*w-Re*v,f[8]=D*v+ne*w,f[9]=F*v+ce*w,f[10]=G*v+Ce*w,f[11]=Z*v+Re*w,f},a.bk=function(f,u){const h=$e(f,360),v=$e(u,360),w=v-h,D=v>h?w-360:w+360;return Math.abs(w)<Math.abs(D)?w:D},a.bl=function(f){return f[0]=0,f[1]=0,f[2]=0,f},a.bm=function(f,u,h,v){const w=Math.sqrt(f*f+u*u),D=Math.sqrt(h*h+v*v);f/=w,u/=w,h/=D,v/=D;const F=Math.acos(f*h+u*v);return-u*h+f*v>0?F:-F},a.bn=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]},a.bo=$n,a.bp=function(f,u){const h=$e(f,2*Math.PI),v=$e(u,2*Math.PI);return Math.min(Math.abs(h-v),Math.abs(h-v+2*Math.PI),Math.abs(h-v-2*Math.PI))},a.bq=function(f){return Math.hypot(f[0],f[1],f[2])},a.br=function(){const f={},u=Ee.$version;for(const h in Ee.$root){const v=Ee.$root[h];if(v.required){let w=null;w=h==="version"?u:v.type==="array"?[]:{},w!=null&&(f[h]=w)}}return f},a.bs=_d,a.bt=Ge,a.bu=function(f){f=f.slice();const u=Object.create(null);for(let h=0;h<f.length;h++)u[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=ve(f[h],u[f[h].ref]));return f},a.bv=function(f){if(f.type==="custom")return new ar(f);switch(f.type){case"background":return new Ze(f);case"circle":return new zf(f);case"fill":return new ko(f);case"fill-extrusion":return new Rh(f);case"heatmap":return new TA(f);case"hillshade":return new Oc(f);case"line":return new U0(f);case"raster":return new Cn(f);case"symbol":return new W(f)}},a.bw=Te,a.bx=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let h=[];try{if(!p(f.version,u.version))return[{command:"setStyle",args:[u]}];p(f.center,u.center)||h.push({command:"setCenter",args:[u.center]}),p(f.centerAltitude,u.centerAltitude)||h.push({command:"setCenterAltitude",args:[u.centerAltitude]}),p(f.zoom,u.zoom)||h.push({command:"setZoom",args:[u.zoom]}),p(f.bearing,u.bearing)||h.push({command:"setBearing",args:[u.bearing]}),p(f.pitch,u.pitch)||h.push({command:"setPitch",args:[u.pitch]}),p(f.roll,u.roll)||h.push({command:"setRoll",args:[u.roll]}),p(f.sprite,u.sprite)||h.push({command:"setSprite",args:[u.sprite]}),p(f.glyphs,u.glyphs)||h.push({command:"setGlyphs",args:[u.glyphs]}),p(f.transition,u.transition)||h.push({command:"setTransition",args:[u.transition]}),p(f.light,u.light)||h.push({command:"setLight",args:[u.light]}),p(f.terrain,u.terrain)||h.push({command:"setTerrain",args:[u.terrain]}),p(f.sky,u.sky)||h.push({command:"setSky",args:[u.sky]}),p(f.projection,u.projection)||h.push({command:"setProjection",args:[u.projection]});const v={},w=[];(function(F,G,Z,ne){let ce;for(ce in G=G||{},F=F||{})Object.prototype.hasOwnProperty.call(F,ce)&&(Object.prototype.hasOwnProperty.call(G,ce)||pt(ce,Z,ne));for(ce in G)Object.prototype.hasOwnProperty.call(G,ce)&&(Object.prototype.hasOwnProperty.call(F,ce)?p(F[ce],G[ce])||(F[ce].type==="geojson"&&G[ce].type==="geojson"&&vt(F,G,ce)?ze(Z,{command:"setGeoJSONSourceData",args:[ce,G[ce].data]}):Bt(ce,G,Z,ne)):rt(ce,G,Z))})(f.sources,u.sources,w,v);const D=[];f.layers&&f.layers.forEach(F=>{"source"in F&&v[F.source]?h.push({command:"removeLayer",args:[F.id]}):D.push(F)}),h=h.concat(w),function(F,G,Z){G=G||[];const ne=(F=F||[]).map(tn),ce=G.map(tn),Ce=F.reduce(zt,{}),Re=G.reduce(zt,{}),Le=ne.slice(),je=Object.create(null);let He,st,gt,jt,Mt;for(let Ke=0,nt=0;Ke<ne.length;Ke++)He=ne[Ke],Object.prototype.hasOwnProperty.call(Re,He)?nt++:(ze(Z,{command:"removeLayer",args:[He]}),Le.splice(Le.indexOf(He,nt),1));for(let Ke=0,nt=0;Ke<ce.length;Ke++)He=ce[ce.length-1-Ke],Le[Le.length-1-Ke]!==He&&(Object.prototype.hasOwnProperty.call(Ce,He)?(ze(Z,{command:"removeLayer",args:[He]}),Le.splice(Le.lastIndexOf(He,Le.length-nt),1)):nt++,jt=Le[Le.length-Ke],ze(Z,{command:"addLayer",args:[Re[He],jt]}),Le.splice(Le.length-Ke,0,He),je[He]=!0);for(let Ke=0;Ke<ce.length;Ke++)if(He=ce[Ke],st=Ce[He],gt=Re[He],!je[He]&&!p(st,gt))if(p(st.source,gt.source)&&p(st["source-layer"],gt["source-layer"])&&p(st.type,gt.type)){for(Mt in Xt(st.layout,gt.layout,Z,He,null,"setLayoutProperty"),Xt(st.paint,gt.paint,Z,He,null,"setPaintProperty"),p(st.filter,gt.filter)||ze(Z,{command:"setFilter",args:[He,gt.filter]}),p(st.minzoom,gt.minzoom)&&p(st.maxzoom,gt.maxzoom)||ze(Z,{command:"setLayerZoomRange",args:[He,gt.minzoom,gt.maxzoom]}),st)Object.prototype.hasOwnProperty.call(st,Mt)&&Mt!=="layout"&&Mt!=="paint"&&Mt!=="filter"&&Mt!=="metadata"&&Mt!=="minzoom"&&Mt!=="maxzoom"&&(Mt.indexOf("paint.")===0?Xt(st[Mt],gt[Mt],Z,He,Mt.slice(6),"setPaintProperty"):p(st[Mt],gt[Mt])||ze(Z,{command:"setLayerProperty",args:[He,Mt,gt[Mt]]}));for(Mt in gt)Object.prototype.hasOwnProperty.call(gt,Mt)&&!Object.prototype.hasOwnProperty.call(st,Mt)&&Mt!=="layout"&&Mt!=="paint"&&Mt!=="filter"&&Mt!=="metadata"&&Mt!=="minzoom"&&Mt!=="maxzoom"&&(Mt.indexOf("paint.")===0?Xt(st[Mt],gt[Mt],Z,He,Mt.slice(6),"setPaintProperty"):p(st[Mt],gt[Mt])||ze(Z,{command:"setLayerProperty",args:[He,Mt,gt[Mt]]}))}else ze(Z,{command:"removeLayer",args:[He]}),jt=Le[Le.lastIndexOf(He)+1],ze(Z,{command:"addLayer",args:[gt,jt]})}(D,u.layers,h)}catch(v){console.warn("Unable to compute style diff:",v),h=[{command:"setStyle",args:[u]}]}return h},a.by=function(f){const u=[],h=f.id;return h===void 0&&u.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),u},a.bz=function f(u,h){if(Array.isArray(u)){if(!Array.isArray(h)||u.length!==h.length)return!1;for(let v=0;v<u.length;v++)if(!f(u[v],h[v]))return!1;return!0}if(typeof u=="object"&&u!==null&&h!==null){if(typeof h!="object"||Object.keys(u).length!==Object.keys(h).length)return!1;for(const v in u)if(!f(u[v],h[v]))return!1;return!0}return u===h},a.c=mr,a.c0=f=>f.type==="fill",a.c1=f=>f.type==="fill-extrusion",a.c2=f=>f.type==="hillshade",a.c3=f=>f.type==="raster",a.c4=f=>f.type==="background",a.c5=f=>f.type==="custom",a.c6=Ne,a.c7=function(f,u,h){const v=pe(u.x-h.x,u.y-h.y),w=pe(f.x-h.x,f.y-h.y);var D,F;return sr(Math.atan2(v[0]*w[1]-v[1]*w[0],(D=v)[0]*(F=w)[0]+D[1]*F[1]))},a.c8=at,a.c9=function(f,u,h){var v=u[0],w=u[1];return f[0]=h[0]*v+h[4]*w+h[12],f[1]=h[1]*v+h[5]*w+h[13],f},a.cA=G0,a.cB=Gc,a.cC=Ds,a.ca=function(f,u){const{x:h,y:v}=ni.fromLngLat(u);return!(f<0||f>25||v<0||v>=1||h<0||h>=1)},a.cb=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.cc=class extends ih{},a.cd=m3,a.cf=function(f){return f.message===Jn},a.cg=Er,a.ch=function(f,u){pr.REGISTERED_PROTOCOLS[f]=u},a.ci=function(f){delete pr.REGISTERED_PROTOCOLS[f]},a.cj=function(f,u){const h={};for(let w=0;w<f.length;w++){const D=u&&u[f[w].id]||Yc(f[w]);u&&(u[f[w].id]=D);let F=h[D];F||(F=h[D]=[]),F.push(f[w])}const v=[];for(const w in h)v.push(h[w]);return v},a.ck=fr,a.cl=Zg,a.cm=sC,a.cn=Yg,a.co=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=it/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],h=u.layout,v=u._unevaluatedLayout._values,w={layoutIconSize:v["icon-size"].possiblyEvaluate(new Zo(f.bucket.zoom+1),f.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Zo(f.bucket.zoom+1),f.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Zo(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ce}=f.bucket.textSizeData;w.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Zo(ne),f.canonical),v["text-size"].possiblyEvaluate(new Zo(ce),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:ne,maxZoom:ce}=f.bucket.iconSizeData;w.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Zo(ne),f.canonical),v["icon-size"].possiblyEvaluate(new Zo(ce),f.canonical)]}const D=h.get("text-line-height")*$a,F=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",G=h.get("text-keep-upright"),Z=h.get("text-size");for(const ne of f.bucket.features){const ce=h.get("text-font").evaluate(ne,{},f.canonical).join(","),Ce=Z.evaluate(ne,{},f.canonical),Re=w.layoutTextSize.evaluate(ne,{},f.canonical),Le=w.layoutIconSize.evaluate(ne,{},f.canonical),je={horizontal:{},vertical:void 0},He=ne.text;let st,gt=[0,0];if(He){const Ke=He.toString(),nt=h.get("text-letter-spacing").evaluate(ne,{},f.canonical)*$a,Ot=Gl(Ke)?nt:0,ln=h.get("text-anchor").evaluate(ne,{},f.canonical),Ln=bl(u,ne,f.canonical);if(!Ln){const Dn=h.get("text-radial-offset").evaluate(ne,{},f.canonical);gt=Dn?V0(ln,[Dn*$a,e1]):h.get("text-offset").evaluate(ne,{},f.canonical).map(lr=>lr*$a)}let pn=F?"center":h.get("text-justify").evaluate(ne,{},f.canonical);const bn=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(ne,{},f.canonical)*$a:1/0,Vn=()=>{f.bucket.allowVerticalPlacement&&Cd(Ke)&&(je.vertical=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,ce,bn,D,ln,"left",Ot,gt,a.ai.vertical,!0,Re,Ce))};if(!F&&Ln){const Dn=new Set;if(pn==="auto")for(let En=0;En<Ln.values.length;En+=2)Dn.add(xl(Ln.values[En]));else Dn.add(pn);let lr=!1;for(const En of Dn)if(!je.horizontal[En])if(lr)je.horizontal[En]=je.horizontal[0];else{const Wr=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,ce,bn,D,"center",En,Ot,gt,a.ai.horizontal,!1,Re,Ce);Wr&&(je.horizontal[En]=Wr,lr=Wr.positionedLines.length===1)}Vn()}else{pn==="auto"&&(pn=xl(ln));const Dn=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,ce,bn,D,ln,pn,Ot,gt,a.ai.horizontal,!1,Re,Ce);Dn&&(je.horizontal[pn]=Dn),Vn(),Cd(Ke)&&F&&G&&(je.vertical=qf(He,f.glyphMap,f.glyphPositions,f.imagePositions,ce,bn,D,ln,pn,Ot,gt,a.ai.vertical,!1,Re,Ce))}}let jt=!1;if(ne.icon&&ne.icon.name){const Ke=f.imageMap[ne.icon.name];Ke&&(st=Hg(f.imagePositions[ne.icon.name],h.get("icon-offset").evaluate(ne,{},f.canonical),h.get("icon-anchor").evaluate(ne,{},f.canonical)),jt=!!Ke.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=jt:f.bucket.sdfIcons!==jt&&Je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ke.pixelRatio!==f.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Mt=mC(je.horizontal)||je.vertical;f.bucket.iconsInText=!!Mt&&Mt.iconsInText,(Mt||st)&&fC(f.bucket,ne,je,st,f.imageMap,w,Re,Le,gt,jt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.cp=Gf,a.cq=Fr,a.cr=PA,a.cs=Kl,a.ct=e0,a.cu=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.cv=function(f,u,h,v,w){return o(this,void 0,void 0,function*(){if(X())try{return yield yn(f,u,h,v,w)}catch{}return function(D,F,G,Z,ne){const ce=D.width,Ce=D.height;jn&&Rr||(jn=new OffscreenCanvas(ce,Ce),Rr=jn.getContext("2d",{willReadFrequently:!0})),jn.width=ce,jn.height=Ce,Rr.drawImage(D,0,0,ce,Ce);const Re=Rr.getImageData(F,G,Z,ne);return Rr.clearRect(0,0,ce,Ce),Re.data}(f,u,h,v,w)})},a.cw=Uh,a.cx=d,a.cy=E,a.cz=ks,a.d=f=>o(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=ft,a.f=f=>new Promise((u,h)=>{const v=new Image;v.onload=()=>{u(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame(()=>{v.src=Nt})},v.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(f)],{type:"image/png"});v.src=f.byteLength?URL.createObjectURL(w):Nt}),a.g=xr,a.h=(f,u)=>Ae(ft(f,{type:"json"}),u),a.i=dt,a.j=nn,a.k=Yt,a.l=(f,u)=>Ae(ft(f,{type:"arrayBuffer"}),u),a.m=Ae,a.n=function(f){return new e0(f).readFields(Qy,[])},a.o=Io,a.p=qg,a.q=bs,a.r=yd,a.s=me,a.t=Cs,a.u=Es,a.v=Ee,a.w=Je,a.x=function([f,u,h]){return u+=90,u*=Math.PI/180,h*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(h),y:f*Math.sin(u)*Math.sin(h),z:f*Math.cos(h)}},a.y=vi,a.z=Zo}),i("worker",["./shared"],function(a){class o{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,ve){for(const ze of oe){this._layerConfigs[ze.id]=ze;const rt=this._layers[ze.id]=a.bv(ze);rt._featureFilter=a.a4(rt.filter),this.keyCache[ze.id]&&delete this.keyCache[ze.id]}for(const ze of ve)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const p=a.cj(Object.values(this._layerConfigs),this.keyCache);for(const ze of p){const rt=ze.map(zt=>this._layers[zt.id]),pt=rt[0];if(pt.visibility==="none")continue;const Bt=pt.source||"";let vt=this.familiesBySource[Bt];vt||(vt=this.familiesBySource[Bt]={});const Xt=pt.sourceLayer||"_geojsonTileLayer";let tn=vt[Xt];tn||(tn=vt[Xt]=[]),tn.push(rt)}}}class d{constructor(oe){const ve={},p=[];for(const Bt in oe){const vt=oe[Bt],Xt=ve[Bt]={};for(const tn in vt){const zt=vt[+tn];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const _t={x:0,y:0,w:zt.bitmap.width+2,h:zt.bitmap.height+2};p.push(_t),Xt[tn]={rect:_t,metrics:zt.metrics}}}const{w:ze,h:rt}=a.p(p),pt=new a.o({width:ze||1,height:rt||1});for(const Bt in oe){const vt=oe[Bt];for(const Xt in vt){const tn=vt[+Xt];if(!tn||tn.bitmap.width===0||tn.bitmap.height===0)continue;const zt=ve[Bt][Xt].rect;a.o.copy(tn.bitmap,pt,{x:0,y:0},{x:zt.x+1,y:zt.y+1},tn.bitmap)}}this.image=pt,this.positions=ve}}a.ck("GlyphAtlas",d);class g{constructor(oe){this.tileID=new a.S(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[]}parse(oe,ve,p,ze,rt){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=oe,this.collisionBoxArray=new a.a2;const pt=new a.cl(Object.keys(oe.layers).sort()),Bt=new a.cm(this.tileID,this.promoteId);Bt.bucketLayerIDs=[];const vt={},Xt={featureIndex:Bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:p,subdivisionGranularity:rt},tn=ve.familiesBySource[this.source];for(const Kr in tn){const ir=oe.layers[Kr];if(!ir)continue;ir.version===1&&a.w(`Vector tile source "${this.source}" layer "${Kr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const co=pt.encode(Kr),Sa=[];for(let qi=0;qi<ir.length;qi++){const yi=ir.feature(qi),oo=Bt.getId(yi,Kr);Sa.push({feature:yi,id:oo,index:qi,sourceLayerIndex:co})}for(const qi of tn[Kr]){const yi=qi[0];yi.source!==this.source&&a.w(`layer.source = ${yi.source} does not equal this.source = ${this.source}`),yi.minzoom&&this.zoom<Math.floor(yi.minzoom)||yi.maxzoom&&this.zoom>=yi.maxzoom||yi.visibility!=="none"&&(b(qi,this.zoom,p),(vt[yi.id]=yi.createBucket({index:Bt.bucketLayerIDs.length,layers:qi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:co,sourceID:this.source})).populate(Sa,Xt,this.tileID.canonical),Bt.bucketLayerIDs.push(qi.map(oo=>oo.id)))}}const zt=a.bA(Xt.glyphDependencies,Kr=>Object.keys(Kr).map(Number));this.inFlightDependencies.forEach(Kr=>Kr==null?void 0:Kr.abort()),this.inFlightDependencies=[];let _t=Promise.resolve({});if(Object.keys(zt).length){const Kr=new AbortController;this.inFlightDependencies.push(Kr),_t=ze.sendAsync({type:"GG",data:{stacks:zt,source:this.source,tileID:this.tileID,type:"glyphs"}},Kr)}const Tn=Object.keys(Xt.iconDependencies);let Sn=Promise.resolve({});if(Tn.length){const Kr=new AbortController;this.inFlightDependencies.push(Kr),Sn=ze.sendAsync({type:"GI",data:{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"}},Kr)}const Ar=Object.keys(Xt.patternDependencies);let wr=Promise.resolve({});if(Ar.length){const Kr=new AbortController;this.inFlightDependencies.push(Kr),wr=ze.sendAsync({type:"GI",data:{icons:Ar,source:this.source,tileID:this.tileID,type:"patterns"}},Kr)}const[rn,Fn,Rn]=yield Promise.all([_t,Sn,wr]),Br=new d(rn),Mr=new a.cn(Fn,Rn);for(const Kr in vt){const ir=vt[Kr];ir instanceof a.a3?(b(ir.layers,this.zoom,p),a.co({bucket:ir,glyphMap:rn,glyphPositions:Br.positions,imageMap:Fn,imagePositions:Mr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Xt.subdivisionGranularity})):ir.hasPattern&&(ir instanceof a.cp||ir instanceof a.cq||ir instanceof a.cr)&&(b(ir.layers,this.zoom,p),ir.addFeatures(Xt,this.tileID.canonical,Mr.patternPositions))}return this.status="done",{buckets:Object.values(vt).filter(Kr=>!Kr.isEmpty()),featureIndex:Bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Br.image,imageAtlas:Mr,glyphMap:this.returnDependencies?rn:null,iconMap:this.returnDependencies?Fn:null,glyphPositions:this.returnDependencies?Br.positions:null}})}}function b(Ee,oe,ve){const p=new a.z(oe);for(const ze of Ee)ze.recalculate(p,ve)}class E{constructor(oe,ve,p){this.actor=oe,this.layerIndex=ve,this.availableImages=p,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(oe,ve){return a._(this,void 0,void 0,function*(){const p=yield a.l(oe.request,ve);try{return{vectorTile:new a.cs.VectorTile(new a.ct(p.data)),rawData:p.data,cacheControl:p.cacheControl,expires:p.expires}}catch(ze){const rt=new Uint8Array(p.data);let pt=`Unable to parse the tile at ${oe.request.url}, `;throw pt+=rt[0]===31&&rt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ze.message}`,new Error(pt)}})}loadTile(oe){return a._(this,void 0,void 0,function*(){const ve=oe.uid,p=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new a.cu(oe.request),ze=new g(oe);this.loading[ve]=ze;const rt=new AbortController;ze.abort=rt;try{const pt=yield this.loadVectorTile(oe,rt);if(delete this.loading[ve],!pt)return null;const Bt=pt.rawData,vt={};pt.expires&&(vt.expires=pt.expires),pt.cacheControl&&(vt.cacheControl=pt.cacheControl);const Xt={};if(p){const zt=p.finish();zt&&(Xt.resourceTiming=JSON.parse(JSON.stringify(zt)))}ze.vectorTile=pt.vectorTile;const tn=ze.parse(pt.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity);this.loaded[ve]=ze,this.fetching[ve]={rawTileData:Bt,cacheControl:vt,resourceTiming:Xt};try{const zt=yield tn;return a.e({rawTileData:Bt.slice(0)},zt,vt,Xt)}finally{delete this.fetching[ve]}}catch(pt){throw delete this.loading[ve],ze.status="done",this.loaded[ve]=ze,pt}})}reloadTile(oe){return a._(this,void 0,void 0,function*(){const ve=oe.uid;if(!this.loaded||!this.loaded[ve])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const p=this.loaded[ve];if(p.showCollisionBoxes=oe.showCollisionBoxes,p.status==="parsing"){const ze=yield p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity);let rt;if(this.fetching[ve]){const{rawTileData:pt,cacheControl:Bt,resourceTiming:vt}=this.fetching[ve];delete this.fetching[ve],rt=a.e({rawTileData:pt.slice(0)},ze,Bt,vt)}else rt=ze;return rt}if(p.status==="done"&&p.vectorTile)return p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,oe.subdivisionGranularity)})}abortTile(oe){return a._(this,void 0,void 0,function*(){const ve=this.loading,p=oe.uid;ve&&ve[p]&&ve[p].abort&&(ve[p].abort.abort(),delete ve[p])})}removeTile(oe){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[oe.uid]&&delete this.loaded[oe.uid]})}}class S{constructor(){this.loaded={}}loadTile(oe){return a._(this,void 0,void 0,function*(){const{uid:ve,encoding:p,rawImageData:ze,redFactor:rt,greenFactor:pt,blueFactor:Bt,baseShift:vt}=oe,Xt=ze.width+2,tn=ze.height+2,zt=a.b(ze)?new a.R({width:Xt,height:tn},yield a.cv(ze,-1,-1,Xt,tn)):ze,_t=new a.cw(ve,zt,p,rt,pt,Bt,vt);return this.loaded=this.loaded||{},this.loaded[ve]=_t,_t})}removeTile(oe){const ve=this.loaded,p=oe.uid;ve&&ve[p]&&delete ve[p]}}var O,k,U=function(){if(k)return O;function Ee(ve,p){if(ve.length!==0){oe(ve[0],p);for(var ze=1;ze<ve.length;ze++)oe(ve[ze],!p)}}function oe(ve,p){for(var ze=0,rt=0,pt=0,Bt=ve.length,vt=Bt-1;pt<Bt;vt=pt++){var Xt=(ve[pt][0]-ve[vt][0])*(ve[vt][1]+ve[pt][1]),tn=ze+Xt;rt+=Math.abs(ze)>=Math.abs(Xt)?ze-tn+Xt:Xt-tn+ze,ze=tn}ze+rt>=0!=!!p&&ve.reverse()}return k=1,O=function ve(p,ze){var rt,pt=p&&p.type;if(pt==="FeatureCollection")for(rt=0;rt<p.features.length;rt++)ve(p.features[rt],ze);else if(pt==="GeometryCollection")for(rt=0;rt<p.geometries.length;rt++)ve(p.geometries[rt],ze);else if(pt==="Feature")ve(p.geometry,ze);else if(pt==="Polygon")Ee(p.coordinates,ze);else if(pt==="MultiPolygon")for(rt=0;rt<p.coordinates.length;rt++)Ee(p.coordinates[rt],ze);return p}}(),z=a.cx(U);const q=a.cs.VectorTileFeature.prototype.toGeoJSON;class Q{constructor(oe){this._feature=oe,this.extent=a.X,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))}loadGeometry(){if(this._feature.type===1){const oe=[];for(const ve of this._feature.geometry)oe.push([new a.P(ve[0],ve[1])]);return oe}{const oe=[];for(const ve of this._feature.geometry){const p=[];for(const ze of ve)p.push(new a.P(ze[0],ze[1]));oe.push(p)}return oe}}toGeoJSON(oe,ve,p){return q.call(this,oe,ve,p)}}class re{constructor(oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.X,this.length=oe.length,this._features=oe}feature(oe){return new Q(this._features[oe])}}var X,Y,J,N={exports:{}},ie=function(){if(J)return N.exports;J=1;var Ee=a.cA(),oe=function(){if(Y)return X;Y=1;var tn=a.cy(),zt=a.cz().VectorTileFeature;function _t(Sn,Ar){this.options=Ar||{},this.features=Sn,this.length=Sn.length}function Tn(Sn,Ar){this.id=typeof Sn.id=="number"?Sn.id:void 0,this.type=Sn.type,this.rawGeometry=Sn.type===1?[Sn.geometry]:Sn.geometry,this.properties=Sn.tags,this.extent=Ar||4096}return X=_t,_t.prototype.feature=function(Sn){return new Tn(this.features[Sn],this.options.extent)},Tn.prototype.loadGeometry=function(){var Sn=this.rawGeometry;this.geometry=[];for(var Ar=0;Ar<Sn.length;Ar++){for(var wr=Sn[Ar],rn=[],Fn=0;Fn<wr.length;Fn++)rn.push(new tn(wr[Fn][0],wr[Fn][1]));this.geometry.push(rn)}return this.geometry},Tn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Sn=this.geometry,Ar=1/0,wr=-1/0,rn=1/0,Fn=-1/0,Rn=0;Rn<Sn.length;Rn++)for(var Br=Sn[Rn],Mr=0;Mr<Br.length;Mr++){var Kr=Br[Mr];Ar=Math.min(Ar,Kr.x),wr=Math.max(wr,Kr.x),rn=Math.min(rn,Kr.y),Fn=Math.max(Fn,Kr.y)}return[Ar,rn,wr,Fn]},Tn.prototype.toGeoJSON=zt.prototype.toGeoJSON,X}();function ve(tn){var zt=new Ee;return function(_t,Tn){for(var Sn in _t.layers)Tn.writeMessage(3,p,_t.layers[Sn])}(tn,zt),zt.finish()}function p(tn,zt){var _t;zt.writeVarintField(15,tn.version||1),zt.writeStringField(1,tn.name||""),zt.writeVarintField(5,tn.extent||4096);var Tn={keys:[],values:[],keycache:{},valuecache:{}};for(_t=0;_t<tn.length;_t++)Tn.feature=tn.feature(_t),zt.writeMessage(2,ze,Tn);var Sn=Tn.keys;for(_t=0;_t<Sn.length;_t++)zt.writeStringField(3,Sn[_t]);var Ar=Tn.values;for(_t=0;_t<Ar.length;_t++)zt.writeMessage(4,Xt,Ar[_t])}function ze(tn,zt){var _t=tn.feature;_t.id!==void 0&&zt.writeVarintField(1,_t.id),zt.writeMessage(2,rt,tn),zt.writeVarintField(3,_t.type),zt.writeMessage(4,vt,_t)}function rt(tn,zt){var _t=tn.feature,Tn=tn.keys,Sn=tn.values,Ar=tn.keycache,wr=tn.valuecache;for(var rn in _t.properties){var Fn=_t.properties[rn],Rn=Ar[rn];if(Fn!==null){Rn===void 0&&(Tn.push(rn),Ar[rn]=Rn=Tn.length-1),zt.writeVarint(Rn);var Br=typeof Fn;Br!=="string"&&Br!=="boolean"&&Br!=="number"&&(Fn=JSON.stringify(Fn));var Mr=Br+":"+Fn,Kr=wr[Mr];Kr===void 0&&(Sn.push(Fn),wr[Mr]=Kr=Sn.length-1),zt.writeVarint(Kr)}}}function pt(tn,zt){return(zt<<3)+(7&tn)}function Bt(tn){return tn<<1^tn>>31}function vt(tn,zt){for(var _t=tn.loadGeometry(),Tn=tn.type,Sn=0,Ar=0,wr=_t.length,rn=0;rn<wr;rn++){var Fn=_t[rn],Rn=1;Tn===1&&(Rn=Fn.length),zt.writeVarint(pt(1,Rn));for(var Br=Tn===3?Fn.length-1:Fn.length,Mr=0;Mr<Br;Mr++){Mr===1&&Tn!==1&&zt.writeVarint(pt(2,Br-1));var Kr=Fn[Mr].x-Sn,ir=Fn[Mr].y-Ar;zt.writeVarint(Bt(Kr)),zt.writeVarint(Bt(ir)),Sn+=Kr,Ar+=ir}Tn===3&&zt.writeVarint(pt(7,1))}}function Xt(tn,zt){var _t=typeof tn;_t==="string"?zt.writeStringField(1,tn):_t==="boolean"?zt.writeBooleanField(7,tn):_t==="number"&&(tn%1!=0?zt.writeDoubleField(3,tn):tn<0?zt.writeSVarintField(6,tn):zt.writeVarintField(5,tn))}return N.exports=ve,N.exports.fromVectorTileJs=ve,N.exports.fromGeojsonVt=function(tn,zt){zt=zt||{};var _t={};for(var Tn in tn)_t[Tn]=new oe(tn[Tn].features,zt),_t[Tn].name=Tn,_t[Tn].version=zt.version,_t[Tn].extent=zt.extent;return ve({layers:_t})},N.exports.GeoJSONWrapper=oe,N.exports}(),he=a.cx(ie);const de={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ee=>Ee},we=Math.fround||(fe=new Float32Array(1),Ee=>(fe[0]=+Ee,fe[0]));var fe;const be=3,Pe=5,pe=6;class it{constructor(oe){this.options=Object.assign(Object.create(de),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:ve,minZoom:p,maxZoom:ze}=this.options;ve&&console.time("total time");const rt=`prepare ${oe.length} points`;ve&&console.time(rt),this.points=oe;const pt=[];for(let vt=0;vt<oe.length;vt++){const Xt=oe[vt];if(!Xt.geometry)continue;const[tn,zt]=Xt.geometry.coordinates,_t=we(ht(tn)),Tn=we(De(zt));pt.push(_t,Tn,1/0,vt,-1,1),this.options.reduce&&pt.push(0)}let Bt=this.trees[ze+1]=this._createTree(pt);ve&&console.timeEnd(rt);for(let vt=ze;vt>=p;vt--){const Xt=+Date.now();Bt=this.trees[vt]=this._createTree(this._cluster(Bt,vt)),ve&&console.log("z%d: %d clusters in %dms",vt,Bt.numItems,+Date.now()-Xt)}return ve&&console.timeEnd("total time"),this}getClusters(oe,ve){let p=((oe[0]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,oe[1]));let rt=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const pt=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)p=-180,rt=180;else if(p>rt){const zt=this.getClusters([p,ze,180,pt],ve),_t=this.getClusters([-180,ze,rt,pt],ve);return zt.concat(_t)}const Bt=this.trees[this._limitZoom(ve)],vt=Bt.range(ht(p),De(pt),ht(rt),De(ze)),Xt=Bt.data,tn=[];for(const zt of vt){const _t=this.stride*zt;tn.push(Xt[_t+Pe]>1?We(Xt,_t,this.clusterProps):this.points[Xt[_t+be]])}return tn}getChildren(oe){const ve=this._getOriginId(oe),p=this._getOriginZoom(oe),ze="No cluster with the specified id.",rt=this.trees[p];if(!rt)throw new Error(ze);const pt=rt.data;if(ve*this.stride>=pt.length)throw new Error(ze);const Bt=this.options.radius/(this.options.extent*Math.pow(2,p-1)),vt=rt.within(pt[ve*this.stride],pt[ve*this.stride+1],Bt),Xt=[];for(const tn of vt){const zt=tn*this.stride;pt[zt+4]===oe&&Xt.push(pt[zt+Pe]>1?We(pt,zt,this.clusterProps):this.points[pt[zt+be]])}if(Xt.length===0)throw new Error(ze);return Xt}getLeaves(oe,ve,p){const ze=[];return this._appendLeaves(ze,oe,ve=ve||10,p=p||0,0),ze}getTile(oe,ve,p){const ze=this.trees[this._limitZoom(oe)],rt=Math.pow(2,oe),{extent:pt,radius:Bt}=this.options,vt=Bt/pt,Xt=(p-vt)/rt,tn=(p+1+vt)/rt,zt={features:[]};return this._addTileFeatures(ze.range((ve-vt)/rt,Xt,(ve+1+vt)/rt,tn),ze.data,ve,p,rt,zt),ve===0&&this._addTileFeatures(ze.range(1-vt/rt,Xt,1,tn),ze.data,rt,p,rt,zt),ve===rt-1&&this._addTileFeatures(ze.range(0,Xt,vt/rt,tn),ze.data,-1,p,rt,zt),zt.features.length?zt:null}getClusterExpansionZoom(oe){let ve=this._getOriginZoom(oe)-1;for(;ve<=this.options.maxZoom;){const p=this.getChildren(oe);if(ve++,p.length!==1)break;oe=p[0].properties.cluster_id}return ve}_appendLeaves(oe,ve,p,ze,rt){const pt=this.getChildren(ve);for(const Bt of pt){const vt=Bt.properties;if(vt&&vt.cluster?rt+vt.point_count<=ze?rt+=vt.point_count:rt=this._appendLeaves(oe,vt.cluster_id,p,ze,rt):rt<ze?rt++:oe.push(Bt),oe.length===p)break}return rt}_createTree(oe){const ve=new a.az(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let p=0;p<oe.length;p+=this.stride)ve.add(oe[p],oe[p+1]);return ve.finish(),ve.data=oe,ve}_addTileFeatures(oe,ve,p,ze,rt,pt){for(const Bt of oe){const vt=Bt*this.stride,Xt=ve[vt+Pe]>1;let tn,zt,_t;if(Xt)tn=$e(ve,vt,this.clusterProps),zt=ve[vt],_t=ve[vt+1];else{const Ar=this.points[ve[vt+be]];tn=Ar.properties;const[wr,rn]=Ar.geometry.coordinates;zt=ht(wr),_t=De(rn)}const Tn={type:1,geometry:[[Math.round(this.options.extent*(zt*rt-p)),Math.round(this.options.extent*(_t*rt-ze))]],tags:tn};let Sn;Sn=Xt||this.options.generateId?ve[vt+be]:this.points[ve[vt+be]].id,Sn!==void 0&&(Tn.id=Sn),pt.features.push(Tn)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,ve){const{radius:p,extent:ze,reduce:rt,minPoints:pt}=this.options,Bt=p/(ze*Math.pow(2,ve)),vt=oe.data,Xt=[],tn=this.stride;for(let zt=0;zt<vt.length;zt+=tn){if(vt[zt+2]<=ve)continue;vt[zt+2]=ve;const _t=vt[zt],Tn=vt[zt+1],Sn=oe.within(vt[zt],vt[zt+1],Bt),Ar=vt[zt+Pe];let wr=Ar;for(const rn of Sn){const Fn=rn*tn;vt[Fn+2]>ve&&(wr+=vt[Fn+Pe])}if(wr>Ar&&wr>=pt){let rn,Fn=_t*Ar,Rn=Tn*Ar,Br=-1;const Mr=((zt/tn|0)<<5)+(ve+1)+this.points.length;for(const Kr of Sn){const ir=Kr*tn;if(vt[ir+2]<=ve)continue;vt[ir+2]=ve;const co=vt[ir+Pe];Fn+=vt[ir]*co,Rn+=vt[ir+1]*co,vt[ir+4]=Mr,rt&&(rn||(rn=this._map(vt,zt,!0),Br=this.clusterProps.length,this.clusterProps.push(rn)),rt(rn,this._map(vt,ir)))}vt[zt+4]=Mr,Xt.push(Fn/wr,Rn/wr,1/0,Mr,-1,wr),rt&&Xt.push(Br)}else{for(let rn=0;rn<tn;rn++)Xt.push(vt[zt+rn]);if(wr>1)for(const rn of Sn){const Fn=rn*tn;if(!(vt[Fn+2]<=ve)){vt[Fn+2]=ve;for(let Rn=0;Rn<tn;Rn++)Xt.push(vt[Fn+Rn])}}}}return Xt}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,ve,p){if(oe[ve+Pe]>1){const pt=this.clusterProps[oe[ve+pe]];return p?Object.assign({},pt):pt}const ze=this.points[oe[ve+be]].properties,rt=this.options.map(ze);return p&&rt===ze?Object.assign({},rt):rt}}function We(Ee,oe,ve){return{type:"Feature",id:Ee[oe+be],properties:$e(Ee,oe,ve),geometry:{type:"Point",coordinates:[(p=Ee[oe],360*(p-.5)),Ne(Ee[oe+1])]}};var p}function $e(Ee,oe,ve){const p=Ee[oe+Pe],ze=p>=1e4?`${Math.round(p/1e3)}k`:p>=1e3?Math.round(p/100)/10+"k":p,rt=Ee[oe+pe],pt=rt===-1?{}:Object.assign({},ve[rt]);return Object.assign(pt,{cluster:!0,cluster_id:Ee[oe+be],point_count:p,point_count_abbreviated:ze})}function ht(Ee){return Ee/360+.5}function De(Ee){const oe=Math.sin(Ee*Math.PI/180),ve=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ve<0?0:ve>1?1:ve}function Ne(Ee){const oe=(180-360*Ee)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function at(Ee,oe,ve,p){let ze=p;const rt=oe+(ve-oe>>1);let pt,Bt=ve-oe;const vt=Ee[oe],Xt=Ee[oe+1],tn=Ee[ve],zt=Ee[ve+1];for(let _t=oe+3;_t<ve;_t+=3){const Tn=wt(Ee[_t],Ee[_t+1],vt,Xt,tn,zt);if(Tn>ze)pt=_t,ze=Tn;else if(Tn===ze){const Sn=Math.abs(_t-rt);Sn<Bt&&(pt=_t,Bt=Sn)}}ze>p&&(pt-oe>3&&at(Ee,oe,pt,p),Ee[pt+2]=ze,ve-pt>3&&at(Ee,pt,ve,p))}function wt(Ee,oe,ve,p,ze,rt){let pt=ze-ve,Bt=rt-p;if(pt!==0||Bt!==0){const vt=((Ee-ve)*pt+(oe-p)*Bt)/(pt*pt+Bt*Bt);vt>1?(ve=ze,p=rt):vt>0&&(ve+=pt*vt,p+=Bt*vt)}return pt=Ee-ve,Bt=oe-p,pt*pt+Bt*Bt}function Ct(Ee,oe,ve,p){const ze={id:Ee??null,type:oe,geometry:ve,tags:p,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")ft(ze,ve);else if(oe==="Polygon")ft(ze,ve[0]);else if(oe==="MultiLineString")for(const rt of ve)ft(ze,rt);else if(oe==="MultiPolygon")for(const rt of ve)ft(ze,rt[0]);return ze}function ft(Ee,oe){for(let ve=0;ve<oe.length;ve+=3)Ee.minX=Math.min(Ee.minX,oe[ve]),Ee.minY=Math.min(Ee.minY,oe[ve+1]),Ee.maxX=Math.max(Ee.maxX,oe[ve]),Ee.maxY=Math.max(Ee.maxY,oe[ve+1])}function Lt(Ee,oe,ve,p){if(!oe.geometry)return;const ze=oe.geometry.coordinates;if(ze&&ze.length===0)return;const rt=oe.geometry.type,pt=Math.pow(ve.tolerance/((1<<ve.maxZoom)*ve.extent),2);let Bt=[],vt=oe.id;if(ve.promoteId?vt=oe.properties[ve.promoteId]:ve.generateId&&(vt=p||0),rt==="Point")Kt(ze,Bt);else if(rt==="MultiPoint")for(const Xt of ze)Kt(Xt,Bt);else if(rt==="LineString")Fe(ze,Bt,pt,!1);else if(rt==="MultiLineString"){if(ve.lineMetrics){for(const Xt of ze)Bt=[],Fe(Xt,Bt,pt,!1),Ee.push(Ct(vt,"LineString",Bt,oe.properties));return}Te(ze,Bt,pt,!1)}else if(rt==="Polygon")Te(ze,Bt,pt,!0);else{if(rt!=="MultiPolygon"){if(rt==="GeometryCollection"){for(const Xt of oe.geometry.geometries)Lt(Ee,{id:vt,geometry:Xt,properties:oe.properties},ve,p);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Xt of ze){const tn=[];Te(Xt,tn,pt,!0),Bt.push(tn)}}Ee.push(Ct(vt,rt,Bt,oe.properties))}function Kt(Ee,oe){oe.push(Se(Ee[0]),Je(Ee[1]),0)}function Fe(Ee,oe,ve,p){let ze,rt,pt=0;for(let vt=0;vt<Ee.length;vt++){const Xt=Se(Ee[vt][0]),tn=Je(Ee[vt][1]);oe.push(Xt,tn,0),vt>0&&(pt+=p?(ze*tn-Xt*rt)/2:Math.sqrt(Math.pow(Xt-ze,2)+Math.pow(tn-rt,2))),ze=Xt,rt=tn}const Bt=oe.length-3;oe[2]=1,at(oe,0,Bt,ve),oe[Bt+2]=1,oe.size=Math.abs(pt),oe.start=0,oe.end=oe.size}function Te(Ee,oe,ve,p){for(let ze=0;ze<Ee.length;ze++){const rt=[];Fe(Ee[ze],rt,ve,p),oe.push(rt)}}function Se(Ee){return Ee/360+.5}function Je(Ee){const oe=Math.sin(Ee*Math.PI/180),ve=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return ve<0?0:ve>1?1:ve}function yt(Ee,oe,ve,p,ze,rt,pt,Bt){if(p/=oe,rt>=(ve/=oe)&&pt<p)return Ee;if(pt<ve||rt>=p)return null;const vt=[];for(const Xt of Ee){const tn=Xt.geometry;let zt=Xt.type;const _t=ze===0?Xt.minX:Xt.minY,Tn=ze===0?Xt.maxX:Xt.maxY;if(_t>=ve&&Tn<p){vt.push(Xt);continue}if(Tn<ve||_t>=p)continue;let Sn=[];if(zt==="Point"||zt==="MultiPoint")dt(tn,Sn,ve,p,ze);else if(zt==="LineString")Ut(tn,Sn,ve,p,ze,!1,Bt.lineMetrics);else if(zt==="MultiLineString")Nt(tn,Sn,ve,p,ze,!1);else if(zt==="Polygon")Nt(tn,Sn,ve,p,ze,!0);else if(zt==="MultiPolygon")for(const Ar of tn){const wr=[];Nt(Ar,wr,ve,p,ze,!0),wr.length&&Sn.push(wr)}if(Sn.length){if(Bt.lineMetrics&&zt==="LineString"){for(const Ar of Sn)vt.push(Ct(Xt.id,zt,Ar,Xt.tags));continue}zt!=="LineString"&&zt!=="MultiLineString"||(Sn.length===1?(zt="LineString",Sn=Sn[0]):zt="MultiLineString"),zt!=="Point"&&zt!=="MultiPoint"||(zt=Sn.length===3?"Point":"MultiPoint"),vt.push(Ct(Xt.id,zt,Sn,Xt.tags))}}return vt.length?vt:null}function dt(Ee,oe,ve,p,ze){for(let rt=0;rt<Ee.length;rt+=3){const pt=Ee[rt+ze];pt>=ve&&pt<=p&&yn(oe,Ee[rt],Ee[rt+1],Ee[rt+2])}}function Ut(Ee,oe,ve,p,ze,rt,pt){let Bt=en(Ee);const vt=ze===0?jn:Rr;let Xt,tn,zt=Ee.start;for(let wr=0;wr<Ee.length-3;wr+=3){const rn=Ee[wr],Fn=Ee[wr+1],Rn=Ee[wr+2],Br=Ee[wr+3],Mr=Ee[wr+4],Kr=ze===0?rn:Fn,ir=ze===0?Br:Mr;let co=!1;pt&&(Xt=Math.sqrt(Math.pow(rn-Br,2)+Math.pow(Fn-Mr,2))),Kr<ve?ir>ve&&(tn=vt(Bt,rn,Fn,Br,Mr,ve),pt&&(Bt.start=zt+Xt*tn)):Kr>p?ir<p&&(tn=vt(Bt,rn,Fn,Br,Mr,p),pt&&(Bt.start=zt+Xt*tn)):yn(Bt,rn,Fn,Rn),ir<ve&&Kr>=ve&&(tn=vt(Bt,rn,Fn,Br,Mr,ve),co=!0),ir>p&&Kr<=p&&(tn=vt(Bt,rn,Fn,Br,Mr,p),co=!0),!rt&&co&&(pt&&(Bt.end=zt+Xt*tn),oe.push(Bt),Bt=en(Ee)),pt&&(zt+=Xt)}let _t=Ee.length-3;const Tn=Ee[_t],Sn=Ee[_t+1],Ar=ze===0?Tn:Sn;Ar>=ve&&Ar<=p&&yn(Bt,Tn,Sn,Ee[_t+2]),_t=Bt.length-3,rt&&_t>=3&&(Bt[_t]!==Bt[0]||Bt[_t+1]!==Bt[1])&&yn(Bt,Bt[0],Bt[1],Bt[2]),Bt.length&&oe.push(Bt)}function en(Ee){const oe=[];return oe.size=Ee.size,oe.start=Ee.start,oe.end=Ee.end,oe}function Nt(Ee,oe,ve,p,ze,rt){for(const pt of Ee)Ut(pt,oe,ve,p,ze,rt,!1)}function yn(Ee,oe,ve,p){Ee.push(oe,ve,p)}function jn(Ee,oe,ve,p,ze,rt){const pt=(rt-oe)/(p-oe);return yn(Ee,rt,ve+(ze-ve)*pt,1),pt}function Rr(Ee,oe,ve,p,ze,rt){const pt=(rt-ve)/(ze-ve);return yn(Ee,oe+(p-oe)*pt,rt,1),pt}function sr(Ee,oe){const ve=[];for(let p=0;p<Ee.length;p++){const ze=Ee[p],rt=ze.type;let pt;if(rt==="Point"||rt==="MultiPoint"||rt==="LineString")pt=Jn(ze.geometry,oe);else if(rt==="MultiLineString"||rt==="Polygon"){pt=[];for(const Bt of ze.geometry)pt.push(Jn(Bt,oe))}else if(rt==="MultiPolygon"){pt=[];for(const Bt of ze.geometry){const vt=[];for(const Xt of Bt)vt.push(Jn(Xt,oe));pt.push(vt)}}ve.push(Ct(ze.id,rt,pt,ze.tags))}return ve}function Jn(Ee,oe){const ve=[];ve.size=Ee.size,Ee.start!==void 0&&(ve.start=Ee.start,ve.end=Ee.end);for(let p=0;p<Ee.length;p+=3)ve.push(Ee[p]+oe,Ee[p+1],Ee[p+2]);return ve}function mr(Ee,oe){if(Ee.transformed)return Ee;const ve=1<<Ee.z,p=Ee.x,ze=Ee.y;for(const rt of Ee.features){const pt=rt.geometry,Bt=rt.type;if(rt.geometry=[],Bt===1)for(let vt=0;vt<pt.length;vt+=2)rt.geometry.push(pr(pt[vt],pt[vt+1],oe,ve,p,ze));else for(let vt=0;vt<pt.length;vt++){const Xt=[];for(let tn=0;tn<pt[vt].length;tn+=2)Xt.push(pr(pt[vt][tn],pt[vt][tn+1],oe,ve,p,ze));rt.geometry.push(Xt)}}return Ee.transformed=!0,Ee}function pr(Ee,oe,ve,p,ze,rt){return[Math.round(ve*(Ee*p-ze)),Math.round(ve*(oe*p-rt))]}function xr(Ee,oe,ve,p,ze){const rt=oe===ze.maxZoom?0:ze.tolerance/((1<<oe)*ze.extent),pt={features:[],numPoints:0,numSimplified:0,numFeatures:Ee.length,source:null,x:ve,y:p,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Bt of Ee)Qn(pt,Bt,rt,ze);return pt}function Qn(Ee,oe,ve,p){const ze=oe.geometry,rt=oe.type,pt=[];if(Ee.minX=Math.min(Ee.minX,oe.minX),Ee.minY=Math.min(Ee.minY,oe.minY),Ee.maxX=Math.max(Ee.maxX,oe.maxX),Ee.maxY=Math.max(Ee.maxY,oe.maxY),rt==="Point"||rt==="MultiPoint")for(let Bt=0;Bt<ze.length;Bt+=3)pt.push(ze[Bt],ze[Bt+1]),Ee.numPoints++,Ee.numSimplified++;else if(rt==="LineString")Er(pt,ze,Ee,ve,!1,!1);else if(rt==="MultiLineString"||rt==="Polygon")for(let Bt=0;Bt<ze.length;Bt++)Er(pt,ze[Bt],Ee,ve,rt==="Polygon",Bt===0);else if(rt==="MultiPolygon")for(let Bt=0;Bt<ze.length;Bt++){const vt=ze[Bt];for(let Xt=0;Xt<vt.length;Xt++)Er(pt,vt[Xt],Ee,ve,!0,Xt===0)}if(pt.length){let Bt=oe.tags||null;if(rt==="LineString"&&p.lineMetrics){Bt={};for(const Xt in oe.tags)Bt[Xt]=oe.tags[Xt];Bt.mapbox_clip_start=ze.start/ze.size,Bt.mapbox_clip_end=ze.end/ze.size}const vt={geometry:pt,type:rt==="Polygon"||rt==="MultiPolygon"?3:rt==="LineString"||rt==="MultiLineString"?2:1,tags:Bt};oe.id!==null&&(vt.id=oe.id),Ee.features.push(vt)}}function Er(Ee,oe,ve,p,ze,rt){const pt=p*p;if(p>0&&oe.size<(ze?pt:p))return void(ve.numPoints+=oe.length/3);const Bt=[];for(let vt=0;vt<oe.length;vt+=3)(p===0||oe[vt+2]>pt)&&(ve.numSimplified++,Bt.push(oe[vt],oe[vt+1])),ve.numPoints++;ze&&function(vt,Xt){let tn=0;for(let zt=0,_t=vt.length,Tn=_t-2;zt<_t;Tn=zt,zt+=2)tn+=(vt[zt]-vt[Tn])*(vt[zt+1]+vt[Tn+1]);if(tn>0===Xt)for(let zt=0,_t=vt.length;zt<_t/2;zt+=2){const Tn=vt[zt],Sn=vt[zt+1];vt[zt]=vt[_t-2-zt],vt[zt+1]=vt[_t-1-zt],vt[_t-2-zt]=Tn,vt[_t-1-zt]=Sn}}(Bt,rt),Ee.push(Bt)}const Ge={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ae{constructor(oe,ve){const p=(ve=this.options=function(rt,pt){for(const Bt in pt)rt[Bt]=pt[Bt];return rt}(Object.create(Ge),ve)).debug;if(p&&console.time("preprocess data"),ve.maxZoom<0||ve.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ve.promoteId&&ve.generateId)throw new Error("promoteId and generateId cannot be used together.");let ze=function(rt,pt){const Bt=[];if(rt.type==="FeatureCollection")for(let vt=0;vt<rt.features.length;vt++)Lt(Bt,rt.features[vt],pt,vt);else Lt(Bt,rt.type==="Feature"?rt:{geometry:rt},pt);return Bt}(oe,ve);this.tiles={},this.tileCoords=[],p&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ve.indexMaxZoom,ve.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ze=function(rt,pt){const Bt=pt.buffer/pt.extent;let vt=rt;const Xt=yt(rt,1,-1-Bt,Bt,0,-1,2,pt),tn=yt(rt,1,1-Bt,2+Bt,0,-1,2,pt);return(Xt||tn)&&(vt=yt(rt,1,-Bt,1+Bt,0,-1,2,pt)||[],Xt&&(vt=sr(Xt,1).concat(vt)),tn&&(vt=vt.concat(sr(tn,-1)))),vt}(ze,ve),ze.length&&this.splitTile(ze,0,0,0),p&&(ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(oe,ve,p,ze,rt,pt,Bt){const vt=[oe,ve,p,ze],Xt=this.options,tn=Xt.debug;for(;vt.length;){ze=vt.pop(),p=vt.pop(),ve=vt.pop(),oe=vt.pop();const zt=1<<ve,_t=me(ve,p,ze);let Tn=this.tiles[_t];if(!Tn&&(tn>1&&console.time("creation"),Tn=this.tiles[_t]=xr(oe,ve,p,ze,Xt),this.tileCoords.push({z:ve,x:p,y:ze}),tn)){tn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ve,p,ze,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));const co=`z${ve}`;this.stats[co]=(this.stats[co]||0)+1,this.total++}if(Tn.source=oe,rt==null){if(ve===Xt.indexMaxZoom||Tn.numPoints<=Xt.indexMaxPoints)continue}else{if(ve===Xt.maxZoom||ve===rt)continue;if(rt!=null){const co=rt-ve;if(p!==pt>>co||ze!==Bt>>co)continue}}if(Tn.source=null,oe.length===0)continue;tn>1&&console.time("clipping");const Sn=.5*Xt.buffer/Xt.extent,Ar=.5-Sn,wr=.5+Sn,rn=1+Sn;let Fn=null,Rn=null,Br=null,Mr=null,Kr=yt(oe,zt,p-Sn,p+wr,0,Tn.minX,Tn.maxX,Xt),ir=yt(oe,zt,p+Ar,p+rn,0,Tn.minX,Tn.maxX,Xt);oe=null,Kr&&(Fn=yt(Kr,zt,ze-Sn,ze+wr,1,Tn.minY,Tn.maxY,Xt),Rn=yt(Kr,zt,ze+Ar,ze+rn,1,Tn.minY,Tn.maxY,Xt),Kr=null),ir&&(Br=yt(ir,zt,ze-Sn,ze+wr,1,Tn.minY,Tn.maxY,Xt),Mr=yt(ir,zt,ze+Ar,ze+rn,1,Tn.minY,Tn.maxY,Xt),ir=null),tn>1&&console.timeEnd("clipping"),vt.push(Fn||[],ve+1,2*p,2*ze),vt.push(Rn||[],ve+1,2*p,2*ze+1),vt.push(Br||[],ve+1,2*p+1,2*ze),vt.push(Mr||[],ve+1,2*p+1,2*ze+1)}}getTile(oe,ve,p){oe=+oe,ve=+ve,p=+p;const ze=this.options,{extent:rt,debug:pt}=ze;if(oe<0||oe>24)return null;const Bt=1<<oe,vt=me(oe,ve=ve+Bt&Bt-1,p);if(this.tiles[vt])return mr(this.tiles[vt],rt);pt>1&&console.log("drilling down to z%d-%d-%d",oe,ve,p);let Xt,tn=oe,zt=ve,_t=p;for(;!Xt&&tn>0;)tn--,zt>>=1,_t>>=1,Xt=this.tiles[me(tn,zt,_t)];return Xt&&Xt.source?(pt>1&&(console.log("found parent tile z%d-%d-%d",tn,zt,_t),console.time("drilling down")),this.splitTile(Xt.source,tn,zt,_t,oe,ve,p),pt>1&&console.timeEnd("drilling down"),this.tiles[vt]?mr(this.tiles[vt],rt):null):null}}function me(Ee,oe,ve){return 32*((1<<Ee)*ve+oe)+Ee}function Xe(Ee,oe){return oe?Ee.properties[oe]:Ee.id}function Et(Ee,oe){if(Ee==null)return!0;if(Ee.type==="Feature")return Xe(Ee,oe)!=null;if(Ee.type==="FeatureCollection"){const ve=new Set;for(const p of Ee.features){const ze=Xe(p,oe);if(ze==null||ve.has(ze))return!1;ve.add(ze)}return!0}return!1}function Yt(Ee,oe){const ve=new Map;if(Ee!=null)if(Ee.type==="Feature")ve.set(Xe(Ee,oe),Ee);else for(const p of Ee.features)ve.set(Xe(p,oe),p);return ve}class nn extends E{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(oe,ve){return a._(this,void 0,void 0,function*(){const p=oe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ze=this._geoJSONIndex.getTile(p.z,p.x,p.y);if(!ze)return null;const rt=new re(ze.features);let pt=he(rt);return pt.byteOffset===0&&pt.byteLength===pt.buffer.byteLength||(pt=new Uint8Array(pt)),{vectorTile:rt,rawData:pt.buffer}})}loadData(oe){return a._(this,void 0,void 0,function*(){var ve;(ve=this._pendingRequest)===null||ve===void 0||ve.abort();const p=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new a.cu(oe.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(oe,this._pendingRequest),this._geoJSONIndex=oe.cluster?new it(function({superclusterOptions:pt,clusterProperties:Bt}){if(!Bt||!pt)return pt;const vt={},Xt={},tn={accumulated:null,zoom:0},zt={properties:null},_t=Object.keys(Bt);for(const Tn of _t){const[Sn,Ar]=Bt[Tn],wr=a.cB(Ar),rn=a.cB(typeof Sn=="string"?[Sn,["accumulated"],["get",Tn]]:Sn);vt[Tn]=wr.value,Xt[Tn]=rn.value}return pt.map=Tn=>{zt.properties=Tn;const Sn={};for(const Ar of _t)Sn[Ar]=vt[Ar].evaluate(tn,zt);return Sn},pt.reduce=(Tn,Sn)=>{zt.properties=Sn;for(const Ar of _t)tn.accumulated=Tn[Ar],Tn[Ar]=Xt[Ar].evaluate(tn,zt)},pt}(oe)).load((yield this._pendingData).features):(ze=yield this._pendingData,new Ae(ze,oe.geojsonVtOptions)),this.loaded={};const rt={};if(p){const pt=p.finish();pt&&(rt.resourceTiming={},rt.resourceTiming[oe.source]=JSON.parse(JSON.stringify(pt)))}return rt}catch(rt){if(delete this._pendingRequest,a.cf(rt))return{abandoned:!0};throw rt}var ze})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(oe){const ve=this.loaded;return ve&&ve[oe.uid]?super.reloadTile(oe):this.loadTile(oe)}loadAndProcessGeoJSON(oe,ve){return a._(this,void 0,void 0,function*(){let p=yield this.loadGeoJSON(oe,ve);if(delete this._pendingRequest,typeof p!="object")throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(z(p,!0),oe.filter){const ze=a.cB(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ze.result==="error")throw new Error(ze.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));p={type:"FeatureCollection",features:p.features.filter(pt=>ze.value.evaluate({zoom:0},pt))}}return p})}loadGeoJSON(oe,ve){return a._(this,void 0,void 0,function*(){const{promoteId:p}=oe;if(oe.request){const ze=yield a.h(oe.request,ve);return this._dataUpdateable=Et(ze.data,p)?Yt(ze.data,p):void 0,ze.data}if(typeof oe.data=="string")try{const ze=JSON.parse(oe.data);return this._dataUpdateable=Et(ze,p)?Yt(ze,p):void 0,ze}catch{throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`)}if(!oe.dataDiff)throw new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${oe.source}`);return function(ze,rt,pt){var Bt,vt,Xt,tn;if(rt.removeAll&&ze.clear(),rt.remove)for(const zt of rt.remove)ze.delete(zt);if(rt.add)for(const zt of rt.add){const _t=Xe(zt,pt);_t!=null&&ze.set(_t,zt)}if(rt.update)for(const zt of rt.update){let _t=ze.get(zt.id);if(_t==null)continue;const Tn=!zt.removeAllProperties&&(((Bt=zt.removeProperties)===null||Bt===void 0?void 0:Bt.length)>0||((vt=zt.addOrUpdateProperties)===null||vt===void 0?void 0:vt.length)>0);if((zt.newGeometry||zt.removeAllProperties||Tn)&&(_t=Object.assign({},_t),ze.set(zt.id,_t),Tn&&(_t.properties=Object.assign({},_t.properties))),zt.newGeometry&&(_t.geometry=zt.newGeometry),zt.removeAllProperties)_t.properties={};else if(((Xt=zt.removeProperties)===null||Xt===void 0?void 0:Xt.length)>0)for(const Sn of zt.removeProperties)Object.prototype.hasOwnProperty.call(_t.properties,Sn)&&delete _t.properties[Sn];if(((tn=zt.addOrUpdateProperties)===null||tn===void 0?void 0:tn.length)>0)for(const{key:Sn,value:Ar}of zt.addOrUpdateProperties)_t.properties[Sn]=Ar}}(this._dataUpdateable,oe.dataDiff,p),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(oe){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(oe){return this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId)}getClusterChildren(oe){return this._geoJSONIndex.getChildren(oe.clusterId)}getClusterLeaves(oe){return this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset)}}class rr{constructor(oe){this.self=oe,this.actor=new a.F(oe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ve,p)=>{if(this.externalWorkerSourceTypes[ve])throw new Error(`Worker source with name "${ve}" already registered.`);this.externalWorkerSourceTypes[ve]=p},this.self.addProtocol=a.ch,this.self.removeProtocol=a.ci,this.self.registerRTLTextPlugin=ve=>{a.cC.setMethods(ve)},this.actor.registerMessageHandler("LDT",(ve,p)=>this._getDEMWorkerSource(ve,p.source).loadTile(p)),this.actor.registerMessageHandler("RDT",(ve,p)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ve,p.source).removeTile(p)})),this.actor.registerMessageHandler("GCEZ",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterExpansionZoom(p)})),this.actor.registerMessageHandler("GCC",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterChildren(p)})),this.actor.registerMessageHandler("GCL",(ve,p)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ve,p.type,p.source).getClusterLeaves(p)})),this.actor.registerMessageHandler("LD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadData(p)),this.actor.registerMessageHandler("GD",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).getData()),this.actor.registerMessageHandler("LT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).loadTile(p)),this.actor.registerMessageHandler("RT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).reloadTile(p)),this.actor.registerMessageHandler("AT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).abortTile(p)),this.actor.registerMessageHandler("RMT",(ve,p)=>this._getWorkerSource(ve,p.type,p.source).removeTile(p)),this.actor.registerMessageHandler("RS",(ve,p)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[ve]||!this.workerSources[ve][p.type]||!this.workerSources[ve][p.type][p.source])return;const ze=this.workerSources[ve][p.type][p.source];delete this.workerSources[ve][p.type][p.source],ze.removeSource!==void 0&&ze.removeSource(p)})),this.actor.registerMessageHandler("RM",ve=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[ve],delete this.availableImages[ve],delete this.workerSources[ve],delete this.demWorkerSources[ve]})),this.actor.registerMessageHandler("SR",(ve,p)=>a._(this,void 0,void 0,function*(){this.referrer=p})),this.actor.registerMessageHandler("SRPS",(ve,p)=>this._syncRTLPluginState(ve,p)),this.actor.registerMessageHandler("IS",(ve,p)=>a._(this,void 0,void 0,function*(){this.self.importScripts(p)})),this.actor.registerMessageHandler("SI",(ve,p)=>this._setImages(ve,p)),this.actor.registerMessageHandler("UL",(ve,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ve).update(p.layers,p.removedIds)})),this.actor.registerMessageHandler("SL",(ve,p)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ve).replace(p)}))}_setImages(oe,ve){return a._(this,void 0,void 0,function*(){this.availableImages[oe]=ve;for(const p in this.workerSources[oe]){const ze=this.workerSources[oe][p];for(const rt in ze)ze[rt].availableImages=ve}})}_syncRTLPluginState(oe,ve){return a._(this,void 0,void 0,function*(){return yield a.cC.syncState(ve,this.self.importScripts)})}_getAvailableImages(oe){let ve=this.availableImages[oe];return ve||(ve=[]),ve}_getLayerIndex(oe){let ve=this.layerIndexes[oe];return ve||(ve=this.layerIndexes[oe]=new o),ve}_getWorkerSource(oe,ve,p){if(this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][ve]||(this.workerSources[oe][ve]={}),!this.workerSources[oe][ve][p]){const ze={sendAsync:(rt,pt)=>(rt.targetMapId=oe,this.actor.sendAsync(rt,pt))};switch(ve){case"vector":this.workerSources[oe][ve][p]=new E(ze,this._getLayerIndex(oe),this._getAvailableImages(oe));break;case"geojson":this.workerSources[oe][ve][p]=new nn(ze,this._getLayerIndex(oe),this._getAvailableImages(oe));break;default:this.workerSources[oe][ve][p]=new this.externalWorkerSourceTypes[ve](ze,this._getLayerIndex(oe),this._getAvailableImages(oe))}}return this.workerSources[oe][ve][p]}_getDEMWorkerSource(oe,ve){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][ve]||(this.demWorkerSources[oe][ve]=new S),this.demWorkerSources[oe][ve]}}return a.i(self)&&(self.worker=new rr(self)),rr}),i("index",["exports","./shared"],function(a,o){var d="5.0.1";function g(){var T=new o.A(4);return o.A!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T}let b,E;const S={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:T=>new Promise((l,c)=>{const C=requestAnimationFrame(l);T.signal.addEventListener("abort",()=>{cancelAnimationFrame(C),c(o.c())})}),getImageData(T,l=0){return this.getImageCanvasContext(T).getImageData(-l,-l,T.width+2*l,T.height+2*l)},getImageCanvasContext(T){const l=window.document.createElement("canvas"),c=l.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return l.width=T.width,l.height=T.height,c.drawImage(T,0,0,T.width,T.height),c},resolveURL:T=>(b||(b=document.createElement("a")),b.href=T,b.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class O{static testProp(l){if(!O.docStyle)return l[0];for(let c=0;c<l.length;c++)if(l[c]in O.docStyle)return l[c];return l[0]}static create(l,c,C){const M=window.document.createElement(l);return c!==void 0&&(M.className=c),C&&C.appendChild(M),M}static createNS(l,c){return window.document.createElementNS(l,c)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(l,c){l.style[O.transformProp]=c}static addEventListener(l,c,C,M={}){l.addEventListener(c,C,"passive"in M?M:M.capture)}static removeEventListener(l,c,C,M={}){l.removeEventListener(c,C,"passive"in M?M:M.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static getScale(l){const c=l.getBoundingClientRect();return{x:c.width/l.offsetWidth||1,y:c.height/l.offsetHeight||1,boundingClientRect:c}}static getPoint(l,c,C){const M=c.boundingClientRect;return new o.P((C.clientX-M.left)/c.x-l.clientLeft,(C.clientY-M.top)/c.y-l.clientTop)}static mousePos(l,c){const C=O.getScale(l);return O.getPoint(l,C,c)}static touchPos(l,c){const C=[],M=O.getScale(l);for(let R=0;R<c.length;R++)C.push(O.getPoint(l,M,c[R]));return C}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const c=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),C=c.querySelectorAll("script");for(const M of C)M.remove();return O.clean(c),c.innerHTML}static isPossiblyDangerous(l,c){const C=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!C.includes("javascript:")&&!C.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const c=l.children;for(const C of c)O.removeAttributes(C),O.clean(C)}static removeAttributes(l){for(const{name:c,value:C}of l.attributes)O.isPossiblyDangerous(c,C)&&l.removeAttribute(c)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(T){!q&&z&&(Q?re(T):U=T)}};let U,z,q=!1,Q=!1;function re(T){const l=T.createTexture();T.bindTexture(T.TEXTURE_2D,l);try{if(T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,z),T.isContextLost())return;k.supported=!0}catch{}T.deleteTexture(l),q=!0}var X;typeof document<"u"&&(z=document.createElement("img"),z.onload=()=>{U&&re(U),U=null,Q=!0},z.onerror=()=>{q=!0,U=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(T){let l,c,C,M;T.resetRequestQueue=()=>{l=[],c=0,C=0,M={}},T.addThrottleControl=te=>{const se=C++;return M[se]=te,se},T.removeThrottleControl=te=>{delete M[te],j()},T.getImage=(te,se,xe=!0)=>new Promise((Oe,ke)=>{k.supported&&(te.headers||(te.headers={}),te.headers.accept="image/webp,*/*"),o.e(te,{type:"image"}),l.push({abortController:se,requestParameters:te,supportImageRefresh:xe,state:"queued",onError:qe=>{ke(qe)},onSuccess:qe=>{Oe(qe)}}),j()});const R=te=>o._(this,void 0,void 0,function*(){te.state="running";const{requestParameters:se,supportImageRefresh:xe,onError:Oe,onSuccess:ke,abortController:qe}=te,Ve=xe===!1&&!o.i(self)&&!o.g(se.url)&&(!se.headers||Object.keys(se.headers).reduce((At,mt)=>At&&mt==="accept",!0));c++;const ut=Ve?$(se,qe):o.m(se,qe);try{const At=yield ut;delete te.abortController,te.state="completed",At.data instanceof HTMLImageElement||o.b(At.data)?ke(At):At.data&&ke({data:yield(ot=At.data,typeof createImageBitmap=="function"?o.d(ot):o.f(ot)),cacheControl:At.cacheControl,expires:At.expires})}catch(At){delete te.abortController,Oe(At)}finally{c--,j()}var ot}),j=()=>{const te=(()=>{for(const se of Object.keys(M))if(M[se]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let se=c;se<te&&l.length>0;se++){const xe=l.shift();xe.abortController.signal.aborted?se--:R(xe)}},$=(te,se)=>new Promise((xe,Oe)=>{const ke=new Image,qe=te.url,Ve=te.credentials;Ve&&Ve==="include"?ke.crossOrigin="use-credentials":(Ve&&Ve==="same-origin"||!o.s(qe))&&(ke.crossOrigin="anonymous"),se.signal.addEventListener("abort",()=>{ke.src="",Oe(o.c())}),ke.fetchPriority="high",ke.onload=()=>{ke.onerror=ke.onload=null,xe({data:ke})},ke.onerror=()=>{ke.onerror=ke.onload=null,se.signal.aborted||Oe(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ke.src=qe})}(X||(X={})),X.resetRequestQueue();class Y{constructor(l){this._transformRequestFn=l}transformRequest(l,c){return this._transformRequestFn&&this._transformRequestFn(l,c)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function J(T){const l=[];if(typeof T=="string")l.push({id:"default",url:T});else if(T&&T.length>0){const c=[];for(const{id:C,url:M}of T){const R=`${C}${M}`;c.indexOf(R)===-1&&(c.push(R),l.push({id:C,url:M}))}}return l}function N(T,l,c){try{const C=new URL(T);return C.pathname+=`${l}${c}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${T}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class ie{constructor(l,c,C,M){this.context=l,this.format=C,this.texture=l.gl.createTexture(),this.update(c,M)}update(l,c,C){const{width:M,height:R}=l,j=!(this.size&&this.size[0]===M&&this.size[1]===R||C),{context:$}=this,{gl:te}=$;if(this.useMipmap=!!(c&&c.useMipmap),te.bindTexture(te.TEXTURE_2D,this.texture),$.pixelStoreUnpackFlipY.set(!1),$.pixelStoreUnpack.set(1),$.pixelStoreUnpackPremultiplyAlpha.set(this.format===te.RGBA&&(!c||c.premultiply!==!1)),j)this.size=[M,R],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?te.texImage2D(te.TEXTURE_2D,0,this.format,this.format,te.UNSIGNED_BYTE,l):te.texImage2D(te.TEXTURE_2D,0,this.format,M,R,0,this.format,te.UNSIGNED_BYTE,l.data);else{const{x:se,y:xe}=C||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.b(l)?te.texSubImage2D(te.TEXTURE_2D,0,se,xe,te.RGBA,te.UNSIGNED_BYTE,l):te.texSubImage2D(te.TEXTURE_2D,0,se,xe,M,R,te.RGBA,te.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&te.generateMipmap(te.TEXTURE_2D)}bind(l,c,C){const{context:M}=this,{gl:R}=M;R.bindTexture(R.TEXTURE_2D,this.texture),C!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=R.LINEAR),l!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,l),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,C||l),this.filter=l),c!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,c),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function he(T){const{userImage:l}=T;return!!(l&&l.render&&l.render())&&(T.data.replace(new Uint8Array(l.data.buffer)),!0)}class de extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:c,promiseResolve:C}of this.requestors)C(this._getImagesForIds(c));this.requestors=[]}}getImage(l){const c=this.images[l];if(c&&!c.data&&c.spriteData){const C=c.spriteData;c.data=new o.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),c.spriteData=null}return c}addImage(l,c){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,c)&&(this.images[l]=c)}_validate(l,c){let C=!0;const M=c.data||c.spriteData;return this._validateStretch(c.stretchX,M&&M.width)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchX" value`))),C=!1),this._validateStretch(c.stretchY,M&&M.height)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "stretchY" value`))),C=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${l}" has invalid "content" value`))),C=!1),C}_validateStretch(l,c){if(!l)return!0;let C=0;for(const M of l){if(M[0]<C||M[1]<M[0]||c<M[1])return!1;C=M[1]}return!0}_validateContent(l,c){if(!l)return!0;if(l.length!==4)return!1;const C=c.spriteData,M=C&&C.width||c.data.width,R=C&&C.height||c.data.height;return!(l[0]<0||M<l[0]||l[1]<0||R<l[1]||l[2]<0||M<l[2]||l[3]<0||R<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,c,C=!0){const M=this.getImage(l);if(C&&(M.data.width!==c.data.width||M.data.height!==c.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=M.version+1,this.images[l]=c,this.updatedImages[l]=!0}removeImage(l){const c=this.images[l];delete this.images[l],delete this.patterns[l],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise((c,C)=>{let M=!0;if(!this.isLoaded())for(const R of l)this.images[R]||(M=!1);this.isLoaded()||M?c(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:c})})}_getImagesForIds(l){const c={};for(const C of l){let M=this.getImage(C);M||(this.fire(new o.k("styleimagemissing",{id:C})),M=this.getImage(C)),M?c[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:l,height:c}=this.atlasImage;return{width:l,height:c}}getPattern(l){const c=this.patterns[l],C=this.getImage(l);if(!C)return null;if(c&&c.position.version===C.version)return c.position;if(c)c.position.version=C.version;else{const M={w:C.data.width+2,h:C.data.height+2,x:0,y:0},R=new o.I(M,C);this.patterns[l]={bin:M,position:R}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const c=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ie(l,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const R in this.patterns)l.push(this.patterns[R].bin);const{w:c,h:C}=o.p(l),M=this.atlasImage;M.resize({width:c||1,height:C||1});for(const R in this.patterns){const{bin:j}=this.patterns[R],$=j.x+1,te=j.y+1,se=this.getImage(R).data,xe=se.width,Oe=se.height;o.R.copy(se,M,{x:0,y:0},{x:$,y:te},{width:xe,height:Oe}),o.R.copy(se,M,{x:0,y:Oe-1},{x:$,y:te-1},{width:xe,height:1}),o.R.copy(se,M,{x:0,y:0},{x:$,y:te+Oe},{width:xe,height:1}),o.R.copy(se,M,{x:xe-1,y:0},{x:$-1,y:te},{width:1,height:Oe}),o.R.copy(se,M,{x:0,y:0},{x:$+xe,y:te},{width:1,height:Oe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const c of l){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const C=this.getImage(c);C||o.w(`Image with ID: "${c}" was not found`),he(C)&&this.updateImage(c,C)}}}const we=1e20;function fe(T,l,c,C,M,R,j,$,te){for(let se=l;se<l+C;se++)be(T,c*R+se,R,M,j,$,te);for(let se=c;se<c+M;se++)be(T,se*R+l,1,C,j,$,te)}function be(T,l,c,C,M,R,j){R[0]=0,j[0]=-1e20,j[1]=we,M[0]=T[l];for(let $=1,te=0,se=0;$<C;$++){M[$]=T[l+$*c];const xe=$*$;do{const Oe=R[te];se=(M[$]-M[Oe]+xe-Oe*Oe)/($-Oe)/2}while(se<=j[te]&&--te>-1);te++,R[te]=$,j[te]=se,j[te+1]=we}for(let $=0,te=0;$<C;$++){for(;j[te+1]<$;)te++;const se=R[te],xe=$-se;T[l+$*c]=M[se]+xe*xe}}class Pe{constructor(l,c){this.requestManager=l,this.localIdeographFontFamily=c,this.entries={}}setURL(l){this.url=l}getGlyphs(l){return o._(this,void 0,void 0,function*(){const c=[];for(const R in l)for(const j of l[R])c.push(this._getAndCacheGlyphsPromise(R,j));const C=yield Promise.all(c),M={};for(const{stack:R,id:j,glyph:$}of C)M[R]||(M[R]={}),M[R][j]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics};return M})}_getAndCacheGlyphsPromise(l,c){return o._(this,void 0,void 0,function*(){let C=this.entries[l];C||(C=this.entries[l]={glyphs:{},requests:{},ranges:{}});let M=C.glyphs[c];if(M!==void 0)return{stack:l,id:c,glyph:M};if(M=this._tinySDF(C,l,c),M)return C.glyphs[c]=M,{stack:l,id:c,glyph:M};const R=Math.floor(c/256);if(256*R>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[R])return{stack:l,id:c,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[R]){const $=Pe.loadGlyphRange(l,R,this.url,this.requestManager);C.requests[R]=$}const j=yield C.requests[R];for(const $ in j)this._doesCharSupportLocalGlyph(+$)||(C.glyphs[+$]=j[+$]);return C.ranges[R]=!0,{stack:l,id:c,glyph:j[c]||null}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(l))}_tinySDF(l,c,C){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(C))return;let R=l.tinySDF;if(!R){let $="400";/bold/i.test(c)?$="900":/medium/i.test(c)?$="500":/light/i.test(c)&&($="200"),R=l.tinySDF=new Pe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:$})}const j=R.draw(String.fromCharCode(C));return{id:C,bitmap:new o.o({width:j.width||60,height:j.height||60},j.data),metrics:{width:j.glyphWidth/2||24,height:j.glyphHeight/2||24,left:j.glyphLeft/2+.5||0,top:j.glyphTop/2-27.5||-8,advance:j.glyphAdvance/2||24,isDoubleResolution:!0}}}}Pe.loadGlyphRange=function(T,l,c,C){return o._(this,void 0,void 0,function*(){const M=256*l,R=M+255,j=C.transformRequest(c.replace("{fontstack}",T).replace("{range}",`${M}-${R}`),"Glyphs"),$=yield o.l(j,new AbortController);if(!$||!$.data)throw new Error(`Could not load glyph range. range: ${l}, ${M}-${R}`);const te={};for(const se of o.n($.data))te[se.id]=se;return te})},Pe.TinySDF=class{constructor({fontSize:T=24,buffer:l=3,radius:c=8,cutoff:C=.25,fontFamily:M="sans-serif",fontWeight:R="normal",fontStyle:j="normal"}={}){this.buffer=l,this.cutoff=C,this.radius=c;const $=this.size=T+4*l,te=this._createCanvas($),se=this.ctx=te.getContext("2d",{willReadFrequently:!0});se.font=`${j} ${R} ${T}px ${M}`,se.textBaseline="alphabetic",se.textAlign="left",se.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.z=new Float64Array($+1),this.v=new Uint16Array($)}_createCanvas(T){const l=document.createElement("canvas");return l.width=l.height=T,l}draw(T){const{width:l,actualBoundingBoxAscent:c,actualBoundingBoxDescent:C,actualBoundingBoxLeft:M,actualBoundingBoxRight:R}=this.ctx.measureText(T),j=Math.ceil(c),$=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(R-M))),te=Math.min(this.size-this.buffer,j+Math.ceil(C)),se=$+2*this.buffer,xe=te+2*this.buffer,Oe=Math.max(se*xe,0),ke=new Uint8ClampedArray(Oe),qe={data:ke,width:se,height:xe,glyphWidth:$,glyphHeight:te,glyphTop:j,glyphLeft:0,glyphAdvance:l};if($===0||te===0)return qe;const{ctx:Ve,buffer:ut,gridInner:ot,gridOuter:At}=this;Ve.clearRect(ut,ut,$,te),Ve.fillText(T,ut,ut+j);const mt=Ve.getImageData(ut,ut,$,te);At.fill(we,0,Oe),ot.fill(0,0,Oe);for(let St=0;St<te;St++)for(let kt=0;kt<$;kt++){const Pt=mt.data[4*(St*$+kt)+3]/255;if(Pt===0)continue;const Ft=(St+ut)*se+kt+ut;if(Pt===1)At[Ft]=0,ot[Ft]=we;else{const Tt=.5-Pt;At[Ft]=Tt>0?Tt*Tt:0,ot[Ft]=Tt<0?Tt*Tt:0}}fe(At,0,0,se,xe,se,this.f,this.v,this.z),fe(ot,ut,ut,$,te,se,this.f,this.v,this.z);for(let St=0;St<Oe;St++){const kt=Math.sqrt(At[St])-Math.sqrt(ot[St]);ke[St]=Math.round(255-255*(kt/this.radius+this.cutoff))}return qe}};class pe{constructor(){this.specification=o.v.light.position}possiblyEvaluate(l,c){return o.x(l.expression.evaluate(c))}interpolate(l,c,C){return{x:o.y.number(l.x,c.x,C),y:o.y.number(l.y,c.y,C),z:o.y.number(l.z,c.z,C)}}}let it;class We extends o.E{constructor(l){super(),it=it||new o.q({anchor:new o.D(o.v.light.anchor),position:new pe,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(it),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,c={}){if(!this._validate(o.r,l,c))for(const C in l){const M=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,C){return(!C||C.validate!==!1)&&o.t(this,l.call(o.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const $e=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class ht extends o.E{constructor(l){super(),this._transitionable=new o.T($e),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(l,c={}){if(!this._validate(o.B,l,c)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in l){const M=l[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,c,C={}){return(C==null?void 0:C.validate)!==!1&&o.t(this,l.call(o.u,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class De{constructor(l,c){this.width=l,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,c){const C=l.join(",")+String(c);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(l,c)),this.dashEntry[C]}getDashRanges(l,c,C){const M=[];let R=l.length%2==1?-l[l.length-1]*C:0,j=l[0]*C,$=!0;M.push({left:R,right:j,isDash:$,zeroLength:l[0]===0});let te=l[0];for(let se=1;se<l.length;se++){$=!$;const xe=l[se];R=te*C,te+=xe,j=te*C,M.push({left:R,right:j,isDash:$,zeroLength:xe===0})}return M}addRoundDash(l,c,C){const M=c/2;for(let R=-C;R<=C;R++){const j=this.width*(this.nextRow+C+R);let $=0,te=l[$];for(let se=0;se<this.width;se++){se/te.right>1&&(te=l[++$]);const xe=Math.abs(se-te.left),Oe=Math.abs(se-te.right),ke=Math.min(xe,Oe);let qe;const Ve=R/C*(M+1);if(te.isDash){const ut=M-Math.abs(Ve);qe=Math.sqrt(ke*ke+ut*ut)}else qe=M-Math.sqrt(ke*ke+Ve*Ve);this.data[j+se]=Math.max(0,Math.min(255,qe+128))}}}addRegularDash(l){for(let $=l.length-1;$>=0;--$){const te=l[$],se=l[$+1];te.zeroLength?l.splice($,1):se&&se.isDash===te.isDash&&(se.left=te.left,l.splice($,1))}const c=l[0],C=l[l.length-1];c.isDash===C.isDash&&(c.left=C.left-this.width,C.right=c.right+this.width);const M=this.width*this.nextRow;let R=0,j=l[R];for(let $=0;$<this.width;$++){$/j.right>1&&(j=l[++R]);const te=Math.abs($-j.left),se=Math.abs($-j.right),xe=Math.min(te,se);this.data[M+$]=Math.max(0,Math.min(255,(j.isDash?xe:-xe)+128))}}addDash(l,c){const C=c?7:0,M=2*C+1;if(this.nextRow+M>this.height)return o.w("LineAtlas out of space"),null;let R=0;for(let $=0;$<l.length;$++)R+=l[$];if(R!==0){const $=this.width/R,te=this.getDashRanges(l,this.width,$);c?this.addRoundDash(te,$,C):this.addRegularDash(te)}const j={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:R};return this.nextRow+=M,this.dirty=!0,j}bind(l){const c=l.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ne="maplibre_preloaded_worker_pool";class at{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<at.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}const wt=Math.floor(S.hardwareConcurrency/2);let Ct,ft;function Lt(){return Ct||(Ct=new at),Ct}at.workerCount=o.C(globalThis)?Math.max(Math.min(wt,3),1):1;class Kt{constructor(l,c){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=c;const C=this.workerPool.acquire(c);for(let M=0;M<C.length;M++){const R=new o.F(C[M],c);R.name=`Worker ${M}`,this.actors.push(R)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,c){const C=[];for(const M of this.actors)C.push(M.sendAsync({type:l,data:c}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,c){for(const C of this.actors)C.registerMessageHandler(l,c)}}function Fe(){return ft||(ft=new Kt(Lt(),o.G),ft.registerMessageHandler("GR",(T,l,c)=>o.m(l,c))),ft}function Te(T,l){const c=o.H();return o.J(c,c,[1,1,0]),o.K(c,c,[.5*T.width,.5*T.height,1]),T.calculatePosMatrix?o.L(c,c,T.calculatePosMatrix(l.toUnwrapped())):c}function Se(T,l,c,C,M,R){var j;const $=function(Oe,ke,qe){if(Oe)for(const Ve of Oe){const ut=ke[Ve];if(ut&&ut.source===qe&&ut.type==="fill-extrusion")return!0}else for(const Ve in ke){const ut=ke[Ve];if(ut.source===qe&&ut.type==="fill-extrusion")return!0}return!1}((j=M==null?void 0:M.layers)!==null&&j!==void 0?j:null,l,T.id),te=R.maxPitchScaleFactor(),se=T.tilesIn(C,te,$);se.sort(Je);const xe=[];for(const Oe of se)xe.push({wrappedTileID:Oe.tileID.wrapped().key,queryResults:Oe.tile.queryRenderedFeatures(l,c,T._state,Oe.queryGeometry,Oe.cameraQueryGeometry,Oe.scale,M,R,te,Te(T.transform,Oe.tileID))});return function(Oe,ke){for(const qe in Oe)for(const Ve of Oe[qe])yt(Ve,ke);return Oe}(function(Oe){const ke={},qe={};for(const Ve of Oe){const ut=Ve.queryResults,ot=Ve.wrappedTileID,At=qe[ot]=qe[ot]||{};for(const mt in ut){const St=ut[mt],kt=At[mt]=At[mt]||{},Pt=ke[mt]=ke[mt]||[];for(const Ft of St)kt[Ft.featureIndex]||(kt[Ft.featureIndex]=!0,Pt.push(Ft))}}return ke}(xe),T)}function Je(T,l){const c=T.tileID,C=l.tileID;return c.overscaledZ-C.overscaledZ||c.canonical.y-C.canonical.y||c.wrap-C.wrap||c.canonical.x-C.canonical.x}function yt(T,l){const c=T.feature,C=l.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=C}function dt(T,l,c){return o._(this,void 0,void 0,function*(){let C=T;if(T.url?C=(yield o.h(l.transformRequest(T.url,"Source"),c)).data:yield S.frameAsync(c),!C)return null;const M=o.M(o.e(C,T),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(M.vectorLayerIds=C.vector_layers.map(R=>R.id)),M})}class Ut{constructor(l,c){l&&(c?this.setSouthWest(l).setNorthEast(c):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}setSouthWest(l){return this._sw=l instanceof o.N?new o.N(l.lng,l.lat):o.N.convert(l),this}extend(l){const c=this._sw,C=this._ne;let M,R;if(l instanceof o.N)M=l,R=l;else{if(!(l instanceof Ut))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Ut.convert(l)):this.extend(o.N.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(o.N.convert(l)):this;if(M=l._sw,R=l._ne,!M||!R)return this}return c||C?(c.lng=Math.min(M.lng,c.lng),c.lat=Math.min(M.lat,c.lat),C.lng=Math.max(R.lng,C.lng),C.lat=Math.max(R.lat,C.lat)):(this._sw=new o.N(M.lng,M.lat),this._ne=new o.N(R.lng,R.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:c,lat:C}=o.N.convert(l);let M=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&M}static convert(l){return l instanceof Ut?l:l&&new Ut(l)}static fromLngLat(l,c=0){const C=360*c/40075017,M=C/Math.cos(Math.PI/180*l.lat);return new Ut(new o.N(l.lng-M,l.lat-C),new o.N(l.lng+M,l.lat+C))}adjustAntiMeridian(){const l=new o.N(this._sw.lng,this._sw.lat),c=new o.N(this._ne.lng,this._ne.lat);return new Ut(l,l.lng>c.lng?new o.N(c.lng+360,c.lat):c)}}class en{constructor(l,c,C){this.bounds=Ut.convert(this.validateBounds(l)),this.minzoom=c||0,this.maxzoom=C||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const c=Math.pow(2,l.z),C=Math.floor(o.O(this.bounds.getWest())*c),M=Math.floor(o.Q(this.bounds.getNorth())*c),R=Math.ceil(o.O(this.bounds.getEast())*c),j=Math.ceil(o.Q(this.bounds.getSouth())*c);return l.x>=C&&l.x<R&&l.y>=M&&l.y<j}}class Nt extends o.E{constructor(l,c,C,M){if(super(),this.id=l,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l&&(o.e(this,l),l.bounds&&(this.tileBounds=new en(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this.fire(new o.j(l))}})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(c,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise((R,j)=>{l.reloadPromise={resolve:R,reject:j}})}else l.actor=this.dispatcher.getActor(),M="LT";l.abortController=new AbortController;try{const R=yield l.actor.sendAsync({type:M,data:C},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,R)}catch(R){if(delete l.abortController,l.aborted)return;if(R&&R.status!==404)throw R;this._afterTileLoadWorkerResponse(l,null)}})}_afterTileLoadWorkerResponse(l,c){if(c&&c.resourceTiming&&(l.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&l.setExpiryData(c),l.loadVectorData(c,this.map.painter),l.reloadPromise){const C=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(C.resolve).catch(C.reject)}}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class yn extends o.E{constructor(l,c,C,M){super(),this.id=l,this.dispatcher=C,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.M(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(l=!1){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new en(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(c){this._tileJSONRequest=null,this.fire(new o.j(c))}})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}serialize(){return o.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const C=yield X.getImage(this.map._requestManager.transformRequest(c,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&C.cacheControl&&C.expires&&l.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const M=this.map.painter.context,R=M.gl,j=C.data;l.texture=this.map.painter.getTileTexture(j.width),l.texture?l.texture.update(j,{useMipmap:!0}):(l.texture=new ie(M,j,R.RGBA,{useMipmap:!0}),l.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(C){if(delete l.abortController,l.aborted)l.state="unloaded";else if(C)throw l.state="errored",C}})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)})}hasTransition(){return!1}}class jn extends yn{constructor(l,c,C,M){super(l,c,C,M),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(c,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const M=yield X.getImage(C,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(M&&M.data){const R=M.data;this.map._refreshExpiredTiles&&M.cacheControl&&M.expires&&l.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const j=o.b(R)&&o.U()?R:yield this.readImageNow(R),$={type:this.type,uid:l.uid,source:this.id,rawImageData:j,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const te=yield l.actor.sendAsync({type:"LDT",data:$});l.dem=te,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(M){if(delete l.abortController,l.aborted)l.state="unloaded";else if(M)throw l.state="errored",M}})}readImageNow(l){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.V()){const c=l.width+2,C=l.height+2;try{return new o.R({width:c,height:C},yield o.W(l,-1,-1,c,C))}catch{}}return S.getImageData(l,1)})}_getNeighboringTiles(l){const c=l.canonical,C=Math.pow(2,c.z),M=(c.x-1+C)%C,R=c.x===0?l.wrap-1:l.wrap,j=(c.x+1+C)%C,$=c.x+1===C?l.wrap+1:l.wrap,te={};return te[new o.S(l.overscaledZ,R,c.z,M,c.y).key]={backfilled:!1},te[new o.S(l.overscaledZ,$,c.z,j,c.y).key]={backfilled:!1},c.y>0&&(te[new o.S(l.overscaledZ,R,c.z,M,c.y-1).key]={backfilled:!1},te[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},te[new o.S(l.overscaledZ,$,c.z,j,c.y-1).key]={backfilled:!1}),c.y+1<C&&(te[new o.S(l.overscaledZ,R,c.z,M,c.y+1).key]={backfilled:!1},te[new o.S(l.overscaledZ,l.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},te[new o.S(l.overscaledZ,$,c.z,j,c.y+1).key]={backfilled:!1}),te}unloadTile(l){return o._(this,void 0,void 0,function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))})}}class Rr extends o.E{constructor(l,c,C,M){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=C.getActor(),this.setEventedParent(M),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.X,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(l){return l*(o.X/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}getData(){return o._(this,void 0,void 0,function*(){const l=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})})}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,c,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:c,offset:C}})}_updateWorkerData(l){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);l?c.dataDiff=l:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(S.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||C.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let M=null;C.resourceTiming&&C.resourceTiming[this.id]&&(M=C.resourceTiming[this.id].slice(0));const R={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&o.e(R,{resourceTiming:M}),this.fire(new o.k("data",Object.assign(Object.assign({},R),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},R),{sourceDataType:"content"})))}catch(C){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(C))}})}loaded(){return this._pendingLoads===0}loadTile(l){return o._(this,void 0,void 0,function*(){const c=l.actor?"RT":"LT";l.actor=this.actor;const C={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const M=yield this.actor.sendAsync({type:c,data:C},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(M,this.map.painter,c==="RT")})}abortTile(l){return o._(this,void 0,void 0,function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0})}unloadTile(l){return o._(this,void 0,void 0,function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class sr extends o.E{constructor(l,c,C,M){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=C,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=c}load(l){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,l&&(this.coordinates=l),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.j(c))}})}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const c=l.map(o.Y.fromLngLat);var C;return this.tileID=function(M){let R=1/0,j=1/0,$=-1/0,te=-1/0;for(const ke of M)R=Math.min(R,ke.x),j=Math.min(j,ke.y),$=Math.max($,ke.x),te=Math.max(te,ke.y);const se=Math.max($-R,te-j),xe=Math.max(0,Math.floor(-Math.log(se)/Math.LN2)),Oe=Math.pow(2,xe);return new o.Z(xe,Math.floor((R+$)/2*Oe),Math.floor((j+te)/2*Oe))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,c=l.gl;this.texture||(this.texture=new ie(l,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const R=this.tiles[M];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,C=!0)}C&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Jn extends sr{constructor(l,c,C,M){super(l,c,C,M),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const c of l.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a0(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const c=this.video.seekable;l<c.start(0)||l>c.end(0)?this.fire(new o.j(new o.$(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,c=l.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new ie(l,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const R=this.tiles[M];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture,C=!0)}C&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class mr extends sr{constructor(l,c,C,M){super(l,c,C,M),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(j=>typeof j!="number"))||this.fire(new o.j(new o.$(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.$(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.$(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.$(`sources.${l}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,C=c.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ie(c,this.canvas,C.RGBA,{premultiply:!0});let M=!1;for(const R in this.tiles){const j=this.tiles[R];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,M=!0)}M&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const pr={},xr=T=>{switch(T){case"geojson":return Rr;case"image":return sr;case"raster":return yn;case"raster-dem":return jn;case"vector":return Nt;case"video":return Jn;case"canvas":return mr}return pr[T]},Qn="RTLPluginLoaded";class Er extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Fe()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return o._(this,arguments,void 0,function*(c,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(Qn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ge=null;function Ae(){return Ge||(Ge=new Er),Ge}class me{constructor(l,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=o.a1(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const c=l+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,c,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(M,R){const j={};if(!R)return j;for(const $ of M){const te=$.layerIds.map(se=>R.getLayer(se)).filter(Boolean);if(te.length!==0){$.layers=te,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(se=>te.filter(xe=>xe.id===se)[0]));for(const se of te)j[se.id]=$}}return j}(l.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const R=this.buckets[M];if(R instanceof o.a3){if(this.hasSymbolBuckets=!0,!C)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const R=this.buckets[M];if(R instanceof o.a3&&R.hasRTLText){this.hasRTLText=!0,Ae().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const R=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(M).queryRadius(R))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new o.a2}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const C in this.buckets){const M=this.buckets[C];M.uploadPending()&&M.upload(l)}const c=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ie(l,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ie(l,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,c,C,M,R,j,$,te,se,xe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:R,scale:j,tileSize:this.tileSize,pixelPosMatrix:xe,transform:te,params:$,queryPadding:this.queryPadding*se},l,c,C):{}}querySourceFeatures(l,c){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const M=C.loadVTLayers(),R=c&&c.sourceLayer?c.sourceLayer:"",j=M._geojsonTileLayer||M[R];if(!j)return;const $=o.a4(c&&c.filter),{z:te,x:se,y:xe}=this.tileID.canonical,Oe={z:te,x:se,y:xe};for(let ke=0;ke<j.length;ke++){const qe=j.feature(ke);if($.needGeometry){const ot=o.a5(qe,!0);if(!$.filter(new o.z(this.tileID.overscaledZ),ot,this.tileID.canonical))continue}else if(!$.filter(new o.z(this.tileID.overscaledZ),qe))continue;const Ve=C.getId(qe,R),ut=new o.a6(qe,te,se,xe,Ve);ut.tile=Oe,l.push(ut)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const c=this.expirationTime;if(l.cacheControl){const C=o.a7(l.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const C=Date.now();let M=!1;if(this.expirationTime>C)M=!1;else if(c)if(this.expirationTime<c)M=!0;else{const R=this.expirationTime-c;R?this.expirationTime=C+Math.max(R,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!c.style.hasLayer(M))continue;const R=this.buckets[M],j=R.layers[0].sourceLayer||"_geojsonTileLayer",$=C[j],te=l[j];if(!$||!te||Object.keys(te).length===0)continue;R.update(te,$,this.imageAtlas&&this.imageAtlas.patternPositions||{});const se=c&&c.style&&c.style.getLayer(M);se&&(this.queryPadding=Math.max(this.queryPadding,se.queryRadius(R)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<S.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=S.now()+l}setDependencies(l,c){const C={};for(const M of c)C[M]=!0;this.dependencies[l]=C}hasDependency(l,c){for(const C of l){const M=this.dependencies[C];if(M){for(const R of c)if(M[R])return!0}}return!1}}class Xe{constructor(l,c){this.max=l,this.onRemove=c,this.reset()}reset(){for(const l in this.data)for(const c of this.data[l])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(l,c,C){const M=l.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const R={value:c,timeout:void 0};if(C!==void 0&&(R.timeout=setTimeout(()=>{this.remove(l,R)},C)),this.data[M].push(R),this.order.push(M),this.order.length>this.max){const j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const c=this.data[l].shift();return c.timeout&&clearTimeout(c.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),c.value}getByKey(l){const c=this.data[l];return c?c[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,c){if(!this.has(l))return this;const C=l.wrapped().key,M=c===void 0?0:this.data[C].indexOf(c),R=this.data[C][M];return this.data[C].splice(M,1),R.timeout&&clearTimeout(R.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(R.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(l){const c=[];for(const C in this.data)for(const M of this.data[C])l(M.value)||c.push(M);for(const C of c)this.remove(C.value.tileID,C)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,c,C){const M=String(c);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][M]=this.stateChanges[l][M]||{},o.e(this.stateChanges[l][M],C),this.deletedStates[l]===null){this.deletedStates[l]={};for(const R in this.state[l])R!==M&&(this.deletedStates[l][R]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][M]===null){this.deletedStates[l][M]={};for(const R in this.state[l][M])C[R]||(this.deletedStates[l][M][R]=null)}else for(const R in C)this.deletedStates[l]&&this.deletedStates[l][M]&&this.deletedStates[l][M][R]===null&&delete this.deletedStates[l][M][R]}removeFeatureState(l,c,C){if(this.deletedStates[l]===null)return;const M=String(c);if(this.deletedStates[l]=this.deletedStates[l]||{},C&&c!==void 0)this.deletedStates[l][M]!==null&&(this.deletedStates[l][M]=this.deletedStates[l][M]||{},this.deletedStates[l][M][C]=null);else if(c!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][M])for(C in this.deletedStates[l][M]={},this.stateChanges[l][M])this.deletedStates[l][M][C]=null;else this.deletedStates[l][M]=null;else this.deletedStates[l]=null}getState(l,c){const C=String(c),M=o.e({},(this.state[l]||{})[C],(this.stateChanges[l]||{})[C]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const R=this.deletedStates[l][c];if(R===null)return{};for(const j in R)delete M[j]}return M}initializeTileState(l,c){l.setFeatureState(this.state,c)}coalesceChanges(l,c){const C={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const R={};for(const j in this.stateChanges[M])this.state[M][j]||(this.state[M][j]={}),o.e(this.state[M][j],this.stateChanges[M][j]),R[j]=this.state[M][j];C[M]=R}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const R={};if(this.deletedStates[M]===null)for(const j in this.state[M])R[j]={},this.state[M][j]={};else for(const j in this.deletedStates[M]){if(this.deletedStates[M][j]===null)this.state[M][j]={};else for(const $ of Object.keys(this.deletedStates[M][j]))delete this.state[M][j][$];R[j]=this.state[M][j]}C[M]=C[M]||{},o.e(C[M],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const M in l)l[M].setFeatureState(C,c)}}function Yt(T,l,c){const C=l.intersectsFrustum(T);if(!c)return C;const M=l.intersectsPlane(c);return C===0||M===0?0:C===2&&M===2?2:1}function nn(T,l,c,C,M){let R=T;const j=Math.atan(l/c),$=Math.hypot(l,c);return R=T+o.a8(C/$/Math.max(.5,Math.cos(o.aa(M/2)))),R+=1*o.a8(Math.cos(j))/2,R+=o.ab(T-R,-0,0),R}function rr(T,l){const c=(l.roundZoom?Math.round:Math.floor)(T.zoom+o.a8(T.tileSize/l.tileSize));return Math.max(0,c)}function Ee(T,l){const c=T.getCameraFrustum(),C=T.getClippingPlane(),M=T.screenPointToMercatorCoordinate(T.getCameraPoint()),R=o.Y.fromLngLat(T.center,T.elevation);M.z=R.z+Math.cos(T.pitchInRadians)*T.cameraToCenterDistance/T.worldSize;const j=T.getCoveringTilesDetailsProvider(),$=j.allowVariableZoom(T,l),te=rr(T,l),se=l.minzoom||0,xe=l.maxzoom!==void 0?l.maxzoom:T.maxZoom,Oe=Math.min(Math.max(0,te),xe),ke=Math.pow(2,Oe),qe=[ke*M.x,ke*M.y,0],Ve=[ke*R.x,ke*R.y,0],ut=Math.hypot(R.x-M.x,R.y-M.y),ot=Math.abs(R.z-M.z),At=Math.hypot(ut,ot),mt=Pt=>({zoom:0,x:0,y:0,wrap:Pt,fullyVisible:!1}),St=[],kt=[];if(T.renderWorldCopies&&j.allowWorldCopies())for(let Pt=1;Pt<=3;Pt++)St.push(mt(-Pt)),St.push(mt(Pt));for(St.push(mt(0));St.length>0;){const Pt=St.pop(),Ft=Pt.x,Tt=Pt.y;let Jt=Pt.fullyVisible;const Vt={x:Ft,y:Tt,z:Pt.zoom},vn=j.getTileAABB(Vt,Pt.wrap,T.elevation,l);if(!Jt){const Un=Yt(c,vn,C);if(Un===0)continue;Jt=Un===2}const _n=j.distanceToTile2d(M.x,M.y,Vt,vn);let mn=te;$&&(mn=(l.calculateTileZoom||nn)(T.zoom+o.a8(T.tileSize/l.tileSize),_n,ot,At,T.fov)),mn=(l.roundZoom?Math.round:Math.floor)(mn),mn=Math.max(0,mn);const Bn=Math.min(mn,xe);if(Pt.wrap=j.getWrap(R,Vt,Pt.wrap),Pt.zoom>=Bn){if(Pt.zoom<se)continue;const Un=Oe-Pt.zoom,wn=qe[0]-.5-(Ft<<Un),kr=qe[1]-.5-(Tt<<Un),Bi=l.reparseOverscaled?Math.max(Pt.zoom,mn):Pt.zoom;kt.push({tileID:new o.S(Pt.zoom===xe?Bi:Pt.zoom,Pt.wrap,Pt.zoom,Ft,Tt),distanceSq:o.a9([Ve[0]-.5-Ft,Ve[1]-.5-Tt]),tileDistanceToCamera:Math.sqrt(wn*wn+kr*kr)})}else for(let Un=0;Un<4;Un++)St.push({zoom:Pt.zoom+1,x:(Ft<<1)+Un%2,y:(Tt<<1)+(Un>>1),wrap:Pt.wrap,fullyVisible:Jt})}return kt.sort((Pt,Ft)=>Pt.distanceSq-Ft.distanceSq).map(Pt=>Pt.tileID)}class oe extends o.E{constructor(l,c,C){super(),this.id=l,this.dispatcher=C,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,R,j,$)=>{const te=new(xr(R.type))(M,R,j,$);if(te.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${te.id}`);return te})(l,c,C,this),this._tiles={},this._cache=new Xe(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const c=this._tiles[l];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,c,C){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,c,C)}catch(M){l.state="errored",M.status!==404?this._source.fire(new o.j(M,{tile:l})):this.update(this.transform,this.terrain)}})}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new o.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const C=this._tiles[c];C.upload(l),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(ve).map(l=>l.key)}getRenderableIds(l){const c=[];for(const C in this._tiles)this._isIdRenderable(C,l)&&c.push(this._tiles[C]);return l?c.sort((C,M)=>{const R=C.tileID,j=M.tileID,$=new o.P(R.canonical.x,R.canonical.y)._rotate(-this.transform.bearingInRadians),te=new o.P(j.canonical.x,j.canonical.y)._rotate(-this.transform.bearingInRadians);return R.overscaledZ-j.overscaledZ||te.y-$.y||te.x-$.x}).map(C=>C.tileID.key):c.map(C=>C.tileID).sort(ve).map(C=>C.key)}hasRenderableParent(l){const c=this.findLoadedParent(l,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(l,c){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(c||!this._tiles[l].holdingForFade())}reload(l){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(l||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(l,c){return o._(this,void 0,void 0,function*(){const C=this._tiles[l];C&&(C.state!=="loading"&&(C.state=c),yield this._loadTile(C,l,c))})}_tileLoaded(l,c,C){l.timeAdded=S.now(),C==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(c,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const c=this.getRenderableIds();for(let M=0;M<c.length;M++){const R=c[M];if(l.neighboringTiles&&l.neighboringTiles[R]){const j=this.getTileByID(R);C(l,j),C(j,l)}}function C(M,R){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let j=R.tileID.canonical.x-M.tileID.canonical.x;const $=R.tileID.canonical.y-M.tileID.canonical.y,te=Math.pow(2,M.tileID.canonical.z),se=R.tileID.key;j===0&&$===0||Math.abs($)>1||(Math.abs(j)>1&&(Math.abs(j+te)===1?j+=te:Math.abs(j-te)===1&&(j-=te)),R.dem&&M.dem&&(M.dem.backfillBorder(R.dem,j,$),M.neighboringTiles&&M.neighboringTiles[se]&&(M.neighboringTiles[se].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,c,C,M){for(const R in this._tiles){let j=this._tiles[R];if(M[R]||!j.hasData()||j.tileID.overscaledZ<=c||j.tileID.overscaledZ>C)continue;let $=j.tileID;for(;j&&j.tileID.overscaledZ>c+1;){const se=j.tileID.scaledTo(j.tileID.overscaledZ-1);j=this._tiles[se.key],j&&j.hasData()&&($=se)}let te=$;for(;te.overscaledZ>c;)if(te=te.scaledTo(te.overscaledZ-1),l[te.key]||l[te.canonical.key]){M[$.key]=$;break}}}findLoadedParent(l,c){if(l.key in this._loadedParentTiles){const C=this._loadedParentTiles[l.key];return C&&C.tileID.overscaledZ>=c?C:null}for(let C=l.overscaledZ-1;C>=c;C--){const M=l.scaledTo(C),R=this._getLoadedTile(M);if(R)return R}}findLoadedSibling(l){return this._getLoadedTile(l)}_getLoadedTile(l){const c=this._tiles[l.key];return c&&c.hasData()?c:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const c=Math.ceil(l.width/this._source.tileSize)+1,C=Math.ceil(l.height/this._source.tileSize)+1,M=Math.floor(c*C*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(R)}handleWrapJump(l){const c=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,c){const C={};for(const M in this._tiles){const R=this._tiles[M];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+c),C[R.tileID.key]=R}this._tiles=C;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(l,c,C,M,R,j){const $={},te={},se=Object.keys(l),xe=S.now();for(const Oe of se){const ke=l[Oe],qe=this._tiles[Oe];if(!qe||qe.fadeEndTime!==0&&qe.fadeEndTime<=xe)continue;const Ve=this.findLoadedParent(ke,c),ut=this.findLoadedSibling(ke),ot=Ve||ut||null;ot&&(this._addTile(ot.tileID),$[ot.tileID.key]=ot.tileID),te[Oe]=ke}this._retainLoadedChildren(te,M,C,l);for(const Oe in $)l[Oe]||(this._coveredTiles[Oe]=!0,l[Oe]=$[Oe]);if(j){const Oe={},ke={};for(const qe of R)this._tiles[qe.key].hasData()?Oe[qe.key]=qe:ke[qe.key]=qe;for(const qe in ke){const Ve=ke[qe].children(this._source.maxzoom);this._tiles[Ve[0].key]&&this._tiles[Ve[1].key]&&this._tiles[Ve[2].key]&&this._tiles[Ve[3].key]&&(Oe[Ve[0].key]=l[Ve[0].key]=Ve[0],Oe[Ve[1].key]=l[Ve[1].key]=Ve[1],Oe[Ve[2].key]=l[Ve[2].key]=Ve[2],Oe[Ve[3].key]=l[Ve[3].key]=Ve[3],delete ke[qe])}for(const qe in ke){const Ve=ke[qe],ut=this.findLoadedParent(Ve,this._source.minzoom),ot=this.findLoadedSibling(Ve),At=ut||ot||null;if(At){Oe[At.tileID.key]=l[At.tileID.key]=At.tileID;for(const mt in Oe)Oe[mt].isChildOf(At.tileID)&&delete Oe[mt]}}for(const qe in this._tiles)Oe[qe]||(this._coveredTiles[qe]=!0)}}update(l,c){if(!this._sourceLoaded||this._paused)return;let C;this.transform=l,this.terrain=c,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(xe=>new o.S(xe.canonical.z,xe.wrap,xe.canonical.z,xe.canonical.x,xe.canonical.y)):(C=Ee(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter(xe=>this._source.hasTile(xe)))):C=[];const M=rr(l,this._source),R=Math.max(M-oe.maxOverzooming,this._source.minzoom),j=Math.max(M+oe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const xe={};for(const Oe of C)if(Oe.canonical.z>this._source.minzoom){const ke=Oe.scaledTo(Oe.canonical.z-1);xe[ke.key]=ke;const qe=Oe.scaledTo(Math.max(this._source.minzoom,Math.min(Oe.canonical.z,5)));xe[qe.key]=qe}C=C.concat(Object.values(xe))}const $=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,$&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const te=this._updateRetainedTiles(C,M);p(this._source.type)&&this._updateCoveredAndRetainedTiles(te,R,j,M,C,c);for(const xe in te)this._tiles[xe].clearFadeHold();const se=o.ac(this._tiles,te);for(const xe of se){const Oe=this._tiles[xe];Oe.hasSymbolBuckets&&!Oe.holdingForFade()?Oe.setHoldDuration(this.map._fadeDuration):Oe.hasSymbolBuckets&&!Oe.symbolFadeFinished()||this._removeTile(xe)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,c){var C;const M={},R={},j=Math.max(c-oe.maxOverzooming,this._source.minzoom),$=Math.max(c+oe.maxUnderzooming,this._source.minzoom),te={};for(const se of l){const xe=this._addTile(se);M[se.key]=se,xe.hasData()||c<this._source.maxzoom&&(te[se.key]=se)}this._retainLoadedChildren(te,c,$,M);for(const se of l){let xe=this._tiles[se.key];if(xe.hasData())continue;if(c+1>this._source.maxzoom){const ke=se.children(this._source.maxzoom)[0],qe=this.getTile(ke);if(qe&&qe.hasData()){M[ke.key]=ke;continue}}else{const ke=se.children(this._source.maxzoom);if(M[ke[0].key]&&M[ke[1].key]&&M[ke[2].key]&&M[ke[3].key])continue}let Oe=xe.wasRequested();for(let ke=se.overscaledZ-1;ke>=j;--ke){const qe=se.scaledTo(ke);if(R[qe.key])break;if(R[qe.key]=!0,xe=this.getTile(qe),!xe&&Oe&&(xe=this._addTile(qe)),xe){const Ve=xe.hasData();if((Ve||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||Oe)&&(M[qe.key]=qe),Oe=xe.wasRequested(),Ve)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const c=[];let C,M=this._tiles[l].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){C=this._loadedParentTiles[M.key];break}c.push(M.key);const R=M.scaledTo(M.overscaledZ-1);if(C=this._getLoadedTile(R),C)break;M=R}for(const R of c)this._loadedParentTiles[R]=C}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const l in this._tiles){const c=this._tiles[l].tileID,C=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=C}}_addTile(l){let c=this._tiles[l.key];if(c)return c;c=this._cache.getAndRemove(l),c&&(this._setTileReloadTimer(l.key,c),c.tileID=l,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,c)));const C=c;return c||(c=new me(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(c,l.key,c.state)),c.uses++,this._tiles[l.key]=c,C||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(l,c){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const C=c.getExpiryTimeout();C&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},C))}_removeTile(l){const c=this._tiles[l];c&&(c.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(l){const c=l.sourceDataType;l.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&l.dataType==="source"&&c==="content"&&(this.reload(l.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,c,C){const M=[],R=this.transform;if(!R)return M;const j=C?R.getCameraQueryGeometry(l):l,$=l.map(Ve=>R.screenPointToMercatorCoordinate(Ve,this.terrain)),te=j.map(Ve=>R.screenPointToMercatorCoordinate(Ve,this.terrain)),se=this.getIds();let xe=1/0,Oe=1/0,ke=-1/0,qe=-1/0;for(const Ve of te)xe=Math.min(xe,Ve.x),Oe=Math.min(Oe,Ve.y),ke=Math.max(ke,Ve.x),qe=Math.max(qe,Ve.y);for(let Ve=0;Ve<se.length;Ve++){const ut=this._tiles[se[Ve]];if(ut.holdingForFade())continue;const ot=ut.tileID,At=Math.pow(2,R.zoom-ut.tileID.overscaledZ),mt=c*ut.queryPadding*o.X/ut.tileSize/At,St=[ot.getTilePoint(new o.Y(xe,Oe)),ot.getTilePoint(new o.Y(ke,qe))];if(St[0].x-mt<o.X&&St[0].y-mt<o.X&&St[1].x+mt>=0&&St[1].y+mt>=0){const kt=$.map(Ft=>ot.getTilePoint(Ft)),Pt=te.map(Ft=>ot.getTilePoint(Ft));M.push({tile:ut,tileID:ot,queryGeometry:kt,cameraQueryGeometry:Pt,scale:At})}}return M}getVisibleCoordinates(l){const c=this.getRenderableIds(l).map(C=>this._tiles[C].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(p(this._source.type)){const l=S.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=l)return!0}return!1}setFeatureState(l,c,C){this._state.updateState(l=l||"_geojsonTileLayer",c,C)}removeFeatureState(l,c,C){this._state.removeFeatureState(l=l||"_geojsonTileLayer",c,C)}getFeatureState(l,c){return this._state.getState(l=l||"_geojsonTileLayer",c)}setDependencies(l,c,C){const M=this._tiles[l];M&&M.setDependencies(c,C)}reloadTilesForDependencies(l,c){for(const C in this._tiles)this._tiles[C].hasDependency(l,c)&&this._reloadTile(C,"reloading");this._cache.filter(C=>!C.hasDependency(l,c))}}function ve(T,l){const c=Math.abs(2*T.wrap)-+(T.wrap<0),C=Math.abs(2*l.wrap)-+(l.wrap<0);return T.overscaledZ-l.overscaledZ||C-c||l.canonical.y-T.canonical.y||l.canonical.x-T.canonical.x}function p(T){return T==="raster"||T==="image"||T==="video"}oe.maxOverzooming=10,oe.maxUnderzooming=3;class ze{constructor(l,c){this.reset(l,c)}reset(l,c){this.points=l||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.ab(l,0,1);let c=1,C=this._distances[c];const M=l*this.paddedLength+this.padding;for(;C<M&&c<this._distances.length;)C=this._distances[++c];const R=c-1,j=this._distances[R],$=C-j,te=$>0?(M-j)/$:0;return this.points[R].mult(1-te).add(this.points[c].mult(te))}}function rt(T,l){let c=!0;return T==="always"||T!=="never"&&l!=="never"||(c=!1),c}class pt{constructor(l,c,C){const M=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(l/C),this.yCellCount=Math.ceil(c/C);for(let j=0;j<this.xCellCount*this.yCellCount;j++)M.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=c,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,c,C,M,R){this._forEachCell(c,C,M,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(c),this.bboxes.push(C),this.bboxes.push(M),this.bboxes.push(R)}insertCircle(l,c,C,M){this._forEachCell(c-M,C-M,c+M,C+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(c),this.circles.push(C),this.circles.push(M)}_insertBoxCell(l,c,C,M,R,j){this.boxCells[R].push(j)}_insertCircleCell(l,c,C,M,R,j){this.circleCells[R].push(j)}_query(l,c,C,M,R,j,$){if(C<0||l>this.width||M<0||c>this.height)return[];const te=[];if(l<=0&&c<=0&&this.width<=C&&this.height<=M){if(R)return[{key:null,x1:l,y1:c,x2:C,y2:M}];for(let se=0;se<this.boxKeys.length;se++)te.push({key:this.boxKeys[se],x1:this.bboxes[4*se],y1:this.bboxes[4*se+1],x2:this.bboxes[4*se+2],y2:this.bboxes[4*se+3]});for(let se=0;se<this.circleKeys.length;se++){const xe=this.circles[3*se],Oe=this.circles[3*se+1],ke=this.circles[3*se+2];te.push({key:this.circleKeys[se],x1:xe-ke,y1:Oe-ke,x2:xe+ke,y2:Oe+ke})}}else this._forEachCell(l,c,C,M,this._queryCell,te,{hitTest:R,overlapMode:j,seenUids:{box:{},circle:{}}},$);return te}query(l,c,C,M){return this._query(l,c,C,M,!1,null)}hitTest(l,c,C,M,R,j){return this._query(l,c,C,M,!0,R,j).length>0}hitTestCircle(l,c,C,M,R){const j=l-C,$=l+C,te=c-C,se=c+C;if($<0||j>this.width||se<0||te>this.height)return!1;const xe=[];return this._forEachCell(j,te,$,se,this._queryCellCircle,xe,{hitTest:!0,overlapMode:M,circle:{x:l,y:c,radius:C},seenUids:{box:{},circle:{}}},R),xe.length>0}_queryCell(l,c,C,M,R,j,$,te){const{seenUids:se,hitTest:xe,overlapMode:Oe}=$,ke=this.boxCells[R];if(ke!==null){const Ve=this.bboxes;for(const ut of ke)if(!se.box[ut]){se.box[ut]=!0;const ot=4*ut,At=this.boxKeys[ut];if(l<=Ve[ot+2]&&c<=Ve[ot+3]&&C>=Ve[ot+0]&&M>=Ve[ot+1]&&(!te||te(At))&&(!xe||!rt(Oe,At.overlapMode))&&(j.push({key:At,x1:Ve[ot],y1:Ve[ot+1],x2:Ve[ot+2],y2:Ve[ot+3]}),xe))return!0}}const qe=this.circleCells[R];if(qe!==null){const Ve=this.circles;for(const ut of qe)if(!se.circle[ut]){se.circle[ut]=!0;const ot=3*ut,At=this.circleKeys[ut];if(this._circleAndRectCollide(Ve[ot],Ve[ot+1],Ve[ot+2],l,c,C,M)&&(!te||te(At))&&(!xe||!rt(Oe,At.overlapMode))){const mt=Ve[ot],St=Ve[ot+1],kt=Ve[ot+2];if(j.push({key:At,x1:mt-kt,y1:St-kt,x2:mt+kt,y2:St+kt}),xe)return!0}}}return!1}_queryCellCircle(l,c,C,M,R,j,$,te){const{circle:se,seenUids:xe,overlapMode:Oe}=$,ke=this.boxCells[R];if(ke!==null){const Ve=this.bboxes;for(const ut of ke)if(!xe.box[ut]){xe.box[ut]=!0;const ot=4*ut,At=this.boxKeys[ut];if(this._circleAndRectCollide(se.x,se.y,se.radius,Ve[ot+0],Ve[ot+1],Ve[ot+2],Ve[ot+3])&&(!te||te(At))&&!rt(Oe,At.overlapMode))return j.push(!0),!0}}const qe=this.circleCells[R];if(qe!==null){const Ve=this.circles;for(const ut of qe)if(!xe.circle[ut]){xe.circle[ut]=!0;const ot=3*ut,At=this.circleKeys[ut];if(this._circlesCollide(Ve[ot],Ve[ot+1],Ve[ot+2],se.x,se.y,se.radius)&&(!te||te(At))&&!rt(Oe,At.overlapMode))return j.push(!0),!0}}}_forEachCell(l,c,C,M,R,j,$,te){const se=this._convertToXCellCoord(l),xe=this._convertToYCellCoord(c),Oe=this._convertToXCellCoord(C),ke=this._convertToYCellCoord(M);for(let qe=se;qe<=Oe;qe++)for(let Ve=xe;Ve<=ke;Ve++)if(R.call(this,l,c,C,M,this.xCellCount*Ve+qe,j,$,te))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,c,C,M,R,j){const $=M-l,te=R-c,se=C+j;return se*se>$*$+te*te}_circleAndRectCollide(l,c,C,M,R,j,$){const te=(j-M)/2,se=Math.abs(l-(M+te));if(se>te+C)return!1;const xe=($-R)/2,Oe=Math.abs(c-(R+xe));if(Oe>xe+C)return!1;if(se<=te||Oe<=xe)return!0;const ke=se-te,qe=Oe-xe;return ke*ke+qe*qe<=C*C}}function Bt(T,l,c){const C=o.H();if(!T){const{vecSouth:Oe,vecEast:ke}=Xt(l),qe=g();qe[0]=ke[0],qe[1]=ke[1],qe[2]=Oe[0],qe[3]=Oe[1],M=qe,(xe=(j=(R=qe)[0])*(se=R[3])-(te=R[2])*($=R[1]))&&(M[0]=se*(xe=1/xe),M[1]=-$*xe,M[2]=-te*xe,M[3]=j*xe),C[0]=qe[0],C[1]=qe[1],C[4]=qe[2],C[5]=qe[3]}var M,R,j,$,te,se,xe;return o.K(C,C,[1/c,1/c,1]),C}function vt(T,l,c,C){if(T){const M=o.H();if(!l){const{vecSouth:R,vecEast:j}=Xt(c);M[0]=j[0],M[1]=j[1],M[4]=R[0],M[5]=R[1]}return o.K(M,M,[C,C,1]),M}return c.pixelsToClipSpaceMatrix}function Xt(T){const l=Math.cos(T.rollInRadians),c=Math.sin(T.rollInRadians),C=Math.cos(T.pitchInRadians),M=Math.cos(T.bearingInRadians),R=Math.sin(T.bearingInRadians),j=o.ad();j[0]=-M*C*c-R*l,j[1]=-R*C*c+M*l;const $=o.ae(j);$<1e-9?o.af(j):o.ag(j,j,1/$);const te=o.ad();te[0]=M*C*l-R*c,te[1]=R*C*l+M*c;const se=o.ae(te);return se<1e-9?o.af(te):o.ag(te,te,1/se),{vecEast:te,vecSouth:j}}function tn(T,l,c,C){let M;C?(M=[T,l,C(T,l),1],o.al(M,M,c)):(M=[T,l,0,1],yi(M,M,c));const R=M[3];return{point:new o.P(M[0]/R,M[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}function zt(T,l){return .5+T/l*.5}function _t(T,l){return T.x>=-l[0]&&T.x<=l[0]&&T.y>=-l[1]&&T.y<=l[1]}function Tn(T,l,c,C,M,R,j,$,te,se,xe,Oe,ke){const qe=c?T.textSizeData:T.iconSizeData,Ve=o.ah(qe,l.transform.zoom),ut=[256/l.width*2+1,256/l.height*2+1],ot=c?T.text.dynamicLayoutVertexArray:T.icon.dynamicLayoutVertexArray;ot.clear();const At=T.lineVertexArray,mt=c?T.text.placedSymbolArray:T.icon.placedSymbolArray,St=l.transform.width/l.transform.height;let kt=!1;for(let Pt=0;Pt<mt.length;Pt++){const Ft=mt.get(Pt);if(Ft.hidden||Ft.writingMode===o.ai.vertical&&!kt){qi(Ft.numGlyphs,ot);continue}kt=!1;const Tt=new o.P(Ft.anchorX,Ft.anchorY),Jt={getElevation:ke,pitchedLabelPlaneMatrix:C,lineVertexArray:At,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:Tt,unwrappedTileID:te,width:se,height:xe,translation:Oe},Vt=Mr(Ft.anchorX,Ft.anchorY,Jt);if(!_t(Vt.point,ut)){qi(Ft.numGlyphs,ot);continue}const vn=zt(l.transform.cameraToCenterDistance,Vt.signedDistanceFromCamera),_n=o.aj(qe,Ve,Ft),mn=R?_n*l.transform.getPitchedTextCorrection(Ft.anchorX,Ft.anchorY,te)/vn:_n*vn,Bn=wr({projectionContext:Jt,pitchedLabelPlaneMatrixInverse:M,symbol:Ft,fontSize:mn,flip:!1,keepUpright:j,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:ot,aspectRatio:St,rotateToLine:$});kt=Bn.useVertical,(Bn.notEnoughRoom||kt||Bn.needsFlipping&&wr({projectionContext:Jt,pitchedLabelPlaneMatrixInverse:M,symbol:Ft,fontSize:mn,flip:!0,keepUpright:j,glyphOffsetArray:T.glyphOffsetArray,dynamicLayoutVertexArray:ot,aspectRatio:St,rotateToLine:$}).notEnoughRoom)&&qi(Ft.numGlyphs,ot)}c?T.text.dynamicLayoutVertexBuffer.updateData(ot):T.icon.dynamicLayoutVertexBuffer.updateData(ot)}function Sn(T,l,c,C,M,R,j,$){const te=R.glyphStartIndex+R.numGlyphs,se=R.lineStartIndex,xe=R.lineStartIndex+R.lineLength,Oe=l.getoffsetX(R.glyphStartIndex),ke=l.getoffsetX(te-1),qe=co(T*Oe,c,C,M,R.segment,se,xe,$,j);if(!qe)return null;const Ve=co(T*ke,c,C,M,R.segment,se,xe,$,j);return Ve?$.projectionCache.anyProjectionOccluded?null:{first:qe,last:Ve}:null}function Ar(T,l,c,C){return T===o.ai.horizontal&&Math.abs(c.y-l.y)>Math.abs(c.x-l.x)*C?{useVertical:!0}:(T===o.ai.vertical?l.y<c.y:l.x>c.x)?{needsFlipping:!0}:null}function wr(T){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:c,symbol:C,fontSize:M,flip:R,keepUpright:j,glyphOffsetArray:$,dynamicLayoutVertexArray:te,aspectRatio:se,rotateToLine:xe}=T,Oe=M/24,ke=C.lineOffsetX*Oe,qe=C.lineOffsetY*Oe;let Ve;if(C.numGlyphs>1){const ut=C.glyphStartIndex+C.numGlyphs,ot=C.lineStartIndex,At=C.lineStartIndex+C.lineLength,mt=Sn(Oe,$,ke,qe,R,C,xe,l);if(!mt)return{notEnoughRoom:!0};const St=Br(mt.first.point.x,mt.first.point.y,l,c),kt=Br(mt.last.point.x,mt.last.point.y,l,c);if(j&&!R){const Pt=Ar(C.writingMode,St,kt,se);if(Pt)return Pt}Ve=[mt.first];for(let Pt=C.glyphStartIndex+1;Pt<ut-1;Pt++)Ve.push(co(Oe*$.getoffsetX(Pt),ke,qe,R,C.segment,ot,At,l,xe));Ve.push(mt.last)}else{if(j&&!R){const ot=Rn(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,At=C.lineStartIndex+C.segment+1,mt=new o.P(l.lineVertexArray.getx(At),l.lineVertexArray.gety(At)),St=Rn(mt.x,mt.y,l),kt=St.signedDistanceFromCamera>0?St.point:rn(l.tileAnchorPoint,mt,ot,1,l),Pt=Br(ot.x,ot.y,l,c),Ft=Br(kt.x,kt.y,l,c),Tt=Ar(C.writingMode,Pt,Ft,se);if(Tt)return Tt}const ut=co(Oe*$.getoffsetX(C.glyphStartIndex),ke,qe,R,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,l,xe);if(!ut||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ve=[ut]}for(const ut of Ve)o.ak(te,ut.point,ut.angle);return{}}function rn(T,l,c,C,M){const R=T.add(T.sub(l)._unit()),j=Rn(R.x,R.y,M).point,$=c.sub(j);return c.add($._mult(C/$.mag()))}function Fn(T,l,c){const C=l.projectionCache;if(C.projections[T])return C.projections[T];const M=new o.P(l.lineVertexArray.getx(T),l.lineVertexArray.gety(T)),R=Rn(M.x,M.y,l);if(R.signedDistanceFromCamera>0)return C.projections[T]=R.point,C.anyProjectionOccluded=C.anyProjectionOccluded||R.isOccluded,R.point;const j=T-c.direction;return rn(c.distanceFromAnchor===0?l.tileAnchorPoint:new o.P(l.lineVertexArray.getx(j),l.lineVertexArray.gety(j)),M,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,l)}function Rn(T,l,c){const C=T+c.translation[0],M=l+c.translation[1];let R;return c.pitchWithMap?(R=tn(C,M,c.pitchedLabelPlaneMatrix,c.getElevation),R.isOccluded=!1):(R=c.transform.projectTileCoordinates(C,M,c.unwrappedTileID,c.getElevation),R.point.x=(.5*R.point.x+.5)*c.width,R.point.y=(.5*-R.point.y+.5)*c.height),R}function Br(T,l,c,C){if(c.pitchWithMap){const M=[T,l,0,1];return o.al(M,M,C),c.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],c.unwrappedTileID,c.getElevation).point}return{x:T/c.width*2-1,y:l/c.height*2-1}}function Mr(T,l,c){return c.transform.projectTileCoordinates(T,l,c.unwrappedTileID,c.getElevation)}function Kr(T,l,c){return T._unit()._perp()._mult(l*c)}function ir(T,l,c,C,M,R,j,$,te){if($.projectionCache.offsets[T])return $.projectionCache.offsets[T];const se=c.add(l);if(T+te.direction<C||T+te.direction>=M)return $.projectionCache.offsets[T]=se,se;const xe=Fn(T+te.direction,$,te),Oe=Kr(xe.sub(c),j,te.direction),ke=c.add(Oe),qe=xe.add(Oe);return $.projectionCache.offsets[T]=o.am(R,se,ke,qe)||se,$.projectionCache.offsets[T]}function co(T,l,c,C,M,R,j,$,te){const se=C?T-l:T+l;let xe=se>0?1:-1,Oe=0;C&&(xe*=-1,Oe=Math.PI),xe<0&&(Oe+=Math.PI);let ke,qe=xe>0?R+M:R+M+1;$.projectionCache.cachedAnchorPoint?ke=$.projectionCache.cachedAnchorPoint:(ke=Rn($.tileAnchorPoint.x,$.tileAnchorPoint.y,$).point,$.projectionCache.cachedAnchorPoint=ke);let Ve,ut,ot=ke,At=ke,mt=0,St=0;const kt=Math.abs(se),Pt=[];let Ft;for(;mt+St<=kt;){if(qe+=xe,qe<R||qe>=j)return null;mt+=St,At=ot,ut=Ve;const Vt={absOffsetX:kt,direction:xe,distanceFromAnchor:mt,previousVertex:At};if(ot=Fn(qe,$,Vt),c===0)Pt.push(At),Ft=ot.sub(At);else{let vn;const _n=ot.sub(At);vn=_n.mag()===0?Kr(Fn(qe+xe,$,Vt).sub(ot),c,xe):Kr(_n,c,xe),ut||(ut=At.add(vn)),Ve=ir(qe,vn,ot,R,j,ut,c,$,Vt),Pt.push(ut),Ft=Ve.sub(ut)}St=Ft.mag()}const Tt=Ft._mult((kt-mt)/St)._add(ut||At),Jt=Oe+Math.atan2(ot.y-At.y,ot.x-At.x);return Pt.push(Tt),{point:Tt,angle:te?Jt:0,path:Pt}}const Sa=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qi(T,l){for(let c=0;c<T;c++){const C=l.length;l.resize(C+4),l.float32.set(Sa,3*C)}}function yi(T,l,c){const C=l[0],M=l[1];return T[0]=c[0]*C+c[4]*M+c[12],T[1]=c[1]*C+c[5]*M+c[13],T[3]=c[3]*C+c[7]*M+c[15],T}const oo=100;class Mo{constructor(l,c=new pt(l.width+200,l.height+200,25),C=new pt(l.width+200,l.height+200,25)){this.transform=l,this.grid=c,this.ignoredGrid=C,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+oo,this.screenBottomBoundary=l.height+oo,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,c,C,M,R,j,$,te,se,xe,Oe,ke){const qe=this.projectAndGetPerspectiveRatio(l.anchorPointX+te[0],l.anchorPointY+te[1],R,xe,ke),Ve=C*qe.perspectiveRatio;let ut;if(j||$)ut=this._projectCollisionBox(l,Ve,M,R,j,$,te,qe,xe,Oe,ke);else{const Ft=qe.x+(Oe?Oe.x*Ve:0),Tt=qe.y+(Oe?Oe.y*Ve:0);ut={allPointsOccluded:!1,box:[Ft+l.x1*Ve,Tt+l.y1*Ve,Ft+l.x2*Ve,Tt+l.y2*Ve]}}const[ot,At,mt,St]=ut.box,kt=j?ut.allPointsOccluded:qe.isOccluded;let Pt=kt;return Pt||(Pt=qe.perspectiveRatio<this.perspectiveRatioCutoff),Pt||(Pt=!this.isInsideGrid(ot,At,mt,St)),Pt||c!=="always"&&this.grid.hitTest(ot,At,mt,St,c,se)?{box:[ot,At,mt,St],placeable:!1,offscreen:!1,occluded:kt}:{box:[ot,At,mt,St],placeable:!0,offscreen:this.isOffscreen(ot,At,mt,St),occluded:kt}}placeCollisionCircles(l,c,C,M,R,j,$,te,se,xe,Oe,ke,qe,Ve){const ut=[],ot=new o.P(c.anchorX,c.anchorY),At=this.getPerspectiveRatio(ot.x,ot.y,j,Ve),mt=(se?R*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,j)/At:R*At)/o.as,St={getElevation:Ve,pitchedLabelPlaneMatrix:$,lineVertexArray:C,pitchWithMap:se,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ot,unwrappedTileID:j,width:this.transform.width,height:this.transform.height,translation:qe},kt=Sn(mt,M,c.lineOffsetX*mt,c.lineOffsetY*mt,!1,c,!1,St);let Pt=!1,Ft=!1,Tt=!0;if(kt){const Jt=.5*Oe*At+ke,Vt=new o.P(-100,-100),vn=new o.P(this.screenRightBoundary,this.screenBottomBoundary),_n=new ze,mn=kt.first,Bn=kt.last;let Un=[];for(let Bi=mn.path.length-1;Bi>=1;Bi--)Un.push(mn.path[Bi]);for(let Bi=1;Bi<Bn.path.length;Bi++)Un.push(Bn.path[Bi]);const wn=2.5*Jt;if(se){const Bi=this.projectPathToScreenSpace(Un,St);Un=Bi.some($i=>$i.signedDistanceFromCamera<=0)?[]:Bi.map($i=>$i.point)}let kr=[];if(Un.length>0){const Bi=Un[0].clone(),$i=Un[0].clone();for(let Oo=1;Oo<Un.length;Oo++)Bi.x=Math.min(Bi.x,Un[Oo].x),Bi.y=Math.min(Bi.y,Un[Oo].y),$i.x=Math.max($i.x,Un[Oo].x),$i.y=Math.max($i.y,Un[Oo].y);kr=Bi.x>=Vt.x&&$i.x<=vn.x&&Bi.y>=Vt.y&&$i.y<=vn.y?[Un]:$i.x<Vt.x||Bi.x>vn.x||$i.y<Vt.y||Bi.y>vn.y?[]:o.ao([Un],Vt.x,Vt.y,vn.x,vn.y)}for(const Bi of kr){_n.reset(Bi,.25*Jt);let $i=0;$i=_n.length<=.5*Jt?1:Math.ceil(_n.paddedLength/wn)+1;for(let Oo=0;Oo<$i;Oo++){const Si=Oo/Math.max($i-1,1),jo=_n.lerp(Si),No=jo.x+oo,xo=jo.y+oo;ut.push(No,xo,Jt,0);const yo=No-Jt,ka=xo-Jt,Go=No+Jt,ds=xo+Jt;if(Tt=Tt&&this.isOffscreen(yo,ka,Go,ds),Ft=Ft||this.isInsideGrid(yo,ka,Go,ds),l!=="always"&&this.grid.hitTestCircle(No,xo,Jt,l,xe)&&(Pt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Pt}}}}return{circles:!te&&Pt||!Ft||At<this.perspectiveRatioCutoff?[]:ut,offscreen:Tt,collisionDetected:Pt}}projectPathToScreenSpace(l,c){const C=function(M,R){const j=o.H();return o.an(j,R.pitchedLabelPlaneMatrix),M.map($=>{const te=tn($.x,$.y,j,R.getElevation),se=R.transform.projectTileCoordinates(te.point.x,te.point.y,R.unwrappedTileID,R.getElevation);return se.point.x=(.5*se.point.x+.5)*R.width,se.point.y=(.5*-se.point.y+.5)*R.height,se})}(l,c);return function(M){let R=0,j=0,$=0,te=0;for(let se=0;se<M.length;se++)M[se].isOccluded?($=se+1,te=0):(te++,te>j&&(j=te,R=$));return M.slice(R,R+j)}(C)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let C=1/0,M=1/0,R=-1/0,j=-1/0;for(const xe of l){const Oe=new o.P(xe.x+oo,xe.y+oo);C=Math.min(C,Oe.x),M=Math.min(M,Oe.y),R=Math.max(R,Oe.x),j=Math.max(j,Oe.y),c.push(Oe)}const $=this.grid.query(C,M,R,j).concat(this.ignoredGrid.query(C,M,R,j)),te={},se={};for(const xe of $){const Oe=xe.key;if(te[Oe.bucketInstanceId]===void 0&&(te[Oe.bucketInstanceId]={}),te[Oe.bucketInstanceId][Oe.featureIndex])continue;const ke=[new o.P(xe.x1,xe.y1),new o.P(xe.x2,xe.y1),new o.P(xe.x2,xe.y2),new o.P(xe.x1,xe.y2)];o.ap(c,ke)&&(te[Oe.bucketInstanceId][Oe.featureIndex]=!0,se[Oe.bucketInstanceId]===void 0&&(se[Oe.bucketInstanceId]=[]),se[Oe.bucketInstanceId].push(Oe.featureIndex))}return se}insertCollisionBox(l,c,C,M,R,j){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:R,collisionGroupID:j,overlapMode:c},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,c,C,M,R,j){const $=C?this.ignoredGrid:this.grid,te={bucketInstanceId:M,featureIndex:R,collisionGroupID:j,overlapMode:c};for(let se=0;se<l.length;se+=4)$.insertCircle(te,l[se],l[se+1],l[se+2])}projectAndGetPerspectiveRatio(l,c,C,M,R){if(R){let j;M?(j=[l,c,M(l,c),1],o.al(j,j,R)):(j=[l,c,0,1],yi(j,j,R));const $=j[3];return{x:(j[0]/$+1)/2*this.transform.width+oo,y:(-j[1]/$+1)/2*this.transform.height+oo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/$*.5,isOccluded:!1,signedDistanceFromCamera:$}}{const j=this.transform.projectTileCoordinates(l,c,C,M);return{x:(j.point.x+1)/2*this.transform.width+oo,y:(1-j.point.y)/2*this.transform.height+oo,perspectiveRatio:.5+this.transform.cameraToCenterDistance/j.signedDistanceFromCamera*.5,isOccluded:j.isOccluded,signedDistanceFromCamera:j.signedDistanceFromCamera}}}getPerspectiveRatio(l,c,C,M){const R=this.transform.projectTileCoordinates(l,c,C,M);return .5+this.transform.cameraToCenterDistance/R.signedDistanceFromCamera*.5}isOffscreen(l,c,C,M){return C<oo||l>=this.screenRightBoundary||M<oo||c>this.screenBottomBoundary}isInsideGrid(l,c,C,M){return C>=0&&l<this.gridRightBoundary&&M>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const l=o.aq([]);return o.J(l,l,[-100,-100,0]),l}_projectCollisionBox(l,c,C,M,R,j,$,te,se,xe,Oe){let ke=1,qe=0,Ve=0,ut=1;const ot=l.anchorPointX+$[0],At=l.anchorPointY+$[1];if(j&&!R){const Un=this.projectAndGetPerspectiveRatio(ot+1,At,M,se,Oe),wn=Un.x-te.x,kr=Math.atan((Un.y-te.y)/wn)+(wn<0?Math.PI:0),Bi=Math.sin(kr),$i=Math.cos(kr);ke=$i,qe=Bi,Ve=-Bi,ut=$i}else if(!j&&R){const Un=Xt(this.transform);ke=Un.vecEast[0],qe=Un.vecEast[1],Ve=Un.vecSouth[0],ut=Un.vecSouth[1]}let mt=te.x,St=te.y,kt=c;R&&(mt=ot,St=At,kt=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),kt*=this.transform.getPitchedTextCorrection(ot,At,M),xe||(kt*=o.ab(.5+te.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),xe&&(mt+=ke*xe.x*kt+Ve*xe.y*kt,St+=qe*xe.x*kt+ut*xe.y*kt);const Pt=l.x1*kt,Ft=l.x2*kt,Tt=(Pt+Ft)/2,Jt=l.y1*kt,Vt=l.y2*kt,vn=(Jt+Vt)/2,_n=[{offsetX:Pt,offsetY:Jt},{offsetX:Tt,offsetY:Jt},{offsetX:Ft,offsetY:Jt},{offsetX:Ft,offsetY:vn},{offsetX:Ft,offsetY:Vt},{offsetX:Tt,offsetY:Vt},{offsetX:Pt,offsetY:Vt},{offsetX:Pt,offsetY:vn}];let mn=[];for(const{offsetX:Un,offsetY:wn}of _n)mn.push(new o.P(mt+ke*Un+Ve*wn,St+qe*Un+ut*wn));let Bn=!1;if(R){const Un=mn.map(wn=>this.projectAndGetPerspectiveRatio(wn.x,wn.y,M,se,Oe));Bn=Un.some(wn=>!wn.isOccluded),mn=Un.map(wn=>new o.P(wn.x,wn.y))}else Bn=!0;return{box:o.ar(mn),allPointsOccluded:!Bn}}}class Ti{constructor(l,c,C,M){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?c:-c))):M&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class Ua{constructor(l,c,C,M,R){this.text=new Ti(l?l.text:null,c,C,R),this.icon=new Ti(l?l.icon:null,c,M,R)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ea{constructor(l,c,C){this.text=l,this.icon=c,this.skipFade=C}}class ns{constructor(l,c,C,M,R){this.bucketInstanceId=l,this.featureIndex=c,this.sourceLayerIndex=C,this.bucketIndex=M,this.tileID=R}}class Aa{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const c=++this.maxGroupID;this.collisionGroups[l]={ID:c,predicate:C=>C.collisionGroupID===c}}return this.collisionGroups[l]}}function Al(T,l,c,C,M){const{horizontalAlign:R,verticalAlign:j}=o.ay(T);return new o.P(-(R-.5)*l+C[0]*M,-(j-.5)*c+C[1]*M)}class ao{constructor(l,c,C,M,R){this.transform=l.clone(),this.terrain=c,this.collisionIndex=new Mo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Aa(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const c=this.terrain;return c?(C,M)=>c.getElevation(l,C,M):null}getBucketParts(l,c,C,M){const R=C.getBucket(c),j=C.latestFeatureIndex;if(!R||!j||c.id!==R.layerIds[0])return;const $=C.collisionBoxArray,te=R.layers[0].layout,se=R.layers[0].paint,xe=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Oe=C.tileSize/o.X,ke=C.tileID.toUnwrapped(),qe=te.get("text-rotation-alignment")==="map",Ve=o.at(C,1,this.transform.zoom),ut=o.au(this.collisionIndex.transform,C,se.get("text-translate"),se.get("text-translate-anchor")),ot=o.au(this.collisionIndex.transform,C,se.get("icon-translate"),se.get("icon-translate-anchor")),At=Bt(qe,this.transform,Ve);this.retainedQueryData[R.bucketInstanceId]=new ns(R.bucketInstanceId,j,R.sourceLayerIndex,R.index,C.tileID);const mt={bucket:R,layout:te,translationText:ut,translationIcon:ot,unwrappedTileID:ke,pitchedLabelPlaneMatrix:At,scale:xe,textPixelRatio:Oe,holdingForFade:C.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:o.ah(R.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(M)for(const St of R.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:Pt,symbolInstanceEnd:Ft}=St;l.push({sortKey:kt,symbolInstanceStart:Pt,symbolInstanceEnd:Ft,parameters:mt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:mt})}attemptAnchorPlacement(l,c,C,M,R,j,$,te,se,xe,Oe,ke,qe,Ve,ut,ot,At,mt,St,kt){const Pt=o.av[l.textAnchor],Ft=[l.textOffset0,l.textOffset1],Tt=Al(Pt,C,M,Ft,R),Jt=this.collisionIndex.placeCollisionBox(c,ke,te,se,xe,$,j,ot,Oe.predicate,St,Tt,kt);if((!mt||this.collisionIndex.placeCollisionBox(mt,ke,te,se,xe,$,j,At,Oe.predicate,St,Tt,kt).placeable)&&Jt.placeable){let Vt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID]&&this.prevPlacement.placements[qe.crossTileID].text&&(Vt=this.prevPlacement.variableOffsets[qe.crossTileID].anchor),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[qe.crossTileID]={textOffset:Ft,width:C,height:M,anchor:Pt,textBoxScale:R,prevAnchor:Vt},this.markUsedJustification(Ve,Pt,qe,ut),Ve.allowVerticalPlacement&&(this.markUsedOrientation(Ve,ut,qe),this.placedOrientations[qe.crossTileID]=ut),{shift:Tt,placedGlyphBoxes:Jt}}}placeLayerBucketPart(l,c,C){const{bucket:M,layout:R,translationText:j,translationIcon:$,unwrappedTileID:te,pitchedLabelPlaneMatrix:se,textPixelRatio:xe,holdingForFade:Oe,collisionBoxArray:ke,partiallyEvaluatedTextSize:qe,collisionGroup:Ve}=l.parameters,ut=R.get("text-optional"),ot=R.get("icon-optional"),At=o.aw(R,"text-overlap","text-allow-overlap"),mt=At==="always",St=o.aw(R,"icon-overlap","icon-allow-overlap"),kt=St==="always",Pt=R.get("text-rotation-alignment")==="map",Ft=R.get("text-pitch-alignment")==="map",Tt=R.get("icon-text-fit")!=="none",Jt=R.get("symbol-z-order")==="viewport-y",Vt=mt&&(kt||!M.hasIconData()||ot),vn=kt&&(mt||!M.hasTextData()||ut);!M.collisionArrays&&ke&&M.deserializeCollisionBoxes(ke);const _n=this.retainedQueryData[M.bucketInstanceId].tileID,mn=this._getTerrainElevationFunc(_n),Bn=this.transform.getFastPathSimpleProjectionMatrix(_n),Un=(wn,kr,Bi)=>{var $i,Oo;if(c[wn.crossTileID])return;if(Oe)return void(this.placements[wn.crossTileID]=new Ea(!1,!1,!1));let Si=!1,jo=!1,No=!0,xo=null,yo={box:null,placeable:!1,offscreen:null,occluded:!1},ka={box:null,placeable:!1,offscreen:null},Go=null,ds=null,Wa=null,$u=0,fl=0,pl=0;kr.textFeatureIndex?$u=kr.textFeatureIndex:wn.useRuntimeCollisionCircles&&($u=wn.featureIndex),kr.verticalTextFeatureIndex&&(fl=kr.verticalTextFeatureIndex);const uu=kr.textBox;if(uu){const Js=xs=>{let qs=o.ai.horizontal;if(M.allowVerticalPlacement&&!xs&&this.prevPlacement){const nl=this.prevPlacement.placedOrientations[wn.crossTileID];nl&&(this.placedOrientations[wn.crossTileID]=nl,qs=nl,this.markUsedOrientation(M,qs,wn))}return qs},ml=(xs,qs)=>{if(M.allowVerticalPlacement&&wn.numVerticalGlyphVertices>0&&kr.verticalTextBox){for(const nl of M.writingModes)if(nl===o.ai.vertical?(yo=qs(),ka=yo):yo=xs(),yo&&yo.placeable)break}else yo=xs()},sa=wn.textAnchorOffsetStartIndex,Pl=wn.textAnchorOffsetEndIndex;if(Pl===sa){const xs=(qs,nl)=>{const rl=this.collisionIndex.placeCollisionBox(qs,At,xe,_n,te,Ft,Pt,j,Ve.predicate,mn,void 0,Bn);return rl&&rl.placeable&&(this.markUsedOrientation(M,nl,wn),this.placedOrientations[wn.crossTileID]=nl),rl};ml(()=>xs(uu,o.ai.horizontal),()=>{const qs=kr.verticalTextBox;return M.allowVerticalPlacement&&wn.numVerticalGlyphVertices>0&&qs?xs(qs,o.ai.vertical):{box:null,offscreen:null}}),Js(yo&&yo.placeable)}else{let xs=o.av[(Oo=($i=this.prevPlacement)===null||$i===void 0?void 0:$i.variableOffsets[wn.crossTileID])===null||Oo===void 0?void 0:Oo.anchor];const qs=(rl,Md,Bh)=>{const Oh=rl.x2-rl.x1,Sd=rl.y2-rl.y1,ic=wn.textBoxScale,Ih=Tt&&St==="never"?Md:null;let Ta=null,Au=At==="never"?1:2,Ed="never";xs&&Au++;for(let _p=0;_p<Au;_p++){for(let Ec=sa;Ec<Pl;Ec++){const kA=M.textAnchorOffsets.get(Ec);if(xs&&kA.textAnchor!==xs)continue;const Qa=this.attemptAnchorPlacement(kA,rl,Oh,Sd,ic,Pt,Ft,xe,_n,te,Ve,Ed,wn,M,Bh,j,$,Ih,mn);if(Qa&&(Ta=Qa.placedGlyphBoxes,Ta&&Ta.placeable))return Si=!0,xo=Qa.shift,Ta}xs?xs=null:Ed=At}return C&&!Ta&&(Ta={box:this.collisionIndex.placeCollisionBox(uu,"always",xe,_n,te,Ft,Pt,j,Ve.predicate,mn,void 0,Bn).box,offscreen:!1,placeable:!1,occluded:!1}),Ta};ml(()=>qs(uu,kr.iconBox,o.ai.horizontal),()=>{const rl=kr.verticalTextBox;return M.allowVerticalPlacement&&(!yo||!yo.placeable)&&wn.numVerticalGlyphVertices>0&&rl?qs(rl,kr.verticalIconBox,o.ai.vertical):{box:null,occluded:!0,offscreen:null}}),yo&&(Si=yo.placeable,No=yo.offscreen);const nl=Js(yo&&yo.placeable);if(!Si&&this.prevPlacement){const rl=this.prevPlacement.variableOffsets[wn.crossTileID];rl&&(this.variableOffsets[wn.crossTileID]=rl,this.markUsedJustification(M,rl.anchor,wn,nl))}}}if(Go=yo,Si=Go&&Go.placeable,No=Go&&Go.offscreen,wn.useRuntimeCollisionCircles){const Js=M.text.placedSymbolArray.get(wn.centerJustifiedTextSymbolIndex),ml=o.aj(M.textSizeData,qe,Js),sa=R.get("text-padding");ds=this.collisionIndex.placeCollisionCircles(At,Js,M.lineVertexArray,M.glyphOffsetArray,ml,te,se,C,Ft,Ve.predicate,wn.collisionCircleDiameter,sa,j,mn),ds.circles.length&&ds.collisionDetected&&!C&&o.w("Collisions detected, but collision boxes are not shown"),Si=mt||ds.circles.length>0&&!ds.collisionDetected,No=No&&ds.offscreen}if(kr.iconFeatureIndex&&(pl=kr.iconFeatureIndex),kr.iconBox){const Js=ml=>this.collisionIndex.placeCollisionBox(ml,St,xe,_n,te,Ft,Pt,$,Ve.predicate,mn,Tt&&xo?xo:void 0,Bn);ka&&ka.placeable&&kr.verticalIconBox?(Wa=Js(kr.verticalIconBox),jo=Wa.placeable):(Wa=Js(kr.iconBox),jo=Wa.placeable),No=No&&Wa.offscreen}const OA=ut||wn.numHorizontalGlyphVertices===0&&wn.numVerticalGlyphVertices===0,IA=ot||wn.numIconVertices===0;OA||IA?IA?OA||(jo=jo&&Si):Si=jo&&Si:jo=Si=jo&&Si;const Vu=jo&&Wa.placeable;if(Si&&Go.placeable&&this.collisionIndex.insertCollisionBox(Go.box,At,R.get("text-ignore-placement"),M.bucketInstanceId,ka&&ka.placeable&&fl?fl:$u,Ve.ID),Vu&&this.collisionIndex.insertCollisionBox(Wa.box,St,R.get("icon-ignore-placement"),M.bucketInstanceId,pl,Ve.ID),ds&&Si&&this.collisionIndex.insertCollisionCircles(ds.circles,At,R.get("text-ignore-placement"),M.bucketInstanceId,$u,Ve.ID),C&&this.storeCollisionData(M.bucketInstanceId,Bi,kr,Go,Wa,ds),wn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[wn.crossTileID]=new Ea((Si||Vt)&&!(Go!=null&&Go.occluded),(jo||vn)&&!(Wa!=null&&Wa.occluded),No||M.justReloaded),c[wn.crossTileID]=!0};if(Jt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const wn=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let kr=wn.length-1;kr>=0;--kr){const Bi=wn[kr];Un(M.symbolInstances.get(Bi),M.collisionArrays[Bi],Bi)}}else for(let wn=l.symbolInstanceStart;wn<l.symbolInstanceEnd;wn++)Un(M.symbolInstances.get(wn),M.collisionArrays[wn],wn);M.justReloaded=!1}storeCollisionData(l,c,C,M,R,j){if(C.textBox||C.iconBox){let $,te;this.collisionBoxArrays.has(l)?$=this.collisionBoxArrays.get(l):($=new Map,this.collisionBoxArrays.set(l,$)),$.has(c)?te=$.get(c):(te={text:null,icon:null},$.set(c,te)),C.textBox&&(te.text=M.box),C.iconBox&&(te.icon=R.box)}if(j){let $=this.collisionCircleArrays[l];$===void 0&&($=this.collisionCircleArrays[l]=[]);for(let te=0;te<j.circles.length;te+=4)$.push(j.circles[te+0]-oo),$.push(j.circles[te+1]-oo),$.push(j.circles[te+2]),$.push(j.collisionDetected?1:0)}}markUsedJustification(l,c,C,M){let R;R=M===o.ai.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[o.ax(c)];const j=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const $ of j)$>=0&&(l.text.placedSymbolArray.get($).crossTileID=R>=0&&$!==R?0:C.crossTileID)}markUsedOrientation(l,c,C){const M=c===o.ai.horizontal||c===o.ai.horizontalOnly?c:0,R=c===o.ai.vertical?c:0,j=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const $ of j)l.text.placedSymbolArray.get($).placedOrientation=M;C.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=R)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let C=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const M=c?c.symbolFadeChange(l):1,R=c?c.opacities:{},j=c?c.variableOffsets:{},$=c?c.placedOrientations:{};for(const te in this.placements){const se=this.placements[te],xe=R[te];xe?(this.opacities[te]=new Ua(xe,M,se.text,se.icon),C=C||se.text!==xe.text.placed||se.icon!==xe.icon.placed):(this.opacities[te]=new Ua(null,M,se.text,se.icon,se.skipFade),C=C||se.text||se.icon)}for(const te in R){const se=R[te];if(!this.opacities[te]){const xe=new Ua(se,M,!1,!1);xe.isHidden()||(this.opacities[te]=xe,C=C||se.text.placed||se.icon.placed)}}for(const te in j)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=j[te]);for(const te in $)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=$[te]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:l)}updateLayerOpacities(l,c){const C={};for(const M of c){const R=M.getBucket(l);R&&M.latestFeatureIndex&&l.id===R.layerIds[0]&&this.updateBucketOpacities(R,M.tileID,C,M.collisionBoxArray)}}updateBucketOpacities(l,c,C,M){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const R=l.layers[0],j=R.layout,$=new Ua(null,0,!1,!1,!0),te=j.get("text-allow-overlap"),se=j.get("icon-allow-overlap"),xe=R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Oe=j.get("text-rotation-alignment")==="map",ke=j.get("text-pitch-alignment")==="map",qe=j.get("icon-text-fit")!=="none",Ve=new Ua(null,0,te&&(se||!l.hasIconData()||j.get("icon-optional")),se&&(te||!l.hasTextData()||j.get("text-optional")),!0);!l.collisionArrays&&M&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(M);const ut=(At,mt,St)=>{for(let kt=0;kt<mt/4;kt++)At.opacityVertexArray.emplaceBack(St);At.hasVisibleVertices=At.hasVisibleVertices||St!==fn},ot=this.collisionBoxArrays.get(l.bucketInstanceId);for(let At=0;At<l.symbolInstances.length;At++){const mt=l.symbolInstances.get(At),{numHorizontalGlyphVertices:St,numVerticalGlyphVertices:kt,crossTileID:Pt}=mt;let Ft=this.opacities[Pt];C[Pt]?Ft=$:Ft||(Ft=Ve,this.opacities[Pt]=Ft),C[Pt]=!0;const Tt=mt.numIconVertices>0,Jt=this.placedOrientations[mt.crossTileID],Vt=Jt===o.ai.vertical,vn=Jt===o.ai.horizontal||Jt===o.ai.horizontalOnly;if(St>0||kt>0){const mn=bt(Ft.text);ut(l.text,St,Vt?fn:mn),ut(l.text,kt,vn?fn:mn);const Bn=Ft.text.isHidden();[mt.rightJustifiedTextSymbolIndex,mt.centerJustifiedTextSymbolIndex,mt.leftJustifiedTextSymbolIndex].forEach(kr=>{kr>=0&&(l.text.placedSymbolArray.get(kr).hidden=Bn||Vt?1:0)}),mt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(mt.verticalPlacedTextSymbolIndex).hidden=Bn||vn?1:0);const Un=this.variableOffsets[mt.crossTileID];Un&&this.markUsedJustification(l,Un.anchor,mt,Jt);const wn=this.placedOrientations[mt.crossTileID];wn&&(this.markUsedJustification(l,"left",mt,wn),this.markUsedOrientation(l,wn,mt))}if(Tt){const mn=bt(Ft.icon),Bn=!(qe&&mt.verticalPlacedIconSymbolIndex&&Vt);mt.placedIconSymbolIndex>=0&&(ut(l.icon,mt.numIconVertices,Bn?mn:fn),l.icon.placedSymbolArray.get(mt.placedIconSymbolIndex).hidden=Ft.icon.isHidden()),mt.verticalPlacedIconSymbolIndex>=0&&(ut(l.icon,mt.numVerticalIconVertices,Bn?fn:mn),l.icon.placedSymbolArray.get(mt.verticalPlacedIconSymbolIndex).hidden=Ft.icon.isHidden())}const _n=ot&&ot.has(At)?ot.get(At):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const mn=l.collisionArrays[At];if(mn){let Bn=new o.P(0,0);if(mn.textBox||mn.verticalTextBox){let Un=!0;if(xe){const wn=this.variableOffsets[Pt];wn?(Bn=Al(wn.anchor,wn.width,wn.height,wn.textOffset,wn.textBoxScale),Oe&&Bn._rotate(ke?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Un=!1}if(mn.textBox||mn.verticalTextBox){let wn;mn.textBox&&(wn=Vt),mn.verticalTextBox&&(wn=vn),Pu(l.textCollisionBox.collisionVertexArray,Ft.text.placed,!Un||wn,_n.text,Bn.x,Bn.y)}}if(mn.iconBox||mn.verticalIconBox){const Un=!!(!vn&&mn.verticalIconBox);let wn;mn.iconBox&&(wn=Un),mn.verticalIconBox&&(wn=!Un),Pu(l.iconCollisionBox.collisionVertexArray,Ft.icon.placed,wn,_n.icon,qe?Bn.x:0,qe?Bn.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,c){const C=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*C>l}setStale(){this.stale=!0}}function Pu(T,l,c,C,M,R){C&&C.length!==0||(C=[0,0,0,0]);const j=C[0]-oo,$=C[1]-oo,te=C[2]-oo,se=C[3]-oo;T.emplaceBack(l?1:0,c?1:0,M||0,R||0,j,$),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,te,$),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,te,se),T.emplaceBack(l?1:0,c?1:0,M||0,R||0,j,se)}const tu=Math.pow(2,25),so=Math.pow(2,24),Dr=Math.pow(2,17),Za=Math.pow(2,16),Ps=Math.pow(2,9),ia=Math.pow(2,8),Qe=Math.pow(2,1);function bt(T){if(T.opacity===0&&!T.placed)return 0;if(T.opacity===1&&T.placed)return 4294967295;const l=T.placed?1:0,c=Math.floor(127*T.opacity);return c*tu+l*so+c*Dr+l*Za+c*Ps+l*ia+c*Qe+l}const fn=0;class Nn{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,c,C,M,R){const j=this._bucketParts;for(;this._currentTileIndex<l.length;)if(c.getBucketParts(j,M,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort(($,te)=>$.sortKey-te.sortKey));this._currentPartIndex<j.length;)if(c.placeLayerBucketPart(j[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,R())return!0;return!1}}class un{constructor(l,c,C,M,R,j,$,te){this.placement=new ao(l,c,j,$,te),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(l,c,C){const M=S.now(),R=()=>!this._forceFullPlacement&&S.now()-M>2;for(;this._currentPlacementIndex>=0;){const j=c[l[this._currentPlacementIndex]],$=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=$)&&(!j.maxzoom||j.maxzoom>$)){if(this._inProgressLayer||(this._inProgressLayer=new Nn(j)),this._inProgressLayer.continuePlacement(C[j.source],this.placement,this._showCollisionBoxes,j,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const er=512/o.X/2;class Pi{constructor(l,c,C){this.tileID=l,this.bucketInstanceId=C,this._symbolsByKey={};const M=new Map;for(let R=0;R<c.length;R++){const j=c.get(R),$=j.key,te=M.get($);te?te.push(j):M.set($,[j])}for(const[R,j]of M){const $={positions:j.map(te=>({x:Math.floor(te.anchorX*er),y:Math.floor(te.anchorY*er)})),crossTileIDs:j.map(te=>te.crossTileID)};if($.positions.length>128){const te=new o.az($.positions.length,16,Uint16Array);for(const{x:se,y:xe}of $.positions)te.add(se,xe);te.finish(),delete $.positions,$.index=te}this._symbolsByKey[R]=$}}getScaledCoordinates(l,c){const{x:C,y:M,z:R}=this.tileID.canonical,{x:j,y:$,z:te}=c.canonical,se=er/Math.pow(2,te-R),xe=($*o.X+l.anchorY)*se,Oe=M*o.X*er;return{x:Math.floor((j*o.X+l.anchorX)*se-C*o.X*er),y:Math.floor(xe-Oe)}}findMatches(l,c,C){const M=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let R=0;R<l.length;R++){const j=l.get(R);if(j.crossTileID)continue;const $=this._symbolsByKey[j.key];if(!$)continue;const te=this.getScaledCoordinates(j,c);if($.index){const se=$.index.range(te.x-M,te.y-M,te.x+M,te.y+M).sort();for(const xe of se){const Oe=$.crossTileIDs[xe];if(!C[Oe]){C[Oe]=!0,j.crossTileID=Oe;break}}}else if($.positions)for(let se=0;se<$.positions.length;se++){const xe=$.positions[se],Oe=$.crossTileIDs[se];if(Math.abs(xe.x-te.x)<=M&&Math.abs(xe.y-te.y)<=M&&!C[Oe]){C[Oe]=!0,j.crossTileID=Oe;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class ho{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _s{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const c=Math.round((l-this.lng)/360);if(c!==0)for(const C in this.indexes){const M=this.indexes[C],R={};for(const j in M){const $=M[j];$.tileID=$.tileID.unwrapTo($.tileID.wrap+c),R[$.tileID.key]=$}this.indexes[C]=R}this.lng=l}addBucket(l,c,C){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let R=0;R<c.symbolInstances.length;R++)c.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const M=this.usedCrossTileIDs[l.overscaledZ];for(const R in this.indexes){const j=this.indexes[R];if(Number(R)>l.overscaledZ)for(const $ in j){const te=j[$];te.tileID.isChildOf(l)&&te.findMatches(c.symbolInstances,l,M)}else{const $=j[l.scaledTo(Number(R)).key];$&&$.findMatches(c.symbolInstances,l,M)}}for(let R=0;R<c.symbolInstances.length;R++){const j=c.symbolInstances.get(R);j.crossTileID||(j.crossTileID=C.generate(),M[j.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Pi(l,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(l,c){for(const C of c.getCrossTileIDsLists())for(const M of C)delete this.usedCrossTileIDs[l][M]}removeStaleBuckets(l){let c=!1;for(const C in this.indexes){const M=this.indexes[C];for(const R in M)l[M[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,M[R]),delete M[R],c=!0)}return c}}class Ns{constructor(){this.layerIndexes={},this.crossTileIDs=new ho,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,c,C){let M=this.layerIndexes[l.id];M===void 0&&(M=this.layerIndexes[l.id]=new _s);let R=!1;const j={};M.handleWrapJump(C);for(const $ of c){const te=$.getBucket(l);te&&l.id===te.layerIds[0]&&(te.bucketInstanceId||(te.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket($.tileID,te,this.crossTileIDs)&&(R=!0),j[te.bucketInstanceId]=!0)}return M.removeStaleBuckets(j)&&(R=!0),R}pruneUnusedLayers(l){const c={};l.forEach(C=>{c[C]=!0});for(const C in this.layerIndexes)c[C]||delete this.layerIndexes[C]}}var vA="void main() {fragColor=vec4(1.0);}";const ri={prelude:wi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:wi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:wi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:wi(vA,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:wi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:wi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wi(vA,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:wi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:wi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:wi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:wi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:wi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:wi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:wi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:wi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:wi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:wi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:wi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:wi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wi(T,l){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=l.match(/in ([\w]+) ([\w]+)/g),M=T.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=R?R.concat(M):M,$={};return{fragmentSource:T=T.replace(c,(te,se,xe,Oe,ke)=>($[ke]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${ke}
in ${xe} ${Oe} ${ke};
#else
uniform ${xe} ${Oe} u_${ke};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ke}
    ${xe} ${Oe} ${ke} = u_${ke};
#endif
`)),vertexSource:l=l.replace(c,(te,se,xe,Oe,ke)=>{const qe=Oe==="float"?"vec2":"vec4",Ve=ke.match(/color/)?"color":qe;return $[ke]?se==="define"?`
#ifndef HAS_UNIFORM_u_${ke}
uniform lowp float u_${ke}_t;
in ${xe} ${qe} a_${ke};
out ${xe} ${Oe} ${ke};
#else
uniform ${xe} ${Oe} u_${ke};
#endif
`:Ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${ke}
    ${ke} = a_${ke};
#else
    ${xe} ${Oe} ${ke} = u_${ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ke}
    ${ke} = unpack_mix_${Ve}(a_${ke}, u_${ke}_t);
#else
    ${xe} ${Oe} ${ke} = u_${ke};
#endif
`:se==="define"?`
#ifndef HAS_UNIFORM_u_${ke}
uniform lowp float u_${ke}_t;
in ${xe} ${qe} a_${ke};
#else
uniform ${xe} ${Oe} u_${ke};
#endif
`:Ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${ke}
    ${xe} ${Oe} ${ke} = a_${ke};
#else
    ${xe} ${Oe} ${ke} = u_${ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ke}
    ${xe} ${Oe} ${ke} = unpack_mix_${Ve}(a_${ke}, u_${ke}_t);
#else
    ${xe} ${Oe} ${ke} = u_${ke};
#endif
`}),staticAttributes:C,staticUniforms:j}}class Xa{constructor(l,c,C){this.vertexBuffer=l,this.indexBuffer=c,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ai=o.aA([{name:"a_pos",type:"Int16",components:2}]);const ca="#define PROJECTION_MERCATOR",iA="mercator";class ls{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return iA}get shaderDefine(){return ca}get shaderPreludeCode(){return ri.projectionMercator}get vertexShaderPreludeCode(){return ri.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aB.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,c,C,M,R){if(this._cachedMesh)return this._cachedMesh;const j=new o.aC;j.emplaceBack(0,0),j.emplaceBack(o.X,0),j.emplaceBack(0,o.X),j.emplaceBack(o.X,o.X);const $=l.createVertexBuffer(j,Ai.members),te=o.aD.simpleSegment(0,0,4,2),se=new o.aE;se.emplaceBack(1,0,2),se.emplaceBack(1,2,3);const xe=l.createIndexBuffer(se);return this._cachedMesh=new Xa($,xe,te),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}function Lr(T,l){const c=o.ab(l.lat,-85.051129,o.aF);return new o.P(o.O(l.lng)*T,o.Q(c)*T)}function Ei(T,l){return new o.Y(l.x/T,l.y/T).toLngLat()}function Ja(T){return T.cameraToCenterDistance*Math.min(.85*Math.tan(o.aa(90-T.pitch)),Math.tan(o.aa(89.25-T.pitch)))}function Rs(T,l){const c=T.canonical,C=l/o.aG(c.z),M=c.x+Math.pow(2,c.z)*T.wrap,R=o.aq(new Float64Array(16));return o.J(R,R,[M*C,c.y*C,0]),o.K(R,R,[C/o.X,C/o.X,1]),R}function So(T,l,c,C,M){const R=o.Y.fromLngLat(T,l),j=M*o.aH(1,T.lat),$=j*Math.cos(o.aa(c)),te=Math.sqrt(j*j-$*$),se=te*Math.sin(o.aa(-C)),xe=te*Math.cos(o.aa(-C));return new o.Y(R.x+se,R.y+xe,R.z+$)}class Gs{constructor(l=0,c=0,C=0,M=0){if(isNaN(l)||l<0||isNaN(c)||c<0||isNaN(C)||C<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=c,this.left=C,this.right=M}interpolate(l,c,C){return c.top!=null&&l.top!=null&&(this.top=o.y.number(l.top,c.top,C)),c.bottom!=null&&l.bottom!=null&&(this.bottom=o.y.number(l.bottom,c.bottom,C)),c.left!=null&&l.left!=null&&(this.left=o.y.number(l.left,c.left,C)),c.right!=null&&l.right!=null&&(this.right=o.y.number(l.right,c.right,C)),this}getCenter(l,c){const C=o.ab((this.left+l-this.right)/2,0,l),M=o.ab((this.top+c-this.bottom)/2,0,c);return new o.P(C,M)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Gs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function hu(T,l){if(!T.renderWorldCopies||T.lngRange)return;const c=l.lng-T.center.lng;l.lng+=c>180?-360:c<-180?360:0}function zl(T){return Math.max(0,Math.floor(T))}class rs{constructor(l,c,C,M,R,j){this._callbacks=l,this._tileSize=512,this._renderWorldCopies=j===void 0||!!j,this._minZoom=c||0,this._maxZoom=C||22,this._minPitch=M??0,this._maxPitch=R??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.N(0,0),this._elevation=0,this._zoom=0,this._tileZoom=zl(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Gs,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,c,C){this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=zl(this._zoom),this._scale=o.aG(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new Gs(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!C&&l.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const c=o.aI(l,-180,180)*Math.PI/180;var C,M,R,j,$,te,se,xe,Oe;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=g(),C=this._rotationMatrix,R=-this._bearingInRadians,j=(M=this._rotationMatrix)[0],$=M[1],te=M[2],se=M[3],xe=Math.sin(R),Oe=Math.cos(R),C[0]=j*Oe+te*xe,C[1]=$*Oe+se*xe,C[2]=j*-xe+te*Oe,C[3]=$*-xe+se*Oe)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const c=o.ab(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const c=l/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aJ(this._fovInRadians)}setFov(l){l=o.ab(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=o.aa(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const c=this.getConstrained(this._center,l).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aG(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,c){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,c,C){this._unmodified=!1,this._edgeInsets.interpolate(l,c,C),this._constrain(),this._calcMatrices()}resize(l,c,C=!0){this._width=l,this._height=c,C&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ut([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.aF])}getConstrained(l,c){return this._callbacks.getConstrained(l,c)}getCameraQueryGeometry(l,c){if(c.length===1)return[c[0],l];{let C=l.x,M=l.y,R=l.x,j=l.y;for(const $ of c)C=Math.min(C,$.x),M=Math.min(M,$.y),R=Math.max(R,$.x),j=Math.max(j,$.y);return[new o.P(C,M),new o.P(R,M),new o.P(R,j),new o.P(C,j),new o.P(C,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:c,zoom:C}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(C),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=o.aq(new Float64Array(16));o.K(l,l,[this._width/2,-this._height/2,1]),o.J(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=o.aq(new Float64Array(16)),o.K(l,l,[1,-1,1]),o.J(l,l,[-1,-1,0]),o.K(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,c,C,M){const R=C!==void 0?C:this.bearing,j=M=M!==void 0?M:this.pitch,$=o.Y.fromLngLat(l,c),te=-Math.cos(o.aa(j)),se=Math.sin(o.aa(j)),xe=se*Math.sin(o.aa(R)),Oe=-se*Math.cos(o.aa(R));let ke=this.elevation;const qe=c-ke;let Ve;te*qe>=0||Math.abs(te)<.1?(Ve=1e4,ke=c+Ve*te):Ve=-qe/te;let ut,ot,At=o.aK(1,$.y),mt=0;do{if(mt+=1,mt>10)break;ot=Ve/At,ut=new o.Y($.x+xe*ot,$.y+Oe*ot),At=1/ut.meterInMercatorCoordinateUnits()}while(Math.abs(Ve-ot*At)>1e-12);return{center:ut.toLngLat(),elevation:ke,zoom:o.a8(this.height/2/Math.tan(this.fovInRadians/2)/ot/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const c=o.aH(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/c,M=o.Y.fromLngLat(this.center,this.elevation),R=So(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=l;const j=this.calculateCenterFromCameraLngLatAlt(R.toLngLat(),o.aK(R.z,M.y),this.bearing,this.pitch);this._elevation=j.elevation,this._center=j.center,this.setZoom(j.zoom)}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return So(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const c=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/c,l.canonical.y/c,1/c/o.X,1/c/o.X]}}class Vs{constructor(l,c){this.min=l,this.max=c,this.center=o.aL([],o.aM([],this.min,this.max),.5)}quadrant(l){const c=[l%2==0,l<2],C=o.aN(this.min),M=o.aN(this.max);for(let R=0;R<c.length;R++)C[R]=c[R]?this.min[R]:this.center[R],M[R]=c[R]?this.center[R]:this.max[R];return M[2]=this.max[2],new Vs(C,M)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let c=!0;for(let C=0;C<l.planes.length;C++){const M=this.intersectsPlane(l.planes[C]);if(M===0)return 0;M===1&&(c=!1)}return c?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let c=l[3],C=l[3];for(let M=0;M<3;M++)l[M]>0?(c+=l[M]*this.min[M],C+=l[M]*this.max[M]):(C+=l[M]*this.min[M],c+=l[M]*this.max[M]);return c>=0?2:C<0?0:1}}class fo{distanceToTile2d(l,c,C,M){const R=M.distanceX([l,c]),j=M.distanceY([l,c]);return Math.hypot(R,j)}getWrap(l,c,C){return C}getTileAABB(l,c,C,M){var R,j;let $=C,te=C;if(M.terrain){const xe=new o.S(l.z,c,l.z,l.x,l.y),Oe=M.terrain.getMinMaxElevation(xe);$=(R=Oe.minElevation)!==null&&R!==void 0?R:C,te=(j=Oe.maxElevation)!==null&&j!==void 0?j:C}const se=1<<l.z;return new Vs([c+l.x/se,l.y/se,$],[c+(l.x+1)/se,(l.y+1)/se,te])}allowVariableZoom(l,c){const C=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,M=o.ab(78.5-C/2,0,60);return!!c.terrain||l.pitch>M||l.padding.top>=.1}allowWorldCopies(){return!0}recalculateCache(){}}class ms{constructor(l,c,C){this.points=l,this.planes=c,this.aabb=C}static fromInvProjectionMatrix(l,c=1,C=0){const M=Math.pow(2,C),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(se=>{const xe=1/(se=o.al([],se,l))[3]/c*M;return o.aO(se,se,[xe,xe,1/se[3],xe])}),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(se=>{const xe=o.aP([],R[se[0]],R[se[1]]),Oe=o.aP([],R[se[2]],R[se[1]]),ke=o.aQ([],o.aR([],xe,Oe)),qe=-o.aS(ke,R[se[1]]);return ke.concat(qe)}),$=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],te=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const se of R)for(let xe=0;xe<3;xe++)$[xe]=Math.min($[xe],se[xe]),te[xe]=Math.max(te[xe],se[xe]);return new ms(R,j,new Vs($,te))}}class Ms{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,C){return this._helper.interpolatePadding(l,c,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,C=!0){this._helper.resize(l,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,c){}constructor(l,c,C,M,R){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new rs({calcMatrices:()=>{this._calcMatrices()},getConstrained:(j,$)=>this.getConstrained(j,$)},l,c,C,M,R),this._coveringTilesDetailsProvider=new fo}clone(){const l=new Ms;return l.apply(this),l}apply(l,c,C){this._helper.apply(l,c,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const c=[new o.aT(0,l)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new o.P(0,0)),M=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),R=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),j=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),$=Math.floor(Math.min(C.x,M.x,R.x,j.x)),te=Math.floor(Math.max(C.x,M.x,R.x,j.x)),se=1;for(let xe=$-se;xe<=te+se;xe++)xe!==0&&c.push(new o.aT(xe,l))}return c}getCameraFrustum(){return ms.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const c=this.screenPointToLocation(this.centerPoint,l),C=l?l.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(l,c){const C=o.aH(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(c,C),R=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),j=o.Y.fromLngLat(l),$=new o.Y(j.x-(M.x-R.x),j.y-(M.y-R.y));this.setCenter($==null?void 0:$.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,c){return c?this.coordinatePoint(o.Y.fromLngLat(l),c.getElevationForLngLatZoom(l,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.Y.fromLngLat(l))}screenPointToLocation(l,c){var C;return(C=this.screenPointToMercatorCoordinate(l,c))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(l,c){if(c){const C=c.pointCoordinate(l);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,c){const C=c||0,M=[l.x,l.y,0,1],R=[l.x,l.y,1,1];o.al(M,M,this._pixelMatrixInverse),o.al(R,R,this._pixelMatrixInverse);const j=M[3],$=R[3],te=M[1]/j,se=R[1]/$,xe=M[2]/j,Oe=R[2]/$,ke=xe===Oe?0:(C-xe)/(Oe-xe);return new o.Y(o.y.number(M[0]/j,R[0]/$,ke)/this.worldSize,o.y.number(te,se,ke)/this.worldSize,C)}coordinatePoint(l,c=0,C=this._pixelMatrix){const M=[l.x*this.worldSize,l.y*this.worldSize,c,1];return o.al(M,M,C),new o.P(M[0]/M[3],M[1]/M[3])}getBounds(){const l=Math.max(0,this._helper._height/2-Ja(this));return new Ut().extend(this.screenPointToLocation(new o.P(0,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,l))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(l,c){return c?c.pointCoordinate(l)!=null:l.y>this.height/2-Ja(this)}calculatePosMatrix(l,c=!1,C){var M;const R=(M=l.key)!==null&&M!==void 0?M:o.aU(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),j=c?this._alignedPosMatrixCache:this._posMatrixCache;if(j.has(R)){const se=j.get(R);return C?se.f32:se.f64}const $=Rs(l,this.worldSize);o.L($,c?this._alignedProjMatrix:this._viewProjMatrix,$);const te={f64:$,f32:new Float32Array($)};return j.set(R,te),C?te.f32:te.f64}calculateFogMatrix(l){const c=l.key,C=this._fogMatrixCacheF32;if(C.has(c))return C.get(c);const M=Rs(l,this.worldSize);return o.L(M,this._fogMatrix,M),C.set(c,new Float32Array(M)),C.get(c)}getConstrained(l,c){c=o.ab(+c,this.minZoom,this.maxZoom);const C={center:new o.N(l.lng,l.lat),zoom:c};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const R=this.tileSize*o.aG(C.zoom);let j=0,$=R,te=0,se=R,xe=0,Oe=0;const{x:ke,y:qe}=this.size;if(this._helper._latRange){const St=this._helper._latRange;j=o.Q(St[1])*R,$=o.Q(St[0])*R,$-j<qe&&(xe=qe/($-j))}M&&(te=o.aI(o.O(M[0])*R,0,R),se=o.aI(o.O(M[1])*R,0,R),se<te&&(se+=R),se-te<ke&&(Oe=ke/(se-te)));const{x:Ve,y:ut}=Lr(R,l);let ot,At;const mt=Math.max(Oe||0,xe||0);if(mt){const St=new o.P(Oe?(se+te)/2:Ve,xe?($+j)/2:ut);return C.center=Ei(R,St).wrap(),C.zoom+=o.a8(mt),C}if(this._helper._latRange){const St=qe/2;ut-St<j&&(At=j+St),ut+St>$&&(At=$-St)}if(M){const St=(te+se)/2;let kt=Ve;this._helper._renderWorldCopies&&(kt=o.aI(Ve,St-R/2,St+R/2));const Pt=ke/2;kt-Pt<te&&(ot=te+Pt),kt+Pt>se&&(ot=se-Pt)}if(ot!==void 0||At!==void 0){const St=new o.P(ot??Ve,At??ut);C.center=Ei(R,St).wrap()}return C}calculateCenterFromCameraLngLatAlt(l,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,C,M)}_calculateNearFarZIfNeeded(l,c,C){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),R=l-M*this._helper._pixelPerMeter/Math.cos(c),j=M<0?R:l,$=Math.PI/2+this.pitchInRadians,te=o.aa(this.fov)*(Math.abs(Math.cos(o.aa(this.roll)))*this.height+Math.abs(Math.sin(o.aa(this.roll)))*this.width)/this.height*(.5+C.y/this.height),se=Math.sin(te)*j/Math.sin(o.ab(Math.PI-$-te,.01,Math.PI-.01)),xe=Ja(this),Oe=Math.atan(xe/this._helper.cameraToCenterDistance),ke=o.aa(.75),qe=Oe>ke?2*Oe*(.5+C.y/(2*xe)):ke,Ve=Math.sin(qe)*j/Math.sin(o.ab(Math.PI-$-qe,.01,Math.PI-.01)),ut=Math.min(se,Ve);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*ut+j),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,c=Lr(this.worldSize,this.center),C=c.x,M=c.y;this._helper._pixelPerMeter=o.aH(1,this.center.lat)*this.worldSize;const R=o.aa(Math.min(this.pitch,89.25)),j=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(R));let $;this._calculateNearFarZIfNeeded(j,R,l),$=new Float64Array(16),o.aV($,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.an(this._invProjMatrix,$),$[8]=2*-l.x/this._helper._width,$[9]=2*l.y/this._helper._height,this._projectionMatrix=o.aW($),o.K($,$,[1,-1,1]),o.J($,$,[0,0,-this._helper.cameraToCenterDistance]),o.aX($,$,-this.rollInRadians),o.aY($,$,this.pitchInRadians),o.aX($,$,-this.bearingInRadians),o.J($,$,[-C,-M,0]),this._mercatorMatrix=o.K([],$,[this.worldSize,this.worldSize,this.worldSize]),o.K($,$,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,$),o.J($,$,[0,0,-this.elevation]),this._viewProjMatrix=$,this._invViewProjMatrix=o.an([],$);const te=[0,0,-1,1];o.al(te,te,this._invViewProjMatrix),this._cameraPosition=[te[0]/te[3],te[1]/te[3],te[2]/te[3]],this._fogMatrix=new Float64Array(16),o.aV(this._fogMatrix,this.fovInRadians,this.width/this.height,j,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,o.K(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.aX(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.aY(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.aX(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.J(this._fogMatrix,this._fogMatrix,[-C,-M,0]),o.K(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.J(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.L(new Float64Array(16),this.clipSpaceToPixelsMatrix,$);const se=this._helper._width%2/2,xe=this._helper._height%2/2,Oe=Math.cos(this.bearingInRadians),ke=Math.sin(-this.bearingInRadians),qe=C-Math.round(C)+Oe*se+ke*xe,Ve=M-Math.round(M)+Oe*xe+ke*se,ut=new Float64Array($);if(o.J(ut,ut,[qe>.5?qe-1:qe,Ve>.5?Ve-1:Ve,0]),this._alignedProjMatrix=ut,$=o.an(new Float64Array(16),this._pixelMatrix),!$)throw new Error("failed to invert matrix");this._pixelMatrixInverse=$,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.al(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=o.aH(1,this.center.lat)*this.worldSize;return So(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,c){const C=o.Y.fromLngLat(l),M=[C.x*this.worldSize,C.y*this.worldSize,c,1];return o.al(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(l){const{overscaledTileID:c,aligned:C,applyTerrainMatrix:M}=l,R=this._helper.getMercatorTileCoordinates(c),j=c?this.calculatePosMatrix(c,C,!0):null;let $;return $=c&&c.terrainRttPosMatrix32f&&M?c.terrainRttPosMatrix32f:j||o.aZ(),{mainMatrix:$,tileMercatorCoords:R,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:$}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,c,C){return 1}transformLightDirection(l){return o.aN(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,c,C,M){const R=this.calculatePosMatrix(C);let j;M?(j=[l,c,M(l,c),1],o.al(j,j,R)):(j=[l,c,0,1],yi(j,j,R));const $=j[3];return{point:new o.P(j[0]/$,j[1]/$),signedDistanceFromCamera:$,isOccluded:!1}}populateCache(l){for(const c of l)this.calculatePosMatrix(c)}getMatrixForModel(l,c){const C=o.Y.fromLngLat(l,c),M=C.meterInMercatorCoordinateUnits(),R=o.a_();return o.J(R,R,[C.x,C.y,C.z]),o.aX(R,R,Math.PI),o.aY(R,R,Math.PI/2),o.K(R,R,[-M,M,M]),R}getProjectionDataForCustomLayer(l=!0){const c=new o.S(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:l}),M=Rs(c,this.worldSize);o.L(M,this._viewProjMatrix,M),C.tileMercatorCoords=[0,0,1,1];const R=[o.X,o.X,this.worldSize/this._helper.pixelsPerMeter],j=o.a$();return o.K(j,M,R),C.fallbackMatrix=j,C.mainMatrix=j,C}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function el(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ks(T){if(T.useSlerp)if(T.k<1){const l=o.b0(T.startEulerAngles.roll,T.startEulerAngles.pitch,T.startEulerAngles.bearing),c=o.b0(T.endEulerAngles.roll,T.endEulerAngles.pitch,T.endEulerAngles.bearing),C=new Float64Array(4);o.b1(C,l,c,T.k);const M=o.b2(C);T.tr.setRoll(M.roll),T.tr.setPitch(M.pitch),T.tr.setBearing(M.bearing)}else T.tr.setRoll(T.endEulerAngles.roll),T.tr.setPitch(T.endEulerAngles.pitch),T.tr.setBearing(T.endEulerAngles.bearing);else T.tr.setRoll(o.y.number(T.startEulerAngles.roll,T.endEulerAngles.roll,T.k)),T.tr.setPitch(o.y.number(T.startEulerAngles.pitch,T.endEulerAngles.pitch,T.k)),T.tr.setBearing(o.y.number(T.startEulerAngles.bearing,T.endEulerAngles.bearing,T.k))}function El(T,l,c,C,M){const R=M.padding,j=Lr(M.worldSize,c.getNorthWest()),$=Lr(M.worldSize,c.getNorthEast()),te=Lr(M.worldSize,c.getSouthEast()),se=Lr(M.worldSize,c.getSouthWest()),xe=o.aa(-C),Oe=j.rotate(xe),ke=$.rotate(xe),qe=te.rotate(xe),Ve=se.rotate(xe),ut=new o.P(Math.max(Oe.x,ke.x,Ve.x,qe.x),Math.max(Oe.y,ke.y,Ve.y,qe.y)),ot=new o.P(Math.min(Oe.x,ke.x,Ve.x,qe.x),Math.min(Oe.y,ke.y,Ve.y,qe.y)),At=ut.sub(ot),mt=(M.width-(R.left+R.right+l.left+l.right))/At.x,St=(M.height-(R.top+R.bottom+l.top+l.bottom))/At.y;if(St<0||mt<0)return void el();const kt=Math.min(o.a8(M.scale*Math.min(mt,St)),T.maxZoom),Pt=o.P.convert(T.offset),Ft=new o.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(o.aa(C)),Tt=Pt.add(Ft).mult(M.scale/o.aG(kt));return{center:Ei(M.worldSize,j.add(te).div(2).sub(Tt)),zoom:kt,bearing:C}}class oA{get useGlobeControls(){return!1}handlePanInertia(l,c){return{easingOffset:l,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(l,c){l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta),l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta)}handleMapControlsPan(l,c,C){l.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(C,l.around)}cameraForBoxAndBearing(l,c,C,M,R){return El(l,c,C,M,R)}handleJumpToCenterZoom(l,c){l.zoom!==(c.zoom!==void 0?+c.zoom:l.zoom)&&l.setZoom(+c.zoom),c.center!==void 0&&l.setCenter(o.N.convert(c.center))}handleEaseTo(l,c){const C=l.zoom,M=l.padding,R={roll:l.roll,pitch:l.pitch,bearing:l.bearing},j={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},$=c.zoom!==void 0,te=!l.isPaddingEqual(c.padding);let se=!1;const xe=$?+c.zoom:l.zoom;let Oe=l.centerPoint.add(c.offsetAsPoint);const ke=l.screenPointToLocation(Oe),{center:qe,zoom:Ve}=l.getConstrained(o.N.convert(c.center||ke),xe??C);hu(l,qe);const ut=Lr(l.worldSize,ke),ot=Lr(l.worldSize,qe).sub(ut),At=o.aG(Ve-C);return se=Ve!==C,{easeFunc:mt=>{if(se&&l.setZoom(o.y.number(C,Ve,mt)),o.b3(R,j)||Ks({startEulerAngles:R,endEulerAngles:j,tr:l,k:mt,useSlerp:R.roll!=j.roll}),te&&(l.interpolatePadding(M,c.padding,mt),Oe=l.centerPoint.add(c.offsetAsPoint)),c.around)l.setLocationAtPoint(c.around,c.aroundPoint);else{const St=o.aG(l.zoom-C),kt=Ve>C?Math.min(2,At):Math.max(.5,At),Pt=Math.pow(kt,1-mt),Ft=Ei(l.worldSize,ut.add(ot.mult(mt*Pt)).mult(St));l.setLocationAtPoint(l.renderWorldCopies?Ft.wrap():Ft,Oe)}},isZooming:se,elevationCenter:qe}}handleFlyTo(l,c){const C=c.zoom!==void 0,M=l.zoom,R=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),C?+c.zoom:M),j=R.center,$=R.zoom;hu(l,j);const te=Lr(l.worldSize,c.locationAtOffset),se=Lr(l.worldSize,j).sub(te),xe=se.mag(),Oe=o.aG($-M);let ke;if(c.minZoom!==void 0){const qe=Math.min(+c.minZoom,M,$),Ve=l.getConstrained(j,qe).zoom;ke=o.aG(Ve-M)}return{easeFunc:(qe,Ve,ut,ot)=>{l.setZoom(qe===1?$:M+o.a8(Ve));const At=qe===1?j:Ei(l.worldSize,te.add(se.mult(ut)).mult(Ve));l.setLocationAtPoint(l.renderWorldCopies?At.wrap():At,ot)},scaleOfZoom:Oe,targetCenter:j,scaleOfMinZoom:ke,pixelPathLength:xe}}}class Vi{constructor(l,c,C){this.blendFunction=l,this.blendColor=c,this.mask=C}}Vi.Replace=[1,0],Vi.disabled=new Vi(Vi.Replace,o.b4.transparent,[!1,!1,!1,!1]),Vi.unblended=new Vi(Vi.Replace,o.b4.transparent,[!0,!0,!0,!0]),Vi.alphaBlended=new Vi([1,771],o.b4.transparent,[!0,!0,!0,!0]);const nu=2305;class Ui{constructor(l,c,C){this.enable=l,this.mode=c,this.frontFace=C}}Ui.disabled=new Ui(!1,1029,nu),Ui.backCCW=new Ui(!0,1029,nu),Ui.frontCCW=new Ui(!0,1028,nu);class Jr{constructor(l,c,C){this.func=l,this.mask=c,this.range=C}}Jr.ReadOnly=!1,Jr.ReadWrite=!0,Jr.disabled=new Jr(519,Jr.ReadOnly,[0,1]);const ru=7680;class Ni{constructor(l,c,C,M,R,j){this.test=l,this.ref=c,this.mask=C,this.fail=M,this.depthFail=R,this.pass=j}}Ni.disabled=new Ni({func:519,mask:0},0,0,ru,ru,ru);const lo=new WeakMap;function Ri(T){var l;if(lo.has(T))return lo.get(T);{const c=(l=T.getParameter(T.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return lo.set(T,c),c}}class ee{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const c=l.context,C=c.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const M=new o.aC;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const R=new o.aE;R.emplaceBack(0,1,2),this._fullscreenTriangle=new Xa(c.createVertexBuffer(M,Ai.members),c.createIndexBuffer(R),o.aD.simpleSegment(0,0,M.length,R.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(C.TEXTURE1);const j=C.createTexture();C.bindTexture(C.TEXTURE_2D,j),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(j),Ri(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,c){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,c=l.gl;l.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,c){const C=this._cachedRenderContext.context,M=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:o.b4.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,M.TRIANGLES,Jr.disabled,Ni.disabled,Vi.unblended,Ui.disabled,((R,j)=>({u_input:R,u_output_expected:j}))(l,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ri(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const R=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:R}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ri(l)){const c=l.clientWaitSync(this._readbackQueue.sync,0,0);if(c===l.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ee._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let c=0;return c+=l[0]/256,c+=l[1]/65536,c+=l[2]/16777216,l[3]<127&&(c=-c),c/128}}const Be=o.X/128;function tt(T,l){const c=T.granularity!==void 0?Math.max(T.granularity,1):1,C=c+(T.generateBorders?2:0),M=c+(T.extendToNorthPole||T.generateBorders?1:0)+(T.extendToSouthPole||T.generateBorders?1:0),R=C+1,j=M+1,$=T.generateBorders?-1:0,te=T.generateBorders||T.extendToNorthPole?-1:0,se=c+(T.generateBorders?1:0),xe=c+(T.generateBorders||T.extendToSouthPole?1:0),Oe=R*j,ke=C*M*6,qe=R*j>65536;if(qe&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ve=qe||l==="32bit",ut=new Int16Array(2*Oe);let ot=0;for(let St=te;St<=xe;St++)for(let kt=$;kt<=se;kt++){let Pt=kt/c*o.X;kt===-1&&(Pt=-64),kt===c+1&&(Pt=o.X+Be);let Ft=St/c*o.X;St===-1&&(Ft=T.extendToNorthPole?o.b6:-64),St===c+1&&(Ft=T.extendToSouthPole?o.b7:o.X+Be),ut[ot++]=Pt,ut[ot++]=Ft}const At=Ve?new Uint32Array(ke):new Uint16Array(ke);let mt=0;for(let St=0;St<M;St++)for(let kt=0;kt<C;kt++){const Pt=kt+1+St*R,Ft=kt+(St+1)*R,Tt=kt+1+(St+1)*R;At[mt++]=kt+St*R,At[mt++]=Ft,At[mt++]=Pt,At[mt++]=Pt,At[mt++]=Ft,At[mt++]=Tt}return{vertices:ut.buffer.slice(0),indices:At.buffer.slice(0),uses32bitIndices:Ve}}const qt=new o.aB({fill:new o.b8(128,2),line:new o.b8(512,0),tile:new o.b8(128,32),stencil:new o.b8(128,1),circle:3});class Or{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ri.projectionGlobe}get vertexShaderPreludeCode(){return ri.projectionMercator.vertexSource}get subdivisionGranularity(){return qt}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new ee(l));const c=o.Q(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(c,C),R=S.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=R);const j=Math.min(Math.max((R-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.b9(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.ba(j))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,c,C,M,R){const j=(R==="stencil"?qt.stencil:qt.tile).getGranularityForZoomLevel(c.z);return this._getMesh(l,{granularity:j,generateBorders:C,extendToNorthPole:c.y===0&&M,extendToSouthPole:c.y===(1<<c.z)-1&&M})}_getMesh(l,c){const C=this._getMeshKey(c);if(C in this._tileMeshCache)return this._tileMeshCache[C];const M=function(R,j){const $=tt(j,"16bit"),te=o.aC.deserialize({arrayBuffer:$.vertices,length:$.vertices.byteLength/2/2}),se=o.aE.deserialize({arrayBuffer:$.indices,length:$.indices.byteLength/2/3});return new Xa(R.createVertexBuffer(te,Ai.members),R.createIndexBuffer(se),o.aD.simpleSegment(0,0,te.length,se.length))}(l,c);return this._tileMeshCache[C]=M,M}recalculate(l){}hasTransition(){const l=S.now();let c=!1;return c=c||(l-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const Gn=new o.q({type:new o.D(o.v.projection.type)});class si extends o.E{constructor(l){super(),this._transitionable=new o.T(Gn),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0)),this._mercatorProjection=new ls,this._verticalPerspectiveProjection=new Or}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof o.bb){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,c,C,M,R){return this.currentProjection.getMeshFromTileID(l,c,C,M,R)}setProjection(l){this._transitionable.setValue("type",(l==null?void 0:l.type)||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function ci(T){const l=vi(T.worldSize,T.center.lat);return 2*Math.PI*l}function gr(T,l,c,C,M){const R=1/(1<<M),j=l/o.X*R+C*R,$=o.bd((T/o.X*R+c*R)*Math.PI*2+Math.PI,2*Math.PI),te=2*Math.atan(Math.exp(Math.PI-j*Math.PI*2))-.5*Math.PI,se=Math.cos(te),xe=new Float64Array(3);return xe[0]=Math.sin($)*se,xe[1]=Math.sin(te),xe[2]=Math.cos($)*se,xe}function Ir(T){return function(l,c){const C=Math.cos(c),M=new Float64Array(3);return M[0]=Math.sin(l)*C,M[1]=Math.sin(c),M[2]=Math.cos(l)*C,M}(T.lng*Math.PI/180,T.lat*Math.PI/180)}function vi(T,l){return T/(2*Math.PI)/Math.cos(l*Math.PI/180)}function Eo(T){const l=Math.asin(T[1])/Math.PI*180,c=Math.sqrt(T[0]*T[0]+T[2]*T[2]);if(c>1e-6){const C=T[0]/c,M=Math.acos(T[2]/c),R=(C>0?M:-M)/Math.PI*180;return new o.N(o.aI(R,-180,180),l)}return new o.N(0,l)}function ki(T){return Math.cos(T*Math.PI/180)}function qr(T,l){const c=ki(T),C=ki(l);return o.a8(C/c)}function Hi(T,l){const c=T.rotate(l.bearingInRadians),C=l.zoom+qr(l.center.lat,0),M=o.b9(1/ki(l.center.lat),1/ki(Math.min(Math.abs(l.center.lat),60)),o.bc(C,7,3,0,1)),R=360/ci({worldSize:l.worldSize,center:{lat:l.center.lat}});return new o.N(l.center.lng-c.x*R*M,o.ab(l.center.lat+c.y*R,-85.051129,o.aF))}function Zi(T){const l=.5*T,c=Math.sin(l),C=Math.cos(l);return Math.log(c+C)-Math.log(C-c)}function us(T,l,c,C){const M=T.lat+c*C;if(Math.abs(c)>1){const R=(Math.sign(T.lat+c)!==Math.sign(T.lat)?-Math.abs(T.lat):Math.abs(T.lat))*Math.PI/180,j=Math.abs(T.lat+c)*Math.PI/180,$=Zi(R+C*(j-R)),te=Zi(R),se=Zi(j);return new o.N(T.lng+l*(($-te)/(se-te)),M)}return new o.N(T.lng+l*C,M)}class ya{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=l}recalculateCache(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(l,c,C,M){const R=`${l.z}_${l.x}_${l.y}`,j=this._cache.get(R);if(j)return j;const $=this._cachePrevious.get(R);if($)return this._cache.set(R,$),$;const te=this._aabbFactory(l,c,C,M);return this._cache.set(R,te),this._hadAnyChanges=!0,te}}function za(T,l,c){const C=T-l;return C<0?-C:Math.max(0,C-c)}function fu(T,l,c,C,M){const R=T-c;let j;return j=R<0?Math.min(-R,1+R-M):R>1?Math.min(Math.max(R-M,0),1-R):0,Math.max(j,za(l,C,M))}class Hs{constructor(){this._aabbCache=new ya(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(l,c,C,M){const R=1<<C.z,j=1/R,$=C.x/R,te=C.y/R;let se=2;return se=Math.min(se,fu(l,c,$,te,j)),se=Math.min(se,fu(l,c,$+.5,-te-j,j)),se=Math.min(se,fu(l,c,$+.5,2-te-j,j)),se}getWrap(l,c,C){const M=1<<c.z,R=1/M,j=c.x/M,$=za(l.x,j,R),te=za(l.x,j-1,R),se=za(l.x,j+1,R),xe=Math.min($,te,se);return xe===se?1:xe===te?-1:0}allowVariableZoom(l,c){return rr(l,c)>4}allowWorldCopies(){return!1}getTileAABB(l,c,C,M){return this._aabbCache.getTileAABB(l,c,C,M)}_computeTileAABB(l,c,C,M){if(l.z<=0)return new Vs([-1,-1,-1],[1,1,1]);if(l.z===1)return new Vs([l.x===0?-1:0,l.y===0?0:-1,-1],[l.x===0?0:1,l.y===0?1:0,1]);{const R=[gr(0,0,l.x,l.y,l.z),gr(o.X,0,l.x,l.y,l.z),gr(o.X,o.X,l.x,l.y,l.z),gr(0,o.X,l.x,l.y,l.z)],j=[1,1,1],$=[-1,-1,-1];for(const te of R)for(let se=0;se<3;se++)j[se]=Math.min(j[se],te[se]),$[se]=Math.max($[se],te[se]);if(l.y===0||l.y===(1<<l.z)-1){const te=[0,l.y===0?1:-1,0];for(let se=0;se<3;se++)j[se]=Math.min(j[se],te[se]),$[se]=Math.max($[se],te[se])}return new Vs(j,$)}}}class dc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,C){return this._helper.interpolatePadding(l,c,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c){this._helper.resize(l,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(){this._cachedClippingPlane=o.be(),this._projectionMatrix=o.a_(),this._globeViewProjMatrix32f=o.aZ(),this._globeViewProjMatrixNoCorrection=o.a_(),this._globeViewProjMatrixNoCorrectionInverted=o.a_(),this._globeProjMatrixInverted=o.a_(),this._cameraPosition=o.bf(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new rs({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._coveringTilesDetailsProvider=new Hs}clone(){const l=new dc;return l.apply(this),l}apply(l,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=o.bf();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:c,applyGlobeMatrix:C}=l,M=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const c=this.pitchInRadians,C=this.cameraToCenterDistance/l,M=Math.sin(c)*C,R=Math.cos(c)*C+1,j=1/Math.sqrt(M*M+R*R)*1;let $=-M,te=R;const se=Math.sqrt($*$+te*te);$/=se,te/=se;const xe=[0,$,te];return o.bg(xe,xe,[0,0,0],-this.bearingInRadians),o.bh(xe,xe,[0,0,0],-1*this.center.lat*Math.PI/180),o.bi(xe,xe,[0,0,0],this.center.lng*Math.PI/180),o.aL(xe,xe,.25),[...xe,.25*-j]}isLocationOccluded(l){return!this.isSurfacePointVisible(Ir(l))}transformLightDirection(l){const c=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,M=Math.cos(C),R=[Math.sin(c)*M,Math.sin(C),Math.cos(c)*M],j=[R[2],0,-R[0]],$=[0,0,0];o.aR($,j,R),o.aQ(j,j),o.aQ($,$);const te=[0,0,0];return o.aQ(te,[j[0]*l[0]+$[0]*l[1]+R[0]*l[2],j[1]*l[0]+$[1]*l[1]+R[1]*l[2],j[2]*l[0]+$[2]*l[1]+R[2]*l[2]]),te}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,c,C){const M=function($,te,se){const xe=1/(1<<se.z);return new o.Y($/o.X*xe+se.x*xe,te/o.X*xe+se.y*xe)}(l,c,C.canonical),R=(j=M.y,[o.bd(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-j*Math.PI*2))-.5*Math.PI]);var j;return this.getCircleRadiusCorrection()/Math.cos(R[1])}projectTileCoordinates(l,c,C,M){const R=C.canonical,j=gr(l,c,R.x,R.y,R.z),$=1+(M?M(l,c):0)/o.bo,te=[j[0]*$,j[1]*$,j[2]*$,1];o.al(te,te,this._globeViewProjMatrixNoCorrection);const se=this._cachedClippingPlane,xe=se[0]*j[0]+se[1]*j[1]+se[2]*j[2]+se[3]<0;return{point:new o.P(te[0]/te[3],te[1]/te[3]),signedDistanceFromCamera:te[3],isOccluded:xe}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=vi(this.worldSize,this.center.lat),c=o.a$(),C=o.a$();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),o.aV(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;c[8]=2*-M.x/this._helper._width,c[9]=2*M.y/this._helper._height,this._projectionMatrix=o.aW(c),this._globeProjMatrixInverted=o.a$(),o.an(this._globeProjMatrixInverted,c),o.J(c,c,[0,0,-this.cameraToCenterDistance]),o.aX(c,c,this.rollInRadians),o.aY(c,c,-this.pitchInRadians),o.aX(c,c,this.bearingInRadians),o.J(c,c,[0,0,-l]);const R=o.bf();R[0]=l,R[1]=l,R[2]=l,o.aY(C,c,this.center.lat*Math.PI/180),o.bj(C,C,-this.center.lng*Math.PI/180),o.K(C,C,R),this._globeViewProjMatrixNoCorrection=C,o.aY(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bj(c,c,-this.center.lng*Math.PI/180),o.K(c,c,R),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.a$(),o.an(this._globeViewProjMatrixNoCorrectionInverted,C);const j=o.bf();this._cameraPosition=o.bf(),this._cameraPosition[2]=this.cameraToCenterDistance/l,o.bg(this._cameraPosition,this._cameraPosition,j,-this.rollInRadians),o.bh(this._cameraPosition,this._cameraPosition,j,this.pitchInRadians),o.bg(this._cameraPosition,this._cameraPosition,j,-this.bearingInRadians),o.aM(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bh(this._cameraPosition,this._cameraPosition,j,-this.center.lat*Math.PI/180),o.bi(this._cameraPosition,this._cameraPosition,j,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const $=o.aW(this._globeViewProjMatrixNoCorrectionInverted);o.K($,$,[1,1,-1]),this._cachedFrustum=ms.fromInvProjectionMatrix($)}calculateFogMatrix(l){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.a$();return o.aq(c),c}getVisibleUnwrappedCoordinates(l){return[new o.aT(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=Ir(l);o.aL(C,C,1+c/o.bo);const M=o.be();return o.al(M,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(l){}getBounds(){const l=.5*this.width,c=.5*this.height,C=[new o.P(0,0),new o.P(l,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(l,this.height),new o.P(0,this.height),new o.P(0,c)],M=[];for(const Oe of C)M.push(this.unprojectScreenPoint(Oe));let R=0,j=0,$=0,te=0;const se=this.center;for(const Oe of M){const ke=o.bk(se.lng,Oe.lng),qe=o.bk(se.lat,Oe.lat);ke<j&&(j=ke),ke>R&&(R=ke),qe<te&&(te=qe),qe>$&&($=qe)}const xe=[se.lng+j,se.lat+te,se.lng+R,se.lat+$];return this.isSurfacePointOnScreen([0,1,0])&&(xe[3]=90,xe[0]=-180,xe[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(xe[1]=-90,xe[0]=-180,xe[2]=180),new Ut(xe)}getConstrained(l,c){const C=o.ab(l.lat,-85.051129,o.aF),M=o.ab(+c,this.minZoom+qr(0,C),this.maxZoom);return{center:new o.N(l.lng,C),zoom:M}}calculateCenterFromCameraLngLatAlt(l,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,C,M)}setLocationAtPoint(l,c){const C=Ir(this.unprojectScreenPoint(c)),M=Ir(l),R=o.bf();o.bl(R);const j=o.bf();o.bi(j,C,R,-this.center.lng*Math.PI/180),o.bh(j,j,R,this.center.lat*Math.PI/180);const $=M[0]*M[0]+M[2]*M[2],te=j[0]*j[0];if($<te)return;const se=Math.sqrt($-te),xe=-se,Oe=o.bm(M[0],M[2],j[0],se),ke=o.bm(M[0],M[2],j[0],xe),qe=o.bf();o.bi(qe,M,R,-Oe);const Ve=o.bm(qe[1],qe[2],j[1],j[2]),ut=o.bf();o.bi(ut,M,R,-ke);const ot=o.bm(ut[1],ut[2],j[1],j[2]),At=.5*Math.PI,mt=Ve>=-At&&Ve<=At,St=ot>=-At&&ot<=At;let kt,Pt;if(mt&&St){const Vt=this.center.lng*Math.PI/180,vn=this.center.lat*Math.PI/180;o.bp(Oe,Vt)+o.bp(Ve,vn)<o.bp(ke,Vt)+o.bp(ot,vn)?(kt=Oe,Pt=Ve):(kt=ke,Pt=ot)}else if(mt)kt=Oe,Pt=Ve;else{if(!St)return;kt=ke,Pt=ot}const Ft=kt/Math.PI*180,Tt=Pt/Math.PI*180,Jt=this.center.lat;this.setCenter(new o.N(Ft,o.ab(Tt,-90,90))),this.setZoom(this.zoom+qr(Jt,this.center.lat))}locationToScreenPoint(l,c){const C=Ir(l);if(c){const M=c.getElevationForLngLatZoom(l,this._helper._tileZoom);o.aL(C,C,1+M/o.bo)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(l){const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,c){if(c){const C=c.pointCoordinate(l);if(C)return C}return o.Y.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,c){var C;return(C=this.screenPointToMercatorCoordinate(l,c))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(l,c){const C=this._cameraPosition,M=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(C,M)}getRayDirectionFromPixel(l){const c=o.be();c[0]=l.x/this.width*2-1,c[1]=-1*(l.y/this.height*2-1),c[2]=1,c[3]=1,o.al(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const C=o.bf();C[0]=c[0]-this._cameraPosition[0],C[1]=c[1]-this._cameraPosition[1],C[2]=c[2]-this._cameraPosition[2];const M=o.bf();return o.aQ(M,C),M}isSurfacePointVisible(l){const c=this._cachedClippingPlane;return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const c=o.be();return o.al(c,[...l,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(l,c){const C=o.aS(l,c),M=o.bf(),R=o.bf();o.aL(R,c,C),o.aP(M,l,R);const j=1-o.aS(M,M);if(j<0)return null;const $=o.aS(l,l)-1,te=-C+(C<0?1:-1)*Math.sqrt(j),se=$/te,xe=te;return{tMin:Math.min(se,xe),tMax:Math.max(se,xe)}}unprojectScreenPoint(l){const c=this._cameraPosition,C=this.getRayDirectionFromPixel(l),M=this.rayPlanetIntersection(c,C);if(M){const se=o.bf();o.aM(se,c,[C[0]*M.tMin,C[1]*M.tMin,C[2]*M.tMin]);const xe=o.bf();return o.aQ(xe,se),Eo(xe)}const R=this._cachedClippingPlane[0]*C[0]+this._cachedClippingPlane[1]*C[1]+this._cachedClippingPlane[2]*C[2],j=-o.bn(this._cachedClippingPlane,c)/R,$=o.bf();if(j>0)o.aM($,c,[C[0]*j,C[1]*j,C[2]*j]);else{const se=o.bf();o.aM(se,c,[2*C[0],2*C[1],2*C[2]]);const xe=o.bn(this._cachedClippingPlane,se);o.aP($,se,[this._cachedClippingPlane[0]*xe,this._cachedClippingPlane[1]*xe,this._cachedClippingPlane[2]*xe])}const te=o.bf();return o.aQ(te,$),Eo(te)}getMatrixForModel(l,c){const C=o.N.convert(l),M=1/o.bo,R=o.a_();return o.bj(R,R,C.lng/180*Math.PI),o.aY(R,R,-C.lat/180*Math.PI),o.J(R,R,[0,0,1+c/o.bo]),o.aY(R,R,.5*Math.PI),o.K(R,R,[M,M,M]),R}getProjectionDataForCustomLayer(l=!0){const c=this.getProjectionData({overscaledTileID:new o.S(0,0,0,0,0),applyGlobeMatrix:l});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(l){}}class Ba{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,c,C){return this._helper.interpolatePadding(l,c,C)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,c,C=!0){this._helper.resize(l,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}overrideNearFarZ(l,c){this._helper.overrideNearFarZ(l,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,c){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new rs({calcMatrices:()=>{this._calcMatrices()},getConstrained:(l,c)=>this.getConstrained(l,c)}),this._globeness=1,this._mercatorTransform=new Ms,this._verticalPerspectiveTransform=new dc}clone(){const l=new Ba;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this),l}apply(l){this._helper.apply(l),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const c=this._mercatorTransform.getProjectionData(l),C=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:c.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return o.b9(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.b9(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,c,C){const M=this._mercatorTransform.getPitchedTextCorrection(l,c,C),R=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,c,C);return o.b9(M,R,this._globeness)}projectTileCoordinates(l,c,C,M){return this.currentTransform.projectTileCoordinates(l,c,C,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,c){return this.currentTransform.lngLatToCameraDepth(l,c)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}getConstrained(l,c){return this.currentTransform.getConstrained(l,c)}calculateCenterFromCameraLngLatAlt(l,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(l,c,C,M)}setLocationAtPoint(l,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(l,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(l,c){return this.currentTransform.locationToScreenPoint(l,c)}screenPointToMercatorCoordinate(l,c){return this.currentTransform.screenPointToMercatorCoordinate(l,c)}screenPointToLocation(l,c){return this.currentTransform.screenPointToLocation(l,c)}isPointOnMapSurface(l,c){return this.currentTransform.isPointOnMapSurface(l,c)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,c){return this.currentTransform.getMatrixForModel(l,c)}getProjectionDataForCustomLayer(l=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return c;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return C.fallbackMatrix=c.mainMatrix,C}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class cl{get useGlobeControls(){return!0}handlePanInertia(l,c){const C=Hi(l,c);return Math.abs(C.lng-c.center.lng)>180&&(C.lng=c.center.lng+179.5*Math.sign(C.lng-c.center.lng)),{easingCenter:C,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,c){const C=l.around,M=c.screenPointToLocation(C);l.bearingDelta&&c.setBearing(c.bearing+l.bearingDelta),l.pitchDelta&&c.setPitch(c.pitch+l.pitchDelta),l.rollDelta&&c.setRoll(c.roll+l.rollDelta);const R=c.zoom;l.zoomDelta&&c.setZoom(c.zoom+l.zoomDelta);const j=c.zoom-R;if(j===0)return;const $=o.bk(c.center.lng,M.lng),te=$/(Math.abs($/180)+1),se=o.bk(c.center.lat,M.lat),xe=c.getRayDirectionFromPixel(C),Oe=c.cameraPosition,ke=-1*o.aS(Oe,xe),qe=o.bf();o.aM(qe,Oe,[xe[0]*ke,xe[1]*ke,xe[2]*ke]);const Ve=o.bq(qe)-1,ut=Math.exp(.5*-Math.max(Ve-.3,0)),ot=vi(c.worldSize,c.center.lat)/Math.min(c.width,c.height),At=o.bc(ot,.9,.5,1,.25),mt=(1-o.aG(-j))*Math.min(ut,At),St=c.center.lat,kt=c.zoom,Pt=new o.N(c.center.lng+te*mt,o.ab(c.center.lat+se*mt,-85.051129,o.aF));c.setLocationAtPoint(M,C);const Ft=c.center,Tt=o.bc(Math.abs($),45,85,0,1),Jt=o.bc(ot,.75,.35,0,1),Vt=Math.pow(Math.max(Tt,Jt),.25),vn=o.bk(Ft.lng,Pt.lng),_n=o.bk(Ft.lat,Pt.lat);c.setCenter(new o.N(Ft.lng+vn*Vt,Ft.lat+_n*Vt).wrap()),c.setZoom(kt+qr(St,c.center.lat))}handleMapControlsPan(l,c,C){if(!l.panDelta)return;const M=c.center.lat,R=c.zoom;c.setCenter(Hi(l.panDelta,c).wrap()),c.setZoom(R+qr(M,c.center.lat))}cameraForBoxAndBearing(l,c,C,M,R){const j=El(l,c,C,M,R),$=c.left/R.width*2-1,te=(R.width-c.right)/R.width*2-1,se=c.top/R.height*-2+1,xe=(R.height-c.bottom)/R.height*-2+1,Oe=o.bk(C.getWest(),C.getEast())<0,ke=Oe?C.getEast():C.getWest(),qe=Oe?C.getWest():C.getEast(),Ve=Math.max(C.getNorth(),C.getSouth()),ut=Math.min(C.getNorth(),C.getSouth()),ot=ke+.5*o.bk(ke,qe),At=Ve+.5*o.bk(Ve,ut),mt=R.clone();mt.setCenter(j.center),mt.setBearing(j.bearing),mt.setPitch(0),mt.setRoll(0),mt.setZoom(j.zoom);const St=mt.modelViewProjectionMatrix,kt=[Ir(C.getNorthWest()),Ir(C.getNorthEast()),Ir(C.getSouthWest()),Ir(C.getSouthEast()),Ir(new o.N(qe,At)),Ir(new o.N(ke,At)),Ir(new o.N(ot,Ve)),Ir(new o.N(ot,ut))],Pt=Ir(j.center);let Ft=Number.POSITIVE_INFINITY;for(const Tt of kt)$<0&&(Ft=cl.getLesserNonNegativeNonNull(Ft,cl.solveVectorScale(Tt,Pt,St,"x",$))),te>0&&(Ft=cl.getLesserNonNegativeNonNull(Ft,cl.solveVectorScale(Tt,Pt,St,"x",te))),se>0&&(Ft=cl.getLesserNonNegativeNonNull(Ft,cl.solveVectorScale(Tt,Pt,St,"y",se))),xe<0&&(Ft=cl.getLesserNonNegativeNonNull(Ft,cl.solveVectorScale(Tt,Pt,St,"y",xe)));if(Number.isFinite(Ft)&&Ft!==0)return j.zoom=mt.zoom+o.a8(Ft),j;el()}handleJumpToCenterZoom(l,c){const C=l.center.lat,M=l.getConstrained(c.center?o.N.convert(c.center):l.center,l.zoom).center;l.setCenter(M.wrap());const R=c.zoom!==void 0?+c.zoom:l.zoom+qr(C,M.lat);l.zoom!==R&&l.setZoom(R)}handleEaseTo(l,c){const C=l.zoom,M=l.center,R=l.padding,j={roll:l.roll,pitch:l.pitch,bearing:l.bearing},$={roll:c.roll===void 0?l.roll:c.roll,pitch:c.pitch===void 0?l.pitch:c.pitch,bearing:c.bearing===void 0?l.bearing:c.bearing},te=c.zoom!==void 0,se=!l.isPaddingEqual(c.padding);let xe=!1;const Oe=c.center?o.N.convert(c.center):M,ke=l.getConstrained(Oe,C).center;hu(l,ke);const qe=l.clone();qe.setCenter(ke),qe.setZoom(te?+c.zoom:C+qr(M.lat,Oe.lat)),qe.setBearing(c.bearing);const Ve=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));qe.setLocationAtPoint(ke,Ve);const ut=(c.offset&&c.offsetAsPoint.mag())>0?qe.center:ke,ot=te?+c.zoom:C+qr(M.lat,ut.lat),At=C+qr(M.lat,0),mt=ot+qr(ut.lat,0),St=o.bk(M.lng,ut.lng),kt=o.bk(M.lat,ut.lat),Pt=o.aG(mt-At);return xe=ot!==C,{easeFunc:Ft=>{if(o.b3(j,$)||Ks({startEulerAngles:j,endEulerAngles:$,tr:l,k:Ft,useSlerp:j.roll!=$.roll}),se&&l.interpolatePadding(R,c.padding,Ft),c.around)o.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(c.around,c.aroundPoint);else{const Tt=mt>At?Math.min(2,Pt):Math.max(.5,Pt),Jt=Math.pow(Tt,1-Ft),Vt=us(M,St,kt,Ft*Jt);l.setCenter(Vt.wrap())}if(xe){const Tt=o.y.number(At,mt,Ft)+qr(0,l.center.lat);l.setZoom(Tt)}},isZooming:xe,elevationCenter:ut}}handleFlyTo(l,c){const C=c.zoom!==void 0,M=l.center,R=l.zoom,j=!l.isPaddingEqual(c.padding),$=l.getConstrained(o.N.convert(c.center||c.locationAtOffset),R).center,te=C?+c.zoom:l.zoom+qr(l.center.lat,$.lat),se=l.clone();se.setCenter($),j&&se.setPadding(c.padding),se.setZoom(te),se.setBearing(c.bearing);const xe=new o.P(o.ab(l.centerPoint.x+c.offsetAsPoint.x,0,l.width),o.ab(l.centerPoint.y+c.offsetAsPoint.y,0,l.height));se.setLocationAtPoint($,xe);const Oe=se.center;hu(l,Oe);const ke=function(St,kt,Pt){const Ft=Ir(kt),Tt=Ir(Pt),Jt=o.aS(Ft,Tt),Vt=Math.acos(Jt),vn=ci(St);return Vt/(2*Math.PI)*vn}(l,M,Oe),qe=R+qr(M.lat,0),Ve=te+qr(Oe.lat,0),ut=o.aG(Ve-qe);let ot;if(typeof c.minZoom=="number"){const St=+c.minZoom+qr(Oe.lat,0),kt=Math.min(St,qe,Ve)+qr(0,Oe.lat),Pt=l.getConstrained(Oe,kt).zoom+qr(Oe.lat,0);ot=o.aG(Pt-qe)}const At=o.bk(M.lng,Oe.lng),mt=o.bk(M.lat,Oe.lat);return{easeFunc:(St,kt,Pt,Ft)=>{const Tt=us(M,At,mt,Pt),Jt=St===1?Oe:Tt;l.setCenter(Jt.wrap());const Vt=qe+o.a8(kt);l.setZoom(St===1?te:Vt+qr(0,Jt.lat))},scaleOfZoom:ut,targetCenter:Oe,scaleOfMinZoom:ot,pixelPathLength:ke}}static solveVectorScale(l,c,C,M,R){const j=M==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],$=[C[3],C[7],C[11],C[15]],te=l[0]*j[0]+l[1]*j[1]+l[2]*j[2],se=l[0]*$[0]+l[1]*$[1]+l[2]*$[2],xe=c[0]*j[0]+c[1]*j[1]+c[2]*j[2],Oe=c[0]*$[0]+c[1]*$[1]+c[2]*$[2];return xe+R*se===te+R*Oe||$[3]*(te-xe)+j[3]*(Oe-se)+te*Oe==xe*se?null:(xe+j[3]-R*Oe-R*$[3])/(xe-te-R*Oe+R*se)}static getLesserNonNegativeNonNull(l,c){return c!==null&&c>=0&&c<l?c:l}}class ld{constructor(l){this._globe=l,this._mercatorCameraHelper=new oA,this._verticalPerspectiveCameraHelper=new cl}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,c){return this.currentHelper.handlePanInertia(l,c)}handleMapControlsRollPitchBearingZoom(l,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,c)}handleMapControlsPan(l,c,C){this.currentHelper.handleMapControlsPan(l,c,C)}cameraForBoxAndBearing(l,c,C,M,R){return this.currentHelper.cameraForBoxAndBearing(l,c,C,M,R)}handleJumpToCenterZoom(l,c){this.currentHelper.handleJumpToCenterZoom(l,c)}handleEaseTo(l,c){return this.currentHelper.handleEaseTo(l,c)}handleFlyTo(l,c){return this.currentHelper.handleFlyTo(l,c)}}const Ru=(T,l)=>o.t(T,l&&l.filter(c=>c.identifier!=="source.canvas")),Ku=o.br();class bh extends o.E{constructor(l,c={}){super(),this._rtlPluginLoaded=()=>{for(const C in this.sourceCaches){const M=this.sourceCaches[C].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[C].reload()}},this.map=l,this.dispatcher=new Kt(Lt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",(C,M)=>this.getGlyphs(C,M)),this.dispatcher.registerMessageHandler("GI",(C,M)=>this.getImages(C,M)),this.imageManager=new de,this.imageManager.setEventedParent(this),this.glyphManager=new Pe(l._requestManager,c.localIdeographFontFamily),this.lineAtlas=new De(256,512),this.crossTileSymbolIndex=new Ns,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bs,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.bt()),Ae().on(Qn,this._rtlPluginLoaded),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const M=this.sourceCaches[C.sourceId];if(!M)return;const R=M.getSource();if(R&&R.vectorLayerIds)for(const j in this._layers){const $=this._layers[j];$.source===R.id&&this._validateLayer($)}})}loadURL(l,c={},C){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const M=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const R=this._loadStyleRequest;o.h(M,this._loadStyleRequest).then(j=>{this._loadStyleRequest=null,this._load(j.data,c,C)}).catch(j=>{this._loadStyleRequest=null,j&&!R.signal.aborted&&this.fire(new o.j(j))})}loadJSON(l,c={},C){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(l,c,C)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Ku,{validate:!1})}_load(l,c,C){var M,R;const j=c.transformStyle?c.transformStyle(C,l):l;if(!c.validate||!Ru(this,o.u(j))){this._loaded=!0,this.stylesheet=j;for(const $ in j.sources)this.addSource($,j.sources[$],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs),this._createLayers(),this.light=new We(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new ht(this.stylesheet.sky),this.map.setTerrain((R=this.stylesheet.terrain)!==null&&R!==void 0?R:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const l=o.bu(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of l){const C=o.bv(c);C.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=C}}_loadSprite(l,c=!1,C=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(R,j,$,te){return o._(this,void 0,void 0,function*(){const se=J(R),xe=$>1?"@2x":"",Oe={},ke={};for(const{id:qe,url:Ve}of se){const ut=j.transformRequest(N(Ve,xe,".json"),"SpriteJSON");Oe[qe]=o.h(ut,te);const ot=j.transformRequest(N(Ve,xe,".png"),"SpriteImage");ke[qe]=X.getImage(ot,te)}return yield Promise.all([...Object.values(Oe),...Object.values(ke)]),function(qe,Ve){return o._(this,void 0,void 0,function*(){const ut={};for(const ot in qe){ut[ot]={};const At=S.getImageCanvasContext((yield Ve[ot]).data),mt=(yield qe[ot]).data;for(const St in mt){const{width:kt,height:Pt,x:Ft,y:Tt,sdf:Jt,pixelRatio:Vt,stretchX:vn,stretchY:_n,content:mn,textFitWidth:Bn,textFitHeight:Un}=mt[St];ut[ot][St]={data:null,pixelRatio:Vt,sdf:Jt,stretchX:vn,stretchY:_n,content:mn,textFitWidth:Bn,textFitHeight:Un,spriteData:{width:kt,height:Pt,x:Ft,y:Tt,context:At}}}}return ut})}(Oe,ke)})}(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(R=>{if(this._spriteRequest=null,R)for(const j in R){this._spritesImagesIds[j]=[];const $=this._spritesImagesIds[j]?this._spritesImagesIds[j].filter(te=>!(te in R)):[];for(const te of $)this.imageManager.removeImage(te),this._changedImages[te]=!0;for(const te in R[j]){const se=j==="default"?te:`${j}:${te}`;this._spritesImagesIds[j].push(se),se in this.imageManager.images?this.imageManager.updateImage(se,R[j][te],!1):this.imageManager.addImage(se,R[j][te]),c&&(this._changedImages[se]=!0)}}}).catch(R=>{this._spriteRequest=null,M=R,this.fire(new o.j(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),C&&C(M)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(l){const c=this.sourceCaches[l.source];if(!c)return;const C=l.sourceLayer;if(!C)return;const M=c.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(C)===-1)&&this.fire(new o.j(new Error(`Source layer "${C}" does not exist on source "${M.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,c=!1){const C=this._serializedAllLayers();if(!l||l.length===0)return Object.values(c?o.bw(C):C);const M=[];for(const R of l)if(C[R]){const j=c?o.bw(C[R]):C[R];M.push(j)}return M}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const c=Object.keys(this._layers);for(const C of c){const M=this._layers[C];M.type!=="custom"&&(l[C]=M.serialize())}return l}hasTransitions(){var l,c,C;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const c=this._changed;if(c){const M=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(M.length||R.length)&&this._updateWorkerLayers(M,R);for(const j in this._updatedSources){const $=this._updatedSources[j];if($==="reload")this._reloadSource(j);else{if($!=="clear")throw new Error(`Invalid action ${$}`);this._clearSource(j)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const j in this._updatedPaintProps)this._layers[j].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const C={};for(const M in this.sourceCaches){const R=this.sourceCaches[M];C[M]=R.used,R.used=!1}for(const M of this._order){const R=this._layers[M];R.recalculate(l,this._availableImages),!R.isHidden(l.zoom)&&R.source&&(this.sourceCaches[R.source].used=!0)}for(const M in C){const R=this.sourceCaches[M];!!C[M]!=!!R.used&&R.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,c={}){var C;this._checkLoaded();const M=this.serialize();if(l=c.transformStyle?c.transformStyle(M,l):l,((C=c.validate)===null||C===void 0||C)&&Ru(this,o.u(l)))return!1;(l=o.bw(l)).layers=o.bu(l.layers);const R=o.bx(M,l),j=this._getOperationsToPerform(R);if(j.unimplemented.length>0)throw new Error(`Unimplemented: ${j.unimplemented.join(", ")}.`);if(j.operations.length===0)return!1;for(const $ of j.operations)$();return this.stylesheet=l,this._serializedLayers=null,!0}_getOperationsToPerform(l){const c=[],C=[];for(const M of l)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":c.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":c.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":c.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":c.push(()=>{});break;default:C.push(M.command)}return{operations:c,unimplemented:C}}addImage(l,c){if(this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,c),this._afterImageUpdated(l)}updateImage(l,c){this.imageManager.updateImage(l,c)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new o.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,c,C={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.u.source,`sources.${l}`,c,null,C))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const M=this.sourceCaches[l]=new oe(l,c,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:l})),M.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new o.j(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));const c=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,c){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const C=this.sourceCaches[l].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(c),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,c,C={}){this._checkLoaded();const M=l.id;if(this.getLayer(M))return void this.fire(new o.j(new Error(`Layer "${M}" already exists on this map.`)));let R;if(l.type==="custom"){if(Ru(this,o.by(l)))return;R=o.bv(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(M,l.source),l=o.bw(l),l=o.e(l,{source:M})),this._validate(o.u.layer,`layers.${M}`,l,{arrayIndex:-1},C))return;R=o.bv(l),this._validateLayer(R),R.setEventedParent(this,{layer:{id:M}})}const j=c?this._order.indexOf(c):this._order.length;if(c&&j===-1)this.fire(new o.j(new Error(`Cannot add layer "${M}" before non-existing layer "${c}".`)));else{if(this._order.splice(j,0,M),this._layerOrderChanged=!0,this._layers[M]=R,this._removedLayers[M]&&R.source&&R.type!=="custom"){const $=this._removedLayers[M];delete this._removedLayers[M],$.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",this.sourceCaches[R.source].pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map)}}moveLayer(l,c){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===c)return;const C=this._order.indexOf(l);this._order.splice(C,1);const M=c?this._order.indexOf(c):this._order.length;c&&M===-1?this.fire(new o.j(new Error(`Cannot move layer "${l}" before non-existing layer "${c}".`))):(this._order.splice(M,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const c=this._layers[l];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${l}".`)));c.setEventedParent(null);const C=this._order.indexOf(l);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=c,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],c.onRemove&&c.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,c,C){this._checkLoaded();const M=this.getLayer(l);M?M.minzoom===c&&M.maxzoom===C||(c!=null&&(M.minzoom=c),C!=null&&(M.maxzoom=C),this._updateLayer(M)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,c,C={}){this._checkLoaded();const M=this.getLayer(l);if(M){if(!o.bz(M.filter,c))return c==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(o.u.filter,`layers.${M.id}.filter`,c,null,C)||(M.filter=o.bw(c),this._updateLayer(M)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return o.bw(this.getLayer(l).filter)}setLayoutProperty(l,c,C,M={}){this._checkLoaded();const R=this.getLayer(l);R?o.bz(R.getLayoutProperty(c),C)||(R.setLayoutProperty(c,C,M),this._updateLayer(R)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,c){const C=this.getLayer(l);if(C)return C.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,c,C,M={}){this._checkLoaded();const R=this.getLayer(l);R?o.bz(R.getPaintProperty(c),C)||(R.setPaintProperty(c,C,M)&&this._updateLayer(R),this._changed=!0,this._updatedPaintProps[l]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,c){return this.getLayer(l).getPaintProperty(c)}setFeatureState(l,c){this._checkLoaded();const C=l.source,M=l.sourceLayer,R=this.sourceCaches[C];if(R===void 0)return void this.fire(new o.j(new Error(`The source '${C}' does not exist in the map's style.`)));const j=R.getSource().type;j==="geojson"&&M?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):j!=="vector"||M?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),R.setFeatureState(M,l.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,c){this._checkLoaded();const C=l.source,M=this.sourceCaches[C];if(M===void 0)return void this.fire(new o.j(new Error(`The source '${C}' does not exist in the map's style.`)));const R=M.getSource().type,j=R==="vector"?l.sourceLayer:void 0;R!=="vector"||j?c&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(j,l.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const c=l.source,C=l.sourceLayer,M=this.sourceCaches[c];if(M!==void 0)return M.getSource().type!=="vector"||C?(l.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),M.getFeatureState(C,l.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=o.bA(this.sourceCaches,R=>R.serialize()),c=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,M=this.stylesheet;return o.bB({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:l,layers:c,terrain:C},R=>R!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const c=j=>this._layers[j].type==="fill-extrusion",C={},M=[];for(let j=this._order.length-1;j>=0;j--){const $=this._order[j];if(c($)){C[$]=j;for(const te of l){const se=te[$];if(se)for(const xe of se)M.push(xe)}}}M.sort((j,$)=>$.intersectionZ-j.intersectionZ);const R=[];for(let j=this._order.length-1;j>=0;j--){const $=this._order[j];if(c($))for(let te=M.length-1;te>=0;te--){const se=M[te].feature;if(C[se.layer.id]<j)break;R.push(se),M.pop()}else for(const te of l){const se=te[$];if(se)for(const xe of se)R.push(xe.feature)}}return R}queryRenderedFeatures(l,c,C){c&&c.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const M={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.j(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const se of c.layers){const xe=this._layers[se];if(!xe)return this.fire(new o.j(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];M[xe.source]=!0}}const R=[];c.availableImages=this._availableImages;const j=this._serializedAllLayers(),$=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,te=Object.assign(Object.assign({},c),{layers:$});for(const se in this.sourceCaches)c.layers&&!M[se]||R.push(Se(this.sourceCaches[se],this._layers,j,l,te,C));return this.placement&&R.push(function(se,xe,Oe,ke,qe,Ve,ut){const ot={},At=Ve.queryRenderedSymbols(ke),mt=[];for(const St of Object.keys(At).map(Number))mt.push(ut[St]);mt.sort(Je);for(const St of mt){const kt=St.featureIndex.lookupSymbolFeatures(At[St.bucketInstanceId],xe,St.bucketIndex,St.sourceLayerIndex,qe.filter,qe.layers,qe.availableImages,se);for(const Pt in kt){const Ft=ot[Pt]=ot[Pt]||[],Tt=kt[Pt];Tt.sort((Jt,Vt)=>{const vn=St.featureSortOrder;if(vn){const _n=vn.indexOf(Jt.featureIndex);return vn.indexOf(Vt.featureIndex)-_n}return Vt.featureIndex-Jt.featureIndex});for(const Jt of Tt)Ft.push(Jt)}}return function(St,kt,Pt){for(const Ft in St)for(const Tt of St[Ft])yt(Tt,Pt[kt[Ft].source]);return St}(ot,se,Oe)}(this._layers,j,this.sourceCaches,l,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(l,c){c&&c.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",c.filter,null,c);const C=this.sourceCaches[l];return C?function(M,R){const j=M.getRenderableIds().map(se=>M.getTileByID(se)),$=[],te={};for(let se=0;se<j.length;se++){const xe=j[se],Oe=xe.tileID.canonical.key;te[Oe]||(te[Oe]=!0,xe.querySourceFeatures($,R))}return $}(C,c):[]}getLight(){return this.light.getLight()}setLight(l,c={}){this._checkLoaded();const C=this.light.getLight();let M=!1;for(const j in l)if(!o.bz(l[j],C[j])){M=!0;break}if(!M)return;const R={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,c),this.light.updateTransitions(R)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,c={}){this._checkLoaded();const C=this.getSky();let M=!1;if(!l&&!C)return;if(l&&!C)M=!0;else if(!l&&C)M=!0;else for(const j in l)if(!o.bz(l[j],C[j])){M=!0;break}if(!M)return;const R={now:S.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,c),this.sky.updateTransitions(R)}_setProjectionInternal(l){const c=function(C){if(Array.isArray(C)){const M=new si({type:C});return{projection:M,transform:new Ba,cameraHelper:new ld(M)}}switch(C){case"mercator":return{projection:new ls,transform:new Ms,cameraHelper:new oA};case"globe":{const M=new si({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new Ba,cameraHelper:new ld(M)}}case"vertical-perspective":return{projection:new Or,transform:new dc,cameraHelper:new cl};default:return o.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new ls,transform:new Ms,cameraHelper:new oA}}}(l);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(l,c,C,M,R={}){return(!R||R.validate!==!1)&&Ru(this,l.call(o.u,o.e({key:c,style:this.serialize(),value:C,styleSpec:o.v},M)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ae().off(Qn,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const C=this.sourceCaches[c];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const c in this.sourceCaches)this.sourceCaches[c].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,c,C,M,R=!1){let j=!1,$=!1;const te={};for(const se of this._order){const xe=this._layers[se];if(xe.type!=="symbol")continue;if(!te[xe.source]){const ke=this.sourceCaches[xe.source];te[xe.source]=ke.getRenderableIds(!0).map(qe=>ke.getTileByID(qe)).sort((qe,Ve)=>Ve.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(Ve.tileID)?-1:1))}const Oe=this.crossTileSymbolIndex.addLayer(xe,te[xe.source],l.center.lng);j=j||Oe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((R=R||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(S.now(),l.zoom))&&(this.pauseablePlacement=new un(l,this.map.terrain,this._order,R,c,C,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(S.now()),$=!0),j&&this.pauseablePlacement.placement.setStale()),$||j)for(const se of this._order){const xe=this._layers[se];xe.type==="symbol"&&this.placement.updateLayerOpacities(xe,te[xe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(S.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,c){return o._(this,void 0,void 0,function*(){const C=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,c.icons),C})}getGlyphs(l,c){return o._(this,void 0,void 0,function*(){const C=yield this.glyphManager.getGlyphs(c.stacks),M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,[""]),C})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,c={}){this._checkLoaded(),l&&this._validate(o.u.glyphs,"glyphs",l,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,c,C={},M){this._checkLoaded();const R=[{id:l,url:c}],j=[...J(this.stylesheet.sprite),...R];this._validate(o.u.sprite,"sprite",j,null,C)||(this.stylesheet.sprite=j,this._loadSprite(R,!0,M))}removeSprite(l){this._checkLoaded();const c=J(this.stylesheet.sprite);if(c.find(C=>C.id===l)){if(this._spritesImagesIds[l])for(const C of this._spritesImagesIds[l])this.imageManager.removeImage(C),this._changedImages[C]=!0;c.splice(c.findIndex(C=>C.id===l),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return J(this.stylesheet.sprite)}setSprite(l,c={},C){this._checkLoaded(),l&&this._validate(o.u.sprite,"sprite",l,null,c)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,C):(this._unloadSprite(),C&&C(null)))}}var Ss=o.aA([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Du{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,c,C,M,R,j,$,te,se){this.context=l;let xe=this.boundPaintVertexBuffers.length!==M.length;for(let Oe=0;!xe&&Oe<M.length;Oe++)this.boundPaintVertexBuffers[Oe]!==M[Oe]&&(xe=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==C||xe||this.boundIndexBuffer!==R||this.boundVertexOffset!==j||this.boundDynamicVertexBuffer!==$||this.boundDynamicVertexBuffer2!==te||this.boundDynamicVertexBuffer3!==se?this.freshBind(c,C,M,R,j,$,te,se):(l.bindVertexArray.set(this.vao),$&&$.bind(),R&&R.dynamicDraw&&R.bind(),te&&te.bind(),se&&se.bind())}freshBind(l,c,C,M,R,j,$,te){const se=l.numAttributes,xe=this.context,Oe=xe.gl;this.vao&&this.destroy(),this.vao=xe.createVertexArray(),xe.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=M,this.boundVertexOffset=R,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=$,this.boundDynamicVertexBuffer3=te,c.enableAttributes(Oe,l);for(const ke of C)ke.enableAttributes(Oe,l);j&&j.enableAttributes(Oe,l),$&&$.enableAttributes(Oe,l),te&&te.enableAttributes(Oe,l),c.bind(),c.setVertexAttribPointers(Oe,l,R);for(const ke of C)ke.bind(),ke.setVertexAttribPointers(Oe,l,R);j&&(j.bind(),j.setVertexAttribPointers(Oe,l,R)),M&&M.bind(),$&&($.bind(),$.setVertexAttribPointers(Oe,l,R)),te&&(te.bind(),te.setVertexAttribPointers(Oe,l,R)),xe.currentNumAttributes=se}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ud=(T,l,c,C,M)=>({u_texture:0,u_ele_delta:T,u_fog_matrix:l,u_fog_color:c?c.properties.get("fog-color"):o.b4.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:c?c.calculateFogBlendOpacity(C):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b4.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),gp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function sA(T){const l=[];for(let c=0;c<T.length;c++){if(T[c]===null)continue;const C=T[c].split(" ");l.push(C.pop())}return l}class qd{constructor(l,c,C,M,R,j,$,te){const se=l.gl;this.program=se.createProgram();const xe=sA(c.staticAttributes),Oe=C?C.getBinderAttributes():[],ke=xe.concat(Oe),qe=ri.prelude.staticUniforms?sA(ri.prelude.staticUniforms):[],Ve=$.staticUniforms?sA($.staticUniforms):[],ut=c.staticUniforms?sA(c.staticUniforms):[],ot=C?C.getBinderUniforms():[],At=qe.concat(Ve).concat(ut).concat(ot),mt=[];for(const Vt of At)mt.indexOf(Vt)<0&&mt.push(Vt);const St=C?C.defines():[];Ri(se)&&St.unshift("#version 300 es"),R&&St.push("#define OVERDRAW_INSPECTOR;"),j&&St.push("#define TERRAIN3D;"),te&&St.push(te);let kt=St.concat(ri.prelude.fragmentSource,$.fragmentSource,c.fragmentSource).join(`
`),Pt=St.concat(ri.prelude.vertexSource,$.vertexSource,c.vertexSource).join(`
`);Ri(se)||(kt=function(Vt){return Vt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(kt),Pt=function(Vt){return Vt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Pt));const Ft=se.createShader(se.FRAGMENT_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);if(se.shaderSource(Ft,kt),se.compileShader(Ft),!se.getShaderParameter(Ft,se.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${se.getShaderInfoLog(Ft)}`);se.attachShader(this.program,Ft);const Tt=se.createShader(se.VERTEX_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);if(se.shaderSource(Tt,Pt),se.compileShader(Tt),!se.getShaderParameter(Tt,se.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${se.getShaderInfoLog(Tt)}`);se.attachShader(this.program,Tt),this.attributes={};const Jt={};this.numAttributes=ke.length;for(let Vt=0;Vt<this.numAttributes;Vt++)ke[Vt]&&(se.bindAttribLocation(this.program,Vt,ke[Vt]),this.attributes[ke[Vt]]=Vt);if(se.linkProgram(this.program),!se.getProgramParameter(this.program,se.LINK_STATUS))throw new Error(`Program failed to link: ${se.getProgramInfoLog(this.program)}`);se.deleteShader(Tt),se.deleteShader(Ft);for(let Vt=0;Vt<mt.length;Vt++){const vn=mt[Vt];if(vn&&!Jt[vn]){const _n=se.getUniformLocation(this.program,vn);_n&&(Jt[vn]=_n)}}this.fixedUniforms=M(l,Jt),this.terrainUniforms=((Vt,vn)=>({u_depth:new o.bC(Vt,vn.u_depth),u_terrain:new o.bC(Vt,vn.u_terrain),u_terrain_dim:new o.b5(Vt,vn.u_terrain_dim),u_terrain_matrix:new o.bD(Vt,vn.u_terrain_matrix),u_terrain_unpack:new o.bE(Vt,vn.u_terrain_unpack),u_terrain_exaggeration:new o.b5(Vt,vn.u_terrain_exaggeration)}))(l,Jt),this.projectionUniforms=((Vt,vn)=>({u_projection_matrix:new o.bD(Vt,vn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bE(Vt,vn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bE(Vt,vn.u_projection_clipping_plane),u_projection_transition:new o.b5(Vt,vn.u_projection_transition),u_projection_fallback_matrix:new o.bD(Vt,vn.u_projection_fallback_matrix)}))(l,Jt),this.binderUniforms=C?C.getUniforms(l,Jt):[]}draw(l,c,C,M,R,j,$,te,se,xe,Oe,ke,qe,Ve,ut,ot,At,mt,St){const kt=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(C),l.setStencilMode(M),l.setColorMode(R),l.setCullFace(j),te){l.activeTexture.set(kt.TEXTURE2),kt.bindTexture(kt.TEXTURE_2D,te.depthTexture),l.activeTexture.set(kt.TEXTURE3),kt.bindTexture(kt.TEXTURE_2D,te.texture);for(const Ft in this.terrainUniforms)this.terrainUniforms[Ft].set(te[Ft])}if(se)for(const Ft in se)this.projectionUniforms[gp[Ft]].set(se[Ft]);if($)for(const Ft in this.fixedUniforms)this.fixedUniforms[Ft].set($[Ft]);ot&&ot.setUniforms(l,this.binderUniforms,Ve,{zoom:ut});let Pt=0;switch(c){case kt.LINES:Pt=2;break;case kt.TRIANGLES:Pt=3;break;case kt.LINE_STRIP:Pt=1}for(const Ft of qe.get()){const Tt=Ft.vaos||(Ft.vaos={});(Tt[xe]||(Tt[xe]=new Du)).bind(l,this,Oe,ot?ot.getPaintVertexBuffers():[],ke,Ft.vertexOffset,At,mt,St),kt.drawElements(c,Ft.primitiveLength*Pt,kt.UNSIGNED_SHORT,Ft.primitiveOffset*Pt*2)}}}function Lc(T,l,c){const C=1/o.at(c,1,l.transform.tileZoom),M=Math.pow(2,c.tileID.overscaledZ),R=c.tileSize*Math.pow(2,l.transform.tileZoom)/M,j=R*(c.tileID.canonical.x+c.tileID.wrap*M),$=R*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[C,T.fromScale,T.toScale],u_fade:T.t,u_pixel_coord_upper:[j>>16,$>>16],u_pixel_coord_lower:[65535&j,65535&$]}}const yp=(T,l,c,C)=>{const M=T.style.light,R=M.properties.get("position"),j=[R.x,R.y,R.z],$=o.bI();M.properties.get("anchor")==="viewport"&&o.bJ($,T.transform.bearingInRadians),o.bK(j,j,$);const te=T.transform.transformLightDirection(j),se=M.properties.get("color");return{u_lightpos:j,u_lightpos_globe:te,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+l,u_opacity:c,u_fill_translate:C}},Rf=(T,l,c,C,M,R,j)=>o.e(yp(T,l,c,C),Lc(R,T,j),{u_height_factor:-Math.pow(2,M.overscaledZ)/j.tileSize/8}),hc=(T,l,c,C)=>o.e(Lc(l,T,c),{u_fill_translate:C}),Zs=(T,l)=>({u_world:T,u_fill_translate:l}),xh=(T,l,c,C,M)=>o.e(hc(T,l,c,M),{u_world:C}),ef=(T,l,c,C,M)=>{const R=T.transform;let j,$,te=0;if(c.paint.get("circle-pitch-alignment")==="map"){const se=o.at(l,1,R.zoom);j=!0,$=[se,se],te=se/(o.X*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*M}else j=!1,$=R.pixelsToGLUnits;return{u_camera_to_center_distance:R.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+j,u_device_pixel_ratio:T.pixelRatio,u_extrude_scale:$,u_globe_extrude_scale:te,u_translate:C}},Ad=T=>({u_pixel_extrude_scale:[1/T.width,1/T.height]}),tf=T=>({u_viewport_size:[T.width,T.height]}),cd=(T,l=1)=>({u_color:T,u_overlay:0,u_overlay_scale:l}),fc=(T,l,c,C)=>{const M=o.at(T,1,l)/(o.X*Math.pow(2,T.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:o.at(T,1,l),u_intensity:c,u_globe_extrude_scale:M}},wh=(T,l,c,C)=>{const M=o.H();o.bL(M,0,T.width,T.height,0,0,1);const R=T.context.gl;return{u_matrix:M,u_world:[R.drawingBufferWidth,R.drawingBufferHeight],u_image:c,u_color_ramp:C,u_opacity:l.paint.get("heatmap-opacity")}},Mh=(T,l,c)=>{const C=c.paint.get("hillshade-shadow-color"),M=c.paint.get("hillshade-highlight-color"),R=c.paint.get("hillshade-accent-color");let j=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(j+=T.transform.bearingInRadians),{u_image:0,u_latrange:am(0,l.tileID),u_light:[c.paint.get("hillshade-exaggeration"),j],u_shadow:C,u_highlight:M,u_accent:R}},dd=(T,l)=>{const c=l.stride,C=o.H();return o.bL(C,0,o.X,-8192,0,0,1),o.J(C,C,[0,-8192,0]),{u_matrix:C,u_image:1,u_dimension:[c,c],u_zoom:T.overscaledZ,u_unpack:l.getUnpackVector()}};function am(T,l){const c=Math.pow(2,l.canonical.z),C=l.canonical.y;return[new o.Y(0,C/c).toLngLat().lat,new o.Y(0,(C+1)/c).toLngLat().lat]}const Fc=(T,l,c,C)=>{const M=T.transform;return{u_translation:Uc(T,l,c),u_ratio:C/o.at(l,1,M.zoom),u_device_pixel_ratio:T.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},pu=(T,l,c,C,M)=>o.e(Fc(T,l,c,C),{u_image:0,u_image_height:M}),Sh=(T,l,c,C,M)=>{const R=T.transform,j=aA(l,R);return{u_translation:Uc(T,l,c),u_texsize:l.imageAtlasTexture.size,u_ratio:C/o.at(l,1,R.zoom),u_device_pixel_ratio:T.pixelRatio,u_image:0,u_scale:[j,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},mu=(T,l,c,C,M,R)=>{const j=T.lineAtlas,$=aA(l,T.transform),te=c.layout.get("line-cap")==="round",se=j.getDash(M.from,te),xe=j.getDash(M.to,te),Oe=se.width*R.fromScale,ke=xe.width*R.toScale;return o.e(Fc(T,l,c,C),{u_patternscale_a:[$/Oe,-se.height/2],u_patternscale_b:[$/ke,-xe.height/2],u_sdfgamma:j.width/(256*Math.min(Oe,ke)*T.pixelRatio)/2,u_image:0,u_tex_y_a:se.y,u_tex_y_b:xe.y,u_mix:R.t})};function aA(T,l){return 1/o.at(T,1,l.tileZoom)}function Uc(T,l,c){return o.au(T.transform,l,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Yd=(T,l,c,C,M)=>{return{u_tl_parent:T,u_scale_parent:l,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(j=C.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(R=C.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:nf(C.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var R,j};function nf(T){T*=Math.PI/180;const l=Math.sin(T),c=Math.cos(T);return[(2*c+1)/3,(-Math.sqrt(3)*l-c+1)/3,(Math.sqrt(3)*l-c+1)/3]}const iu=(T,l,c,C,M,R,j,$,te,se,xe,Oe,ke)=>{const qe=j.transform;return{u_is_size_zoom_constant:+(T==="constant"||T==="source"),u_is_size_feature_constant:+(T==="constant"||T==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:qe.cameraToCenterDistance,u_pitch:qe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:qe.width/qe.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_label_plane_matrix:$,u_coord_matrix:te,u_is_text:+xe,u_pitch_with_map:+C,u_is_along_line:M,u_is_variable_anchor:R,u_texsize:Oe,u_texture:0,u_translation:se,u_pitched_scale:ke}},Bl=(T,l,c,C,M,R,j,$,te,se,xe,Oe,ke,qe)=>{const Ve=j.transform;return o.e(iu(T,l,c,C,M,R,j,$,te,se,xe,Oe,qe),{u_gamma_scale:C?Math.cos(Ve.pitch*Math.PI/180)*Ve.cameraToCenterDistance:1,u_device_pixel_ratio:j.pixelRatio,u_is_halo:1})},WA=(T,l,c,C,M,R,j,$,te,se,xe,Oe,ke)=>o.e(Bl(T,l,c,C,M,R,j,$,te,se,!0,xe,0,ke),{u_texsize_icon:Oe,u_texture_icon:1}),zc=(T,l)=>({u_opacity:T,u_color:l}),rf=(T,l,c,C,M)=>o.e(function(R,j,$,te){const se=$.imageManager.getPattern(R.from.toString()),xe=$.imageManager.getPattern(R.to.toString()),{width:Oe,height:ke}=$.imageManager.getPixelSize(),qe=Math.pow(2,te.tileID.overscaledZ),Ve=te.tileSize*Math.pow(2,$.transform.tileZoom)/qe,ut=Ve*(te.tileID.canonical.x+te.tileID.wrap*qe),ot=Ve*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:xe.tl,u_pattern_br_b:xe.br,u_texsize:[Oe,ke],u_mix:j.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:xe.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/o.at(te,1,$.transform.tileZoom),u_pixel_coord_upper:[ut>>16,ot>>16],u_pixel_coord_lower:[65535&ut,65535&ot]}}(c,M,l,C),{u_opacity:T}),Kf=(T,l)=>{},hd={fillExtrusion:(T,l)=>({u_lightpos:new o.bG(T,l.u_lightpos),u_lightpos_globe:new o.bG(T,l.u_lightpos_globe),u_lightintensity:new o.b5(T,l.u_lightintensity),u_lightcolor:new o.bG(T,l.u_lightcolor),u_vertical_gradient:new o.b5(T,l.u_vertical_gradient),u_opacity:new o.b5(T,l.u_opacity),u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillExtrusionPattern:(T,l)=>({u_lightpos:new o.bG(T,l.u_lightpos),u_lightpos_globe:new o.bG(T,l.u_lightpos_globe),u_lightintensity:new o.b5(T,l.u_lightintensity),u_lightcolor:new o.bG(T,l.u_lightcolor),u_vertical_gradient:new o.b5(T,l.u_vertical_gradient),u_height_factor:new o.b5(T,l.u_height_factor),u_opacity:new o.b5(T,l.u_opacity),u_fill_translate:new o.bH(T,l.u_fill_translate),u_image:new o.bC(T,l.u_image),u_texsize:new o.bH(T,l.u_texsize),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade)}),fill:(T,l)=>({u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillPattern:(T,l)=>({u_image:new o.bC(T,l.u_image),u_texsize:new o.bH(T,l.u_texsize),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade),u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillOutline:(T,l)=>({u_world:new o.bH(T,l.u_world),u_fill_translate:new o.bH(T,l.u_fill_translate)}),fillOutlinePattern:(T,l)=>({u_world:new o.bH(T,l.u_world),u_image:new o.bC(T,l.u_image),u_texsize:new o.bH(T,l.u_texsize),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade),u_fill_translate:new o.bH(T,l.u_fill_translate)}),circle:(T,l)=>({u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_scale_with_map:new o.bC(T,l.u_scale_with_map),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_extrude_scale:new o.bH(T,l.u_extrude_scale),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_globe_extrude_scale:new o.b5(T,l.u_globe_extrude_scale),u_translate:new o.bH(T,l.u_translate)}),collisionBox:(T,l)=>({u_pixel_extrude_scale:new o.bH(T,l.u_pixel_extrude_scale)}),collisionCircle:(T,l)=>({u_viewport_size:new o.bH(T,l.u_viewport_size)}),debug:(T,l)=>({u_color:new o.bF(T,l.u_color),u_overlay:new o.bC(T,l.u_overlay),u_overlay_scale:new o.b5(T,l.u_overlay_scale)}),depth:Kf,clippingMask:Kf,heatmap:(T,l)=>({u_extrude_scale:new o.b5(T,l.u_extrude_scale),u_intensity:new o.b5(T,l.u_intensity),u_globe_extrude_scale:new o.b5(T,l.u_globe_extrude_scale)}),heatmapTexture:(T,l)=>({u_matrix:new o.bD(T,l.u_matrix),u_world:new o.bH(T,l.u_world),u_image:new o.bC(T,l.u_image),u_color_ramp:new o.bC(T,l.u_color_ramp),u_opacity:new o.b5(T,l.u_opacity)}),hillshade:(T,l)=>({u_image:new o.bC(T,l.u_image),u_latrange:new o.bH(T,l.u_latrange),u_light:new o.bH(T,l.u_light),u_shadow:new o.bF(T,l.u_shadow),u_highlight:new o.bF(T,l.u_highlight),u_accent:new o.bF(T,l.u_accent)}),hillshadePrepare:(T,l)=>({u_matrix:new o.bD(T,l.u_matrix),u_image:new o.bC(T,l.u_image),u_dimension:new o.bH(T,l.u_dimension),u_zoom:new o.b5(T,l.u_zoom),u_unpack:new o.bE(T,l.u_unpack)}),line:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels)}),lineGradient:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels),u_image:new o.bC(T,l.u_image),u_image_height:new o.b5(T,l.u_image_height)}),linePattern:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_texsize:new o.bH(T,l.u_texsize),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_image:new o.bC(T,l.u_image),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels),u_scale:new o.bG(T,l.u_scale),u_fade:new o.b5(T,l.u_fade)}),lineSDF:(T,l)=>({u_translation:new o.bH(T,l.u_translation),u_ratio:new o.b5(T,l.u_ratio),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_units_to_pixels:new o.bH(T,l.u_units_to_pixels),u_patternscale_a:new o.bH(T,l.u_patternscale_a),u_patternscale_b:new o.bH(T,l.u_patternscale_b),u_sdfgamma:new o.b5(T,l.u_sdfgamma),u_image:new o.bC(T,l.u_image),u_tex_y_a:new o.b5(T,l.u_tex_y_a),u_tex_y_b:new o.b5(T,l.u_tex_y_b),u_mix:new o.b5(T,l.u_mix)}),raster:(T,l)=>({u_tl_parent:new o.bH(T,l.u_tl_parent),u_scale_parent:new o.b5(T,l.u_scale_parent),u_buffer_scale:new o.b5(T,l.u_buffer_scale),u_fade_t:new o.b5(T,l.u_fade_t),u_opacity:new o.b5(T,l.u_opacity),u_image0:new o.bC(T,l.u_image0),u_image1:new o.bC(T,l.u_image1),u_brightness_low:new o.b5(T,l.u_brightness_low),u_brightness_high:new o.b5(T,l.u_brightness_high),u_saturation_factor:new o.b5(T,l.u_saturation_factor),u_contrast_factor:new o.b5(T,l.u_contrast_factor),u_spin_weights:new o.bG(T,l.u_spin_weights),u_coords_top:new o.bE(T,l.u_coords_top),u_coords_bottom:new o.bE(T,l.u_coords_bottom)}),symbolIcon:(T,l)=>({u_is_size_zoom_constant:new o.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(T,l.u_is_size_feature_constant),u_size_t:new o.b5(T,l.u_size_t),u_size:new o.b5(T,l.u_size),u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_pitch:new o.b5(T,l.u_pitch),u_rotate_symbol:new o.bC(T,l.u_rotate_symbol),u_aspect_ratio:new o.b5(T,l.u_aspect_ratio),u_fade_change:new o.b5(T,l.u_fade_change),u_label_plane_matrix:new o.bD(T,l.u_label_plane_matrix),u_coord_matrix:new o.bD(T,l.u_coord_matrix),u_is_text:new o.bC(T,l.u_is_text),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_is_along_line:new o.bC(T,l.u_is_along_line),u_is_variable_anchor:new o.bC(T,l.u_is_variable_anchor),u_texsize:new o.bH(T,l.u_texsize),u_texture:new o.bC(T,l.u_texture),u_translation:new o.bH(T,l.u_translation),u_pitched_scale:new o.b5(T,l.u_pitched_scale)}),symbolSDF:(T,l)=>({u_is_size_zoom_constant:new o.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(T,l.u_is_size_feature_constant),u_size_t:new o.b5(T,l.u_size_t),u_size:new o.b5(T,l.u_size),u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_pitch:new o.b5(T,l.u_pitch),u_rotate_symbol:new o.bC(T,l.u_rotate_symbol),u_aspect_ratio:new o.b5(T,l.u_aspect_ratio),u_fade_change:new o.b5(T,l.u_fade_change),u_label_plane_matrix:new o.bD(T,l.u_label_plane_matrix),u_coord_matrix:new o.bD(T,l.u_coord_matrix),u_is_text:new o.bC(T,l.u_is_text),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_is_along_line:new o.bC(T,l.u_is_along_line),u_is_variable_anchor:new o.bC(T,l.u_is_variable_anchor),u_texsize:new o.bH(T,l.u_texsize),u_texture:new o.bC(T,l.u_texture),u_gamma_scale:new o.b5(T,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_is_halo:new o.bC(T,l.u_is_halo),u_translation:new o.bH(T,l.u_translation),u_pitched_scale:new o.b5(T,l.u_pitched_scale)}),symbolTextAndIcon:(T,l)=>({u_is_size_zoom_constant:new o.bC(T,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bC(T,l.u_is_size_feature_constant),u_size_t:new o.b5(T,l.u_size_t),u_size:new o.b5(T,l.u_size),u_camera_to_center_distance:new o.b5(T,l.u_camera_to_center_distance),u_pitch:new o.b5(T,l.u_pitch),u_rotate_symbol:new o.bC(T,l.u_rotate_symbol),u_aspect_ratio:new o.b5(T,l.u_aspect_ratio),u_fade_change:new o.b5(T,l.u_fade_change),u_label_plane_matrix:new o.bD(T,l.u_label_plane_matrix),u_coord_matrix:new o.bD(T,l.u_coord_matrix),u_is_text:new o.bC(T,l.u_is_text),u_pitch_with_map:new o.bC(T,l.u_pitch_with_map),u_is_along_line:new o.bC(T,l.u_is_along_line),u_is_variable_anchor:new o.bC(T,l.u_is_variable_anchor),u_texsize:new o.bH(T,l.u_texsize),u_texsize_icon:new o.bH(T,l.u_texsize_icon),u_texture:new o.bC(T,l.u_texture),u_texture_icon:new o.bC(T,l.u_texture_icon),u_gamma_scale:new o.b5(T,l.u_gamma_scale),u_device_pixel_ratio:new o.b5(T,l.u_device_pixel_ratio),u_is_halo:new o.bC(T,l.u_is_halo),u_translation:new o.bH(T,l.u_translation),u_pitched_scale:new o.b5(T,l.u_pitched_scale)}),background:(T,l)=>({u_opacity:new o.b5(T,l.u_opacity),u_color:new o.bF(T,l.u_color)}),backgroundPattern:(T,l)=>({u_opacity:new o.b5(T,l.u_opacity),u_image:new o.bC(T,l.u_image),u_pattern_tl_a:new o.bH(T,l.u_pattern_tl_a),u_pattern_br_a:new o.bH(T,l.u_pattern_br_a),u_pattern_tl_b:new o.bH(T,l.u_pattern_tl_b),u_pattern_br_b:new o.bH(T,l.u_pattern_br_b),u_texsize:new o.bH(T,l.u_texsize),u_mix:new o.b5(T,l.u_mix),u_pattern_size_a:new o.bH(T,l.u_pattern_size_a),u_pattern_size_b:new o.bH(T,l.u_pattern_size_b),u_scale_a:new o.b5(T,l.u_scale_a),u_scale_b:new o.b5(T,l.u_scale_b),u_pixel_coord_upper:new o.bH(T,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.bH(T,l.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b5(T,l.u_tile_units_to_pixels)}),terrain:(T,l)=>({u_texture:new o.bC(T,l.u_texture),u_ele_delta:new o.b5(T,l.u_ele_delta),u_fog_matrix:new o.bD(T,l.u_fog_matrix),u_fog_color:new o.bF(T,l.u_fog_color),u_fog_ground_blend:new o.b5(T,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b5(T,l.u_fog_ground_blend_opacity),u_horizon_color:new o.bF(T,l.u_horizon_color),u_horizon_fog_blend:new o.b5(T,l.u_horizon_fog_blend),u_is_globe_mode:new o.b5(T,l.u_is_globe_mode)}),terrainDepth:(T,l)=>({u_ele_delta:new o.b5(T,l.u_ele_delta)}),terrainCoords:(T,l)=>({u_texture:new o.bC(T,l.u_texture),u_terrain_coords_id:new o.b5(T,l.u_terrain_coords_id),u_ele_delta:new o.b5(T,l.u_ele_delta)}),projectionErrorMeasurement:(T,l)=>({u_input:new o.b5(T,l.u_input),u_output_expected:new o.b5(T,l.u_output_expected)}),atmosphere:(T,l)=>({u_sun_pos:new o.bG(T,l.u_sun_pos),u_atmosphere_blend:new o.b5(T,l.u_atmosphere_blend),u_globe_position:new o.bG(T,l.u_globe_position),u_globe_radius:new o.b5(T,l.u_globe_radius),u_inv_proj_matrix:new o.bD(T,l.u_inv_proj_matrix)}),sky:(T,l)=>({u_sky_color:new o.bF(T,l.u_sky_color),u_horizon_color:new o.bF(T,l.u_horizon_color),u_horizon:new o.bH(T,l.u_horizon),u_horizon_normal:new o.bH(T,l.u_horizon_normal),u_sky_horizon_blend:new o.b5(T,l.u_sky_horizon_blend),u_sky_blend:new o.b5(T,l.u_sky_blend)})};class _A{constructor(l,c,C){this.context=l;const M=l.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const tl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ol{constructor(l,c,C,M){this.length=c.length,this.attributes=C,this.itemSize=c.bytesPerElement,this.dynamicDraw=M,this.context=l;const R=l.gl;this.buffer=R.createBuffer(),l.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,c){for(let C=0;C<this.attributes.length;C++){const M=c.attributes[this.attributes[C].name];M!==void 0&&l.enableVertexAttribArray(M)}}setVertexAttribPointers(l,c,C){for(let M=0;M<this.attributes.length;M++){const R=this.attributes[M],j=c.attributes[R.name];j!==void 0&&l.vertexAttribPointer(j,R.components,l[tl[R.type]],!1,this.itemSize,R.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class $o{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Eh extends $o{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class lm extends $o{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class jc extends $o{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Lu extends $o{getDefault(){return[!0,!0,!0,!0]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class $d extends $o{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Vd extends $o{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class pc extends $o{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const c=this.current;(l.func!==c.func||l.ref!==c.ref||l.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Hd extends $o{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class of extends $o{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=l,this.dirty=!1}}class mc extends $o{getDefault(){return[0,1]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class gu extends $o{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=l,this.dirty=!1}}class $t extends $o{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class kn extends $o{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.BLEND):c.disable(c.BLEND),this.current=l,this.dirty=!1}}class sn extends $o{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ur extends $o{getDefault(){return o.b4.transparent}set(l){const c=this.current;(l.r!==c.r||l.g!==c.g||l.b!==c.b||l.a!==c.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class _i extends $o{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Co extends $o{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;l?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=l,this.dirty=!1}}class oa extends $o{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Vo extends $o{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class QA extends $o{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class vp extends $o{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Il extends $o{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const c=this.current;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class yu extends $o{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class qA extends $o{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class kl extends $o{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Gi extends $o{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class YA extends $o{getDefault(){return null}set(l){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Uo extends $o{getDefault(){return null}set(l){var c;if(l===this.current&&!this.dirty)return;const C=this.gl;Ri(C)?C.bindVertexArray(l):(c=C.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Nc extends $o{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class $A extends $o{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class CA extends $o{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class lA extends $o{constructor(l,c){super(l),this.context=l,this.parent=c}getDefault(){return null}}class Tl extends lA{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class gc extends lA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class vu extends lA{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const jl="Framebuffer is not complete";class Gc{constructor(l,c,C,M,R){this.context=l,this.width=c,this.height=C;const j=l.gl,$=this.framebuffer=j.createFramebuffer();if(this.colorAttachment=new Tl(l,$),M)this.depthAttachment=R?new vu(l,$):new gc(l,$);else if(R)throw new Error("Stencil cannot be set without depth");if(j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw new Error(jl)}destroy(){const l=this.context.gl,c=this.colorAttachment.get();if(c&&l.deleteTexture(c),this.depthAttachment){const C=this.depthAttachment.get();C&&l.deleteRenderbuffer(C)}l.deleteFramebuffer(this.framebuffer)}}class Zd{constructor(l){var c,C;if(this.gl=l,this.clearColor=new Eh(this),this.clearDepth=new lm(this),this.clearStencil=new jc(this),this.colorMask=new Lu(this),this.depthMask=new $d(this),this.stencilMask=new Vd(this),this.stencilFunc=new pc(this),this.stencilOp=new Hd(this),this.stencilTest=new of(this),this.depthRange=new mc(this),this.depthTest=new gu(this),this.depthFunc=new $t(this),this.blend=new kn(this),this.blendFunc=new sn(this),this.blendColor=new Ur(this),this.blendEquation=new _i(this),this.cullFace=new Co(this),this.cullFaceSide=new oa(this),this.frontFace=new Vo(this),this.program=new QA(this),this.activeTexture=new vp(this),this.viewport=new Il(this),this.bindFramebuffer=new yu(this),this.bindRenderbuffer=new qA(this),this.bindTexture=new kl(this),this.bindVertexBuffer=new Gi(this),this.bindElementBuffer=new YA(this),this.bindVertexArray=new Uo(this),this.pixelStoreUnpack=new Nc(this),this.pixelStoreUnpackPremultiplyAlpha=new $A(this),this.pixelStoreUnpackFlipY=new CA(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Ri(l)){this.HALF_FLOAT=l.HALF_FLOAT;const M=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=l.RGBA16F)!==null&&c!==void 0?c:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(C=l.RGB16F)!==null&&C!==void 0?C:M==null?void 0:M.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const M=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,c){return new _A(this,l,c)}createVertexBuffer(l,c,C){return new Ol(this,l,c,C)}createRenderbuffer(l,c,C){const M=this.gl,R=M.createRenderbuffer();return this.bindRenderbuffer.set(R),M.renderbufferStorage(M.RENDERBUFFER,l,c,C),this.bindRenderbuffer.set(null),R}createFramebuffer(l,c,C,M){return new Gc(this,l,c,C,M)}clear({color:l,depth:c,stencil:C}){const M=this.gl;let R=0;l&&(R|=M.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(R|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),C!==void 0&&(R|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),M.clear(R)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){o.bz(l.blendFunction,Vi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Ri(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var c;return Ri(this.gl)?this.gl.deleteVertexArray(l):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let ja;function fd(T,l,c,C,M){const R=T.context,j=T.transform,$=R.gl,te=T.useProgram("collisionBox"),se=[];let xe=0,Oe=0;for(let At=0;At<C.length;At++){const mt=C[At],St=l.getTile(mt).getBucket(c);if(!St)continue;const kt=M?St.textCollisionBox:St.iconCollisionBox,Pt=St.collisionCircleArray;Pt.length>0&&(se.push({circleArray:Pt,circleOffset:Oe,coord:mt}),xe+=Pt.length/4,Oe=xe),kt&&te.draw(R,$.LINES,Jr.disabled,Ni.disabled,T.colorModeForRenderPass(),Ui.disabled,Ad(T.transform),T.style.map.terrain&&T.style.map.terrain.getTerrainData(mt),j.getProjectionData({overscaledTileID:mt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,T.transform.zoom,null,null,kt.collisionVertexBuffer)}if(!M||!se.length)return;const ke=T.useProgram("collisionCircle"),qe=new o.bM;qe.resize(4*xe),qe._trim();let Ve=0;for(const At of se)for(let mt=0;mt<At.circleArray.length/4;mt++){const St=4*mt,kt=At.circleArray[St+0],Pt=At.circleArray[St+1],Ft=At.circleArray[St+2],Tt=At.circleArray[St+3];qe.emplace(Ve++,kt,Pt,Ft,Tt,0),qe.emplace(Ve++,kt,Pt,Ft,Tt,1),qe.emplace(Ve++,kt,Pt,Ft,Tt,2),qe.emplace(Ve++,kt,Pt,Ft,Tt,3)}(!ja||ja.length<2*xe)&&(ja=function(At){const mt=2*At,St=new o.bO;St.resize(mt),St._trim();for(let kt=0;kt<mt;kt++){const Pt=6*kt;St.uint16[Pt+0]=4*kt+0,St.uint16[Pt+1]=4*kt+1,St.uint16[Pt+2]=4*kt+2,St.uint16[Pt+3]=4*kt+2,St.uint16[Pt+4]=4*kt+3,St.uint16[Pt+5]=4*kt+0}return St}(xe));const ut=R.createIndexBuffer(ja,!0),ot=R.createVertexBuffer(qe,o.bN.members,!0);for(const At of se){const mt=tf(T.transform);ke.draw(R,$.TRIANGLES,Jr.disabled,Ni.disabled,T.colorModeForRenderPass(),Ui.disabled,mt,T.style.map.terrain&&T.style.map.terrain.getTerrainData(At.coord),null,c.id,ot,ut,o.aD.simpleSegment(0,2*At.circleOffset,At.circleArray.length,At.circleArray.length/2),null,T.transform.zoom,null,null,null)}ot.destroy(),ut.destroy()}const yc=o.aq(new Float32Array(16));function VA(T,l,c,C,M,R){const{horizontalAlign:j,verticalAlign:$}=o.ay(T);return new o.P((-(j-.5)*l/M+C[0])*R,(-($-.5)*c/M+C[1])*R)}function sf(T,l,c,C,M,R){const j=l.tileAnchorPoint.add(new o.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let $=C.mult(R);c||($=$.rotate(-M));const te=j.add($);return tn(te.x,te.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(c){const $=Rn(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(T),te=Math.atan($.y/$.x)+($.x<0?Math.PI:0);return T.add(C.rotate(te))}return T.add(C)}function bA(T,l,c,C,M,R,j,$,te,se,xe,Oe){const ke=T.text.placedSymbolArray,qe=T.text.dynamicLayoutVertexArray,Ve=T.icon.dynamicLayoutVertexArray,ut={};qe.clear();for(let ot=0;ot<ke.length;ot++){const At=ke.get(ot),mt=At.hidden||!At.crossTileID||T.allowVerticalPlacement&&!At.placedOrientation?null:C[At.crossTileID];if(mt){const St=new o.P(At.anchorX,At.anchorY),kt={getElevation:Oe,width:M.width,height:M.height,pitchedLabelPlaneMatrix:R,lineVertexArray:null,pitchWithMap:c,transform:M,projectionCache:null,tileAnchorPoint:St,translation:se,unwrappedTileID:xe},Pt=c?Mr(St.x,St.y,kt):Rn(St.x,St.y,kt),Ft=zt(M.cameraToCenterDistance,Pt.signedDistanceFromCamera);let Tt=o.aj(T.textSizeData,$,At)*Ft/o.as;c&&(Tt*=T.tilePixelRatio/j);const{width:Jt,height:Vt,anchor:vn,textOffset:_n,textBoxScale:mn}=mt,Bn=VA(vn,Jt,Vt,_n,mn,Tt),Un=M.getPitchedTextCorrection(St.x+se[0],St.y+se[1],xe),wn=sf(Pt.point,kt,l,Bn,-M.bearingInRadians,Un),kr=T.allowVerticalPlacement&&At.placedOrientation===o.ai.vertical?Math.PI/2:0;for(let Bi=0;Bi<At.numGlyphs;Bi++)o.ak(qe,wn,kr);te&&At.associatedIconIndex>=0&&(ut[At.associatedIconIndex]={shiftedAnchor:wn,angle:kr})}else qi(At.numGlyphs,qe)}if(te){Ve.clear();const ot=T.icon.placedSymbolArray;for(let At=0;At<ot.length;At++){const mt=ot.get(At);if(mt.hidden)qi(mt.numGlyphs,Ve);else{const St=ut[At];if(St)for(let kt=0;kt<mt.numGlyphs;kt++)o.ak(Ve,St.shiftedAnchor,St.angle);else qi(mt.numGlyphs,Ve)}}T.icon.dynamicLayoutVertexBuffer.updateData(Ve)}T.text.dynamicLayoutVertexBuffer.updateData(qe)}function HA(T,l,c){return c.iconsInText&&l?"symbolTextAndIcon":T?"symbolSDF":"symbolIcon"}function Wc(T,l,c,C,M,R,j,$,te,se,xe,Oe,ke){const qe=T.context,Ve=qe.gl,ut=T.transform,ot=$==="map",At=te==="map",mt=$!=="viewport"&&c.layout.get("symbol-placement")!=="point",St=ot&&!At&&!mt,kt=!c.layout.get("symbol-sort-key").isConstant();let Pt=!1;const Ft=T.getDepthModeForSublayer(0,Jr.ReadOnly),Tt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Jt=[],Vt=ut.getCircleRadiusCorrection();for(const vn of C){const _n=l.getTile(vn),mn=_n.getBucket(c);if(!mn)continue;const Bn=M?mn.text:mn.icon;if(!Bn||!Bn.segments.get().length||!Bn.hasVisibleVertices)continue;const Un=Bn.programConfigurations.get(c.id),wn=M||mn.sdfIcons,kr=M?mn.textSizeData:mn.iconSizeData,Bi=At||ut.pitch!==0,$i=T.useProgram(HA(wn,M,mn),Un),Oo=o.ah(kr,ut.zoom),Si=T.style.map.terrain&&T.style.map.terrain.getTerrainData(vn);let jo,No,xo,yo,ka=[0,0],Go=null;if(M)No=_n.glyphAtlasTexture,xo=Ve.LINEAR,jo=_n.glyphAtlasTexture.size,mn.iconsInText&&(ka=_n.imageAtlasTexture.size,Go=_n.imageAtlasTexture,yo=Bi||T.options.rotating||T.options.zooming||kr.kind==="composite"||kr.kind==="camera"?Ve.LINEAR:Ve.NEAREST);else{const xs=c.layout.get("icon-size").constantOr(0)!==1||mn.iconsNeedLinear;No=_n.imageAtlasTexture,xo=wn||T.options.rotating||T.options.zooming||xs||Bi?Ve.LINEAR:Ve.NEAREST,jo=_n.imageAtlasTexture.size}const ds=o.at(_n,1,T.transform.zoom),Wa=Bt(ot,T.transform,ds),$u=o.H();o.an($u,Wa);const fl=vt(At,ot,T.transform,ds),pl=o.au(ut,_n,R,j),uu=ut.getProjectionData({overscaledTileID:vn,applyGlobeMatrix:!ke,applyTerrainMatrix:!0}),OA=Tt&&mn.hasTextData(),IA=c.layout.get("icon-text-fit")!=="none"&&OA&&mn.hasIconData();if(mt){const xs=T.style.map.terrain?(nl,rl)=>T.style.map.terrain.getElevation(vn,nl,rl):null,qs=c.layout.get("text-rotation-alignment")==="map";Tn(mn,T,M,Wa,$u,At,se,qs,vn.toUnwrapped(),ut.width,ut.height,pl,xs)}const Vu=M&&Tt||IA,Js=mt||Vu?yc:At?Wa:T.transform.clipSpaceToPixelsMatrix,ml=wn&&c.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let sa;sa=wn?mn.iconsInText?WA(kr.kind,Oo,St,At,mt,Vu,T,Js,fl,pl,jo,ka,Vt):Bl(kr.kind,Oo,St,At,mt,Vu,T,Js,fl,pl,M,jo,0,Vt):iu(kr.kind,Oo,St,At,mt,Vu,T,Js,fl,pl,M,jo,Vt);const Pl={program:$i,buffers:Bn,uniformValues:sa,projectionData:uu,atlasTexture:No,atlasTextureIcon:Go,atlasInterpolation:xo,atlasInterpolationIcon:yo,isSDF:wn,hasHalo:ml};if(kt&&mn.canOverlap){Pt=!0;const xs=Bn.segments.get();for(const qs of xs)Jt.push({segments:new o.aD([qs]),sortKey:qs.sortKey,state:Pl,terrainData:Si})}else Jt.push({segments:Bn.segments,sortKey:0,state:Pl,terrainData:Si})}Pt&&Jt.sort((vn,_n)=>vn.sortKey-_n.sortKey);for(const vn of Jt){const _n=vn.state;if(qe.activeTexture.set(Ve.TEXTURE0),_n.atlasTexture.bind(_n.atlasInterpolation,Ve.CLAMP_TO_EDGE),_n.atlasTextureIcon&&(qe.activeTexture.set(Ve.TEXTURE1),_n.atlasTextureIcon&&_n.atlasTextureIcon.bind(_n.atlasInterpolationIcon,Ve.CLAMP_TO_EDGE)),_n.isSDF){const mn=_n.uniformValues;_n.hasHalo&&(mn.u_is_halo=1,Xd(_n.buffers,vn.segments,c,T,_n.program,Ft,xe,Oe,mn,_n.projectionData,vn.terrainData)),mn.u_is_halo=0}Xd(_n.buffers,vn.segments,c,T,_n.program,Ft,xe,Oe,_n.uniformValues,_n.projectionData,vn.terrainData)}}function Xd(T,l,c,C,M,R,j,$,te,se,xe){const Oe=C.context;M.draw(Oe,Oe.gl.TRIANGLES,R,j,$,Ui.backCCW,te,xe,se,c.id,T.layoutVertexBuffer,T.indexBuffer,l,c.paint,C.transform.zoom,T.programConfigurations.get(c.id),T.dynamicLayoutVertexBuffer,T.opacityVertexBuffer)}function Ho(T,l,c,C,M){const R=T.context,j=R.gl,$=Ni.disabled,te=new Vi([j.ONE,j.ONE],o.b4.transparent,[!0,!0,!0,!0]),se=l.getBucket(c);if(!se)return;const xe=C.key;let Oe=c.heatmapFbos.get(xe);Oe||(Oe=ZA(R,l.tileSize,l.tileSize),c.heatmapFbos.set(xe,Oe)),R.bindFramebuffer.set(Oe.framebuffer),R.viewport.set([0,0,l.tileSize,l.tileSize]),R.clear({color:o.b4.transparent});const ke=se.programConfigurations.get(c.id),qe=T.useProgram("heatmap",ke,!M),Ve=T.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ut=T.style.map.terrain.getTerrainData(C);qe.draw(R,j.TRIANGLES,Jr.disabled,$,te,Ui.disabled,fc(l,T.transform.zoom,c.paint.get("heatmap-intensity"),1),ut,Ve,c.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,c.paint,T.transform.zoom,ke)}function Qc(T,l,c,C,M){const R=T.context,j=R.gl,$=T.transform;R.setColorMode(T.colorModeForRenderPass());const te=Fu(R,l),se=c.key,xe=l.heatmapFbos.get(se);if(!xe)return;R.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,xe.colorAttachment.get()),R.activeTexture.set(j.TEXTURE1),te.bind(j.LINEAR,j.CLAMP_TO_EDGE);const Oe=$.getProjectionData({overscaledTileID:c,applyTerrainMatrix:M,applyGlobeMatrix:!C});T.useProgram("heatmapTexture").draw(R,j.TRIANGLES,Jr.disabled,Ni.disabled,T.colorModeForRenderPass(),Ui.disabled,wh(T,l,0,1),null,Oe,l.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments,l.paint,$.zoom),xe.destroy(),l.heatmapFbos.delete(se)}function ZA(T,l,c){var C,M;const R=T.gl,j=R.createTexture();R.bindTexture(R.TEXTURE_2D,j),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR);const $=(C=T.HALF_FLOAT)!==null&&C!==void 0?C:R.UNSIGNED_BYTE,te=(M=T.RGBA16F)!==null&&M!==void 0?M:R.RGBA;R.texImage2D(R.TEXTURE_2D,0,te,l,c,0,R.RGBA,$,null);const se=T.createFramebuffer(l,c,!1,!1);return se.colorAttachment.set(j),se}function Fu(T,l){return l.colorRampTexture||(l.colorRampTexture=new ie(T,l.colorRamp,T.gl.RGBA)),l.colorRampTexture}function qc(T,l,c,C,M){if(!c||!C||!C.imageAtlas)return;const R=C.imageAtlas.patternPositions;let j=R[c.to.toString()],$=R[c.from.toString()];if(!j&&$&&(j=$),!$&&j&&($=j),!j||!$){const te=M.getPaintProperty(l);j=R[te],$=R[te]}j&&$&&T.setConstantPatternPositions(j,$)}function Jd(T,l,c,C,M,R,j,$){const te=T.context.gl,se="fill-pattern",xe=c.paint.get(se),Oe=xe&&xe.constantOr(1),ke=c.getCrossfadeParameters();let qe,Ve,ut,ot,At;const mt=T.transform,St=c.paint.get("fill-translate"),kt=c.paint.get("fill-translate-anchor");j?(Ve=Oe&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",qe=te.LINES):(Ve=Oe?"fillPattern":"fill",qe=te.TRIANGLES);const Pt=xe.constantOr(null);for(const Ft of C){const Tt=l.getTile(Ft);if(Oe&&!Tt.patternsLoaded())continue;const Jt=Tt.getBucket(c);if(!Jt)continue;const Vt=Jt.programConfigurations.get(c.id),vn=T.useProgram(Ve,Vt),_n=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ft);Oe&&(T.context.activeTexture.set(te.TEXTURE0),Tt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Vt.updatePaintBuffers(ke)),qc(Vt,se,Pt,Tt,c);const mn=mt.getProjectionData({overscaledTileID:Ft,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Bn=o.au(mt,Tt,St,kt);if(j){ot=Jt.indexBuffer2,At=Jt.segments2;const wn=[te.drawingBufferWidth,te.drawingBufferHeight];ut=Ve==="fillOutlinePattern"&&Oe?xh(T,ke,Tt,wn,Bn):Zs(wn,Bn)}else ot=Jt.indexBuffer,At=Jt.segments,ut=Oe?hc(T,ke,Tt,Bn):{u_fill_translate:Bn};let Un;if(T.renderPass==="translucent"&&$){const[wn]=T.getStencilConfigForOverlapAndUpdateStencilID(C);Un=wn[Ft.overscaledZ]}else Un=T.stencilModeForClipping(Ft);vn.draw(T.context,qe,M,Un,R,Ui.backCCW,ut,_n,mn,c.id,Jt.layoutVertexBuffer,ot,At,c.paint,T.transform.zoom,Vt)}}function Yc(T,l,c,C,M,R,j,$){const te=T.context,se=te.gl,xe="fill-extrusion-pattern",Oe=c.paint.get(xe),ke=Oe.constantOr(1),qe=c.getCrossfadeParameters(),Ve=c.paint.get("fill-extrusion-opacity"),ut=Oe.constantOr(null),ot=T.transform;for(const At of C){const mt=l.getTile(At),St=mt.getBucket(c);if(!St)continue;const kt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(At),Pt=St.programConfigurations.get(c.id),Ft=T.useProgram(ke?"fillExtrusionPattern":"fillExtrusion",Pt);ke&&(T.context.activeTexture.set(se.TEXTURE0),mt.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),Pt.updatePaintBuffers(qe));const Tt=ot.getProjectionData({overscaledTileID:At,applyGlobeMatrix:!$,applyTerrainMatrix:!0});qc(Pt,xe,ut,mt,c);const Jt=o.au(ot,mt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Vt=c.paint.get("fill-extrusion-vertical-gradient"),vn=ke?Rf(T,Vt,Ve,Jt,At,qe,mt):yp(T,Vt,Ve,Jt);Ft.draw(te,te.gl.TRIANGLES,M,R,j,Ui.backCCW,vn,kt,Tt,c.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,c.paint,T.transform.zoom,Pt,T.style.map.terrain&&St.centroidVertexBuffer)}}function vc(T,l,c,C,M,R,j,$,te){var se;const xe=T.style.projection,Oe=T.context,ke=T.transform,qe=Oe.gl,Ve=T.useProgram("hillshade"),ut=!T.options.moving;for(const ot of C){const At=l.getTile(ot),mt=At.fbo;if(!mt)continue;const St=xe.getMeshFromTileID(Oe,ot.canonical,$,!0,"raster"),kt=(se=T.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(ot);Oe.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,mt.colorAttachment.get());const Pt=ke.getProjectionData({overscaledTileID:ot,aligned:ut,applyGlobeMatrix:!te,applyTerrainMatrix:!0});Ve.draw(Oe,qe.TRIANGLES,R,M[ot.overscaledZ],j,Ui.backCCW,Mh(T,At,c),kt,Pt,c.id,St.vertexBuffer,St.indexBuffer,St.segments)}}const As=[new o.P(0,0),new o.P(o.X,0),new o.P(o.X,o.X),new o.P(0,o.X)];function zo(T,l,c,C,M,R,j,$,te=!1,se=!1){const xe=C[C.length-1].overscaledZ,Oe=T.context,ke=Oe.gl,qe=T.useProgram("raster"),Ve=T.transform,ut=T.style.projection,ot=T.colorModeForRenderPass(),At=!T.options.moving;for(const mt of C){const St=T.getDepthModeForSublayer(mt.overscaledZ-xe,c.paint.get("raster-opacity")===1?Jr.ReadWrite:Jr.ReadOnly,ke.LESS),kt=l.getTile(mt);kt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Pt=l.findLoadedParent(mt,0),Ft=l.findLoadedSibling(mt),Tt=cs(kt,Pt||Ft||null,l,c,T.transform,T.style.map.terrain);let Jt,Vt;const vn=c.paint.get("raster-resampling")==="nearest"?ke.NEAREST:ke.LINEAR;Oe.activeTexture.set(ke.TEXTURE0),kt.texture.bind(vn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),Oe.activeTexture.set(ke.TEXTURE1),Pt?(Pt.texture.bind(vn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),Jt=Math.pow(2,Pt.tileID.overscaledZ-kt.tileID.overscaledZ),Vt=[kt.tileID.canonical.x*Jt%1,kt.tileID.canonical.y*Jt%1]):kt.texture.bind(vn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&Oe.extTextureFilterAnisotropic&&T.transform.pitch>20&&ke.texParameterf(ke.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax);const _n=T.style.map.terrain&&T.style.map.terrain.getTerrainData(mt),mn=Ve.getProjectionData({overscaledTileID:mt,aligned:At,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),Bn=Yd(Vt||[0,0],Jt||1,Tt,c,$),Un=ut.getMeshFromTileID(Oe,mt.canonical,R,j,"raster");qe.draw(Oe,ke.TRIANGLES,St,M?M[mt.overscaledZ]:Ni.disabled,ot,te?Ui.frontCCW:Ui.backCCW,Bn,_n,mn,c.id,Un.vertexBuffer,Un.indexBuffer,Un.segments)}}function cs(T,l,c,C,M,R){const j=C.paint.get("raster-fade-duration");if(!R&&j>0){const $=S.now(),te=($-T.timeAdded)/j,se=l?($-l.timeAdded)/j:-1,xe=c.getSource(),Oe=rr(M,{tileSize:xe.tileSize,roundZoom:xe.roundZoom}),ke=!l||Math.abs(l.tileID.overscaledZ-Oe)>Math.abs(T.tileID.overscaledZ-Oe),qe=ke&&T.refreshedUponExpiration?1:o.ab(ke?te:1-se,0,1);return T.refreshedUponExpiration&&te>=1&&(T.refreshedUponExpiration=!1),l?{opacity:1,mix:1-qe}:{opacity:qe,mix:0}}return{opacity:1,mix:0}}const Df=new o.b4(1,0,0,1),pd=new o.b4(0,1,0,1),md=new o.b4(0,0,1,1),Uu=new o.b4(1,0,1,1),XA=new o.b4(0,1,1,1);function Nl(T,l,c,C){dl(T,0,l+c/2,T.transform.width,c,C)}function xA(T,l,c,C){dl(T,l-c/2,0,c,T.transform.height,C)}function dl(T,l,c,C,M,R){const j=T.context,$=j.gl;$.enable($.SCISSOR_TEST),$.scissor(l*T.pixelRatio,c*T.pixelRatio,C*T.pixelRatio,M*T.pixelRatio),j.clear({color:R}),$.disable($.SCISSOR_TEST)}function JA(T,l,c){const C=T.context,M=C.gl,R=T.useProgram("debug"),j=Jr.disabled,$=Ni.disabled,te=T.colorModeForRenderPass(),se="$debug",xe=T.style.map.terrain&&T.style.map.terrain.getTerrainData(c);C.activeTexture.set(M.TEXTURE0);const Oe=l.getTileByID(c.key).latestRawTileData,ke=Math.floor((Oe&&Oe.byteLength||0)/1024),qe=l.getTile(c).tileSize,Ve=512/Math.min(qe,512)*(c.overscaledZ/T.transform.zoom)*.5;let ut=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ut+=` => ${c.overscaledZ}`),function(At,mt){At.initDebugOverlayCanvas();const St=At.debugOverlayCanvas,kt=At.context.gl,Pt=At.debugOverlayCanvas.getContext("2d");Pt.clearRect(0,0,St.width,St.height),Pt.shadowColor="white",Pt.shadowBlur=2,Pt.lineWidth=1.5,Pt.strokeStyle="white",Pt.textBaseline="top",Pt.font="bold 36px Open Sans, sans-serif",Pt.fillText(mt,5,5),Pt.strokeText(mt,5,5),At.debugOverlayTexture.update(St),At.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(T,`${ut} ${ke}kB`);const ot=T.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(C,M.TRIANGLES,j,$,Vi.alphaBlended,Ui.disabled,cd(o.b4.transparent,Ve),null,ot,se,T.debugBuffer,T.quadTriangleIndexBuffer,T.debugSegments),R.draw(C,M.LINE_STRIP,j,$,te,Ui.disabled,cd(o.b4.red),xe,ot,se,T.debugBuffer,T.tileBorderIndexBuffer,T.debugSegments)}function zu(T,l,c,C){const{isRenderingGlobe:M}=C,R=T.context,j=R.gl,$=T.transform,te=T.colorModeForRenderPass(),se=T.getDepthModeFor3D(),xe=T.useProgram("terrain");R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height]);for(const Oe of c){const ke=l.getTerrainMesh(Oe.tileID),qe=T.renderToTexture.getTexture(Oe),Ve=l.getTerrainData(Oe.tileID);R.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,qe.texture);const ut=l.getMeshFrameDelta($.zoom),ot=$.calculateFogMatrix(Oe.tileID.toUnwrapped()),At=ud(ut,ot,T.style.sky,$.pitch,M),mt=$.getProjectionData({overscaledTileID:Oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});xe.draw(R,j.TRIANGLES,se,Ni.disabled,te,Ui.backCCW,At,Ve,mt,"terrain",ke.vertexBuffer,ke.indexBuffer,ke.segments)}}function gd(T,l){if(!l.mesh){const c=new o.aC;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const C=new o.aE;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),l.mesh=new Xa(T.createVertexBuffer(c,Ai.members),T.createIndexBuffer(C),o.aD.simpleSegment(0,0,c.length,C.length))}return l.mesh}class ju{constructor(l,c){this.context=new Zd(l),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.aq(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=oe.maxUnderzooming+oe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ns}resize(l,c,C){if(this.width=Math.floor(l*C),this.height=Math.floor(c*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const l=this.context,c=new o.aC;c.emplaceBack(0,0),c.emplaceBack(o.X,0),c.emplaceBack(0,o.X),c.emplaceBack(o.X,o.X),this.tileExtentBuffer=l.createVertexBuffer(c,Ai.members),this.tileExtentSegments=o.aD.simpleSegment(0,0,4,2);const C=new o.aC;C.emplaceBack(0,0),C.emplaceBack(o.X,0),C.emplaceBack(0,o.X),C.emplaceBack(o.X,o.X),this.debugBuffer=l.createVertexBuffer(C,Ai.members),this.debugSegments=o.aD.simpleSegment(0,0,4,5);const M=new o.bT;M.emplaceBack(0,0,0,0),M.emplaceBack(o.X,0,o.X,0),M.emplaceBack(0,o.X,0,o.X),M.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=l.createVertexBuffer(M,Ss.members),this.rasterBoundsSegments=o.aD.simpleSegment(0,0,4,2);const R=new o.aC;R.emplaceBack(0,0),R.emplaceBack(o.X,0),R.emplaceBack(0,o.X),R.emplaceBack(o.X,o.X),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(R,Ai.members),this.rasterBoundsSegmentsPosOnly=o.aD.simpleSegment(0,0,4,5);const j=new o.aC;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(j,Ai.members),this.viewportSegments=o.aD.simpleSegment(0,0,4,2);const $=new o.bU;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer($);const te=new o.aE;te.emplaceBack(1,0,2),te.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(te);const se=this.context.gl;this.stencilClearMode=new Ni({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO),this.tileExtentMesh=new Xa(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,c=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=o.H();o.bL(C,0,this.width,this.height,0,0,1),o.K(C,C,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const M={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(l,c.TRIANGLES,Jr.disabled,this.stencilClearMode,Vi.disabled,Ui.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,c,C){if(this.currentStencilSource===l.source||!l.isTileClipped()||!c||!c.length)return;this.currentStencilSource=l.source,this.nextStencilID+c.length>256&&this.clearStencil();const M=this.context;M.setColorMode(Vi.disabled),M.setDepthMode(Jr.disabled);const R={};for(const j of c)R[j.key]=this.nextStencilID++;this._renderTileMasks(R,c,C,!0),this._renderTileMasks(R,c,C,!1),this._tileClippingMaskIDs=R}_renderTileMasks(l,c,C,M){const R=this.context,j=R.gl,$=this.style.projection,te=this.transform,se=this.useProgram("clippingMask");for(const xe of c){const Oe=l[xe.key],ke=this.style.map.terrain&&this.style.map.terrain.getTerrainData(xe),qe=$.getMeshFromTileID(this.context,xe.canonical,M,!0,"stencil"),Ve=te.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0});se.draw(R,j.TRIANGLES,Jr.disabled,new Ni({func:j.ALWAYS,mask:0},Oe,255,j.KEEP,j.KEEP,j.REPLACE),Vi.disabled,C?Ui.disabled:Ui.backCCW,null,ke,Ve,"$clipping",qe.vertexBuffer,qe.indexBuffer,qe.segments)}}_renderTilesDepthBuffer(){const l=this.context,c=l.gl,C=this.style.projection,M=this.transform,R=this.useProgram("depth"),j=this.getDepthModeFor3D(),$=Ee(M,{tileSize:M.tileSize});for(const te of $){const se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),xe=C.getMeshFromTileID(this.context,te.canonical,!0,!0,"raster"),Oe=M.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!0,applyTerrainMatrix:!0});R.draw(l,c.TRIANGLES,j,Ni.disabled,Vi.disabled,Ui.backCCW,null,se,Oe,"$clipping",xe.vertexBuffer,xe.indexBuffer,xe.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,c=this.context.gl;return new Ni({func:c.NOTEQUAL,mask:255},l,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(l){const c=this.context.gl;return new Ni({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const c=this.context.gl,C=l.sort((j,$)=>$.overscaledZ-j.overscaledZ),M=C[C.length-1].overscaledZ,R=C[0].overscaledZ-M+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const j={};for(let $=0;$<R;$++)j[$+M]=new Ni({func:c.GEQUAL,mask:255},$+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=R,[j,C]}return[{[M]:Ni.disabled},C]}stencilConfigForOverlapTwoPass(l){const c=this.context.gl,C=l.sort((j,$)=>$.overscaledZ-j.overscaledZ),M=C[C.length-1].overscaledZ,R=C[0].overscaledZ-M+1;if(this.clearStencil(),R>1){const j={},$={};for(let te=0;te<R;te++)j[te+M]=new Ni({func:c.GREATER,mask:255},R+1+te,255,c.KEEP,c.KEEP,c.REPLACE),$[te+M]=new Ni({func:c.GREATER,mask:255},1+te,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*R+1,[j,$,C]}return this.nextStencilID=3,[{[M]:new Ni({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[M]:new Ni({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},C]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Vi([l.CONSTANT_COLOR,l.ONE],new o.b4(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Vi.unblended:Vi.alphaBlended}getDepthModeForSublayer(l,c,C){if(!this.opaquePassEnabledForLayer())return Jr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Jr(C||this.context.gl.LEQUAL,c,[M,M])}getDepthModeFor3D(){return new Jr(this.context.gl.LEQUAL,Jr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,c){var C,M;this.style=l,this.options=c,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(S.now()),this.imageManager.beginFrame();const R=this.style._order,j=this.style.sourceCaches,$={},te={},se={},xe={isRenderingToTexture:!1,isRenderingGlobe:((C=l.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const ke in j){const qe=j[ke];qe.used&&qe.prepare(this.context),$[ke]=qe.getVisibleCoordinates(!1),te[ke]=$[ke].slice().reverse(),se[ke]=qe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ke=0;ke<R.length;ke++)if(this.style._layers[R[ke]].is3D()){this.opaquePassCutoff=ke;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ke of R){const qe=this.style._layers[ke];if(!qe.hasOffscreenPass()||qe.isHidden(this.transform.zoom))continue;const Ve=te[qe.source];(qe.type==="custom"||Ve.length)&&this.renderLayer(this,j[qe.source],qe,Ve,xe)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:ke=>this.useProgram(ke)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b4.black:o.b4.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(ke,qe){const Ve=ke.context,ut=Ve.gl,ot=((Ft,Tt,Jt)=>{const Vt=Math.cos(Tt.rollInRadians),vn=Math.sin(Tt.rollInRadians),_n=Ja(Tt),mn=Tt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ft.properties.get("sky-color"),u_horizon_color:Ft.properties.get("horizon-color"),u_horizon:[(Tt.width/2-_n*vn)*Jt,(Tt.height/2+_n*Vt)*Jt],u_horizon_normal:[-vn,Vt],u_sky_horizon_blend:Ft.properties.get("sky-horizon-blend")*Tt.height/2*Jt,u_sky_blend:mn}})(qe,ke.style.map.transform,ke.pixelRatio),At=new Jr(ut.LEQUAL,Jr.ReadWrite,[0,1]),mt=Ni.disabled,St=ke.colorModeForRenderPass(),kt=ke.useProgram("sky"),Pt=gd(Ve,qe);kt.draw(Ve,ut.TRIANGLES,At,mt,St,Ui.disabled,ot,null,void 0,"sky",Pt.vertexBuffer,Pt.indexBuffer,Pt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=R.length-1;this.currentLayer>=0;this.currentLayer--){const ke=this.style._layers[R[this.currentLayer]],qe=j[ke.source],Ve=$[ke.source];this._renderTileClippingMasks(ke,Ve,!1),this.renderLayer(this,qe,ke,Ve,xe)}this.renderPass="translucent";let Oe=!1;for(this.currentLayer=0;this.currentLayer<R.length;this.currentLayer++){const ke=this.style._layers[R[this.currentLayer]],qe=j[ke.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ke,xe))continue;this.opaquePassEnabledForLayer()||Oe||(Oe=!0,xe.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ve=(ke.type==="symbol"?se:te)[ke.source];this._renderTileClippingMasks(ke,$[ke.source],!1),this.renderLayer(this,qe,ke,Ve,xe)}if(xe.isRenderingGlobe&&function(ke,qe,Ve){const ut=ke.context,ot=ut.gl,At=ke.useProgram("atmosphere"),mt=new Jr(ot.LEQUAL,Jr.ReadOnly,[0,1]),St=ke.transform,kt=function(mn,Bn){const Un=mn.properties.get("position"),wn=[-Un.x,-Un.y,-Un.z],kr=o.aq(new Float64Array(16));return mn.properties.get("anchor")==="map"&&(o.aX(kr,kr,Bn.rollInRadians),o.aY(kr,kr,-Bn.pitchInRadians),o.aX(kr,kr,Bn.bearingInRadians),o.aY(kr,kr,Bn.center.lat*Math.PI/180),o.bj(kr,kr,-Bn.center.lng*Math.PI/180)),o.bS(wn,wn,kr),wn}(Ve,ke.transform),Pt=St.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ft=qe.properties.get("atmosphere-blend")*Pt.projectionTransition;if(Ft===0)return;const Tt=vi(St.worldSize,St.center.lat),Jt=St.inverseProjectionMatrix,Vt=new Float64Array(4);Vt[3]=1,o.al(Vt,Vt,St.modelViewProjectionMatrix),Vt[0]/=Vt[3],Vt[1]/=Vt[3],Vt[2]/=Vt[3],Vt[3]=1,o.al(Vt,Vt,Jt),Vt[0]/=Vt[3],Vt[1]/=Vt[3],Vt[2]/=Vt[3],Vt[3]=1;const vn=((mn,Bn,Un,wn,kr)=>({u_sun_pos:mn,u_atmosphere_blend:Bn,u_globe_position:Un,u_globe_radius:wn,u_inv_proj_matrix:kr}))(kt,Ft,[Vt[0],Vt[1],Vt[2]],Tt,Jt),_n=gd(ut,qe);At.draw(ut,ot.TRIANGLES,mt,Ni.disabled,Vi.alphaBlended,Ui.disabled,vn,null,null,"atmosphere",_n.vertexBuffer,_n.indexBuffer,_n.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ke=function(qe,Ve){let ut=null;const ot=Object.values(qe._layers).flatMap(kt=>kt.source&&!kt.isHidden(Ve)?[qe.sourceCaches[kt.source]]:[]),At=ot.filter(kt=>kt.getSource().type==="vector"),mt=ot.filter(kt=>kt.getSource().type!=="vector"),St=kt=>{(!ut||ut.getSource().maxzoom<kt.getSource().maxzoom)&&(ut=kt)};return At.forEach(kt=>St(kt)),ut||mt.forEach(kt=>St(kt)),ut}(this.style,this.transform.zoom);ke&&function(qe,Ve,ut){for(let ot=0;ot<ut.length;ot++)JA(qe,Ve,ut[ot])}(this,ke,ke.getVisibleCoordinates())}this.options.showPadding&&function(ke){const qe=ke.transform.padding;Nl(ke,ke.transform.height-(qe.top||0),3,Df),Nl(ke,qe.bottom||0,3,pd),xA(ke,qe.left||0,3,md),xA(ke,ke.transform.width-(qe.right||0),3,Uu);const Ve=ke.transform.centerPoint;(function(ut,ot,At,mt){dl(ut,ot-1,At-10,2,20,mt),dl(ut,ot-10,At-1,20,2,mt)})(ke,Ve.x,ke.transform.height-Ve.y,XA)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=l?!o.bV(c,C):!o.bW(c,C)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(o.bX(c,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(R,j){const $=R.context,te=$.gl,se=R.transform,xe=Vi.unblended,Oe=new Jr(te.LEQUAL,Jr.ReadWrite,[0,1]),ke=j.sourceCache.getRenderableTiles(),qe=R.useProgram("terrainDepth");$.bindFramebuffer.set(j.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),$.clear({color:o.b4.transparent,depth:1});for(const Ve of ke){const ut=j.getTerrainMesh(Ve.tileID),ot=j.getTerrainData(Ve.tileID),At=se.getProjectionData({overscaledTileID:Ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),mt={u_ele_delta:j.getMeshFrameDelta(se.zoom)};qe.draw($,te.TRIANGLES,Oe,Ni.disabled,xe,Ui.backCCW,mt,ot,At,"terrain",ut.vertexBuffer,ut.indexBuffer,ut.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain),function(R,j){const $=R.context,te=$.gl,se=R.transform,xe=Vi.unblended,Oe=new Jr(te.LEQUAL,Jr.ReadWrite,[0,1]),ke=j.getCoordsTexture(),qe=j.sourceCache.getRenderableTiles(),Ve=R.useProgram("terrainCoords");$.bindFramebuffer.set(j.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),$.clear({color:o.b4.transparent,depth:1}),j.coordsIndex=[];for(const ut of qe){const ot=j.getTerrainMesh(ut.tileID),At=j.getTerrainData(ut.tileID);$.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,ke.texture);const mt={u_terrain_coords_id:(255-j.coordsIndex.length)/255,u_texture:0,u_ele_delta:j.getMeshFrameDelta(se.zoom)},St=se.getProjectionData({overscaledTileID:ut.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ve.draw($,te.TRIANGLES,Oe,Ni.disabled,xe,Ui.backCCW,mt,At,St,"terrain",ot.vertexBuffer,ot.indexBuffer,ot.segments),j.coordsIndex.push(ut.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,R.width,R.height])}(this,this.style.map.terrain))}renderLayer(l,c,C,M,R){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(M||[]).length)&&(this.id=C.id,o.bY(C)?function(j,$,te,se,xe,Oe){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=Oe,qe=Ni.disabled,Ve=j.colorModeForRenderPass();(te._unevaluatedLayout.hasValue("text-variable-anchor")||te._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ut,ot,At,mt,St,kt,Pt,Ft,Tt){const Jt=ot.transform,Vt=ot.style.map.terrain,vn=St==="map",_n=kt==="map";for(const mn of ut){const Bn=mt.getTile(mn),Un=Bn.getBucket(At);if(!Un||!Un.text||!Un.text.segments.get().length)continue;const wn=o.ah(Un.textSizeData,Jt.zoom),kr=o.at(Bn,1,ot.transform.zoom),Bi=Bt(vn,ot.transform,kr),$i=At.layout.get("icon-text-fit")!=="none"&&Un.hasIconData();{const Oo=Math.pow(2,Jt.zoom-Bn.tileID.overscaledZ),Si=Vt?(jo,No)=>Vt.getElevation(mn,jo,No):null;bA(Un,vn,_n,Tt,Jt,Bi,Oo,wn,$i,o.au(Jt,Bn,Pt,Ft),mn.toUnwrapped(),Si)}}}(se,j,te,$,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),xe),te.paint.get("icon-opacity").constantOr(1)!==0&&Wc(j,$,te,se,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),qe,Ve,ke),te.paint.get("text-opacity").constantOr(1)!==0&&Wc(j,$,te,se,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),qe,Ve,ke),$.map.showCollisionBoxes&&(fd(j,$,te,se,!0),fd(j,$,te,se,!1))}(l,c,C,M,this.style.placement.variableOffsets,R):o.bZ(C)?function(j,$,te,se,xe){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=xe,ke=te.paint.get("circle-opacity"),qe=te.paint.get("circle-stroke-width"),Ve=te.paint.get("circle-stroke-opacity"),ut=!te.layout.get("circle-sort-key").isConstant();if(ke.constantOr(1)===0&&(qe.constantOr(1)===0||Ve.constantOr(1)===0))return;const ot=j.context,At=ot.gl,mt=j.transform,St=j.getDepthModeForSublayer(0,Jr.ReadOnly),kt=Ni.disabled,Pt=j.colorModeForRenderPass(),Ft=[],Tt=mt.getCircleRadiusCorrection();for(let Jt=0;Jt<se.length;Jt++){const Vt=se[Jt],vn=$.getTile(Vt),_n=vn.getBucket(te);if(!_n)continue;const mn=te.paint.get("circle-translate"),Bn=te.paint.get("circle-translate-anchor"),Un=o.au(mt,vn,mn,Bn),wn=_n.programConfigurations.get(te.id),kr=j.useProgram("circle",wn),Bi=_n.layoutVertexBuffer,$i=_n.indexBuffer,Oo=j.style.map.terrain&&j.style.map.terrain.getTerrainData(Vt),Si={programConfiguration:wn,program:kr,layoutVertexBuffer:Bi,indexBuffer:$i,uniformValues:ef(j,vn,te,Un,Tt),terrainData:Oo,projectionData:mt.getProjectionData({overscaledTileID:Vt,applyGlobeMatrix:!Oe,applyTerrainMatrix:!0})};if(ut){const jo=_n.segments.get();for(const No of jo)Ft.push({segments:new o.aD([No]),sortKey:No.sortKey,state:Si})}else Ft.push({segments:_n.segments,sortKey:0,state:Si})}ut&&Ft.sort((Jt,Vt)=>Jt.sortKey-Vt.sortKey);for(const Jt of Ft){const{programConfiguration:Vt,program:vn,layoutVertexBuffer:_n,indexBuffer:mn,uniformValues:Bn,terrainData:Un,projectionData:wn}=Jt.state;vn.draw(ot,At.TRIANGLES,St,kt,Pt,Ui.backCCW,Bn,Un,wn,te.id,_n,mn,Jt.segments,te.paint,j.transform.zoom,Vt)}}(l,c,C,M,R):o.b_(C)?function(j,$,te,se,xe){if(te.paint.get("heatmap-opacity")===0)return;const Oe=j.context,{isRenderingToTexture:ke,isRenderingGlobe:qe}=xe;if(j.style.map.terrain){for(const Ve of se){const ut=$.getTile(Ve);$.hasRenderableParent(Ve)||(j.renderPass==="offscreen"?Ho(j,ut,te,Ve,qe):j.renderPass==="translucent"&&Qc(j,te,Ve,ke,qe))}Oe.viewport.set([0,0,j.width,j.height])}else j.renderPass==="offscreen"?function(Ve,ut,ot,At){const mt=Ve.context,St=mt.gl,kt=Ve.transform,Pt=Ni.disabled,Ft=new Vi([St.ONE,St.ONE],o.b4.transparent,[!0,!0,!0,!0]);(function(Tt,Jt,Vt){const vn=Tt.gl;Tt.activeTexture.set(vn.TEXTURE1),Tt.viewport.set([0,0,Jt.width/4,Jt.height/4]);let _n=Vt.heatmapFbos.get(o.bP);_n?(vn.bindTexture(vn.TEXTURE_2D,_n.colorAttachment.get()),Tt.bindFramebuffer.set(_n.framebuffer)):(_n=ZA(Tt,Jt.width/4,Jt.height/4),Vt.heatmapFbos.set(o.bP,_n))})(mt,Ve,ot),mt.clear({color:o.b4.transparent});for(let Tt=0;Tt<At.length;Tt++){const Jt=At[Tt];if(ut.hasRenderableParent(Jt))continue;const Vt=ut.getTile(Jt),vn=Vt.getBucket(ot);if(!vn)continue;const _n=vn.programConfigurations.get(ot.id),mn=Ve.useProgram("heatmap",_n),Bn=kt.getProjectionData({overscaledTileID:Jt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Un=kt.getCircleRadiusCorrection();mn.draw(mt,St.TRIANGLES,Jr.disabled,Pt,Ft,Ui.backCCW,fc(Vt,kt.zoom,ot.paint.get("heatmap-intensity"),Un),null,Bn,ot.id,vn.layoutVertexBuffer,vn.indexBuffer,vn.segments,ot.paint,kt.zoom,_n)}mt.viewport.set([0,0,Ve.width,Ve.height])}(j,$,te,se):j.renderPass==="translucent"&&function(Ve,ut){const ot=Ve.context,At=ot.gl;ot.setColorMode(Ve.colorModeForRenderPass());const mt=ut.heatmapFbos.get(o.bP);mt&&(ot.activeTexture.set(At.TEXTURE0),At.bindTexture(At.TEXTURE_2D,mt.colorAttachment.get()),ot.activeTexture.set(At.TEXTURE1),Fu(ot,ut).bind(At.LINEAR,At.CLAMP_TO_EDGE),Ve.useProgram("heatmapTexture").draw(ot,At.TRIANGLES,Jr.disabled,Ni.disabled,Ve.colorModeForRenderPass(),Ui.disabled,wh(Ve,ut,0,1),null,null,ut.id,Ve.viewportBuffer,Ve.quadTriangleIndexBuffer,Ve.viewportSegments,ut.paint,Ve.transform.zoom))}(j,te)}(l,c,C,M,R):o.b$(C)?function(j,$,te,se,xe){if(j.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=xe,ke=te.paint.get("line-opacity"),qe=te.paint.get("line-width");if(ke.constantOr(1)===0||qe.constantOr(1)===0)return;const Ve=j.getDepthModeForSublayer(0,Jr.ReadOnly),ut=j.colorModeForRenderPass(),ot=te.paint.get("line-dasharray"),At=te.paint.get("line-pattern"),mt=At.constantOr(1),St=te.paint.get("line-gradient"),kt=te.getCrossfadeParameters(),Pt=mt?"linePattern":ot?"lineSDF":St?"lineGradient":"line",Ft=j.context,Tt=Ft.gl,Jt=j.transform;let Vt=!0;for(const vn of se){const _n=$.getTile(vn);if(mt&&!_n.patternsLoaded())continue;const mn=_n.getBucket(te);if(!mn)continue;const Bn=mn.programConfigurations.get(te.id),Un=j.context.program.get(),wn=j.useProgram(Pt,Bn),kr=Vt||wn.program!==Un,Bi=j.style.map.terrain&&j.style.map.terrain.getTerrainData(vn),$i=At.constantOr(null);if($i&&_n.imageAtlas){const xo=_n.imageAtlas,yo=xo.patternPositions[$i.to.toString()],ka=xo.patternPositions[$i.from.toString()];yo&&ka&&Bn.setConstantPatternPositions(yo,ka)}const Oo=Jt.getProjectionData({overscaledTileID:vn,applyGlobeMatrix:!Oe,applyTerrainMatrix:!0}),Si=Jt.getPixelScale(),jo=mt?Sh(j,_n,te,Si,kt):ot?mu(j,_n,te,Si,ot,kt):St?pu(j,_n,te,Si,mn.lineClipsArray.length):Fc(j,_n,te,Si);if(mt)Ft.activeTexture.set(Tt.TEXTURE0),_n.imageAtlasTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),Bn.updatePaintBuffers(kt);else if(ot&&(kr||j.lineAtlas.dirty))Ft.activeTexture.set(Tt.TEXTURE0),j.lineAtlas.bind(Ft);else if(St){const xo=mn.gradients[te.id];let yo=xo.texture;if(te.gradientVersion!==xo.version){let ka=256;if(te.stepInterpolant){const Go=$.getSource().maxzoom,ds=vn.canonical.z===Go?Math.ceil(1<<j.transform.maxZoom-vn.canonical.z):1;ka=o.ab(o.bQ(mn.maxLineLength/o.X*1024*ds),256,Ft.maxTextureSize)}xo.gradient=o.bR({expression:te.gradientExpression(),evaluationKey:"lineProgress",resolution:ka,image:xo.gradient||void 0,clips:mn.lineClipsArray}),xo.texture?xo.texture.update(xo.gradient):xo.texture=new ie(Ft,xo.gradient,Tt.RGBA),xo.version=te.gradientVersion,yo=xo.texture}Ft.activeTexture.set(Tt.TEXTURE0),yo.bind(te.stepInterpolant?Tt.NEAREST:Tt.LINEAR,Tt.CLAMP_TO_EDGE)}let No;if(Oe){const[xo]=j.getStencilConfigForOverlapAndUpdateStencilID(se);No=xo[vn.overscaledZ]}else No=j.stencilModeForClipping(vn);wn.draw(Ft,Tt.TRIANGLES,Ve,No,ut,Ui.disabled,jo,Bi,Oo,te.id,mn.layoutVertexBuffer,mn.indexBuffer,mn.segments,te.paint,j.transform.zoom,Bn,mn.layoutVertexBuffer2),Vt=!1}}(l,c,C,M,R):o.c0(C)?function(j,$,te,se,xe){const Oe=te.paint.get("fill-color"),ke=te.paint.get("fill-opacity");if(ke.constantOr(1)===0)return;const{isRenderingToTexture:qe}=xe,Ve=j.colorModeForRenderPass(),ut=te.paint.get("fill-pattern"),ot=j.opaquePassEnabledForLayer()&&!ut.constantOr(1)&&Oe.constantOr(o.b4.transparent).a===1&&ke.constantOr(0)===1?"opaque":"translucent";if(j.renderPass===ot){const At=j.getDepthModeForSublayer(1,j.renderPass==="opaque"?Jr.ReadWrite:Jr.ReadOnly);Jd(j,$,te,se,At,Ve,!1,qe)}if(j.renderPass==="translucent"&&te.paint.get("fill-antialias")){const At=j.getDepthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,Jr.ReadOnly);Jd(j,$,te,se,At,Ve,!0,qe)}}(l,c,C,M,R):o.c1(C)?function(j,$,te,se,xe){const Oe=te.paint.get("fill-extrusion-opacity");if(Oe===0)return;const{isRenderingToTexture:ke}=xe;if(j.renderPass==="translucent"){const qe=new Jr(j.context.gl.LEQUAL,Jr.ReadWrite,j.depthRangeFor3D);if(Oe!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))Yc(j,$,te,se,qe,Ni.disabled,Vi.disabled,ke),Yc(j,$,te,se,qe,j.stencilModeFor3D(),j.colorModeForRenderPass(),ke);else{const Ve=j.colorModeForRenderPass();Yc(j,$,te,se,qe,Ni.disabled,Ve,ke)}}}(l,c,C,M,R):o.c2(C)?function(j,$,te,se,xe){if(j.renderPass!=="offscreen"&&j.renderPass!=="translucent")return;const{isRenderingToTexture:Oe}=xe,ke=j.context,qe=j.style.projection.useSubdivision,Ve=j.getDepthModeForSublayer(0,Jr.ReadOnly),ut=j.colorModeForRenderPass();if(j.renderPass==="offscreen")(function(ot,At,mt,St,kt,Pt,Ft){const Tt=ot.context,Jt=Tt.gl;for(const Vt of mt){const vn=At.getTile(Vt),_n=vn.dem;if(!_n||!_n.data||!vn.needsHillshadePrepare)continue;const mn=_n.dim,Bn=_n.stride,Un=_n.getPixels();if(Tt.activeTexture.set(Jt.TEXTURE1),Tt.pixelStoreUnpackPremultiplyAlpha.set(!1),vn.demTexture=vn.demTexture||ot.getTileTexture(Bn),vn.demTexture){const kr=vn.demTexture;kr.update(Un,{premultiply:!1}),kr.bind(Jt.NEAREST,Jt.CLAMP_TO_EDGE)}else vn.demTexture=new ie(Tt,Un,Jt.RGBA,{premultiply:!1}),vn.demTexture.bind(Jt.NEAREST,Jt.CLAMP_TO_EDGE);Tt.activeTexture.set(Jt.TEXTURE0);let wn=vn.fbo;if(!wn){const kr=new ie(Tt,{width:mn,height:mn,data:null},Jt.RGBA);kr.bind(Jt.LINEAR,Jt.CLAMP_TO_EDGE),wn=vn.fbo=Tt.createFramebuffer(mn,mn,!0,!1),wn.colorAttachment.set(kr.texture)}Tt.bindFramebuffer.set(wn.framebuffer),Tt.viewport.set([0,0,mn,mn]),ot.useProgram("hillshadePrepare").draw(Tt,Jt.TRIANGLES,kt,Pt,Ft,Ui.disabled,dd(vn.tileID,_n),null,null,St.id,ot.rasterBoundsBuffer,ot.quadTriangleIndexBuffer,ot.rasterBoundsSegments),vn.needsHillshadePrepare=!1}})(j,$,se,te,Ve,Ni.disabled,ut),ke.viewport.set([0,0,j.width,j.height]);else if(j.renderPass==="translucent")if(qe){const[ot,At,mt]=j.stencilConfigForOverlapTwoPass(se);vc(j,$,te,mt,ot,Ve,ut,!1,Oe),vc(j,$,te,mt,At,Ve,ut,!0,Oe)}else{const[ot,At]=j.getStencilConfigForOverlapAndUpdateStencilID(se);vc(j,$,te,At,ot,Ve,ut,!1,Oe)}}(l,c,C,M,R):o.c3(C)?function(j,$,te,se,xe){if(j.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!se.length)return;const{isRenderingToTexture:Oe}=xe,ke=$.getSource(),qe=j.style.projection.useSubdivision;if(ke instanceof sr)zo(j,$,te,se,null,!1,!1,ke.tileCoords,ke.flippedWindingOrder,Oe);else if(qe){const[Ve,ut,ot]=j.stencilConfigForOverlapTwoPass(se);zo(j,$,te,ot,Ve,!1,!0,As,!1,Oe),zo(j,$,te,ot,ut,!0,!0,As,!1,Oe)}else{const[Ve,ut]=j.getStencilConfigForOverlapAndUpdateStencilID(se);zo(j,$,te,ut,Ve,!1,!0,As,!1,Oe)}}(l,c,C,M,R):o.c4(C)?function(j,$,te,se,xe){const Oe=te.paint.get("background-color"),ke=te.paint.get("background-opacity");if(ke===0)return;const{isRenderingToTexture:qe}=xe,Ve=j.context,ut=Ve.gl,ot=j.style.projection,At=j.transform,mt=At.tileSize,St=te.paint.get("background-pattern");if(j.isPatternMissing(St))return;const kt=!St&&Oe.a===1&&ke===1&&j.opaquePassEnabledForLayer()?"opaque":"translucent";if(j.renderPass!==kt)return;const Pt=Ni.disabled,Ft=j.getDepthModeForSublayer(0,kt==="opaque"?Jr.ReadWrite:Jr.ReadOnly),Tt=j.colorModeForRenderPass(),Jt=j.useProgram(St?"backgroundPattern":"background"),Vt=se||Ee(At,{tileSize:mt,terrain:j.style.map.terrain});St&&(Ve.activeTexture.set(ut.TEXTURE0),j.imageManager.bind(j.context));const vn=te.getCrossfadeParameters();for(const _n of Vt){const mn=At.getProjectionData({overscaledTileID:_n,applyGlobeMatrix:!qe,applyTerrainMatrix:!0}),Bn=St?rf(ke,j,St,{tileID:_n,tileSize:mt},vn):zc(ke,Oe),Un=j.style.map.terrain&&j.style.map.terrain.getTerrainData(_n),wn=ot.getMeshFromTileID(Ve,_n.canonical,!1,!0,"raster");Jt.draw(Ve,ut.TRIANGLES,Ft,Pt,Tt,Ui.backCCW,Bn,Un,mn,te.id,wn.vertexBuffer,wn.indexBuffer,wn.segments)}}(l,0,C,M,R):o.c5(C)&&function(j,$,te,se){const{isRenderingGlobe:xe}=se,Oe=j.context,ke=te.implementation,qe=j.style.projection,Ve=j.transform,ut=Ve.getProjectionDataForCustomLayer(xe),ot={farZ:Ve.farZ,nearZ:Ve.nearZ,fov:Ve.fov*Math.PI/180,modelViewProjectionMatrix:Ve.modelViewProjectionMatrix,projectionMatrix:Ve.projectionMatrix,shaderData:{variantName:qe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${qe.shaderPreludeCode.vertexSource}`,define:qe.shaderDefine},defaultProjectionData:ut},At=ke.renderingMode?ke.renderingMode:"2d";if(j.renderPass==="offscreen"){const mt=ke.prerender;mt&&(j.setCustomLayerDefaults(),Oe.setColorMode(j.colorModeForRenderPass()),mt.call(ke,Oe.gl,ot),Oe.setDirty(),j.setBaseState())}else if(j.renderPass==="translucent"){j.setCustomLayerDefaults(),Oe.setColorMode(j.colorModeForRenderPass()),Oe.setStencilMode(Ni.disabled);const mt=At==="3d"?j.getDepthModeFor3D():j.getDepthModeForSublayer(0,Jr.ReadOnly);Oe.setDepthMode(mt),ke.render(Oe.gl,ot),Oe.setDirty(),j.setBaseState(),Oe.bindFramebuffer.set(null)}}(l,0,C,R))}saveTileTexture(l){const c=this._tileTextures[l.size[0]];c?c.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const c=this._tileTextures[l];return c&&c.length>0?c.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const c=this.imageManager.getPattern(l.from.toString()),C=this.imageManager.getPattern(l.to.toString());return!c||!C}useProgram(l,c,C=!1){this.cache=this.cache||{};const M=!!this.style.map.terrain,R=this.style.projection,j=l+(c?c.cacheKey:"")+`/${C?iA:R.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(M?"/terrain":"");return this.cache[j]||(this.cache[j]=new qd(this.context,ri[l],c,hd[l],this._showOverdrawInspector,M,C?ri.projectionMercator:R.shaderPreludeCode,C?ca:R.shaderDefine)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:c}=this.context.gl;return this.width!==l||this.height!==c}}function eh(T,l){let c,C=!1,M=null,R=null;const j=()=>{M=null,C&&(T.apply(R,c),M=setTimeout(j,l),C=!1)};return(...$)=>(C=!0,R=this,c=$,M||j(),M)}class ec{constructor(l){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let C;return c.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(C=M)}),(C&&C[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:C,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const C=c.join("/");let M=C;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${C}`);let R=window.location.hash.replace(M,"");R.startsWith("#&")?R=R.slice(0,1)+R.slice(2):R==="#"&&(R="");let j=window.location.href.replace(/(#.+)?$/,R);j=j.replace("&&","&"),window.history.replaceState(window.history.state,null,j)},this._updateHash=eh(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const c=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,M=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,M),j=Math.round(c.lng*R)/R,$=Math.round(c.lat*R)/R,te=this._map.getBearing(),se=this._map.getPitch();let xe="";if(xe+=l?`/${j}/${$}/${C}`:`${C}/${$}/${j}`,(te||se)&&(xe+="/"+Math.round(10*te)/10),se&&(xe+=`/${Math.round(se)}`),this._hashName){const Oe=this._hashName;let ke=!1;const qe=window.location.hash.slice(1).split("&").map(Ve=>{const ut=Ve.split("=")[0];return ut===Oe?(ke=!0,`${ut}=${xe}`):Ve}).filter(Ve=>Ve);return ke||qe.push(`${Oe}=${xe}`),`#${qe.join("&")}`}return`#${xe}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new o.N(+l[2],+l[1])}catch{return!1}const c=+l[0],C=+(l[3]||0),M=+(l[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&C>=0&&C<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const Nu={linearity:.3,easing:o.c6(0,0,.3,1)},Gu=o.e({deceleration:2500,maxSpeed:1400},Nu),wA=o.e({deceleration:20,maxSpeed:1400},Nu),_c=o.e({deceleration:1e3,maxSpeed:360},Nu),_u=o.e({deceleration:1e3,maxSpeed:90},Nu),$c=o.e({deceleration:1e3,maxSpeed:360},Nu);class et{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:S.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,c=S.now();for(;l.length>0&&c-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)c.zoom+=R.zoomDelta||0,c.bearing+=R.bearingDelta||0,c.pitch+=R.pitchDelta||0,c.roll+=R.rollDelta||0,R.panDelta&&c.pan._add(R.panDelta),R.around&&(c.around=R.around),R.pinchAround&&(c.pinchAround=R.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(c.pan.mag()){const R=Bo(c.pan.mag(),C,o.e({},Gu,l||{})),j=c.pan.mult(R.amount/c.pan.mag()),$=this._map.cameraHelper.handlePanInertia(j,this._map.transform);M.center=$.easingCenter,M.offset=$.easingOffset,Na(M,R)}if(c.zoom){const R=Bo(c.zoom,C,wA);M.zoom=this._map.transform.zoom+R.amount,Na(M,R)}if(c.bearing){const R=Bo(c.bearing,C,_c);M.bearing=this._map.transform.bearing+o.ab(R.amount,-179,179),Na(M,R)}if(c.pitch){const R=Bo(c.pitch,C,_u);M.pitch=this._map.transform.pitch+R.amount,Na(M,R)}if(c.roll){const R=Bo(c.roll,C,$c);M.roll=this._map.transform.roll+o.ab(R.amount,-179,179),Na(M,R)}if(M.zoom||M.bearing){const R=c.pinchAround===void 0?c.around:c.pinchAround;M.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),o.e(M,{noMoveStart:!0})}}function Na(T,l){(!T.duration||T.duration<l.duration)&&(T.duration=l.duration,T.easing=l.easing)}function Bo(T,l,c){const{maxSpeed:C,linearity:M,deceleration:R}=c,j=o.ab(T*M/(l/1e3),-C,C),$=Math.abs(j)/(R*M);return{easing:c.easing,duration:1e3*$,amount:j*($/2)}}class Ki extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,C,M={}){const R=O.mousePos(c.getCanvas(),C),j=c.unproject(R);super(l,o.e({point:R,lngLat:j,originalEvent:C},M)),this._defaultPrevented=!1,this.target=c}}class $r extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,C){const M=l==="touchend"?C.changedTouches:C.touches,R=O.touchPos(c.getCanvasContainer(),M),j=R.map(te=>c.unproject(te)),$=R.reduce((te,se,xe,Oe)=>te.add(se.div(Oe.length)),new o.P(0,0));super(l,{points:R,point:$,lngLats:j,lngLat:c.unproject($),originalEvent:C}),this._defaultPrevented=!1}}class Es extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,c,C){super(l,{originalEvent:C}),this._defaultPrevented=!1}}class yd{constructor(l,c){this._map=l,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new Es(l.type,this._map,l))}mousedown(l,c){return this._mousedownPos=c,this._firePreventable(new Ki(l.type,this._map,l))}mouseup(l){this._map.fire(new Ki(l.type,this._map,l))}click(l,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ki(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Ki(l.type,this._map,l))}mouseover(l){this._map.fire(new Ki(l.type,this._map,l))}mouseout(l){this._map.fire(new Ki(l.type,this._map,l))}touchstart(l){return this._firePreventable(new $r(l.type,this._map,l))}touchmove(l){this._map.fire(new $r(l.type,this._map,l))}touchend(l){this._map.fire(new $r(l.type,this._map,l))}touchcancel(l){this._map.fire(new $r(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class th{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Ki(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Ki(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Oa{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(o.P.convert(l),this._map.terrain)}}class Ws{constructor(l,c){this._map=l,this._tr=new Oa(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,c){this.isEnabled()&&l.shiftKey&&l.button===0&&(O.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(l,c){if(!this._active)return;const C=c;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=C,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const R=Math.min(M.x,C.x),j=Math.max(M.x,C.x),$=Math.min(M.y,C.y),te=Math.max(M.y,C.y);O.setTransform(this._box,`translate(${R}px,${$}px)`),this._box.style.width=j-R+"px",this._box.style.height=te-$+"px"}mouseupWindow(l,c){if(!this._active||l.button!==0)return;const C=this._startPos,M=c;if(this.reset(),O.suppressClick(),C.x!==M.x||C.y!==M.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:l})),{cameraAnimation:R=>R.fitScreenCoordinates(C,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,c){return this._map.fire(new o.k(l,{originalEvent:c}))}}function Cs(T,l){if(T.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${T.length}, points ${l.length}`);const c={};for(let C=0;C<T.length;C++)c[T[C].identifier]=l[C];return c}class uA{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,c,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),C.length===this.numTouches&&(this.centroid=function(M){const R=new o.P(0,0);for(const j of M)R._add(j);return R.div(M.length)}(c),this.touches=Cs(C,c)))}touchmove(l,c,C){if(this.aborted||!this.centroid)return;const M=Cs(C,c);for(const R in this.touches){const j=M[R];(!j||j.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(l,c,C){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class Bs{constructor(l){this.singleTap=new uA(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,c,C){this.singleTap.touchstart(l,c,C)}touchmove(l,c,C){this.singleTap.touchmove(l,c,C)}touchend(l,c,C){const M=this.singleTap.touchend(l,c,C);if(M){const R=l.timeStamp-this.lastTime<500,j=!this.lastTap||this.lastTap.dist(M)<30;if(R&&j||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class fr{constructor(l){this._tr=new Oa(l),this._zoomIn=new Bs({numTouches:1,numTaps:2}),this._zoomOut=new Bs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,c,C){this._zoomIn.touchstart(l,c,C),this._zoomOut.touchstart(l,c,C)}touchmove(l,c,C){this._zoomIn.touchmove(l,c,C),this._zoomOut.touchmove(l,c,C)}touchend(l,c,C){const M=this._zoomIn.touchend(l,c,C),R=this._zoomOut.touchend(l,c,C),j=this._tr;return M?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:j.zoom+1,around:j.unproject(M)},{originalEvent:l})}):R?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:$=>$.easeTo({duration:300,zoom:j.zoom-1,around:j.unproject(R)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class va{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const c=this._moveFunction(...l);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(l,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,c){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const M=Array.isArray(c)?c[0]:c;return!this._moved&&M.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(C,M))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&O.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vc={0:1,2:2};class Ia{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const c=O.mouseButton(l);this._eventButton=c}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(c,C){const M=Vc[C];return c.buttons===void 0||(c.buttons&M)!==M}(l,this._eventButton)}isValidEndEvent(l){return O.mouseButton(l)===this._eventButton}}class tc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class vd{constructor(l=new Ia({checkCorrectEvent:()=>!0}),c=new tc){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(l,c,C){return l instanceof MouseEvent?c(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?C(l):void 0}startMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(l){this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(l){return this._executeRelevantHandler(l,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const _d=T=>{T.mousedown=T.dragStart,T.mousemoveWindow=T.dragMove,T.mouseup=T.dragEnd,T.contextmenu=l=>{l.preventDefault()}};class Mi{constructor(l,c){this._clickTolerance=l.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,c,C){return this._calculateTransform(l,c,C)}touchmove(l,c,C){if(this._active){if(!this._shouldBePrevented(C.length))return l.preventDefault(),this._calculateTransform(l,c,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,c,C){this._calculateTransform(l,c,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,c,C){C.length>0&&(this._active=!0);const M=Cs(C,c),R=new o.P(0,0),j=new o.P(0,0);let $=0;for(const se in M){const xe=M[se],Oe=this._touches[se];Oe&&(R._add(xe),j._add(xe.sub(Oe)),$++,M[se]=xe)}if(this._touches=M,this._shouldBePrevented($)||!j.mag())return;const te=j.div($);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:R.div($),panDelta:te}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,c,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([c[0],c[1]]))}touchmove(l,c,C){if(!this._firstTwoTouches)return;l.preventDefault();const[M,R]=this._firstTwoTouches,j=Gl(C,c,M),$=Gl(C,c,R);if(!j||!$)return;const te=this._aroundCenter?null:j.add($).div(2);return this._move([j,$],te,l)}touchend(l,c,C){if(!this._firstTwoTouches)return;const[M,R]=this._firstTwoTouches,j=Gl(C,c,M),$=Gl(C,c,R);j&&$||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Gl(T,l,c){for(let C=0;C<T.length;C++)if(T[C].identifier===c)return l[C]}function bd(T,l){return Math.log(T/l)/Math.LN2}class xd extends Cd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,c){const C=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(bd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bd(this._distance,C),pinchAround:c}}}function MA(T,l){return 180*T.angleWith(l)/Math.PI}class nc extends Cd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,c,C){const M=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:MA(this._vector,M),pinchAround:c}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const c=25/(Math.PI*this._minDiameter)*360,C=MA(l,this._startVector);return Math.abs(C)<c}}function AA(T){return Math.abs(T.y)>Math.abs(T.x)}class Cc extends Cd{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,c,C){super.touchstart(l,c,C),this._currentTouchCount=C.length}_start(l){this._lastPoints=l,AA(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,c,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=l[0].sub(this._lastPoints[0]),R=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,R,C.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(M.y+R.y)/2*-.5}):void 0}gestureBeginsVertically(l,c,C){if(this._valid!==void 0)return this._valid;const M=l.mag()>=2,R=c.mag()>=2;if(!M&&!R)return;if(!M||!R)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const j=l.y>0==c.y>0;return AA(l)&&AA(c)&&j}}const Os={panStep:100,bearingStep:15,pitchStep:10};class bo{constructor(l){this._tr=new Oa(l);const c=Os;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let c=0,C=0,M=0,R=0,j=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?C=-1:(l.preventDefault(),R=-1);break;case 39:l.shiftKey?C=1:(l.preventDefault(),R=1);break;case 38:l.shiftKey?M=1:(l.preventDefault(),j=-1);break;case 40:l.shiftKey?M=-1:(l.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(C=0,M=0),{cameraAnimation:$=>{const te=this._tr;$.easeTo({duration:300,easeId:"keyboardHandler",easing:Cu,zoom:c?Math.round(te.zoom)+c*(l.shiftKey?2:1):te.zoom,bearing:te.bearing+C*this._bearingStep,pitch:te.pitch+M*this._pitchStep,offset:[-R*this._panStep,-j*this._panStep],center:te.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Cu(T){return T*(2-T)}const Ga=4.000244140625;class Ds{constructor(l,c){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=l,this._tr=new Oa(l),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let c=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const C=S.now(),M=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,c!==0&&c%Ga==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(M*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),l.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=l,this._delta-=c,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=O.mousePos(this._map.getCanvas(),l),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(o.N.convert(C.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const $=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=$),typeof this._targetZoom=="number"&&(this._targetZoom+=$)}if(this._delta!==0){const $=this._type==="wheel"&&Math.abs(this._delta)>Ga?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&te!==0&&(te=1/te);const se=typeof this._targetZoom!="number"?l.scale:o.aG(this._targetZoom);this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,o.a8(se*te))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,C=this._startZoom,M=this._easing;let R,j=!1;if(this._type==="wheel"&&C&&M){const $=S.now()-this._lastWheelEventTime,te=Math.min(($+5)/200,1),se=M(te);R=o.y.number(C,c,se),te<1?this._frameId||(this._frameId=!0):j=!0}else R=c,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=R,{noInertia:!0,needsRenderFrame:!j,zoomDelta:R-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let c=o.c8;if(this._prevEase){const C=this._prevEase,M=(S.now()-C.start)/C.duration,R=C.easing(M+.01)-C.easing(M),j=.27/Math.sqrt(R*R+1e-4)*.01,$=Math.sqrt(.0729-j*j);c=o.c6(j,$,.25,1)}return this._prevEase={start:S.now(),duration:l,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Zo{constructor(l,c){this._clickZoom=l,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ou{constructor(l){this._tr=new Oa(l),this.reset()}reset(){this._active=!1}dblclick(l,c){return l.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wu{constructor(){this._tap=new Bs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,c,C){if(!this._swipePoint)if(this._tapTime){const M=c[0],R=l.timeStamp-this._tapTime<500,j=this._tapPoint.dist(M)<30;R&&j?C.length>0&&(this._swipePoint=M,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(l,c,C)}touchmove(l,c,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const M=c[0],R=M.y-this._swipePoint.y;return this._swipePoint=M,l.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(l,c,C)}touchend(l,c,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const M=this._tap.touchend(l,c,C);M&&(this._tapTime=l.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bc{constructor(l,c,C){this._el=l,this._mousePan=c,this._touchPan=C}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nh{constructor(l,c,C,M){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=c,this._mousePitch=C,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class SA{constructor(l,c,C,M){this._el=l,this._touchZoom=c,this._touchRotate=C,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xc{constructor(l,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=O.create("div","maplibregl-cooperative-gesture-screen",l);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=c,this._container.appendChild(M);const R=document.createElement("div");R.className="maplibregl-mobile-message",R.textContent=C,this._container.appendChild(R),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(O.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,c){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:l,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const gs=T=>T.zoom||T.drag||T.roll||T.pitch||T.rotate;class da extends o.k{}function hr(T){return T.panDelta&&T.panDelta.mag()||T.zoomDelta||T.bearingDelta||T.pitchDelta||T.rollDelta}class Hr{constructor(l,c){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,R)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const j=M.type==="renderFrame"?void 0:M,$={needsRenderFrame:!1},te={},se={},xe=M.touches,Oe=xe?this._getMapTouches(xe):void 0,ke=Oe?O.touchPos(this._map.getCanvas(),Oe):O.mousePos(this._map.getCanvas(),M);for(const{handlerName:ut,handler:ot,allowed:At}of this._handlers){if(!ot.isEnabled())continue;let mt;this._blockedByActive(se,At,ut)?ot.reset():ot[R||M.type]&&(mt=ot[R||M.type](M,ke,Oe),this.mergeHandlerResult($,te,mt,ut,j),mt&&mt.needsRenderFrame&&this._triggerRenderFrame()),(mt||ot.isActive())&&(se[ut]=ot)}const qe={};for(const ut in this._previousActiveHandlers)se[ut]||(qe[ut]=j);this._previousActiveHandlers=se,(Object.keys(qe).length||hr($))&&(this._changes.push([$,te,qe]),this._triggerRenderFrame()),(Object.keys(se).length||hr($))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ve}=$;Ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ve(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new et(l),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,R,j]of this._listeners)O.addEventListener(M,R,M===document?this.handleWindowEvent:this.handleEvent,j)}destroy(){for(const[l,c,C]of this._listeners)O.removeEventListener(l,c,l===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(l){const c=this._map,C=c.getCanvasContainer();this._add("mapEvent",new yd(c,l));const M=c.boxZoom=new Ws(c,l);this._add("boxZoom",M),l.interactive&&l.boxZoom&&M.enable();const R=c.cooperativeGestures=new xc(c,l.cooperativeGestures);this._add("cooperativeGestures",R),l.cooperativeGestures&&R.enable();const j=new fr(c),$=new ou(c);c.doubleClickZoom=new Zo($,j),this._add("tapZoom",j),this._add("clickZoom",$),l.interactive&&l.doubleClickZoom&&c.doubleClickZoom.enable();const te=new Wu;this._add("tapDragZoom",te);const se=c.touchPitch=new Cc(c);this._add("touchPitch",se),l.interactive&&l.touchPitch&&c.touchPitch.enable(l.touchPitch);const xe=()=>c.project(c.getCenter()),Oe=function({enable:kt,clickTolerance:Pt,aroundCenter:Ft=!0,minPixelCenterThreshold:Tt=100,rotateDegreesPerPixelMoved:Jt=.8},Vt){const vn=new Ia({checkCorrectEvent:_n=>O.mouseButton(_n)===0&&_n.ctrlKey||O.mouseButton(_n)===2&&!_n.ctrlKey});return new va({clickTolerance:Pt,move:(_n,mn)=>{const Bn=Vt();if(Ft&&Math.abs(Bn.y-_n.y)>Tt)return{bearingDelta:o.c7(new o.P(_n.x,mn.y),mn,Bn)};let Un=(mn.x-_n.x)*Jt;return Ft&&mn.y<Bn.y&&(Un=-Un),{bearingDelta:Un}},moveStateManager:vn,enable:kt,assignEvents:_d})}(l,xe),ke=function({enable:kt,clickTolerance:Pt,pitchDegreesPerPixelMoved:Ft=-.5}){const Tt=new Ia({checkCorrectEvent:Jt=>O.mouseButton(Jt)===0&&Jt.ctrlKey||O.mouseButton(Jt)===2});return new va({clickTolerance:Pt,move:(Jt,Vt)=>({pitchDelta:(Vt.y-Jt.y)*Ft}),moveStateManager:Tt,enable:kt,assignEvents:_d})}(l),qe=function({enable:kt,clickTolerance:Pt,rollDegreesPerPixelMoved:Ft=.3},Tt){const Jt=new Ia({checkCorrectEvent:Vt=>O.mouseButton(Vt)===2&&Vt.ctrlKey});return new va({clickTolerance:Pt,move:(Vt,vn)=>{const _n=Tt();let mn=(vn.x-Vt.x)*Ft;return vn.y<_n.y&&(mn=-mn),{rollDelta:mn}},moveStateManager:Jt,enable:kt,assignEvents:_d})}(l,xe);c.dragRotate=new nh(l,Oe,ke,qe),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",ke,["mouseRotate","mouseRoll"]),this._add("mouseRoll",qe,["mousePitch"]),l.interactive&&l.dragRotate&&c.dragRotate.enable();const Ve=function({enable:kt,clickTolerance:Pt}){const Ft=new Ia({checkCorrectEvent:Tt=>O.mouseButton(Tt)===0&&!Tt.ctrlKey});return new va({clickTolerance:Pt,move:(Tt,Jt)=>({around:Jt,panDelta:Jt.sub(Tt)}),activateOnStart:!0,moveStateManager:Ft,enable:kt,assignEvents:_d})}(l),ut=new Mi(l,c);c.dragPan=new bc(C,Ve,ut),this._add("mousePan",Ve),this._add("touchPan",ut,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&c.dragPan.enable(l.dragPan);const ot=new nc,At=new xd;c.touchZoomRotate=new SA(C,At,ot,te),this._add("touchRotate",ot,["touchPan","touchZoom"]),this._add("touchZoom",At,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&c.touchZoomRotate.enable(l.touchZoomRotate);const mt=c.scrollZoom=new Ds(c,()=>this._triggerRenderFrame());this._add("scrollZoom",mt,["mousePan"]),l.interactive&&l.scrollZoom&&c.scrollZoom.enable(l.scrollZoom);const St=c.keyboard=new bo(c);this._add("keyboard",St),l.interactive&&l.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new th(c))}_add(l,c,C){this._handlers.push({handlerName:l,handler:c,allowed:C}),this._handlersById[l]=c}stop(l){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gs(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,c,C){for(const M in l)if(M!==C&&(!c||c.indexOf(M)<0))return!0;return!1}_getMapTouches(l){const c=[];for(const C of l)this._el.contains(C.target)&&c.push(C);return c}mergeHandlerResult(l,c,C,M,R){if(!C)return;o.e(l,C);const j={handlerName:M,originalEvent:C.originalEvent||R};C.zoomDelta!==void 0&&(c.zoom=j),C.panDelta!==void 0&&(c.drag=j),C.rollDelta!==void 0&&(c.roll=j),C.pitchDelta!==void 0&&(c.pitch=j),C.bearingDelta!==void 0&&(c.rotate=j)}_applyChanges(){const l={},c={},C={};for(const[M,R,j]of this._changes)M.panDelta&&(l.panDelta=(l.panDelta||new o.P(0,0))._add(M.panDelta)),M.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(l.rollDelta=(l.rollDelta||0)+M.rollDelta),M.around!==void 0&&(l.around=M.around),M.pinchAround!==void 0&&(l.pinchAround=M.pinchAround),M.noInertia&&(l.noInertia=M.noInertia),o.e(c,R),o.e(C,j);this._updateMapTransform(l,c,C),this._changes=[]}_updateMapTransform(l,c,C){const M=this._map,R=M._getTransformForUpdate(),j=M.terrain;if(!(hr(l)||j&&this._terrainMovement))return this._fireEvents(c,C,!0);M._stop(!0);let{panDelta:$,zoomDelta:te,bearingDelta:se,pitchDelta:xe,rollDelta:Oe,around:ke,pinchAround:qe}=l;qe!==void 0&&(ke=qe),ke=ke||M.transform.centerPoint,j&&!R.isPointOnMapSurface(ke)&&(ke=R.centerPoint);const Ve={panDelta:$,zoomDelta:te,rollDelta:Oe,pitchDelta:xe,bearingDelta:se,around:ke};this._map.cameraHelper.useGlobeControls&&!R.isPointOnMapSurface(ke)&&(ke=R.centerPoint);const ut=ke.distSqr(R.centerPoint)<.01?R.center:R.screenPointToLocation($?ke.sub($):ke);j?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ve,R),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?R.setCenter(R.screenPointToLocation(R.centerPoint.sub($))):this._map.cameraHelper.handleMapControlsPan(Ve,R,ut):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Ve,R,ut))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ve,R),this._map.cameraHelper.handleMapControlsPan(Ve,R,ut)),M._applyUpdatedTransform(R),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(c,C,!0)}_fireEvents(l,c,C){const M=gs(this._eventsInProgress),R=gs(l),j={};for(const Oe in l){const{originalEvent:ke}=l[Oe];this._eventsInProgress[Oe]||(j[`${Oe}start`]=ke),this._eventsInProgress[Oe]=l[Oe]}!M&&R&&this._fireEvent("movestart",R.originalEvent);for(const Oe in j)this._fireEvent(Oe,j[Oe]);R&&this._fireEvent("move",R.originalEvent);for(const Oe in l){const{originalEvent:ke}=l[Oe];this._fireEvent(Oe,ke)}const $={};let te;for(const Oe in this._eventsInProgress){const{handlerName:ke,originalEvent:qe}=this._eventsInProgress[Oe];this._handlersById[ke].isActive()||(delete this._eventsInProgress[Oe],te=c[ke]||qe,$[`${Oe}end`]=te)}for(const Oe in $)this._fireEvent(Oe,$[Oe]);const se=gs(this._eventsInProgress),xe=(M||R)&&!se;if(xe&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Oe=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Oe.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Oe)}if(C&&xe){this._updatingCamera=!0;const Oe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ke=qe=>qe!==0&&-this._bearingSnap<qe&&qe<this._bearingSnap;!Oe||!Oe.essential&&S.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:te})),ke(this._map.getBearing())&&this._map.resetNorth()):(ke(Oe.bearing||this._map.getBearing())&&(Oe.bearing=0),Oe.freezeElevation=!0,this._map.easeTo(Oe,{originalEvent:te})),this._updatingCamera=!1}}_fireEvent(l,c){this._map.fire(new o.k(l,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new da("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Qu extends o.E{constructor(l,c,C){super(),this._renderFrameCallback=()=>{const M=Math.min((S.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=C.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(l,c){l.apply(this.transform),this.transform=l,this.cameraHelper=c}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(l,c){return this.jumpTo({center:l},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,c){return this.jumpTo({elevation:l},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,c,C){return l=o.P.convert(l).mult(-1),this.panTo(this.transform.center,o.e({offset:l},c),C)}panTo(l,c,C){return this.easeTo(o.e({center:l},c),C)}getZoom(){return this.transform.zoom}setZoom(l,c){return this.jumpTo({zoom:l},c),this}zoomTo(l,c,C){return this.easeTo(o.e({zoom:l},c),C)}zoomIn(l,c){return this.zoomTo(this.getZoom()+1,l,c),this}zoomOut(l,c){return this.zoomTo(this.getZoom()-1,l,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,c){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)).fire(new o.k("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(l,c){return this.jumpTo({bearing:l},c),this}getPadding(){return this.transform.padding}setPadding(l,c){return this.jumpTo({padding:l},c),this}rotateTo(l,c,C){return this.easeTo(o.e({bearing:l},c),C)}resetNorth(l,c){return this.rotateTo(0,o.e({duration:1e3},l),c),this}resetNorthPitch(l,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},l),c),this}snapToNorth(l,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,c):this}getPitch(){return this.transform.pitch}setPitch(l,c){return this.jumpTo({pitch:l},c),this}getRoll(){return this.transform.roll}setRoll(l,c){return this.jumpTo({roll:l},c),this}cameraForBounds(l,c){l=Ut.convert(l).adjustAntiMeridian();const C=c&&c.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),C,c)}_cameraForBoxAndBearing(l,c,C,M){const R={top:0,bottom:0,right:0,left:0};if(typeof(M=o.e({padding:R,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const se=M.padding;M.padding={top:se,bottom:se,right:se,left:se}}const j=o.e(R,M.padding);M.padding=j;const $=this.transform,te=new Ut(l,c);return this.cameraHelper.cameraForBoxAndBearing(M,j,te,C,$)}fitBounds(l,c,C){return this._fitInternal(this.cameraForBounds(l,c),c,C)}fitScreenCoordinates(l,c,C,M,R){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(l)),this.transform.screenPointToLocation(o.P.convert(c)),C,M),M,R)}_fitInternal(l,c,C){return l?(delete(c=o.e(l,c)).padding,c.linear?this.easeTo(c,C):this.flyTo(c,C)):this}jumpTo(l,c){this.stop();const C=this._getTransformForUpdate();let M=!1,R=!1,j=!1;const $=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,l);const te=C.zoom!==$;return"elevation"in l&&C.elevation!==+l.elevation&&C.setElevation(+l.elevation),"bearing"in l&&C.bearing!==+l.bearing&&(M=!0,C.setBearing(+l.bearing)),"pitch"in l&&C.pitch!==+l.pitch&&(R=!0,C.setPitch(+l.pitch)),"roll"in l&&C.roll!==+l.roll&&(j=!0,C.setRoll(+l.roll)),l.padding==null||C.isPaddingEqual(l.padding)||C.setPadding(l.padding),this._applyUpdatedTransform(C),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),te&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),M&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),R&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),j&&this.fire(new o.k("rollstart",c)).fire(new o.k("roll",c)).fire(new o.k("rollend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(l,c,C,M=0){const R=o.Y.fromLngLat(l,c),j=o.Y.fromLngLat(C,M),$=j.x-R.x,te=j.y-R.y,se=j.z-R.z,xe=Math.hypot($,te,se);if(xe===0)throw new Error("Can't calculate camera options with same From and To");const Oe=Math.hypot($,te),ke=o.a8(this.transform.cameraToCenterDistance/xe/this.transform.tileSize),qe=180*Math.atan2($,-te)/Math.PI;let Ve=180*Math.acos(Oe/xe)/Math.PI;return Ve=se<0?90-Ve:90+Ve,{center:j.toLngLat(),elevation:M,zoom:ke,pitch:Ve,bearing:qe}}calculateCameraOptionsFromCameraLngLatAltRotation(l,c,C,M,R){const j=this.transform.calculateCenterFromCameraLngLatAlt(l,c,C,M);return{center:j.center,elevation:j.elevation,zoom:j.zoom,bearing:C,pitch:M,roll:R}}easeTo(l,c){this._stop(!1,l.easeId),((l=o.e({offset:[0,0],duration:500,easing:o.c8},l)).animate===!1||!l.essential&&S.prefersReducedMotion)&&(l.duration=0);const C=this._getTransformForUpdate(),M=this.getBearing(),R=C.pitch,j=C.roll,$="bearing"in l?this._normalizeBearing(l.bearing,M):M,te="pitch"in l?+l.pitch:R,se="roll"in l?this._normalizeBearing(l.roll,j):j,xe="padding"in l?l.padding:C.padding,Oe=o.P.convert(l.offset);let ke,qe;l.around&&(ke=o.N.convert(l.around),qe=C.locationToScreenPoint(ke));const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ut=this.cameraHelper.handleEaseTo(C,{bearing:$,pitch:te,roll:se,padding:xe,around:ke,aroundPoint:qe,offsetAsPoint:Oe,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||M!==$,this._pitching=this._pitching||te!==R,this._rolling=this._rolling||se!==j,this._padding=!C.isPaddingEqual(xe),this._zooming=this._zooming||ut.isZooming,this._easeId=l.easeId,this._prepareEase(c,l.noMoveStart,Ve),this.terrain&&this._prepareElevation(ut.elevationCenter),this._ease(ot=>{ut.easeFunc(ot),this.terrain&&!l.freezeElevation&&this._updateElevation(ot),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},ot=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ot)},l),this}_prepareEase(l,c,C={}){this._moving=!0,c||C.moving||this.fire(new o.k("movestart",l)),this._zooming&&!C.zooming&&this.fire(new o.k("zoomstart",l)),this._rotating&&!C.rotating&&this.fire(new o.k("rotatestart",l)),this._pitching&&!C.pitching&&this.fire(new o.k("pitchstart",l)),this._rolling&&!C.rolling&&this.fire(new o.k("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&c!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(C-(c-(C*l+this._elevationStart))/(1-l)),this._elevationTarget=c}this.transform.setElevation(o.y.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const c=l.getCameraLngLat(),C=l.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(c,l.zoom):0;if(C<M){const R=this.calculateCameraOptionsFromTo(c,M,l.center,l.elevation);return{pitch:R.pitch,zoom:R.zoom}}return{}}_applyUpdatedTransform(l){const c=[];if(c.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&c.push(M=>this.transformCameraUpdate(M)),!c.length)return;const C=l.clone();for(const M of c){const R=C.clone(),{center:j,zoom:$,roll:te,pitch:se,bearing:xe,elevation:Oe}=M(R);j&&R.setCenter(j),Oe!==void 0&&R.setElevation(Oe),$!==void 0&&R.setZoom($),te!==void 0&&R.setRoll(te),se!==void 0&&R.setPitch(se),xe!==void 0&&R.setBearing(xe),C.apply(R)}this.transform.apply(C)}_fireMoveEvents(l){this.fire(new o.k("move",l)),this._zooming&&this.fire(new o.k("zoom",l)),this._rotating&&this.fire(new o.k("rotate",l)),this._pitching&&this.fire(new o.k("pitch",l)),this._rolling&&this.fire(new o.k("roll",l))}_afterEase(l,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const C=this._zooming,M=this._rotating,R=this._pitching,j=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new o.k("zoomend",l)),M&&this.fire(new o.k("rotateend",l)),R&&this.fire(new o.k("pitchend",l)),j&&this.fire(new o.k("rollend",l)),this.fire(new o.k("moveend",l))}flyTo(l,c){if(!l.essential&&S.prefersReducedMotion){const mn=o.M(l,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(mn,c)}this.stop(),l=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.c8},l);const C=this._getTransformForUpdate(),M=C.bearing,R=C.pitch,j=C.roll,$=C.padding,te="bearing"in l?this._normalizeBearing(l.bearing,M):M,se="pitch"in l?+l.pitch:R,xe="roll"in l?this._normalizeBearing(l.roll,j):j,Oe="padding"in l?l.padding:C.padding,ke=o.P.convert(l.offset);let qe=C.centerPoint.add(ke);const Ve=C.screenPointToLocation(qe),ut=this.cameraHelper.handleFlyTo(C,{bearing:te,pitch:se,roll:xe,padding:Oe,locationAtOffset:Ve,offsetAsPoint:ke,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let ot=l.curve;const At=Math.max(C.width,C.height),mt=At/ut.scaleOfZoom,St=ut.pixelPathLength;typeof ut.scaleOfMinZoom=="number"&&(ot=Math.sqrt(At/ut.scaleOfMinZoom/St*2));const kt=ot*ot;function Pt(mn){const Bn=(mt*mt-At*At+(mn?-1:1)*kt*kt*St*St)/(2*(mn?mt:At)*kt*St);return Math.log(Math.sqrt(Bn*Bn+1)-Bn)}function Ft(mn){return(Math.exp(mn)-Math.exp(-mn))/2}function Tt(mn){return(Math.exp(mn)+Math.exp(-mn))/2}const Jt=Pt(!1);let Vt=function(mn){return Tt(Jt)/Tt(Jt+ot*mn)},vn=function(mn){return At*((Tt(Jt)*(Ft(Bn=Jt+ot*mn)/Tt(Bn))-Ft(Jt))/kt)/St;var Bn},_n=(Pt(!0)-Jt)/ot;if(Math.abs(St)<2e-6||!isFinite(_n)){if(Math.abs(At-mt)<1e-6)return this.easeTo(l,c);const mn=mt<At?-1:1;_n=Math.abs(Math.log(mt/At))/ot,vn=()=>0,Vt=Bn=>Math.exp(mn*ot*Bn)}return l.duration="duration"in l?+l.duration:1e3*_n/("screenSpeed"in l?+l.screenSpeed/ot:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=M!==te,this._pitching=se!==R,this._rolling=xe!==j,this._padding=!C.isPaddingEqual(Oe),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ut.targetCenter),this._ease(mn=>{const Bn=mn*_n,Un=1/Vt(Bn),wn=vn(Bn);this._rotating&&C.setBearing(o.y.number(M,te,mn)),this._pitching&&C.setPitch(o.y.number(R,se,mn)),this._rolling&&C.setRoll(o.y.number(j,xe,mn)),this._padding&&(C.interpolatePadding($,Oe,mn),qe=C.centerPoint.add(ke)),ut.easeFunc(mn,Un,wn,qe),this.terrain&&!l.freezeElevation&&this._updateElevation(mn),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,c){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,c)}return l||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(l,c,C){C.animate===!1||C.duration===0?(l(1),c()):(this._easeStart=S.now(),this._easeOptions=C,this._onEaseFrame=l,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,c){l=o.aI(l,-180,180);const C=Math.abs(l-c);return Math.abs(l-360-c)<C&&(l-=360),Math.abs(l+360-c)<C&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(l),this.transform.tileZoom):null}}const rc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class bu{constructor(l=rc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(l,c){const C=this._map._getUIString(`AttributionControl.${c}`);l.title=C,l.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const c=this._map.style.sourceCaches;for(const M in c){const R=c[M];if(R.used||R.usedForTerrain){const j=R.getSource();j.attribution&&l.indexOf(j.attribution)<0&&l.push(j.attribution)}}l=l.filter(M=>String(M).trim()),l.sort((M,R)=>M.length-R.length),l=l.filter((M,R)=>{for(let j=R+1;j<l.length;j++)if(l[j].indexOf(M)>=0)return!1;return!0});const C=l.join(" | ");C!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=O.sanitize(C),l.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class bs{constructor(l={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const C=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const c=O.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Lf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const c=++this._id;return this._queue.push({callback:l,id:c,cancelled:!1}),c}remove(l){const c=this._currentlyRunning,C=c?this._queue.concat(c):this._queue;for(const M of C)if(M.id===l)return void(M.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const C of c)if(!C.cancelled&&(C.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var su=o.aA([{name:"a_pos3d",type:"Int16",components:3}]);class Ff extends o.E{constructor(l){super(),this._lastTilesetChange=S.now(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,c){this.sourceCache.update(l,c),this._renderableTilesKeys=[];const C={};for(const M of Ee(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),o.bL(M.terrainRttPosMatrix32f,0,o.X,o.X,0,0,1),this._tiles[M.key]=new me(M,this.tileSize),this._lastTilesetChange=S.now());for(const M in this._tiles)C[M]||delete this._tiles[M]}freeRtt(l){for(const c in this._tiles){const C=this._tiles[c];(!l||C.tileID.equals(l)||C.tileID.isChildOf(l)||l.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const c={};for(const C of this._renderableTilesKeys){const M=this._tiles[C].tileID,R=l.clone(),j=o.a$();if(M.canonical.equals(l.canonical))o.bL(j,0,o.X,o.X,0,0,1);else if(M.canonical.isChildOf(l.canonical)){const $=M.canonical.z-l.canonical.z,te=M.canonical.x-(M.canonical.x>>$<<$),se=M.canonical.y-(M.canonical.y>>$<<$),xe=o.X>>$;o.bL(j,0,xe,xe,0,0,1),o.J(j,j,[-te*xe,-se*xe,0])}else{if(!l.canonical.isChildOf(M.canonical))continue;{const $=l.canonical.z-M.canonical.z,te=l.canonical.x-(l.canonical.x>>$<<$),se=l.canonical.y-(l.canonical.y>>$<<$),xe=o.X>>$;o.bL(j,0,o.X,o.X,0,0,1),o.J(j,j,[te*xe,se*xe,0]),o.K(j,j,[1/2**$,1/2**$,0])}}R.terrainRttPosMatrix32f=new Float32Array(j),c[C]=R}return c}getSourceTile(l,c){const C=this.sourceCache._source;let M=l.overscaledZ-this.deltaZoom;if(M>C.maxzoom&&(M=C.maxzoom),M<C.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(M).key);let R=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!R||!R.dem)&&c)for(;M>=C.minzoom&&(!R||!R.dem);)R=this.sourceCache.getTileByID(l.scaledTo(M--).key);return R}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}}class xu{constructor(l,c,C){this._meshCache={},this.painter=l,this.sourceCache=new Ff(c),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,c,C,M=o.X){var R;if(!(c>=0&&c<M&&C>=0&&C<M))return 0;const j=this.getTerrainData(l),$=(R=j.tile)===null||R===void 0?void 0:R.dem;if(!$)return 0;const te=o.c9([],[c/M*o.X,C/M*o.X],j.u_terrain_matrix),se=[te[0]*$.dim,te[1]*$.dim],xe=Math.floor(se[0]),Oe=Math.floor(se[1]),ke=se[0]-xe,qe=se[1]-Oe;return $.get(xe,Oe)*(1-ke)*(1-qe)+$.get(xe+1,Oe)*ke*(1-qe)+$.get(xe,Oe+1)*(1-ke)*qe+$.get(xe+1,Oe+1)*ke*qe}getElevationForLngLatZoom(l,c){if(!o.ca(c,l.wrap()))return 0;const{tileID:C,mercatorX:M,mercatorY:R}=this._getOverscaledTileIDFromLngLatZoom(l,c);return this.getElevation(C,M%o.X,R%o.X,o.X)}getElevation(l,c,C,M=o.X){return this.getDEMElevation(l,c,C,M)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const M=this.painter.context,R=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ie(M,R,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ie(M,new o.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.aq([])}const c=this.sourceCache.getSourceTile(l,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const M=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new ie(M,c.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),c.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const C=c&&c+c.tileID.key+l.key;if(C&&!this._demMatrixCache[C]){const M=this.sourceCache.sourceCache._source.maxzoom;let R=l.canonical.z-c.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=M?R=l.canonical.z-M:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const j=l.canonical.x-(l.canonical.x>>R<<R),$=l.canonical.y-(l.canonical.y>>R<<R),te=o.cb(new Float64Array(16),[1/(o.X<<R),1/(o.X<<R),0]);o.J(te,te,[j*o.X,$*o.X,0]),this._demMatrixCache[l.key]={matrix:te,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(l){const c=this.painter,C=c.width/devicePixelRatio,M=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ie(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ie(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(C,M,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,C,M))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let R=0,j=0;R<this._coordsTextureSize;R++)for(let $=0;$<this._coordsTextureSize;$++,j+=4)c[j+0]=255&$,c[j+1]=255&R,c[j+2]=$>>8<<4|R>>8,c[j+3]=0;const C=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),M=new ie(l,C,l.gl.RGBA,{premultiply:!1});return M.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),C=this.painter.context,M=C.gl,R=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),j=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),$=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(R,$-j-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null);const te=c[0]+(c[2]>>4<<8),se=c[1]+((15&c[2])<<8),xe=this.coordsIndex[255-c[3]],Oe=xe&&this.sourceCache.getTileByID(xe);if(!Oe)return null;const ke=this._coordsTextureSize,qe=(1<<Oe.tileID.canonical.z)*ke;return new o.Y((Oe.tileID.canonical.x*ke+te)/qe+Oe.tileID.wrap,(Oe.tileID.canonical.y*ke+se)/qe,this.getElevation(Oe.tileID,te,se,ke))}depthAtPoint(l){const c=new Uint8Array(4),C=this.painter.context,M=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(l){var c;const C=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,M=C&&l.canonical.y===0,R=C&&l.canonical.y===(1<<l.canonical.z)-1,j=`m_${M?"n":""}_${R?"s":""}`;if(this._meshCache[j])return this._meshCache[j];const $=this.painter.context,te=new o.cc,se=new o.aE,xe=this.meshSize,Oe=o.X/xe,ke=xe*xe;for(let Tt=0;Tt<=xe;Tt++)for(let Jt=0;Jt<=xe;Jt++)te.emplaceBack(Jt*Oe,Tt*Oe,0);for(let Tt=0;Tt<ke;Tt+=xe+1)for(let Jt=0;Jt<xe;Jt++)se.emplaceBack(Jt+Tt,xe+Jt+Tt+1,xe+Jt+Tt+2),se.emplaceBack(Jt+Tt,xe+Jt+Tt+2,Jt+Tt+1);const qe=te.length,Ve=qe+(xe+1),ut=(xe+1)*xe,ot=M?o.b6:0,At=M?0:1,mt=R?o.b7:o.X,St=R?0:1;for(let Tt=0;Tt<=xe;Tt++)te.emplaceBack(Tt*Oe,ot,At);for(let Tt=0;Tt<=xe;Tt++)te.emplaceBack(Tt*Oe,mt,St);for(let Tt=0;Tt<xe;Tt++)se.emplaceBack(ut+Tt,Ve+Tt,Ve+Tt+1),se.emplaceBack(ut+Tt,Ve+Tt+1,ut+Tt+1),se.emplaceBack(0+Tt,qe+Tt+1,qe+Tt),se.emplaceBack(0+Tt,0+Tt+1,qe+Tt+1);const kt=te.length,Pt=kt+2*(xe+1);for(const Tt of[0,1])for(let Jt=0;Jt<=xe;Jt++)for(const Vt of[0,1])te.emplaceBack(Tt*o.X,Jt*Oe,Vt);for(let Tt=0;Tt<2*xe;Tt+=2)se.emplaceBack(kt+Tt,kt+Tt+1,kt+Tt+3),se.emplaceBack(kt+Tt,kt+Tt+3,kt+Tt+2),se.emplaceBack(Pt+Tt,Pt+Tt+3,Pt+Tt+1),se.emplaceBack(Pt+Tt,Pt+Tt+2,Pt+Tt+3);const Ft=new Xa($.createVertexBuffer(te,su.members),$.createIndexBuffer(se),o.aD.simpleSegment(0,0,te.length,se.length));return this._meshCache[j]=Ft,Ft}getMeshFrameDelta(l){return 2*Math.PI*o.bo/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,c){var C;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(l,c);return(C=this.getMinMaxElevation(M).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(l){const c=this.getTerrainData(l).tile,C={minElevation:null,maxElevation:null};return c&&c.dem&&(C.minElevation=c.dem.min*this.exaggeration,C.maxElevation=c.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(l,c){const C=o.Y.fromLngLat(l.wrap()),M=(1<<c)*o.X,R=C.x*M,j=C.y*M,$=Math.floor(R/o.X),te=Math.floor(j/o.X);return{tileID:new o.S(c,0,c,$,te),mercatorX:R,mercatorY:j}}}class Po{constructor(l,c,C){this._context=l,this._size=c,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(C.texture),{id:l,fbo:c,texture:C,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>l.id!==c),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const Is={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class rh{constructor(l,c){this.painter=l,this.terrain=c,this.pool=new Po(l.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(C=>!l._layers[C].isHidden(c)),this._coordsAscending={};for(const C in l.sourceCaches){this._coordsAscending[C]={};const M=l.sourceCaches[C].getVisibleCoordinates();for(const R of M){const j=this.terrain.sourceCache.getTerrainCoords(R);for(const $ in j)this._coordsAscending[C][$]||(this._coordsAscending[C][$]=[]),this._coordsAscending[C][$].push(j[$])}}this._coordsAscendingStr={};for(const C of l._order){const M=l._layers[C],R=M.source;if(Is[M.type]&&!this._coordsAscendingStr[R]){this._coordsAscendingStr[R]={};for(const j in this._coordsAscending[R])this._coordsAscendingStr[R][j]=this._coordsAscending[R][j].map($=>$.key).sort().join()}}for(const C of this._renderableTiles)for(const M in this._coordsAscendingStr){const R=this._coordsAscendingStr[M][C.tileID.key];R&&R!==C.rttCoords[M]&&(C.rtt=[])}}renderLayer(l,c){if(l.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),M=l.type,R=this.painter,j=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(Is[M]&&(this._prevType&&Is[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(l.id),!j))return!0;if(Is[this._prevType]||Is[M]&&j){this._prevType=M;const $=this._stacks.length-1,te=this._stacks[$]||[];for(const se of this._renderableTiles){if(this.pool.isFull()&&(zu(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(se),se.rtt[$]){const Oe=this.pool.getObjectForId(se.rtt[$].id);if(Oe.stamp===se.rtt[$].stamp){this.pool.useObject(Oe);continue}}const xe=this.pool.getOrCreateFreeObject();this.pool.useObject(xe),this.pool.stampObject(xe),se.rtt[$]={id:xe.id,stamp:xe.stamp},R.context.bindFramebuffer.set(xe.fbo.framebuffer),R.context.clear({color:o.b4.transparent,stencil:0}),R.currentStencilSource=void 0;for(let Oe=0;Oe<te.length;Oe++){const ke=R.style._layers[te[Oe]],qe=ke.source?this._coordsAscending[ke.source][se.tileID.key]:[se.tileID];R.context.viewport.set([0,0,xe.fbo.width,xe.fbo.height]),R._renderTileClippingMasks(ke,qe,!0),R.renderLayer(R,R.style.sourceCaches[ke.source],ke,qe,C),ke.source&&(se.rttCoords[ke.source]=this._coordsAscendingStr[ke.source][se.tileID.key])}}return zu(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),Is[M]}return!1}}const EA={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ih=d,BA={hash:!1,interactive:!0,bearingSnap:7,attributionControl:rc,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Qs={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class wc{constructor(l,c,C=!1){this.mousedown=R=>{this.startMove(R,O.mousePos(this.element,R)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=R=>{this.move(R,O.mousePos(this.element,R))},this.mouseup=R=>{this._rotatePitchHanlder.dragEnd(R),this.offTemp()},this.touchstart=R=>{R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,R.targetTouches)[0],this.startMove(R,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=R=>{R.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,R.targetTouches)[0],this.move(R,this._lastPos))},this.touchend=R=>{R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const M=new vd;this._rotatePitchHanlder=new va({clickTolerance:3,move:(R,j)=>{const $=c.getBoundingClientRect(),te=new o.P(($.bottom-$.top)/2,($.right-$.left)/2);return{bearingDelta:o.c7(new o.P(R.x,j.y),j,te),pitchDelta:C?-.5*(j.y-R.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=l,O.addEventListener(c,"mousedown",this.mousedown),O.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(c,"touchcancel",this.reset)}startMove(l,c){this._rotatePitchHanlder.dragStart(l,c),O.disableDrag()}move(l,c){const C=this.map,{bearingDelta:M,pitchDelta:R}=this._rotatePitchHanlder.dragMove(l,c)||{};M&&C.setBearing(C.getBearing()+M),R&&C.setPitch(C.getPitch()+R)}off(){const l=this.element;O.removeEventListener(l,"mousedown",this.mousedown),O.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Wl;function hl(T,l,c){const C=new o.N(T.lng,T.lat);if(T=new o.N(T.lng,T.lat),l){const M=new o.N(T.lng-360,T.lat),R=new o.N(T.lng+360,T.lat),j=c.locationToScreenPoint(T).distSqr(l);c.locationToScreenPoint(M).distSqr(l)<j?T=M:c.locationToScreenPoint(R).distSqr(l)<j&&(T=R)}for(;Math.abs(T.lng-c.center.lng)>180;){const M=c.locationToScreenPoint(T);if(M.x>=0&&M.y>=0&&M.x<=c.width&&M.y<=c.height)break;T.lng>c.center.lng?T.lng-=360:T.lng+=360}return T.lng!==C.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(T))?T:C}const qu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Mc(T,l,c){const C=T.classList;for(const M in qu)C.remove(`maplibregl-${c}-anchor-${M}`);C.add(`maplibregl-${c}-anchor-${l}`)}class wu extends o.E{constructor(l){if(super(),this._onKeyPress=c=>{const C=c.code,M=c.charCode||c.keyCode;C!=="Space"&&C!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=c=>{const C=c.originalEvent.target,M=this._element;this._popup&&(C===M||M.contains(C))&&this.togglePopup()},this._update=c=>{var C;if(!this._map)return;const M=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!M)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?hl(this._lngLat,this._flatPos,this._map.transform):(C=this._lngLat)===null||C===void 0?void 0:C.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let R="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?R=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(R=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let j="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?j="rotateX(0deg)":this._pitchAlignment==="map"&&(j=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${qu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${j} ${R}`),S.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(l==null?void 0:l.opacity,l==null?void 0:l.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=o.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div");const c=O.createNS("http://www.w3.org/2000/svg","svg"),C=41,M=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${C}px`),c.setAttributeNS(null,"width",`${M}px`),c.setAttributeNS(null,"viewBox",`0 0 ${M} ${C}`);const R=O.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");const j=O.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill-rule","nonzero");const $=O.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(3.0, 29.0)"),$.setAttributeNS(null,"fill","#000000");const te=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const At of te){const mt=O.createNS("http://www.w3.org/2000/svg","ellipse");mt.setAttributeNS(null,"opacity","0.04"),mt.setAttributeNS(null,"cx","10.5"),mt.setAttributeNS(null,"cy","5.80029008"),mt.setAttributeNS(null,"rx",At.rx),mt.setAttributeNS(null,"ry",At.ry),$.appendChild(mt)}const se=O.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const xe=O.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(xe);const Oe=O.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"fill","#000000");const ke=O.createNS("http://www.w3.org/2000/svg","path");ke.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Oe.appendChild(ke);const qe=O.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),qe.setAttributeNS(null,"fill","#FFFFFF");const Ve=O.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ut=O.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#000000"),ut.setAttributeNS(null,"opacity","0.25"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962");const ot=O.createNS("http://www.w3.org/2000/svg","circle");ot.setAttributeNS(null,"fill","#FFFFFF"),ot.setAttributeNS(null,"cx","5.5"),ot.setAttributeNS(null,"cy","5.5"),ot.setAttributeNS(null,"r","5.4999962"),Ve.appendChild(ut),Ve.appendChild(ot),j.appendChild($),j.appendChild(se),j.appendChild(Oe),j.appendChild(qe),j.appendChild(Ve),c.appendChild(j),c.setAttributeNS(null,"height",C*this._scale+"px"),c.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Mc(this._element,this._anchor,"marker"),l&&l.className)for(const c of l.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.N.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const M=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var c,C;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const Oe=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Oe&&(this._element.style.opacity=Oe))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,R=M.terrain.depthAtPoint(this._pos),j=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,j)-R<.006)return void(this._element.style.opacity=this._opacity);const $=-this._offset.y/M.transform.pixelsPerMeter,te=Math.sin(M.getPitch()*Math.PI/180)*$,se=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),xe=M.transform.lngLatToCameraDepth(this._lngLat,j+te)-se>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&xe&&this._popup.remove(),this._element.style.opacity=xe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=o.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,c){return l===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const _a={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Xs=0,au=!1;const lu={maxWidth:100,unit:"metric"};function cA(T,l,c){const C=c&&c.maxWidth||100,M=T._container.clientHeight/2,R=T._container.clientWidth/2,j=T.unproject([R-C/2,M]),$=T.unproject([R+C/2,M]),te=Math.round(T.project($).x-T.project(j).x),se=Math.min(C,te,T._container.clientWidth),xe=j.distanceTo($);if(c&&c.unit==="imperial"){const Oe=3.2808*xe;Oe>5280?Mu(l,se,Oe/5280,T._getUIString("ScaleControl.Miles")):Mu(l,se,Oe,T._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Mu(l,se,xe/1852,T._getUIString("ScaleControl.NauticalMiles")):xe>=1e3?Mu(l,se,xe/1e3,T._getUIString("ScaleControl.Kilometers")):Mu(l,se,xe,T._getUIString("ScaleControl.Meters"))}function Mu(T,l,c,C){const M=function(R){const j=Math.pow(10,`${Math.floor(R)}`.length-1);let $=R/j;return $=$>=10?10:$>=5?5:$>=3?3:$>=2?2:$>=1?1:function(te){const se=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*se)/se}($),j*$}(c);T.style.width=l*(M/c)+"px",T.innerHTML=`${M}&nbsp;${C}`}const Sc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Yu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ql(T){if(T){if(typeof T=="number"){const l=Math.round(Math.abs(T)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,T),"top-left":new o.P(l,l),"top-right":new o.P(-l,l),bottom:new o.P(0,-T),"bottom-left":new o.P(l,-l),"bottom-right":new o.P(-l,-l),left:new o.P(T,0),right:new o.P(-T,0)}}if(T instanceof o.P||Array.isArray(T)){const l=o.P.convert(T);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:o.P.convert(T.center||[0,0]),top:o.P.convert(T.top||[0,0]),"top-left":o.P.convert(T["top-left"]||[0,0]),"top-right":o.P.convert(T["top-right"]||[0,0]),bottom:o.P.convert(T.bottom||[0,0]),"bottom-left":o.P.convert(T["bottom-left"]||[0,0]),"bottom-right":o.P.convert(T["bottom-right"]||[0,0]),left:o.P.convert(T.left||[0,0]),right:o.P.convert(T.right||[0,0])}}return Ql(new o.P(0,0))}const wd=d;a.AJAXError=o.cg,a.Event=o.k,a.Evented=o.E,a.LngLat=o.N,a.MercatorCoordinate=o.Y,a.Point=o.P,a.addProtocol=o.ch,a.config=o.a,a.removeProtocol=o.ci,a.AttributionControl=bu,a.BoxZoomHandler=Ws,a.CanvasSource=mr,a.CooperativeGesturesHandler=xc,a.DoubleClickZoomHandler=Zo,a.DragPanHandler=bc,a.DragRotateHandler=nh,a.EdgeInsets=Gs,a.FullscreenControl=class extends o.E{constructor(T={}){super(),this._onFullscreenChange=()=>{var l;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=c==null?void 0:c.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,T&&T.container&&(T.container instanceof HTMLElement?this._container=T.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(T){return this._map=T,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const T=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",T).setAttribute("aria-hidden","true"),T.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const T=this._getTitle();this._fullscreenButton.setAttribute("aria-label",T),this._fullscreenButton.title=T}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=Rr,a.GeolocateControl=class extends o.E{constructor(T){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const c=new o.N(l.coords.longitude,l.coords.latitude),C=l.coords.accuracy,M=this._map.getBearing(),R=o.e({bearing:M},this.options.fitBoundsOptions),j=Ut.fromLngLat(c,C);this._map.fitBounds(j,R,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const c=new o.N(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&au)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new wu({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},_a,T)}onAdd(T){return this._map=T,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(l=!1){if(Wl!==void 0&&!l)return Wl;if(window.navigator.permissions===void 0)return Wl=!!window.navigator.geolocation,Wl;try{Wl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Wl=!!window.navigator.geolocation}return Wl})}().then(l=>this._finishSetupUI(l)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xs=0,au=!1}_isOutOfMapMaxBounds(T){const l=this._map.getMaxBounds(),c=T.coords;return l&&(c.longitude<l.getWest()||c.longitude>l.getEast()||c.latitude<l.getSouth()||c.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const T=this._map.getBounds(),l=T.getSouthEast(),c=T.getNorthEast(),C=l.distanceTo(c),M=Math.ceil(this._accuracy/(C/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xs--,au=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let T;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xs++,Xs>1?(T={maximumAge:6e5,timeout:0},au=!0):(T=this.options.positionOptions,au=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,T)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var T;const l=(T=this._map.getProjection())===null||T===void 0?void 0:T.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var T;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((T=this._map.getProjection())===null||T===void 0?void 0:T.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(T){return this._map=T,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=O.create("button","maplibregl-ctrl-globe",this._container),O.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=ec,a.ImageSource=sr,a.KeyboardHandler=bo,a.LngLatBounds=Ut,a.LogoControl=bs,a.Map=class extends Qu{constructor(T){var l,c;o.cd.mark(o.ce.create);const C=Object.assign(Object.assign(Object.assign({},BA),T),{canvasContextAttributes:Object.assign(Object.assign({},BA.canvasContextAttributes),T.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new Ms,R=new oA;if(C.minZoom!==void 0&&M.setMinZoom(C.minZoom),C.maxZoom!==void 0&&M.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&M.setMinPitch(C.minPitch),C.maxPitch!==void 0&&M.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&M.setRenderWorldCopies(C.renderWorldCopies),super(M,R,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Lf,this._controls=[],this._mapId=o.a1(),this._contextLost=$=>{$.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:$}))},this._contextRestored=$=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:$}))},this._onMapScroll=$=>{if($.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},EA),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new Y(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let $=!1;const te=eh(se=>{this._trackResize&&!this._removed&&(this.resize(se),this.redraw())},50);this._resizeObserver=new ResizeObserver(se=>{$?te(se):$=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Hr(this,C),this._hash=C.hash&&new ec(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,o.e({},C.fitBoundsOptions,{duration:0}))));const j=typeof C.style=="string"||((c=(l=C.style)===null||l===void 0?void 0:l.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,j),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new bu(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new bs,C.logoPosition),this.on("style.load",()=>{if(j||this._resizeTransform(),this.transform.unmodified){const $=o.M(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo($)}}),this.on("data",$=>{this._update($.dataType==="style"),this.fire(new o.k(`${$.dataType}data`,$))}),this.on("dataloading",$=>{this.fire(new o.k(`${$.dataType}dataloading`,$))}),this.on("dataabort",$=>{this.fire(new o.k("sourcedataabort",$))})}_getMapId(){return this._mapId}addControl(T,l){if(l===void 0&&(l=T.getDefaultPosition?T.getDefaultPosition():"top-right"),!T||!T.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=T.onAdd(this);this._controls.push(T);const C=this._controlPositions[l];return l.indexOf("bottom")!==-1?C.insertBefore(c,C.firstChild):C.appendChild(c),this}removeControl(T){if(!T||!T.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(T);return l>-1&&this._controls.splice(l,1),T.onRemove(this),this}hasControl(T){return this._controls.indexOf(T)>-1}calculateCameraOptionsFromTo(T,l,c,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(T,l,c,C)}resize(T,l=!0){const[c,C]=this._containerDimensions(),M=this._getClampedPixelRatio(c,C);if(this._resizeCanvas(c,C,M),this.painter.resize(c,C,M),this.painter.overLimit()){const j=this.painter.context.gl;this._maxCanvasSize=[j.drawingBufferWidth,j.drawingBufferHeight];const $=this._getClampedPixelRatio(c,C);this._resizeCanvas(c,C,$),this.painter.resize(c,C,$)}this._resizeTransform(l);const R=!this._moving;return R&&(this.stop(),this.fire(new o.k("movestart",T)).fire(new o.k("move",T))),this.fire(new o.k("resize",T)),R&&this.fire(new o.k("moveend",T)),this}_resizeTransform(T=!0){var l;const[c,C]=this._containerDimensions();this.transform.resize(c,C,T),(l=this._requestedCameraState)===null||l===void 0||l.resize(c,C,T)}_getClampedPixelRatio(T,l){const{0:c,1:C}=this._maxCanvasSize,M=this.getPixelRatio(),R=T*M,j=l*M;return Math.min(R>c?c/R:1,j>C?C/j:1)*M}getPixelRatio(){var T;return(T=this._overridePixelRatio)!==null&&T!==void 0?T:devicePixelRatio}setPixelRatio(T){this._overridePixelRatio=T,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(T){return this.transform.setMaxBounds(Ut.convert(T)),this._update()}setMinZoom(T){if((T=T??-2)>=-2&&T<=this.transform.maxZoom)return this.transform.setMinZoom(T),this._update(),this.getZoom()<T&&this.setZoom(T),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(T){if((T=T??22)>=this.transform.minZoom)return this.transform.setMaxZoom(T),this._update(),this.getZoom()>T&&this.setZoom(T),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(T){if((T=T??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(T>=0&&T<=this.transform.maxPitch)return this.transform.setMinPitch(T),this._update(),this.getPitch()<T&&this.setPitch(T),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(T){if((T=T??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(T>=this.transform.minPitch)return this.transform.setMaxPitch(T),this._update(),this.getPitch()>T&&this.setPitch(T),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(T){return this.transform.setRenderWorldCopies(T),this._update()}project(T){return this.transform.locationToScreenPoint(o.N.convert(T),this.style&&this.terrain)}unproject(T){return this.transform.screenPointToLocation(o.P.convert(T),this.terrain)}isMoving(){var T;return this._moving||((T=this.handlers)===null||T===void 0?void 0:T.isMoving())}isZooming(){var T;return this._zooming||((T=this.handlers)===null||T===void 0?void 0:T.isZooming())}isRotating(){var T;return this._rotating||((T=this.handlers)===null||T===void 0?void 0:T.isRotating())}_createDelegatedListener(T,l,c){if(T==="mouseenter"||T==="mouseover"){let C=!1;return{layers:l,listener:c,delegates:{mousemove:R=>{const j=l.filter(te=>this.getLayer(te)),$=j.length!==0?this.queryRenderedFeatures(R.point,{layers:j}):[];$.length?C||(C=!0,c.call(this,new Ki(T,this,R.originalEvent,{features:$}))):C=!1},mouseout:()=>{C=!1}}}}if(T==="mouseleave"||T==="mouseout"){let C=!1;return{layers:l,listener:c,delegates:{mousemove:j=>{const $=l.filter(te=>this.getLayer(te));($.length!==0?this.queryRenderedFeatures(j.point,{layers:$}):[]).length?C=!0:C&&(C=!1,c.call(this,new Ki(T,this,j.originalEvent)))},mouseout:j=>{C&&(C=!1,c.call(this,new Ki(T,this,j.originalEvent)))}}}}{const C=M=>{const R=l.filter($=>this.getLayer($)),j=R.length!==0?this.queryRenderedFeatures(M.point,{layers:R}):[];j.length&&(M.features=j,c.call(this,M),delete M.features)};return{layers:l,listener:c,delegates:{[T]:C}}}}_saveDelegatedListener(T,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[T]=this._delegatedListeners[T]||[],this._delegatedListeners[T].push(l)}_removeDelegatedListener(T,l,c){if(!this._delegatedListeners||!this._delegatedListeners[T])return;const C=this._delegatedListeners[T];for(let M=0;M<C.length;M++){const R=C[M];if(R.listener===c&&R.layers.length===l.length&&R.layers.every(j=>l.includes(j))){for(const j in R.delegates)this.off(j,R.delegates[j]);return void C.splice(M,1)}}}on(T,l,c){if(c===void 0)return super.on(T,l);const C=typeof l=="string"?[l]:l,M=this._createDelegatedListener(T,C,c);this._saveDelegatedListener(T,M);for(const R in M.delegates)this.on(R,M.delegates[R]);return{unsubscribe:()=>{this._removeDelegatedListener(T,C,c)}}}once(T,l,c){if(c===void 0)return super.once(T,l);const C=typeof l=="string"?[l]:l,M=this._createDelegatedListener(T,C,c);for(const R in M.delegates){const j=M.delegates[R];M.delegates[R]=(...$)=>{this._removeDelegatedListener(T,C,c),j(...$)}}this._saveDelegatedListener(T,M);for(const R in M.delegates)this.once(R,M.delegates[R]);return this}off(T,l,c){return c===void 0?super.off(T,l):(this._removeDelegatedListener(T,typeof l=="string"?[l]:l,c),this)}queryRenderedFeatures(T,l){if(!this.style)return[];let c;const C=T instanceof o.P||Array.isArray(T),M=C?T:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(C?{}:T)||{},M instanceof o.P||typeof M[0]=="number")c=[o.P.convert(M)];else{const R=o.P.convert(M[0]),j=o.P.convert(M[1]);c=[R,new o.P(j.x,R.y),j,new o.P(R.x,j.y),R]}return this.style.queryRenderedFeatures(c,l,this.transform)}querySourceFeatures(T,l){return this.style.querySourceFeatures(T,l)}setStyle(T,l){return(l=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&T?(this._diffStyle(T,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(T,l))}setTransformRequest(T){return this._requestManager.setTransformRequest(T),this}_getUIString(T){const l=this._locale[T];if(l==null)throw new Error(`Missing UI string '${T}'`);return l}_updateStyle(T,l){var c,C;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(T,l));const M=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!T)),T?(this.style=new bh(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof T=="string"?this.style.loadURL(T,l,M):this.style.loadJSON(T,l,M),this):((C=(c=this.style)===null||c===void 0?void 0:c.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new bh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(T,l){if(typeof T=="string"){const c=this._requestManager.transformRequest(T,"Style");o.h(c,new AbortController).then(C=>{this._updateDiff(C.data,l)}).catch(C=>{C&&this.fire(new o.j(C))})}else typeof T=="object"&&this._updateDiff(T,l)}_updateDiff(T,l){try{this.style.setState(T,l)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(T,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(T,l){return this._lazyInitEmptyStyle(),this.style.addSource(T,l),this._update(!0)}isSourceLoaded(T){const l=this.style&&this.style.sourceCaches[T];if(l!==void 0)return l.loaded();this.fire(new o.j(new Error(`There is no source with ID '${T}'`)))}setTerrain(T){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),T){const l=this.style.sourceCaches[T.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${T.source}`);this.terrain===null&&l.reload();for(const c in this.style._layers){const C=this.style._layers[c];C.type==="hillshade"&&C.source===T.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new xu(this.painter,l,T),this.painter.renderToTexture=new rh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==T.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.k("terrain",{terrain:T})),this}getTerrain(){var T,l;return(l=(T=this.terrain)===null||T===void 0?void 0:T.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const T=this.style&&this.style.sourceCaches;for(const l in T){const c=T[l]._tiles;for(const C in c){const M=c[C];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(T){return this.style.removeSource(T),this._update(!0)}getSource(T){return this.style.getSource(T)}addImage(T,l,c={}){const{pixelRatio:C=1,sdf:M=!1,stretchX:R,stretchY:j,content:$,textFitWidth:te,textFitHeight:se}=c;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||o.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:xe,height:Oe,data:ke}=l,qe=l;return this.style.addImage(T,{data:new o.R({width:xe,height:Oe},new Uint8Array(ke)),pixelRatio:C,stretchX:R,stretchY:j,content:$,textFitWidth:te,textFitHeight:se,sdf:M,version:0,userImage:qe}),qe.onAdd&&qe.onAdd(this,T),this}}{const{width:xe,height:Oe,data:ke}=S.getImageData(l);this.style.addImage(T,{data:new o.R({width:xe,height:Oe},ke),pixelRatio:C,stretchX:R,stretchY:j,content:$,textFitWidth:te,textFitHeight:se,sdf:M,version:0})}}updateImage(T,l){const c=this.style.getImage(T);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=l instanceof HTMLImageElement||o.b(l)?S.getImageData(l):l,{width:M,height:R,data:j}=C;if(M===void 0||R===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==c.data.width||R!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const $=!(l instanceof HTMLImageElement||o.b(l));return c.data.replace(j,$),this.style.updateImage(T,c),this}getImage(T){return this.style.getImage(T)}hasImage(T){return T?!!this.style.getImage(T):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(T){this.style.removeImage(T)}loadImage(T){return X.getImage(this._requestManager.transformRequest(T,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(T,l){return this._lazyInitEmptyStyle(),this.style.addLayer(T,l),this._update(!0)}moveLayer(T,l){return this.style.moveLayer(T,l),this._update(!0)}removeLayer(T){return this.style.removeLayer(T),this._update(!0)}getLayer(T){return this.style.getLayer(T)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(T,l,c){return this.style.setLayerZoomRange(T,l,c),this._update(!0)}setFilter(T,l,c={}){return this.style.setFilter(T,l,c),this._update(!0)}getFilter(T){return this.style.getFilter(T)}setPaintProperty(T,l,c,C={}){return this.style.setPaintProperty(T,l,c,C),this._update(!0)}getPaintProperty(T,l){return this.style.getPaintProperty(T,l)}setLayoutProperty(T,l,c,C={}){return this.style.setLayoutProperty(T,l,c,C),this._update(!0)}getLayoutProperty(T,l){return this.style.getLayoutProperty(T,l)}setGlyphs(T,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(T,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(T,l,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(T,l,c,C=>{C||this._update(!0)}),this}removeSprite(T){return this._lazyInitEmptyStyle(),this.style.removeSprite(T),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(T,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(T,l,c=>{c||this._update(!0)}),this}setLight(T,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(T,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(T,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(T,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(T,l){return this.style.setFeatureState(T,l),this._update()}removeFeatureState(T,l){return this.style.removeFeatureState(T,l),this._update()}getFeatureState(T){return this.style.getFeatureState(T)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let T=0,l=0;return this._container&&(T=this._container.clientWidth||400,l=this._container.clientHeight||300),[T,l]}_setupContainer(){const T=this._container;T.classList.add("maplibregl-map");const l=this._canvasContainer=O.create("div","maplibregl-canvas-container",T);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),C=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],C);const M=this._controlContainer=O.create("div","maplibregl-control-container",T),R=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(j=>{R[j]=O.create("div",`maplibregl-ctrl-${j} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(T,l,c){this._canvas.width=Math.floor(c*T),this._canvas.height=Math.floor(c*l),this._canvas.style.width=`${T}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const T=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",C=>{l={requestedAttributes:T},C&&(l.statusMessage=C.statusMessage,l.type=C.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,T):this._canvas.getContext("webgl2",T)||this._canvas.getContext("webgl",T),!c){const C="Failed to initialize WebGL";throw l?(l.message=C,new Error(JSON.stringify(l))):new Error(C)}this.painter=new ju(c,this.transform),k.testSupport(c)}migrateProjection(T,l){super.migrateProjection(T,l),this.painter.transform=T,this.fire(new o.k("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(T){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||T,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(T){return this._update(),this._renderTaskQueue.add(T)}_cancelRenderFrame(T){this._renderTaskQueue.remove(T)}_render(T){var l,c,C,M,R;const j=this._idleTriggered?this._fadeDuration:0,$=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(T),this._removed)return;let te=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Oe=this.transform.zoom,ke=S.now();this.style.zoomHistory.update(Oe,ke);const qe=new o.z(Oe,{now:ke,fadeDuration:j,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ve=qe.crossFadingFactor();Ve===1&&Ve===this._crossFadingFactor||(te=!0,this._crossFadingFactor=Ve),this.style.update(qe)}const se=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==$;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(R=this.style.projection)===null||R===void 0?void 0:R.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||se)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,j,this._crossSourceCollisions,se),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:j,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cd.mark(o.ce.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||te)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const xe=this._sourcesDirty||this._styleDirty||this._placementDirty;return xe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||xe||(this._fullyLoaded=!0,o.cd.mark(o.ce.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var T;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(T=this._resizeObserver)===null||T===void 0||T.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l!=null&&l.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cd.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then(T=>{o.cd.frame(T),this._frameRequest=null,this._render(T)}).catch(T=>{if(!o.cf(T)&&!function(l){return l.message===jl}(T))throw T}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(T){this._showTileBoundaries!==T&&(this._showTileBoundaries=T,this._update())}get showPadding(){return!!this._showPadding}set showPadding(T){this._showPadding!==T&&(this._showPadding=T,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(T){this._showCollisionBoxes!==T&&(this._showCollisionBoxes=T,T?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(T){this._showOverdrawInspector!==T&&(this._showOverdrawInspector=T,this._update())}get repaint(){return!!this._repaint}set repaint(T){this._repaint!==T&&(this._repaint=T,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(T){this._vertices=T,this._update()}get version(){return ih}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(T){return this._lazyInitEmptyStyle(),this.style.setProjection(T),this._update(!0)}},a.MapMouseEvent=Ki,a.MapTouchEvent=$r,a.MapWheelEvent=Es,a.Marker=wu,a.NavigationControl=class{constructor(T){this._updateZoomButtons=()=>{const l=this._map.getZoom(),c=l===this._map.getMaxZoom(),C=l===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,c)=>{const C=this._map._getUIString(`NavigationControl.${c}`);l.title=C,l.setAttribute("aria-label",C)},this.options=o.e({},Qs,T),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(T){return this._map=T,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(T,l){const c=O.create("button",T,this._container);return c.type="button",c.addEventListener("click",l),c}},a.Popup=class extends o.E{constructor(T){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const $ of this.options.className.split(" "))this._container.classList.add($);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?hl(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!l)return;const C=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let M=this.options.anchor;const R=Ql(this.options.offset);if(!M){const $=this._container.offsetWidth,te=this._container.offsetHeight;let se;se=C.y+R.bottom.y<te?["top"]:C.y>this._map.transform.height-te?["bottom"]:[],C.x<$/2?se.push("left"):C.x>this._map.transform.width-$/2&&se.push("right"),M=se.length===0?"bottom":se.join("-")}let j=C.add(R[M]);this.options.subpixelPositioning||(j=j.round()),O.setTransform(this._container,`${qu[M]} translate(${j.x}px,${j.y}px)`),Mc(this._container,M,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Sc),T)}addTo(T){return this._map&&this.remove(),this._map=T,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(T){return this._lngLat=o.N.convert(T),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(T){return this.setDOMContent(document.createTextNode(T))}setHTML(T){const l=document.createDocumentFragment(),c=document.createElement("body");let C;for(c.innerHTML=T;C=c.firstChild,C;)l.appendChild(C);return this.setDOMContent(l)}getMaxWidth(){var T;return(T=this._container)===null||T===void 0?void 0:T.style.maxWidth}setMaxWidth(T){return this.options.maxWidth=T,this._update(),this}setDOMContent(T){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(T),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(T){return this._container&&this._container.classList.add(T),this}removeClassName(T){return this._container&&this._container.classList.remove(T),this}setOffset(T){return this.options.offset=T,this._update(),this}toggleClassName(T){if(this._container)return this._container.classList.toggle(T)}setSubpixelPositioning(T){this.options.subpixelPositioning=T}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const T=this._container.querySelector(Yu);T&&T.focus()}},a.RasterDEMTileSource=jn,a.RasterTileSource=yn,a.ScaleControl=class{constructor(T){this._onMove=()=>{cA(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,cA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},lu),T)}getDefaultPosition(){return"bottom-left"}onAdd(T){return this._map=T,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",T.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Ds,a.Style=bh,a.TerrainControl=class{constructor(T){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=T}onAdd(T){return this._map=T,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Cc,a.TwoFingersTouchRotateHandler=nc,a.TwoFingersTouchZoomHandler=xd,a.TwoFingersTouchZoomRotateHandler=SA,a.VectorTileSource=Nt,a.VideoSource=Jn,a.addSourceType=(T,l)=>o._(void 0,void 0,void 0,function*(){if(xr(T))throw new Error(`A source type called "${T}" already exists.`);((c,C)=>{pr[c]=C})(T,l)}),a.clearPrewarmedResources=function(){const T=Ct;T&&(T.isPreloaded()&&T.numActive()===1?(T.release(Ne),Ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=tt,a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return Ae().getRTLTextPluginStatus()},a.getVersion=function(){return wd},a.getWorkerCount=function(){return at.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function(T){return Fe().broadcast("IS",T)},a.prewarm=function(){Lt().acquire(Ne)},a.setMaxParallelImageRequests=function(T){o.a.MAX_PARALLEL_IMAGE_REQUESTS=T},a.setRTLTextPlugin=function(T,l){return Ae().setRTLTextPlugin(T,l)},a.setWorkerCount=function(T){at.workerCount=T},a.setWorkerUrl=function(T){o.a.WORKER_URL=T}});var s=t;return s})}(bb)),bb.exports}var PV=TV();const _v=La(PV);var DC=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function AU(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Cv={exports:{}};Cv.exports;var y7;function RV(){return y7||(y7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",d="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",E="[object Date]",S="[object Error]",O="[object Function]",k="[object GeneratorFunction]",U="[object Map]",z="[object Number]",q="[object Null]",Q="[object Object]",re="[object Promise]",X="[object Proxy]",Y="[object RegExp]",J="[object Set]",N="[object String]",ie="[object Symbol]",he="[object Undefined]",de="[object WeakMap]",we="[object ArrayBuffer]",fe="[object DataView]",be="[object Float32Array]",Pe="[object Float64Array]",pe="[object Int8Array]",it="[object Int16Array]",We="[object Int32Array]",$e="[object Uint8Array]",ht="[object Uint8ClampedArray]",De="[object Uint16Array]",Ne="[object Uint32Array]",at=/[\\^$.*+?()[\]{}|]/g,wt=/^\[object .+?Constructor\]$/,Ct=/^(?:0|[1-9]\d*)$/,ft={};ft[be]=ft[Pe]=ft[pe]=ft[it]=ft[We]=ft[$e]=ft[ht]=ft[De]=ft[Ne]=!0,ft[o]=ft[d]=ft[we]=ft[b]=ft[fe]=ft[E]=ft[S]=ft[O]=ft[U]=ft[z]=ft[Q]=ft[Y]=ft[J]=ft[N]=ft[de]=!1;var Lt=typeof DC=="object"&&DC&&DC.Object===Object&&DC,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Fe=Lt||Kt||Function("return this")(),Te=e&&!e.nodeType&&e,Se=Te&&!0&&n&&!n.nodeType&&n,Je=Se&&Se.exports===Te,yt=Je&&Lt.process,dt=function(){try{return yt&&yt.binding&&yt.binding("util")}catch{}}(),Ut=dt&&dt.isTypedArray;function en(ee,Be){for(var tt=-1,qt=ee==null?0:ee.length,Or=0,Gn=[];++tt<qt;){var si=ee[tt];Be(si,tt,ee)&&(Gn[Or++]=si)}return Gn}function Nt(ee,Be){for(var tt=-1,qt=Be.length,Or=ee.length;++tt<qt;)ee[Or+tt]=Be[tt];return ee}function yn(ee,Be){for(var tt=-1,qt=ee==null?0:ee.length;++tt<qt;)if(Be(ee[tt],tt,ee))return!0;return!1}function jn(ee,Be){for(var tt=-1,qt=Array(ee);++tt<ee;)qt[tt]=Be(tt);return qt}function Rr(ee){return function(Be){return ee(Be)}}function sr(ee,Be){return ee.has(Be)}function Jn(ee,Be){return ee==null?void 0:ee[Be]}function mr(ee){var Be=-1,tt=Array(ee.size);return ee.forEach(function(qt,Or){tt[++Be]=[Or,qt]}),tt}function pr(ee,Be){return function(tt){return ee(Be(tt))}}function xr(ee){var Be=-1,tt=Array(ee.size);return ee.forEach(function(qt){tt[++Be]=qt}),tt}var Qn=Array.prototype,Er=Function.prototype,Ge=Object.prototype,Ae=Fe["__core-js_shared__"],me=Er.toString,Xe=Ge.hasOwnProperty,Et=function(){var ee=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Yt=Ge.toString,nn=RegExp("^"+me.call(Xe).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=Je?Fe.Buffer:void 0,Ee=Fe.Symbol,oe=Fe.Uint8Array,ve=Ge.propertyIsEnumerable,p=Qn.splice,ze=Ee?Ee.toStringTag:void 0,rt=Object.getOwnPropertySymbols,pt=rr?rr.isBuffer:void 0,Bt=pr(Object.keys,Object),vt=Ei(Fe,"DataView"),Xt=Ei(Fe,"Map"),tn=Ei(Fe,"Promise"),zt=Ei(Fe,"Set"),_t=Ei(Fe,"WeakMap"),Tn=Ei(Object,"create"),Sn=fo(vt),Ar=fo(Xt),wr=fo(tn),rn=fo(zt),Fn=fo(_t),Rn=Ee?Ee.prototype:void 0,Br=Rn?Rn.valueOf:void 0;function Mr(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function Kr(){this.__data__=Tn?Tn(null):{},this.size=0}function ir(ee){var Be=this.has(ee)&&delete this.__data__[ee];return this.size-=Be?1:0,Be}function co(ee){var Be=this.__data__;if(Tn){var tt=Be[ee];return tt===r?void 0:tt}return Xe.call(Be,ee)?Be[ee]:void 0}function Sa(ee){var Be=this.__data__;return Tn?Be[ee]!==void 0:Xe.call(Be,ee)}function qi(ee,Be){var tt=this.__data__;return this.size+=this.has(ee)?0:1,tt[ee]=Tn&&Be===void 0?r:Be,this}Mr.prototype.clear=Kr,Mr.prototype.delete=ir,Mr.prototype.get=co,Mr.prototype.has=Sa,Mr.prototype.set=qi;function yi(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function oo(){this.__data__=[],this.size=0}function Mo(ee){var Be=this.__data__,tt=er(Be,ee);if(tt<0)return!1;var qt=Be.length-1;return tt==qt?Be.pop():p.call(Be,tt,1),--this.size,!0}function Ti(ee){var Be=this.__data__,tt=er(Be,ee);return tt<0?void 0:Be[tt][1]}function Ua(ee){return er(this.__data__,ee)>-1}function Ea(ee,Be){var tt=this.__data__,qt=er(tt,ee);return qt<0?(++this.size,tt.push([ee,Be])):tt[qt][1]=Be,this}yi.prototype.clear=oo,yi.prototype.delete=Mo,yi.prototype.get=Ti,yi.prototype.has=Ua,yi.prototype.set=Ea;function ns(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function Aa(){this.size=0,this.__data__={hash:new Mr,map:new(Xt||yi),string:new Mr}}function Al(ee){var Be=Lr(this,ee).delete(ee);return this.size-=Be?1:0,Be}function ao(ee){return Lr(this,ee).get(ee)}function Pu(ee){return Lr(this,ee).has(ee)}function tu(ee,Be){var tt=Lr(this,ee),qt=tt.size;return tt.set(ee,Be),this.size+=tt.size==qt?0:1,this}ns.prototype.clear=Aa,ns.prototype.delete=Al,ns.prototype.get=ao,ns.prototype.has=Pu,ns.prototype.set=tu;function so(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.__data__=new ns;++Be<tt;)this.add(ee[Be])}function Dr(ee){return this.__data__.set(ee,r),this}function Za(ee){return this.__data__.has(ee)}so.prototype.add=so.prototype.push=Dr,so.prototype.has=Za;function Ps(ee){var Be=this.__data__=new yi(ee);this.size=Be.size}function ia(){this.__data__=new yi,this.size=0}function Qe(ee){var Be=this.__data__,tt=Be.delete(ee);return this.size=Be.size,tt}function bt(ee){return this.__data__.get(ee)}function fn(ee){return this.__data__.has(ee)}function Nn(ee,Be){var tt=this.__data__;if(tt instanceof yi){var qt=tt.__data__;if(!Xt||qt.length<t-1)return qt.push([ee,Be]),this.size=++tt.size,this;tt=this.__data__=new ns(qt)}return tt.set(ee,Be),this.size=tt.size,this}Ps.prototype.clear=ia,Ps.prototype.delete=Qe,Ps.prototype.get=bt,Ps.prototype.has=fn,Ps.prototype.set=Nn;function un(ee,Be){var tt=el(ee),qt=!tt&&Ms(ee),Or=!tt&&!qt&&El(ee),Gn=!tt&&!qt&&!Or&&ru(ee),si=tt||qt||Or||Gn,ci=si?jn(ee.length,String):[],gr=ci.length;for(var Ir in ee)Xe.call(ee,Ir)&&!(si&&(Ir=="length"||Or&&(Ir=="offset"||Ir=="parent")||Gn&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Gs(Ir,gr)))&&ci.push(Ir);return ci}function er(ee,Be){for(var tt=ee.length;tt--;)if(ms(ee[tt][0],Be))return tt;return-1}function Pi(ee,Be,tt){var qt=Be(ee);return el(ee)?qt:Nt(qt,tt(ee))}function ho(ee){return ee==null?ee===void 0?he:q:ze&&ze in Object(ee)?Ja(ee):Vs(ee)}function _s(ee){return Jr(ee)&&ho(ee)==o}function Ns(ee,Be,tt,qt,Or){return ee===Be?!0:ee==null||Be==null||!Jr(ee)&&!Jr(Be)?ee!==ee&&Be!==Be:vA(ee,Be,tt,qt,Ns,Or)}function vA(ee,Be,tt,qt,Or,Gn){var si=el(ee),ci=el(Be),gr=si?d:So(ee),Ir=ci?d:So(Be);gr=gr==o?Q:gr,Ir=Ir==o?Q:Ir;var vi=gr==Q,Eo=Ir==Q,ki=gr==Ir;if(ki&&El(ee)){if(!El(Be))return!1;si=!0,vi=!1}if(ki&&!vi)return Gn||(Gn=new Ps),si||ru(ee)?Ai(ee,Be,tt,qt,Or,Gn):ca(ee,Be,gr,tt,qt,Or,Gn);if(!(tt&i)){var qr=vi&&Xe.call(ee,"__wrapped__"),Hi=Eo&&Xe.call(Be,"__wrapped__");if(qr||Hi){var Zi=qr?ee.value():ee,us=Hi?Be.value():Be;return Gn||(Gn=new Ps),Or(Zi,us,tt,qt,Gn)}}return ki?(Gn||(Gn=new Ps),iA(ee,Be,tt,qt,Or,Gn)):!1}function ri(ee){if(!Ui(ee)||zl(ee))return!1;var Be=Vi(ee)?nn:wt;return Be.test(fo(ee))}function wi(ee){return Jr(ee)&&nu(ee.length)&&!!ft[ho(ee)]}function Xa(ee){if(!rs(ee))return Bt(ee);var Be=[];for(var tt in Object(ee))Xe.call(ee,tt)&&tt!="constructor"&&Be.push(tt);return Be}function Ai(ee,Be,tt,qt,Or,Gn){var si=tt&i,ci=ee.length,gr=Be.length;if(ci!=gr&&!(si&&gr>ci))return!1;var Ir=Gn.get(ee);if(Ir&&Gn.get(Be))return Ir==Be;var vi=-1,Eo=!0,ki=tt&s?new so:void 0;for(Gn.set(ee,Be),Gn.set(Be,ee);++vi<ci;){var qr=ee[vi],Hi=Be[vi];if(qt)var Zi=si?qt(Hi,qr,vi,Be,ee,Gn):qt(qr,Hi,vi,ee,Be,Gn);if(Zi!==void 0){if(Zi)continue;Eo=!1;break}if(ki){if(!yn(Be,function(us,ya){if(!sr(ki,ya)&&(qr===us||Or(qr,us,tt,qt,Gn)))return ki.push(ya)})){Eo=!1;break}}else if(!(qr===Hi||Or(qr,Hi,tt,qt,Gn))){Eo=!1;break}}return Gn.delete(ee),Gn.delete(Be),Eo}function ca(ee,Be,tt,qt,Or,Gn,si){switch(tt){case fe:if(ee.byteLength!=Be.byteLength||ee.byteOffset!=Be.byteOffset)return!1;ee=ee.buffer,Be=Be.buffer;case we:return!(ee.byteLength!=Be.byteLength||!Gn(new oe(ee),new oe(Be)));case b:case E:case z:return ms(+ee,+Be);case S:return ee.name==Be.name&&ee.message==Be.message;case Y:case N:return ee==Be+"";case U:var ci=mr;case J:var gr=qt&i;if(ci||(ci=xr),ee.size!=Be.size&&!gr)return!1;var Ir=si.get(ee);if(Ir)return Ir==Be;qt|=s,si.set(ee,Be);var vi=Ai(ci(ee),ci(Be),qt,Or,Gn,si);return si.delete(ee),vi;case ie:if(Br)return Br.call(ee)==Br.call(Be)}return!1}function iA(ee,Be,tt,qt,Or,Gn){var si=tt&i,ci=ls(ee),gr=ci.length,Ir=ls(Be),vi=Ir.length;if(gr!=vi&&!si)return!1;for(var Eo=gr;Eo--;){var ki=ci[Eo];if(!(si?ki in Be:Xe.call(Be,ki)))return!1}var qr=Gn.get(ee);if(qr&&Gn.get(Be))return qr==Be;var Hi=!0;Gn.set(ee,Be),Gn.set(Be,ee);for(var Zi=si;++Eo<gr;){ki=ci[Eo];var us=ee[ki],ya=Be[ki];if(qt)var za=si?qt(ya,us,ki,Be,ee,Gn):qt(us,ya,ki,ee,Be,Gn);if(!(za===void 0?us===ya||Or(us,ya,tt,qt,Gn):za)){Hi=!1;break}Zi||(Zi=ki=="constructor")}if(Hi&&!Zi){var fu=ee.constructor,Hs=Be.constructor;fu!=Hs&&"constructor"in ee&&"constructor"in Be&&!(typeof fu=="function"&&fu instanceof fu&&typeof Hs=="function"&&Hs instanceof Hs)&&(Hi=!1)}return Gn.delete(ee),Gn.delete(Be),Hi}function ls(ee){return Pi(ee,Ni,Rs)}function Lr(ee,Be){var tt=ee.__data__;return hu(Be)?tt[typeof Be=="string"?"string":"hash"]:tt.map}function Ei(ee,Be){var tt=Jn(ee,Be);return ri(tt)?tt:void 0}function Ja(ee){var Be=Xe.call(ee,ze),tt=ee[ze];try{ee[ze]=void 0;var qt=!0}catch{}var Or=Yt.call(ee);return qt&&(Be?ee[ze]=tt:delete ee[ze]),Or}var Rs=rt?function(ee){return ee==null?[]:(ee=Object(ee),en(rt(ee),function(Be){return ve.call(ee,Be)}))}:lo,So=ho;(vt&&So(new vt(new ArrayBuffer(1)))!=fe||Xt&&So(new Xt)!=U||tn&&So(tn.resolve())!=re||zt&&So(new zt)!=J||_t&&So(new _t)!=de)&&(So=function(ee){var Be=ho(ee),tt=Be==Q?ee.constructor:void 0,qt=tt?fo(tt):"";if(qt)switch(qt){case Sn:return fe;case Ar:return U;case wr:return re;case rn:return J;case Fn:return de}return Be});function Gs(ee,Be){return Be=Be??a,!!Be&&(typeof ee=="number"||Ct.test(ee))&&ee>-1&&ee%1==0&&ee<Be}function hu(ee){var Be=typeof ee;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ee!=="__proto__":ee===null}function zl(ee){return!!Et&&Et in ee}function rs(ee){var Be=ee&&ee.constructor,tt=typeof Be=="function"&&Be.prototype||Ge;return ee===tt}function Vs(ee){return Yt.call(ee)}function fo(ee){if(ee!=null){try{return me.call(ee)}catch{}try{return ee+""}catch{}}return""}function ms(ee,Be){return ee===Be||ee!==ee&&Be!==Be}var Ms=_s(function(){return arguments}())?_s:function(ee){return Jr(ee)&&Xe.call(ee,"callee")&&!ve.call(ee,"callee")},el=Array.isArray;function Ks(ee){return ee!=null&&nu(ee.length)&&!Vi(ee)}var El=pt||Ri;function oA(ee,Be){return Ns(ee,Be)}function Vi(ee){if(!Ui(ee))return!1;var Be=ho(ee);return Be==O||Be==k||Be==g||Be==X}function nu(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=a}function Ui(ee){var Be=typeof ee;return ee!=null&&(Be=="object"||Be=="function")}function Jr(ee){return ee!=null&&typeof ee=="object"}var ru=Ut?Rr(Ut):wi;function Ni(ee){return Ks(ee)?un(ee):Xa(ee)}function lo(){return[]}function Ri(){return!1}n.exports=oA}(Cv,Cv.exports)),Cv.exports}var KV=RV(),DV=AU(KV);function g6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function y6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function v6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function LV(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const d=s(a);r.push(g6(d.circle,a)),i.push(v6(d.line,a)),t.push(y6(d.polygon,d.polygonOutline,a))}else o.forEach(d=>{const g=s(d);r.push(g6(g.circle,a,d)),i.push(v6(g.line,a,d)),t.push(y6(g.polygon,g.polygonOutline,a,d))})}),t.concat(i).concat(r)}function FV(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var v7={polygonLayer:y6,lineLayer:v6,circleLayer:g6,generateInspectStyle:FV,generateColoredLayers:LV};class UV{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function zV(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function J3(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${zV(e)}</div></div>`}function jV(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function NV(n){const e=jV(n.layer["source-layer"]||n.layer.source),t=J3("$id",n.id),r=J3("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>J3(s,n.properties[s]));return[e,t,r].concat(i).join("")}function GV(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${NV(e)}</div>`).join("")}function WV(n){return`<div class="maplibregl-inspect_popup">${GV(n)}</div>`}var bv={exports:{}},QV=bv.exports,_7;function qV(){return _7||(_7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(QV,function(){var t=null,r={};q();var i=[],s=function(N){if(N=N||{},N.seed!==void 0&&N.seed!==null&&N.seed===parseInt(N.seed,10))t=N.seed;else if(typeof N.seed=="string")t=Y(N.seed);else{if(N.seed!==void 0&&N.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,de;if(N.count!==null&&N.count!==void 0){for(var we=N.count,fe=[],be=0;be<N.count;be++)i.push(!1);for(N.count=null;we>fe.length;){var Pe=s(N);t!==null&&(N.seed=t),fe.push(Pe)}return N.count=we,fe}return ie=a(N),he=o(ie,N),de=d(ie,he,N),g([ie,he,de],N)};function a(N){if(i.length>0){var ie=J(N.hue),he=k(ie),de=(ie[1]-ie[0])/i.length,we=parseInt((he-ie[0])/de);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var fe=(ie[0]+we*de)%359,be=(ie[0]+(we+1)*de)%359;return ie=[fe,be],he=k(ie),he<0&&(he=360+he),he}else{var ie=E(N.hue);return he=k(ie),he<0&&(he=360+he),he}}function o(N,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return k([0,100]);var he=S(N),de=he[0],we=he[1];switch(ie.luminosity){case"bright":de=55;break;case"dark":de=we-10;break;case"light":we=55;break}return k([de,we])}function d(N,ie,he){var de=b(N,ie),we=100;switch(he.luminosity){case"dark":we=de+20;break;case"light":de=(we+de)/2;break;case"random":de=0,we=100;break}return k([de,we])}function g(N,ie){switch(ie.format){case"hsvArray":return N;case"hslArray":return X(N);case"hsl":var he=X(N);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var de=X(N),be=ie.alpha||Math.random();return"hsla("+de[0]+", "+de[1]+"%, "+de[2]+"%, "+be+")";case"rgbArray":return Q(N);case"rgb":var we=Q(N);return"rgb("+we.join(", ")+")";case"rgba":var fe=Q(N),be=ie.alpha||Math.random();return"rgba("+fe.join(", ")+", "+be+")";default:return U(N)}}function b(N,ie){for(var he=O(N).lowerBounds,de=0;de<he.length-1;de++){var we=he[de][0],fe=he[de][1],be=he[de+1][0],Pe=he[de+1][1];if(ie>=we&&ie<=be){var pe=(Pe-fe)/(be-we),it=fe-pe*we;return pe*ie+it}}return 0}function E(N){if(typeof parseInt(N)=="number"){var ie=parseInt(N);if(ie<360&&ie>0)return[ie,ie]}if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var de=re(N)[0];return[de,de]}}return[0,360]}function S(N){return O(N).saturationRange}function O(N){N>=334&&N<=360&&(N-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&N>=he.hueRange[0]&&N<=he.hueRange[1])return r[ie]}return"Color not found"}function k(N){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(N[0]+he*(N[1]+1-N[0]))}else{var de=N[1]||1,we=N[0]||0;t=(t*9301+49297)%233280;var fe=t/233280;return Math.floor(we+fe*(de-we))}}function U(N){var ie=Q(N);function he(we){var fe=we.toString(16);return fe.length==1?"0"+fe:fe}var de="#"+he(ie[0])+he(ie[1])+he(ie[2]);return de}function z(N,ie,he){var de=he[0][0],we=he[he.length-1][0],fe=he[he.length-1][1],be=he[0][1];r[N]={hueRange:ie,lowerBounds:he,saturationRange:[de,we],brightnessRange:[fe,be]}}function q(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Q(N){var ie=N[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=N[1]/100,de=N[2]/100,we=Math.floor(ie*6),fe=ie*6-we,be=de*(1-he),Pe=de*(1-fe*he),pe=de*(1-(1-fe)*he),it=256,We=256,$e=256;switch(we){case 0:it=de,We=pe,$e=be;break;case 1:it=Pe,We=de,$e=be;break;case 2:it=be,We=de,$e=pe;break;case 3:it=be,We=Pe,$e=de;break;case 4:it=pe,We=be,$e=de;break;case 5:it=de,We=be,$e=Pe;break}var ht=[Math.floor(it*255),Math.floor(We*255),Math.floor($e*255)];return ht}function re(N){N=N.replace(/^#/,""),N=N.length===3?N.replace(/(.)/g,"$1$1"):N;var ie=parseInt(N.substr(0,2),16)/255,he=parseInt(N.substr(2,2),16)/255,de=parseInt(N.substr(4,2),16)/255,we=Math.max(ie,he,de),fe=we-Math.min(ie,he,de),be=we?fe/we:0;switch(we){case ie:return[60*((he-de)/fe%6)||0,be,we];case he:return[60*((de-ie)/fe+2)||0,be,we];case de:return[60*((ie-he)/fe+4)||0,be,we]}}function X(N){var ie=N[0],he=N[1]/100,de=N[2]/100,we=(2-he)*de;return[ie,Math.round(he*de/(we<1?we:2-we)*1e4)/100,we/2*100]}function Y(N){for(var ie=0,he=0;he!==N.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=N.charCodeAt(he);return ie}function J(N){if(isNaN(N)){if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var de=re(N)[0];return O(de).hueRange}}}else{var ie=parseInt(N);if(ie<360&&ie>0)return O(N).hueRange}return[0,360]}return s})}(bv,bv.exports)),bv.exports}var YV=qV(),$V=AU(YV);function VV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${$V({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var HV={brightColor:VV};function ZV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function XV(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class NB{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!DV(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();ZV(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const a=this.options.renderPopup(s);typeof a=="string"?this._popup.setHTML(a):this._popup.setDOMContent(a),this._popup.addTo(this._map)}}},!(this instanceof NB))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:HV.brightColor,buildInspectStyle:v7.generateInspectStyle,renderPopup:WV,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new UV({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=v7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(XV(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var xv={exports:{}},JV=xv.exports,C7;function eH(){return C7||(C7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(JV,function(){var t=null,r={};q();var i=[],s=function(N){if(N=N||{},N.seed!==void 0&&N.seed!==null&&N.seed===parseInt(N.seed,10))t=N.seed;else if(typeof N.seed=="string")t=Y(N.seed);else{if(N.seed!==void 0&&N.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,de;if(N.count!==null&&N.count!==void 0){for(var we=N.count,fe=[],be=0;be<N.count;be++)i.push(!1);for(N.count=null;we>fe.length;){var Pe=s(N);t!==null&&(N.seed=t),fe.push(Pe)}return N.count=we,fe}return ie=a(N),he=o(ie,N),de=d(ie,he,N),g([ie,he,de],N)};function a(N){if(i.length>0){var ie=J(N.hue),he=k(ie),de=(ie[1]-ie[0])/i.length,we=parseInt((he-ie[0])/de);i[we]===!0?we=(we+2)%i.length:i[we]=!0;var fe=(ie[0]+we*de)%359,be=(ie[0]+(we+1)*de)%359;return ie=[fe,be],he=k(ie),he<0&&(he=360+he),he}else{var ie=E(N.hue);return he=k(ie),he<0&&(he=360+he),he}}function o(N,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return k([0,100]);var he=S(N),de=he[0],we=he[1];switch(ie.luminosity){case"bright":de=55;break;case"dark":de=we-10;break;case"light":we=55;break}return k([de,we])}function d(N,ie,he){var de=b(N,ie),we=100;switch(he.luminosity){case"dark":we=de+20;break;case"light":de=(we+de)/2;break;case"random":de=0,we=100;break}return k([de,we])}function g(N,ie){switch(ie.format){case"hsvArray":return N;case"hslArray":return X(N);case"hsl":var he=X(N);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var de=X(N),be=ie.alpha||Math.random();return"hsla("+de[0]+", "+de[1]+"%, "+de[2]+"%, "+be+")";case"rgbArray":return Q(N);case"rgb":var we=Q(N);return"rgb("+we.join(", ")+")";case"rgba":var fe=Q(N),be=ie.alpha||Math.random();return"rgba("+fe.join(", ")+", "+be+")";default:return U(N)}}function b(N,ie){for(var he=O(N).lowerBounds,de=0;de<he.length-1;de++){var we=he[de][0],fe=he[de][1],be=he[de+1][0],Pe=he[de+1][1];if(ie>=we&&ie<=be){var pe=(Pe-fe)/(be-we),it=fe-pe*we;return pe*ie+it}}return 0}function E(N){if(typeof parseInt(N)=="number"){var ie=parseInt(N);if(ie<360&&ie>0)return[ie,ie]}if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var de=re(N)[0];return[de,de]}}return[0,360]}function S(N){return O(N).saturationRange}function O(N){N>=334&&N<=360&&(N-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&N>=he.hueRange[0]&&N<=he.hueRange[1])return r[ie]}return"Color not found"}function k(N){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(N[0]+he*(N[1]+1-N[0]))}else{var de=N[1]||1,we=N[0]||0;t=(t*9301+49297)%233280;var fe=t/233280;return Math.floor(we+fe*(de-we))}}function U(N){var ie=Q(N);function he(we){var fe=we.toString(16);return fe.length==1?"0"+fe:fe}var de="#"+he(ie[0])+he(ie[1])+he(ie[2]);return de}function z(N,ie,he){var de=he[0][0],we=he[he.length-1][0],fe=he[he.length-1][1],be=he[0][1];r[N]={hueRange:ie,lowerBounds:he,saturationRange:[de,we],brightnessRange:[fe,be]}}function q(){z("monochrome",null,[[0,0],[100,0]]),z("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),z("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),z("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),z("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),z("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),z("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),z("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function Q(N){var ie=N[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=N[1]/100,de=N[2]/100,we=Math.floor(ie*6),fe=ie*6-we,be=de*(1-he),Pe=de*(1-fe*he),pe=de*(1-(1-fe)*he),it=256,We=256,$e=256;switch(we){case 0:it=de,We=pe,$e=be;break;case 1:it=Pe,We=de,$e=be;break;case 2:it=be,We=de,$e=pe;break;case 3:it=be,We=Pe,$e=de;break;case 4:it=pe,We=be,$e=de;break;case 5:it=de,We=be,$e=Pe;break}var ht=[Math.floor(it*255),Math.floor(We*255),Math.floor($e*255)];return ht}function re(N){N=N.replace(/^#/,""),N=N.length===3?N.replace(/(.)/g,"$1$1"):N;var ie=parseInt(N.substr(0,2),16)/255,he=parseInt(N.substr(2,2),16)/255,de=parseInt(N.substr(4,2),16)/255,we=Math.max(ie,he,de),fe=we-Math.min(ie,he,de),be=we?fe/we:0;switch(we){case ie:return[60*((he-de)/fe%6)||0,be,we];case he:return[60*((de-ie)/fe+2)||0,be,we];case de:return[60*((ie-he)/fe+4)||0,be,we]}}function X(N){var ie=N[0],he=N[1]/100,de=N[2]/100,we=(2-he)*de;return[ie,Math.round(he*de/(we<1?we:2-we)*1e4)/100,we/2*100]}function Y(N){for(var ie=0,he=0;he!==N.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=N.charCodeAt(he);return ie}function J(N){if(isNaN(N)){if(typeof N=="string"){if(r[N]){var he=r[N];if(he.hueRange)return he.hueRange}else if(N.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var de=re(N)[0];return O(de).hueRange}}}else{var ie=parseInt(N);if(ie<360&&ie>0)return O(N).hueRange}return[0,360]}return s})}(xv,xv.exports)),xv.exports}var tH=eH();const nH=La(tH);function rH(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${nH({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const cU={brightColor:rH};var e4={exports:{}},t4,b7;function iH(){if(b7)return t4;b7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return t4=n,t4}var n4,x7;function oH(){if(x7)return n4;x7=1;var n=iH();function e(){}function t(){}return t.resetWarningCache=e,n4=function(){function r(a,o,d,g,b,E){if(E!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},n4}var w7;function dp(){return w7||(w7=1,e4.exports=oH()()),e4.exports}var sH=dp();const fi=La(sH);var M7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function aH(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var k0=function(e,t){var r=e.children,i=e.color,s=e.size,a=e.style,o=e.width,d=e.height,g=aH(e,["children","color","size","style","width","height"]),b=t.reactIconBase,E=b===void 0?{}:b,S=s||E.size||"1em";return Zn.createElement("svg",M7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:d||S,width:o||S},E,g,{style:M7({verticalAlign:"middle",color:i||E.color},E.style||{},a)}))};k0.propTypes={color:fi.string,size:fi.oneOfType([fi.string,fi.number]),width:fi.oneOfType([fi.string,fi.number]),height:fi.oneOfType([fi.string,fi.number]),style:fi.object};k0.contextTypes={reactIconBase:fi.shape(k0.propTypes)};function qb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return qb=function(){return a},a}qb();class lH extends Zn.Component{render(){return qb().f[0]++,qb().s[0]++,le.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function Yb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Yb=function(){return a},a}Yb();class LC extends Zn.Component{render(){return Yb().f[0]++,Yb().s[0]++,le.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function $b(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return $b=function(){return a},a}$b();class uH extends Zn.Component{render(){return $b().f[0]++,$b().s[0]++,le.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:le.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function Vb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vb=function(){return a},a}Vb();class S7 extends Zn.Component{render(){return Vb().f[0]++,Vb().s[0]++,le.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function Hb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Hb=function(){return a},a}Hb();class AH extends Zn.Component{render(){return Hb().f[0]++,Hb().s[0]++,le.jsx(k0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function ky(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function cH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function dH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function hH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function fH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function pH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function mH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function gH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function yH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function vH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function dU(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function _H(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function _6(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function CH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function bH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function xH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function E7(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function wH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function MH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function SH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function EH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function BH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function OH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function IH(n){return eu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function Zb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Zb=function(){return a},a}Zb();class kH extends Zn.Component{render(){return Zb().f[0]++,Zb().s[0]++,le.jsx(IH,{...this.props})}}function Dl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Dl=function(){return a},a}Dl();class hU extends Zn.Component{render(){Dl().f[0]++;const e=(Dl().s[0]++,{style:this.props.style});switch(Dl().s[1]++,this.props.type){case"fill-extrusion":return Dl().b[0][0]++,Dl().s[2]++,le.jsx(S7,{...e});case"raster":return Dl().b[0][1]++,Dl().s[3]++,le.jsx(LC,{...e});case"hillshade":return Dl().b[0][2]++,Dl().s[4]++,le.jsx(LC,{...e});case"heatmap":return Dl().b[0][3]++,Dl().s[5]++,le.jsx(LC,{...e});case"fill":return Dl().b[0][4]++,Dl().s[6]++,le.jsx(LC,{...e});case"background":return Dl().b[0][5]++,Dl().s[7]++,le.jsx(S7,{...e});case"line":return Dl().b[0][6]++,Dl().s[8]++,le.jsx(lH,{...e});case"symbol":return Dl().b[0][7]++,Dl().s[9]++,le.jsx(uH,{...e});case"circle":return Dl().b[0][8]++,Dl().s[10]++,le.jsx(AH,{...e});default:return Dl().b[0][9]++,Dl().s[11]++,le.jsx(kH,{...e})}}}function ti(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ti=function(){return a},a}ti();function TH(n){ti().f[0]++;const e=(ti().s[0]++,{}),t=(ti().s[1]++,{});return ti().s[2]++,n.forEach(r=>{ti().f[1]++;const i=(ti().s[3]++,r.layer["source-layer"]);if(ti().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){ti().b[0][0]++,ti().s[5]++,t[r.layer.id]++;const s=(ti().s[6]++,e[i].find(a=>(ti().f[2]++,ti().s[7]++,a.layer.id===r.layer.id)));ti().s[8]++,s.counter=t[r.layer.id]}else ti().b[0][1]++,ti().s[9]++,e[i]=(ti().b[1][0]++,e[i]||(ti().b[1][1]++,[])),ti().s[10]++,e[i].push(r),ti().s[11]++,t[r.layer.id]=1}),ti().s[12]++,e}class fU extends Zn.Component{_getFeatureColor(e,t){if(ti().f[3]++,ti().s[13]++,e.layer.paint)ti().b[2][1]++;else{ti().b[2][0]++,ti().s[14]++;return}ti().s[15]++;try{const r=(ti().s[16]++,e.layer.paint);return ti().s[17]++,ti().b[4][0]++,"text-color"in r&&(ti().b[4][1]++,r["text-color"])?(ti().b[3][0]++,ti().s[18]++,String(r["text-color"])):(ti().b[3][1]++,ti().s[19]++,ti().b[6][0]++,"fill-color"in r&&(ti().b[6][1]++,r["fill-color"])?(ti().b[5][0]++,ti().s[20]++,String(r["fill-color"])):(ti().b[5][1]++,ti().s[21]++,ti().b[8][0]++,"line-color"in r&&(ti().b[8][1]++,r["line-color"])?(ti().b[7][0]++,ti().s[22]++,String(r["line-color"])):(ti().b[7][1]++,ti().s[23]++,ti().b[10][0]++,"fill-extrusion-color"in r&&(ti().b[10][1]++,r["fill-extrusion-color"])?(ti().b[9][0]++,ti().s[24]++,String(r["fill-extrusion-color"])):(ti().b[9][1]++,ti().s[25]++,"black"))))}catch(r){return ti().s[26]++,console.warn("Unable to get feature color, error:",r),ti().s[27]++,"black"}}render(){ti().f[4]++;const e=(ti().s[28]++,TH(this.props.features)),t=(ti().s[29]++,Object.keys(e).map(r=>{ti().f[5]++;const i=(ti().s[30]++,e[r].map((s,a)=>{ti().f[6]++;const o=(ti().s[31]++,this._getFeatureColor(s,this.props.zoom));return ti().s[32]++,le.jsxs("div",{className:"maputnik-popup-layer",children:[le.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),le.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{ti().f[7]++,ti().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(ti().b[11][0]++,s.layer.type&&(ti().b[11][1]++,le.jsx(hU,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(ti().b[12][0]++,s.counter&&(ti().b[12][1]++,le.jsxs("span",{children:["  ",s.counter]})))]})]},a)}));return ti().s[34]++,le.jsxs("div",{children:[le.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return ti().s[35]++,le.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function Yi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Yi=function(){return a},a}Yi();function B7(n){return Yi().f[0]++,Yi().s[0]++,Yi().b[1][0]++,typeof n>"u"||(Yi().b[1][1]++,n===null)?(Yi().b[0][0]++,Yi().s[1]++,n):(Yi().b[0][1]++,Yi().s[2]++,n instanceof Date?(Yi().b[2][0]++,Yi().s[3]++,n.toLocaleString()):(Yi().b[2][1]++,Yi().s[4]++,Yi().b[4][0]++,typeof n=="object"||(Yi().b[4][1]++,typeof n=="number")||(Yi().b[4][2]++,typeof n=="string")?(Yi().b[3][0]++,Yi().s[5]++,n.toString()):(Yi().b[3][1]++,Yi().s[6]++,n)))}function r4(n,e){return Yi().f[1]++,Yi().s[7]++,le.jsxs("tr",{children:[le.jsx("td",{className:"maputnik-popup-table-cell",children:n}),le.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function PH(n,e){return Yi().f[2]++,Yi().s[8]++,le.jsxs(Zn.Fragment,{children:[le.jsx("tr",{children:le.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],(Yi().b[5][0]++,n.inspectModeCounter&&(Yi().b[5][1]++,le.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),r4("$type",n.geometry.type),r4("$id",B7(n.id)),Object.keys(n.properties).map(t=>{Yi().f[3]++;const r=(Yi().s[9]++,n.properties[t]);return Yi().s[10]++,r4(t,B7(r))})]},e)}function RH(n){Yi().f[4]++;const e=(Yi().s[11]++,[]);return Yi().s[12]++,n.forEach(t=>{Yi().f[5]++;const r=(Yi().s[13]++,e.findIndex(i=>(Yi().f[6]++,Yi().s[14]++,Yi().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&(Yi().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));Yi().s[15]++,r===-1?(Yi().b[7][0]++,Yi().s[16]++,e.push(t)):(Yi().b[7][1]++,Yi().s[17]++,"inspectModeCounter"in e[r]?(Yi().b[8][0]++,Yi().s[18]++,e[r].inspectModeCounter++):(Yi().b[8][1]++,Yi().s[19]++,e[r].inspectModeCounter=2))}),Yi().s[20]++,e}class KH extends Zn.Component{render(){Yi().f[7]++;const e=(Yi().s[21]++,RH(this.props.features));return Yi().s[22]++,le.jsx("div",{className:"maputnik-feature-property-popup",children:le.jsx("table",{className:"maputnik-popup-table",children:le.jsx("tbody",{children:e.map(PH)})})})}}var i4={exports:{}},o4,O7;function pU(){return O7||(O7=1,o4={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),o4}var s4={exports:{}},a4,I7;function DH(){return I7||(I7=1,a4=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),a4}var k7;function LH(){if(k7)return s4.exports;k7=1;var n=DH(),e=Array.prototype.concat,t=Array.prototype.slice,r=s4.exports=function(s){for(var a=[],o=0,d=s.length;o<d;o++){var g=s[o];n(g)?a=e.call(a,t.call(g)):a.push(g)}return a};return r.wrap=function(i){return function(){return i(r(arguments))}},s4.exports}var T7;function FH(){if(T7)return i4.exports;T7=1;var n=pU(),e=LH(),t=Object.hasOwnProperty,r=Object.create(null);for(var i in n)t.call(n,i)&&(r[n[i]]=i);var s=i4.exports={to:{},get:{}};s.get=function(d){var g=d.substring(0,3).toLowerCase(),b,E;switch(g){case"hsl":b=s.get.hsl(d),E="hsl";break;case"hwb":b=s.get.hwb(d),E="hwb";break;default:b=s.get.rgb(d),E="rgb";break}return b?{model:E,value:b}:null},s.get.rgb=function(d){if(!d)return null;var g=/^#([a-f0-9]{3,4})$/i,b=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,E=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,S=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,O=/^(\w+)$/,k=[0,0,0,1],U,z,q;if(U=d.match(b)){for(q=U[2],U=U[1],z=0;z<3;z++){var Q=z*2;k[z]=parseInt(U.slice(Q,Q+2),16)}q&&(k[3]=parseInt(q,16)/255)}else if(U=d.match(g)){for(U=U[1],q=U[3],z=0;z<3;z++)k[z]=parseInt(U[z]+U[z],16);q&&(k[3]=parseInt(q+q,16)/255)}else if(U=d.match(E)){for(z=0;z<3;z++)k[z]=parseInt(U[z+1],0);U[4]&&(U[5]?k[3]=parseFloat(U[4])*.01:k[3]=parseFloat(U[4]))}else if(U=d.match(S)){for(z=0;z<3;z++)k[z]=Math.round(parseFloat(U[z+1])*2.55);U[4]&&(U[5]?k[3]=parseFloat(U[4])*.01:k[3]=parseFloat(U[4]))}else return(U=d.match(O))?U[1]==="transparent"?[0,0,0,0]:t.call(n,U[1])?(k=n[U[1]],k[3]=1,k):null:null;for(z=0;z<3;z++)k[z]=a(k[z],0,255);return k[3]=a(k[3],0,1),k},s.get.hsl=function(d){if(!d)return null;var g=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=d.match(g);if(b){var E=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,O=a(parseFloat(b[2]),0,100),k=a(parseFloat(b[3]),0,100),U=a(isNaN(E)?1:E,0,1);return[S,O,k,U]}return null},s.get.hwb=function(d){if(!d)return null;var g=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,b=d.match(g);if(b){var E=parseFloat(b[4]),S=(parseFloat(b[1])%360+360)%360,O=a(parseFloat(b[2]),0,100),k=a(parseFloat(b[3]),0,100),U=a(isNaN(E)?1:E,0,1);return[S,O,k,U]}return null},s.to.hex=function(){var d=e(arguments);return"#"+o(d[0])+o(d[1])+o(d[2])+(d[3]<1?o(Math.round(d[3]*255)):"")},s.to.rgb=function(){var d=e(arguments);return d.length<4||d[3]===1?"rgb("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+")":"rgba("+Math.round(d[0])+", "+Math.round(d[1])+", "+Math.round(d[2])+", "+d[3]+")"},s.to.rgb.percent=function(){var d=e(arguments),g=Math.round(d[0]/255*100),b=Math.round(d[1]/255*100),E=Math.round(d[2]/255*100);return d.length<4||d[3]===1?"rgb("+g+"%, "+b+"%, "+E+"%)":"rgba("+g+"%, "+b+"%, "+E+"%, "+d[3]+")"},s.to.hsl=function(){var d=e(arguments);return d.length<4||d[3]===1?"hsl("+d[0]+", "+d[1]+"%, "+d[2]+"%)":"hsla("+d[0]+", "+d[1]+"%, "+d[2]+"%, "+d[3]+")"},s.to.hwb=function(){var d=e(arguments),g="";return d.length>=4&&d[3]!==1&&(g=", "+d[3]),"hwb("+d[0]+", "+d[1]+"%, "+d[2]+"%"+g+")"},s.to.keyword=function(d){return r[d.slice(0,3)]};function a(d,g,b){return Math.min(Math.max(g,d),b)}function o(d){var g=Math.round(d).toString(16).toUpperCase();return g.length<2?"0"+g:g}return i4.exports}var l4,P7;function mU(){if(P7)return l4;P7=1;const n=pU(),e={};for(const i of Object.keys(n))e[n[i]]=i;const t={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};l4=t;for(const i of Object.keys(t)){if(!("channels"in t[i]))throw new Error("missing channels property: "+i);if(!("labels"in t[i]))throw new Error("missing channel labels property: "+i);if(t[i].labels.length!==t[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:s,labels:a}=t[i];delete t[i].channels,delete t[i].labels,Object.defineProperty(t[i],"channels",{value:s}),Object.defineProperty(t[i],"labels",{value:a})}t.rgb.hsl=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.min(s,a,o),g=Math.max(s,a,o),b=g-d;let E,S;g===d?E=0:s===g?E=(a-o)/b:a===g?E=2+(o-s)/b:o===g&&(E=4+(s-a)/b),E=Math.min(E*60,360),E<0&&(E+=360);const O=(d+g)/2;return g===d?S=0:O<=.5?S=b/(g+d):S=b/(2-g-d),[E,S*100,O*100]},t.rgb.hsv=function(i){let s,a,o,d,g;const b=i[0]/255,E=i[1]/255,S=i[2]/255,O=Math.max(b,E,S),k=O-Math.min(b,E,S),U=function(z){return(O-z)/6/k+1/2};return k===0?(d=0,g=0):(g=k/O,s=U(b),a=U(E),o=U(S),b===O?d=o-a:E===O?d=1/3+s-o:S===O&&(d=2/3+a-s),d<0?d+=1:d>1&&(d-=1)),[d*360,g*100,O*100]},t.rgb.hwb=function(i){const s=i[0],a=i[1];let o=i[2];const d=t.rgb.hsl(i)[0],g=1/255*Math.min(s,Math.min(a,o));return o=1-1/255*Math.max(s,Math.max(a,o)),[d,g*100,o*100]},t.rgb.cmyk=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.min(1-s,1-a,1-o),g=(1-s-d)/(1-d)||0,b=(1-a-d)/(1-d)||0,E=(1-o-d)/(1-d)||0;return[g*100,b*100,E*100,d*100]};function r(i,s){return(i[0]-s[0])**2+(i[1]-s[1])**2+(i[2]-s[2])**2}return t.rgb.keyword=function(i){const s=e[i];if(s)return s;let a=1/0,o;for(const d of Object.keys(n)){const g=n[d],b=r(i,g);b<a&&(a=b,o=d)}return o},t.keyword.rgb=function(i){return n[i]},t.rgb.xyz=function(i){let s=i[0]/255,a=i[1]/255,o=i[2]/255;s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;const d=s*.4124+a*.3576+o*.1805,g=s*.2126+a*.7152+o*.0722,b=s*.0193+a*.1192+o*.9505;return[d*100,g*100,b*100]},t.rgb.lab=function(i){const s=t.rgb.xyz(i);let a=s[0],o=s[1],d=s[2];a/=95.047,o/=100,d/=108.883,a=a>.008856?a**(1/3):7.787*a+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,d=d>.008856?d**(1/3):7.787*d+16/116;const g=116*o-16,b=500*(a-o),E=200*(o-d);return[g,b,E]},t.hsl.rgb=function(i){const s=i[0]/360,a=i[1]/100,o=i[2]/100;let d,g,b;if(a===0)return b=o*255,[b,b,b];o<.5?d=o*(1+a):d=o+a-o*a;const E=2*o-d,S=[0,0,0];for(let O=0;O<3;O++)g=s+1/3*-(O-1),g<0&&g++,g>1&&g--,6*g<1?b=E+(d-E)*6*g:2*g<1?b=d:3*g<2?b=E+(d-E)*(2/3-g)*6:b=E,S[O]=b*255;return S},t.hsl.hsv=function(i){const s=i[0];let a=i[1]/100,o=i[2]/100,d=a;const g=Math.max(o,.01);o*=2,a*=o<=1?o:2-o,d*=g<=1?g:2-g;const b=(o+a)/2,E=o===0?2*d/(g+d):2*a/(o+a);return[s,E*100,b*100]},t.hsv.rgb=function(i){const s=i[0]/60,a=i[1]/100;let o=i[2]/100;const d=Math.floor(s)%6,g=s-Math.floor(s),b=255*o*(1-a),E=255*o*(1-a*g),S=255*o*(1-a*(1-g));switch(o*=255,d){case 0:return[o,S,b];case 1:return[E,o,b];case 2:return[b,o,S];case 3:return[b,E,o];case 4:return[S,b,o];case 5:return[o,b,E]}},t.hsv.hsl=function(i){const s=i[0],a=i[1]/100,o=i[2]/100,d=Math.max(o,.01);let g,b;b=(2-a)*o;const E=(2-a)*d;return g=a*d,g/=E<=1?E:2-E,g=g||0,b/=2,[s,g*100,b*100]},t.hwb.rgb=function(i){const s=i[0]/360;let a=i[1]/100,o=i[2]/100;const d=a+o;let g;d>1&&(a/=d,o/=d);const b=Math.floor(6*s),E=1-o;g=6*s-b,b&1&&(g=1-g);const S=a+g*(E-a);let O,k,U;switch(b){default:case 6:case 0:O=E,k=S,U=a;break;case 1:O=S,k=E,U=a;break;case 2:O=a,k=E,U=S;break;case 3:O=a,k=S,U=E;break;case 4:O=S,k=a,U=E;break;case 5:O=E,k=a,U=S;break}return[O*255,k*255,U*255]},t.cmyk.rgb=function(i){const s=i[0]/100,a=i[1]/100,o=i[2]/100,d=i[3]/100,g=1-Math.min(1,s*(1-d)+d),b=1-Math.min(1,a*(1-d)+d),E=1-Math.min(1,o*(1-d)+d);return[g*255,b*255,E*255]},t.xyz.rgb=function(i){const s=i[0]/100,a=i[1]/100,o=i[2]/100;let d,g,b;return d=s*3.2406+a*-1.5372+o*-.4986,g=s*-.9689+a*1.8758+o*.0415,b=s*.0557+a*-.204+o*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,b=b>.0031308?1.055*b**(1/2.4)-.055:b*12.92,d=Math.min(Math.max(0,d),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[d*255,g*255,b*255]},t.xyz.lab=function(i){let s=i[0],a=i[1],o=i[2];s/=95.047,a/=100,o/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const d=116*a-16,g=500*(s-a),b=200*(a-o);return[d,g,b]},t.lab.xyz=function(i){const s=i[0],a=i[1],o=i[2];let d,g,b;g=(s+16)/116,d=a/500+g,b=g-o/200;const E=g**3,S=d**3,O=b**3;return g=E>.008856?E:(g-16/116)/7.787,d=S>.008856?S:(d-16/116)/7.787,b=O>.008856?O:(b-16/116)/7.787,d*=95.047,g*=100,b*=108.883,[d,g,b]},t.lab.lch=function(i){const s=i[0],a=i[1],o=i[2];let d;d=Math.atan2(o,a)*360/2/Math.PI,d<0&&(d+=360);const b=Math.sqrt(a*a+o*o);return[s,b,d]},t.lch.lab=function(i){const s=i[0],a=i[1],d=i[2]/360*2*Math.PI,g=a*Math.cos(d),b=a*Math.sin(d);return[s,g,b]},t.rgb.ansi16=function(i,s=null){const[a,o,d]=i;let g=s===null?t.rgb.hsv(i)[2]:s;if(g=Math.round(g/50),g===0)return 30;let b=30+(Math.round(d/255)<<2|Math.round(o/255)<<1|Math.round(a/255));return g===2&&(b+=60),b},t.hsv.ansi16=function(i){return t.rgb.ansi16(t.hsv.rgb(i),i[2])},t.rgb.ansi256=function(i){const s=i[0],a=i[1],o=i[2];return s===a&&a===o?s<8?16:s>248?231:Math.round((s-8)/247*24)+232:16+36*Math.round(s/255*5)+6*Math.round(a/255*5)+Math.round(o/255*5)},t.ansi16.rgb=function(i){let s=i%10;if(s===0||s===7)return i>50&&(s+=3.5),s=s/10.5*255,[s,s,s];const a=(~~(i>50)+1)*.5,o=(s&1)*a*255,d=(s>>1&1)*a*255,g=(s>>2&1)*a*255;return[o,d,g]},t.ansi256.rgb=function(i){if(i>=232){const g=(i-232)*10+8;return[g,g,g]}i-=16;let s;const a=Math.floor(i/36)/5*255,o=Math.floor((s=i%36)/6)/5*255,d=s%6/5*255;return[a,o,d]},t.rgb.hex=function(i){const a=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(a.length)+a},t.hex.rgb=function(i){const s=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];let a=s[0];s[0].length===3&&(a=a.split("").map(E=>E+E).join(""));const o=parseInt(a,16),d=o>>16&255,g=o>>8&255,b=o&255;return[d,g,b]},t.rgb.hcg=function(i){const s=i[0]/255,a=i[1]/255,o=i[2]/255,d=Math.max(Math.max(s,a),o),g=Math.min(Math.min(s,a),o),b=d-g;let E,S;return b<1?E=g/(1-b):E=0,b<=0?S=0:d===s?S=(a-o)/b%6:d===a?S=2+(o-s)/b:S=4+(s-a)/b,S/=6,S%=1,[S*360,b*100,E*100]},t.hsl.hcg=function(i){const s=i[1]/100,a=i[2]/100,o=a<.5?2*s*a:2*s*(1-a);let d=0;return o<1&&(d=(a-.5*o)/(1-o)),[i[0],o*100,d*100]},t.hsv.hcg=function(i){const s=i[1]/100,a=i[2]/100,o=s*a;let d=0;return o<1&&(d=(a-o)/(1-o)),[i[0],o*100,d*100]},t.hcg.rgb=function(i){const s=i[0]/360,a=i[1]/100,o=i[2]/100;if(a===0)return[o*255,o*255,o*255];const d=[0,0,0],g=s%1*6,b=g%1,E=1-b;let S=0;switch(Math.floor(g)){case 0:d[0]=1,d[1]=b,d[2]=0;break;case 1:d[0]=E,d[1]=1,d[2]=0;break;case 2:d[0]=0,d[1]=1,d[2]=b;break;case 3:d[0]=0,d[1]=E,d[2]=1;break;case 4:d[0]=b,d[1]=0,d[2]=1;break;default:d[0]=1,d[1]=0,d[2]=E}return S=(1-a)*o,[(a*d[0]+S)*255,(a*d[1]+S)*255,(a*d[2]+S)*255]},t.hcg.hsv=function(i){const s=i[1]/100,a=i[2]/100,o=s+a*(1-s);let d=0;return o>0&&(d=s/o),[i[0],d*100,o*100]},t.hcg.hsl=function(i){const s=i[1]/100,o=i[2]/100*(1-s)+.5*s;let d=0;return o>0&&o<.5?d=s/(2*o):o>=.5&&o<1&&(d=s/(2*(1-o))),[i[0],d*100,o*100]},t.hcg.hwb=function(i){const s=i[1]/100,a=i[2]/100,o=s+a*(1-s);return[i[0],(o-s)*100,(1-o)*100]},t.hwb.hcg=function(i){const s=i[1]/100,o=1-i[2]/100,d=o-s;let g=0;return d<1&&(g=(o-d)/(1-d)),[i[0],d*100,g*100]},t.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]},t.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]},t.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]},t.gray.hsl=function(i){return[0,0,i[0]]},t.gray.hsv=t.gray.hsl,t.gray.hwb=function(i){return[0,100,i[0]]},t.gray.cmyk=function(i){return[0,0,0,i[0]]},t.gray.lab=function(i){return[i[0],0,0]},t.gray.hex=function(i){const s=Math.round(i[0]/100*255)&255,o=((s<<16)+(s<<8)+s).toString(16).toUpperCase();return"000000".substring(o.length)+o},t.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]},l4}var u4,R7;function UH(){if(R7)return u4;R7=1;const n=mU();function e(){const s={},a=Object.keys(n);for(let o=a.length,d=0;d<o;d++)s[a[d]]={distance:-1,parent:null};return s}function t(s){const a=e(),o=[s];for(a[s].distance=0;o.length;){const d=o.pop(),g=Object.keys(n[d]);for(let b=g.length,E=0;E<b;E++){const S=g[E],O=a[S];O.distance===-1&&(O.distance=a[d].distance+1,O.parent=d,o.unshift(S))}}return a}function r(s,a){return function(o){return a(s(o))}}function i(s,a){const o=[a[s].parent,s];let d=n[a[s].parent][s],g=a[s].parent;for(;a[g].parent;)o.unshift(a[g].parent),d=r(n[a[g].parent][g],d),g=a[g].parent;return d.conversion=o,d}return u4=function(s){const a=t(s),o={},d=Object.keys(a);for(let g=d.length,b=0;b<g;b++){const E=d[b];a[E].parent!==null&&(o[E]=i(E,a))}return o},u4}var A4,K7;function zH(){if(K7)return A4;K7=1;const n=mU(),e=UH(),t={},r=Object.keys(n);function i(a){const o=function(...d){const g=d[0];return g==null?g:(g.length>1&&(d=g),a(d))};return"conversion"in a&&(o.conversion=a.conversion),o}function s(a){const o=function(...d){const g=d[0];if(g==null)return g;g.length>1&&(d=g);const b=a(d);if(typeof b=="object")for(let E=b.length,S=0;S<E;S++)b[S]=Math.round(b[S]);return b};return"conversion"in a&&(o.conversion=a.conversion),o}return r.forEach(a=>{t[a]={},Object.defineProperty(t[a],"channels",{value:n[a].channels}),Object.defineProperty(t[a],"labels",{value:n[a].labels});const o=e(a);Object.keys(o).forEach(g=>{const b=o[g];t[a][g]=s(b),t[a][g].raw=i(b)})}),A4=t,A4}var c4,D7;function jH(){if(D7)return c4;D7=1;const n=FH(),e=zH(),t=["keyword","gray","hex"],r={};for(const S of Object.keys(e))r[[...e[S].labels].sort().join("")]=S;const i={};function s(S,O){if(!(this instanceof s))return new s(S,O);if(O&&O in t&&(O=null),O&&!(O in e))throw new Error("Unknown model: "+O);let k,U;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof s)this.model=S.model,this.color=[...S.color],this.valpha=S.valpha;else if(typeof S=="string"){const z=n.get(S);if(z===null)throw new Error("Unable to parse color from string: "+S);this.model=z.model,U=e[this.model].channels,this.color=z.value.slice(0,U),this.valpha=typeof z.value[U]=="number"?z.value[U]:1}else if(S.length>0){this.model=O||"rgb",U=e[this.model].channels;const z=Array.prototype.slice.call(S,0,U);this.color=E(z,U),this.valpha=typeof S[U]=="number"?S[U]:1}else if(typeof S=="number")this.model="rgb",this.color=[S>>16&255,S>>8&255,S&255],this.valpha=1;else{this.valpha=1;const z=Object.keys(S);"alpha"in S&&(z.splice(z.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);const q=z.sort().join("");if(!(q in r))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=r[q];const{labels:Q}=e[this.model],re=[];for(k=0;k<Q.length;k++)re.push(S[Q[k]]);this.color=E(re)}if(i[this.model])for(U=e[this.model].channels,k=0;k<U;k++){const z=i[this.model][k];z&&(this.color[k]=z(this.color[k]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}s.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(S){let O=this.model in n.to?this:this.rgb();O=O.round(typeof S=="number"?S:1);const k=O.valpha===1?O.color:[...O.color,this.valpha];return n.to[O.model](k)},percentString(S){const O=this.rgb().round(typeof S=="number"?S:1),k=O.valpha===1?O.color:[...O.color,this.valpha];return n.to.rgb.percent(k)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const S={},{channels:O}=e[this.model],{labels:k}=e[this.model];for(let U=0;U<O;U++)S[k[U]]=this.color[U];return this.valpha!==1&&(S.alpha=this.valpha),S},unitArray(){const S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,this.valpha!==1&&S.push(this.valpha),S},unitObject(){const S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,this.valpha!==1&&(S.alpha=this.valpha),S},round(S){return S=Math.max(S||0,0),new s([...this.color.map(o(S)),this.valpha],this.model)},alpha(S){return S!==void 0?new s([...this.color,Math.max(0,Math.min(1,S))],this.model):this.valpha},red:d("rgb",0,g(255)),green:d("rgb",1,g(255)),blue:d("rgb",2,g(255)),hue:d(["hsl","hsv","hsl","hwb","hcg"],0,S=>(S%360+360)%360),saturationl:d("hsl",1,g(100)),lightness:d("hsl",2,g(100)),saturationv:d("hsv",1,g(100)),value:d("hsv",2,g(100)),chroma:d("hcg",1,g(100)),gray:d("hcg",2,g(100)),white:d("hwb",1,g(100)),wblack:d("hwb",2,g(100)),cyan:d("cmyk",0,g(100)),magenta:d("cmyk",1,g(100)),yellow:d("cmyk",2,g(100)),black:d("cmyk",3,g(100)),x:d("xyz",0,g(95.047)),y:d("xyz",1,g(100)),z:d("xyz",2,g(108.833)),l:d("lab",0,g(100)),a:d("lab",1),b:d("lab",2),keyword(S){return S!==void 0?new s(S):e[this.model].keyword(this.color)},hex(S){return S!==void 0?new s(S):n.to.hex(this.rgb().round().color)},hexa(S){if(S!==void 0)return new s(S);const O=this.rgb().round().color;let k=Math.round(this.valpha*255).toString(16).toUpperCase();return k.length===1&&(k="0"+k),n.to.hex(O)+k},rgbNumber(){const S=this.rgb().color;return(S[0]&255)<<16|(S[1]&255)<<8|S[2]&255},luminosity(){const S=this.rgb().color,O=[];for(const[k,U]of S.entries()){const z=U/255;O[k]=z<=.04045?z/12.92:((z+.055)/1.055)**2.4}return .2126*O[0]+.7152*O[1]+.0722*O[2]},contrast(S){const O=this.luminosity(),k=S.luminosity();return O>k?(O+.05)/(k+.05):(k+.05)/(O+.05)},level(S){const O=this.contrast(S);return O>=7?"AAA":O>=4.5?"AA":""},isDark(){const S=this.rgb().color;return(S[0]*2126+S[1]*7152+S[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const S=this.rgb();for(let O=0;O<3;O++)S.color[O]=255-S.color[O];return S},lighten(S){const O=this.hsl();return O.color[2]+=O.color[2]*S,O},darken(S){const O=this.hsl();return O.color[2]-=O.color[2]*S,O},saturate(S){const O=this.hsl();return O.color[1]+=O.color[1]*S,O},desaturate(S){const O=this.hsl();return O.color[1]-=O.color[1]*S,O},whiten(S){const O=this.hwb();return O.color[1]+=O.color[1]*S,O},blacken(S){const O=this.hwb();return O.color[2]+=O.color[2]*S,O},grayscale(){const S=this.rgb().color,O=S[0]*.3+S[1]*.59+S[2]*.11;return s.rgb(O,O,O)},fade(S){return this.alpha(this.valpha-this.valpha*S)},opaquer(S){return this.alpha(this.valpha+this.valpha*S)},rotate(S){const O=this.hsl();let k=O.color[0];return k=(k+S)%360,k=k<0?360+k:k,O.color[0]=k,O},mix(S,O){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);const k=S.rgb(),U=this.rgb(),z=O===void 0?.5:O,q=2*z-1,Q=k.alpha()-U.alpha(),re=((q*Q===-1?q:(q+Q)/(1+q*Q))+1)/2,X=1-re;return s.rgb(re*k.red()+X*U.red(),re*k.green()+X*U.green(),re*k.blue()+X*U.blue(),k.alpha()*z+U.alpha()*(1-z))}};for(const S of Object.keys(e)){if(t.includes(S))continue;const{channels:O}=e[S];s.prototype[S]=function(...k){return this.model===S?new s(this):k.length>0?new s(k,S):new s([...b(e[this.model][S].raw(this.color)),this.valpha],S)},s[S]=function(...k){let U=k[0];return typeof U=="number"&&(U=E(k,O)),new s(U,S)}}function a(S,O){return Number(S.toFixed(O))}function o(S){return function(O){return a(O,S)}}function d(S,O,k){S=Array.isArray(S)?S:[S];for(const U of S)(i[U]||(i[U]=[]))[O]=k;return S=S[0],function(U){let z;return U!==void 0?(k&&(U=k(U)),z=this[S](),z.color[O]=U,z):(z=this[S]().color[O],k&&(z=k(z)),z)}}function g(S){return function(O){return Math.max(0,Math.min(S,O))}}function b(S){return Array.isArray(S)?S:[S]}function E(S,O){for(let k=0;k<O;k++)typeof S[k]!="number"&&(S[k]=0);return S}return c4=s,c4}var NH=jH();const C6=La(NH);function ea(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ea=function(){return a},a}ea();class GH{constructor(){On(this,"_map",(ea().s[0]++,void 0));On(this,"_container",(ea().s[1]++,void 0));On(this,"_textEl",(ea().s[2]++,null));ea().f[0]++}onAdd(e){return ea().f[1]++,ea().s[3]++,this._map=e,ea().s[4]++,this._container=document.createElement("div"),ea().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",ea().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),ea().s[7]++,this.setLabel("Zoom:"),ea().s[8]++,this.addEventListeners(),ea().s[9]++,this._container}updateZoomLevel(){ea().f[2]++,ea().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){ea().f[3]++,ea().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,ea().s[12]++,this._textEl=this._container.querySelector("span"),ea().s[13]++,this.updateZoomLevel()}addEventListeners(){ea().f[4]++,ea().s[14]++,this._map.on("render",()=>(ea().f[5]++,ea().s[15]++,this.updateZoomLevel())),ea().s[16]++,this._map.on("zoomIn",()=>(ea().f[6]++,ea().s[17]++,this.updateZoomLevel())),ea().s[18]++,this._map.on("zoomOut",()=>(ea().f[7]++,ea().s[19]++,this.updateZoomLevel()))}onRemove(){ea().f[8]++,ea().s[20]++,this._container.parentNode.removeChild(this._container),ea().s[21]++,this._map=void 0}}function b6(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function x6(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function w6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function WH(n,e){const t=[],r=[],i=[];function s(a){return{circle:e(a,.8),line:e(a,.6),polygon:e(a,.3),polygonOutline:e(a,.6),default:e(a,1)}}return Object.keys(n).forEach(a=>{const o=n[a];if(!o||o.length===0){const d=s(a);r.push(b6(d.circle,a)),i.push(w6(d.line,a)),t.push(x6(d.polygon,d.polygonOutline,a))}else o.forEach(d=>{const g=s(d);r.push(b6(g.circle,a,d)),i.push(w6(g.line,a,d)),t.push(x6(g.polygon,g.polygonOutline,a,d))})}),t.concat(i).concat(r)}function QH(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const a=n.sources[s];(a.type==="vector"||a.type==="geojson")&&(i[s]=a)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const d4={polygonLayer:x6,lineLayer:w6,circleLayer:b6,generateInspectStyle:QH,generateColoredLayers:WH};function mo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mo=function(){return a},a}mo();function h4(n,e){return mo().f[0]++,mo().s[0]++,n.type==="circle"?(mo().b[0][0]++,mo().s[1]++,n.paint["circle-radius"]=3):(mo().b[0][1]++,mo().s[2]++,n.type==="line"?(mo().b[1][0]++,mo().s[3]++,n.paint["line-width"]=2):mo().b[1][1]++),mo().s[4]++,"filter"in e?(mo().b[2][0]++,mo().s[5]++,n.filter=e.filter):(mo().b[2][1]++,mo().s[6]++,delete n.filter),mo().s[7]++,n.id=n.id+"_highlight",mo().s[8]++,n}function qH(n){if(mo().f[1]++,mo().s[9]++,mo().b[4][0]++,!n||(mo().b[4][1]++,n.type==="background")||(mo().b[4][2]++,n.type==="raster"))return mo().b[3][0]++,mo().s[10]++,null;mo().b[3][1]++;const e=(mo().s[11]++,mo().b[5][0]++,n["source-layer"]||(mo().b[5][1]++,"")),t=(mo().s[12]++,cU.brightColor(e,1));return mo().s[13]++,mo().b[7][0]++,n.type==="fill"||(mo().b[7][1]++,n.type==="fill-extrusion")?(mo().b[6][0]++,mo().s[14]++,h4(d4.polygonLayer(t,t,n.source,n["source-layer"]),n)):(mo().b[6][1]++,mo().s[15]++,mo().b[9][0]++,n.type==="symbol"||(mo().b[9][1]++,n.type==="circle")?(mo().b[8][0]++,mo().s[16]++,h4(d4.circleLayer(t,n.source,n["source-layer"]),n)):(mo().b[8][1]++,mo().s[17]++,n.type==="line"?(mo().b[10][0]++,mo().s[18]++,h4(d4.lineLayer(t,n.source,n["source-layer"]),n)):(mo().b[10][1]++,mo().s[19]++,null)))}function GB(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return GB=function(){return a},a}GB();GB().s[0]++;_v.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function f4(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(g){try{d(r.next(g))}catch(b){s(b)}}function o(g){try{d(r.throw(g))}catch(b){s(b)}}function d(g){g.done?i(g.value):new t(function(b){b(g.value)}).then(a,o)}d((r=r.apply(n,e||[])).next())})}var FC=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function lx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var p4,L7;function gU(){if(L7)return p4;L7=1,p4=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return p4}var m4={exports:{}},F7;function YH(){return F7||(F7=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var a=0,o=[],d=i.length,g=0,b=0,E=s.pre||"",S=s.post||"",O=s.caseSensitive&&i||i.toLowerCase(),k;r=s.caseSensitive&&r||r.toLowerCase();for(var U=0;U<d;U++)k=i[U],O[U]===r[a]?(k=E+k+S,a+=1,b+=1+b):b=0,g+=b,o[o.length]=k;return a===r.length?(g=O===r?1/0:g,{rendered:o.join(""),score:g}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(a,o,d,g){var b=o;s.extract&&(b=s.extract(o));var E=t.match(r,b,s);return E!=null&&(a[a.length]={string:E.rendered,score:E.score,index:d,original:o}),a},[]).sort(function(a,o){var d=o.score-a.score;return d||a.index-o.index}))}})()}(m4)),m4.exports}var g4,U7;function $H(){if(U7)return g4;U7=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},g4=n,g4}var y4,z7;function VH(){if(z7)return y4;z7=1;var n=gU(),e=YH(),t=$H(),r=function(i,s,a){return a=a||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},a),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var a=0;a<s.length&&(this.list.add(s[a]),a!==this.options.limit-1);a++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},a;this.options.filter?(a=e.filter(this.query,this.data,s),a=a.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):a=this.data.map((function(o){var d=this.render(o);return{original:o,string:d}}).bind(this)),i(a)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var a=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(a),d=o.lastIndexOf(this.query);d>-1;){var g=d+this.query.length;a=a.slice(0,d)+"<strong>"+a.slice(d,g)+"</strong>"+a.slice(g),d=o.slice(0,d).lastIndexOf(this.query)}return a},r.prototype.renderError=function(i){this.list.drawError(i)},y4=r,y4}var v4,j7;function HH(){if(j7)return v4;j7=1;var n=VH();return v4=n,typeof window<"u"&&(window.Suggestions=n),v4}var ZH=HH(),XH=lx(ZH),xb={exports:{}},JH=xb.exports,N7;function eZ(){return N7||(N7=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(JH,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(d){return d.match(t)||[]}function i(d){return r(d).filter(function(g,b){return g&&b})}function s(d){return d=r(d),{language:d[1]||e,extlang:d[2]||e,script:d[3]||e,region:d[4]||e}}function a(d,g,b){Object.defineProperty(d,g,{value:b,enumerable:!0})}function o(d,g,b){function E(S){return r(S)[d]||e}a(E,"pattern",g),a(s,b,E)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),a(s,"split",i),s})}(xb)),xb.exports}var tZ=eZ(),nZ=lx(tZ),_4,G7;function rZ(){if(G7)return _4;G7=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,d=typeof FC=="object"&&FC&&FC.Object===Object&&FC,g=typeof self=="object"&&self&&self.Object===Object&&self,b=d||g||Function("return this")(),E=Object.prototype,S=E.toString,O=Math.max,k=Math.min,U=function(){return b.Date.now()};function z(Y,J,N){var ie,he,de,we,fe,be,Pe=0,pe=!1,it=!1,We=!0;if(typeof Y!="function")throw new TypeError(n);J=X(J)||0,q(N)&&(pe=!!N.leading,it="maxWait"in N,de=it?O(X(N.maxWait)||0,J):de,We="trailing"in N?!!N.trailing:We);function $e(Kt){var Fe=ie,Te=he;return ie=he=void 0,Pe=Kt,we=Y.apply(Te,Fe),we}function ht(Kt){return Pe=Kt,fe=setTimeout(at,J),pe?$e(Kt):we}function De(Kt){var Fe=Kt-be,Te=Kt-Pe,Se=J-Fe;return it?k(Se,de-Te):Se}function Ne(Kt){var Fe=Kt-be,Te=Kt-Pe;return be===void 0||Fe>=J||Fe<0||it&&Te>=de}function at(){var Kt=U();if(Ne(Kt))return wt(Kt);fe=setTimeout(at,De(Kt))}function wt(Kt){return fe=void 0,We&&ie?$e(Kt):(ie=he=void 0,we)}function Ct(){fe!==void 0&&clearTimeout(fe),Pe=0,ie=be=he=fe=void 0}function ft(){return fe===void 0?we:wt(U())}function Lt(){var Kt=U(),Fe=Ne(Kt);if(ie=arguments,he=this,be=Kt,Fe){if(fe===void 0)return ht(be);if(it)return fe=setTimeout(at,J),$e(be)}return fe===void 0&&(fe=setTimeout(at,J)),we}return Lt.cancel=Ct,Lt.flush=ft,Lt}function q(Y){var J=typeof Y;return!!Y&&(J=="object"||J=="function")}function Q(Y){return!!Y&&typeof Y=="object"}function re(Y){return typeof Y=="symbol"||Q(Y)&&S.call(Y)==t}function X(Y){if(typeof Y=="number")return Y;if(re(Y))return e;if(q(Y)){var J=typeof Y.valueOf=="function"?Y.valueOf():Y;Y=q(J)?J+"":J}if(typeof Y!="string")return Y===0?Y:+Y;Y=Y.replace(r,"");var N=s.test(Y);return N||a.test(Y)?o(Y.slice(2),N?2:8):i.test(Y)?e:+Y}return _4=z,_4}var iZ=rZ(),oZ=lx(iZ),sZ=gU(),Jf=lx(sZ),UC={exports:{}},W7;function aZ(){if(W7)return UC.exports;W7=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(Y,J,N){return Function.prototype.apply.call(Y,J,N)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:t=function(Y){return Object.getOwnPropertyNames(Y)};function r(X){console&&console.warn&&console.warn(X)}var i=Number.isNaN||function(Y){return Y!==Y};function s(){s.init.call(this)}UC.exports=s,UC.exports.once=q,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(X){if(typeof X!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(X){if(typeof X!="number"||X<0||i(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");a=X}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||i(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this};function d(X){return X._maxListeners===void 0?s.defaultMaxListeners:X._maxListeners}s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(Y){for(var J=[],N=1;N<arguments.length;N++)J.push(arguments[N]);var ie=Y==="error",he=this._events;if(he!==void 0)ie=ie&&he.error===void 0;else if(!ie)return!1;if(ie){var de;if(J.length>0&&(de=J[0]),de instanceof Error)throw de;var we=new Error("Unhandled error."+(de?" ("+de.message+")":""));throw we.context=de,we}var fe=he[Y];if(fe===void 0)return!1;if(typeof fe=="function")e(fe,this,J);else for(var be=fe.length,Pe=k(fe,be),N=0;N<be;++N)e(Pe[N],this,J);return!0};function g(X,Y,J,N){var ie,he,de;if(o(J),he=X._events,he===void 0?(he=X._events=Object.create(null),X._eventsCount=0):(he.newListener!==void 0&&(X.emit("newListener",Y,J.listener?J.listener:J),he=X._events),de=he[Y]),de===void 0)de=he[Y]=J,++X._eventsCount;else if(typeof de=="function"?de=he[Y]=N?[J,de]:[de,J]:N?de.unshift(J):de.push(J),ie=d(X),ie>0&&de.length>ie&&!de.warned){de.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+de.length+" "+String(Y)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=X,we.type=Y,we.count=de.length,r(we)}return X}s.prototype.addListener=function(Y,J){return g(this,Y,J,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(Y,J){return g(this,Y,J,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(X,Y,J){var N={fired:!1,wrapFn:void 0,target:X,type:Y,listener:J},ie=b.bind(N);return ie.listener=J,N.wrapFn=ie,ie}s.prototype.once=function(Y,J){return o(J),this.on(Y,E(this,Y,J)),this},s.prototype.prependOnceListener=function(Y,J){return o(J),this.prependListener(Y,E(this,Y,J)),this},s.prototype.removeListener=function(Y,J){var N,ie,he,de,we;if(o(J),ie=this._events,ie===void 0)return this;if(N=ie[Y],N===void 0)return this;if(N===J||N.listener===J)--this._eventsCount===0?this._events=Object.create(null):(delete ie[Y],ie.removeListener&&this.emit("removeListener",Y,N.listener||J));else if(typeof N!="function"){for(he=-1,de=N.length-1;de>=0;de--)if(N[de]===J||N[de].listener===J){we=N[de].listener,he=de;break}if(he<0)return this;he===0?N.shift():U(N,he),N.length===1&&(ie[Y]=N[0]),ie.removeListener!==void 0&&this.emit("removeListener",Y,we||J)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(Y){var J,N,ie;if(N=this._events,N===void 0)return this;if(N.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):N[Y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete N[Y]),this;if(arguments.length===0){var he=Object.keys(N),de;for(ie=0;ie<he.length;++ie)de=he[ie],de!=="removeListener"&&this.removeAllListeners(de);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(J=N[Y],typeof J=="function")this.removeListener(Y,J);else if(J!==void 0)for(ie=J.length-1;ie>=0;ie--)this.removeListener(Y,J[ie]);return this};function S(X,Y,J){var N=X._events;if(N===void 0)return[];var ie=N[Y];return ie===void 0?[]:typeof ie=="function"?J?[ie.listener||ie]:[ie]:J?z(ie):k(ie,ie.length)}s.prototype.listeners=function(Y){return S(this,Y,!0)},s.prototype.rawListeners=function(Y){return S(this,Y,!1)},s.listenerCount=function(X,Y){return typeof X.listenerCount=="function"?X.listenerCount(Y):O.call(X,Y)},s.prototype.listenerCount=O;function O(X){var Y=this._events;if(Y!==void 0){var J=Y[X];if(typeof J=="function")return 1;if(J!==void 0)return J.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function k(X,Y){for(var J=new Array(Y),N=0;N<Y;++N)J[N]=X[N];return J}function U(X,Y){for(;Y+1<X.length;Y++)X[Y]=X[Y+1];X.pop()}function z(X){for(var Y=new Array(X.length),J=0;J<Y.length;++J)Y[J]=X[J].listener||X[J];return Y}function q(X,Y){return new Promise(function(J,N){function ie(de){X.removeListener(Y,he),N(de)}function he(){typeof X.removeListener=="function"&&X.removeListener("error",ie),J([].slice.call(arguments))}re(X,Y,he,{once:!0}),Y!=="error"&&Q(X,ie,{once:!0})})}function Q(X,Y,J){typeof X.on=="function"&&re(X,"error",Y,J)}function re(X,Y,J,N){if(typeof X.on=="function")N.once?X.once(Y,J):X.on(Y,J);else if(typeof X.addEventListener=="function")X.addEventListener(Y,function ie(he){N.once&&X.removeEventListener(Y,ie),J(he)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X)}return UC.exports}var lZ=aZ();const Q7={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},uZ={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},AZ=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class cZ{constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,a=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,d=s.substring(0,a),g=s.substring(a,a+o),b=s.substring(a+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+d+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+g+"</span>"+b+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new lZ.EventEmitter,this.options=Jf({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",oZ(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new XH(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,a=s.firstChild;r.appendChild(a)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target;if(!(s?s.value:""))return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s.value);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s.value,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s.value)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&Q7[e.properties.short_code])t=Jf({},this.options.flyTo),this._map&&this._map.fitBounds(Q7[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=Jf({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=Jf({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return f4(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),a=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const d=yield a;yield this._handleGeocodeResponse(d,s,t,r,o)}catch(d){this._handleGeocodeErrorResponse(d,o)}return a})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&AZ.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return f4(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let a={};e?a=e:a={type:"FeatureCollection",features:[]},a.config=t,this.fresh&&(this.fresh=!1),a.features=a.features?s.concat(a.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,a.features,t)||Promise.resolve([]):Promise.resolve([]);try{const g=yield o;a.features=a.features?g.concat(a.features):g}catch{}this.options.filter&&a.features.length&&(a.features=a.features.filter(this.options.filter));let d=[];"suggestions"in a?d=a.suggestions:"place"in a?d=[a.place]:d=a.features,d.length?(this._clearEl.style.display="block",this._typeahead.update(d),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(a.features.length>0||"place"in a)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",a))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return f4(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){this._renderMessage("<div class='maplibre-gl-geocoder--error'>There was an error reaching the server</div>")}_renderNoResults(){this._renderMessage("<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_getPlaceholderText(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){const e=this.options.language.split(",")[0],t=nZ.language(e),r=uZ[t];if(r)return r}return"Search"}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=Jf({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=Jf({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const a=Jf({},{},this.options.popup);i=new this._maplibregl.Popup(a).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=Jf({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=Jf(r,{element:s}));const a=new this._maplibregl.Marker(Jf({},r,{element:s}));let o;if(this.options.popup){const g=Jf({},{},this.options.popup);o=new this._maplibregl.Popup(g).setHTML(this.options.popupRender(i))}i.center?(a.setLngLat(i.center).addTo(this._map),this.options.popup&&a.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(a.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&a.setPopup(o)),this.resultMarkers.push(a)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function Mn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="3c5cfb4afb5483770f6919f2f66d47734075cb05",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:20,column:2},end:{line:20,column:36}},1:{start:{line:21,column:2},end:{line:21,column:19}},2:{start:{line:24,column:26},end:{line:30,column:3}},3:{start:{line:31,column:16},end:{line:31,column:55}},4:{start:{line:32,column:2},end:{line:34,column:3}},5:{start:{line:33,column:4},end:{line:33,column:30}},6:{start:{line:35,column:18},end:{line:35,column:20}},7:{start:{line:36,column:2},end:{line:41,column:5}},8:{start:{line:37,column:19},end:{line:37,column:53}},9:{start:{line:38,column:4},end:{line:40,column:5}},10:{start:{line:39,column:6},end:{line:39,column:33}},11:{start:{line:42,column:23},end:{line:46,column:3}},12:{start:{line:47,column:2},end:{line:47,column:22}},13:{start:{line:50,column:24},end:{line:60,column:3}},14:{start:{line:61,column:14},end:{line:61,column:18}},15:{start:{line:63,column:4},end:{line:63,column:17}},16:{start:{line:64,column:4},end:{line:69,column:6}},17:{start:{line:70,column:4},end:{line:72,column:7}},18:{start:{line:71,column:6},end:{line:71,column:25}},19:{start:{line:75,column:17},end:{line:75,column:22}},20:{start:{line:76,column:4},end:{line:79,column:5}},21:{start:{line:77,column:6},end:{line:77,column:132}},22:{start:{line:80,column:4},end:{line:80,column:18}},23:{start:{line:83,column:16},end:{line:83,column:30}},24:{start:{line:84,column:28},end:{line:84,column:79}},25:{start:{line:85,column:4},end:{line:90,column:5}},26:{start:{line:86,column:6},end:{line:86,column:52}},27:{start:{line:87,column:6},end:{line:87,column:70}},28:{start:{line:88,column:6},end:{line:88,column:70}},29:{start:{line:89,column:6},end:{line:89,column:76}},30:{start:{line:91,column:4},end:{line:93,column:5}},31:{start:{line:92,column:6},end:{line:92,column:43}},32:{start:{line:94,column:4},end:{line:99,column:5}},33:{start:{line:95,column:6},end:{line:95,column:59}},34:{start:{line:96,column:6},end:{line:98,column:14}},35:{start:{line:97,column:8},end:{line:97,column:36}},36:{start:{line:102,column:20},end:{line:111,column:5}},37:{start:{line:112,column:16},end:{line:112,column:43}},38:{start:{line:113,column:26},end:{line:117,column:5}},39:{start:{line:114,column:21},end:{line:114,column:36}},40:{start:{line:115,column:19},end:{line:115,column:32}},41:{start:{line:116,column:6},end:{line:116,column:44}},42:{start:{line:118,column:4},end:{line:118,column:20}},43:{start:{line:119,column:4},end:{line:119,column:56}},44:{start:{line:120,column:4},end:{line:120,column:56}},45:{start:{line:121,column:4},end:{line:121,column:62}},46:{start:{line:122,column:19},end:{line:122,column:41}},47:{start:{line:123,column:24},end:{line:123,column:41}},48:{start:{line:124,column:4},end:{line:124,column:45}},49:{start:{line:125,column:16},end:{line:125,column:74}},50:{start:{line:126,column:4},end:{line:126,column:37}},51:{start:{line:127,column:20},end:{line:127,column:49}},52:{start:{line:128,column:20},end:{line:148,column:6}},53:{start:{line:138,column:8},end:{line:138,column:82}},54:{start:{line:140,column:62},end:{line:140,column:141}},55:{start:{line:142,column:8},end:{line:146,column:9}},56:{start:{line:143,column:10},end:{line:143,column:108}},57:{start:{line:145,column:10},end:{line:145,column:160}},58:{start:{line:149,column:4},end:{line:149,column:28}},59:{start:{line:150,column:4},end:{line:158,column:7}},60:{start:{line:151,column:6},end:{line:157,column:9}},61:{start:{line:159,column:4},end:{line:164,column:7}},62:{start:{line:160,column:6},end:{line:160,column:40}},63:{start:{line:160,column:33},end:{line:160,column:40}},64:{start:{line:161,column:6},end:{line:163,column:9}},65:{start:{line:165,column:4},end:{line:167,column:7}},66:{start:{line:166,column:6},end:{line:166,column:30}},67:{start:{line:168,column:4},end:{line:172,column:7}},68:{start:{line:169,column:6},end:{line:171,column:9}},69:{start:{line:173,column:4},end:{line:173,column:37}},70:{start:{line:174,column:4},end:{line:174,column:37}},71:{start:{line:176,column:22},end:{line:179,column:3}},72:{start:{line:177,column:18},end:{line:177,column:82}},73:{start:{line:177,column:66},end:{line:177,column:81}},74:{start:{line:178,column:4},end:{line:178,column:36}},75:{start:{line:181,column:27},end:{line:214,column:5}},76:{start:{line:183,column:25},end:{line:183,column:27}},77:{start:{line:184,column:8},end:{line:209,column:9}},78:{start:{line:185,column:26},end:{line:185,column:138}},79:{start:{line:186,column:27},end:{line:186,column:47}},80:{start:{line:187,column:26},end:{line:187,column:47}},81:{start:{line:188,column:10},end:{line:206,column:11}},82:{start:{line:189,column:27},end:{line:192,column:13}},83:{start:{line:193,column:26},end:{line:204,column:13}},84:{start:{line:205,column:12},end:{line:205,column:33}},85:{start:{line:208,column:10},end:{line:208,column:69}},86:{start:{line:210,column:8},end:{line:212,column:10}},87:{start:{line:215,column:21},end:{line:218,column:6}},88:{start:{line:219,column:4},end:{line:219,column:41}},89:{start:{line:220,column:4},end:{line:220,column:20}},90:{start:{line:223,column:14},end:{line:223,column:26}},91:{start:{line:224,column:4},end:{line:224,column:53}},92:{start:{line:225,column:4},end:{line:225,column:49}},93:{start:{line:226,column:4},end:{line:235,column:6}},94:{start:{line:232,column:20},end:{line:232,column:38}},95:{start:{line:238,column:22},end:{line:238,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:19,column:9},end:{line:19,column:20}},loc:{start:{line:19,column:39},end:{line:22,column:1}},line:19},1:{name:"buildInspectStyle",decl:{start:{line:23,column:9},end:{line:23,column:26}},loc:{start:{line:23,column:78},end:{line:48,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:36,column:48},end:{line:36,column:49}},loc:{start:{line:36,column:62},end:{line:41,column:3}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:51,column:17},end:{line:51,column:18}},loc:{start:{line:51,column:23},end:{line:52,column:5}},line:51},4:{name:"(anonymous_4)",decl:{start:{line:53,column:18},end:{line:53,column:19}},loc:{start:{line:53,column:24},end:{line:54,column:5}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:55,column:19},end:{line:55,column:20}},loc:{start:{line:55,column:25},end:{line:56,column:5}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:57,column:14},end:{line:57,column:15}},loc:{start:{line:57,column:20},end:{line:58,column:5}},line:57},7:{name:"(anonymous_7)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:21},end:{line:73,column:3}},line:62},8:{name:"(anonymous_8)",decl:{start:{line:70,column:34},end:{line:70,column:35}},loc:{start:{line:70,column:40},end:{line:72,column:5}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:46},end:{line:81,column:3}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:100,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:96,column:17},end:{line:96,column:18}},loc:{start:{line:96,column:23},end:{line:98,column:7}},line:96},12:{name:"(anonymous_12)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:22},end:{line:175,column:3}},line:101},13:{name:"(anonymous_13)",decl:{start:{line:113,column:26},end:{line:113,column:27}},loc:{start:{line:113,column:32},end:{line:117,column:5}},line:113},14:{name:"(anonymous_14)",decl:{start:{line:137,column:24},end:{line:137,column:25}},loc:{start:{line:137,column:44},end:{line:139,column:7}},line:137},15:{name:"(anonymous_15)",decl:{start:{line:140,column:25},end:{line:140,column:26}},loc:{start:{line:140,column:62},end:{line:140,column:141}},line:140},16:{name:"(anonymous_16)",decl:{start:{line:141,column:19},end:{line:141,column:20}},loc:{start:{line:141,column:33},end:{line:147,column:7}},line:141},17:{name:"(anonymous_17)",decl:{start:{line:150,column:25},end:{line:150,column:26}},loc:{start:{line:150,column:31},end:{line:158,column:5}},line:150},18:{name:"(anonymous_18)",decl:{start:{line:159,column:19},end:{line:159,column:20}},loc:{start:{line:159,column:26},end:{line:164,column:5}},line:159},19:{name:"(anonymous_19)",decl:{start:{line:165,column:20},end:{line:165,column:21}},loc:{start:{line:165,column:27},end:{line:167,column:5}},line:165},20:{name:"(anonymous_20)",decl:{start:{line:168,column:19},end:{line:168,column:20}},loc:{start:{line:168,column:27},end:{line:172,column:5}},line:168},21:{name:"(anonymous_21)",decl:{start:{line:176,column:22},end:{line:176,column:23}},loc:{start:{line:176,column:30},end:{line:179,column:3}},line:176},22:{name:"(anonymous_22)",decl:{start:{line:177,column:55},end:{line:177,column:56}},loc:{start:{line:177,column:66},end:{line:177,column:81}},line:177},23:{name:"(anonymous_23)",decl:{start:{line:180,column:2},end:{line:180,column:3}},loc:{start:{line:180,column:20},end:{line:221,column:3}},line:180},24:{name:"(anonymous_24)",decl:{start:{line:182,column:22},end:{line:182,column:23}},loc:{start:{line:182,column:40},end:{line:213,column:7}},line:182},25:{name:"(anonymous_25)",decl:{start:{line:222,column:2},end:{line:222,column:3}},loc:{start:{line:222,column:11},end:{line:236,column:3}},line:222},26:{name:"(anonymous_26)",decl:{start:{line:232,column:13},end:{line:232,column:14}},loc:{start:{line:232,column:20},end:{line:232,column:38}},line:232}},branchMap:{0:{loc:{start:{line:32,column:2},end:{line:34,column:3}},type:"if",locations:[{start:{line:32,column:2},end:{line:34,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:32},1:{loc:{start:{line:38,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:38,column:8},end:{line:38,column:64}},type:"binary-expr",locations:[{start:{line:38,column:8},end:{line:38,column:32}},{start:{line:38,column:36},end:{line:38,column:64}}],line:38},3:{loc:{start:{line:77,column:15},end:{line:77,column:131}},type:"binary-expr",locations:[{start:{line:77,column:15},end:{line:77,column:71}},{start:{line:77,column:75},end:{line:77,column:131}}],line:77},4:{loc:{start:{line:85,column:4},end:{line:90,column:5}},type:"if",locations:[{start:{line:85,column:4},end:{line:90,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:85},5:{loc:{start:{line:91,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:93,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:91},6:{loc:{start:{line:91,column:8},end:{line:91,column:98}},type:"binary-expr",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:30},end:{line:91,column:98}}],line:91},7:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94},8:{loc:{start:{line:94,column:8},end:{line:94,column:59}},type:"binary-expr",locations:[{start:{line:94,column:8},end:{line:94,column:26}},{start:{line:94,column:30},end:{line:94,column:59}}],line:94},9:{loc:{start:{line:142,column:8},end:{line:146,column:9}},type:"if",locations:[{start:{line:142,column:8},end:{line:146,column:9}},{start:{line:144,column:15},end:{line:146,column:9}}],line:142},10:{loc:{start:{line:160,column:6},end:{line:160,column:40}},type:"if",locations:[{start:{line:160,column:6},end:{line:160,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:160}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA4L6B;AA5L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AAEpB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,GAAG;AAAA,IAEX;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,QAAI,WAAW,KAAK,aAAa,GAAG;AAEpC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3c5cfb4afb5483770f6919f2f66d47734075cb05"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Mn=function(){return a},a}Mn();function q7(n,e){return Mn().f[0]++,Mn().s[0]++,IV.render(n,e),Mn().s[1]++,e}function dZ(n,e,t){Mn().f[1]++;const r=(Mn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(Mn().s[3]++,qH(t));Mn().s[4]++,i?(Mn().b[0][0]++,Mn().s[5]++,e.push(i)):Mn().b[0][1]++;const s=(Mn().s[6]++,{});Mn().s[7]++,Object.keys(n.sources).forEach(o=>{Mn().f[2]++;const d=(Mn().s[8]++,n.sources[o]);Mn().s[9]++,Mn().b[2][0]++,d.type!=="raster"&&(Mn().b[2][1]++,d.type!=="raster-dem")?(Mn().b[1][0]++,Mn().s[10]++,s[o]=d):Mn().b[1][1]++});const a=(Mn().s[11]++,{...n,sources:s,layers:[r].concat(e)});return Mn().s[12]++,a}class yU extends Zn.Component{constructor(t){Mn().f[7]++,Mn().s[15]++;super(t);On(this,"container",(Mn().s[14]++,null));On(this,"onLayerSelectById",(Mn().s[71]++,t=>{Mn().f[21]++;const r=(Mn().s[72]++,this.props.mapStyle.layers.findIndex(i=>(Mn().f[22]++,Mn().s[73]++,i.id===t)));Mn().s[74]++,this.props.onLayerSelect(r)}));Mn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},Mn().s[17]++,Dc.on("languageChanged",()=>{Mn().f[8]++,Mn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){Mn().f[9]++;let i=(Mn().s[19]++,!1);Mn().s[20]++;try{Mn().s[21]++,i=(Mn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(Mn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return Mn().s[22]++,i}componentDidUpdate(){var i,s,a;Mn().f[10]++;const t=(Mn().s[23]++,this.state.map),r=(Mn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));Mn().s[25]++,t?(Mn().b[4][0]++,Mn().s[26]++,t.setStyle(r,{diff:!0}),Mn().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,Mn().s[28]++,t.showCollisionBoxes=(s=this.props.options)==null?void 0:s.showCollisionBoxes,Mn().s[29]++,t.showOverdrawInspector=(a=this.props.options)==null?void 0:a.showOverdrawInspector):Mn().b[4][1]++,Mn().s[30]++,Mn().b[6][0]++,this.state.inspect&&(Mn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(Mn().b[5][0]++,Mn().s[31]++,this.state.inspect.toggleInspector()):Mn().b[5][1]++,Mn().s[32]++,Mn().b[8][0]++,this.state.inspect&&(Mn().b[8][1]++,this.props.inspectModeEnabled)?(Mn().b[7][0]++,Mn().s[33]++,this.state.inspect.setOriginalStyle(r),Mn().s[34]++,setTimeout(()=>{Mn().f[11]++,Mn().s[35]++,this.state.inspect.render()},500)):Mn().b[7][1]++}componentDidMount(){Mn().f[12]++;const t=(Mn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(Mn().s[37]++,new _v.Map(t));Mn().s[38]++;const i=()=>{Mn().f[13]++;const b=(Mn().s[39]++,r.getCenter()),E=(Mn().s[40]++,r.getZoom());Mn().s[41]++,this.props.onChange({center:b,zoom:E})};Mn().s[42]++,i(),Mn().s[43]++,r.showTileBoundaries=t.showTileBoundaries,Mn().s[44]++,r.showCollisionBoxes=t.showCollisionBoxes,Mn().s[45]++,r.showOverdrawInspector=t.showOverdrawInspector;let s=(Mn().s[46]++,this.initGeocoder(r));const a=(Mn().s[47]++,new GH);Mn().s[48]++,r.addControl(a,"top-right");const o=(Mn().s[49]++,new _v.NavigationControl({visualizePitch:!0}));Mn().s[50]++,r.addControl(o,"top-right");const d=(Mn().s[51]++,document.createElement("div")),g=(Mn().s[52]++,new NB({popup:new _v.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(b,E)=>(Mn().f[14]++,Mn().s[53]++,C6(cU.brightColor(b,E)).desaturate(.5).string()),buildInspectStyle:(b,E)=>(Mn().f[15]++,Mn().s[54]++,dZ(b,E,this.props.highlightedLayer)),renderPopup:b=>(Mn().f[16]++,Mn().s[55]++,this.props.inspectModeEnabled?(Mn().b[9][0]++,Mn().s[56]++,q7(le.jsx(KH,{features:b}),d)):(Mn().b[9][1]++,Mn().s[57]++,q7(le.jsx(fU,{features:b,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),d)))}));Mn().s[58]++,r.addControl(g),Mn().s[59]++,r.on("style.load",()=>{Mn().f[17]++,Mn().s[60]++,this.setState({map:r,inspect:g,geocoder:s,zoomControl:a,zoom:r.getZoom()})}),Mn().s[61]++,r.on("data",b=>{if(Mn().f[18]++,Mn().s[62]++,b.dataType!=="tile"){Mn().b[10][0]++,Mn().s[63]++;return}else Mn().b[10][1]++;Mn().s[64]++,this.props.onDataChange({map:this.state.map})}),Mn().s[65]++,r.on("error",b=>{Mn().f[19]++,Mn().s[66]++,console.log("ERROR",b)}),Mn().s[67]++,r.on("zoom",b=>{Mn().f[20]++,Mn().s[68]++,this.setState({zoom:r.getZoom()})}),Mn().s[69]++,r.on("dragend",i),Mn().s[70]++,r.on("zoomend",i)}initGeocoder(t){Mn().f[23]++;const r=(Mn().s[75]++,{forwardGeocode:async s=>{Mn().f[24]++;const a=(Mn().s[76]++,[]);Mn().s[77]++;try{const o=(Mn().s[78]++,`https://nominatim.openstreetmap.org/search?q=${s.query}&format=geojson&polygon_geojson=1&addressdetails=1`),d=(Mn().s[79]++,await fetch(o)),g=(Mn().s[80]++,await d.json());Mn().s[81]++;for(const b of g.features){const E=(Mn().s[82]++,[b.bbox[0]+(b.bbox[2]-b.bbox[0])/2,b.bbox[1]+(b.bbox[3]-b.bbox[1])/2]),S=(Mn().s[83]++,{type:"Feature",geometry:{type:"Point",coordinates:E},place_name:b.properties.display_name,properties:b.properties,text:b.properties.display_name,place_type:["place"],center:E});Mn().s[84]++,a.push(S)}}catch(o){Mn().s[85]++,console.error(`Failed to forwardGeocode with error: ${o}`)}return Mn().s[86]++,{features:a}}}),i=(Mn().s[87]++,new cZ(r,{placeholder:this.props.t("Search"),maplibregl:_v}));return Mn().s[88]++,t.addControl(i,"top-left"),Mn().s[89]++,i}render(){var r,i;Mn().f[25]++;const t=(Mn().s[90]++,this.props.t);return Mn().s[91]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),Mn().s[92]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),Mn().s[93]++,le.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:s=>(Mn().f[26]++,Mn().s[94]++,this.container=s),"data-wd-key":"maplibre:map"})}}On(yU,"defaultProps",(Mn().s[13]++,{onMapLoaded:()=>{Mn().f[3]++},onDataChange:()=>{Mn().f[4]++},onLayerSelect:()=>{Mn().f[5]++},onChange:()=>{Mn().f[6]++},options:{}}));const hZ=(Mn().s[95]++,$s()(yU));class D_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}class hp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function fZ(n,e,t){let r,i;t=t||Fm;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function Fm(n,e){return n>e?1:n<e?-1:0}function pZ(n,e){return n<e?1:n>e?-1:0}function ux(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function mZ(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function Zp(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function K0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function gZ(n,e,t){const r=e;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function i_(){return!0}function Ax(){return!1}function gy(){}function vU(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!K0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function yy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function L_(n){for(const e in n)delete n[e]}function T0(n){let e;for(e in n)return!1;return!e}class F_ extends D_{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new hp(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let d;for(let g=0,b=i.length;g<b;++g)if("handleEvent"in i[g]?d=i[g].handleEvent(s):d=i[g].call(this,s),d===!1||s.propagationStopped){d=!1;break}if(--a[r]===0){let g=o[r];for(delete o[r];g--;)this.removeEventListener(r,gy);delete a[r]}return d}disposeInternal(){this.listeners_&&L_(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=gy,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}const io={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"},hi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},o_={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Pc={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Pc.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Pc.max=Pc.whitepoint[2].D65;Pc.rgb=function(n,e){e=e||Pc.whitepoint[2].E;var t=n[0]/e[0],r=n[1]/e[1],i=n[2]/e[2],s,a,o;return s=t*3.240969941904521+r*-1.537383177570093+i*-.498610760293,a=t*-.96924363628087+r*1.87596750150772+i*.041555057407175,o=t*.055630079696993+r*-.20397695888897+i*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[s*255,a*255,o*255]};o_.xyz=function(n,e){var t=n[0]/255,r=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var s=t*.41239079926595+r*.35758433938387+i*.18048078840183,a=t*.21263900587151+r*.71516867876775+i*.072192315360733,o=t*.019330818715591+r*.11919477979462+i*.95053215224966;return e=e||Pc.whitepoint[2].E,[s*e[0],a*e[1],o*e[2]]};const WB={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var r,i,s,a,o,d,g,b,E,S,O,k,U;if(s=n[0],a=n[1],o=n[2],s===0)return[0,0,0];var z=.0011070564598794539;return e=e||"D65",t=t||2,E=Pc.whitepoint[t][e][0],S=Pc.whitepoint[t][e][1],O=Pc.whitepoint[t][e][2],k=4*E/(E+15*S+3*O),U=9*S/(E+15*S+3*O),r=a/(13*s)+k||0,i=o/(13*s)+U||0,g=s>8?S*Math.pow((s+16)/116,3):S*s*z,d=g*9*r/(4*i)||0,b=g*(12-3*r-20*i)/(4*i)||0,[d,g,b]}};Pc.luv=function(n,e,t){var r,i,s,a,o,d,g,b,E,S,O,k,U,z=.008856451679035631,q=903.2962962962961;e=e||"D65",t=t||2,E=Pc.whitepoint[t][e][0],S=Pc.whitepoint[t][e][1],O=Pc.whitepoint[t][e][2],k=4*E/(E+15*S+3*O),U=9*S/(E+15*S+3*O),d=n[0],g=n[1],b=n[2],r=4*d/(d+15*g+3*b)||0,i=9*g/(d+15*g+3*b)||0;var Q=g/S;return s=Q<=z?q*Q:116*Math.pow(Q,1/3)-16,a=13*s*(r-k),o=13*s*(i-U),[s,a,o]};var _U={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],r=n[2],i,s,a;return a=r/360*2*Math.PI,i=t*Math.cos(a),s=t*Math.sin(a),[e,i,s]},xyz:function(n){return WB.xyz(_U.luv(n))}};WB.lchuv=function(n){var e=n[0],t=n[1],r=n[2],i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t),a=s*360/2/Math.PI;return a<0&&(a+=360),[e,i,a]};Pc.lchuv=function(n){return WB.lchuv(Pc.luv(n))};const Y7={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var $7={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function yZ(n){var b,E;var e,t=[],r=1,i;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),Y7[n])t=Y7[n].slice(),i="rgb";else if(n==="transparent")r=0,i="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),a=s.length,o=a<=4;r=1,o?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],a===4&&(r=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],a===8&&(r=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var d=e[1];i=d.replace(/a$/,"");var g=i==="cmyk"?4:i==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),i==="color"&&(i=t.shift()),t=t.map(function(S,O){if(S[S.length-1]==="%")return S=parseFloat(S)/100,O===3?S:i==="rgb"?S*255:i[0]==="h"||i[0]==="l"&&!O?S*100:i==="lab"?S*125:i==="lch"?O<2?S*150:S*360:i[0]==="o"&&!O?S:i==="oklab"?S*.4:i==="oklch"?O<2?S*.4:S*360:S;if(i[O]==="h"||O===2&&i[i.length-1]==="h"){if($7[S]!==void 0)return $7[S];if(S.endsWith("deg"))return parseFloat(S);if(S.endsWith("turn"))return parseFloat(S)*360;if(S.endsWith("grad"))return parseFloat(S)*360/400;if(S.endsWith("rad"))return parseFloat(S)*180/Math.PI}return S==="none"?0:parseFloat(S)}),r=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(S){return parseFloat(S)}),i=((E=(b=n.match(/([a-z])/ig))==null?void 0:b.join(""))==null?void 0:E.toLowerCase())||"rgb");return{space:i,values:t,alpha:r}}const C4={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,r=n[2]/100,i,s,a,o,d,g=0;if(t===0)return d=r*255,[d,d,d];for(s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,o=[0,0,0];g<3;)a=e+1/3*-(g-1),a<0?a++:a>1&&a--,d=6*a<1?i+(s-i)*6*a:2*a<1?s:3*a<2?i+(s-i)*(2/3-a)*6:i,o[g++]=d*255;return o}};o_.hsl=function(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=s-i,o,d,g;return s===i?o=0:e===s?o=(t-r)/a:t===s?o=2+(r-e)/a:r===s&&(o=4+(e-t)/a),o=Math.min(o*60,360),o<0&&(o+=360),g=(i+s)/2,s===i?d=0:g<=.5?d=a/(s+i):d=a/(2-s-i),[o,d*100,g*100]};function vZ(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=yZ(n);if(!t.space)return[];const r=t.space[0]==="h"?C4.min:o_.min,i=t.space[0]==="h"?C4.max:o_.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],r[0]),i[0]),e[1]=Math.min(Math.max(t.values[1],r[1]),i[1]),e[2]=Math.min(Math.max(t.values[2],r[2]),i[2]),t.space[0]==="h"&&(e=C4.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function Tu(n,e,t){return Math.min(Math.max(n,e),t)}function _Z(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const d=((n-t)*a+(e-r)*o)/(a*a+o*o);d>1?(t=i,r=s):d>0&&(t+=a*d,r+=o*d)}return xg(n,e,t,r)}function xg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function CZ(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const d=Math.abs(n[o][r]);d>s&&(s=d,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const d=-n[o][r]/n[r][r];for(let g=r;g<e+1;g++)r==g?n[o][g]=0:n[o][g]+=d*n[r][g]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function V7(n){return n*180/Math.PI}function E0(n){return n*Math.PI/180}function wg(n,e){const t=n%e;return t*e<0?t+e:t}function Qh(n,e,t){return n+t*(e-n)}function QB(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function zC(n,e){return Math.floor(QB(n,e))}function _0(n,e){return Math.ceil(QB(n,e))}function M6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}const qB=[NaN,NaN,NaN,0];function bZ(n){return typeof n=="string"?n:$B(n)}const xZ=1024,av={};let b4=0;function wZ(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function H7(n){const e=Pc.lchuv(o_.xyz(n));return e[3]=n[3],e}function MZ(n){const e=Pc.rgb(_U.xyz(n));return e[3]=n[3],e}function YB(n){if(n==="none")return qB;if(av.hasOwnProperty(n))return av[n];if(b4>=xZ){let t=0;for(const r in av)t++&3||(delete av[r],--b4)}const e=vZ(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return CU(e),av[n]=e,++b4,e}function vy(n){return Array.isArray(n)?n:YB(n)}function CU(n){return n[0]=Tu(n[0]+.5|0,0,255),n[1]=Tu(n[1]+.5|0,0,255),n[2]=Tu(n[2]+.5|0,0,255),n[3]=Tu(n[3],0,1),n}function $B(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}const P0=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",SZ=P0.includes("firefox"),EZ=P0.includes("safari")&&!P0.includes("chrom");EZ&&(P0.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(P0));const BZ=P0.includes("webkit")&&!P0.includes("edge"),bU=P0.includes("macintosh"),xU=typeof devicePixelRatio<"u"?devicePixelRatio:1,VB=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,wU=typeof Image<"u"&&Image.prototype.decode,MU=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Jl(n,e,t,r){let i;return t&&t.length?i=t.shift():VB?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let x4;function Xb(){return x4||(x4=Jl(1,1)),x4}function U_(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function OZ(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function IZ(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Z7(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function SU(n){for(;n.lastChild;)n.lastChild.remove()}function kZ(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function Ts(n,e,t,r,i){if(i){const a=t;t=function(){n.removeEventListener(e,t),a.apply(r??this,arguments)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Jb(n,e,t,r){return Ts(n,e,t,r,!0)}function Da(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),L_(n))}class HB extends F_{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?hi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(io.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==hi.IDLE&&this.loader){this.state=hi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;yy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=hi.LOADED}).catch(r=>{this.state=hi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function TZ(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[Jb(r,io.LOAD,function(){a=!0,s||e()})];return r.src&&wU?(s=!0,r.decode().then(function(){i&&e()}).catch(function(d){i&&(a?e():t())})):o.push(Jb(r,io.ERROR,t)),function(){i=!1,o.forEach(Da)}}function PZ(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function RZ(n,e){return e&&(n.src=e),n.src&&wU?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):PZ(n)}class KZ{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];!(e++&3)&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=w4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=w4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=w4(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===hi.IDLE&&i.load(),i.getImageState()===hi.LOADING?i.ready().then(()=>{this.patternCache_[a]=Xb().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=Xb().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function w4(n,e,t){const r=t?vy(t):"null";return e+":"+n+":"+r}const Sf=new KZ;let lv=null;class EU extends F_{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?hi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===hi.LOADED){lv||(lv=Jl(1,1,void 0,{willReadFrequently:!0})),lv.drawImage(this.image_,0,0);try{lv.getImageData(0,0,1,1),this.tainted_=!1}catch{lv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(io.CHANGE)}handleImageError_(){this.imageState_=hi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=hi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Jl(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===hi.IDLE){this.image_||this.initializeImage_(),this.imageState_=hi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&RZ(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==hi.LOADED)return;const t=this.image_,r=Jl(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=bZ(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===hi.LOADED||this.imageState_===hi.ERROR)e();else{const t=()=>{(this.imageState_===hi.LOADED||this.imageState_===hi.ERROR)&&(this.removeEventListener(io.CHANGE,t),e())};this.addEventListener(io.CHANGE,t)}})),this.ready_}}function ZB(n,e,t,r,i,s){let a=e===void 0?void 0:Sf.get(e,t,i);return a||(a=new EU(n,n&&"src"in n?n.src||void 0:e,t,r,i),Sf.set(e,t,i,a,s)),s&&a&&!Sf.getPattern(e,t,i)&&Sf.set(e,t,i,a,s),a}function go(){throw new Error("Unimplemented abstract method.")}let DZ=0;function Fo(n){return n.ol_uid||(n.ol_uid=String(++DZ))}function X7(n){return n[0]>0&&n[1]>0}function LZ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function ad(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class cx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ad(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new cx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return go()}getImage(e){return go()}getHitDetectionImage(){return go()}getPixelRatio(e){return 1}getImageState(){return go()}getImageSize(){return go()}getOrigin(){return go()}getSize(){return go()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ad(e)}listenImageChange(e){go()}load(){go()}unlistenImageChange(e){go()}ready(){return Promise.resolve()}}function qp(n){return n?Array.isArray(n)?$B(n):typeof n=="object"&&"src"in n?FZ(n):n:null}function FZ(n){if(!n.offset||!n.size)return Sf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Sf.getPattern(e,void 0,n.color);if(t)return t;const r=Sf.get(n.src,"anonymous",null);if(r.getImageState()!==hi.LOADED)return null;const i=Jl(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),ZB(i.canvas,e,void 0,hi.LOADED,n.color,!0),Sf.getPattern(e,void 0,n.color)}const _y={PROPERTYCHANGE:"propertychange"};class z_ extends F_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(io.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ts(this,e[s],t);return i}return Ts(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=Jb(this,e[s],t)}else r=Jb(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)UZ(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}z_.prototype.on;z_.prototype.once;z_.prototype.un;function UZ(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Da(n[e]);else Da(n)}class J7 extends hp{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class fp extends z_{constructor(e){super(),this.on,this.once,this.un,Fo(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new J7(r,e,t)),r=_y.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new J7(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],T0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const jC="ol-hidden",zZ="ol-selectable",dx="ol-unselectable",XB="ol-control",ek="ol-collapsed",jZ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),tk=["style","variant","weight","size","lineHeight","family"],BU=function(n){const e=n.match(jZ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=tk.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[tk[r]]=s)}return t.families=t.family.split(/,\s?/),t},OU="10px sans-serif",mh="#000",Cy="round",Um=[],zm=0,by="round",s_=10,a_="#000",l_="center",e2="middle",pg=[0,0,0,0],u_=1,Dp=new fp;let L1=null,S6;const E6={},IU=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,a;function o(g,b,E){let S=!0;for(let O=0;O<r;++O){const k=t[O];if(a=t2(g+" "+b+" "+e+k,i),E!=k){const U=t2(g+" "+b+" "+e+E+","+k,i);S=S&&U!=a}}return!!S}function d(){let g=!0;const b=Dp.getKeys();for(let E=0,S=b.length;E<S;++E){const O=b[E];if(Dp.get(O)<100){const[k,U,z]=O.split(`
`);o(k,U,z)?(L_(E6),L1=null,S6=void 0,Dp.set(O,100)):(Dp.set(O,Dp.get(O)+1,!0),g=!1)}}g&&(clearInterval(s),s=void 0)}return function(g){const b=BU(g);if(!b)return;const E=b.families;for(let S=0,O=E.length;S<O;++S){const k=E[S],U=b.style+`
`+b.weight+`
`+k;Dp.get(U)===void 0&&(Dp.set(U,100,!0),o(b.style,b.weight,k)||(Dp.set(U,0,!0),s===void 0&&(s=setInterval(d,32))))}}}(),NZ=function(){let n;return function(e){let t=E6[e];if(t==null){if(VB){const r=BU(e),i=kU(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);E6[e]=t}return t}}();function kU(n,e){return L1||(L1=Jl(1,1)),n!=S6&&(L1.font=n,S6=L1.font),L1.measureText(e)}function t2(n,e){return kU(n,e).width}function nk(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,t2(n,s)),0);return t[e]=r,r}function GZ(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,d=0;for(let g=0,b=e.length;g<=b;g+=2){const E=e[g];if(E===`
`||g===b){s=Math.max(s,a),i.push(a),a=0,o+=d,d=0;continue}const S=e[g+1]||n.font,O=t2(S,E);t.push(O),a+=O;const k=NZ(S);r.push(k),d=Math.max(d,k)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function WZ(n,e,t,r,i,s,a,o,d,g,b){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=E=>E.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(d,g),n.scale(b[0],b[1]),QZ(r,n)):b[0]<0||b[1]<0?(n.translate(d,g),n.scale(b[0],b[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,d,g,a*b[0],o*b[1]),n.restore()}function QZ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class hx extends cx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?hi.LOADING:hi.LOADED,this.imageState_===hi.LOADING&&this.ready().then(()=>this.imageState_=hi.LOADED),this.render()}clone(){const e=this.getScale(),t=new hx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,a;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(a=Sf.get(r,null,null))==null?void 0:a.getImage(1);if(!i){const o=this.renderOptions_,d=Math.ceil(o.size*e),g=Jl(d,d);this.draw_(o,g,e),i=g.canvas,Sf.set(r,null,null,new EU(i,void 0,null,hi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const J=i;i=s,s=J}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,d=s*Math.sin(o),g=Math.sqrt(s*s-d*d),b=i-g,E=Math.sqrt(d*d+b*b),S=E/d;if(e==="miter"&&S<=r)return S*t;const O=t/2/S,k=t/2*(b/E),z=Math.sqrt((i+O)*(i+O)+k*k)-i;if(this.radius2_===void 0||e==="bevel")return z*2;const q=i*Math.sin(o),Q=Math.sqrt(i*i-q*q),re=s-Q,Y=Math.sqrt(q*q+re*re)/q;if(Y<=r){const J=Y*t/2-s-i;return 2*Math.max(z,J)}return z*2}createRenderOptions(){let e=Cy,t=by,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=qp(this.stroke_.getColor()??a_),o=this.stroke_.getWidth()??u_,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??by,e=this.stroke_.getLineCap()??Cy,r=this.stroke_.getMiterLimit()??s_);const d=this.calculateLineJoinSize_(t,o,r),g=Math.max(this.radius,this.radius2_||0),b=Math.ceil(2*g+d);return{strokeStyle:a,strokeWidth:o,size:b,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=mh),t.fillStyle=qp(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=vy(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Jl(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const d=s+o*a,g=o%2===0?r:i;e.lineTo(g*Math.cos(d),g*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=mh,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class j_ extends hx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new j_({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Dm{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Dm({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=ZB(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===hi.IDLE&&t.load(),t.getImageState()===hi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Fo(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:vy(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ra(n,e){if(!n)throw new Error(e)}function rk(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let n2=class TU extends cx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;ra(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||Fo(a)),ra(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),ra(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=hi.IDLE:a!==void 0&&("complete"in a?a.complete?d=a.src?hi.LOADED:hi.IDLE:d=hi.LOADING:d=hi.LOADED),this.color_=e.color!==void 0?vy(e.color):null,this.iconImage_=ZB(a,o,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,b;if(e.size)[g,b]=e.size;else{const E=this.getImage(1);if(E.width&&E.height)g=E.width,b=E.height;else if(E instanceof HTMLImageElement){this.initialOptions_=e;const S=()=>{if(this.unlistenImageChange(S),!this.initialOptions_)return;const O=this.iconImage_.getSize();this.setScale(rk(O[0],O[1],e.width,e.height))};this.listenImageChange(S);return}}g!==void 0&&this.setScale(rk(g,b,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new TU({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==hi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==hi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(io.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(io.CHANGE,e)}ready(){return this.iconImage_.ready()}};class fx extends fp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new fx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Da(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ts(e,io.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?qZ(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function qZ(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ra(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const PU=new Array(6);function _h(){return[1,0,0,1,0,0]}function ik(n){return eO(n,1,0,0,1,0,0)}function JB(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=n[4],o=n[5],d=e[0],g=e[1],b=e[2],E=e[3],S=e[4],O=e[5];return n[0]=t*d+i*g,n[1]=r*d+s*g,n[2]=t*b+i*E,n[3]=r*b+s*E,n[4]=t*S+i*O+a,n[5]=r*S+s*O+o,n}function eO(n,e,t,r,i,s,a){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=a,n}function YZ(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function yA(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function M4(n,e,t){return JB(n,eO(PU,e,0,0,t,0,0))}function $Z(n,e,t){return JB(n,eO(PU,1,0,0,1,e,t))}function em(n,e,t,r,i,s,a,o){const d=Math.sin(s),g=Math.cos(s);return n[0]=r*g,n[1]=i*d,n[2]=-r*d,n[3]=i*g,n[4]=a*r*g-o*r*d+e,n[5]=a*i*d+o*i*g+t,n}function RU(n,e){const t=VZ(e);ra(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],d=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*d-a*o)/t,n[5]=-(r*d-i*o)/t,n}function VZ(n){return n[0]*n[3]-n[1]*n[2]}const ok=[1e6,1e6,1e6,1e6,2,2];function HZ(n){return"matrix("+n.map((t,r)=>Math.round(t*ok[r])/ok[r]).join(", ")+")"}const Ac={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function B6(n){const e=Zh();for(let t=0,r=n.length;t<r;++t)Nv(e,n[t]);return e}function ZZ(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),a=Math.max.apply(null,e);return Gm(r,i,s,a,t)}function B0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function KU(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Lg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Ig(n,e){return tO(n,e[0],e[1])}function lp(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function tO(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function O6(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let d=Ac.UNKNOWN;return a<t?d=d|Ac.LEFT:a>i&&(d=d|Ac.RIGHT),o<r?d=d|Ac.BELOW:o>s&&(d=d|Ac.ABOVE),d===Ac.UNKNOWN&&(d=Ac.INTERSECTING),d}function Zh(){return[1/0,1/0,-1/0,-1/0]}function Gm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Ty(n){return Gm(1/0,1/0,-1/0,-1/0,n)}function DU(n,e){const t=n[0],r=n[1];return Gm(t,r,t,r,e)}function nO(n,e,t,r,i){const s=Ty(i);return LU(s,n,e,t,r)}function Wm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function rO(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Nv(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function LU(n,e,t,r,i){for(;t<r;t+=i)XZ(n,e[t],e[t+1]);return n}function XZ(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function FU(n,e){let t;return t=e(px(n)),t||(t=e(mx(n)),t)||(t=e(gx(n)),t)||(t=e(Ap(n)),t)?t:!1}function A_(n){let e=0;return Fg(n)||(e=ps(n)*Hl(n)),e}function px(n){return[n[0],n[1]]}function mx(n){return[n[2],n[1]]}function If(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function JZ(n,e){let t;if(e==="bottom-left")t=px(n);else if(e==="bottom-right")t=mx(n);else if(e==="top-left")t=Ap(n);else if(e==="top-right")t=gx(n);else throw new Error("Invalid corner");return t}function r2(n,e,t,r,i){const[s,a,o,d,g,b,E,S]=eX(n,e,t,r);return Gm(Math.min(s,o,g,E),Math.min(a,d,b,S),Math.max(s,o,g,E),Math.max(a,d,b,S),i)}function eX(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),d=i*a,g=i*o,b=s*a,E=s*o,S=n[0],O=n[1];return[S-d+E,O-g-b,S-d-E,O-g+b,S+d-E,O+g+b,S+d+E,O+g-b,S-d+E,O-g-b]}function Hl(n){return n[3]-n[1]}function Qd(n,e,t){const r=t||Zh();return ku(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Ty(r),r}function Ap(n){return[n[0],n[3]]}function gx(n){return[n[2],n[3]]}function ps(n){return n[2]-n[0]}function ku(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Fg(n){return n[2]<n[0]||n[3]<n[1]}function tX(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function nX(n,e,t){let r=!1;const i=O6(n,e),s=O6(n,t);if(i===Ac.INTERSECTING||s===Ac.INTERSECTING)r=!0;else{const a=n[0],o=n[1],d=n[2],g=n[3],b=e[0],E=e[1],S=t[0],O=t[1],k=(O-E)/(S-b);let U,z;s&Ac.ABOVE&&!(i&Ac.ABOVE)&&(U=S-(O-g)/k,r=U>=a&&U<=d),!r&&s&Ac.RIGHT&&!(i&Ac.RIGHT)&&(z=O-(S-d)*k,r=z>=o&&z<=g),!r&&s&Ac.BELOW&&!(i&Ac.BELOW)&&(U=S-(O-o)/k,r=U>=a&&U<=d),!r&&s&Ac.LEFT&&!(i&Ac.LEFT)&&(z=O-(S-a)*k,r=z>=o&&z<=g)}return r}function rX(n,e,t,r){if(Fg(n))return Ty(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],a=[];for(let o=0,d=i.length;o<d;o+=2)s.push(i[o]),a.push(i[o+1]);return ZZ(s,a,t)}function UU(n,e){const t=e.getExtent(),r=If(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=ps(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function iO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];UU(n,e);const i=ps(r);if(ps(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}const R0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class yx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||R0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const N_=6378137,W1=Math.PI*N_,iX=[-W1,-W1,W1,W1],oX=[-180,-85,180,85],NC=N_*Math.log(Math.tan(Math.PI/2));class s1 extends yx{constructor(e){super({code:e,units:"m",extent:iX,global:!0,worldExtent:oX,getPointResolution:function(t,r){return t/Math.cosh(r[1]/N_)}})}}const sk=[new s1("EPSG:3857"),new s1("EPSG:102100"),new s1("EPSG:102113"),new s1("EPSG:900913"),new s1("http://www.opengis.net/def/crs/EPSG/0/3857"),new s1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function sX(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=W1*n[s]/180;let a=N_*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>NC?a=NC:a<-NC&&(a=-NC),e[s+1]=a}return e}function aX(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/W1,e[s+1]=360*Math.atan(Math.exp(n[s+1]/N_))/Math.PI-90;return e}const lX=6378137,ak=[-180,-90,180,90],uX=Math.PI*lX/180;class J0 extends yx{constructor(e,t){super({code:e,units:"degrees",extent:ak,axisOrientation:t,global:!0,metersPerUnit:uX,worldExtent:ak})}}const lk=[new J0("CRS:84"),new J0("EPSG:4326","neu"),new J0("urn:ogc:def:crs:OGC:1.3:CRS84"),new J0("urn:ogc:def:crs:OGC:2:84"),new J0("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new J0("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new J0("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let I6={};function AX(n){return I6[n]||I6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function cX(n,e){I6[n]=e}let ny={};function c_(n,e,t){const r=n.getCode(),i=e.getCode();r in ny||(ny[r]={}),ny[r][i]=t}function S4(n,e){return n in ny&&e in ny[n]?ny[n][e]:null}function dX(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function i2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function oO(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function hX(n,e){return n[0]*=e,n[1]*=e,n}function sO(n,e){if(e.canWrapX()){const t=ps(e.getExtent()),r=fX(n,e,t);r&&(n[0]-=r*t)}return n}function fX(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||ps(r),i=Math.floor((n[0]-r[0])/t)),i}const pX=63710088e-1;function uk(n,e,t){t=t||pX;const r=E0(n[1]),i=E0(e[1]),s=(i-r)/2,a=E0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const o2=.9996,Of=.00669438,vx=Of*Of,_x=vx*Of,mg=Of/(1-Of),Ak=Math.sqrt(1-Of),xy=(1-Ak)/(1+Ak),zU=xy*xy,aO=zU*xy,lO=aO*xy,jU=lO*xy,NU=1-Of/4-3*vx/64-5*_x/256,mX=3*Of/8+3*vx/32+45*_x/1024,gX=15*vx/256+45*_x/1024,yX=35*_x/3072,vX=3/2*xy-27/32*aO+269/512*jU,_X=21/16*zU-55/32*lO,CX=151/96*aO-417/128*jU,bX=1097/512*lO,s2=6378137;function xX(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/o2/(s2*NU),o=a+vX*Math.sin(2*a)+_X*Math.sin(4*a)+CX*Math.sin(6*a)+bX*Math.sin(8*a),d=Math.sin(o),g=d*d,b=Math.cos(o),E=d/b,S=E*E,O=S*S,k=1-Of*g,U=Math.sqrt(1-Of*g),z=s2/U,q=(1-Of)/k,Q=mg*b**2,re=Q*Q,X=r/(z*o2),Y=X*X,J=Y*X,N=J*X,ie=N*X,he=ie*X,de=o-E/q*(Y/2-N/24*(5+3*S+10*Q-4*re-9*mg))+he/720*(61+90*S+298*Q+45*O-252*mg-3*re);let we=(X-J/6*(1+2*S+Q)+ie/120*(5-2*Q+28*S-3*re+8*mg+24*O))/b;return we=M6(we+E0(GU(t.number)),-Math.PI,Math.PI),[V7(we),V7(de)]}const ck=-80,dk=84,wX=-180,MX=180;function SX(n,e,t){n=M6(n,wX,MX),e<ck?e=ck:e>dk&&(e=dk);const r=E0(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,d=o*o,g=E0(n),b=GU(t.number),E=E0(b),S=s2/Math.sqrt(1-Of*i**2),O=mg*s**2,k=s*M6(g-E,-Math.PI,Math.PI),U=k*k,z=U*k,q=z*k,Q=q*k,re=Q*k,X=s2*(NU*r-mX*Math.sin(2*r)+gX*Math.sin(4*r)-yX*Math.sin(6*r)),Y=o2*S*(k+z/6*(1-o+O)+Q/120*(5-18*o+d+72*O-58*mg))+5e5;let J=o2*(X+S*a*(U/2+q/24*(5-o+9*O+4*O**2)+re/720*(61-58*o+d+600*O-330*mg)));return t.north||(J+=1e7),[Y,J]}function GU(n){return(n-1)*6-180+3}const EX=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function WU(n){let e=0;for(const i of EX){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function hk(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const d=t[o],g=t[o+1],b=n(d,g,e);r[o]=b[0],r[o+1]=b[1]}return r}}function BX(n){return WU(n)?new yx({code:n,units:"m"}):null}function OX(n){const e=WU(n.getCode());return e?{forward:hk(SX,e),inverse:hk(xX,e)}:null}function QU(...n){console.warn(...n)}const IX=[OX],kX=[BX];let k6=!0;function qU(n){k6=!1}function uO(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function T6(n){cX(n.getCode(),n),c_(n,n,uO)}function TX(n){n.forEach(T6)}function Ma(n){if(typeof n!="string")return n;const e=AX(n);if(e)return e;for(const t of kX){const r=t(n);if(r)return r}return null}function P6(n,e,t,r){n=Ma(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/R0[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=G_(n,Ma("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=o(g,g,2);const b=uk(g.slice(0,2),g.slice(2,4)),E=uk(g.slice(4,6),g.slice(6,8));i=(b+E)/2}const d=r?R0[r]:n.getMetersPerUnit();d!==void 0&&(i/=d)}}return i}function fk(n){TX(n),n.forEach(function(e){n.forEach(function(t){e!==t&&c_(e,t,uO)})})}function PX(n,e,t,r){n.forEach(function(i){e.forEach(function(s){c_(i,s,t),c_(s,i,r)})})}function AO(n,e){return n?typeof n=="string"?Ma(n):n:Ma(e)}function RX(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),d=o.length;for(let g=0,b=i;g<b;++g)t[a+g]=g>=d?e[a+g]:o[g]}return t}}function R6(n,e){return qU(),Cx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function E4(n,e){const t=Cx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=wg(r+180,360)-180),t}function Mg(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||G_(n,e)===uO)&&t}function G_(n,e){const t=n.getCode(),r=e.getCode();let i=S4(t,r);if(i)return i;let s=null,a=null;for(const d of IX)s||(s=d(n)),a||(a=d(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=B4(s.inverse,a.forward);else{const d=S4(t,o);d&&(i=B4(d,a.forward))}else{const d=S4(o,r);d&&(i=B4(s.inverse,d))}return i&&(T6(n),T6(e),c_(n,e,i)),i}function B4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function d_(n,e){const t=Ma(n),r=Ma(e);return G_(t,r)}function Cx(n,e,t){const r=d_(e,t);if(!r){const i=Ma(e).getCode(),s=Ma(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let KX=null;function DX(){return KX}function K6(n,e){return n}function km(n,e){return k6&&!i2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(k6=!1,QU("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function cO(n,e){return n}function Yp(n,e){return n}function LX(){fk(sk),fk(lk),PX(lk,sk,sX,aX)}LX();function O0(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let d=e;d<t;d+=r){const g=n[d],b=n[d+1];s[o++]=i[0]*g+i[2]*b+i[4],s[o++]=i[1]*g+i[3]*b+i[5];for(let E=2;E<a;E++)s[o++]=n[d+E]}return s&&s.length!=o&&(s.length=o),s}function YU(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),d=Math.sin(i),g=s[0],b=s[1];let E=0;for(let S=e;S<t;S+=r){const O=n[S]-g,k=n[S+1]-b;a[E++]=g+O*o-k*d,a[E++]=b+O*d+k*o;for(let U=S+2;U<S+r;++U)a[E++]=n[U]}return a&&a.length!=E&&(a.length=E),a}function FX(n,e,t,r,i,s,a,o){o=o||[];const d=a[0],g=a[1];let b=0;for(let E=e;E<t;E+=r){const S=n[E]-d,O=n[E+1]-g;o[b++]=d+i*S,o[b++]=g+s*O;for(let k=E+2;k<E+r;++k)o[b++]=n[k]}return o&&o.length!=b&&(o.length=b),o}function UX(n,e,t,r,i,s,a){a=a||[];let o=0;for(let d=e;d<t;d+=r){a[o++]=n[d]+i,a[o++]=n[d+1]+s;for(let g=d+2;g<d+r;++g)a[o++]=n[g]}return a&&a.length!=o&&(a.length=o),a}const pk=_h();class $U extends fp{constructor(){super(),this.extent_=Zh(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=vU((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return go()}closestPointXY(e,t,r,i){return go()}containsXY(e,t){const r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return go()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Ty(t),this.extentRevision_=this.getRevision()}return tX(this.extent_,e)}rotate(e,t){go()}scale(e,t,r){go()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return go()}getType(){return go()}applyTransform(e){go()}intersectsExtent(e){return go()}translate(e,t){go()}transform(e,t){const r=Ma(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const d=r.getExtent(),g=r.getWorldExtent(),b=Hl(g)/Hl(d);em(pk,g[0],g[3],b,-b,0,0,0);const E=O0(s,0,s.length,o,pk,a),S=d_(r,t);return S?S(E,E,o):E}:d_(r,t);return this.applyTransform(i),this}}class Ug extends $U{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return nO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return go()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=mk(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){go()}setLayout(e,t,r){let i;if(e)i=mk(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=zg(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();YU(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=If(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();FX(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();UX(r,0,r.length,i,e,t,r),this.changed()}}}function zg(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function mk(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function zX(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return O0(r,0,r.length,i,e,t)}function jX(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function bx(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function W_(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=bx(n,e,t[a],r);i[s++]=d,e=d}return i.length=s,i}function VU(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=W_(n,e,t[a],r,i[s]);d.length===0&&(d[0]=e),i[s++]=d,e=d[d.length-1]}return i.length=s,i}class a2 extends $U{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Da),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Ts(e[t],io.CHANGE,this.changed,this))}clone(){const e=new a2(O4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Lg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Ty(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)rO(e,t[r].getExtent());return e}getGeometries(){return O4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],d=o.getSimplifiedGeometry(e);t.push(d),d!==o&&(i=!0)}return i?new a2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=If(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(O4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function O4(n){return n.map(e=>e.clone())}function gk(n,e,t,r,i,s,a){const o=n[e],d=n[e+1],g=n[t]-o,b=n[t+1]-d;let E;if(g===0&&b===0)E=e;else{const S=((i-o)*g+(s-d)*b)/(g*g+b*b);if(S>1)E=t;else if(S>0){for(let O=0;O<r;++O)a[O]=Qh(n[e+O],n[t+O],S);a.length=r;return}else E=e}for(let S=0;S<r;++S)a[S]=n[E+S];a.length=r}function dO(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],d=n[e+1],g=xg(s,a,o,d);g>i&&(i=g),s=o,a=d}return i}function hO(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=dO(n,e,o,r,i),e=o}return i}function NX(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=hO(n,e,o,r,i),e=o[o.length-1]}return i}function fO(n,e,t,r,i,s,a,o,d,g,b){if(e==t)return g;let E,S;if(i===0){if(S=xg(a,o,n[e],n[e+1]),S<g){for(E=0;E<r;++E)d[E]=n[e+E];return d.length=r,S}return g}b=b||[NaN,NaN];let O=e+r;for(;O<t;)if(gk(n,O-r,O,r,a,o,b),S=xg(a,o,b[0],b[1]),S<g){for(g=S,E=0;E<r;++E)d[E]=b[E];d.length=r,O+=r}else O+=r*Math.max((Math.sqrt(S)-Math.sqrt(g))/i|0,1);if(s&&(gk(n,t-r,e,r,a,o,b),S=xg(a,o,b[0],b[1]),S<g)){for(g=S,E=0;E<r;++E)d[E]=b[E];d.length=r}return g}function pO(n,e,t,r,i,s,a,o,d,g,b){b=b||[NaN,NaN];for(let E=0,S=t.length;E<S;++E){const O=t[E];g=fO(n,e,O,r,i,s,a,o,d,g,b),e=O}return g}function GX(n,e,t,r,i,s,a,o,d,g,b){b=b||[NaN,NaN];for(let E=0,S=t.length;E<S;++E){const O=t[E];g=pO(n,e,O,r,i,s,a,o,d,g,b),e=O[O.length-1]}return g}function xx(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const d=new Array(o);d[0]=1,d[o-1]=1;const g=[e,t-r];let b=0;for(;g.length>0;){const E=g.pop(),S=g.pop();let O=0;const k=n[S],U=n[S+1],z=n[E],q=n[E+1];for(let Q=S+r;Q<E;Q+=r){const re=n[Q],X=n[Q+1],Y=_Z(re,X,k,U,z,q);Y>O&&(b=Q,O=Y)}O>i&&(d[(b-e)/r]=1,S+r<b&&g.push(S,b),b+r<E&&g.push(b,E))}for(let E=0;E<o;++E)d[E]&&(s[a++]=n[e+E*r],s[a++]=n[e+E*r+1]);return a}function HU(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d];a=xx(n,e,b,r,i,s,a),o.push(a),e=b}return a}function lg(n,e){return e*Math.round(n/e)}function WX(n,e,t,r,i,s,a){if(e==t)return a;let o=lg(n[e],i),d=lg(n[e+1],i);e+=r,s[a++]=o,s[a++]=d;let g,b;do if(g=lg(n[e],i),b=lg(n[e+1],i),e+=r,e==t)return s[a++]=g,s[a++]=b,a;while(g==o&&b==d);for(;e<t;){const E=lg(n[e],i),S=lg(n[e+1],i);if(e+=r,E==g&&S==b)continue;const O=g-o,k=b-d,U=E-o,z=S-d;if(O*z==k*U&&(O<0&&U<O||O==U||O>0&&U>O)&&(k<0&&z<k||k==z||k>0&&z>k)){g=E,b=S;continue}s[a++]=g,s[a++]=b,o=g,d=b,g=E,b=S}return s[a++]=g,s[a++]=b,a}function mO(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d];a=WX(n,e,b,r,i,s,a),o.push(a),e=b}return a}function QX(n,e,t,r,i,s,a,o){for(let d=0,g=t.length;d<g;++d){const b=t[d],E=[];a=mO(n,e,b,r,i,s,a,E),o.push(E),e=b[b.length-1]}return a}function C0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function h_(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a];i[s++]=C0(n,e,d,r,i[s]),e=d}return i.length=s,i}function D6(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a];i[s++]=d.length===1&&d[0]===e?[]:h_(n,e,d,r,i[s]),e=d[d.length-1]}return i.length=s,i}function ZU(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,d=0;for(;e<t;e+=r){const g=n[e]-s,b=n[e+1]-a;i+=d*g-o*b,o=g,d=b}return i/2}function XU(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=ZU(n,e,o,r),e=o}return i}function qX(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=XU(n,e,o,r),e=o[o.length-1]}return i}class f_ extends Ug{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new f_(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Lg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return ZU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return C0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=xx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new f_(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bx(this.flatCoordinates,0,e,this.stride),this.changed()}}function JU(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function l2(n,e,t,r,i,s,a){let o,d;const g=(t-e)/r;if(g===1)o=e;else if(g===2)o=e,d=i;else if(g!==0){let b=n[e],E=n[e+1],S=0;const O=[0];for(let z=e+r;z<t;z+=r){const q=n[z],Q=n[z+1];S+=Math.sqrt((q-b)*(q-b)+(Q-E)*(Q-E)),O.push(S),b=q,E=Q}const k=i*S,U=fZ(O,k);U<0?(d=(k-O[-U-2])/(O[-U-1]-O[-U-2]),o=e+(-U-2)*r):o=e+U*r}a=a>1?a:2,s=s||new Array(a);for(let b=0;b<a;++b)s[b]=o===void 0?NaN:d===void 0?n[o+b]:Qh(n[o+b],n[o+r+b],d);return s}function L6(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,d=t/r;for(;o<d;){const S=o+d>>1;i<n[(S+1)*r-1]?d=S:o=S+1}const g=n[o*r-1];if(i==g)return n.slice((o-1)*r,(o-1)*r+r);const b=n[(o+1)*r-1],E=(i-g)/(b-g);a=[];for(let S=0;S<r-1;++S)a.push(Qh(n[(o-1)*r+S],n[o*r+S],E));return a.push(i),a}function YX(n,e,t,r,i,s,a){if(a)return L6(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let d=0,g=t.length;d<g;++d){const b=t[d];if(e!=b){if(i<n[e+r-1])return null;if(i<=n[b-1])return L6(n,e,b,r,i,!1);e=b}}return null}function $X(n,e,t,r,i){return!FU(i,function(a){return!gg(n,e,t,r,a[0],a[1])})}function gg(n,e,t,r,i,s){let a=0,o=n[t-r],d=n[t-r+1];for(;e<t;e+=r){const g=n[e],b=n[e+1];d<=s?b>s&&(g-o)*(s-d)-(i-o)*(b-d)>0&&a++:b<=s&&(g-o)*(s-d)-(i-o)*(b-d)<0&&a--,o=g,d=b}return a!==0}function gO(n,e,t,r,i,s){if(t.length===0||!gg(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(gg(n,t[a-1],t[a],r,i,s))return!1;return!0}function VX(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const d=t[a];if(gO(n,e,d,r,i,s))return!0;e=d[d.length-1]}return!1}function wx(n,e,t,r,i){const s=LU(Zh(),n,e,t,r);return ku(i,s)?lp(i,s)||s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:JU(n,e,t,r,function(a,o){return nX(i,a,o)}):!1}function HX(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(wx(n,e,t[s],r,i))return!0;e=t[s]}return!1}function ez(n,e,t,r,i){return!!(wx(n,e,t,r,i)||gg(n,e,t,r,i[0],i[1])||gg(n,e,t,r,i[0],i[3])||gg(n,e,t,r,i[2],i[1])||gg(n,e,t,r,i[2],i[3]))}function tz(n,e,t,r,i){if(!ez(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if($X(n,t[s-1],t[s],r,i)&&!wx(n,t[s-1],t[s],r,i))return!1;return!0}function ZX(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(tz(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function nz(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const d=n[o],g=n[o+1];a+=Math.sqrt((d-i)*(d-i)+(g-s)*(g-s)),i=d,s=g}return a}class kg extends Ug{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Zp(this.flatCoordinates,e),this.changed()}clone(){const e=new kg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Lg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return JU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,L6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return C0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return l2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return nz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=xx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new kg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return wx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bx(this.flatCoordinates,0,e,this.stride),this.changed()}}class p_ extends Ug{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let d=0,g=i.length;d<g;++d){const b=i[d];Zp(s,b.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){Zp(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new p_(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Lg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,YX(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return h_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new kg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const d=t[a],g=new kg(e.slice(s,d),r);i.push(g),s=d}return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const d=i[a],g=l2(t,r,d,s,.5);Zp(e,g),r=d}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=HU(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new p_(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return HX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=W_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Tg extends Ug{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Tg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=xg(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let d=0;d<o;++d)r[d]=s[d];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return DU(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return tO(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jX(this.flatCoordinates,0,e,this.stride),this.changed()}}class Q_ extends Ug{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Zp(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Q_(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Lg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,d=s.length;o<d;o+=a){const g=xg(e,t,s[o],s[o+1]);if(g<i){i=g;for(let b=0;b<a;++b)r[b]=s[o+b];r.length=a}}return i}getCoordinates(){return C0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Tg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new Tg(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(tO(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bx(this.flatCoordinates,0,e,this.stride),this.changed()}}function yO(n,e,t,r,i,s,a){let o,d,g,b,E,S,O;const k=i[s+1],U=[];for(let Q=0,re=t.length;Q<re;++Q){const X=t[Q];for(b=n[X-r],S=n[X-r+1],o=e;o<X;o+=r)E=n[o],O=n[o+1],(k<=S&&O<=k||S<=k&&k<=O)&&(g=(k-S)/(O-S)*(E-b)+b,U.push(g)),b=E,S=O}let z=NaN,q=-1/0;for(U.sort(Fm),b=U[0],o=1,d=U.length;o<d;++o){E=U[o];const Q=Math.abs(E-b);Q>q&&(g=(b+E)/2,gO(n,e,t,r,g,k)&&(z=g,q=Q)),b=E}return isNaN(z)&&(z=i[s]),a?(a.push(z,k,q),a):[z,k,q]}function rz(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const d=t[a];s=yO(n,e,d,r,i,2*a,s),e=d[d.length-1]}return s}function XX(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function vO(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],d=n[e+1];i+=(o-s)*(d+a),s=o,a=d}return i===0?void 0:i>0}function _O(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],d=vO(n,e,o,r);if(s===0){if(i&&d||!i&&!d)return!1}else if(i&&!d||!i&&d)return!1;e=o}return!0}function iz(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!_O(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function u2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],d=vO(n,e,o,r);(s===0?i&&d||!i&&!d:i&&!d||!i&&d)&&XX(n,e,o,r),e=o}return e}function F6(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=u2(n,e,t[s],r,i);return e}function oz(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const d=e[a],g=vO(n,r,d,2);if(s===void 0&&(s=g),g===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=d}return t}class Qm extends Ug{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Zp(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Qm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Lg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return gO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return XU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),u2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,h_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=If(this.getExtent());this.flatInteriorPoint_=yO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Tg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new f_(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const d=r[a],g=new f_(t.slice(s,d),e);i.push(g),s=d}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;_O(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=u2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=mO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Qm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return tz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=W_(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function yk(n){if(Fg(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Qm(s,"XY",[s.length])}function sz(n,e,t,r){const i=[];let s=Zh();for(let a=0,o=t.length;a<o;++a){const d=t[a];s=nO(n,e,d[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=d[d.length-1]}return i}class m_ extends Ug{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,d=i.length;o<d;++o){const g=i[o],b=s.length,E=g.getEnds();for(let S=0,O=E.length;S<O;++S)E[S]+=b;Zp(s,g.getFlatCoordinates()),a.push(E)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Zp(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new m_(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Lg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(NX(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),GX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return VX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return qX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),F6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,D6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=sz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=rz(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Q_(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;iz(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=F6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=QX(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new m_(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Qm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const d=r[a].slice(),g=d[d.length-1];if(s!==0)for(let E=0,S=d.length;E<S;++E)d[E]-=s;const b=new Qm(t.slice(s,g),e,d);i.push(b),s=g}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return ZX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=VU(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const vk=_h();class sd{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?DU(this.flatCoordinates_):nO(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=If(this.getExtent());this.flatInteriorPoints_=yO(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=oz(this.flatCoordinates_,this.ends_),t=sz(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=rz(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=l2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=l2(e,t,a,2,.5);Zp(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ma(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=Hl(r)/Hl(t);em(vk,r[0],r[3],i,-i,0,0,0),O0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,vk,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new sd(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=vU((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=xx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=HU(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=mO(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new sd(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}sd.prototype.getFlatCoordinates=sd.prototype.getOrientedFlatCoordinates;class b0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new b0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class qh{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=_k,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new qh({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=_k,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function JX(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ra(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let I4=null;function az(n,e){if(!I4){const t=new Dm({color:"rgba(255,255,255,0.4)"}),r=new b0({color:"#3399CC",width:1.25});I4=[new qh({image:new j_({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return I4}function _k(n){return n.getGeometry()}const eJ="#333";class Mx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ad(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Dm({color:eJ}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Mx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ad(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Cr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},gh={ADD:"add",REMOVE:"remove"},Ck={LENGTH:"length"};class GC extends hp{constructor(e,t,r){super(e),this.element=t,this.index=r}}class $p extends fp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Ck.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new GC(gh.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new GC(gh.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new GC(gh.REMOVE,i,e)),this.dispatchEvent(new GC(gh.ADD,t,e))}updateLength_(){this.set(Ck.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Ef={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ra={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class lz extends fp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ra.OPACITY]=e.opacity!==void 0?e.opacity:1,ra(typeof t[Ra.OPACITY]=="number","Layer opacity must be a number"),t[Ra.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ra.Z_INDEX]=e.zIndex,t[Ra.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ra.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ra.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ra.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Tu(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return go()}getLayerStatesArray(e){return go()}getExtent(){return this.get(Ra.EXTENT)}getMaxResolution(){return this.get(Ra.MAX_RESOLUTION)}getMinResolution(){return this.get(Ra.MIN_RESOLUTION)}getMinZoom(){return this.get(Ra.MIN_ZOOM)}getMaxZoom(){return this.get(Ra.MAX_ZOOM)}getOpacity(){return this.get(Ra.OPACITY)}getSourceState(){return go()}getVisible(){return this.get(Ra.VISIBLE)}getZIndex(){return this.get(Ra.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ra.EXTENT,e)}setMaxResolution(e){this.set(Ra.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ra.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ra.MAX_ZOOM,e)}setMinZoom(e){this.set(Ra.MIN_ZOOM,e)}setOpacity(e){ra(typeof e=="number","Layer opacity must be a number"),this.set(Ra.OPACITY,e)}setVisible(e){this.set(Ra.VISIBLE,e)}setZIndex(e){this.set(Ra.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Vl={ANIMATING:0,INTERACTING:1},ep={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},uz=42,CO=256;function bk(n,e,t){return function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const d=e?0:s[0]*i,g=e?0:s[1]*i,b=o?o[0]:0,E=o?o[1]:0;let S=n[0]+d/2+b,O=n[2]-d/2+b,k=n[1]+g/2+E,U=n[3]-g/2+E;S>O&&(S=(O+S)/2,O=S),k>U&&(k=(U+k)/2,U=k);let z=Tu(r[0],S,O),q=Tu(r[1],k,U);if(a&&t&&i){const Q=30*i;z+=-Q*Math.log(1+Math.max(0,S-r[0])/Q)+Q*Math.log(1+Math.max(0,r[0]-O)/Q),q+=-Q*Math.log(1+Math.max(0,k-r[1])/Q)+Q*Math.log(1+Math.max(0,r[1]-U)/Q)}return[z,q]}}function tJ(n){return n}function bO(n,e,t,r){const i=ps(e)/t[0],s=Hl(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function xO(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Tu(r,t/2,e*2)}function nJ(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,a,o){if(i!==void 0){const d=n[0],g=n[n.length-1],b=t?bO(d,t,a,r):d;if(o)return e?xO(i,b,g):Tu(i,g,b);const E=Math.min(b,i),S=Math.floor(ux(n,E,s));return n[S]>b&&S<n.length-1?n[S+1]:n[S]}}}function rJ(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(a,o,d,g){if(a!==void 0){const b=i?bO(e,i,d,s):e;if(g)return r?xO(a,b,t):Tu(a,t,b);const E=1e-9,S=Math.ceil(Math.log(e/b)/Math.log(n)-E),O=-o*(.5-E)+.5,k=Math.min(b,a),U=Math.floor(Math.log(e/k)/Math.log(n)+O),z=Math.max(S,U),q=e/Math.pow(n,z);return Tu(q,t,b)}}}function xk(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,a,o,d){if(s!==void 0){const g=r?bO(n,r,o,i):n;return!t||!d?Tu(s,e,g):xO(s,g,e)}}}function wO(n){if(n!==void 0)return 0}function wk(n){if(n!==void 0)return n}function iJ(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function oJ(n){const e=E0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}function Az(n){return Math.pow(n,3)}function Py(n){return 1-Az(1-n)}function sJ(n){return 3*n*n-2*n*n*n}function aJ(n){return n}const k4=0;class sp extends fp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=AO(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&qU(),e.center&&(e.center=km(e.center,this.projection_)),e.extent&&(e.extent=Yp(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in ep)delete t[o];this.setProperties(t,!0);const r=uJ(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=lJ(e),s=r.constraint,a=AJ(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=km(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=km(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const b=arguments[i];b.center&&this.setCenterInternal(b.center),b.zoom!==void 0?this.setZoom(b.zoom):b.resolution&&this.setResolution(b.resolution),b.rotation!==void 0&&this.setRotation(b.rotation)}if(i===t){r&&WC(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,d=this.targetRotation_;const g=[];for(;i<t;++i){const b=arguments[i],E={start:s,complete:!1,anchor:b.anchor,duration:b.duration!==void 0?b.duration:1e3,easing:b.easing||sJ,callback:r};if(b.center&&(E.sourceCenter=a,E.targetCenter=b.center.slice(),a=E.targetCenter),b.zoom!==void 0?(E.sourceResolution=o,E.targetResolution=this.getResolutionForZoom(b.zoom),o=E.targetResolution):b.resolution&&(E.sourceResolution=o,E.targetResolution=b.resolution,o=E.targetResolution),b.rotation!==void 0){E.sourceRotation=d;const S=wg(b.rotation-d+Math.PI,2*Math.PI)-Math.PI;E.targetRotation=d+S,d=E.targetRotation}cJ(E)?E.complete=!0:s+=E.duration,g.push(E)}this.animations_.push(g),this.setHint(Vl.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Vl.ANIMATING]>0}getInteracting(){return this.hints_[Vl.INTERACTING]>0}cancelAnimations(){this.setHint(Vl.ANIMATING,-this.hints_[Vl.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&WC(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const d=i[a];if(d.complete)continue;const g=e-d.start;let b=d.duration>0?g/d.duration:1;b>=1?(d.complete=!0,b=1):s=!1;const E=d.easing(b);if(d.sourceCenter){const S=d.sourceCenter[0],O=d.sourceCenter[1],k=d.targetCenter[0],U=d.targetCenter[1];this.nextCenter_=d.targetCenter;const z=S+E*(k-S),q=O+E*(U-O);this.targetCenter_=[z,q]}if(d.sourceResolution&&d.targetResolution){const S=E===1?d.targetResolution:d.sourceResolution+E*(d.targetResolution-d.sourceResolution);if(d.anchor){const O=this.getViewportSize_(this.getRotation()),k=this.constraints_.resolution(S,0,O,!0);this.targetCenter_=this.calculateCenterZoom(k,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=S,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const S=E===1?wg(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+E*(d.targetRotation-d.sourceRotation);if(d.anchor){const O=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(O,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(s){this.animations_[r]=null,this.setHint(Vl.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&WC(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],oO(r,e-this.getRotation()),dX(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&K6(e,this.getProjection())}getCenterInternal(){return this.get(ep.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return cO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ra(t,"The view center is not defined");const r=this.getResolution();ra(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ra(i!==void 0,"The view rotation is not defined"),r2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ep.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Yp(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=ps(e)/t[0],i=Hl(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(ep.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(a){return Math.log(r/a)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=T4(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=ux(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=Tu(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,Tu(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(ra(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ra(!Fg(e),"Cannot fit empty extent provided as `geometry`");const i=Yp(e,this.getProjection());r=yk(i)}else if(e.getType()==="Circle"){const i=Yp(e.getExtent(),this.getProjection());r=yk(i),r.rotate(this.getRotation(),If(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,d=1/0,g=-1/0,b=-1/0;for(let E=0,S=s.length;E<S;E+=a){const O=s[E]*r-s[E+1]*i,k=s[E]*i+s[E+1]*r;o=Math.min(o,O),d=Math.min(d,k),g=Math.max(g,O),b=Math.max(b,k)}return[o,d,g,b]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);d=isNaN(d)?a:Math.max(d,a),d=this.getConstrainedResolution(d,s?0:1);const g=this.getRotation(),b=Math.sin(g),E=Math.cos(g),S=If(o);S[0]+=(i[1]-i[3])/2*d,S[1]+=(i[0]-i[2])/2*d;const O=S[0]*E-S[1]*b,k=S[1]*E+S[0]*b,U=this.getConstrainedCenter([O,k],d),z=t.callback?t.callback:gy;t.duration!==void 0?this.animateInternal({resolution:d,center:U,duration:t.duration,easing:t.easing},z):(this.targetResolution_=d,this.targetCenter_=U,this.applyTargetState_(!1,!0),WC(z,!0))}centerOn(e,t,r){this.centerOnInternal(km(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(T4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),d=T4(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-d[0],e[1]-d[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=K6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&km(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=km(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&km(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(ep.ROTATION)!==i&&this.set(ep.ROTATION,i),this.get(ep.RESOLUTION)!==a&&(this.set(ep.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(ep.CENTER)||!i2(this.get(ep.CENTER),o))&&this.set(ep.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),d=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=d,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!i2(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:d,resolution:o,duration:e,easing:Py,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Vl.INTERACTING,1)}endInteraction(e,t,r){r=r&&km(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Vl.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function WC(n,e){setTimeout(function(){n(e)},0)}function lJ(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return bk(n.extent,n.constrainOnlyCenter,t)}const e=AO(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,bk(t,!1,!1)}return tJ}function uJ(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:k4,o=n.maxZoom!==void 0?n.maxZoom:28;const d=n.zoomFactor!==void 0?n.zoomFactor:2,g=n.multiWorld!==void 0?n.multiWorld:!1,b=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,E=n.showFullExtent!==void 0?n.showFullExtent:!1,S=AO(n.projection,"EPSG:3857"),O=S.getExtent();let k=n.constrainOnlyCenter,U=n.extent;if(!g&&!U&&S.isGlobal()&&(k=!1,U=O),n.resolutions!==void 0){const z=n.resolutions;t=z[a],r=z[o]!==void 0?z[o]:z[z.length-1],n.constrainResolution?e=nJ(z,b,!k&&U,E):e=xk(t,r,b,!k&&U,E)}else{const q=(O?Math.max(ps(O),Hl(O)):360*R0.degrees/S.getMetersPerUnit())/CO/Math.pow(2,k4),Q=q/Math.pow(2,28-k4);t=n.maxResolution,t!==void 0?a=0:t=q/Math.pow(d,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(d,o):r=q/Math.pow(d,o):r=Q),o=a+Math.floor(Math.log(t/r)/Math.log(d)),r=t/Math.pow(d,o-a),n.constrainResolution?e=rJ(d,t,r,b,!k&&U,E):e=xk(t,r,b,!k&&U,E)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:d}}function AJ(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?oJ():t===!1?wk:typeof t=="number"?iJ(t):wk}return wO}function cJ(n){return!(n.sourceCenter&&n.targetCenter&&!i2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function T4(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,d=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,d+=(t[1]-e[1]/2)*r,a=-a;const g=o*s-d*a,b=d*s+o*a;return[g,b]}class Ry extends lz{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ra.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ra.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Da(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ts(e,io.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof sp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return MO(i,t.viewState)&&(!s||ku(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof sp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ra.MAP,e)}getMapInternal(){return this.get(Ra.MAP)}setMap(e){this.mapPrecomposeKey_&&(Da(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Da(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ts(e,Ef.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ts(this,io.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);ra(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Ra.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function MO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}function cz(n,e,t=0,r=n.length-1,i=dJ){for(;r>t;){if(r-t>600){const d=r-t+1,g=e-t+1,b=Math.log(d),E=.5*Math.exp(2*b/3),S=.5*Math.sqrt(b*E*(d-E)/d)*(g-d/2<0?-1:1),O=Math.max(t,Math.floor(e-g*E/d+S)),k=Math.min(r,Math.floor(e+(d-g)*E/d+S));cz(n,e,O,k,i)}const s=n[e];let a=t,o=r;for(uv(n,t,e),i(n[r],s)>0&&uv(n,t,r);a<o;){for(uv(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?uv(n,t,o):(o++,uv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function uv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function dJ(n,e){return n<e?-1:n>e?1:0}let dz=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!qC(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],d=t.leaf?i(o):o;qC(e,d)&&(t.leaf?r.push(o):R4(e,d)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!qC(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(qC(e,a)){if(t.leaf||R4(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=F1([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,d,g;for(;r||s.length;){if(r||(r=s.pop(),d=s[s.length-1],o=a.pop(),g=!0),r.leaf){const b=hJ(e,r.children,t);if(b!==-1)return r.children.splice(b,1),s.push(r),this._condense(s),this}!g&&!r.leaf&&R4(r,i)?(s.push(r),a.push(o),o=0,d=r,r=r.children[0]):d?(o++,r=d.children[o],g=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=F1(e.slice(t,r+1)),a1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=F1([]),o.leaf=!1,o.height=i;const d=Math.ceil(s/a),g=d*Math.ceil(Math.sqrt(a));Mk(e,t,r,g,this.compareMinX);for(let b=t;b<=r;b+=g){const E=Math.min(b+g-1,r);Mk(e,b,E,d,this.compareMinY);for(let S=b;S<=E;S+=d){const O=Math.min(S+d-1,E);o.children.push(this._build(e,S,O,i-1))}}return a1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let d=0;d<t.children.length;d++){const g=t.children[d],b=P4(g),E=mJ(e,g)-b;E<a?(a=E,s=b<s?b:s,o=g):E===a&&b<s&&(s=b,o=g)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Mv(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=F1(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,a1(r,this.toBBox),a1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=F1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const d=wv(e,0,o,this.toBBox),g=wv(e,o,r,this.toBBox),b=gJ(d,g),E=P4(d)+P4(g);b<s?(s=b,i=o,a=E<a?E:a):b===s&&E<a&&(a=E,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:fJ,s=e.leaf?this.compareMinY:pJ,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=wv(e,0,t,s),o=wv(e,r-t,r,s);let d=QC(a)+QC(o);for(let g=t;g<r-t;g++){const b=e.children[g];Mv(a,e.leaf?s(b):b),d+=QC(a)}for(let g=r-t-1;g>=t;g--){const b=e.children[g];Mv(o,e.leaf?s(b):b),d+=QC(o)}return d}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Mv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():a1(e[t],this.toBBox)}};function hJ(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function a1(n,e){wv(n,0,n.children.length,e,n)}function wv(n,e,t,r,i){i||(i=F1(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Mv(i,n.leaf?r(a):a)}return i}function Mv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function fJ(n,e){return n.minX-e.minX}function pJ(n,e){return n.minY-e.minY}function P4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function QC(n){return n.maxX-n.minX+(n.maxY-n.minY)}function mJ(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function gJ(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function R4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function qC(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function F1(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Mk(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;cz(n,a,e,t,i),s.push(e,a,a,t)}}let jg=0;const Nd=1<<jg++,zs=1<<jg++,yh=1<<jg++,ap=1<<jg++,Pg=1<<jg++,Sv=1<<jg++,YC=Math.pow(2,jg)-1,SO={[Nd]:"boolean",[zs]:"number",[yh]:"string",[ap]:"color",[Pg]:"number[]",[Sv]:"size"},yJ=Object.keys(SO).map(Number).sort(Fm);function vJ(n){return n in SO}function Ev(n){const e=[];for(const t of yJ)Bv(n,t)&&e.push(SO[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Bv(n,e){return(n&e)===e}function u0(n,e){return n===e}class zA{constructor(e,t){if(!vJ(e))throw new Error(`literal expressions must have a specific type, got ${Ev(e)}`);this.type=e,this.value=t}}class _J{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function hz(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Rc(n,e,t){switch(typeof n){case"boolean":{if(u0(e,yh))return new zA(yh,n?"true":"false");if(!Bv(e,Nd))throw new Error(`got a boolean, but expected ${Ev(e)}`);return new zA(Nd,n)}case"number":{if(u0(e,Sv))return new zA(Sv,ad(n));if(u0(e,Nd))return new zA(Nd,!!n);if(u0(e,yh))return new zA(yh,n.toString());if(!Bv(e,zs))throw new Error(`got a number, but expected ${Ev(e)}`);return new zA(zs,n)}case"string":{if(u0(e,ap))return new zA(ap,YB(n));if(u0(e,Nd))return new zA(Nd,!!n);if(!Bv(e,yh))throw new Error(`got a string, but expected ${Ev(e)}`);return new zA(yh,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return kJ(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(u0(e,Sv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new zA(Sv,n)}if(u0(e,ap)){if(n.length===3)return new zA(ap,[...n,1]);if(n.length===4)return new zA(ap,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Bv(e,Pg))throw new Error(`got an array of numbers, but expected ${Ev(e)}`);return new zA(Pg,n)}const zn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},CJ={[zn.Get]:po(es(1,1/0),Sk),[zn.Var]:po(es(1,1),bJ),[zn.Has]:po(es(1,1/0),Sk),[zn.Id]:po(xJ,l1),[zn.Concat]:po(es(2,1/0),pa(yh)),[zn.GeometryType]:po(wJ,l1),[zn.LineMetric]:po(l1),[zn.Resolution]:po(l1),[zn.Zoom]:po(l1),[zn.Time]:po(l1),[zn.Any]:po(es(2,1/0),pa(Nd)),[zn.All]:po(es(2,1/0),pa(Nd)),[zn.Not]:po(es(1,1),pa(Nd)),[zn.Equal]:po(es(2,2),pa(YC)),[zn.NotEqual]:po(es(2,2),pa(YC)),[zn.GreaterThan]:po(es(2,2),pa(zs)),[zn.GreaterThanOrEqualTo]:po(es(2,2),pa(zs)),[zn.LessThan]:po(es(2,2),pa(zs)),[zn.LessThanOrEqualTo]:po(es(2,2),pa(zs)),[zn.Multiply]:po(es(2,1/0),Ek),[zn.Coalesce]:po(es(2,1/0),Ek),[zn.Divide]:po(es(2,2),pa(zs)),[zn.Add]:po(es(2,1/0),pa(zs)),[zn.Subtract]:po(es(2,2),pa(zs)),[zn.Clamp]:po(es(3,3),pa(zs)),[zn.Mod]:po(es(2,2),pa(zs)),[zn.Pow]:po(es(2,2),pa(zs)),[zn.Abs]:po(es(1,1),pa(zs)),[zn.Floor]:po(es(1,1),pa(zs)),[zn.Ceil]:po(es(1,1),pa(zs)),[zn.Round]:po(es(1,1),pa(zs)),[zn.Sin]:po(es(1,1),pa(zs)),[zn.Cos]:po(es(1,1),pa(zs)),[zn.Atan]:po(es(1,2),pa(zs)),[zn.Sqrt]:po(es(1,1),pa(zs)),[zn.Match]:po(es(4,1/0),Bk,SJ),[zn.Between]:po(es(3,3),pa(zs)),[zn.Interpolate]:po(es(6,1/0),Bk,EJ),[zn.Case]:po(es(3,1/0),MJ,BJ),[zn.In]:po(es(2,2),OJ),[zn.Number]:po(es(1,1/0),pa(YC)),[zn.String]:po(es(1,1/0),pa(YC)),[zn.Array]:po(es(1,1/0),pa(zs)),[zn.Color]:po(es(1,4),pa(zs)),[zn.Band]:po(es(1,3),pa(zs)),[zn.Palette]:po(es(2,2),IJ),[zn.ToString]:po(es(1,1),pa(Nd|zs|yh|ap))};function Sk(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new zA(zs,a);break}case"string":{i[s]=new zA(yh,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function bJ(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new zA(yh,r)]}function xJ(n,e,t){t.featureId=!0}function wJ(n,e,t){t.geometryType=!0}function l1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function es(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function Ek(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=Rc(n[s+1],e,t);i[s]=a}return i}function pa(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=Rc(e[a+1],n,r);s[a]=o}return s}}function MJ(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function Bk(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function SJ(n,e,t){const r=n.length-1,i=yh|zs|Nd,s=Rc(n[1],i,t),a=Rc(n[n.length-1],e,t),o=new Array(r-2);for(let d=0;d<r-2;d+=2){try{const g=Rc(n[d+2],s.type,t);o[d]=g}catch(g){throw new Error(`failed to parse argument ${d+1} of match expression: ${g.message}`)}try{const g=Rc(n[d+3],a.type,t);o[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+2} of match expression: ${g.message}`)}}return[s,...o,a]}function EJ(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const d=r[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);i=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new zA(zs,i);let a;try{a=Rc(n[2],zs,t)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const o=new Array(n.length-3);for(let d=0;d<o.length;d+=2){try{const g=Rc(n[d+3],zs,t);o[d]=g}catch(g){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${g.message}`)}try{const g=Rc(n[d+4],e,t);o[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${g.message}`)}}return[s,a,...o]}function BJ(n,e,t){const r=Rc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=Rc(n[s+1],Nd,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=Rc(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function OJ(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=yh}else i=zs;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const d=Rc(r[o],i,t);s[o]=d}catch(d){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${d.message}`)}return[Rc(n[1],i,t),...s]}function IJ(n,e,t){let r;try{r=Rc(n[1],zs,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=Rc(i[a],ap,t)}catch(d){throw new Error(`failed to parse color at index ${a} in palette expression: ${d.message}`)}if(!(o instanceof zA))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function po(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new _J(t,i,...s)}}function kJ(n,e,t){const r=n[0],i=CJ[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function fz(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return fz(n.getGeometries()[0]);default:return""}}function pz(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function qm(n,e,t){const r=Rc(n,e,t);return cp(r)}function cp(n,e){if(n instanceof zA){if(n.type===ap&&typeof n.value=="string"){const r=YB(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case zn.Number:case zn.String:case zn.Coalesce:return TJ(n);case zn.Get:case zn.Var:case zn.Has:return PJ(n);case zn.Id:return r=>r.featureId;case zn.GeometryType:return r=>r.geometryType;case zn.Concat:{const r=n.args.map(i=>cp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case zn.Resolution:return r=>r.resolution;case zn.Any:case zn.All:case zn.Between:case zn.In:case zn.Not:return KJ(n);case zn.Equal:case zn.NotEqual:case zn.LessThan:case zn.LessThanOrEqualTo:case zn.GreaterThan:case zn.GreaterThanOrEqualTo:return RJ(n);case zn.Multiply:case zn.Divide:case zn.Add:case zn.Subtract:case zn.Clamp:case zn.Mod:case zn.Pow:case zn.Abs:case zn.Floor:case zn.Ceil:case zn.Round:case zn.Sin:case zn.Cos:case zn.Atan:case zn.Sqrt:return DJ(n);case zn.Case:return LJ(n);case zn.Match:return FJ(n);case zn.Interpolate:return UJ(n);case zn.ToString:return zJ(n);default:throw new Error(`Unsupported operator ${t}`)}}function TJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=cp(n.args[s]);switch(t){case zn.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case zn.Number:case zn.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function PJ(n,e){const r=n.args[0].value;switch(n.operator){case zn.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,d=s.length;o<d;++o){const b=s[o].value;a=a[b]}return a};case zn.Var:return i=>i.variables[r];case zn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,d=s.length;o<d;++o){const b=s[o].value;if(!a||!Object.hasOwn(a,b))return!1;a=a[b]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function RJ(n,e){const t=n.operator,r=cp(n.args[0]),i=cp(n.args[1]);switch(t){case zn.Equal:return s=>r(s)===i(s);case zn.NotEqual:return s=>r(s)!==i(s);case zn.LessThan:return s=>r(s)<i(s);case zn.LessThanOrEqualTo:return s=>r(s)<=i(s);case zn.GreaterThan:return s=>r(s)>i(s);case zn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function KJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=cp(n.args[s]);switch(t){case zn.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case zn.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case zn.Between:return s=>{const a=i[0](s),o=i[1](s),d=i[2](s);return a>=o&&a<=d};case zn.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case zn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function DJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=cp(n.args[s]);switch(t){case zn.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case zn.Divide:return s=>i[0](s)/i[1](s);case zn.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case zn.Subtract:return s=>i[0](s)-i[1](s);case zn.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const d=i[2](s);return a>d?d:a};case zn.Mod:return s=>i[0](s)%i[1](s);case zn.Pow:return s=>Math.pow(i[0](s),i[1](s));case zn.Abs:return s=>Math.abs(i[0](s));case zn.Floor:return s=>Math.floor(i[0](s));case zn.Ceil:return s=>Math.ceil(i[0](s));case zn.Round:return s=>Math.round(i[0](s));case zn.Sin:return s=>Math.sin(i[0](s));case zn.Cos:return s=>Math.cos(i[0](s));case zn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case zn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function LJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=cp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function FJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=cp(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function UJ(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=cp(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,d;for(let g=2;g<t;g+=2){const b=r[g](i);let E=r[g+1](i);const S=Array.isArray(E);if(S&&(E=wZ(E)),b>=a)return g===2?E:S?jJ(s,a,o,d,b,E):Ov(s,a,o,d,b,E);o=b,d=E}return d}}function zJ(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=cp(n.args[s]);switch(t){case zn.ToString:return s=>{const a=i[0](s);return n.args[0].type===ap?$B(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Ov(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,d=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+d*(s-r)}function jJ(n,e,t,r,i,s){if(i-t===0)return r;const o=H7(r),d=H7(s);let g=d[2]-o[2];g>180?g-=360:g<-180&&(g+=360);const b=[Ov(n,e,t,o[0],i,d[0]),Ov(n,e,t,o[1],i,d[1]),o[2]+Ov(n,e,t,0,i,g),Ov(n,e,t,r[3],i,s[3])];return CU(MZ(b))}function NJ(n){return!0}function GJ(n){const e=hz(),t=WJ(n,e),r=pz();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=fz(i.getGeometry())),t(r)}}function Ok(n){const e=hz(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=U6(n[a],e);const i=pz(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const g=a.getId();g!==void 0?i.featureId=g:i.featureId=null}let d=0;for(let g=0;g<t;++g){const b=r[g](i);b&&(s[d]=b,d+=1)}return s.length=d,s}}function WJ(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?qm(s.filter,Nd,e):NJ;let o;if(Array.isArray(s.style)){const d=s.style.length;o=new Array(d);for(let g=0;g<d;++g)o[g]=U6(s.style[g],e)}else o=[U6(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const d=r[o].filter;if(d(i)&&!(n[o].else&&a)){a=!0;for(const g of r[o].styles){const b=g(i);b&&s.push(b)}}}return s}}function U6(n,e){const t=g_(n,"",e),r=y_(n,"",e),i=QJ(n,e),s=qJ(n,e),a=vh(n,"z-index",e);if(!t&&!r&&!i&&!s&&!T0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new qh;return function(d){let g=!0;if(t){const b=t(d);b&&(g=!1),o.setFill(b)}if(r){const b=r(d);b&&(g=!1),o.setStroke(b)}if(i){const b=i(d);b&&(g=!1),o.setText(b)}if(s){const b=s(d);b&&(g=!1),o.setImage(b)}return a&&o.setZIndex(a(d)),g?null:o}}function g_(n,e,t){let r;if(e+"fill-pattern-src"in n)r=HJ(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=EO(n,e+"fill-color",t)}if(!r)return null;const i=new Dm;return function(s){const a=r(s);return a===qB?null:(i.setColor(a),i)}}function y_(n,e,t){const r=vh(n,e+"stroke-width",t),i=EO(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Pm(n,e+"stroke-line-cap",t),a=Pm(n,e+"stroke-line-join",t),o=mz(n,e+"stroke-line-dash",t),d=vh(n,e+"stroke-line-dash-offset",t),g=vh(n,e+"stroke-miter-limit",t),b=new b0;return function(E){if(i){const S=i(E);if(S===qB)return null;b.setColor(S)}if(r&&b.setWidth(r(E)),s){const S=s(E);if(S!=="butt"&&S!=="round"&&S!=="square")throw new Error("Expected butt, round, or square line cap");b.setLineCap(S)}if(a){const S=a(E);if(S!=="bevel"&&S!=="round"&&S!=="miter")throw new Error("Expected bevel, round, or miter line join");b.setLineJoin(S)}return o&&b.setLineDash(o(E)),d&&b.setLineDashOffset(d(E)),g&&b.setMiterLimit(g(E)),b}}function QJ(n,e){const t="text-",r=Pm(n,t+"value",e);if(!r)return null;const i=g_(n,t,e),s=g_(n,t+"background-",e),a=y_(n,t,e),o=y_(n,t+"background-",e),d=Pm(n,t+"font",e),g=vh(n,t+"max-angle",e),b=vh(n,t+"offset-x",e),E=vh(n,t+"offset-y",e),S=ry(n,t+"overflow",e),O=Pm(n,t+"placement",e),k=vh(n,t+"repeat",e),U=Sx(n,t+"scale",e),z=ry(n,t+"rotate-with-view",e),q=vh(n,t+"rotation",e),Q=Pm(n,t+"align",e),re=Pm(n,t+"justify",e),X=Pm(n,t+"baseline",e),Y=ry(n,t+"keep-upright",e),J=mz(n,t+"padding",e),N=Ex(n,t+"declutter-mode"),ie=new Mx({declutterMode:N});return function(he){if(ie.setText(r(he)),i&&ie.setFill(i(he)),s&&ie.setBackgroundFill(s(he)),a&&ie.setStroke(a(he)),o&&ie.setBackgroundStroke(o(he)),d&&ie.setFont(d(he)),g&&ie.setMaxAngle(g(he)),b&&ie.setOffsetX(b(he)),E&&ie.setOffsetY(E(he)),S&&ie.setOverflow(S(he)),O){const de=O(he);if(de!=="point"&&de!=="line")throw new Error("Expected point or line for text-placement");ie.setPlacement(de)}if(k&&ie.setRepeat(k(he)),U&&ie.setScale(U(he)),z&&ie.setRotateWithView(z(he)),q&&ie.setRotation(q(he)),Q){const de=Q(he);if(de!=="left"&&de!=="center"&&de!=="right"&&de!=="end"&&de!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ie.setTextAlign(de)}if(re){const de=re(he);if(de!=="left"&&de!=="right"&&de!=="center")throw new Error("Expected left, right, or center for text-justify");ie.setJustify(de)}if(X){const de=X(he);if(de!=="bottom"&&de!=="top"&&de!=="middle"&&de!=="alphabetic"&&de!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ie.setTextBaseline(de)}return J&&ie.setPadding(J(he)),Y&&ie.setKeepUpright(Y(he)),ie}}function qJ(n,e){return"icon-src"in n?YJ(n,e):"shape-points"in n?$J(n,e):"circle-radius"in n?VJ(n,e):null}function YJ(n,e){const t="icon-",r=t+"src",i=gz(n[r],r),s=A2(n,t+"anchor",e),a=Sx(n,t+"scale",e),o=vh(n,t+"opacity",e),d=A2(n,t+"displacement",e),g=vh(n,t+"rotation",e),b=ry(n,t+"rotate-with-view",e),E=kk(n,t+"anchor-origin"),S=Tk(n,t+"anchor-x-units"),O=Tk(n,t+"anchor-y-units"),k=eee(n,t+"color"),U=XJ(n,t+"cross-origin"),z=JJ(n,t+"offset"),q=kk(n,t+"offset-origin"),Q=c2(n,t+"width"),re=c2(n,t+"height"),X=ZJ(n,t+"size"),Y=Ex(n,t+"declutter-mode"),J=new n2({src:i,anchorOrigin:E,anchorXUnits:S,anchorYUnits:O,color:k,crossOrigin:U,offset:z,offsetOrigin:q,height:re,width:Q,size:X,declutterMode:Y});return function(N){return o&&J.setOpacity(o(N)),d&&J.setDisplacement(d(N)),g&&J.setRotation(g(N)),b&&J.setRotateWithView(b(N)),a&&J.setScale(a(N)),s&&J.setAnchor(s(N)),J}}function $J(n,e){const t="shape-",r=t+"points",i=t+"radius",s=z6(n[r],r),a=z6(n[i],i),o=g_(n,t,e),d=y_(n,t,e),g=Sx(n,t+"scale",e),b=A2(n,t+"displacement",e),E=vh(n,t+"rotation",e),S=ry(n,t+"rotate-with-view",e),O=c2(n,t+"radius2"),k=c2(n,t+"angle"),U=Ex(n,t+"declutter-mode"),z=new hx({points:s,radius:a,radius2:O,angle:k,declutterMode:U});return function(q){return o&&z.setFill(o(q)),d&&z.setStroke(d(q)),b&&z.setDisplacement(b(q)),E&&z.setRotation(E(q)),S&&z.setRotateWithView(S(q)),g&&z.setScale(g(q)),z}}function VJ(n,e){const t="circle-",r=g_(n,t,e),i=y_(n,t,e),s=vh(n,t+"radius",e),a=Sx(n,t+"scale",e),o=A2(n,t+"displacement",e),d=vh(n,t+"rotation",e),g=ry(n,t+"rotate-with-view",e),b=Ex(n,t+"declutter-mode"),E=new j_({radius:5,declutterMode:b});return function(S){return s&&E.setRadius(s(S)),r&&E.setFill(r(S)),i&&E.setStroke(i(S)),o&&E.setDisplacement(o(S)),d&&E.setRotation(d(S)),g&&E.setRotateWithView(g(S)),a&&E.setScale(a(S)),E}}function vh(n,e,t){if(!(e in n))return;const r=qm(n[e],zs,t);return function(i){return z6(r(i),e)}}function Pm(n,e,t){if(!(e in n))return null;const r=qm(n[e],yh,t);return function(i){return gz(r(i),e)}}function HJ(n,e,t){const r=Pm(n,e+"pattern-src",t),i=Ik(n,e+"pattern-offset",t),s=Ik(n,e+"pattern-size",t),a=EO(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function ry(n,e,t){if(!(e in n))return null;const r=qm(n[e],Nd,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function EO(n,e,t){if(!(e in n))return null;const r=qm(n[e],ap,t);return function(i){return yz(r(i),e)}}function mz(n,e,t){if(!(e in n))return null;const r=qm(n[e],Pg,t);return function(i){return q_(r(i),e)}}function A2(n,e,t){if(!(e in n))return null;const r=qm(n[e],Pg,t);return function(i){const s=q_(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function Ik(n,e,t){if(!(e in n))return null;const r=qm(n[e],Pg,t);return function(i){return vz(r(i),e)}}function Sx(n,e,t){if(!(e in n))return null;const r=qm(n[e],Pg|zs,t);return function(i){return tee(r(i),e)}}function c2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function ZJ(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return ad(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function XJ(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function kk(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Tk(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function JJ(n,e){const t=n[e];if(t!==void 0)return q_(t,e)}function Ex(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function eee(n,e){const t=n[e];if(t!==void 0)return yz(t,e)}function q_(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function gz(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function z6(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function yz(n,e){if(typeof n=="string")return n;const t=q_(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function vz(n,e){const t=q_(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function tee(n,e){return typeof n=="number"?n:vz(n,e)}const Pk={RENDER_ORDER:"renderOrder"};class BO extends Ry{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Pk.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new dz(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Pk.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?az:e;const t=nee(e);this.styleFunction_=e===null?void 0:JX(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function nee(n){if(n===void 0)return az;if(!n)return null;if(typeof n=="function"||n instanceof qh)return n;if(!Array.isArray(n))return Ok([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof qh){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof qh))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return GJ(i)}return Ok(n)}const Qi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},$C=[Qi.FILL],x0=[Qi.STROKE],yg=[Qi.BEGIN_PATH],Rk=[Qi.CLOSE_PATH];class _z{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Y_ extends _z{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,d=e.length;o<d;o+=t)i[0]=e[o],i[1]=e[o+1],Ig(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let d=o.length;const g=this.getBufferedMaxExtent();a&&(t+=i);let b=e[t],E=e[t+1];const S=this.tmpCoordinate_;let O=!0,k,U,z;for(k=t+i;k<r;k+=i)S[0]=e[k],S[1]=e[k+1],z=O6(g,S),z!==U?(O&&(o[d++]=b,o[d++]=E,O=!1),o[d++]=S[0],o[d++]=S[1]):z===Ac.INTERSECTING?(o[d++]=S[0],o[d++]=S[1],O=!1):O=!0,b=S[0],E=S[1],U=z;return(s&&O||k===t+i)&&(o[d++]=b,o[d++]=E),d}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const d=r[a],g=this.appendFlatLineCoordinates(e,t,d,i,!1,!1);s.push(g),t=d}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),d=this.coordinates.length;let g,b,E,S,O;switch(a){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),S=[];const k=e.getEndss();O=0;for(let U=0,z=k.length;U<z;++U){const q=[];O=this.drawCustomCoordinates_(g,O,k[U],o,q),S.push(q)}this.instructions.push([Qi.CUSTOM,d,S,e,r,D6,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,S,e,i||r,D6,s]);break;case"Polygon":case"MultiLineString":E=[],g=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),O=this.drawCustomCoordinates_(g,0,e.getEnds(),o,E),this.instructions.push([Qi.CUSTOM,d,E,e,r,h_,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,E,e,i||r,h_,s]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),b=this.appendFlatLineCoordinates(g,0,g.length,o,!1,!1),this.instructions.push([Qi.CUSTOM,d,b,e,r,C0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,b,e,i||r,C0,s]);break;case"MultiPoint":g=e.getFlatCoordinates(),b=this.appendFlatPointCoordinates(g,o),b>d&&(this.instructions.push([Qi.CUSTOM,d,b,e,r,C0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,b,e,i||r,C0,s]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),b=this.coordinates.length,this.instructions.push([Qi.CUSTOM,d,b,e,r,void 0,s]),this.hitDetectionInstructions.push([Qi.CUSTOM,d,b,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Qi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Qi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Qi.END_GEOMETRY?a=t:s==Qi.BEGIN_GEOMETRY&&(i[2]=t,mZ(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const r=this.state;if(e){const i=e.getColor();r.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,r.fillStyle=qp(i||mh)}else r.fillStyle=void 0;if(t){const i=t.getColor();r.strokeStyle=qp(i||a_);const s=t.getLineCap();r.lineCap=s!==void 0?s:Cy;const a=t.getLineDash();r.lineDash=a?a.slice():Um;const o=t.getLineDashOffset();r.lineDashOffset=o||zm;const d=t.getLineJoin();r.lineJoin=d!==void 0?d:by;const g=t.getWidth();r.lineWidth=g!==void 0?g:u_;const b=t.getMiterLimit();r.miterLimit=b!==void 0?b:s_,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}createFill(e){const t=e.fillStyle,r=[Qi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Qi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,d=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!K0(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=d||e.currentMiterLimit!=g)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=d,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Qi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=KU(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;B0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class ree extends Y_{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Ig(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let d=0,g=i.length;d<g;d+=e.getStride())(!this.maxExtent||Ig(this.maxExtent,i.slice(d,d+2)))&&s.push(i[d],i[d+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Qi.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class iee extends Y_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Qi.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm],yg);const o=e.getFlatCoordinates(),d=e.getStride();this.drawFlatCoordinates_(o,0,o.length,d),this.hitDetectionInstructions.push(x0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm],yg);const o=e.getEnds(),d=e.getFlatCoordinates(),g=e.getStride();let b=0;for(let E=0,S=o.length;E<S;++E)b=this.drawFlatCoordinates_(d,b,o[E],g);this.hitDetectionInstructions.push(x0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(x0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(x0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(yg)}}class Kk extends Y_{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,d=r.length;this.instructions.push(yg),this.hitDetectionInstructions.push(yg);for(let g=0;g<d;++g){const b=r[g],E=this.coordinates.length,S=this.appendFlatLineCoordinates(e,t,b,i,!0,!o),O=[Qi.MOVE_TO_LINE_TO,E,S];this.instructions.push(O),this.hitDetectionInstructions.push(O),o&&(this.instructions.push(Rk),this.hitDetectionInstructions.push(Rk)),t=b}return a&&(this.instructions.push($C),this.hitDetectionInstructions.push($C)),o&&(this.instructions.push(x0),this.hitDetectionInstructions.push(x0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,mh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const o=e.getFlatCoordinates(),d=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,d,!1,!1);const b=[Qi.CIRCLE,g];this.instructions.push(yg,b),this.hitDetectionInstructions.push(yg,b),i.fillStyle!==void 0&&(this.instructions.push($C),this.hitDetectionInstructions.push($C)),i.strokeStyle!==void 0&&(this.instructions.push(x0),this.hitDetectionInstructions.push(x0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,mh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const o=e.getEnds(),d=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(d,0,o,g),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_FILL_STYLE,mh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Um,zm]);const o=e.getEndss(),d=e.getOrientedFlatCoordinates(),g=e.getStride();let b=0;for(let E=0,S=o.length;E<S;++E)b=this.drawFlatCoordinatess_(d,b,o[E],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=lg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function oee(n,e,t,r,i){const s=[];let a=t,o=0,d=e.slice(t,2);for(;o<n&&a+i<r;){const[g,b]=d.slice(-2),E=e[a+i],S=e[a+i+1],O=Math.sqrt((E-g)*(E-g)+(S-b)*(S-b));if(o+=O,o>=n){const k=(n-o+O)/O,U=Qh(g,E,k),z=Qh(b,S,k);d.push(U,z),s.push(d),d=[U,z],o==n&&(a+=i),o=0}else if(o<n)d.push(e[a+i],e[a+i+1]),a+=i;else{const k=O-o,U=Qh(g,E,k/O),z=Qh(b,S,k/O);d.push(U,z),s.push(d),d=[U,z],o=0,a+=i}}return o>0&&s.push(d),s}function see(n,e,t,r,i){let s=t,a=t,o=0,d=0,g=t,b,E,S,O,k,U,z,q,Q,re;for(E=t;E<r;E+=i){const X=e[E],Y=e[E+1];k!==void 0&&(Q=X-k,re=Y-U,O=Math.sqrt(Q*Q+re*re),z!==void 0&&(d+=S,b=Math.acos((z*Q+q*re)/(S*O)),b>n&&(d>o&&(o=d,s=g,a=E),d=0,g=E-i)),S=O,z=Q,q=re),k=X,U=Y}return d+=O,d>o?[g,E]:[s,a]}const d2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class aee extends Y_{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[mh]={fillStyle:mh},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let d=o.length;const g=e.getType();let b=null,E=e.getStride();if(a.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!ku(this.maxExtent,e.getExtent()))return;let S;if(b=e.getFlatCoordinates(),g=="LineString")S=[b.length];else if(g=="MultiLineString")S=e.getEnds();else if(g=="Polygon")S=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const z=e.getEndss();S=[];for(let q=0,Q=z.length;q<Q;++q)S.push(z[q][0])}this.beginGeometry(e,t,r);const O=a.repeat,k=O?void 0:a.textAlign;let U=0;for(let z=0,q=S.length;z<q;++z){let Q;O?Q=oee(O*this.resolution,b,U,S[z],E):Q=[b.slice(U,S[z])];for(let re=0,X=Q.length;re<X;++re){const Y=Q[re];let J=0,N=Y.length;if(k==null){const he=see(a.maxAngle,Y,0,Y.length,2);J=he[0],N=he[1]}for(let he=J;he<N;he+=E)o.push(Y[he],Y[he+1]);const ie=o.length;U=S[z],this.drawChars_(d,ie),d=ie}}this.endGeometry(t)}else{let S=a.overflow?null:[];switch(g){case"Point":case"MultiPoint":b=e.getFlatCoordinates();break;case"LineString":b=e.getFlatMidpoint();break;case"Circle":b=e.getCenter();break;case"MultiLineString":b=e.getFlatMidpoints(),E=2;break;case"Polygon":b=e.getFlatInteriorPoint(),a.overflow||S.push(b[2]/this.resolution),E=3;break;case"MultiPolygon":const Q=e.getFlatInteriorPoints();b=[];for(let re=0,X=Q.length;re<X;re+=3)a.overflow||S.push(Q[re+2]/this.resolution),b.push(Q[re],Q[re+1]);if(b.length===0)return;E=2;break}const O=this.appendFlatPointCoordinates(b,E);if(O===d)return;if(S&&(O-d)/2!==b.length/E){let Q=d/2;S=S.filter((re,X)=>{const Y=o[(Q+X)*2]===b[X*E]&&o[(Q+X)*2+1]===b[X*E+1];return Y||--Q,Y})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,r);let k=a.padding;if(k!=pg&&(a.scale[0]<0||a.scale[1]<0)){let Q=a.padding[0],re=a.padding[1],X=a.padding[2],Y=a.padding[3];a.scale[0]<0&&(re=-re,Y=-Y),a.scale[1]<0&&(Q=-Q,X=-X),k=[Q,re,X,Y]}const U=this.pixelRatio;this.instructions.push([Qi.DRAW_IMAGE,d,O,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,k==pg?pg:k.map(function(Q){return Q*U}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]);const z=1/U,q=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=mh,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Qi.DRAW_IMAGE,d,O,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[z,z],NaN,this.declutterMode_,this.declutterImageWithText_,k,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?mh:this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),a.backgroundFill&&(this.state.fillStyle=q,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||l_,justify:t.justify,textBaseline:t.textBaseline||e2,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,g=d2[i.textBaseline],b=this.textOffsetY_*d,E=this.text_,S=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Qi.DRAW_CHARS,e,t,g,i.overflow,o,i.maxAngle,d,b,s,S*d,E,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Qi.DRAW_CHARS,e,t,g,i.overflow,o&&mh,i.maxAngle,d,b,s,S*d,E,a,1/d,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=qp(a.getColor()||mh)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const U=o.getLineDash(),z=o.getLineDashOffset(),q=o.getWidth(),Q=o.getMiterLimit();s.lineCap=o.getLineCap()||Cy,s.lineDash=U?U.slice():Um,s.lineDashOffset=z===void 0?zm:z,s.lineJoin=o.getLineJoin()||by,s.lineWidth=q===void 0?u_:q,s.miterLimit=Q===void 0?s_:Q,s.strokeStyle=qp(o.getColor()||a_)}r=this.textState_;const d=e.getFont()||OU;IU(d);const g=e.getScaleArray();r.overflow=e.getOverflow(),r.font=d,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||e2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||pg,r.scale=g===void 0?[1,1]:g;const b=e.getOffsetX(),E=e.getOffsetY(),S=e.getRotateWithView(),O=e.getKeepUpright(),k=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=b===void 0?0:b,this.textOffsetY_=E===void 0?0:E,this.textRotateWithView_=S===void 0?!1:S,this.textKeepUpright_=O===void 0?!0:O,this.textRotation_=k===void 0?0:k,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Fo(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Fo(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const lee={Circle:Kk,Default:Y_,Image:ree,LineString:iee,Polygon:Kk,Text:aee};class Cz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=lee[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}const uee=5;class Aee extends z_{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=uee}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return go()}getData(e){return null}prepareFrame(e){return go()}renderFrame(e,t){return go()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===hi.LOADED||t.getState()===hi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=hi.LOADED&&t!=hi.ERROR&&e.addEventListener(io.CHANGE,this.boundHandleImageChange_),t==hi.IDLE&&(e.load(),t=e.getState()),t==hi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class bz extends hp{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}class OO{constructor(){On(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Xb(),{get:(e,t)=>{if(typeof Xb()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,r)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,r),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Dk=[];let U1=null;function cee(){U1=Jl(1,1,void 0,{willReadFrequently:!0})}class IO extends Aee{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=_h(),this.pixelTransform=_h(),this.inversePixelTransform=_h(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){U1||cee(),U1.clearRect(0,0,1,1);let i;try{U1.drawImage(e,t,r,1,1,0,0,1,1),i=U1.getImageData(0,0,1,1).data}catch{return U1=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&K0(vy(e.style.backgroundColor),vy(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Jl();const d=a.canvas;s.appendChild(d),o=d.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Ap(r),s=gx(r),a=mx(r),o=px(r);yA(t.coordinateToPixelTransform,i),yA(t.coordinateToPixelTransform,s),yA(t.coordinateToPixelTransform,a),yA(t.coordinateToPixelTransform,o);const d=this.inversePixelTransform;yA(d,i),yA(d,s),yA(d,a),yA(d,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(ps(r)/i*a),d=Math.round(Hl(r)/i*a);em(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-d/2),RU(this.inversePixelTransform,this.pixelTransform);const g=HZ(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const b=this.context.canvas;b.width!=o||b.height!=d?(b.width=o,b.height=d):this.context.clearRect(0,0,o,d),g!==b.style.transform&&(b.style.transform=g)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new bz(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ef.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ef.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new OO),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ef.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ef.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const d=s/2,g=a/2,b=i/t,E=-b,S=-e[0]+o,O=-e[1];return em(this.tempTransform,d,g,b,E,-r,S,O)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function dee(n,e,t,r,i,s,a,o,d,g,b,E,S=!0){let O=n[e],k=n[e+1],U=0,z=0,q=0,Q=0;function re(){U=O,z=k,e+=r,O=n[e],k=n[e+1],Q+=q,q=Math.sqrt((O-U)*(O-U)+(k-z)*(k-z))}do re();while(e<t-r&&Q+q<s);let X=q===0?0:(s-Q)/q;const Y=Qh(U,O,X),J=Qh(z,k,X),N=e-r,ie=Q,he=s+o*d(g,i,b);for(;e<t-r&&Q+q<he;)re();X=q===0?0:(he-Q)/q;const de=Qh(U,O,X),we=Qh(z,k,X);let fe=!1;if(S)if(E){const We=[Y,J,de,we];YU(We,0,4,2,E,We,We),fe=We[0]>We[2]}else fe=Y>de;const be=Math.PI,Pe=[],pe=N+r===e;e=N,q=0,Q=ie,O=n[e],k=n[e+1];let it;if(pe){re(),it=Math.atan2(k-z,O-U),fe&&(it+=it>0?-be:be);const We=(de+Y)/2,$e=(we+J)/2;return Pe[0]=[We,$e,(he-s)/2,it,i],Pe}i=i.replace(/\n/g," ");for(let We=0,$e=i.length;We<$e;){re();let ht=Math.atan2(k-z,O-U);if(fe&&(ht+=ht>0?-be:be),it!==void 0){let ft=ht-it;if(ft+=ft>be?-2*be:ft<-be?2*be:0,Math.abs(ft)>a)return null}it=ht;const De=We;let Ne=0;for(;We<$e;++We){const ft=fe?$e-We-1:We,Lt=o*d(g,i[ft],b);if(e+r<t&&Q+q<s+Ne+Lt/2)break;Ne+=Lt}if(We===De)continue;const at=fe?i.substring($e-De,$e-We):i.substring(De,We);X=q===0?0:(s+Ne/2-Q)/q;const wt=Qh(U,O,X),Ct=Qh(z,k,X);Pe.push([wt,Ct,Ne/2,ht,at]),s+=Ne}return Pe}const u1=Zh(),A0=[],Bm=[],Om=[],c0=[];function Lk(n){return n[3].declutterBox}const Fk=new RegExp("[-----]");function K4(n,e){return e==="start"?e=Fk.test(n)?"right":"left":e==="end"&&(e=Fk.test(n)?"left":"right"),d2[e]}function hee(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class fee{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=_h(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new OO:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,d=this.textStates[t],g=this.pixelRatio,b=[d.scale[0]*g,d.scale[1]*g],E=d.justify?d2[d.justify]:K4(Array.isArray(e)?e[0]:e,d.textAlign||l_),S=i&&a.lineWidth?a.lineWidth:0,O=Array.isArray(e)?e:String(e).split(`
`).reduce(hee,[]),{width:k,height:U,widths:z,heights:q,lineWidths:Q}=GZ(d,O),re=k+S,X=[],Y=(re+2)*b[0],J=(U+S)*b[1],N={width:Y<0?Math.floor(Y):Math.ceil(Y),height:J<0?Math.floor(J):Math.ceil(J),contextInstructions:X};(b[0]!=1||b[1]!=1)&&X.push("scale",b),i&&(X.push("strokeStyle",a.strokeStyle),X.push("lineWidth",S),X.push("lineCap",a.lineCap),X.push("lineJoin",a.lineJoin),X.push("miterLimit",a.miterLimit),X.push("setLineDash",[a.lineDash]),X.push("lineDashOffset",a.lineDashOffset)),r&&X.push("fillStyle",o.fillStyle),X.push("textBaseline","middle"),X.push("textAlign","center");const ie=.5-E;let he=E*re+ie*S;const de=[],we=[];let fe=0,be=0,Pe=0,pe=0,it;for(let We=0,$e=O.length;We<$e;We+=2){const ht=O[We];if(ht===`
`){be+=fe,fe=0,he=E*re+ie*S,++pe;continue}const De=O[We+1]||d.font;De!==it&&(i&&de.push("font",De),r&&we.push("font",De),it=De),fe=Math.max(fe,q[Pe]);const Ne=[ht,he+ie*z[Pe]+E*(z[Pe]-Q[pe]),.5*(S+fe)+be];he+=z[Pe],i&&de.push("strokeText",Ne),r&&we.push("fillText",Ne),++Pe}return Array.prototype.push.apply(X,de),Array.prototype.push.apply(X,we),this.labels_[s]=N,N}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,d,g,b,E,S,O,k,U,z){o*=S[0],d*=S[1];let q=r-o,Q=i-d;const re=s+g>e?e-g:s,X=a+b>t?t-b:a,Y=k[3]+re*S[0]+k[1],J=k[0]+X*S[1]+k[2],N=q-k[3],ie=Q-k[0];(U||E!==0)&&(A0[0]=N,c0[0]=N,A0[1]=ie,Bm[1]=ie,Bm[0]=N+Y,Om[0]=Bm[0],Om[1]=ie+J,c0[1]=Om[1]);let he;return E!==0?(he=em(_h(),r,i,1,1,E,-r,-i),yA(he,A0),yA(he,Bm),yA(he,Om),yA(he,c0),Gm(Math.min(A0[0],Bm[0],Om[0],c0[0]),Math.min(A0[1],Bm[1],Om[1],c0[1]),Math.max(A0[0],Bm[0],Om[0],c0[0]),Math.max(A0[1],Bm[1],Om[1],c0[1]),u1)):Gm(Math.min(N,N+Y),Math.min(ie,ie+J),Math.max(N,N+Y),Math.max(ie,ie+J),u1),O&&(q=Math.round(q),Q=Math.round(Q)),{drawImageX:q,drawImageY:Q,drawImageW:re,drawImageH:X,originX:g,originY:b,declutterBox:{minX:u1[0],minY:u1[1],maxX:u1[2],maxY:u1[3],value:z},canvasTransform:he,scale:S}}replayImageOrLabel_(e,t,r,i,s,a,o){const d=!!(a||o),g=i.declutterBox,b=o?o[2]*i.scale[0]/2:0;return g.minX-b<=t[0]&&g.maxX+b>=0&&g.minY-b<=t[1]&&g.maxY+b>=0&&(d&&this.replayTextBackground_(e,A0,Bm,Om,c0,a,o),WZ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=yA(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],d=this.pixelRatio,g=K4(Array.isArray(e)?e[0]:e,s.textAlign||l_),b=d2[s.textBaseline||e2],E=o&&o.lineWidth?o.lineWidth:0,S=a.width/d-2*s.scale[0],O=g*S+2*(.5-g)*E,k=b*a.height/d+2*(.5-b)*E;return{label:a,anchorX:O,anchorY:k}}execute_(e,t,r,i,s,a,o,d){const g=this.zIndexContext_;let b;this.pixelCoordinates_&&K0(r,this.renderedTransform_)?b=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),b=O0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),YZ(this.renderedTransform_,r));let E=0;const S=i.length;let O=0,k,U,z,q,Q,re,X,Y,J,N,ie,he,de,we=0,fe=0,be=null,Pe=null;const pe=this.coordinateCache_,it=this.viewRotation_,We=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,$e={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:it},ht=this.instructions!=i||this.overlaps?0:200;let De,Ne,at,wt;for(;E<S;){const Ct=i[E];switch(Ct[0]){case Qi.BEGIN_GEOMETRY:De=Ct[1],wt=Ct[3],De.getGeometry()?o!==void 0&&!ku(o,wt.getExtent())?E=Ct[2]+1:++E:E=Ct[2],g&&(g.zIndex=Ct[4]);break;case Qi.BEGIN_PATH:we>ht&&(this.fill_(e),we=0),fe>ht&&(e.stroke(),fe=0),!we&&!fe&&(e.beginPath(),Q=NaN,re=NaN),++E;break;case Qi.CIRCLE:O=Ct[1];const Lt=b[O],Kt=b[O+1],Fe=b[O+2],Te=b[O+3],Se=Fe-Lt,Je=Te-Kt,yt=Math.sqrt(Se*Se+Je*Je);e.moveTo(Lt+yt,Kt),e.arc(Lt,Kt,yt,0,2*Math.PI,!0),++E;break;case Qi.CLOSE_PATH:e.closePath(),++E;break;case Qi.CUSTOM:O=Ct[1],k=Ct[2];const dt=Ct[3],Ut=Ct[4],en=Ct[5];$e.geometry=dt,$e.feature=De,E in pe||(pe[E]=[]);const Nt=pe[E];en?en(b,O,k,2,Nt):(Nt[0]=b[O],Nt[1]=b[O+1],Nt.length=2),g&&(g.zIndex=Ct[6]),Ut(Nt,$e),++E;break;case Qi.DRAW_IMAGE:O=Ct[1],k=Ct[2],J=Ct[3],U=Ct[4],z=Ct[5];let yn=Ct[6];const jn=Ct[7],Rr=Ct[8],sr=Ct[9],Jn=Ct[10];let mr=Ct[11];const pr=Ct[12];let xr=Ct[13];q=Ct[14]||"declutter";const Qn=Ct[15];if(!J&&Ct.length>=20){N=Ct[19],ie=Ct[20],he=Ct[21],de=Ct[22];const _t=this.drawLabelWithPointPlacement_(N,ie,he,de);J=_t.label,Ct[3]=J;const Tn=Ct[23];U=(_t.anchorX-Tn)*this.pixelRatio,Ct[4]=U;const Sn=Ct[24];z=(_t.anchorY-Sn)*this.pixelRatio,Ct[5]=z,yn=J.height,Ct[6]=yn,xr=J.width,Ct[13]=xr}let Er;Ct.length>25&&(Er=Ct[25]);let Ge,Ae,me;Ct.length>17?(Ge=Ct[16],Ae=Ct[17],me=Ct[18]):(Ge=pg,Ae=!1,me=!1),Jn&&We?mr+=it:!Jn&&!We&&(mr-=it);let Xe=0;for(;O<k;O+=2){if(Er&&Er[Xe++]<xr/this.pixelRatio)continue;const _t=this.calculateImageOrLabelDimensions_(J.width,J.height,b[O],b[O+1],xr,yn,U,z,Rr,sr,mr,pr,s,Ge,Ae||me,De),Tn=[e,t,J,_t,jn,Ae?be:null,me?Pe:null];if(d){let Sn,Ar,wr;if(Qn){const Rn=k-O;if(!Qn[Rn]){Qn[Rn]={args:Tn,declutterMode:q};continue}const Br=Qn[Rn];Sn=Br.args,Ar=Br.declutterMode,delete Qn[Rn],wr=Lk(Sn)}let rn,Fn;if(Sn&&(Ar!=="declutter"||!d.collides(wr))&&(rn=!0),(q!=="declutter"||!d.collides(_t.declutterBox))&&(Fn=!0),Ar==="declutter"&&q==="declutter"){const Rn=rn&&Fn;rn=Rn,Fn=Rn}rn&&(Ar!=="none"&&d.insert(wr),this.replayImageOrLabel_.apply(this,Sn)),Fn&&(q!=="none"&&d.insert(_t.declutterBox),this.replayImageOrLabel_.apply(this,Tn))}else this.replayImageOrLabel_.apply(this,Tn)}++E;break;case Qi.DRAW_CHARS:const Et=Ct[1],Yt=Ct[2],nn=Ct[3],rr=Ct[4];de=Ct[5];const Ee=Ct[6],oe=Ct[7],ve=Ct[8];he=Ct[9];const p=Ct[10];N=Ct[11],ie=Ct[12];const ze=[Ct[13],Ct[13]];q=Ct[14]||"declutter";const rt=Ct[15],pt=this.textStates[ie],Bt=pt.font,vt=[pt.scale[0]*oe,pt.scale[1]*oe];let Xt;Bt in this.widths_?Xt=this.widths_[Bt]:(Xt={},this.widths_[Bt]=Xt);const tn=nz(b,Et,Yt,2),zt=Math.abs(vt[0])*nk(Bt,N,Xt);if(rr||zt<=tn){const _t=this.textStates[ie].textAlign,Tn=(tn-zt)*K4(N,_t),Sn=dee(b,Et,Yt,2,N,Tn,Ee,Math.abs(vt[0]),nk,Bt,Xt,We?0:this.viewRotation_,rt);e:if(Sn){const Ar=[];let wr,rn,Fn,Rn,Br;if(he)for(wr=0,rn=Sn.length;wr<rn;++wr){Br=Sn[wr],Fn=Br[4],Rn=this.createLabel(Fn,ie,"",he),U=Br[2]+(vt[0]<0?-p:p),z=nn*Rn.height+(.5-nn)*2*p*vt[1]/vt[0]-ve;const Mr=this.calculateImageOrLabelDimensions_(Rn.width,Rn.height,Br[0],Br[1],Rn.width,Rn.height,U,z,0,0,Br[3],ze,!1,pg,!1,De);if(d&&q==="declutter"&&d.collides(Mr.declutterBox))break e;Ar.push([e,t,Rn,Mr,1,null,null])}if(de)for(wr=0,rn=Sn.length;wr<rn;++wr){Br=Sn[wr],Fn=Br[4],Rn=this.createLabel(Fn,ie,de,""),U=Br[2],z=nn*Rn.height-ve;const Mr=this.calculateImageOrLabelDimensions_(Rn.width,Rn.height,Br[0],Br[1],Rn.width,Rn.height,U,z,0,0,Br[3],ze,!1,pg,!1,De);if(d&&q==="declutter"&&d.collides(Mr.declutterBox))break e;Ar.push([e,t,Rn,Mr,1,null,null])}d&&q!=="none"&&d.load(Ar.map(Lk));for(let Mr=0,Kr=Ar.length;Mr<Kr;++Mr)this.replayImageOrLabel_.apply(this,Ar[Mr])}}++E;break;case Qi.END_GEOMETRY:if(a!==void 0){De=Ct[1];const _t=a(De,wt,q);if(_t)return _t}++E;break;case Qi.FILL:ht?we++:this.fill_(e),++E;break;case Qi.MOVE_TO_LINE_TO:for(O=Ct[1],k=Ct[2],Ne=b[O],at=b[O+1],e.moveTo(Ne,at),Q=Ne+.5|0,re=at+.5|0,O+=2;O<k;O+=2)Ne=b[O],at=b[O+1],X=Ne+.5|0,Y=at+.5|0,(O==k-2||X!==Q||Y!==re)&&(e.lineTo(Ne,at),Q=X,re=Y);++E;break;case Qi.SET_FILL_STYLE:be=Ct,this.alignAndScaleFill_=Ct[2],we&&(this.fill_(e),we=0,fe&&(e.stroke(),fe=0)),e.fillStyle=Ct[1],++E;break;case Qi.SET_STROKE_STYLE:Pe=Ct,fe&&(e.stroke(),fe=0),this.setStrokeStyle_(e,Ct),++E;break;case Qi.STROKE:ht?fe++:e.stroke(),++E;break;default:++E;break}}we&&this.fill_(e),fe&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const Q1=["Polygon","Circle","LineString","Image","Text","Default"],h2=["Image","Text"],pee=Q1.filter(n=>!h2.includes(n));class xz{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=_h(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new fee(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,d=em(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Jl(o,o,void 0,{willReadFrequently:!0}));const b=this.hitDetectionContext_;b.canvas.width!==o||b.canvas.height!==o?(b.canvas.width=o,b.canvas.height=o):g||b.clearRect(0,0,o,o);let E;this.renderBuffer_!==void 0&&(E=Zh(),Nv(E,e),B0(E,t*(this.renderBuffer_+i),E));const S=mee(i);let O;function k(Y,J,N){const ie=b.getImageData(0,0,o,o).data;for(let he=0,de=S.length;he<de;he++)if(ie[S[he]]>0){if(!a||N==="none"||O!=="Image"&&O!=="Text"||a.includes(Y)){const we=(S[he]-3)/4,fe=i-we%o,be=i-(we/o|0),Pe=s(Y,J,fe*fe+be*be);if(Pe)return Pe}b.clearRect(0,0,o,o);break}}const U=Object.keys(this.executorsByZIndex_).map(Number);U.sort(Fm);let z,q,Q,re,X;for(z=U.length-1;z>=0;--z){const Y=U[z].toString();for(Q=this.executorsByZIndex_[Y],q=Q1.length-1;q>=0;--q)if(O=Q1[q],re=Q[O],re!==void 0&&(X=re.executeHitDetection(b,d,r,k,E),X))return X}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return O0(o,0,8,2,e,o),o}isEmpty(){return T0(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(o?pZ:Fm),a=a||Q1;const g=Q1.length;for(let b=0,E=d.length;b<E;++b){const S=d[b].toString(),O=this.executorsByZIndex_[S];for(let k=0,U=a.length;k<U;++k){const z=a[k],q=O[z];if(q!==void 0){const Q=o===null?void 0:q.getZIndexContext(),re=Q?Q.getContext():e,X=this.maxExtent_&&z!=="Image"&&z!=="Text";if(X&&(re.save(),this.clip(re,r)),!Q||z==="Text"||z==="Image"?q.execute(re,t,r,i,s,o):Q.pushFunction(Y=>q.execute(Y,t,r,i,s,o)),X&&re.restore(),Q){Q.offset();const Y=d[b]*g+k;this.deferredZIndexContexts_[Y]||(this.deferredZIndexContexts_[Y]=[]),this.deferredZIndexContexts_[Y].push(Q)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Fm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const D4={};function mee(n){if(D4[n]!==void 0)return D4[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let d=r[o];d||(d=[],r[o]=d),d.push(((n+s)*e+(n+a))*4+3),s>0&&d.push(((n-s)*e+(n+a))*4+3),a>0&&(d.push(((n+s)*e+(n-a))*4+3),s>0&&d.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return D4[n]=i,i}class gee extends _z{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?QB(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=_h()}drawImages_(e,t,r,i){if(!this.image_)return;const s=O0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,d=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=d*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let b=0,E=s.length;b<E;b+=2){const S=s[b]-this.imageAnchorX_,O=s[b+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const k=S+this.imageAnchorX_,U=O+this.imageAnchorY_;em(o,k,U,1,1,g,-k,-U),a.save(),a.transform.apply(a,o),a.translate(k,U),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,O,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=d)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=O0(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const d=s[t]+this.textOffsetX_,g=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(d-this.textOffsetX_,g-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,d,g),this.textFillState_&&a.fillText(this.text_,d,g))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=O0(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let d=o.length;s&&(d-=2);for(let g=2;g<d;g+=2)a.lineTo(o[g],o[g+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=zX(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(ku(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let d=0,g=a.length;d<g;++d)s=this.moveToLineTo_(i,s,a[d],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ku(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,d=s.length;o<d;++o){const g=s[o];i=this.drawRings_(r,i,g,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),K0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:l_;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:qp(r||mh)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),d=t.getWidth(),g=t.getMiterLimit(),b=s||Um;this.strokeState_={lineCap:i!==void 0?i:Cy,lineDash:this.pixelRatio_===1?b:b.map(E=>E*this.pixelRatio_),lineDashOffset:(a||zm)*this.pixelRatio_,lineJoin:o!==void 0?o:by,lineWidth:(d!==void 0?d:u_)*this.pixelRatio_,miterLimit:g!==void 0?g:s_,strokeStyle:qp(r||a_)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const O=t.getColor();this.textFillState_={fillStyle:qp(O||mh)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const O=r.getColor(),k=r.getLineCap(),U=r.getLineDash(),z=r.getLineDashOffset(),q=r.getLineJoin(),Q=r.getWidth(),re=r.getMiterLimit();this.textStrokeState_={lineCap:k!==void 0?k:Cy,lineDash:U||Um,lineDashOffset:z||zm,lineJoin:q!==void 0?q:by,lineWidth:Q!==void 0?Q:u_,miterLimit:re!==void 0?re:s_,strokeStyle:qp(O||a_)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),d=e.getRotation(),g=e.getScaleArray(),b=e.getText(),E=e.getTextAlign(),S=e.getTextBaseline();this.textState_={font:i!==void 0?i:OU,textAlign:E!==void 0?E:l_,textBaseline:S!==void 0?S:e2},this.text_=b!==void 0?Array.isArray(b)?b.reduce((O,k,U)=>O+=U%2?" ":k,""):b:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const $h=.5;function wz(n,e,t,r,i,s,a,o,d){const g=d?cO(i):i,b=n[0]*$h,E=n[1]*$h,S=Jl(b,E);S.imageSmoothingEnabled=!1;const O=S.canvas,k=new gee(S,$h,i,null,a,o,d?G_(DX(),d):null),U=t.length,z=Math.floor((256*256*256-1)/U),q={};for(let re=1;re<=U;++re){const X=t[re-1],Y=X.getStyleFunction()||r;if(!Y)continue;let J=Y(X,s);if(!J)continue;Array.isArray(J)||(J=[J]);const ie=(re*z).toString(16).padStart(7,"#00000");for(let he=0,de=J.length;he<de;++he){const we=J[he],fe=we.getGeometryFunction()(X);if(!fe||!ku(g,fe.getExtent()))continue;const be=we.clone(),Pe=be.getFill();Pe&&Pe.setColor(ie);const pe=be.getStroke();pe&&(pe.setColor(ie),pe.setLineDash(null)),be.setText(void 0);const it=we.getImage();if(it){const De=it.getImageSize();if(!De)continue;const Ne=Jl(De[0],De[1],void 0,{alpha:!1}),at=Ne.canvas;Ne.fillStyle=ie,Ne.fillRect(0,0,at.width,at.height),be.setImage(new n2({img:at,anchor:it.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:it.getOrigin(),opacity:1,size:it.getSize(),scale:it.getScale(),rotation:it.getRotation(),rotateWithView:it.getRotateWithView()}))}const We=be.getZIndex()||0;let $e=q[We];$e||($e={},q[We]=$e,$e.Polygon=[],$e.Circle=[],$e.LineString=[],$e.Point=[]);const ht=fe.getType();if(ht==="GeometryCollection"){const De=fe.getGeometriesArrayRecursive();for(let Ne=0,at=De.length;Ne<at;++Ne){const wt=De[Ne];$e[wt.getType().replace("Multi","")].push(wt,be)}}else $e[ht.replace("Multi","")].push(fe,be)}}const Q=Object.keys(q).map(Number).sort(Fm);for(let re=0,X=Q.length;re<X;++re){const Y=q[Q[re]];for(const J in Y){const N=Y[J];for(let ie=0,he=N.length;ie<he;ie+=2){k.setStyle(N[ie+1]);for(let de=0,we=e.length;de<we;++de)k.setTransform(e[de]),k.drawGeometry(N[ie])}}}return S.getImageData(0,0,O.width,O.height)}function Mz(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*$h),s=Math.floor(Math.round(n[1])*$h),a=(Tu(i,0,t.width-1)+Tu(s,0,t.height-1)*t.width)*4,o=t.data[a],d=t.data[a+1],b=t.data[a+2]+256*(d+256*o),E=Math.floor((256*256*256-1)/e.length);b&&b%E===0&&r.push(e[b/E-1])}return r}const yee=.5,Sz={Point:See,LineString:xee,Polygon:Bee,MultiPoint:Eee,MultiLineString:wee,MultiPolygon:Mee,GeometryCollection:bee,Circle:_ee};function vee(n,e){return parseInt(Fo(n),10)-parseInt(Fo(e),10)}function j6(n,e){const t=Ez(n,e);return t*t}function Ez(n,e){return yee*n/e}function _ee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const d=n.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(s,a),d.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r)}}function f2(n,e,t,r,i,s,a,o){const d=[],g=t.getImage();if(g){let S=!0;const O=g.getImageState();O==hi.LOADED||O==hi.ERROR?S=!1:O==hi.IDLE&&g.load(),S&&d.push(g.ready())}const b=t.getFill();b&&b.loading()&&d.push(b.ready());const E=d.length>0;return E&&Promise.all(d).then(()=>i(null)),Cee(n,e,t,r,s,a,o),E}function Cee(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const d=o.simplifyTransformed(r,i);if(t.getRenderer())Bz(n,d,t,e,a);else{const b=Sz[d.getType()];b(n,d,t,e,a,s)}}function Bz(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,d=a.length;o<d;++o)Bz(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function bee(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,d;for(o=0,d=a.length;o<d;++o){const g=Sz[a[o].getType()];g(n,a[o],t,r,i,s)}}function xee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function wee(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function Mee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,a),d.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r,i)}}function See(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),d=o&&o.getText(),g=s&&a&&d?{}:void 0;if(a){if(a.getImageState()!=hi.LOADED)return;const b=n.getBuilder(t.getZIndex(),"Image");b.setImageStyle(a,g),b.drawPoint(e,r,i)}if(d){const b=n.getBuilder(t.getZIndex(),"Text");b.setTextStyle(o,g),b.drawText(e,r,i)}}function Eee(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,d=t.getText(),g=d&&d.getText(),b=s&&o&&g?{}:void 0;if(o){if(a.getImageState()!=hi.LOADED)return;const E=n.getBuilder(t.getZIndex(),"Image");E.setImageStyle(a,b),E.drawMultiPoint(e,r,i)}if(g){const E=n.getBuilder(t.getZIndex(),"Text");E.setTextStyle(d,b),E.drawText(e,r,i)}}function Bee(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const d=n.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(s,a),d.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(o),d.drawText(e,r,i)}}class Oee extends IO{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Zh(),this.wrappedRenderedExtent_=Zh(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,d=s.projection,g=s.rotation,b=d.getExtent(),E=this.getLayer().getSource(),S=this.getLayer().getDeclutter(),O=t.pixelRatio,k=t.viewHints,U=!(k[Vl.ANIMATING]||k[Vl.INTERACTING]),z=this.context,q=Math.round(ps(i)/o*O),Q=Math.round(Hl(i)/o*O),re=E.getWrapX()&&d.canWrapX(),X=re?ps(b):null,Y=re?Math.ceil((i[2]-b[2])/X)+1:1;let J=re?Math.floor((i[0]-b[0])/X):0;do{let N=this.getRenderTransform(a,o,0,O,q,Q,J*X);t.declutter&&(N=N.slice(0)),e.execute(z,[z.canvas.width,z.canvas.height],N,g,U,r===void 0?Q1:r?h2:pee,r?S&&t.declutter[S]:void 0)}while(++J<Y)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Jl(this.context.canvas.width,this.context.canvas.height,Dk))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,U_(this.context),Dk.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(Ef.PRERENDER)||this.getLayer().hasListener(Ef.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const d=Yp(r.extent);o=ku(d,e.extent),this.clipped_=o&&!lp(d,e.extent),this.clipped_&&this.clipUnrotated(s,e,d)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,d=this.wrappedRenderedExtent_,g=this.getLayer(),b=[],E=r[0]*$h,S=r[1]*$h;b.push(this.getRenderTransform(i,s,a,$h,E,S,0).slice());const O=g.getSource(),k=o.getExtent();if(O.getWrapX()&&o.canWrapX()&&!lp(k,d)){let U=d[0];const z=ps(k);let q=0,Q;for(;U<k[0];)--q,Q=z*q,b.push(this.getRenderTransform(i,s,a,$h,E,S,Q).slice()),U+=z;for(q=0,U=d[2];U>k[2];)++q,Q=z*q,b.push(this.getRenderTransform(i,s,a,$h,E,S,Q).slice()),U-=z}this.hitDetectionImageData_=wz(r,b,this.renderedFeatures_,g.getStyleFunction(),d,s,a,j6(s,this.renderedPixelRatio_),null)}t(Mz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,d=this.getLayer(),g={},b=function(S,O,k){const U=Fo(S),z=g[U];if(z){if(z!==!0&&k<z.distanceSq){if(k===0)return g[U]=!0,s.splice(s.lastIndexOf(z),1),i(S,d,O);z.geometry=O,z.distanceSq=k}}else{if(k===0)return g[U]=!0,i(S,d,O);s.push(g[U]={feature:S,layer:d,geometry:O,distanceSq:k,callback:i})}},E=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,b,E?t.declutter[E].all().map(S=>S.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Vl.ANIMATING],s=e.viewHints[Vl.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,g=e.viewState,b=g.projection,E=g.resolution,S=e.pixelRatio,O=t.getRevision(),k=t.getRenderBuffer();let U=t.getRenderOrder();U===void 0&&(U=vee);const z=g.center.slice(),q=B0(d,k*E),Q=q.slice(),re=[q.slice()],X=b.getExtent();if(r.getWrapX()&&b.canWrapX()&&!lp(X,e.extent)){const Pe=ps(X),pe=Math.max(ps(q)/2,Pe);q[0]=X[0]-pe,q[2]=X[2]+pe,sO(z,b);const it=UU(re[0],b);it[0]<X[0]&&it[2]<X[2]?re.push([it[0]+Pe,it[1],it[2]+Pe,it[3]]):it[0]>X[0]&&it[2]>X[2]&&re.push([it[0]-Pe,it[1],it[2]-Pe,it[3]])}if(this.ready&&this.renderedResolution_==E&&this.renderedRevision_==O&&this.renderedRenderOrder_==U&&this.renderedFrameDeclutter_===!!e.declutter&&lp(this.wrappedRenderedExtent_,q))return K0(this.renderedExtent_,Q)||(this.hitDetectionImageData_=null,this.renderedExtent_=Q),this.renderedCenter_=z,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Y=new Cz(Ez(E,S),q,E,S);let J;for(let Pe=0,pe=re.length;Pe<pe;++Pe)r.loadFeatures(re[Pe],E,b);const N=j6(E,S);let ie=!0;const he=(Pe,pe)=>{let it;const We=Pe.getStyleFunction()||t.getStyleFunction();if(We&&(it=We(Pe,E)),it){const $e=this.renderFeature(Pe,N,it,Y,J,this.getLayer().getDeclutter(),pe);ie=ie&&!$e}},de=cO(q),we=r.getFeaturesInExtent(de);U&&we.sort(U);for(let Pe=0,pe=we.length;Pe<pe;++Pe)he(we[Pe],Pe);this.renderedFeatures_=we,this.ready=ie;const fe=Y.finish(),be=new xz(q,E,S,r.getOverlaps(),fe,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=E,this.renderedRevision_=O,this.renderedRenderOrder_=U,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=Q,this.wrappedRenderedExtent_=q,this.renderedCenter_=z,this.renderedProjection_=b,this.renderedPixelRatio_=S,this.replayGroup_=be,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let d=!1;if(Array.isArray(r))for(let g=0,b=r.length;g<b;++g)d=f2(i,e,r[g],t,this.boundHandleStyleImageChange_,s,a,o)||d;else d=f2(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return d}}class kO extends BO{constructor(e){super(e)}createRenderer(){return new Oee(this)}}class Uk{constructor(e){this.rbush_=new dz(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Fo(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],d={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=d,this.items_[Fo(o)]=d}this.rbush_.load(r)}remove(e){const t=Fo(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Fo(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Wm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return T0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Gm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ky extends fp{constructor(e){super(),this.projection=Ma(e.projection),this.attributions_=zk(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=zk(e),this.changed()}setState(e){this.state_=e,this.changed()}}function zk(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const vf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Iee(n,e){return[[-1/0,-1/0,1/0,1/0]]}function kee(n,e){return[n]}let Tee=!1;function Oz(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=Tee,o.onload=function(d){if(!o.status||o.status>=200&&o.status<300){const g=e.getType();try{let b;g=="text"||g=="json"?b=o.responseText:g=="xml"?b=o.responseXML||o.responseText:g=="arraybuffer"&&(b=o.response),b?s(e.readFeatures(b,{extent:t,featureProjection:i}),e.readProjection(b)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function jk(n,e){return function(t,r,i,s,a){const o=this;Oz(n,e,t,r,i,function(d,g){o.addFeatures(d),s!==void 0&&s(d)},a||gy)}}class d0 extends hp{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class wb extends Ky{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=gy,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ra(this.format_,"`format` must be set when `url` is set"),this.loader_=jk(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Iee;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Uk:null,this.loadedExtentsRtree_=new Uk,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new $p(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Fo(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new d0(vf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof sd||(this.featureChangeKeys_[e]=[Ts(t,io.CHANGE,this.handleFeatureChange_,this),Ts(t,_y.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof sd){const s=this.idIndex_[i];s instanceof sd?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(ra(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],d=Fo(o);this.addToIndex_(d,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],d=Fo(o);this.setupChangeEvents_(d,o);const g=o.getGeometry();if(g){const b=g.getExtent();t.push(b),i.push(o)}else this.nullGeometryFeatures_[d]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(vf.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new d0(vf.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(vf.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(vf.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(gh.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(gh.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Da);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new d0(vf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof sd||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof sd||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),T0(this.nullGeometryFeatures_)||Zp(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=iO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||i_,this.featuresRtree_.forEachInExtent(d,function(g){if(t(g)){const b=g.getGeometry(),E=o;if(o=b instanceof sd?0:b.closestPointXY(r,i,a,o),o<E){s=g;const S=Math.sqrt(o);d[0]=r-S,d[1]=i-S,d[2]=r+S,d[3]=i+S}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Fo(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new d0(vf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Fo(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&T0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const d=s[a];i.forEachInExtent(d,function(b){return lp(b.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new d0(vf.FEATURESLOADSTART)),this.loader_.call(this,d,t,r,b=>{--this.loadingExtentsCount_,this.dispatchEvent(new d0(vf.FEATURESLOADEND,void 0,b))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new d0(vf.FEATURESLOADERROR))}),i.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Wm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Fo(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(Da),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(vf.REMOVEFEATURE)&&this.dispatchEvent(new d0(vf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ra(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(jk(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Pee extends HB{constructor(e,t,r,i,s){const a=s!==void 0?hi.IDLE:hi.LOADED;super(e,t,r,a),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=hi.ERROR):this.state=hi.LOADED,this.changed()}load(){this.state==hi.IDLE&&(this.state=hi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}class $_ extends F_{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(io.CHANGE)}release(){this.state===Cr.ERROR&&this.setState(Cr.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Cr.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){go()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:Az(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Iz extends $_{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Cr.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Cr.ERROR,this.unlistenImage_(),this.image_=Ree(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Cr.LOADED:this.state=Cr.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Cr.ERROR&&(this.state=Cr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Cr.IDLE&&(this.state=Cr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=TZ(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Ree(){const n=Jl(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class Kee{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class Dee extends D_{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){go()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;em(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),RU(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,d){let g;const b=t.viewState;function E(X,Y,J,N){return s.call(a,Y,X?J:null,N)}const S=b.projection,O=sO(e.slice(),S),k=[[0,0]];if(S.canWrapX()&&i){const X=S.getExtent(),Y=ps(X);k.push([-Y,0],[Y,0])}const U=t.layerStatesArray,z=U.length,q=[],Q=[];for(let X=0;X<k.length;X++)for(let Y=z-1;Y>=0;--Y){const J=U[Y],N=J.layer;if(N.hasRenderer()&&MO(J,b)&&o.call(d,N)){const ie=N.getRenderer(),he=N.getSource();if(ie&&he){const de=he.getWrapX()?O:e,we=E.bind(null,J.managed);Q[0]=de[0]+k[X][0],Q[1]=de[1]+k[X][1],g=ie.forEachFeatureAtCoordinate(Q,t,r,we,q)}if(g)return g}}if(q.length===0)return;const re=1/q.length;return q.forEach((X,Y)=>X.distanceSq+=Y*re),q.sort((X,Y)=>X.distanceSq-Y.distanceSq),q.some(X=>g=X.callback(X.feature,X.layer,X.geometry)),g}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,i_,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){go()}scheduleExpireIconCache(e){Sf.canExpireCache()&&e.postRenderFunctions.push(Lee)}}function Lee(n,e){Sf.expire()}class Fee extends Dee{constructor(e){super(e),this.fontChangeListenerKey_=Ts(Dp,_y.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=dx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new bz(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Da(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ef.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,d)=>o.zIndex-d.zIndex);t.some(o=>o.layer instanceof BO&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let o=0,d=t.length;o<d;++o){const g=t[o];e.layerIndex=o;const b=g.layer,E=b.getSourceState();if(!MO(g,i)||E!="ready"&&E!="undefined"){b.unrender();continue}const S=b.render(e,a);S&&(S!==a&&(this.children_.push(S),a=S),s.push(g))}this.declutter(e,s),kZ(this.element_,this.children_),this.dispatchRenderEvent(Ef.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}class g0 extends hp{constructor(e,t){super(e),this.layer=t}}const L4={LAYERS:"layers"};class Dy extends lz{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(L4.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new $p(r.slice(),{unique:!0}):ra(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new $p(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Da),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ts(e,gh.ADD,this.handleLayersAdd_,this),Ts(e,gh.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Da);L_(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new g0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ts(e,_y.PROPERTYCHANGE,this.handleLayerChange_,this),Ts(e,io.CHANGE,this.handleLayerChange_,this)];e instanceof Dy&&t.push(Ts(e,"addlayer",this.handleLayerGroupAdd_,this),Ts(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Fo(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new g0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new g0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new g0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Fo(t);this.listenerKeys_[r].forEach(Da),delete this.listenerKeys_[r],this.dispatchEvent(new g0("removelayer",t)),this.changed()}getLayers(){return this.get(L4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new g0("removelayer",r[i]))}this.set(L4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const d=t[a];d.opacity*=i.opacity,d.visible=d.visible&&i.visible,d.maxResolution=Math.min(d.maxResolution,i.maxResolution),d.minResolution=Math.max(d.minResolution,i.minResolution),d.minZoom=Math.max(d.minZoom,i.minZoom),d.maxZoom=Math.min(d.maxZoom,i.maxZoom),i.extent!==void 0&&(d.extent!==void 0?d.extent=Qd(d.extent,i.extent):d.extent=i.extent),d.zIndex===void 0&&(d.zIndex=s)}return t}getSourceState(){return"ready"}}class z1 extends hp{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class p0 extends z1{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ou={SINGLECLICK:"singleclick",CLICK:io.CLICK,DBLCLICK:io.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},N6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Uee extends F_{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ts(r,N6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ts(r,N6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(io.TOUCHMOVE,this.boundHandleTouchMove_,MU?{passive:!1}:!1)}emulateClick_(e){let t=new p0(Ou.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new p0(Ou.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new p0(Ou.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==Ou.POINTERUP||t.type==Ou.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Ou.POINTERDOWN||t.type==Ou.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new p0(Ou.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Da),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new p0(Ou.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ts(r,Ou.POINTERMOVE,this.handlePointerMove_,this),Ts(r,Ou.POINTERUP,this.handlePointerUp_,this),Ts(this.element_,Ou.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ts(this.element_.getRootNode(),Ou.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new p0(Ou.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new p0(Ou.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Da(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(io.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Da(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Da),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Tm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},id={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},p2=1/0;class zee{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,L_(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ra(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=p2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const d=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),b=g<i&&r[g]<r[d]?g:d;t[e]=t[b],r[e]=r[b],e=b}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,d;for(o=0;o<s;++o)a=t[o],d=e(a),d==p2?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=d,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class kz extends zee{constructor(e,t){super(function(r){return e.apply(null,r)},function(r){return r[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(io.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Cr.LOADED||r===Cr.ERROR||r===Cr.EMPTY){r!==Cr.ERROR&&t.removeEventListener(io.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Cr.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function jee(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return p2;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class TO extends fp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)Da(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==gy&&this.listenerKeys.push(Ts(e,Tm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Nee extends TO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(io.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+dx+" "+XB+(this.collapsed_&&this.collapsible_?" "+ek:"")+(this.collapsible_?"":" ol-uncollapsible"),b=this.element;b.className=g,b.appendChild(this.toggleButton_),b.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var a;return((a=s.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>yy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!K0(t,this.renderedAttributions_)){SU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ek),this.collapsed_?Z7(this.collapseLabel_,this.label_):Z7(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Gee extends TO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(io.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+dx+" "+XB,d=this.element;d.className=o,d.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(jC)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Py}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(jC);!s&&r===0?this.element.classList.add(jC):s&&r!==0&&this.element.classList.remove(jC)}this.label_.style.transform=i}this.rotation_=r}}class Wee extends TO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",b=document.createElement("button");b.className=i,b.setAttribute("type","button"),b.title=d,b.appendChild(typeof a=="string"?document.createTextNode(a):a),b.addEventListener(io.CLICK,this.handleClick_.bind(this,r),!1);const E=document.createElement("button");E.className=s,E.setAttribute("type","button"),E.title=g,E.appendChild(typeof o=="string"?document.createTextNode(o):o),E.addEventListener(io.CLICK,this.handleClick_.bind(this,-r),!1);const S=t+" "+dx+" "+XB,O=this.element;O.className=S,O.appendChild(b),O.appendChild(E),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Py})):r.setZoom(s)}}}function Qee(n){n=n||{};const e=new $p;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new Wee(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new Gee(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new Nee(n.attributionOptions)),e}const Nk={ACTIVE:"active"};class V_ extends fp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Nk.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Nk.ACTIVE,e)}setMap(e){this.map_=e}}function qee(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:aJ,center:n.getConstrainedCenter(i)})}}function PO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:Py})}class Yee extends V_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ou.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();PO(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}class H_ extends V_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ou.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ou.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Ou.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Ou.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function RO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}function G6(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const $ee=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Vee=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},Tz=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Vee(n):!0},Hee=i_,Pz=function(n){const e=n.originalEvent;return e.button==0&&!(BZ&&bU&&e.ctrlKey)},Rz=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Zee=function(n){const e=n.originalEvent;return bU?e.metaKey:e.ctrlKey},Xee=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Kz=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},F4=function(n){const e=n.originalEvent;return ra(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},Jee=function(n){const e=n.originalEvent;return ra(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class ete extends H_{constructor(e){super({stopDown:Ax}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:G6(Rz,Jee);this.condition_=e.onFocusOnly?G6(Tz,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(RO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();hX(s,o.getResolution()),oO(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),d=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(d),duration:500,easing:Py})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class tte extends H_{constructor(e){e=e||{},super({stopDown:Ax}),this.condition_=e.condition?e.condition:$ee,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!F4(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===wO)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return F4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return F4(e)&&Pz(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class nte extends D_{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Qm([i])}getGeometry(){return this.geometry_}}const A1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Av extends hp{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class rte extends H_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new nte(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Pz,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Av(A1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Av(t?A1.BOXEND:A1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Av(A1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Av(A1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Av(A1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class ite extends rte{constructor(e){e=e||{};const t=e.condition?e.condition:Xee;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:Py})}}const eg={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class ote extends V_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Rz(t)&&Kz(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==io.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==eg.DOWN||i==eg.LEFT||i==eg.RIGHT||i==eg.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let d=0,g=0;i==eg.DOWN?g=-o:i==eg.LEFT?d=-o:i==eg.RIGHT?d=o:g=o;const b=[d,g];oO(b,a.getRotation()),qee(a,b,this.duration_),r.preventDefault(),t=!0}}return!t}}class ste extends V_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Zee(t)&&Kz(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==io.KEYDOWN||e.type==io.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();PO(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class ate extends V_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Hee;this.condition_=e.onFocusOnly?G6(Tz,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==io.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==io.WHEEL&&(s=i.deltaY,SZ&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=xU),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const d=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Tu(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),PO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class lte extends H_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ax),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const d=s-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==wO&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(RO(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class ute extends H_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ax),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const d=e.map,g=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(RO(this.targetPointers))),d.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function Ate(n){n=n||{};const e=new $p,t=new Kee(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new tte),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new Yee({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new ete({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new lte),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new ute({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new ote),e.push(new ste({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new ate({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new ite({duration:n.zoomDuration})),e}function Dz(n){if(n instanceof Ry){n.setMapInternal(null);return}n instanceof Dy&&n.getLayers().forEach(Dz)}function Lz(n,e){if(n instanceof Ry){n.setMapInternal(e);return}if(n instanceof Dy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)Lz(t[r],e)}}let KO=class extends fp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=cte(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:xU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=_h(),this.pixelToCoordinateTransform_=_h(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Qee(),this.interactions=t.interactions||Ate({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new kz(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(id.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(id.VIEW,this.handleViewChanged_),this.addChangeListener(id.SIZE,this.handleSizeChanged_),this.addChangeListener(id.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof sp)&&e.view.then(function(i){r.setView(new sp(i))}),this.controls.addEventListener(gh.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(gh.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(gh.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(gh.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(gh.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(gh.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Lz(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:i_,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Dy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:i_,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(id.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return K6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?yA(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(id.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof $p){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=km(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?yA(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(id.SIZE)}getView(){return this.get(id.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return jee(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new p0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===N6.POINTERDOWN||r===io.WHEEL||r===io.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[Vl.ANIMATING]||a[Vl.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ef.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ef.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new z1(Tm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new z1(Tm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Da(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(io.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(io.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Fee(this)),this.mapBrowserEventHandler_=new Uee(this,this.moveTolerance_);for(const s in Ou)this.mapBrowserEventHandler_.addEventListener(Ou[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(io.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(io.WHEEL,this.boundHandleBrowserEvent_,MU?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Ts(r,io.KEYDOWN,this.handleBrowserEvent,this),Ts(r,io.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Da(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Da(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ts(e,_y.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ts(e,io.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Da),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new g0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ts(e,_y.PROPERTYCHANGE,this.render,this),Ts(e,io.CHANGE,this.render,this),Ts(e,"addlayer",this.handleLayerAdd_,this),Ts(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Dz(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&X7(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:r2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Fo(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const d=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=r2(o.nextCenter,o.nextResolution,d,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Fg(this.previousExtent_)&&!Wm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new z1(Tm.MOVESTART,this,i)),this.previousExtent_=Ty(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Vl.ANIMATING]&&!s.viewHints[Vl.INTERACTING]&&!Wm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new z1(Tm.MOVEEND,this,s)),KU(s.extent,this.previousExtent_))),this.dispatchEvent(new z1(Tm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Tm.LOADSTART)||this.hasListener(Tm.LOADEND)||this.hasListener(Ef.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new g0("removelayer",t)),this.set(id.LAYERGROUP,e)}setSize(e){this.set(id.SIZE,e)}setTarget(e){this.set(id.TARGET,e)}setView(e){if(!e||e instanceof sp){this.set(id.VIEW,e);return}this.set(id.VIEW,new sp);const t=this;e.then(function(r){t.setView(new sp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(a)&&(t=[Math.max(0,s),Math.max(0,a)],!X7(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&QU("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!K0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function cte(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Dy({layers:n.layers});t[id.LAYERGROUP]=r,t[id.TARGET]=n.target,t[id.VIEW]=n.view instanceof sp?n.view:new sp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new $p(n.controls.slice()):(ra(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new $p(n.interactions.slice()):(ra(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new $p(n.overlays.slice()):(ra(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new $p,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const rd={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class dte extends fp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+zZ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(rd.ELEMENT,this.handleElementChanged),this.addChangeListener(rd.MAP,this.handleMapChanged),this.addChangeListener(rd.OFFSET,this.handleOffsetChanged),this.addChangeListener(rd.POSITION,this.handlePositionChanged),this.addChangeListener(rd.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(rd.ELEMENT)}getId(){return this.id}getMap(){return this.get(rd.MAP)||null}getOffset(){return this.get(rd.OFFSET)}getPosition(){return this.get(rd.POSITION)}getPositioning(){return this.get(rd.POSITIONING)}handleElementChanged(){SU(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),Da(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ts(e,Tm.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(rd.ELEMENT,e)}setMap(e){this.set(rd.MAP,e)}setOffset(e){this.set(rd.OFFSET,e)}setPosition(e){this.set(rd.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(rd.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[OZ(i),IZ(i)]);e=e||{};const a=e.margin===void 0?20:e.margin;if(!lp(r,s)){const o=s[0]-r[0],d=r[2]-s[2],g=s[1]-r[1],b=r[3]-s[3],E=[0,0];if(o<0?E[0]=o-a:d<0&&(E[0]=Math.abs(d)+a),g<0?E[1]=g-a:b<0&&(E[1]=Math.abs(b)+a),E[0]!==0||E[1]!==0){const S=t.getView().getCenterInternal(),O=t.getPixelFromCoordinateInternal(S);if(!O)return;const k=[O[0]+E[0],O[1]+E[1]],U=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(k),duration:U.duration,easing:U.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(rd.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const a=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let d="0%",g="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?d="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(d="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?g="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(g="-50%");const b=`translate(${d}, ${g}) translate(${a}, ${o})`;this.rendered.transform_!=b&&(this.rendered.transform_=b,r.transform=b)}getOptions(){return this.options}}class hte{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof D_&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return ra(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return ra(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ra(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function m2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function fte(n,e,t){return n+"/"+e+"/"+t}function pte(n){return mte(n[0],n[1],n[2])}function mte(n,e,t){return(e<<n)+t}function gte(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class DO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function c1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new DO(n,e,t,r)}const Gk=[];class yte extends $_{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=Jl(1,1,Gk)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Fo(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(U_(this.context_),Gk.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Fz=class extends $_{constructor(e,t,r,i,s,a){super(e,t,a),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Cr.IDLE&&(this.setState(Cr.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Cr.ERROR)}setFeatures(e){this.features_=e,this.setState(Cr.LOADED)}setLoader(e){this.loader_=e}};class Uz{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=fx,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Ma(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Ma(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return go()}readFeature(e,t){return go()}readFeatures(e,t){return go()}readGeometry(e,t){return go()}readProjection(e){return go()}writeFeature(e,t){return go()}writeFeatures(e,t){return go()}writeGeometry(e,t){return go()}}function Bx(n,e,t){const r=t?Ma(t.featureProjection):null,i=t?Ma(t.dataProjection):null;let s=n;if(r&&i&&!Mg(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(d_(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(d){for(let g=0,b=d.length;g<b;++g)d[g]=Math.round(d[g]*a)/a;return d};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const vte={Point:Tg,LineString:kg,Polygon:Qm,MultiPoint:Q_,MultiLineString:p_,MultiPolygon:m_};function _te(n,e,t){return Array.isArray(e[0])?(iz(n,0,e,t)||(n=n.slice(),F6(n,0,e,t)),n):(_O(n,0,e,t)||(n=n.slice(),u2(n,0,e,t)),n)}function zz(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(a=>zz({...n,geometry:a})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Bx(new sd(r,r==="Polygon"?_te(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function LO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>LO(i,e));return new a2(r)}const t=vte[n.type];return Bx(new t(n.flatCoordinates,n.layout,n.ends),!1,e)}class Cte extends Uz{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(VC(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(VC(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return go()}readFeaturesFromObject(e,t){return go()}readGeometry(e,t){return this.readGeometryFromObject(VC(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return go()}readProjection(e){return this.readProjectionFromObject(VC(e))}readProjectionFromObject(e){return go()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return go()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return go()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return go()}}function VC(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class Wk extends Cte{constructor(e){e=e||{},super(),this.dataProjection=Ma(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ma(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=FO(r.geometry);if(this.featureClass===sd)return zz({geometry:i,id:r.id,properties:r.properties},t);const s=new fx;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(LO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,d=a.length;o<d;++o){const g=this.readFeatureFromObject(a[o],t);g&&i.push(g)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return bte(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Ma(t.properties.name);else if(t.type==="EPSG")r=Ma("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=W6(a,t),delete s[e.getGeometryName()]),T0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return W6(e,this.adaptOptions(t))}}function FO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=wte(n);break}case"LineString":{t=Mte(n);break}case"Polygon":{t=Ote(n);break}case"MultiPoint":{t=Ete(n);break}case"MultiLineString":{t=Ste(n);break}case"MultiPolygon":{t=Bte(n);break}case"GeometryCollection":{t=xte(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function bte(n,e){const t=FO(n);return LO(t,e)}function xte(n,e){return n.geometries.map(function(r){return FO(r)})}function wte(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:zg(e.length)}}function Mte(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:zg(((r=e[0])==null?void 0:r.length)||2)}}function Ste(n){var s,a;const e=n.coordinates,t=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length)||2,r=[],i=W_(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:zg(t)}}function Ete(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:zg(((t=e[0])==null?void 0:t.length)||2)}}function Bte(n){var s,a;const e=n.coordinates,t=[],r=((a=(s=e[0])==null?void 0:s[0])==null?void 0:a[0].length)||2,i=VU(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:zg(r)}}function Ote(n){var s,a;const e=n.coordinates,t=[],r=(a=(s=e[0])==null?void 0:s[0])==null?void 0:a.length,i=W_(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:zg(r)}}function W6(n,e){n=Bx(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Kte(n);break}case"LineString":{r=kte(n);break}case"Polygon":{r=Dte(n,e);break}case"MultiPoint":{r=Pte(n);break}case"MultiLineString":{r=Tte(n);break}case"MultiPolygon":{r=Rte(n,e);break}case"GeometryCollection":{r=Ite(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function Ite(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return W6(r,e)})}}function kte(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Tte(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Pte(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Rte(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Kte(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Dte(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}class Lte extends Ry{constructor(e){e=e||{},super(e)}}class Fte extends IO{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let d=e.extent;if(t.extent!==void 0&&(d=Qd(d,Yp(t.extent,i.projection))),!o[Vl.ANIMATING]&&!o[Vl.INTERACTING]&&!Fg(d))if(a){const g=i.projection,b=a.getImage(d,s,r,g);b&&(this.loadImage(b)?this.image=b:b.getState()===hi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=yA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ig(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),d=ps(a),g=Math.floor(o.width*((i[0]-a[0])/d));if(g<0||g>=o.width)return null;const b=Hl(a),E=Math.floor(o.height*((a[3]-i[1])/b));return E<0||E>=o.height?null:this.getImageData(o,g,E)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],d=r.getPixelRatio(),g=e.layerStatesArray[e.layerIndex],b=e.pixelRatio,E=e.viewState,S=E.center,O=E.resolution,k=b*a/(O*d),U=b*o/(O*d);this.prepareContainer(e,t);const z=this.context.canvas.width,q=this.context.canvas.height,Q=this.getRenderContext(e);let re=!1,X=!0;if(g.extent){const he=Yp(g.extent,E.projection);X=ku(he,e.extent),re=X&&!lp(he,e.extent),re&&this.clipUnrotated(Q,e,he)}const Y=r.getImage(),J=em(this.tempTransform,z/2,q/2,k,U,0,d*(i[0]-S[0])/a,d*(S[1]-i[3])/o);this.renderedResolution=o*b/d;const N=Y.width*J[0],ie=Y.height*J[3];if(this.getLayer().getSource().getInterpolate()||(Q.imageSmoothingEnabled=!1),this.preRender(Q,e),X&&N>=.5&&ie>=.5){const he=J[4],de=J[5],we=g.opacity;we!==1&&(Q.save(),Q.globalAlpha=we),Q.drawImage(Y,0,0,+Y.width,+Y.height,he,de,N,ie),we!==1&&Q.restore()}return this.postRender(this.context,e),re&&Q.restore(),Q.imageSmoothingEnabled=!0,this.container}}class jz extends Lte{constructor(e){super(e)}createRenderer(){return new Fte(this)}getData(e){return super.getData(e)}}const Q6=65536*65536,Qk=1/Q6,Ute=12,qk=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),U4=0,HC=1,cv=2,ZC=5;class zte{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,a=this.pos;this.type=i&7,e(s,t,this),this.pos===a&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Q6;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Q6;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,jte(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Ute&&qk?qk.decode(this.buf.subarray(t,e)):ene(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===cv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===U4)for(;this.buf[this.pos++]>127;);else if(t===cv)this.pos=this.readVarint()+this.pos;else if(t===ZC)this.pos+=4;else if(t===HC)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Qk),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*Qk),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Nte(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=tne(this.buf,e,this.pos);const r=this.pos-t;r>=128&&Yk(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&Yk(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,cv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Qte,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,qte,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Vte,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Yte,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,$te,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Hte,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Zte,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Xte,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Jte,t)}writeBytesField(e,t){this.writeTag(e,cv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,ZC),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,ZC),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,HC),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,HC),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,U4),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,U4),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,cv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,ZC),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,HC),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function jte(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return d1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function d1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Nte(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Gte(t,r,e),Wte(r,e)}function Gte(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Wte(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function Yk(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function Qte(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function qte(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function Yte(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function $te(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function Vte(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Hte(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Zte(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Xte(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function Jte(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function ene(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let d,g,b;o===1?s<128&&(a=s):o===2?(d=n[i+1],(d&192)===128&&(a=(s&31)<<6|d&63,a<=127&&(a=null))):o===3?(d=n[i+1],g=n[i+2],(d&192)===128&&(g&192)===128&&(a=(s&15)<<12|(d&63)<<6|g&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):o===4&&(d=n[i+1],g=n[i+2],b=n[i+3],(d&192)===128&&(g&192)===128&&(b&192)===128&&(a=(s&15)<<18|(d&63)<<12|(g&63)<<6|b&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,o=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),r+=String.fromCharCode(a),i+=o}return r}function tne(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class nne extends Uz{constructor(e){super(),e=e||{},this.dataProjection=new yx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:sd,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let a=1,o=0,d=0,g=0,b=0,E=0;for(;e.pos<s;){if(!o){const S=e.readVarint();a=S&7,o=S>>3}if(o--,a===1||a===2)d+=e.readSVarint(),g+=e.readSVarint(),a===1&&b>E&&(i.push(b),E=b),r.push(d,g),b+=2;else if(a===7)b>E&&(r.push(r[E],r[E+1]),b+=2);else throw new Error("Invalid command found in the PBF")}b>E&&(i.push(b),E=b)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const a=t.properties;let o;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=t.id,a[this.layerName_]=t.layer.name;const d=[],g=[];this.readRawGeometry_(e,t,d,g);const b=ane(i,g.length);if(this.featureClass===sd)s=new this.featureClass(b,d,g,2,a,o),s.transform(r.dataProjection);else{let E;if(b=="Polygon"){const k=oz(d,g);E=k.length>1?new m_(d,"XY",k):new Qm(d,"XY",g)}else E=b==="Point"?new Tg(d,"XY"):b==="LineString"?new kg(d,"XY"):b==="MultiPoint"?new Q_(d,"XY"):b==="MultiLineString"?new p_(d,"XY",g):null;const S=this.featureClass;s=new S,this.geometryName_&&s.setGeometryName(this.geometryName_);const O=Bx(E,!1,r);s.setGeometry(O),o!==void 0&&s.setId(o),s.setProperties(a,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Ma(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new zte(e),a=s.readFields(rne,{}),o=[];for(const d in a){if(r&&!r.includes(d))continue;const g=a[d],b=g?[0,0,g.extent,g.extent]:null;i.setExtent(b);for(let E=0,S=g.length;E<S;++E){const O=sne(s,g,E),k=this.createFeature_(s,O,t);k!==null&&o.push(k)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function rne(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(ine,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function ine(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function one(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function sne(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(one,i,r),i}function ane(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}const UO=.5,lne=10,$k=.25;class zO{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let d={};const g=o?RX(re=>yA(o,Cx(re,this.targetProj_,this.sourceProj_))):d_(this.targetProj_,this.sourceProj_);this.transformInv_=function(re){const X=re[0]+"/"+re[1];return d[X]||(d[X]=g(re)),d[X]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ps(i)>=ps(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ps(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ps(this.targetProj_.getExtent()):null;const b=Ap(r),E=gx(r),S=mx(r),O=px(r),k=this.transformInv_(b),U=this.transformInv_(E),z=this.transformInv_(S),q=this.transformInv_(O),Q=lne+(a?Math.max(0,Math.ceil(Math.log2(A_(r)/(a*a*256*256)))):0);if(this.addQuad_(b,E,S,O,k,U,z,q,Q),this.wrapsXInSource_){let re=1/0;this.triangles_.forEach(function(X,Y,J){re=Math.min(re,X.source[0][0],X.source[1][0],X.source[2][0])}),this.triangles_.forEach(X=>{if(Math.max(X.source[0][0],X.source[1][0],X.source[2][0])-re>this.sourceWorldWidth_/2){const Y=[[X.source[0][0],X.source[0][1]],[X.source[1][0],X.source[1][1]],[X.source[2][0],X.source[2][1]]];Y[0][0]-re>this.sourceWorldWidth_/2&&(Y[0][0]-=this.sourceWorldWidth_),Y[1][0]-re>this.sourceWorldWidth_/2&&(Y[1][0]-=this.sourceWorldWidth_),Y[2][0]-re>this.sourceWorldWidth_/2&&(Y[2][0]-=this.sourceWorldWidth_);const J=Math.min(Y[0][0],Y[1][0],Y[2][0]);Math.max(Y[0][0],Y[1][0],Y[2][0])-J<this.sourceWorldWidth_/2&&(X.source=Y)}})}d={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,d,g){const b=B6([s,a,o,d]),E=this.sourceWorldWidth_?ps(b)/this.sourceWorldWidth_:null,S=this.sourceWorldWidth_,O=this.sourceProj_.canWrapX()&&E>.5&&E<1;let k=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=B6([e,t,r,i]);k=ps(z)/this.targetWorldWidth_>$k||k}!O&&this.sourceProj_.isGlobal()&&E&&(k=E>$k||k)}if(!k&&this.maxSourceExtent_&&isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])&&isFinite(b[3])&&!ku(b,this.maxSourceExtent_))return;let U=0;if(!k&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(d[0])||!isFinite(d[1]))){if(g>0)k=!0;else if(U=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),U!=1&&U!=2&&U!=4&&U!=8)return}if(g>0){if(!k){const z=[(e[0]+r[0])/2,(e[1]+r[1])/2],q=this.transformInv_(z);let Q;O?Q=(wg(s[0],S)+wg(o[0],S))/2-wg(q[0],S):Q=(s[0]+o[0])/2-q[0];const re=(s[1]+o[1])/2-q[1];k=Q*Q+re*re>this.errorThresholdSquared_}if(k){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const z=[(t[0]+r[0])/2,(t[1]+r[1])/2],q=this.transformInv_(z),Q=[(i[0]+e[0])/2,(i[1]+e[1])/2],re=this.transformInv_(Q);this.addQuad_(e,t,z,Q,s,a,q,re,g-1),this.addQuad_(Q,z,r,i,re,q,o,d,g-1)}else{const z=[(e[0]+t[0])/2,(e[1]+t[1])/2],q=this.transformInv_(z),Q=[(r[0]+i[0])/2,(r[1]+i[1])/2],re=this.transformInv_(Q);this.addQuad_(e,z,Q,i,s,q,re,d,g-1),this.addQuad_(z,t,r,Q,q,a,o,re,g-1)}return}}if(O){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}U&11||this.addTriangle_(e,r,i,s,o,d),U&14||this.addTriangle_(e,r,t,s,o,a),U&&(U&13||this.addTriangle_(t,i,e,a,d,s),U&7||this.addTriangle_(t,i,r,a,d,o))}calculateSourceExtent(){const e=Zh();return this.triangles_.forEach(function(t,r,i){const s=t.source;Nv(e,s[0]),Nv(e,s[1]),Nv(e,s[2])}),e}getTriangles(){return this.triangles_}}let z4;const iy=[];function Vk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function j4(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function une(){if(z4===void 0){const n=Jl(6,6,iy);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Vk(n,4,5,4,0),Vk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;z4=j4(e,0)||j4(e,4)||j4(e,8),U_(n),iy.push(n.canvas)}return z4}function q6(n,e,t,r){const i=Cx(t,e,n);let s=P6(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const d=n.getExtent();if(!d||Ig(d,i)){const g=P6(n,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function Nz(n,e,t,r){const i=If(t);let s=q6(n,e,i,r);return(!isFinite(s)||s<=0)&&FU(t,function(a){return s=q6(n,e,a,r),isFinite(s)&&s>0}),s}function Gz(n,e,t,r,i,s,a,o,d,g,b,E,S,O){const k=Jl(Math.round(t*n),Math.round(t*e),iy);if(E||(k.imageSmoothingEnabled=!1),d.length===0)return k.canvas;k.scale(t,t);function U(Y){return Math.round(Y*t)/t}k.globalCompositeOperation="lighter";const z=Zh();d.forEach(function(Y,J,N){rO(z,Y.extent)});let q;const Q=t/r,re=(E?1:1+Math.pow(2,-24))/Q;if(!S||d.length!==1||g!==0){if(q=Jl(Math.round(ps(z)*Q),Math.round(Hl(z)*Q),iy),E||(q.imageSmoothingEnabled=!1),i&&O){const Y=(i[0]-z[0])*Q,J=-(i[3]-z[3])*Q,N=ps(i)*Q,ie=Hl(i)*Q;q.rect(Y,J,N,ie),q.clip()}d.forEach(function(Y,J,N){if(Y.image.width>0&&Y.image.height>0){if(Y.clipExtent){q.save();const fe=(Y.clipExtent[0]-z[0])*Q,be=-(Y.clipExtent[3]-z[3])*Q,Pe=ps(Y.clipExtent)*Q,pe=Hl(Y.clipExtent)*Q;q.rect(E?fe:Math.round(fe),E?be:Math.round(be),E?Pe:Math.round(fe+Pe)-Math.round(fe),E?pe:Math.round(be+pe)-Math.round(be)),q.clip()}const ie=(Y.extent[0]-z[0])*Q,he=-(Y.extent[3]-z[3])*Q,de=ps(Y.extent)*Q,we=Hl(Y.extent)*Q;q.drawImage(Y.image,g,g,Y.image.width-2*g,Y.image.height-2*g,E?ie:Math.round(ie),E?he:Math.round(he),E?de:Math.round(ie+de)-Math.round(ie),E?we:Math.round(he+we)-Math.round(he)),Y.clipExtent&&q.restore()}})}const X=Ap(a);return o.getTriangles().forEach(function(Y,J,N){const ie=Y.source,he=Y.target;let de=ie[0][0],we=ie[0][1],fe=ie[1][0],be=ie[1][1],Pe=ie[2][0],pe=ie[2][1];const it=U((he[0][0]-X[0])/s),We=U(-(he[0][1]-X[1])/s),$e=U((he[1][0]-X[0])/s),ht=U(-(he[1][1]-X[1])/s),De=U((he[2][0]-X[0])/s),Ne=U(-(he[2][1]-X[1])/s),at=de,wt=we;de=0,we=0,fe-=at,be-=wt,Pe-=at,pe-=wt;const Ct=[[fe,be,0,0,$e-it],[Pe,pe,0,0,De-it],[0,0,fe,be,ht-We],[0,0,Pe,pe,Ne-We]],ft=CZ(Ct);if(!ft)return;if(k.save(),k.beginPath(),une()||!E){k.moveTo($e,ht);const Kt=4,Fe=it-$e,Te=We-ht;for(let Se=0;Se<Kt;Se++)k.lineTo($e+U((Se+1)*Fe/Kt),ht+U(Se*Te/(Kt-1))),Se!=Kt-1&&k.lineTo($e+U((Se+1)*Fe/Kt),ht+U((Se+1)*Te/(Kt-1)));k.lineTo(De,Ne)}else k.moveTo($e,ht),k.lineTo(it,We),k.lineTo(De,Ne);k.clip(),k.transform(ft[0],ft[2],ft[1],ft[3],it,We),k.translate(z[0]-at,z[3]-wt);let Lt;if(q)Lt=q.canvas,k.scale(re,-re);else{const Kt=d[0],Fe=Kt.extent;Lt=Kt.image,k.scale(ps(Fe)/Lt.width,-Hl(Fe)/Lt.height)}k.drawImage(Lt,0,0),k.restore()}),q&&(U_(q),iy.push(q.canvas)),b&&(k.save(),k.globalCompositeOperation="source-over",k.strokeStyle="black",k.lineWidth=1,o.getTriangles().forEach(function(Y,J,N){const ie=Y.target,he=(ie[0][0]-X[0])/s,de=-(ie[0][1]-X[1])/s,we=(ie[1][0]-X[0])/s,fe=-(ie[1][1]-X[1])/s,be=(ie[2][0]-X[0])/s,Pe=-(ie[2][1]-X[1])/s;k.beginPath(),k.moveTo(we,fe),k.lineTo(he,de),k.lineTo(be,Pe),k.closePath(),k.stroke()}),k.restore()),k.canvas}function Y6(n){return Array.isArray(n)?Math.min(...n):n}class Ane extends HB{constructor(e,t,r,i,s,a,o){let d=e.getExtent();d&&e.canWrapX()&&(d=d.slice(),d[0]=-1/0,d[2]=1/0);let g=t.getExtent();g&&t.canWrapX()&&(g=g.slice(),g[0]=-1/0,g[2]=1/0);const b=g?Qd(r,g):r,E=If(b),S=q6(e,t,E,i),O=UO,k=new zO(e,t,b,d,S*O,i),U=k.calculateSourceExtent(),z=Fg(U)?null:a(U,S,s),q=z?hi.IDLE:hi.EMPTY,Q=z?z.getPixelRatio():1;super(r,i,Q,q),this.targetProj_=t,this.maxSourceExtent_=d,this.triangulation_=k,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=z,this.sourcePixelRatio_=Q,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==hi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==hi.LOADED){const t=ps(this.targetExtent_)/this.targetResolution_,r=Hl(this.targetExtent_)/this.targetResolution_;this.canvas_=Gz(t,r,this.sourcePixelRatio_,Y6(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==hi.IDLE){this.state=hi.LOADING,this.changed();const e=this.sourceImage_.getState();e==hi.LOADED||e==hi.ERROR?this.reproject_():(this.sourceListenerKey_=Ts(this.sourceImage_,io.CHANGE,t=>{const r=this.sourceImage_.getState();(r==hi.LOADED||r==hi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Da(this.sourceListenerKey_),this.sourceListenerKey_=null}}const XC=4,N4={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class cne extends hp{constructor(e,t){super(e),this.image=t}}class Wz extends Ky{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=ux(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||Mg(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Mg(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Wm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Ane(s,i,e,t,r,(a,o,d)=>this.getImageInternal(a,o,d,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=dne(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&lp(this.wantedExtent_,s)||lp(this.image.getExtent(),s))&&(this.wantedResolution_&&Y6(this.wantedResolution_)===a||Y6(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new HB(s,a,r,this.loader),this.image.addEventListener(io.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case hi.LOADING:this.loading=!0,r=N4.IMAGELOADSTART;break;case hi.LOADED:this.loading=!1,r=N4.IMAGELOADEND;break;case hi.ERROR:this.loading=!1,r=N4.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new cne(r,t))}}function dne(n,e,t,r){const i=e/t,s=If(n),a=_0(ps(n)/i,XC),o=_0(Hl(n)/i,XC),d=_0((r-1)*a/2,XC),g=a+2*d,b=_0((r-1)*o/2,XC),E=o+2*b;return r2(s,i,0,[g,E])}const w0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class hne extends Ry{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(w0.PRELOAD)}setPreload(e){this.set(w0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(w0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(w0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function g2(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function fne(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}const pne=new Error("disposed");let h1=null;function mne(n){h1||(h1=Jl(n.width,n.height,void 0,{willReadFrequently:!0}));const e=h1.canvas,t=n.width;e.width!==t&&(e.width=t);const r=n.height;return e.height!==r&&(e.height=r),h1.clearRect(0,0,t,r),h1.drawImage(n,0,0),h1.getImageData(0,0,t,r).data}const gne=[256,256];class $6 extends $_{constructor(e){const t=Cr.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=g2(this.data_);return e?[e.width,e.height]:gne}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Cr.IDLE&&this.state!==Cr.ERROR)return;this.state=Cr.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Cr.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Cr.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(pne),this.controller_=null),super.disposeInternal()}}function Ox(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function V6(n,e,t,r,i,s,a){a=a??Ox();const o=1/(n-e),d=1/(t-r),g=1/(i-s);return a[0]=-2*o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*g,a[11]=0,a[12]=(n+e)*o,a[13]=(r+t)*d,a[14]=(s+i)*g,a[15]=1,a}function Hk(n,e,t,r,i){return i=i??Ox(),i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e,i[4]=n[4]*t,i[5]=n[5]*t,i[6]=n[6]*t,i[7]=n[7]*t,i[8]=n[8]*r,i[9]=n[9]*r,i[10]=n[10]*r,i[11]=n[11]*r,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function yne(n,e,t,r,i){i=i??Ox();let s,a,o,d,g,b,E,S,O,k,U,z;return n===i?(i[12]=n[0]*e+n[4]*t+n[8]*r+n[12],i[13]=n[1]*e+n[5]*t+n[9]*r+n[13],i[14]=n[2]*e+n[6]*t+n[10]*r+n[14],i[15]=n[3]*e+n[7]*t+n[11]*r+n[15]):(s=n[0],a=n[1],o=n[2],d=n[3],g=n[4],b=n[5],E=n[6],S=n[7],O=n[8],k=n[9],U=n[10],z=n[11],i[0]=s,i[1]=a,i[2]=o,i[3]=d,i[4]=g,i[5]=b,i[6]=E,i[7]=S,i[8]=O,i[9]=k,i[10]=U,i[11]=z,i[12]=s*e+g*t+O*r+n[12],i[13]=a*e+b*t+k*r+n[13],i[14]=o*e+E*t+U*r+n[14],i[15]=d*e+S*t+z*r+n[15]),i}function vne(n,e,t,r){return r=r??Ox(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n,r[13]=e,r[14]=t,r[15]=1,r}const _ne=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Cne=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class bne{constructor(e){this.gl_=e,this.program_=H6(e,Cne,_ne),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,r,i,s,a,o,d,g,b,E,S,O){const k=this.gl_;d===void 0&&(d=i),g===void 0&&(g=s),a===void 0&&(a=t),o===void 0&&(o=r),b===void 0&&(b=a),E===void 0&&(E=o),S===void 0&&(S=k.canvas.width),O===void 0&&(O=k.canvas.height),k.bindTexture(k.TEXTURE_2D,e),k.useProgram(this.program_),k.bindBuffer(k.ARRAY_BUFFER,this.positionBuffer),k.enableVertexAttribArray(this.positionLocation),k.vertexAttribPointer(this.positionLocation,2,k.FLOAT,!1,0,0),k.bindBuffer(k.ARRAY_BUFFER,this.texcoordBuffer),k.enableVertexAttribArray(this.texcoordLocation),k.vertexAttribPointer(this.texcoordLocation,2,k.FLOAT,!1,0,0);let U=V6(0,S,0,O,-1,1);U=yne(U,d,g,0),U=Hk(U,b,E,1),k.uniformMatrix4fv(this.matrixLocation,!1,U);let z=vne(i/t,s/r,0);z=Hk(z,a/t,o/r,1),k.uniformMatrix4fv(this.textureMatrixLocation,!1,z),k.uniform1i(this.textureLocation,0),k.drawArrays(k.TRIANGLES,0,this.positions.length/2)}}function Zk(n,e,t){const r=n.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){const i=n.getShaderInfoLog(r);throw i===null?new Error("Shader info log creation failed"):new Error(i)}return r}function H6(n,e,t){const r=n.createProgram(),i=Zk(n,n.VERTEX_SHADER,t),s=Zk(n,n.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(n.attachShader(r,i),n.attachShader(r,s),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw n.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const xne=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,wne=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Mne=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Sne=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Ene(n,e,t,r){let i;return t.length?i=t.shift():VB?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("webgl",r)}function Bne(n){const e=n.canvas;e.width=1,e.height=1,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)}const Xk=[];function One(n,e,t,r,i,s,a,o,d,g,b,E,S,O){const k=Math.round(r*e),U=Math.round(r*t);n.canvas.width=k,n.canvas.height=U;let z,q;if(q=n.createTexture(),n.bindTexture(n.TEXTURE_2D,q),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),S?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,k,U,0,n.RGBA,b,null),z=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,z),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,q,0),z===null)throw new Error("Could not create framebuffer");if(q===null)throw new Error("Could not create texture");if(d.length===0)return{width:k,height:U,framebuffer:z,texture:q};const Q=Zh();d.forEach(function(de,we,fe){rO(Q,de.extent)});let re,X,Y;const J=1/i;{if(re=n.createTexture(),q===null)throw new Error("Could not create texture");X=Math.round(ps(Q)*J),Y=Math.round(Hl(Q)*J);const de=n.getParameter(n.MAX_TEXTURE_SIZE),we=Math.max(X,Y),fe=we>de?de/we:1,be=Math.round(X*fe),Pe=Math.round(Y*fe);n.bindTexture(n.TEXTURE_2D,re),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),S?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,be,Pe,0,n.RGBA,b,null);const pe=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,pe),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,re,0);const it=new bne(n);d.forEach(function(We,$e,ht){const De=(We.extent[0]-Q[0])*J*fe,Ne=-(We.extent[3]-Q[3])*J*fe,at=ps(We.extent)*J*fe,wt=Hl(We.extent)*J*fe;if(n.bindFramebuffer(n.FRAMEBUFFER,pe),n.viewport(0,0,be,Pe),We.clipExtent){const Ct=(We.clipExtent[0]-Q[0])*J*fe,ft=-(We.clipExtent[3]-Q[3])*J*fe,Lt=ps(We.clipExtent)*J*fe,Kt=Hl(We.clipExtent)*J*fe;n.enable(n.SCISSOR_TEST),n.scissor(S?Ct:Math.round(Ct),S?ft:Math.round(ft),S?Lt:Math.round(Ct+Lt)-Math.round(Ct),S?Kt:Math.round(ft+Kt)-Math.round(ft))}it.drawImage(We.texture,We.width,We.height,g,g,We.width-2*g,We.height-2*g,S?De:Math.round(De),S?Ne:Math.round(Ne),S?at:Math.round(De+at)-Math.round(De),S?wt:Math.round(Ne+wt)-Math.round(Ne),be,Pe),n.disable(n.SCISSOR_TEST)}),n.deleteFramebuffer(pe)}const N=Ap(a),ie=Ap(Q),he=de=>{const we=(de[0][0]-N[0])/s*r,fe=-(de[0][1]-N[1])/s*r,be=(de[1][0]-N[0])/s*r,Pe=-(de[1][1]-N[1])/s*r,pe=(de[2][0]-N[0])/s*r,it=-(de[2][1]-N[1])/s*r;return{u1:be,v1:Pe,u0:we,v0:fe,u2:pe,v2:it}};n.bindFramebuffer(n.FRAMEBUFFER,z),n.viewport(0,0,k,U);{const de=[],we=[],fe=H6(n,Sne,Mne);n.useProgram(fe);const be=n.getUniformLocation(fe,"u_texture");n.bindTexture(n.TEXTURE_2D,re),n.uniform1i(be,0),o.getTriangles().forEach(function(De,Ne,at){const wt=De.source,Ct=De.target,{u1:ft,v1:Lt,u0:Kt,v0:Fe,u2:Te,v2:Se}=he(Ct),Je=(wt[0][0]-ie[0])/i/X,yt=-(wt[0][1]-ie[1])/i/Y,dt=(wt[1][0]-ie[0])/i/X,Ut=-(wt[1][1]-ie[1])/i/Y,en=(wt[2][0]-ie[0])/i/X,Nt=-(wt[2][1]-ie[1])/i/Y;de.push(ft,Lt,Kt,Fe,Te,Se),we.push(dt,Ut,Je,yt,en,Nt)});const Pe=V6(0,k,U,0,-1,1),pe=n.getUniformLocation(fe,"u_matrix");n.uniformMatrix4fv(pe,!1,Pe);const it=n.getAttribLocation(fe,"a_position"),We=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,We),n.bufferData(n.ARRAY_BUFFER,new Float32Array(de),n.STATIC_DRAW),n.vertexAttribPointer(it,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(it);const $e=n.getAttribLocation(fe,"a_texcoord"),ht=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,ht),n.bufferData(n.ARRAY_BUFFER,new Float32Array(we),n.STATIC_DRAW),n.vertexAttribPointer($e,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray($e),n.drawArrays(n.TRIANGLES,0,de.length/2)}if(E){const de=H6(n,wne,xne);n.useProgram(de);const we=V6(0,k,U,0,-1,1),fe=n.getUniformLocation(de,"u_matrix");n.uniformMatrix4fv(fe,!1,we);const be=Array.isArray(E)?E:[0,0,0,255],Pe=n.getUniformLocation(de,"u_val");n.uniform4fv(Pe,be);const pe=n.getAttribLocation(de,"a_position"),it=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,it),n.vertexAttribPointer(pe,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(pe);const We=o.getTriangles().reduce(function($e,ht){const De=ht.target,{u1:Ne,v1:at,u0:wt,v0:Ct,u2:ft,v2:Lt}=he(De);return $e.concat([Ne,at,wt,Ct,wt,Ct,ft,Lt,ft,Lt,Ne,at])},[]);n.bufferData(n.ARRAY_BUFFER,new Float32Array(We),n.STATIC_DRAW),n.drawArrays(n.LINES,0,We.length/2)}return{width:k,height:U,framebuffer:z,texture:q}}class Ine extends $6{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,r=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?Qd(r,i):r:i;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let o=this.sourceTileGrid_.getExtent();const d=a?Qd(s,a):s;if(A_(d)===0){this.state=Cr.EMPTY;return}r&&(o?o=Qd(o,r):o=r);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),b=e.targetProj,E=Nz(t,b,d,g);if(!isFinite(E)||E<=0){this.state=Cr.EMPTY;return}const S=e.errorThreshold!==void 0?e.errorThreshold:UO;if(this.triangulation_=new zO(t,b,d,o,E*S,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=Cr.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(E);let O=this.triangulation_.calculateSourceExtent();if(o&&(t.canWrapX()?(O[1]=Tu(O[1],o[1],o[3]),O[3]=Tu(O[3],o[1],o[3])):O=Qd(O,o)),!A_(O))this.state=Cr.EMPTY;else{let k=0,U=0;t.canWrapX()&&(k=ps(r),U=Math.floor((O[0]-r[0])/k)),iO(O.slice(),t,!0).forEach(q=>{const Q=this.sourceTileGrid_.getTileRangeForExtentAndZ(q,this.sourceZ_),re=e.getTileFunction;for(let X=Q.minX;X<=Q.maxX;X++)for(let Y=Q.minY;Y<=Q.maxY;Y++){const J=re(this.sourceZ_,X,Y,this.pixelRatio_);if(J){const N=U*k;this.sourceTiles_.push({tile:J,offset:N})}}++U}),this.sourceTiles_.length===0&&(this.state=Cr.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(X=>{var Ne;const Y=X.tile;if(!Y||Y.getState()!==Cr.LOADED)return;const J=Y.getSize(),N=this.gutter_;let ie;const he=fne(Y.getData());he?ie=he:(t=!0,ie=mne(g2(Y.getData())));const de=[J[0]+2*N,J[1]+2*N],we=ie instanceof Float32Array,fe=de[0]*de[1],be=we?Float32Array:Uint8ClampedArray,Pe=new be(ie.buffer),pe=be.BYTES_PER_ELEMENT,it=pe*Pe.length/fe,We=Pe.byteLength/de[1],$e=Math.floor(We/pe/de[0]),ht=this.sourceTileGrid_.getTileCoordExtent(Y.tileCoord);ht[0]+=X.offset,ht[2]+=X.offset;const De=(Ne=this.clipExtent_)==null?void 0:Ne.slice();De&&(De[0]+=X.offset,De[2]+=X.offset),e.push({extent:ht,clipExtent:De,data:Pe,dataType:be,bytesPerPixel:it,pixelSize:de,bandCount:$e})}),this.sourceTiles_.length=0,e.length===0){this.state=Cr.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),s=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],o=s*this.pixelRatio_,d=a*this.pixelRatio_,g=this.targetTileGrid_.getResolution(r),b=this.sourceTileGrid_.getResolution(this.sourceZ_),E=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),S=e[0].bandCount,O=new e[0].dataType(S*o*d),k=Ene(o,d,Xk,{premultipliedAlpha:!1,antialias:!1});let U;const z=k.RGBA;let q;e[0].dataType==Float32Array?(q=k.FLOAT,k.getExtension("WEBGL_color_buffer_float"),k.getExtension("OES_texture_float"),k.getExtension("EXT_float_blend"),U=k.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(q=k.UNSIGNED_BYTE,U=this.interpolate);const Q=4,re=Math.ceil(S/Q);for(let X=re-1;X>=0;--X){const Y=[];for(let be=0,Pe=e.length;be<Pe;++be){const pe=e[be],it=pe.pixelSize,We=it[0],$e=it[1],ht=new pe.dataType(Q*We*$e),De=pe.data;let Ne=X*Q;for(let wt=0,Ct=ht.length;wt<Ct;wt+=Q)ht[wt]=De[Ne],ht[wt+1]=De[Ne+1],ht[wt+2]=De[Ne+2],ht[wt+3]=De[Ne+3],Ne+=S;const at=k.createTexture();k.bindTexture(k.TEXTURE_2D,at),U?(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR)):(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST)),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texImage2D(k.TEXTURE_2D,0,z,We,$e,0,z,q,ht),Y.push({extent:pe.extent,clipExtent:pe.clipExtent,texture:at,width:We,height:$e})}const{framebuffer:J,width:N,height:ie}=One(k,s,a,this.pixelRatio_,b,g,E,this.triangulation_,Y,this.gutter_,q,this.renderEdges_,U),he=N,de=ie*Q,we=new e[0].dataType(he*de);k.bindFramebuffer(k.FRAMEBUFFER,J),k.readPixels(0,0,N,ie,k.RGBA,q,we);let fe=X*Q;for(let be=0,Pe=we.length;be<Pe;be+=Q){const pe=(he-1-(be/de|0))*de+be%de;O[fe]=we[pe],O[fe+1]=we[pe+1],O[fe+2]=we[pe+2],O[fe+3]=we[pe+3],fe+=S}}if(Bne(k),Xk.push(k.canvas),t){const X=Jl(s,a),Y=new ImageData(O,s);X.putImageData(Y,0,0),this.reprojData_=X.canvas}else this.reprojData_=O;this.reprojSize_=[Math.round(o),Math.round(d)],this.state=Cr.LOADED,this.changed()}load(){if(this.state!==Cr.IDLE&&this.state!==Cr.ERROR)return;this.state=Cr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r!==Cr.IDLE&&r!==Cr.LOADING)return;e++;const i=Ts(t,io.CHANGE,()=>{const s=t.getState();(s==Cr.LOADED||s==Cr.ERROR||s==Cr.EMPTY)&&(Da(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==Cr.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Da),this.sourcesListenerKeys_=null}}class Z6 extends $_{constructor(e,t,r,i,s,a,o,d,g,b,E,S){super(s,Cr.IDLE,S),this.renderEdges_=E!==void 0?E:!1,this.pixelRatio_=o,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const O=i.getTileCoordExtent(this.wrappedTileCoord_),k=this.targetTileGrid_.getExtent();let U=this.sourceTileGrid_.getExtent();const z=k?Qd(O,k):O;if(A_(z)===0){this.state=Cr.EMPTY;return}const q=e.getExtent();q&&(U?U=Qd(U,q):U=q);const Q=i.getResolution(this.wrappedTileCoord_[0]),re=Nz(e,r,z,Q);if(!isFinite(re)||re<=0){this.state=Cr.EMPTY;return}const X=b!==void 0?b:UO;if(this.triangulation_=new zO(e,r,z,U,re*X,Q),this.triangulation_.getTriangles().length===0){this.state=Cr.EMPTY;return}this.sourceZ_=t.getZForResolution(re);let Y=this.triangulation_.calculateSourceExtent();if(U&&(e.canWrapX()?(Y[1]=Tu(Y[1],U[1],U[3]),Y[3]=Tu(Y[3],U[1],U[3])):Y=Qd(Y,U)),!A_(Y))this.state=Cr.EMPTY;else{let J=0,N=0;e.canWrapX()&&(J=ps(q),N=Math.floor((Y[0]-q[0])/J)),iO(Y.slice(),e,!0).forEach(he=>{const de=t.getTileRangeForExtentAndZ(he,this.sourceZ_);for(let we=de.minX;we<=de.maxX;we++)for(let fe=de.minY;fe<=de.maxY;fe++){const be=g(this.sourceZ_,we,fe,o);if(be){const Pe=N*J;this.sourceTiles_.push({tile:be,offset:Pe})}}++N}),this.sourceTiles_.length===0&&(this.state=Cr.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==Cr.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const a=(i=this.clipExtent_)==null?void 0:i.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:s,clipExtent:a,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Cr.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Gz(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Cr.LOADED}this.changed()}load(){if(this.state==Cr.IDLE){this.state=Cr.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Cr.IDLE||r==Cr.LOADING){e++;const i=Ts(t,io.CHANGE,s=>{const a=t.getState();(a==Cr.LOADED||a==Cr.ERROR||a==Cr.EMPTY)&&(Da(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Cr.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Da),this.sourcesListenerKeys_=null}release(){this.canvas_&&(U_(this.canvas_.getContext("2d")),iy.push(this.canvas_),this.canvas_=null),super.release()}}function G4(n,e,t,r){return`${n},${fte(e,t,r)}`}function W4(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function kne(n,e,t){const r=n[t];return r?r.delete(e):!1}function Jk(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Qd(e,Yp(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Qd(e,i))}return e}class Qz extends IO{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Zh(),this.tempTileRange_=new DO(0,0,0,0),this.tempTileCoord_=m2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new hte(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),d=G4(o.getKey(),e,t,r);let g;if(s.containsKey(d))g=s.get(d);else{if(g=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!g)return null;s.set(d,g)}return g}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=yA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ig(s,i))return null;const a=t.viewState,o=r.getRenderSource(),d=o.getTileGridForProjection(a.projection),g=o.getTilePixelRatio(t.pixelRatio);for(let b=d.getZForResolution(a.resolution);b>=d.getMinZoom();--b){const E=d.getTileCoordForCoordAndZ(i,b),S=this.getTile(b,E[1],E[2],t);if(!S||S.getState()!==Cr.LOADED)continue;const O=d.getOrigin(b),k=ad(d.getTileSize(b)),U=d.getResolution(b);let z;if(S instanceof Iz||S instanceof Z6)z=S.getImage();else if(S instanceof $6){if(z=g2(S.getData()),!z)continue}else continue;const q=Math.floor(g*((i[0]-O[0])/U-E[1]*k[0])),Q=Math.floor(g*((O[1]-i[1])/U-E[2]*k[1])),re=Math.round(g*o.getGutterForProjection(a.projection));return this.getImageData(z,q+re,Q+re)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),d=o.getRenderSource(),g=d.getTileGridForProjection(a.projection),b=Fo(d);b in e.wantedTiles||(e.wantedTiles[b]={});const E=e.wantedTiles[b],S=o.getMapInternal(),O=Math.max(r-s,g.getMinZoom(),g.getZForResolution(Math.min(o.getMaxResolution(),S?S.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):g.getResolution(0)),d.zDirection));for(let k=r;k>=O;--k){const U=g.getTileRangeForExtentAndZ(t,k,this.tempTileRange_),z=g.getResolution(k);for(let q=U.minX;q<=U.maxX;++q)for(let Q=U.minY;Q<=U.maxY;++Q){const re=this.getTile(k,q,Q,e);if(!re||!W4(i,re,k))continue;const Y=re.getKey();if(E[Y]=!0,re.getState()===Cr.IDLE&&!e.tileQueue.isKeyQueued(Y)){const J=m2(k,q,Q,this.tempTileCoord_);e.tileQueue.enqueue([re,b,g.getTileCoordCenter(J),z])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let d=0;d<o.length;++d){const g=G4(o[d],i,s,a);if(r.containsKey(g)){const b=r.get(g);if(b.getState()===Cr.LOADED)return b.endTransition(Fo(this)),W4(t,b,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let b=s.minX;b<=s.maxX;++b)for(let E=s.minY;E<=s.maxY;++E){const S=G4(g,r,b,E);let O=!1;if(o.containsKey(S)){const k=o.get(S);k.getState()===Cr.LOADED&&(W4(i,k,r),O=!0)}O||(a=!1)}return a}renderFrame(e,t){let r=!0;this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,a=s.projection,o=s.resolution,d=s.center,g=e.pixelRatio,b=this.getLayer(),E=b.getSource(),S=E.getRevision(),O=E.getTileGridForProjection(a),k=O.getZForResolution(o,E.zDirection),U=O.getResolution(k),z=E.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==z&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=z):this.renderedSourceKey_=z;let q=e.extent;const Q=E.getTilePixelRatio(g);this.prepareContainer(e,t);const re=this.context.canvas.width,X=this.context.canvas.height,Y=i.extent&&Yp(i.extent);Y&&(q=Qd(q,Yp(i.extent)));const J=U*re/2/Q,N=U*X/2/Q,ie=[d[0]-J,d[1]-N,d[0]+J,d[1]+N],he={};this.renderedTiles.length=0;const de=b.getPreload();if(e.nextExtent){const De=O.getZForResolution(s.nextResolution,E.zDirection),Ne=Jk(e,e.nextExtent);this.enqueueTiles(e,Ne,De,he,de)}const we=Jk(e,q);if(this.enqueueTiles(e,we,k,he,0),de>0&&setTimeout(()=>{this.enqueueTiles(e,we,k-1,he,de-1)},0),!(k in he))return this.container;const fe=Fo(this),be=e.time;for(const De of he[k]){const Ne=De.getState();if((De instanceof Z6||De instanceof Ine)&&Ne===Cr.EMPTY)continue;const at=De.tileCoord;if(Ne===Cr.LOADED&&De.getAlpha(fe,be)===1){De.endTransition(fe);continue}if(Ne!==Cr.IDLE&&(r=!1),Ne!==Cr.ERROR&&(this.renderComplete=!1),this.findStaleTile_(at,he)){kne(he,De,k),e.animate=!0;continue}if(this.findAltTiles_(O,at,k+1,he))continue;const ft=O.getMinZoom();for(let Lt=k-1;Lt>=ft&&!this.findAltTiles_(O,at,Lt,he);--Lt);}const Pe=U/o*g/Q,pe=this.getRenderContext(e);em(this.tempTransform,re/2,X/2,Pe,Pe,0,-re/2,-X/2),i.extent&&this.clipUnrotated(pe,e,Y),E.getInterpolate()||(pe.imageSmoothingEnabled=!1),this.preRender(pe,e);const it=Object.keys(he).map(Number);it.sort(Fm);let We;const $e=[],ht=[];for(let De=it.length-1;De>=0;--De){const Ne=it[De],at=E.getTilePixelSize(Ne,g,a),Ct=O.getResolution(Ne)/U,ft=at[0]*Ct*Pe,Lt=at[1]*Ct*Pe,Kt=O.getTileCoordForCoordAndZ(Ap(ie),Ne),Fe=O.getTileCoordExtent(Kt),Te=yA(this.tempTransform,[Q*(Fe[0]-ie[0])/U,Q*(ie[3]-Fe[3])/U]),Se=Q*E.getGutterForProjection(a);for(const Je of he[Ne]){if(Je.getState()!==Cr.LOADED)continue;const yt=Je.tileCoord,dt=Kt[1]-yt[1],Ut=Math.round(Te[0]-(dt-1)*ft),en=Kt[2]-yt[2],Nt=Math.round(Te[1]-(en-1)*Lt),yn=Math.round(Te[0]-dt*ft),jn=Math.round(Te[1]-en*Lt),Rr=Ut-yn,sr=Nt-jn,Jn=it.length===1;let mr=!1;We=[yn,jn,yn+Rr,jn,yn+Rr,jn+sr,yn,jn+sr];for(let pr=0,xr=$e.length;pr<xr;++pr)if(!Jn&&Ne<ht[pr]){const Qn=$e[pr];ku([yn,jn,yn+Rr,jn+sr],[Qn[0],Qn[3],Qn[4],Qn[7]])&&(mr||(pe.save(),mr=!0),pe.beginPath(),pe.moveTo(We[0],We[1]),pe.lineTo(We[2],We[3]),pe.lineTo(We[4],We[5]),pe.lineTo(We[6],We[7]),pe.moveTo(Qn[6],Qn[7]),pe.lineTo(Qn[4],Qn[5]),pe.lineTo(Qn[2],Qn[3]),pe.lineTo(Qn[0],Qn[1]),pe.clip())}$e.push(We),ht.push(Ne),this.drawTile(Je,e,yn,jn,Rr,sr,Se,Jn),mr&&pe.restore(),this.renderedTiles.unshift(Je),this.updateUsedTiles(e.usedTiles,E,Je)}}if(this.renderedRevision=S,this.renderedResolution=U,this.extentChanged=!this.renderedExtent_||!Wm(this.renderedExtent_,ie),this.renderedExtent_=ie,this.renderedPixelRatio=g,this.postRender(this.context,e),i.extent&&pe.restore(),pe.imageSmoothingEnabled=!0,this.renderComplete){const De=(Ne,at)=>{const wt=Fo(E),Ct=at.wantedTiles[wt],ft=Ct?Object.keys(Ct).length:0;this.updateCacheSize(ft),this.tileCache_.expireCache()};e.postRenderFunctions.push(De)}return!this.renderComplete&&!r&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,d){let g;if(e instanceof $6){if(g=g2(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const b=this.getRenderContext(t),E=Fo(this),S=t.layerStatesArray[t.layerIndex],O=S.opacity*(d?e.getAlpha(E,t.time):1),k=O!==b.globalAlpha;k&&(b.save(),b.globalAlpha=O),b.drawImage(g,o,o,g.width-2*o,g.height-2*o,r,i,s,a),k&&b.restore(),O!==S.opacity?t.animate=!0:d&&e.endTransition(E)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Fo(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}class qz extends hne{constructor(e){super(e)}createRenderer(){return new Qz(this,{cacheSize:this.getCacheSize()})}}const f1=[0,0,0],h0=5;class Ix{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ra(gZ(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ra(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ap(r)),ra(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ra(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:CO,ra(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new DO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,d=i.maxY;o<=d;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,d=null,g=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):d=this.getTileCoordExtent(e,i);g>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=c1(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(d,g,r),t(g,s))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return c1(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return c1(s,a,s,a,r);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-i),g=Math.floor(s*d),b=Math.floor(a*d);if(t<i)return c1(g,g,b,b,r);const E=Math.floor(d*(s+1))-1,S=Math.floor(d*(a+1))-1;return c1(g,E,b,S,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,f1);const i=f1[1],s=f1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,f1);const a=f1[1],o=f1[2];return c1(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=ad(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=ad(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,d=a+s[0]*i,g=o+s[1]*i;return Gm(a,o,d,g,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),d=this.getOrigin(a),g=ad(this.getTileSize(a),this.tmpSize_);let b=o*(e-d[0])/r/g[0],E=o*(d[1]-t)/r/g[1];return i?(b=_0(b,h0)-1,E=_0(E,h0)-1):(b=zC(b,h0),E=zC(E,h0)),m2(a,b,E,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),d=ad(this.getTileSize(r),this.tmpSize_);let g=(e-a[0])/o/d[0],b=(a[1]-t)/o/d[1];return i?(g=_0(g,h0)-1,b=_0(b,h0)-1):(g=zC(g,h0),b=zC(b,h0)),m2(r,g,b,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=ux(this.resolutions_,e,t||0);return Tu(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return ez(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function Yz(n){let e=n.getDefaultTileGrid();return e||(e=Rne(n),n.setDefaultTileGrid(e)),e}function Tne(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=kx(t);if(!Ig(s,i)){const a=ps(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function Pne(n,e,t,r){r=r!==void 0?r:"top-left";const i=$z(n,e,t);return new Ix({extent:n,origin:JZ(n,r),resolutions:i,tileSize:t})}function jO(n){const e=n||{},t=e.extent||Ma("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:$z(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Ix(r)}function $z(n,e,t,r){e=e!==void 0?e:uz,t=ad(t!==void 0?t:CO);const i=Hl(n),s=ps(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let d=0;d<a;++d)o[d]=r/Math.pow(2,d);return o}function Rne(n,e,t,r){const i=kx(n);return Pne(i,e,t,r)}function kx(n){n=Ma(n);let e=n.getExtent();if(!e){const t=180*R0.degrees/n.getMetersPerUnit();e=Gm(-t,-t,t,t)}return e}class Vz extends Ky{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ad(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Fo(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return go()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Yz(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=ad(i.getTileSize(e),this.tmpSize);return s==1?a:LZ(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Tne(i,e,r)),gte(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Kne extends hp{constructor(e,t){super(e),this.tile=t}}function Hz(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,a=e.height,o=t.length,d=t[0].byteLength;if(i){const S=new Array(o);for(let k=0;k<o;++k)S[k]=new ImageData(new Uint8ClampedArray(t[k]),s,a);return n(S,r).data.buffer}const g=new Uint8ClampedArray(d),b=new Array(o),E=new Array(o);for(let S=0;S<o;++S)b[S]=new Uint8ClampedArray(t[S]),E[S]=[0,0,0,0];for(let S=0;S<d;S+=4){for(let k=0;k<o;++k){const U=b[k];E[k][0]=U[S],E[k][1]=U[S+1],E[k][2]=U[S+2],E[k][3]=U[S+3]}const O=n(E,r);g[S]=O[0],g[S+1]=O[1],g[S+2]=O[2],g[S+3]=O[3]}return g.buffer}}function Dne(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+Hz.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function Lne(n,e){const t=Hz(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class Fne extends D_{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=Dne(e,this.onWorkerMessage_.bind(this,i));else r[0]=Lne(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(d){return d.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const a=e.inputs[0].data.length,o=4*Math.ceil(a/4/s);for(let d=0;d<s;++d){const g=d*o,b=[];for(let E=0,S=i.length;E<S;++E)b.push(i[E].slice(g,g+o));this.workers_[d].postMessage({buffers:b,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},b)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const a=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const d=this.dataLookup_[o].buffer,g=o*a;r.set(new Uint8ClampedArray(d),g),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const eT={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class tT extends hp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class Zz extends Wz{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=jne(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(io.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new kz(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:_h(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:zne(this.layers_),pixelRatio:1,pixelToCoordinateTransform:_h(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Fo(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let a=0,o=e.sources.length;a<o;++a){const d=e.sources[a],g=d instanceof Ky?d:d.getSource();if(!g)continue;const b=(s=g.getAttributions())==null?void 0:s(r);typeof b=="string"?i.push(b):b!==void 0&&i.push(...b)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Fne({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=If(e);i.size[0]=Math.ceil(ps(e)/t),i.size[1]=Math.ceil(Hl(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const a=i.viewState;return a.center=s,a.projection=r,a.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const a=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==a||!Wm(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const a=Une(this.layers_[s],e);if(a)r[s]=a;else return}const i={};this.dispatchEvent(new tT(eT.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,a=e.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!Wm(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const d=Math.round(ps(s)/a),g=Math.round(Hl(s)/a);o=Jl(d,g),this.renderedImageCanvas_=new Pee(s,a,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new tT(eT.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Zz.prototype.dispose;let tg=null;function Une(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let a;if(s instanceof HTMLCanvasElement)a=s;else{if(s&&(a=s.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===r&&a.height===i)return a.getContext("2d").getImageData(0,0,r,i)}if(!tg)tg=Jl(r,i,void 0,{willReadFrequently:!0});else{const o=tg.canvas;o.width!==r||o.height!==i?tg=Jl(r,i,void 0,{willReadFrequently:!0}):tg.clearRect(0,0,r,i)}return tg.drawImage(a,0,0,r,i),tg.getImageData(0,0,r,i)}function zne(n){return n.map(function(e){return e.getLayerState()})}function jne(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=Nne(n[r]);return t}function Nne(n){let e;return n instanceof Ky?n instanceof Vz?e=new qz({source:n}):n instanceof Wz&&(e=new jz({source:n})):e=n,e}const Q4={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Gne=/\{z\}/g,Wne=/\{x\}/g,Qne=/\{y\}/g,qne=/\{-y\}/g;function Yne(n,e,t,r,i){return n.replace(Gne,e.toString()).replace(Wne,t.toString()).replace(Qne,r.toString()).replace(qne,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function $ne(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function Vne(n,e){return function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return Yne(n,a,t[1],t[2],s)}}function Xz(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Vne(n[i],e);return Hne(r)}function Hne(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=pte(e),s=wg(i,n.length);return n[s](e,t,r)}}class Tx extends Vz{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Tx.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Fo(t),i=t.getState();let s;i==Cr.LOADING?(this.tileLoadingKeys_[r]=!0,s=Q4.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Cr.ERROR?Q4.TILELOADERROR:i==Cr.LOADED?Q4.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Kne(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=$ne(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Xz(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class Zne extends Tx{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Xne,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Iz,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Mg(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Mg(t,e)))return this.tileGrid;const r=Fo(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Yz(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],d=this.getTileCoordForTileUrlFunction(o,s),g=d?this.tileUrlFunction(d,i,s):void 0,b=new this.tileClass(o,g!==void 0?Cr.IDLE:Cr.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=a,b.addEventListener(io.CHANGE,this.handleTileChange.bind(this)),b}getTile(e,t,r,i,s){const a=this.getProjection();if(!a||!s||Mg(a,s))return this.getTileInternal(e,t,r,i,a||s);const o=[e,t,r],d=this.getKey(),g=this.getTileGridForProjection(a),b=this.getTileGridForProjection(s),E=this.getTileCoordForTileUrlFunction(o,s),S=new Z6(a,g,s,b,o,E,this.getTilePixelRatio(i),this.getGutter(),(O,k,U,z)=>this.getTileInternal(O,k,U,z,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return S.key=d,S}getTileInternal(e,t,r,i,s){const a=this.getKey();return this.createTile_(e,t,r,i,s,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Ma(e);if(r){const i=Fo(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function Xne(n,e){n.getImage().src=e}function Jne(n,e,t,r){const i=document.createElement("script"),s="olc_"+Fo(e);function a(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){a(),t&&t()},1e4);window[s]=function(d){clearTimeout(o),a(),e(d)},document.head.appendChild(i)}class Jz extends Zne{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Ma("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)Jne(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Ma("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const g=G_(t,r);i=rX(e.bounds,g)}const s=kx(r),a=e.minzoom||0,o=e.maxzoom||22,d=jO({extent:s,maxZoom:o,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=d,this.tileUrlFunction=Xz(e.tiles,d),e.attribution&&!this.getAttributions()){const g=i!==void 0?i:s;this.setAttributions(function(b){return ku(g,b.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const ere={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},nT={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class tre extends Qz{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=_h(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,a,o,d){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,a,o,d)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,d=i.viewHints;return(!(d[Vl.ANIMATING]||d[Vl.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),a=i.getRenderOrder()||null,o=e.wantedResolution,d=e.getReplayState(i);if(!d.dirty&&d.renderedResolution===o&&d.renderedRevision==s&&d.renderedRenderOrder==a)return;const g=i.getSource(),b=!!i.getDeclutter(),E=g.getTileGrid(),O=g.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),k=g.getSourceTiles(t,r,e),U=Fo(i);delete e.hitDetectionImageData[U],e.executorGroups[U]=[],d.dirty=!1;for(let z=0,q=k.length;z<q;++z){const Q=k[z];if(Q.getState()!=Cr.LOADED)continue;const re=Q.tileCoord,X=E.getTileCoordExtent(re),Y=Qd(O,X),J=B0(Y,i.getRenderBuffer()*o,this.tempExtent),N=Wm(X,Y)?null:J,ie=new Cz(0,Y,o,t),he=j6(o,t),de=function(pe,it){let We;const $e=pe.getStyleFunction()||i.getStyleFunction();if($e&&(We=$e(pe,o)),We){const ht=this.renderFeature(pe,he,We,ie,b,it);d.dirty=d.dirty||ht}},we=Q.getFeatures();a&&a!==d.renderedRenderOrder&&we.sort(a);for(let pe=0,it=we.length;pe<it;++pe){const We=we[pe];(!N||ku(N,We.getGeometry().getExtent()))&&de.call(this,We,pe)}const fe=ie.finish(),be=i.getRenderMode()!=="vector"&&b&&k.length===1?null:Y,Pe=new xz(be,o,t,g.getOverlaps(),fe,i.getRenderBuffer(),!0);e.executorGroups[U].push(Pe)}d.renderedRevision=s,d.renderedRenderOrder=a,d.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){const a=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const d=this.getLayer(),b=d.getSource().getTileGridForProjection(t.viewState.projection),E=B6([e]);B0(E,a*r,E);const S={},O=function(re,X,Y){let J=re.getId();J===void 0&&(J=Fo(re));const N=S[J];if(N){if(N!==!0&&Y<N.distanceSq){if(Y===0)return S[J]=!0,s.splice(s.lastIndexOf(N),1),i(re,d,X);N.geometry=X,N.distanceSq=Y}}else{if(Y===0)return S[J]=!0,i(re,d,X);s.push(S[J]={feature:re,layer:d,geometry:X,distanceSq:Y,callback:i})}},k=this.renderedTiles,U=Fo(d),z=d.getDeclutter(),q=z?t.declutter[z].all().map(re=>re.value):null;let Q;e:for(let re=0,X=k.length;re<X;++re){const Y=k[re],J=b.getTileCoordExtent(Y.wrappedTileCoord);if(!ku(J,E))continue;const N=Y.executorGroups[U];for(let ie=0,he=N.length;ie<he;++ie)if(Q=N[ie].forEachFeatureAtCoordinate(e,a,o,r,O,q),Q)break e}return Q}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),a=this.renderedProjection,o=a.getExtent(),d=this.renderedResolution,g=s.getTileGridForProjection(a),b=yA(this.renderedPixelToCoordinateTransform_,e.slice()),E=g.getTileCoordForCoordAndResolution(b,d).toString(),S=this.renderedTiles.find(re=>re.tileCoord.toString()===E&&re.getState()===Cr.LOADED);if(!S||S.loadingSourceTiles>0){t([]);return}s.getWrapX()&&a.canWrapX()&&!lp(o,g.getTileCoordExtent(S.tileCoord))&&sO(b,a);const O=Fo(i),k=g.getTileCoordExtent(S.wrappedTileCoord),U=Ap(k),z=[(b[0]-U[0])/d,(U[1]-b[1])/d],q=S.getSourceTiles().reduce((re,X)=>re.concat(X.getFeatures()),[]);let Q=S.hitDetectionImageData[O];if(!Q){const re=ad(g.getTileSize(g.getZForResolution(d,s.zDirection))),X=this.renderedRotation_,Y=[this.getRenderTransform(g.getTileCoordCenter(S.wrappedTileCoord),d,0,$h,re[0]*$h,re[1]*$h,0)];Q=wz(re,Y,q,i.getStyleFunction(),g.getTileCoordExtent(S.wrappedTileCoord),S.getReplayState(i).renderedResolution,X),S.hitDetectionImageData[O]=Q}t(Mz(z,q,Q))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),a=s.getZForResolution(this.renderedResolution),o={};return r.forEach(d=>{if(d.tileCoord[0]!==a||d.getState()!==Cr.LOADED)return;const g=d.getSourceTiles();for(let b=0,E=g.length;b<E;++b){const S=g[b],O=S.getKey();if(O in o)continue;o[O]=!0;const k=S.tileCoord;if(ku(e,s.getTileCoordExtent(k))){const U=S.getFeatures();if(U)for(let z=0,q=U.length;z<q;++z){const Q=U[z],re=Q.getGeometry();ku(e,re.getExtent())&&t.push(Q)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,a=!(s[Vl.ANIMATING]||s[Vl.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],d=this.getLayer().getDeclutter(),g=d?e.declutter[d]:void 0,b=Fo(this.getLayer()),E=this.renderedTiles;for(let S=0,O=E.length;S<O;++S){const k=E[S],U=k.executorGroups[b];if(U)for(let z=U.length-1;z>=0;--z)U[z].execute(this.context,o,this.getTileRenderTransform(k,e),e.viewState.rotation,a,h2,g)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Fo(this.getLayer()),i=t.reduce((d,g,b)=>(g.executorGroups[r].forEach(E=>d.push({executorGroup:E,index:b})),d),[]),s=i.map(({executorGroup:d})=>d.getDeferredZIndexContexts()),a={};for(let d=0,g=i.length;d<g;++d){const b=i[d].executorGroup.getDeferredZIndexContexts();for(const E in b)a[E]=!0}Object.keys(a).map(Number).sort(Fm).forEach(d=>{s.forEach((g,b)=>{g[d]&&(g[d].forEach(E=>{const{executorGroup:S,index:O}=i[b],k=S.getRenderedContext(),U=k.globalAlpha;k.globalAlpha=this.renderedOpacity_;const z=this.tileClipContexts_[O];z&&z.draw(k),E.draw(k),z&&k.restore(),k.globalAlpha=U,E.clear()}),g[d].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,a=i.resolution,o=i.rotation,d=t.size,g=Math.round(d[0]*r),b=Math.round(d[1]*r),S=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),O=e.tileCoord,k=S.getTileCoordExtent(e.wrappedTileCoord),U=S.getTileCoordExtent(O,this.tempExtent)[0]-k[0];return JB(M4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,a,o,r,g,b,U))}postRender(e,t){var Y;const r=t.viewHints,i=!(r[Vl.ANIMATING]||r[Vl.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),a=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const d=s.getDeclutter(),g=d?nT[a].filter(J=>!h2.includes(J)):nT[a],b=t.viewState,E=b.rotation,S=s.getSource(),k=S.getTileGridForProjection(b.projection).getZForResolution(b.resolution,S.zDirection),U=this.renderedTiles,z=[],q=[],Q=[],re=Fo(s);let X=!0;for(let J=U.length-1;J>=0;--J){const N=U[J];X=X&&!N.getReplayState(s).dirty;const ie=N.executorGroups[re].filter(pe=>pe.hasExecutors(g));if(ie.length===0)continue;const he=this.getTileRenderTransform(N,t),de=N.tileCoord[0];let we=!1;const fe=ie[0].getClipCoords(he);let be=e,Pe;if(fe){Pe=new OO,be=Pe.getContext();for(let pe=0,it=z.length;pe<it;++pe)if(k!==de&&de<q[pe]){const We=z[pe];ku([fe[0],fe[3],fe[4],fe[7]],[We[0],We[3],We[4],We[7]])&&(we||(be.save(),we=!0),be.beginPath(),be.moveTo(fe[0],fe[1]),be.lineTo(fe[2],fe[3]),be.lineTo(fe[4],fe[5]),be.lineTo(fe[6],fe[7]),be.moveTo(We[6],We[7]),be.lineTo(We[4],We[5]),be.lineTo(We[2],We[3]),be.lineTo(We[0],We[1]),be.clip())}z.push(fe),q.push(de)}for(let pe=0,it=ie.length;pe<it;++pe)ie[pe].execute(e,[e.canvas.width,e.canvas.height],he,E,i,g,(Y=t.declutter)==null?void 0:Y[d]);we&&(be===e?be.restore():Q[J]=Pe)}e.globalAlpha=o,this.ready=X,this.tileClipContexts_=Q,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,a){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let d=0,g=r.length;d<g;++d)o=f2(i,e,r[d],t,this.boundHandleStyleImageChange_,void 0,s,a)||o;else o=f2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,a);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),a=e.executorGroups[Fo(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,d=o[0],g=r.getSource();let b=t.pixelRatio;const S=t.viewState.projection,O=g.getTileGridForProjection(S),k=O.getResolution(e.tileCoord[0]),U=t.pixelRatio/e.wantedResolution*k,z=O.getResolution(d),q=e.getContext();b=Math.round(Math.max(b,U/b));const Q=g.getTilePixelSize(d,b,S);q.canvas.width=Q[0],q.canvas.height=Q[1];const re=b/U;if(re!==1){const N=ik(this.tmpTransform_);M4(N,re,re),q.setTransform.apply(q,N)}const X=O.getTileCoordExtent(o,this.tempExtent),Y=U/z,J=ik(this.tmpTransform_);M4(J,Y,-Y),$Z(J,-X[0],-X[3]);for(let N=0,ie=a.length;N<ie;++N)a[N].execute(q,[q.canvas.width*re,q.canvas.height*re],J,0,!0,ere[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class Gv extends BO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";ra(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new tre(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(w0.PRELOAD)}getUseInterimTilesOnError(){return this.get(w0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(w0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(w0.USE_INTERIM_TILES_ON_ERROR,e)}}class ej extends Tx{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||kx(t),i=e.tileGrid||jO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:tj,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Fz,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Cr.IDLE){r.setState(Cr.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),a=s.getTileCoordExtent(i),o=i[0],d=s.getResolution(o);B0(a,-d,a);const g=this.tileGrid,b=g.getExtent();b&&Qd(a,b,a);const E=g.getZForResolution(d,this.zDirection);g.forEachTileCoord(a,E,S=>{const O=this.tileUrlFunction(S,e,t);this.sourceTiles_[O]||(this.sourceTiles_[O]=new this.tileClass(S,O?Cr.IDLE:Cr.EMPTY,O,this.format_,this.tileLoadFunction));const k=this.sourceTiles_[O];r.sourceTiles.push(k),this.tileKeysBySourceTileUrl_[O]||(this.tileKeysBySourceTileUrl_[O]=[]),this.tileKeysBySourceTileUrl_[O].push(r.getKey());const U=k.getState();if(U<Cr.LOADED){const z=q=>{this.handleTileChange(q);const Q=k.getState();if(Q===Cr.LOADED||Q===Cr.ERROR){const re=k.getKey();re in r.errorTileKeys?k.getState()===Cr.LOADED&&delete r.errorTileKeys[re]:r.loadingSourceTiles--,Q===Cr.ERROR?r.errorTileKeys[re]=!0:k.removeEventListener(io.CHANGE,z),r.loadingSourceTiles===0&&r.setState(T0(r.errorTileKeys)?Cr.LOADED:Cr.ERROR)}};k.addEventListener(io.CHANGE,z),r.loadingSourceTiles++}U===Cr.IDLE&&(k.extent=g.getTileCoordExtent(S),k.projection=t,k.resolution=g.getResolution(S[0]),k.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(S=>S.getState()===Cr.ERROR)?Cr.ERROR:Cr.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let r=0,i=t.length;r<i;++r){const s=t[r].getTileUrl(),a=this.getKey();if(!this.tileKeysBySourceTileUrl_[s])return;const o=this.tileKeysBySourceTileUrl_[s][a];o!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(o,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,r,i,s){const a=[e,t,r];let o=this.getTileCoordForTileUrlFunction(a,s);const d=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(s);if(o&&d){const S=g.getTileCoordExtent(o);B0(S,-g.getResolution(e),S),ku(d,S)||(o=null)}let b=!0;if(o!==null){const S=this.tileGrid,O=g.getResolution(e),k=S.getZForResolution(O,1),U=g.getTileCoordExtent(o);B0(U,-O,U),S.forEachTileCoord(U,k,z=>{b=b&&!this.tileUrlFunction(z,i,s)})}const E=new yte(a,b?Cr.EMPTY:Cr.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return E.key=this.getKey(),E}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.tileGrid,s=i.getResolutions().slice(),a=s.map(function(g,b){return i.getOrigin(b)}),o=s.map(function(g,b){return i.getTileSize(b)}),d=uz+1;for(let g=s.length;g<d;++g)s.push(s[g-1]/2),a.push(a[g-1]),o.push(o[g-1]);r=new Ix({extent:i.getExtent(),origins:a,resolutions:s,tileSizes:o}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=ad(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function tj(n,e){n.setLoader(function(t,r,i){Oz(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function nj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nre={},rj,rT={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Wv(n){return n=Math.round(n),n<0?0:n>255?255:n}function iT(n){return n<0?0:n>1?1:n}function q4(n){return n[n.length-1]==="%"?Wv(parseFloat(n)/100*255):Wv(parseInt(n))}function JC(n){return n[n.length-1]==="%"?iT(parseFloat(n)/100):iT(parseFloat(n))}function Y4(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function rre(n){var e=n.replace(/ /g,"").toLowerCase();if(e in rT)return rT[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var r=e.indexOf("("),i=e.indexOf(")");if(r!==-1&&i+1===e.length){var s=e.substr(0,r),a=e.substr(r+1,i-(r+1)).split(","),o=1;switch(s){case"rgba":if(a.length!==4)return null;o=JC(a.pop());case"rgb":return a.length!==3?null:[q4(a[0]),q4(a[1]),q4(a[2]),o];case"hsla":if(a.length!==4)return null;o=JC(a.pop());case"hsl":if(a.length!==3)return null;var d=(parseFloat(a[0])%360+360)%360/360,g=JC(a[1]),b=JC(a[2]),E=b<=.5?b*(g+1):b+g-b*g,S=b*2-E;return[Wv(Y4(S,E,d+1/3)*255),Wv(Y4(S,E,d)*255),Wv(Y4(S,E,d-1/3)*255),o];default:return null}}return null}try{rj=nre.parseCSSColor=rre}catch{}class Ch{constructor(e,t,r,i=1){this.r=e,this.g=t,this.b=r,this.a=i}static parse(e){if(!e)return;if(e instanceof Ch)return e;if(typeof e!="string")return;const t=rj(e);if(t)return new Ch(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,r,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(r)},${i})`}toArray(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e*255/i,t*255/i,r*255/i,i]}toArray01(){const{r:e,g:t,b:r,a:i}=this;return i===0?[0,0,0,0]:[e/i,t/i,r/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:r,a:i}=this;return[e,t,r,i]}}Ch.black=new Ch(0,0,0,1);Ch.white=new Ch(1,1,1,1);Ch.transparent=new Ch(0,0,0,0);Ch.red=new Ch(1,0,0,1);Ch.blue=new Ch(0,0,1,1);var Xh=Ch;function v_(n){return typeof n=="object"?["literal",n]:n}function ire(n,e){let t=n.stops;if(!t)return ore(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(a=>!i&&e.tokens&&typeof a[1]=="string"?[a[0],ure(a[1])]:[a[0],v_(a[1])]),r?sre(n,e,t):s?lre(n,e,t):X6(n,e,t)}function ore(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,v_(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function NO(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function sre(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const d=t[o],g=d[0].zoom;r[g]===void 0&&(r[g]={zoom:g,type:n.type,property:n.property,default:n.default},i[g]=[],s.push(g)),i[g].push([d[0].value,d[1]])}if(WO({},e)==="exponential"){const o=[NO(n),["linear"],["zoom"]];for(const d of s){const g=X6(r[d],e,i[d]);oy(o,d,g,!1)}return o}else{const o=["step",["zoom"]];for(const d of s){const g=X6(r[d],e,i[d]);oy(o,d,g,!0)}return GO(o),o}}function are(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function oT(n,e){const t=v_(are(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function X6(n,e,t){const r=WO(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const a of t)s.push(["==",i,a[0]],a[1]);return s.push(oT(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const a of t)oy(s,a[0],a[1],!1);return s.push(oT(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const a of t)oy(s,a[0],a[1],!0);return GO(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,v_(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,a=[NO(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)oy(a,o[0],o[1],!1);return n.default===void 0?a:["case",["==",["typeof",i],"number"],a,v_(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function lre(n,e,t,r=["zoom"]){const i=WO(n,e);let s,a=!1;if(i==="interval")s=["step",r],a=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[NO(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)oy(s,o[0],o[1],a);return GO(s),s}function GO(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function oy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function WO(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function ure(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}class Are extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var Wp=Are;class QO{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new QO(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var cre=QO;const Px={kind:"null"},Tr={kind:"number"},as={kind:"string"},Qo={kind:"boolean"},jm={kind:"color"},sy={kind:"object"},Yo={kind:"value"},dre={kind:"error"},Rx={kind:"collator"},Kx={kind:"formatted"},Z_={kind:"resolvedImage"};function wf(n,e){return{kind:"array",itemType:n,N:e}}function Xl(n){if(n.kind==="array"){const e=Xl(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const hre=[Px,Tr,as,Qo,jm,Kx,sy,wf(Yo),Z_];function __(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!__(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of hre)if(!__(t,e))return null}}return`Expected ${Xl(n)} but found ${Xl(e)} instead.`}function qO(n,e){return e.some(t=>t.kind===n.kind)}function C_(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}class YO{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class J6{constructor(e,t,r,i,s){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s}}class Xp{constructor(e){this.sections=e}static fromString(e){return new Xp([new J6(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Xp?e:Xp.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const r={};t.fontStack&&(r["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(r["font-scale"]=t.scale),t.textColor&&(r["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(r)}return e}}class D0{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new D0({name:e,available:!1}):null}serialize(){return["image",this.name]}}function ij(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function y2(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof Xh)return!0;if(n instanceof YO)return!0;if(n instanceof Xp)return!0;if(n instanceof D0)return!0;if(Array.isArray(n)){for(const e of n)if(!y2(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!y2(n[e]))return!1;return!0}else return!1}function GA(n){if(n===null)return Px;if(typeof n=="string")return as;if(typeof n=="boolean")return Qo;if(typeof n=="number")return Tr;if(n instanceof Xh)return jm;if(n instanceof YO)return Rx;if(n instanceof Xp)return Kx;if(n instanceof D0)return Z_;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=GA(r);if(!t)t=i;else{if(t===i)continue;t=Yo;break}}return wf(t||Yo,e)}else return sy}function Qv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Xh||n instanceof Xp||n instanceof D0?n.toString():JSON.stringify(n)}class $O{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!y2(e[1]))return t.error("invalid value");const r=e[1];let i=GA(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new $O(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Xh?["rgba"].concat(this.value.toArray()):this.value instanceof Xp?this.value.serialize():this.value}}var v2=$O;class fre{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var Kc=fre;const $4={string:as,number:Tr,boolean:Qo,object:sy};class VO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const g=e[1];if(typeof g!="string"||!(g in $4)||g==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=$4[g],r++}else o=Yo;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);d=e[2],r++}i=wf(o,d)}else i=$4[s];const a=[];for(;r<e.length;r++){const o=t.parse(e[r],r,Yo);if(!o)return null;a.push(o)}return new VO(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(__(this.type,GA(r))){if(t===this.args.length-1)throw new Kc(`Expected value to be of type ${Xl(this.type)}, but found ${Xl(GA(r))} instead.`)}else return r}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const r=e.itemType;if(r.kind==="string"||r.kind==="number"||r.kind==="boolean"){t.push(r.kind);const i=e.N;(typeof i=="number"||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map(r=>r.serialize()))}}var Km=VO;class Dx{constructor(e){this.type=Kx,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let a=1;a<=e.length-1;++a){const o=e[a];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let d=null;if(o["font-scale"]&&(d=t.parse(o["font-scale"],1,Tr),!d))return null;let g=null;if(o["text-font"]&&(g=t.parse(o["text-font"],1,wf(as)),!g))return null;let b=null;if(o["text-color"]&&(b=t.parse(o["text-color"],1,jm),!b))return null;const E=i[i.length-1];E.scale=d,E.font=g,E.textColor=b}else{const d=t.parse(e[a],1,Yo);if(!d)return null;const g=d.type.kind;if(g!=="string"&&g!=="value"&&g!=="null"&&g!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:d,scale:null,font:null,textColor:null})}}return new Dx(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return GA(i)===Z_?new J6("",i,null,null,null):new J6(Qv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)};return new Xp(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const r={};t.scale&&(r["font-scale"]=t.scale.serialize()),t.font&&(r["text-font"]=t.font.serialize()),t.textColor&&(r["text-color"]=t.textColor.serialize()),e.push(r)}return e}}class Lx{constructor(e){this.type=Z_,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,as);return r?new Lx(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=D0.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const pre={"to-boolean":Qo,"to-color":jm,"to-number":Tr,"to-string":as};class HO{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=pre[r],s=[];for(let a=1;a<e.length;a++){const o=t.parse(e[a],a,Yo);if(!o)return null;s.push(o)}return new HO(i,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Xh)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=ij(t[0],t[1],t[2],t[3]),!r))return new Xh(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Kc(r||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new Kc(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Xp.fromString(Qv(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?D0.fromString(Qv(this.args[0].evaluate(e))):Qv(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Dx([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Lx(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var q1=HO;const mre=["Unknown","Point","LineString","Polygon"];class gre{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?mre[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:r,y:i}=this.featureTileCoord,s=r*t-e[0],a=i*t-e[1],o=this.featureDistanceData.bearing[0],d=this.featureDistanceData.bearing[1];return o*s+d*a}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Xh.parse(e)),t}}var oj=gre;class Y1{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const r=e[0],i=Y1.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([g])=>!Array.isArray(g)||g.length===e.length-1);let d=null;for(const[g,b]of o){d=new Aj(t.registry,t.path,null,t.scope);const E=[];let S=!1;for(let O=1;O<e.length;O++){const k=e[O],U=Array.isArray(g)?g[O-1]:g.type,z=d.parse(k,1+E.length,U);if(!z){S=!0;break}E.push(z)}if(!S){if(Array.isArray(g)&&g.length!==E.length){d.error(`Expected ${g.length} arguments, but found ${E.length} instead.`);continue}for(let O=0;O<E.length;O++){const k=Array.isArray(g)?g[O]:g.type,U=E[O];d.concat(O+1).checkSubtype(k,U.type)}if(d.errors.length===0)return new Y1(r,s,b,E)}}if(o.length===1)t.errors.push(...d.errors);else{const b=(o.length?o:a).map(([S])=>yre(S)).join(" | "),E=[];for(let S=1;S<e.length;S++){const O=t.parse(e[S],1+E.length);if(!O)return null;E.push(Xl(O.type))}t.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(e,t){Y1.definitions=t;for(const r in t)e[r]=Y1}}function yre(n){return Array.isArray(n)?`(${n.map(Xl).join(", ")})`:`(${Xl(n.type)}...)`}var Ly=Y1;class Fx{constructor(e,t,r){this.type=Rx,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Qo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Qo);if(!s)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,as),!a)?null:new Fx(i,s,a)}evaluate(e){return new YO(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const I0=8192;function ZO(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function vre(n){return(180+n)/360}function _re(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function _2(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function Cre(n,e){const t=vre(n[0]),r=_re(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*I0),Math.round(r*i*I0)]}function bre(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],a=n[1]-t[1];return r*a-s*i===0&&r*s<=0&&i*a<=0}function xre(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function XO(n,e){let t=!1;for(let r=0,i=e.length;r<i;r++){const s=e[r];for(let a=0,o=s.length;a<o-1;a++){if(bre(n,s[a],s[a+1]))return!1;xre(n,s[a],s[a+1])&&(t=!t)}}return t}function wre(n,e){for(let t=0;t<e.length;t++)if(XO(n,e[t]))return!0;return!1}function Mre(n,e){return n[0]*e[1]-n[1]*e[0]}function sT(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],a=e[0]-t[0],o=e[1]-t[1],d=r[0]-t[0],g=r[1]-t[1],b=i*g-d*s,E=a*g-d*o;return b>0&&E<0||b<0&&E>0}function Sre(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return Mre(s,i)===0?!1:!!(sT(n,e,t,r)&&sT(t,r,n,e))}function Ere(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(Sre(n,e,r[i],r[i+1]))return!0;return!1}function sj(n,e){for(let t=0;t<n.length;++t)if(!XO(n[t],e))return!1;for(let t=0;t<n.length-1;++t)if(Ere(n[t],n[t+1],e))return!1;return!0}function Bre(n,e){for(let t=0;t<e.length;t++)if(sj(n,e[t]))return!0;return!1}function JO(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let a=0;a<n[i].length;a++){const o=Cre(n[i][a],t);ZO(e,o),s.push(o)}r.push(s)}return r}function aj(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=JO(n[i],e,t);r.push(s)}return r}function lj(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}ZO(e,n)}function Ore(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function aT(n,e,t,r){const i=Math.pow(2,r.z)*I0,s=[r.x*I0,r.y*I0],a=[];if(!n)return a;for(const o of n)for(const d of o){const g=[d.x+s[0],d.y+s[1]];lj(g,e,t,i),a.push(g)}return a}function lT(n,e,t,r){const i=Math.pow(2,r.z)*I0,s=[r.x*I0,r.y*I0],a=[];if(!n)return a;for(const o of n){const d=[];for(const g of o){const b=[g.x+s[0],g.y+s[1]];ZO(e,b),d.push(b)}a.push(d)}if(e[2]-e[0]<=i/2){Ore(e);for(const o of a)for(const d of o)lj(d,e,t,i)}return a}function Ire(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=JO(e.coordinates,r,i),a=aT(n.geometry(),t,r,i);if(!_2(t,r))return!1;for(const o of a)if(!XO(o,s))return!1}if(e.type==="MultiPolygon"){const s=aj(e.coordinates,r,i),a=aT(n.geometry(),t,r,i);if(!_2(t,r))return!1;for(const o of a)if(!wre(o,s))return!1}return!0}function kre(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(!i)return!1;if(e.type==="Polygon"){const s=JO(e.coordinates,r,i),a=lT(n.geometry(),t,r,i);if(!_2(t,r))return!1;for(const o of a)if(!sj(o,s))return!1}if(e.type==="MultiPolygon"){const s=aj(e.coordinates,r,i),a=lT(n.geometry(),t,r,i);if(!_2(t,r))return!1;for(const o of a)if(!Bre(o,s))return!1}return!0}class qv{constructor(e,t){this.type=Qo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(y2(e[1])){const r=e[1];if(r.type==="FeatureCollection")for(let i=0;i<r.features.length;++i){const s=r.features[i].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new qv(r,r.features[i].geometry)}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new qv(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new qv(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Ire(e,this.geometries);if(e.geometryType()==="LineString")return kre(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var eI=qv;function Ux(n){if(n instanceof Ly){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof eI)return!1;let e=!0;return n.eachChild(t=>{e&&!Ux(t)&&(e=!1)}),e}function tI(n){if(n instanceof Ly&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!tI(t)&&(e=!1)}),e}function nI(n,e){if(n instanceof Ly&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!nI(r,e)&&(t=!1)}),t}class rI{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new rI(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var uj=rI;class iI{constructor(e,t=[],r,i=new cre,s=[]){this.registry=e,this.path=t,this.key=t.map(a=>`[${a}]`).join(""),this.scope=i,this.errors=s,this.expectedType=r}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,a){return a==="assert"?new Km(s,[i]):a==="coerce"?new q1(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const o=this.expectedType,d=a.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&d.kind==="value")a=r(a,o,t.typeAnnotation||"assert");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(d.kind==="value"||d.kind==="string"))a=r(a,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,d))return null}if(!(a instanceof v2)&&a.type.kind!=="resolvedImage"&&eB(a)){const o=new oj;try{a=new v2(a.type,a.evaluate(o))}catch(d){return this.error(d.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new iI(this.registry,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Wp(r,e))}checkSubtype(e,t){const r=__(e,t);return r&&this.error(r),r}}var Aj=iI;function eB(n){if(n instanceof uj)return eB(n.boundExpression);if(n instanceof Ly&&n.name==="error")return!1;if(n instanceof Fx)return!1;if(n instanceof eI)return!1;const e=n instanceof q1||n instanceof Km;let t=!0;return n.eachChild(r=>{e?t=t&&eB(r):t=t&&r instanceof v2}),t?Ux(n)&&nI(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function cj(n,e){const t=n.length-1;let r=0,i=t,s=0,a,o;for(;r<=i;)if(s=Math.floor((r+i)/2),a=n[s],o=n[s+1],a<=e){if(s===t||e<o)return s;r=s+1}else if(a>e)i=s-1;else throw new Kc("Input is not a number.");return 0}class oI{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Tr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let a=1;a<e.length;a+=2){const o=a===1?-1/0:e[a],d=e[a+1],g=a,b=a+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const E=t.parse(d,b,s);if(!E)return null;s=s||E.type,i.push([o,E])}return new oI(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=cj(t,i);return r[a].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var dj=oI,Tre=Fy;function Fy(n,e,t,r){this.cx=3*n,this.bx=3*(t-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=t,this.p2y=r}Fy.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};Fy.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};Fy.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};Fy.prototype.solveCurveX=function(n,e){typeof e>"u"&&(e=1e-6);var t,r,i,s,a;for(i=n,a=0;a<8;a++){if(s=this.sampleCurveX(i)-n,Math.abs(s)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i=i-s/o}if(t=0,r=1,i=n,i<t)return t;if(i>r)return r;for(;t<r;){if(s=this.sampleCurveX(i),Math.abs(s-n)<e)return i;n>s?t=i:r=i,i=(r-t)*.5+t}return i};Fy.prototype.solve=function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))};var Pre=nj(Tre);function Vh(n,e,t){return n*(1-t)+e*t}function Rre(n,e,t){return new Xh(Vh(n.r,e.r,t),Vh(n.g,e.g,t),Vh(n.b,e.b,t),Vh(n.a,e.a,t))}function Kre(n,e,t){return n.map((r,i)=>Vh(r,e[i],t))}var Dre=Object.freeze({__proto__:null,number:Vh,color:Rre,array:Kre});const hj=.95047,fj=1,pj=1.08883,mj=4/29,ay=6/29,gj=3*ay*ay,Lre=ay*ay*ay,Fre=Math.PI/180,Ure=180/Math.PI;function V4(n){return n>Lre?Math.pow(n,1/3):n/gj+mj}function H4(n){return n>ay?n*n*n:gj*(n-mj)}function Z4(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function X4(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function yj(n){const e=X4(n.r),t=X4(n.g),r=X4(n.b),i=V4((.4124564*e+.3575761*t+.1804375*r)/hj),s=V4((.2126729*e+.7151522*t+.072175*r)/fj),a=V4((.0193339*e+.119192*t+.9503041*r)/pj);return{l:116*s-16,a:500*(i-s),b:200*(s-a),alpha:n.a}}function vj(n){let e=(n.l+16)/116,t=isNaN(n.a)?e:e+n.a/500,r=isNaN(n.b)?e:e-n.b/200;return e=fj*H4(e),t=hj*H4(t),r=pj*H4(r),new Xh(Z4(3.2404542*t-1.5371385*e-.4985314*r),Z4(-.969266*t+1.8760108*e+.041556*r),Z4(.0556434*t-.2040259*e+1.0572252*r),n.alpha)}function zre(n,e,t){return{l:Vh(n.l,e.l,t),a:Vh(n.a,e.a,t),b:Vh(n.b,e.b,t),alpha:Vh(n.alpha,e.alpha,t)}}function jre(n){const{l:e,a:t,b:r}=yj(n),i=Math.atan2(r,t)*Ure;return{h:i<0?i+360:i,c:Math.sqrt(t*t+r*r),l:e,alpha:n.a}}function Nre(n){const e=n.h*Fre,t=n.c,r=n.l;return vj({l:r,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:n.alpha})}function Gre(n,e,t){const r=e-n;return n+t*(r>180||r<-180?r-360*Math.round(r/360):r)}function Wre(n,e,t){return{h:Gre(n.h,e.h,t),c:Vh(n.c,e.c,t),l:Vh(n.l,e.l,t),alpha:Vh(n.alpha,e.alpha,t)}}const eb={forward:yj,reverse:vj,interpolate:zre},tb={forward:jre,reverse:Nre,interpolate:Wre};class C2{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[a,o]of s)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=J4(t,e.base,r,i);else if(e.name==="linear")s=J4(t,1,r,i);else if(e.name==="cubic-bezier"){const a=e.controlPoints;s=new Pre(a[0],a[1],a[2],a[3]).solve(J4(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...a]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const g=i[1];if(typeof g!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:g}}else if(i[0]==="cubic-bezier"){const g=i.slice(1);if(g.length!==4||g.some(b=>typeof b!="number"||b<0||b>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:g}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Tr),!s)return null;const o=[];let d=null;r==="interpolate-hcl"||r==="interpolate-lab"?d=jm:t.expectedType&&t.expectedType.kind!=="value"&&(d=t.expectedType);for(let g=0;g<a.length;g+=2){const b=a[g],E=a[g+1],S=g+3,O=g+4;if(typeof b!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(o.length&&o[o.length-1][0]>=b)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',S);const k=t.parse(E,O,d);if(!k)return null;d=d||k.type,o.push([b,k])}return d.kind!=="number"&&d.kind!=="color"&&!(d.kind==="array"&&d.itemType.kind==="number"&&typeof d.N=="number")?t.error(`Type ${Xl(d)} is not interpolatable.`):new C2(d,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const a=cj(t,i),o=t[a],d=t[a+1],g=C2.interpolationFactor(this.interpolation,i,o,d),b=r[a].evaluate(e),E=r[a+1].evaluate(e);return this.operator==="interpolate"?Dre[this.type.kind.toLowerCase()](b,E,g):this.operator==="interpolate-hcl"?tb.reverse(tb.interpolate(tb.forward(b),tb.forward(E),g)):eb.reverse(eb.interpolate(eb.forward(b),eb.forward(E),g))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}function J4(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}var Sg=C2;class b2{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const d=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!d)return null;r=r||d.type,s.push(d)}return i&&s.some(o=>__(i,o.type))?new b2(Yo,s):new b2(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args){if(r++,t=s.evaluate(e),t&&t instanceof D0&&!t.available&&(i||(i=t),t=null,r===this.args.length))return i;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var _j=b2;class sI{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const a=e[s];if(typeof a!="string")return t.error(`Expected string, but found ${typeof a} instead.`,s);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([a,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new sI(r,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,r]of this.bindings)e.push(t,r.serialize());return e.push(this.result.serialize()),e}}var Cj=sI;class aI{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Tr),i=t.parse(e[2],2,wf(t.expectedType||Yo));if(!r||!i)return null;const s=i.type;return new aI(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Kc(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Kc(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Kc(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Qre=aI;class lI{constructor(e,t){this.type=Qo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Yo),i=t.parse(e[2],2,Yo);return!r||!i?null:qO(r.type,[Qo,as,Tr,Px,Yo])?new lI(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(r==null)return!1;if(!C_(t,["boolean","string","number","null"]))throw new Kc(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(GA(t))} instead.`);if(!C_(r,["string","array"]))throw new Kc(`Expected second argument to be of type array or string, but found ${Xl(GA(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var qre=lI;class x2{constructor(e,t,r){this.type=Tr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Yo),i=t.parse(e[2],2,Yo);if(!r||!i)return null;if(!qO(r.type,[Qo,as,Tr,Px,Yo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Tr);return s?new x2(r,i,s):null}else return new x2(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!C_(t,["boolean","string","number","null"]))throw new Kc(`Expected first argument to be of type boolean, string, number or null, but found ${Xl(GA(t))} instead.`);if(!C_(r,["string","array"]))throw new Kc(`Expected second argument to be of type array or string, but found ${Xl(GA(r))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return r.indexOf(t,i)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Yre=x2;class uI{constructor(e,t,r,i,s,a){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},a=[];for(let g=2;g<e.length-1;g+=2){let b=e[g];const E=e[g+1];Array.isArray(b)||(b=[b]);const S=t.concat(g);if(b.length===0)return S.error("Expected at least one branch label.");for(const k of b){if(typeof k!="number"&&typeof k!="string")return S.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return S.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return S.error("Numeric branch labels must be integer values.");if(!r)r=GA(k);else if(S.checkSubtype(r,GA(k)))return null;if(typeof s[String(k)]<"u")return S.error("Branch labels must be unique.");s[String(k)]=a.length}const O=t.parse(E,g,i);if(!O)return null;i=i||O.type,a.push(O)}const o=t.parse(e[1],1,Yo);if(!o)return null;const d=t.parse(e[e.length-1],e.length-1,i);return!d||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new uI(r,i,o,s,a,d)}evaluate(e){const t=this.input.evaluate(e);return(GA(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),r=[],i={};for(const a of t){const o=i[this.cases[a]];o===void 0?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[o][1].push(a)}const s=a=>this.inputType.kind==="number"?Number(a):a;for(const[a,o]of r)o.length===1?e.push(s(o[0])):e.push(o.map(s)),e.push(this.outputs[a].serialize());return e.push(this.otherwise.serialize()),e}}var $re=uI;class AI{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let a=1;a<e.length-1;a+=2){const o=t.parse(e[a],a,Qo);if(!o)return null;const d=t.parse(e[a+1],a+1,r);if(!d)return null;i.push([o,d]),r=r||d.type}const s=t.parse(e[e.length-1],e.length-1,r);return s?new AI(r,i,s):null}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Vre=AI;class w2{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Yo),i=t.parse(e[2],2,Tr);if(!r||!i)return null;if(!qO(r.type,[wf(Yo),as,Yo]))return t.error(`Expected first argument to be of type array or string, but found ${Xl(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Tr);return s?new w2(r.type,r,i,s):null}else return new w2(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!C_(t,["string","array"]))throw new Kc(`Expected first argument to be of type array or string, but found ${Xl(GA(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(r,i)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Hre=w2;function uT(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Zre(n,e,t){return e===t}function Xre(n,e,t){return e!==t}function Jre(n,e,t){return e<t}function eie(n,e,t){return e>t}function tie(n,e,t){return e<=t}function nie(n,e,t){return e>=t}function bj(n,e,t,r){return r.compare(e,t)===0}function rie(n,e,t,r){return!bj(n,e,t,r)}function iie(n,e,t,r){return r.compare(e,t)<0}function oie(n,e,t,r){return r.compare(e,t)>0}function sie(n,e,t,r){return r.compare(e,t)<=0}function aie(n,e,t,r){return r.compare(e,t)>=0}function Uy(n,e,t){const r=n!=="=="&&n!=="!=";return class xj{constructor(s,a,o){this.type=Qo,this.lhs=s,this.rhs=a,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||a.type.kind==="value"}static parse(s,a){if(s.length!==3&&s.length!==4)return a.error("Expected two or three arguments.");const o=s[0];let d=a.parse(s[1],1,Yo);if(!d)return null;if(!uT(o,d.type))return a.concat(1).error(`"${o}" comparisons are not supported for type '${Xl(d.type)}'.`);let g=a.parse(s[2],2,Yo);if(!g)return null;if(!uT(o,g.type))return a.concat(2).error(`"${o}" comparisons are not supported for type '${Xl(g.type)}'.`);if(d.type.kind!==g.type.kind&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error(`Cannot compare types '${Xl(d.type)}' and '${Xl(g.type)}'.`);r&&(d.type.kind==="value"&&g.type.kind!=="value"?d=new Km(g.type,[d]):d.type.kind!=="value"&&g.type.kind==="value"&&(g=new Km(d.type,[g])));let b=null;if(s.length===4){if(d.type.kind!=="string"&&g.type.kind!=="string"&&d.type.kind!=="value"&&g.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(b=a.parse(s[3],3,Rx),!b)return null}return new xj(d,g,b)}evaluate(s){const a=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const d=GA(a),g=GA(o);if(d.kind!==g.kind||!(d.kind==="string"||d.kind==="number"))throw new Kc(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${d.kind}, ${g.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const d=GA(a),g=GA(o);if(d.kind!=="string"||g.kind!=="string")return e(s,a,o)}return this.collator?t(s,a,o,this.collator.evaluate(s)):e(s,a,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[n];return this.eachChild(a=>{s.push(a.serialize())}),s}}}const lie=Uy("==",Zre,bj),uie=Uy("!=",Xre,rie),Aie=Uy("<",Jre,iie),cie=Uy(">",eie,oie),die=Uy("<=",tie,sie),hie=Uy(">=",nie,aie);class cI{constructor(e,t,r,i,s,a){this.type=as,this.number=e,this.locale=t,this.currency=r,this.unit=i,this.minFractionDigits=s,this.maxFractionDigits=a}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Tr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,as),!s))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,as),!a))return null;let o=null;if(i.unit&&(o=t.parse(i.unit,1,as),!o))return null;let d=null;if(i["min-fraction-digits"]&&(d=t.parse(i["min-fraction-digits"],1,Tr),!d))return null;let g=null;return i["max-fraction-digits"]&&(g=t.parse(i["max-fraction-digits"],1,Tr),!g)?null:new cI(r,s,a,o,d,g)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class dI{constructor(e){this.type=Tr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${Xl(r.type)} instead.`):new dI(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new Kc(`Expected value to be of type string or array, but found ${Xl(GA(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var fie=dI;const wj={"==":lie,"!=":uie,">":cie,"<":Aie,">=":hie,"<=":die,array:Km,at:Qre,boolean:Km,case:Vre,coalesce:_j,collator:Fx,format:Dx,image:Lx,in:qre,"index-of":Yre,interpolate:Sg,"interpolate-hcl":Sg,"interpolate-lab":Sg,length:fie,let:Cj,literal:v2,match:$re,number:Km,"number-format":cI,object:Km,slice:Hre,step:dj,string:Km,"to-boolean":q1,"to-color":q1,"to-number":q1,"to-string":q1,var:uj,within:eI};function AT(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,a=ij(e,t,r,s);if(a)throw new Kc(a);return new Xh(e/255*s,t/255*s,r/255*s,s)}function cT(n,e){return n in e}function e5(n,e){const t=e[n];return typeof t>"u"?null:t}function pie(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function ng(n){return{type:n}}Ly.register(wj,{error:[dre,[as],(n,[e])=>{throw new Kc(e.evaluate(n))}],typeof:[as,[Yo],(n,[e])=>Xl(GA(e.evaluate(n)))],"to-rgba":[wf(Tr,4),[jm],(n,[e])=>e.evaluate(n).toArray()],rgb:[jm,[Tr,Tr,Tr],AT],rgba:[jm,[Tr,Tr,Tr,Tr],AT],has:{type:Qo,overloads:[[[as],(n,[e])=>cT(e.evaluate(n),n.properties())],[[as,sy],(n,[e,t])=>cT(e.evaluate(n),t.evaluate(n))]]},get:{type:Yo,overloads:[[[as],(n,[e])=>e5(e.evaluate(n),n.properties())],[[as,sy],(n,[e,t])=>e5(e.evaluate(n),t.evaluate(n))]]},"feature-state":[Yo,[as],(n,[e])=>e5(e.evaluate(n),n.featureState||{})],properties:[sy,[],n=>n.properties()],"geometry-type":[as,[],n=>n.geometryType()],id:[Yo,[],n=>n.id()],zoom:[Tr,[],n=>n.globals.zoom],pitch:[Tr,[],n=>n.globals.pitch||0],"distance-from-center":[Tr,[],n=>n.distanceFromCenter()],"heatmap-density":[Tr,[],n=>n.globals.heatmapDensity||0],"line-progress":[Tr,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Tr,[],n=>n.globals.skyRadialProgress||0],accumulated:[Yo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Tr,ng(Tr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Tr,ng(Tr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Tr,overloads:[[[Tr,Tr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Tr],(n,[e])=>-e.evaluate(n)]]},"/":[Tr,[Tr,Tr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Tr,[Tr,Tr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Tr,[],()=>Math.LN2],pi:[Tr,[],()=>Math.PI],e:[Tr,[],()=>Math.E],"^":[Tr,[Tr,Tr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Tr,[Tr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Tr,[Tr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Tr,[Tr],(n,[e])=>Math.log(e.evaluate(n))],log2:[Tr,[Tr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Tr,[Tr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Tr,[Tr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Tr,[Tr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Tr,[Tr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Tr,[Tr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Tr,[Tr],(n,[e])=>Math.atan(e.evaluate(n))],min:[Tr,ng(Tr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Tr,ng(Tr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Tr,[Tr],(n,[e])=>Math.abs(e.evaluate(n))],round:[Tr,[Tr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Tr,[Tr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Tr,[Tr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[Qo,[as,Yo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[Qo,[Yo],(n,[e])=>n.id()===e.value],"filter-type-==":[Qo,[as],(n,[e])=>n.geometryType()===e.value],"filter-<":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[Qo,[as,Yo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Qo,[Yo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[Qo,[Yo],(n,[e])=>e.value in n.properties()],"filter-has-id":[Qo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Qo,[wf(as)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[Qo,[wf(Yo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[Qo,[as,wf(Yo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[Qo,[as,wf(Yo)],(n,[e,t])=>pie(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:Qo,overloads:[[[Qo,Qo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[ng(Qo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:Qo,overloads:[[[Qo,Qo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[ng(Qo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[Qo,[Qo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[Qo,[as],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[as,[as],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[as,[as],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[as,ng(Yo),(n,e)=>e.map(t=>Qv(t.evaluate(n))).join("")],"resolved-locale":[as,[Rx],(n,[e])=>e.evaluate(n).resolvedLocale()]});var Mj=wj;function tB(n){return{result:"success",value:n}}function j1(n){return{result:"error",value:n}}function mie(n){return n["property-type"]==="data-driven"}function gie(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function yie(n){return!!n.expression&&n.expression.interpolated}function Sj(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class vie{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new oj,this._defaultValue=t?xie(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,a,o,d){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=d||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,a,o,d){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=d||null;try{const g=this.expression.evaluate(this._evaluator);if(g==null||typeof g=="number"&&g!==g)return this._defaultValue;if(this._enumValues&&!(g in this._enumValues))throw new Kc(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(g)} instead.`);return g}catch(g){return this._warningHistory[g.message]||(this._warningHistory[g.message]=!0,typeof console<"u"&&console.warn(g.message)),this._defaultValue}}}function _ie(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Mj}function nB(n,e){const t=new Aj(Mj,[],e?bie(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?tB(new vie(r,e)):j1(t.errors)}class dT{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!tI(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}}class hT{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!tI(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,a)}evaluate(e,t,r,i,s,a){return this._styleExpression.evaluate(e,t,r,i,s,a)}interpolationFactor(e,t,r){return this.interpolationType?Sg.interpolationFactor(this.interpolationType,e,t,r):0}}function Cie(n,e){if(n=nB(n,e),n.result==="error")return n;const t=n.value.expression,r=Ux(t);if(!r&&!mie(e))return j1([new Wp("","data expressions not supported")]);const i=nI(t,["zoom","pitch","distance-from-center"]);if(!i&&!gie(e))return j1([new Wp("","zoom expressions not supported")]);const s=Mb(t);if(!s&&!i)return j1([new Wp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Wp)return j1([s]);if(s instanceof Sg&&!yie(e))return j1([new Wp("",'"interpolate" expressions cannot be used with this property')]);if(!s)return tB(r?new dT("constant",n.value):new dT("source",n.value));const a=s instanceof Sg?s.interpolation:void 0;return tB(r?new hT("camera",n.value,s.labels,a):new hT("composite",n.value,s.labels,a))}function Mb(n){let e=null;if(n instanceof Cj)e=Mb(n.result);else if(n instanceof _j){for(const t of n.args)if(e=Mb(t),e)break}else(n instanceof dj||n instanceof Sg)&&n.input instanceof Ly&&n.input.name==="zoom"&&(e=n);return e instanceof Wp||n.eachChild(t=>{const r=Mb(t);r instanceof Wp?e=r:!e&&r?e=new Wp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Wp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function bie(n){const e={color:jm,string:as,number:Tr,enum:as,boolean:Qo,formatted:Kx,resolvedImage:Z_};return n.type==="array"?wf(e[n.value]||Yo,n.length):e[n.type]}function xie(n){return n.type==="color"&&(Sj(n.default)||Array.isArray(n.default))?new Xh(0,0,0,0):n.type==="color"?Xh.parse(n.default)||null:n.default===void 0?null:n.default}function wie(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function rB(n){if(Array.isArray(n))return n.map(rB);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=rB(n[t]);return e}return wie(n)}var Ej={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Bj(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!Bj(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Mie(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Bj(n)||(n=M2(n));const t=n;let r=!0;try{r=Sie(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const i=Ej[`filter_${e}`],s=nB(r,i);let a=null;if(s.result==="error")throw new Error(s.value.map(b=>`${b.key}: ${b.message}`).join(", "));a=(b,E,S)=>s.value.evaluate(b,E,{},S);let o=null,d=null;if(r!==t){const b=nB(t,i);if(b.result==="error")throw new Error(b.value.map(E=>`${E.key}: ${E.message}`).join(", "));o=(E,S,O,k,U)=>b.value.evaluate(E,S,{},O,void 0,void 0,k,U),d=!Ux(b.value.expression)}a=a;const g=kj(r);return{filter:a,dynamicFilter:o||void 0,needGeometry:g,needFeature:!!d}}function Sie(n){if(!ly(n))return n;let e=rB(n);return Ij(e),e=Oj(e),e}function Oj(n){if(!Array.isArray(n))return n;const e=Oie(n);return e===!0?e:e.map(t=>Oj(t))}function Ij(n){let e=!1;const t=[];if(n[0]==="case"){for(let r=1;r<n.length-1;r+=2)e=e||ly(n[r]),t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="match"){e=e||ly(n[1]);for(let r=2;r<n.length-1;r+=2)t.push(n[r+1]);t.push(n[n.length-1])}else if(n[0]==="step"){e=e||ly(n[1]);for(let r=1;r<n.length-1;r+=2)t.push(n[r+1])}e&&(n.length=0,n.push("any",...t));for(let r=1;r<n.length;r++)Ij(n[r])}function ly(n){if(!Array.isArray(n))return!1;if(Eie(n[0]))return!0;for(let e=1;e<n.length;e++){const t=n[e];if(ly(t))return!0}return!1}function Eie(n){return n==="pitch"||n==="distance-from-center"}const Bie=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Oie(n){if(Bie.has(n[0]))for(let e=1;e<n.length;e++){const t=n[e];if(ly(t))return!0}return n}function Iie(n,e){return n<e?-1:n>e?1:0}function kj(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(kj(n[e]))return!0;return!1}function M2(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?t5(n[1],n[2],"=="):e==="!="?nb(t5(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?t5(n[1],n[2],e):e==="any"?kie(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(M2)):e==="none"?["all"].concat(n.slice(1).map(M2).map(nb)):e==="in"?fT(n[1],n.slice(2)):e==="!in"?nb(fT(n[1],n.slice(2))):e==="has"?pT(n[1]):e==="!has"?nb(pT(n[1])):e==="within"?n:!0}function t5(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function kie(n){return["any"].concat(n.map(M2))}function fT(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Iie)]]:["filter-in-small",n,["literal",e]]}}function pT(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function nb(n){return["!",n]}var Tie=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Pie(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return Tie.forEach(r=>{r in e&&(t[r]=e[r])}),t}function Tj(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=Pie(n[t],e[n[t].ref]));return n}var mT={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},dv=" ",gT=/(italic|oblique)$/i,yT={},Rie=function(n,e,t){var r=yT[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",a=[],o,d,g=0,b=n.length;g<b;++g){var E=n[g],S=E.split(" "),O=S[S.length-1].toLowerCase();O=="normal"||O=="italic"||O=="oblique"?(s=d?s:O,d=!0,S.pop(),O=S[S.length-1].toLowerCase()):gT.test(O)&&(O=O.replace(gT,""),s=d?s:S[S.length-1].replace(O,""),d=!0);for(var k in mT){var U=S.length>1?S[S.length-2].toLowerCase():"";if(O==k||O==k.replace("-","")||U+"-"+O==k){i=o?i:mT[k],S.pop(),U&&k.startsWith(U)&&S.pop();break}}!o&&typeof O=="number"&&(i=O,o=!0);var z=S.join(dv).replace("Klokantech Noto Sans","Noto Sans");z.indexOf(dv)!==-1&&(z='"'+z+'"'),a.push(z)}r=yT[n]=[s,i,a]}return r[0]+dv+r[1]+dv+e+"px"+(t?"/"+t:"")+dv+r[2]},iB=nj(Rie);const Pj="https://api.mapbox.com";function hI(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function Kie(n,e,t){const r=hI(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${Pj}/styles/v1/${s}/sprite?access_token=${e}`}function S2(n,e){const t=hI(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${Pj}/styles/v1/${i}?&access_token=${e}`}const Die=["a","b","c","d"];function Sb(n,e,t,r){const i=new URL(n,r),s=hI(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const a=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${a}.webp?access_token=${e}`]}return Die.map(a=>`https://${a}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const vT={},_T={};let Lie=0;function fI(n){return n.id||(n.id=Lie++),n.id}function Fie(n,e){return fI(n)+"."+Fo(e)}function Rj(n){let e=vT[n.id];return e||(e={},vT[fI(n)]=e),e}function Uie(n){let e=_T[n.id];return e||(e={},_T[fI(n)]=e),e}function n5(n){return n*Math.PI/180}const Jp=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function zx(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function pI(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function Iv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const p1={};function wy(n,e,t={},r){if(e in p1)return r&&(r.request=p1[e][0]),p1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=yy(()=>i).then(a=>(a instanceof Request||(a=new Request(a)),a.headers.get("Accept")||a.headers.set("Accept","application/json"),r&&(r.request=a),fetch(a).then(function(o){return delete p1[e],o.ok?o.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(o){return delete p1[e],Promise.reject(new Error("Error fetching source "+e))})));return p1[e]=[i,s],s}function Kj(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=S2(n,e.accessToken),wy("Style",n,e);else return Promise.resolve(n)}const CT={};function Dj(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=CT[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,d)=>{const g=t.transformRequest&&t.transformRequest(d,"Tiles")||d;if(o instanceof Fz)o.setLoader((b,E,S)=>{yy(()=>g).then(O=>{fetch(O).then(k=>k.arrayBuffer()).then(k=>{const z=o.getFormat().readFeatures(k,{extent:b,featureProjection:S});o.setFeatures(z)}).catch(k=>o.setState(Cr.ERROR))})});else{const b=o.getImage();yy(()=>g).then(E=>{E instanceof Request?fetch(E).then(S=>S.blob()).then(S=>{const O=URL.createObjectURL(S);b.addEventListener("load",()=>URL.revokeObjectURL(O)),b.addEventListener("error",()=>URL.revokeObjectURL(O)),b.src=O}).catch(S=>o.setState(Cr.ERROR)):b.src=E})}});const a=n.url;if(a&&!n.tiles){const o=Sb(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const d={};i=wy("Source",o[0],t,d).then(function(g){return g.tiles=g.tiles.map(function(b){return g.scheme==="tms"&&(b=b.replace("{y}","{-y}")),Sb(b,t.accessToken,t.accessTokenParam||"access_token",d.request.url)[0]}),Promise.resolve({tileJson:g,tileLoadFunction:s})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),Sb(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s});CT[r]=i}return i}function bT(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=zx(i[0],i[1]),a=s.getContext("2d");a.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=a.getImageData(0,0,i[0],i[1]);a.globalCompositeOperation="destination-over",a.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const d=o.data;for(let g=0,b=o.width;g<b;++g)for(let E=0,S=o.height;E<S;++E){const O=(E*b+g)*4;d[O+3]>0&&a.arc(g,E,t*e.pixelRatio,0,2*Math.PI)}return a.fill(),s}function zie(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function xT(n,e,t){const r=zx(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),a=s.data;for(let o=0,d=s.width;o<d;++o)for(let g=0,b=s.height;g<b;++g){const E=(g*d+o)*4,S=a[E+3]/255,O=.75,k=.1,U=zie(O-k,O+k,S);U>0?(a[E+0]=Math.round(255*t.r*U),a[E+1]=Math.round(255*t.g*U),a[E+2]=Math.round(255*t.b*U),a[E+3]=Math.round(255*U)):a[E+3]=0}return i.putImageData(s,0,0),r}const jie=Array(256).join("");function oB(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=jie.slice(0,Math.round(e/.1));for(let s=0,a=r.length;s<a;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let r5;function Lj(){return r5||(r5=zx(1,1).getContext("2d")),r5}function rg(n,e){return Lj().measureText(n).width+(n.length-1)*e}const wT={};function sB(n,e,t,r){if(n.indexOf(`
`)!==-1){const a=n.split(`
`),o=[];for(let d=0,g=a.length;d<g;++d)o.push(sB(a[d],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=wT[i];if(!s){const a=n.split(" ");if(a.length>1){const o=Lj();o.font=e;const g=o.measureText("M").width*t;let b="";const E=[];for(let S=0,O=a.length;S<O;++S){const k=a[S],U=b+(b?" ":"")+k;rg(U,r)<=g?b=U:(b&&E.push(b),b=k)}b&&E.push(b);for(let S=0,O=E.length;S<O&&O>1;++S){const k=E[S];if(rg(k,r)<g*.35){const U=S>0?rg(E[S-1],r):1/0,z=S<O-1?rg(E[S+1],r):1/0;E.splice(S,1),O-=1,U<z?(E[S-1]+=" "+k,S-=1):E[S]=k+" "+E[S]}}for(let S=0,O=E.length-1;S<O;++S){const k=E[S],U=E[S+1];if(rg(k,r)>g*.7&&rg(U,r)<g*.6){const z=k.split(" "),q=z.pop();rg(q,r)<g*.2&&(E[S]=z.join(" "),E[S+1]=q+" "+U),O-=1}}s=E.join(`
`)}else s=n;s=oB(s,r),wT[i]=s}return s}const Nie=/font-family: ?([^;]*);/,Gie=/("|')/g;let rb;function Wie(n){if(!rb){rb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const s=i.rules||i.cssRules;if(s)for(let a=0,o=s.length;a<o;++a){const d=s[a];if(d.type==5){const g=d.cssText.match(Nie);rb[g[1].replace(Gie,"")]=!0}}}catch{}}}return n in rb}const i5={};function Qie(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in i5)return i5[t];const r=[];for(let i=0,s=n.length;i<s;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const a=n[i],o=iB(a,1);IU(o);const d=o.split(" ");r.push([d.slice(3).join(" ").replace(/"/g,""),d[1],d[0]])}for(let i=0,s=r.length;i<s;++i){const a=r[i],o=a[0];if(!Wie(o)&&Dp.get(`${a[2]}
${a[1]} 
${o}`)!==100){const d=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",a[1]).replace("{-fontstyle}",a[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",a[2]);if(!document.querySelector('link[href="'+d+'"]')){const g=document.createElement("link");g.href=d,g.rel="stylesheet",document.head.appendChild(g)}}}return i5[t]=n,n}const qie={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Yie={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},$ie=function(n,e){const t=Cie(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},aB={},E2={zoom:0};let ib,o5;function Ci(n,e,t,r,i,s,a){const o=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const d=s[o];if(!d[t]){let g=(n[e]||aB)[t];const b=Ej[`${e}_${n.type}`][t];g===void 0&&(g=b.default);let E=_ie(g);if(!E&&Sj(g)&&(g=ire(g,b),E=!0),E){const S=$ie(g,b);d[t]=S.evaluate.bind(S)}else b.type=="color"&&(g=Xh.parse(g)),d[t]=function(){return g}}return E2.zoom=r,d[t](E2,i,a)}function MT(n,e,t,r,i){return Ci(n,"layout",`${r}-allow-overlap`,e,t,i)?Ci(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function Vie(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=Mie(e).filter),E2.zoom=r,i[n](E2,t)}function m0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const Hie=/\{[^{}}]*\}/g;function s5(n,e){return n.replace(Hie,function(t){return e[t.slice(1,-1)]||""})}const Zie={};function Xie(n,e,t,r=Jp,i=void 0,s=void 0,a=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");Zie[Fie(e,n)]=Array.from(arguments);let d,g,b;if(s){if(typeof Image<"u"){const N=new Image;let ie;yy(()=>s).then(he=>{he instanceof Request?fetch(he).then(de=>de.blob()).then(de=>{ie=URL.createObjectURL(de),N.src=ie}).catch(()=>{}):(N.crossOrigin="anonymous",N.src=he,ie&&URL.revokeObjectURL(ie))}),N.onload=function(){d=N,g=[N.width,N.height],n.changed(),N.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const N=self;N.postMessage({action:"loadImage",src:s}),N.addEventListener("message",function(he){he.data.action==="imageLoaded"&&he.data.src===s&&(d=he.data.image,g=[d.width,d.height])})}}const E=Tj(e.layers),S={},O=[],k={},U={},z=Rj(e),q=Uie(e);let Q;for(let N=0,ie=E.length;N<ie;++N){const he=E[N],de=he.id;if(typeof t=="string"&&he.source==t||Array.isArray(t)&&t.indexOf(de)!==-1){const we=he["source-layer"];if(Q){if(he.source!==Q)throw new Error(`Layer "${de}" does not use source "${Q}`)}else{Q=he.source;const be=e.sources[Q];if(!be)throw new Error(`Source "${Q}" is not defined`);const Pe=be.type;if(Pe!=="vector"&&Pe!=="geojson")throw new Error(`Source "${Q}" is not of type "vector" or "geojson", but "${Pe}"`)}let fe=S[we];fe||(fe=[],S[we]=fe),fe.push({layer:he,index:N}),O.push(de)}}const re=new b0,X=new Dm,Y=[],J=function(N,ie,he){const de=N.getProperties(),we=S[de.layer];if(!we)return;let fe=r.indexOf(ie);fe==-1&&(fe=pI(ie,r));const be=qie[N.getGeometry().getType()],Pe={id:N.getId(),properties:de,type:be},pe=n.get("mapbox-featurestate")[N.getId()];let it=-1;for(let We=0,$e=we.length;We<$e;++We){const ht=we[We],De=ht.layer,Ne=De.id;if(he!==void 0&&he!==Ne)continue;const at=De.layout||aB,wt=De.paint||aB;if(at.visibility==="none"||"minzoom"in De&&fe<De.minzoom||"maxzoom"in De&&fe>=De.maxzoom)continue;const Ct=De.filter;if(!Ct||Vie(Ne,Ct,Pe,fe,q)){let ft,Lt,Kt,Fe,Te,Se;const Je=ht.index;if(be==3&&(De.type=="fill"||De.type=="fill-extrusion"))if(Lt=Ci(De,"paint",De.type+"-opacity",fe,Pe,z,pe),De.type+"-pattern"in wt){const xr=Ci(De,"paint",De.type+"-pattern",fe,Pe,z,pe);if(xr){const Qn=typeof xr=="string"?s5(xr,de):xr.toString();if(d&&i&&i[Qn]){++it,Se=Y[it],(!Se||!Se.getFill()||Se.getStroke()||Se.getText())&&(Se=new qh({fill:new Dm}),Y[it]=Se),Kt=Se.getFill(),Se.setZIndex(Je);const Er=Qn+"."+Lt;let Ge=U[Er];if(!Ge){const Ae=i[Qn],me=zx(Ae.width,Ae.height),Xe=me.getContext("2d");Xe.globalAlpha=Lt,Xe.drawImage(d,Ae.x,Ae.y,Ae.width,Ae.height,0,0,Ae.width,Ae.height),Ge=Xe.createPattern(me,"repeat"),U[Er]=Ge}Kt.setColor(Ge)}}}else ft=m0(Ci(De,"paint",De.type+"-color",fe,Pe,z,pe),Lt),De.type+"-outline-color"in wt&&(Te=m0(Ci(De,"paint",De.type+"-outline-color",fe,Pe,z,pe),Lt)),Te||(Te=ft),(ft||Te)&&(++it,Se=Y[it],(!Se||ft&&!Se.getFill()||!ft&&Se.getFill()||Te&&!Se.getStroke()||!Te&&Se.getStroke()||Se.getText())&&(Se=new qh({fill:ft?new Dm:void 0,stroke:Te?new b0:void 0}),Y[it]=Se),ft&&(Kt=Se.getFill(),Kt.setColor(ft)),Te&&(Fe=Se.getStroke(),Fe.setColor(Te),Fe.setWidth(.5)),Se.setZIndex(Je));if(be!=1&&De.type=="line"){"line-pattern"in wt?ft=void 0:ft=m0(Ci(De,"paint","line-color",fe,Pe,z,pe),Ci(De,"paint","line-opacity",fe,Pe,z,pe));const xr=Ci(De,"paint","line-width",fe,Pe,z,pe);ft&&xr>0&&(++it,Se=Y[it],(!Se||!Se.getStroke()||Se.getFill()||Se.getText())&&(Se=new qh({stroke:new b0}),Y[it]=Se),Fe=Se.getStroke(),Fe.setLineCap(Ci(De,"layout","line-cap",fe,Pe,z,pe)),Fe.setLineJoin(Ci(De,"layout","line-join",fe,Pe,z,pe)),Fe.setMiterLimit(Ci(De,"layout","line-miter-limit",fe,Pe,z,pe)),Fe.setColor(ft),Fe.setWidth(xr),Fe.setLineDash(wt["line-dasharray"]?Ci(De,"paint","line-dasharray",fe,Pe,z,pe).map(function(Qn){return Qn*xr}):null),Se.setZIndex(Je))}let yt=!1,dt=null,Ut=0,en,Nt,yn;if((be==1||be==2)&&"icon-image"in at){const xr=Ci(De,"layout","icon-image",fe,Pe,z,pe);if(xr){en=typeof xr=="string"?s5(xr,de):xr.toString();let Qn;const Er=o?o(n,en):void 0;if(d&&i&&i[en]||Er){const Ge=Ci(De,"layout","icon-rotation-alignment",fe,Pe,z,pe);if(be==2){const Ae=N.getGeometry();if(Ae.getFlatMidpoint||Ae.getFlatMidpoints){const me=Ae.getExtent();if(Math.sqrt(Math.max(Math.pow((me[2]-me[0])/ie,2),Math.pow((me[3]-me[1])/ie,2)))>150){const Et=Ae.getType()==="MultiLineString"?Ae.getFlatMidpoints():Ae.getFlatMidpoint();if(o5||(ib=[NaN,NaN],o5=new sd("Point",ib,[],2,{},void 0)),Qn=o5,ib[0]=Et[0],ib[1]=Et[1],Ci(De,"layout","symbol-placement",fe,Pe,z,pe)==="line"&&Ge==="map"){const nn=Ae.getStride(),rr=Ae.getFlatCoordinates();for(let Ee=0,oe=rr.length-nn;Ee<oe;Ee+=nn){const ve=rr[Ee],p=rr[Ee+1],ze=rr[Ee+nn],rt=rr[Ee+nn+1],pt=Math.min(ve,ze),Bt=Math.max(ve,ze),vt=Et[0],Xt=Et[1],tn=(rt-p)*(vt-ve)-(ze-ve)*(Xt-p);if(Math.abs(tn)<.001&&vt<=Bt&&vt>=pt){Ut=Math.atan2(p-rt,ze-ve);break}}}}}}if(be!==2||Qn){const Ae=Ci(De,"layout","icon-size",fe,Pe,z,pe),me=wt["icon-color"]!==void 0?Ci(De,"paint","icon-color",fe,Pe,z,pe):null;if(!me||me.a!==0){const Xe=Ci(De,"paint","icon-halo-color",fe,Pe,z,pe),Et=Ci(De,"paint","icon-halo-width",fe,Pe,z,pe);let Yt=`${en}.${Ae}.${Et}.${Xe}`;if(me!==null&&(Yt+=`.${me}`),Nt=k[Yt],!Nt){const nn=MT(De,fe,Pe,"icon",z);let rr;"icon-offset"in at&&(rr=Ci(De,"layout","icon-offset",fe,Pe,z,pe).slice(0),rr[0]*=Ae,rr[1]*=-Ae);let Ee=me?[me.r*255,me.g*255,me.b*255,me.a]:void 0;if(Er){const oe={color:Ee,rotateWithView:Ge==="map",displacement:rr,declutterMode:nn,scale:Ae};typeof Er=="string"?oe.src=Er:(oe.img=Er,oe.imgSize=[Er.width,Er.height]),Nt=new n2(oe)}else{const oe=i[en];let ve,p,ze;Et?oe.sdf?(ve=bT(xT(d,oe,me||[0,0,0,1]),{x:0,y:0,width:oe.width,height:oe.height,pixelRatio:oe.pixelRatio},Et,Xe),Ee=void 0):ve=bT(d,oe,Et,Xe):(oe.sdf?(b||(b=xT(d,{x:0,y:0,width:g[0],height:g[1]},{r:1,g:1,b:1,a:1})),ve=b):ve=d,p=[oe.width,oe.height],ze=[oe.x,oe.y]),Nt=new n2({color:Ee,img:ve,imgSize:g,size:p,offset:ze,rotateWithView:Ge==="map",scale:Ae/oe.pixelRatio,displacement:rr,declutterMode:nn})}k[Yt]=Nt}}Nt&&(++it,Se=Y[it],(!Se||!Se.getImage()||Se.getFill()||Se.getStroke())&&(Se=new qh,Y[it]=Se),Se.setGeometry(Qn),Nt.setRotation(Ut+n5(Ci(De,"layout","icon-rotate",fe,Pe,z,pe))),Nt.setOpacity(Ci(De,"paint","icon-opacity",fe,Pe,z,pe)),Nt.setAnchor(Yie[Ci(De,"layout","icon-anchor",fe,Pe,z,pe)]),Se.setImage(Nt),dt=Se.getText(),Se.setText(void 0),Se.setZIndex(Je),yt=!0,yn=!1)}else yn=!0}}}if(be==1&&De.type==="circle"){++it,Se=Y[it],(!Se||!Se.getImage()||Se.getFill()||Se.getStroke())&&(Se=new qh,Y[it]=Se);const xr="circle-radius"in wt?Ci(De,"paint","circle-radius",fe,Pe,z,pe):5,Qn=m0(Ci(De,"paint","circle-stroke-color",fe,Pe,z,pe),Ci(De,"paint","circle-stroke-opacity",fe,Pe,z,pe)),Er=Ci(De,"paint","circle-translate",fe,Pe,z,pe),Ge=m0(Ci(De,"paint","circle-color",fe,Pe,z,pe),Ci(De,"paint","circle-opacity",fe,Pe,z,pe)),Ae=Ci(De,"paint","circle-stroke-width",fe,Pe,z,pe),me=xr+"."+Qn+"."+Ge+"."+Ae+"."+Er[0]+"."+Er[1];Nt=k[me],Nt||(Nt=new j_({radius:xr,displacement:[Er[0],-Er[1]],stroke:Qn&&Ae>0?new b0({width:Ae,color:Qn}):void 0,fill:Ge?new Dm({color:Ge}):void 0,declutterMode:"none"}),k[me]=Nt),Se.setImage(Nt),dt=Se.getText(),Se.setText(void 0),Se.setGeometry(void 0),Se.setZIndex(Je),yt=!0}let jn,Rr,sr,Jn,mr,pr;if("text-field"in at){Jn=Math.round(Ci(De,"layout","text-size",fe,Pe,z,pe));const xr=Ci(De,"layout","text-font",fe,Pe,z,pe);sr=Ci(De,"layout","text-line-height",fe,Pe,z,pe),Rr=iB(a?a(xr,e.metadata?e.metadata["ol:webfonts"]:void 0):xr,Jn,sr),Rr.includes("sans-serif")||(Rr+=",sans-serif"),mr=Ci(De,"layout","text-letter-spacing",fe,Pe,z,pe),pr=Ci(De,"layout","text-max-width",fe,Pe,z,pe);const Qn=Ci(De,"layout","text-field",fe,Pe,z,pe);typeof Qn=="object"&&Qn.sections?Qn.sections.length===1?jn=Qn.toString():jn=Qn.sections.reduce((Er,Ge,Ae)=>{const me=Ge.fontStack?Ge.fontStack.split(","):xr,Xe=iB(a?a(me):me,Jn*(Ge.scale||1),sr);let Et=Ge.text;if(Et===`
`)return Er.push(`
`,""),Er;if(be==2)return Er.push(oB(Et,mr),Xe),Er;Et=sB(Et,Xe,pr,mr).split(`
`);for(let Yt=0,nn=Et.length;Yt<nn;++Yt)Yt>0&&Er.push(`
`,""),Er.push(Et[Yt],Xe);return Er},[]):jn=s5(Qn,de).trim(),Lt=Ci(De,"paint","text-opacity",fe,Pe,z,pe)}if(jn&&Lt&&!yn){yt||(++it,Se=Y[it],(!Se||!Se.getText()||Se.getFill()||Se.getStroke())&&(Se=new qh,Y[it]=Se),Se.setImage(void 0),Se.setGeometry(void 0));const xr=MT(De,fe,Pe,"text",z);Se.getText()||Se.setText(dt),dt=Se.getText(),(!dt||"getDeclutterMode"in dt&&dt.getDeclutterMode()!==xr)&&(dt=new Mx({padding:[2,2,2,2],declutterMode:xr}),Se.setText(dt));const Qn=Ci(De,"layout","text-transform",fe,Pe,z,pe);Qn=="uppercase"?jn=Array.isArray(jn)?jn.map((rt,pt)=>pt%2?rt:rt.toUpperCase()):jn.toUpperCase():Qn=="lowercase"&&(jn=Array.isArray(jn)?jn.map((rt,pt)=>pt%2?rt:rt.toLowerCase()):jn.toLowerCase());const Er=Array.isArray(jn)?jn:be==2?oB(jn,mr):sB(jn,Rr,pr,mr);if(dt.setText(Er),dt.setFont(Rr),dt.setRotation(n5(Ci(De,"layout","text-rotate",fe,Pe,z,pe))),typeof dt.setKeepUpright=="function"){const rt=Ci(De,"layout","text-keep-upright",fe,Pe,z,pe);dt.setKeepUpright(rt)}const Ge=Ci(De,"layout","text-anchor",fe,Pe,z,pe),Ae=yt||be==1?"point":Ci(De,"layout","symbol-placement",fe,Pe,z,pe);let me;if(Ae==="line-center"?(dt.setPlacement("line"),me="center"):dt.setPlacement(Ae),Ae==="line"&&typeof dt.setRepeat=="function"){const rt=Ci(De,"layout","symbol-spacing",fe,Pe,z,pe);dt.setRepeat(rt*2)}dt.setOverflow(Ae==="point");let Xe=Ci(De,"paint","text-halo-width",fe,Pe,z,pe);const Et=Ci(De,"layout","text-offset",fe,Pe,z,pe),Yt=Ci(De,"paint","text-translate",fe,Pe,z,pe);let nn=0,rr=0;if(Ae=="point"){me="center",Ge.indexOf("left")!==-1?(me="left",rr=Xe):Ge.indexOf("right")!==-1&&(me="right",rr=-Xe);const rt=Ci(De,"layout","text-rotation-alignment",fe,Pe,z,pe);dt.setRotateWithView(rt=="map")}else dt.setMaxAngle(n5(Ci(De,"layout","text-max-angle",fe,Pe,z,pe))*jn.length/Er.length),dt.setRotateWithView(!1);dt.setTextAlign(me);let Ee="middle";Ge.indexOf("bottom")==0?(Ee="bottom",nn=-Xe-.5*(sr-1)*Jn):Ge.indexOf("top")==0&&(Ee="top",nn=Xe+.5*(sr-1)*Jn),dt.setTextBaseline(Ee);const oe=Ci(De,"layout","text-justify",fe,Pe,z,pe);dt.setJustify(oe==="auto"?void 0:oe),dt.setOffsetX(Et[0]*Jn+rr+Yt[0]),dt.setOffsetY(Et[1]*Jn+nn+Yt[1]),X.setColor(m0(Ci(De,"paint","text-color",fe,Pe,z,pe),Lt)),dt.setFill(X);const ve=m0(Ci(De,"paint","text-halo-color",fe,Pe,z,pe),Lt);if(ve&&Xe>0){re.setColor(ve),Xe*=2;const rt=.5*Jn;re.setWidth(Xe<=rt?Xe:rt),dt.setStroke(re)}else dt.setStroke(void 0);const p=Ci(De,"layout","text-padding",fe,Pe,z,pe),ze=dt.getPadding();p!==ze[0]&&(ze[0]=p,ze[1]=p,ze[2]=p,ze[3]=p),Se.setZIndex(Je)}}}if(it>-1)return Y.length=it+1,Y};return n.setStyle(J),n.set("mapbox-source",Q),n.set("mapbox-layers",O),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),J}function Jie(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,a=new Uint8ClampedArray(s.length),o=e.resolution*2,d=r-1,g=i-1,b=[0,0,0,0],E=2*Math.PI,S=Math.PI/2,O=Math.PI*e.sunEl/180,k=Math.PI*e.sunAz/180,U=Math.cos(O),z=Math.sin(O),q=e.highlightColor,Q=e.shadowColor,re=e.accentColor,X=e.encoding;let Y,J,N,ie,he,de,we,fe,be,Pe,pe,it,We,$e,ht,De,Ne,at,wt,Ct,ft,Lt;function Kt(Fe,Te="mapbox"){if(Te==="mapbox")return(Fe[0]*256*256+Fe[1]*256+Fe[2])*.1-1e4;if(Te==="terrarium")return Fe[0]*256+Fe[1]+Fe[2]/256-32768}for(J=0;J<=g;++J)for(he=J===0?0:J-1,de=J===g?g:J+1,Y=0;Y<=d;++Y)N=Y===0?0:Y-1,ie=Y===d?d:Y+1,we=(J*r+N)*4,b[0]=s[we],b[1]=s[we+1],b[2]=s[we+2],b[3]=s[we+3],fe=e.vert*Kt(b,X),we=(J*r+ie)*4,b[0]=s[we],b[1]=s[we+1],b[2]=s[we+2],b[3]=s[we+3],be=e.vert*Kt(b,X),Pe=(be-fe)/o,we=(he*r+Y)*4,b[0]=s[we],b[1]=s[we+1],b[2]=s[we+2],b[3]=s[we+3],fe=e.vert*Kt(b,X),we=(de*r+Y)*4,b[0]=s[we],b[1]=s[we+1],b[2]=s[we+2],b[3]=s[we+3],be=e.vert*Kt(b,X),pe=(be-fe)/o,We=Math.atan2(pe,-Pe),We<0?We=S-We:We>S?We=E-We+S:We=S-We,it=Math.atan(Math.sqrt(Pe*Pe+pe*pe)),Lt=z*Math.cos(it)+U*Math.sin(it)*Math.cos(k-We),$e=Math.cos(it),ht=255*Lt,wt=Math.min(Math.max(2*e.sunEl,0),1),Ct=1.875-e.opacity*1.75,ft=e.opacity!==.5?S*((Math.pow(Ct,it)-1)/(Math.pow(Ct,S)-1)):it,Ne={r:(1-$e)*re.r*wt*255,g:(1-$e)*re.g*wt*255,b:(1-$e)*re.b*wt*255,a:(1-$e)*re.a*wt*255},De=Math.abs(((We+k)/Math.PI+.5)%2-1),at={r:(q.r*(1-De)+Q.r*De)*ht,g:(q.g*(1-De)+Q.g*De)*ht,b:(q.b*(1-De)+Q.b*De)*ht,a:(q.a*(1-De)+Q.a*De)*ht},we=(J*r+Y)*4,a[we]=Ne.r*(1-De)+at.r,a[we+1]=Ne.g*(1-De)+at.g,a[we+2]=Ne.b*(1-De)+at.b,a[we+3]=s[we+3]*e.opacity*wt*Math.sin(ft);return new ImageData(a,r,i)}function eoe(n,e=512){return n.getExtent()?jO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Jp}function Fj(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function toe(n,e,t="",r={},i=void 0){let s,a,o,d,g=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,d=o.source||o.layers,r=o):d=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(g=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:S2(s,o.accessToken),o=Fj(s,o)),new Promise(function(b,E){Kj(e,o).then(function(S){if(S.version!=8)return E(new Error("glStyle version 8 required."));if(!(n instanceof kO||n instanceof Gv))return E(new Error("Can only apply to VectorLayer or VectorTileLayer"));const O=n instanceof Gv?"vector":"geojson";if(d?Array.isArray(d)?a=S.layers.find(function(X){return X.id===d[0]}).source:a=d:(a=Object.keys(S.sources).find(function(X){return S.sources[X].type===O}),d=a),!a)return E(new Error(`No ${O} source found in the glStyle.`));function k(){if(!g)return Promise.resolve();if(n instanceof Gv)return jj(S.sources[a],s,o).then(function(N){const ie=n.getSource();ie?N!==ie&&(ie.setTileUrlFunction(N.getTileUrlFunction()),typeof ie.setUrls=="function"&&typeof N.getUrls=="function"&&ie.setUrls(N.getUrls()),ie.format_||(ie.format_=N.format_),ie.getAttributions()||ie.setAttributions(N.getAttributions()),ie.getTileLoadFunction()===tj&&ie.setTileLoadFunction(N.getTileLoadFunction()),Mg(ie.getProjection(),N.getProjection())&&(ie.tileGrid=N.getTileGrid())):n.setSource(N);const he=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&he.getMinZoom()>0&&n.setMaxResolution(Iv(Math.max(0,he.getMinZoom()-1e-12),he.getResolutions()))});const X=S.sources[a];let Y=n.getSource();(!Y||Y.get("mapbox-source")!==X)&&(Y=Wj(X,s,o));const J=n.getSource();return J?Y!==J&&(J.getAttributions()||J.setAttributions(Y.getAttributions()),J.format_||(J.format_=Y.getFormat()),J.url_=Y.getUrl()):n.setSource(Y),Promise.resolve()}let U,z,q,Q;function re(){if(!Q&&(!S.sprite||z)){if(o.projection&&!i){const Y=Ma(o.projection).getUnits();Y!=="m"&&(i=Jp.map(J=>J/R0[Y]))}Q=Xie(n,S,d,i,z,q,(X,Y=o.webfonts)=>Qie(X,Y),o.getImage),n.getStyle()?k().then(b).catch(E):E(new Error(`Nothing to show for source [${a}]`))}else Q?(n.setStyle(Q),k().then(b).catch(E)):E(new Error("Something went wrong trying to apply style."))}if(S.sprite){const X=new URL(Kie(S.sprite,o.accessToken,s||location.href));U=window.devicePixelRatio>=1.5?.5:1;const Y=U==.5?"@2x":"";let J=X.origin+X.pathname+Y+".json"+X.search;new Promise(function(N,ie){wy("Sprite",J,o).then(N).catch(function(he){J=X.origin+X.pathname+".json"+X.search,wy("Sprite",J,o).then(N).catch(ie)})}).then(function(N){if(N===void 0&&E(new Error("No sprites found.")),z=N,q=X.origin+X.pathname+Y+".png"+X.search,o.transformRequest){const ie=o.transformRequest(q,"SpriteImage")||q;(ie instanceof Request||ie instanceof Promise)&&(q=ie)}re()}).catch(function(N){E(new Error(`Sprites cannot be loaded: ${J}: ${N.message}`))})}else re()}).catch(E)})}const y0={};function Uj(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function noe(n,e){const t=n.bounds;if(t){const r=R6([t[0],t[1]],e),i=R6([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Ma(e).getExtent()}function zj(n,e,t){const r=new Jz({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),a=Ma(t.projection||"EPSG:3857"),o=noe(i,a),d=a.getExtent(),g=i.minzoom||0,b=i.maxzoom||22,E={attributions:r.getAttributions(),projection:a,tileGrid:new Ix({origin:d?Ap(d):s.getOrigin(0),extent:o||s.getExtent(),minZoom:g,resolutions:eoe(a,e.tileSize).slice(0,b+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?E.urls=i.tiles:E.url=i.tiles,E}function roe(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},a=n.paint||{};i.paint=a;const o=pI(e,t.resolutions||Jp);let d;const g=Ci(i,"paint","background-color",o,y0,r);return a["background-opacity"]!==void 0&&(d=Ci(i,"paint","background-opacity",o,y0,r)),s.visibility=="none"?void 0:m0(g,d)}function ioe(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Ry({source:new Ky({}),render(i){const s=roe(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function jj(n,e,t){return new Promise(function(r,i){Dj(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=zj(n,s,t);o.tileLoadFunction=a,o.format=new nne,r(new ej(o))}).catch(i)})}function ooe(n,e,t){const r=new Gv({declutter:!0,visible:!1});return jj(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function Nj(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function soe(n,e,t){return new Promise(function(r,i){Dj(n,e,t).then(function({tileJson:s,tileLoadFunction:a}){const o=new Jz({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=zj(n,s,t).tileGrid,t.projection&&(o.projection=Ma(t.projection));const d=o.getTileUrlFunction();a&&o.setTileLoadFunction(a),o.setTileUrlFunction(function(g,b,E){const S=Nj(E);let O=d(g,b,E);if(O.indexOf(S)!=-1){const k=o.getTileGrid().getTileCoordExtent(g);O=O.replace(S,k.toString())}return O}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function Gj(n,e,t){const r=new qz;return soe(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function aoe(n,e,t){const r=Gj(n,e,t);return new jz({source:new Zz({operationType:"image",operation:Jie,sources:[r]})})}function Wj(n,e,t){const r=t.projection?new Wk({dataProjection:t.projection}):new Wk,i=n.data,s={};if(typeof i=="string"){const[o]=Sb(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const g=(E,S,O)=>{const k=Nj(O);return o.replace(k,`${E.join(",")}`)},b=new wb({attributions:n.attribution,format:r,loader:(E,S,O,k,U)=>{const z=typeof g=="function"?g(E,S,O):g;wy("GeoJSON",z,t).then(q=>{const Q=b.getFormat().readFeatures(q,{featureProjection:O});b.addFeatures(Q),k(Q)}).catch(q=>{b.removeLoadedExtent(E),U()})},strategy:kee});return b.set("mapbox-source",n),b}const d=new wb({attributions:n.attribution,format:r,url:o,loader:(g,b,E,S,O)=>{wy("GeoJSON",o,t).then(k=>{const U=d.getFormat().readFeatures(k,{featureProjection:E});d.addFeatures(U),S(U)}).catch(k=>{d.removeLoadedExtent(g),O()})}});return d}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const a=new wb(Object.assign({attributions:n.attribution,format:r},s));return a.set("mapbox-source",n),a}function loe(n,e,t){return new kO({declutter:!0,source:Wj(n,e,t),visible:!1})}function uoe(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],Aoe(n,e,r,t))}}function Aoe(n,e,t,r){const i=Ci(n,"paint","raster-opacity",t,y0,r);e.setOpacity(i)}function coe(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=Tj(r.layers),s=n.get("mapbox-layers"),a=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==a&&n.setVisible(a)}n.on("change",t),t()}function doe(n,e,t,r){const i=Rj(n),s=n.layers,a=t.type,o=t.source||Uj(s,t.ref),d=n.sources[o];let g;if(a=="background")g=ioe(t,r,i);else if(d.type=="vector")g=ooe(d,e,r);else if(d.type=="raster")g=Gj(d,e,r),g.setVisible(t.layout?t.layout.visibility!=="none":!0),g.on("prerender",uoe(t,g,i));else if(d.type=="geojson")g=loe(d,e,r);else if(d.type=="raster-dem"&&t.type=="hillshade"){const E=aoe(d,e,r);g=E,E.getSource().on("beforeoperations",function(S){const O=S.data;O.resolution=P6(r.projection||"EPSG:3857",S.resolution,If(S.extent),"m");const k=pI(S.resolution,r.resolutions||Jp);O.encoding=d.encoding,O.vert=5*Ci(t,"paint","hillshade-exaggeration",k,y0,i),O.sunAz=Ci(t,"paint","hillshade-illumination-direction",k,y0,i),O.sunEl=35,O.opacity=.3,O.highlightColor=Ci(t,"paint","hillshade-highlight-color",k,y0,i),O.shadowColor=Ci(t,"paint","hillshade-shadow-color",k,y0,i),O.accentColor=Ci(t,"paint","hillshade-accent-color",k,y0,i)}),g.setVisible(t.layout?t.layout.visibility!=="none":!0)}const b=o;return g&&g.set("mapbox-source",b),g}function ST(n,e,t,r){const i=[];let s=null;if(e instanceof KO){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const E=r.projection?Ma(r.projection):s.getProjection();s=new sp(Object.assign(s.getProperties(),{maxResolution:Jp[0]/R0[E.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(R6(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(Jp[0]/R0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const a=n.layers;let o=[],d,g,b;for(let E=0,S=a.length;E<S;++E){const O=a[E],k=O.type;if(k=="heatmap"){console.debug(`layers[${E}].type "${k}" not supported`);continue}else b=O.source||Uj(a,O.ref),(!b||b!=g)&&(o.length&&(i.push(ET(d,o,n,t,e,r)),o=[]),d=doe(n,t,O,r),d instanceof kO||d instanceof Gv||(o=[]),g=d.get("mapbox-source")),o.push(O.id)}return i.push(ET(d,o,n,t,e,r)),Promise.all(i)}function hoe(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new KO({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:S2(e,t.accessToken);t=Fj(s,t),r=new Promise(function(a,o){Kj(e,t).then(function(d){ST(d,i,s,t).then(function(){a(i)}).catch(o)}).catch(function(d){o(new Error(`Could not load ${e}: ${d.message}`))})})}else r=new Promise(function(s,a){ST(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:S2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(a)});return r}function ET(n,e,t,r,i,s={}){let a=24,o=0;const d=t.layers;for(let g=0,b=d.length;g<b;++g){const E=d[g];e.indexOf(E.id)!==-1&&(a=Math.min("minzoom"in E?E.minzoom:0,a),o=Math.max("maxzoom"in E?E.maxzoom:24,o))}return new Promise(function(g,b){const E=function(){const O=n.getSource();if(!O||O.getState()==="error"){b(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in O){const k=O.getTileGrid();if(k){const U=k.getMinZoom();(a>0||U>0)&&n.setMaxResolution(Math.min(Iv(Math.max(0,a-1e-12),Jp),Iv(Math.max(0,U-1e-12),k.getResolutions()))),o<24&&n.setMinResolution(Iv(o,Jp))}}else a>0&&n.setMaxResolution(Iv(Math.max(0,a-1e-12),Jp));O instanceof wb||O instanceof ej?toe(n,t,e,Object.assign({styleUrl:r},s)).then(function(){coe(n,i),g()}).catch(b):g()};n.set("mapbox-layers",e);const S=i.getLayers();S.getArray().indexOf(n)===-1&&S.push(n),n.getSource()?E():n.once("change:source",E)})}function oi(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return oi=function(){return a},a}oi();function BT(n){return oi().f[0]++,oi().s[0]++,oi().b[1][0]++,!n||(oi().b[1][1]++,n.length<2)?(oi().b[0][0]++,oi().s[1]++,null):(oi().b[0][1]++,oi().s[2]++,le.jsx("span",{className:"maputnik-coords",children:n.map(e=>(oi().f[1]++,oi().s[3]++,String(e).padStart(7,""))).join(", ")}))}class Qj extends Zn.Component{constructor(t){oi().f[5]++,oi().s[7]++;super(t);On(this,"updateStyle");On(this,"map");On(this,"container",(oi().s[5]++,null));On(this,"overlay");On(this,"popupContainer",(oi().s[6]++,null));On(this,"closeOverlay",(oi().s[32]++,t=>{oi().f[12]++,oi().s[33]++,t.target.blur(),oi().s[34]++,this.overlay.setPosition(void 0)}));oi().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},oi().s[9]++,this.updateStyle=$2.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(oi().f[6]++,oi().s[10]++,this.map)oi().b[2][1]++;else{oi().b[2][0]++,oi().s[11]++;return}oi().s[12]++,this.map.getLayers().clear(),oi().s[13]++,hoe(this.map,t)}componentDidUpdate(t){oi().f[7]++,oi().s[14]++,this.props.mapStyle!==t.mapStyle?(oi().b[3][0]++,oi().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):oi().b[3][1]++}componentDidMount(){oi().f[8]++,oi().s[16]++,this.overlay=new dte({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(oi().s[17]++,new KO({target:this.container,overlays:[this.overlay],view:new sp({zoom:1,center:[180,-90]})}));oi().s[18]++,t.on("pointermove",i=>{oi().f[9]++;const s=(oi().s[19]++,E4(i.coordinate));oi().s[20]++,this.setState({cursor:[s[0].toFixed(2),s[1].toFixed(2)]})}),oi().s[21]++;const r=()=>{oi().f[10]++;const i=(oi().s[22]++,t.getView().getZoom()),s=(oi().s[23]++,E4(t.getView().getCenter()));oi().s[24]++,this.props.onChange({zoom:i,center:{lng:s[0],lat:s[1]}})};oi().s[25]++,r(),oi().s[26]++,t.on("moveend",r),oi().s[27]++,t.on("postrender",i=>{oi().f[11]++;const s=(oi().s[28]++,E4(t.getView().getCenter()));oi().s[29]++,this.setState({center:[s[0].toFixed(2),s[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),oi().s[30]++,this.map=t,oi().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){oi().f[13]++;const t=(oi().s[35]++,this.props.t);return oi().s[36]++,le.jsxs("div",{className:"maputnik-ol-container",children:[le.jsxs("div",{ref:r=>(oi().f[14]++,oi().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[le.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:""}),le.jsx(fU,{features:(oi().b[4][0]++,this.state.selectedFeatures||(oi().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),le.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(oi().b[5][0]++,this.props.debugToolbox&&(oi().b[5][1]++,le.jsxs("div",{className:"maputnik-ol-debug",children:[le.jsxs("div",{children:[le.jsxs("label",{children:[t("cursor:")," "]}),le.jsx("span",{children:BT(this.state.cursor)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[t("center:")," "]}),le.jsx("span",{children:BT(this.state.center)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[t("rotation:")," "]}),le.jsx("span",{children:this.state.rotation})]})]}))),le.jsx("div",{className:"maputnik-ol",ref:r=>(oi().f[15]++,oi().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}On(Qj,"defaultProps",(oi().s[4]++,{onMapLoaded:()=>{oi().f[2]++},onDataChange:()=>{oi().f[3]++},onLayerSelect:()=>{oi().f[4]++}}));const foe=(oi().s[39]++,$s()(Qj));var a5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var OT;function poe(){return OT||(OT=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(a5)),a5.exports}var moe=poe();const tm=La(moe);function cg(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return cg=function(){return a},a}cg();class goe extends Zn.Component{render(){cg().f[0]++;const e=(cg().s[0]++,{width:20,height:20,...this.props.style});return cg().s[1]++,this.props.isCollapsed?(cg().b[0][0]++,le.jsx(EH,{style:e})):(cg().b[0][1]++,le.jsx(SH,{style:e}))}}function $1(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return $1=function(){return a},a}$1();class yoe extends Zn.Component{render(){return $1().f[0]++,$1().s[0]++,le.jsx("li",{className:"maputnik-layer-list-group",children:le.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>($1().f[1]++,$1().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[le.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(goe,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function b_(){return b_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},b_.apply(null,arguments)}function voe(n){if(Array.isArray(n))return n}function _oe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,a,o=[],d=!0,g=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(d=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);d=!0);}catch(b){g=!0,i=b}finally{try{if(!d&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(g)throw i}}return o}}function lB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function qj(n,e){if(n){if(typeof n=="string")return lB(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?lB(n,e):void 0}}function Coe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yj(n,e){return voe(n)||_oe(n,e)||qj(n,e)||Coe()}function My(n){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(n)}function boe(n,e){if(My(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(My(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $j(n){var e=boe(n,"string");return My(e)=="symbol"?e:e+""}function Ka(n,e,t){return(e=$j(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){Ka(n,i,t[i])})}return n}function X_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xoe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,$j(r.key),r)}}function J_(n,e,t){return e&&xoe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function fs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function mI(n,e){if(e&&(My(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fs(n)}function x_(n){return x_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x_(n)}function uB(n,e){return uB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},uB(n,e)}function gI(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&uB(n,e)}var u5,IT;function woe(){if(IT)return u5;IT=1;var n=function(e,t,r,i,s,a,o,d){if(!e){var g;if(t===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var b=[r,i,s,a,o,d],E=0;g=new Error(t.replace(/%s/g,function(){return b[E++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}};return u5=n,u5}var Moe=woe();const Rg=La(Moe);function Soe(n){if(Array.isArray(n))return lB(n)}function Eoe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Boe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ooe(n){return Soe(n)||Eoe(n)||qj(n)||Boe()}var Ioe=function(){function n(){X_(this,n),Ka(this,"refs",{})}return J_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(koe)}}]),n}();function koe(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function Vj(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var m1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Hj=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function ob(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function sb(n,e){n.style["".concat(Hj,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function A5(n,e){n.style["".concat(Hj,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function kv(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function kT(n,e,t){return Math.max(n,Math.min(t,e))}function V1(n){return n.substr(-2)==="px"?parseFloat(n):0}function Toe(n){var e=window.getComputedStyle(n);return{bottom:V1(e.marginBottom),left:V1(e.marginLeft),right:V1(e.marginRight),top:V1(e.marginTop)}}function yI(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function c5(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function hv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function Poe(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function Eb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:Eb(n.parentNode,e,r)}}function Roe(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function TT(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,a="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Rg(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),a=o[1]}return Rg(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),a==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function Koe(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Rg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=Yj(i,2),a=s[0],o=s[1];return[TT({height:e,lockOffset:a,width:t}),TT({height:e,lockOffset:o,width:t})]}function Doe(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function Zj(n){return n instanceof HTMLElement?Doe(n)?n:Zj(n.parentNode):null}function Loe(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:V1(e.gridColumnGap),y:V1(e.gridRowGap)}:{x:0,y:0}}var ig={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},dg={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Foe(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=Ooe(r.querySelectorAll(e));return i.forEach(function(s,a){if(s.type!=="file"&&(s.value=t[a].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===dg.Canvas&&t[a].width>0&&t[a].height>0){var o=s.getContext("2d");o.drawImage(t[a],0,0)}}),r}function Uoe(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){gI(s,i);function s(){var a,o;X_(this,s);for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];return o=mI(this,(a=x_(s)).call.apply(a,[this].concat(g))),Ka(fs(fs(o)),"wrappedInstance",ui.createRef()),o}return J_(s,[{key:"componentDidMount",value:function(){var o=ax.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Rg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ui.createElement(n,b_({ref:o},this.props))}}]),s}(ui.Component),Ka(e,"displayName",yI("sortableHandle",n)),t}function PT(n){return n.sortableHandle!=null}var zoe=function(){function n(e,t){X_(this,n),this.container=e,this.onScrollCallback=t}return J_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,a=t.maxTranslate,o=t.width,d=t.height,g={x:0,y:0},b={x:1,y:1},E={x:10,y:10},S=this.container,O=S.scrollTop,k=S.scrollLeft,U=S.scrollHeight,z=S.scrollWidth,q=S.clientHeight,Q=S.clientWidth,re=O===0,X=U-O-q===0,Y=k===0,J=z-k-Q===0;i.y>=a.y-d/2&&!X?(g.y=1,b.y=E.y*Math.abs((a.y-d/2-i.y)/d)):i.x>=a.x-o/2&&!J?(g.x=1,b.x=E.x*Math.abs((a.x-o/2-i.x)/o)):i.y<=s.y+d/2&&!re?(g.y=-1,b.y=E.y*Math.abs((i.y-d/2-s.y)/d)):i.x<=s.x+o/2&&!Y&&(g.x=-1,b.x=E.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(g.x!==0||g.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var N={left:b.x*g.x,top:b.y*g.y};r.container.scrollTop+=N.top,r.container.scrollLeft+=N.left,r.onScrollCallback(N)},5))}}]),n}();function joe(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function Noe(n){var e=[dg.Input,dg.Textarea,dg.Select,dg.Option,dg.Button];return!!(e.indexOf(n.target.tagName)!==-1||kv(n.target,function(t){return t.contentEditable==="true"}))}var Xj={axis:fi.oneOf(["x","y","xy"]),contentWindow:fi.any,disableAutoscroll:fi.bool,distance:fi.number,getContainer:fi.func,getHelperDimensions:fi.func,helperClass:fi.string,helperContainer:fi.oneOfType([fi.func,typeof HTMLElement>"u"?fi.any:fi.instanceOf(HTMLElement)]),hideSortableGhost:fi.bool,keyboardSortingTransitionDuration:fi.number,lockAxis:fi.string,lockOffset:fi.oneOfType([fi.number,fi.string,fi.arrayOf(fi.oneOfType([fi.number,fi.string]))]),lockToContainerEdges:fi.bool,onSortEnd:fi.func,onSortMove:fi.func,onSortOver:fi.func,onSortStart:fi.func,pressDelay:fi.number,pressThreshold:fi.number,keyCodes:fi.shape({lift:fi.arrayOf(fi.number),drop:fi.arrayOf(fi.number),cancel:fi.arrayOf(fi.number),up:fi.arrayOf(fi.number),down:fi.arrayOf(fi.number)}),shouldCancelStart:fi.func,transitionDuration:fi.number,updateBeforeSortStart:fi.func,useDragHandle:fi.bool,useWindowAsScrollContainer:fi.bool},Jj={lift:[ig.SPACE],drop:[ig.SPACE],cancel:[ig.ESC],up:[ig.UP,ig.LEFT],down:[ig.DOWN,ig.RIGHT]},Goe={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:joe,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Jj,shouldCancelStart:Noe,transitionDuration:300,useWindowAsScrollContainer:!1},Woe=Object.keys(Xj);function Qoe(n){Rg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function qoe(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var eN=ui.createContext({manager:{}});function Yoe(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){gI(s,i);function s(a){var o;X_(this,s),o=mI(this,x_(s).call(this,a)),Ka(fs(fs(o)),"state",{}),Ka(fs(fs(o)),"handleStart",function(g){var b=o.props,E=b.distance,S=b.shouldCancelStart;if(!(g.button===2||S(g))){o.touched=!0,o.position=hv(g);var O=kv(g.target,function(re){return re.sortableInfo!=null});if(O&&O.sortableInfo&&o.nodeIsChild(O)&&!o.state.sorting){var k=o.props.useDragHandle,U=O.sortableInfo,z=U.index,q=U.collection,Q=U.disabled;if(Q||k&&!kv(g.target,PT))return;o.manager.active={collection:q,index:z},!Poe(g)&&g.target.tagName===dg.Anchor&&g.preventDefault(),E||(o.props.pressDelay===0?o.handlePress(g):o.pressTimer=setTimeout(function(){return o.handlePress(g)},o.props.pressDelay))}}}),Ka(fs(fs(o)),"nodeIsChild",function(g){return g.sortableInfo.manager===o.manager}),Ka(fs(fs(o)),"handleMove",function(g){var b=o.props,E=b.distance,S=b.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var O=hv(g),k={x:o.position.x-O.x,y:o.position.y-O.y},U=Math.abs(k.x)+Math.abs(k.y);o.delta=k,!E&&(!S||U>=S)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):E&&U>=E&&o.manager.isActive()&&o.handlePress(g)}}),Ka(fs(fs(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),Ka(fs(fs(o)),"cancel",function(){var g=o.props.distance,b=o.state.sorting;b||(g||clearTimeout(o.pressTimer),o.manager.active=null)}),Ka(fs(fs(o)),"handlePress",function(g){try{var b=o.manager.getActive(),E=function(){if(b){var S=function(){var de=Y.sortableInfo.index,we=Toe(Y),fe=Loe(o.container),be=o.scrollContainer.getBoundingClientRect(),Pe=U({index:de,node:Y,collection:J});if(o.node=Y,o.margin=we,o.gridGap=fe,o.width=Pe.width,o.height=Pe.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=Y.getBoundingClientRect(),o.containerBoundingRect=be,o.index=de,o.newIndex=de,o.axis={x:k.indexOf("x")>=0,y:k.indexOf("y")>=0},o.offsetEdge=Eb(Y,o.container),N?o.initialOffset=hv(l5({},g,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=hv(g),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(Foe(Y)),ob(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-we.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-we.top,"px"),width:"".concat(o.width,"px")}),N&&o.helper.focus(),q&&(o.sortableGhost=Y,ob(Y,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},N){var pe=X?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,it=pe.top,We=pe.left,$e=pe.width,ht=pe.height,De=it+ht,Ne=We+$e;o.axis.x&&(o.minTranslate.x=We-o.boundingClientRect.left,o.maxTranslate.x=Ne-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=it-o.boundingClientRect.top,o.maxTranslate.y=De-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(X?0:be.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(X?o.contentWindow.innerWidth:be.left+be.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(X?0:be.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(X?o.contentWindow.innerHeight:be.top+be.height)-o.boundingClientRect.top-o.height/2);z&&z.split(" ").forEach(function(at){return o.helper.classList.add(at)}),o.listenerNode=g.touches?g.target:o.contentWindow,N?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(m1.move.forEach(function(at){return o.listenerNode.addEventListener(at,o.handleSortMove,!1)}),m1.end.forEach(function(at){return o.listenerNode.addEventListener(at,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:de}),re&&re({node:Y,index:de,collection:J,isKeySorting:N,nodes:o.manager.getOrderedRefs(),helper:o.helper},g),N&&o.keyMove(0)},O=o.props,k=O.axis,U=O.getHelperDimensions,z=O.helperClass,q=O.hideSortableGhost,Q=O.updateBeforeSortStart,re=O.onSortStart,X=O.useWindowAsScrollContainer,Y=b.node,J=b.collection,N=o.manager.isKeySorting,ie=function(){if(typeof Q=="function"){o._awaitingUpdateBeforeSortStart=!0;var he=qoe(function(){var de=Y.sortableInfo.index;return Promise.resolve(Q({collection:J,index:de,node:Y,isKeySorting:N},g)).then(function(){})},function(de,we){if(o._awaitingUpdateBeforeSortStart=!1,de)throw we;return we});if(he&&he.then)return he.then(function(){})}}();return ie&&ie.then?ie.then(S):S(ie)}}();return Promise.resolve(E&&E.then?E.then(function(){}):void 0)}catch(S){return Promise.reject(S)}}),Ka(fs(fs(o)),"handleSortMove",function(g){var b=o.props.onSortMove;typeof g.preventDefault=="function"&&g.cancelable&&g.preventDefault(),o.updateHelperPosition(g),o.animateNodes(),o.autoscroll(),b&&b(g)}),Ka(fs(fs(o)),"handleSortEnd",function(g){var b=o.props,E=b.hideSortableGhost,S=b.onSortEnd,O=o.manager,k=O.active.collection,U=O.isKeySorting,z=o.manager.getOrderedRefs();o.listenerNode&&(U?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(m1.move.forEach(function(Y){return o.listenerNode.removeEventListener(Y,o.handleSortMove)}),m1.end.forEach(function(Y){return o.listenerNode.removeEventListener(Y,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),E&&o.sortableGhost&&ob(o.sortableGhost,{opacity:"",visibility:""});for(var q=0,Q=z.length;q<Q;q++){var re=z[q],X=re.node;re.edgeOffset=null,re.boundingClientRect=null,sb(X,null),A5(X,null),re.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof S=="function"&&S({collection:k,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:U,nodes:z},g),o.touched=!1}),Ka(fs(fs(o)),"autoscroll",function(){var g=o.props.disableAutoscroll,b=o.manager.isKeySorting;if(g){o.autoScroller.clear();return}if(b){var E=l5({},o.translate),S=0,O=0;o.axis.x&&(E.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),S=o.translate.x-E.x),o.axis.y&&(E.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),O=o.translate.y-E.y),o.translate=E,sb(o.helper,o.translate),o.scrollContainer.scrollLeft+=S,o.scrollContainer.scrollTop+=O;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),Ka(fs(fs(o)),"onAutoScroll",function(g){o.translate.x+=g.left,o.translate.y+=g.top,o.animateNodes()}),Ka(fs(fs(o)),"handleKeyDown",function(g){var b=g.keyCode,E=o.props,S=E.shouldCancelStart,O=E.keyCodes,k=O===void 0?{}:O,U=l5({},Jj,k);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!U.lift.includes(b)||S(g)||!o.isValidSortingTarget(g))||(g.stopPropagation(),g.preventDefault(),U.lift.includes(b)&&!o.manager.active?o.keyLift(g):U.drop.includes(b)&&o.manager.active?o.keyDrop(g):U.cancel.includes(b)?(o.newIndex=o.manager.active.index,o.keyDrop(g)):U.up.includes(b)?o.keyMove(-1):U.down.includes(b)&&o.keyMove(1))}),Ka(fs(fs(o)),"keyLift",function(g){var b=g.target,E=kv(b,function(U){return U.sortableInfo!=null}),S=E.sortableInfo,O=S.index,k=S.collection;o.initialFocusedNode=b,o.manager.isKeySorting=!0,o.manager.active={index:O,collection:k},o.handlePress(g)}),Ka(fs(fs(o)),"keyMove",function(g){var b=o.manager.getOrderedRefs(),E=b[b.length-1].node.sortableInfo.index,S=o.newIndex+g,O=o.newIndex;if(!(S<0||S>E)){o.prevIndex=O,o.newIndex=S;var k=Roe(o.newIndex,o.prevIndex,o.index),U=b.find(function(N){var ie=N.node;return ie.sortableInfo.index===k}),z=U.node,q=o.containerScrollDelta,Q=U.boundingClientRect||c5(z,q),re=U.translate||{x:0,y:0},X={top:Q.top+re.y-q.top,left:Q.left+re.x-q.left},Y=O<S,J={x:Y&&o.axis.x?z.offsetWidth-o.width:0,y:Y&&o.axis.y?z.offsetHeight-o.height:0};o.handleSortMove({pageX:X.left+J.x,pageY:X.top+J.y,ignoreTransition:g===0})}}),Ka(fs(fs(o)),"keyDrop",function(g){o.handleSortEnd(g),o.initialFocusedNode&&o.initialFocusedNode.focus()}),Ka(fs(fs(o)),"handleKeyEnd",function(g){o.manager.active&&o.keyDrop(g)}),Ka(fs(fs(o)),"isValidSortingTarget",function(g){var b=o.props.useDragHandle,E=g.target,S=kv(E,function(O){return O.sortableInfo!=null});return S&&S.sortableInfo&&!S.sortableInfo.disabled&&(b?PT(E):E.sortableInfo)});var d=new Ioe;return Qoe(a),o.manager=d,o.wrappedInstance=ui.createRef(),o.sortableContextValue={manager:d},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return J_(s,[{key:"componentDidMount",value:function(){var o=this,d=this.props.useWindowAsScrollContainer,g=this.getContainer();Promise.resolve(g).then(function(b){o.container=b,o.document=o.container.ownerDocument||document;var E=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof E=="function"?E():E,o.scrollContainer=d?o.document.scrollingElement||o.document.documentElement:Zj(o.container)||o.container,o.autoScroller=new zoe(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(S){return m1[S].forEach(function(O){return o.container.addEventListener(O,o.events[S],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(d){return m1[d].forEach(function(g){return o.container.removeEventListener(g,o.events[d])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var d=this.props,g=d.lockAxis,b=d.lockOffset,E=d.lockToContainerEdges,S=d.transitionDuration,O=d.keyboardSortingTransitionDuration,k=O===void 0?S:O,U=this.manager.isKeySorting,z=o.ignoreTransition,q=hv(o),Q={x:q.x-this.initialOffset.x,y:q.y-this.initialOffset.y};if(Q.y-=window.pageYOffset-this.initialWindowScroll.top,Q.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=Q,E){var re=Koe({height:this.height,lockOffset:b,width:this.width}),X=Yj(re,2),Y=X[0],J=X[1],N={x:this.width/2-Y.x,y:this.height/2-Y.y},ie={x:this.width/2-J.x,y:this.height/2-J.y};Q.x=kT(this.minTranslate.x+N.x,this.maxTranslate.x-ie.x,Q.x),Q.y=kT(this.minTranslate.y+N.y,this.maxTranslate.y-ie.y,Q.y)}g==="x"?Q.y=0:g==="y"&&(Q.x=0),U&&k&&!z&&A5(this.helper,k),sb(this.helper,Q)}},{key:"animateNodes",value:function(){var o=this.props,d=o.transitionDuration,g=o.hideSortableGhost,b=o.onSortOver,E=this.containerScrollDelta,S=this.windowScrollDelta,O=this.manager.getOrderedRefs(),k={left:this.offsetEdge.left+this.translate.x+E.left,top:this.offsetEdge.top+this.translate.y+E.top},U=this.manager.isKeySorting,z=this.newIndex;this.newIndex=null;for(var q=0,Q=O.length;q<Q;q++){var re=O[q].node,X=re.sortableInfo.index,Y=re.offsetWidth,J=re.offsetHeight,N={height:this.height>J?J/2:this.height/2,width:this.width>Y?Y/2:this.width/2},ie=U&&X>this.index&&X<=z,he=U&&X<this.index&&X>=z,de={x:0,y:0},we=O[q].edgeOffset;we||(we=Eb(re,this.container),O[q].edgeOffset=we,U&&(O[q].boundingClientRect=c5(re,E)));var fe=q<O.length-1&&O[q+1],be=q>0&&O[q-1];if(fe&&!fe.edgeOffset&&(fe.edgeOffset=Eb(fe.node,this.container),U&&(fe.boundingClientRect=c5(fe.node,E))),X===this.index){g&&(this.sortableGhost=re,ob(re,{opacity:0,visibility:"hidden"}));continue}d&&A5(re,d),this.axis.x?this.axis.y?he||X<this.index&&(k.left+S.left-N.width<=we.left&&k.top+S.top<=we.top+N.height||k.top+S.top+N.height<=we.top)?(de.x=this.width+this.marginOffset.x,we.left+de.x>this.containerBoundingRect.width-N.width&&fe&&(de.x=fe.edgeOffset.left-we.left,de.y=fe.edgeOffset.top-we.top),this.newIndex===null&&(this.newIndex=X)):(ie||X>this.index&&(k.left+S.left+N.width>=we.left&&k.top+S.top+N.height>=we.top||k.top+S.top+N.height>=we.top+J))&&(de.x=-(this.width+this.marginOffset.x),we.left+de.x<this.containerBoundingRect.left+N.width&&be&&(de.x=be.edgeOffset.left-we.left,de.y=be.edgeOffset.top-we.top),this.newIndex=X):ie||X>this.index&&k.left+S.left+N.width>=we.left?(de.x=-(this.width+this.marginOffset.x),this.newIndex=X):(he||X<this.index&&k.left+S.left<=we.left+N.width)&&(de.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=X)):this.axis.y&&(ie||X>this.index&&k.top+S.top+N.height>=we.top?(de.y=-(this.height+this.marginOffset.y),this.newIndex=X):(he||X<this.index&&k.top+S.top<=we.top+N.height)&&(de.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=X))),sb(re,de),O[q].translate=de}this.newIndex==null&&(this.newIndex=this.index),U&&(this.newIndex=z);var Pe=U?this.prevIndex:z;b&&this.newIndex!==Pe&&b({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:Pe,isKeySorting:U,nodes:O,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Rg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?ax.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ui.createElement(eN.Provider,{value:this.sortableContextValue},ui.createElement(n,b_({ref:o},Vj(this.props,Woe))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(ui.Component),Ka(e,"displayName",yI("sortableList",n)),Ka(e,"defaultProps",Goe),Ka(e,"propTypes",Xj),t}var tN={index:fi.number.isRequired,collection:fi.oneOfType([fi.number,fi.string]),disabled:fi.bool},$oe=Object.keys(tN);function Voe(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){gI(s,i);function s(){var a,o;X_(this,s);for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];return o=mI(this,(a=x_(s)).call.apply(a,[this].concat(g))),Ka(fs(fs(o)),"wrappedInstance",ui.createRef()),o}return J_(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,d=o.collection,g=o.disabled,b=o.index,E=ax.findDOMNode(this);E.sortableInfo={collection:d,disabled:g,index:b,manager:this.context.manager},this.node=E,this.ref={node:E},this.context.manager.add(d,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return Rg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return ui.createElement(n,b_({ref:o},Vj(this.props,$oe)))}}]),s}(ui.Component),Ka(e,"displayName",yI("sortableElement",n)),Ka(e,"contextType",eN),Ka(e,"propTypes",tN),Ka(e,"defaultProps",{collection:0}),t}function ro(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ro=function(){return a},a}ro();const Hoe=(ro().s[0]++,Uoe(n=>(ro().f[0]++,ro().s[1]++,le.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[le.jsx(hU,{className:"layer-handle__icon",type:n.layerType}),le.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class d5 extends Zn.Component{renderIcon(){switch(ro().f[1]++,ro().s[2]++,this.props.action){case"duplicate":return ro().b[0][0]++,ro().s[3]++,le.jsx(_H,{});case"show":return ro().b[0][1]++,ro().s[4]++,le.jsx(vH,{});case"hide":return ro().b[0][2]++,ro().s[5]++,le.jsx(yH,{});case"delete":return ro().b[0][3]++,ro().s[6]++,le.jsx(ky,{})}}render(){ro().f[2]++;const{classBlockName:e,classBlockModifier:t}=(ro().s[7]++,this.props);let r=(ro().s[8]++,"");return ro().s[9]++,e?(ro().b[1][0]++,ro().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,ro().s[11]++,t?(ro().b[2][0]++,ro().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):ro().b[2][1]++):ro().b[1][1]++,ro().s[13]++,le.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class AB extends Zn.Component{getChildContext(){return ro().f[6]++,ro().s[16]++,{reactIconBase:{size:14}}}render(){ro().f[7]++;const e=(ro().s[17]++,this.props.visibility==="visible"?(ro().b[3][0]++,"show"):(ro().b[3][1]++,"hide"));return ro().s[18]++,le.jsxs("li",{id:this.props.id,onClick:t=>(ro().f[8]++,ro().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:tm({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[le.jsx(Hoe,{...this.props}),le.jsx("span",{style:{flexGrow:1}}),le.jsx(d5,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(ro().f[9]++,ro().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),le.jsx(d5,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(ro().f[10]++,ro().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),le.jsx(d5,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(ro().f[11]++,ro().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}On(AB,"defaultProps",(ro().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{ro().f[3]++},onLayerDestroy:()=>{ro().f[4]++},onLayerVisibilityToggle:()=>{ro().f[5]++}})),On(AB,"childContextTypes",(ro().s[15]++,{reactIconBase:fi.object}));const Zoe=(ro().s[23]++,Voe(n=>(ro().f[12]++,ro().s[24]++,le.jsx(AB,{...n}))));function B2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return B2=function(){return a},a}B2();class Ha extends Zn.Component{render(){return B2().f[0]++,B2().s[0]++,le.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:tm("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nN=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],O2=nN.join(","),rN=typeof Element>"u",Kg=rN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,I2=!rN&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},k2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",a=s||t&&e&&n(e.parentNode);return a},Xoe=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},iN=function(e,t,r){if(k2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(O2));return t&&Kg.call(e,O2)&&i.unshift(e),i=i.filter(r),i},oN=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var a=s.shift();if(!k2(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),d=o.length?o:a.children,g=n(d,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:a,candidates:g})}else{var b=Kg.call(a,O2);b&&r.filter(a)&&(t||!e.includes(a))&&i.push(a);var E=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),S=!k2(E,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(E&&S){var O=n(E===!0?a.children:E.children,!0,r);r.flatten?i.push.apply(i,O):i.push({scopeParent:a,candidates:O})}else s.unshift.apply(s,a.children)}}return i},sN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},v0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Xoe(e))&&!sN(e)?0:e.tabIndex},Joe=function(e,t){var r=v0(e);return r<0&&t&&!sN(e)?0:r},ese=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},aN=function(e){return e.tagName==="INPUT"},tse=function(e){return aN(e)&&e.type==="hidden"},nse=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},rse=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},ise=function(e){if(!e.name)return!0;var t=e.form||I2(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=rse(i,e.form);return!s||s===e},ose=function(e){return aN(e)&&e.type==="radio"},sse=function(e){return ose(e)&&!ise(e)},ase=function(e){var t,r=e&&I2(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var a,o,d;for(s=!!((a=i)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(d=e.ownerDocument)!==null&&d!==void 0&&d.contains(e));!s&&i;){var g,b,E;r=I2(i),i=(g=r)===null||g===void 0?void 0:g.host,s=!!((b=i)!==null&&b!==void 0&&(E=b.ownerDocument)!==null&&E!==void 0&&E.contains(i))}}return s},RT=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},lse=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Kg.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(Kg.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var d=e.parentElement,g=I2(e);if(d&&!d.shadowRoot&&i(d)===!0)return RT(e);e.assignedSlot?e=e.assignedSlot:!d&&g!==e.ownerDocument?e=g.host:e=d}e=o}if(ase(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return RT(e);return!1},use=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Kg.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},T2=function(e,t){return!(t.disabled||k2(t)||tse(t)||lse(t,e)||nse(t)||use(t))},cB=function(e,t){return!(sse(t)||v0(t)<0||!T2(e,t))},Ase=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},cse=function n(e){var t=[],r=[];return e.forEach(function(i,s){var a=!!i.scopeParent,o=a?i.scopeParent:i,d=Joe(o,a),g=a?n(i.candidates):o;d===0?a?t.push.apply(t,g):t.push(o):r.push({documentOrder:s,tabIndex:d,item:i,isScope:a,content:g})}),r.sort(ese).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},lN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=oN([e],t.includeContainer,{filter:cB.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Ase}):r=iN(e,t.includeContainer,cB.bind(null,t)),cse(r)},uN=function(e,t){t=t||{};var r;return t.getShadowRoot?r=oN([e],t.includeContainer,{filter:T2.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=iN(e,t.includeContainer,T2.bind(null,t)),r},ug=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Kg.call(e,O2)===!1?!1:cB(t,e)},dse=nN.concat("iframe").join(","),Bb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Kg.call(e,dse)===!1?!1:T2(t,e)};const hse=Object.freeze(Object.defineProperty({__proto__:null,focusable:uN,getTabIndex:v0,isFocusable:Bb,isTabbable:ug,tabbable:lN},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function KT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function DT(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KT(Object(t),!0).forEach(function(r){fse(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fse(n,e,t){return e=mse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pse(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mse(n){var e=pse(n,"string");return typeof e=="symbol"?e:String(e)}var LT={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},gse=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},yse=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Yv=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},vse=function(e){return Yv(e)&&!e.shiftKey},_se=function(e){return Yv(e)&&e.shiftKey},FT=function(e){return setTimeout(e,0)},UT=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},fv=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},ab=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Cse=[],bse=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Cse,s=DT({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:vse,isKeyBackward:_se},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,d=function(fe,be,Pe){return fe&&fe[be]!==void 0?fe[be]:s[Pe||be]},g=function(fe,be){var Pe=typeof(be==null?void 0:be.composedPath)=="function"?be.composedPath():void 0;return a.containerGroups.findIndex(function(pe){var it=pe.container,We=pe.tabbableNodes;return it.contains(fe)||(Pe==null?void 0:Pe.includes(it))||We.find(function($e){return $e===fe})})},b=function(fe){var be=s[fe];if(typeof be=="function"){for(var Pe=arguments.length,pe=new Array(Pe>1?Pe-1:0),it=1;it<Pe;it++)pe[it-1]=arguments[it];be=be.apply(void 0,pe)}if(be===!0&&(be=void 0),!be){if(be===void 0||be===!1)return be;throw new Error("`".concat(fe,"` was specified but was not a node, or did not return a node"))}var We=be;if(typeof be=="string"&&(We=r.querySelector(be),!We))throw new Error("`".concat(fe,"` as selector refers to no known node"));return We},E=function(){var fe=b("initialFocus");if(fe===!1)return!1;if(fe===void 0||!Bb(fe,s.tabbableOptions))if(g(r.activeElement)>=0)fe=r.activeElement;else{var be=a.tabbableGroups[0],Pe=be&&be.firstTabbableNode;fe=Pe||b("fallbackFocus")}if(!fe)throw new Error("Your focus-trap needs to have at least one focusable element");return fe},S=function(){if(a.containerGroups=a.containers.map(function(fe){var be=lN(fe,s.tabbableOptions),Pe=uN(fe,s.tabbableOptions),pe=be.length>0?be[0]:void 0,it=be.length>0?be[be.length-1]:void 0,We=Pe.find(function(De){return ug(De)}),$e=Pe.slice().reverse().find(function(De){return ug(De)}),ht=!!be.find(function(De){return v0(De)>0});return{container:fe,tabbableNodes:be,focusableNodes:Pe,posTabIndexesFound:ht,firstTabbableNode:pe,lastTabbableNode:it,firstDomTabbableNode:We,lastDomTabbableNode:$e,nextTabbableNode:function(Ne){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,wt=be.indexOf(Ne);return wt<0?at?Pe.slice(Pe.indexOf(Ne)+1).find(function(Ct){return ug(Ct)}):Pe.slice(0,Pe.indexOf(Ne)).reverse().find(function(Ct){return ug(Ct)}):be[wt+(at?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(fe){return fe.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!b("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(fe){return fe.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},O=function we(fe){var be=fe.activeElement;if(be)return be.shadowRoot&&be.shadowRoot.activeElement!==null?we(be.shadowRoot):be},k=function we(fe){if(fe!==!1&&fe!==O(document)){if(!fe||!fe.focus){we(E());return}fe.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=fe,gse(fe)&&fe.select()}},U=function(fe){var be=b("setReturnFocus",fe);return be||(be===!1?!1:fe)},z=function(fe){var be=fe.target,Pe=fe.event,pe=fe.isBackward,it=pe===void 0?!1:pe;be=be||ab(Pe),S();var We=null;if(a.tabbableGroups.length>0){var $e=g(be,Pe),ht=$e>=0?a.containerGroups[$e]:void 0;if($e<0)it?We=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:We=a.tabbableGroups[0].firstTabbableNode;else if(it){var De=UT(a.tabbableGroups,function(Lt){var Kt=Lt.firstTabbableNode;return be===Kt});if(De<0&&(ht.container===be||Bb(be,s.tabbableOptions)&&!ug(be,s.tabbableOptions)&&!ht.nextTabbableNode(be,!1))&&(De=$e),De>=0){var Ne=De===0?a.tabbableGroups.length-1:De-1,at=a.tabbableGroups[Ne];We=v0(be)>=0?at.lastTabbableNode:at.lastDomTabbableNode}else Yv(Pe)||(We=ht.nextTabbableNode(be,!1))}else{var wt=UT(a.tabbableGroups,function(Lt){var Kt=Lt.lastTabbableNode;return be===Kt});if(wt<0&&(ht.container===be||Bb(be,s.tabbableOptions)&&!ug(be,s.tabbableOptions)&&!ht.nextTabbableNode(be))&&(wt=$e),wt>=0){var Ct=wt===a.tabbableGroups.length-1?0:wt+1,ft=a.tabbableGroups[Ct];We=v0(be)>=0?ft.firstTabbableNode:ft.firstDomTabbableNode}else Yv(Pe)||(We=ht.nextTabbableNode(be))}}else We=b("fallbackFocus");return We},q=function(fe){var be=ab(fe);if(!(g(be,fe)>=0)){if(fv(s.clickOutsideDeactivates,fe)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}fv(s.allowOutsideClick,fe)||fe.preventDefault()}},Q=function(fe){var be=ab(fe),Pe=g(be,fe)>=0;if(Pe||be instanceof Document)Pe&&(a.mostRecentlyFocusedNode=be);else{fe.stopImmediatePropagation();var pe,it=!0;if(a.mostRecentlyFocusedNode)if(v0(a.mostRecentlyFocusedNode)>0){var We=g(a.mostRecentlyFocusedNode),$e=a.containerGroups[We].tabbableNodes;if($e.length>0){var ht=$e.findIndex(function(De){return De===a.mostRecentlyFocusedNode});ht>=0&&(s.isKeyForward(a.recentNavEvent)?ht+1<$e.length&&(pe=$e[ht+1],it=!1):ht-1>=0&&(pe=$e[ht-1],it=!1))}}else a.containerGroups.some(function(De){return De.tabbableNodes.some(function(Ne){return v0(Ne)>0})})||(it=!1);else it=!1;it&&(pe=z({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),k(pe||a.mostRecentlyFocusedNode||E())}a.recentNavEvent=void 0},re=function(fe){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=fe;var Pe=z({event:fe,isBackward:be});Pe&&(Yv(fe)&&fe.preventDefault(),k(Pe))},X=function(fe){if(yse(fe)&&fv(s.escapeDeactivates,fe)!==!1){fe.preventDefault(),o.deactivate();return}(s.isKeyForward(fe)||s.isKeyBackward(fe))&&re(fe,s.isKeyBackward(fe))},Y=function(fe){var be=ab(fe);g(be,fe)>=0||fv(s.clickOutsideDeactivates,fe)||fv(s.allowOutsideClick,fe)||(fe.preventDefault(),fe.stopImmediatePropagation())},J=function(){if(a.active)return LT.activateTrap(i,o),a.delayInitialFocusTimer=s.delayInitialFocus?FT(function(){k(E())}):k(E()),r.addEventListener("focusin",Q,!0),r.addEventListener("mousedown",q,{capture:!0,passive:!1}),r.addEventListener("touchstart",q,{capture:!0,passive:!1}),r.addEventListener("click",Y,{capture:!0,passive:!1}),r.addEventListener("keydown",X,{capture:!0,passive:!1}),o},N=function(){if(a.active)return r.removeEventListener("focusin",Q,!0),r.removeEventListener("mousedown",q,!0),r.removeEventListener("touchstart",q,!0),r.removeEventListener("click",Y,!0),r.removeEventListener("keydown",X,!0),o},ie=function(fe){var be=fe.some(function(Pe){var pe=Array.from(Pe.removedNodes);return pe.some(function(it){return it===a.mostRecentlyFocusedNode})});be&&k(E())},he=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ie):void 0,de=function(){he&&(he.disconnect(),a.active&&!a.paused&&a.containers.map(function(fe){he.observe(fe,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(fe){if(a.active)return this;var be=d(fe,"onActivate"),Pe=d(fe,"onPostActivate"),pe=d(fe,"checkCanFocusTrap");pe||S(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,be==null||be();var it=function(){pe&&S(),J(),de(),Pe==null||Pe()};return pe?(pe(a.containers.concat()).then(it,it),this):(it(),this)},deactivate:function(fe){if(!a.active)return this;var be=DT({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},fe);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,N(),a.active=!1,a.paused=!1,de(),LT.deactivateTrap(i,o);var Pe=d(be,"onDeactivate"),pe=d(be,"onPostDeactivate"),it=d(be,"checkCanReturnFocus"),We=d(be,"returnFocus","returnFocusOnDeactivate");Pe==null||Pe();var $e=function(){FT(function(){We&&k(U(a.nodeFocusedBeforeActivation)),pe==null||pe()})};return We&&it?(it(U(a.nodeFocusedBeforeActivation)).then($e,$e),this):($e(),this)},pause:function(fe){if(a.paused||!a.active)return this;var be=d(fe,"onPause"),Pe=d(fe,"onPostPause");return a.paused=!0,be==null||be(),N(),de(),Pe==null||Pe(),this},unpause:function(fe){if(!a.paused||!a.active)return this;var be=d(fe,"onUnpause"),Pe=d(fe,"onPostUnpause");return a.paused=!1,be==null||be(),S(),J(),de(),Pe==null||Pe(),this},updateContainerElements:function(fe){var be=[].concat(fe).filter(Boolean);return a.containers=be.map(function(Pe){return typeof Pe=="string"?r.querySelector(Pe):Pe}),a.active&&S(),de(),this}},o.updateContainerElements(e),o};const xse=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:bse},Symbol.toStringTag,{value:"Module"})),wse=_B(xse),Mse=_B(hse);var h5,zT;function Sse(){if(zT)return h5;zT=1;function n(J){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},n(J)}function e(J,N){if(!(J instanceof N))throw new TypeError("Cannot call a class as a function")}function t(J,N){for(var ie=0;ie<N.length;ie++){var he=N[ie];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(J,S(he.key),he)}}function r(J,N,ie){return t(J.prototype,N),Object.defineProperty(J,"prototype",{writable:!1}),J}function i(J,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(N&&N.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),Object.defineProperty(J,"prototype",{writable:!1}),N&&s(J,N)}function s(J,N){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,de){return he.__proto__=de,he},s(J,N)}function a(J){var N=g();return function(){var he=b(J),de;if(N){var we=b(this).constructor;de=Reflect.construct(he,arguments,we)}else de=he.apply(this,arguments);return o(this,de)}}function o(J,N){if(N&&(n(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(J)}function d(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(J){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},b(J)}function E(J,N,ie){return N=S(N),N in J?Object.defineProperty(J,N,{value:ie,enumerable:!0,configurable:!0,writable:!0}):J[N]=ie,J}function S(J){var N=O(J,"string");return n(N)==="symbol"?N:String(N)}function O(J,N){if(n(J)!=="object"||J===null)return J;var ie=J[Symbol.toPrimitive];if(ie!==void 0){var he=ie.call(J,N||"default");if(n(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(J)}var k=Fa(),U=dp(),z=wse,q=z.createFocusTrap,Q=Mse,re=Q.isFocusable,X=function(J){i(ie,J);var N=a(ie);function ie(he){var de;e(this,ie),de=N.call(this,he),E(d(de),"getNodeForOption",function(be){var Pe,pe=(Pe=this.internalOptions[be])!==null&&Pe!==void 0?Pe:this.originalOptions[be];if(typeof pe=="function"){for(var it=arguments.length,We=new Array(it>1?it-1:0),$e=1;$e<it;$e++)We[$e-1]=arguments[$e];pe=pe.apply(void 0,We)}if(pe===!0&&(pe=void 0),!pe){if(pe===void 0||pe===!1)return pe;throw new Error("`".concat(be,"` was specified but was not a node, or did not return a node"))}var ht=pe;if(typeof pe=="string"){var De;if(ht=(De=this.getDocument())===null||De===void 0?void 0:De.querySelector(pe),!ht)throw new Error("`".concat(be,"` as selector refers to no known node"))}return ht}),de.handleDeactivate=de.handleDeactivate.bind(d(de)),de.handlePostDeactivate=de.handlePostDeactivate.bind(d(de)),de.handleClickOutsideDeactivates=de.handleClickOutsideDeactivates.bind(d(de)),de.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:de.handleDeactivate,onPostDeactivate:de.handlePostDeactivate,clickOutsideDeactivates:de.handleClickOutsideDeactivates},de.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var we=he.focusTrapOptions;for(var fe in we)if(Object.prototype.hasOwnProperty.call(we,fe)){if(fe==="returnFocusOnDeactivate"||fe==="onDeactivate"||fe==="onPostDeactivate"||fe==="checkCanReturnFocus"||fe==="clickOutsideDeactivates"){de.originalOptions[fe]=we[fe];continue}de.internalOptions[fe]=we[fe]}return de.outsideClick=null,de.focusTrapElements=he.containerElements||[],de.updatePreviousElement(),de}return r(ie,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var de=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return de||(de===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var de=this.getDocument();de&&(this.previouslyFocusedElement=de.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(de){var we=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,de):this.originalOptions.clickOutsideDeactivates;return we&&(this.outsideClick={target:de.target,allowDeactivation:we}),we}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var de=this,we=function(){var be=de.getReturnFocusNode(),Pe=!!(de.originalOptions.returnFocusOnDeactivate&&be!==null&&be!==void 0&&be.focus&&(!de.outsideClick||de.outsideClick.allowDeactivation&&!re(de.outsideClick.target,de.internalOptions.tabbableOptions))),pe=de.internalOptions.preventScroll,it=pe===void 0?!1:pe;Pe&&be.focus({preventScroll:it}),de.originalOptions.onPostDeactivate&&de.originalOptions.onPostDeactivate.call(null),de.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(we,we):we()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var de=this.focusTrapElements.some(Boolean);de&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(de){if(this.focusTrap){de.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var we=!de.active&&this.props.active,fe=de.active&&!this.props.active,be=!de.paused&&this.props.paused,Pe=de.paused&&!this.props.paused;if(we&&(this.updatePreviousElement(),this.focusTrap.activate()),fe){this.deactivateTrap();return}be&&this.focusTrap.pause(),Pe&&this.focusTrap.unpause()}else de.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var de=this,we=this.props.children?k.Children.only(this.props.children):void 0;if(we){if(we.type&&we.type===k.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var fe=function(pe){var it=de.props.containerElements;we&&(typeof we.ref=="function"?we.ref(pe):we.ref&&(we.ref.current=pe)),de.focusTrapElements=it||[pe]},be=k.cloneElement(we,{ref:fe});return be}return null}}]),ie}(k.Component),Y=typeof Element>"u"?Function:Element;return X.propTypes={active:U.bool,paused:U.bool,focusTrapOptions:U.shape({document:U.object,onActivate:U.func,onPostActivate:U.func,checkCanFocusTrap:U.func,onPause:U.func,onPostPause:U.func,onUnpause:U.func,onPostUnpause:U.func,onDeactivate:U.func,onPostDeactivate:U.func,checkCanReturnFocus:U.func,initialFocus:U.oneOfType([U.instanceOf(Y),U.string,U.bool,U.func]),fallbackFocus:U.oneOfType([U.instanceOf(Y),U.string,U.func]),escapeDeactivates:U.oneOfType([U.bool,U.func]),clickOutsideDeactivates:U.oneOfType([U.bool,U.func]),returnFocusOnDeactivate:U.bool,setReturnFocus:U.oneOfType([U.instanceOf(Y),U.string,U.bool,U.func]),allowOutsideClick:U.oneOfType([U.bool,U.func]),preventScroll:U.bool,tabbableOptions:U.shape({displayCheck:U.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:U.oneOfType([U.bool,U.func])}),trapStack:U.array,isKeyForward:U.func,isKeyBackward:U.func}),containerElements:U.arrayOf(U.instanceOf(Y)),children:U.oneOfType([U.element,U.instanceOf(Y)])},X.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:q},h5=X,h5}var f5={exports:{}},jT;function Ese(){return jT||(jT=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var E=document.documentElement,S=document.createElement("div");return S.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),E.appendChild(S),r=S.offsetWidth-S.clientWidth,E.removeChild(S),r}function a(){return document.documentElement.scrollHeight>window.innerHeight}function o(E){if(!(typeof document>"u"||t)){var S=document.documentElement;i=window.pageYOffset,a()?S.style.width="calc(100% - "+s()+"px)":S.style.width="100%",S.style.position="fixed",S.style.top=-i+"px",S.style.overflow="hidden",t=!0}}function d(){if(!(typeof document>"u"||!t)){var E=document.documentElement;E.style.width="",E.style.position="",E.style.top="",E.style.overflow="",window.scroll(0,i),t=!1}}function g(){if(t){d();return}o()}var b={on:o,off:d,toggle:g};n.exports=b})()}(f5)),f5.exports}var p5,NT;function Bse(){if(NT)return p5;NT=1;function n(re){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},n(re)}function e(re,X){if(!(re instanceof X))throw new TypeError("Cannot call a class as a function")}function t(re,X){for(var Y=0;Y<X.length;Y++){var J=X[Y];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(re,J.key,J)}}function r(re,X,Y){return X&&t(re.prototype,X),Object.defineProperty(re,"prototype",{writable:!1}),re}function i(re,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(X&&X.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),Object.defineProperty(re,"prototype",{writable:!1}),X&&s(re,X)}function s(re,X){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,N){return J.__proto__=N,J},s(re,X)}function a(re){var X=g();return function(){var J=b(re),N;if(X){var ie=b(this).constructor;N=Reflect.construct(J,arguments,ie)}else N=J.apply(this,arguments);return o(this,N)}}function o(re,X){if(X&&(n(X)==="object"||typeof X=="function"))return X;if(X!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(re)}function d(re){if(re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(re){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},b(re)}function E(re,X,Y){return X in re?Object.defineProperty(re,X,{value:Y,enumerable:!0,configurable:!0,writable:!0}):re[X]=Y,re}var S=Fa(),O=I_(),k=Sse(),U=Ese(),z=function(re){i(Y,re);var X=a(Y);function Y(J){var N;if(e(this,Y),N=X.call(this,J),E(d(N),"getApplicationNode",function(){return N.props.getApplicationNode?N.props.getApplicationNode():N.props.applicationNode}),E(d(N),"checkUnderlayClick",function(ie){N.dialogNode&&N.dialogNode.contains(ie.target)||ie.pageX>ie.target.ownerDocument.documentElement.offsetWidth||ie.pageY>ie.target.ownerDocument.documentElement.offsetHeight||N.exit(ie)}),E(d(N),"checkDocumentKeyDown",function(ie){N.props.escapeExits&&(ie.key==="Escape"||ie.key==="Esc"||ie.keyCode===27)&&N.exit(ie)}),E(d(N),"exit",function(ie){N.props.onExit&&N.props.onExit(ie)}),!J.titleText&&!J.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return N}return r(Y,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var N=this.getApplicationNode();setTimeout(function(){N&&N.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&U.on()}},{key:"componentDidUpdate",value:function(N){N.scrollDisabled&&!this.props.scrollDisabled?U.off():!N.scrollDisabled&&this.props.scrollDisabled&&U.on(),this.props.escapeExits&&!N.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&N.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&U.off();var N=this.getApplicationNode();N&&N.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var N=this;setTimeout(function(){document.addEventListener("keydown",N.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var N=this;setTimeout(function(){document.removeEventListener("keydown",N.checkDocumentKeyDown)})}},{key:"render",value:function(){var N=this.props,ie={};if(N.includeDefaultStyles&&(ie={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},N.underlayColor&&(ie.background=N.underlayColor),N.underlayClickExits&&(ie.cursor="pointer")),N.underlayStyle)for(var he in N.underlayStyle)N.underlayStyle.hasOwnProperty(he)&&(ie[he]=N.underlayStyle[he]);var de={className:N.underlayClass,style:ie};N.underlayClickExits&&(de.onMouseDown=this.checkUnderlayClick);for(var we in this.props.underlayProps)de[we]=this.props.underlayProps[we];var fe={};N.includeDefaultStyles&&(fe={display:"inline-block",height:"100%",verticalAlign:"middle"});var be={key:"a",style:fe},Pe={};if(N.includeDefaultStyles&&(Pe={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:N.focusDialog?0:null},N.verticallyCenter&&(Pe.verticalAlign="middle",Pe.top=0)),N.dialogStyle)for(var pe in N.dialogStyle)N.dialogStyle.hasOwnProperty(pe)&&(Pe[pe]=N.dialogStyle[pe]);var it={key:"b",ref:(function(De){this.dialogNode=De}).bind(this),role:N.alert?"alertdialog":"dialog",id:N.dialogId,className:N.dialogClass,style:Pe};N.titleId?it["aria-labelledby"]=N.titleId:N.titleText&&(it["aria-label"]=N.titleText),N.focusDialog&&(it.tabIndex="-1");for(var We in N)/^(data-|aria-)/.test(We)&&(it[We]=N[We]);var $e=[S.createElement("div",it,N.children)];N.verticallyCenter&&$e.unshift(S.createElement("div",be));var ht=N.focusTrapOptions||{};return(N.focusDialog||N.initialFocus)&&(ht.initialFocus=N.focusDialog?"#".concat(this.props.dialogId):N.initialFocus),ht.escapeDeactivates=N.escapeExits,S.createElement(k,{focusTrapOptions:ht,paused:N.focusTrapPaused},S.createElement("div",de,$e))}}]),Y}(S.Component);E(z,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function q(re,X){if(!window.document)return function(){return null};X=X||{};var Y=function(J){i(ie,J);var N=a(ie);function ie(){var he;e(this,ie);for(var de=arguments.length,we=new Array(de),fe=0;fe<de;fe++)we[fe]=arguments[fe];return he=N.call.apply(N,[this].concat(we)),E(d(he),"container",null),he}return r(ie,[{key:"componentDidMount",value:function(){X.renderTo?this.container=typeof X.renderTo=="string"?document.querySelector(X.renderTo):X.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){X.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:O.createPortal(S.createElement(re,this.props,this.props.children),this.container)}}]),ie}(S.Component);return E(Y,"defaultProps",{mounted:!0}),Y}var Q=q(z);return Q.renderTo=function(re){return q(z,{renderTo:re})},p5=Q,p5}var Ose=Bse();const Ise=La(Ose);function gA(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gA=function(){return a},a}gA();class AN extends Zn.Component{constructor(){super(...arguments);On(this,"onClose",(gA().s[1]++,()=>{gA().f[0]++,gA().s[2]++,document.activeElement?(gA().b[0][0]++,gA().s[3]++,document.activeElement.blur()):gA().b[0][1]++,gA().s[4]++,setTimeout(()=>{gA().f[1]++,gA().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){gA().f[2]++;const t=(gA().s[6]++,this.props.t);return gA().s[7]++,this.props.isOpen?(gA().b[1][0]++,gA().s[8]++,le.jsx(Ise,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:le.jsxs("div",{className:tm("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[le.jsxs("header",{className:"maputnik-modal-header",children:[le.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),le.jsx("span",{className:"maputnik-modal-header-space"}),le.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:le.jsx(BH,{})})]}),le.jsx("div",{className:"maputnik-modal-scroller",children:le.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(gA().b[1][1]++,gA().s[9]++,!1)}}On(AN,"defaultProps",(gA().s[0]++,{underlayClickExits:!0}));const L0=(gA().s[10]++,$s()(AN)),kse=8,Tse={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:`A URL template for loading signed-distance-field glyph sets in PBF format. 

The URL must include:

 - \`{fontstack}\` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the text-font property of a symbol layer. 

 - \`{range}\` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.

This property is required if any layer uses the \`text-field\` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).`,example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},Pse={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},Rse=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Kse={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Dse={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Lse={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Fse={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},Use={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},zse={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},jse={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},Nse=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Gse={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Wse={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Qse={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},qse={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Yse={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},$se=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),Vse={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Hse={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Zse={type:"array",value:"*",doc:"A filter selects specific features from a layer."},Xse={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},Jse={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},eae={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},tae={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},nae=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string","value","expression"],"result":"value"},"value":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["var","density"]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["JSON object or array"],"result":"array | object"},"value":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","example":{"syntax":{"method":["value","string?","number?"],"result":"array"},"value":["array",["literal",["a","b","c"]],"string",3]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","example":{"syntax":{"method":["number","value"],"result":"value"},"value":["at",1,["literal",["a","b","c"]]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","example":{"syntax":{"method":["value","value"],"result":"boolean"},"value":["in","$type","Point"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","value","number?"],"result":"number"},"value":["index-of","foo",["baz","bar","hello","foo","world"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","number","number?"],"result":"value"},"value":["slice",["get","name"],0,3]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["case",["boolean",["feature-state","hover"],false],1,0.5]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["coalesce","value","fallback"],"result":"value"},"value":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["step","number","number","number","..."],"result":"number"},"value":["step",["get","point_count"],20,100,30,750,40]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"number | array<number> | color"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","example":{"syntax":{"method":[],"result":"number"},"value":["ln2"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","example":{"syntax":{"method":[],"result":"number"},"value":["pi"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","example":{"syntax":{"method":[],"result":"number"},"value":["e"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","example":{"syntax":{"method":["value"],"result":"string"},"value":["typeof",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"string"},"value":["string",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["number",["get","population"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"boolean"},"value":["boolean",["feature-state","hover"],false]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"object"},"value":["object",["get","some-property"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","example":{"syntax":{"method":["collator","{ \\"case-sensitive\\": boolean, \\"diacritic-sensitive\\": boolean, \\"locale\\": string }"],"result":"collator"},"value":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["value","{ \\"text-font\\": string, \\"text-color\\": color, \\"font-scale\\": number, \\"vertical-align\\": \\"bottom\\" | \\"center\\" | \\"top\\" }","..."],"result":"formatted"},"value":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5043","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["value"],"result":"image"},"value":["image","marker_15"]},"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["number","{ \\"locale\\": string, \\"currency\\": string, \\"min-fraction-digits\\": number, \\"max-fraction-digits\\": number }"],"result":"string"},"value":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","example":{"syntax":{"method":["value"],"result":"string"},"value":["to-string",["get","mag"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["to-number","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","example":{"syntax":{"method":["value"],"result":"boolean"},"value":["to-boolean","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","example":{"syntax":{"method":["color"],"result":"array"},"value":["to-rgba","#ff0000"]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"color"},"value":["to-color","#edf8e9"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number"],"result":"color"},"value":["rgb",255,0,0]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number","number"],"result":"color"},"value":["rgba",255,0,0,1]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["get","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["has","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["array"],"result":"number"},"value":["length",["get","myArray"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","example":{"syntax":{"method":[],"result":"value"},"value":["properties"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["feature-state","hover"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","example":{"syntax":{"method":[],"result":"string"},"value":["==",["geometry-type"],"Polygon"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","example":{"syntax":{"method":[],"result":"value"},"value":["id"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","example":{"syntax":{"method":[],"result":"number"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","example":{"syntax":{"method":[],"result":"number"},"value":["heatmap-density"]},"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","example":{"syntax":{"method":["number"],"result":"number"},"value":["line-progress",0.5]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","example":{"syntax":{"method":["string"],"result":"value"},"value":["accumulated","sum"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["+",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["*",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","example":{"syntax":{"method":["number","number?"],"result":"number"},"value":["-",10]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["/",["get","population"],["get","sq-km"]]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["%",10,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["^",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sqrt",9]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log10",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ln",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log2",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["cos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["tan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["asin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["acos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["atan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["min",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["max",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","example":{"syntax":{"method":["number"],"result":"number"},"value":["round",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["abs",-1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ceil",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["floor",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"number"},"value":["distance",{"type":"Point","coordinates":[0,0]}]},"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["==","$type","Polygon"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!=","cluster",true]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["all",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["any",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!",["has","point_count"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"boolean"},"value":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}]},"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["is-supported-script",""]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["upcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["downcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","example":{"syntax":{"method":["string","string","..."],"result":"string"},"value":["concat","square-rgb-",["get","color"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","example":{"syntax":{"method":["collator"],"result":"string"},"value":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),rae={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},iae={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},oae={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},sae={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},aae=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],lae={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},uae={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Aae={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},cae={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dae={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},hae={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fae={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pae={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mae={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},gae={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},ts={$version:kse,$root:Tse,sources:Pse,source:Rse,source_vector:Kse,source_raster:Dse,source_raster_dem:Lse,source_geojson:Fse,source_video:Use,source_image:zse,layer:jse,layout:Nse,layout_background:Gse,layout_fill:Wse,layout_circle:Qse,layout_heatmap:qse,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:Yse,layout_symbol:$se,layout_raster:Vse,layout_hillshade:Hse,filter:Zse,filter_operator:Xse,geometry_type:Jse,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:eae,expression:tae,expression_name:nae,light:rae,sky:iae,terrain:oae,projection:sae,paint:aae,paint_fill:lae,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:uae,paint_circle:Aae,paint_heatmap:cae,paint_symbol:dae,paint_raster:hae,paint_hillshade:fae,paint_background:pae,transition:mae,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:gae};function Us(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Us=function(){return a},a}Us();class vI extends Zn.Component{constructor(t){Us().f[0]++,Us().s[0]++;super(t);On(this,"onToggleDoc",(Us().s[2]++,t=>{Us().f[1]++,Us().s[3]++,this.setState({open:t},()=>{Us().f[2]++,Us().s[4]++,this.props.onToggleDoc?(Us().b[0][0]++,Us().s[5]++,this.props.onToggleDoc(this.state.open)):Us().b[0][1]++})}));Us().s[1]++,this.state={open:!1}}render(){Us().f[3]++;const{label:t,fieldSpec:r}=(Us().s[6]++,this.props),{doc:i}=(Us().s[7]++,Us().b[1][0]++,r||(Us().b[1][1]++,{}));if(Us().s[8]++,i)return Us().b[2][0]++,Us().s[9]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsxs("div",{className:"maputnik-doc-target",children:[t,"",le.jsx("button",{"aria-label":this.state.open?(Us().b[3][0]++,"close property documentation"):(Us().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(Us().b[4][0]++,"open"):(Us().b[4][1]++,"closed")}`,onClick:()=>(Us().f[4]++,Us().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(Us().b[5][0]++,le.jsx(hH,{})):(Us().b[5][1]++,le.jsx(fH,{}))})]})});if(Us().b[2][1]++,Us().s[11]++,t)return Us().b[6][0]++,Us().s[12]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsx("div",{className:"maputnik-doc-target",children:t})});Us().b[6][1]++,Us().s[13]++}}function ua(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ua=function(){return a},a}ua();const GT=(ua().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class _I extends Zn.Component{render(){ua().f[0]++;const{fieldSpec:e}=(ua().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(ua().s[2]++,e),a=(ua().s[3]++,e["sdk-support"]),o=(ua().s[4]++,ua().b[0][0]++,!!r&&(ua().b[0][1]++,!Array.isArray(r)));return ua().s[5]++,le.jsxs(le.Fragment,{children:[(ua().b[1][0]++,t&&(ua().b[1][1]++,le.jsxs("div",{className:"SpecDoc",children:[le.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(ua().b[2][0]++,o&&(ua().b[2][1]++,le.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([d,g])=>(ua().f[1]++,ua().s[6]++,le.jsxs("li",{children:[le.jsx("code",{children:JSON.stringify(d)}),le.jsx("div",{children:g.doc})]},d)))})))]}))),(ua().b[3][0]++,a&&(ua().b[3][1]++,le.jsx("div",{className:"SpecDoc__sdk-support",children:le.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{}),Object.values(GT).map(d=>(ua().f[2]++,ua().s[7]++,le.jsx("th",{children:d},d)))]})}),le.jsx("tbody",{children:Object.entries(a).map(([d,g])=>(ua().f[3]++,ua().s[8]++,le.jsxs("tr",{children:[le.jsx("td",{children:d}),Object.keys(GT).map(b=>(ua().f[4]++,ua().s[9]++,Object.prototype.hasOwnProperty.call(g,b)?(ua().b[4][0]++,ua().s[10]++,le.jsx("td",{children:g[b]},b)):(ua().b[4][1]++,ua().s[11]++,le.jsx("td",{children:"no"},b))))]},d)))})]})}))),(ua().b[5][0]++,i&&(ua().b[5][1]++,s)&&(ua().b[5][2]++,le.jsx("div",{className:"SpecDoc__learn-more",children:le.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Lo(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Lo=function(){return a},a}Lo();class ga extends Zn.Component{constructor(t){Lo().f[0]++,Lo().s[1]++;super(t);On(this,"_blockEl",(Lo().s[0]++,null));On(this,"onToggleDoc",(Lo().s[6]++,t=>{Lo().f[2]++,Lo().s[7]++,this.setState({showDoc:t})}));On(this,"onLabelClick",(Lo().s[8]++,t=>{var s;Lo().f[3]++;const r=(Lo().s[9]++,t.nativeEvent.target),i=(Lo().s[10]++,(s=this._blockEl)==null?void 0:s.contains(r));Lo().s[11]++,Lo().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(Lo().b[3][1]++,!i)?(Lo().b[2][0]++,Lo().s[12]++,t.stopPropagation()):Lo().b[2][1]++,Lo().s[13]++,t.nativeEvent.target.nodeName!=="A"?(Lo().b[4][0]++,Lo().s[14]++,t.preventDefault()):Lo().b[4][1]++}));Lo().s[2]++,this.state={showDoc:!1}}onChange(t){Lo().f[1]++;const r=(Lo().s[3]++,t.target.value);if(Lo().s[4]++,this.props.onChange)return Lo().b[0][0]++,Lo().s[5]++,this.props.onChange(r===""?(Lo().b[1][0]++,void 0):(Lo().b[1][1]++,r));Lo().b[0][1]++}render(){return Lo().f[4]++,Lo().s[15]++,le.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:tm({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Lo().b[5][0]++,this.props.fieldSpec&&(Lo().b[5][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(vI,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Lo().b[6][0]++,!this.props.fieldSpec&&(Lo().b[6][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),le.jsx("div",{className:"maputnik-input-block-content",ref:t=>(Lo().f[5]++,Lo().s[16]++,this._blockEl=t),children:this.props.children}),(Lo().b[7][0]++,this.props.fieldSpec&&(Lo().b[7][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Lo().b[8][0]++,""):(Lo().b[8][1]++,"none")},children:le.jsx(_I,{fieldSpec:this.props.fieldSpec})})))]})}}function Tc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Tc=function(){return a},a}Tc();class Ng extends Zn.Component{render(){Tc().f[0]++;let e=(Tc().s[0]++,this.props.options);return Tc().s[1]++,Tc().b[1][0]++,e.length>0&&(Tc().b[1][1]++,!Array.isArray(e[0]))?(Tc().b[0][0]++,Tc().s[2]++,e=e.map(t=>(Tc().f[1]++,Tc().s[3]++,[t,t]))):Tc().b[0][1]++,Tc().s[4]++,le.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Tc().f[2]++,Tc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Tc().f[3]++,Tc().s[6]++,le.jsx("option",{value:t,children:r},t)))})}}function Di(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Di=function(){return a},a}Di();class kf extends Zn.Component{constructor(e){Di().f[1]++,Di().s[1]++,super(e),Di().s[2]++,this.state={editing:!1,value:(Di().b[0][0]++,e.value||(Di().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Di().f[2]++,Di().s[3]++,t.editing)Di().b[1][1]++;else return Di().b[1][0]++,Di().s[4]++,{value:e.value};return Di().s[5]++,{}}render(){Di().f[3]++;let e,t;return Di().s[6]++,this.props.multi?(Di().b[2][0]++,Di().s[7]++,e="textarea",Di().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Di().b[2][1]++,Di().s[9]++,e="input",Di().s[10]++,t=["maputnik-string"]),Di().s[11]++,this.props.disabled?(Di().b[3][0]++,Di().s[12]++,t.push("maputnik-string--disabled")):Di().b[3][1]++,Di().s[13]++,Zn.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Di().b[4][0]++,this.props.spellCheck):(Di().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Di().b[5][0]++,""):(Di().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Di().f[4]++,Di().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Di().f[5]++,Di().s[15]++,this.props.onInput?(Di().b[6][0]++,Di().s[16]++,this.props.onInput(this.state.value)):Di().b[6][1]++})},onBlur:()=>{Di().f[6]++,Di().s[17]++,this.state.value!==this.props.value?(Di().b[7][0]++,Di().s[18]++,this.setState({editing:!1}),Di().s[19]++,this.props.onChange?(Di().b[8][0]++,Di().s[20]++,this.props.onChange(this.state.value)):Di().b[8][1]++):Di().b[7][1]++},onKeyDown:r=>{Di().f[7]++,Di().s[21]++,Di().b[10][0]++,r.keyCode===13&&(Di().b[10][1]++,this.props.onChange)?(Di().b[9][0]++,Di().s[22]++,this.props.onChange(this.state.value)):Di().b[9][1]++},required:this.props.required})}}On(kf,"defaultProps",(Di().s[0]++,{onInput:()=>{Di().f[0]++}}));function np(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return np=function(){return a},a}np();class cN extends Zn.Component{render(){np().f[0]++;const e=(np().s[1]++,this.props.t);return np().s[2]++,le.jsxs(ga,{label:e("Type"),fieldSpec:ts.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(np().b[0][0]++,this.props.disabled&&(np().b[0][1]++,le.jsx(kf,{value:this.props.value,disabled:!0}))),(np().b[1][0]++,!this.props.disabled&&(np().b[1][1]++,le.jsx(Ng,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}On(cN,"defaultProps",(np().s[0]++,{disabled:!1}));const dN=(np().s[3]++,$s()(cN));function P2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return P2=function(){return a},a}P2();class hN extends Zn.Component{render(){return P2().f[0]++,P2().s[0]++,le.jsx(ga,{label:"ID",fieldSpec:ts.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:le.jsx(kf,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var m5={exports:{}},WT;function yae(){if(WT)return m5.exports;WT=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(We){var $e,ht,De,Ne=We.ownerDocument,at=Ne.body,wt=Ne&&Ne.documentElement;return $e=We.getBoundingClientRect(),ht=$e.left,De=$e.top,ht-=wt.clientLeft||at.clientLeft||0,De-=wt.clientTop||at.clientTop||0,{left:ht,top:De}}function t(We,$e){var ht=We["page"+($e?"Y":"X")+"Offset"],De="scroll"+($e?"Top":"Left");if(typeof ht!="number"){var Ne=We.document;ht=Ne.documentElement[De],typeof ht!="number"&&(ht=Ne.body[De])}return ht}function r(We){return t(We)}function i(We){return t(We,!0)}function s(We){var $e=e(We),ht=We.ownerDocument,De=ht.defaultView||ht.parentWindow;return $e.left+=r(De),$e.top+=i(De),$e}function a(We,$e,ht){var De="",Ne=We.ownerDocument;return(ht=ht||Ne.defaultView.getComputedStyle(We,null))&&(De=ht.getPropertyValue($e)||ht[$e]),De}var o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),d=/^(top|right|bottom|left)$/,g="currentStyle",b="runtimeStyle",E="left",S="px";function O(We,$e){var ht=We[g]&&We[g][$e];if(o.test(ht)&&!d.test($e)){var De=We.style,Ne=De[E],at=We[b][E];We[b][E]=We[g][E],De[E]=$e==="fontSize"?"1em":ht||0,ht=De.pixelLeft+S,De[E]=Ne,We[b][E]=at}return ht===""?"auto":ht}var k;typeof window<"u"&&(k=window.getComputedStyle?a:O);function U(We,$e){Pe(We,"position")==="static"&&(We.style.position="relative");var ht=s(We),De={},Ne,at;for(at in $e)Ne=parseFloat(Pe(We,at))||0,De[at]=Ne+$e[at]-ht[at];Pe(We,De)}function z(We,$e){for(var ht=0;ht<We.length;ht++)$e(We[ht])}function q(We){return k(We,"boxSizing")==="border-box"}var Q=["margin","border","padding"],re=-1,X=2,Y=1,J=0;function N(We,$e,ht){var De={},Ne=We.style,at;for(at in $e)De[at]=Ne[at],Ne[at]=$e[at];ht.call(We);for(at in $e)Ne[at]=De[at]}function ie(We,$e,ht){var De=0,Ne,at,wt;for(at=0;at<$e.length;at++)if(Ne=$e[at],Ne)for(wt=0;wt<ht.length;wt++){var Ct;Ne==="border"?Ct=Ne+ht[wt]+"Width":Ct=Ne+ht[wt],De+=parseFloat(k(We,Ct))||0}return De}function he(We){return We!=null&&We==We.window}var de={};z(["Width","Height"],function(We){de["doc"+We]=function($e){var ht=$e.document;return Math.max(ht.documentElement["scroll"+We],ht.body["scroll"+We],de["viewport"+We](ht))},de["viewport"+We]=function($e){var ht="client"+We,De=$e.document,Ne=De.body,at=De.documentElement,wt=at[ht];return De.compatMode==="CSS1Compat"&&wt||Ne&&Ne[ht]||wt}});function we(We,$e,ht){if(he(We))return $e==="width"?de.viewportWidth(We):de.viewportHeight(We);if(We.nodeType===9)return $e==="width"?de.docWidth(We):de.docHeight(We);var De=$e==="width"?["Left","Right"]:["Top","Bottom"],Ne=$e==="width"?We.offsetWidth:We.offsetHeight;k(We);var at=q(We),wt=0;(Ne==null||Ne<=0)&&(Ne=void 0,wt=k(We,$e),(wt==null||Number(wt)<0)&&(wt=We.style[$e]||0),wt=parseFloat(wt)||0),ht===void 0&&(ht=at?Y:re);var Ct=Ne!==void 0||at,ft=Ne||wt;return ht===re?Ct?ft-ie(We,["border","padding"],De):wt:Ct?ft+(ht===Y?0:ht===X?-ie(We,["border"],De):ie(We,["margin"],De)):wt+ie(We,Q.slice(ht),De)}var fe={position:"absolute",visibility:"hidden",display:"block"};function be(We){var $e,ht=arguments;return We.offsetWidth!==0?$e=we.apply(void 0,ht):N(We,fe,function(){$e=we.apply(void 0,ht)}),$e}z(["width","height"],function(We){var $e=We.charAt(0).toUpperCase()+We.slice(1);de["outer"+$e]=function(De,Ne){return De&&be(De,We,Ne?J:Y)};var ht=We==="width"?["Left","Right"]:["Top","Bottom"];de[We]=function(De,Ne){if(Ne!==void 0){if(De){k(De);var at=q(De);return at&&(Ne+=ie(De,["padding","border"],ht)),Pe(De,We,Ne)}return}return De&&be(De,We,re)}});function Pe(We,$e,ht){if(typeof $e=="object"){for(var De in $e)Pe(We,De,$e[De]);return}if(typeof ht<"u")typeof ht=="number"&&(ht=ht+"px"),We.style[$e]=ht;else return k(We,$e)}function pe(We,$e){for(var ht in $e)We[ht]=$e[ht];return We}var it=m5.exports={getWindow:function(We){var $e=We.ownerDocument||We;return $e.defaultView||$e.parentWindow},offset:function(We,$e){if(typeof $e<"u")U(We,$e);else return s(We)},isWindow:he,each:z,css:Pe,clone:function(We){var $e={};for(var ht in We)$e[ht]=We[ht];var De=We.overflow;if(De)for(ht in We)$e.overflow[ht]=We.overflow[ht];return $e},mix:pe,scrollLeft:function(We,$e){if(he(We)){if($e===void 0)return r(We);window.scrollTo($e,i(We))}else{if($e===void 0)return We.scrollLeft;We.scrollLeft=$e}},scrollTop:function(We,$e){if(he(We)){if($e===void 0)return i(We);window.scrollTo(r(We),$e)}else{if($e===void 0)return We.scrollTop;We.scrollTop=$e}},merge:function(){for(var We={},$e=0;$e<arguments.length;$e++)it.mix(We,arguments[$e]);return We},viewportWidth:0,viewportHeight:0};return pe(it,de),m5.exports}var g5,QT;function vae(){if(QT)return g5;QT=1;var n=yae();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var s=i.allowHorizontalScroll,a=i.onlyScrollIfNeeded,o=i.alignWithTop,d=i.alignWithLeft;s=s===void 0?!0:s;var g=n.isWindow(r),b=n.offset(t),E=n.outerHeight(t),S=n.outerWidth(t),O,k,U,z,q,Q,re,X,Y,J;g?(re=r,J=n.height(re),Y=n.width(re),X={left:n.scrollLeft(re),top:n.scrollTop(re)},q={left:b.left-X.left,top:b.top-X.top},Q={left:b.left+S-(X.left+Y),top:b.top+E-(X.top+J)},z=X):(O=n.offset(r),k=r.clientHeight,U=r.clientWidth,z={left:r.scrollLeft,top:r.scrollTop},q={left:b.left-(O.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:b.top-(O.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},Q={left:b.left+S-(O.left+U+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:b.top+E-(O.top+k+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),q.top<0||Q.top>0?o===!0?n.scrollTop(r,z.top+q.top):o===!1?n.scrollTop(r,z.top+Q.top):q.top<0?n.scrollTop(r,z.top+q.top):n.scrollTop(r,z.top+Q.top):a||(o=o===void 0?!0:!!o,o?n.scrollTop(r,z.top+q.top):n.scrollTop(r,z.top+Q.top)),s&&(q.left<0||Q.left>0?d===!0?n.scrollLeft(r,z.left+q.left):d===!1?n.scrollLeft(r,z.left+Q.left):q.left<0?n.scrollLeft(r,z.left+q.left):n.scrollLeft(r,z.left+Q.left):a||(d=d===void 0?!0:!!d,d?n.scrollLeft(r,z.left+q.left):n.scrollLeft(r,z.left+Q.left)))}return g5=e,g5}var y5,qT;function _ae(){return qT||(qT=1,y5=vae()),y5}var v5,YT;function Cae(){if(YT)return v5;YT=1;var n=Object.assign||function(O){for(var k=1;k<arguments.length;k++){var U=arguments[k];for(var z in U)Object.prototype.hasOwnProperty.call(U,z)&&(O[z]=U[z])}return O},e=function(){function O(k,U){for(var z=0;z<U.length;z++){var q=U[z];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(k,q.key,q)}}return function(k,U,z){return U&&O(k.prototype,U),z&&O(k,z),k}}();function t(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function r(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:O}function i(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}var s=Fa(),a=dp(),o=I_(),d=o.findDOMNode,g=_ae(),b=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function E(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var S=function(O){i(k,O);function k(U){t(this,k);var z=r(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,U));return z.state={isOpen:!1,highlightedIndex:null},z._debugStates=[],z.ensureHighlightedIndex=z.ensureHighlightedIndex.bind(z),z.exposeAPI=z.exposeAPI.bind(z),z.handleInputFocus=z.handleInputFocus.bind(z),z.handleInputBlur=z.handleInputBlur.bind(z),z.handleChange=z.handleChange.bind(z),z.handleKeyDown=z.handleKeyDown.bind(z),z.handleInputClick=z.handleInputClick.bind(z),z.maybeAutoCompleteText=z.maybeAutoCompleteText.bind(z),z}return e(k,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(z){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),z.autoHighlight&&(this.props.value!==z.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(z,q){(this.state.isOpen&&!q.isOpen||"open"in this.props&&this.props.open&&!z.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),q.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(z){var q=this;this.refs.input=z,b.forEach(function(Q){return q[Q]=z&&z[Q]&&z[Q].bind(z)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var z=this.refs["item-"+this.state.highlightedIndex],q=this.refs.menu;g(d(z),d(q),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(z){k.keyDownHandlers[z.key]?k.keyDownHandlers[z.key].call(this,z):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(z){this.props.onChange(z,z.target.value)}},{key:"getFilteredItems",value:function(z){var q=z.items;return z.shouldItemRender&&(q=q.filter(function(Q){return z.shouldItemRender(Q,z.value)})),z.sortItems&&q.sort(function(Q,re){return z.sortItems(Q,re,z.value)}),q}},{key:"maybeAutoCompleteText",value:function(z,q){for(var Q=z.highlightedIndex,re=q.value,X=q.getItemValue,Y=Q===null?0:Q,J=this.getFilteredItems(q),N=0;N<J.length&&!q.isItemSelectable(J[Y]);N++)Y=(Y+1)%J.length;var ie=J[Y]&&q.isItemSelectable(J[Y])?J[Y]:null;if(re!==""&&ie){var he=X(ie),de=he.toLowerCase().indexOf(re.toLowerCase())===0;if(de)return{highlightedIndex:Y}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(z,q){if(z.highlightedIndex>=this.getFilteredItems(q).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var z=this.refs.input,q=z.getBoundingClientRect(),Q=window.window.getComputedStyle(z),re=parseInt(Q.marginBottom,10)||0,X=parseInt(Q.marginLeft,10)||0,Y=parseInt(Q.marginRight,10)||0;this.setState({menuTop:q.bottom+re,menuLeft:q.left+X,menuWidth:q.width+X+Y})}},{key:"highlightItemFromMouse",value:function(z){this.setState({highlightedIndex:z})}},{key:"selectItemFromMouse",value:function(z){var q=this,Q=this.props.getItemValue(z);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){q.props.onSelect(Q,z)})}},{key:"setIgnoreBlur",value:function(z){this._ignoreBlur=z}},{key:"renderMenu",value:function(){var z=this,q=this.getFilteredItems(this.props).map(function(X,Y){var J=z.props.renderItem(X,z.state.highlightedIndex===Y,{cursor:"default"});return s.cloneElement(J,{onMouseEnter:z.props.isItemSelectable(X)?function(){return z.highlightItemFromMouse(Y)}:null,onClick:z.props.isItemSelectable(X)?function(){return z.selectItemFromMouse(X)}:null,ref:function(ie){return z.refs["item-"+Y]=ie}})}),Q={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},re=this.props.renderMenu(q,this.props.value,Q);return s.cloneElement(re,{ref:function(Y){return z.refs.menu=Y},onTouchStart:function(){return z.setIgnoreBlur(!0)},onMouseEnter:function(){return z.setIgnoreBlur(!0)},onMouseLeave:function(){return z.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(z){var q=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=E(),this.refs.input.focus();return}var Q=void 0,re=this.state.highlightedIndex;if(this.props.selectOnBlur&&re!==null){var X=this.getFilteredItems(this.props),Y=X[re],J=this.props.getItemValue(Y);Q=function(){return q.props.onSelect(J,Y)}}this.setState({isOpen:!1,highlightedIndex:null},Q);var N=this.props.inputProps.onBlur;N&&N(z)}},{key:"handleInputFocus",value:function(z){var q=this;if(this._ignoreFocus){this._ignoreFocus=!1;var Q=this._scrollOffset,re=Q.x,X=Q.y;this._scrollOffset=null,window.scrollTo(re,X),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){q._scrollTimer=null,window.scrollTo(re,X)},0);return}this.setState({isOpen:!0});var Y=this.props.inputProps.onFocus;Y&&Y(z)}},{key:"isInputFocused",value:function(){var z=this.refs.input;return z.ownerDocument&&z===z.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(z,q){return q?function(Q){z(Q),q(Q)}:z}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var z=this.props.inputProps,q=this.isOpen();return s.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},z,{role:"combobox","aria-autocomplete":"list","aria-expanded":q,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,z.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,z.onClick),value:this.props.value})),q&&this.renderMenu(),this.props.debug&&s.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),k}(s.Component);return S.propTypes={items:a.array.isRequired,value:a.any,onChange:a.func,onSelect:a.func,shouldItemRender:a.func,isItemSelectable:a.func,sortItems:a.func,getItemValue:a.func.isRequired,renderItem:a.func.isRequired,renderMenu:a.func,menuStyle:a.object,renderInput:a.func,inputProps:a.object,wrapperProps:a.object,wrapperStyle:a.object,autoHighlight:a.bool,selectOnBlur:a.bool,onMenuVisibilityChange:a.func,open:a.bool,debug:a.bool},S.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(k){return s.createElement("input",k)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(k,U,z){return s.createElement("div",{style:n({},z,this.menuStyle),children:k})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},S.keyDownHandlers={ArrowDown:function(k){k.preventDefault();var U=this.getFilteredItems(this.props);if(U.length){for(var z=this.state.highlightedIndex,q=z===null?-1:z,Q=0;Q<U.length;Q++){var re=(q+Q+1)%U.length;if(this.props.isItemSelectable(U[re])){q=re;break}}q>-1&&q!==z&&this.setState({highlightedIndex:q,isOpen:!0})}},ArrowUp:function(k){k.preventDefault();var U=this.getFilteredItems(this.props);if(U.length){for(var z=this.state.highlightedIndex,q=z===null?U.length:z,Q=0;Q<U.length;Q++){var re=(q-(1+Q)+U.length)%U.length;if(this.props.isItemSelectable(U[re])){q=re;break}}q!==U.length&&this.setState({highlightedIndex:q,isOpen:!0})}},Enter:function(k){var U=this;if(k.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){U.refs.input.select()});else{k.preventDefault();var z=this.getFilteredItems(this.props)[this.state.highlightedIndex],q=this.props.getItemValue(z);this.setState({isOpen:!1,highlightedIndex:null},function(){U.refs.input.setSelectionRange(q.length,q.length),U.props.onSelect(q,z)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},v5=S,v5}var bae=Cae();const xae=La(bae);function To(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return To=function(){return a},a}To();const $T=(To().s[0]++,140);class zy extends Zn.Component{constructor(){super(...arguments);On(this,"state",(To().s[1]++,{maxHeight:$T}));On(this,"autocompleteMenuEl",(To().s[2]++,null))}calcMaxHeight(){if(To().f[1]++,To().s[4]++,this.props.keepMenuWithinWindowBounds){To().b[0][0]++;const t=(To().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(To().s[6]++,Math.min(t,$T));To().s[7]++,r!=this.state.maxHeight?(To().b[1][0]++,To().s[8]++,this.setState({maxHeight:r})):To().b[1][1]++}else To().b[0][1]++}componentDidMount(){To().f[2]++,To().s[9]++,this.calcMaxHeight()}componentDidUpdate(){To().f[3]++,To().s[10]++,this.calcMaxHeight()}onChange(t){To().f[4]++,To().s[11]++,this.props.onChange(t===""?(To().b[2][0]++,void 0):(To().b[2][1]++,t))}render(){return To().f[5]++,To().s[12]++,le.jsx("div",{ref:t=>{To().f[6]++,To().s[13]++,this.autocompleteMenuEl=t},children:le.jsx(xae,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(To().f[7]++,To().s[14]++,t[0]),onSelect:t=>(To().f[8]++,To().s[15]++,this.onChange(t)),onChange:(t,r)=>(To().f[9]++,To().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(To().b[3][0]++,""))=>(To().f[10]++,To().s[17]++,typeof r=="string"?(To().b[4][0]++,To().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(To().b[4][1]++,To().s[19]++,!1)),renderItem:(t,r)=>(To().f[11]++,To().s[20]++,le.jsx("div",{className:tm({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}On(zy,"defaultProps",(To().s[3]++,{onChange:()=>{To().f[0]++},options:[]}));function zp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return zp=function(){return a},a}zp();class fN extends Zn.Component{render(){var t;zp().f[1]++;const e=(zp().s[1]++,this.props.t);return zp().s[2]++,le.jsx(ga,{label:e("Source"),fieldSpec:ts.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:le.jsx(zy,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>(zp().f[2]++,zp().s[3]++,[r,r]))})})}}On(fN,"defaultProps",(zp().s[0]++,{onChange:()=>{zp().f[0]++},sourceIds:[]}));const pN=(zp().s[4]++,$s()(fN));function jp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return jp=function(){return a},a}jp();class mN extends Zn.Component{render(){var t;jp().f[1]++;const e=(jp().s[1]++,this.props.t);return jp().s[2]++,le.jsx(ga,{label:e("Source Layer"),fieldSpec:Ys.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:le.jsx(zy,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(jp().f[2]++,jp().s[3]++,[r,r]))})})}}On(mN,"defaultProps",(jp().s[0]++,{onChange:()=>{jp().f[0]++},sourceLayerIds:[],isFixed:!1}));const gN=(jp().s[4]++,$s()(mN));function Yr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Yr=function(){return a},a}Yr();class wae extends Zn.Component{constructor(t){Yr().f[1]++,Yr().s[10]++;super(t);On(this,"addLayer",(Yr().s[0]++,()=>{Yr().f[0]++;const t=(Yr().s[1]++,this.props.layers.slice(0)),r=(Yr().s[2]++,{id:this.state.id,type:this.state.type});Yr().s[3]++,this.state.type!=="background"?(Yr().b[0][0]++,Yr().s[4]++,r.source=this.state.source,Yr().s[5]++,Yr().b[2][0]++,this.state.type!=="raster"&&(Yr().b[2][1]++,this.state["source-layer"])?(Yr().b[1][0]++,Yr().s[6]++,r["source-layer"]=this.state["source-layer"]):Yr().b[1][1]++):Yr().b[0][1]++,Yr().s[7]++,t.push(r),Yr().s[8]++,this.props.onLayersChange(t),Yr().s[9]++,this.props.onOpenToggle(!1)}));const r=(Yr().s[11]++,{type:"fill",id:""});Yr().s[12]++,t.sources.length>0?(Yr().b[3][0]++,Yr().s[13]++,r.source=Object.keys(this.props.sources)[0],Yr().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):Yr().b[3][1]++,Yr().s[15]++,this.state=r}componentDidUpdate(t,r){Yr().f[2]++;const i=(Yr().s[16]++,r.type),s=(Yr().s[17]++,this.state.type),a=(Yr().s[18]++,this.getSources(i)),o=(Yr().s[19]++,this.getSources(s));Yr().s[20]++,Yr().b[5][0]++,i!==s&&(Yr().b[5][1]++,r.source!=="")&&(Yr().b[5][2]++,a.indexOf(r.source)>-1)&&(Yr().b[5][3]++,o.indexOf(this.state.source)<0)?(Yr().b[4][0]++,Yr().s[21]++,this.setState({source:""})):Yr().b[4][1]++}getLayersForSource(t){Yr().f[3]++;const r=(Yr().s[22]++,Yr().b[6][0]++,this.props.sources[t]||(Yr().b[6][1]++,{}));return Yr().s[23]++,Yr().b[7][0]++,r.layers||(Yr().b[7][1]++,[])}getSources(t){Yr().f[4]++;const r=(Yr().s[24]++,[]),i=(Yr().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Yr().s[26]++;for(const[s,a]of Object.entries(this.props.sources)){const o=(Yr().s[27]++,a.type);Yr().s[28]++,Yr().b[9][0]++,i[o]&&(Yr().b[9][1]++,i[o].indexOf(t)>-1)?(Yr().b[8][0]++,Yr().s[29]++,r.push(s)):Yr().b[8][1]++}return Yr().s[30]++,r}render(){Yr().f[5]++;const t=(Yr().s[31]++,this.props.t),r=(Yr().s[32]++,this.getSources(this.state.type)),i=(Yr().s[33]++,this.getLayersForSource(this.state.source));return Yr().s[34]++,le.jsx(L0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:le.jsxs("div",{className:"maputnik-add-layer",children:[le.jsx(hN,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Yr().f[6]++,Yr().s[35]++,this.setState({id:s})}}),le.jsx(dN,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Yr().f[7]++,Yr().s[36]++,this.setState({type:s}))}),(Yr().b[10][0]++,this.state.type!=="background"&&(Yr().b[10][1]++,le.jsx(pN,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Yr().f[8]++,Yr().s[37]++,this.setState({source:s}))}))),(Yr().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Yr().b[11][1]++,le.jsx(gN,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:s=>(Yr().f[9]++,Yr().s[38]++,this.setState({"source-layer":s}))}))),le.jsx(Ha,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const Mae=(Yr().s[39]++,$s()(wae));function vg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return vg=function(){return a},a}vg();let VT=(vg().s[0]++,0);function Sy(n=(vg().b[0][0]++,"")){return vg().f[0]++,vg().s[1]++,VT++,vg().s[2]++,n+VT}function ji(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ji=function(){return a},a}ji();function Sae(n,e){ji().f[0]++;const t=(ji().s[0]++,{...n.paint});ji().s[1]++,Object.keys(t).forEach(i=>{ji().f[1]++,ji().s[2]++,i in Ys["paint_"+e]?ji().b[0][1]++:(ji().b[0][0]++,ji().s[3]++,delete t[i])});const r=(ji().s[4]++,{...n.layout});return ji().s[5]++,Object.keys(r).forEach(i=>{ji().f[2]++,ji().s[6]++,i in Ys["layout_"+e]?ji().b[1][1]++:(ji().b[1][0]++,ji().s[7]++,delete r[i])}),ji().s[8]++,{...n,paint:t,layout:r,type:e}}function Eae(n,e,t,r){if(ji().f[3]++,ji().s[9]++,r===void 0)if(ji().b[2][0]++,ji().s[10]++,e){ji().b[3][0]++;const i=(ji().s[11]++,{...n,[e]:{...n[e]}});return ji().s[12]++,delete i[e][t],ji().s[13]++,Object.keys(i[e]).length<1?(ji().b[4][0]++,ji().s[14]++,delete i[e]):ji().b[4][1]++,ji().s[15]++,i}else{ji().b[3][1]++;const i=(ji().s[16]++,{...n});return ji().s[17]++,delete i[t],ji().s[18]++,i}else return ji().b[2][1]++,ji().s[19]++,e?(ji().b[5][0]++,ji().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(ji().b[5][1]++,ji().s[21]++,{...n,[t]:r})}function H1(n){return ji().f[4]++,ji().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function Bae(n,e){ji().f[5]++;const t=(ji().s[23]++,H1(n[e].id));let r=(ji().s[24]++,e);ji().s[25]++;for(let i=(ji().s[26]++,e);i>0;i--){const s=(ji().s[27]++,H1(n[i-1].id));if(ji().s[28]++,s===t)ji().b[6][0]++,ji().s[29]++,r=i-1;else return ji().b[6][1]++,ji().s[30]++,r}return ji().s[31]++,r}function gn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return gn=function(){return a},a}gn();class yN extends Zn.Component{constructor(t){gn().f[1]++,gn().s[1]++;super(t);On(this,"selectedItemRef");On(this,"scrollContainerRef");On(this,"toggleLayers",(gn().s[6]++,()=>{gn().f[3]++;let t=(gn().s[7]++,0);const r=(gn().s[8]++,{});gn().s[9]++,this.groupedLayers().forEach(i=>{gn().f[4]++;const s=(gn().s[10]++,H1(i[0].id)),a=(gn().s[11]++,[s,t].join("-"));gn().s[12]++,i.length>1?(gn().b[0][0]++,gn().s[13]++,r[a]=this.state.areAllGroupsExpanded):gn().b[0][1]++,gn().s[14]++,i.forEach(o=>{gn().f[5]++,gn().s[15]++,t+=1})}),gn().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));gn().s[2]++,this.selectedItemRef=Zn.createRef(),gn().s[3]++,this.scrollContainerRef=Zn.createRef(),gn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Sy()},isOpen:{add:!1}}}toggleModal(t){gn().f[2]++,gn().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Sy()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){gn().f[6]++;const t=(gn().s[17]++,[]),r=(gn().s[18]++,new Map);gn().s[19]++;for(let i=(gn().s[20]++,0);i<this.props.layers.length;i++){const s=(gn().s[21]++,this.props.layers[i]),a=(gn().s[22]++,this.props.layers[i-1]);gn().s[23]++,r.set(s.id,r.has(s.id)?(gn().b[1][0]++,r.get(s.id)+1):(gn().b[1][1]++,0));const o=(gn().s[24]++,{...s,key:`layers-list-${s.id}-${r.get(s.id)}`});if(gn().s[25]++,gn().b[3][0]++,a&&(gn().b[3][1]++,H1(a.id)==H1(o.id))){gn().b[2][0]++;const d=(gn().s[26]++,t[t.length-1]);gn().s[27]++,d.push(o)}else gn().b[2][1]++,gn().s[28]++,t.push([o])}return gn().s[29]++,t}toggleLayerGroup(t,r){gn().f[7]++;const i=(gn().s[30]++,[t,r].join("-")),s=(gn().s[31]++,{...this.state.collapsedGroups});gn().s[32]++,i in this.state.collapsedGroups?(gn().b[4][0]++,gn().s[33]++,s[i]=!this.state.collapsedGroups[i]):(gn().b[4][1]++,gn().s[34]++,s[i]=!1),gn().s[35]++,this.setState({collapsedGroups:s})}isCollapsed(t,r){gn().f[8]++;const i=(gn().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return gn().s[37]++,i===void 0?(gn().b[5][0]++,!0):(gn().b[5][1]++,i)}shouldComponentUpdate(t,r){if(gn().f[9]++,gn().s[38]++,this.state!==r)return gn().b[6][0]++,gn().s[39]++,!0;gn().b[6][1]++;function i(g){gn().f[10]++;const b=(gn().s[40]++,{id:g.id});return gn().s[41]++,g.layout?(gn().b[7][0]++,gn().s[42]++,b.layout={visibility:g.layout.visibility}):gn().b[7][1]++,gn().s[43]++,b}const s=(gn().s[44]++,t6.isEqual(t.layers.map(i),this.props.layers.map(i)));function a(g){gn().f[11]++;const b=(gn().s[45]++,{...g});return gn().s[46]++,delete b.layers,gn().s[47]++,b}const o=(gn().s[48]++,t6.isEqual(a(this.props),a(t))),d=(gn().s[49]++,gn().b[8][0]++,!(s&&(gn().b[8][1]++,o)));return gn().s[50]++,d}componentDidUpdate(t){if(gn().f[12]++,gn().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){gn().b[9][0]++;const r=(gn().s[52]++,this.selectedItemRef.current);if(gn().s[53]++,gn().b[11][0]++,r&&(gn().b[11][1]++,r.node)){gn().b[10][0]++;const i=(gn().s[54]++,r.node),s=(gn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),a=(gn().s[56]++,new IntersectionObserver(o=>{gn().f[13]++,gn().s[57]++,a.unobserve(i),gn().s[58]++,gn().b[13][0]++,o.length>0&&(gn().b[13][1]++,o[0].intersectionRatio<1)?(gn().b[12][0]++,gn().s[59]++,i.scrollIntoView()):gn().b[12][1]++},s));gn().s[60]++,a.observe(i)}else gn().b[10][1]++}else gn().b[9][1]++}render(){gn().f[14]++;const t=(gn().s[61]++,[]);let r=(gn().s[62]++,0);const i=(gn().s[63]++,this.groupedLayers());gn().s[64]++,i.forEach(a=>{gn().f[15]++;const o=(gn().s[65]++,H1(a[0].id));if(gn().s[66]++,a.length>1){gn().b[14][0]++;const d=(gn().s[67]++,le.jsx(yoe,{"data-wd-key":[o,r].join("-"),"aria-controls":a.map(g=>(gn().f[16]++,gn().s[68]++,g.key)).join(" "),title:o,isActive:(gn().b[15][0]++,!this.isCollapsed(o,r)||(gn().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,o,r)},`group-${o}-${r}`));gn().s[69]++,t.push(d)}else gn().b[14][1]++;gn().s[70]++,a.forEach((d,g)=>{var k;gn().f[17]++;const b=(gn().s[71]++,Bae(this.props.layers,r)),E=(gn().s[72]++,this.props.errors.find(U=>(gn().f[18]++,gn().s[73]++,gn().b[16][0]++,U.parsed&&(gn().b[16][1]++,U.parsed.type==="layer")&&(gn().b[16][2]++,U.parsed.data.index==r)))),S=(gn().s[74]++,{});gn().s[75]++,r===this.props.selectedLayerIndex?(gn().b[17][0]++,gn().s[76]++,S.ref=this.selectedItemRef):gn().b[17][1]++;const O=(gn().s[77]++,le.jsx(Zoe,{className:tm({"maputnik-layer-list-item-collapsed":(gn().b[18][0]++,a.length>1&&(gn().b[18][1]++,this.isCollapsed(o,b))&&(gn().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(gn().b[19][0]++,g==a.length-1&&(gn().b[19][1]++,a.length>1)),"maputnik-layer-list-item--error":!!E}),index:r,id:d.key,layerId:d.id,layerIndex:r,layerType:d.type,visibility:(gn().b[20][0]++,d.layout||(gn().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(k=this.props.onLayerDestroy)==null?void 0:k.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...S},d.key));gn().s[78]++,t.push(O),gn().s[79]++,r+=1})});const s=(gn().s[80]++,this.props.t);return gn().s[81]++,le.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":s("Layers list"),ref:this.scrollContainerRef,children:[le.jsx(Mae,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),le.jsxs("header",{className:"maputnik-layer-list-header",children:[le.jsx("span",{className:"maputnik-layer-list-header-title",children:s("Layers")}),le.jsx("span",{className:"maputnik-space"}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(gn().b[21][0]++,s("Collapse")):(gn().b[21][1]++,s("Expand"))})})}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:s("Add Layer")})})})]}),le.jsx("div",{role:"navigation","aria-label":s("Layers list"),children:le.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}On(yN,"defaultProps",(gn().s[0]++,{onLayerSelect:()=>{gn().f[0]++}}));const Oae=(gn().s[82]++,$s()(yN)),Iae=(gn().s[83]++,Yoe(n=>(gn().f[19]++,gn().s[84]++,le.jsx(Oae,{...n}))));class kae extends Zn.Component{render(){return gn().f[20]++,gn().s[85]++,le.jsx(Iae,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(gn().f[21]++,gn().s[86]++,!1)})}}var _5,HT;function vN(){if(HT)return _5;HT=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(a,o){n[a]=o}function r(a){delete n[a]}function i(a,o){var d=n[a];if(!d)throw new Error("Cannot open "+e);d.openMenu(o)}function s(a,o){var d=n[a];if(!d)throw new Error("Cannot close "+e);d.closeMenu(o)}return _5={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},_5}var C5,ZT;function Tae(){if(ZT)return C5;ZT=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var a,o;for(a in this._settings.keybindings)o=this._settings.keybindings[a],o&&[].concat(o).forEach((function(d){d.metaKey=d.metaKey||!1,d.ctrlKey=d.ctrlKey||!1,d.altKey=d.altKey||!1,d.shiftKey=d.shiftKey||!1,this._keybindingsLookup.push({action:a,eventMatcher:d})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var a=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(a=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),a||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,a=0,o=this._members.length;a<o;a++)if(s=this._members[a],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,a=this._members.length;s<a;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var a=i.node||i,o=i.text||a.getAttribute("data-focus-group-text")||a.textContent||"";this._checkNode(a);var d=o.replace(/[\W_]/g,"").toLowerCase(),g={node:a,text:d};return s!=null?this._members.splice(s,0,g):this._members.push(g),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,a=i.length;s<a;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var a in i)if(s[a]!==void 0&&i[a]!==s[a])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return C5=function(s){return new n(s)},C5}var b5,XT;function Pae(){if(XT)return b5;XT=1;var n=Tae(),e=vN(),t={wrap:!0,stringSearch:!0},r={init:function(d){this.updateOptions(d),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=a.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(d){var g=this.options;this.options=d||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),g&&g.id&&g.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(d){this.focusGroup.focusNodeAtIndex(d)},addItem:function(d){this.focusGroup.addMember(d)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(d){this.focusGroup._handleUnboundKey(d)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(d){if(!this.isOpen&&(d=d||{},d.focusMenu===void 0&&(d.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),d.focusMenu)){var g=this;this.moveFocusTimer=setTimeout(function(){g.focusItem(0)},0)}},closeMenu:function(d){this.isOpen&&(d=d||{},this.isOpen=!1,this.update(),d.focusButton&&this.button.ref.current.focus())},toggleMenu:function(d,g){d=d||{},g=g||{},this.isOpen?this.closeMenu(d):this.openMenu(g)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var d=o.button.ref.current;if(d){var g=d.ownerDocument.activeElement;if(!(d&&g===d)){var b=o.menu.ref.current;if(b===g){o.focusItem(0);return}b&&b.contains(g)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,d){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,d)}function a(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return b5=function(o){var d=Object.create(r);return d.init(o),d},b5}var x5,JT;function jx(){if(JT)return x5;JT=1;var n=Fa(),e=n.createContext();return x5=e,x5}var w5,e9;function Nx(){if(e9)return w5;e9=1;var n=dp();return w5={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},w5}var M5,t9;function Gx(){return t9||(t9=1,M5=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),M5}var S5,n9;function Rae(){if(n9)return S5;n9=1;function n(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function e(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:O}function t(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}var r=Fa(),i=dp(),s=Pae(),a=jx(),o=Nx(),d=o.refType,g=Gx(),b={children:i.node.isRequired,forwardedRef:d,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},E=function(k){return{onMenuToggle:k.onMenuToggle,onSelection:k.onSelection,closeOnSelection:k.closeOnSelection,closeOnBlur:k.closeOnBlur,id:k.id}},S=function(O){t(k,O);function k(U){n(this,k);var z=e(this,O.call(this,U));return z.manager=s(E(U)),z}return k.prototype.componentDidUpdate=function(){this.manager.updateOptions(E(this.props))},k.prototype.render=function(){var z={};return g(z,this.props,b),r.createElement(a.Provider,{value:this.manager},r.createElement(this.props.tag,z,this.props.children))},k}(r.Component);return S.propTypes=b,S.defaultProps={tag:"div"},S5=r.forwardRef(function(O,k){var U={forwardedRef:k};return g(U,O,{children:b.children,forwardedRef:b.forwardedRef}),g(U,{forwardedRef:k}),r.createElement(S,U,O.children)}),S5}var E5,r9;function Kae(){if(r9)return E5;r9=1;function n(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function e(S,O){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:S}function t(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(S,O):S.__proto__=O)}var r=Fa(),i=dp(),s=jx(),a=Nx(),o=a.refType,d=Gx(),g={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},b=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},E=function(S){t(O,S);function O(){var k,U,z;n(this,O);for(var q=arguments.length,Q=Array(q),re=0;re<q;re++)Q[re]=arguments[re];return z=(k=(U=e(this,S.call.apply(S,[this].concat(Q))),U),U.ref=r.createRef(),U.handleKeyDown=function(X){if(!U.props.disabled){var Y=U.props.ambManager;switch(X.key){case"ArrowDown":X.preventDefault(),Y.isOpen?Y.focusItem(0):Y.openMenu();break;case"Enter":case" ":X.preventDefault(),Y.toggleMenu();break;case"Escape":Y.handleMenuKey(X);break;default:Y.handleButtonNonArrowKey(X)}}},U.handleClick=function(){U.props.disabled||U.props.ambManager.toggleMenu({},{focusMenu:!1})},U.setRef=function(X){U.ref.current=X,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(X):U.props.forwardedRef&&(U.props.forwardedRef.current=X)},k),e(U,z)}return O.prototype.componentDidMount=function(){this.props.ambManager.button=this},O.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},O.prototype.render=function(){var U=this.props,z=this.props.ambManager,q={role:"button",tabIndex:U.disabled?"":"0","aria-haspopup":!0,"aria-expanded":z.isOpen,"aria-disabled":U.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},Q={};return d(Q,g),b().indexOf(U.tag)>=0&&delete Q.disabled,z.options.closeOnBlur&&(q.onBlur=z.handleBlur),d(q,U,Q),d(q,{ref:this.setRef}),r.createElement(U.tag,q,U.children)},O}(r.Component);return E.propTypes=g,E.defaultProps={tag:"span"},E5=r.forwardRef(function(S,O){return r.createElement(s.Consumer,null,function(k){var U={ambManager:k,forwardedRef:O};return d(U,S,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(E,U,S.children)})}),E5}var B5,i9;function Dae(){return i9||(i9=1,B5=function(e,t,r){var i=0,s=0,a=!1,o=!1,d=!1;e.addEventListener("click",g,r),e.addEventListener("touchstart",b,r);function g(z){d||t(z)}function b(z){d=!0,!a&&(a=!0,e.addEventListener("touchmove",E,r),e.addEventListener("touchend",S,r),e.addEventListener("touchcancel",O,r),o=!1,i=z.touches[0].clientX,s=z.touches[0].clientY)}function E(z){o||Math.abs(z.touches[0].clientX-i)<=10&&Math.abs(z.touches[0].clientY-s)<=10||(o=!0)}function S(z){a=!1,k(),o||t(z)}function O(){a=!1,o=!1,i=0,s=0}function k(){e.removeEventListener("touchmove",E,r),e.removeEventListener("touchend",S,r),e.removeEventListener("touchcancel",O,r)}function U(){e.removeEventListener("click",g,r),e.removeEventListener("touchstart",b,r),k()}return{remove:U}}),B5}var O5,o9;function Lae(){if(o9)return O5;o9=1;function n(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function e(S,O){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:S}function t(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(S,O):S.__proto__=O)}var r=Fa(),i=dp(),s=Dae(),a=jx(),o=Nx(),d=o.refType,g=Gx(),b={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:d,tag:i.string},E=function(S){t(O,S);function O(){var k,U,z;n(this,O);for(var q=arguments.length,Q=Array(q),re=0;re<q;re++)Q[re]=arguments[re];return z=(k=(U=e(this,S.call.apply(S,[this].concat(Q))),U),U.ref=r.createRef(),U.addTapListener=function(){var X=U.ref.current;if(X){var Y=X.ownerDocument;Y&&(U.tapListener=s(Y.documentElement,U.handleTap))}},U.handleTap=function(X){U.ref.current.contains(X.target)||U.props.ambManager.button.ref.current.contains(X.target)||U.props.ambManager.closeMenu()},U.setRef=function(X){U.ref.current=X,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(X):U.props.forwardedRef&&(U.props.forwardedRef.current=X)},k),e(U,z)}return O.prototype.componentDidMount=function(){this.props.ambManager.menu=this},O.prototype.componentDidUpdate=function(){var U=this.props.ambManager;U.options.closeOnBlur&&(U.isOpen&&!this.tapListener?this.addTapListener():!U.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),U.isOpen||U.clearItems())},O.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},O.prototype.render=function(){var U=this.props,z=this.props.ambManager,q=function(){return typeof U.children=="function"?U.children({isOpen:z.isOpen}):z.isOpen?U.children:!1}();if(!q)return!1;var Q={onKeyDown:z.handleMenuKey,role:"menu",tabIndex:-1};return z.options.closeOnBlur&&(Q.onBlur=z.handleBlur),g(Q,U,b),g(Q,{ref:this.setRef}),r.createElement(U.tag,Q,q)},O}(r.Component);return E.propTypes=b,E.defaultProps={tag:"div"},O5=r.forwardRef(function(S,O){return r.createElement(a.Consumer,null,function(k){var U={ambManager:k,forwardedRef:O};return g(U,S,{ambManager:b.ambManager,children:b.children,forwardedRef:b.forwardedRef}),r.createElement(E,U,S.children)})}),O5}var I5,s9;function Fae(){if(s9)return I5;s9=1;function n(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function e(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function t(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var r=Fa(),i=dp(),s=jx(),a=Nx(),o=a.refType,d=Gx(),g={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},b=function(E){t(S,E);function S(){var O,k,U;n(this,S);for(var z=arguments.length,q=Array(z),Q=0;Q<z;Q++)q[Q]=arguments[Q];return U=(O=(k=e(this,E.call.apply(E,[this].concat(q))),k),k.ref=r.createRef(),k.handleKeyDown=function(re){re.key!=="Enter"&&re.key!==" "||k.props.tag==="a"&&k.props.href||(re.preventDefault(),k.selectItem(re))},k.selectItem=function(re){var X=typeof k.props.value<"u"?k.props.value:k.props.children;k.props.ambManager.handleSelection(X,re)},k.setRef=function(re){k.ref.current=re,typeof k.props.forwardedRef=="function"?k.props.forwardedRef(re):k.props.forwardedRef&&(k.props.forwardedRef.current=re)},O),e(k,U)}return S.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},S.prototype.render=function(){var k={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return d(k,this.props,g),r.createElement(this.props.tag,k,this.props.children)},S}(r.Component);return b.propTypes=g,b.defaultProps={tag:"div"},I5=r.forwardRef(function(E,S){return r.createElement(s.Consumer,null,function(O){var k={ambManager:O,forwardedRef:S};return d(k,E,{ambManager:g.ambManager,children:g.children,forwardedRef:g.forwardedRef}),r.createElement(b,k,E.children)})}),I5}var k5,a9;function Uae(){if(a9)return k5;a9=1;var n=vN();return k5={Wrapper:Rae(),Button:Kae(),Menu:Lae(),MenuItem:Fae(),openMenu:n.openMenu,closeMenu:n.closeMenu},k5}var lb=Uae();function l9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l9(Object(t),!0).forEach(function(r){Fl(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Wx(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function u9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Qx(n,e,t){return e&&u9(n.prototype,e),t&&u9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Fl(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nm(){return nm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nm.apply(this,arguments)}function CI(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&hB(n,e)}function R2(n){return R2=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R2(n)}function hB(n,e){return hB=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},hB(n,e)}function zae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jae(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function qx(n,e){if(n==null)return{};var t=jae(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ip(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Nae(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ip(n)}function bI(n){var e=zae();return function(){var r=R2(n),i;if(e){var s=R2(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Nae(this,i)}}function Gae(n,e){return qae(n)||$ae(n,e)||_N(n,e)||Hae()}function Wae(n){return Qae(n)||Yae(n)||_N(n)||Vae()}function Qae(n){if(Array.isArray(n))return fB(n)}function qae(n){if(Array.isArray(n))return n}function Yae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $ae(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,a,o;try{for(t=t.call(n);!(i=(a=t.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(d){s=!0,o=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function _N(n,e){if(n){if(typeof n=="string")return fB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fB(n,e)}}function fB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Vae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Zae=Qx(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,a=s===void 0?!1:s,o=e.allowZeroExpanded,d=o===void 0?!1:o;Wx(this,n),Fl(this,"expanded",void 0),Fl(this,"allowMultipleExpanded",void 0),Fl(this,"allowZeroExpanded",void 0),Fl(this,"toggleExpanded",function(g){if(t.isItemDisabled(g))return t;var b=t.isItemExpanded(g);return b?t.augment({expanded:t.expanded.filter(function(E){return E!==g})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(Wae(t.expanded),[g]):[g]})}),Fl(this,"isItemDisabled",function(g){var b=t.isItemExpanded(g),E=t.expanded.length===1;return!!(b&&!t.allowZeroExpanded&&E)}),Fl(this,"isItemExpanded",function(g){return t.expanded.indexOf(g)!==-1}),Fl(this,"getPanelAttributes",function(g,b){var E=b??t.isItemExpanded(g);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!E:void 0,"aria-labelledby":t.getButtonId(g),id:t.getPanelId(g),hidden:E?void 0:!0}}),Fl(this,"getHeadingAttributes",function(){return{role:"heading"}}),Fl(this,"getButtonAttributes",function(g,b){var E=b??t.isItemExpanded(g),S=t.isItemDisabled(g);return{id:t.getButtonId(g),"aria-disabled":S,"aria-expanded":E,"aria-controls":t.getPanelId(g),role:"button",tabIndex:0}}),Fl(this,"getPanelId",function(g){return"accordion__panel-".concat(g)}),Fl(this,"getButtonId",function(g){return"accordion__heading-".concat(g)}),Fl(this,"augment",function(g){return new n(dB({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},g))}),this.expanded=i,this.allowMultipleExpanded=a,this.allowZeroExpanded=d}),CN=ui.createContext(null),bN=function(n){CI(t,n);var e=bI(t);function t(){var r;Wx(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Fl(ip(r),"state",new Zae({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Fl(ip(r),"toggleExpanded",function(o){r.setState(function(d){return d.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Fl(ip(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),Fl(ip(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),Fl(ip(r),"getPanelAttributes",function(o,d){return r.state.getPanelAttributes(o,d)}),Fl(ip(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Fl(ip(r),"getButtonAttributes",function(o,d){return r.state.getButtonAttributes(o,d)}),r}return Qx(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,a=i.allowMultipleExpanded;return ui.createElement(CN.Provider,{value:{allowMultipleExpanded:a,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(ui.PureComponent);Fl(bN,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var xN=function(n){CI(t,n);var e=bI(t);function t(){var r;Wx(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Fl(ip(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return Qx(t,[{key:"render",value:function(){return ui.createElement(CN.Consumer,null,this.renderChildren)}}]),t}(ui.PureComponent),Xae=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Jae=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,a=e.onChange,o=e.preExpanded,d=qx(e,Xae);return ui.createElement(bN,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:a},ui.createElement("div",nm({"data-accordion-component":"Accordion",className:r},d)))},pB;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(pB||(pB={}));var wN=pB,T5=0;function ele(){var n=T5;return T5=T5+1,"raa-".concat(n)}var tle=ui.useId||ele,nle=/[\u0009\u000a\u000c\u000d\u0020]/g;function w_(n){return n===""||nle.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var MN=ui.createContext(null),rle=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,a=function(){i.toggleExpanded(r)},o=function(g){var b=s??g.isItemExpanded(r),E=g.isItemDisabled(r),S=g.getPanelAttributes(r,s),O=g.getHeadingAttributes(r),k=g.getButtonAttributes(r,s);return ui.createElement(MN.Provider,{value:{uuid:r,expanded:b,disabled:E,toggleExpanded:a,panelAttributes:S,headingAttributes:O,buttonAttributes:k}},t)};return ui.createElement(xN,null,o)},ile=function(e){return ui.createElement(xN,null,function(t){return ui.createElement(rle,nm({},e,{accordionContext:t}))})},Yx=function(e){var t=e.children,r=function(s){return s?t(s):null};return ui.createElement(MN.Consumer,null,r)},ole=["uuid","dangerouslySetExpanded","className","activeClassName"],SN=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,a=e.activeClassName,o=qx(e,ole),d=ui.useState(tle()),g=Gae(d,1),b=g[0],E=t??b,S=function(k){var U=k.expanded,z=U&&a?a:s;return ui.createElement("div",nm({"data-accordion-component":"AccordionItem",className:z},o))};return w_(E.toString()),o.id&&w_(o.id),ui.createElement(ile,{uuid:E,dangerouslySetExpanded:r},ui.createElement(Yx,null,S))};SN.displayName=wN.AccordionItem;function EN(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:EN(n.parentElement))}function $x(n){var e=EN(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function sle(n){var e=$x(n)||[],t=e[0];t&&t.focus()}function ale(n){var e=$x(n)||[],t=e[e.length-1];t&&t.focus()}function lle(n){var e=$x(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function ule(n){var e=$x(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Im={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Ale=["toggleExpanded","className"],cle=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=qx(e,Ale),a=function(d){var g=d.key;if((g===Im.ENTER||g===Im.SPACE||g===Im.SPACE_DEPRECATED)&&(d.preventDefault(),t()),d.target instanceof HTMLElement)switch(g){case Im.HOME:{d.preventDefault(),sle(d.target);break}case Im.END:{d.preventDefault(),ale(d.target);break}case Im.LEFT:case Im.UP:{d.preventDefault(),ule(d.target);break}case Im.RIGHT:case Im.DOWN:{d.preventDefault(),lle(d.target);break}}};return s.id&&w_(s.id),ui.createElement("div",nm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:a,"data-accordion-component":"AccordionItemButton"}))},dle=function(e){return ui.createElement(Yx,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return ui.createElement(cle,nm({toggleExpanded:r},e,i))})},hle={className:"accordion__heading","aria-level":3},fle=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,BN=function(n){CI(t,n);var e=bI(t);function t(){var r;Wx(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r=e.call.apply(e,[this].concat(s)),Fl(ip(r),"ref",void 0),Fl(ip(r),"setRef",function(o){r.ref=o}),r}return Qx(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return ui.createElement("div",nm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(fle)}}]),t}(ui.PureComponent);Fl(BN,"defaultProps",hle);var ON=function(e){return ui.createElement(Yx,null,function(t){var r=t.headingAttributes;return e.id&&w_(e.id),ui.createElement(BN,nm({},e,r))})};ON.displayName=wN.AccordionItemHeading;var ple=["className","region","id"],mle=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,a=qx(e,ple),o=function(g){var b=g.panelAttributes;s&&w_(s);var E=dB(dB({},b),{},{"aria-labelledby":i?b["aria-labelledby"]:void 0});return ui.createElement("div",nm({"data-accordion-component":"AccordionItemPanel",className:r},a,E,{role:i?"region":void 0}))};return ui.createElement(Yx,null,o)},Ob={exports:{}},gle=Ob.exports,A9;function Vx(){return A9||(A9=1,function(n,e){(function(t,r){n.exports=r()})(gle,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),d=s||a||o,g=d&&(s?document.documentMode||6:+(o||a)[1]),b=!o&&/WebKit\//.test(t),E=b&&/Qt\/\d+\.\d+/.test(t),S=!o&&/Chrome\/(\d+)/.exec(t),O=S&&+S[1],k=/Opera\//.test(t),U=/Apple Computer/.test(navigator.vendor),z=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),q=/PhantomJS/.test(t),Q=U&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),re=/Android/.test(t),X=Q||re||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),Y=Q||/Mac/.test(r),J=/\bCrOS\b/.test(t),N=/win/i.test(r),ie=k&&t.match(/Version\/(\d*\.\d*)/);ie&&(ie=Number(ie[1])),ie&&ie>=15&&(k=!1,b=!0);var he=Y&&(E||k&&(ie==null||ie<12.11)),de=i||d&&g>=9;function we(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var fe=function(A,y){var I=A.className,B=we(y).exec(I);if(B){var K=I.slice(B.index+B[0].length);A.className=I.slice(0,B.index)+(K?B[1]+K:"")}};function be(A){for(var y=A.childNodes.length;y>0;--y)A.removeChild(A.firstChild);return A}function Pe(A,y){return be(A).appendChild(y)}function pe(A,y,I,B){var K=document.createElement(A);if(I&&(K.className=I),B&&(K.style.cssText=B),typeof y=="string")K.appendChild(document.createTextNode(y));else if(y)for(var H=0;H<y.length;++H)K.appendChild(y[H]);return K}function it(A,y,I,B){var K=pe(A,y,I,B);return K.setAttribute("role","presentation"),K}var We;document.createRange?We=function(A,y,I,B){var K=document.createRange();return K.setEnd(B||A,I),K.setStart(A,y),K}:We=function(A,y,I){var B=document.body.createTextRange();try{B.moveToElementText(A.parentNode)}catch{return B}return B.collapse(!0),B.moveEnd("character",I),B.moveStart("character",y),B};function $e(A,y){if(y.nodeType==3&&(y=y.parentNode),A.contains)return A.contains(y);do if(y.nodeType==11&&(y=y.host),y==A)return!0;while(y=y.parentNode)}function ht(A){var y=A.ownerDocument||A,I;try{I=A.activeElement}catch{I=y.body||null}for(;I&&I.shadowRoot&&I.shadowRoot.activeElement;)I=I.shadowRoot.activeElement;return I}function De(A,y){var I=A.className;we(y).test(I)||(A.className+=(I?" ":"")+y)}function Ne(A,y){for(var I=A.split(" "),B=0;B<I.length;B++)I[B]&&!we(I[B]).test(y)&&(y+=" "+I[B]);return y}var at=function(A){A.select()};Q?at=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:d&&(at=function(A){try{A.select()}catch{}});function wt(A){return A.display.wrapper.ownerDocument}function Ct(A){return ft(A.display.wrapper)}function ft(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Lt(A){return wt(A).defaultView}function Kt(A){var y=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,y)}}function Fe(A,y,I){y||(y={});for(var B in A)A.hasOwnProperty(B)&&(I!==!1||!y.hasOwnProperty(B))&&(y[B]=A[B]);return y}function Te(A,y,I,B,K){y==null&&(y=A.search(/[^\s\u00a0]/),y==-1&&(y=A.length));for(var H=B||0,ue=K||0;;){var _e=A.indexOf("	",H);if(_e<0||_e>=y)return ue+(y-H);ue+=_e-H,ue+=I-ue%I,H=_e+1}}var Se=function(){this.id=null,this.f=null,this.time=0,this.handler=Kt(this.onTimeout,this)};Se.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},Se.prototype.set=function(A,y){this.f=y;var I=+new Date+A;(!this.id||I<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=I)};function Je(A,y){for(var I=0;I<A.length;++I)if(A[I]==y)return I;return-1}var yt=50,dt={toString:function(){return"CodeMirror.Pass"}},Ut={scroll:!1},en={origin:"*mouse"},Nt={origin:"+move"};function yn(A,y,I){for(var B=0,K=0;;){var H=A.indexOf("	",B);H==-1&&(H=A.length);var ue=H-B;if(H==A.length||K+ue>=y)return B+Math.min(ue,y-K);if(K+=H-B,K+=I-K%I,B=H+1,K>=y)return B}}var jn=[""];function Rr(A){for(;jn.length<=A;)jn.push(sr(jn)+" ");return jn[A]}function sr(A){return A[A.length-1]}function Jn(A,y){for(var I=[],B=0;B<A.length;B++)I[B]=y(A[B],B);return I}function mr(A,y,I){for(var B=0,K=I(y);B<A.length&&I(A[B])<=K;)B++;A.splice(B,0,y)}function pr(){}function xr(A,y){var I;return Object.create?I=Object.create(A):(pr.prototype=A,I=new pr),y&&Fe(y,I),I}var Qn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Er(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||Qn.test(A))}function Ge(A,y){return y?y.source.indexOf("\\w")>-1&&Er(A)?!0:y.test(A):Er(A)}function Ae(A){for(var y in A)if(A.hasOwnProperty(y)&&A[y])return!1;return!0}var me=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Xe(A){return A.charCodeAt(0)>=768&&me.test(A)}function Et(A,y,I){for(;(I<0?y>0:y<A.length)&&Xe(A.charAt(y));)y+=I;return y}function Yt(A,y,I){for(var B=y>I?-1:1;;){if(y==I)return y;var K=(y+I)/2,H=B<0?Math.ceil(K):Math.floor(K);if(H==y)return A(H)?y:I;A(H)?I=H:y=H+B}}function nn(A,y,I,B){if(!A)return B(y,I,"ltr",0);for(var K=!1,H=0;H<A.length;++H){var ue=A[H];(ue.from<I&&ue.to>y||y==I&&ue.to==y)&&(B(Math.max(ue.from,y),Math.min(ue.to,I),ue.level==1?"rtl":"ltr",H),K=!0)}K||B(y,I,"ltr")}var rr=null;function Ee(A,y,I){var B;rr=null;for(var K=0;K<A.length;++K){var H=A[K];if(H.from<y&&H.to>y)return K;H.to==y&&(H.from!=H.to&&I=="before"?B=K:rr=K),H.from==y&&(H.from!=H.to&&I!="before"?B=K:rr=K)}return B??rr}var oe=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",y="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function I(Ue){return Ue<=247?A.charAt(Ue):1424<=Ue&&Ue<=1524?"R":1536<=Ue&&Ue<=1785?y.charAt(Ue-1536):1774<=Ue&&Ue<=2220?"r":8192<=Ue&&Ue<=8203?"w":Ue==8204?"b":"L"}var B=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,K=/[stwN]/,H=/[LRr]/,ue=/[Lb1n]/,_e=/[1n]/;function Ie(Ue,ct,xt){this.level=Ue,this.from=ct,this.to=xt}return function(Ue,ct){var xt=ct=="ltr"?"L":"R";if(Ue.length==0||ct=="ltr"&&!B.test(Ue))return!1;for(var Ht=Ue.length,Wt=[],xn=0;xn<Ht;++xn)Wt.push(I(Ue.charCodeAt(xn)));for(var Pn=0,Yn=xt;Pn<Ht;++Pn){var Xn=Wt[Pn];Xn=="m"?Wt[Pn]=Yn:Yn=Xn}for(var _r=0,ur=xt;_r<Ht;++_r){var Fr=Wt[_r];Fr=="1"&&ur=="r"?Wt[_r]="n":H.test(Fr)&&(ur=Fr,Fr=="r"&&(Wt[_r]="R"))}for(var ai=1,Gr=Wt[0];ai<Ht-1;++ai){var Xi=Wt[ai];Xi=="+"&&Gr=="1"&&Wt[ai+1]=="1"?Wt[ai]="1":Xi==","&&Gr==Wt[ai+1]&&(Gr=="1"||Gr=="n")&&(Wt[ai]=Gr),Gr=Xi}for(var ko=0;ko<Ht;++ko){var qa=Wt[ko];if(qa==",")Wt[ko]="N";else if(qa=="%"){var aa=void 0;for(aa=ko+1;aa<Ht&&Wt[aa]=="%";++aa);for(var Ca=ko&&Wt[ko-1]=="!"||aa<Ht&&Wt[aa]=="1"?"1":"N",ba=ko;ba<aa;++ba)Wt[ba]=Ca;ko=aa-1}}for(var Pa=0,Yl=xt;Pa<Ht;++Pa){var Ya=Wt[Pa];Yl=="L"&&Ya=="1"?Wt[Pa]="L":H.test(Ya)&&(Yl=Ya)}for(var xa=0;xa<Ht;++xa)if(K.test(Wt[xa])){var hs=void 0;for(hs=xa+1;hs<Ht&&K.test(Wt[hs]);++hs);for(var gi=(xa?Wt[xa-1]:xt)=="L",Xo=(hs<Ht?Wt[hs]:xt)=="L",la=gi==Xo?gi?"L":"R":xt,fa=xa;fa<hs;++fa)Wt[fa]=la;xa=hs-1}for(var ks=[],Kl,Ro=0;Ro<Ht;)if(ue.test(Wt[Ro])){var Pd=Ro;for(++Ro;Ro<Ht&&ue.test(Wt[Ro]);++Ro);ks.push(new Ie(0,Pd,Ro))}else{var yl=Ro,PA=ks.length,Xc=ct=="rtl"?1:0;for(++Ro;Ro<Ht&&Wt[Ro]!="L";++Ro);for(var vl=yl;vl<Ro;)if(_e.test(Wt[vl])){yl<vl&&(ks.splice(PA,0,new Ie(1,yl,vl)),PA+=Xc);var _l=vl;for(++vl;vl<Ro&&_e.test(Wt[vl]);++vl);ks.splice(PA,0,new Ie(2,_l,vl)),PA+=Xc,yl=vl}else++vl;yl<Ro&&ks.splice(PA,0,new Ie(1,yl,Ro))}return ct=="ltr"&&(ks[0].level==1&&(Kl=Ue.match(/^\s+/))&&(ks[0].from=Kl[0].length,ks.unshift(new Ie(0,0,Kl[0].length))),sr(ks).level==1&&(Kl=Ue.match(/\s+$/))&&(sr(ks).to-=Kl[0].length,ks.push(new Ie(0,Ht-Kl[0].length,Ht)))),ct=="rtl"?ks.reverse():ks}}();function ve(A,y){var I=A.order;return I==null&&(I=A.order=oe(A.text,y)),I}var p=[],ze=function(A,y,I){if(A.addEventListener)A.addEventListener(y,I,!1);else if(A.attachEvent)A.attachEvent("on"+y,I);else{var B=A._handlers||(A._handlers={});B[y]=(B[y]||p).concat(I)}};function rt(A,y){return A._handlers&&A._handlers[y]||p}function pt(A,y,I){if(A.removeEventListener)A.removeEventListener(y,I,!1);else if(A.detachEvent)A.detachEvent("on"+y,I);else{var B=A._handlers,K=B&&B[y];if(K){var H=Je(K,I);H>-1&&(B[y]=K.slice(0,H).concat(K.slice(H+1)))}}}function Bt(A,y){var I=rt(A,y);if(I.length)for(var B=Array.prototype.slice.call(arguments,2),K=0;K<I.length;++K)I[K].apply(null,B)}function vt(A,y,I){return typeof y=="string"&&(y={type:y,preventDefault:function(){this.defaultPrevented=!0}}),Bt(A,I||y.type,A,y),Sn(y)||y.codemirrorIgnore}function Xt(A){var y=A._handlers&&A._handlers.cursorActivity;if(y)for(var I=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),B=0;B<y.length;++B)Je(I,y[B])==-1&&I.push(y[B])}function tn(A,y){return rt(A,y).length>0}function zt(A){A.prototype.on=function(y,I){ze(this,y,I)},A.prototype.off=function(y,I){pt(this,y,I)}}function _t(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function Tn(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function Sn(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function Ar(A){_t(A),Tn(A)}function wr(A){return A.target||A.srcElement}function rn(A){var y=A.which;return y==null&&(A.button&1?y=1:A.button&2?y=3:A.button&4&&(y=2)),Y&&A.ctrlKey&&y==1&&(y=3),y}var Fn=function(){if(d&&g<9)return!1;var A=pe("div");return"draggable"in A||"dragDrop"in A}(),Rn;function Br(A){if(Rn==null){var y=pe("span","");Pe(A,pe("span",[y,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(Rn=y.offsetWidth<=1&&y.offsetHeight>2&&!(d&&g<8))}var I=Rn?pe("span",""):pe("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return I.setAttribute("cm-text",""),I}var Mr;function Kr(A){if(Mr!=null)return Mr;var y=Pe(A,document.createTextNode("AA")),I=We(y,0,1).getBoundingClientRect(),B=We(y,1,2).getBoundingClientRect();return be(A),!I||I.left==I.right?!1:Mr=B.right-I.right<3}var ir=`

b`.split(/\n/).length!=3?function(A){for(var y=0,I=[],B=A.length;y<=B;){var K=A.indexOf(`
`,y);K==-1&&(K=A.length);var H=A.slice(y,A.charAt(K-1)=="\r"?K-1:K),ue=H.indexOf("\r");ue!=-1?(I.push(H.slice(0,ue)),y+=ue+1):(I.push(H),y=K+1)}return I}:function(A){return A.split(/\r\n?|\n/)},co=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var y;try{y=A.ownerDocument.selection.createRange()}catch{}return!y||y.parentElement()!=A?!1:y.compareEndPoints("StartToEnd",y)!=0},Sa=function(){var A=pe("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),qi=null;function yi(A){if(qi!=null)return qi;var y=Pe(A,pe("span","x")),I=y.getBoundingClientRect(),B=We(y,0,1).getBoundingClientRect();return qi=Math.abs(I.left-B.left)>1}var oo={},Mo={};function Ti(A,y){arguments.length>2&&(y.dependencies=Array.prototype.slice.call(arguments,2)),oo[A]=y}function Ua(A,y){Mo[A]=y}function Ea(A){if(typeof A=="string"&&Mo.hasOwnProperty(A))A=Mo[A];else if(A&&typeof A.name=="string"&&Mo.hasOwnProperty(A.name)){var y=Mo[A.name];typeof y=="string"&&(y={name:y}),A=xr(y,A),A.name=y.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return Ea("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return Ea("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function ns(A,y){y=Ea(y);var I=oo[y.name];if(!I)return ns(A,"text/plain");var B=I(A,y);if(Aa.hasOwnProperty(y.name)){var K=Aa[y.name];for(var H in K)K.hasOwnProperty(H)&&(B.hasOwnProperty(H)&&(B["_"+H]=B[H]),B[H]=K[H])}if(B.name=y.name,y.helperType&&(B.helperType=y.helperType),y.modeProps)for(var ue in y.modeProps)B[ue]=y.modeProps[ue];return B}var Aa={};function Al(A,y){var I=Aa.hasOwnProperty(A)?Aa[A]:Aa[A]={};Fe(y,I)}function ao(A,y){if(y===!0)return y;if(A.copyState)return A.copyState(y);var I={};for(var B in y){var K=y[B];K instanceof Array&&(K=K.concat([])),I[B]=K}return I}function Pu(A,y){for(var I;A.innerMode&&(I=A.innerMode(y),!(!I||I.mode==A));)y=I.state,A=I.mode;return I||{mode:A,state:y}}function tu(A,y,I){return A.startState?A.startState(y,I):!0}var so=function(A,y,I){this.pos=this.start=0,this.string=A,this.tabSize=y||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=I};so.prototype.eol=function(){return this.pos>=this.string.length},so.prototype.sol=function(){return this.pos==this.lineStart},so.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},so.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},so.prototype.eat=function(A){var y=this.string.charAt(this.pos),I;if(typeof A=="string"?I=y==A:I=y&&(A.test?A.test(y):A(y)),I)return++this.pos,y},so.prototype.eatWhile=function(A){for(var y=this.pos;this.eat(A););return this.pos>y},so.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},so.prototype.skipToEnd=function(){this.pos=this.string.length},so.prototype.skipTo=function(A){var y=this.string.indexOf(A,this.pos);if(y>-1)return this.pos=y,!0},so.prototype.backUp=function(A){this.pos-=A},so.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Te(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Te(this.string,this.lineStart,this.tabSize):0)},so.prototype.indentation=function(){return Te(this.string,null,this.tabSize)-(this.lineStart?Te(this.string,this.lineStart,this.tabSize):0)},so.prototype.match=function(A,y,I){if(typeof A=="string"){var B=function(ue){return I?ue.toLowerCase():ue},K=this.string.substr(this.pos,A.length);if(B(K)==B(A))return y!==!1&&(this.pos+=A.length),!0}else{var H=this.string.slice(this.pos).match(A);return H&&H.index>0?null:(H&&y!==!1&&(this.pos+=H[0].length),H)}},so.prototype.current=function(){return this.string.slice(this.start,this.pos)},so.prototype.hideFirstChars=function(A,y){this.lineStart+=A;try{return y()}finally{this.lineStart-=A}},so.prototype.lookAhead=function(A){var y=this.lineOracle;return y&&y.lookAhead(A)},so.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function Dr(A,y){if(y-=A.first,y<0||y>=A.size)throw new Error("There is no line "+(y+A.first)+" in the document.");for(var I=A;!I.lines;)for(var B=0;;++B){var K=I.children[B],H=K.chunkSize();if(y<H){I=K;break}y-=H}return I.lines[y]}function Za(A,y,I){var B=[],K=y.line;return A.iter(y.line,I.line+1,function(H){var ue=H.text;K==I.line&&(ue=ue.slice(0,I.ch)),K==y.line&&(ue=ue.slice(y.ch)),B.push(ue),++K}),B}function Ps(A,y,I){var B=[];return A.iter(y,I,function(K){B.push(K.text)}),B}function ia(A,y){var I=y-A.height;if(I)for(var B=A;B;B=B.parent)B.height+=I}function Qe(A){if(A.parent==null)return null;for(var y=A.parent,I=Je(y.lines,A),B=y.parent;B;y=B,B=B.parent)for(var K=0;B.children[K]!=y;++K)I+=B.children[K].chunkSize();return I+y.first}function bt(A,y){var I=A.first;e:do{for(var B=0;B<A.children.length;++B){var K=A.children[B],H=K.height;if(y<H){A=K;continue e}y-=H,I+=K.chunkSize()}return I}while(!A.lines);for(var ue=0;ue<A.lines.length;++ue){var _e=A.lines[ue],Ie=_e.height;if(y<Ie)break;y-=Ie}return I+ue}function fn(A,y){return y>=A.first&&y<A.first+A.size}function Nn(A,y){return String(A.lineNumberFormatter(y+A.firstLineNumber))}function un(A,y,I){if(I===void 0&&(I=null),!(this instanceof un))return new un(A,y,I);this.line=A,this.ch=y,this.sticky=I}function er(A,y){return A.line-y.line||A.ch-y.ch}function Pi(A,y){return A.sticky==y.sticky&&er(A,y)==0}function ho(A){return un(A.line,A.ch)}function _s(A,y){return er(A,y)<0?y:A}function Ns(A,y){return er(A,y)<0?A:y}function vA(A,y){return Math.max(A.first,Math.min(y,A.first+A.size-1))}function ri(A,y){if(y.line<A.first)return un(A.first,0);var I=A.first+A.size-1;return y.line>I?un(I,Dr(A,I).text.length):wi(y,Dr(A,y.line).text.length)}function wi(A,y){var I=A.ch;return I==null||I>y?un(A.line,y):I<0?un(A.line,0):A}function Xa(A,y){for(var I=[],B=0;B<y.length;B++)I[B]=ri(A,y[B]);return I}var Ai=function(A,y){this.state=A,this.lookAhead=y},ca=function(A,y,I,B){this.state=y,this.doc=A,this.line=I,this.maxLookAhead=B||0,this.baseTokens=null,this.baseTokenPos=1};ca.prototype.lookAhead=function(A){var y=this.doc.getLine(this.line+A);return y!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),y},ca.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var y=this.baseTokens[this.baseTokenPos+1];return{type:y&&y.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},ca.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ca.fromSaved=function(A,y,I){return y instanceof Ai?new ca(A,ao(A.mode,y.state),I,y.lookAhead):new ca(A,ao(A.mode,y),I)},ca.prototype.save=function(A){var y=A!==!1?ao(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ai(y,this.maxLookAhead):y};function iA(A,y,I,B){var K=[A.state.modeGen],H={};zl(A,y.text,A.doc.mode,I,function(Ue,ct){return K.push(Ue,ct)},H,B);for(var ue=I.state,_e=function(Ue){I.baseTokens=K;var ct=A.state.overlays[Ue],xt=1,Ht=0;I.state=!0,zl(A,y.text,ct.mode,I,function(Wt,xn){for(var Pn=xt;Ht<Wt;){var Yn=K[xt];Yn>Wt&&K.splice(xt,1,Wt,K[xt+1],Yn),xt+=2,Ht=Math.min(Wt,Yn)}if(xn)if(ct.opaque)K.splice(Pn,xt-Pn,Wt,"overlay "+xn),xt=Pn+2;else for(;Pn<xt;Pn+=2){var Xn=K[Pn+1];K[Pn+1]=(Xn?Xn+" ":"")+"overlay "+xn}},H),I.state=ue,I.baseTokens=null,I.baseTokenPos=1},Ie=0;Ie<A.state.overlays.length;++Ie)_e(Ie);return{styles:K,classes:H.bgClass||H.textClass?H:null}}function ls(A,y,I){if(!y.styles||y.styles[0]!=A.state.modeGen){var B=Lr(A,Qe(y)),K=y.text.length>A.options.maxHighlightLength&&ao(A.doc.mode,B.state),H=iA(A,y,B);K&&(B.state=K),y.stateAfter=B.save(!K),y.styles=H.styles,H.classes?y.styleClasses=H.classes:y.styleClasses&&(y.styleClasses=null),I===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return y.styles}function Lr(A,y,I){var B=A.doc,K=A.display;if(!B.mode.startState)return new ca(B,!0,y);var H=rs(A,y,I),ue=H>B.first&&Dr(B,H-1).stateAfter,_e=ue?ca.fromSaved(B,ue,H):new ca(B,tu(B.mode),H);return B.iter(H,y,function(Ie){Ei(A,Ie.text,_e);var Ue=_e.line;Ie.stateAfter=Ue==y-1||Ue%5==0||Ue>=K.viewFrom&&Ue<K.viewTo?_e.save():null,_e.nextLine()}),I&&(B.modeFrontier=_e.line),_e}function Ei(A,y,I,B){var K=A.doc.mode,H=new so(y,A.options.tabSize,I);for(H.start=H.pos=B||0,y==""&&Ja(K,I.state);!H.eol();)Rs(K,H,I.state),H.start=H.pos}function Ja(A,y){if(A.blankLine)return A.blankLine(y);if(A.innerMode){var I=Pu(A,y);if(I.mode.blankLine)return I.mode.blankLine(I.state)}}function Rs(A,y,I,B){for(var K=0;K<10;K++){B&&(B[0]=Pu(A,I).mode);var H=A.token(y,I);if(y.pos>y.start)return H}throw new Error("Mode "+A.name+" failed to advance stream.")}var So=function(A,y,I){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=y||null,this.state=I};function Gs(A,y,I,B){var K=A.doc,H=K.mode,ue;y=ri(K,y);var _e=Dr(K,y.line),Ie=Lr(A,y.line,I),Ue=new so(_e.text,A.options.tabSize,Ie),ct;for(B&&(ct=[]);(B||Ue.pos<y.ch)&&!Ue.eol();)Ue.start=Ue.pos,ue=Rs(H,Ue,Ie.state),B&&ct.push(new So(Ue,ue,ao(K.mode,Ie.state)));return B?ct:new So(Ue,ue,Ie.state)}function hu(A,y){if(A)for(;;){var I=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!I)break;A=A.slice(0,I.index)+A.slice(I.index+I[0].length);var B=I[1]?"bgClass":"textClass";y[B]==null?y[B]=I[2]:new RegExp("(?:^|\\s)"+I[2]+"(?:$|\\s)").test(y[B])||(y[B]+=" "+I[2])}return A}function zl(A,y,I,B,K,H,ue){var _e=I.flattenSpans;_e==null&&(_e=A.options.flattenSpans);var Ie=0,Ue=null,ct=new so(y,A.options.tabSize,B),xt,Ht=A.options.addModeClass&&[null];for(y==""&&hu(Ja(I,B.state),H);!ct.eol();){if(ct.pos>A.options.maxHighlightLength?(_e=!1,ue&&Ei(A,y,B,ct.pos),ct.pos=y.length,xt=null):xt=hu(Rs(I,ct,B.state,Ht),H),Ht){var Wt=Ht[0].name;Wt&&(xt="m-"+(xt?Wt+" "+xt:Wt))}if(!_e||Ue!=xt){for(;Ie<ct.start;)Ie=Math.min(ct.start,Ie+5e3),K(Ie,Ue);Ue=xt}ct.start=ct.pos}for(;Ie<ct.pos;){var xn=Math.min(ct.pos,Ie+5e3);K(xn,Ue),Ie=xn}}function rs(A,y,I){for(var B,K,H=A.doc,ue=I?-1:y-(A.doc.mode.innerMode?1e3:100),_e=y;_e>ue;--_e){if(_e<=H.first)return H.first;var Ie=Dr(H,_e-1),Ue=Ie.stateAfter;if(Ue&&(!I||_e+(Ue instanceof Ai?Ue.lookAhead:0)<=H.modeFrontier))return _e;var ct=Te(Ie.text,null,A.options.tabSize);(K==null||B>ct)&&(K=_e-1,B=ct)}return K}function Vs(A,y){if(A.modeFrontier=Math.min(A.modeFrontier,y),!(A.highlightFrontier<y-10)){for(var I=A.first,B=y-1;B>I;B--){var K=Dr(A,B).stateAfter;if(K&&(!(K instanceof Ai)||B+K.lookAhead<y)){I=B+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,I)}}var fo=!1,ms=!1;function Ms(){fo=!0}function el(){ms=!0}function Ks(A,y,I){this.marker=A,this.from=y,this.to=I}function El(A,y){if(A)for(var I=0;I<A.length;++I){var B=A[I];if(B.marker==y)return B}}function oA(A,y){for(var I,B=0;B<A.length;++B)A[B]!=y&&(I||(I=[])).push(A[B]);return I}function Vi(A,y,I){var B=I&&window.WeakSet&&(I.markedSpans||(I.markedSpans=new WeakSet));B&&A.markedSpans&&B.has(A.markedSpans)?A.markedSpans.push(y):(A.markedSpans=A.markedSpans?A.markedSpans.concat([y]):[y],B&&B.add(A.markedSpans)),y.marker.attachLine(A)}function nu(A,y,I){var B;if(A)for(var K=0;K<A.length;++K){var H=A[K],ue=H.marker,_e=H.from==null||(ue.inclusiveLeft?H.from<=y:H.from<y);if(_e||H.from==y&&ue.type=="bookmark"&&(!I||!H.marker.insertLeft)){var Ie=H.to==null||(ue.inclusiveRight?H.to>=y:H.to>y);(B||(B=[])).push(new Ks(ue,H.from,Ie?null:H.to))}}return B}function Ui(A,y,I){var B;if(A)for(var K=0;K<A.length;++K){var H=A[K],ue=H.marker,_e=H.to==null||(ue.inclusiveRight?H.to>=y:H.to>y);if(_e||H.from==y&&ue.type=="bookmark"&&(!I||H.marker.insertLeft)){var Ie=H.from==null||(ue.inclusiveLeft?H.from<=y:H.from<y);(B||(B=[])).push(new Ks(ue,Ie?null:H.from-y,H.to==null?null:H.to-y))}}return B}function Jr(A,y){if(y.full)return null;var I=fn(A,y.from.line)&&Dr(A,y.from.line).markedSpans,B=fn(A,y.to.line)&&Dr(A,y.to.line).markedSpans;if(!I&&!B)return null;var K=y.from.ch,H=y.to.ch,ue=er(y.from,y.to)==0,_e=nu(I,K,ue),Ie=Ui(B,H,ue),Ue=y.text.length==1,ct=sr(y.text).length+(Ue?K:0);if(_e)for(var xt=0;xt<_e.length;++xt){var Ht=_e[xt];if(Ht.to==null){var Wt=El(Ie,Ht.marker);Wt?Ue&&(Ht.to=Wt.to==null?null:Wt.to+ct):Ht.to=K}}if(Ie)for(var xn=0;xn<Ie.length;++xn){var Pn=Ie[xn];if(Pn.to!=null&&(Pn.to+=ct),Pn.from==null){var Yn=El(_e,Pn.marker);Yn||(Pn.from=ct,Ue&&(_e||(_e=[])).push(Pn))}else Pn.from+=ct,Ue&&(_e||(_e=[])).push(Pn)}_e&&(_e=ru(_e)),Ie&&Ie!=_e&&(Ie=ru(Ie));var Xn=[_e];if(!Ue){var _r=y.text.length-2,ur;if(_r>0&&_e)for(var Fr=0;Fr<_e.length;++Fr)_e[Fr].to==null&&(ur||(ur=[])).push(new Ks(_e[Fr].marker,null,null));for(var ai=0;ai<_r;++ai)Xn.push(ur);Xn.push(Ie)}return Xn}function ru(A){for(var y=0;y<A.length;++y){var I=A[y];I.from!=null&&I.from==I.to&&I.marker.clearWhenEmpty!==!1&&A.splice(y--,1)}return A.length?A:null}function Ni(A,y,I){var B=null;if(A.iter(y.line,I.line+1,function(Wt){if(Wt.markedSpans)for(var xn=0;xn<Wt.markedSpans.length;++xn){var Pn=Wt.markedSpans[xn].marker;Pn.readOnly&&(!B||Je(B,Pn)==-1)&&(B||(B=[])).push(Pn)}}),!B)return null;for(var K=[{from:y,to:I}],H=0;H<B.length;++H)for(var ue=B[H],_e=ue.find(0),Ie=0;Ie<K.length;++Ie){var Ue=K[Ie];if(!(er(Ue.to,_e.from)<0||er(Ue.from,_e.to)>0)){var ct=[Ie,1],xt=er(Ue.from,_e.from),Ht=er(Ue.to,_e.to);(xt<0||!ue.inclusiveLeft&&!xt)&&ct.push({from:Ue.from,to:_e.from}),(Ht>0||!ue.inclusiveRight&&!Ht)&&ct.push({from:_e.to,to:Ue.to}),K.splice.apply(K,ct),Ie+=ct.length-3}}return K}function lo(A){var y=A.markedSpans;if(y){for(var I=0;I<y.length;++I)y[I].marker.detachLine(A);A.markedSpans=null}}function Ri(A,y){if(y){for(var I=0;I<y.length;++I)y[I].marker.attachLine(A);A.markedSpans=y}}function ee(A){return A.inclusiveLeft?-1:0}function Be(A){return A.inclusiveRight?1:0}function tt(A,y){var I=A.lines.length-y.lines.length;if(I!=0)return I;var B=A.find(),K=y.find(),H=er(B.from,K.from)||ee(A)-ee(y);if(H)return-H;var ue=er(B.to,K.to)||Be(A)-Be(y);return ue||y.id-A.id}function qt(A,y){var I=ms&&A.markedSpans,B;if(I)for(var K=void 0,H=0;H<I.length;++H)K=I[H],K.marker.collapsed&&(y?K.from:K.to)==null&&(!B||tt(B,K.marker)<0)&&(B=K.marker);return B}function Or(A){return qt(A,!0)}function Gn(A){return qt(A,!1)}function si(A,y){var I=ms&&A.markedSpans,B;if(I)for(var K=0;K<I.length;++K){var H=I[K];H.marker.collapsed&&(H.from==null||H.from<y)&&(H.to==null||H.to>y)&&(!B||tt(B,H.marker)<0)&&(B=H.marker)}return B}function ci(A,y,I,B,K){var H=Dr(A,y),ue=ms&&H.markedSpans;if(ue)for(var _e=0;_e<ue.length;++_e){var Ie=ue[_e];if(Ie.marker.collapsed){var Ue=Ie.marker.find(0),ct=er(Ue.from,I)||ee(Ie.marker)-ee(K),xt=er(Ue.to,B)||Be(Ie.marker)-Be(K);if(!(ct>=0&&xt<=0||ct<=0&&xt>=0)&&(ct<=0&&(Ie.marker.inclusiveRight&&K.inclusiveLeft?er(Ue.to,I)>=0:er(Ue.to,I)>0)||ct>=0&&(Ie.marker.inclusiveRight&&K.inclusiveLeft?er(Ue.from,B)<=0:er(Ue.from,B)<0)))return!0}}}function gr(A){for(var y;y=Or(A);)A=y.find(-1,!0).line;return A}function Ir(A){for(var y;y=Gn(A);)A=y.find(1,!0).line;return A}function vi(A){for(var y,I;y=Gn(A);)A=y.find(1,!0).line,(I||(I=[])).push(A);return I}function Eo(A,y){var I=Dr(A,y),B=gr(I);return I==B?y:Qe(B)}function ki(A,y){if(y>A.lastLine())return y;var I=Dr(A,y),B;if(!qr(A,I))return y;for(;B=Gn(I);)I=B.find(1,!0).line;return Qe(I)+1}function qr(A,y){var I=ms&&y.markedSpans;if(I){for(var B=void 0,K=0;K<I.length;++K)if(B=I[K],!!B.marker.collapsed){if(B.from==null)return!0;if(!B.marker.widgetNode&&B.from==0&&B.marker.inclusiveLeft&&Hi(A,y,B))return!0}}}function Hi(A,y,I){if(I.to==null){var B=I.marker.find(1,!0);return Hi(A,B.line,El(B.line.markedSpans,I.marker))}if(I.marker.inclusiveRight&&I.to==y.text.length)return!0;for(var K=void 0,H=0;H<y.markedSpans.length;++H)if(K=y.markedSpans[H],K.marker.collapsed&&!K.marker.widgetNode&&K.from==I.to&&(K.to==null||K.to!=I.from)&&(K.marker.inclusiveLeft||I.marker.inclusiveRight)&&Hi(A,y,K))return!0}function Zi(A){A=gr(A);for(var y=0,I=A.parent,B=0;B<I.lines.length;++B){var K=I.lines[B];if(K==A)break;y+=K.height}for(var H=I.parent;H;I=H,H=I.parent)for(var ue=0;ue<H.children.length;++ue){var _e=H.children[ue];if(_e==I)break;y+=_e.height}return y}function us(A){if(A.height==0)return 0;for(var y=A.text.length,I,B=A;I=Or(B);){var K=I.find(0,!0);B=K.from.line,y+=K.from.ch-K.to.ch}for(B=A;I=Gn(B);){var H=I.find(0,!0);y-=B.text.length-H.from.ch,B=H.to.line,y+=B.text.length-H.to.ch}return y}function ya(A){var y=A.display,I=A.doc;y.maxLine=Dr(I,I.first),y.maxLineLength=us(y.maxLine),y.maxLineChanged=!0,I.iter(function(B){var K=us(B);K>y.maxLineLength&&(y.maxLineLength=K,y.maxLine=B)})}var za=function(A,y,I){this.text=A,Ri(this,y),this.height=I?I(this):1};za.prototype.lineNo=function(){return Qe(this)},zt(za);function fu(A,y,I,B){A.text=y,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),lo(A),Ri(A,I);var K=B?B(A):1;K!=A.height&&ia(A,K)}function Hs(A){A.parent=null,lo(A)}var dc={},Ba={};function cl(A,y){if(!A||/^\s*$/.test(A))return null;var I=y.addModeClass?Ba:dc;return I[A]||(I[A]=A.replace(/\S+/g,"cm-$&"))}function ld(A,y){var I=it("span",null,null,b?"padding-right: .1px":null),B={pre:it("pre",[I],"CodeMirror-line"),content:I,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};y.measure={};for(var K=0;K<=(y.rest?y.rest.length:0);K++){var H=K?y.rest[K-1]:y.line,ue=void 0;B.pos=0,B.addToken=Ku,Kr(A.display.measure)&&(ue=ve(H,A.doc.direction))&&(B.addToken=Ss(B.addToken,ue)),B.map=[];var _e=y!=A.display.externalMeasured&&Qe(H);ud(H,B,ls(A,H,_e)),H.styleClasses&&(H.styleClasses.bgClass&&(B.bgClass=Ne(H.styleClasses.bgClass,B.bgClass||"")),H.styleClasses.textClass&&(B.textClass=Ne(H.styleClasses.textClass,B.textClass||""))),B.map.length==0&&B.map.push(0,0,B.content.appendChild(Br(A.display.measure))),K==0?(y.measure.map=B.map,y.measure.cache={}):((y.measure.maps||(y.measure.maps=[])).push(B.map),(y.measure.caches||(y.measure.caches=[])).push({}))}if(b){var Ie=B.content.lastChild;(/\bcm-tab\b/.test(Ie.className)||Ie.querySelector&&Ie.querySelector(".cm-tab"))&&(B.content.className="cm-tab-wrap-hack")}return Bt(A,"renderLine",A,y.line,B.pre),B.pre.className&&(B.textClass=Ne(B.pre.className,B.textClass||"")),B}function Ru(A){var y=pe("span","","cm-invalidchar");return y.title="\\u"+A.charCodeAt(0).toString(16),y.setAttribute("aria-label",y.title),y}function Ku(A,y,I,B,K,H,ue){if(y){var _e=A.splitSpaces?bh(y,A.trailingSpace):y,Ie=A.cm.state.specialChars,Ue=!1,ct;if(!Ie.test(y))A.col+=y.length,ct=document.createTextNode(_e),A.map.push(A.pos,A.pos+y.length,ct),d&&g<9&&(Ue=!0),A.pos+=y.length;else{ct=document.createDocumentFragment();for(var xt=0;;){Ie.lastIndex=xt;var Ht=Ie.exec(y),Wt=Ht?Ht.index-xt:y.length-xt;if(Wt){var xn=document.createTextNode(_e.slice(xt,xt+Wt));d&&g<9?ct.appendChild(pe("span",[xn])):ct.appendChild(xn),A.map.push(A.pos,A.pos+Wt,xn),A.col+=Wt,A.pos+=Wt}if(!Ht)break;xt+=Wt+1;var Pn=void 0;if(Ht[0]=="	"){var Yn=A.cm.options.tabSize,Xn=Yn-A.col%Yn;Pn=ct.appendChild(pe("span",Rr(Xn),"cm-tab")),Pn.setAttribute("role","presentation"),Pn.setAttribute("cm-text","	"),A.col+=Xn}else Ht[0]=="\r"||Ht[0]==`
`?(Pn=ct.appendChild(pe("span",Ht[0]=="\r"?"":"","cm-invalidchar")),Pn.setAttribute("cm-text",Ht[0]),A.col+=1):(Pn=A.cm.options.specialCharPlaceholder(Ht[0]),Pn.setAttribute("cm-text",Ht[0]),d&&g<9?ct.appendChild(pe("span",[Pn])):ct.appendChild(Pn),A.col+=1);A.map.push(A.pos,A.pos+1,Pn),A.pos++}}if(A.trailingSpace=_e.charCodeAt(y.length-1)==32,I||B||K||Ue||H||ue){var _r=I||"";B&&(_r+=B),K&&(_r+=K);var ur=pe("span",[ct],_r,H);if(ue)for(var Fr in ue)ue.hasOwnProperty(Fr)&&Fr!="style"&&Fr!="class"&&ur.setAttribute(Fr,ue[Fr]);return A.content.appendChild(ur)}A.content.appendChild(ct)}}function bh(A,y){if(A.length>1&&!/  /.test(A))return A;for(var I=y,B="",K=0;K<A.length;K++){var H=A.charAt(K);H==" "&&I&&(K==A.length-1||A.charCodeAt(K+1)==32)&&(H=""),B+=H,I=H==" "}return B}function Ss(A,y){return function(I,B,K,H,ue,_e,Ie){K=K?K+" cm-force-border":"cm-force-border";for(var Ue=I.pos,ct=Ue+B.length;;){for(var xt=void 0,Ht=0;Ht<y.length&&(xt=y[Ht],!(xt.to>Ue&&xt.from<=Ue));Ht++);if(xt.to>=ct)return A(I,B,K,H,ue,_e,Ie);A(I,B.slice(0,xt.to-Ue),K,H,null,_e,Ie),H=null,B=B.slice(xt.to-Ue),Ue=xt.to}}}function Du(A,y,I,B){var K=!B&&I.widgetNode;K&&A.map.push(A.pos,A.pos+y,K),!B&&A.cm.display.input.needsContentAttribute&&(K||(K=A.content.appendChild(document.createElement("span"))),K.setAttribute("cm-marker",I.id)),K&&(A.cm.display.input.setUneditable(K),A.content.appendChild(K)),A.pos+=y,A.trailingSpace=!1}function ud(A,y,I){var B=A.markedSpans,K=A.text,H=0;if(!B){for(var ue=1;ue<I.length;ue+=2)y.addToken(y,K.slice(H,H=I[ue]),cl(I[ue+1],y.cm.options));return}for(var _e=K.length,Ie=0,Ue=1,ct="",xt,Ht,Wt=0,xn,Pn,Yn,Xn,_r;;){if(Wt==Ie){xn=Pn=Yn=Ht="",_r=null,Xn=null,Wt=1/0;for(var ur=[],Fr=void 0,ai=0;ai<B.length;++ai){var Gr=B[ai],Xi=Gr.marker;if(Xi.type=="bookmark"&&Gr.from==Ie&&Xi.widgetNode)ur.push(Xi);else if(Gr.from<=Ie&&(Gr.to==null||Gr.to>Ie||Xi.collapsed&&Gr.to==Ie&&Gr.from==Ie)){if(Gr.to!=null&&Gr.to!=Ie&&Wt>Gr.to&&(Wt=Gr.to,Pn=""),Xi.className&&(xn+=" "+Xi.className),Xi.css&&(Ht=(Ht?Ht+";":"")+Xi.css),Xi.startStyle&&Gr.from==Ie&&(Yn+=" "+Xi.startStyle),Xi.endStyle&&Gr.to==Wt&&(Fr||(Fr=[])).push(Xi.endStyle,Gr.to),Xi.title&&((_r||(_r={})).title=Xi.title),Xi.attributes)for(var ko in Xi.attributes)(_r||(_r={}))[ko]=Xi.attributes[ko];Xi.collapsed&&(!Xn||tt(Xn.marker,Xi)<0)&&(Xn=Gr)}else Gr.from>Ie&&Wt>Gr.from&&(Wt=Gr.from)}if(Fr)for(var qa=0;qa<Fr.length;qa+=2)Fr[qa+1]==Wt&&(Pn+=" "+Fr[qa]);if(!Xn||Xn.from==Ie)for(var aa=0;aa<ur.length;++aa)Du(y,0,ur[aa]);if(Xn&&(Xn.from||0)==Ie){if(Du(y,(Xn.to==null?_e+1:Xn.to)-Ie,Xn.marker,Xn.from==null),Xn.to==null)return;Xn.to==Ie&&(Xn=!1)}}if(Ie>=_e)break;for(var Ca=Math.min(_e,Wt);;){if(ct){var ba=Ie+ct.length;if(!Xn){var Pa=ba>Ca?ct.slice(0,Ca-Ie):ct;y.addToken(y,Pa,xt?xt+xn:xn,Yn,Ie+Pa.length==Wt?Pn:"",Ht,_r)}if(ba>=Ca){ct=ct.slice(Ca-Ie),Ie=Ca;break}Ie=ba,Yn=""}ct=K.slice(H,H=I[Ue++]),xt=cl(I[Ue++],y.cm.options)}}}function gp(A,y,I){this.line=y,this.rest=vi(y),this.size=this.rest?Qe(sr(this.rest))-I+1:1,this.node=this.text=null,this.hidden=qr(A,y)}function sA(A,y,I){for(var B=[],K,H=y;H<I;H=K){var ue=new gp(A.doc,Dr(A.doc,H),H);K=H+ue.size,B.push(ue)}return B}var qd=null;function Lc(A){qd?qd.ops.push(A):A.ownsGroup=qd={ops:[A],delayedCallbacks:[]}}function yp(A){var y=A.delayedCallbacks,I=0;do{for(;I<y.length;I++)y[I].call(null);for(var B=0;B<A.ops.length;B++){var K=A.ops[B];if(K.cursorActivityHandlers)for(;K.cursorActivityCalled<K.cursorActivityHandlers.length;)K.cursorActivityHandlers[K.cursorActivityCalled++].call(null,K.cm)}}while(I<y.length)}function Rf(A,y){var I=A.ownsGroup;if(I)try{yp(I)}finally{qd=null,y(I)}}var hc=null;function Zs(A,y){var I=rt(A,y);if(I.length){var B=Array.prototype.slice.call(arguments,2),K;qd?K=qd.delayedCallbacks:hc?K=hc:(K=hc=[],setTimeout(xh,0));for(var H=function(_e){K.push(function(){return I[_e].apply(null,B)})},ue=0;ue<I.length;++ue)H(ue)}}function xh(){var A=hc;hc=null;for(var y=0;y<A.length;++y)A[y]()}function ef(A,y,I,B){for(var K=0;K<y.changes.length;K++){var H=y.changes[K];H=="text"?fc(A,y):H=="gutter"?Mh(A,y,I,B):H=="class"?wh(A,y):H=="widget"&&dd(A,y,B)}y.changes=null}function Ad(A){return A.node==A.text&&(A.node=pe("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),d&&g<8&&(A.node.style.zIndex=2)),A.node}function tf(A,y){var I=y.bgClass?y.bgClass+" "+(y.line.bgClass||""):y.line.bgClass;if(I&&(I+=" CodeMirror-linebackground"),y.background)I?y.background.className=I:(y.background.parentNode.removeChild(y.background),y.background=null);else if(I){var B=Ad(y);y.background=B.insertBefore(pe("div",null,I),B.firstChild),A.display.input.setUneditable(y.background)}}function cd(A,y){var I=A.display.externalMeasured;return I&&I.line==y.line?(A.display.externalMeasured=null,y.measure=I.measure,I.built):ld(A,y)}function fc(A,y){var I=y.text.className,B=cd(A,y);y.text==y.node&&(y.node=B.pre),y.text.parentNode.replaceChild(B.pre,y.text),y.text=B.pre,B.bgClass!=y.bgClass||B.textClass!=y.textClass?(y.bgClass=B.bgClass,y.textClass=B.textClass,wh(A,y)):I&&(y.text.className=I)}function wh(A,y){tf(A,y),y.line.wrapClass?Ad(y).className=y.line.wrapClass:y.node!=y.text&&(y.node.className="");var I=y.textClass?y.textClass+" "+(y.line.textClass||""):y.line.textClass;y.text.className=I||""}function Mh(A,y,I,B){if(y.gutter&&(y.node.removeChild(y.gutter),y.gutter=null),y.gutterBackground&&(y.node.removeChild(y.gutterBackground),y.gutterBackground=null),y.line.gutterClass){var K=Ad(y);y.gutterBackground=pe("div",null,"CodeMirror-gutter-background "+y.line.gutterClass,"left: "+(A.options.fixedGutter?B.fixedPos:-B.gutterTotalWidth)+"px; width: "+B.gutterTotalWidth+"px"),A.display.input.setUneditable(y.gutterBackground),K.insertBefore(y.gutterBackground,y.text)}var H=y.line.gutterMarkers;if(A.options.lineNumbers||H){var ue=Ad(y),_e=y.gutter=pe("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?B.fixedPos:-B.gutterTotalWidth)+"px");if(_e.setAttribute("aria-hidden","true"),A.display.input.setUneditable(_e),ue.insertBefore(_e,y.text),y.line.gutterClass&&(_e.className+=" "+y.line.gutterClass),A.options.lineNumbers&&(!H||!H["CodeMirror-linenumbers"])&&(y.lineNumber=_e.appendChild(pe("div",Nn(A.options,I),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+B.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),H)for(var Ie=0;Ie<A.display.gutterSpecs.length;++Ie){var Ue=A.display.gutterSpecs[Ie].className,ct=H.hasOwnProperty(Ue)&&H[Ue];ct&&_e.appendChild(pe("div",[ct],"CodeMirror-gutter-elt","left: "+B.gutterLeft[Ue]+"px; width: "+B.gutterWidth[Ue]+"px"))}}}function dd(A,y,I){y.alignable&&(y.alignable=null);for(var B=we("CodeMirror-linewidget"),K=y.node.firstChild,H=void 0;K;K=H)H=K.nextSibling,B.test(K.className)&&y.node.removeChild(K);Fc(A,y,I)}function am(A,y,I,B){var K=cd(A,y);return y.text=y.node=K.pre,K.bgClass&&(y.bgClass=K.bgClass),K.textClass&&(y.textClass=K.textClass),wh(A,y),Mh(A,y,I,B),Fc(A,y,B),y.node}function Fc(A,y,I){if(pu(A,y.line,y,I,!0),y.rest)for(var B=0;B<y.rest.length;B++)pu(A,y.rest[B],y,I,!1)}function pu(A,y,I,B,K){if(y.widgets)for(var H=Ad(I),ue=0,_e=y.widgets;ue<_e.length;++ue){var Ie=_e[ue],Ue=pe("div",[Ie.node],"CodeMirror-linewidget"+(Ie.className?" "+Ie.className:""));Ie.handleMouseEvents||Ue.setAttribute("cm-ignore-events","true"),Sh(Ie,Ue,I,B),A.display.input.setUneditable(Ue),K&&Ie.above?H.insertBefore(Ue,I.gutter||I.text):H.appendChild(Ue),Zs(Ie,"redraw")}}function Sh(A,y,I,B){if(A.noHScroll){(I.alignable||(I.alignable=[])).push(y);var K=B.wrapperWidth;y.style.left=B.fixedPos+"px",A.coverGutter||(K-=B.gutterTotalWidth,y.style.paddingLeft=B.gutterTotalWidth+"px"),y.style.width=K+"px"}A.coverGutter&&(y.style.zIndex=5,y.style.position="relative",A.noHScroll||(y.style.marginLeft=-B.gutterTotalWidth+"px"))}function mu(A){if(A.height!=null)return A.height;var y=A.doc.cm;if(!y)return 0;if(!$e(document.body,A.node)){var I="position: relative;";A.coverGutter&&(I+="margin-left: -"+y.display.gutters.offsetWidth+"px;"),A.noHScroll&&(I+="width: "+y.display.wrapper.clientWidth+"px;"),Pe(y.display.measure,pe("div",[A.node],null,I))}return A.height=A.node.parentNode.offsetHeight}function aA(A,y){for(var I=wr(y);I!=A.wrapper;I=I.parentNode)if(!I||I.nodeType==1&&I.getAttribute("cm-ignore-events")=="true"||I.parentNode==A.sizer&&I!=A.mover)return!0}function Uc(A){return A.lineSpace.offsetTop}function Yd(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function nf(A){if(A.cachedPaddingH)return A.cachedPaddingH;var y=Pe(A.measure,pe("pre","x","CodeMirror-line-like")),I=window.getComputedStyle?window.getComputedStyle(y):y.currentStyle,B={left:parseInt(I.paddingLeft),right:parseInt(I.paddingRight)};return!isNaN(B.left)&&!isNaN(B.right)&&(A.cachedPaddingH=B),B}function iu(A){return yt-A.display.nativeBarWidth}function Bl(A){return A.display.scroller.clientWidth-iu(A)-A.display.barWidth}function WA(A){return A.display.scroller.clientHeight-iu(A)-A.display.barHeight}function zc(A,y,I){var B=A.options.lineWrapping,K=B&&Bl(A);if(!y.measure.heights||B&&y.measure.width!=K){var H=y.measure.heights=[];if(B){y.measure.width=K;for(var ue=y.text.firstChild.getClientRects(),_e=0;_e<ue.length-1;_e++){var Ie=ue[_e],Ue=ue[_e+1];Math.abs(Ie.bottom-Ue.bottom)>2&&H.push((Ie.bottom+Ue.top)/2-I.top)}}H.push(I.bottom-I.top)}}function rf(A,y,I){if(A.line==y)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var B=0;B<A.rest.length;B++)if(A.rest[B]==y)return{map:A.measure.maps[B],cache:A.measure.caches[B]};for(var K=0;K<A.rest.length;K++)if(Qe(A.rest[K])>I)return{map:A.measure.maps[K],cache:A.measure.caches[K],before:!0}}}function Kf(A,y){y=gr(y);var I=Qe(y),B=A.display.externalMeasured=new gp(A.doc,y,I);B.lineN=I;var K=B.built=ld(A,B);return B.text=K.pre,Pe(A.display.lineMeasure,K.pre),B}function hd(A,y,I,B){return Ol(A,tl(A,y),I,B)}function _A(A,y){if(y>=A.display.viewFrom&&y<A.display.viewTo)return A.display.view[lA(A,y)];var I=A.display.externalMeasured;if(I&&y>=I.lineN&&y<I.lineN+I.size)return I}function tl(A,y){var I=Qe(y),B=_A(A,I);B&&!B.text?B=null:B&&B.changes&&(ef(A,B,I,YA(A)),A.curOp.forceUpdate=!0),B||(B=Kf(A,y));var K=rf(B,y,I);return{line:y,view:B,rect:null,map:K.map,cache:K.cache,before:K.before,hasHeights:!1}}function Ol(A,y,I,B,K){y.before&&(I=-1);var H=I+(B||""),ue;return y.cache.hasOwnProperty(H)?ue=y.cache[H]:(y.rect||(y.rect=y.view.text.getBoundingClientRect()),y.hasHeights||(zc(A,y.view,y.rect),y.hasHeights=!0),ue=jc(A,y,I,B),ue.bogus||(y.cache[H]=ue)),{left:ue.left,right:ue.right,top:K?ue.rtop:ue.top,bottom:K?ue.rbottom:ue.bottom}}var $o={left:0,right:0,top:0,bottom:0};function Eh(A,y,I){for(var B,K,H,ue,_e,Ie,Ue=0;Ue<A.length;Ue+=3)if(_e=A[Ue],Ie=A[Ue+1],y<_e?(K=0,H=1,ue="left"):y<Ie?(K=y-_e,H=K+1):(Ue==A.length-3||y==Ie&&A[Ue+3]>y)&&(H=Ie-_e,K=H-1,y>=Ie&&(ue="right")),K!=null){if(B=A[Ue+2],_e==Ie&&I==(B.insertLeft?"left":"right")&&(ue=I),I=="left"&&K==0)for(;Ue&&A[Ue-2]==A[Ue-3]&&A[Ue-1].insertLeft;)B=A[(Ue-=3)+2],ue="left";if(I=="right"&&K==Ie-_e)for(;Ue<A.length-3&&A[Ue+3]==A[Ue+4]&&!A[Ue+5].insertLeft;)B=A[(Ue+=3)+2],ue="right";break}return{node:B,start:K,end:H,collapse:ue,coverStart:_e,coverEnd:Ie}}function lm(A,y){var I=$o;if(y=="left")for(var B=0;B<A.length&&(I=A[B]).left==I.right;B++);else for(var K=A.length-1;K>=0&&(I=A[K]).left==I.right;K--);return I}function jc(A,y,I,B){var K=Eh(y.map,I,B),H=K.node,ue=K.start,_e=K.end,Ie=K.collapse,Ue;if(H.nodeType==3){for(var ct=0;ct<4;ct++){for(;ue&&Xe(y.line.text.charAt(K.coverStart+ue));)--ue;for(;K.coverStart+_e<K.coverEnd&&Xe(y.line.text.charAt(K.coverStart+_e));)++_e;if(d&&g<9&&ue==0&&_e==K.coverEnd-K.coverStart?Ue=H.parentNode.getBoundingClientRect():Ue=lm(We(H,ue,_e).getClientRects(),B),Ue.left||Ue.right||ue==0)break;_e=ue,ue=ue-1,Ie="right"}d&&g<11&&(Ue=Lu(A.display.measure,Ue))}else{ue>0&&(Ie=B="right");var xt;A.options.lineWrapping&&(xt=H.getClientRects()).length>1?Ue=xt[B=="right"?xt.length-1:0]:Ue=H.getBoundingClientRect()}if(d&&g<9&&!ue&&(!Ue||!Ue.left&&!Ue.right)){var Ht=H.parentNode.getClientRects()[0];Ht?Ue={left:Ht.left,right:Ht.left+Gi(A.display),top:Ht.top,bottom:Ht.bottom}:Ue=$o}for(var Wt=Ue.top-y.rect.top,xn=Ue.bottom-y.rect.top,Pn=(Wt+xn)/2,Yn=y.view.measure.heights,Xn=0;Xn<Yn.length-1&&!(Pn<Yn[Xn]);Xn++);var _r=Xn?Yn[Xn-1]:0,ur=Yn[Xn],Fr={left:(Ie=="right"?Ue.right:Ue.left)-y.rect.left,right:(Ie=="left"?Ue.left:Ue.right)-y.rect.left,top:_r,bottom:ur};return!Ue.left&&!Ue.right&&(Fr.bogus=!0),A.options.singleCursorHeightPerLine||(Fr.rtop=Wt,Fr.rbottom=xn),Fr}function Lu(A,y){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!yi(A))return y;var I=screen.logicalXDPI/screen.deviceXDPI,B=screen.logicalYDPI/screen.deviceYDPI;return{left:y.left*I,right:y.right*I,top:y.top*B,bottom:y.bottom*B}}function $d(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var y=0;y<A.rest.length;y++)A.measure.caches[y]={}}function Vd(A){A.display.externalMeasure=null,be(A.display.lineMeasure);for(var y=0;y<A.display.view.length;y++)$d(A.display.view[y])}function pc(A){Vd(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function Hd(A){return S&&re?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function of(A){return S&&re?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function mc(A){var y=gr(A),I=y.widgets,B=0;if(I)for(var K=0;K<I.length;++K)I[K].above&&(B+=mu(I[K]));return B}function gu(A,y,I,B,K){if(!K){var H=mc(y);I.top+=H,I.bottom+=H}if(B=="line")return I;B||(B="local");var ue=Zi(y);if(B=="local"?ue+=Uc(A.display):ue-=A.display.viewOffset,B=="page"||B=="window"){var _e=A.display.lineSpace.getBoundingClientRect();ue+=_e.top+(B=="window"?0:of(wt(A)));var Ie=_e.left+(B=="window"?0:Hd(wt(A)));I.left+=Ie,I.right+=Ie}return I.top+=ue,I.bottom+=ue,I}function $t(A,y,I){if(I=="div")return y;var B=y.left,K=y.top;if(I=="page")B-=Hd(wt(A)),K-=of(wt(A));else if(I=="local"||!I){var H=A.display.sizer.getBoundingClientRect();B+=H.left,K+=H.top}var ue=A.display.lineSpace.getBoundingClientRect();return{left:B-ue.left,top:K-ue.top}}function kn(A,y,I,B,K){return B||(B=Dr(A.doc,y.line)),gu(A,B,hd(A,B,y.ch,K),I)}function sn(A,y,I,B,K,H){B=B||Dr(A.doc,y.line),K||(K=tl(A,B));function ue(xn,Pn){var Yn=Ol(A,K,xn,Pn?"right":"left",H);return Pn?Yn.left=Yn.right:Yn.right=Yn.left,gu(A,B,Yn,I)}var _e=ve(B,A.doc.direction),Ie=y.ch,Ue=y.sticky;if(Ie>=B.text.length?(Ie=B.text.length,Ue="before"):Ie<=0&&(Ie=0,Ue="after"),!_e)return ue(Ue=="before"?Ie-1:Ie,Ue=="before");function ct(xn,Pn,Yn){var Xn=_e[Pn],_r=Xn.level==1;return ue(Yn?xn-1:xn,_r!=Yn)}var xt=Ee(_e,Ie,Ue),Ht=rr,Wt=ct(Ie,xt,Ue=="before");return Ht!=null&&(Wt.other=ct(Ie,Ht,Ue!="before")),Wt}function Ur(A,y){var I=0;y=ri(A.doc,y),A.options.lineWrapping||(I=Gi(A.display)*y.ch);var B=Dr(A.doc,y.line),K=Zi(B)+Uc(A.display);return{left:I,right:I,top:K,bottom:K+B.height}}function _i(A,y,I,B,K){var H=un(A,y,I);return H.xRel=K,B&&(H.outside=B),H}function Co(A,y,I){var B=A.doc;if(I+=A.display.viewOffset,I<0)return _i(B.first,0,null,-1,-1);var K=bt(B,I),H=B.first+B.size-1;if(K>H)return _i(B.first+B.size-1,Dr(B,H).text.length,null,1,1);y<0&&(y=0);for(var ue=Dr(B,K);;){var _e=vp(A,ue,K,y,I),Ie=si(ue,_e.ch+(_e.xRel>0||_e.outside>0?1:0));if(!Ie)return _e;var Ue=Ie.find(1);if(Ue.line==K)return Ue;ue=Dr(B,K=Ue.line)}}function oa(A,y,I,B){B-=mc(y);var K=y.text.length,H=Yt(function(ue){return Ol(A,I,ue-1).bottom<=B},K,0);return K=Yt(function(ue){return Ol(A,I,ue).top>B},H,K),{begin:H,end:K}}function Vo(A,y,I,B){I||(I=tl(A,y));var K=gu(A,y,Ol(A,I,B),"line").top;return oa(A,y,I,K)}function QA(A,y,I,B){return A.bottom<=I?!1:A.top>I?!0:(B?A.left:A.right)>y}function vp(A,y,I,B,K){K-=Zi(y);var H=tl(A,y),ue=mc(y),_e=0,Ie=y.text.length,Ue=!0,ct=ve(y,A.doc.direction);if(ct){var xt=(A.options.lineWrapping?yu:Il)(A,y,I,H,ct,B,K);Ue=xt.level!=1,_e=Ue?xt.from:xt.to-1,Ie=Ue?xt.to:xt.from-1}var Ht=null,Wt=null,xn=Yt(function(ai){var Gr=Ol(A,H,ai);return Gr.top+=ue,Gr.bottom+=ue,QA(Gr,B,K,!1)?(Gr.top<=K&&Gr.left<=B&&(Ht=ai,Wt=Gr),!0):!1},_e,Ie),Pn,Yn,Xn=!1;if(Wt){var _r=B-Wt.left<Wt.right-B,ur=_r==Ue;xn=Ht+(ur?0:1),Yn=ur?"after":"before",Pn=_r?Wt.left:Wt.right}else{!Ue&&(xn==Ie||xn==_e)&&xn++,Yn=xn==0?"after":xn==y.text.length?"before":Ol(A,H,xn-(Ue?1:0)).bottom+ue<=K==Ue?"after":"before";var Fr=sn(A,un(I,xn,Yn),"line",y,H);Pn=Fr.left,Xn=K<Fr.top?-1:K>=Fr.bottom?1:0}return xn=Et(y.text,xn,1),_i(I,xn,Yn,Xn,B-Pn)}function Il(A,y,I,B,K,H,ue){var _e=Yt(function(xt){var Ht=K[xt],Wt=Ht.level!=1;return QA(sn(A,un(I,Wt?Ht.to:Ht.from,Wt?"before":"after"),"line",y,B),H,ue,!0)},0,K.length-1),Ie=K[_e];if(_e>0){var Ue=Ie.level!=1,ct=sn(A,un(I,Ue?Ie.from:Ie.to,Ue?"after":"before"),"line",y,B);QA(ct,H,ue,!0)&&ct.top>ue&&(Ie=K[_e-1])}return Ie}function yu(A,y,I,B,K,H,ue){var _e=oa(A,y,B,ue),Ie=_e.begin,Ue=_e.end;/\s/.test(y.text.charAt(Ue-1))&&Ue--;for(var ct=null,xt=null,Ht=0;Ht<K.length;Ht++){var Wt=K[Ht];if(!(Wt.from>=Ue||Wt.to<=Ie)){var xn=Wt.level!=1,Pn=Ol(A,B,xn?Math.min(Ue,Wt.to)-1:Math.max(Ie,Wt.from)).right,Yn=Pn<H?H-Pn+1e9:Pn-H;(!ct||xt>Yn)&&(ct=Wt,xt=Yn)}}return ct||(ct=K[K.length-1]),ct.from<Ie&&(ct={from:Ie,to:ct.to,level:ct.level}),ct.to>Ue&&(ct={from:ct.from,to:Ue,level:ct.level}),ct}var qA;function kl(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(qA==null){qA=pe("pre",null,"CodeMirror-line-like");for(var y=0;y<49;++y)qA.appendChild(document.createTextNode("x")),qA.appendChild(pe("br"));qA.appendChild(document.createTextNode("x"))}Pe(A.measure,qA);var I=qA.offsetHeight/50;return I>3&&(A.cachedTextHeight=I),be(A.measure),I||1}function Gi(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var y=pe("span","xxxxxxxxxx"),I=pe("pre",[y],"CodeMirror-line-like");Pe(A.measure,I);var B=y.getBoundingClientRect(),K=(B.right-B.left)/10;return K>2&&(A.cachedCharWidth=K),K||10}function YA(A){for(var y=A.display,I={},B={},K=y.gutters.clientLeft,H=y.gutters.firstChild,ue=0;H;H=H.nextSibling,++ue){var _e=A.display.gutterSpecs[ue].className;I[_e]=H.offsetLeft+H.clientLeft+K,B[_e]=H.clientWidth}return{fixedPos:Uo(y),gutterTotalWidth:y.gutters.offsetWidth,gutterLeft:I,gutterWidth:B,wrapperWidth:y.wrapper.clientWidth}}function Uo(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function Nc(A){var y=kl(A.display),I=A.options.lineWrapping,B=I&&Math.max(5,A.display.scroller.clientWidth/Gi(A.display)-3);return function(K){if(qr(A.doc,K))return 0;var H=0;if(K.widgets)for(var ue=0;ue<K.widgets.length;ue++)K.widgets[ue].height&&(H+=K.widgets[ue].height);return I?H+(Math.ceil(K.text.length/B)||1)*y:H+y}}function $A(A){var y=A.doc,I=Nc(A);y.iter(function(B){var K=I(B);K!=B.height&&ia(B,K)})}function CA(A,y,I,B){var K=A.display;if(!I&&wr(y).getAttribute("cm-not-content")=="true")return null;var H,ue,_e=K.lineSpace.getBoundingClientRect();try{H=y.clientX-_e.left,ue=y.clientY-_e.top}catch{return null}var Ie=Co(A,H,ue),Ue;if(B&&Ie.xRel>0&&(Ue=Dr(A.doc,Ie.line).text).length==Ie.ch){var ct=Te(Ue,Ue.length,A.options.tabSize)-Ue.length;Ie=un(Ie.line,Math.max(0,Math.round((H-nf(A.display).left)/Gi(A.display))-ct))}return Ie}function lA(A,y){if(y>=A.display.viewTo||(y-=A.display.viewFrom,y<0))return null;for(var I=A.display.view,B=0;B<I.length;B++)if(y-=I[B].size,y<0)return B}function Tl(A,y,I,B){y==null&&(y=A.doc.first),I==null&&(I=A.doc.first+A.doc.size),B||(B=0);var K=A.display;if(B&&I<K.viewTo&&(K.updateLineNumbers==null||K.updateLineNumbers>y)&&(K.updateLineNumbers=y),A.curOp.viewChanged=!0,y>=K.viewTo)ms&&Eo(A.doc,y)<K.viewTo&&vu(A);else if(I<=K.viewFrom)ms&&ki(A.doc,I+B)>K.viewFrom?vu(A):(K.viewFrom+=B,K.viewTo+=B);else if(y<=K.viewFrom&&I>=K.viewTo)vu(A);else if(y<=K.viewFrom){var H=jl(A,I,I+B,1);H?(K.view=K.view.slice(H.index),K.viewFrom=H.lineN,K.viewTo+=B):vu(A)}else if(I>=K.viewTo){var ue=jl(A,y,y,-1);ue?(K.view=K.view.slice(0,ue.index),K.viewTo=ue.lineN):vu(A)}else{var _e=jl(A,y,y,-1),Ie=jl(A,I,I+B,1);_e&&Ie?(K.view=K.view.slice(0,_e.index).concat(sA(A,_e.lineN,Ie.lineN)).concat(K.view.slice(Ie.index)),K.viewTo+=B):vu(A)}var Ue=K.externalMeasured;Ue&&(I<Ue.lineN?Ue.lineN+=B:y<Ue.lineN+Ue.size&&(K.externalMeasured=null))}function gc(A,y,I){A.curOp.viewChanged=!0;var B=A.display,K=A.display.externalMeasured;if(K&&y>=K.lineN&&y<K.lineN+K.size&&(B.externalMeasured=null),!(y<B.viewFrom||y>=B.viewTo)){var H=B.view[lA(A,y)];if(H.node!=null){var ue=H.changes||(H.changes=[]);Je(ue,I)==-1&&ue.push(I)}}}function vu(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function jl(A,y,I,B){var K=lA(A,y),H,ue=A.display.view;if(!ms||I==A.doc.first+A.doc.size)return{index:K,lineN:I};for(var _e=A.display.viewFrom,Ie=0;Ie<K;Ie++)_e+=ue[Ie].size;if(_e!=y){if(B>0){if(K==ue.length-1)return null;H=_e+ue[K].size-y,K++}else H=_e-y;y+=H,I+=H}for(;Eo(A.doc,I)!=I;){if(K==(B<0?0:ue.length-1))return null;I+=B*ue[K-(B<0?1:0)].size,K+=B}return{index:K,lineN:I}}function Gc(A,y,I){var B=A.display,K=B.view;K.length==0||y>=B.viewTo||I<=B.viewFrom?(B.view=sA(A,y,I),B.viewFrom=y):(B.viewFrom>y?B.view=sA(A,y,B.viewFrom).concat(B.view):B.viewFrom<y&&(B.view=B.view.slice(lA(A,y))),B.viewFrom=y,B.viewTo<I?B.view=B.view.concat(sA(A,B.viewTo,I)):B.viewTo>I&&(B.view=B.view.slice(0,lA(A,I)))),B.viewTo=I}function Zd(A){for(var y=A.display.view,I=0,B=0;B<y.length;B++){var K=y[B];!K.hidden&&(!K.node||K.changes)&&++I}return I}function ja(A){A.display.input.showSelection(A.display.input.prepareSelection())}function fd(A,y){y===void 0&&(y=!0);var I=A.doc,B={},K=B.cursors=document.createDocumentFragment(),H=B.selection=document.createDocumentFragment(),ue=A.options.$customCursor;ue&&(y=!0);for(var _e=0;_e<I.sel.ranges.length;_e++)if(!(!y&&_e==I.sel.primIndex)){var Ie=I.sel.ranges[_e];if(!(Ie.from().line>=A.display.viewTo||Ie.to().line<A.display.viewFrom)){var Ue=Ie.empty();if(ue){var ct=ue(A,Ie);ct&&yc(A,ct,K)}else(Ue||A.options.showCursorWhenSelecting)&&yc(A,Ie.head,K);Ue||sf(A,Ie,H)}}return B}function yc(A,y,I){var B=sn(A,y,"div",null,null,!A.options.singleCursorHeightPerLine),K=I.appendChild(pe("div","","CodeMirror-cursor"));if(K.style.left=B.left+"px",K.style.top=B.top+"px",K.style.height=Math.max(0,B.bottom-B.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var H=kn(A,y,"div",null,null),ue=H.right-H.left;K.style.width=(ue>0?ue:A.defaultCharWidth())+"px"}if(B.other){var _e=I.appendChild(pe("div","","CodeMirror-cursor CodeMirror-secondarycursor"));_e.style.display="",_e.style.left=B.other.left+"px",_e.style.top=B.other.top+"px",_e.style.height=(B.other.bottom-B.other.top)*.85+"px"}}function VA(A,y){return A.top-y.top||A.left-y.left}function sf(A,y,I){var B=A.display,K=A.doc,H=document.createDocumentFragment(),ue=nf(A.display),_e=ue.left,Ie=Math.max(B.sizerWidth,Bl(A)-B.sizer.offsetLeft)-ue.right,Ue=K.direction=="ltr";function ct(ur,Fr,ai,Gr){Fr<0&&(Fr=0),Fr=Math.round(Fr),Gr=Math.round(Gr),H.appendChild(pe("div",null,"CodeMirror-selected","position: absolute; left: "+ur+`px;
                             top: `+Fr+"px; width: "+(ai??Ie-ur)+`px;
                             height: `+(Gr-Fr)+"px"))}function xt(ur,Fr,ai){var Gr=Dr(K,ur),Xi=Gr.text.length,ko,qa;function aa(Pa,Yl){return kn(A,un(ur,Pa),"div",Gr,Yl)}function Ca(Pa,Yl,Ya){var xa=Vo(A,Gr,null,Pa),hs=Yl=="ltr"==(Ya=="after")?"left":"right",gi=Ya=="after"?xa.begin:xa.end-(/\s/.test(Gr.text.charAt(xa.end-1))?2:1);return aa(gi,hs)[hs]}var ba=ve(Gr,K.direction);return nn(ba,Fr||0,ai??Xi,function(Pa,Yl,Ya,xa){var hs=Ya=="ltr",gi=aa(Pa,hs?"left":"right"),Xo=aa(Yl-1,hs?"right":"left"),la=Fr==null&&Pa==0,fa=ai==null&&Yl==Xi,ks=xa==0,Kl=!ba||xa==ba.length-1;if(Xo.top-gi.top<=3){var Ro=(Ue?la:fa)&&ks,Pd=(Ue?fa:la)&&Kl,yl=Ro?_e:(hs?gi:Xo).left,PA=Pd?Ie:(hs?Xo:gi).right;ct(yl,gi.top,PA-yl,gi.bottom)}else{var Xc,vl,_l,df;hs?(Xc=Ue&&la&&ks?_e:gi.left,vl=Ue?Ie:Ca(Pa,Ya,"before"),_l=Ue?_e:Ca(Yl,Ya,"after"),df=Ue&&fa&&Kl?Ie:Xo.right):(Xc=Ue?Ca(Pa,Ya,"before"):_e,vl=!Ue&&la&&ks?Ie:gi.right,_l=!Ue&&fa&&Kl?_e:Xo.left,df=Ue?Ca(Yl,Ya,"after"):Ie),ct(Xc,gi.top,vl-Xc,gi.bottom),gi.bottom<Xo.top&&ct(_e,gi.bottom,null,Xo.top),ct(_l,Xo.top,df-_l,Xo.bottom)}(!ko||VA(gi,ko)<0)&&(ko=gi),VA(Xo,ko)<0&&(ko=Xo),(!qa||VA(gi,qa)<0)&&(qa=gi),VA(Xo,qa)<0&&(qa=Xo)}),{start:ko,end:qa}}var Ht=y.from(),Wt=y.to();if(Ht.line==Wt.line)xt(Ht.line,Ht.ch,Wt.ch);else{var xn=Dr(K,Ht.line),Pn=Dr(K,Wt.line),Yn=gr(xn)==gr(Pn),Xn=xt(Ht.line,Ht.ch,Yn?xn.text.length+1:null).end,_r=xt(Wt.line,Yn?0:null,Wt.ch).start;Yn&&(Xn.top<_r.top-2?(ct(Xn.right,Xn.top,null,Xn.bottom),ct(_e,_r.top,_r.left,_r.bottom)):ct(Xn.right,Xn.top,_r.left-Xn.right,Xn.bottom)),Xn.bottom<_r.top&&ct(_e,Xn.bottom,null,_r.top)}I.appendChild(H)}function bA(A){if(A.state.focused){var y=A.display;clearInterval(y.blinker);var I=!0;y.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?y.blinker=setInterval(function(){A.hasFocus()||Ho(A),y.cursorDiv.style.visibility=(I=!I)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(y.cursorDiv.style.visibility="hidden")}}function HA(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||Xd(A))}function Wc(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&Ho(A))},100)}function Xd(A,y){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(Bt(A,"focus",A,y),A.state.focused=!0,De(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),b&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),bA(A))}function Ho(A,y){A.state.delayingBlurEvent||(A.state.focused&&(Bt(A,"blur",A,y),A.state.focused=!1,fe(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function Qc(A){for(var y=A.display,I=y.lineDiv.offsetTop,B=Math.max(0,y.scroller.getBoundingClientRect().top),K=y.lineDiv.getBoundingClientRect().top,H=0,ue=0;ue<y.view.length;ue++){var _e=y.view[ue],Ie=A.options.lineWrapping,Ue=void 0,ct=0;if(!_e.hidden){if(K+=_e.line.height,d&&g<8){var xt=_e.node.offsetTop+_e.node.offsetHeight;Ue=xt-I,I=xt}else{var Ht=_e.node.getBoundingClientRect();Ue=Ht.bottom-Ht.top,!Ie&&_e.text.firstChild&&(ct=_e.text.firstChild.getBoundingClientRect().right-Ht.left-1)}var Wt=_e.line.height-Ue;if((Wt>.005||Wt<-.005)&&(K<B&&(H-=Wt),ia(_e.line,Ue),ZA(_e.line),_e.rest))for(var xn=0;xn<_e.rest.length;xn++)ZA(_e.rest[xn]);if(ct>A.display.sizerWidth){var Pn=Math.ceil(ct/Gi(A.display));Pn>A.display.maxLineLength&&(A.display.maxLineLength=Pn,A.display.maxLine=_e.line,A.display.maxLineChanged=!0)}}}Math.abs(H)>2&&(y.scroller.scrollTop+=H)}function ZA(A){if(A.widgets)for(var y=0;y<A.widgets.length;++y){var I=A.widgets[y],B=I.node.parentNode;B&&(I.height=B.offsetHeight)}}function Fu(A,y,I){var B=I&&I.top!=null?Math.max(0,I.top):A.scroller.scrollTop;B=Math.floor(B-Uc(A));var K=I&&I.bottom!=null?I.bottom:B+A.wrapper.clientHeight,H=bt(y,B),ue=bt(y,K);if(I&&I.ensure){var _e=I.ensure.from.line,Ie=I.ensure.to.line;_e<H?(H=_e,ue=bt(y,Zi(Dr(y,_e))+A.wrapper.clientHeight)):Math.min(Ie,y.lastLine())>=ue&&(H=bt(y,Zi(Dr(y,Ie))-A.wrapper.clientHeight),ue=Ie)}return{from:H,to:Math.max(ue,H+1)}}function qc(A,y){if(!vt(A,"scrollCursorIntoView")){var I=A.display,B=I.sizer.getBoundingClientRect(),K=null,H=I.wrapper.ownerDocument;if(y.top+B.top<0?K=!0:y.bottom+B.top>(H.defaultView.innerHeight||H.documentElement.clientHeight)&&(K=!1),K!=null&&!q){var ue=pe("div","",null,`position: absolute;
                         top: `+(y.top-I.viewOffset-Uc(A.display))+`px;
                         height: `+(y.bottom-y.top+iu(A)+I.barHeight)+`px;
                         left: `+y.left+"px; width: "+Math.max(2,y.right-y.left)+"px;");A.display.lineSpace.appendChild(ue),ue.scrollIntoView(K),A.display.lineSpace.removeChild(ue)}}}function Jd(A,y,I,B){B==null&&(B=0);var K;!A.options.lineWrapping&&y==I&&(I=y.sticky=="before"?un(y.line,y.ch+1,"before"):y,y=y.ch?un(y.line,y.sticky=="before"?y.ch-1:y.ch,"after"):y);for(var H=0;H<5;H++){var ue=!1,_e=sn(A,y),Ie=!I||I==y?_e:sn(A,I);K={left:Math.min(_e.left,Ie.left),top:Math.min(_e.top,Ie.top)-B,right:Math.max(_e.left,Ie.left),bottom:Math.max(_e.bottom,Ie.bottom)+B};var Ue=vc(A,K),ct=A.doc.scrollTop,xt=A.doc.scrollLeft;if(Ue.scrollTop!=null&&(Uu(A,Ue.scrollTop),Math.abs(A.doc.scrollTop-ct)>1&&(ue=!0)),Ue.scrollLeft!=null&&(Nl(A,Ue.scrollLeft),Math.abs(A.doc.scrollLeft-xt)>1&&(ue=!0)),!ue)break}return K}function Yc(A,y){var I=vc(A,y);I.scrollTop!=null&&Uu(A,I.scrollTop),I.scrollLeft!=null&&Nl(A,I.scrollLeft)}function vc(A,y){var I=A.display,B=kl(A.display);y.top<0&&(y.top=0);var K=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:I.scroller.scrollTop,H=WA(A),ue={};y.bottom-y.top>H&&(y.bottom=y.top+H);var _e=A.doc.height+Yd(I),Ie=y.top<B,Ue=y.bottom>_e-B;if(y.top<K)ue.scrollTop=Ie?0:y.top;else if(y.bottom>K+H){var ct=Math.min(y.top,(Ue?_e:y.bottom)-H);ct!=K&&(ue.scrollTop=ct)}var xt=A.options.fixedGutter?0:I.gutters.offsetWidth,Ht=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:I.scroller.scrollLeft-xt,Wt=Bl(A)-I.gutters.offsetWidth,xn=y.right-y.left>Wt;return xn&&(y.right=y.left+Wt),y.left<10?ue.scrollLeft=0:y.left<Ht?ue.scrollLeft=Math.max(0,y.left+xt-(xn?0:10)):y.right>Wt+Ht-3&&(ue.scrollLeft=y.right+(xn?0:10)-Wt),ue}function As(A,y){y!=null&&(pd(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+y)}function zo(A){pd(A);var y=A.getCursor();A.curOp.scrollToPos={from:y,to:y,margin:A.options.cursorScrollMargin}}function cs(A,y,I){(y!=null||I!=null)&&pd(A),y!=null&&(A.curOp.scrollLeft=y),I!=null&&(A.curOp.scrollTop=I)}function Df(A,y){pd(A),A.curOp.scrollToPos=y}function pd(A){var y=A.curOp.scrollToPos;if(y){A.curOp.scrollToPos=null;var I=Ur(A,y.from),B=Ur(A,y.to);md(A,I,B,y.margin)}}function md(A,y,I,B){var K=vc(A,{left:Math.min(y.left,I.left),top:Math.min(y.top,I.top)-B,right:Math.max(y.right,I.right),bottom:Math.max(y.bottom,I.bottom)+B});cs(A,K.scrollLeft,K.scrollTop)}function Uu(A,y){Math.abs(A.doc.scrollTop-y)<2||(i||va(A,{top:y}),XA(A,y,!0),i&&va(A),yd(A,100))}function XA(A,y,I){y=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,y)),!(A.display.scroller.scrollTop==y&&!I)&&(A.doc.scrollTop=y,A.display.scrollbars.setScrollTop(y),A.display.scroller.scrollTop!=y&&(A.display.scroller.scrollTop=y))}function Nl(A,y,I,B){y=Math.max(0,Math.min(y,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((I?y==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-y)<2)&&!B)&&(A.doc.scrollLeft=y,vd(A),A.display.scroller.scrollLeft!=y&&(A.display.scroller.scrollLeft=y),A.display.scrollbars.setScrollLeft(y))}function xA(A){var y=A.display,I=y.gutters.offsetWidth,B=Math.round(A.doc.height+Yd(A.display));return{clientHeight:y.scroller.clientHeight,viewHeight:y.wrapper.clientHeight,scrollWidth:y.scroller.scrollWidth,clientWidth:y.scroller.clientWidth,viewWidth:y.wrapper.clientWidth,barLeft:A.options.fixedGutter?I:0,docHeight:B,scrollHeight:B+iu(A)+y.barHeight,nativeBarWidth:y.nativeBarWidth,gutterWidth:I}}var dl=function(A,y,I){this.cm=I;var B=this.vert=pe("div",[pe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),K=this.horiz=pe("div",[pe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");B.tabIndex=K.tabIndex=-1,A(B),A(K),ze(B,"scroll",function(){B.clientHeight&&y(B.scrollTop,"vertical")}),ze(K,"scroll",function(){K.clientWidth&&y(K.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};dl.prototype.update=function(A){var y=A.scrollWidth>A.clientWidth+1,I=A.scrollHeight>A.clientHeight+1,B=A.nativeBarWidth;if(I){this.vert.style.display="block",this.vert.style.bottom=y?B+"px":"0";var K=A.viewHeight-(y?B:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+K)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(y){this.horiz.style.display="block",this.horiz.style.right=I?B+"px":"0",this.horiz.style.left=A.barLeft+"px";var H=A.viewWidth-A.barLeft-(I?B:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+H)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(B==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:I?B:0,bottom:y?B:0}},dl.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},dl.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},dl.prototype.zeroWidthHack=function(){var A=Y&&!z?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Se,this.disableVert=new Se},dl.prototype.enableZeroWidthBar=function(A,y,I){A.style.visibility="";function B(){var K=A.getBoundingClientRect(),H=I=="vert"?document.elementFromPoint(K.right-1,(K.top+K.bottom)/2):document.elementFromPoint((K.right+K.left)/2,K.bottom-1);H!=A?A.style.visibility="hidden":y.set(1e3,B)}y.set(1e3,B)},dl.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var JA=function(){};JA.prototype.update=function(){return{bottom:0,right:0}},JA.prototype.setScrollLeft=function(){},JA.prototype.setScrollTop=function(){},JA.prototype.clear=function(){};function zu(A,y){y||(y=xA(A));var I=A.display.barWidth,B=A.display.barHeight;gd(A,y);for(var K=0;K<4&&I!=A.display.barWidth||B!=A.display.barHeight;K++)I!=A.display.barWidth&&A.options.lineWrapping&&Qc(A),gd(A,xA(A)),I=A.display.barWidth,B=A.display.barHeight}function gd(A,y){var I=A.display,B=I.scrollbars.update(y);I.sizer.style.paddingRight=(I.barWidth=B.right)+"px",I.sizer.style.paddingBottom=(I.barHeight=B.bottom)+"px",I.heightForcer.style.borderBottom=B.bottom+"px solid transparent",B.right&&B.bottom?(I.scrollbarFiller.style.display="block",I.scrollbarFiller.style.height=B.bottom+"px",I.scrollbarFiller.style.width=B.right+"px"):I.scrollbarFiller.style.display="",B.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(I.gutterFiller.style.display="block",I.gutterFiller.style.height=B.bottom+"px",I.gutterFiller.style.width=y.gutterWidth+"px"):I.gutterFiller.style.display=""}var ju={native:dl,null:JA};function eh(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&fe(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new ju[A.options.scrollbarStyle](function(y){A.display.wrapper.insertBefore(y,A.display.scrollbarFiller),ze(y,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),y.setAttribute("cm-not-content","true")},function(y,I){I=="horizontal"?Nl(A,y):Uu(A,y)},A),A.display.scrollbars.addClass&&De(A.display.wrapper,A.display.scrollbars.addClass)}var ec=0;function Nu(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ec,markArrays:null},Lc(A.curOp)}function Gu(A){var y=A.curOp;y&&Rf(y,function(I){for(var B=0;B<I.ops.length;B++)I.ops[B].cm.curOp=null;wA(I)})}function wA(A){for(var y=A.ops,I=0;I<y.length;I++)_c(y[I]);for(var B=0;B<y.length;B++)_u(y[B]);for(var K=0;K<y.length;K++)$c(y[K]);for(var H=0;H<y.length;H++)et(y[H]);for(var ue=0;ue<y.length;ue++)Na(y[ue])}function _c(A){var y=A.cm,I=y.display;Ws(y),A.updateMaxLine&&ya(y),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<I.viewFrom||A.scrollToPos.to.line>=I.viewTo)||I.maxLineChanged&&y.options.lineWrapping,A.update=A.mustUpdate&&new Oa(y,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function _u(A){A.updatedDisplay=A.mustUpdate&&Bs(A.cm,A.update)}function $c(A){var y=A.cm,I=y.display;A.updatedDisplay&&Qc(y),A.barMeasure=xA(y),I.maxLineChanged&&!y.options.lineWrapping&&(A.adjustWidthTo=hd(y,I.maxLine,I.maxLine.text.length).left+3,y.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(I.scroller.clientWidth,I.sizer.offsetLeft+A.adjustWidthTo+iu(y)+y.display.barWidth),A.maxScrollLeft=Math.max(0,I.sizer.offsetLeft+A.adjustWidthTo-Bl(y))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=I.input.prepareSelection())}function et(A){var y=A.cm;A.adjustWidthTo!=null&&(y.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<y.doc.scrollLeft&&Nl(y,Math.min(y.display.scroller.scrollLeft,A.maxScrollLeft),!0),y.display.maxLineChanged=!1);var I=A.focus&&A.focus==ht(Ct(y));A.preparedSelection&&y.display.input.showSelection(A.preparedSelection,I),(A.updatedDisplay||A.startHeight!=y.doc.height)&&zu(y,A.barMeasure),A.updatedDisplay&&tc(y,A.barMeasure),A.selectionChanged&&bA(y),y.state.focused&&A.updateInput&&y.display.input.reset(A.typing),I&&HA(A.cm)}function Na(A){var y=A.cm,I=y.display,B=y.doc;if(A.updatedDisplay&&fr(y,A.update),I.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(I.wheelStartX=I.wheelStartY=null),A.scrollTop!=null&&XA(y,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&Nl(y,A.scrollLeft,!0,!0),A.scrollToPos){var K=Jd(y,ri(B,A.scrollToPos.from),ri(B,A.scrollToPos.to),A.scrollToPos.margin);qc(y,K)}var H=A.maybeHiddenMarkers,ue=A.maybeUnhiddenMarkers;if(H)for(var _e=0;_e<H.length;++_e)H[_e].lines.length||Bt(H[_e],"hide");if(ue)for(var Ie=0;Ie<ue.length;++Ie)ue[Ie].lines.length&&Bt(ue[Ie],"unhide");I.wrapper.offsetHeight&&(B.scrollTop=y.display.scroller.scrollTop),A.changeObjs&&Bt(y,"changes",y,A.changeObjs),A.update&&A.update.finish()}function Bo(A,y){if(A.curOp)return y();Nu(A);try{return y()}finally{Gu(A)}}function Ki(A,y){return function(){if(A.curOp)return y.apply(A,arguments);Nu(A);try{return y.apply(A,arguments)}finally{Gu(A)}}}function $r(A){return function(){if(this.curOp)return A.apply(this,arguments);Nu(this);try{return A.apply(this,arguments)}finally{Gu(this)}}}function Es(A){return function(){var y=this.cm;if(!y||y.curOp)return A.apply(this,arguments);Nu(y);try{return A.apply(this,arguments)}finally{Gu(y)}}}function yd(A,y){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(y,Kt(th,A))}function th(A){var y=A.doc;if(!(y.highlightFrontier>=A.display.viewTo)){var I=+new Date+A.options.workTime,B=Lr(A,y.highlightFrontier),K=[];y.iter(B.line,Math.min(y.first+y.size,A.display.viewTo+500),function(H){if(B.line>=A.display.viewFrom){var ue=H.styles,_e=H.text.length>A.options.maxHighlightLength?ao(y.mode,B.state):null,Ie=iA(A,H,B,!0);_e&&(B.state=_e),H.styles=Ie.styles;var Ue=H.styleClasses,ct=Ie.classes;ct?H.styleClasses=ct:Ue&&(H.styleClasses=null);for(var xt=!ue||ue.length!=H.styles.length||Ue!=ct&&(!Ue||!ct||Ue.bgClass!=ct.bgClass||Ue.textClass!=ct.textClass),Ht=0;!xt&&Ht<ue.length;++Ht)xt=ue[Ht]!=H.styles[Ht];xt&&K.push(B.line),H.stateAfter=B.save(),B.nextLine()}else H.text.length<=A.options.maxHighlightLength&&Ei(A,H.text,B),H.stateAfter=B.line%5==0?B.save():null,B.nextLine();if(+new Date>I)return yd(A,A.options.workDelay),!0}),y.highlightFrontier=B.line,y.modeFrontier=Math.max(y.modeFrontier,B.line),K.length&&Bo(A,function(){for(var H=0;H<K.length;H++)gc(A,K[H],"text")})}}var Oa=function(A,y,I){var B=A.display;this.viewport=y,this.visible=Fu(B,A.doc,y),this.editorIsHidden=!B.wrapper.offsetWidth,this.wrapperHeight=B.wrapper.clientHeight,this.wrapperWidth=B.wrapper.clientWidth,this.oldDisplayWidth=Bl(A),this.force=I,this.dims=YA(A),this.events=[]};Oa.prototype.signal=function(A,y){tn(A,y)&&this.events.push(arguments)},Oa.prototype.finish=function(){for(var A=0;A<this.events.length;A++)Bt.apply(null,this.events[A])};function Ws(A){var y=A.display;!y.scrollbarsClipped&&y.scroller.offsetWidth&&(y.nativeBarWidth=y.scroller.offsetWidth-y.scroller.clientWidth,y.heightForcer.style.height=iu(A)+"px",y.sizer.style.marginBottom=-y.nativeBarWidth+"px",y.sizer.style.borderRightWidth=iu(A)+"px",y.scrollbarsClipped=!0)}function Cs(A){if(A.hasFocus())return null;var y=ht(Ct(A));if(!y||!$e(A.display.lineDiv,y))return null;var I={activeElt:y};if(window.getSelection){var B=Lt(A).getSelection();B.anchorNode&&B.extend&&$e(A.display.lineDiv,B.anchorNode)&&(I.anchorNode=B.anchorNode,I.anchorOffset=B.anchorOffset,I.focusNode=B.focusNode,I.focusOffset=B.focusOffset)}return I}function uA(A){if(!(!A||!A.activeElt||A.activeElt==ht(ft(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&$e(document.body,A.anchorNode)&&$e(document.body,A.focusNode))){var y=A.activeElt.ownerDocument,I=y.defaultView.getSelection(),B=y.createRange();B.setEnd(A.anchorNode,A.anchorOffset),B.collapse(!1),I.removeAllRanges(),I.addRange(B),I.extend(A.focusNode,A.focusOffset)}}function Bs(A,y){var I=A.display,B=A.doc;if(y.editorIsHidden)return vu(A),!1;if(!y.force&&y.visible.from>=I.viewFrom&&y.visible.to<=I.viewTo&&(I.updateLineNumbers==null||I.updateLineNumbers>=I.viewTo)&&I.renderedView==I.view&&Zd(A)==0)return!1;_d(A)&&(vu(A),y.dims=YA(A));var K=B.first+B.size,H=Math.max(y.visible.from-A.options.viewportMargin,B.first),ue=Math.min(K,y.visible.to+A.options.viewportMargin);I.viewFrom<H&&H-I.viewFrom<20&&(H=Math.max(B.first,I.viewFrom)),I.viewTo>ue&&I.viewTo-ue<20&&(ue=Math.min(K,I.viewTo)),ms&&(H=Eo(A.doc,H),ue=ki(A.doc,ue));var _e=H!=I.viewFrom||ue!=I.viewTo||I.lastWrapHeight!=y.wrapperHeight||I.lastWrapWidth!=y.wrapperWidth;Gc(A,H,ue),I.viewOffset=Zi(Dr(A.doc,I.viewFrom)),A.display.mover.style.top=I.viewOffset+"px";var Ie=Zd(A);if(!_e&&Ie==0&&!y.force&&I.renderedView==I.view&&(I.updateLineNumbers==null||I.updateLineNumbers>=I.viewTo))return!1;var Ue=Cs(A);return Ie>4&&(I.lineDiv.style.display="none"),Vc(A,I.updateLineNumbers,y.dims),Ie>4&&(I.lineDiv.style.display=""),I.renderedView=I.view,uA(Ue),be(I.cursorDiv),be(I.selectionDiv),I.gutters.style.height=I.sizer.style.minHeight=0,_e&&(I.lastWrapHeight=y.wrapperHeight,I.lastWrapWidth=y.wrapperWidth,yd(A,400)),I.updateLineNumbers=null,!0}function fr(A,y){for(var I=y.viewport,B=!0;;B=!1){if(!B||!A.options.lineWrapping||y.oldDisplayWidth==Bl(A)){if(I&&I.top!=null&&(I={top:Math.min(A.doc.height+Yd(A.display)-WA(A),I.top)}),y.visible=Fu(A.display,A.doc,I),y.visible.from>=A.display.viewFrom&&y.visible.to<=A.display.viewTo)break}else B&&(y.visible=Fu(A.display,A.doc,I));if(!Bs(A,y))break;Qc(A);var K=xA(A);ja(A),zu(A,K),tc(A,K),y.force=!1}y.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(y.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function va(A,y){var I=new Oa(A,y);if(Bs(A,I)){Qc(A),fr(A,I);var B=xA(A);ja(A),zu(A,B),tc(A,B),I.finish()}}function Vc(A,y,I){var B=A.display,K=A.options.lineNumbers,H=B.lineDiv,ue=H.firstChild;function _e(xn){var Pn=xn.nextSibling;return b&&Y&&A.display.currentWheelTarget==xn?xn.style.display="none":xn.parentNode.removeChild(xn),Pn}for(var Ie=B.view,Ue=B.viewFrom,ct=0;ct<Ie.length;ct++){var xt=Ie[ct];if(!xt.hidden)if(!xt.node||xt.node.parentNode!=H){var Ht=am(A,xt,Ue,I);H.insertBefore(Ht,ue)}else{for(;ue!=xt.node;)ue=_e(ue);var Wt=K&&y!=null&&y<=Ue&&xt.lineNumber;xt.changes&&(Je(xt.changes,"gutter")>-1&&(Wt=!1),ef(A,xt,Ue,I)),Wt&&(be(xt.lineNumber),xt.lineNumber.appendChild(document.createTextNode(Nn(A.options,Ue)))),ue=xt.node.nextSibling}Ue+=xt.size}for(;ue;)ue=_e(ue)}function Ia(A){var y=A.gutters.offsetWidth;A.sizer.style.marginLeft=y+"px",Zs(A,"gutterChanged",A)}function tc(A,y){A.display.sizer.style.minHeight=y.docHeight+"px",A.display.heightForcer.style.top=y.docHeight+"px",A.display.gutters.style.height=y.docHeight+A.display.barHeight+iu(A)+"px"}function vd(A){var y=A.display,I=y.view;if(!(!y.alignWidgets&&(!y.gutters.firstChild||!A.options.fixedGutter))){for(var B=Uo(y)-y.scroller.scrollLeft+A.doc.scrollLeft,K=y.gutters.offsetWidth,H=B+"px",ue=0;ue<I.length;ue++)if(!I[ue].hidden){A.options.fixedGutter&&(I[ue].gutter&&(I[ue].gutter.style.left=H),I[ue].gutterBackground&&(I[ue].gutterBackground.style.left=H));var _e=I[ue].alignable;if(_e)for(var Ie=0;Ie<_e.length;Ie++)_e[Ie].style.left=H}A.options.fixedGutter&&(y.gutters.style.left=B+K+"px")}}function _d(A){if(!A.options.lineNumbers)return!1;var y=A.doc,I=Nn(A.options,y.first+y.size-1),B=A.display;if(I.length!=B.lineNumChars){var K=B.measure.appendChild(pe("div",[pe("div",I)],"CodeMirror-linenumber CodeMirror-gutter-elt")),H=K.firstChild.offsetWidth,ue=K.offsetWidth-H;return B.lineGutter.style.width="",B.lineNumInnerWidth=Math.max(H,B.lineGutter.offsetWidth-ue)+1,B.lineNumWidth=B.lineNumInnerWidth+ue,B.lineNumChars=B.lineNumInnerWidth?I.length:-1,B.lineGutter.style.width=B.lineNumWidth+"px",Ia(A.display),!0}return!1}function Mi(A,y){for(var I=[],B=!1,K=0;K<A.length;K++){var H=A[K],ue=null;if(typeof H!="string"&&(ue=H.style,H=H.className),H=="CodeMirror-linenumbers")if(y)B=!0;else continue;I.push({className:H,style:ue})}return y&&!B&&I.push({className:"CodeMirror-linenumbers",style:null}),I}function Cd(A){var y=A.gutters,I=A.gutterSpecs;be(y),A.lineGutter=null;for(var B=0;B<I.length;++B){var K=I[B],H=K.className,ue=K.style,_e=y.appendChild(pe("div",null,"CodeMirror-gutter "+H));ue&&(_e.style.cssText=ue),H=="CodeMirror-linenumbers"&&(A.lineGutter=_e,_e.style.width=(A.lineNumWidth||1)+"px")}y.style.display=I.length?"":"none",Ia(A)}function Gl(A){Cd(A.display),Tl(A),vd(A)}function bd(A,y,I,B){var K=this;this.input=I,K.scrollbarFiller=pe("div",null,"CodeMirror-scrollbar-filler"),K.scrollbarFiller.setAttribute("cm-not-content","true"),K.gutterFiller=pe("div",null,"CodeMirror-gutter-filler"),K.gutterFiller.setAttribute("cm-not-content","true"),K.lineDiv=it("div",null,"CodeMirror-code"),K.selectionDiv=pe("div",null,null,"position: relative; z-index: 1"),K.cursorDiv=pe("div",null,"CodeMirror-cursors"),K.measure=pe("div",null,"CodeMirror-measure"),K.lineMeasure=pe("div",null,"CodeMirror-measure"),K.lineSpace=it("div",[K.measure,K.lineMeasure,K.selectionDiv,K.cursorDiv,K.lineDiv],null,"position: relative; outline: none");var H=it("div",[K.lineSpace],"CodeMirror-lines");K.mover=pe("div",[H],null,"position: relative"),K.sizer=pe("div",[K.mover],"CodeMirror-sizer"),K.sizerWidth=null,K.heightForcer=pe("div",null,null,"position: absolute; height: "+yt+"px; width: 1px;"),K.gutters=pe("div",null,"CodeMirror-gutters"),K.lineGutter=null,K.scroller=pe("div",[K.sizer,K.heightForcer,K.gutters],"CodeMirror-scroll"),K.scroller.setAttribute("tabIndex","-1"),K.wrapper=pe("div",[K.scrollbarFiller,K.gutterFiller,K.scroller],"CodeMirror"),S&&O>=105&&(K.wrapper.style.clipPath="inset(0px)"),K.wrapper.setAttribute("translate","no"),d&&g<8&&(K.gutters.style.zIndex=-1,K.scroller.style.paddingRight=0),!b&&!(i&&X)&&(K.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(K.wrapper):A(K.wrapper)),K.viewFrom=K.viewTo=y.first,K.reportedViewFrom=K.reportedViewTo=y.first,K.view=[],K.renderedView=null,K.externalMeasured=null,K.viewOffset=0,K.lastWrapHeight=K.lastWrapWidth=0,K.updateLineNumbers=null,K.nativeBarWidth=K.barHeight=K.barWidth=0,K.scrollbarsClipped=!1,K.lineNumWidth=K.lineNumInnerWidth=K.lineNumChars=null,K.alignWidgets=!1,K.cachedCharWidth=K.cachedTextHeight=K.cachedPaddingH=null,K.maxLine=null,K.maxLineLength=0,K.maxLineChanged=!1,K.wheelDX=K.wheelDY=K.wheelStartX=K.wheelStartY=null,K.shift=!1,K.selForContextMenu=null,K.activeTouch=null,K.gutterSpecs=Mi(B.gutters,B.lineNumbers),Cd(K),I.init(K)}var xd=0,MA=null;d?MA=-.53:i?MA=15:S?MA=-.7:U&&(MA=-1/3);function nc(A){var y=A.wheelDeltaX,I=A.wheelDeltaY;return y==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(y=A.detail),I==null&&A.detail&&A.axis==A.VERTICAL_AXIS?I=A.detail:I==null&&(I=A.wheelDelta),{x:y,y:I}}function AA(A){var y=nc(A);return y.x*=MA,y.y*=MA,y}function Cc(A,y){S&&O==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var I=nc(y),B=I.x,K=I.y,H=MA;y.deltaMode===0&&(B=y.deltaX,K=y.deltaY,H=1);var ue=A.display,_e=ue.scroller,Ie=_e.scrollWidth>_e.clientWidth,Ue=_e.scrollHeight>_e.clientHeight;if(B&&Ie||K&&Ue){if(K&&Y&&b){e:for(var ct=y.target,xt=ue.view;ct!=_e;ct=ct.parentNode)for(var Ht=0;Ht<xt.length;Ht++)if(xt[Ht].node==ct){A.display.currentWheelTarget=ct;break e}}if(B&&!i&&!k&&H!=null){K&&Ue&&Uu(A,Math.max(0,_e.scrollTop+K*H)),Nl(A,Math.max(0,_e.scrollLeft+B*H)),(!K||K&&Ue)&&_t(y),ue.wheelStartX=null;return}if(K&&H!=null){var Wt=K*H,xn=A.doc.scrollTop,Pn=xn+ue.wrapper.clientHeight;Wt<0?xn=Math.max(0,xn+Wt-50):Pn=Math.min(A.doc.height,Pn+Wt+50),va(A,{top:xn,bottom:Pn})}xd<20&&y.deltaMode!==0&&(ue.wheelStartX==null?(ue.wheelStartX=_e.scrollLeft,ue.wheelStartY=_e.scrollTop,ue.wheelDX=B,ue.wheelDY=K,setTimeout(function(){if(ue.wheelStartX!=null){var Yn=_e.scrollLeft-ue.wheelStartX,Xn=_e.scrollTop-ue.wheelStartY,_r=Xn&&ue.wheelDY&&Xn/ue.wheelDY||Yn&&ue.wheelDX&&Yn/ue.wheelDX;ue.wheelStartX=ue.wheelStartY=null,_r&&(MA=(MA*xd+_r)/(xd+1),++xd)}},200)):(ue.wheelDX+=B,ue.wheelDY+=K))}}var Os=function(A,y){this.ranges=A,this.primIndex=y};Os.prototype.primary=function(){return this.ranges[this.primIndex]},Os.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var y=0;y<this.ranges.length;y++){var I=this.ranges[y],B=A.ranges[y];if(!Pi(I.anchor,B.anchor)||!Pi(I.head,B.head))return!1}return!0},Os.prototype.deepCopy=function(){for(var A=[],y=0;y<this.ranges.length;y++)A[y]=new bo(ho(this.ranges[y].anchor),ho(this.ranges[y].head));return new Os(A,this.primIndex)},Os.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},Os.prototype.contains=function(A,y){y||(y=A);for(var I=0;I<this.ranges.length;I++){var B=this.ranges[I];if(er(y,B.from())>=0&&er(A,B.to())<=0)return I}return-1};var bo=function(A,y){this.anchor=A,this.head=y};bo.prototype.from=function(){return Ns(this.anchor,this.head)},bo.prototype.to=function(){return _s(this.anchor,this.head)},bo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Cu(A,y,I){var B=A&&A.options.selectionsMayTouch,K=y[I];y.sort(function(Ht,Wt){return er(Ht.from(),Wt.from())}),I=Je(y,K);for(var H=1;H<y.length;H++){var ue=y[H],_e=y[H-1],Ie=er(_e.to(),ue.from());if(B&&!ue.empty()?Ie>0:Ie>=0){var Ue=Ns(_e.from(),ue.from()),ct=_s(_e.to(),ue.to()),xt=_e.empty()?ue.from()==ue.head:_e.from()==_e.head;H<=I&&--I,y.splice(--H,2,new bo(xt?ct:Ue,xt?Ue:ct))}}return new Os(y,I)}function Ga(A,y){return new Os([new bo(A,y||A)],0)}function Ds(A){return A.text?un(A.from.line+A.text.length-1,sr(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function Zo(A,y){if(er(A,y.from)<0)return A;if(er(A,y.to)<=0)return Ds(y);var I=A.line+y.text.length-(y.to.line-y.from.line)-1,B=A.ch;return A.line==y.to.line&&(B+=Ds(y).ch-y.to.ch),un(I,B)}function ou(A,y){for(var I=[],B=0;B<A.sel.ranges.length;B++){var K=A.sel.ranges[B];I.push(new bo(Zo(K.anchor,y),Zo(K.head,y)))}return Cu(A.cm,I,A.sel.primIndex)}function Wu(A,y,I){return A.line==y.line?un(I.line,A.ch-y.ch+I.ch):un(I.line+(A.line-y.line),A.ch)}function bc(A,y,I){for(var B=[],K=un(A.first,0),H=K,ue=0;ue<y.length;ue++){var _e=y[ue],Ie=Wu(_e.from,K,H),Ue=Wu(Ds(_e),K,H);if(K=_e.to,H=Ue,I=="around"){var ct=A.sel.ranges[ue],xt=er(ct.head,ct.anchor)<0;B[ue]=new bo(xt?Ue:Ie,xt?Ie:Ue)}else B[ue]=new bo(Ie,Ie)}return new Os(B,A.sel.primIndex)}function nh(A){A.doc.mode=ns(A.options,A.doc.modeOption),SA(A)}function SA(A){A.doc.iter(function(y){y.stateAfter&&(y.stateAfter=null),y.styles&&(y.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,yd(A,100),A.state.modeGen++,A.curOp&&Tl(A)}function xc(A,y){return y.from.ch==0&&y.to.ch==0&&sr(y.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function gs(A,y,I,B){function K(_r){return I?I[_r]:null}function H(_r,ur,Fr){fu(_r,ur,Fr,B),Zs(_r,"change",_r,y)}function ue(_r,ur){for(var Fr=[],ai=_r;ai<ur;++ai)Fr.push(new za(Ue[ai],K(ai),B));return Fr}var _e=y.from,Ie=y.to,Ue=y.text,ct=Dr(A,_e.line),xt=Dr(A,Ie.line),Ht=sr(Ue),Wt=K(Ue.length-1),xn=Ie.line-_e.line;if(y.full)A.insert(0,ue(0,Ue.length)),A.remove(Ue.length,A.size-Ue.length);else if(xc(A,y)){var Pn=ue(0,Ue.length-1);H(xt,xt.text,Wt),xn&&A.remove(_e.line,xn),Pn.length&&A.insert(_e.line,Pn)}else if(ct==xt)if(Ue.length==1)H(ct,ct.text.slice(0,_e.ch)+Ht+ct.text.slice(Ie.ch),Wt);else{var Yn=ue(1,Ue.length-1);Yn.push(new za(Ht+ct.text.slice(Ie.ch),Wt,B)),H(ct,ct.text.slice(0,_e.ch)+Ue[0],K(0)),A.insert(_e.line+1,Yn)}else if(Ue.length==1)H(ct,ct.text.slice(0,_e.ch)+Ue[0]+xt.text.slice(Ie.ch),K(0)),A.remove(_e.line+1,xn);else{H(ct,ct.text.slice(0,_e.ch)+Ue[0],K(0)),H(xt,Ht+xt.text.slice(Ie.ch),Wt);var Xn=ue(1,Ue.length-1);xn>1&&A.remove(_e.line+1,xn-1),A.insert(_e.line+1,Xn)}Zs(A,"change",A,y)}function da(A,y,I){function B(K,H,ue){if(K.linked)for(var _e=0;_e<K.linked.length;++_e){var Ie=K.linked[_e];if(Ie.doc!=H){var Ue=ue&&Ie.sharedHist;I&&!Ue||(y(Ie.doc,Ue),B(Ie.doc,K,Ue))}}}B(A,null,!0)}function hr(A,y){if(y.cm)throw new Error("This document is already in use.");A.doc=y,y.cm=A,$A(A),nh(A),Hr(A),A.options.direction=y.direction,A.options.lineWrapping||ya(A),A.options.mode=y.modeOption,Tl(A)}function Hr(A){(A.doc.direction=="rtl"?De:fe)(A.display.lineDiv,"CodeMirror-rtl")}function Qu(A){Bo(A,function(){Hr(A),Tl(A)})}function rc(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function bu(A,y){var I={from:ho(y.from),to:Ds(y),text:Za(A,y.from,y.to)};return Is(A,I,y.from.line,y.to.line+1),da(A,function(B){return Is(B,I,y.from.line,y.to.line+1)},!0),I}function bs(A){for(;A.length;){var y=sr(A);if(y.ranges)A.pop();else break}}function Lf(A,y){if(y)return bs(A.done),sr(A.done);if(A.done.length&&!sr(A.done).ranges)return sr(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),sr(A.done)}function su(A,y,I,B){var K=A.history;K.undone.length=0;var H=+new Date,ue,_e;if((K.lastOp==B||K.lastOrigin==y.origin&&y.origin&&(y.origin.charAt(0)=="+"&&K.lastModTime>H-(A.cm?A.cm.options.historyEventDelay:500)||y.origin.charAt(0)=="*"))&&(ue=Lf(K,K.lastOp==B)))_e=sr(ue.changes),er(y.from,y.to)==0&&er(y.from,_e.to)==0?_e.to=Ds(y):ue.changes.push(bu(A,y));else{var Ie=sr(K.done);for((!Ie||!Ie.ranges)&&Po(A.sel,K.done),ue={changes:[bu(A,y)],generation:K.generation},K.done.push(ue);K.done.length>K.undoDepth;)K.done.shift(),K.done[0].ranges||K.done.shift()}K.done.push(I),K.generation=++K.maxGeneration,K.lastModTime=K.lastSelTime=H,K.lastOp=K.lastSelOp=B,K.lastOrigin=K.lastSelOrigin=y.origin,_e||Bt(A,"historyAdded")}function Ff(A,y,I,B){var K=y.charAt(0);return K=="*"||K=="+"&&I.ranges.length==B.ranges.length&&I.somethingSelected()==B.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function xu(A,y,I,B){var K=A.history,H=B&&B.origin;I==K.lastSelOp||H&&K.lastSelOrigin==H&&(K.lastModTime==K.lastSelTime&&K.lastOrigin==H||Ff(A,H,sr(K.done),y))?K.done[K.done.length-1]=y:Po(y,K.done),K.lastSelTime=+new Date,K.lastSelOrigin=H,K.lastSelOp=I,B&&B.clearRedo!==!1&&bs(K.undone)}function Po(A,y){var I=sr(y);I&&I.ranges&&I.equals(A)||y.push(A)}function Is(A,y,I,B){var K=y["spans_"+A.id],H=0;A.iter(Math.max(A.first,I),Math.min(A.first+A.size,B),function(ue){ue.markedSpans&&((K||(K=y["spans_"+A.id]={}))[H]=ue.markedSpans),++H})}function rh(A){if(!A)return null;for(var y,I=0;I<A.length;++I)A[I].marker.explicitlyCleared?y||(y=A.slice(0,I)):y&&y.push(A[I]);return y?y.length?y:null:A}function EA(A,y){var I=y["spans_"+A.id];if(!I)return null;for(var B=[],K=0;K<y.text.length;++K)B.push(rh(I[K]));return B}function ih(A,y){var I=EA(A,y),B=Jr(A,y);if(!I)return B;if(!B)return I;for(var K=0;K<I.length;++K){var H=I[K],ue=B[K];if(H&&ue)e:for(var _e=0;_e<ue.length;++_e){for(var Ie=ue[_e],Ue=0;Ue<H.length;++Ue)if(H[Ue].marker==Ie.marker)continue e;H.push(Ie)}else ue&&(I[K]=ue)}return I}function BA(A,y,I){for(var B=[],K=0;K<A.length;++K){var H=A[K];if(H.ranges){B.push(I?Os.prototype.deepCopy.call(H):H);continue}var ue=H.changes,_e=[];B.push({changes:_e});for(var Ie=0;Ie<ue.length;++Ie){var Ue=ue[Ie],ct=void 0;if(_e.push({from:Ue.from,to:Ue.to,text:Ue.text}),y)for(var xt in Ue)(ct=xt.match(/^spans_(\d+)$/))&&Je(y,Number(ct[1]))>-1&&(sr(_e)[xt]=Ue[xt],delete Ue[xt])}}return B}function Qs(A,y,I,B){if(B){var K=A.anchor;if(I){var H=er(y,K)<0;H!=er(I,K)<0?(K=y,y=I):H!=er(y,I)<0&&(y=I)}return new bo(K,y)}else return new bo(I||y,y)}function wc(A,y,I,B,K){K==null&&(K=A.cm&&(A.cm.display.shift||A.extend)),_a(A,new Os([Qs(A.sel.primary(),y,I,K)],0),B)}function Wl(A,y,I){for(var B=[],K=A.cm&&(A.cm.display.shift||A.extend),H=0;H<A.sel.ranges.length;H++)B[H]=Qs(A.sel.ranges[H],y[H],null,K);var ue=Cu(A.cm,B,A.sel.primIndex);_a(A,ue,I)}function hl(A,y,I,B){var K=A.sel.ranges.slice(0);K[y]=I,_a(A,Cu(A.cm,K,A.sel.primIndex),B)}function qu(A,y,I,B){_a(A,Ga(y,I),B)}function Mc(A,y,I){var B={ranges:y.ranges,update:function(K){this.ranges=[];for(var H=0;H<K.length;H++)this.ranges[H]=new bo(ri(A,K[H].anchor),ri(A,K[H].head))},origin:I&&I.origin};return Bt(A,"beforeSelectionChange",A,B),A.cm&&Bt(A.cm,"beforeSelectionChange",A.cm,B),B.ranges!=y.ranges?Cu(A.cm,B.ranges,B.ranges.length-1):y}function wu(A,y,I){var B=A.history.done,K=sr(B);K&&K.ranges?(B[B.length-1]=y,Xs(A,y,I)):_a(A,y,I)}function _a(A,y,I){Xs(A,y,I),xu(A,A.sel,A.cm?A.cm.curOp.id:NaN,I)}function Xs(A,y,I){(tn(A,"beforeSelectionChange")||A.cm&&tn(A.cm,"beforeSelectionChange"))&&(y=Mc(A,y,I));var B=I&&I.bias||(er(y.primary().head,A.sel.primary().head)<0?-1:1);au(A,cA(A,y,B,!0)),!(I&&I.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&zo(A.cm)}function au(A,y){y.equals(A.sel)||(A.sel=y,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,Xt(A.cm)),Zs(A,"cursorActivity",A))}function lu(A){au(A,cA(A,A.sel,null,!1))}function cA(A,y,I,B){for(var K,H=0;H<y.ranges.length;H++){var ue=y.ranges[H],_e=y.ranges.length==A.sel.ranges.length&&A.sel.ranges[H],Ie=Sc(A,ue.anchor,_e&&_e.anchor,I,B),Ue=ue.head==ue.anchor?Ie:Sc(A,ue.head,_e&&_e.head,I,B);(K||Ie!=ue.anchor||Ue!=ue.head)&&(K||(K=y.ranges.slice(0,H)),K[H]=new bo(Ie,Ue))}return K?Cu(A.cm,K,y.primIndex):y}function Mu(A,y,I,B,K){var H=Dr(A,y.line);if(H.markedSpans)for(var ue=0;ue<H.markedSpans.length;++ue){var _e=H.markedSpans[ue],Ie=_e.marker,Ue="selectLeft"in Ie?!Ie.selectLeft:Ie.inclusiveLeft,ct="selectRight"in Ie?!Ie.selectRight:Ie.inclusiveRight;if((_e.from==null||(Ue?_e.from<=y.ch:_e.from<y.ch))&&(_e.to==null||(ct?_e.to>=y.ch:_e.to>y.ch))){if(K&&(Bt(Ie,"beforeCursorEnter"),Ie.explicitlyCleared))if(H.markedSpans){--ue;continue}else break;if(!Ie.atomic)continue;if(I){var xt=Ie.find(B<0?1:-1),Ht=void 0;if((B<0?ct:Ue)&&(xt=Yu(A,xt,-B,xt&&xt.line==y.line?H:null)),xt&&xt.line==y.line&&(Ht=er(xt,I))&&(B<0?Ht<0:Ht>0))return Mu(A,xt,y,B,K)}var Wt=Ie.find(B<0?-1:1);return(B<0?Ue:ct)&&(Wt=Yu(A,Wt,B,Wt.line==y.line?H:null)),Wt?Mu(A,Wt,y,B,K):null}}return y}function Sc(A,y,I,B,K){var H=B||1,ue=Mu(A,y,I,H,K)||!K&&Mu(A,y,I,H,!0)||Mu(A,y,I,-H,K)||!K&&Mu(A,y,I,-H,!0);return ue||(A.cantEdit=!0,un(A.first,0))}function Yu(A,y,I,B){return I<0&&y.ch==0?y.line>A.first?ri(A,un(y.line-1)):null:I>0&&y.ch==(B||Dr(A,y.line)).text.length?y.line<A.first+A.size-1?un(y.line+1,0):null:new un(y.line,y.ch+I)}function Ql(A){A.setSelection(un(A.firstLine(),0),un(A.lastLine()),Ut)}function wd(A,y,I){var B={canceled:!1,from:y.from,to:y.to,text:y.text,origin:y.origin,cancel:function(){return B.canceled=!0}};return I&&(B.update=function(K,H,ue,_e){K&&(B.from=ri(A,K)),H&&(B.to=ri(A,H)),ue&&(B.text=ue),_e!==void 0&&(B.origin=_e)}),Bt(A,"beforeChange",A,B),A.cm&&Bt(A.cm,"beforeChange",A.cm,B),B.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:B.from,to:B.to,text:B.text,origin:B.origin}}function T(A,y,I){if(A.cm){if(!A.cm.curOp)return Ki(A.cm,T)(A,y,I);if(A.cm.state.suppressEdits)return}if(!((tn(A,"beforeChange")||A.cm&&tn(A.cm,"beforeChange"))&&(y=wd(A,y,!0),!y))){var B=fo&&!I&&Ni(A,y.from,y.to);if(B)for(var K=B.length-1;K>=0;--K)l(A,{from:B[K].from,to:B[K].to,text:K?[""]:y.text,origin:y.origin});else l(A,y)}}function l(A,y){if(!(y.text.length==1&&y.text[0]==""&&er(y.from,y.to)==0)){var I=ou(A,y);su(A,y,I,A.cm?A.cm.curOp.id:NaN),M(A,y,I,Jr(A,y));var B=[];da(A,function(K,H){!H&&Je(B,K.history)==-1&&(se(K.history,y),B.push(K.history)),M(K,y,null,Jr(K,y))})}}function c(A,y,I){var B=A.cm&&A.cm.state.suppressEdits;if(!(B&&!I)){for(var K=A.history,H,ue=A.sel,_e=y=="undo"?K.done:K.undone,Ie=y=="undo"?K.undone:K.done,Ue=0;Ue<_e.length&&(H=_e[Ue],!(I?H.ranges&&!H.equals(A.sel):!H.ranges));Ue++);if(Ue!=_e.length){for(K.lastOrigin=K.lastSelOrigin=null;;)if(H=_e.pop(),H.ranges){if(Po(H,Ie),I&&!H.equals(A.sel)){_a(A,H,{clearRedo:!1});return}ue=H}else if(B){_e.push(H);return}else break;var ct=[];Po(ue,Ie),Ie.push({changes:ct,generation:K.generation}),K.generation=H.generation||++K.maxGeneration;for(var xt=tn(A,"beforeChange")||A.cm&&tn(A.cm,"beforeChange"),Ht=function(Pn){var Yn=H.changes[Pn];if(Yn.origin=y,xt&&!wd(A,Yn,!1))return _e.length=0,{};ct.push(bu(A,Yn));var Xn=Pn?ou(A,Yn):sr(_e);M(A,Yn,Xn,ih(A,Yn)),!Pn&&A.cm&&A.cm.scrollIntoView({from:Yn.from,to:Ds(Yn)});var _r=[];da(A,function(ur,Fr){!Fr&&Je(_r,ur.history)==-1&&(se(ur.history,Yn),_r.push(ur.history)),M(ur,Yn,null,ih(ur,Yn))})},Wt=H.changes.length-1;Wt>=0;--Wt){var xn=Ht(Wt);if(xn)return xn.v}}}}function C(A,y){if(y!=0&&(A.first+=y,A.sel=new Os(Jn(A.sel.ranges,function(K){return new bo(un(K.anchor.line+y,K.anchor.ch),un(K.head.line+y,K.head.ch))}),A.sel.primIndex),A.cm)){Tl(A.cm,A.first,A.first-y,y);for(var I=A.cm.display,B=I.viewFrom;B<I.viewTo;B++)gc(A.cm,B,"gutter")}}function M(A,y,I,B){if(A.cm&&!A.cm.curOp)return Ki(A.cm,M)(A,y,I,B);if(y.to.line<A.first){C(A,y.text.length-1-(y.to.line-y.from.line));return}if(!(y.from.line>A.lastLine())){if(y.from.line<A.first){var K=y.text.length-1-(A.first-y.from.line);C(A,K),y={from:un(A.first,0),to:un(y.to.line+K,y.to.ch),text:[sr(y.text)],origin:y.origin}}var H=A.lastLine();y.to.line>H&&(y={from:y.from,to:un(H,Dr(A,H).text.length),text:[y.text[0]],origin:y.origin}),y.removed=Za(A,y.from,y.to),I||(I=ou(A,y)),A.cm?R(A.cm,y,B):gs(A,y,B),Xs(A,I,Ut),A.cantEdit&&Sc(A,un(A.firstLine(),0))&&(A.cantEdit=!1)}}function R(A,y,I){var B=A.doc,K=A.display,H=y.from,ue=y.to,_e=!1,Ie=H.line;A.options.lineWrapping||(Ie=Qe(gr(Dr(B,H.line))),B.iter(Ie,ue.line+1,function(Wt){if(Wt==K.maxLine)return _e=!0,!0})),B.sel.contains(y.from,y.to)>-1&&Xt(A),gs(B,y,I,Nc(A)),A.options.lineWrapping||(B.iter(Ie,H.line+y.text.length,function(Wt){var xn=us(Wt);xn>K.maxLineLength&&(K.maxLine=Wt,K.maxLineLength=xn,K.maxLineChanged=!0,_e=!1)}),_e&&(A.curOp.updateMaxLine=!0)),Vs(B,H.line),yd(A,400);var Ue=y.text.length-(ue.line-H.line)-1;y.full?Tl(A):H.line==ue.line&&y.text.length==1&&!xc(A.doc,y)?gc(A,H.line,"text"):Tl(A,H.line,ue.line+1,Ue);var ct=tn(A,"changes"),xt=tn(A,"change");if(xt||ct){var Ht={from:H,to:ue,text:y.text,removed:y.removed,origin:y.origin};xt&&Zs(A,"change",A,Ht),ct&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(Ht)}A.display.selForContextMenu=null}function j(A,y,I,B,K){var H;B||(B=I),er(B,I)<0&&(H=[B,I],I=H[0],B=H[1]),typeof y=="string"&&(y=A.splitLines(y)),T(A,{from:I,to:B,text:y,origin:K})}function $(A,y,I,B){I<A.line?A.line+=B:y<A.line&&(A.line=y,A.ch=0)}function te(A,y,I,B){for(var K=0;K<A.length;++K){var H=A[K],ue=!0;if(H.ranges){H.copied||(H=A[K]=H.deepCopy(),H.copied=!0);for(var _e=0;_e<H.ranges.length;_e++)$(H.ranges[_e].anchor,y,I,B),$(H.ranges[_e].head,y,I,B);continue}for(var Ie=0;Ie<H.changes.length;++Ie){var Ue=H.changes[Ie];if(I<Ue.from.line)Ue.from=un(Ue.from.line+B,Ue.from.ch),Ue.to=un(Ue.to.line+B,Ue.to.ch);else if(y<=Ue.to.line){ue=!1;break}}ue||(A.splice(0,K+1),K=0)}}function se(A,y){var I=y.from.line,B=y.to.line,K=y.text.length-(B-I)-1;te(A.done,I,B,K),te(A.undone,I,B,K)}function xe(A,y,I,B){var K=y,H=y;return typeof y=="number"?H=Dr(A,vA(A,y)):K=Qe(y),K==null?null:(B(H,K)&&A.cm&&gc(A.cm,K,I),H)}function Oe(A){this.lines=A,this.parent=null;for(var y=0,I=0;I<A.length;++I)A[I].parent=this,y+=A[I].height;this.height=y}Oe.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,y){for(var I=A,B=A+y;I<B;++I){var K=this.lines[I];this.height-=K.height,Hs(K),Zs(K,"delete")}this.lines.splice(A,y)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,y,I){this.height+=I,this.lines=this.lines.slice(0,A).concat(y).concat(this.lines.slice(A));for(var B=0;B<y.length;++B)y[B].parent=this},iterN:function(A,y,I){for(var B=A+y;A<B;++A)if(I(this.lines[A]))return!0}};function ke(A){this.children=A;for(var y=0,I=0,B=0;B<A.length;++B){var K=A[B];y+=K.chunkSize(),I+=K.height,K.parent=this}this.size=y,this.height=I,this.parent=null}ke.prototype={chunkSize:function(){return this.size},removeInner:function(A,y){this.size-=y;for(var I=0;I<this.children.length;++I){var B=this.children[I],K=B.chunkSize();if(A<K){var H=Math.min(y,K-A),ue=B.height;if(B.removeInner(A,H),this.height-=ue-B.height,K==H&&(this.children.splice(I--,1),B.parent=null),(y-=H)==0)break;A=0}else A-=K}if(this.size-y<25&&(this.children.length>1||!(this.children[0]instanceof Oe))){var _e=[];this.collapse(_e),this.children=[new Oe(_e)],this.children[0].parent=this}},collapse:function(A){for(var y=0;y<this.children.length;++y)this.children[y].collapse(A)},insertInner:function(A,y,I){this.size+=y.length,this.height+=I;for(var B=0;B<this.children.length;++B){var K=this.children[B],H=K.chunkSize();if(A<=H){if(K.insertInner(A,y,I),K.lines&&K.lines.length>50){for(var ue=K.lines.length%25+25,_e=ue;_e<K.lines.length;){var Ie=new Oe(K.lines.slice(_e,_e+=25));K.height-=Ie.height,this.children.splice(++B,0,Ie),Ie.parent=this}K.lines=K.lines.slice(0,ue),this.maybeSpill()}break}A-=H}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var y=A.children.splice(A.children.length-5,5),I=new ke(y);if(A.parent){A.size-=I.size,A.height-=I.height;var K=Je(A.parent.children,A);A.parent.children.splice(K+1,0,I)}else{var B=new ke(A.children);B.parent=A,A.children=[B,I],A=B}I.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,y,I){for(var B=0;B<this.children.length;++B){var K=this.children[B],H=K.chunkSize();if(A<H){var ue=Math.min(y,H-A);if(K.iterN(A,ue,I))return!0;if((y-=ue)==0)break;A=0}else A-=H}}};var qe=function(A,y,I){if(I)for(var B in I)I.hasOwnProperty(B)&&(this[B]=I[B]);this.doc=A,this.node=y};qe.prototype.clear=function(){var A=this.doc.cm,y=this.line.widgets,I=this.line,B=Qe(I);if(!(B==null||!y)){for(var K=0;K<y.length;++K)y[K]==this&&y.splice(K--,1);y.length||(I.widgets=null);var H=mu(this);ia(I,Math.max(0,I.height-H)),A&&(Bo(A,function(){Ve(A,I,-H),gc(A,B,"widget")}),Zs(A,"lineWidgetCleared",A,this,B))}},qe.prototype.changed=function(){var A=this,y=this.height,I=this.doc.cm,B=this.line;this.height=null;var K=mu(this)-y;K&&(qr(this.doc,B)||ia(B,B.height+K),I&&Bo(I,function(){I.curOp.forceUpdate=!0,Ve(I,B,K),Zs(I,"lineWidgetChanged",I,A,Qe(B))}))},zt(qe);function Ve(A,y,I){Zi(y)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&As(A,I)}function ut(A,y,I,B){var K=new qe(A,I,B),H=A.cm;return H&&K.noHScroll&&(H.display.alignWidgets=!0),xe(A,y,"widget",function(ue){var _e=ue.widgets||(ue.widgets=[]);if(K.insertAt==null?_e.push(K):_e.splice(Math.min(_e.length,Math.max(0,K.insertAt)),0,K),K.line=ue,H&&!qr(A,ue)){var Ie=Zi(ue)<A.scrollTop;ia(ue,ue.height+mu(K)),Ie&&As(H,K.height),H.curOp.forceUpdate=!0}return!0}),H&&Zs(H,"lineWidgetAdded",H,K,typeof y=="number"?y:Qe(y)),K}var ot=0,At=function(A,y){this.lines=[],this.type=y,this.doc=A,this.id=++ot};At.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,y=A&&!A.curOp;if(y&&Nu(A),tn(this,"clear")){var I=this.find();I&&Zs(this,"clear",I.from,I.to)}for(var B=null,K=null,H=0;H<this.lines.length;++H){var ue=this.lines[H],_e=El(ue.markedSpans,this);A&&!this.collapsed?gc(A,Qe(ue),"text"):A&&(_e.to!=null&&(K=Qe(ue)),_e.from!=null&&(B=Qe(ue))),ue.markedSpans=oA(ue.markedSpans,_e),_e.from==null&&this.collapsed&&!qr(this.doc,ue)&&A&&ia(ue,kl(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var Ie=0;Ie<this.lines.length;++Ie){var Ue=gr(this.lines[Ie]),ct=us(Ue);ct>A.display.maxLineLength&&(A.display.maxLine=Ue,A.display.maxLineLength=ct,A.display.maxLineChanged=!0)}B!=null&&A&&this.collapsed&&Tl(A,B,K+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&lu(A.doc)),A&&Zs(A,"markerCleared",A,this,B,K),y&&Gu(A),this.parent&&this.parent.clear()}},At.prototype.find=function(A,y){A==null&&this.type=="bookmark"&&(A=1);for(var I,B,K=0;K<this.lines.length;++K){var H=this.lines[K],ue=El(H.markedSpans,this);if(ue.from!=null&&(I=un(y?H:Qe(H),ue.from),A==-1))return I;if(ue.to!=null&&(B=un(y?H:Qe(H),ue.to),A==1))return B}return I&&{from:I,to:B}},At.prototype.changed=function(){var A=this,y=this.find(-1,!0),I=this,B=this.doc.cm;!y||!B||Bo(B,function(){var K=y.line,H=Qe(y.line),ue=_A(B,H);if(ue&&($d(ue),B.curOp.selectionChanged=B.curOp.forceUpdate=!0),B.curOp.updateMaxLine=!0,!qr(I.doc,K)&&I.height!=null){var _e=I.height;I.height=null;var Ie=mu(I)-_e;Ie&&ia(K,K.height+Ie)}Zs(B,"markerChanged",B,A)})},At.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(!y.maybeHiddenMarkers||Je(y.maybeHiddenMarkers,this)==-1)&&(y.maybeUnhiddenMarkers||(y.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},At.prototype.detachLine=function(A){if(this.lines.splice(Je(this.lines,A),1),!this.lines.length&&this.doc.cm){var y=this.doc.cm.curOp;(y.maybeHiddenMarkers||(y.maybeHiddenMarkers=[])).push(this)}},zt(At);function mt(A,y,I,B,K){if(B&&B.shared)return kt(A,y,I,B,K);if(A.cm&&!A.cm.curOp)return Ki(A.cm,mt)(A,y,I,B,K);var H=new At(A,K),ue=er(y,I);if(B&&Fe(B,H,!1),ue>0||ue==0&&H.clearWhenEmpty!==!1)return H;if(H.replacedWith&&(H.collapsed=!0,H.widgetNode=it("span",[H.replacedWith],"CodeMirror-widget"),B.handleMouseEvents||H.widgetNode.setAttribute("cm-ignore-events","true"),B.insertLeft&&(H.widgetNode.insertLeft=!0)),H.collapsed){if(ci(A,y.line,y,I,H)||y.line!=I.line&&ci(A,I.line,y,I,H))throw new Error("Inserting collapsed marker partially overlapping an existing one");el()}H.addToHistory&&su(A,{from:y,to:I,origin:"markText"},A.sel,NaN);var _e=y.line,Ie=A.cm,Ue;if(A.iter(_e,I.line+1,function(xt){Ie&&H.collapsed&&!Ie.options.lineWrapping&&gr(xt)==Ie.display.maxLine&&(Ue=!0),H.collapsed&&_e!=y.line&&ia(xt,0),Vi(xt,new Ks(H,_e==y.line?y.ch:null,_e==I.line?I.ch:null),A.cm&&A.cm.curOp),++_e}),H.collapsed&&A.iter(y.line,I.line+1,function(xt){qr(A,xt)&&ia(xt,0)}),H.clearOnEnter&&ze(H,"beforeCursorEnter",function(){return H.clear()}),H.readOnly&&(Ms(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),H.collapsed&&(H.id=++ot,H.atomic=!0),Ie){if(Ue&&(Ie.curOp.updateMaxLine=!0),H.collapsed)Tl(Ie,y.line,I.line+1);else if(H.className||H.startStyle||H.endStyle||H.css||H.attributes||H.title)for(var ct=y.line;ct<=I.line;ct++)gc(Ie,ct,"text");H.atomic&&lu(Ie.doc),Zs(Ie,"markerAdded",Ie,H)}return H}var St=function(A,y){this.markers=A,this.primary=y;for(var I=0;I<A.length;++I)A[I].parent=this};St.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();Zs(this,"clear")}},St.prototype.find=function(A,y){return this.primary.find(A,y)},zt(St);function kt(A,y,I,B,K){B=Fe(B),B.shared=!1;var H=[mt(A,y,I,B,K)],ue=H[0],_e=B.widgetNode;return da(A,function(Ie){_e&&(B.widgetNode=_e.cloneNode(!0)),H.push(mt(Ie,ri(Ie,y),ri(Ie,I),B,K));for(var Ue=0;Ue<Ie.linked.length;++Ue)if(Ie.linked[Ue].isParent)return;ue=sr(H)}),new St(H,ue)}function Pt(A){return A.findMarks(un(A.first,0),A.clipPos(un(A.lastLine())),function(y){return y.parent})}function Ft(A,y){for(var I=0;I<y.length;I++){var B=y[I],K=B.find(),H=A.clipPos(K.from),ue=A.clipPos(K.to);if(er(H,ue)){var _e=mt(A,H,ue,B.primary,B.primary.type);B.markers.push(_e),_e.parent=B}}}function Tt(A){for(var y=function(B){var K=A[B],H=[K.primary.doc];da(K.primary.doc,function(Ie){return H.push(Ie)});for(var ue=0;ue<K.markers.length;ue++){var _e=K.markers[ue];Je(H,_e.doc)==-1&&(_e.parent=null,K.markers.splice(ue--,1))}},I=0;I<A.length;I++)y(I)}var Jt=0,Vt=function(A,y,I,B,K){if(!(this instanceof Vt))return new Vt(A,y,I,B,K);I==null&&(I=0),ke.call(this,[new Oe([new za("",null)])]),this.first=I,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=I;var H=un(I,0);this.sel=Ga(H),this.history=new rc(null),this.id=++Jt,this.modeOption=y,this.lineSep=B,this.direction=K=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),gs(this,{from:H,to:H,text:A}),_a(this,Ga(H),Ut)};Vt.prototype=xr(ke.prototype,{constructor:Vt,iter:function(A,y,I){I?this.iterN(A-this.first,y-A,I):this.iterN(this.first,this.first+this.size,A)},insert:function(A,y){for(var I=0,B=0;B<y.length;++B)I+=y[B].height;this.insertInner(A-this.first,y,I)},remove:function(A,y){this.removeInner(A-this.first,y)},getValue:function(A){var y=Ps(this,this.first,this.first+this.size);return A===!1?y:y.join(A||this.lineSeparator())},setValue:Es(function(A){var y=un(this.first,0),I=this.first+this.size-1;T(this,{from:y,to:un(I,Dr(this,I).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&cs(this.cm,0,0),_a(this,Ga(y),Ut)}),replaceRange:function(A,y,I,B){y=ri(this,y),I=I?ri(this,I):y,j(this,A,y,I,B)},getRange:function(A,y,I){var B=Za(this,ri(this,A),ri(this,y));return I===!1?B:I===""?B.join(""):B.join(I||this.lineSeparator())},getLine:function(A){var y=this.getLineHandle(A);return y&&y.text},getLineHandle:function(A){if(fn(this,A))return Dr(this,A)},getLineNumber:function(A){return Qe(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=Dr(this,A)),gr(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return ri(this,A)},getCursor:function(A){var y=this.sel.primary(),I;return A==null||A=="head"?I=y.head:A=="anchor"?I=y.anchor:A=="end"||A=="to"||A===!1?I=y.to():I=y.from(),I},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Es(function(A,y,I){qu(this,ri(this,typeof A=="number"?un(A,y||0):A),null,I)}),setSelection:Es(function(A,y,I){qu(this,ri(this,A),ri(this,y||A),I)}),extendSelection:Es(function(A,y,I){wc(this,ri(this,A),y&&ri(this,y),I)}),extendSelections:Es(function(A,y){Wl(this,Xa(this,A),y)}),extendSelectionsBy:Es(function(A,y){var I=Jn(this.sel.ranges,A);Wl(this,Xa(this,I),y)}),setSelections:Es(function(A,y,I){if(A.length){for(var B=[],K=0;K<A.length;K++)B[K]=new bo(ri(this,A[K].anchor),ri(this,A[K].head||A[K].anchor));y==null&&(y=Math.min(A.length-1,this.sel.primIndex)),_a(this,Cu(this.cm,B,y),I)}}),addSelection:Es(function(A,y,I){var B=this.sel.ranges.slice(0);B.push(new bo(ri(this,A),ri(this,y||A))),_a(this,Cu(this.cm,B,B.length-1),I)}),getSelection:function(A){for(var y=this.sel.ranges,I,B=0;B<y.length;B++){var K=Za(this,y[B].from(),y[B].to());I=I?I.concat(K):K}return A===!1?I:I.join(A||this.lineSeparator())},getSelections:function(A){for(var y=[],I=this.sel.ranges,B=0;B<I.length;B++){var K=Za(this,I[B].from(),I[B].to());A!==!1&&(K=K.join(A||this.lineSeparator())),y[B]=K}return y},replaceSelection:function(A,y,I){for(var B=[],K=0;K<this.sel.ranges.length;K++)B[K]=A;this.replaceSelections(B,y,I||"+input")},replaceSelections:Es(function(A,y,I){for(var B=[],K=this.sel,H=0;H<K.ranges.length;H++){var ue=K.ranges[H];B[H]={from:ue.from(),to:ue.to(),text:this.splitLines(A[H]),origin:I}}for(var _e=y&&y!="end"&&bc(this,B,y),Ie=B.length-1;Ie>=0;Ie--)T(this,B[Ie]);_e?wu(this,_e):this.cm&&zo(this.cm)}),undo:Es(function(){c(this,"undo")}),redo:Es(function(){c(this,"redo")}),undoSelection:Es(function(){c(this,"undo",!0)}),redoSelection:Es(function(){c(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,y=0,I=0,B=0;B<A.done.length;B++)A.done[B].ranges||++y;for(var K=0;K<A.undone.length;K++)A.undone[K].ranges||++I;return{undo:y,redo:I}},clearHistory:function(){var A=this;this.history=new rc(this.history),da(this,function(y){return y.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:BA(this.history.done),undone:BA(this.history.undone)}},setHistory:function(A){var y=this.history=new rc(this.history);y.done=BA(A.done.slice(0),null,!0),y.undone=BA(A.undone.slice(0),null,!0)},setGutterMarker:Es(function(A,y,I){return xe(this,A,"gutter",function(B){var K=B.gutterMarkers||(B.gutterMarkers={});return K[y]=I,!I&&Ae(K)&&(B.gutterMarkers=null),!0})}),clearGutter:Es(function(A){var y=this;this.iter(function(I){I.gutterMarkers&&I.gutterMarkers[A]&&xe(y,I,"gutter",function(){return I.gutterMarkers[A]=null,Ae(I.gutterMarkers)&&(I.gutterMarkers=null),!0})})}),lineInfo:function(A){var y;if(typeof A=="number"){if(!fn(this,A)||(y=A,A=Dr(this,A),!A))return null}else if(y=Qe(A),y==null)return null;return{line:y,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:Es(function(A,y,I){return xe(this,A,y=="gutter"?"gutter":"class",function(B){var K=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass";if(!B[K])B[K]=I;else{if(we(I).test(B[K]))return!1;B[K]+=" "+I}return!0})}),removeLineClass:Es(function(A,y,I){return xe(this,A,y=="gutter"?"gutter":"class",function(B){var K=y=="text"?"textClass":y=="background"?"bgClass":y=="gutter"?"gutterClass":"wrapClass",H=B[K];if(H)if(I==null)B[K]=null;else{var ue=H.match(we(I));if(!ue)return!1;var _e=ue.index+ue[0].length;B[K]=H.slice(0,ue.index)+(!ue.index||_e==H.length?"":" ")+H.slice(_e)||null}else return!1;return!0})}),addLineWidget:Es(function(A,y,I){return ut(this,A,y,I)}),removeLineWidget:function(A){A.clear()},markText:function(A,y,I){return mt(this,ri(this,A),ri(this,y),I,I&&I.type||"range")},setBookmark:function(A,y){var I={replacedWith:y&&(y.nodeType==null?y.widget:y),insertLeft:y&&y.insertLeft,clearWhenEmpty:!1,shared:y&&y.shared,handleMouseEvents:y&&y.handleMouseEvents};return A=ri(this,A),mt(this,A,A,I,"bookmark")},findMarksAt:function(A){A=ri(this,A);var y=[],I=Dr(this,A.line).markedSpans;if(I)for(var B=0;B<I.length;++B){var K=I[B];(K.from==null||K.from<=A.ch)&&(K.to==null||K.to>=A.ch)&&y.push(K.marker.parent||K.marker)}return y},findMarks:function(A,y,I){A=ri(this,A),y=ri(this,y);var B=[],K=A.line;return this.iter(A.line,y.line+1,function(H){var ue=H.markedSpans;if(ue)for(var _e=0;_e<ue.length;_e++){var Ie=ue[_e];!(Ie.to!=null&&K==A.line&&A.ch>=Ie.to||Ie.from==null&&K!=A.line||Ie.from!=null&&K==y.line&&Ie.from>=y.ch)&&(!I||I(Ie.marker))&&B.push(Ie.marker.parent||Ie.marker)}++K}),B},getAllMarks:function(){var A=[];return this.iter(function(y){var I=y.markedSpans;if(I)for(var B=0;B<I.length;++B)I[B].from!=null&&A.push(I[B].marker)}),A},posFromIndex:function(A){var y,I=this.first,B=this.lineSeparator().length;return this.iter(function(K){var H=K.text.length+B;if(H>A)return y=A,!0;A-=H,++I}),ri(this,un(I,y))},indexFromPos:function(A){A=ri(this,A);var y=A.ch;if(A.line<this.first||A.ch<0)return 0;var I=this.lineSeparator().length;return this.iter(this.first,A.line,function(B){y+=B.text.length+I}),y},copy:function(A){var y=new Vt(Ps(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return y.scrollTop=this.scrollTop,y.scrollLeft=this.scrollLeft,y.sel=this.sel,y.extend=!1,A&&(y.history.undoDepth=this.history.undoDepth,y.setHistory(this.getHistory())),y},linkedDoc:function(A){A||(A={});var y=this.first,I=this.first+this.size;A.from!=null&&A.from>y&&(y=A.from),A.to!=null&&A.to<I&&(I=A.to);var B=new Vt(Ps(this,y,I),A.mode||this.modeOption,y,this.lineSep,this.direction);return A.sharedHist&&(B.history=this.history),(this.linked||(this.linked=[])).push({doc:B,sharedHist:A.sharedHist}),B.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],Ft(B,Pt(this)),B},unlinkDoc:function(A){if(A instanceof Io&&(A=A.doc),this.linked)for(var y=0;y<this.linked.length;++y){var I=this.linked[y];if(I.doc==A){this.linked.splice(y,1),A.unlinkDoc(this),Tt(Pt(this));break}}if(A.history==this.history){var B=[A.id];da(A,function(K){return B.push(K.id)},!0),A.history=new rc(null),A.history.done=BA(this.history.done,B),A.history.undone=BA(this.history.undone,B)}},iterLinkedDocs:function(A){da(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):ir(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Es(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(y){return y.order=null}),this.cm&&Qu(this.cm))})}),Vt.prototype.eachLine=Vt.prototype.iter;var vn=0;function _n(A){var y=this;if(Un(y),!(vt(y,A)||aA(y.display,A))){_t(A),d&&(vn=+new Date);var I=CA(y,A,!0),B=A.dataTransfer.files;if(!(!I||y.isReadOnly()))if(B&&B.length&&window.FileReader&&window.File)for(var K=B.length,H=Array(K),ue=0,_e=function(){++ue==K&&Ki(y,function(){I=ri(y.doc,I);var Wt={from:I,to:I,text:y.doc.splitLines(H.filter(function(xn){return xn!=null}).join(y.doc.lineSeparator())),origin:"paste"};T(y.doc,Wt),wu(y.doc,Ga(ri(y.doc,I),ri(y.doc,Ds(Wt))))})()},Ie=function(Wt,xn){if(y.options.allowDropFileTypes&&Je(y.options.allowDropFileTypes,Wt.type)==-1){_e();return}var Pn=new FileReader;Pn.onerror=function(){return _e()},Pn.onload=function(){var Yn=Pn.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Yn)){_e();return}H[xn]=Yn,_e()},Pn.readAsText(Wt)},Ue=0;Ue<B.length;Ue++)Ie(B[Ue],Ue);else{if(y.state.draggingText&&y.doc.sel.contains(I)>-1){y.state.draggingText(A),setTimeout(function(){return y.display.input.focus()},20);return}try{var ct=A.dataTransfer.getData("Text");if(ct){var xt;if(y.state.draggingText&&!y.state.draggingText.copy&&(xt=y.listSelections()),Xs(y.doc,Ga(I,I)),xt)for(var Ht=0;Ht<xt.length;++Ht)j(y.doc,"",xt[Ht].anchor,xt[Ht].head,"drag");y.replaceSelection(ct,"around","paste"),y.display.input.focus()}}catch{}}}}function mn(A,y){if(d&&(!A.state.draggingText||+new Date-vn<100)){Ar(y);return}if(!(vt(A,y)||aA(A.display,y))&&(y.dataTransfer.setData("Text",A.getSelection()),y.dataTransfer.effectAllowed="copyMove",y.dataTransfer.setDragImage&&!U)){var I=pe("img",null,null,"position: fixed; left: 0; top: 0;");I.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",k&&(I.width=I.height=1,A.display.wrapper.appendChild(I),I._top=I.offsetTop),y.dataTransfer.setDragImage(I,0,0),k&&I.parentNode.removeChild(I)}}function Bn(A,y){var I=CA(A,y);if(I){var B=document.createDocumentFragment();yc(A,I,B),A.display.dragCursor||(A.display.dragCursor=pe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),Pe(A.display.dragCursor,B)}}function Un(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function wn(A){if(document.getElementsByClassName){for(var y=document.getElementsByClassName("CodeMirror"),I=[],B=0;B<y.length;B++){var K=y[B].CodeMirror;K&&I.push(K)}I.length&&I[0].operation(function(){for(var H=0;H<I.length;H++)A(I[H])})}}var kr=!1;function Bi(){kr||($i(),kr=!0)}function $i(){var A;ze(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,wn(Oo)},100))}),ze(window,"blur",function(){return wn(Ho)})}function Oo(A){var y=A.display;y.cachedCharWidth=y.cachedTextHeight=y.cachedPaddingH=null,y.scrollbarsClipped=!1,A.setSize()}for(var Si={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},jo=0;jo<10;jo++)Si[jo+48]=Si[jo+96]=String(jo);for(var No=65;No<=90;No++)Si[No]=String.fromCharCode(No);for(var xo=1;xo<=12;xo++)Si[xo+111]=Si[xo+63235]="F"+xo;var yo={};yo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},yo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},yo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},yo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},yo.default=Y?yo.macDefault:yo.pcDefault;function ka(A){var y=A.split(/-(?!$)/);A=y[y.length-1];for(var I,B,K,H,ue=0;ue<y.length-1;ue++){var _e=y[ue];if(/^(cmd|meta|m)$/i.test(_e))H=!0;else if(/^a(lt)?$/i.test(_e))I=!0;else if(/^(c|ctrl|control)$/i.test(_e))B=!0;else if(/^s(hift)?$/i.test(_e))K=!0;else throw new Error("Unrecognized modifier name: "+_e)}return I&&(A="Alt-"+A),B&&(A="Ctrl-"+A),H&&(A="Cmd-"+A),K&&(A="Shift-"+A),A}function Go(A){var y={};for(var I in A)if(A.hasOwnProperty(I)){var B=A[I];if(/^(name|fallthrough|(de|at)tach)$/.test(I))continue;if(B=="..."){delete A[I];continue}for(var K=Jn(I.split(" "),ka),H=0;H<K.length;H++){var ue=void 0,_e=void 0;H==K.length-1?(_e=K.join(" "),ue=B):(_e=K.slice(0,H+1).join(" "),ue="...");var Ie=y[_e];if(!Ie)y[_e]=ue;else if(Ie!=ue)throw new Error("Inconsistent bindings for "+_e)}delete A[I]}for(var Ue in y)A[Ue]=y[Ue];return A}function ds(A,y,I,B){y=pl(y);var K=y.call?y.call(A,B):y[A];if(K===!1)return"nothing";if(K==="...")return"multi";if(K!=null&&I(K))return"handled";if(y.fallthrough){if(Object.prototype.toString.call(y.fallthrough)!="[object Array]")return ds(A,y.fallthrough,I,B);for(var H=0;H<y.fallthrough.length;H++){var ue=ds(A,y.fallthrough[H],I,B);if(ue)return ue}}}function Wa(A){var y=typeof A=="string"?A:Si[A.keyCode];return y=="Ctrl"||y=="Alt"||y=="Shift"||y=="Mod"}function $u(A,y,I){var B=A;return y.altKey&&B!="Alt"&&(A="Alt-"+A),(he?y.metaKey:y.ctrlKey)&&B!="Ctrl"&&(A="Ctrl-"+A),(he?y.ctrlKey:y.metaKey)&&B!="Mod"&&(A="Cmd-"+A),!I&&y.shiftKey&&B!="Shift"&&(A="Shift-"+A),A}function fl(A,y){if(k&&A.keyCode==34&&A.char)return!1;var I=Si[A.keyCode];return I==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(I=A.code),$u(I,A,y))}function pl(A){return typeof A=="string"?yo[A]:A}function uu(A,y){for(var I=A.doc.sel.ranges,B=[],K=0;K<I.length;K++){for(var H=y(I[K]);B.length&&er(H.from,sr(B).to)<=0;){var ue=B.pop();if(er(ue.from,H.from)<0){H.from=ue.from;break}}B.push(H)}Bo(A,function(){for(var _e=B.length-1;_e>=0;_e--)j(A.doc,"",B[_e].from,B[_e].to,"+delete");zo(A)})}function OA(A,y,I){var B=Et(A.text,y+I,I);return B<0||B>A.text.length?null:B}function IA(A,y,I){var B=OA(A,y.ch,I);return B==null?null:new un(y.line,B,I<0?"after":"before")}function Vu(A,y,I,B,K){if(A){y.doc.direction=="rtl"&&(K=-K);var H=ve(I,y.doc.direction);if(H){var ue=K<0?sr(H):H[0],_e=K<0==(ue.level==1),Ie=_e?"after":"before",Ue;if(ue.level>0||y.doc.direction=="rtl"){var ct=tl(y,I);Ue=K<0?I.text.length-1:0;var xt=Ol(y,ct,Ue).top;Ue=Yt(function(Ht){return Ol(y,ct,Ht).top==xt},K<0==(ue.level==1)?ue.from:ue.to-1,Ue),Ie=="before"&&(Ue=OA(I,Ue,1))}else Ue=K<0?ue.to:ue.from;return new un(B,Ue,Ie)}}return new un(B,K<0?I.text.length:0,K<0?"before":"after")}function Js(A,y,I,B){var K=ve(y,A.doc.direction);if(!K)return IA(y,I,B);I.ch>=y.text.length?(I.ch=y.text.length,I.sticky="before"):I.ch<=0&&(I.ch=0,I.sticky="after");var H=Ee(K,I.ch,I.sticky),ue=K[H];if(A.doc.direction=="ltr"&&ue.level%2==0&&(B>0?ue.to>I.ch:ue.from<I.ch))return IA(y,I,B);var _e=function(Xn,_r){return OA(y,Xn instanceof un?Xn.ch:Xn,_r)},Ie,Ue=function(Xn){return A.options.lineWrapping?(Ie=Ie||tl(A,y),Vo(A,y,Ie,Xn)):{begin:0,end:y.text.length}},ct=Ue(I.sticky=="before"?_e(I,-1):I.ch);if(A.doc.direction=="rtl"||ue.level==1){var xt=ue.level==1==B<0,Ht=_e(I,xt?1:-1);if(Ht!=null&&(xt?Ht<=ue.to&&Ht<=ct.end:Ht>=ue.from&&Ht>=ct.begin)){var Wt=xt?"before":"after";return new un(I.line,Ht,Wt)}}var xn=function(Xn,_r,ur){for(var Fr=function(ko,qa){return qa?new un(I.line,_e(ko,1),"before"):new un(I.line,ko,"after")};Xn>=0&&Xn<K.length;Xn+=_r){var ai=K[Xn],Gr=_r>0==(ai.level!=1),Xi=Gr?ur.begin:_e(ur.end,-1);if(ai.from<=Xi&&Xi<ai.to||(Xi=Gr?ai.from:_e(ai.to,-1),ur.begin<=Xi&&Xi<ur.end))return Fr(Xi,Gr)}},Pn=xn(H+B,B,ct);if(Pn)return Pn;var Yn=B>0?ct.end:_e(ct.begin,-1);return Yn!=null&&!(B>0&&Yn==y.text.length)&&(Pn=xn(B>0?0:K.length-1,B,Ue(Yn)),Pn)?Pn:null}var ml={selectAll:Ql,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),Ut)},killLine:function(A){return uu(A,function(y){if(y.empty()){var I=Dr(A.doc,y.head.line).text.length;return y.head.ch==I&&y.head.line<A.lastLine()?{from:y.head,to:un(y.head.line+1,0)}:{from:y.head,to:un(y.head.line,I)}}else return{from:y.from(),to:y.to()}})},deleteLine:function(A){return uu(A,function(y){return{from:un(y.from().line,0),to:ri(A.doc,un(y.to().line+1,0))}})},delLineLeft:function(A){return uu(A,function(y){return{from:un(y.from().line,0),to:y.from()}})},delWrappedLineLeft:function(A){return uu(A,function(y){var I=A.charCoords(y.head,"div").top+5,B=A.coordsChar({left:0,top:I},"div");return{from:B,to:y.from()}})},delWrappedLineRight:function(A){return uu(A,function(y){var I=A.charCoords(y.head,"div").top+5,B=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:I},"div");return{from:y.from(),to:B}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(un(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(un(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(y){return sa(A,y.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(y){return xs(A,y.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(y){return Pl(A,y.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(y){var I=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:I},"div")},Nt)},goLineLeft:function(A){return A.extendSelectionsBy(function(y){var I=A.cursorCoords(y.head,"div").top+5;return A.coordsChar({left:0,top:I},"div")},Nt)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(y){var I=A.cursorCoords(y.head,"div").top+5,B=A.coordsChar({left:0,top:I},"div");return B.ch<A.getLine(B.line).search(/\S/)?xs(A,y.head):B},Nt)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var y=[],I=A.listSelections(),B=A.options.tabSize,K=0;K<I.length;K++){var H=I[K].from(),ue=Te(A.getLine(H.line),H.ch,B);y.push(Rr(B-ue%B))}A.replaceSelections(y)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return Bo(A,function(){for(var y=A.listSelections(),I=[],B=0;B<y.length;B++)if(y[B].empty()){var K=y[B].head,H=Dr(A.doc,K.line).text;if(H){if(K.ch==H.length&&(K=new un(K.line,K.ch-1)),K.ch>0)K=new un(K.line,K.ch+1),A.replaceRange(H.charAt(K.ch-1)+H.charAt(K.ch-2),un(K.line,K.ch-2),K,"+transpose");else if(K.line>A.doc.first){var ue=Dr(A.doc,K.line-1).text;ue&&(K=new un(K.line,1),A.replaceRange(H.charAt(0)+A.doc.lineSeparator()+ue.charAt(ue.length-1),un(K.line-1,ue.length-1),K,"+transpose"))}}I.push(new bo(K,K))}A.setSelections(I)})},newlineAndIndent:function(A){return Bo(A,function(){for(var y=A.listSelections(),I=y.length-1;I>=0;I--)A.replaceRange(A.doc.lineSeparator(),y[I].anchor,y[I].head,"+input");y=A.listSelections();for(var B=0;B<y.length;B++)A.indentLine(y[B].from().line,null,!0);zo(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function sa(A,y){var I=Dr(A.doc,y),B=gr(I);return B!=I&&(y=Qe(B)),Vu(!0,A,B,y,1)}function Pl(A,y){var I=Dr(A.doc,y),B=Ir(I);return B!=I&&(y=Qe(B)),Vu(!0,A,I,y,-1)}function xs(A,y){var I=sa(A,y.line),B=Dr(A.doc,I.line),K=ve(B,A.doc.direction);if(!K||K[0].level==0){var H=Math.max(I.ch,B.text.search(/\S/)),ue=y.line==I.line&&y.ch<=H&&y.ch;return un(I.line,ue?0:H,I.sticky)}return I}function qs(A,y,I){if(typeof y=="string"&&(y=ml[y],!y))return!1;A.display.input.ensurePolled();var B=A.display.shift,K=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),I&&(A.display.shift=!1),K=y(A)!=dt}finally{A.display.shift=B,A.state.suppressEdits=!1}return K}function nl(A,y,I){for(var B=0;B<A.state.keyMaps.length;B++){var K=ds(y,A.state.keyMaps[B],I,A);if(K)return K}return A.options.extraKeys&&ds(y,A.options.extraKeys,I,A)||ds(y,A.options.keyMap,I,A)}var rl=new Se;function Md(A,y,I,B){var K=A.state.keySeq;if(K){if(Wa(y))return"handled";if(/\'$/.test(y)?A.state.keySeq=null:rl.set(50,function(){A.state.keySeq==K&&(A.state.keySeq=null,A.display.input.reset())}),Bh(A,K+" "+y,I,B))return!0}return Bh(A,y,I,B)}function Bh(A,y,I,B){var K=nl(A,y,B);return K=="multi"&&(A.state.keySeq=y),K=="handled"&&Zs(A,"keyHandled",A,y,I),(K=="handled"||K=="multi")&&(_t(I),bA(A)),!!K}function Oh(A,y){var I=fl(y,!0);return I?y.shiftKey&&!A.state.keySeq?Md(A,"Shift-"+I,y,function(B){return qs(A,B,!0)})||Md(A,I,y,function(B){if(typeof B=="string"?/^go[A-Z]/.test(B):B.motion)return qs(A,B)}):Md(A,I,y,function(B){return qs(A,B)}):!1}function Sd(A,y,I){return Md(A,"'"+I+"'",y,function(B){return qs(A,B,!0)})}var ic=null;function Ih(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&(y.curOp.focus=ht(Ct(y)),!vt(y,A))){d&&g<11&&A.keyCode==27&&(A.returnValue=!1);var I=A.keyCode;y.display.shift=I==16||A.shiftKey;var B=Oh(y,A);k&&(ic=B?I:null,!B&&I==88&&!Sa&&(Y?A.metaKey:A.ctrlKey)&&y.replaceSelection("",null,"cut")),i&&!Y&&!B&&I==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),I==18&&!/\bCodeMirror-crosshair\b/.test(y.display.lineDiv.className)&&Ta(y)}}function Ta(A){var y=A.display.lineDiv;De(y,"CodeMirror-crosshair");function I(B){(B.keyCode==18||!B.altKey)&&(fe(y,"CodeMirror-crosshair"),pt(document,"keyup",I),pt(document,"mouseover",I))}ze(document,"keyup",I),ze(document,"mouseover",I)}function Au(A){A.keyCode==16&&(this.doc.sel.shift=!1),vt(this,A)}function Ed(A){var y=this;if(!(A.target&&A.target!=y.display.input.getField())&&!(aA(y.display,A)||vt(y,A)||A.ctrlKey&&!A.altKey||Y&&A.metaKey)){var I=A.keyCode,B=A.charCode;if(k&&I==ic){ic=null,_t(A);return}if(!(k&&(!A.which||A.which<10)&&Oh(y,A))){var K=String.fromCharCode(B??I);K!="\b"&&(Sd(y,A,K)||y.display.input.onKeyPress(A))}}}var _p=400,Ec=function(A,y,I){this.time=A,this.pos=y,this.button=I};Ec.prototype.compare=function(A,y,I){return this.time+_p>A&&er(y,this.pos)==0&&I==this.button};var kA,Qa;function Cp(A,y){var I=+new Date;return Qa&&Qa.compare(I,A,y)?(kA=Qa=null,"triple"):kA&&kA.compare(I,A,y)?(Qa=new Ec(I,A,y),kA=null,"double"):(kA=new Ec(I,A,y),Qa=null,"single")}function kh(A){var y=this,I=y.display;if(!(vt(y,A)||I.activeTouch&&I.input.supportsTouch())){if(I.input.ensurePolled(),I.shift=A.shiftKey,aA(I,A)){b||(I.scroller.draggable=!1,setTimeout(function(){return I.scroller.draggable=!0},100));return}if(!sh(y,A)){var B=CA(y,A),K=rn(A),H=B?Cp(B,K):"single";Lt(y).focus(),K==1&&y.state.selectingText&&y.state.selectingText(A),!(B&&bp(y,K,B,H,A))&&(K==1?B?Bc(y,B,H,A):wr(A)==I.scroller&&_t(A):K==2?(B&&wc(y.doc,B),setTimeout(function(){return I.input.focus()},20)):K==3&&(de?y.display.input.onContextMenu(A):Wc(y)))}}}function bp(A,y,I,B,K){var H="Click";return B=="double"?H="Double"+H:B=="triple"&&(H="Triple"+H),H=(y==1?"Left":y==2?"Middle":"Right")+H,Md(A,$u(H,K),K,function(ue){if(typeof ue=="string"&&(ue=ml[ue]),!ue)return!1;var _e=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),_e=ue(A,I)!=dt}finally{A.state.suppressEdits=!1}return _e})}function oh(A,y,I){var B=A.getOption("configureMouse"),K=B?B(A,y,I):{};if(K.unit==null){var H=J?I.shiftKey&&I.metaKey:I.altKey;K.unit=H?"rectangle":y=="single"?"char":y=="double"?"word":"line"}return(K.extend==null||A.doc.extend)&&(K.extend=A.doc.extend||I.shiftKey),K.addNew==null&&(K.addNew=Y?I.metaKey:I.ctrlKey),K.moveOnDrag==null&&(K.moveOnDrag=!(Y?I.altKey:I.ctrlKey)),K}function Bc(A,y,I,B){d?setTimeout(Kt(HA,A),0):A.curOp.focus=ht(Ct(A));var K=oh(A,I,B),H=A.doc.sel,ue;A.options.dragDrop&&Fn&&!A.isReadOnly()&&I=="single"&&(ue=H.contains(y))>-1&&(er((ue=H.ranges[ue]).from(),y)<0||y.xRel>0)&&(er(ue.to(),y)>0||y.xRel<0)?um(A,B,y,K):Th(A,B,y,K)}function um(A,y,I,B){var K=A.display,H=!1,ue=Ki(A,function(Ue){b&&(K.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:Wc(A)),pt(K.wrapper.ownerDocument,"mouseup",ue),pt(K.wrapper.ownerDocument,"mousemove",_e),pt(K.scroller,"dragstart",Ie),pt(K.scroller,"drop",ue),H||(_t(Ue),B.addNew||wc(A.doc,I,null,null,B.extend),b&&!U||d&&g==9?setTimeout(function(){K.wrapper.ownerDocument.body.focus({preventScroll:!0}),K.input.focus()},20):K.input.focus())}),_e=function(Ue){H=H||Math.abs(y.clientX-Ue.clientX)+Math.abs(y.clientY-Ue.clientY)>=10},Ie=function(){return H=!0};b&&(K.scroller.draggable=!0),A.state.draggingText=ue,ue.copy=!B.moveOnDrag,ze(K.wrapper.ownerDocument,"mouseup",ue),ze(K.wrapper.ownerDocument,"mousemove",_e),ze(K.scroller,"dragstart",Ie),ze(K.scroller,"drop",ue),A.state.delayingBlurEvent=!0,setTimeout(function(){return K.input.focus()},20),K.scroller.dragDrop&&K.scroller.dragDrop()}function oc(A,y,I){if(I=="char")return new bo(y,y);if(I=="word")return A.findWordAt(y);if(I=="line")return new bo(un(y.line,0),ri(A.doc,un(y.line+1,0)));var B=I(A,y);return new bo(B.from,B.to)}function Th(A,y,I,B){d&&Wc(A);var K=A.display,H=A.doc;_t(y);var ue,_e,Ie=H.sel,Ue=Ie.ranges;if(B.addNew&&!B.extend?(_e=H.sel.contains(I),_e>-1?ue=Ue[_e]:ue=new bo(I,I)):(ue=H.sel.primary(),_e=H.sel.primIndex),B.unit=="rectangle")B.addNew||(ue=new bo(I,I)),I=CA(A,y,!0,!0),_e=-1;else{var ct=oc(A,I,B.unit);B.extend?ue=Qs(ue,ct.anchor,ct.head,B.extend):ue=ct}B.addNew?_e==-1?(_e=Ue.length,_a(H,Cu(A,Ue.concat([ue]),_e),{scroll:!1,origin:"*mouse"})):Ue.length>1&&Ue[_e].empty()&&B.unit=="char"&&!B.extend?(_a(H,Cu(A,Ue.slice(0,_e).concat(Ue.slice(_e+1)),0),{scroll:!1,origin:"*mouse"}),Ie=H.sel):hl(H,_e,ue,en):(_e=0,_a(H,new Os([ue],0),en),Ie=H.sel);var xt=I;function Ht(ur){if(er(xt,ur)!=0)if(xt=ur,B.unit=="rectangle"){for(var Fr=[],ai=A.options.tabSize,Gr=Te(Dr(H,I.line).text,I.ch,ai),Xi=Te(Dr(H,ur.line).text,ur.ch,ai),ko=Math.min(Gr,Xi),qa=Math.max(Gr,Xi),aa=Math.min(I.line,ur.line),Ca=Math.min(A.lastLine(),Math.max(I.line,ur.line));aa<=Ca;aa++){var ba=Dr(H,aa).text,Pa=yn(ba,ko,ai);ko==qa?Fr.push(new bo(un(aa,Pa),un(aa,Pa))):ba.length>Pa&&Fr.push(new bo(un(aa,Pa),un(aa,yn(ba,qa,ai))))}Fr.length||Fr.push(new bo(I,I)),_a(H,Cu(A,Ie.ranges.slice(0,_e).concat(Fr),_e),{origin:"*mouse",scroll:!1}),A.scrollIntoView(ur)}else{var Yl=ue,Ya=oc(A,ur,B.unit),xa=Yl.anchor,hs;er(Ya.anchor,xa)>0?(hs=Ya.head,xa=Ns(Yl.from(),Ya.anchor)):(hs=Ya.anchor,xa=_s(Yl.to(),Ya.head));var gi=Ie.ranges.slice(0);gi[_e]=Bd(A,new bo(ri(H,xa),hs)),_a(H,Cu(A,gi,_e),en)}}var Wt=K.wrapper.getBoundingClientRect(),xn=0;function Pn(ur){var Fr=++xn,ai=CA(A,ur,!0,B.unit=="rectangle");if(ai)if(er(ai,xt)!=0){A.curOp.focus=ht(Ct(A)),Ht(ai);var Gr=Fu(K,H);(ai.line>=Gr.to||ai.line<Gr.from)&&setTimeout(Ki(A,function(){xn==Fr&&Pn(ur)}),150)}else{var Xi=ur.clientY<Wt.top?-20:ur.clientY>Wt.bottom?20:0;Xi&&setTimeout(Ki(A,function(){xn==Fr&&(K.scroller.scrollTop+=Xi,Pn(ur))}),50)}}function Yn(ur){A.state.selectingText=!1,xn=1/0,ur&&(_t(ur),K.input.focus()),pt(K.wrapper.ownerDocument,"mousemove",Xn),pt(K.wrapper.ownerDocument,"mouseup",_r),H.history.lastSelOrigin=null}var Xn=Ki(A,function(ur){ur.buttons===0||!rn(ur)?Yn(ur):Pn(ur)}),_r=Ki(A,Yn);A.state.selectingText=_r,ze(K.wrapper.ownerDocument,"mousemove",Xn),ze(K.wrapper.ownerDocument,"mouseup",_r)}function Bd(A,y){var I=y.anchor,B=y.head,K=Dr(A.doc,I.line);if(er(I,B)==0&&I.sticky==B.sticky)return y;var H=ve(K);if(!H)return y;var ue=Ee(H,I.ch,I.sticky),_e=H[ue];if(_e.from!=I.ch&&_e.to!=I.ch)return y;var Ie=ue+(_e.from==I.ch==(_e.level!=1)?0:1);if(Ie==0||Ie==H.length)return y;var Ue;if(B.line!=I.line)Ue=(B.line-I.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var ct=Ee(H,B.ch,B.sticky),xt=ct-ue||(B.ch-I.ch)*(_e.level==1?-1:1);ct==Ie-1||ct==Ie?Ue=xt<0:Ue=xt>0}var Ht=H[Ie+(Ue?-1:0)],Wt=Ue==(Ht.level==1),xn=Wt?Ht.from:Ht.to,Pn=Wt?"after":"before";return I.ch==xn&&I.sticky==Pn?y:new bo(new un(I.line,xn,Pn),B)}function xp(A,y,I,B){var K,H;if(y.touches)K=y.touches[0].clientX,H=y.touches[0].clientY;else try{K=y.clientX,H=y.clientY}catch{return!1}if(K>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;B&&_t(y);var ue=A.display,_e=ue.lineDiv.getBoundingClientRect();if(H>_e.bottom||!tn(A,I))return Sn(y);H-=_e.top-ue.viewOffset;for(var Ie=0;Ie<A.display.gutterSpecs.length;++Ie){var Ue=ue.gutters.childNodes[Ie];if(Ue&&Ue.getBoundingClientRect().right>=K){var ct=bt(A.doc,H),xt=A.display.gutterSpecs[Ie];return Bt(A,I,A,ct,xt.className,y),Sn(y)}}}function sh(A,y){return xp(A,y,"gutterClick",!0)}function Uf(A,y){aA(A.display,y)||zf(A,y)||vt(A,y,"contextmenu")||de||A.display.input.onContextMenu(y)}function zf(A,y){return tn(A,"gutterContextMenu")?xp(A,y,"gutterContextMenu",!1):!1}function wp(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),pc(A)}var Od={toString:function(){return"CodeMirror.Init"}},af={},ql={};function Rl(A){var y=A.optionHandlers;function I(B,K,H,ue){A.defaults[B]=K,H&&(y[B]=ue?function(_e,Ie,Ue){Ue!=Od&&H(_e,Ie,Ue)}:H)}A.defineOption=I,A.Init=Od,I("value","",function(B,K){return B.setValue(K)},!0),I("mode",null,function(B,K){B.doc.modeOption=K,nh(B)},!0),I("indentUnit",2,nh,!0),I("indentWithTabs",!1),I("smartIndent",!0),I("tabSize",4,function(B){SA(B),pc(B),Tl(B)},!0),I("lineSeparator",null,function(B,K){if(B.doc.lineSep=K,!!K){var H=[],ue=B.doc.first;B.doc.iter(function(Ie){for(var Ue=0;;){var ct=Ie.text.indexOf(K,Ue);if(ct==-1)break;Ue=ct+K.length,H.push(un(ue,ct))}ue++});for(var _e=H.length-1;_e>=0;_e--)j(B.doc,K,H[_e],un(H[_e].line,H[_e].ch+K.length))}}),I("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(B,K,H){B.state.specialChars=new RegExp(K.source+(K.test("	")?"":"|	"),"g"),H!=Od&&B.refresh()}),I("specialCharPlaceholder",Ru,function(B){return B.refresh()},!0),I("electricChars",!0),I("inputStyle",X?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),I("spellcheck",!1,function(B,K){return B.getInputField().spellcheck=K},!0),I("autocorrect",!1,function(B,K){return B.getInputField().autocorrect=K},!0),I("autocapitalize",!1,function(B,K){return B.getInputField().autocapitalize=K},!0),I("rtlMoveVisually",!N),I("wholeLineUpdateBefore",!0),I("theme","default",function(B){wp(B),Gl(B)},!0),I("keyMap","default",function(B,K,H){var ue=pl(K),_e=H!=Od&&pl(H);_e&&_e.detach&&_e.detach(B,ue),ue.attach&&ue.attach(B,_e||null)}),I("extraKeys",null),I("configureMouse",null),I("lineWrapping",!1,jf,!0),I("gutters",[],function(B,K){B.display.gutterSpecs=Mi(K,B.options.lineNumbers),Gl(B)},!0),I("fixedGutter",!0,function(B,K){B.display.gutters.style.left=K?Uo(B.display)+"px":"0",B.refresh()},!0),I("coverGutterNextToScrollbar",!1,function(B){return zu(B)},!0),I("scrollbarStyle","native",function(B){eh(B),zu(B),B.display.scrollbars.setScrollTop(B.doc.scrollTop),B.display.scrollbars.setScrollLeft(B.doc.scrollLeft)},!0),I("lineNumbers",!1,function(B,K){B.display.gutterSpecs=Mi(B.options.gutters,K),Gl(B)},!0),I("firstLineNumber",1,Gl,!0),I("lineNumberFormatter",function(B){return B},Gl,!0),I("showCursorWhenSelecting",!1,ja,!0),I("resetSelectionOnContextMenu",!0),I("lineWiseCopyCut",!0),I("pasteLinesPerSelection",!0),I("selectionsMayTouch",!1),I("readOnly",!1,function(B,K){K=="nocursor"&&(Ho(B),B.display.input.blur()),B.display.input.readOnlyChanged(K)}),I("screenReaderLabel",null,function(B,K){K=K===""?null:K,B.display.input.screenReaderLabelChanged(K)}),I("disableInput",!1,function(B,K){K||B.display.input.reset()},!0),I("dragDrop",!0,Am),I("allowDropFileTypes",null),I("cursorBlinkRate",530),I("cursorScrollMargin",0),I("cursorHeight",1,ja,!0),I("singleCursorHeightPerLine",!0,ja,!0),I("workTime",100),I("workDelay",100),I("flattenSpans",!0,SA,!0),I("addModeClass",!1,SA,!0),I("pollInterval",100),I("undoDepth",200,function(B,K){return B.doc.history.undoDepth=K}),I("historyEventDelay",1250),I("viewportMargin",10,function(B){return B.refresh()},!0),I("maxHighlightLength",1e4,SA,!0),I("moveInputWithCursor",!0,function(B,K){K||B.display.input.resetPosition()}),I("tabindex",null,function(B,K){return B.display.input.getField().tabIndex=K||""}),I("autofocus",null),I("direction","ltr",function(B,K){return B.doc.setDirection(K)},!0),I("phrases",null)}function Am(A,y,I){var B=I&&I!=Od;if(!y!=!B){var K=A.display.dragFunctions,H=y?ze:pt;H(A.display.scroller,"dragstart",K.start),H(A.display.scroller,"dragenter",K.enter),H(A.display.scroller,"dragover",K.over),H(A.display.scroller,"dragleave",K.leave),H(A.display.scroller,"drop",K.drop)}}function jf(A){A.options.lineWrapping?(De(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(fe(A.display.wrapper,"CodeMirror-wrap"),ya(A)),$A(A),Tl(A),pc(A),setTimeout(function(){return zu(A)},100)}function Io(A,y){var I=this;if(!(this instanceof Io))return new Io(A,y);this.options=y=y?Fe(y):{},Fe(af,y,!1);var B=y.value;typeof B=="string"?B=new Vt(B,y.mode,null,y.lineSeparator,y.direction):y.mode&&(B.modeOption=y.mode),this.doc=B;var K=new Io.inputStyles[y.inputStyle](this),H=this.display=new bd(A,B,K,y);H.wrapper.CodeMirror=this,wp(this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),eh(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Se,keySeq:null,specialChars:null},y.autofocus&&!X&&H.input.focus(),d&&g<11&&setTimeout(function(){return I.display.input.reset(!0)},20),Hu(this),Bi(),Nu(this),this.curOp.forceUpdate=!0,hr(this,B),y.autofocus&&!X||this.hasFocus()?setTimeout(function(){I.hasFocus()&&!I.state.focused&&Xd(I)},20):Ho(this);for(var ue in ql)ql.hasOwnProperty(ue)&&ql[ue](this,y[ue],Od);_d(this),y.finishInit&&y.finishInit(this);for(var _e=0;_e<lf.length;++_e)lf[_e](this);Gu(this),b&&y.lineWrapping&&getComputedStyle(H.lineDiv).textRendering=="optimizelegibility"&&(H.lineDiv.style.textRendering="auto")}Io.defaults=af,Io.optionHandlers=ql;function Hu(A){var y=A.display;ze(y.scroller,"mousedown",Ki(A,kh)),d&&g<11?ze(y.scroller,"dblclick",Ki(A,function(Ie){if(!vt(A,Ie)){var Ue=CA(A,Ie);if(!(!Ue||sh(A,Ie)||aA(A.display,Ie))){_t(Ie);var ct=A.findWordAt(Ue);wc(A.doc,ct.anchor,ct.head)}}})):ze(y.scroller,"dblclick",function(Ie){return vt(A,Ie)||_t(Ie)}),ze(y.scroller,"contextmenu",function(Ie){return Uf(A,Ie)}),ze(y.input.getField(),"contextmenu",function(Ie){y.scroller.contains(Ie.target)||Uf(A,Ie)});var I,B={end:0};function K(){y.activeTouch&&(I=setTimeout(function(){return y.activeTouch=null},1e3),B=y.activeTouch,B.end=+new Date)}function H(Ie){if(Ie.touches.length!=1)return!1;var Ue=Ie.touches[0];return Ue.radiusX<=1&&Ue.radiusY<=1}function ue(Ie,Ue){if(Ue.left==null)return!0;var ct=Ue.left-Ie.left,xt=Ue.top-Ie.top;return ct*ct+xt*xt>20*20}ze(y.scroller,"touchstart",function(Ie){if(!vt(A,Ie)&&!H(Ie)&&!sh(A,Ie)){y.input.ensurePolled(),clearTimeout(I);var Ue=+new Date;y.activeTouch={start:Ue,moved:!1,prev:Ue-B.end<=300?B:null},Ie.touches.length==1&&(y.activeTouch.left=Ie.touches[0].pageX,y.activeTouch.top=Ie.touches[0].pageY)}}),ze(y.scroller,"touchmove",function(){y.activeTouch&&(y.activeTouch.moved=!0)}),ze(y.scroller,"touchend",function(Ie){var Ue=y.activeTouch;if(Ue&&!aA(y,Ie)&&Ue.left!=null&&!Ue.moved&&new Date-Ue.start<300){var ct=A.coordsChar(y.activeTouch,"page"),xt;!Ue.prev||ue(Ue,Ue.prev)?xt=new bo(ct,ct):!Ue.prev.prev||ue(Ue,Ue.prev.prev)?xt=A.findWordAt(ct):xt=new bo(un(ct.line,0),ri(A.doc,un(ct.line+1,0))),A.setSelection(xt.anchor,xt.head),A.focus(),_t(Ie)}K()}),ze(y.scroller,"touchcancel",K),ze(y.scroller,"scroll",function(){y.scroller.clientHeight&&(Uu(A,y.scroller.scrollTop),Nl(A,y.scroller.scrollLeft,!0),Bt(A,"scroll",A))}),ze(y.scroller,"mousewheel",function(Ie){return Cc(A,Ie)}),ze(y.scroller,"DOMMouseScroll",function(Ie){return Cc(A,Ie)}),ze(y.wrapper,"scroll",function(){return y.wrapper.scrollTop=y.wrapper.scrollLeft=0}),y.dragFunctions={enter:function(Ie){vt(A,Ie)||Ar(Ie)},over:function(Ie){vt(A,Ie)||(Bn(A,Ie),Ar(Ie))},start:function(Ie){return mn(A,Ie)},drop:Ki(A,_n),leave:function(Ie){vt(A,Ie)||Un(A)}};var _e=y.input.getField();ze(_e,"keyup",function(Ie){return Au.call(A,Ie)}),ze(_e,"keydown",Ki(A,Ih)),ze(_e,"keypress",Ki(A,Ed)),ze(_e,"focus",function(Ie){return Xd(A,Ie)}),ze(_e,"blur",function(Ie){return Ho(A,Ie)})}var lf=[];Io.defineInitHook=function(A){return lf.push(A)};function Id(A,y,I,B){var K=A.doc,H;I==null&&(I="add"),I=="smart"&&(K.mode.indent?H=Lr(A,y).state:I="prev");var ue=A.options.tabSize,_e=Dr(K,y),Ie=Te(_e.text,null,ue);_e.stateAfter&&(_e.stateAfter=null);var Ue=_e.text.match(/^\s*/)[0],ct;if(!B&&!/\S/.test(_e.text))ct=0,I="not";else if(I=="smart"&&(ct=K.mode.indent(H,_e.text.slice(Ue.length),_e.text),ct==dt||ct>150)){if(!B)return;I="prev"}I=="prev"?y>K.first?ct=Te(Dr(K,y-1).text,null,ue):ct=0:I=="add"?ct=Ie+A.options.indentUnit:I=="subtract"?ct=Ie-A.options.indentUnit:typeof I=="number"&&(ct=Ie+I),ct=Math.max(0,ct);var xt="",Ht=0;if(A.options.indentWithTabs)for(var Wt=Math.floor(ct/ue);Wt;--Wt)Ht+=ue,xt+="	";if(Ht<ct&&(xt+=Rr(ct-Ht)),xt!=Ue)return j(K,xt,un(y,0),un(y,Ue.length),"+input"),_e.stateAfter=null,!0;for(var xn=0;xn<K.sel.ranges.length;xn++){var Pn=K.sel.ranges[xn];if(Pn.head.line==y&&Pn.head.ch<Ue.length){var Yn=un(y,Ue.length);hl(K,xn,new bo(Yn,Yn));break}}}var TA=null;function Ph(A){TA=A}function Mp(A,y,I,B,K){var H=A.doc;A.display.shift=!1,B||(B=H.sel);var ue=+new Date-200,_e=K=="paste"||A.state.pasteIncoming>ue,Ie=ir(y),Ue=null;if(_e&&B.ranges.length>1)if(TA&&TA.text.join(`
`)==y){if(B.ranges.length%TA.text.length==0){Ue=[];for(var ct=0;ct<TA.text.length;ct++)Ue.push(H.splitLines(TA.text[ct]))}}else Ie.length==B.ranges.length&&A.options.pasteLinesPerSelection&&(Ue=Jn(Ie,function(Xn){return[Xn]}));for(var xt=A.curOp.updateInput,Ht=B.ranges.length-1;Ht>=0;Ht--){var Wt=B.ranges[Ht],xn=Wt.from(),Pn=Wt.to();Wt.empty()&&(I&&I>0?xn=un(xn.line,xn.ch-I):A.state.overwrite&&!_e?Pn=un(Pn.line,Math.min(Dr(H,Pn.line).text.length,Pn.ch+sr(Ie).length)):_e&&TA&&TA.lineWise&&TA.text.join(`
`)==Ie.join(`
`)&&(xn=Pn=un(xn.line,0)));var Yn={from:xn,to:Pn,text:Ue?Ue[Ht%Ue.length]:Ie,origin:K||(_e?"paste":A.state.cutIncoming>ue?"cut":"+input")};T(A.doc,Yn),Zs(A,"inputRead",A,Yn)}y&&!_e&&uf(A,y),zo(A),A.curOp.updateInput<2&&(A.curOp.updateInput=xt),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function Oc(A,y){var I=A.clipboardData&&A.clipboardData.getData("Text");if(I)return A.preventDefault(),!y.isReadOnly()&&!y.options.disableInput&&y.hasFocus()&&Bo(y,function(){return Mp(y,I,0,null,"paste")}),!0}function uf(A,y){if(!(!A.options.electricChars||!A.options.smartIndent))for(var I=A.doc.sel,B=I.ranges.length-1;B>=0;B--){var K=I.ranges[B];if(!(K.head.ch>100||B&&I.ranges[B-1].head.line==K.head.line)){var H=A.getModeAt(K.head),ue=!1;if(H.electricChars){for(var _e=0;_e<H.electricChars.length;_e++)if(y.indexOf(H.electricChars.charAt(_e))>-1){ue=Id(A,K.head.line,"smart");break}}else H.electricInput&&H.electricInput.test(Dr(A.doc,K.head.line).text.slice(0,K.head.ch))&&(ue=Id(A,K.head.line,"smart"));ue&&Zs(A,"electricInput",A,K.head.line)}}}function Af(A){for(var y=[],I=[],B=0;B<A.doc.sel.ranges.length;B++){var K=A.doc.sel.ranges[B].head.line,H={anchor:un(K,0),head:un(K+1,0)};I.push(H),y.push(A.getRange(H.anchor,H.head))}return{text:y,ranges:I}}function ah(A,y,I,B){A.setAttribute("autocorrect",I?"on":"off"),A.setAttribute("autocapitalize",B?"on":"off"),A.setAttribute("spellcheck",!!y)}function kd(){var A=pe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),y=pe("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?A.style.width="1000px":A.setAttribute("wrap","off"),Q&&(A.style.border="1px solid black"),y}function Hc(A){var y=A.optionHandlers,I=A.helpers={};A.prototype={constructor:A,focus:function(){Lt(this).focus(),this.display.input.focus()},setOption:function(B,K){var H=this.options,ue=H[B];H[B]==K&&B!="mode"||(H[B]=K,y.hasOwnProperty(B)&&Ki(this,y[B])(this,K,ue),Bt(this,"optionChange",this,B))},getOption:function(B){return this.options[B]},getDoc:function(){return this.doc},addKeyMap:function(B,K){this.state.keyMaps[K?"push":"unshift"](pl(B))},removeKeyMap:function(B){for(var K=this.state.keyMaps,H=0;H<K.length;++H)if(K[H]==B||K[H].name==B)return K.splice(H,1),!0},addOverlay:$r(function(B,K){var H=B.token?B:A.getMode(this.options,B);if(H.startState)throw new Error("Overlays may not be stateful.");mr(this.state.overlays,{mode:H,modeSpec:B,opaque:K&&K.opaque,priority:K&&K.priority||0},function(ue){return ue.priority}),this.state.modeGen++,Tl(this)}),removeOverlay:$r(function(B){for(var K=this.state.overlays,H=0;H<K.length;++H){var ue=K[H].modeSpec;if(ue==B||typeof B=="string"&&ue.name==B){K.splice(H,1),this.state.modeGen++,Tl(this);return}}}),indentLine:$r(function(B,K,H){typeof K!="string"&&typeof K!="number"&&(K==null?K=this.options.smartIndent?"smart":"prev":K=K?"add":"subtract"),fn(this.doc,B)&&Id(this,B,K,H)}),indentSelection:$r(function(B){for(var K=this.doc.sel.ranges,H=-1,ue=0;ue<K.length;ue++){var _e=K[ue];if(_e.empty())_e.head.line>H&&(Id(this,_e.head.line,B,!0),H=_e.head.line,ue==this.doc.sel.primIndex&&zo(this));else{var Ie=_e.from(),Ue=_e.to(),ct=Math.max(H,Ie.line);H=Math.min(this.lastLine(),Ue.line-(Ue.ch?0:1))+1;for(var xt=ct;xt<H;++xt)Id(this,xt,B);var Ht=this.doc.sel.ranges;Ie.ch==0&&K.length==Ht.length&&Ht[ue].from().ch>0&&hl(this.doc,ue,new bo(Ie,Ht[ue].to()),Ut)}}}),getTokenAt:function(B,K){return Gs(this,B,K)},getLineTokens:function(B,K){return Gs(this,un(B),K,!0)},getTokenTypeAt:function(B){B=ri(this.doc,B);var K=ls(this,Dr(this.doc,B.line)),H=0,ue=(K.length-1)/2,_e=B.ch,Ie;if(_e==0)Ie=K[2];else for(;;){var Ue=H+ue>>1;if((Ue?K[Ue*2-1]:0)>=_e)ue=Ue;else if(K[Ue*2+1]<_e)H=Ue+1;else{Ie=K[Ue*2+2];break}}var ct=Ie?Ie.indexOf("overlay "):-1;return ct<0?Ie:ct==0?null:Ie.slice(0,ct-1)},getModeAt:function(B){var K=this.doc.mode;return K.innerMode?A.innerMode(K,this.getTokenAt(B).state).mode:K},getHelper:function(B,K){return this.getHelpers(B,K)[0]},getHelpers:function(B,K){var H=[];if(!I.hasOwnProperty(K))return H;var ue=I[K],_e=this.getModeAt(B);if(typeof _e[K]=="string")ue[_e[K]]&&H.push(ue[_e[K]]);else if(_e[K])for(var Ie=0;Ie<_e[K].length;Ie++){var Ue=ue[_e[K][Ie]];Ue&&H.push(Ue)}else _e.helperType&&ue[_e.helperType]?H.push(ue[_e.helperType]):ue[_e.name]&&H.push(ue[_e.name]);for(var ct=0;ct<ue._global.length;ct++){var xt=ue._global[ct];xt.pred(_e,this)&&Je(H,xt.val)==-1&&H.push(xt.val)}return H},getStateAfter:function(B,K){var H=this.doc;return B=vA(H,B??H.first+H.size-1),Lr(this,B+1,K).state},cursorCoords:function(B,K){var H,ue=this.doc.sel.primary();return B==null?H=ue.head:typeof B=="object"?H=ri(this.doc,B):H=B?ue.from():ue.to(),sn(this,H,K||"page")},charCoords:function(B,K){return kn(this,ri(this.doc,B),K||"page")},coordsChar:function(B,K){return B=$t(this,B,K||"page"),Co(this,B.left,B.top)},lineAtHeight:function(B,K){return B=$t(this,{top:B,left:0},K||"page").top,bt(this.doc,B+this.display.viewOffset)},heightAtLine:function(B,K,H){var ue=!1,_e;if(typeof B=="number"){var Ie=this.doc.first+this.doc.size-1;B<this.doc.first?B=this.doc.first:B>Ie&&(B=Ie,ue=!0),_e=Dr(this.doc,B)}else _e=B;return gu(this,_e,{top:0,left:0},K||"page",H||ue).top+(ue?this.doc.height-Zi(_e):0)},defaultTextHeight:function(){return kl(this.display)},defaultCharWidth:function(){return Gi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(B,K,H,ue,_e){var Ie=this.display;B=sn(this,ri(this.doc,B));var Ue=B.bottom,ct=B.left;if(K.style.position="absolute",K.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(K),Ie.sizer.appendChild(K),ue=="over")Ue=B.top;else if(ue=="above"||ue=="near"){var xt=Math.max(Ie.wrapper.clientHeight,this.doc.height),Ht=Math.max(Ie.sizer.clientWidth,Ie.lineSpace.clientWidth);(ue=="above"||B.bottom+K.offsetHeight>xt)&&B.top>K.offsetHeight?Ue=B.top-K.offsetHeight:B.bottom+K.offsetHeight<=xt&&(Ue=B.bottom),ct+K.offsetWidth>Ht&&(ct=Ht-K.offsetWidth)}K.style.top=Ue+"px",K.style.left=K.style.right="",_e=="right"?(ct=Ie.sizer.clientWidth-K.offsetWidth,K.style.right="0px"):(_e=="left"?ct=0:_e=="middle"&&(ct=(Ie.sizer.clientWidth-K.offsetWidth)/2),K.style.left=ct+"px"),H&&Yc(this,{left:ct,top:Ue,right:ct+K.offsetWidth,bottom:Ue+K.offsetHeight})},triggerOnKeyDown:$r(Ih),triggerOnKeyPress:$r(Ed),triggerOnKeyUp:Au,triggerOnMouseDown:$r(kh),execCommand:function(B){if(ml.hasOwnProperty(B))return ml[B].call(null,this)},triggerElectric:$r(function(B){uf(this,B)}),findPosH:function(B,K,H,ue){var _e=1;K<0&&(_e=-1,K=-K);for(var Ie=ri(this.doc,B),Ue=0;Ue<K&&(Ie=di(this.doc,Ie,_e,H,ue),!Ie.hitSide);++Ue);return Ie},moveH:$r(function(B,K){var H=this;this.extendSelectionsBy(function(ue){return H.display.shift||H.doc.extend||ue.empty()?di(H.doc,ue.head,B,K,H.options.rtlMoveVisually):B<0?ue.from():ue.to()},Nt)}),deleteH:$r(function(B,K){var H=this.doc.sel,ue=this.doc;H.somethingSelected()?ue.replaceSelection("",null,"+delete"):uu(this,function(_e){var Ie=di(ue,_e.head,B,K,!1);return B<0?{from:Ie,to:_e.head}:{from:_e.head,to:Ie}})}),findPosV:function(B,K,H,ue){var _e=1,Ie=ue;K<0&&(_e=-1,K=-K);for(var Ue=ri(this.doc,B),ct=0;ct<K;++ct){var xt=sn(this,Ue,"div");if(Ie==null?Ie=xt.left:xt.left=Ie,Ue=Zc(this,xt,_e,H),Ue.hitSide)break}return Ue},moveV:$r(function(B,K){var H=this,ue=this.doc,_e=[],Ie=!this.display.shift&&!ue.extend&&ue.sel.somethingSelected();if(ue.extendSelectionsBy(function(ct){if(Ie)return B<0?ct.from():ct.to();var xt=sn(H,ct.head,"div");ct.goalColumn!=null&&(xt.left=ct.goalColumn),_e.push(xt.left);var Ht=Zc(H,xt,B,K);return K=="page"&&ct==ue.sel.primary()&&As(H,kn(H,Ht,"div").top-xt.top),Ht},Nt),_e.length)for(var Ue=0;Ue<ue.sel.ranges.length;Ue++)ue.sel.ranges[Ue].goalColumn=_e[Ue]}),findWordAt:function(B){var K=this.doc,H=Dr(K,B.line).text,ue=B.ch,_e=B.ch;if(H){var Ie=this.getHelper(B,"wordChars");(B.sticky=="before"||_e==H.length)&&ue?--ue:++_e;for(var Ue=H.charAt(ue),ct=Ge(Ue,Ie)?function(xt){return Ge(xt,Ie)}:/\s/.test(Ue)?function(xt){return/\s/.test(xt)}:function(xt){return!/\s/.test(xt)&&!Ge(xt)};ue>0&&ct(H.charAt(ue-1));)--ue;for(;_e<H.length&&ct(H.charAt(_e));)++_e}return new bo(un(B.line,ue),un(B.line,_e))},toggleOverwrite:function(B){B!=null&&B==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?De(this.display.cursorDiv,"CodeMirror-overwrite"):fe(this.display.cursorDiv,"CodeMirror-overwrite"),Bt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ht(Ct(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:$r(function(B,K){cs(this,B,K)}),getScrollInfo:function(){var B=this.display.scroller;return{left:B.scrollLeft,top:B.scrollTop,height:B.scrollHeight-iu(this)-this.display.barHeight,width:B.scrollWidth-iu(this)-this.display.barWidth,clientHeight:WA(this),clientWidth:Bl(this)}},scrollIntoView:$r(function(B,K){B==null?(B={from:this.doc.sel.primary().head,to:null},K==null&&(K=this.options.cursorScrollMargin)):typeof B=="number"?B={from:un(B,0),to:null}:B.from==null&&(B={from:B,to:null}),B.to||(B.to=B.from),B.margin=K||0,B.from.line!=null?Df(this,B):md(this,B.from,B.to,B.margin)}),setSize:$r(function(B,K){var H=this,ue=function(Ie){return typeof Ie=="number"||/^\d+$/.test(String(Ie))?Ie+"px":Ie};B!=null&&(this.display.wrapper.style.width=ue(B)),K!=null&&(this.display.wrapper.style.height=ue(K)),this.options.lineWrapping&&Vd(this);var _e=this.display.viewFrom;this.doc.iter(_e,this.display.viewTo,function(Ie){if(Ie.widgets){for(var Ue=0;Ue<Ie.widgets.length;Ue++)if(Ie.widgets[Ue].noHScroll){gc(H,_e,"widget");break}}++_e}),this.curOp.forceUpdate=!0,Bt(this,"refresh",this)}),operation:function(B){return Bo(this,B)},startOperation:function(){return Nu(this)},endOperation:function(){return Gu(this)},refresh:$r(function(){var B=this.display.cachedTextHeight;Tl(this),this.curOp.forceUpdate=!0,pc(this),cs(this,this.doc.scrollLeft,this.doc.scrollTop),Ia(this.display),(B==null||Math.abs(B-kl(this.display))>.5||this.options.lineWrapping)&&$A(this),Bt(this,"refresh",this)}),swapDoc:$r(function(B){var K=this.doc;return K.cm=null,this.state.selectingText&&this.state.selectingText(),hr(this,B),pc(this),this.display.input.reset(),cs(this,B.scrollLeft,B.scrollTop),this.curOp.forceScroll=!0,Zs(this,"swapDoc",this,K),K}),phrase:function(B){var K=this.options.phrases;return K&&Object.prototype.hasOwnProperty.call(K,B)?K[B]:B},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},zt(A),A.registerHelper=function(B,K,H){I.hasOwnProperty(B)||(I[B]=A[B]={_global:[]}),I[B][K]=H},A.registerGlobalHelper=function(B,K,H,ue){A.registerHelper(B,K,ue),I[B]._global.push({pred:H,val:ue})}}function di(A,y,I,B,K){var H=y,ue=I,_e=Dr(A,y.line),Ie=K&&A.direction=="rtl"?-I:I;function Ue(){var _r=y.line+Ie;return _r<A.first||_r>=A.first+A.size?!1:(y=new un(_r,y.ch,y.sticky),_e=Dr(A,_r))}function ct(_r){var ur;if(B=="codepoint"){var Fr=_e.text.charCodeAt(y.ch+(I>0?0:-1));if(isNaN(Fr))ur=null;else{var ai=I>0?Fr>=55296&&Fr<56320:Fr>=56320&&Fr<57343;ur=new un(y.line,Math.max(0,Math.min(_e.text.length,y.ch+I*(ai?2:1))),-I)}}else K?ur=Js(A.cm,_e,y,I):ur=IA(_e,y,I);if(ur==null)if(!_r&&Ue())y=Vu(K,A.cm,_e,y.line,Ie);else return!1;else y=ur;return!0}if(B=="char"||B=="codepoint")ct();else if(B=="column")ct(!0);else if(B=="word"||B=="group")for(var xt=null,Ht=B=="group",Wt=A.cm&&A.cm.getHelper(y,"wordChars"),xn=!0;!(I<0&&!ct(!xn));xn=!1){var Pn=_e.text.charAt(y.ch)||`
`,Yn=Ge(Pn,Wt)?"w":Ht&&Pn==`
`?"n":!Ht||/\s/.test(Pn)?null:"p";if(Ht&&!xn&&!Yn&&(Yn="s"),xt&&xt!=Yn){I<0&&(I=1,ct(),y.sticky="after");break}if(Yn&&(xt=Yn),I>0&&!ct(!xn))break}var Xn=Sc(A,y,H,ue,!0);return Pi(H,Xn)&&(Xn.hitSide=!0),Xn}function Zc(A,y,I,B){var K=A.doc,H=y.left,ue;if(B=="page"){var _e=Math.min(A.display.wrapper.clientHeight,Lt(A).innerHeight||K(A).documentElement.clientHeight),Ie=Math.max(_e-.5*kl(A.display),3);ue=(I>0?y.bottom:y.top)+I*Ie}else B=="line"&&(ue=I>0?y.bottom+3:y.top-3);for(var Ue;Ue=Co(A,H,ue),!!Ue.outside;){if(I<0?ue<=0:ue>=K.height){Ue.hitSide=!0;break}ue+=I*5}return Ue}var is=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Se,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};is.prototype.init=function(A){var y=this,I=this,B=I.cm,K=I.div=A.lineDiv;K.contentEditable=!0,ah(K,B.options.spellcheck,B.options.autocorrect,B.options.autocapitalize);function H(_e){for(var Ie=_e.target;Ie;Ie=Ie.parentNode){if(Ie==K)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ie.className))break}return!1}ze(K,"paste",function(_e){!H(_e)||vt(B,_e)||Oc(_e,B)||g<=11&&setTimeout(Ki(B,function(){return y.updateFromDOM()}),20)}),ze(K,"compositionstart",function(_e){y.composing={data:_e.data,done:!1}}),ze(K,"compositionupdate",function(_e){y.composing||(y.composing={data:_e.data,done:!1})}),ze(K,"compositionend",function(_e){y.composing&&(_e.data!=y.composing.data&&y.readFromDOMSoon(),y.composing.done=!0)}),ze(K,"touchstart",function(){return I.forceCompositionEnd()}),ze(K,"input",function(){y.composing||y.readFromDOMSoon()});function ue(_e){if(!(!H(_e)||vt(B,_e))){if(B.somethingSelected())Ph({lineWise:!1,text:B.getSelections()}),_e.type=="cut"&&B.replaceSelection("",null,"cut");else if(B.options.lineWiseCopyCut){var Ie=Af(B);Ph({lineWise:!0,text:Ie.text}),_e.type=="cut"&&B.operation(function(){B.setSelections(Ie.ranges,0,Ut),B.replaceSelection("",null,"cut")})}else return;if(_e.clipboardData){_e.clipboardData.clearData();var Ue=TA.text.join(`
`);if(_e.clipboardData.setData("Text",Ue),_e.clipboardData.getData("Text")==Ue){_e.preventDefault();return}}var ct=kd(),xt=ct.firstChild;ah(xt),B.display.lineSpace.insertBefore(ct,B.display.lineSpace.firstChild),xt.value=TA.text.join(`
`);var Ht=ht(ft(K));at(xt),setTimeout(function(){B.display.lineSpace.removeChild(ct),Ht.focus(),Ht==K&&I.showPrimarySelection()},50)}}ze(K,"copy",ue),ze(K,"cut",ue)},is.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},is.prototype.prepareSelection=function(){var A=fd(this.cm,!1);return A.focus=ht(ft(this.div))==this.div,A},is.prototype.showSelection=function(A,y){!A||!this.cm.display.view.length||((A.focus||y)&&this.showPrimarySelection(),this.showMultipleSelections(A))},is.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},is.prototype.showPrimarySelection=function(){var A=this.getSelection(),y=this.cm,I=y.doc.sel.primary(),B=I.from(),K=I.to();if(y.display.viewTo==y.display.viewFrom||B.line>=y.display.viewTo||K.line<y.display.viewFrom){A.removeAllRanges();return}var H=gl(y,A.anchorNode,A.anchorOffset),ue=gl(y,A.focusNode,A.focusOffset);if(!(H&&!H.bad&&ue&&!ue.bad&&er(Ns(H,ue),B)==0&&er(_s(H,ue),K)==0)){var _e=y.display.view,Ie=B.line>=y.display.viewFrom&&Td(y,B)||{node:_e[0].measure.map[2],offset:0},Ue=K.line<y.display.viewTo&&Td(y,K);if(!Ue){var ct=_e[_e.length-1].measure,xt=ct.maps?ct.maps[ct.maps.length-1]:ct.map;Ue={node:xt[xt.length-1],offset:xt[xt.length-2]-xt[xt.length-3]}}if(!Ie||!Ue){A.removeAllRanges();return}var Ht=A.rangeCount&&A.getRangeAt(0),Wt;try{Wt=We(Ie.node,Ie.offset,Ue.offset,Ue.node)}catch{}Wt&&(!i&&y.state.focused?(A.collapse(Ie.node,Ie.offset),Wt.collapsed||(A.removeAllRanges(),A.addRange(Wt))):(A.removeAllRanges(),A.addRange(Wt)),Ht&&A.anchorNode==null?A.addRange(Ht):i&&this.startGracePeriod()),this.rememberSelection()}},is.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},is.prototype.showMultipleSelections=function(A){Pe(this.cm.display.cursorDiv,A.cursors),Pe(this.cm.display.selectionDiv,A.selection)},is.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},is.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var y=A.getRangeAt(0).commonAncestorContainer;return $e(this.div,y)},is.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||ht(ft(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},is.prototype.blur=function(){this.div.blur()},is.prototype.getField=function(){return this.div},is.prototype.supportsTouch=function(){return!0},is.prototype.receivedFocus=function(){var A=this,y=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):Bo(this.cm,function(){return y.cm.curOp.selectionChanged=!0});function I(){y.cm.state.focused&&(y.pollSelection(),y.polling.set(y.cm.options.pollInterval,I))}this.polling.set(this.cm.options.pollInterval,I)},is.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},is.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),y=this.cm;if(re&&S&&this.cm.display.gutterSpecs.length&&Sp(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var I=gl(y,A.anchorNode,A.anchorOffset),B=gl(y,A.focusNode,A.focusOffset);I&&B&&Bo(y,function(){_a(y.doc,Ga(I,B),Ut),(I.bad||B.bad)&&(y.curOp.selectionChanged=!0)})}}},is.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,y=A.display,I=A.doc.sel.primary(),B=I.from(),K=I.to();if(B.ch==0&&B.line>A.firstLine()&&(B=un(B.line-1,Dr(A.doc,B.line-1).length)),K.ch==Dr(A.doc,K.line).text.length&&K.line<A.lastLine()&&(K=un(K.line+1,0)),B.line<y.viewFrom||K.line>y.viewTo-1)return!1;var H,ue,_e;B.line==y.viewFrom||(H=lA(A,B.line))==0?(ue=Qe(y.view[0].line),_e=y.view[0].node):(ue=Qe(y.view[H].line),_e=y.view[H-1].node.nextSibling);var Ie=lA(A,K.line),Ue,ct;if(Ie==y.view.length-1?(Ue=y.viewTo-1,ct=y.lineDiv.lastChild):(Ue=Qe(y.view[Ie+1].line)-1,ct=y.view[Ie+1].node.previousSibling),!_e)return!1;for(var xt=A.doc.splitLines(Ym(A,_e,ct,ue,Ue)),Ht=Za(A.doc,un(ue,0),un(Ue,Dr(A.doc,Ue).text.length));xt.length>1&&Ht.length>1;)if(sr(xt)==sr(Ht))xt.pop(),Ht.pop(),Ue--;else if(xt[0]==Ht[0])xt.shift(),Ht.shift(),ue++;else break;for(var Wt=0,xn=0,Pn=xt[0],Yn=Ht[0],Xn=Math.min(Pn.length,Yn.length);Wt<Xn&&Pn.charCodeAt(Wt)==Yn.charCodeAt(Wt);)++Wt;for(var _r=sr(xt),ur=sr(Ht),Fr=Math.min(_r.length-(xt.length==1?Wt:0),ur.length-(Ht.length==1?Wt:0));xn<Fr&&_r.charCodeAt(_r.length-xn-1)==ur.charCodeAt(ur.length-xn-1);)++xn;if(xt.length==1&&Ht.length==1&&ue==B.line)for(;Wt&&Wt>B.ch&&_r.charCodeAt(_r.length-xn-1)==ur.charCodeAt(ur.length-xn-1);)Wt--,xn++;xt[xt.length-1]=_r.slice(0,_r.length-xn).replace(/^\u200b+/,""),xt[0]=xt[0].slice(Wt).replace(/\u200b+$/,"");var ai=un(ue,Wt),Gr=un(Ue,Ht.length?sr(Ht).length-xn:0);if(xt.length>1||xt[0]||er(ai,Gr))return j(A.doc,xt,ai,Gr,"+input"),!0},is.prototype.ensurePolled=function(){this.forceCompositionEnd()},is.prototype.reset=function(){this.forceCompositionEnd()},is.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},is.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},is.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&Bo(this.cm,function(){return Tl(A.cm)})},is.prototype.setUneditable=function(A){A.contentEditable="false"},is.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||Ki(this.cm,Mp)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},is.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},is.prototype.onContextMenu=function(){},is.prototype.resetPosition=function(){},is.prototype.needsContentAttribute=!0;function Td(A,y){var I=_A(A,y.line);if(!I||I.hidden)return null;var B=Dr(A.doc,y.line),K=rf(I,B,y.line),H=ve(B,A.doc.direction),ue="left";if(H){var _e=Ee(H,y.ch);ue=_e%2?"right":"left"}var Ie=Eh(K.map,y.ch,ue);return Ie.offset=Ie.collapse=="right"?Ie.end:Ie.start,Ie}function Sp(A){for(var y=A;y;y=y.parentNode)if(/CodeMirror-gutter-wrapper/.test(y.className))return!0;return!1}function Su(A,y){return y&&(A.bad=!0),A}function Ym(A,y,I,B,K){var H="",ue=!1,_e=A.doc.lineSeparator(),Ie=!1;function Ue(Wt){return function(xn){return xn.id==Wt}}function ct(){ue&&(H+=_e,Ie&&(H+=_e),ue=Ie=!1)}function xt(Wt){Wt&&(ct(),H+=Wt)}function Ht(Wt){if(Wt.nodeType==1){var xn=Wt.getAttribute("cm-text");if(xn){xt(xn);return}var Pn=Wt.getAttribute("cm-marker"),Yn;if(Pn){var Xn=A.findMarks(un(B,0),un(K+1,0),Ue(+Pn));Xn.length&&(Yn=Xn[0].find(0))&&xt(Za(A.doc,Yn.from,Yn.to).join(_e));return}if(Wt.getAttribute("contenteditable")=="false")return;var _r=/^(pre|div|p|li|table|br)$/i.test(Wt.nodeName);if(!/^br$/i.test(Wt.nodeName)&&Wt.textContent.length==0)return;_r&&ct();for(var ur=0;ur<Wt.childNodes.length;ur++)Ht(Wt.childNodes[ur]);/^(pre|p)$/i.test(Wt.nodeName)&&(Ie=!0),_r&&(ue=!0)}else Wt.nodeType==3&&xt(Wt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Ht(y),y!=I;)y=y.nextSibling,Ie=!1;return H}function gl(A,y,I){var B;if(y==A.display.lineDiv){if(B=A.display.lineDiv.childNodes[I],!B)return Su(A.clipPos(un(A.display.viewTo-1)),!0);y=null,I=0}else for(B=y;;B=B.parentNode){if(!B||B==A.display.lineDiv)return null;if(B.parentNode&&B.parentNode==A.display.lineDiv)break}for(var K=0;K<A.display.view.length;K++){var H=A.display.view[K];if(H.node==B)return cm(H,y,I)}}function cm(A,y,I){var B=A.text.firstChild,K=!1;if(!y||!$e(B,y))return Su(un(Qe(A.line),0),!0);if(y==B&&(K=!0,y=B.childNodes[I],I=0,!y)){var H=A.rest?sr(A.rest):A.line;return Su(un(Qe(H),H.text.length),K)}var ue=y.nodeType==3?y:null,_e=y;for(!ue&&y.childNodes.length==1&&y.firstChild.nodeType==3&&(ue=y.firstChild,I&&(I=ue.nodeValue.length));_e.parentNode!=B;)_e=_e.parentNode;var Ie=A.measure,Ue=Ie.maps;function ct(Yn,Xn,_r){for(var ur=-1;ur<(Ue?Ue.length:0);ur++)for(var Fr=ur<0?Ie.map:Ue[ur],ai=0;ai<Fr.length;ai+=3){var Gr=Fr[ai+2];if(Gr==Yn||Gr==Xn){var Xi=Qe(ur<0?A.line:A.rest[ur]),ko=Fr[ai]+_r;return(_r<0||Gr!=Yn)&&(ko=Fr[ai+(_r?1:0)]),un(Xi,ko)}}}var xt=ct(ue,_e,I);if(xt)return Su(xt,K);for(var Ht=_e.nextSibling,Wt=ue?ue.nodeValue.length-I:0;Ht;Ht=Ht.nextSibling){if(xt=ct(Ht,Ht.firstChild,0),xt)return Su(un(xt.line,xt.ch-Wt),K);Wt+=Ht.textContent.length}for(var xn=_e.previousSibling,Pn=I;xn;xn=xn.previousSibling){if(xt=ct(xn,xn.firstChild,-1),xt)return Su(un(xt.line,xt.ch+Pn),K);Pn+=xn.textContent.length}}var ha=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new Se,this.hasSelection=!1,this.composing=null,this.resetting=!1};ha.prototype.init=function(A){var y=this,I=this,B=this.cm;this.createField(A);var K=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),Q&&(K.style.width="0px"),ze(K,"input",function(){d&&g>=9&&y.hasSelection&&(y.hasSelection=null),I.poll()}),ze(K,"paste",function(ue){vt(B,ue)||Oc(ue,B)||(B.state.pasteIncoming=+new Date,I.fastPoll())});function H(ue){if(!vt(B,ue)){if(B.somethingSelected())Ph({lineWise:!1,text:B.getSelections()});else if(B.options.lineWiseCopyCut){var _e=Af(B);Ph({lineWise:!0,text:_e.text}),ue.type=="cut"?B.setSelections(_e.ranges,null,Ut):(I.prevInput="",K.value=_e.text.join(`
`),at(K))}else return;ue.type=="cut"&&(B.state.cutIncoming=+new Date)}}ze(K,"cut",H),ze(K,"copy",H),ze(A.scroller,"paste",function(ue){if(!(aA(A,ue)||vt(B,ue))){if(!K.dispatchEvent){B.state.pasteIncoming=+new Date,I.focus();return}var _e=new Event("paste");_e.clipboardData=ue.clipboardData,K.dispatchEvent(_e)}}),ze(A.lineSpace,"selectstart",function(ue){aA(A,ue)||_t(ue)}),ze(K,"compositionstart",function(){var ue=B.getCursor("from");I.composing&&I.composing.range.clear(),I.composing={start:ue,range:B.markText(ue,B.getCursor("to"),{className:"CodeMirror-composing"})}}),ze(K,"compositionend",function(){I.composing&&(I.poll(),I.composing.range.clear(),I.composing=null)})},ha.prototype.createField=function(A){this.wrapper=kd(),this.textarea=this.wrapper.firstChild;var y=this.cm.options;ah(this.textarea,y.spellcheck,y.autocorrect,y.autocapitalize)},ha.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},ha.prototype.prepareSelection=function(){var A=this.cm,y=A.display,I=A.doc,B=fd(A);if(A.options.moveInputWithCursor){var K=sn(A,I.sel.primary().head,"div"),H=y.wrapper.getBoundingClientRect(),ue=y.lineDiv.getBoundingClientRect();B.teTop=Math.max(0,Math.min(y.wrapper.clientHeight-10,K.top+ue.top-H.top)),B.teLeft=Math.max(0,Math.min(y.wrapper.clientWidth-10,K.left+ue.left-H.left))}return B},ha.prototype.showSelection=function(A){var y=this.cm,I=y.display;Pe(I.cursorDiv,A.cursors),Pe(I.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},ha.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var y=this.cm;if(this.resetting=!0,y.somethingSelected()){this.prevInput="";var I=y.getSelection();this.textarea.value=I,y.state.focused&&at(this.textarea),d&&g>=9&&(this.hasSelection=I)}else A||(this.prevInput=this.textarea.value="",d&&g>=9&&(this.hasSelection=null));this.resetting=!1}},ha.prototype.getField=function(){return this.textarea},ha.prototype.supportsTouch=function(){return!1},ha.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!X||ht(ft(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},ha.prototype.blur=function(){this.textarea.blur()},ha.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ha.prototype.receivedFocus=function(){this.slowPoll()},ha.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},ha.prototype.fastPoll=function(){var A=!1,y=this;y.pollingFast=!0;function I(){var B=y.poll();!B&&!A?(A=!0,y.polling.set(60,I)):(y.pollingFast=!1,y.slowPoll())}y.polling.set(20,I)},ha.prototype.poll=function(){var A=this,y=this.cm,I=this.textarea,B=this.prevInput;if(this.contextMenuPending||this.resetting||!y.state.focused||co(I)&&!B&&!this.composing||y.isReadOnly()||y.options.disableInput||y.state.keySeq)return!1;var K=I.value;if(K==B&&!y.somethingSelected())return!1;if(d&&g>=9&&this.hasSelection===K||Y&&/[\uf700-\uf7ff]/.test(K))return y.display.input.reset(),!1;if(y.doc.sel==y.display.selForContextMenu){var H=K.charCodeAt(0);if(H==8203&&!B&&(B=""),H==8666)return this.reset(),this.cm.execCommand("undo")}for(var ue=0,_e=Math.min(B.length,K.length);ue<_e&&B.charCodeAt(ue)==K.charCodeAt(ue);)++ue;return Bo(y,function(){Mp(y,K.slice(ue),B.length-ue,null,A.composing?"*compose":null),K.length>1e3||K.indexOf(`
`)>-1?I.value=A.prevInput="":A.prevInput=K,A.composing&&(A.composing.range.clear(),A.composing.range=y.markText(A.composing.start,y.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ha.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ha.prototype.onKeyPress=function(){d&&g>=9&&(this.hasSelection=null),this.fastPoll()},ha.prototype.onContextMenu=function(A){var y=this,I=y.cm,B=I.display,K=y.textarea;y.contextMenuPending&&y.contextMenuPending();var H=CA(I,A),ue=B.scroller.scrollTop;if(!H||k)return;var _e=I.options.resetSelectionOnContextMenu;_e&&I.doc.sel.contains(H)==-1&&Ki(I,_a)(I.doc,Ga(H),Ut);var Ie=K.style.cssText,Ue=y.wrapper.style.cssText,ct=y.wrapper.offsetParent.getBoundingClientRect();y.wrapper.style.cssText="position: static",K.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-ct.top-5)+"px; left: "+(A.clientX-ct.left-5)+`px;
      z-index: 1000; background: `+(d?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var xt;b&&(xt=K.ownerDocument.defaultView.scrollY),B.input.focus(),b&&K.ownerDocument.defaultView.scrollTo(null,xt),B.input.reset(),I.somethingSelected()||(K.value=y.prevInput=" "),y.contextMenuPending=Wt,B.selForContextMenu=I.doc.sel,clearTimeout(B.detectingSelectAll);function Ht(){if(K.selectionStart!=null){var Pn=I.somethingSelected(),Yn=""+(Pn?K.value:"");K.value="",K.value=Yn,y.prevInput=Pn?"":"",K.selectionStart=1,K.selectionEnd=Yn.length,B.selForContextMenu=I.doc.sel}}function Wt(){if(y.contextMenuPending==Wt&&(y.contextMenuPending=!1,y.wrapper.style.cssText=Ue,K.style.cssText=Ie,d&&g<9&&B.scrollbars.setScrollTop(B.scroller.scrollTop=ue),K.selectionStart!=null)){(!d||d&&g<9)&&Ht();var Pn=0,Yn=function(){B.selForContextMenu==I.doc.sel&&K.selectionStart==0&&K.selectionEnd>0&&y.prevInput==""?Ki(I,Ql)(I):Pn++<10?B.detectingSelectAll=setTimeout(Yn,500):(B.selForContextMenu=null,B.input.reset())};B.detectingSelectAll=setTimeout(Yn,200)}}if(d&&g>=9&&Ht(),de){Ar(A);var xn=function(){pt(window,"mouseup",xn),setTimeout(Wt,20)};ze(window,"mouseup",xn)}else setTimeout(Wt,50)},ha.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},ha.prototype.setUneditable=function(){},ha.prototype.needsContentAttribute=!1;function dm(A,y){if(y=y?Fe(y):{},y.value=A.value,!y.tabindex&&A.tabIndex&&(y.tabindex=A.tabIndex),!y.placeholder&&A.placeholder&&(y.placeholder=A.placeholder),y.autofocus==null){var I=ht(ft(A));y.autofocus=I==A||A.getAttribute("autofocus")!=null&&I==document.body}function B(){A.value=_e.getValue()}var K;if(A.form&&(ze(A.form,"submit",B),!y.leaveSubmitMethodAlone)){var H=A.form;K=H.submit;try{var ue=H.submit=function(){B(),H.submit=K,H.submit(),H.submit=ue}}catch{}}y.finishInit=function(Ie){Ie.save=B,Ie.getTextArea=function(){return A},Ie.toTextArea=function(){Ie.toTextArea=isNaN,B(),A.parentNode.removeChild(Ie.getWrapperElement()),A.style.display="",A.form&&(pt(A.form,"submit",B),!y.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=K))}},A.style.display="none";var _e=Io(function(Ie){return A.parentNode.insertBefore(Ie,A.nextSibling)},y);return _e}function cf(A){A.off=pt,A.on=ze,A.wheelEventPixels=AA,A.Doc=Vt,A.splitLines=ir,A.countColumn=Te,A.findColumn=yn,A.isWordChar=Er,A.Pass=dt,A.signal=Bt,A.Line=za,A.changeEnd=Ds,A.scrollbarModel=ju,A.Pos=un,A.cmpPos=er,A.modes=oo,A.mimeModes=Mo,A.resolveMode=Ea,A.getMode=ns,A.modeExtensions=Aa,A.extendMode=Al,A.copyState=ao,A.startState=tu,A.innerMode=Pu,A.commands=ml,A.keyMap=yo,A.keyName=fl,A.isModifierKey=Wa,A.lookupKey=ds,A.normalizeKeyMap=Go,A.StringStream=so,A.SharedTextMarker=St,A.TextMarker=At,A.LineWidget=qe,A.e_preventDefault=_t,A.e_stopPropagation=Tn,A.e_stop=Ar,A.addClass=De,A.contains=$e,A.rmClass=fe,A.keyNames=Si}Rl(Io),Hc(Io);var il="iter insert remove copy getEditor constructor".split(" ");for(var Ep in Vt.prototype)Vt.prototype.hasOwnProperty(Ep)&&Je(il,Ep)<0&&(Io.prototype[Ep]=function(A){return function(){return A.apply(this.doc,arguments)}}(Vt.prototype[Ep]));return zt(Vt),Io.inputStyles={textarea:ha,contenteditable:is},Io.defineMode=function(A){!Io.defaults.mode&&A!="null"&&(Io.defaults.mode=A),Ti.apply(this,arguments)},Io.defineMIME=Ua,Io.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),Io.defineMIME("text/plain","null"),Io.defineExtension=function(A,y){Io.prototype[A]=y},Io.defineDocExtension=function(A,y){Vt.prototype[A]=y},Io.fromTextArea=dm,cf(Io),Io.version="5.65.16",Io})}(Ob)),Ob.exports}var yle=Vx();const Wh=La(yle);var c9={exports:{}},d9;function vle(){return d9||(d9=1,function(n,e){(function(t){t(Vx())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,a=i.statementIndent,o=i.jsonld,d=i.json||o,g=i.trackScope!==!1,b=i.typescript,E=i.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function Qe(ho){return{type:ho,style:"keyword"}}var bt=Qe("keyword a"),fn=Qe("keyword b"),Nn=Qe("keyword c"),un=Qe("keyword d"),er=Qe("operator"),Pi={type:"atom",style:"atom"};return{if:Qe("if"),while:bt,with:bt,else:fn,do:fn,try:fn,finally:fn,return:un,break:un,continue:un,new:Qe("new"),delete:Nn,void:Nn,throw:Nn,debugger:Qe("debugger"),var:Qe("var"),const:Qe("var"),let:Qe("var"),function:Qe("function"),catch:Qe("catch"),for:Qe("for"),switch:Qe("switch"),case:Qe("case"),default:Qe("default"),in:er,typeof:er,instanceof:er,true:Pi,false:Pi,null:Pi,undefined:Pi,NaN:Pi,Infinity:Pi,this:Qe("this"),class:Qe("class"),super:Qe("atom"),yield:Nn,export:Qe("export"),import:Qe("import"),extends:Nn,await:Nn}}(),O=/[+\-*&%=<>!?|~^@]/,k=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function U(Qe){for(var bt=!1,fn,Nn=!1;(fn=Qe.next())!=null;){if(!bt){if(fn=="/"&&!Nn)return;fn=="["?Nn=!0:Nn&&fn=="]"&&(Nn=!1)}bt=!bt&&fn=="\\"}}var z,q;function Q(Qe,bt,fn){return z=Qe,q=fn,bt}function re(Qe,bt){var fn=Qe.next();if(fn=='"'||fn=="'")return bt.tokenize=X(fn),bt.tokenize(Qe,bt);if(fn=="."&&Qe.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Q("number","number");if(fn=="."&&Qe.match(".."))return Q("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(fn))return Q(fn);if(fn=="="&&Qe.eat(">"))return Q("=>","operator");if(fn=="0"&&Qe.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Q("number","number");if(/\d/.test(fn))return Qe.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Q("number","number");if(fn=="/")return Qe.eat("*")?(bt.tokenize=Y,Y(Qe,bt)):Qe.eat("/")?(Qe.skipToEnd(),Q("comment","comment")):ia(Qe,bt,1)?(U(Qe),Qe.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Q("regexp","string-2")):(Qe.eat("="),Q("operator","operator",Qe.current()));if(fn=="`")return bt.tokenize=J,J(Qe,bt);if(fn=="#"&&Qe.peek()=="!")return Qe.skipToEnd(),Q("meta","meta");if(fn=="#"&&Qe.eatWhile(E))return Q("variable","property");if(fn=="<"&&Qe.match("!--")||fn=="-"&&Qe.match("->")&&!/\S/.test(Qe.string.slice(0,Qe.start)))return Qe.skipToEnd(),Q("comment","comment");if(O.test(fn))return(fn!=">"||!bt.lexical||bt.lexical.type!=">")&&(Qe.eat("=")?(fn=="!"||fn=="=")&&Qe.eat("="):/[<>*+\-|&?]/.test(fn)&&(Qe.eat(fn),fn==">"&&Qe.eat(fn))),fn=="?"&&Qe.eat(".")?Q("."):Q("operator","operator",Qe.current());if(E.test(fn)){Qe.eatWhile(E);var Nn=Qe.current();if(bt.lastType!="."){if(S.propertyIsEnumerable(Nn)){var un=S[Nn];return Q(un.type,un.style,Nn)}if(Nn=="async"&&Qe.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Q("async","keyword",Nn)}return Q("variable","variable",Nn)}}function X(Qe){return function(bt,fn){var Nn=!1,un;if(o&&bt.peek()=="@"&&bt.match(k))return fn.tokenize=re,Q("jsonld-keyword","meta");for(;(un=bt.next())!=null&&!(un==Qe&&!Nn);)Nn=!Nn&&un=="\\";return Nn||(fn.tokenize=re),Q("string","string")}}function Y(Qe,bt){for(var fn=!1,Nn;Nn=Qe.next();){if(Nn=="/"&&fn){bt.tokenize=re;break}fn=Nn=="*"}return Q("comment","comment")}function J(Qe,bt){for(var fn=!1,Nn;(Nn=Qe.next())!=null;){if(!fn&&(Nn=="`"||Nn=="$"&&Qe.eat("{"))){bt.tokenize=re;break}fn=!fn&&Nn=="\\"}return Q("quasi","string-2",Qe.current())}var N="([{}])";function ie(Qe,bt){bt.fatArrowAt&&(bt.fatArrowAt=null);var fn=Qe.string.indexOf("=>",Qe.start);if(!(fn<0)){if(b){var Nn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Qe.string.slice(Qe.start,fn));Nn&&(fn=Nn.index)}for(var un=0,er=!1,Pi=fn-1;Pi>=0;--Pi){var ho=Qe.string.charAt(Pi),_s=N.indexOf(ho);if(_s>=0&&_s<3){if(!un){++Pi;break}if(--un==0){ho=="("&&(er=!0);break}}else if(_s>=3&&_s<6)++un;else if(E.test(ho))er=!0;else if(/["'\/`]/.test(ho))for(;;--Pi){if(Pi==0)return;var Ns=Qe.string.charAt(Pi-1);if(Ns==ho&&Qe.string.charAt(Pi-2)!="\\"){Pi--;break}}else if(er&&!un){++Pi;break}}er&&!un&&(bt.fatArrowAt=Pi)}}var he={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function de(Qe,bt,fn,Nn,un,er){this.indented=Qe,this.column=bt,this.type=fn,this.prev=un,this.info=er,Nn!=null&&(this.align=Nn)}function we(Qe,bt){if(!g)return!1;for(var fn=Qe.localVars;fn;fn=fn.next)if(fn.name==bt)return!0;for(var Nn=Qe.context;Nn;Nn=Nn.prev)for(var fn=Nn.vars;fn;fn=fn.next)if(fn.name==bt)return!0}function fe(Qe,bt,fn,Nn,un){var er=Qe.cc;for(be.state=Qe,be.stream=un,be.marked=null,be.cc=er,be.style=bt,Qe.lexical.hasOwnProperty("align")||(Qe.lexical.align=!0);;){var Pi=er.length?er.pop():d?Je:Te;if(Pi(fn,Nn)){for(;er.length&&er[er.length-1].lex;)er.pop()();return be.marked?be.marked:fn=="variable"&&we(Qe,Nn)?"variable-2":bt}}}var be={state:null,column:null,marked:null,cc:null};function Pe(){for(var Qe=arguments.length-1;Qe>=0;Qe--)be.cc.push(arguments[Qe])}function pe(){return Pe.apply(null,arguments),!0}function it(Qe,bt){for(var fn=bt;fn;fn=fn.next)if(fn.name==Qe)return!0;return!1}function We(Qe){var bt=be.state;if(be.marked="def",!!g){if(bt.context){if(bt.lexical.info=="var"&&bt.context&&bt.context.block){var fn=$e(Qe,bt.context);if(fn!=null){bt.context=fn;return}}else if(!it(Qe,bt.localVars)){bt.localVars=new Ne(Qe,bt.localVars);return}}i.globalVars&&!it(Qe,bt.globalVars)&&(bt.globalVars=new Ne(Qe,bt.globalVars))}}function $e(Qe,bt){if(bt)if(bt.block){var fn=$e(Qe,bt.prev);return fn?fn==bt.prev?bt:new De(fn,bt.vars,!0):null}else return it(Qe,bt.vars)?bt:new De(bt.prev,new Ne(Qe,bt.vars),!1);else return null}function ht(Qe){return Qe=="public"||Qe=="private"||Qe=="protected"||Qe=="abstract"||Qe=="readonly"}function De(Qe,bt,fn){this.prev=Qe,this.vars=bt,this.block=fn}function Ne(Qe,bt){this.name=Qe,this.next=bt}var at=new Ne("this",new Ne("arguments",null));function wt(){be.state.context=new De(be.state.context,be.state.localVars,!1),be.state.localVars=at}function Ct(){be.state.context=new De(be.state.context,be.state.localVars,!0),be.state.localVars=null}wt.lex=Ct.lex=!0;function ft(){be.state.localVars=be.state.context.vars,be.state.context=be.state.context.prev}ft.lex=!0;function Lt(Qe,bt){var fn=function(){var Nn=be.state,un=Nn.indented;if(Nn.lexical.type=="stat")un=Nn.lexical.indented;else for(var er=Nn.lexical;er&&er.type==")"&&er.align;er=er.prev)un=er.indented;Nn.lexical=new de(un,be.stream.column(),Qe,null,Nn.lexical,bt)};return fn.lex=!0,fn}function Kt(){var Qe=be.state;Qe.lexical.prev&&(Qe.lexical.type==")"&&(Qe.indented=Qe.lexical.indented),Qe.lexical=Qe.lexical.prev)}Kt.lex=!0;function Fe(Qe){function bt(fn){return fn==Qe?pe():Qe==";"||fn=="}"||fn==")"||fn=="]"?Pe():pe(bt)}return bt}function Te(Qe,bt){return Qe=="var"?pe(Lt("vardef",bt),Tn,Fe(";"),Kt):Qe=="keyword a"?pe(Lt("form"),dt,Te,Kt):Qe=="keyword b"?pe(Lt("form"),Te,Kt):Qe=="keyword d"?be.stream.match(/^\s*$/,!1)?pe():pe(Lt("stat"),en,Fe(";"),Kt):Qe=="debugger"?pe(Fe(";")):Qe=="{"?pe(Lt("}"),Ct,Yt,Kt,ft):Qe==";"?pe():Qe=="if"?(be.state.lexical.info=="else"&&be.state.cc[be.state.cc.length-1]==Kt&&be.state.cc.pop()(),pe(Lt("form"),dt,Te,Kt,Rn)):Qe=="function"?pe(ir):Qe=="for"?pe(Lt("form"),Ct,Br,Te,ft,Kt):Qe=="class"||b&&bt=="interface"?(be.marked="keyword",pe(Lt("form",Qe=="class"?Qe:bt),oo,Kt)):Qe=="variable"?b&&bt=="declare"?(be.marked="keyword",pe(Te)):b&&(bt=="module"||bt=="enum"||bt=="type")&&be.stream.match(/^\s*\w/,!1)?(be.marked="keyword",bt=="enum"?pe(Dr):bt=="type"?pe(Sa,Fe("operator"),ve,Fe(";")):pe(Lt("form"),Sn,Fe("{"),Lt("}"),Yt,Kt,Kt)):b&&bt=="namespace"?(be.marked="keyword",pe(Lt("form"),Je,Te,Kt)):b&&bt=="abstract"?(be.marked="keyword",pe(Te)):pe(Lt("stat"),Qn):Qe=="switch"?pe(Lt("form"),dt,Fe("{"),Lt("}","switch"),Ct,Yt,Kt,Kt,ft):Qe=="case"?pe(Je,Fe(":")):Qe=="default"?pe(Fe(":")):Qe=="catch"?pe(Lt("form"),wt,Se,Te,Kt,ft):Qe=="export"?pe(Lt("stat"),Ea,Kt):Qe=="import"?pe(Lt("stat"),Aa,Kt):Qe=="async"?pe(Te):bt=="@"?pe(Je,Te):Pe(Lt("stat"),Je,Fe(";"),Kt)}function Se(Qe){if(Qe=="(")return pe(qi,Fe(")"))}function Je(Qe,bt){return Ut(Qe,bt,!1)}function yt(Qe,bt){return Ut(Qe,bt,!0)}function dt(Qe){return Qe!="("?Pe():pe(Lt(")"),en,Fe(")"),Kt)}function Ut(Qe,bt,fn){if(be.state.fatArrowAt==be.stream.start){var Nn=fn?Jn:sr;if(Qe=="(")return pe(wt,Lt(")"),Xe(qi,")"),Kt,Fe("=>"),Nn,ft);if(Qe=="variable")return Pe(wt,Sn,Fe("=>"),Nn,ft)}var un=fn?yn:Nt;return he.hasOwnProperty(Qe)?pe(un):Qe=="function"?pe(ir,un):Qe=="class"||b&&bt=="interface"?(be.marked="keyword",pe(Lt("form"),yi,Kt)):Qe=="keyword c"||Qe=="async"?pe(fn?yt:Je):Qe=="("?pe(Lt(")"),en,Fe(")"),Kt,un):Qe=="operator"||Qe=="spread"?pe(fn?yt:Je):Qe=="["?pe(Lt("]"),so,Kt,un):Qe=="{"?Et(Ge,"}",null,un):Qe=="quasi"?Pe(jn,un):Qe=="new"?pe(mr(fn)):pe()}function en(Qe){return Qe.match(/[;\}\)\],]/)?Pe():Pe(Je)}function Nt(Qe,bt){return Qe==","?pe(en):yn(Qe,bt,!1)}function yn(Qe,bt,fn){var Nn=fn==!1?Nt:yn,un=fn==!1?Je:yt;if(Qe=="=>")return pe(wt,fn?Jn:sr,ft);if(Qe=="operator")return/\+\+|--/.test(bt)||b&&bt=="!"?pe(Nn):b&&bt=="<"&&be.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?pe(Lt(">"),Xe(ve,">"),Kt,Nn):bt=="?"?pe(Je,Fe(":"),un):pe(un);if(Qe=="quasi")return Pe(jn,Nn);if(Qe!=";"){if(Qe=="(")return Et(yt,")","call",Nn);if(Qe==".")return pe(Er,Nn);if(Qe=="[")return pe(Lt("]"),en,Fe("]"),Kt,Nn);if(b&&bt=="as")return be.marked="keyword",pe(ve,Nn);if(Qe=="regexp")return be.state.lastType=be.marked="operator",be.stream.backUp(be.stream.pos-be.stream.start-1),pe(un)}}function jn(Qe,bt){return Qe!="quasi"?Pe():bt.slice(bt.length-2)!="${"?pe(jn):pe(en,Rr)}function Rr(Qe){if(Qe=="}")return be.marked="string-2",be.state.tokenize=J,pe(jn)}function sr(Qe){return ie(be.stream,be.state),Pe(Qe=="{"?Te:Je)}function Jn(Qe){return ie(be.stream,be.state),Pe(Qe=="{"?Te:yt)}function mr(Qe){return function(bt){return bt=="."?pe(Qe?xr:pr):bt=="variable"&&b?pe(tn,Qe?yn:Nt):Pe(Qe?yt:Je)}}function pr(Qe,bt){if(bt=="target")return be.marked="keyword",pe(Nt)}function xr(Qe,bt){if(bt=="target")return be.marked="keyword",pe(yn)}function Qn(Qe){return Qe==":"?pe(Kt,Te):Pe(Nt,Fe(";"),Kt)}function Er(Qe){if(Qe=="variable")return be.marked="property",pe()}function Ge(Qe,bt){if(Qe=="async")return be.marked="property",pe(Ge);if(Qe=="variable"||be.style=="keyword"){if(be.marked="property",bt=="get"||bt=="set")return pe(Ae);var fn;return b&&be.state.fatArrowAt==be.stream.start&&(fn=be.stream.match(/^\s*:\s*/,!1))&&(be.state.fatArrowAt=be.stream.pos+fn[0].length),pe(me)}else{if(Qe=="number"||Qe=="string")return be.marked=o?"property":be.style+" property",pe(me);if(Qe=="jsonld-keyword")return pe(me);if(b&&ht(bt))return be.marked="keyword",pe(Ge);if(Qe=="[")return pe(Je,nn,Fe("]"),me);if(Qe=="spread")return pe(yt,me);if(bt=="*")return be.marked="keyword",pe(Ge);if(Qe==":")return Pe(me)}}function Ae(Qe){return Qe!="variable"?Pe(me):(be.marked="property",pe(ir))}function me(Qe){if(Qe==":")return pe(yt);if(Qe=="(")return Pe(ir)}function Xe(Qe,bt,fn){function Nn(un,er){if(fn?fn.indexOf(un)>-1:un==","){var Pi=be.state.lexical;return Pi.info=="call"&&(Pi.pos=(Pi.pos||0)+1),pe(function(ho,_s){return ho==bt||_s==bt?Pe():Pe(Qe)},Nn)}return un==bt||er==bt?pe():fn&&fn.indexOf(";")>-1?Pe(Qe):pe(Fe(bt))}return function(un,er){return un==bt||er==bt?pe():Pe(Qe,Nn)}}function Et(Qe,bt,fn){for(var Nn=3;Nn<arguments.length;Nn++)be.cc.push(arguments[Nn]);return pe(Lt(bt,fn),Xe(Qe,bt),Kt)}function Yt(Qe){return Qe=="}"?pe():Pe(Te,Yt)}function nn(Qe,bt){if(b){if(Qe==":")return pe(ve);if(bt=="?")return pe(nn)}}function rr(Qe,bt){if(b&&(Qe==":"||bt=="in"))return pe(ve)}function Ee(Qe){if(b&&Qe==":")return be.stream.match(/^\s*\w+\s+is\b/,!1)?pe(Je,oe,ve):pe(ve)}function oe(Qe,bt){if(bt=="is")return be.marked="keyword",pe()}function ve(Qe,bt){if(bt=="keyof"||bt=="typeof"||bt=="infer"||bt=="readonly")return be.marked="keyword",pe(bt=="typeof"?yt:ve);if(Qe=="variable"||bt=="void")return be.marked="type",pe(Xt);if(bt=="|"||bt=="&")return pe(ve);if(Qe=="string"||Qe=="number"||Qe=="atom")return pe(Xt);if(Qe=="[")return pe(Lt("]"),Xe(ve,"]",","),Kt,Xt);if(Qe=="{")return pe(Lt("}"),ze,Kt,Xt);if(Qe=="(")return pe(Xe(vt,")"),p,Xt);if(Qe=="<")return pe(Xe(ve,">"),ve);if(Qe=="quasi")return Pe(pt,Xt)}function p(Qe){if(Qe=="=>")return pe(ve)}function ze(Qe){return Qe.match(/[\}\)\]]/)?pe():Qe==","||Qe==";"?pe(ze):Pe(rt,ze)}function rt(Qe,bt){if(Qe=="variable"||be.style=="keyword")return be.marked="property",pe(rt);if(bt=="?"||Qe=="number"||Qe=="string")return pe(rt);if(Qe==":")return pe(ve);if(Qe=="[")return pe(Fe("variable"),rr,Fe("]"),rt);if(Qe=="(")return Pe(co,rt);if(!Qe.match(/[;\}\)\],]/))return pe()}function pt(Qe,bt){return Qe!="quasi"?Pe():bt.slice(bt.length-2)!="${"?pe(pt):pe(ve,Bt)}function Bt(Qe){if(Qe=="}")return be.marked="string-2",be.state.tokenize=J,pe(pt)}function vt(Qe,bt){return Qe=="variable"&&be.stream.match(/^\s*[?:]/,!1)||bt=="?"?pe(vt):Qe==":"?pe(ve):Qe=="spread"?pe(vt):Pe(ve)}function Xt(Qe,bt){if(bt=="<")return pe(Lt(">"),Xe(ve,">"),Kt,Xt);if(bt=="|"||Qe=="."||bt=="&")return pe(ve);if(Qe=="[")return pe(ve,Fe("]"),Xt);if(bt=="extends"||bt=="implements")return be.marked="keyword",pe(ve);if(bt=="?")return pe(ve,Fe(":"),ve)}function tn(Qe,bt){if(bt=="<")return pe(Lt(">"),Xe(ve,">"),Kt,Xt)}function zt(){return Pe(ve,_t)}function _t(Qe,bt){if(bt=="=")return pe(ve)}function Tn(Qe,bt){return bt=="enum"?(be.marked="keyword",pe(Dr)):Pe(Sn,nn,rn,Fn)}function Sn(Qe,bt){if(b&&ht(bt))return be.marked="keyword",pe(Sn);if(Qe=="variable")return We(bt),pe();if(Qe=="spread")return pe(Sn);if(Qe=="[")return Et(wr,"]");if(Qe=="{")return Et(Ar,"}")}function Ar(Qe,bt){return Qe=="variable"&&!be.stream.match(/^\s*:/,!1)?(We(bt),pe(rn)):(Qe=="variable"&&(be.marked="property"),Qe=="spread"?pe(Sn):Qe=="}"?Pe():Qe=="["?pe(Je,Fe("]"),Fe(":"),Ar):pe(Fe(":"),Sn,rn))}function wr(){return Pe(Sn,rn)}function rn(Qe,bt){if(bt=="=")return pe(yt)}function Fn(Qe){if(Qe==",")return pe(Tn)}function Rn(Qe,bt){if(Qe=="keyword b"&&bt=="else")return pe(Lt("form","else"),Te,Kt)}function Br(Qe,bt){if(bt=="await")return pe(Br);if(Qe=="(")return pe(Lt(")"),Mr,Kt)}function Mr(Qe){return Qe=="var"?pe(Tn,Kr):Qe=="variable"?pe(Kr):Pe(Kr)}function Kr(Qe,bt){return Qe==")"?pe():Qe==";"?pe(Kr):bt=="in"||bt=="of"?(be.marked="keyword",pe(Je,Kr)):Pe(Je,Kr)}function ir(Qe,bt){if(bt=="*")return be.marked="keyword",pe(ir);if(Qe=="variable")return We(bt),pe(ir);if(Qe=="(")return pe(wt,Lt(")"),Xe(qi,")"),Kt,Ee,Te,ft);if(b&&bt=="<")return pe(Lt(">"),Xe(zt,">"),Kt,ir)}function co(Qe,bt){if(bt=="*")return be.marked="keyword",pe(co);if(Qe=="variable")return We(bt),pe(co);if(Qe=="(")return pe(wt,Lt(")"),Xe(qi,")"),Kt,Ee,ft);if(b&&bt=="<")return pe(Lt(">"),Xe(zt,">"),Kt,co)}function Sa(Qe,bt){if(Qe=="keyword"||Qe=="variable")return be.marked="type",pe(Sa);if(bt=="<")return pe(Lt(">"),Xe(zt,">"),Kt)}function qi(Qe,bt){return bt=="@"&&pe(Je,qi),Qe=="spread"?pe(qi):b&&ht(bt)?(be.marked="keyword",pe(qi)):b&&Qe=="this"?pe(nn,rn):Pe(Sn,nn,rn)}function yi(Qe,bt){return Qe=="variable"?oo(Qe,bt):Mo(Qe,bt)}function oo(Qe,bt){if(Qe=="variable")return We(bt),pe(Mo)}function Mo(Qe,bt){if(bt=="<")return pe(Lt(">"),Xe(zt,">"),Kt,Mo);if(bt=="extends"||bt=="implements"||b&&Qe==",")return bt=="implements"&&(be.marked="keyword"),pe(b?ve:Je,Mo);if(Qe=="{")return pe(Lt("}"),Ti,Kt)}function Ti(Qe,bt){if(Qe=="async"||Qe=="variable"&&(bt=="static"||bt=="get"||bt=="set"||b&&ht(bt))&&be.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return be.marked="keyword",pe(Ti);if(Qe=="variable"||be.style=="keyword")return be.marked="property",pe(Ua,Ti);if(Qe=="number"||Qe=="string")return pe(Ua,Ti);if(Qe=="[")return pe(Je,nn,Fe("]"),Ua,Ti);if(bt=="*")return be.marked="keyword",pe(Ti);if(b&&Qe=="(")return Pe(co,Ti);if(Qe==";"||Qe==",")return pe(Ti);if(Qe=="}")return pe();if(bt=="@")return pe(Je,Ti)}function Ua(Qe,bt){if(bt=="!"||bt=="?")return pe(Ua);if(Qe==":")return pe(ve,rn);if(bt=="=")return pe(yt);var fn=be.state.lexical.prev,Nn=fn&&fn.info=="interface";return Pe(Nn?co:ir)}function Ea(Qe,bt){return bt=="*"?(be.marked="keyword",pe(tu,Fe(";"))):bt=="default"?(be.marked="keyword",pe(Je,Fe(";"))):Qe=="{"?pe(Xe(ns,"}"),tu,Fe(";")):Pe(Te)}function ns(Qe,bt){if(bt=="as")return be.marked="keyword",pe(Fe("variable"));if(Qe=="variable")return Pe(yt,ns)}function Aa(Qe){return Qe=="string"?pe():Qe=="("?Pe(Je):Qe=="."?Pe(Nt):Pe(Al,ao,tu)}function Al(Qe,bt){return Qe=="{"?Et(Al,"}"):(Qe=="variable"&&We(bt),bt=="*"&&(be.marked="keyword"),pe(Pu))}function ao(Qe){if(Qe==",")return pe(Al,ao)}function Pu(Qe,bt){if(bt=="as")return be.marked="keyword",pe(Al)}function tu(Qe,bt){if(bt=="from")return be.marked="keyword",pe(Je)}function so(Qe){return Qe=="]"?pe():Pe(Xe(yt,"]"))}function Dr(){return Pe(Lt("form"),Sn,Fe("{"),Lt("}"),Xe(Za,"}"),Kt,Kt)}function Za(){return Pe(Sn,rn)}function Ps(Qe,bt){return Qe.lastType=="operator"||Qe.lastType==","||O.test(bt.charAt(0))||/[,.]/.test(bt.charAt(0))}function ia(Qe,bt,fn){return bt.tokenize==re&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(bt.lastType)||bt.lastType=="quasi"&&/\{\s*$/.test(Qe.string.slice(0,Qe.pos-(fn||0)))}return{startState:function(Qe){var bt={tokenize:re,lastType:"sof",cc:[],lexical:new de((Qe||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new De(null,null,!1),indented:Qe||0};return i.globalVars&&typeof i.globalVars=="object"&&(bt.globalVars=i.globalVars),bt},token:function(Qe,bt){if(Qe.sol()&&(bt.lexical.hasOwnProperty("align")||(bt.lexical.align=!1),bt.indented=Qe.indentation(),ie(Qe,bt)),bt.tokenize!=Y&&Qe.eatSpace())return null;var fn=bt.tokenize(Qe,bt);return z=="comment"?fn:(bt.lastType=z=="operator"&&(q=="++"||q=="--")?"incdec":z,fe(bt,fn,z,q,Qe))},indent:function(Qe,bt){if(Qe.tokenize==Y||Qe.tokenize==J)return t.Pass;if(Qe.tokenize!=re)return 0;var fn=bt&&bt.charAt(0),Nn=Qe.lexical,un;if(!/^\s*else\b/.test(bt))for(var er=Qe.cc.length-1;er>=0;--er){var Pi=Qe.cc[er];if(Pi==Kt)Nn=Nn.prev;else if(Pi!=Rn&&Pi!=ft)break}for(;(Nn.type=="stat"||Nn.type=="form")&&(fn=="}"||(un=Qe.cc[Qe.cc.length-1])&&(un==Nt||un==yn)&&!/^[,\.=+\-*:?[\(]/.test(bt));)Nn=Nn.prev;a&&Nn.type==")"&&Nn.prev.type=="stat"&&(Nn=Nn.prev);var ho=Nn.type,_s=fn==ho;return ho=="vardef"?Nn.indented+(Qe.lastType=="operator"||Qe.lastType==","?Nn.info.length+1:0):ho=="form"&&fn=="{"?Nn.indented:ho=="form"?Nn.indented+s:ho=="stat"?Nn.indented+(Ps(Qe,bt)?a||s:0):Nn.info=="switch"&&!_s&&i.doubleIndentSwitch!=!1?Nn.indented+(/^(?:case|default)\b/.test(bt)?s:2*s):Nn.align?Nn.column+(_s?0:1):Nn.indented+(_s?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:o,jsonMode:d,expressionAllowed:ia,skipExpression:function(Qe){fe(Qe,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),c9.exports}vle();var h9={exports:{}},f9;function _le(){return f9||(f9=1,function(n,e){(function(t){t(Vx())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(N,ie,he){var de=document.createElement("div");de.className="CodeMirror-lint-tooltip cm-s-"+N.options.theme,de.appendChild(he.cloneNode(!0)),N.state.lint.options.selfContain?N.getWrapperElement().appendChild(de):document.body.appendChild(de);function we(fe){if(!de.parentNode)return t.off(document,"mousemove",we);var be=Math.max(0,fe.clientY-de.offsetHeight-5),Pe=Math.max(0,Math.min(fe.clientX+5,de.ownerDocument.defaultView.innerWidth-de.offsetWidth));de.style.top=be+"px",de.style.left=Pe+"px"}return t.on(document,"mousemove",we),we(ie),de.style.opacity!=null&&(de.style.opacity=1),de}function a(N){N.parentNode&&N.parentNode.removeChild(N)}function o(N){N.parentNode&&(N.style.opacity==null&&a(N),N.style.opacity=0,setTimeout(function(){a(N)},600))}function d(N,ie,he,de){var we=s(N,ie,he);function fe(){t.off(de,"mouseout",fe),we&&(o(we),we=null)}var be=setInterval(function(){if(we)for(var Pe=de;;Pe=Pe.parentNode){if(Pe&&Pe.nodeType==11&&(Pe=Pe.host),Pe==document.body)return;if(!Pe){fe();break}}if(!we)return clearInterval(be)},400);t.on(de,"mouseout",fe)}function g(N,ie,he){this.marked=[],ie instanceof Function&&(ie={getAnnotations:ie}),(!ie||ie===!0)&&(ie={}),this.options={},this.linterOptions=ie.options||{};for(var de in b)this.options[de]=b[de];for(var de in ie)b.hasOwnProperty(de)?ie[de]!=null&&(this.options[de]=ie[de]):ie.options||(this.linterOptions[de]=ie[de]);this.timeout=null,this.hasGutter=he,this.onMouseOver=function(we){J(N,we)},this.waitingFor=0}var b={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function E(N){var ie=N.state.lint;ie.hasGutter&&N.clearGutter(r),ie.options.highlightLines&&S(N);for(var he=0;he<ie.marked.length;++he)ie.marked[he].clear();ie.marked.length=0}function S(N){N.eachLine(function(ie){var he=ie.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(ie.wrapClass);he&&N.removeLineClass(ie,"wrap",he[0])})}function O(N,ie,he,de,we){var fe=document.createElement("div"),be=fe;return fe.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+he,de&&(be=fe.appendChild(document.createElement("div")),be.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),we!=!1&&t.on(be,"mouseover",function(Pe){d(N,Pe,ie,be)}),fe}function k(N,ie){return N=="error"?N:ie}function U(N){for(var ie=[],he=0;he<N.length;++he){var de=N[he],we=de.from.line;(ie[we]||(ie[we]=[])).push(de)}return ie}function z(N){var ie=N.severity;ie||(ie="error");var he=document.createElement("div");return he.className="CodeMirror-lint-message CodeMirror-lint-message-"+ie,typeof N.messageHTML<"u"?he.innerHTML=N.messageHTML:he.appendChild(document.createTextNode(N.message)),he}function q(N,ie){var he=N.state.lint,de=++he.waitingFor;function we(){de=-1,N.off("change",we)}N.on("change",we),ie(N.getValue(),function(fe,be){N.off("change",we),he.waitingFor==de&&(be&&fe instanceof t&&(fe=be),N.operation(function(){re(N,fe)}))},he.linterOptions,N)}function Q(N){var ie=N.state.lint;if(ie){var he=ie.options,de=he.getAnnotations||N.getHelper(t.Pos(0,0),"lint");if(de)if(he.async||de.async)q(N,de);else{var we=de(N.getValue(),ie.linterOptions,N);if(!we)return;we.then?we.then(function(fe){N.operation(function(){re(N,fe)})}):N.operation(function(){re(N,we)})}}}function re(N,ie){var he=N.state.lint;if(he){var de=he.options;E(N);for(var we=U(ie),fe=0;fe<we.length;++fe){var be=we[fe];if(be){for(var Pe=null,pe=he.hasGutter&&document.createDocumentFragment(),it=0;it<be.length;++it){var We=be[it],$e=We.severity;$e||($e="error"),Pe=k(Pe,$e),de.formatAnnotation&&(We=de.formatAnnotation(We)),he.hasGutter&&pe.appendChild(z(We)),We.to&&he.marked.push(N.markText(We.from,We.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+$e,__annotation:We}))}he.hasGutter&&N.setGutterMarker(fe,r,O(N,pe,Pe,be.length>1,de.tooltips)),de.highlightLines&&N.addLineClass(fe,"wrap",i+Pe)}}de.onUpdateLinting&&de.onUpdateLinting(ie,we,N)}}function X(N){var ie=N.state.lint;ie&&(clearTimeout(ie.timeout),ie.timeout=setTimeout(function(){Q(N)},ie.options.delay))}function Y(N,ie,he){for(var de=he.target||he.srcElement,we=document.createDocumentFragment(),fe=0;fe<ie.length;fe++){var be=ie[fe];we.appendChild(z(be))}d(N,he,we,de)}function J(N,ie){var he=ie.target||ie.srcElement;if(/\bCodeMirror-lint-mark-/.test(he.className)){for(var de=he.getBoundingClientRect(),we=(de.left+de.right)/2,fe=(de.top+de.bottom)/2,be=N.findMarksAt(N.coordsChar({left:we,top:fe},"client")),Pe=[],pe=0;pe<be.length;++pe){var it=be[pe].__annotation;it&&Pe.push(it)}Pe.length&&Y(N,Pe,ie)}}t.defineOption("lint",!1,function(N,ie,he){if(he&&he!=t.Init&&(E(N),N.state.lint.options.lintOnChange!==!1&&N.off("change",X),t.off(N.getWrapperElement(),"mouseover",N.state.lint.onMouseOver),clearTimeout(N.state.lint.timeout),delete N.state.lint),ie){for(var de=N.getOption("gutters"),we=!1,fe=0;fe<de.length;++fe)de[fe]==r&&(we=!0);var be=N.state.lint=new g(N,ie,we);be.options.lintOnChange&&N.on("change",X),be.options.tooltips!=!1&&be.options.tooltips!="gutter"&&t.on(N.getWrapperElement(),"mouseover",be.onMouseOver),Q(N)}}),t.defineExtension("performLint",function(){Q(this)})})}()),h9.exports}_le();var p9={exports:{}},m9;function Cle(){return m9||(m9=1,function(n,e){(function(t){t(Vx())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function a(S){return S&&S.bracketRegex||/[(){}[\]]/}function o(S,O,k){var U=S.getLineHandle(O.line),z=O.ch-1,q=k&&k.afterCursor;q==null&&(q=/(^| )cm-fat-cursor($| )/.test(S.getWrapperElement().className));var Q=a(k),re=!q&&z>=0&&Q.test(U.text.charAt(z))&&s[U.text.charAt(z)]||Q.test(U.text.charAt(z+1))&&s[U.text.charAt(++z)];if(!re)return null;var X=re.charAt(1)==">"?1:-1;if(k&&k.strict&&X>0!=(z==O.ch))return null;var Y=S.getTokenTypeAt(i(O.line,z+1)),J=d(S,i(O.line,z+(X>0?1:0)),X,Y,k);return J==null?null:{from:i(O.line,z),to:J&&J.pos,match:J&&J.ch==re.charAt(0),forward:X>0}}function d(S,O,k,U,z){for(var q=z&&z.maxScanLineLength||1e4,Q=z&&z.maxScanLines||1e3,re=[],X=a(z),Y=k>0?Math.min(O.line+Q,S.lastLine()+1):Math.max(S.firstLine()-1,O.line-Q),J=O.line;J!=Y;J+=k){var N=S.getLine(J);if(N){var ie=k>0?0:N.length-1,he=k>0?N.length:-1;if(!(N.length>q))for(J==O.line&&(ie=O.ch-(k<0?1:0));ie!=he;ie+=k){var de=N.charAt(ie);if(X.test(de)&&(U===void 0||(S.getTokenTypeAt(i(J,ie+1))||"")==(U||""))){var we=s[de];if(we&&we.charAt(1)==">"==k>0)re.push(de);else if(re.length)re.pop();else return{pos:i(J,ie),ch:de}}}}}return J-k==(k>0?S.lastLine():S.firstLine())?!1:null}function g(S,O,k){for(var U=S.state.matchBrackets.maxHighlightLineLength||1e3,z=k&&k.highlightNonMatching,q=[],Q=S.listSelections(),re=0;re<Q.length;re++){var X=Q[re].empty()&&o(S,Q[re].head,k);if(X&&(X.match||z!==!1)&&S.getLine(X.from.line).length<=U){var Y=X.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";q.push(S.markText(X.from,i(X.from.line,X.from.ch+1),{className:Y})),X.to&&S.getLine(X.to.line).length<=U&&q.push(S.markText(X.to,i(X.to.line,X.to.ch+1),{className:Y}))}}if(q.length){r&&S.state.focused&&S.focus();var J=function(){S.operation(function(){for(var N=0;N<q.length;N++)q[N].clear()})};if(O)setTimeout(J,800);else return J}}function b(S){S.operation(function(){S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null),S.state.matchBrackets.currentlyHighlighted=g(S,!1,S.state.matchBrackets)})}function E(S){S.state.matchBrackets&&S.state.matchBrackets.currentlyHighlighted&&(S.state.matchBrackets.currentlyHighlighted(),S.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(S,O,k){k&&k!=t.Init&&(S.off("cursorActivity",b),S.off("focus",b),S.off("blur",E),E(S)),O&&(S.state.matchBrackets=typeof O=="object"?O:{},S.on("cursorActivity",b),S.on("focus",b),S.on("blur",E))}),t.defineExtension("matchBrackets",function(){g(this,!0)}),t.defineExtension("findMatchingBracket",function(S,O,k){return(k||typeof O=="boolean")&&(k?(k.strict=O,O=k):O=O?{strict:!0}:null),o(this,S,O)}),t.defineExtension("scanForBracket",function(S,O,k,U){return d(this,S,O,k,U)})})}()),p9.exports}Cle();const ble=/("(?:[^\\"]|\\.)*")|[:,]/g;function IN(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(a,o,d){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const g=JSON.stringify(a,i);if(g===void 0)return g;const b=r-o.length-d;if(g.length<=b){const E=g.replace(ble,(S,O)=>O||`${S} `);if(E.length<=b)return E}if(i!=null&&(a=JSON.parse(g),i=void 0),typeof a=="object"&&a!==null){const E=o+t,S=[];let O=0,k,U;if(Array.isArray(a)){k="[",U="]";const{length:z}=a;for(;O<z;O++)S.push(s(a[O],E,O===z-1?0:1)||"null")}else{k="{",U="}";const z=Object.keys(a),{length:q}=z;for(;O<q;O++){const Q=z[O],re=`${JSON.stringify(Q)}: `,X=s(a[Q],E,re.length+(O===q-1?0:1));X!==void 0&&S.push(re+X)}}if(S.length>0)return[k,t+S.join(`,
${E}`),U].join(`
${o}`)}return g}(n,"",0)}function xle(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P5={},g9;function wle(){return g9||(g9=1,function(n){var e=function(){var t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(s,a,o,d,g,b,E){var S=b.length-1;switch(g){case 1:this.$=s.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(s);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=b[S-1];case 13:this.$={};break;case 14:this.$=b[S-1];break;case 15:this.$=[b[S-2],b[S]];break;case 16:this.$={},this.$[b[S][0]]=b[S][1];break;case 17:this.$=b[S-2],b[S-2][b[S][0]]=b[S][1];break;case 18:this.$=[];break;case 19:this.$=b[S-1];break;case 20:this.$=[b[S]];break;case 21:this.$=b[S-2],b[S-2].push(b[S]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(s,a){throw new Error(s)},parse:function(s){var a=this,o=[0],d=[null],g=[],b=this.table,E="",S=0,O=0,k=0,U=2,z=1;this.lexer.setInput(s),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var q=this.lexer.yylloc;g.push(q),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function Q(pe){o.length=o.length-2*pe,d.length=d.length-pe,g.length=g.length-pe}function re(){var pe;return pe=a.lexer.lex()||1,typeof pe!="number"&&(pe=a.symbols_[pe]||pe),pe}for(var X,Y,J,N,ie,he={},de,we,fe,be;;){if(J=o[o.length-1],this.defaultActions[J]?N=this.defaultActions[J]:(X==null&&(X=re()),N=b[J]&&b[J][X]),typeof N>"u"||!N.length||!N[0]){if(!k){be=[];for(de in b[J])this.terminals_[de]&&de>2&&be.push("'"+this.terminals_[de]+"'");var Pe="";this.lexer.showPosition?Pe="Parse error on line "+(S+1)+`:
`+this.lexer.showPosition()+`
Expecting `+be.join(", ")+", got '"+this.terminals_[X]+"'":Pe="Parse error on line "+(S+1)+": Unexpected "+(X==1?"end of input":"'"+(this.terminals_[X]||X)+"'"),this.parseError(Pe,{text:this.lexer.match,token:this.terminals_[X]||X,line:this.lexer.yylineno,loc:q,expected:be})}if(k==3){if(X==z)throw new Error(Pe||"Parsing halted.");O=this.lexer.yyleng,E=this.lexer.yytext,S=this.lexer.yylineno,q=this.lexer.yylloc,X=re()}for(;!(U.toString()in b[J]);){if(J==0)throw new Error(Pe||"Parsing halted.");Q(1),J=o[o.length-1]}Y=X,X=U,J=o[o.length-1],N=b[J]&&b[J][U],k=3}if(N[0]instanceof Array&&N.length>1)throw new Error("Parse Error: multiple actions possible at state: "+J+", token: "+X);switch(N[0]){case 1:o.push(X),d.push(this.lexer.yytext),g.push(this.lexer.yylloc),o.push(N[1]),X=null,Y?(X=Y,Y=null):(O=this.lexer.yyleng,E=this.lexer.yytext,S=this.lexer.yylineno,q=this.lexer.yylloc,k>0&&k--);break;case 2:if(we=this.productions_[N[1]][1],he.$=d[d.length-we],he._$={first_line:g[g.length-(we||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(we||1)].first_column,last_column:g[g.length-1].last_column},ie=this.performAction.call(he,E,O,S,this.yy,N[1],d,g),typeof ie<"u")return ie;we&&(o=o.slice(0,-1*we*2),d=d.slice(0,-1*we),g=g.slice(0,-1*we)),o.push(this.productions_[N[1]][0]),d.push(he.$),g.push(he._$),fe=b[o[o.length-2]][o[o.length-1]],o.push(fe);break;case 3:return!0}}return!0}},r=function(){var i={EOF:1,parseError:function(a,o){if(this.yy.parseError)this.yy.parseError(a,o);else throw new Error(a)},setInput:function(s){return this._input=s,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var s=this._input[0];this.yytext+=s,this.yyleng++,this.match+=s,this.matched+=s;var a=s.match(/\n/);return a&&this.yylineno++,this._input=this._input.slice(1),s},unput:function(s){return this._input=s+this._input,this},more:function(){return this._more=!0,this},less:function(s){this._input=this.match.slice(s)+this._input},pastInput:function(){var s=this.matched.substr(0,this.matched.length-this.match.length);return(s.length>20?"...":"")+s.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var s=this.match;return s.length<20&&(s+=this._input.substr(0,20-s.length)),(s.substr(0,20)+(s.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var s=this.pastInput(),a=new Array(s.length+1).join("-");return s+this.upcomingInput()+`
`+a+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var s,a,o,d,g;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),E=0;E<b.length&&(o=this._input.match(this.rules[b[E]]),!(o&&(!a||o[0].length>a[0].length)&&(a=o,d=E,!this.options.flex)));E++);if(a)return g=a[0].match(/\n.*/g),g&&(this.yylineno+=g.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:g?g[g.length-1].length-1:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],s=this.performAction.call(this,this.yy,this,b[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),s||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a<"u"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return i.options={},i.performAction=function(a,o,d,g){switch(d){case 0:break;case 1:return 6;case 2:return o.yytext=o.yytext.substr(1,o.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},i.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],i.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},i}();return t.lexer=r,t}();typeof xle<"u"&&(n.parser=e,n.parse=e.parse.bind(e))}(P5)),P5}var Mle=wle();const mB=La(Mle);var Ib={exports:{}},Sle=Ib.exports,y9;function Ele(){return y9||(y9=1,function(n,e){(function(t,r){n.exports=r()})(Sle,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Te,Se){return Se={exports:{}},Te(Se,Se.exports),Se.exports}var i=r(function(Te){function Se(){var Je=0,yt=1,dt=2,Ut=3,en=4,Nt=5,yn=6,jn=7,Rr=8,sr=9,Jn=10,mr=11,pr=12,xr=13,Qn=14,Er=15,Ge=16,Ae=17,me=0,Xe=1,Et=2,Yt=3,nn=4;function rr(p,ze){return 55296<=p.charCodeAt(ze)&&p.charCodeAt(ze)<=56319&&56320<=p.charCodeAt(ze+1)&&p.charCodeAt(ze+1)<=57343}function Ee(p,ze){ze===void 0&&(ze=0);var rt=p.charCodeAt(ze);if(55296<=rt&&rt<=56319&&ze<p.length-1){var pt=rt,Bt=p.charCodeAt(ze+1);return 56320<=Bt&&Bt<=57343?(pt-55296)*1024+(Bt-56320)+65536:pt}if(56320<=rt&&rt<=57343&&ze>=1){var pt=p.charCodeAt(ze-1),Bt=rt;return 55296<=pt&&pt<=56319?(pt-55296)*1024+(Bt-56320)+65536:Bt}return rt}function oe(p,ze,rt){var pt=[p].concat(ze).concat([rt]),Bt=pt[pt.length-2],vt=rt,Xt=pt.lastIndexOf(Qn);if(Xt>1&&pt.slice(1,Xt).every(function(_t){return _t==Ut})&&[Ut,xr,Ae].indexOf(p)==-1)return Et;var tn=pt.lastIndexOf(en);if(tn>0&&pt.slice(1,tn).every(function(_t){return _t==en})&&[pr,en].indexOf(Bt)==-1)return pt.filter(function(_t){return _t==en}).length%2==1?Yt:nn;if(Bt==Je&&vt==yt)return me;if(Bt==dt||Bt==Je||Bt==yt)return vt==Qn&&ze.every(function(_t){return _t==Ut})?Et:Xe;if(vt==dt||vt==Je||vt==yt)return Xe;if(Bt==yn&&(vt==yn||vt==jn||vt==sr||vt==Jn))return me;if((Bt==sr||Bt==jn)&&(vt==jn||vt==Rr))return me;if((Bt==Jn||Bt==Rr)&&vt==Rr)return me;if(vt==Ut||vt==Er)return me;if(vt==Nt)return me;if(Bt==pr)return me;var zt=pt.indexOf(Ut)!=-1?pt.lastIndexOf(Ut)-1:pt.length-2;return[xr,Ae].indexOf(pt[zt])!=-1&&pt.slice(zt+1,-1).every(function(_t){return _t==Ut})&&vt==Qn||Bt==Er&&[Ge,Ae].indexOf(vt)!=-1?me:ze.indexOf(en)!=-1?Et:Bt==en&&vt==en?me:Xe}this.nextBreak=function(p,ze){if(ze===void 0&&(ze=0),ze<0)return 0;if(ze>=p.length-1)return p.length;for(var rt=ve(Ee(p,ze)),pt=[],Bt=ze+1;Bt<p.length;Bt++)if(!rr(p,Bt-1)){var vt=ve(Ee(p,Bt));if(oe(rt,pt,vt))return Bt;pt.push(vt)}return p.length},this.splitGraphemes=function(p){for(var ze=[],rt=0,pt;(pt=this.nextBreak(p,rt))<p.length;)ze.push(p.slice(rt,pt)),rt=pt;return rt<p.length&&ze.push(p.slice(rt)),ze},this.iterateGraphemes=function(p){var ze=0,rt={next:(function(){var pt,Bt;return(Bt=this.nextBreak(p,ze))<p.length?(pt=p.slice(ze,Bt),ze=Bt,{value:pt,done:!1}):ze<p.length?(pt=p.slice(ze),ze=p.length,{value:pt,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(rt[Symbol.iterator]=function(){return rt}),rt},this.countGraphemes=function(p){for(var ze=0,rt=0,pt;(pt=this.nextBreak(p,rt))<p.length;)rt=pt,ze++;return rt<p.length&&ze++,ze};function ve(p){return 1536<=p&&p<=1541||p==1757||p==1807||p==2274||p==3406||p==69821||70082<=p&&p<=70083||p==72250||72326<=p&&p<=72329||p==73030?pr:p==13?Je:p==10?yt:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||p==173||p==1564||p==6158||p==8203||8206<=p&&p<=8207||p==8232||p==8233||8234<=p&&p<=8238||8288<=p&&p<=8292||p==8293||8294<=p&&p<=8303||55296<=p&&p<=57343||p==65279||65520<=p&&p<=65528||65529<=p&&p<=65531||113824<=p&&p<=113827||119155<=p&&p<=119162||p==917504||p==917505||917506<=p&&p<=917535||917632<=p&&p<=917759||918e3<=p&&p<=921599?dt:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||p==1471||1473<=p&&p<=1474||1476<=p&&p<=1477||p==1479||1552<=p&&p<=1562||1611<=p&&p<=1631||p==1648||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||p==1809||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2260<=p&&p<=2273||2275<=p&&p<=2306||p==2362||p==2364||2369<=p&&p<=2376||p==2381||2385<=p&&p<=2391||2402<=p&&p<=2403||p==2433||p==2492||p==2494||2497<=p&&p<=2500||p==2509||p==2519||2530<=p&&p<=2531||2561<=p&&p<=2562||p==2620||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||p==2641||2672<=p&&p<=2673||p==2677||2689<=p&&p<=2690||p==2748||2753<=p&&p<=2757||2759<=p&&p<=2760||p==2765||2786<=p&&p<=2787||2810<=p&&p<=2815||p==2817||p==2876||p==2878||p==2879||2881<=p&&p<=2884||p==2893||p==2902||p==2903||2914<=p&&p<=2915||p==2946||p==3006||p==3008||p==3021||p==3031||p==3072||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||p==3201||p==3260||p==3263||p==3266||p==3270||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3328<=p&&p<=3329||3387<=p&&p<=3388||p==3390||3393<=p&&p<=3396||p==3405||p==3415||3426<=p&&p<=3427||p==3530||p==3535||3538<=p&&p<=3540||p==3542||p==3551||p==3633||3636<=p&&p<=3642||3655<=p&&p<=3662||p==3761||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||p==3893||p==3895||p==3897||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||p==4038||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||p==4226||4229<=p&&p<=4230||p==4237||p==4253||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||p==6086||6089<=p&&p<=6099||p==6109||6155<=p&&p<=6157||6277<=p&&p<=6278||p==6313||6432<=p&&p<=6434||6439<=p&&p<=6440||p==6450||6457<=p&&p<=6459||6679<=p&&p<=6680||p==6683||p==6742||6744<=p&&p<=6750||p==6752||p==6754||6757<=p&&p<=6764||6771<=p&&p<=6780||p==6783||6832<=p&&p<=6845||p==6846||6912<=p&&p<=6915||p==6964||6966<=p&&p<=6970||p==6972||p==6978||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||p==7142||7144<=p&&p<=7145||p==7149||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||p==7405||p==7412||7416<=p&&p<=7417||7616<=p&&p<=7673||7675<=p&&p<=7679||p==8204||8400<=p&&p<=8412||8413<=p&&p<=8416||p==8417||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||p==11647||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||p==42607||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||p==43010||p==43014||p==43019||43045<=p&&p<=43046||43204<=p&&p<=43205||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||p==43443||43446<=p&&p<=43449||p==43452||p==43493||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||p==43587||p==43596||p==43644||p==43696||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||p==43713||43756<=p&&p<=43757||p==43766||p==44005||p==44008||p==44013||p==64286||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||p==66045||p==66272||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||p==68159||68325<=p&&p<=68326||p==69633||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||p==70003||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||p==70196||70198<=p&&p<=70199||p==70206||p==70367||70371<=p&&p<=70378||70400<=p&&p<=70401||p==70460||p==70462||p==70464||p==70487||70502<=p&&p<=70508||70512<=p&&p<=70516||70712<=p&&p<=70719||70722<=p&&p<=70724||p==70726||p==70832||70835<=p&&p<=70840||p==70842||p==70845||70847<=p&&p<=70848||70850<=p&&p<=70851||p==71087||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||p==71229||71231<=p&&p<=71232||p==71339||p==71341||71344<=p&&p<=71349||p==71351||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||72193<=p&&p<=72198||72201<=p&&p<=72202||72243<=p&&p<=72248||72251<=p&&p<=72254||p==72263||72273<=p&&p<=72278||72281<=p&&p<=72283||72330<=p&&p<=72342||72344<=p&&p<=72345||72752<=p&&p<=72758||72760<=p&&p<=72765||p==72767||72850<=p&&p<=72871||72874<=p&&p<=72880||72882<=p&&p<=72883||72885<=p&&p<=72886||73009<=p&&p<=73014||p==73018||73020<=p&&p<=73021||73023<=p&&p<=73029||p==73031||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||p==119141||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||p==121461||p==121476||121499<=p&&p<=121503||121505<=p&&p<=121519||122880<=p&&p<=122886||122888<=p&&p<=122904||122907<=p&&p<=122913||122915<=p&&p<=122916||122918<=p&&p<=122922||125136<=p&&p<=125142||125252<=p&&p<=125258||917536<=p&&p<=917631||917760<=p&&p<=917999?Ut:127462<=p&&p<=127487?en:p==2307||p==2363||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||p==2563||2622<=p&&p<=2624||p==2691||2750<=p&&p<=2752||p==2761||2763<=p&&p<=2764||2818<=p&&p<=2819||p==2880||2887<=p&&p<=2888||2891<=p&&p<=2892||p==3007||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||p==3262||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||p==3635||p==3763||3902<=p&&p<=3903||p==3967||p==4145||4155<=p&&p<=4156||4182<=p&&p<=4183||p==4228||p==6070||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||p==6741||p==6743||6765<=p&&p<=6770||p==6916||p==6965||p==6971||6973<=p&&p<=6977||6979<=p&&p<=6980||p==7042||p==7073||7078<=p&&p<=7079||p==7082||p==7143||7146<=p&&p<=7148||p==7150||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||p==7393||7410<=p&&p<=7411||p==7415||43043<=p&&p<=43044||p==43047||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||p==43395||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||p==43597||p==43755||43758<=p&&p<=43759||p==43765||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||p==44012||p==69632||p==69634||p==69762||69808<=p&&p<=69810||69815<=p&&p<=69816||p==69932||p==70018||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||p==70197||70368<=p&&p<=70370||70402<=p&&p<=70403||p==70463||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70709<=p&&p<=70711||70720<=p&&p<=70721||p==70725||70833<=p&&p<=70834||p==70841||70843<=p&&p<=70844||p==70846||p==70849||71088<=p&&p<=71089||71096<=p&&p<=71099||p==71102||71216<=p&&p<=71218||71227<=p&&p<=71228||p==71230||p==71340||71342<=p&&p<=71343||p==71350||71456<=p&&p<=71457||p==71462||72199<=p&&p<=72200||p==72249||72279<=p&&p<=72280||p==72343||p==72751||p==72766||p==72873||p==72881||p==72884||94033<=p&&p<=94078||p==119142||p==119149?Nt:4352<=p&&p<=4447||43360<=p&&p<=43388?yn:4448<=p&&p<=4519||55216<=p&&p<=55238?jn:4520<=p&&p<=4607||55243<=p&&p<=55291?Rr:p==44032||p==44060||p==44088||p==44116||p==44144||p==44172||p==44200||p==44228||p==44256||p==44284||p==44312||p==44340||p==44368||p==44396||p==44424||p==44452||p==44480||p==44508||p==44536||p==44564||p==44592||p==44620||p==44648||p==44676||p==44704||p==44732||p==44760||p==44788||p==44816||p==44844||p==44872||p==44900||p==44928||p==44956||p==44984||p==45012||p==45040||p==45068||p==45096||p==45124||p==45152||p==45180||p==45208||p==45236||p==45264||p==45292||p==45320||p==45348||p==45376||p==45404||p==45432||p==45460||p==45488||p==45516||p==45544||p==45572||p==45600||p==45628||p==45656||p==45684||p==45712||p==45740||p==45768||p==45796||p==45824||p==45852||p==45880||p==45908||p==45936||p==45964||p==45992||p==46020||p==46048||p==46076||p==46104||p==46132||p==46160||p==46188||p==46216||p==46244||p==46272||p==46300||p==46328||p==46356||p==46384||p==46412||p==46440||p==46468||p==46496||p==46524||p==46552||p==46580||p==46608||p==46636||p==46664||p==46692||p==46720||p==46748||p==46776||p==46804||p==46832||p==46860||p==46888||p==46916||p==46944||p==46972||p==47e3||p==47028||p==47056||p==47084||p==47112||p==47140||p==47168||p==47196||p==47224||p==47252||p==47280||p==47308||p==47336||p==47364||p==47392||p==47420||p==47448||p==47476||p==47504||p==47532||p==47560||p==47588||p==47616||p==47644||p==47672||p==47700||p==47728||p==47756||p==47784||p==47812||p==47840||p==47868||p==47896||p==47924||p==47952||p==47980||p==48008||p==48036||p==48064||p==48092||p==48120||p==48148||p==48176||p==48204||p==48232||p==48260||p==48288||p==48316||p==48344||p==48372||p==48400||p==48428||p==48456||p==48484||p==48512||p==48540||p==48568||p==48596||p==48624||p==48652||p==48680||p==48708||p==48736||p==48764||p==48792||p==48820||p==48848||p==48876||p==48904||p==48932||p==48960||p==48988||p==49016||p==49044||p==49072||p==49100||p==49128||p==49156||p==49184||p==49212||p==49240||p==49268||p==49296||p==49324||p==49352||p==49380||p==49408||p==49436||p==49464||p==49492||p==49520||p==49548||p==49576||p==49604||p==49632||p==49660||p==49688||p==49716||p==49744||p==49772||p==49800||p==49828||p==49856||p==49884||p==49912||p==49940||p==49968||p==49996||p==50024||p==50052||p==50080||p==50108||p==50136||p==50164||p==50192||p==50220||p==50248||p==50276||p==50304||p==50332||p==50360||p==50388||p==50416||p==50444||p==50472||p==50500||p==50528||p==50556||p==50584||p==50612||p==50640||p==50668||p==50696||p==50724||p==50752||p==50780||p==50808||p==50836||p==50864||p==50892||p==50920||p==50948||p==50976||p==51004||p==51032||p==51060||p==51088||p==51116||p==51144||p==51172||p==51200||p==51228||p==51256||p==51284||p==51312||p==51340||p==51368||p==51396||p==51424||p==51452||p==51480||p==51508||p==51536||p==51564||p==51592||p==51620||p==51648||p==51676||p==51704||p==51732||p==51760||p==51788||p==51816||p==51844||p==51872||p==51900||p==51928||p==51956||p==51984||p==52012||p==52040||p==52068||p==52096||p==52124||p==52152||p==52180||p==52208||p==52236||p==52264||p==52292||p==52320||p==52348||p==52376||p==52404||p==52432||p==52460||p==52488||p==52516||p==52544||p==52572||p==52600||p==52628||p==52656||p==52684||p==52712||p==52740||p==52768||p==52796||p==52824||p==52852||p==52880||p==52908||p==52936||p==52964||p==52992||p==53020||p==53048||p==53076||p==53104||p==53132||p==53160||p==53188||p==53216||p==53244||p==53272||p==53300||p==53328||p==53356||p==53384||p==53412||p==53440||p==53468||p==53496||p==53524||p==53552||p==53580||p==53608||p==53636||p==53664||p==53692||p==53720||p==53748||p==53776||p==53804||p==53832||p==53860||p==53888||p==53916||p==53944||p==53972||p==54e3||p==54028||p==54056||p==54084||p==54112||p==54140||p==54168||p==54196||p==54224||p==54252||p==54280||p==54308||p==54336||p==54364||p==54392||p==54420||p==54448||p==54476||p==54504||p==54532||p==54560||p==54588||p==54616||p==54644||p==54672||p==54700||p==54728||p==54756||p==54784||p==54812||p==54840||p==54868||p==54896||p==54924||p==54952||p==54980||p==55008||p==55036||p==55064||p==55092||p==55120||p==55148||p==55176?sr:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?Jn:p==9757||p==9977||9994<=p&&p<=9997||p==127877||127938<=p&&p<=127940||p==127943||127946<=p&&p<=127948||128066<=p&&p<=128067||128070<=p&&p<=128080||p==128110||128112<=p&&p<=128120||p==128124||128129<=p&&p<=128131||128133<=p&&p<=128135||p==128170||128372<=p&&p<=128373||p==128378||p==128400||128405<=p&&p<=128406||128581<=p&&p<=128583||128587<=p&&p<=128591||p==128675||128692<=p&&p<=128694||p==128704||p==128716||129304<=p&&p<=129308||129310<=p&&p<=129311||p==129318||129328<=p&&p<=129337||129341<=p&&p<=129342||129489<=p&&p<=129501?xr:127995<=p&&p<=127999?Qn:p==8205?Er:p==9792||p==9794||9877<=p&&p<=9878||p==9992||p==10084||p==127752||p==127806||p==127859||p==127891||p==127908||p==127912||p==127979||p==127981||p==128139||128187<=p&&p<=128188||p==128295||p==128300||p==128488||p==128640||p==128658?Ge:128102<=p&&p<=128105?Ae:mr}return this}Te.exports&&(Te.exports=Se)}),s=new i,a=function(Se,Je,yt){for(var dt=s.iterateGraphemes(Se.substring(Je)),Ut="",en=0;en<yt-Je;en++){var Nt=dt.next();if(Ut+=Nt.value,Nt.done)break}return Ut},o=function(Te,Se,Je,yt,dt,Ut,en){return{start:{line:Te,column:Se,offset:Je},end:{line:yt,column:dt,offset:Ut},source:en||null}},d=r(function(Te,Se){(function(Je,yt){Te.exports=yt()})(t,function(){var Je="",yt,dt=Ut;function Ut(Jn,mr){if(typeof Jn!="string")throw new TypeError("expected a string");if(mr===1)return Jn;if(mr===2)return Jn+Jn;var pr=Jn.length*mr;if(yt!==Jn||typeof yt>"u")yt=Jn,Je="";else if(Je.length>=pr)return Je.substr(0,pr);for(;pr>Je.length&&mr>1;)mr&1&&(Je+=Jn),mr>>=1,Jn+=Jn;return Je+=Jn,Je=Je.substr(0,pr),Je}var en=function(mr,pr,xr){if(mr==null||pr==null)return mr;var Qn=String(mr),Er=typeof pr=="number"?pr:parseInt(pr,10);if(isNaN(Er)||!isFinite(Er))return Qn;var Ge=Qn.length;if(Ge>=Er)return Qn;var Ae=String(xr);Ae===""&&(Ae=" ");for(var me=Er-Ge;Ae.length<me;)Ae+=Ae;var Xe=Ae.length>me?Ae.substr(0,me):Ae;return Xe+Qn},Nt=Object.assign||function(Jn){for(var mr=1;mr<arguments.length;mr++){var pr=arguments[mr];for(var xr in pr)Object.prototype.hasOwnProperty.call(pr,xr)&&(Jn[xr]=pr[xr])}return Jn};function yn(Jn,mr,pr,xr){var Qn=String(mr),Er=en(Qn,pr," "),Ge=dt(" ",xr.tabSize);return Er+" | "+Jn.replace(/\t/g,Ge)}function jn(Jn,mr,pr,xr,Qn){return Jn.slice(mr,pr).map(function(Er,Ge){return yn(Er,mr+Ge+1,xr,Qn)}).join(`
`)}var Rr={extraLines:2,tabSize:4},sr=function(mr,pr,xr,Qn){Qn=Nt({},Rr,Qn);var Er=mr.split(/\r\n?|\n|\f/),Ge=Math.max(1,pr-Qn.extraLines)-1,Ae=Math.min(pr+Qn.extraLines,Er.length),me=String(Ae).length,Xe=jn(Er,Ge,pr,me,Qn),Et=yn(Er[pr-1].substring(0,xr-1),pr,me,Qn),Yt=dt(" ",Et.length)+"^",nn=jn(Er,pr,Ae,me,Qn);return[Xe,Yt,nn].filter(Boolean).join(`
`)};return sr})}),g=new Error().stack,b=function(Te){var Se=Object.create(SyntaxError.prototype);return Object.assign(Se,Te,{name:"SyntaxError"}),Object.defineProperty(Se,"stack",{get:function(){return g?g.replace(/^(.+\n){1,3}/,String(Se)+`
`):""}}),Se},E=function(Te,Se,Je,yt,dt){throw b({message:yt?Te+`
`+d(Se,yt,dt):Te,rawMessage:Te,source:Je,line:yt,column:dt})},S={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Se){for(var Je=arguments.length,yt=Array(Je>1?Je-1:0),dt=1;dt<Je;dt++)yt[dt-1]=arguments[dt];return"Unexpected token <"+Se+"> at "+yt.filter(Boolean).join(":")}},O={unexpectedSymbol:function(Se){for(var Je=arguments.length,yt=Array(Je>1?Je-1:0),dt=1;dt<Je;dt++)yt[dt-1]=arguments[dt];return"Unexpected symbol <"+Se+"> at "+yt.filter(Boolean).join(":")}},k={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},U={"{":k.LEFT_BRACE,"}":k.RIGHT_BRACE,"[":k.LEFT_BRACKET,"]":k.RIGHT_BRACKET,":":k.COLON,",":k.COMMA},z={true:k.TRUE,false:k.FALSE,null:k.NULL},q={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},Q={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},re={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function X(Te){return Te>="1"&&Te<="9"}function Y(Te){return Te>="0"&&Te<="9"}function J(Te){return Y(Te)||Te>="a"&&Te<="f"||Te>="A"&&Te<="F"}function N(Te){return Te==="e"||Te==="E"}function ie(Te,Se,Je,yt){var dt=Te.charAt(Se);if(dt==="\r")Se++,Je++,yt=1,Te.charAt(Se)===`
`&&Se++;else if(dt===`
`)Se++,Je++,yt=1;else if(dt==="	"||dt===" ")Se++,yt++;else return null;return{index:Se,line:Je,column:yt}}function he(Te,Se,Je,yt){var dt=Te.charAt(Se);return dt in U?{type:U[dt],line:Je,column:yt+1,index:Se+1,value:null}:null}function de(Te,Se,Je,yt){for(var dt in z)if(z.hasOwnProperty(dt)&&Te.substr(Se,dt.length)===dt)return{type:z[dt],line:Je,column:yt+dt.length,index:Se+dt.length,value:dt};return null}function we(Te,Se,Je,yt){for(var dt=Se,Ut=q._START_;Se<Te.length;){var en=Te.charAt(Se);switch(Ut){case q._START_:{if(en==='"')Se++,Ut=q.START_QUOTE_OR_CHAR;else return null;break}case q.START_QUOTE_OR_CHAR:{if(en==="\\")Se++,Ut=q.ESCAPE;else{if(en==='"')return Se++,{type:k.STRING,line:Je,column:yt+Se-dt,index:Se,value:Te.slice(dt,Se)};Se++}break}case q.ESCAPE:{if(en in Q){if(Se++,en==="u")for(var Nt=0;Nt<4;Nt++){var yn=Te.charAt(Se);if(yn&&J(yn))Se++;else return null}Ut=q.START_QUOTE_OR_CHAR}else return null;break}}}}function fe(Te,Se,Je,yt){var dt=Se,Ut=Se,en=re._START_;e:for(;Se<Te.length;){var Nt=Te.charAt(Se);switch(en){case re._START_:{if(Nt==="-")en=re.MINUS;else if(Nt==="0")Ut=Se+1,en=re.ZERO;else if(X(Nt))Ut=Se+1,en=re.DIGIT;else return null;break}case re.MINUS:{if(Nt==="0")Ut=Se+1,en=re.ZERO;else if(X(Nt))Ut=Se+1,en=re.DIGIT;else return null;break}case re.ZERO:{if(Nt===".")en=re.POINT;else if(N(Nt))en=re.EXP;else break e;break}case re.DIGIT:{if(Y(Nt))Ut=Se+1;else if(Nt===".")en=re.POINT;else if(N(Nt))en=re.EXP;else break e;break}case re.POINT:{if(Y(Nt))Ut=Se+1,en=re.DIGIT_FRACTION;else break e;break}case re.DIGIT_FRACTION:{if(Y(Nt))Ut=Se+1;else if(N(Nt))en=re.EXP;else break e;break}case re.EXP:{if(Nt==="+"||Nt==="-")en=re.EXP_DIGIT_OR_SIGN;else if(Y(Nt))Ut=Se+1,en=re.EXP_DIGIT_OR_SIGN;else break e;break}case re.EXP_DIGIT_OR_SIGN:{if(Y(Nt))Ut=Se+1;else break e;break}}Se++}return Ut>0?{type:k.NUMBER,line:Je,column:yt+Ut-dt,index:Ut,value:Te.slice(dt,Ut)}:null}var be=function(Se,Je){for(var yt=1,dt=1,Ut=0,en=[];Ut<Se.length;){var Nt=[Se,Ut,yt,dt],yn=ie.apply(void 0,Nt);if(yn){Ut=yn.index,yt=yn.line,dt=yn.column;continue}var jn=he.apply(void 0,Nt)||de.apply(void 0,Nt)||we.apply(void 0,Nt)||fe.apply(void 0,Nt);if(jn){var Rr={type:jn.type,value:jn.value,loc:o(yt,dt,Ut,jn.line,jn.column,jn.index,Je.source)};en.push(Rr),Ut=jn.index,yt=jn.line,dt=jn.column}else E(O.unexpectedSymbol(a(Se,Ut,Ut+1),Je.source,yt,dt),Se,Je.source,yt,dt)}return en},Pe={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},pe={_START_:0,KEY:1,COLON:2},it={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},We={loc:!0,source:null};function $e(Te,Se,Je){var yt=Se.length>0?Se[Se.length-1].loc.end:{line:1,column:1};E(S.unexpectedEnd(),Te,Je.source,yt.line,yt.column)}function ht(Te){for(var Se=0,Je=0;Je<4;Je++)Se=Se*16+parseInt(Te[Je],16);return String.fromCharCode(Se)}var De={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Ne=['"',"\\","/"];function at(Te){for(var Se="",Je=0;Je<Te.length;Je++){var yt=Te.charAt(Je);if(yt==="\\"){Je++;var dt=Te.charAt(Je);if(dt==="u")Se+=ht(Te.substr(Je+1,4)),Je+=4;else if(Ne.indexOf(dt)!==-1)Se+=dt;else if(dt in De)Se+=De[dt];else break}else Se+=yt}return Se}function wt(Te,Se,Je,yt){for(var dt=void 0,Ut={type:"Object",children:[]},en=Pe._START_;Je<Se.length;){var Nt=Se[Je];switch(en){case Pe._START_:{if(Nt.type===k.LEFT_BRACE)dt=Nt,en=Pe.OPEN_OBJECT,Je++;else return null;break}case Pe.OPEN_OBJECT:{if(Nt.type===k.RIGHT_BRACE)return yt.loc&&(Ut.loc=o(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Nt.loc.end.line,Nt.loc.end.column,Nt.loc.end.offset,yt.source)),{value:Ut,index:Je+1};var yn=Ct(Te,Se,Je,yt);Ut.children.push(yn.value),en=Pe.PROPERTY,Je=yn.index;break}case Pe.PROPERTY:{if(Nt.type===k.RIGHT_BRACE)return yt.loc&&(Ut.loc=o(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Nt.loc.end.line,Nt.loc.end.column,Nt.loc.end.offset,yt.source)),{value:Ut,index:Je+1};Nt.type===k.COMMA?(en=Pe.COMMA,Je++):E(S.unexpectedToken(a(Te,Nt.loc.start.offset,Nt.loc.end.offset),yt.source,Nt.loc.start.line,Nt.loc.start.column),Te,yt.source,Nt.loc.start.line,Nt.loc.start.column);break}case Pe.COMMA:{var jn=Ct(Te,Se,Je,yt);jn?(Je=jn.index,Ut.children.push(jn.value),en=Pe.PROPERTY):E(S.unexpectedToken(a(Te,Nt.loc.start.offset,Nt.loc.end.offset),yt.source,Nt.loc.start.line,Nt.loc.start.column),Te,yt.source,Nt.loc.start.line,Nt.loc.start.column);break}}}$e(Te,Se,yt)}function Ct(Te,Se,Je,yt){for(var dt=void 0,Ut={type:"Property",key:null,value:null},en=pe._START_;Je<Se.length;){var Nt=Se[Je];switch(en){case pe._START_:{if(Nt.type===k.STRING){var yn={type:"Identifier",value:at(Te.slice(Nt.loc.start.offset+1,Nt.loc.end.offset-1)),raw:Nt.value};yt.loc&&(yn.loc=Nt.loc),dt=Nt,Ut.key=yn,en=pe.KEY,Je++}else return null;break}case pe.KEY:{Nt.type===k.COLON?(en=pe.COLON,Je++):E(S.unexpectedToken(a(Te,Nt.loc.start.offset,Nt.loc.end.offset),yt.source,Nt.loc.start.line,Nt.loc.start.column),Te,yt.source,Nt.loc.start.line,Nt.loc.start.column);break}case pe.COLON:{var jn=Kt(Te,Se,Je,yt);return Ut.value=jn.value,yt.loc&&(Ut.loc=o(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,jn.value.loc.end.line,jn.value.loc.end.column,jn.value.loc.end.offset,yt.source)),{value:Ut,index:jn.index}}}}}function ft(Te,Se,Je,yt){for(var dt=void 0,Ut={type:"Array",children:[]},en=it._START_,Nt=void 0;Je<Se.length;)switch(Nt=Se[Je],en){case it._START_:{if(Nt.type===k.LEFT_BRACKET)dt=Nt,en=it.OPEN_ARRAY,Je++;else return null;break}case it.OPEN_ARRAY:{if(Nt.type===k.RIGHT_BRACKET)return yt.loc&&(Ut.loc=o(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Nt.loc.end.line,Nt.loc.end.column,Nt.loc.end.offset,yt.source)),{value:Ut,index:Je+1};var yn=Kt(Te,Se,Je,yt);Je=yn.index,Ut.children.push(yn.value),en=it.VALUE;break}case it.VALUE:{if(Nt.type===k.RIGHT_BRACKET)return yt.loc&&(Ut.loc=o(dt.loc.start.line,dt.loc.start.column,dt.loc.start.offset,Nt.loc.end.line,Nt.loc.end.column,Nt.loc.end.offset,yt.source)),{value:Ut,index:Je+1};Nt.type===k.COMMA?(en=it.COMMA,Je++):E(S.unexpectedToken(a(Te,Nt.loc.start.offset,Nt.loc.end.offset),yt.source,Nt.loc.start.line,Nt.loc.start.column),Te,yt.source,Nt.loc.start.line,Nt.loc.start.column);break}case it.COMMA:{var jn=Kt(Te,Se,Je,yt);Je=jn.index,Ut.children.push(jn.value),en=it.VALUE;break}}$e(Te,Se,yt)}function Lt(Te,Se,Je,yt){var dt=Se[Je],Ut=null;switch(dt.type){case k.STRING:{Ut=at(Te.slice(dt.loc.start.offset+1,dt.loc.end.offset-1));break}case k.NUMBER:{Ut=Number(dt.value);break}case k.TRUE:{Ut=!0;break}case k.FALSE:{Ut=!1;break}case k.NULL:{Ut=null;break}default:return null}var en={type:"Literal",value:Ut,raw:dt.value};return yt.loc&&(en.loc=dt.loc),{value:en,index:Je+1}}function Kt(Te,Se,Je,yt){var dt=Se[Je],Ut=Lt.apply(void 0,arguments)||wt.apply(void 0,arguments)||ft.apply(void 0,arguments);if(Ut)return Ut;E(S.unexpectedToken(a(Te,dt.loc.start.offset,dt.loc.end.offset),yt.source,dt.loc.start.line,dt.loc.start.column),Te,yt.source,dt.loc.start.line,dt.loc.start.column)}var Fe=function(Te,Se){Se=Object.assign({},We,Se);var Je=be(Te,Se);Je.length===0&&$e(Te,Je,Se);var yt=Kt(Te,Je,0,Se);if(yt.index===Je.length)return yt.value;var dt=Je[yt.index];E(S.unexpectedToken(a(Te,dt.loc.start.offset,dt.loc.end.offset),Se.source,dt.loc.start.line,dt.loc.start.column),Te,Se.source,dt.loc.start.line,dt.loc.start.column)};return Fe})}(Ib)),Ib.exports}var Ble=Ele();const Ole=La(Ble);function or(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="a994e12e3e6547813b669a430e6cb42da5d99bba",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:11,column:0},end:{line:26,column:3}},3:{start:{line:12,column:16},end:{line:12,column:18}},4:{start:{line:13,column:2},end:{line:20,column:4}},5:{start:{line:14,column:16},end:{line:14,column:24}},6:{start:{line:15,column:4},end:{line:19,column:7}},7:{start:{line:21,column:2},end:{line:24,column:3}},8:{start:{line:22,column:4},end:{line:22,column:25}},9:{start:{line:25,column:2},end:{line:25,column:15}},10:{start:{line:27,column:0},end:{line:134,column:3}},11:{start:{line:28,column:16},end:{line:28,column:18}},12:{start:{line:29,column:21},end:{line:29,column:29}},13:{start:{line:30,column:22},end:{line:30,column:26}},14:{start:{line:31,column:2},end:{line:38,column:4}},15:{start:{line:32,column:16},end:{line:32,column:24}},16:{start:{line:33,column:4},end:{line:37,column:7}},17:{start:{line:39,column:2},end:{line:42,column:3}},18:{start:{line:40,column:4},end:{line:40,column:23}},19:{start:{line:43,column:2},end:{line:45,column:3}},20:{start:{line:44,column:4},end:{line:44,column:17}},21:{start:{line:46,column:14},end:{line:46,column:29}},22:{start:{line:47,column:16},end:{line:47,column:32}},23:{start:{line:49,column:4},end:{line:69,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:51,column:11},end:{line:69,column:5}},26:{start:{line:52,column:6},end:{line:52,column:18}},27:{start:{line:53,column:11},end:{line:69,column:5}},28:{start:{line:54,column:6},end:{line:54,column:20}},29:{start:{line:56,column:18},end:{line:56,column:25}},30:{start:{line:58,column:6},end:{line:67,column:7}},31:{start:{line:59,column:8},end:{line:59,column:41}},32:{start:{line:61,column:8},end:{line:63,column:11}},33:{start:{line:62,column:10},end:{line:62,column:101}},34:{start:{line:64,column:8},end:{line:66,column:9}},35:{start:{line:65,column:10},end:{line:65,column:34}},36:{start:{line:68,column:6},end:{line:68,column:63}},37:{start:{line:71,column:12},end:{line:71,column:16}},38:{start:{line:72,column:2},end:{line:103,column:3}},39:{start:{line:73,column:19},end:{line:83,column:6}},40:{start:{line:84,column:4},end:{line:98,column:5}},41:{start:{line:85,column:6},end:{line:97,column:8}},42:{start:{line:88,column:10},end:{line:88,column:76}},43:{start:{line:90,column:34},end:{line:90,column:85}},44:{start:{line:91,column:10},end:{line:95,column:12}},45:{start:{line:99,column:9},end:{line:103,column:3}},46:{start:{line:100,column:4},end:{line:100,column:56}},47:{start:{line:102,column:4},end:{line:102,column:50}},48:{start:{line:104,column:2},end:{line:132,column:3}},49:{start:{line:105,column:19},end:{line:105,column:28}},50:{start:{line:106,column:4},end:{line:131,column:7}},51:{start:{line:107,column:31},end:{line:107,column:36}},52:{start:{line:108,column:6},end:{line:130,column:7}},53:{start:{line:109,column:31},end:{line:109,column:64}},54:{start:{line:110,column:20},end:{line:114,column:9}},55:{start:{line:115,column:8},end:{line:115,column:24}},56:{start:{line:116,column:13},end:{line:130,column:7}},57:{start:{line:117,column:21},end:{line:117,column:83}},58:{start:{line:118,column:28},end:{line:118,column:64}},59:{start:{line:119,column:8},end:{line:122,column:9}},60:{start:{line:120,column:10},end:{line:120,column:69}},61:{start:{line:121,column:10},end:{line:121,column:17}},62:{start:{line:123,column:24},end:{line:123,column:35}},63:{start:{line:124,column:31},end:{line:124,column:34}},64:{start:{line:125,column:8},end:{line:129,column:11}},65:{start:{line:133,column:2},end:{line:133,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:42},end:{line:11,column:43}},loc:{start:{line:11,column:52},end:{line:26,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:13,column:31},end:{line:13,column:32}},loc:{start:{line:13,column:46},end:{line:20,column:3}},line:13},3:{name:"(anonymous_3)",decl:{start:{line:27,column:41},end:{line:27,column:42}},loc:{start:{line:27,column:62},end:{line:134,column:1}},line:27},4:{name:"(anonymous_4)",decl:{start:{line:31,column:22},end:{line:31,column:23}},loc:{start:{line:31,column:37},end:{line:38,column:3}},line:31},5:{name:"getArrayPositionalFromAst",decl:{start:{line:48,column:11},end:{line:48,column:36}},loc:{start:{line:48,column:49},end:{line:70,column:3}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:61,column:37},end:{line:61,column:38}},loc:{start:{line:61,column:52},end:{line:63,column:9}},line:61},7:{name:"(anonymous_7)",decl:{start:{line:87,column:29},end:{line:87,column:30}},loc:{start:{line:87,column:38},end:{line:89,column:9}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:89,column:15},end:{line:89,column:16}},loc:{start:{line:89,column:24},end:{line:96,column:9}},line:89},9:{name:"(anonymous_9)",decl:{start:{line:106,column:19},end:{line:106,column:20}},loc:{start:{line:106,column:30},end:{line:131,column:5}},line:106}},branchMap:{0:{loc:{start:{line:43,column:2},end:{line:45,column:3}},type:"if",locations:[{start:{line:43,column:2},end:{line:45,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:43},1:{loc:{start:{line:49,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:69,column:5}},{start:{line:51,column:11},end:{line:69,column:5}}],line:49},2:{loc:{start:{line:51,column:11},end:{line:69,column:5}},type:"if",locations:[{start:{line:51,column:11},end:{line:69,column:5}},{start:{line:53,column:11},end:{line:69,column:5}}],line:51},3:{loc:{start:{line:53,column:11},end:{line:69,column:5}},type:"if",locations:[{start:{line:53,column:11},end:{line:69,column:5}},{start:{line:55,column:11},end:{line:69,column:5}}],line:53},4:{loc:{start:{line:58,column:6},end:{line:67,column:7}},type:"if",locations:[{start:{line:58,column:6},end:{line:67,column:7}},{start:{line:60,column:13},end:{line:67,column:7}}],line:58},5:{loc:{start:{line:62,column:17},end:{line:62,column:100}},type:"binary-expr",locations:[{start:{line:62,column:17},end:{line:62,column:30}},{start:{line:62,column:34},end:{line:62,column:69}},{start:{line:62,column:73},end:{line:62,column:100}}],line:62},6:{loc:{start:{line:64,column:8},end:{line:66,column:9}},type:"if",locations:[{start:{line:64,column:8},end:{line:66,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:64},7:{loc:{start:{line:72,column:2},end:{line:103,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:103,column:3}},{start:{line:99,column:9},end:{line:103,column:3}}],line:72},8:{loc:{start:{line:84,column:4},end:{line:98,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:98,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:84},9:{loc:{start:{line:99,column:9},end:{line:103,column:3}},type:"if",locations:[{start:{line:99,column:9},end:{line:103,column:3}},{start:{line:101,column:9},end:{line:103,column:3}}],line:99},10:{loc:{start:{line:104,column:2},end:{line:132,column:3}},type:"if",locations:[{start:{line:104,column:2},end:{line:132,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},11:{loc:{start:{line:108,column:6},end:{line:130,column:7}},type:"if",locations:[{start:{line:108,column:6},end:{line:130,column:7}},{start:{line:116,column:13},end:{line:130,column:7}}],line:108},12:{loc:{start:{line:116,column:13},end:{line:130,column:7}},type:"if",locations:[{start:{line:116,column:13},end:{line:130,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},13:{loc:{start:{line:119,column:8},end:{line:122,column:9}},type:"if",locations:[{start:{line:119,column:8},end:{line:122,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:119}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AACA,OAAO,cAAc;AACrB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAED,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,QAAM,QAAkC,CAAC;AAKzC,EAAC,SAAiB,OAAO,aAAa,CAAC,KAAa,SAAc;AAChE,UAAM,MAAM,KAAK;AACjB,UAAM,KAAK;AAAA,MACT,MAAS,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,MAC5D,IAAS,WAAW,IAAI,IAAI,YAAa,GAAG,IAAI,WAAW;AAAA,MAC3D,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAEA,MAAI;AACF,aAAS,MAAM,IAAI;AAAA,EACrB,SACM,GAAG;AAAA,EAET;AACA,SAAO;AACT,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAC9E,QAAM,QAAkC,CAAC;AACzC,QAAM,EAAC,OAAM,IAAI;AACjB,QAAM,EAAC,QAAO,IAAI;AAElB,SAAO,aAAa,CAAC,KAAa,SAAc;AAC9C,UAAM,MAAM,KAAK;AACjB,UAAM,KAAK;AAAA,MACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,MACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,MACrD,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AACA,MAAI;AACF,WAAO,MAAM,IAAI;AAAA,EACnB,SACO,GAAG;AAAA,EAEV;AAEA,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a994e12e3e6547813b669a430e6cb42da5d99bba"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return or=function(){return a},a}or();or().s[0]++;Wh.defineMode("mgl",(n,e)=>(or().f[0]++,or().s[1]++,Wh.modes.javascript({...n,json:!0},e)));or().s[2]++;Wh.registerHelper("lint","json",n=>{or().f[1]++;const e=(or().s[3]++,[]);or().s[4]++,mB.parser.parseError=(t,r)=>{or().f[2]++;const i=(or().s[5]++,r.loc);or().s[6]++,e.push({from:Wh.Pos(i.first_line-1,i.first_column),to:Wh.Pos(i.last_line-1,i.last_column),message:t})},or().s[7]++;try{or().s[8]++,mB.parse(n)}catch{}return or().s[9]++,e});or().s[10]++;Wh.registerHelper("lint","mgl",(n,e,t)=>{or().f[3]++;const r=(or().s[11]++,[]),{parser:i}=(or().s[12]++,mB),{context:s}=(or().s[13]++,e);or().s[14]++,i.parseError=(b,E)=>{or().f[4]++;const S=(or().s[15]++,E.loc);or().s[16]++,r.push({from:Wh.Pos(S.first_line-1,S.first_column),to:Wh.Pos(S.last_line-1,S.last_column),message:b})},or().s[17]++;try{or().s[18]++,i.parse(n)}catch{}if(or().s[19]++,r.length>0)return or().b[0][0]++,or().s[20]++,r;or().b[0][1]++;const a=(or().s[21]++,Ole(n)),o=(or().s[22]++,JSON.parse(n));function d(b,E){if(or().f[5]++,or().s[23]++,b){if(or().b[1][1]++,or().s[25]++,E.length<1)return or().b[2][0]++,or().s[26]++,b;if(or().b[2][1]++,or().s[27]++,b.children){or().b[3][1]++;const S=(or().s[29]++,E[0]);let O;return or().s[30]++,S.match(/^[0-9]+$/)?(or().b[4][0]++,or().s[31]++,O=b.children[E[0]]):(or().b[4][1]++,or().s[32]++,O=b.children.find(k=>(or().f[6]++,or().s[33]++,or().b[5][0]++,k.key&&(or().b[5][1]++,k.key.type==="Identifier")&&(or().b[5][2]++,k.key.value===S))),or().s[34]++,O?(or().b[6][0]++,or().s[35]++,O=O.value):or().b[6][1]++),or().s[36]++,d(O,E.slice(1))}else{or().b[3][0]++,or().s[28]++;return}}else{or().b[1][0]++,or().s[24]++;return}}let g=(or().s[37]++,null);if(or().s[38]++,s==="layer"){or().b[7][0]++;const b=(or().s[39]++,Tf({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[o]}));or().s[40]++,b?(or().b[8][0]++,or().s[41]++,g={result:"error",value:b.filter(E=>(or().f[7]++,or().s[42]++,!E.message.match(/^layers\[0\]: source ".*" not found$/))).map(E=>{or().f[8]++;const S=(or().s[43]++,E.message.replace(/^layers\[0\]./,"").split(":"));return or().s[44]++,{name:"",key:S[0],message:S[1]}})}):or().b[8][1]++}else if(or().b[7][1]++,or().s[45]++,s==="expression")or().b[9][0]++,or().s[46]++,g=BV.createExpression(o,e.spec);else throw or().b[9][1]++,or().s[47]++,new Error(`Invalid context ${s}`);if(or().s[48]++,(g==null?void 0:g.result)==="error"){or().b[10][0]++;const b=(or().s[49]++,g.value);or().s[50]++,b.forEach(E=>{or().f[9]++;const{key:S,message:O}=(or().s[51]++,E);if(or().s[52]++,S)if(or().b[11][1]++,or().s[56]++,S){or().b[12][0]++;const k=(or().s[57]++,S.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),U=(or().s[58]++,d(a,k));if(or().s[59]++,U)or().b[13][1]++;else{or().b[13][0]++,or().s[60]++,console.warn("Something went wrong parsing error:",E),or().s[61]++;return}const{loc:z}=(or().s[62]++,U),{start:q,end:Q}=(or().s[63]++,z);or().s[64]++,r.push({from:Wh.Pos(q.line-1,q.column),to:Wh.Pos(Q.line-1,Q.column),message:O})}else or().b[12][1]++;else{or().b[11][0]++;const k=(or().s[53]++,t.getLineHandle(t.lastLine())),U=(or().s[54]++,{from:Wh.Pos(t.firstLine(),0),to:Wh.Pos(t.lastLine(),k.text.length),message:O});or().s[55]++,r.push(U)}})}else or().b[10][1]++;return or().s[65]++,r});function vr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return vr=function(){return a},a}vr();class kN extends Zn.Component{constructor(t){vr().f[5]++,vr().s[4]++;super(t);On(this,"_keyEvent");On(this,"_doc");On(this,"_el",(vr().s[2]++,null));On(this,"_cancelNextChange",(vr().s[3]++,!1));On(this,"onPointerDown",(vr().s[11]++,()=>{vr().f[7]++,vr().s[12]++,this._keyEvent="pointer"}));On(this,"onFocus",(vr().s[13]++,()=>{vr().f[8]++,vr().s[14]++,this.props.onFocus?(vr().b[2][0]++,vr().s[15]++,this.props.onFocus()):vr().b[2][1]++,vr().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));On(this,"onBlur",(vr().s[17]++,()=>{vr().f[9]++,vr().s[18]++,this._keyEvent="keyboard",vr().s[19]++,this.props.onBlur?(vr().b[3][0]++,vr().s[20]++,this.props.onBlur()):vr().b[3][1]++,vr().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));On(this,"onChange",(vr().s[28]++,t=>{if(vr().f[12]++,vr().s[29]++,this._cancelNextChange){vr().b[6][0]++,vr().s[30]++,this._cancelNextChange=!1,vr().s[31]++,this.setState({prevValue:this._doc.getValue()}),vr().s[32]++;return}else vr().b[6][1]++;const r=(vr().s[33]++,this._doc.getValue());if(vr().s[34]++,this.state.prevValue!==r){vr().b[7][0]++;let i,s;vr().s[35]++;try{vr().s[36]++,i=JSON.parse(r)}catch(a){vr().s[37]++,s=a,vr().s[38]++,console.warn(a)}vr().s[39]++,vr().b[9][0]++,s&&(vr().b[9][1]++,this.props.onJSONInvalid)?(vr().b[8][0]++,vr().s[40]++,this.props.onJSONInvalid()):(vr().b[8][1]++,vr().s[41]++,this.props.onChange?(vr().b[10][0]++,vr().s[42]++,this.props.onChange(i)):vr().b[10][1]++,vr().s[43]++,this.props.onJSONValid?(vr().b[11][0]++,vr().s[44]++,this.props.onJSONValid()):vr().b[11][1]++)}else vr().b[7][1]++;vr().s[45]++,this.setState({prevValue:r})}));vr().s[5]++,this._keyEvent="keyboard",vr().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){vr().f[6]++,vr().s[7]++,this._doc=Wh(this._el,{value:this.props.getValue(this.props.layer),mode:(vr().b[0][0]++,this.props.mode||(vr().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(vr().b[1][0]++,this.props.lint||(vr().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),vr().s[8]++,this._doc.on("change",this.onChange),vr().s[9]++,this._doc.on("focus",this.onFocus),vr().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){vr().f[10]++,vr().s[22]++,this._doc.off("change",this.onChange),vr().s[23]++,this._doc.off("focus",this.onFocus),vr().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){vr().f[11]++,vr().s[25]++,vr().b[5][0]++,!this.state.isEditing&&(vr().b[5][1]++,t.layer!==this.props.layer)?(vr().b[4][0]++,vr().s[26]++,this._cancelNextChange=!0,vr().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):vr().b[4][1]++}render(){vr().f[13]++;const t=(vr().s[46]++,this.props.t),{showMessage:r}=(vr().s[47]++,this.state),i=(vr().s[48]++,{});return vr().s[49]++,this.props.maxHeight?(vr().b[12][0]++,vr().s[50]++,i.maxHeight=this.props.maxHeight):vr().b[12][1]++,vr().s[51]++,le.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[le.jsx("div",{className:tm("JSONEditor__message",{"JSONEditor__message--on":r}),children:le.jsxs(M0,{t,children:["Press ",le.jsx("kbd",{children:"ESC"})," to lose focus"]})}),le.jsx("div",{className:tm("codemirror-container",this.props.className),ref:s=>(vr().f[14]++,vr().s[52]++,this._el=s),style:i})]})}}On(kN,"defaultProps",(vr().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(vr().f[0]++,vr().s[1]++,IN(t,{indent:2,maxLength:40})),onFocus:()=>{vr().f[1]++},onBlur:()=>{vr().f[2]++},onJSONInvalid:()=>{vr().f[3]++},onJSONValid:()=>{vr().f[4]++}}));const Ile=(vr().s[53]++,$s()(kN));function K2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return K2=function(){return a},a}K2();class xI extends Zn.Component{render(){return K2().f[0]++,K2().s[0]++,le.jsx(Ile,{...this.props})}}var M_="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",kle="M7,10L12,15L17,10H7Z",Tle="M7,15L12,10L17,15H7Z",wI="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Eg(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Eg=function(){return a},a}Eg();const MI=(Eg().s[0]++,["all","any","none"]);Eg().s[1]++;const Ple=(Eg().s[2]++,Object.keys(ts.filter_operator.values).filter(n=>(Eg().f[0]++,Eg().s[3]++,MI.indexOf(n)<0)));function bi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return bi=function(){return a},a}bi();function Rle(n){return bi().f[0]++,bi().s[0]++,n===""?(bi().b[0][0]++,bi().s[1]++,n):(bi().b[0][1]++,bi().s[2]++,isNaN(n)?(bi().b[1][0]++,bi().s[3]++,n):(bi().b[1][1]++,bi().s[4]++,parseFloat(n)))}function Kle(n){bi().f[1]++;const e=(bi().s[5]++,typeof n=="string");if(bi().s[6]++,e)bi().b[2][1]++;else return bi().b[2][0]++,bi().s[7]++,n;return bi().s[8]++,n.match(/^\s*true\s*$/)?(bi().b[3][0]++,bi().s[9]++,!0):(bi().b[3][1]++,bi().s[10]++,n.match(/^\s*false\s*$/)?(bi().b[4][0]++,bi().s[11]++,!1):(bi().b[4][1]++,bi().s[12]++,n))}function Dle(n){return bi().f[2]++,bi().s[13]++,n=Rle(n),bi().s[14]++,n=Kle(n),bi().s[15]++,n}class TN extends Zn.Component{onFilterPartChanged(e,t,r){bi().f[3]++;let i=(bi().s[17]++,[e,t,...r.map(Dle)]);bi().s[18]++,bi().b[6][0]++,e==="has"||(bi().b[6][1]++,e==="!has")?(bi().b[5][0]++,bi().s[19]++,i=[e,t]):(bi().b[5][1]++,bi().s[20]++,r.length===0?(bi().b[7][0]++,bi().s[21]++,i=[e,t,""]):bi().b[7][1]++),bi().s[22]++,this.props.onChange(i)}render(){bi().f[4]++;const e=(bi().s[23]++,this.props.filter),t=(bi().s[24]++,e[0]),r=(bi().s[25]++,e[1]),i=(bi().s[26]++,e.slice(2));return bi().s[27]++,le.jsxs("div",{className:"maputnik-filter-editor-single",children:[le.jsx("div",{className:"maputnik-filter-editor-property",children:le.jsx(zy,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(bi().f[5]++,bi().s[28]++,[s,s])),onChange:s=>(bi().f[6]++,bi().s[29]++,this.onFilterPartChanged(t,s,i))})}),le.jsx("div",{className:"maputnik-filter-editor-operator",children:le.jsx(Ng,{"aria-label":"function",value:t,onChange:s=>(bi().f[7]++,bi().s[30]++,this.onFilterPartChanged(s,r,i)),options:Ple})}),(bi().b[8][0]++,i.length>0&&(bi().b[8][1]++,le.jsx("div",{className:"maputnik-filter-editor-args",children:le.jsx(kf,{"aria-label":"value",value:i.join(","),onChange:s=>(bi().f[8]++,bi().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}On(TN,"defaultProps",(bi().s[16]++,{properties:{}}));function uy(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="cef1671f65ba48cf49a518a548a597faa051d67d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SAOD,KAPC;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cef1671f65ba48cf49a518a548a597faa051d67d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return uy=function(){return a},a}uy();class Lle extends Zn.Component{render(){uy().f[0]++;const e=(uy().s[0]++,this.props.t);return uy().s[1]++,le.jsxs("div",{className:"maputnik-filter-editor-block",children:[le.jsx("div",{className:"maputnik-filter-editor-block-action",children:le.jsx(Ha,{className:"maputnik-delete-filter",onClick:this.props.onDelete,title:e("Delete filter block"),children:le.jsx(ky,{})})}),le.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children})]})}}const Fle=(uy().s[2]++,$s()(Lle));var R5,v9;function Ule(){if(v9)return R5;v9=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",a="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",d="(?:"+a+"|"+o+")",g="[^"+e+"]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",S="\\u200d",O=d+"?",k="["+i+"]?",U="(?:"+S+"(?:"+[g,b,E].join("|")+")"+k+O+")*",z=k+O+U,q="(?:"+[g+a+"?",a,b,E,s].join("|")+")",Q=RegExp(o+"(?="+o+")|"+q+z,"g"),re=RegExp("["+S+e+t+r+i+"]"),X=typeof window=="object"&&window&&window.Object===Object&&window,Y=typeof self=="object"&&self&&self.Object===Object&&self,J=X||Y||Function("return this")();function N(ft){return ft.split("")}function ie(ft){return re.test(ft)}function he(ft){return ie(ft)?de(ft):N(ft)}function de(ft){return ft.match(Q)||[]}var we=Object.prototype,fe=we.toString,be=J.Symbol,Pe=be?be.prototype:void 0,pe=Pe?Pe.toString:void 0;function it(ft,Lt,Kt){var Fe=-1,Te=ft.length;Lt<0&&(Lt=-Lt>Te?0:Te+Lt),Kt=Kt>Te?Te:Kt,Kt<0&&(Kt+=Te),Te=Lt>Kt?0:Kt-Lt>>>0,Lt>>>=0;for(var Se=Array(Te);++Fe<Te;)Se[Fe]=ft[Fe+Lt];return Se}function We(ft){if(typeof ft=="string")return ft;if(Ne(ft))return pe?pe.call(ft):"";var Lt=ft+"";return Lt=="0"&&1/ft==-1/0?"-0":Lt}function $e(ft,Lt,Kt){var Fe=ft.length;return Kt=Kt===void 0?Fe:Kt,!Lt&&Kt>=Fe?ft:it(ft,Lt,Kt)}function ht(ft){return function(Lt){Lt=at(Lt);var Kt=ie(Lt)?he(Lt):void 0,Fe=Kt?Kt[0]:Lt.charAt(0),Te=Kt?$e(Kt,1).join(""):Lt.slice(1);return Fe[ft]()+Te}}function De(ft){return!!ft&&typeof ft=="object"}function Ne(ft){return typeof ft=="symbol"||De(ft)&&fe.call(ft)==n}function at(ft){return ft==null?"":We(ft)}function wt(ft){return Ct(at(ft).toLowerCase())}var Ct=ht("toUpperCase");return R5=wt,R5}var zle=Ule();const SI=La(zle);function Lp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Lp=function(){return a},a}Lp();function Hx(n){Lp().f[0]++;let e;const t=(Lp().s[0]++,n.split("-"));return Lp().s[1]++,t.length>1?(Lp().b[0][0]++,Lp().s[2]++,e=n.split("-").slice(1).join(" ")):(Lp().b[0][1]++,Lp().s[3]++,e=n),Lp().s[4]++,SI(e)}function _o(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _o=function(){return a},a}_o();class PN extends Zn.Component{constructor(t){_o().f[2]++,_o().s[1]++;super(t);On(this,"onJSONInvalid",(_o().s[3]++,t=>{_o().f[3]++,_o().s[4]++,this.setState({jsonError:!0})}));On(this,"onJSONValid",(_o().s[5]++,()=>{_o().f[4]++,_o().s[6]++,this.setState({jsonError:!1})}));_o().s[2]++,this.state={jsonError:!1}}render(){_o().f[5]++;const{t,errors:r,fieldName:i,fieldType:s,value:a,canUndo:o}=(_o().s[7]++,this.props),{jsonError:d}=(_o().s[8]++,this.state),g=(_o().s[9]++,o?(_o().b[0][0]++,!o()):(_o().b[0][1]++,!0)),b=(_o().s[10]++,le.jsxs(le.Fragment,{children:[(_o().b[1][0]++,this.props.onUndo&&(_o().b[1][1]++,le.jsx(Ha,{onClick:this.props.onUndo,disabled:g,className:"maputnik-delete-stop",title:t("Revert from expression"),children:le.jsx(CH,{})},"undo_action"))),le.jsx(Ha,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:le.jsx(ky,{})},"delete_action")]})),E=(_o().s[11]++,s===void 0?(_o().b[2][0]++,i):(_o().b[2][1]++,`${s}.${i}`)),S=(_o().s[12]++,r[E]),O=(_o().s[13]++,`${E}[`),k=(_o().s[14]++,[]);function U(z){return _o().f[6]++,_o().s[15]++,IN(z,{indent:2,maxLength:38})}return _o().s[16]++,d?(_o().b[3][0]++,_o().s[17]++,k.push({message:"Invalid JSON"})):(_o().b[3][1]++,_o().s[18]++,Object.entries(r).filter(([z,q])=>(_o().f[7]++,_o().s[19]++,z.startsWith(O))).forEach(([z,q])=>(_o().f[8]++,_o().s[20]++,k.push(q))),_o().s[21]++,S?(_o().b[4][0]++,_o().s[22]++,k.push(S)):_o().b[4][1]++),_o().s[23]++,le.jsx(ga,{error:k,fieldSpec:this.props.fieldSpec,label:t(Hx(this.props.fieldName)),action:b,wideMode:!0,children:le.jsx(xI,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:a,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:U,onChange:this.props.onChange})})}}On(PN,"defaultProps",(_o().s[0]++,{errors:{},onFocus:()=>{_o().f[0]++},onBlur:()=>{_o().f[1]++}}));const RN=(_o().s[24]++,$s()(PN));function Kn(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Kn=function(){return a},a}Kn();function f0(n){Kn().f[0]++;const e=(Kn().s[0]++,Kn().b[0][0]++,n.filter||(Kn().b[0][1]++,["all"]));if(Kn().s[1]++,Array.isArray(e))Kn().b[1][1]++;else return Kn().b[1][0]++,Kn().s[2]++,e;let t=(Kn().s[3]++,e[0]),r=(Kn().s[4]++,e.slice(1));return Kn().s[5]++,MI.indexOf(t)<0?(Kn().b[2][0]++,Kn().s[6]++,t="all",Kn().s[7]++,r=[e.slice(0)]):Kn().b[2][1]++,Kn().s[8]++,[t,...r]}function jle(n){return Kn().f[1]++,Kn().s[9]++,EV(Nle(n)).layers[0].filter}function Nle(n){return Kn().f[2]++,Kn().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Gle=(Kn().s[11]++,["all","any","none"]);function _9(n){if(Kn().f[3]++,Kn().s[12]++,Kn().b[4][0]++,n.length===1&&(Kn().b[4][1]++,Gle.includes(n[0])))return Kn().b[3][0]++,Kn().s[13]++,!0;Kn().b[3][1]++;const e=(Kn().s[14]++,Uv(n));return Kn().s[15]++,!$2.isEqual(e,n)}function C9(n){return Kn().f[4]++,Kn().s[16]++,MI.indexOf(n[0])>=0}function Wle(n){return Kn().f[5]++,Kn().s[17]++,C9(n)?(Kn().b[5][0]++,Kn().s[18]++,n.slice(1).map(e=>(Kn().f[6]++,Kn().s[19]++,C9(e))).filter(e=>(Kn().f[7]++,Kn().s[20]++,e==!0)).length>0):(Kn().b[5][1]++,Kn().s[21]++,!1)}class KN extends Zn.Component{constructor(t){Kn().f[8]++,Kn().s[23]++;super(t);On(this,"addFilterItem",(Kn().s[31]++,()=>{Kn().f[11]++;const t=(Kn().s[32]++,f0(this.props).slice(0));Kn().s[33]++,t.push(["==","name",""]),Kn().s[34]++,this.props.onChange(t)}));On(this,"onToggleDoc",(Kn().s[35]++,t=>{Kn().f[12]++,Kn().s[36]++,this.setState({showDoc:t})}));On(this,"makeFilter",(Kn().s[37]++,()=>{Kn().f[13]++,Kn().s[38]++,this.setState({displaySimpleFilter:!0})}));On(this,"makeExpression",(Kn().s[39]++,()=>{Kn().f[14]++;const t=(Kn().s[40]++,f0(this.props));Kn().s[41]++,this.props.onChange(jle(t)),Kn().s[42]++,this.setState({displaySimpleFilter:!1})}));Kn().s[24]++,this.state={showDoc:!1,displaySimpleFilter:_9(f0(t))}}onFilterPartChanged(t,r){Kn().f[9]++;const i=(Kn().s[25]++,f0(this.props).slice(0));Kn().s[26]++,i[t]=r,Kn().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Kn().f[10]++;const r=(Kn().s[28]++,f0(this.props).slice(0));Kn().s[29]++,r.splice(t+1,1),Kn().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Kn().f[15]++;const i=(Kn().s[43]++,_9(f0(t)));return Kn().s[44]++,Kn().b[7][0]++,!i&&(Kn().b[7][1]++,r.displaySimpleFilter===!0)?(Kn().b[6][0]++,Kn().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Kn().b[6][1]++,Kn().s[46]++,Kn().b[9][0]++,i&&(Kn().b[9][1]++,r.displaySimpleFilter===!1)?(Kn().b[8][0]++,Kn().s[47]++,{valueIsSimpleFilter:!0}):(Kn().b[8][1]++,Kn().s[48]++,{valueIsSimpleFilter:!1}))}render(){Kn().f[16]++;const{errors:t,t:r}=(Kn().s[49]++,this.props),{displaySimpleFilter:i}=(Kn().s[50]++,this.state),s=(Kn().s[51]++,{doc:Ys.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),a=(Kn().s[52]++,["all"]),o=(Kn().s[53]++,Kn().b[10][0]++,i&&(Kn().b[10][1]++,Wle(f0(this.props))));if(Kn().s[54]++,o)return Kn().b[11][0]++,Kn().s[55]++,le.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[le.jsx("p",{children:r("Nested filters are not supported.")}),le.jsxs(Ha,{onClick:this.makeExpression,title:r("Convert to expression"),children:[le.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:M_})}),r("Upgrade to expression")]})]});if(Kn().b[11][1]++,Kn().s[56]++,i){Kn().b[12][0]++;const d=(Kn().s[57]++,f0(this.props)),g=(Kn().s[58]++,d[0]),b=(Kn().s[59]++,d.slice(1)),E=(Kn().s[60]++,le.jsx("div",{children:le.jsx(Ha,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:M_})})})})),S=(Kn().s[61]++,b.map((O,k)=>{Kn().f[17]++;const U=(Kn().s[62]++,t[`filter[${k+1}]`]);return Kn().s[63]++,le.jsxs("div",{children:[le.jsx(Fle,{onDelete:this.deleteFilterItem.bind(this,k),children:le.jsx(TN,{properties:this.props.properties,filter:O,onChange:this.onFilterPartChanged.bind(this,k+1)})},k),(Kn().b[13][0]++,U&&(Kn().b[13][1]++,le.jsx("div",{className:"maputnik-inline-error",children:U.message},"error")))]},`block-${k}`)}));return Kn().s[64]++,le.jsxs(le.Fragment,{children:[le.jsx(ga,{fieldSpec:s,label:r("Filter"),action:E,children:le.jsx(Ng,{value:g,onChange:O=>(Kn().f[18]++,Kn().s[65]++,this.onFilterPartChanged(0,O)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),S,le.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:le.jsxs(Ha,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:wI})})," ",r("Add filter")]})},"buttons"),le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Kn().b[14][0]++,""):(Kn().b[14][1]++,"none")},children:le.jsx(_I,{fieldSpec:s})},"doc")]})}else{Kn().b[12][1]++;const{filter:d}=(Kn().s[66]++,this.props);return Kn().s[67]++,le.jsxs(le.Fragment,{children:[le.jsx(RN,{onDelete:()=>{Kn().f[19]++,Kn().s[68]++,this.setState({displaySimpleFilter:!0}),Kn().s[69]++,this.props.onChange(a)},fieldName:"filter",fieldSpec:s,value:d,errors:t,onChange:this.props.onChange}),(Kn().b[15][0]++,this.state.valueIsSimpleFilter&&(Kn().b[15][1]++,le.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",le.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}On(KN,"defaultProps",(Kn().s[22]++,{filter:["all"]}));const Qle=(Kn().s[70]++,$s()(KN));var g1={},hh={},y1={},K5,b9;function DN(){if(b9)return K5;b9=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return K5=n,K5}var D5,x9;function pp(){if(x9)return D5;x9=1;var n=DN(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return D5=t,D5}var L5,w9;function eC(){if(w9)return L5;w9=1;var n=pp(),e=n.Symbol;return L5=e,L5}var F5,M9;function qle(){if(M9)return F5;M9=1;var n=eC(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(a){var o=t.call(a,i),d=a[i];try{a[i]=void 0;var g=!0}catch{}var b=r.call(a);return g&&(o?a[i]=d:delete a[i]),b}return F5=s,F5}var U5,S9;function Yle(){if(S9)return U5;S9=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return U5=t,U5}var z5,E9;function Gg(){if(E9)return z5;E9=1;var n=eC(),e=qle(),t=Yle(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return z5=a,z5}var j5,B9;function Jh(){if(B9)return j5;B9=1;var n=Array.isArray;return j5=n,j5}var N5,O9;function sm(){if(O9)return N5;O9=1;function n(e){return e!=null&&typeof e=="object"}return N5=n,N5}var G5,I9;function $le(){if(I9)return G5;I9=1;var n=Gg(),e=Jh(),t=sm(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return G5=i,G5}var W5,k9;function Vle(){if(k9)return W5;k9=1;function n(e){return function(t,r,i){for(var s=-1,a=Object(t),o=i(t),d=o.length;d--;){var g=o[e?d:++s];if(r(a[g],g,a)===!1)break}return t}}return W5=n,W5}var Q5,T9;function LN(){if(T9)return Q5;T9=1;var n=Vle(),e=n();return Q5=e,Q5}var q5,P9;function Hle(){if(P9)return q5;P9=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return q5=n,q5}var Y5,R9;function Zle(){if(R9)return Y5;R9=1;var n=Gg(),e=sm(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return Y5=r,Y5}var $5,K9;function EI(){if(K9)return $5;K9=1;var n=Zle(),e=sm(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return $5=s,$5}var Tv={exports:{}},V5,D9;function Xle(){if(D9)return V5;D9=1;function n(){return!1}return V5=n,V5}Tv.exports;var L9;function Zx(){return L9||(L9=1,function(n,e){var t=pp(),r=Xle(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,a=s&&s.exports===i,o=a?t.Buffer:void 0,d=o?o.isBuffer:void 0,g=d||r;n.exports=g}(Tv,Tv.exports)),Tv.exports}var H5,F9;function BI(){if(F9)return H5;F9=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return H5=t,H5}var Z5,U9;function OI(){if(U9)return Z5;U9=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return Z5=e,Z5}var X5,z9;function Jle(){if(z9)return X5;z9=1;var n=Gg(),e=OI(),t=sm(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",d="[object Function]",g="[object Map]",b="[object Number]",E="[object Object]",S="[object RegExp]",O="[object Set]",k="[object String]",U="[object WeakMap]",z="[object ArrayBuffer]",q="[object DataView]",Q="[object Float32Array]",re="[object Float64Array]",X="[object Int8Array]",Y="[object Int16Array]",J="[object Int32Array]",N="[object Uint8Array]",ie="[object Uint8ClampedArray]",he="[object Uint16Array]",de="[object Uint32Array]",we={};we[Q]=we[re]=we[X]=we[Y]=we[J]=we[N]=we[ie]=we[he]=we[de]=!0,we[r]=we[i]=we[z]=we[s]=we[q]=we[a]=we[o]=we[d]=we[g]=we[b]=we[E]=we[S]=we[O]=we[k]=we[U]=!1;function fe(be){return t(be)&&e(be.length)&&!!we[n(be)]}return X5=fe,X5}var J5,j9;function II(){if(j9)return J5;j9=1;function n(e){return function(t){return e(t)}}return J5=n,J5}var Pv={exports:{}};Pv.exports;var N9;function kI(){return N9||(N9=1,function(n,e){var t=DN(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s&&t.process,o=function(){try{var d=i&&i.require&&i.require("util").types;return d||a&&a.binding&&a.binding("util")}catch{}}();n.exports=o}(Pv,Pv.exports)),Pv.exports}var ew,G9;function TI(){if(G9)return ew;G9=1;var n=Jle(),e=II(),t=kI(),r=t&&t.isTypedArray,i=r?e(r):n;return ew=i,ew}var tw,W9;function FN(){if(W9)return tw;W9=1;var n=Hle(),e=EI(),t=Jh(),r=Zx(),i=BI(),s=TI(),a=Object.prototype,o=a.hasOwnProperty;function d(g,b){var E=t(g),S=!E&&e(g),O=!E&&!S&&r(g),k=!E&&!S&&!O&&s(g),U=E||S||O||k,z=U?n(g.length,String):[],q=z.length;for(var Q in g)(b||o.call(g,Q))&&!(U&&(Q=="length"||O&&(Q=="offset"||Q=="parent")||k&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||i(Q,q)))&&z.push(Q);return z}return tw=d,tw}var nw,Q9;function PI(){if(Q9)return nw;Q9=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return nw=e,nw}var rw,q9;function UN(){if(q9)return rw;q9=1;function n(e,t){return function(r){return e(t(r))}}return rw=n,rw}var iw,Y9;function eue(){if(Y9)return iw;Y9=1;var n=UN(),e=n(Object.keys,Object);return iw=e,iw}var ow,$9;function tue(){if($9)return ow;$9=1;var n=PI(),e=eue(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return ow=i,ow}var sw,V9;function Pf(){if(V9)return sw;V9=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return sw=n,sw}var aw,H9;function RI(){if(H9)return aw;H9=1;var n=Gg(),e=Pf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var d=n(o);return d==r||d==i||d==t||d==s}return aw=a,aw}var lw,Z9;function jy(){if(Z9)return lw;Z9=1;var n=RI(),e=OI();function t(r){return r!=null&&e(r.length)&&!n(r)}return lw=t,lw}var uw,X9;function tC(){if(X9)return uw;X9=1;var n=FN(),e=tue(),t=jy();function r(i){return t(i)?n(i):e(i)}return uw=r,uw}var Aw,J9;function zN(){if(J9)return Aw;J9=1;var n=LN(),e=tC();function t(r,i){return r&&n(r,i,e)}return Aw=t,Aw}var cw,eP;function Xx(){if(eP)return cw;eP=1;function n(e){return e}return cw=n,cw}var dw,tP;function jN(){if(tP)return dw;tP=1;var n=Xx();function e(t){return typeof t=="function"?t:n}return dw=e,dw}var hw,nP;function KI(){if(nP)return hw;nP=1;var n=zN(),e=jN();function t(r,i){return r&&n(r,e(i))}return hw=t,hw}var fw,rP;function DI(){if(rP)return fw;rP=1;var n=UN(),e=n(Object.getPrototypeOf,Object);return fw=e,fw}var pw,iP;function NN(){if(iP)return pw;iP=1;var n=Gg(),e=DI(),t=sm(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,d=a.call(Object);function g(b){if(!t(b)||n(b)!=r)return!1;var E=e(b);if(E===null)return!0;var S=o.call(E,"constructor")&&E.constructor;return typeof S=="function"&&S instanceof S&&a.call(S)==d}return pw=g,pw}var mw,oP;function GN(){if(oP)return mw;oP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return mw=n,mw}var gw,sP;function nue(){if(sP)return gw;sP=1;function n(){this.__data__=[],this.size=0}return gw=n,gw}var yw,aP;function nC(){if(aP)return yw;aP=1;function n(e,t){return e===t||e!==e&&t!==t}return yw=n,yw}var vw,lP;function Jx(){if(lP)return vw;lP=1;var n=nC();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return vw=e,vw}var _w,uP;function rue(){if(uP)return _w;uP=1;var n=Jx(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,a=n(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():t.call(s,a,1),--this.size,!0}return _w=r,_w}var Cw,AP;function iue(){if(AP)return Cw;AP=1;var n=Jx();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Cw=e,Cw}var bw,cP;function oue(){if(cP)return bw;cP=1;var n=Jx();function e(t){return n(this.__data__,t)>-1}return bw=e,bw}var xw,dP;function sue(){if(dP)return xw;dP=1;var n=Jx();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return xw=e,xw}var ww,hP;function e3(){if(hP)return ww;hP=1;var n=nue(),e=rue(),t=iue(),r=oue(),i=sue();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,ww=s,ww}var Mw,fP;function aue(){if(fP)return Mw;fP=1;var n=e3();function e(){this.__data__=new n,this.size=0}return Mw=e,Mw}var Sw,pP;function lue(){if(pP)return Sw;pP=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return Sw=n,Sw}var Ew,mP;function uue(){if(mP)return Ew;mP=1;function n(e){return this.__data__.get(e)}return Ew=n,Ew}var Bw,gP;function Aue(){if(gP)return Bw;gP=1;function n(e){return this.__data__.has(e)}return Bw=n,Bw}var Ow,yP;function cue(){if(yP)return Ow;yP=1;var n=pp(),e=n["__core-js_shared__"];return Ow=e,Ow}var Iw,vP;function due(){if(vP)return Iw;vP=1;var n=cue(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return Iw=t,Iw}var kw,_P;function WN(){if(_P)return kw;_P=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return kw=t,kw}var Tw,CP;function hue(){if(CP)return Tw;CP=1;var n=RI(),e=due(),t=Pf(),r=WN(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,d=a.toString,g=o.hasOwnProperty,b=RegExp("^"+d.call(g).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E(S){if(!t(S)||e(S))return!1;var O=n(S)?b:s;return O.test(r(S))}return Tw=E,Tw}var Pw,bP;function fue(){if(bP)return Pw;bP=1;function n(e,t){return e==null?void 0:e[t]}return Pw=n,Pw}var Rw,xP;function Wg(){if(xP)return Rw;xP=1;var n=hue(),e=fue();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return Rw=t,Rw}var Kw,wP;function LI(){if(wP)return Kw;wP=1;var n=Wg(),e=pp(),t=n(e,"Map");return Kw=t,Kw}var Dw,MP;function t3(){if(MP)return Dw;MP=1;var n=Wg(),e=n(Object,"create");return Dw=e,Dw}var Lw,SP;function pue(){if(SP)return Lw;SP=1;var n=t3();function e(){this.__data__=n?n(null):{},this.size=0}return Lw=e,Lw}var Fw,EP;function mue(){if(EP)return Fw;EP=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Fw=n,Fw}var Uw,BP;function gue(){if(BP)return Uw;BP=1;var n=t3(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var a=this.__data__;if(n){var o=a[s];return o===e?void 0:o}return r.call(a,s)?a[s]:void 0}return Uw=i,Uw}var zw,OP;function yue(){if(OP)return zw;OP=1;var n=t3(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return zw=r,zw}var jw,IP;function vue(){if(IP)return jw;IP=1;var n=t3(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return jw=t,jw}var Nw,kP;function _ue(){if(kP)return Nw;kP=1;var n=pue(),e=mue(),t=gue(),r=yue(),i=vue();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,Nw=s,Nw}var Gw,TP;function Cue(){if(TP)return Gw;TP=1;var n=_ue(),e=e3(),t=LI();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Gw=r,Gw}var Ww,PP;function bue(){if(PP)return Ww;PP=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Ww=n,Ww}var Qw,RP;function n3(){if(RP)return Qw;RP=1;var n=bue();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Qw=e,Qw}var qw,KP;function xue(){if(KP)return qw;KP=1;var n=n3();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return qw=e,qw}var Yw,DP;function wue(){if(DP)return Yw;DP=1;var n=n3();function e(t){return n(this,t).get(t)}return Yw=e,Yw}var $w,LP;function Mue(){if(LP)return $w;LP=1;var n=n3();function e(t){return n(this,t).has(t)}return $w=e,$w}var Vw,FP;function Sue(){if(FP)return Vw;FP=1;var n=n3();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return Vw=e,Vw}var Hw,UP;function FI(){if(UP)return Hw;UP=1;var n=Cue(),e=xue(),t=wue(),r=Mue(),i=Sue();function s(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,Hw=s,Hw}var Zw,zP;function Eue(){if(zP)return Zw;zP=1;var n=e3(),e=LI(),t=FI(),r=200;function i(s,a){var o=this.__data__;if(o instanceof n){var d=o.__data__;if(!e||d.length<r-1)return d.push([s,a]),this.size=++o.size,this;o=this.__data__=new t(d)}return o.set(s,a),this.size=o.size,this}return Zw=i,Zw}var Xw,jP;function r3(){if(jP)return Xw;jP=1;var n=e3(),e=aue(),t=lue(),r=uue(),i=Aue(),s=Eue();function a(o){var d=this.__data__=new n(o);this.size=d.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,Xw=a,Xw}var Jw,NP;function Bue(){if(NP)return Jw;NP=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return Jw=e,Jw}var eM,GP;function Oue(){if(GP)return eM;GP=1;function n(e){return this.__data__.has(e)}return eM=n,eM}var tM,WP;function Iue(){if(WP)return tM;WP=1;var n=FI(),e=Bue(),t=Oue();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new n;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,tM=r,tM}var nM,QP;function kue(){if(QP)return nM;QP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return nM=n,nM}var rM,qP;function Tue(){if(qP)return rM;qP=1;function n(e,t){return e.has(t)}return rM=n,rM}var iM,YP;function QN(){if(YP)return iM;YP=1;var n=Iue(),e=kue(),t=Tue(),r=1,i=2;function s(a,o,d,g,b,E){var S=d&r,O=a.length,k=o.length;if(O!=k&&!(S&&k>O))return!1;var U=E.get(a),z=E.get(o);if(U&&z)return U==o&&z==a;var q=-1,Q=!0,re=d&i?new n:void 0;for(E.set(a,o),E.set(o,a);++q<O;){var X=a[q],Y=o[q];if(g)var J=S?g(Y,X,q,o,a,E):g(X,Y,q,a,o,E);if(J!==void 0){if(J)continue;Q=!1;break}if(re){if(!e(o,function(N,ie){if(!t(re,ie)&&(X===N||b(X,N,d,g,E)))return re.push(ie)})){Q=!1;break}}else if(!(X===Y||b(X,Y,d,g,E))){Q=!1;break}}return E.delete(a),E.delete(o),Q}return iM=s,iM}var oM,$P;function qN(){if($P)return oM;$P=1;var n=pp(),e=n.Uint8Array;return oM=e,oM}var sM,VP;function Pue(){if(VP)return sM;VP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return sM=n,sM}var aM,HP;function Rue(){if(HP)return aM;HP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return aM=n,aM}var lM,ZP;function Kue(){if(ZP)return lM;ZP=1;var n=eC(),e=qN(),t=nC(),r=QN(),i=Pue(),s=Rue(),a=1,o=2,d="[object Boolean]",g="[object Date]",b="[object Error]",E="[object Map]",S="[object Number]",O="[object RegExp]",k="[object Set]",U="[object String]",z="[object Symbol]",q="[object ArrayBuffer]",Q="[object DataView]",re=n?n.prototype:void 0,X=re?re.valueOf:void 0;function Y(J,N,ie,he,de,we,fe){switch(ie){case Q:if(J.byteLength!=N.byteLength||J.byteOffset!=N.byteOffset)return!1;J=J.buffer,N=N.buffer;case q:return!(J.byteLength!=N.byteLength||!we(new e(J),new e(N)));case d:case g:case S:return t(+J,+N);case b:return J.name==N.name&&J.message==N.message;case O:case U:return J==N+"";case E:var be=i;case k:var Pe=he&a;if(be||(be=s),J.size!=N.size&&!Pe)return!1;var pe=fe.get(J);if(pe)return pe==N;he|=o,fe.set(J,N);var it=r(be(J),be(N),he,de,we,fe);return fe.delete(J),it;case z:if(X)return X.call(J)==X.call(N)}return!1}return lM=Y,lM}var uM,XP;function YN(){if(XP)return uM;XP=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return uM=n,uM}var AM,JP;function $N(){if(JP)return AM;JP=1;var n=YN(),e=Jh();function t(r,i,s){var a=i(r);return e(r)?a:n(a,s(r))}return AM=t,AM}var cM,eR;function Due(){if(eR)return cM;eR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[s++]=o)}return a}return cM=n,cM}var dM,tR;function VN(){if(tR)return dM;tR=1;function n(){return[]}return dM=n,dM}var hM,nR;function UI(){if(nR)return hM;nR=1;var n=Due(),e=VN(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),n(i(a),function(o){return r.call(a,o)}))}:e;return hM=s,hM}var fM,rR;function HN(){if(rR)return fM;rR=1;var n=$N(),e=UI(),t=tC();function r(i){return n(i,t,e)}return fM=r,fM}var pM,iR;function Lue(){if(iR)return pM;iR=1;var n=HN(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o,d,g,b){var E=o&e,S=n(s),O=S.length,k=n(a),U=k.length;if(O!=U&&!E)return!1;for(var z=O;z--;){var q=S[z];if(!(E?q in a:r.call(a,q)))return!1}var Q=b.get(s),re=b.get(a);if(Q&&re)return Q==a&&re==s;var X=!0;b.set(s,a),b.set(a,s);for(var Y=E;++z<O;){q=S[z];var J=s[q],N=a[q];if(d)var ie=E?d(N,J,q,a,s,b):d(J,N,q,s,a,b);if(!(ie===void 0?J===N||g(J,N,o,d,b):ie)){X=!1;break}Y||(Y=q=="constructor")}if(X&&!Y){var he=s.constructor,de=a.constructor;he!=de&&"constructor"in s&&"constructor"in a&&!(typeof he=="function"&&he instanceof he&&typeof de=="function"&&de instanceof de)&&(X=!1)}return b.delete(s),b.delete(a),X}return pM=i,pM}var mM,oR;function Fue(){if(oR)return mM;oR=1;var n=Wg(),e=pp(),t=n(e,"DataView");return mM=t,mM}var gM,sR;function Uue(){if(sR)return gM;sR=1;var n=Wg(),e=pp(),t=n(e,"Promise");return gM=t,gM}var yM,aR;function zue(){if(aR)return yM;aR=1;var n=Wg(),e=pp(),t=n(e,"Set");return yM=t,yM}var vM,lR;function jue(){if(lR)return vM;lR=1;var n=Wg(),e=pp(),t=n(e,"WeakMap");return vM=t,vM}var _M,uR;function i3(){if(uR)return _M;uR=1;var n=Fue(),e=LI(),t=Uue(),r=zue(),i=jue(),s=Gg(),a=WN(),o="[object Map]",d="[object Object]",g="[object Promise]",b="[object Set]",E="[object WeakMap]",S="[object DataView]",O=a(n),k=a(e),U=a(t),z=a(r),q=a(i),Q=s;return(n&&Q(new n(new ArrayBuffer(1)))!=S||e&&Q(new e)!=o||t&&Q(t.resolve())!=g||r&&Q(new r)!=b||i&&Q(new i)!=E)&&(Q=function(re){var X=s(re),Y=X==d?re.constructor:void 0,J=Y?a(Y):"";if(J)switch(J){case O:return S;case k:return o;case U:return g;case z:return b;case q:return E}return X}),_M=Q,_M}var CM,AR;function Nue(){if(AR)return CM;AR=1;var n=r3(),e=QN(),t=Kue(),r=Lue(),i=i3(),s=Jh(),a=Zx(),o=TI(),d=1,g="[object Arguments]",b="[object Array]",E="[object Object]",S=Object.prototype,O=S.hasOwnProperty;function k(U,z,q,Q,re,X){var Y=s(U),J=s(z),N=Y?b:i(U),ie=J?b:i(z);N=N==g?E:N,ie=ie==g?E:ie;var he=N==E,de=ie==E,we=N==ie;if(we&&a(U)){if(!a(z))return!1;Y=!0,he=!1}if(we&&!he)return X||(X=new n),Y||o(U)?e(U,z,q,Q,re,X):t(U,z,N,q,Q,re,X);if(!(q&d)){var fe=he&&O.call(U,"__wrapped__"),be=de&&O.call(z,"__wrapped__");if(fe||be){var Pe=fe?U.value():U,pe=be?z.value():z;return X||(X=new n),re(Pe,pe,q,Q,X)}}return we?(X||(X=new n),r(U,z,q,Q,re,X)):!1}return CM=k,CM}var bM,cR;function ZN(){if(cR)return bM;cR=1;var n=Nue(),e=sm();function t(r,i,s,a,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,a,t,o)}return bM=t,bM}var xM,dR;function Gue(){if(dR)return xM;dR=1;var n=r3(),e=ZN(),t=1,r=2;function i(s,a,o,d){var g=o.length,b=g,E=!d;if(s==null)return!b;for(s=Object(s);g--;){var S=o[g];if(E&&S[2]?S[1]!==s[S[0]]:!(S[0]in s))return!1}for(;++g<b;){S=o[g];var O=S[0],k=s[O],U=S[1];if(E&&S[2]){if(k===void 0&&!(O in s))return!1}else{var z=new n;if(d)var q=d(k,U,O,s,a,z);if(!(q===void 0?e(U,k,t|r,d,z):q))return!1}}return!0}return xM=i,xM}var wM,hR;function XN(){if(hR)return wM;hR=1;var n=Pf();function e(t){return t===t&&!n(t)}return wM=e,wM}var MM,fR;function Wue(){if(fR)return MM;fR=1;var n=XN(),e=tC();function t(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,n(o)]}return i}return MM=t,MM}var SM,pR;function JN(){if(pR)return SM;pR=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return SM=n,SM}var EM,mR;function Que(){if(mR)return EM;mR=1;var n=Gue(),e=Wue(),t=JN();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(a){return a===i||n(a,i,s)}}return EM=r,EM}var BM,gR;function o3(){if(gR)return BM;gR=1;var n=Gg(),e=sm(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return BM=r,BM}var OM,yR;function zI(){if(yR)return OM;yR=1;var n=Jh(),e=o3(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||a!=null&&s in Object(a)}return OM=i,OM}var IM,vR;function que(){if(vR)return IM;vR=1;var n=FI(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],d=s.cache;if(d.has(o))return d.get(o);var g=r.apply(this,a);return s.cache=d.set(o,g)||d,g};return s.cache=new(t.Cache||n),s}return t.Cache=n,IM=t,IM}var kM,_R;function Yue(){if(_R)return kM;_R=1;var n=que(),e=500;function t(r){var i=n(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return kM=t,kM}var TM,CR;function $ue(){if(CR)return TM;CR=1;var n=Yue(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,d,g){s.push(d?g.replace(t,"$1"):o||a)}),s});return TM=r,TM}var PM,bR;function Vue(){if(bR)return PM;bR=1;var n=eC(),e=GN(),t=Jh(),r=o3(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(t(o))return e(o,a)+"";if(r(o))return s?s.call(o):"";var d=o+"";return d=="0"&&1/o==-1/0?"-0":d}return PM=a,PM}var RM,xR;function Hue(){if(xR)return RM;xR=1;var n=Vue();function e(t){return t==null?"":n(t)}return RM=e,RM}var KM,wR;function eG(){if(wR)return KM;wR=1;var n=Jh(),e=zI(),t=$ue(),r=Hue();function i(s,a){return n(s)?s:e(s,a)?[s]:t(r(s))}return KM=i,KM}var DM,MR;function s3(){if(MR)return DM;MR=1;var n=o3();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return DM=e,DM}var LM,SR;function tG(){if(SR)return LM;SR=1;var n=eG(),e=s3();function t(r,i){i=n(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return LM=t,LM}var FM,ER;function Zue(){if(ER)return FM;ER=1;var n=tG();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return FM=e,FM}var UM,BR;function Xue(){if(BR)return UM;BR=1;function n(e,t){return e!=null&&t in Object(e)}return UM=n,UM}var zM,OR;function Jue(){if(OR)return zM;OR=1;var n=eG(),e=EI(),t=Jh(),r=BI(),i=OI(),s=s3();function a(o,d,g){d=n(d,o);for(var b=-1,E=d.length,S=!1;++b<E;){var O=s(d[b]);if(!(S=o!=null&&g(o,O)))break;o=o[O]}return S||++b!=E?S:(E=o==null?0:o.length,!!E&&i(E)&&r(O,E)&&(t(o)||e(o)))}return zM=a,zM}var jM,IR;function eAe(){if(IR)return jM;IR=1;var n=Xue(),e=Jue();function t(r,i){return r!=null&&e(r,i,n)}return jM=t,jM}var NM,kR;function tAe(){if(kR)return NM;kR=1;var n=ZN(),e=Zue(),t=eAe(),r=zI(),i=XN(),s=JN(),a=s3(),o=1,d=2;function g(b,E){return r(b)&&i(E)?s(a(b),E):function(S){var O=e(S,b);return O===void 0&&O===E?t(S,b):n(E,O,o|d)}}return NM=g,NM}var GM,TR;function nAe(){if(TR)return GM;TR=1;function n(e){return function(t){return t==null?void 0:t[e]}}return GM=n,GM}var WM,PR;function rAe(){if(PR)return WM;PR=1;var n=tG();function e(t){return function(r){return n(r,t)}}return WM=e,WM}var QM,RR;function iAe(){if(RR)return QM;RR=1;var n=nAe(),e=rAe(),t=zI(),r=s3();function i(s){return t(s)?n(r(s)):e(s)}return QM=i,QM}var qM,KR;function oAe(){if(KR)return qM;KR=1;var n=Que(),e=tAe(),t=Xx(),r=Jh(),i=iAe();function s(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?r(a)?e(a[0],a[1]):n(a):i(a)}return qM=s,qM}var YM,DR;function sAe(){if(DR)return YM;DR=1;var n=jy();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var a=i.length,o=r?a:-1,d=Object(i);(r?o--:++o<a)&&s(d[o],o,d)!==!1;);return i}}return YM=e,YM}var $M,LR;function nG(){if(LR)return $M;LR=1;var n=zN(),e=sAe(),t=e(n);return $M=t,$M}var VM,FR;function aAe(){if(FR)return VM;FR=1;var n=nG(),e=jy();function t(r,i){var s=-1,a=e(r)?Array(r.length):[];return n(r,function(o,d,g){a[++s]=i(o,d,g)}),a}return VM=t,VM}var HM,UR;function lAe(){if(UR)return HM;UR=1;var n=GN(),e=oAe(),t=aAe(),r=Jh();function i(s,a){var o=r(s)?n:t;return o(s,e(a,3))}return HM=i,HM}var zR;function uAe(){if(zR)return y1;zR=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.flattenNames=void 0;var n=$le(),e=d(n),t=KI(),r=d(t),i=NN(),s=d(i),a=lAe(),o=d(a);function d(b){return b&&b.__esModule?b:{default:b}}var g=y1.flattenNames=function b(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=[];return(0,o.default)(E,function(O){Array.isArray(O)?b(O).map(function(k){return S.push(k)}):(0,s.default)(O)?(0,r.default)(O,function(k,U){k===!0&&S.push(U),S.push(U+"-"+k)}):(0,e.default)(O)&&S.push(O)}),S};return y1.default=g,y1}var v1={},ZM,jR;function rG(){if(jR)return ZM;jR=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return ZM=n,ZM}var XM,NR;function iG(){if(NR)return XM;NR=1;var n=Wg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return XM=e,XM}var JM,GR;function jI(){if(GR)return JM;GR=1;var n=iG();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return JM=e,JM}var eS,WR;function oG(){if(WR)return eS;WR=1;var n=jI(),e=nC(),t=Object.prototype,r=t.hasOwnProperty;function i(s,a,o){var d=s[a];(!(r.call(s,a)&&e(d,o))||o===void 0&&!(a in s))&&n(s,a,o)}return eS=i,eS}var tS,QR;function rC(){if(QR)return tS;QR=1;var n=oG(),e=jI();function t(r,i,s,a){var o=!s;s||(s={});for(var d=-1,g=i.length;++d<g;){var b=i[d],E=a?a(s[b],r[b],b,s,r):void 0;E===void 0&&(E=r[b]),o?e(s,b,E):n(s,b,E)}return s}return tS=t,tS}var nS,qR;function AAe(){if(qR)return nS;qR=1;var n=rC(),e=tC();function t(r,i){return r&&n(i,e(i),r)}return nS=t,nS}var rS,YR;function cAe(){if(YR)return rS;YR=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return rS=n,rS}var iS,$R;function dAe(){if($R)return iS;$R=1;var n=Pf(),e=PI(),t=cAe(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!n(a))return t(a);var o=e(a),d=[];for(var g in a)g=="constructor"&&(o||!i.call(a,g))||d.push(g);return d}return iS=s,iS}var oS,VR;function iC(){if(VR)return oS;VR=1;var n=FN(),e=dAe(),t=jy();function r(i){return t(i)?n(i,!0):e(i)}return oS=r,oS}var sS,HR;function hAe(){if(HR)return sS;HR=1;var n=rC(),e=iC();function t(r,i){return r&&n(i,e(i),r)}return sS=t,sS}var Rv={exports:{}};Rv.exports;var ZR;function sG(){return ZR||(ZR=1,function(n,e){var t=pp(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function d(g,b){if(b)return g.slice();var E=g.length,S=o?o(E):new g.constructor(E);return g.copy(S),S}n.exports=d}(Rv,Rv.exports)),Rv.exports}var aS,XR;function aG(){if(XR)return aS;XR=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return aS=n,aS}var lS,JR;function fAe(){if(JR)return lS;JR=1;var n=rC(),e=UI();function t(r,i){return n(r,e(r),i)}return lS=t,lS}var uS,eK;function lG(){if(eK)return uS;eK=1;var n=YN(),e=DI(),t=UI(),r=VN(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)n(o,t(a)),a=e(a);return o}:r;return uS=s,uS}var AS,tK;function pAe(){if(tK)return AS;tK=1;var n=rC(),e=lG();function t(r,i){return n(r,e(r),i)}return AS=t,AS}var cS,nK;function mAe(){if(nK)return cS;nK=1;var n=$N(),e=lG(),t=iC();function r(i){return n(i,t,e)}return cS=r,cS}var dS,rK;function gAe(){if(rK)return dS;rK=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return dS=t,dS}var hS,iK;function NI(){if(iK)return hS;iK=1;var n=qN();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return hS=e,hS}var fS,oK;function yAe(){if(oK)return fS;oK=1;var n=NI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return fS=e,fS}var pS,sK;function vAe(){if(sK)return pS;sK=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return pS=e,pS}var mS,aK;function _Ae(){if(aK)return mS;aK=1;var n=eC(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return mS=r,mS}var gS,lK;function uG(){if(lK)return gS;lK=1;var n=NI();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return gS=e,gS}var yS,uK;function CAe(){if(uK)return yS;uK=1;var n=NI(),e=yAe(),t=vAe(),r=_Ae(),i=uG(),s="[object Boolean]",a="[object Date]",o="[object Map]",d="[object Number]",g="[object RegExp]",b="[object Set]",E="[object String]",S="[object Symbol]",O="[object ArrayBuffer]",k="[object DataView]",U="[object Float32Array]",z="[object Float64Array]",q="[object Int8Array]",Q="[object Int16Array]",re="[object Int32Array]",X="[object Uint8Array]",Y="[object Uint8ClampedArray]",J="[object Uint16Array]",N="[object Uint32Array]";function ie(he,de,we){var fe=he.constructor;switch(de){case O:return n(he);case s:case a:return new fe(+he);case k:return e(he,we);case U:case z:case q:case Q:case re:case X:case Y:case J:case N:return i(he,we);case o:return new fe;case d:case E:return new fe(he);case g:return t(he);case b:return new fe;case S:return r(he)}}return yS=ie,yS}var vS,AK;function bAe(){if(AK)return vS;AK=1;var n=Pf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return vS=t,vS}var _S,cK;function AG(){if(cK)return _S;cK=1;var n=bAe(),e=DI(),t=PI();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return _S=r,_S}var CS,dK;function xAe(){if(dK)return CS;dK=1;var n=i3(),e=sm(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return CS=r,CS}var bS,hK;function wAe(){if(hK)return bS;hK=1;var n=xAe(),e=II(),t=kI(),r=t&&t.isMap,i=r?e(r):n;return bS=i,bS}var xS,fK;function MAe(){if(fK)return xS;fK=1;var n=i3(),e=sm(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return xS=r,xS}var wS,pK;function SAe(){if(pK)return wS;pK=1;var n=MAe(),e=II(),t=kI(),r=t&&t.isSet,i=r?e(r):n;return wS=i,wS}var MS,mK;function EAe(){if(mK)return MS;mK=1;var n=r3(),e=rG(),t=oG(),r=AAe(),i=hAe(),s=sG(),a=aG(),o=fAe(),d=pAe(),g=HN(),b=mAe(),E=i3(),S=gAe(),O=CAe(),k=AG(),U=Jh(),z=Zx(),q=wAe(),Q=Pf(),re=SAe(),X=tC(),Y=iC(),J=1,N=2,ie=4,he="[object Arguments]",de="[object Array]",we="[object Boolean]",fe="[object Date]",be="[object Error]",Pe="[object Function]",pe="[object GeneratorFunction]",it="[object Map]",We="[object Number]",$e="[object Object]",ht="[object RegExp]",De="[object Set]",Ne="[object String]",at="[object Symbol]",wt="[object WeakMap]",Ct="[object ArrayBuffer]",ft="[object DataView]",Lt="[object Float32Array]",Kt="[object Float64Array]",Fe="[object Int8Array]",Te="[object Int16Array]",Se="[object Int32Array]",Je="[object Uint8Array]",yt="[object Uint8ClampedArray]",dt="[object Uint16Array]",Ut="[object Uint32Array]",en={};en[he]=en[de]=en[Ct]=en[ft]=en[we]=en[fe]=en[Lt]=en[Kt]=en[Fe]=en[Te]=en[Se]=en[it]=en[We]=en[$e]=en[ht]=en[De]=en[Ne]=en[at]=en[Je]=en[yt]=en[dt]=en[Ut]=!0,en[be]=en[Pe]=en[wt]=!1;function Nt(yn,jn,Rr,sr,Jn,mr){var pr,xr=jn&J,Qn=jn&N,Er=jn&ie;if(Rr&&(pr=Jn?Rr(yn,sr,Jn,mr):Rr(yn)),pr!==void 0)return pr;if(!Q(yn))return yn;var Ge=U(yn);if(Ge){if(pr=S(yn),!xr)return a(yn,pr)}else{var Ae=E(yn),me=Ae==Pe||Ae==pe;if(z(yn))return s(yn,xr);if(Ae==$e||Ae==he||me&&!Jn){if(pr=Qn||me?{}:k(yn),!xr)return Qn?d(yn,i(pr,yn)):o(yn,r(pr,yn))}else{if(!en[Ae])return Jn?yn:{};pr=O(yn,Ae,xr)}}mr||(mr=new n);var Xe=mr.get(yn);if(Xe)return Xe;mr.set(yn,pr),re(yn)?yn.forEach(function(nn){pr.add(Nt(nn,jn,Rr,nn,yn,mr))}):q(yn)&&yn.forEach(function(nn,rr){pr.set(rr,Nt(nn,jn,Rr,rr,yn,mr))});var Et=Er?Qn?b:g:Qn?Y:X,Yt=Ge?void 0:Et(yn);return e(Yt||yn,function(nn,rr){Yt&&(rr=nn,nn=yn[rr]),t(pr,rr,Nt(nn,jn,Rr,rr,yn,mr))}),pr}return MS=Nt,MS}var SS,gK;function BAe(){if(gK)return SS;gK=1;var n=EAe(),e=1,t=4;function r(i){return n(i,e|t)}return SS=r,SS}var yK;function OAe(){if(yK)return v1;yK=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.mergeClasses=void 0;var n=KI(),e=s(n),t=BAe(),r=s(t),i=Object.assign||function(o){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(o[b]=g[b])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var a=v1.mergeClasses=function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=d.default&&(0,r.default)(d.default)||{};return g.map(function(E){var S=d[E];return S&&(0,e.default)(S,function(O,k){b[k]||(b[k]={}),b[k]=i({},b[k],S[k])}),E}),b};return v1.default=a,v1}var _1={},vK;function IAe(){if(vK)return _1;vK=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.autoprefix=void 0;var n=KI(),e=r(n),t=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a};function r(a){return a&&a.__esModule?a:{default:a}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var d=o&&o.split(" ");return{position:"absolute",top:d&&d[0],right:d&&d[1],bottom:d&&d[2],left:d&&d[3]}},extend:function(o,d){var g=d[o];return g||{extend:o}}},s=_1.autoprefix=function(o){var d={};return(0,e.default)(o,function(g,b){var E={};(0,e.default)(g,function(S,O){var k=i[O];k?E=t({},E,k(S)):E[O]=S}),d[b]=E}),d};return _1.default=s,_1}var C1={},_K;function kAe(){if(_K)return C1;_K=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.hover=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=Fa(),t=r(e);function r(d){return d&&d.__esModule?d:{default:d}}function i(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function s(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function a(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var o=C1.hover=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){a(S,E);function S(){var O,k,U,z;i(this,S);for(var q=arguments.length,Q=Array(q),re=0;re<q;re++)Q[re]=arguments[re];return z=(k=(U=s(this,(O=S.__proto__||Object.getPrototypeOf(S)).call.apply(O,[this].concat(Q))),U),U.state={hover:!1},U.handleMouseOver=function(){return U.setState({hover:!0})},U.handleMouseOut=function(){return U.setState({hover:!1})},U.render=function(){return t.default.createElement(b,{onMouseOver:U.handleMouseOver,onMouseOut:U.handleMouseOut},t.default.createElement(g,n({},U.props,U.state)))},k),s(U,z)}return S}(t.default.Component)};return C1.default=o,C1}var b1={},CK;function TAe(){if(CK)return b1;CK=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.active=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=Fa(),t=r(e);function r(d){return d&&d.__esModule?d:{default:d}}function i(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function s(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function a(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}var o=b1.active=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){a(S,E);function S(){var O,k,U,z;i(this,S);for(var q=arguments.length,Q=Array(q),re=0;re<q;re++)Q[re]=arguments[re];return z=(k=(U=s(this,(O=S.__proto__||Object.getPrototypeOf(S)).call.apply(O,[this].concat(Q))),U),U.state={active:!1},U.handleMouseDown=function(){return U.setState({active:!0})},U.handleMouseUp=function(){return U.setState({active:!1})},U.render=function(){return t.default.createElement(b,{onMouseDown:U.handleMouseDown,onMouseUp:U.handleMouseUp},t.default.createElement(g,n({},U.props,U.state)))},k),s(U,z)}return S}(t.default.Component)};return b1.default=o,b1}var ub={},bK;function PAe(){if(bK)return ub;bK=1,Object.defineProperty(ub,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=d};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return ub.default=n,ub}var xK;function mp(){if(xK)return hh;xK=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.ReactCSS=hh.loop=hh.handleActive=hh.handleHover=hh.hover=void 0;var n=uAe(),e=S(n),t=OAe(),r=S(t),i=IAe(),s=S(i),a=kAe(),o=S(a),d=TAe(),g=S(d),b=PAe(),E=S(b);function S(k){return k&&k.__esModule?k:{default:k}}hh.hover=o.default,hh.handleHover=o.default,hh.handleActive=g.default,hh.loop=E.default;var O=hh.ReactCSS=function(U){for(var z=arguments.length,q=Array(z>1?z-1:0),Q=1;Q<z;Q++)q[Q-1]=arguments[Q];var re=(0,e.default)(q),X=(0,r.default)(U,re);return(0,s.default)(X)};return hh.default=O,hh}var ES,wK;function cG(){if(wK)return ES;wK=1;var n=jI(),e=nC();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return ES=t,ES}var BS,MK;function RAe(){if(MK)return BS;MK=1;var n=jy(),e=sm();function t(r){return e(r)&&n(r)}return BS=t,BS}var OS,SK;function dG(){if(SK)return OS;SK=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return OS=n,OS}var IS,EK;function KAe(){if(EK)return IS;EK=1;var n=rC(),e=iC();function t(r){return n(r,e(r))}return IS=t,IS}var kS,BK;function DAe(){if(BK)return kS;BK=1;var n=cG(),e=sG(),t=uG(),r=aG(),i=AG(),s=EI(),a=Jh(),o=RAe(),d=Zx(),g=RI(),b=Pf(),E=NN(),S=TI(),O=dG(),k=KAe();function U(z,q,Q,re,X,Y,J){var N=O(z,Q),ie=O(q,Q),he=J.get(ie);if(he){n(z,Q,he);return}var de=Y?Y(N,ie,Q+"",z,q,J):void 0,we=de===void 0;if(we){var fe=a(ie),be=!fe&&d(ie),Pe=!fe&&!be&&S(ie);de=ie,fe||be||Pe?a(N)?de=N:o(N)?de=r(N):be?(we=!1,de=e(ie,!0)):Pe?(we=!1,de=t(ie,!0)):de=[]:E(ie)||s(ie)?(de=N,s(N)?de=k(N):(!b(N)||g(N))&&(de=i(ie))):we=!1}we&&(J.set(ie,de),X(de,ie,re,Y,J),J.delete(ie)),n(z,Q,de)}return kS=U,kS}var TS,OK;function LAe(){if(OK)return TS;OK=1;var n=r3(),e=cG(),t=LN(),r=DAe(),i=Pf(),s=iC(),a=dG();function o(d,g,b,E,S){d!==g&&t(g,function(O,k){if(S||(S=new n),i(O))r(d,g,k,b,o,E,S);else{var U=E?E(a(d,k),O,k+"",d,g,S):void 0;U===void 0&&(U=O),e(d,k,U)}},s)}return TS=o,TS}var PS,IK;function FAe(){if(IK)return PS;IK=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return PS=n,PS}var RS,kK;function UAe(){if(kK)return RS;kK=1;var n=FAe(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,d=e(a.length-i,0),g=Array(d);++o<d;)g[o]=a[i+o];o=-1;for(var b=Array(i+1);++o<i;)b[o]=a[o];return b[i]=s(g),n(r,this,b)}}return RS=t,RS}var KS,TK;function zAe(){if(TK)return KS;TK=1;function n(e){return function(){return e}}return KS=n,KS}var DS,PK;function jAe(){if(PK)return DS;PK=1;var n=zAe(),e=iG(),t=Xx(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return DS=r,DS}var LS,RK;function NAe(){if(RK)return LS;RK=1;var n=800,e=16,t=Date.now;function r(i){var s=0,a=0;return function(){var o=t(),d=e-(o-a);if(a=o,d>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return LS=r,LS}var FS,KK;function GAe(){if(KK)return FS;KK=1;var n=jAe(),e=NAe(),t=e(n);return FS=t,FS}var US,DK;function WAe(){if(DK)return US;DK=1;var n=Xx(),e=UAe(),t=GAe();function r(i,s){return t(e(i,s,n),i+"")}return US=r,US}var zS,LK;function QAe(){if(LK)return zS;LK=1;var n=nC(),e=jy(),t=BI(),r=Pf();function i(s,a,o){if(!r(o))return!1;var d=typeof a;return(d=="number"?e(o)&&t(a,o.length):d=="string"&&a in o)?n(o[a],s):!1}return zS=i,zS}var jS,FK;function qAe(){if(FK)return jS;FK=1;var n=WAe(),e=QAe();function t(r){return n(function(i,s){var a=-1,o=s.length,d=o>1?s[o-1]:void 0,g=o>2?s[2]:void 0;for(d=r.length>3&&typeof d=="function"?(o--,d):void 0,g&&e(s[0],s[1],g)&&(d=o<3?void 0:d,o=1),i=Object(i);++a<o;){var b=s[a];b&&r(i,b,a,d)}return i})}return jS=t,jS}var NS,UK;function hG(){if(UK)return NS;UK=1;var n=LAe(),e=qAe(),t=e(function(r,i,s){n(r,i,s)});return NS=t,NS}var GS={},x1={},Ab={},zK;function YAe(){return zK||(zK=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.calculateChange=function(e,t,r,i,s){var a=s.clientWidth,o=s.clientHeight,d=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,g=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,b=d-(s.getBoundingClientRect().left+window.pageXOffset),E=g-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var S=void 0;if(E<0?S=0:E>o?S=1:S=Math.round(E*100/o)/100,t.a!==S)return{h:t.h,s:t.s,l:t.l,a:S,source:"rgb"}}else{var O=void 0;if(b<0?O=0:b>a?O=1:O=Math.round(b*100/a)/100,i!==O)return{h:t.h,s:t.s,l:t.l,a:O,source:"rgb"}}return null}),Ab}var w1={},pv={},jK;function $Ae(){if(jK)return pv;jK=1,Object.defineProperty(pv,"__esModule",{value:!0});var n={},e=pv.render=function(r,i,s,a){if(typeof document>"u"&&!a)return null;var o=a?new a:document.createElement("canvas");o.width=s*2,o.height=s*2;var d=o.getContext("2d");return d?(d.fillStyle=r,d.fillRect(0,0,o.width,o.height),d.fillStyle=i,d.fillRect(0,0,s,s),d.translate(s,s),d.fillRect(0,0,s,s),o.toDataURL()):null};return pv.get=function(r,i,s,a){var o=r+"-"+i+"-"+s+(a?"-server":"");if(n[o])return n[o];var d=e(r,i,s,a);return n[o]=d,d},pv}var NK;function GI(){if(NK)return w1;NK=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.Checkboard=void 0;var n=Object.assign||function(b){for(var E=1;E<arguments.length;E++){var S=arguments[E];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(b[O]=S[O])}return b},e=Fa(),t=d(e),r=mp(),i=d(r),s=$Ae(),a=o(s);function o(b){if(b&&b.__esModule)return b;var E={};if(b!=null)for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(E[S]=b[S]);return E.default=b,E}function d(b){return b&&b.__esModule?b:{default:b}}var g=w1.Checkboard=function(E){var S=E.white,O=E.grey,k=E.size,U=E.renderers,z=E.borderRadius,q=E.boxShadow,Q=E.children,re=(0,i.default)({default:{grid:{borderRadius:z,boxShadow:q,absolute:"0px 0px 0px 0px",background:"url("+a.get(S,O,k,U.canvas)+") center left"}}});return(0,e.isValidElement)(Q)?t.default.cloneElement(Q,n({},Q.props,{style:n({},Q.props.style,re.grid)})):t.default.createElement("div",{style:re.grid})};return g.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},w1.default=g,w1}var GK;function VAe(){if(GK)return x1;GK=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.Alpha=void 0;var n=Object.assign||function(z){for(var q=1;q<arguments.length;q++){var Q=arguments[q];for(var re in Q)Object.prototype.hasOwnProperty.call(Q,re)&&(z[re]=Q[re])}return z},e=function(){function z(q,Q){for(var re=0;re<Q.length;re++){var X=Q[re];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(q,X.key,X)}}return function(q,Q,re){return Q&&z(q.prototype,Q),re&&z(q,re),q}}(),t=Fa(),r=E(t),i=mp(),s=E(i),a=YAe(),o=b(a),d=GI(),g=E(d);function b(z){if(z&&z.__esModule)return z;var q={};if(z!=null)for(var Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&(q[Q]=z[Q]);return q.default=z,q}function E(z){return z&&z.__esModule?z:{default:z}}function S(z,q){if(!(z instanceof q))throw new TypeError("Cannot call a class as a function")}function O(z,q){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:z}function k(z,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);z.prototype=Object.create(q&&q.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(z,q):z.__proto__=q)}var U=x1.Alpha=function(z){k(q,z);function q(){var Q,re,X,Y;S(this,q);for(var J=arguments.length,N=Array(J),ie=0;ie<J;ie++)N[ie]=arguments[ie];return Y=(re=(X=O(this,(Q=q.__proto__||Object.getPrototypeOf(q)).call.apply(Q,[this].concat(N))),X),X.handleChange=function(he){var de=o.calculateChange(he,X.props.hsl,X.props.direction,X.props.a,X.container);de&&typeof X.props.onChange=="function"&&X.props.onChange(de,he)},X.handleMouseDown=function(he){X.handleChange(he),window.addEventListener("mousemove",X.handleChange),window.addEventListener("mouseup",X.handleMouseUp)},X.handleMouseUp=function(){X.unbindEventListeners()},X.unbindEventListeners=function(){window.removeEventListener("mousemove",X.handleChange),window.removeEventListener("mouseup",X.handleMouseUp)},re),O(X,Y)}return e(q,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var re=this,X=this.props.rgb,Y=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+X.r+","+X.g+","+X.b+`, 0) 0%,
           rgba(`+X.r+","+X.g+","+X.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:X.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+X.r+","+X.g+","+X.b+`, 0) 0%,
           rgba(`+X.r+","+X.g+","+X.b+", 1) 100%)"},pointer:{left:0,top:X.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:Y.alpha},r.default.createElement("div",{style:Y.checkboard},r.default.createElement(g.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:Y.gradient}),r.default.createElement("div",{style:Y.container,ref:function(N){return re.container=N},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:Y.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:Y.slider}))))}}]),q}(t.PureComponent||t.Component);return x1.default=U,x1}var M1={},WK;function HAe(){if(WK)return M1;WK=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.EditableInput=void 0;var n=function(){function Q(re,X){for(var Y=0;Y<X.length;Y++){var J=X[Y];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(re,J.key,J)}}return function(re,X,Y){return X&&Q(re.prototype,X),Y&&Q(re,Y),re}}(),e=Fa(),t=s(e),r=mp(),i=s(r);function s(Q){return Q&&Q.__esModule?Q:{default:Q}}function a(Q,re,X){return re in Q?Object.defineProperty(Q,re,{value:X,enumerable:!0,configurable:!0,writable:!0}):Q[re]=X,Q}function o(Q,re){if(!(Q instanceof re))throw new TypeError("Cannot call a class as a function")}function d(Q,re){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:Q}function g(Q,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);Q.prototype=Object.create(re&&re.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,re):Q.__proto__=re)}var b=1,E=38,S=40,O=[E,S],k=function(re){return O.indexOf(re)>-1},U=function(re){return Number(String(re).replace(/%/g,""))},z=1,q=M1.EditableInput=function(Q){g(re,Q);function re(X){o(this,re);var Y=d(this,(re.__proto__||Object.getPrototypeOf(re)).call(this));return Y.handleBlur=function(){Y.state.blurValue&&Y.setState({value:Y.state.blurValue,blurValue:null})},Y.handleChange=function(J){Y.setUpdatedValue(J.target.value,J)},Y.handleKeyDown=function(J){var N=U(J.target.value);if(!isNaN(N)&&k(J.keyCode)){var ie=Y.getArrowOffset(),he=J.keyCode===E?N+ie:N-ie;Y.setUpdatedValue(he,J)}},Y.handleDrag=function(J){if(Y.props.dragLabel){var N=Math.round(Y.props.value+J.movementX);N>=0&&N<=Y.props.dragMax&&Y.props.onChange&&Y.props.onChange(Y.getValueObjectWithLabel(N),J)}},Y.handleMouseDown=function(J){Y.props.dragLabel&&(J.preventDefault(),Y.handleDrag(J),window.addEventListener("mousemove",Y.handleDrag),window.addEventListener("mouseup",Y.handleMouseUp))},Y.handleMouseUp=function(){Y.unbindEventListeners()},Y.unbindEventListeners=function(){window.removeEventListener("mousemove",Y.handleDrag),window.removeEventListener("mouseup",Y.handleMouseUp)},Y.state={value:String(X.value).toUpperCase(),blurValue:String(X.value).toUpperCase()},Y.inputId="rc-editable-input-"+z++,Y}return n(re,[{key:"componentDidUpdate",value:function(Y,J){this.props.value!==this.state.value&&(Y.value!==this.props.value||J.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(Y){return a({},this.props.label,Y)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||b}},{key:"setUpdatedValue",value:function(Y,J){var N=this.props.label?this.getValueObjectWithLabel(Y):Y;this.props.onChange&&this.props.onChange(N,J),this.setState({value:Y})}},{key:"render",value:function(){var Y=this,J=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:J.wrap},t.default.createElement("input",{id:this.inputId,style:J.input,ref:function(ie){return Y.input=ie},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:J.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),re}(e.PureComponent||e.Component);return M1.default=q,M1}var S1={},cb={},QK;function ZAe(){return QK||(QK=1,Object.defineProperty(cb,"__esModule",{value:!0}),cb.calculateChange=function(e,t,r,i){var s=i.clientWidth,a=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=o-(i.getBoundingClientRect().left+window.pageXOffset),b=d-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var E=void 0;if(b<0)E=359;else if(b>a)E=0;else{var S=-(b*100/a)+100;E=360*S/100}if(r.h!==E)return{h:E,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var O=void 0;if(g<0)O=0;else if(g>s)O=359;else{var k=g*100/s;O=360*k/100}if(r.h!==O)return{h:O,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),cb}var qK;function XAe(){if(qK)return S1;qK=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.Hue=void 0;var n=function(){function O(k,U){for(var z=0;z<U.length;z++){var q=U[z];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(k,q.key,q)}}return function(k,U,z){return U&&O(k.prototype,U),z&&O(k,z),k}}(),e=Fa(),t=d(e),r=mp(),i=d(r),s=ZAe(),a=o(s);function o(O){if(O&&O.__esModule)return O;var k={};if(O!=null)for(var U in O)Object.prototype.hasOwnProperty.call(O,U)&&(k[U]=O[U]);return k.default=O,k}function d(O){return O&&O.__esModule?O:{default:O}}function g(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function b(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:O}function E(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}var S=S1.Hue=function(O){E(k,O);function k(){var U,z,q,Q;g(this,k);for(var re=arguments.length,X=Array(re),Y=0;Y<re;Y++)X[Y]=arguments[Y];return Q=(z=(q=b(this,(U=k.__proto__||Object.getPrototypeOf(k)).call.apply(U,[this].concat(X))),q),q.handleChange=function(J){var N=a.calculateChange(J,q.props.direction,q.props.hsl,q.container);N&&typeof q.props.onChange=="function"&&q.props.onChange(N,J)},q.handleMouseDown=function(J){q.handleChange(J),window.addEventListener("mousemove",q.handleChange),window.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},z),b(q,Q)}return n(k,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var z=this,q=this.props.direction,Q=q===void 0?"horizontal":q,re=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:Q==="vertical"});return t.default.createElement("div",{style:re.hue},t.default.createElement("div",{className:"hue-"+Q,style:re.container,ref:function(Y){return z.container=Y},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:re.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:re.slider}))))}}]),k}(e.PureComponent||e.Component);return S1.default=S,S1}var E1={},YK;function JAe(){if(YK)return E1;YK=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.Raised=void 0;var n=Fa(),e=d(n),t=dp(),r=d(t),i=mp(),s=d(i),a=hG(),o=d(a);function d(b){return b&&b.__esModule?b:{default:b}}var g=E1.Raised=function(E){var S=E.zDepth,O=E.radius,k=E.background,U=E.children,z=E.styles,q=z===void 0?{}:z,Q=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+S+"px "+S*4+"px rgba(0,0,0,.24)",borderRadius:O,background:k}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},q),{"zDepth-1":S===1});return e.default.createElement("div",{style:Q.wrap},e.default.createElement("div",{style:Q.bg}),e.default.createElement("div",{style:Q.content},U))};return g.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},g.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},E1.default=g,E1}var B1={},WS,$K;function ece(){if($K)return WS;$K=1;var n=pp(),e=function(){return n.Date.now()};return WS=e,WS}var QS,VK;function tce(){if(VK)return QS;VK=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return QS=e,QS}var qS,HK;function nce(){if(HK)return qS;HK=1;var n=tce(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return qS=t,qS}var YS,ZK;function rce(){if(ZK)return YS;ZK=1;var n=nce(),e=Pf(),t=o3(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function d(g){if(typeof g=="number")return g;if(t(g))return r;if(e(g)){var b=typeof g.valueOf=="function"?g.valueOf():g;g=e(b)?b+"":b}if(typeof g!="string")return g===0?g:+g;g=n(g);var E=s.test(g);return E||a.test(g)?o(g.slice(2),E?2:8):i.test(g)?r:+g}return YS=d,YS}var $S,XK;function fG(){if(XK)return $S;XK=1;var n=Pf(),e=ece(),t=rce(),r="Expected a function",i=Math.max,s=Math.min;function a(o,d,g){var b,E,S,O,k,U,z=0,q=!1,Q=!1,re=!0;if(typeof o!="function")throw new TypeError(r);d=t(d)||0,n(g)&&(q=!!g.leading,Q="maxWait"in g,S=Q?i(t(g.maxWait)||0,d):S,re="trailing"in g?!!g.trailing:re);function X(be){var Pe=b,pe=E;return b=E=void 0,z=be,O=o.apply(pe,Pe),O}function Y(be){return z=be,k=setTimeout(ie,d),q?X(be):O}function J(be){var Pe=be-U,pe=be-z,it=d-Pe;return Q?s(it,S-pe):it}function N(be){var Pe=be-U,pe=be-z;return U===void 0||Pe>=d||Pe<0||Q&&pe>=S}function ie(){var be=e();if(N(be))return he(be);k=setTimeout(ie,J(be))}function he(be){return k=void 0,re&&b?X(be):(b=E=void 0,O)}function de(){k!==void 0&&clearTimeout(k),z=0,b=U=E=k=void 0}function we(){return k===void 0?O:he(e())}function fe(){var be=e(),Pe=N(be);if(b=arguments,E=this,U=be,Pe){if(k===void 0)return Y(U);if(Q)return clearTimeout(k),k=setTimeout(ie,d),X(U)}return k===void 0&&(k=setTimeout(ie,d)),O}return fe.cancel=de,fe.flush=we,fe}return $S=a,$S}var VS,JK;function ice(){if(JK)return VS;JK=1;var n=fG(),e=Pf(),t="Expected a function";function r(i,s,a){var o=!0,d=!0;if(typeof i!="function")throw new TypeError(t);return e(a)&&(o="leading"in a?!!a.leading:o,d="trailing"in a?!!a.trailing:d),n(i,s,{leading:o,maxWait:s,trailing:d})}return VS=r,VS}var db={},eD;function oce(){return eD||(eD=1,Object.defineProperty(db,"__esModule",{value:!0}),db.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,a=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,d=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,g=o-(r.getBoundingClientRect().left+window.pageXOffset),b=d-(r.getBoundingClientRect().top+window.pageYOffset);g<0?g=0:g>s&&(g=s),b<0?b=0:b>a&&(b=a);var E=g/s,S=1-b/a;return{h:t.h,s:E,v:S,a:t.a,source:"hsv"}}),db}var tD;function sce(){if(tD)return B1;tD=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.Saturation=void 0;var n=function(){function U(z,q){for(var Q=0;Q<q.length;Q++){var re=q[Q];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(z,re.key,re)}}return function(z,q,Q){return q&&U(z.prototype,q),Q&&U(z,Q),z}}(),e=Fa(),t=b(e),r=mp(),i=b(r),s=ice(),a=b(s),o=oce(),d=g(o);function g(U){if(U&&U.__esModule)return U;var z={};if(U!=null)for(var q in U)Object.prototype.hasOwnProperty.call(U,q)&&(z[q]=U[q]);return z.default=U,z}function b(U){return U&&U.__esModule?U:{default:U}}function E(U,z){if(!(U instanceof z))throw new TypeError("Cannot call a class as a function")}function S(U,z){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:U}function O(U,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);U.prototype=Object.create(z&&z.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(U,z):U.__proto__=z)}var k=B1.Saturation=function(U){O(z,U);function z(q){E(this,z);var Q=S(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,q));return Q.handleChange=function(re){typeof Q.props.onChange=="function"&&Q.throttle(Q.props.onChange,d.calculateChange(re,Q.props.hsl,Q.container),re)},Q.handleMouseDown=function(re){Q.handleChange(re);var X=Q.getContainerRenderWindow();X.addEventListener("mousemove",Q.handleChange),X.addEventListener("mouseup",Q.handleMouseUp)},Q.handleMouseUp=function(){Q.unbindEventListeners()},Q.throttle=(0,a.default)(function(re,X,Y){re(X,Y)},50),Q}return n(z,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var Q=this.container,re=window;!re.document.contains(Q)&&re.parent!==re;)re=re.parent;return re}},{key:"unbindEventListeners",value:function(){var Q=this.getContainerRenderWindow();Q.removeEventListener("mousemove",this.handleChange),Q.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Q=this,re=this.props.style||{},X=re.color,Y=re.white,J=re.black,N=re.pointer,ie=re.circle,he=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:X,white:Y,black:J,pointer:N,circle:ie}},{custom:!!this.props.style});return t.default.createElement("div",{style:he.color,ref:function(we){return Q.container=we},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:he.white,className:"saturation-white"},t.default.createElement("div",{style:he.black,className:"saturation-black"}),t.default.createElement("div",{style:he.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:he.circle}))))}}]),z}(e.PureComponent||e.Component);return B1.default=k,B1}var O1={},jd={},HS,nD;function ace(){if(nD)return HS;nD=1;var n=rG(),e=nG(),t=jN(),r=Jh();function i(s,a){var o=r(s)?n:e;return o(s,t(a))}return HS=i,HS}var ZS,rD;function lce(){return rD||(rD=1,ZS=ace()),ZS}var kb={exports:{}},uce=kb.exports,iD;function Ace(){return iD||(iD=1,function(n,e){(function(t,r){n.exports=r()})(uce,function(){function t(Fe){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},t(Fe)}var r=/^\s+/,i=/\s+$/;function s(Fe,Te){if(Fe=Fe||"",Te=Te||{},Fe instanceof s)return Fe;if(!(this instanceof s))return new s(Fe,Te);var Se=a(Fe);this._originalInput=Fe,this._r=Se.r,this._g=Se.g,this._b=Se.b,this._a=Se.a,this._roundA=Math.round(100*this._a)/100,this._format=Te.format||Se.format,this._gradientType=Te.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Se.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Te=this.toRgb();return(Te.r*299+Te.g*587+Te.b*114)/1e3},getLuminance:function(){var Te=this.toRgb(),Se,Je,yt,dt,Ut,en;return Se=Te.r/255,Je=Te.g/255,yt=Te.b/255,Se<=.03928?dt=Se/12.92:dt=Math.pow((Se+.055)/1.055,2.4),Je<=.03928?Ut=Je/12.92:Ut=Math.pow((Je+.055)/1.055,2.4),yt<=.03928?en=yt/12.92:en=Math.pow((yt+.055)/1.055,2.4),.2126*dt+.7152*Ut+.0722*en},setAlpha:function(Te){return this._a=Pe(Te),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Te=b(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,v:Te.v,a:this._a}},toHsvString:function(){var Te=b(this._r,this._g,this._b),Se=Math.round(Te.h*360),Je=Math.round(Te.s*100),yt=Math.round(Te.v*100);return this._a==1?"hsv("+Se+", "+Je+"%, "+yt+"%)":"hsva("+Se+", "+Je+"%, "+yt+"%, "+this._roundA+")"},toHsl:function(){var Te=d(this._r,this._g,this._b);return{h:Te.h*360,s:Te.s,l:Te.l,a:this._a}},toHslString:function(){var Te=d(this._r,this._g,this._b),Se=Math.round(Te.h*360),Je=Math.round(Te.s*100),yt=Math.round(Te.l*100);return this._a==1?"hsl("+Se+", "+Je+"%, "+yt+"%)":"hsla("+Se+", "+Je+"%, "+yt+"%, "+this._roundA+")"},toHex:function(Te){return S(this._r,this._g,this._b,Te)},toHexString:function(Te){return"#"+this.toHex(Te)},toHex8:function(Te){return O(this._r,this._g,this._b,this._a,Te)},toHex8String:function(Te){return"#"+this.toHex8(Te)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(pe(this._r,255)*100)+"%",g:Math.round(pe(this._g,255)*100)+"%",b:Math.round(pe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(pe(this._r,255)*100)+"%, "+Math.round(pe(this._g,255)*100)+"%, "+Math.round(pe(this._b,255)*100)+"%)":"rgba("+Math.round(pe(this._r,255)*100)+"%, "+Math.round(pe(this._g,255)*100)+"%, "+Math.round(pe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:fe[S(this._r,this._g,this._b,!0)]||!1},toFilter:function(Te){var Se="#"+k(this._r,this._g,this._b,this._a),Je=Se,yt=this._gradientType?"GradientType = 1, ":"";if(Te){var dt=s(Te);Je="#"+k(dt._r,dt._g,dt._b,dt._a)}return"progid:DXImageTransform.Microsoft.gradient("+yt+"startColorstr="+Se+",endColorstr="+Je+")"},toString:function(Te){var Se=!!Te;Te=Te||this._format;var Je=!1,yt=this._a<1&&this._a>=0,dt=!Se&&yt&&(Te==="hex"||Te==="hex6"||Te==="hex3"||Te==="hex4"||Te==="hex8"||Te==="name");return dt?Te==="name"&&this._a===0?this.toName():this.toRgbString():(Te==="rgb"&&(Je=this.toRgbString()),Te==="prgb"&&(Je=this.toPercentageRgbString()),(Te==="hex"||Te==="hex6")&&(Je=this.toHexString()),Te==="hex3"&&(Je=this.toHexString(!0)),Te==="hex4"&&(Je=this.toHex8String(!0)),Te==="hex8"&&(Je=this.toHex8String()),Te==="name"&&(Je=this.toName()),Te==="hsl"&&(Je=this.toHslString()),Te==="hsv"&&(Je=this.toHsvString()),Je||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Te,Se){var Je=Te.apply(null,[this].concat([].slice.call(Se)));return this._r=Je._r,this._g=Je._g,this._b=Je._b,this.setAlpha(Je._a),this},lighten:function(){return this._applyModification(Q,arguments)},brighten:function(){return this._applyModification(re,arguments)},darken:function(){return this._applyModification(X,arguments)},desaturate:function(){return this._applyModification(U,arguments)},saturate:function(){return this._applyModification(z,arguments)},greyscale:function(){return this._applyModification(q,arguments)},spin:function(){return this._applyModification(Y,arguments)},_applyCombination:function(Te,Se){return Te.apply(null,[this].concat([].slice.call(Se)))},analogous:function(){return this._applyCombination(he,arguments)},complement:function(){return this._applyCombination(J,arguments)},monochromatic:function(){return this._applyCombination(de,arguments)},splitcomplement:function(){return this._applyCombination(ie,arguments)},triad:function(){return this._applyCombination(N,[3])},tetrad:function(){return this._applyCombination(N,[4])}},s.fromRatio=function(Fe,Te){if(t(Fe)=="object"){var Se={};for(var Je in Fe)Fe.hasOwnProperty(Je)&&(Je==="a"?Se[Je]=Fe[Je]:Se[Je]=Ne(Fe[Je]));Fe=Se}return s(Fe,Te)};function a(Fe){var Te={r:0,g:0,b:0},Se=1,Je=null,yt=null,dt=null,Ut=!1,en=!1;return typeof Fe=="string"&&(Fe=Lt(Fe)),t(Fe)=="object"&&(ft(Fe.r)&&ft(Fe.g)&&ft(Fe.b)?(Te=o(Fe.r,Fe.g,Fe.b),Ut=!0,en=String(Fe.r).substr(-1)==="%"?"prgb":"rgb"):ft(Fe.h)&&ft(Fe.s)&&ft(Fe.v)?(Je=Ne(Fe.s),yt=Ne(Fe.v),Te=E(Fe.h,Je,yt),Ut=!0,en="hsv"):ft(Fe.h)&&ft(Fe.s)&&ft(Fe.l)&&(Je=Ne(Fe.s),dt=Ne(Fe.l),Te=g(Fe.h,Je,dt),Ut=!0,en="hsl"),Fe.hasOwnProperty("a")&&(Se=Fe.a)),Se=Pe(Se),{ok:Ut,format:Fe.format||en,r:Math.min(255,Math.max(Te.r,0)),g:Math.min(255,Math.max(Te.g,0)),b:Math.min(255,Math.max(Te.b,0)),a:Se}}function o(Fe,Te,Se){return{r:pe(Fe,255)*255,g:pe(Te,255)*255,b:pe(Se,255)*255}}function d(Fe,Te,Se){Fe=pe(Fe,255),Te=pe(Te,255),Se=pe(Se,255);var Je=Math.max(Fe,Te,Se),yt=Math.min(Fe,Te,Se),dt,Ut,en=(Je+yt)/2;if(Je==yt)dt=Ut=0;else{var Nt=Je-yt;switch(Ut=en>.5?Nt/(2-Je-yt):Nt/(Je+yt),Je){case Fe:dt=(Te-Se)/Nt+(Te<Se?6:0);break;case Te:dt=(Se-Fe)/Nt+2;break;case Se:dt=(Fe-Te)/Nt+4;break}dt/=6}return{h:dt,s:Ut,l:en}}function g(Fe,Te,Se){var Je,yt,dt;Fe=pe(Fe,360),Te=pe(Te,100),Se=pe(Se,100);function Ut(yn,jn,Rr){return Rr<0&&(Rr+=1),Rr>1&&(Rr-=1),Rr<1/6?yn+(jn-yn)*6*Rr:Rr<1/2?jn:Rr<2/3?yn+(jn-yn)*(2/3-Rr)*6:yn}if(Te===0)Je=yt=dt=Se;else{var en=Se<.5?Se*(1+Te):Se+Te-Se*Te,Nt=2*Se-en;Je=Ut(Nt,en,Fe+1/3),yt=Ut(Nt,en,Fe),dt=Ut(Nt,en,Fe-1/3)}return{r:Je*255,g:yt*255,b:dt*255}}function b(Fe,Te,Se){Fe=pe(Fe,255),Te=pe(Te,255),Se=pe(Se,255);var Je=Math.max(Fe,Te,Se),yt=Math.min(Fe,Te,Se),dt,Ut,en=Je,Nt=Je-yt;if(Ut=Je===0?0:Nt/Je,Je==yt)dt=0;else{switch(Je){case Fe:dt=(Te-Se)/Nt+(Te<Se?6:0);break;case Te:dt=(Se-Fe)/Nt+2;break;case Se:dt=(Fe-Te)/Nt+4;break}dt/=6}return{h:dt,s:Ut,v:en}}function E(Fe,Te,Se){Fe=pe(Fe,360)*6,Te=pe(Te,100),Se=pe(Se,100);var Je=Math.floor(Fe),yt=Fe-Je,dt=Se*(1-Te),Ut=Se*(1-yt*Te),en=Se*(1-(1-yt)*Te),Nt=Je%6,yn=[Se,Ut,dt,dt,en,Se][Nt],jn=[en,Se,Se,Ut,dt,dt][Nt],Rr=[dt,dt,en,Se,Se,Ut][Nt];return{r:yn*255,g:jn*255,b:Rr*255}}function S(Fe,Te,Se,Je){var yt=[De(Math.round(Fe).toString(16)),De(Math.round(Te).toString(16)),De(Math.round(Se).toString(16))];return Je&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0):yt.join("")}function O(Fe,Te,Se,Je,yt){var dt=[De(Math.round(Fe).toString(16)),De(Math.round(Te).toString(16)),De(Math.round(Se).toString(16)),De(at(Je))];return yt&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)&&dt[3].charAt(0)==dt[3].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0)+dt[3].charAt(0):dt.join("")}function k(Fe,Te,Se,Je){var yt=[De(at(Je)),De(Math.round(Fe).toString(16)),De(Math.round(Te).toString(16)),De(Math.round(Se).toString(16))];return yt.join("")}s.equals=function(Fe,Te){return!Fe||!Te?!1:s(Fe).toRgbString()==s(Te).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function U(Fe,Te){Te=Te===0?0:Te||10;var Se=s(Fe).toHsl();return Se.s-=Te/100,Se.s=it(Se.s),s(Se)}function z(Fe,Te){Te=Te===0?0:Te||10;var Se=s(Fe).toHsl();return Se.s+=Te/100,Se.s=it(Se.s),s(Se)}function q(Fe){return s(Fe).desaturate(100)}function Q(Fe,Te){Te=Te===0?0:Te||10;var Se=s(Fe).toHsl();return Se.l+=Te/100,Se.l=it(Se.l),s(Se)}function re(Fe,Te){Te=Te===0?0:Te||10;var Se=s(Fe).toRgb();return Se.r=Math.max(0,Math.min(255,Se.r-Math.round(255*-(Te/100)))),Se.g=Math.max(0,Math.min(255,Se.g-Math.round(255*-(Te/100)))),Se.b=Math.max(0,Math.min(255,Se.b-Math.round(255*-(Te/100)))),s(Se)}function X(Fe,Te){Te=Te===0?0:Te||10;var Se=s(Fe).toHsl();return Se.l-=Te/100,Se.l=it(Se.l),s(Se)}function Y(Fe,Te){var Se=s(Fe).toHsl(),Je=(Se.h+Te)%360;return Se.h=Je<0?360+Je:Je,s(Se)}function J(Fe){var Te=s(Fe).toHsl();return Te.h=(Te.h+180)%360,s(Te)}function N(Fe,Te){if(isNaN(Te)||Te<=0)throw new Error("Argument to polyad must be a positive number");for(var Se=s(Fe).toHsl(),Je=[s(Fe)],yt=360/Te,dt=1;dt<Te;dt++)Je.push(s({h:(Se.h+dt*yt)%360,s:Se.s,l:Se.l}));return Je}function ie(Fe){var Te=s(Fe).toHsl(),Se=Te.h;return[s(Fe),s({h:(Se+72)%360,s:Te.s,l:Te.l}),s({h:(Se+216)%360,s:Te.s,l:Te.l})]}function he(Fe,Te,Se){Te=Te||6,Se=Se||30;var Je=s(Fe).toHsl(),yt=360/Se,dt=[s(Fe)];for(Je.h=(Je.h-(yt*Te>>1)+720)%360;--Te;)Je.h=(Je.h+yt)%360,dt.push(s(Je));return dt}function de(Fe,Te){Te=Te||6;for(var Se=s(Fe).toHsv(),Je=Se.h,yt=Se.s,dt=Se.v,Ut=[],en=1/Te;Te--;)Ut.push(s({h:Je,s:yt,v:dt})),dt=(dt+en)%1;return Ut}s.mix=function(Fe,Te,Se){Se=Se===0?0:Se||50;var Je=s(Fe).toRgb(),yt=s(Te).toRgb(),dt=Se/100,Ut={r:(yt.r-Je.r)*dt+Je.r,g:(yt.g-Je.g)*dt+Je.g,b:(yt.b-Je.b)*dt+Je.b,a:(yt.a-Je.a)*dt+Je.a};return s(Ut)},s.readability=function(Fe,Te){var Se=s(Fe),Je=s(Te);return(Math.max(Se.getLuminance(),Je.getLuminance())+.05)/(Math.min(Se.getLuminance(),Je.getLuminance())+.05)},s.isReadable=function(Fe,Te,Se){var Je=s.readability(Fe,Te),yt,dt;switch(dt=!1,yt=Kt(Se),yt.level+yt.size){case"AAsmall":case"AAAlarge":dt=Je>=4.5;break;case"AAlarge":dt=Je>=3;break;case"AAAsmall":dt=Je>=7;break}return dt},s.mostReadable=function(Fe,Te,Se){var Je=null,yt=0,dt,Ut,en,Nt;Se=Se||{},Ut=Se.includeFallbackColors,en=Se.level,Nt=Se.size;for(var yn=0;yn<Te.length;yn++)dt=s.readability(Fe,Te[yn]),dt>yt&&(yt=dt,Je=s(Te[yn]));return s.isReadable(Fe,Je,{level:en,size:Nt})||!Ut?Je:(Se.includeFallbackColors=!1,s.mostReadable(Fe,["#fff","#000"],Se))};var we=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},fe=s.hexNames=be(we);function be(Fe){var Te={};for(var Se in Fe)Fe.hasOwnProperty(Se)&&(Te[Fe[Se]]=Se);return Te}function Pe(Fe){return Fe=parseFloat(Fe),(isNaN(Fe)||Fe<0||Fe>1)&&(Fe=1),Fe}function pe(Fe,Te){$e(Fe)&&(Fe="100%");var Se=ht(Fe);return Fe=Math.min(Te,Math.max(0,parseFloat(Fe))),Se&&(Fe=parseInt(Fe*Te,10)/100),Math.abs(Fe-Te)<1e-6?1:Fe%Te/parseFloat(Te)}function it(Fe){return Math.min(1,Math.max(0,Fe))}function We(Fe){return parseInt(Fe,16)}function $e(Fe){return typeof Fe=="string"&&Fe.indexOf(".")!=-1&&parseFloat(Fe)===1}function ht(Fe){return typeof Fe=="string"&&Fe.indexOf("%")!=-1}function De(Fe){return Fe.length==1?"0"+Fe:""+Fe}function Ne(Fe){return Fe<=1&&(Fe=Fe*100+"%"),Fe}function at(Fe){return Math.round(parseFloat(Fe)*255).toString(16)}function wt(Fe){return We(Fe)/255}var Ct=function(){var Fe="[-\\+]?\\d+%?",Te="[-\\+]?\\d*\\.\\d+%?",Se="(?:"+Te+")|(?:"+Fe+")",Je="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?",yt="[\\s|\\(]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")[,|\\s]+("+Se+")\\s*\\)?";return{CSS_UNIT:new RegExp(Se),rgb:new RegExp("rgb"+Je),rgba:new RegExp("rgba"+yt),hsl:new RegExp("hsl"+Je),hsla:new RegExp("hsla"+yt),hsv:new RegExp("hsv"+Je),hsva:new RegExp("hsva"+yt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ft(Fe){return!!Ct.CSS_UNIT.exec(Fe)}function Lt(Fe){Fe=Fe.replace(r,"").replace(i,"").toLowerCase();var Te=!1;if(we[Fe])Fe=we[Fe],Te=!0;else if(Fe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Se;return(Se=Ct.rgb.exec(Fe))?{r:Se[1],g:Se[2],b:Se[3]}:(Se=Ct.rgba.exec(Fe))?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=Ct.hsl.exec(Fe))?{h:Se[1],s:Se[2],l:Se[3]}:(Se=Ct.hsla.exec(Fe))?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=Ct.hsv.exec(Fe))?{h:Se[1],s:Se[2],v:Se[3]}:(Se=Ct.hsva.exec(Fe))?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=Ct.hex8.exec(Fe))?{r:We(Se[1]),g:We(Se[2]),b:We(Se[3]),a:wt(Se[4]),format:Te?"name":"hex8"}:(Se=Ct.hex6.exec(Fe))?{r:We(Se[1]),g:We(Se[2]),b:We(Se[3]),format:Te?"name":"hex"}:(Se=Ct.hex4.exec(Fe))?{r:We(Se[1]+""+Se[1]),g:We(Se[2]+""+Se[2]),b:We(Se[3]+""+Se[3]),a:wt(Se[4]+""+Se[4]),format:Te?"name":"hex8"}:(Se=Ct.hex3.exec(Fe))?{r:We(Se[1]+""+Se[1]),g:We(Se[2]+""+Se[2]),b:We(Se[3]+""+Se[3]),format:Te?"name":"hex"}:!1}function Kt(Fe){var Te,Se;return Fe=Fe||{level:"AA",size:"small"},Te=(Fe.level||"AA").toUpperCase(),Se=(Fe.size||"small").toLowerCase(),Te!=="AA"&&Te!=="AAA"&&(Te="AA"),Se!=="small"&&Se!=="large"&&(Se="small"),{level:Te,size:Se}}return s})}(kb)),kb.exports}var oD;function pG(){if(oD)return jd;oD=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.isvalidColorString=jd.red=jd.getContrastingColor=jd.isValidHex=jd.toState=jd.simpleCheckForValidColor=void 0;var n=lce(),e=i(n),t=Ace(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}jd.simpleCheckForValidColor=function(o){var d=["r","g","b","a","h","s","l","v"],g=0,b=0;return(0,e.default)(d,function(E){if(o[E]&&(g+=1,isNaN(o[E])||(b+=1),E==="s"||E==="l")){var S=/^\d+%$/;S.test(o[E])&&(b+=1)}}),g===b?o:!1};var s=jd.toState=function(o,d){var g=o.hex?(0,r.default)(o.hex):(0,r.default)(o),b=g.toHsl(),E=g.toHsv(),S=g.toRgb(),O=g.toHex();b.s===0&&(b.h=d||0,E.h=d||0);var k=O==="000000"&&S.a===0;return{hsl:b,hex:k?"transparent":"#"+O,rgb:S,hsv:E,oldHue:o.h||d||b.h,source:o.source}};return jd.isValidHex=function(o){if(o==="transparent")return!0;var d=String(o).charAt(0)==="#"?1:0;return o.length!==4+d&&o.length<7+d&&(0,r.default)(o).isValid()},jd.getContrastingColor=function(o){if(!o)return"#fff";var d=s(o);if(d.hex==="transparent")return"rgba(0,0,0,0.4)";var g=(d.rgb.r*299+d.rgb.g*587+d.rgb.b*114)/1e3;return g>=128?"#000":"#fff"},jd.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},jd.isvalidColorString=function(o,d){var g=o.replace("","");return(0,r.default)(d+" ("+g+")")._ok},jd}var sD;function cce(){if(sD)return O1;sD=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.ColorWrap=void 0;var n=Object.assign||function(k){for(var U=1;U<arguments.length;U++){var z=arguments[U];for(var q in z)Object.prototype.hasOwnProperty.call(z,q)&&(k[q]=z[q])}return k},e=function(){function k(U,z){for(var q=0;q<z.length;q++){var Q=z[q];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(U,Q.key,Q)}}return function(U,z,q){return z&&k(U.prototype,z),q&&k(U,q),U}}(),t=Fa(),r=g(t),i=fG(),s=g(i),a=pG(),o=d(a);function d(k){if(k&&k.__esModule)return k;var U={};if(k!=null)for(var z in k)Object.prototype.hasOwnProperty.call(k,z)&&(U[z]=k[z]);return U.default=k,U}function g(k){return k&&k.__esModule?k:{default:k}}function b(k,U){if(!(k instanceof U))throw new TypeError("Cannot call a class as a function")}function E(k,U){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:k}function S(k,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);k.prototype=Object.create(U&&U.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(k,U):k.__proto__=U)}var O=O1.ColorWrap=function(U){var z=function(q){S(Q,q);function Q(re){b(this,Q);var X=E(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this));return X.handleChange=function(Y,J){var N=o.simpleCheckForValidColor(Y);if(N){var ie=o.toState(Y,Y.h||X.state.oldHue);X.setState(ie),X.props.onChangeComplete&&X.debounce(X.props.onChangeComplete,ie,J),X.props.onChange&&X.props.onChange(ie,J)}},X.handleSwatchHover=function(Y,J){var N=o.simpleCheckForValidColor(Y);if(N){var ie=o.toState(Y,Y.h||X.state.oldHue);X.props.onSwatchHover&&X.props.onSwatchHover(ie,J)}},X.state=n({},o.toState(re.color,0)),X.debounce=(0,s.default)(function(Y,J,N){Y(J,N)},100),X}return e(Q,[{key:"render",value:function(){var X={};return this.props.onSwatchHover&&(X.onSwatchHover=this.handleSwatchHover),r.default.createElement(U,n({},this.props,this.state,{onChange:this.handleChange},X))}}],[{key:"getDerivedStateFromProps",value:function(X,Y){return n({},o.toState(X.color,Y.oldHue))}}]),Q}(t.PureComponent||t.Component);return z.propTypes=n({},U.propTypes),z.defaultProps=n({},U.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),z};return O1.default=O,O1}var I1={},mv={},aD;function dce(){if(aD)return mv;aD=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.handleFocus=void 0;var n=Object.assign||function(d){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&(d[E]=b[E])}return d},e=function(){function d(g,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}return function(g,b,E){return b&&d(g.prototype,b),E&&d(g,E),g}}(),t=Fa(),r=i(t);function i(d){return d&&d.__esModule?d:{default:d}}function s(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function a(d,g){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:d}function o(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);d.prototype=Object.create(g&&g.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(d,g):d.__proto__=g)}return mv.handleFocus=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(E){o(S,E);function S(){var O,k,U,z;s(this,S);for(var q=arguments.length,Q=Array(q),re=0;re<q;re++)Q[re]=arguments[re];return z=(k=(U=a(this,(O=S.__proto__||Object.getPrototypeOf(S)).call.apply(O,[this].concat(Q))),U),U.state={focus:!1},U.handleFocus=function(){return U.setState({focus:!0})},U.handleBlur=function(){return U.setState({focus:!1})},k),a(U,z)}return e(S,[{key:"render",value:function(){return r.default.createElement(b,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(g,n({},this.props,this.state)))}}]),S}(r.default.Component)},mv}var lD;function hce(){if(lD)return I1;lD=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.Swatch=void 0;var n=Object.assign||function(E){for(var S=1;S<arguments.length;S++){var O=arguments[S];for(var k in O)Object.prototype.hasOwnProperty.call(O,k)&&(E[k]=O[k])}return E},e=Fa(),t=d(e),r=mp(),i=d(r),s=dce(),a=GI(),o=d(a);function d(E){return E&&E.__esModule?E:{default:E}}var g=13,b=I1.Swatch=function(S){var O=S.color,k=S.style,U=S.onClick,z=U===void 0?function(){}:U,q=S.onHover,Q=S.title,re=Q===void 0?O:Q,X=S.children,Y=S.focus,J=S.focusStyle,N=J===void 0?{}:J,ie=O==="transparent",he=(0,i.default)({default:{swatch:n({background:O,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},k,Y?N:{})}}),de=function(pe){return z(O,pe)},we=function(pe){return pe.keyCode===g&&z(O,pe)},fe=function(pe){return q(O,pe)},be={};return q&&(be.onMouseOver=fe),t.default.createElement("div",n({style:he.swatch,onClick:de,title:re,tabIndex:0,onKeyDown:we},be),X,ie&&t.default.createElement(o.default,{borderRadius:he.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return I1.default=(0,s.handleFocus)(b),I1}var uD;function mG(){return uD||(uD=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=VAe();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return g(e).default}});var t=GI();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return g(t).default}});var r=HAe();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return g(r).default}});var i=XAe();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return g(i).default}});var s=JAe();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return g(s).default}});var a=sce();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return g(a).default}});var o=cce();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return g(o).default}});var d=hce();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return g(d).default}});function g(b){return b&&b.__esModule?b:{default:b}}}(GS)),GS}var k1={},XS,AD;function fce(){if(AD)return XS;AD=1;function n(e){return e===void 0}return XS=n,XS}var hb={},cD;function pce(){if(cD)return hb;cD=1,Object.defineProperty(hb,"__esModule",{value:!0});var n=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var d=arguments[o];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a},e=Fa(),t=r(e);function r(a){return a&&a.__esModule?a:{default:a}}function i(a,o){var d={};for(var g in a)o.indexOf(g)>=0||Object.prototype.hasOwnProperty.call(a,g)&&(d[g]=a[g]);return d}var s=24;return hb.default=function(a){var o=a.fill,d=o===void 0?"currentColor":o,g=a.width,b=g===void 0?s:g,E=a.height,S=E===void 0?s:E,O=a.style,k=O===void 0?{}:O,U=i(a,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:d,width:b,height:S},k)},U),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},hb}var dD;function mce(){if(dD)return k1;dD=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.ChromeFields=void 0;var n=function(){function Q(re,X){for(var Y=0;Y<X.length;Y++){var J=X[Y];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(re,J.key,J)}}return function(re,X,Y){return X&&Q(re.prototype,X),Y&&Q(re,Y),re}}(),e=Fa(),t=O(e),r=mp(),i=O(r),s=pG(),a=S(s),o=fce(),d=O(o),g=mG(),b=pce(),E=O(b);function S(Q){if(Q&&Q.__esModule)return Q;var re={};if(Q!=null)for(var X in Q)Object.prototype.hasOwnProperty.call(Q,X)&&(re[X]=Q[X]);return re.default=Q,re}function O(Q){return Q&&Q.__esModule?Q:{default:Q}}function k(Q,re){if(!(Q instanceof re))throw new TypeError("Cannot call a class as a function")}function U(Q,re){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:Q}function z(Q,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);Q.prototype=Object.create(re&&re.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,re):Q.__proto__=re)}var q=k1.ChromeFields=function(Q){z(re,Q);function re(X){k(this,re);var Y=U(this,(re.__proto__||Object.getPrototypeOf(re)).call(this));return Y.toggleViews=function(){Y.state.view==="hex"?Y.setState({view:"rgb"}):Y.state.view==="rgb"?Y.setState({view:"hsl"}):Y.state.view==="hsl"&&(Y.props.hsl.a===1?Y.setState({view:"hex"}):Y.setState({view:"rgb"}))},Y.handleChange=function(J,N){J.hex?a.isValidHex(J.hex)&&Y.props.onChange({hex:J.hex,source:"hex"},N):J.r||J.g||J.b?Y.props.onChange({r:J.r||Y.props.rgb.r,g:J.g||Y.props.rgb.g,b:J.b||Y.props.rgb.b,source:"rgb"},N):J.a?(J.a<0?J.a=0:J.a>1&&(J.a=1),Y.props.onChange({h:Y.props.hsl.h,s:Y.props.hsl.s,l:Y.props.hsl.l,a:Math.round(J.a*100)/100,source:"rgb"},N)):(J.h||J.s||J.l)&&(typeof J.s=="string"&&J.s.includes("%")&&(J.s=J.s.replace("%","")),typeof J.l=="string"&&J.l.includes("%")&&(J.l=J.l.replace("%","")),J.s==1?J.s=.01:J.l==1&&(J.l=.01),Y.props.onChange({h:J.h||Y.props.hsl.h,s:Number((0,d.default)(J.s)?Y.props.hsl.s:J.s),l:Number((0,d.default)(J.l)?Y.props.hsl.l:J.l),source:"hsl"},N))},Y.showHighlight=function(J){J.currentTarget.style.background="#eee"},Y.hideHighlight=function(J){J.currentTarget.style.background="transparent"},X.hsl.a!==1&&X.view==="hex"?Y.state={view:"rgb"}:Y.state={view:X.view},Y}return n(re,[{key:"render",value:function(){var Y=this,J=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),N=void 0;return this.state.view==="hex"?N=t.default.createElement("div",{style:J.fields,className:"flexbox-fix"},t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?N=t.default.createElement("div",{style:J.fields,className:"flexbox-fix"},t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:J.alpha},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(N=t.default.createElement("div",{style:J.fields,className:"flexbox-fix"},t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:J.field},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:J.alpha},t.default.createElement(g.EditableInput,{style:{input:J.input,label:J.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:J.wrap,className:"flexbox-fix"},N,t.default.createElement("div",{style:J.toggle},t.default.createElement("div",{style:J.icon,onClick:this.toggleViews,ref:function(he){return Y.icon=he}},t.default.createElement(E.default,{style:J.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(Y,J){return Y.hsl.a!==1&&J.view==="hex"?{view:"rgb"}:null}}]),re}(t.default.Component);return q.defaultProps={view:"hex"},k1.default=q,k1}var T1={},hD;function gce(){if(hD)return T1;hD=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.ChromePointer=void 0;var n=Fa(),e=i(n),t=mp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=T1.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return T1.default=s,T1}var P1={},fD;function yce(){if(fD)return P1;fD=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.ChromePointerCircle=void 0;var n=Fa(),e=i(n),t=mp(),r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}var s=P1.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return P1.default=s,P1}var pD;function vce(){if(pD)return g1;pD=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.Chrome=void 0;var n=Fa(),e=U(n),t=dp(),r=U(t),i=mp(),s=U(i),a=hG(),o=U(a),d=mG(),g=mce(),b=U(g),E=gce(),S=U(E),O=yce(),k=U(O);function U(q){return q&&q.__esModule?q:{default:q}}var z=g1.Chrome=function(Q){var re=Q.width,X=Q.onChange,Y=Q.disableAlpha,J=Q.rgb,N=Q.hsl,ie=Q.hsv,he=Q.hex,de=Q.renderers,we=Q.styles,fe=we===void 0?{}:we,be=Q.className,Pe=be===void 0?"":be,pe=Q.defaultView,it=(0,s.default)((0,o.default)({default:{picker:{width:re,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+J.r+", "+J.g+", "+J.b+", "+J.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},fe),{disableAlpha:Y});return e.default.createElement("div",{style:it.picker,className:"chrome-picker "+Pe},e.default.createElement("div",{style:it.saturation},e.default.createElement(d.Saturation,{style:it.Saturation,hsl:N,hsv:ie,pointer:k.default,onChange:X})),e.default.createElement("div",{style:it.body},e.default.createElement("div",{style:it.controls,className:"flexbox-fix"},e.default.createElement("div",{style:it.color},e.default.createElement("div",{style:it.swatch},e.default.createElement("div",{style:it.active}),e.default.createElement(d.Checkboard,{renderers:de}))),e.default.createElement("div",{style:it.toggles},e.default.createElement("div",{style:it.hue},e.default.createElement(d.Hue,{style:it.Hue,hsl:N,pointer:S.default,onChange:X})),e.default.createElement("div",{style:it.alpha},e.default.createElement(d.Alpha,{style:it.Alpha,rgb:J,hsl:N,pointer:S.default,renderers:de,onChange:X})))),e.default.createElement(b.default,{rgb:J,hsl:N,hex:he,view:pe,onChange:X,disableAlpha:Y})))};return z.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},z.defaultProps={width:225,disableAlpha:!1,styles:{}},g1.default=(0,d.ColorWrap)(z),g1}var _ce=vce();const Cce=La(_ce);function to(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return to=function(){return a},a}to();function bce(n){to().f[0]++;const e=(to().s[0]++,n.rgb);return to().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class gG extends Zn.Component{constructor(t){to().f[1]++,to().s[4]++;super(t);On(this,"state",(to().s[2]++,{pickerOpened:!1}));On(this,"colorInput",(to().s[3]++,null));On(this,"calcPickerOffset",(to().s[7]++,()=>{to().f[3]++;const t=(to().s[8]++,this.colorInput);if(to().s[9]++,t){to().b[0][0]++;const r=(to().s[10]++,t.getBoundingClientRect());return to().s[11]++,{top:r.top,left:r.left+196}}else return to().b[0][1]++,to().s[12]++,{top:160,left:555}}));On(this,"togglePicker",(to().s[13]++,()=>{to().f[4]++,to().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));to().s[5]++,this.onChangeNoCheck=t6.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){to().f[2]++,to().s[6]++,this.props.onChange(t)}get color(){to().f[5]++,to().s[15]++;try{return to().s[16]++,C6(this.props.value).rgb()}catch(t){return to().s[17]++,console.warn("Error parsing color: ",t),to().s[18]++,C6("rgb(255,255,255)")}}onChange(t){to().f[6]++,to().s[19]++,this.props.onChange(t===""?(to().b[1][0]++,void 0):(to().b[1][1]++,t))}render(){to().f[7]++;const t=(to().s[20]++,this.calcPickerOffset()),r=(to().s[21]++,this.color.object()),i=(to().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),s=(to().s[23]++,le.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[le.jsx(Cce,{color:i,onChange:o=>(to().f[8]++,to().s[24]++,this.onChangeNoCheck(bce(o)))}),le.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),a=(to().s[25]++,{backgroundColor:this.props.value});return to().s[26]++,le.jsxs("div",{className:"maputnik-color-wrapper",children:[(to().b[2][0]++,this.state.pickerOpened&&(to().b[2][1]++,s)),le.jsx("div",{className:"maputnik-color-swatch",style:a}),le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:o=>(to().f[9]++,to().s[27]++,this.colorInput=o),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(to().b[3][0]++,this.props.value):(to().b[3][1]++,""),onChange:o=>(to().f[10]++,to().s[28]++,this.onChange(o.target.value))})]})}}function hn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return hn=function(){return a},a}hn();class rm extends Zn.Component{constructor(t){hn().f[0]++,hn().s[2]++;super(t);On(this,"_keyboardEvent",(hn().s[1]++,!1));On(this,"resetValue",(hn().s[26]++,()=>{if(hn().f[4]++,hn().s[27]++,this.setState({editing:!1}),hn().s[28]++,this.state.value)hn().b[16][1]++;else{hn().b[16][0]++,hn().s[29]++;return}hn().s[30]++,this.isValid(this.state.value)?hn().b[17][1]++:(hn().b[17][0]++,hn().s[31]++,this.isValid(this.props.value)?(hn().b[18][0]++,hn().s[32]++,this.changeValue(this.props.value),hn().s[33]++,this.setState({dirtyValue:this.props.value})):(hn().b[18][1]++,hn().s[34]++,this.changeValue(void 0),hn().s[35]++,this.setState({dirtyValue:void 0})))}));On(this,"onChangeRange",(hn().s[36]++,t=>{hn().f[5]++;let r=(hn().s[37]++,parseFloat(t.target.value));const i=(hn().s[38]++,this.props.rangeStep);let s=(hn().s[39]++,r);if(hn().s[40]++,i){hn().b[19][0]++;const a=(hn().s[41]++,r%i);hn().s[42]++,this._keyboardEvent?(hn().b[20][0]++,hn().s[43]++,r<+this.state.dirtyValue?(hn().b[21][0]++,hn().s[44]++,r=this.state.value-i):(hn().b[21][1]++,hn().s[45]++,r=this.state.value+i),hn().s[46]++,s=r):(hn().b[20][1]++,hn().s[47]++,a<i/2?(hn().b[22][0]++,hn().s[48]++,r=r-a):(hn().b[22][1]++,hn().s[49]++,r=r+(i-a)))}else hn().b[19][1]++;hn().s[50]++,this._keyboardEvent=!1,hn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),hn().s[52]++,this.setState({value:r,dirtyValue:s}),hn().s[53]++,this.props.onChange?(hn().b[23][0]++,hn().s[54]++,this.props.onChange(r)):hn().b[23][1]++}));hn().s[3]++,this.state={uuid:+Sy(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return hn().f[1]++,hn().s[4]++,hn().b[1][0]++,!r.editing&&(hn().b[1][1]++,t.value!==r.value)?(hn().b[0][0]++,hn().s[5]++,{value:t.value,dirtyValue:t.value}):(hn().b[0][1]++,hn().s[6]++,null)}changeValue(t){hn().f[2]++;const r=(hn().s[7]++,hn().b[3][0]++,t===""||(hn().b[3][1]++,t===void 0)?(hn().b[2][0]++,void 0):(hn().b[2][1]++,+t)),i=(hn().s[8]++,this.props.value!==r);hn().s[9]++,hn().b[5][0]++,this.isValid(r)&&(hn().b[5][1]++,i)?(hn().b[4][0]++,hn().s[10]++,this.props.onChange?(hn().b[6][0]++,hn().s[11]++,this.props.onChange(r)):hn().b[6][1]++,hn().s[12]++,this.setState({value:r})):(hn().b[4][1]++,hn().s[13]++,hn().b[8][0]++,!this.isValid(r)&&(hn().b[8][1]++,i)?(hn().b[7][0]++,hn().s[14]++,this.setState({value:void 0})):hn().b[7][1]++),hn().s[15]++,this.setState({dirtyValue:t===""?(hn().b[9][0]++,void 0):(hn().b[9][1]++,t)})}isValid(t){if(hn().f[3]++,hn().s[16]++,t===void 0)return hn().b[10][0]++,hn().s[17]++,!0;hn().b[10][1]++;const r=(hn().s[18]++,+t);return hn().s[19]++,isNaN(r)?(hn().b[11][0]++,hn().s[20]++,!1):(hn().b[11][1]++,hn().s[21]++,hn().b[13][0]++,!isNaN(this.props.min)&&(hn().b[13][1]++,r<this.props.min)?(hn().b[12][0]++,hn().s[22]++,!1):(hn().b[12][1]++,hn().s[23]++,hn().b[15][0]++,!isNaN(this.props.max)&&(hn().b[15][1]++,r>this.props.max)?(hn().b[14][0]++,hn().s[24]++,!1):(hn().b[14][1]++,hn().s[25]++,!0)))}render(){var t,r;if(hn().f[6]++,hn().s[55]++,hn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(hn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(hn().b[25][2]++,this.props.min!==void 0)&&(hn().b[25][3]++,this.props.max!==void 0)&&(hn().b[25][4]++,this.props.allowRange)){hn().b[24][0]++;const i=(hn().s[56]++,this.state.editing?(hn().b[26][0]++,this.state.dirtyValue):(hn().b[26][1]++,this.state.value)),s=(hn().s[57]++,this.props.default===void 0?(hn().b[27][0]++,""):(hn().b[27][1]++,this.props.default));let a;return hn().s[58]++,this.state.editingRange?(hn().b[28][0]++,hn().s[59]++,a=this.state.value):(hn().b[28][1]++,hn().s[60]++,a=i),hn().s[61]++,le.jsxs("div",{className:"maputnik-number-container",children:[le.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(hn().b[29][0]++,s):(hn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{hn().f[7]++,hn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{hn().f[8]++,hn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{hn().f[9]++,hn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{hn().f[10]++,hn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),le.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:a===void 0?(hn().b[30][0]++,""):(hn().b[30][1]++,a),onFocus:o=>{hn().f[11]++,hn().s[66]++,this.setState({editing:!0})},onChange:o=>{hn().f[12]++,hn().s[67]++,this.changeValue(o.target.value)},onBlur:o=>{hn().f[13]++,hn().s[68]++,this.setState({editing:!1}),hn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{hn().b[24][1]++;const i=(hn().s[70]++,this.state.editing?(hn().b[31][0]++,this.state.dirtyValue):(hn().b[31][1]++,this.state.value));return hn().s[71]++,le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(hn().b[32][0]++,""):(hn().b[32][1]++,i),onChange:s=>(hn().f[14]++,hn().s[72]++,this.changeValue(s.target.value)),onFocus:()=>{hn().f[15]++,hn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}On(rm,"defaultProps",(hn().s[0]++,{rangeStep:1}));function Fp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Fp=function(){return a},a}Fp();class WI extends Zn.Component{constructor(){super(...arguments);On(this,"onChange",(Fp().s[1]++,()=>{Fp().f[0]++,Fp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return Fp().f[1]++,Fp().s[3]++,le.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[le.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),le.jsx("div",{className:"maputnik-checkbox-box",children:le.jsx("svg",{style:{display:this.props.value?(Fp().b[0][0]++,"inline"):(Fp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:le.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}On(WI,"defaultProps",(Fp().s[0]++,{value:!1}));function Xr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Xr=function(){return a},a}Xr();var HE;let yG=(HE=class extends Zn.Component{constructor(e){Xr().f[0]++,Xr().s[1]++,super(e),Xr().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){Xr().f[1]++;const r=(Xr().s[3]++,[]),i=(Xr().s[4]++,t.initialPropsValue.slice(0));return Xr().s[5]++,Array(e.length).fill(null).map((s,a)=>{Xr().f[2]++,Xr().s[6]++,e.value[a]===t.initialPropsValue[a]?(Xr().b[0][0]++,Xr().s[7]++,r[a]=t.value[a]):(Xr().b[0][1]++,Xr().s[8]++,r[a]=t.value[a],Xr().s[9]++,i[a]=t.value[a])}),Xr().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return Xr().f[3]++,Xr().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{Xr().f[4]++;const i=(Xr().s[12]++,e[r]);return Xr().s[13]++,Xr().b[1][0]++,!(i===void 0||(Xr().b[1][1]++,i===""))})}changeValue(e,t){Xr().f[5]++;const r=(Xr().s[14]++,this.state.value.slice(0));Xr().s[15]++,r[e]=t,Xr().s[16]++,this.setState({value:r},()=>{Xr().f[6]++,Xr().s[17]++,Xr().b[3][0]++,this.isComplete(r)&&(Xr().b[3][1]++,this.props.onChange)?(Xr().b[2][0]++,Xr().s[18]++,this.props.onChange(r)):(Xr().b[2][1]++,Xr().s[19]++,this.props.onChange?(Xr().b[4][0]++,Xr().s[20]++,this.props.onChange(void 0)):Xr().b[4][1]++)})}render(){Xr().f[7]++;const{value:e}=(Xr().s[21]++,this.state),t=(Xr().s[22]++,Xr().b[5][0]++,e.length>0&&(Xr().b[5][1]++,!e.every(i=>(Xr().f[8]++,Xr().s[23]++,Xr().b[6][0]++,i===""||(Xr().b[6][1]++,i===void 0))))),r=(Xr().s[24]++,Array(this.props.length).fill(null).map((i,s)=>(Xr().f[9]++,Xr().s[25]++,this.props.type==="number"?(Xr().b[7][0]++,Xr().s[26]++,le.jsx(rm,{default:(Xr().b[9][0]++,t||(Xr().b[9][1]++,!this.props.default)?(Xr().b[8][0]++,void 0):(Xr().b[8][1]++,this.props.default[s])),value:e[s],required:t?(Xr().b[10][0]++,!0):(Xr().b[10][1]++,!1),onChange:a=>(Xr().f[10]++,Xr().s[27]++,this.changeValue(s,a)),"aria-label":(Xr().b[11][0]++,this.props["aria-label"]||(Xr().b[11][1]++,this.props.label))},s)):(Xr().b[7][1]++,Xr().s[28]++,le.jsx(kf,{default:(Xr().b[13][0]++,t||(Xr().b[13][1]++,!this.props.default)?(Xr().b[12][0]++,void 0):(Xr().b[12][1]++,this.props.default[s])),value:e[s],required:t?(Xr().b[14][0]++,!0):(Xr().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":(Xr().b[15][0]++,this.props["aria-label"]||(Xr().b[15][1]++,this.props.label))},s)))));return Xr().s[29]++,le.jsx("div",{className:"maputnik-array",children:r})}},On(HE,"defaultProps",(Xr().s[0]++,{value:[],default:[]})),HE);function tA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="c4660c9ecb80d9f1ce71e70441154e1e765b77ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAErG;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4660c9ecb80d9f1ce71e70441154e1e765b77ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return tA=function(){return a},a}tA();class xce extends Zn.Component{render(){tA().f[0]++;let e=(tA().s[0]++,this.props.options);tA().s[1]++,tA().b[1][0]++,e.length>0&&(tA().b[1][1]++,!Array.isArray(e[0]))?(tA().b[0][0]++,tA().s[2]++,e=e.map(i=>(tA().f[1]++,tA().s[3]++,[i,i]))):tA().b[0][1]++;const t=(tA().s[4]++,tA().b[2][0]++,this.props.value||(tA().b[2][1]++,e[0][0])),r=(tA().s[5]++,e.map(([i,s])=>(tA().f[2]++,tA().s[6]++,le.jsxs("label",{className:tm("maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[le.jsx("input",{type:"radio",name:this.props.name,onChange:a=>(tA().f[3]++,tA().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return tA().s[8]++,le.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Ll(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ll=function(){return a},a}Ll();function wce(n){Ll().f[0]++;let e=(Ll().s[0]++,0);return Ll().s[1]++,n.forEach(([t,r])=>{Ll().f[1]++,Ll().s[2]++,e+=r.length}),Ll().s[3]++,e}class QI extends Zn.Component{render(){Ll().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Ll().s[4]++,this.props);return Ll().s[5]++,Ll().b[1][0]++,e.length<=3&&(Ll().b[1][1]++,wce(e)<=20)?(Ll().b[0][0]++,Ll().s[6]++,le.jsx(xce,{name:i,options:e,value:(Ll().b[2][0]++,t||(Ll().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Ll().b[3][0]++,this.props["aria-label"]||(Ll().b[3][1]++,s))})):(Ll().b[0][1]++,Ll().s[7]++,le.jsx(Ng,{options:e,value:(Ll().b[4][0]++,t||(Ll().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Ll().b[5][0]++,this.props["aria-label"]||(Ll().b[5][1]++,s))}))}}function Ay(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ay=function(){return a},a}Ay();class Mce extends Zn.Component{render(){Ay().f[0]++;const e=(Ay().s[0]++,this.props.t);return Ay().s[1]++,le.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const JS=(Ay().s[2]++,$s()(Mce));function no(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="3908e8b0136f6981013335eeedb3fda3fb571648",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,KAAK;AACV,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3908e8b0136f6981013335eeedb3fda3fb571648"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return no=function(){return a},a}no();function eE(n,e){if(no().f[0]++,no().s[0]++,n===""){no().b[0][0]++,no().s[1]++;return}else no().b[0][1]++;let t;no().s[2]++;const r=a=>{no().f[1]++,no().s[3]++;try{const o=(no().s[4]++,new URL(a));return no().s[5]++,o.protocol}catch{no().s[6]++;return}},i=(no().s[7]++,r(n)),s=(no().s[8]++,window.location.protocol==="https:");return no().s[9]++,i?(no().b[1][1]++,no().s[13]++,no().b[4][0]++,i&&(no().b[4][1]++,i==="http:")&&(no().b[4][2]++,window.location.protocol==="https:")?(no().b[3][0]++,no().s[14]++,t=le.jsx(JS,{children:le.jsxs(M0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",le.jsx("code",{children:"https://"})," domain"]})})):no().b[3][1]++):(no().b[1][0]++,no().s[10]++,s?(no().b[2][0]++,no().s[11]++,t=le.jsx(JS,{children:le.jsxs(M0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"https://"})]})})):(no().b[2][1]++,no().s[12]++,t=le.jsx(JS,{children:le.jsxs(M0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"http://"})," or ",le.jsx("code",{children:"https://"})]})}))),no().s[15]++,t}class vG extends Zn.Component{constructor(t){no().f[3]++,no().s[17]++;super(t);On(this,"onInput",(no().s[19]++,t=>{no().f[4]++,no().s[20]++,this.setState({error:eE(t,this.props.t)}),no().s[21]++,this.props.onInput?(no().b[5][0]++,no().s[22]++,this.props.onInput(t)):no().b[5][1]++}));On(this,"onChange",(no().s[23]++,t=>{no().f[5]++,no().s[24]++,this.setState({error:eE(t,this.props.t)}),no().s[25]++,this.props.onChange(t)}));no().s[18]++,this.state={error:eE(t.value,t.t)}}render(){return no().f[6]++,no().s[26]++,le.jsxs("div",{children:[le.jsx(kf,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}On(vG,"defaultProps",(no().s[16]++,{onInput:()=>{no().f[2]++}}));const qI=(no().s[27]++,$s()(vG));function jr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return jr=function(){return a},a}jr();class Sce extends Zn.Component{constructor(){super(...arguments);On(this,"addValue",(jr().s[5]++,()=>{jr().f[2]++;const t=(jr().s[6]++,this.values.slice(0));if(jr().s[7]++,this.props.type==="number")jr().b[2][0]++,jr().s[8]++,t.push(0);else if(jr().b[2][1]++,jr().s[9]++,this.props.type==="url")jr().b[3][0]++,jr().s[10]++,t.push("");else if(jr().b[3][1]++,jr().s[11]++,this.props.type==="enum"){jr().b[4][0]++;const{fieldSpec:r}=(jr().s[12]++,this.props),i=(jr().s[13]++,Object.keys(r.values)[0]);jr().s[14]++,t.push(i)}else jr().b[4][1]++,jr().s[15]++,t.push("");jr().s[16]++,this.props.onChange?(jr().b[5][0]++,jr().s[17]++,this.props.onChange(t)):jr().b[5][1]++}))}changeValue(t,r){jr().f[0]++;const i=(jr().s[0]++,this.values.slice(0));jr().s[1]++,i[t]=r,jr().s[2]++,this.props.onChange?(jr().b[0][0]++,jr().s[3]++,this.props.onChange(i)):jr().b[0][1]++}get values(){return jr().f[1]++,jr().s[4]++,jr().b[1][0]++,this.props.value||(jr().b[1][1]++,this.props.default)||(jr().b[1][2]++,[])}deleteValue(t){jr().f[3]++;const r=(jr().s[18]++,this.values.slice(0));jr().s[19]++,r.splice(t,1),jr().s[20]++,this.props.onChange?(jr().b[6][0]++,jr().s[21]++,this.props.onChange(r.length>0?(jr().b[7][0]++,r):(jr().b[7][1]++,void 0))):jr().b[6][1]++}render(){jr().f[4]++;const t=(jr().s[22]++,this.props.t),r=(jr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(jr().s[24]++,this.values.map((s,a)=>{var g;jr().f[5]++;const o=(jr().s[25]++,le.jsx(Ece,{onClick:this.deleteValue.bind(this,a),...r}));let d;if(jr().s[26]++,this.props.type==="url")jr().b[8][0]++,jr().s[27]++,d=le.jsx(qI,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(jr().b[9][0]++,this.props["aria-label"]||(jr().b[9][1]++,this.props.label))});else if(jr().b[8][1]++,jr().s[28]++,this.props.type==="number")jr().b[10][0]++,jr().s[29]++,d=le.jsx(rm,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(jr().b[11][0]++,this.props["aria-label"]||(jr().b[11][1]++,this.props.label))});else if(jr().b[10][1]++,jr().s[30]++,this.props.type==="enum"){jr().b[12][0]++;const b=(jr().s[31]++,Object.keys((g=this.props.fieldSpec)==null?void 0:g.values).map(E=>(jr().f[6]++,jr().s[32]++,[E,SI(E)])));jr().s[33]++,d=le.jsx(QI,{options:b,value:s,onChange:this.changeValue.bind(this,a),"aria-label":(jr().b[13][0]++,this.props["aria-label"]||(jr().b[13][1]++,this.props.label))})}else jr().b[12][1]++,jr().s[34]++,d=le.jsx(kf,{value:s,onChange:this.changeValue.bind(this,a),"aria-label":(jr().b[14][0]++,this.props["aria-label"]||(jr().b[14][1]++,this.props.label))});return jr().s[35]++,le.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[le.jsx("div",{className:"maputnik-array-block-action",children:o}),le.jsx("div",{className:"maputnik-array-block-content",children:d})]},a)}));return jr().s[36]++,le.jsxs("div",{className:"maputnik-array",children:[i,le.jsx(Ha,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const _G=(jr().s[37]++,$s()(Sce));class Ece extends Zn.Component{render(){jr().f[7]++;const e=(jr().s[38]++,this.props.t);return jr().s[39]++,le.jsx(Ha,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:le.jsx(vI,{label:le.jsx(ky,{})})})}}function ma(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ma=function(){return a},a}ma();class CG extends Zn.Component{get values(){ma().f[0]++;const e=(ma().s[1]++,ma().b[0][0]++,this.props.value||(ma().b[0][1]++,this.props.default)||(ma().b[0][2]++,[]));return ma().s[2]++,e[e.length-1]!==""?(ma().b[1][0]++,ma().s[3]++,e.concat("")):(ma().b[1][1]++,ma().s[4]++,e)}changeFont(e,t){ma().f[1]++;const r=(ma().s[5]++,this.values.slice(0));ma().s[6]++,r[e]=t;const i=(ma().s[7]++,r.filter(s=>(ma().f[2]++,ma().s[8]++,s!==void 0)).filter(s=>(ma().f[3]++,ma().s[9]++,s!=="")));ma().s[10]++,this.props.onChange(i)}render(){ma().f[4]++;const e=(ma().s[11]++,this.values.map((t,r)=>{var i;return ma().f[5]++,ma().s[12]++,le.jsx("li",{children:le.jsx(zy,{"aria-label":(ma().b[2][0]++,this.props["aria-label"]||(ma().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(s=>(ma().f[6]++,ma().s[13]++,[s,s])),onChange:this.changeFont.bind(this,r)})},r)}));return ma().s[14]++,le.jsx("ul",{className:"maputnik-font",children:e})}}On(CG,"defaultProps",(ma().s[0]++,{fonts:[]}));function uo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return uo=function(){return a},a}uo();const Bce=(uo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let cy=class extends Zn.Component{childNodes(){var t,r;uo().f[0]++;const e=(uo().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(uo().f[1]++,uo().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(uo().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return uo().b[0][0]++,uo().s[4]++,le.jsx(rm,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":uo().b[0][1]++;{const i=(uo().s[5]++,Object.keys((uo().b[1][0]++,this.props.fieldSpec.values||(uo().b[1][1]++,[]))).map(s=>(uo().f[2]++,uo().s[6]++,[s,SI(s)])));return uo().s[7]++,le.jsx(QI,{...e,options:i})}case"resolvedImage":uo().b[0][2]++;case"formatted":uo().b[0][3]++;case"string":if(uo().b[0][4]++,uo().s[8]++,Bce.indexOf(this.props.fieldName)>=0){uo().b[2][0]++;const i=(uo().s[9]++,uo().b[3][0]++,this.props.fieldSpec.values||(uo().b[3][1]++,[]));return uo().s[10]++,le.jsx(zy,{...e,options:i.map(s=>(uo().f[3]++,uo().s[11]++,[s,s]))})}else return uo().b[2][1]++,uo().s[12]++,le.jsx(kf,{...e});case"color":return uo().b[0][5]++,uo().s[13]++,le.jsx(gG,{...e});case"boolean":return uo().b[0][6]++,uo().s[14]++,le.jsx(WI,{...e});case"array":return uo().b[0][7]++,uo().s[15]++,this.props.fieldName==="text-font"?(uo().b[4][0]++,uo().s[16]++,le.jsx(CG,{...e,fonts:this.props.fieldSpec.values})):(uo().b[4][1]++,uo().s[17]++,this.props.fieldSpec.length?(uo().b[5][0]++,uo().s[18]++,le.jsx(yG,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(uo().b[5][1]++,uo().s[19]++,le.jsx(_G,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return uo().b[0][8]++,uo().s[20]++,null}}render(){return uo().f[4]++,uo().s[21]++,le.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function UA(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return UA=function(){return a},a}UA();class S_ extends Zn.Component{constructor(t){UA().f[0]++,UA().s[0]++;super(t);On(this,"_labelId");On(this,"onToggleDoc",(UA().s[3]++,t=>{UA().f[1]++,UA().s[4]++,this.setState({showDoc:t})}));UA().s[1]++,this._labelId=Sy("fieldset_label_"),UA().s[2]++,this.state={showDoc:!1}}render(){return UA().f[2]++,UA().s[5]++,le.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(UA().b[0][0]++,this.props.fieldSpec&&(UA().b[0][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(vI,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(UA().b[1][0]++,!this.props.fieldSpec&&(UA().b[1][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),le.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(UA().b[2][0]++,this.props.fieldSpec&&(UA().b[2][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(UA().b[3][0]++,""):(UA().b[3][1]++,"none")},children:le.jsx(_I,{fieldSpec:this.props.fieldSpec})})))]})}}function ta(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ta=function(){return a},a}ta();const Oce=(ta().s[0]++,{color:()=>(ta().f[0]++,ta().s[1]++,ga),enum:({fieldSpec:n})=>(ta().f[1]++,ta().s[2]++,Object.keys(n.values).length<=3?(ta().b[0][0]++,S_):(ta().b[0][1]++,ga)),boolean:()=>(ta().f[2]++,ta().s[3]++,ga),array:()=>(ta().f[3]++,ta().s[4]++,S_),resolvedImage:()=>(ta().f[4]++,ta().s[5]++,ga),number:()=>(ta().f[5]++,ta().s[6]++,ga),string:()=>(ta().f[6]++,ta().s[7]++,ga),formatted:()=>(ta().f[7]++,ta().s[8]++,ga),padding:()=>(ta().f[8]++,ta().s[9]++,ga)});class Ice extends Zn.Component{render(){var i;ta().f[9]++;const e=(ta().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=(ta().s[11]++,Oce[e]);let r;return ta().s[12]++,t?(ta().b[1][0]++,ta().s[13]++,r=t(this.props)):(ta().b[1][1]++,ta().s[14]++,console.warn("No such type for '%s'",e),ta().s[15]++,r=ga),ta().s[16]++,le.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:le.jsx(cy,{...this.props})})}}function od(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return od=function(){return a},a}od();class kce extends Zn.Component{render(){od().f[0]++;const e=(od().s[0]++,this.props.t);let t,r,i;return od().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(od().b[0][0]++,od().s[2]++,i=le.jsx(Ha,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:M_})})}),od().s[3]++,t=le.jsx(Ha,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:le.jsx(bH,{})}),od().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(od().b[1][0]++,od().s[5]++,r=le.jsx(Ha,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:le.jsx(xH,{})})):od().b[1][1]++,od().s[6]++,le.jsxs("div",{children:[i,r,t]})):(od().b[0][1]++,od().s[7]++,le.jsx("div",{children:i}))}}const Tce=(od().s[8]++,$s()(kce));function Up(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Up=function(){return a},a}Up();class bG extends Zn.Component{render(){Up().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Up().s[1]++,this.props),i=(Up().s[2]++,le.jsx(Tce,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Up().s[3]++,e[r+"."+t]);return Up().s[4]++,le.jsx(Ice,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:Hx((Up().b[0][0]++,this.props.fieldName||(Up().b[0][1]++,""))),action:i})}}On(bG,"defaultProps",(Up().s[0]++,{errors:{}}));function fh(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fh=function(){return a},a}fh();function xG(n,e){fh().f[0]++;const t=(fh().s[0]++,+n),r=(fh().s[1]++,+e);return fh().s[2]++,t<r?(fh().b[0][0]++,fh().s[3]++,-1):(fh().b[0][1]++,fh().s[4]++,t>r?(fh().b[1][0]++,fh().s[5]++,1):(fh().b[1][1]++,fh().s[6]++,0))}function tp(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return tp=function(){return a},a}tp();function _f(n){if(tp().f[0]++,tp().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return tp().b[0][0]++,tp().s[1]++,n.default;tp().b[0][1]++;const e=(tp().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return tp().s[3]++,tp().b[1][0]++,e[n.type]||(tp().b[1][1]++,"")}function dy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return dy=function(){return a},a}dy();class Pce extends Zn.Component{render(){dy().f[0]++;const e=(dy().s[0]++,this.props.t);return dy().s[1]++,le.jsx(Ha,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:le.jsx(ky,{})})}}const wG=(dy().s[2]++,$s()(Pce));function cn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return cn=function(){return a},a}cn();function mD(n,e){cn().f[0]++;let t;return cn().s[0]++,cn().b[1][0]++,n.value&&(cn().b[1][1]++,n.value.stops)?(cn().b[0][0]++,cn().s[1]++,n.value.stops.forEach((r,i)=>{cn().f[1]++,cn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?cn().b[2][1]++:(cn().b[2][0]++,cn().s[3]++,t?cn().b[3][1]++:(cn().b[3][0]++,cn().s[4]++,t={...e}),cn().s[5]++,t[i]=Sy("stop-"))})):cn().b[0][1]++,cn().s[6]++,t}class Rce extends Zn.Component{constructor(){super(...arguments);On(this,"state",(cn().s[7]++,{refs:{}}));On(this,"onChange",(cn().s[32]++,(t,r)=>{if(cn().f[11]++,cn().s[33]++,r.type==="identity")cn().b[9][0]++,cn().s[34]++,r={type:r.type,property:r.property};else{cn().b[9][1]++;const i=(cn().s[35]++,r.type==="categorical"?(cn().b[10][0]++,""):(cn().b[10][1]++,0));cn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},_f(this.props.fieldSpec)],[{zoom:10,value:i},_f(this.props.fieldSpec)]],...r}}cn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){cn().f[2]++;const t=(cn().s[8]++,mD(this.props,this.state));cn().s[9]++,t?(cn().b[4][0]++,cn().s[10]++,this.setState({refs:t})):cn().b[4][1]++}static getDerivedStateFromProps(t,r){cn().f[3]++;const i=(cn().s[11]++,mD(t,r));return cn().s[12]++,i?(cn().b[5][0]++,cn().s[13]++,{refs:i}):(cn().b[5][1]++,cn().s[14]++,null)}getFieldFunctionType(t){return cn().f[4]++,cn().s[15]++,t.expression.interpolated?(cn().b[6][0]++,cn().s[16]++,"exponential"):(cn().b[6][1]++,cn().s[17]++,t.type==="number"?(cn().b[7][0]++,cn().s[18]++,"interval"):(cn().b[7][1]++,cn().s[19]++,"categorical"))}getDataFunctionTypes(t){return cn().f[5]++,cn().s[20]++,t.expression.interpolated?(cn().b[8][0]++,cn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(cn().b[8][1]++,cn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){cn().f[6]++;const r=(cn().s[23]++,t.map((s,a)=>(cn().f[7]++,cn().s[24]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(cn().f[8]++,cn().s[25]++,xG(s.data[0].zoom,a.data[0].zoom)))),i=(cn().s[26]++,{});return cn().s[27]++,r.forEach((s,a)=>{cn().f[9]++,cn().s[28]++,i[a]=s.ref}),cn().s[29]++,this.setState({refs:i}),cn().s[30]++,r.map(s=>(cn().f[10]++,cn().s[31]++,s.data))}changeStop(t,r,i){var d;cn().f[12]++;const s=(cn().s[38]++,cn().b[11][0]++,((d=this.props.value)==null?void 0:d.stops.slice(0))||(cn().b[11][1]++,[]));cn().s[39]++,s[t]=[{value:r.value,zoom:r.zoom===void 0?(cn().b[12][0]++,0):(cn().b[12][1]++,r.zoom)},i];const a=(cn().s[40]++,this.orderStopsByZoom(s)),o=(cn().s[41]++,{...this.props.value,stops:a});cn().s[42]++,this.onChange(this.props.fieldName,o)}changeBase(t){cn().f[13]++;const r=(cn().s[43]++,{...this.props.value,base:t});cn().s[44]++,r.base===void 0?(cn().b[13][0]++,cn().s[45]++,delete r.base):cn().b[13][1]++,cn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){cn().f[14]++,cn().s[47]++,cn().b[15][0]++,t==="interpolate"&&(cn().b[15][1]++,this.props.onChangeToZoomFunction)?(cn().b[14][0]++,cn().s[48]++,this.props.onChangeToZoomFunction()):(cn().b[14][1]++,cn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){cn().f[15]++,cn().s[50]++,r?(cn().b[16][0]++,cn().s[51]++,this.props.value[t]=r):(cn().b[16][1]++,cn().s[52]++,delete this.props.value[t]),cn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,s,a,o,d,g,b,E;cn().f[16]++;const t=(cn().s[54]++,this.props.t);cn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(cn().b[17][0]++,cn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):cn().b[17][1]++;let r;return cn().s[57]++,(s=this.props.value)!=null&&s.stops?(cn().b[18][0]++,cn().s[58]++,r=this.props.value.stops.map((S,O)=>{var J,N;cn().f[17]++;const k=(cn().s[59]++,typeof S[0]=="object"?(cn().b[19][0]++,S[0].zoom):(cn().b[19][1]++,void 0)),U=(cn().s[60]++,this.state.refs[O]),z=(cn().s[61]++,typeof S[0]=="object"?(cn().b[20][0]++,S[0].value):(cn().b[20][1]++,S[0])),q=(cn().s[62]++,S[1]),Q=(cn().s[63]++,le.jsx(wG,{onClick:(J=this.props.onDeleteStop)==null?void 0:J.bind(this,O)})),re=(cn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:z,onChange:ie=>(cn().f[18]++,cn().s[65]++,this.changeStop(O,{zoom:k,value:ie},q))});let X;cn().s[66]++,((N=this.props.value)==null?void 0:N.type)==="categorical"?(cn().b[21][0]++,cn().s[67]++,X=le.jsx(kf,{...re})):(cn().b[21][1]++,cn().s[68]++,X=le.jsx(rm,{...re}));let Y=(cn().s[69]++,null);return cn().s[70]++,k!==void 0?(cn().b[22][0]++,cn().s[71]++,Y=le.jsx("div",{children:le.jsx(rm,{"aria-label":"Zoom",value:k,onChange:ie=>(cn().f[19]++,cn().s[72]++,this.changeStop(O,{zoom:ie,value:z},q)),min:0,max:22})})):cn().b[22][1]++,cn().s[73]++,le.jsxs("tr",{children:[le.jsx("td",{children:Y}),le.jsx("td",{children:X}),le.jsx("td",{children:le.jsx(cy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:q,onChange:(ie,he)=>(cn().f[20]++,cn().s[74]++,this.changeStop(O,{zoom:k,value:z},he))})}),le.jsx("td",{children:Q})]},U)})):cn().b[18][1]++,cn().s[75]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:Hx(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(ga,{label:t("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Ng,{value:this.props.value.type,onChange:S=>(cn().f[21]++,cn().s[76]++,this.changeDataType(S)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(cn().b[23][0]++,((a=this.props.value)==null?void 0:a.type)!=="identity"&&(cn().b[23][1]++,le.jsx(ga,{label:t("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(cy,{fieldName:"base",fieldSpec:ts.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(S,O)=>(cn().f[22]++,cn().s[77]++,this.changeBase(O))})})},"base"))),le.jsx(ga,{label:"Property",children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(kf,{value:(d=this.props.value)==null?void 0:d.property,title:t("Input a data property to base styles off of."),onChange:S=>(cn().f[23]++,cn().s[78]++,this.changeDataProperty("property",S))})})},"property"),(cn().b[24][0]++,r&&(cn().b[24][1]++,le.jsx(ga,{label:t("Default"),children:le.jsx(cy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(g=this.props.value)==null?void 0:g.default,onChange:(S,O)=>(cn().f[24]++,cn().s[79]++,this.changeDataProperty("default",O))})},"default"))),(cn().b[25][0]++,r&&(cn().b[25][1]++,le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table",children:[le.jsx("caption",{children:t("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:t("Zoom")}),le.jsx("th",{children:t("Input value")}),le.jsx("th",{rowSpan:2,children:t("Output value")})]})}),le.jsx("tbody",{children:r})]})}))),le.jsxs("div",{className:"maputnik-toolbox",children:[(cn().b[26][0]++,r&&(cn().b[26][1]++,le.jsxs(Ha,{className:"maputnik-add-stop",onClick:(b=this.props.onAddStop)==null?void 0:b.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:wI})})," ",t("Add stop")]}))),le.jsxs(Ha,{className:"maputnik-add-stop",onClick:(E=this.props.onExpressionClick)==null?void 0:E.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:M_})})," ",t("Convert to expression")]})]})]})]})})}}const Kce=(cn().s[80]++,$s()(Rce));function br(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return br=function(){return a},a}br();function gD(n,e){br().f[0]++;let t=(br().s[0]++,{});return br().s[1]++,br().b[1][0]++,n.value&&(br().b[1][1]++,n.value.stops)?(br().b[0][0]++,br().s[2]++,n.value.stops.forEach((r,i)=>{br().f[1]++,br().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(br().b[2][0]++,br().s[4]++,t?br().b[3][1]++:(br().b[3][0]++,br().s[5]++,t={...e}),br().s[6]++,t[i]=Sy("stop-")):(br().b[2][1]++,br().s[7]++,t[i]=e.refs[i])})):br().b[0][1]++,br().s[8]++,t}class MG extends Zn.Component{constructor(){super(...arguments);On(this,"state",(br().s[10]++,{refs:{}}));On(this,"changeDataType",(br().s[36]++,t=>{br().f[11]++,br().s[37]++,br().b[8][0]++,t!=="interpolate"&&(br().b[8][1]++,this.props.onChangeToDataFunction)?(br().b[7][0]++,br().s[38]++,this.props.onChangeToDataFunction(t)):br().b[7][1]++}))}componentDidMount(){br().f[2]++;const t=(br().s[11]++,gD(this.props,this.state));br().s[12]++,t?(br().b[4][0]++,br().s[13]++,this.setState({refs:t})):br().b[4][1]++}static getDerivedStateFromProps(t,r){br().f[3]++;const i=(br().s[14]++,gD(t,r));return br().s[15]++,i?(br().b[5][0]++,br().s[16]++,{refs:i}):(br().b[5][1]++,br().s[17]++,null)}orderStopsByZoom(t){br().f[4]++;const r=(br().s[18]++,t.map((s,a)=>(br().f[5]++,br().s[19]++,{ref:this.state.refs[a],data:s})).sort((s,a)=>(br().f[6]++,br().s[20]++,xG(s.data[0],a.data[0])))),i=(br().s[21]++,{});return br().s[22]++,r.forEach((s,a)=>{br().f[7]++,br().s[23]++,i[a]=s.ref}),br().s[24]++,this.setState({refs:i}),br().s[25]++,r.map(s=>(br().f[8]++,br().s[26]++,s.data))}changeZoomStop(t,r,i){br().f[9]++;const s=(br().s[27]++,this.props.value.stops.slice(0));br().s[28]++,s[t]=[r,i];const a=(br().s[29]++,this.orderStopsByZoom(s)),o=(br().s[30]++,{...this.props.value,stops:a});br().s[31]++,this.props.onChange(this.props.fieldName,o)}changeBase(t){br().f[10]++;const r=(br().s[32]++,{...this.props.value,base:t});br().s[33]++,r.base===void 0?(br().b[6][0]++,br().s[34]++,delete r.base):br().b[6][1]++,br().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,s,a,o;br().f[12]++;const t=(br().s[39]++,this.props.t),r=(br().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((d,g)=>{var O;br().f[13]++;const b=(br().s[41]++,d[0]),E=(br().s[42]++,d[1]),S=(br().s[43]++,le.jsx(wG,{onClick:(O=this.props.onDeleteStop)==null?void 0:O.bind(this,g)}));return br().s[44]++,le.jsxs("tr",{children:[le.jsx("td",{children:le.jsx(rm,{"aria-label":t("Zoom"),value:b,onChange:k=>(br().f[14]++,br().s[45]++,this.changeZoomStop(g,k,E)),min:0,max:22})}),le.jsx("td",{children:le.jsx(cy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:E,onChange:(k,U)=>(br().f[15]++,br().s[46]++,this.changeZoomStop(g,b,U))})}),le.jsx("td",{children:S})]},`${d[0]}-${d[1]}`)}));return br().s[47]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:Hx(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(ga,{label:t("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Ng,{value:"interpolate",onChange:d=>(br().f[16]++,br().s[48]++,this.changeDataType(d)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),le.jsx(ga,{label:t("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(cy,{fieldName:"base",fieldSpec:ts.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(d,g)=>(br().f[17]++,br().s[49]++,this.changeBase(g))})})}),le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[le.jsx("caption",{children:t("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:t("Zoom")}),le.jsx("th",{rowSpan:2,children:t("Output value")})]})}),le.jsx("tbody",{children:r})]})}),le.jsxs("div",{className:"maputnik-toolbox",children:[le.jsxs(Ha,{className:"maputnik-add-stop",onClick:(a=this.props.onAddStop)==null?void 0:a.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:wI})})," ",t("Add stop")]}),le.jsxs(Ha,{className:"maputnik-add-stop",onClick:(o=this.props.onExpressionClick)==null?void 0:o.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:M_})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return br().f[18]++,br().s[50]++,t["property-type"]==="data-driven"?(br().b[9][0]++,br().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(br().b[9][1]++,br().s[52]++,["interpolate"])}}On(MG,"defaultProps",(br().s[9]++,{errors:{}}));const Dce=(br().s[53]++,$s()(MG));function Dt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Dt=function(){return a},a}Dt();function yD(n){return Dt().f[0]++,Dt().s[0]++,Dt().b[0][0]++,Array.isArray(n)&&(Dt().b[0][1]++,n.length===2)&&(Dt().b[0][2]++,n[0]==="literal")}function vD(n){return Dt().f[1]++,Dt().s[1]++,Dt().b[1][0]++,Array.isArray(n)&&(Dt().b[1][1]++,n.length===2)&&(Dt().b[1][2]++,n[0]==="get")}function Lce(n){return Dt().f[2]++,Dt().s[2]++,Dt().b[2][0]++,typeof n=="object"&&(Dt().b[2][1]++,n.stops)&&(Dt().b[2][2]++,typeof n.property>"u")&&(Dt().b[2][3]++,Array.isArray(n.stops))&&(Dt().b[2][4]++,n.stops.length>1)&&(Dt().b[2][5]++,n.stops.every(e=>(Dt().f[3]++,Dt().s[3]++,Dt().b[3][0]++,Array.isArray(e)&&(Dt().b[3][1]++,e.length===2))))}function SG(n){return Dt().f[4]++,Dt().s[4]++,Dt().b[4][0]++,typeof n=="object"&&(Dt().b[4][1]++,n.type==="identity")&&(Dt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function Fce(n){return Dt().f[5]++,Dt().s[5]++,Dt().b[5][0]++,typeof n=="object"&&(Dt().b[5][1]++,n.stops)&&(Dt().b[5][2]++,typeof n.property<"u")&&(Dt().b[5][3]++,n.stops.length>1)&&(Dt().b[5][4]++,Array.isArray(n.stops))&&(Dt().b[5][5]++,n.stops.every(e=>(Dt().f[6]++,Dt().s[6]++,Dt().b[6][0]++,Array.isArray(e)&&(Dt().b[6][1]++,e.length===2)&&(Dt().b[6][2]++,typeof e[0]=="object"))))}function Uce(n){return Dt().f[7]++,Dt().s[7]++,Dt().b[7][0]++,SG(n)||(Dt().b[7][1]++,Fce(n))}function YI(n){Dt().f[8]++;const e=(Dt().s[8]++,["string","boolean","number"]);return Dt().s[9]++,e.includes(typeof n)}function zce(n){return Dt().f[9]++,Dt().s[10]++,Array.isArray(n)?(Dt().b[8][0]++,Dt().s[11]++,n.every(YI)):(Dt().b[8][1]++,Dt().s[12]++,!1)}function _D(n,e=(Dt().b[9][0]++,{})){return Dt().f[10]++,Dt().s[13]++,n===void 0?(Dt().b[10][0]++,Dt().s[14]++,"value"):(Dt().b[10][1]++,Dt().s[15]++,YI(n)?(Dt().b[11][0]++,Dt().s[16]++,"value"):(Dt().b[11][1]++,Dt().s[17]++,Dt().b[13][0]++,e.type==="array"&&(Dt().b[13][1]++,zce(n))?(Dt().b[12][0]++,Dt().s[18]++,"value"):(Dt().b[12][1]++,Dt().s[19]++,Lce(n)?(Dt().b[14][0]++,Dt().s[20]++,"zoom_function"):(Dt().b[14][1]++,Dt().s[21]++,Uce(n)?(Dt().b[15][0]++,Dt().s[22]++,"data_function"):(Dt().b[15][1]++,Dt().s[23]++,"expression")))))}class jce extends Zn.Component{constructor(t){Dt().f[11]++,Dt().s[24]++;super(t);On(this,"addStop",(Dt().s[34]++,()=>{Dt().f[14]++;const t=(Dt().s[35]++,this.props.value.stops.slice(0)),r=(Dt().s[36]++,t[t.length-1]);Dt().s[37]++,typeof r[0]=="object"?(Dt().b[19][0]++,Dt().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Dt().b[19][1]++,Dt().s[39]++,t.push([r[0]+1,r[1]]));const i=(Dt().s[40]++,{...this.props.value,stops:t});Dt().s[41]++,this.props.onChange(this.props.fieldName,i)}));On(this,"deleteExpression",(Dt().s[42]++,()=>{Dt().f[15]++;const{fieldSpec:t,fieldName:r}=(Dt().s[43]++,this.props);Dt().s[44]++,this.props.onChange(r,t.default),Dt().s[45]++,this.setState({dataType:"value"})}));On(this,"deleteStop",(Dt().s[46]++,t=>{Dt().f[16]++;const r=(Dt().s[47]++,this.props.value.stops.slice(0));Dt().s[48]++,r.splice(t,1);let i=(Dt().s[49]++,{...this.props.value,stops:r});Dt().s[50]++,r.length===1?(Dt().b[20][0]++,Dt().s[51]++,i=r[0][1]):Dt().b[20][1]++,Dt().s[52]++,this.props.onChange(this.props.fieldName,i)}));On(this,"makeZoomFunction",(Dt().s[53]++,()=>{Dt().f[17]++;const{value:t}=(Dt().s[54]++,this.props);let r;Dt().s[55]++,typeof t=="object"?(Dt().b[21][0]++,Dt().s[56]++,t.stops?(Dt().b[22][0]++,Dt().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Dt().f[18]++,Dt().s[58]++,[i[0].zoom,(Dt().b[23][0]++,i[1]||(Dt().b[23][1]++,_f(this.props.fieldSpec)))]))}):(Dt().b[22][1]++,Dt().s[59]++,r={base:t.base,stops:[[6,_f(this.props.fieldSpec)],[10,_f(this.props.fieldSpec)]]})):(Dt().b[21][1]++,Dt().s[60]++,r={stops:[[6,(Dt().b[24][0]++,t||(Dt().b[24][1]++,_f(this.props.fieldSpec)))],[10,(Dt().b[25][0]++,t||(Dt().b[25][1]++,_f(this.props.fieldSpec)))]]}),Dt().s[61]++,this.props.onChange(this.props.fieldName,r)}));On(this,"undoExpression",(Dt().s[62]++,()=>{Dt().f[19]++;const{value:t,fieldName:r}=(Dt().s[63]++,this.props);Dt().s[64]++,vD(t)?(Dt().b[26][0]++,Dt().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Dt().s[66]++,this.setState({dataType:"value"})):(Dt().b[26][1]++,Dt().s[67]++,yD(t)?(Dt().b[27][0]++,Dt().s[68]++,this.props.onChange(r,t[1]),Dt().s[69]++,this.setState({dataType:"value"})):Dt().b[27][1]++)}));On(this,"canUndo",(Dt().s[70]++,()=>{Dt().f[20]++;const{value:t,fieldSpec:r}=(Dt().s[71]++,this.props);return Dt().s[72]++,Dt().b[28][0]++,vD(t)||(Dt().b[28][1]++,yD(t))||(Dt().b[28][2]++,YI(t))||(Dt().b[28][3]++,Array.isArray(t)&&(Dt().b[28][4]++,r.type==="array"))}));On(this,"makeExpression",(Dt().s[73]++,()=>{Dt().f[21]++;const{value:t,fieldSpec:r}=(Dt().s[74]++,this.props);let i;Dt().s[75]++,Dt().b[30][0]++,typeof t=="object"&&(Dt().b[30][1]++,"stops"in t)?(Dt().b[29][0]++,Dt().s[76]++,i=OV.convertFunction(t,r)):(Dt().b[29][1]++,Dt().s[77]++,SG(t)?(Dt().b[31][0]++,Dt().s[78]++,i=["get",t.property]):(Dt().b[31][1]++,Dt().s[79]++,i=["literal",(Dt().b[32][0]++,t||(Dt().b[32][1]++,this.props.fieldSpec.default))])),Dt().s[80]++,this.props.onChange(this.props.fieldName,i)}));On(this,"makeDataFunction",(Dt().s[81]++,()=>{Dt().f[22]++;const t=(Dt().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Dt().s[83]++,t==="categorical"?(Dt().b[33][0]++,""):(Dt().b[33][1]++,0)),{value:i}=(Dt().s[84]++,this.props);let s;Dt().s[85]++,typeof i=="object"?(Dt().b[34][0]++,Dt().s[86]++,i.stops?(Dt().b[35][0]++,Dt().s[87]++,s={property:"",type:t,base:i.base,stops:i.stops.map(a=>(Dt().f[23]++,Dt().s[88]++,[{zoom:a[0],value:r},(Dt().b[36][0]++,a[1]||(Dt().b[36][1]++,_f(this.props.fieldSpec)))]))}):(Dt().b[35][1]++,Dt().s[89]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},_f(this.props.fieldSpec)],[{zoom:10,value:r},_f(this.props.fieldSpec)]]})):(Dt().b[34][1]++,Dt().s[90]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Dt().b[37][0]++,this.props.value||(Dt().b[37][1]++,_f(this.props.fieldSpec)))],[{zoom:10,value:r},(Dt().b[38][0]++,this.props.value||(Dt().b[38][1]++,_f(this.props.fieldSpec)))]]}),Dt().s[91]++,this.props.onChange(this.props.fieldName,s)}));On(this,"onMarkEditing",(Dt().s[92]++,()=>{Dt().f[24]++,Dt().s[93]++,this.setState({isEditing:!0})}));On(this,"onUnmarkEditing",(Dt().s[94]++,()=>{Dt().f[25]++,Dt().s[95]++,this.setState({isEditing:!1})}));Dt().s[25]++,this.state={dataType:_D(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Dt().f[12]++,Dt().s[26]++,r.isEditing?(Dt().b[16][0]++,Dt().s[27]++,{}):(Dt().b[16][1]++,Dt().s[28]++,{isEditing:!1,dataType:_D(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Dt().f[13]++,Dt().s[29]++,t.expression.interpolated?(Dt().b[17][0]++,Dt().s[30]++,"exponential"):(Dt().b[17][1]++,Dt().s[31]++,t.type==="number"?(Dt().b[18][0]++,Dt().s[32]++,"interval"):(Dt().b[18][1]++,Dt().s[33]++,"categorical"))}render(){Dt().f[26]++;const{dataType:t}=(Dt().s[96]++,this.state),r=(Dt().s[97]++,this.props.fieldSpec.default===this.props.value?(Dt().b[39][0]++,"maputnik-default-property"):(Dt().b[39][1]++,"maputnik-modified-property"));let i;return Dt().s[98]++,t==="expression"?(Dt().b[40][0]++,Dt().s[99]++,i=le.jsx(RN,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Dt().b[40][1]++,Dt().s[100]++,t==="zoom_function"?(Dt().b[41][0]++,Dt().s[101]++,i=le.jsx(Dce,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Dt().b[41][1]++,Dt().s[102]++,t==="data_function"?(Dt().b[42][0]++,Dt().s[103]++,i=le.jsx(Kce,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Dt().b[42][1]++,Dt().s[104]++,i=le.jsx(bG,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Dt().s[105]++,le.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function Ao(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ao=function(){return a},a}Ao();const Nce=(Ao().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Gce(n,e,t){Ao().f[0]++;const r=(Ao().s[1]++,EG(n,e,t)),i=(Ao().s[2]++,n[r+"_"+e]),s=(Ao().s[3]++,i[t]);return Ao().s[4]++,Nce.indexOf(t)>=0?(Ao().b[0][0]++,Ao().s[5]++,{...s,values:n.$root.sprite.values}):(Ao().b[0][1]++,Ao().s[6]++,t==="text-font"?(Ao().b[1][0]++,Ao().s[7]++,{...s,values:n.$root.glyphs.values}):(Ao().b[1][1]++,Ao().s[8]++,s))}function EG(n,e,t){Ao().f[1]++;const r=(Ao().s[9]++,Ao().b[2][0]++,n["paint_"+e]||(Ao().b[2][1]++,{}));return Ao().s[10]++,t in r?(Ao().b[3][0]++,Ao().s[11]++,"paint"):(Ao().b[3][1]++,Ao().s[12]++,"layout")}class Wce extends Zn.Component{constructor(){super(...arguments);On(this,"onPropertyChange",(Ao().s[13]++,(t,r)=>{Ao().f[2]++;const i=(Ao().s[14]++,EG(this.props.spec,this.props.layer.type,t));Ao().s[15]++,this.props.onChange(i,t,r)}))}render(){Ao().f[3]++;const{errors:t}=(Ao().s[16]++,this.props),r=(Ao().s[17]++,this.props.groupFields.map(i=>{Ao().f[4]++;const s=(Ao().s[18]++,Gce(this.props.spec,this.props.layer.type,i)),a=(Ao().s[19]++,Ao().b[4][0]++,this.props.layer.paint||(Ao().b[4][1]++,{})),o=(Ao().s[20]++,Ao().b[5][0]++,this.props.layer.layout||(Ao().b[5][1]++,{})),d=(Ao().s[21]++,i in a?(Ao().b[6][0]++,a[i]):(Ao().b[6][1]++,o[i])),g=(Ao().s[22]++,i in a?(Ao().b[7][0]++,"paint"):(Ao().b[7][1]++,"layout"));return Ao().s[23]++,le.jsx(jce,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:d,fieldType:g,fieldSpec:s},i)}));return Ao().s[24]++,le.jsx("div",{className:"maputnik-property-group",children:r})}}var tE,CD;function Qce(){return CD||(CD=1,tE=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var a in r)t.d(s,a,(function(o){return r[o]}).bind(null,a));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=dp()},function(n,e){n.exports=Fa()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(k){for(var U,z=1,q=arguments.length;z<q;z++)for(var Q in U=arguments[z])Object.prototype.hasOwnProperty.call(U,Q)&&(k[Q]=U[Q]);return k}).apply(this,arguments)},a=function(k,U){var z={};for(var q in k)Object.prototype.hasOwnProperty.call(k,q)&&U.indexOf(q)<0&&(z[q]=k[q]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var Q=0;for(q=Object.getOwnPropertySymbols(k);Q<q.length;Q++)U.indexOf(q[Q])<0&&Object.prototype.propertyIsEnumerable.call(k,q[Q])&&(z[q[Q]]=k[q[Q]])}return z},o=0,d=r.forwardRef(function(k,U){var z=k.title,q=z===void 0?null:z,Q=k.description,re=Q===void 0?null:Q,X=k.size,Y=X===void 0?null:X,J=k.color,N=J===void 0?"currentColor":J,ie=k.horizontal,he=ie===void 0?null:ie,de=k.vertical,we=de===void 0?null:de,fe=k.rotate,be=fe===void 0?null:fe,Pe=k.spin,pe=Pe===void 0?null:Pe,it=k.style,We=it===void 0?{}:it,$e=k.children,ht=a(k,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var De,Ne=pe!==null&&pe,at=r.Children.map($e,function(Lt){var Kt=Lt;Ne!==!0&&(Ne=(pe===null?Kt.props.spin:pe)===!0);var Fe=Kt.props.size;typeof Y=="number"&&typeof Kt.props.size=="number"&&(Fe=Kt.props.size/Y);var Te={size:Fe,color:N===null?Kt.props.color:N,horizontal:he===null?Kt.props.horizontal:he,vertical:we===null?Kt.props.vertical:we,rotate:be===null?Kt.props.rotate:be,spin:pe===null?Kt.props.spin:pe,inStack:!0};return r.cloneElement(Kt,Te)});Y!==null&&(We.width=typeof Y=="string"?Y:1.5*Y+"rem");var wt,Ct="stack_labelledby_"+o,ft="stack_describedby_"+o;if(q)De=re?Ct+" "+ft:Ct;else if(wt="presentation",re)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:U,viewBox:"0 0 24 24",style:We,role:wt,"aria-labelledby":De},ht),q&&r.createElement("title",{id:Ct},q),re&&r.createElement("desc",{id:ft},re),Ne&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),at)});d.displayName="Stack",d.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},d.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var g=d;t.d(e,"Icon",function(){return O}),t.d(e,"Stack",function(){return g});var b=function(){return(b=Object.assign||function(k){for(var U,z=1,q=arguments.length;z<q;z++)for(var Q in U=arguments[z])Object.prototype.hasOwnProperty.call(U,Q)&&(k[Q]=U[Q]);return k}).apply(this,arguments)},E=function(k,U){var z={};for(var q in k)Object.prototype.hasOwnProperty.call(k,q)&&U.indexOf(q)<0&&(z[q]=k[q]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function"){var Q=0;for(q=Object.getOwnPropertySymbols(k);Q<q.length;Q++)U.indexOf(q[Q])<0&&Object.prototype.propertyIsEnumerable.call(k,q[Q])&&(z[q[Q]]=k[q[Q]])}return z},S=0,O=r.forwardRef(function(k,U){var z=k.path,q=k.id,Q=q===void 0?++S:q,re=k.title,X=re===void 0?null:re,Y=k.description,J=Y===void 0?null:Y,N=k.size,ie=N===void 0?null:N,he=k.color,de=he===void 0?"currentColor":he,we=k.horizontal,fe=we!==void 0&&we,be=k.vertical,Pe=be!==void 0&&be,pe=k.rotate,it=pe===void 0?0:pe,We=k.spin,$e=We!==void 0&&We,ht=k.style,De=ht===void 0?{}:ht,Ne=k.inStack,at=Ne!==void 0&&Ne,wt=E(k,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),Ct={},ft=[];ie!==null&&(at?ft.push("scale("+ie+")"):(De.width=typeof ie=="string"?ie:1.5*ie+"rem",De.height=De.width)),fe&&ft.push("scaleX(-1)"),Pe&&ft.push("scaleY(-1)"),it!==0&&ft.push("rotate("+it+"deg)"),de!==null&&(Ct.fill=de);var Lt=r.createElement("path",b({d:z,style:Ct},at?wt:{})),Kt=Lt;ft.length>0&&(De.transform=ft.join(" "),De.transformOrigin="center",at&&(Kt=r.createElement("g",{style:De},Lt,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Fe,Te=Kt,Se=$e===!0||typeof $e!="number"?2:$e,Je=!at&&(fe||Pe);if(Se<0&&(Je=!Je),$e&&(Te=r.createElement("g",{style:{animation:"spin"+(Je?"-inverse":"")+" linear "+Math.abs(Se)+"s infinite",transformOrigin:"center"}},Kt,!(fe||Pe||it!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),at)return Te;var yt,dt="icon_labelledby_"+Q,Ut="icon_describedby_"+Q;if(X)Fe=J?dt+" "+Ut:dt;else if(yt="presentation",J)throw new Error("title attribute required when description is set");return r.createElement("svg",b({ref:U,viewBox:"0 0 24 24",style:De,role:yt,"aria-labelledby":Fe},wt),X&&r.createElement("title",{id:dt},X),J&&r.createElement("desc",{id:Ut},J),!at&&$e&&(Je?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Te)});O.displayName="Icon",O.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},O.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=O}])),tE}var qce=Qce();const bD=La(qce);function Z1(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Z1=function(){return a},a}Z1();class Yce extends Zn.Component{render(){return Z1().f[0]++,Z1().s[0]++,le.jsxs(SN,{uuid:this.props.id,children:[le.jsx(ON,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(Z1().f[1]++,Z1().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:le.jsxs(dle,{className:"maputnik-layer-editor-group__button",children:[le.jsx("span",{style:{flexGrow:1},children:this.props.title}),le.jsx(bD,{path:Tle,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),le.jsx(bD,{path:kle,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),le.jsx(mle,{children:this.props.children})]})}}function hy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return hy=function(){return a},a}hy();class $ce extends Zn.Component{render(){hy().f[0]++;const e=(hy().s[0]++,this.props.t);return hy().s[1]++,le.jsx(ga,{label:e("Min Zoom"),fieldSpec:ts.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:le.jsx(rm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ts.layer.minzoom.minimum,max:ts.layer.minzoom.maximum,default:ts.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const Vce=(hy().s[2]++,$s()($ce));function fy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return fy=function(){return a},a}fy();class Hce extends Zn.Component{render(){fy().f[0]++;const e=(fy().s[0]++,this.props.t);return fy().s[1]++,le.jsx(ga,{label:e("Max Zoom"),fieldSpec:ts.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:le.jsx(rm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:ts.layer.maxzoom.minimum,max:ts.layer.maxzoom.maximum,default:ts.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const Zce=(fy().s[2]++,$s()(Hce));function _g(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return _g=function(){return a},a}_g();class Xce extends Zn.Component{render(){_g().f[0]++;const e=(_g().s[0]++,this.props.t),t=(_g().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return _g().s[2]++,le.jsx(ga,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:le.jsx(kf,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const Jce=(_g().s[3]++,$s()(Xce)),ede={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},tde={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},nde={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},rde={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},ide={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},ode={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},sde={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},ade={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},lde={groups:[]},fb={line:ede,background:tde,fill:nde,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:rde,symbol:ide,raster:ode,hillshade:sde,heatmap:ade,invalid:lde};function X1(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return X1=function(){return a},a}X1();function BG(n){return X1().f[0]++,X1().s[0]++,n===""?(X1().b[0][0]++,"[empty_string]"):(X1().b[0][1]++,`'${n}'`)}function In(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return In=function(){return a},a}In();function OG(n,e){return In().f[0]++,In().s[0]++,fb[n]?(In().b[0][0]++,{...fb[n],groups:fb[n].groups.map(t=>(In().f[1]++,In().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(In().b[0][1]++,fb.invalid)}function xD(n,e){In().f[2]++;const t=(In().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(In().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(In().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return In().s[5]++,[t,r].concat(OG(n,e).groups).concat([i])}class gB extends Zn.Component{constructor(e){In().f[6]++,In().s[8]++,super(e);const t=(In().s[9]++,{});In().s[10]++,xD(this.props.layer.type,e.t).forEach(r=>{In().f[7]++,In().s[11]++,t[r.title]=!0}),In().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){In().f[8]++;const r=(In().s[13]++,{...t.editorGroups});return In().s[14]++,OG(e.layer.type,e.t).groups.forEach(i=>{In().f[9]++,In().s[15]++,i.title in r?In().b[1][1]++:(In().b[1][0]++,In().s[16]++,r[i.title]=!0)}),In().s[17]++,{editorGroups:r}}getChildContext(){return In().f[10]++,In().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){In().f[11]++,In().s[19]++,this.props.onLayerChanged(this.props.layerIndex,Eae(this.props.layer,e,t,r))}onGroupToggle(e,t){In().f[12]++;const r=(In().s[20]++,{...this.state.editorGroups,[e]:t});In().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){In().f[13]++;let r=(In().s[22]++,"");In().s[23]++,this.props.layer.metadata?(In().b[2][0]++,In().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):In().b[2][1]++;const{errors:i,layerIndex:s}=(In().s[25]++,this.props),a=(In().s[26]++,{});In().s[27]++,i.forEach(g=>{In().f[14]++,In().s[28]++,In().b[4][0]++,g.parsed&&(In().b[4][1]++,g.parsed.type==="layer")&&(In().b[4][2]++,g.parsed.data.index==s)?(In().b[3][0]++,In().s[29]++,a[g.parsed.data.key]={message:g.parsed.data.message}):In().b[3][1]++});let o;const d=(In().s[30]++,this.props.layer);switch(In().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,d.source)?(In().b[5][0]++,In().s[32]++,o=this.props.sources[d.source].layers):In().b[5][1]++,In().s[33]++,e){case"layer":return In().b[6][0]++,In().s[34]++,le.jsxs("div",{children:[le.jsx(hN,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:a.id,onChange:g=>(In().f[15]++,In().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,g))}),le.jsx(dN,{disabled:!0,error:a.type,value:this.props.layer.type,onChange:g=>(In().f[16]++,In().s[36]++,this.props.onLayerChanged(this.props.layerIndex,Sae(this.props.layer,g)))}),(In().b[7][0]++,this.props.layer.type!=="background"&&(In().b[7][1]++,le.jsx(pN,{error:a.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:g=>(In().f[17]++,In().s[37]++,this.changeProperty(null,"source",g))}))),(In().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(In().b[8][1]++,le.jsx(gN,{error:a["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:g=>(In().f[18]++,In().s[38]++,this.changeProperty(null,"source-layer",g))}))),le.jsx(Vce,{error:a.minzoom,value:this.props.layer.minzoom,onChange:g=>(In().f[19]++,In().s[39]++,this.changeProperty(null,"minzoom",g))}),le.jsx(Zce,{error:a.maxzoom,value:this.props.layer.maxzoom,onChange:g=>(In().f[20]++,In().s[40]++,this.changeProperty(null,"maxzoom",g))}),le.jsx(Jce,{error:a.comment,value:r,onChange:g=>(In().f[21]++,In().s[41]++,this.changeProperty("metadata","maputnik:comment",g==""?(In().b[9][0]++,void 0):(In().b[9][1]++,g)))})]});case"filter":return In().b[6][1]++,In().s[42]++,le.jsx("div",{children:le.jsx("div",{className:"maputnik-filter-editor-wrapper",children:le.jsx(Qle,{errors:a,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:g=>(In().f[22]++,In().s[43]++,this.changeProperty(null,"filter",g))})})});case"properties":return In().b[6][2]++,In().s[44]++,le.jsx(Wce,{errors:a,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return In().b[6][3]++,In().s[45]++,le.jsx(xI,{layer:this.props.layer,onChange:g=>{In().f[23]++,In().s[46]++,this.props.onLayerChanged(this.props.layerIndex,g)}});default:return In().b[6][4]++,In().s[47]++,le.jsx(le.Fragment,{})}}moveLayer(e){In().f[24]++,In().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){In().f[25]++;const e=(In().s[49]++,this.props.t),t=(In().s[50]++,[]),r=(In().s[51]++,this.props.layer.type),i=(In().s[52]++,xD(r,e).filter(d=>(In().f[26]++,In().s[53]++,In().b[10][0]++,!(r==="background"&&(In().b[10][1]++,d.type==="source")))).map(d=>{In().f[27]++;const g=(In().s[54]++,d.id);return In().s[55]++,t.push(g),In().s[56]++,le.jsx(Yce,{"data-wd-key":d.title,id:g,title:d.title,isActive:this.state.editorGroups[d.title],onActiveToggle:this.onGroupToggle.bind(this,d.title),children:this.renderGroupType(d.type,d.fields)},g)})),s=(In().s[57]++,In().b[11][0]++,this.props.layer.layout||(In().b[11][1]++,{})),a=(In().s[58]++,{delete:{text:e("Delete"),handler:()=>(In().f[28]++,In().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(In().f[29]++,In().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(In().b[12][0]++,e("Show")):(In().b[12][1]++,e("Hide")),handler:()=>(In().f[30]++,In().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(In().f[31]++,In().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(In().f[32]++,In().s[63]++,this.moveLayer(1))}});function o(d,g){In().f[33]++,In().s[64]++,g.stopPropagation(),In().s[65]++,a[d].handler()}return In().s[66]++,le.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[le.jsx("header",{children:le.jsxs("div",{className:"layer-header",children:[le.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:BG(this.props.layer.id)})}),le.jsx("div",{className:"layer-header__info",children:le.jsxs(lb.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[le.jsx(lb.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:le.jsx(OH,{className:"more-menu__button__svg"})}),le.jsx(lb.Menu,{children:le.jsx("ul",{className:"more-menu__menu",children:Object.keys(a).map(d=>{In().f[34]++;const g=(In().s[67]++,a[d]);return In().s[68]++,le.jsx("li",{children:le.jsx(lb.MenuItem,{value:d,className:"more-menu__menu__item",children:g.text})},d)})})})]})})]})}),le.jsx(Jae,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}On(gB,"defaultProps",(In().s[6]++,{onLayerChanged:()=>{In().f[3]++},onLayerIdChange:()=>{In().f[4]++},onLayerDestroyed:()=>{In().f[5]++}})),On(gB,"childContextTypes",(In().s[7]++,{reactIconBase:fi.object}));const ude=(In().s[69]++,$s()(gB));var wD=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Ade=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),cde=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),dde=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),hde=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),fde=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),pde=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,mde=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,MD=3,gde=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",pde]],SD=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yde(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new fde:typeof navigator<"u"?_de(navigator.userAgent):bde()}function vde(n){return n!==""&&gde.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function _de(n){var e=vde(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new hde;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<MD&&(i=wD(wD([],i,!0),xde(MD-i.length),!0)):i=[];var s=i.join("."),a=Cde(n),o=mde.exec(n);return o&&o[1]?new dde(t,s,a,o[1]):new Ade(t,s,a)}function Cde(n){for(var e=0,t=SD.length;e<t;e++){var r=SD[e],i=r[0],s=r[1],a=s.exec(n);if(a)return i}return null}function bde(){var n=typeof process<"u"&&process.version;return n?new cde(process.version.slice(1)):null}function xde(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const wde="maputnik",Mde="2.1.1",Sde="A MapLibre GL visual style editor",Ede="module",Bde="''",Ode={start:"vite",build:"tsc && vite build --base=/maputnik/","build-desktop":"tsc && vite build --base=/ && cd desktop && make","i18n:refresh":"i18next 'src/**/*.{ts,tsx,js,jsx}'",lint:"eslint ./src ./cypress --ext ts,tsx,js,jsx --report-unused-disable-directives --max-warnings 0",test:"cypress run","cy:open":"cypress open","lint-css":'stylelint "src/styles/*.scss"',"sort-styles":"jq 'sort_by(.id)' src/config/styles.json > tmp.json && mv tmp.json src/config/styles.json"},Ide={type:"git",url:"https://github.com/maplibre/maputnik"},kde="Lukas Martinelli",Tde="MIT",Pde="https://github.com/maplibre/maputnik#readme",Rde={"@mapbox/mapbox-gl-rtl-text":"^0.3.0","@maplibre/maplibre-gl-geocoder":"^1.7.1","@maplibre/maplibre-gl-inspect":"^1.7.1","@maplibre/maplibre-gl-style-spec":"^23.1.0","@mdi/js":"^7.4.47","@mdi/react":"^1.6.1","array-move":"^4.0.0",buffer:"^6.0.3",classnames:"^2.5.1",codemirror:"^5.65.2",color:"^4.2.3","detect-browser":"^5.3.0",events:"^3.3.0","file-saver":"^2.0.5",i18next:"^24.2.1","i18next-browser-languagedetector":"^8.0.2","i18next-resources-to-backend":"^1.2.1","json-stringify-pretty-compact":"^4.0.0","json-to-ast":"^2.1.0",jsonlint:"github:josdejong/jsonlint#85a19d7",lodash:"^4.17.21","lodash.capitalize":"^4.2.1","lodash.clamp":"^4.0.3","lodash.clonedeep":"^4.5.0","lodash.get":"^4.4.2","lodash.isequal":"^4.5.0","lodash.throttle":"^4.1.1","maplibre-gl":"^5.0.1","maputnik-design":"github:maputnik/design#172b06c",ol:"^10.3.1","ol-mapbox-style":"^12.4.0","prop-types":"^15.8.1",react:"^18.2.0","react-accessible-accordion":"^5.0.0","react-aria-menubutton":"^7.0.3","react-aria-modal":"^5.0.2","react-autobind":"^1.0.6","react-autocomplete":"^1.8.1","react-collapse":"^5.1.1","react-color":"^2.19.3","react-dom":"^18.2.0","react-file-reader-input":"^2.0.0","react-i18next":"^15.4.0","react-icon-base":"^2.1.2","react-icons":"^5.4.0","react-sortable-hoc":"^2.0.0","reconnecting-websocket":"^4.4.0",slugify:"^1.6.6","string-hash":"^1.1.3",url:"^0.11.4"},Kde={esversion:6},Dde={extends:"stylelint-config-recommended-scss",rules:{"no-descending-specificity":null,"media-feature-name-no-unknown":[!0,{ignoreMediaFeatureNames:["prefers-reduced-motion"]}]}},Lde={"@cypress/code-coverage":"^3.13.10","@istanbuljs/nyc-config-typescript":"^1.0.2","@rollup/plugin-replace":"^6.0.2","@shellygo/cypress-test-utils":"^4.1.11","@types/codemirror":"^5.60.15","@types/color":"^4.2.0","@types/cors":"^2.8.17","@types/file-saver":"^2.0.7","@types/geojson":"^7946.0.14","@types/json-to-ast":"^2.1.4","@types/lodash.capitalize":"^4.2.9","@types/lodash.clamp":"^4.0.9","@types/lodash.clonedeep":"^4.5.9","@types/lodash.get":"^4.4.9","@types/lodash.isequal":"^4.5.8","@types/lodash.throttle":"^4.1.9","@types/randomcolor":"^0.5.9","@types/react":"^18.2.67","@types/react-aria-menubutton":"^6.2.14","@types/react-aria-modal":"^5.0.0","@types/react-autocomplete":"^1.8.11","@types/react-collapse":"^5.0.4","@types/react-color":"^3.0.13","@types/react-dom":"^18.2.22","@types/react-file-reader-input":"^2.0.4","@types/react-icon-base":"^2.1.6","@types/string-hash":"^1.1.3","@types/uuid":"^10.0.0","@types/wicg-file-system-access":"^2023.10.5","@typescript-eslint/eslint-plugin":"^7.3.1","@typescript-eslint/parser":"^7.3.1","@vitejs/plugin-react":"^4.3.4",cors:"^2.8.5",cypress:"^14.0.0","cypress-plugin-tab":"^1.0.5",eslint:"^8.57.0","eslint-plugin-react":"^7.37.4","eslint-plugin-react-hooks":"^5.1.0","eslint-plugin-react-refresh":"^0.4.18","i18next-parser":"^9.1.0",istanbul:"^0.4.5","istanbul-lib-coverage":"^3.2.2",postcss:"^8.4.38","react-hot-loader":"^4.13.1",sass:"^1.83.4",stylelint:"^16.13.2","stylelint-config-recommended-scss":"^14.1.0","stylelint-scss":"^6.10.1",typescript:"^5.7.3",uuid:"^11.0.5",vite:"^6.0.11","vite-plugin-istanbul":"^6.0.2"},ED={name:wde,version:Mde,description:Sde,type:Ede,main:Bde,scripts:Ode,repository:Ide,author:kde,license:Tde,homepage:Pde,dependencies:Rde,jshintConfig:Kde,stylelint:Dde,devDependencies:Lde},Fde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Wi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Wi=function(){return a},a}Wi();const Ude=(Wi().s[0]++,yde()),pb=(Wi().s[1]++,["chrome","firefox"].indexOf(Ude.name)>-1);class og extends Zn.Component{render(){return Wi().f[0]++,Wi().s[2]++,le.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class zde extends Zn.Component{render(){return Wi().f[1]++,Wi().s[3]++,le.jsx("a",{className:tm("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class BD extends Zn.Component{render(){return Wi().f[2]++,Wi().s[4]++,le.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class mb extends Zn.Component{render(){return Wi().f[3]++,Wi().s[5]++,le.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class jde extends Zn.Component{constructor(){super(...arguments);On(this,"state",(Wi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));On(this,"onSkip",(Wi().s[9]++,t=>{if(Wi().f[6]++,Wi().s[10]++,t==="map")Wi().b[0][0]++,Wi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Wi().b[0][1]++;const r=(Wi().s[12]++,document.querySelector("#skip-target-"+t));Wi().s[13]++,r.focus()}}))}handleSelection(t){Wi().f[4]++,Wi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Wi().f[5]++,Wi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Wi().f[7]++;const t=(Wi().s[14]++,this.props.t),r=(Wi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!pb},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!pb},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!pb},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!pb}]),i=(Wi().s[16]++,r.find(s=>(Wi().f[8]++,Wi().s[17]++,s.id===this.props.mapState)));return Wi().s[18]++,le.jsx("nav",{className:"maputnik-toolbar",children:le.jsxs("div",{className:"maputnik-toolbar__inner",children:[le.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[le.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:s=>(Wi().f[9]++,Wi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),le.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:s=>(Wi().f[10]++,Wi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),le.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:s=>(Wi().f[11]++,Wi().s[21]++,this.onSkip("map")),children:t("Map view")}),le.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[le.jsx("img",{src:Fde,alt:t("Maputnik on GitHub")}),le.jsxs("h1",{children:[le.jsx("span",{className:"maputnik-toolbar-name",children:ED.name}),le.jsxs("span",{className:"maputnik-toolbar-version",children:["v",ED.version]})]})]})]}),le.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[le.jsxs(mb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[le.jsx(mH,{}),le.jsx(og,{children:t("Open")})]}),le.jsxs(mb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[le.jsx(_6,{}),le.jsx(og,{children:t("Save")})]}),le.jsxs(mb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[le.jsx(wH,{}),le.jsx(og,{children:t("Data Sources")})]}),le.jsxs(mb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[le.jsx(gH,{}),le.jsx(og,{children:t("Style Settings")})]}),le.jsxs(BD,{wdKey:"nav:inspect",children:[le.jsx(cH,{}),le.jsxs(og,{children:[t("View"),le.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:s=>(Wi().f[12]++,Wi().s[22]++,this.handleSelection(s.target.value)),value:i==null?void 0:i.id,children:[r.filter(s=>(Wi().f[13]++,Wi().s[23]++,s.group==="general")).map(s=>(Wi().f[14]++,Wi().s[24]++,le.jsx("option",{value:s.id,disabled:s.disabled,"data-wd-key":s.id,children:s.title},s.id))),le.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(s=>(Wi().f[15]++,Wi().s[25]++,s.group==="color-accessibility")).map(s=>(Wi().f[16]++,Wi().s[26]++,le.jsx("option",{value:s.id,disabled:s.disabled,children:s.title},s.id)))})]})]})]}),le.jsxs(BD,{wdKey:"nav:language",children:[le.jsx(pH,{}),le.jsxs(og,{children:["Language",le.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:s=>(Wi().f[17]++,Wi().s[27]++,this.handleLanguageChange(s.target.value)),value:this.props.i18n.language,children:Object.entries(eF).map(([s,a])=>(Wi().f[18]++,Wi().s[28]++,le.jsx("option",{value:s,children:a},s)))})]})]}),le.jsxs(zde,{href:"https://github.com/maplibre/maputnik/wiki",children:[le.jsx(dH,{}),le.jsx(og,{children:t("Help")})]})]})]})})}}const Nde=(Wi().s[29]++,$s()(jde));function D2(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return D2=function(){return a},a}D2();class Gde extends Zn.Component{render(){return D2().f[0]++,D2().s[0]++,le.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function rp(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return rp=function(){return a},a}rp();class IG extends Zn.Component{getChildContext(){return rp().f[0]++,rp().s[1]++,{reactIconBase:{size:14}}}render(){return rp().f[1]++,rp().s[2]++,document.body.dir=this.props.i18n.dir(),rp().s[3]++,le.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,le.jsxs("div",{className:"maputnik-layout-main",children:[le.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),le.jsx("div",{className:"maputnik-layout-drawer",children:le.jsx(Gde,{children:this.props.layerEditor})}),this.props.map]}),(rp().b[0][0]++,this.props.bottom&&(rp().b[0][1]++,le.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}On(IG,"childContextTypes",(rp().s[0]++,{reactIconBase:fi.object}));const Wde=(rp().s[4]++,$s()(IG));function ul(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ul=function(){return a},a}ul();class kG extends Zn.Component{render(){var s,a;ul().f[1]++;const{t:e,selectedLayerIndex:t}=(ul().s[1]++,this.props),r=(ul().s[2]++,(s=this.props.errors)==null?void 0:s.map((o,d)=>{var b;ul().f[2]++;let g;if(ul().s[3]++,ul().b[1][0]++,o.parsed&&(ul().b[1][1]++,o.parsed.type==="layer")){ul().b[0][0]++;const{parsed:E}=(ul().s[4]++,o),S=(ul().s[5]++,(b=this.props.mapStyle)==null?void 0:b.layers[E.data.index].id);ul().s[6]++,g=le.jsxs(le.Fragment,{children:[le.jsxs(M0,{t:e,children:["Layer ",le.jsx("span",{children:BG(S)}),": ",E.data.message]}),(ul().b[2][0]++,t!==E.data.index&&(ul().b[2][1]++,le.jsxs(le.Fragment,{children:["",le.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(ul().f[3]++,ul().s[7]++,this.props.onLayerSelect(E.data.index)),children:e("switch to layer")})]})))]})}else ul().b[0][1]++,ul().s[8]++,g=o.message;return ul().s[9]++,le.jsx("p",{className:"maputnik-message-panel-error",children:g},"error-"+d)})),i=(ul().s[10]++,(a=this.props.infos)==null?void 0:a.map((o,d)=>(ul().f[4]++,ul().s[11]++,le.jsx("p",{children:o},"info-"+d))));return ul().s[12]++,le.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}On(kG,"defaultProps",(ul().s[0]++,{onLayerSelect:()=>{ul().f[0]++}}));const Qde=(ul().s[13]++,$s()(kG));function L2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return L2=function(){return a},a}L2();class F2 extends Zn.Component{render(){return L2().f[0]++,L2().s[0]++,le.jsx(S_,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(yG,{...this.props})})}}function U2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return U2=function(){return a},a}U2();class op extends Zn.Component{render(){return U2().f[0]++,U2().s[0]++,le.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(rm,{...this.props})})}}function z2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return z2=function(){return a},a}z2();class Np extends Zn.Component{render(){return z2().f[0]++,z2().s[0]++,le.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(kf,{...this.props})})}}function j2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return j2=function(){return a},a}j2();class E_ extends Zn.Component{render(){return j2().f[0]++,j2().s[0]++,le.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(qI,{...this.props})})}}function N2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return N2=function(){return a},a}N2();class a3 extends Zn.Component{render(){return N2().f[0]++,N2().s[0]++,le.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(Ng,{...this.props})})}}function G2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return G2=function(){return a},a}G2();class qde extends Zn.Component{render(){return G2().f[0]++,G2().s[0]++,le.jsx(S_,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(QI,{...this.props})})}}function W2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return W2=function(){return a},a}W2();class Yde extends Zn.Component{render(){return W2().f[0]++,W2().s[0]++,le.jsx(ga,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(gG,{...this.props})})}}function B_(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return B_=function(){return a},a}B_();B_().s[0]++;const TG=n=>(B_().f[0]++,B_().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Fi(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Fi=function(){return a},a}Fi();class $de extends Zn.Component{changeTransitionProperty(e,t){Fi().f[0]++;const r=(Fi().s[0]++,{...this.props.mapStyle.transition});Fi().s[1]++,t===void 0?(Fi().b[0][0]++,Fi().s[2]++,delete r[e]):(Fi().b[0][1]++,Fi().s[3]++,r[e]=t),Fi().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Fi().f[1]++;const r=(Fi().s[5]++,{...this.props.mapStyle.light});Fi().s[6]++,t===void 0?(Fi().b[1][0]++,Fi().s[7]++,delete r[e]):(Fi().b[1][1]++,Fi().s[8]++,r[e]=t),Fi().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Fi().f[2]++;const r=(Fi().s[10]++,{...this.props.mapStyle.terrain});Fi().s[11]++,t===void 0?(Fi().b[2][0]++,Fi().s[12]++,delete r[e]):(Fi().b[2][1]++,Fi().s[13]++,r[e]=t),Fi().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Fi().f[3]++;const r=(Fi().s[15]++,{...this.props.mapStyle});Fi().s[16]++,t===void 0?(Fi().b[3][0]++,Fi().s[17]++,delete r[e]):(Fi().b[3][1]++,Fi().s[18]++,r[e]=t),Fi().s[19]++,this.props.onStyleChanged(r)}render(){Fi().f[4]++;const e=(Fi().s[20]++,Fi().b[4][0]++,this.props.mapStyle.metadata||(Fi().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Fi().s[21]++,this.props),s=(Fi().s[22]++,TG(t)),a=(Fi().s[23]++,Fi().b[5][0]++,this.props.mapStyle.light||(Fi().b[5][1]++,{})),o=(Fi().s[24]++,Fi().b[6][0]++,this.props.mapStyle.transition||(Fi().b[6][1]++,{})),d=(Fi().s[25]++,Fi().b[7][0]++,this.props.mapStyle.terrain||(Fi().b[7][1]++,{}));return Fi().s[26]++,le.jsx(L0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:le.jsxs("div",{className:"modal:settings",children:[le.jsx(Np,{label:t("Name"),fieldSpec:ts.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),le.jsx(Np,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),le.jsx(E_,{fieldSpec:ts.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),le.jsx(E_,{label:t("Glyphs URL"),fieldSpec:ts.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),le.jsx(Np,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(Np,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(Np,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),le.jsx(F2,{label:t("Center"),fieldSpec:ts.$root.center,length:2,type:"number",value:(Fi().b[8][0]++,i.center||(Fi().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),le.jsx(op,{label:t("Zoom"),fieldSpec:ts.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),le.jsx(op,{label:t("Bearing"),fieldSpec:ts.$root.bearing,value:i.bearing,default:ts.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),le.jsx(op,{label:t("Pitch"),fieldSpec:ts.$root.pitch,value:i.pitch,default:ts.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),le.jsx(qde,{label:t("Light anchor"),fieldSpec:ts.light.anchor,name:"light-anchor",value:a.anchor,options:Object.keys(ts.light.anchor.values),default:ts.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),le.jsx(Yde,{label:t("Light color"),fieldSpec:ts.light.color,value:a.color,default:ts.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),le.jsx(op,{label:t("Light intensity"),fieldSpec:ts.light.intensity,value:a.intensity,default:ts.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),le.jsx(F2,{label:t("Light position"),fieldSpec:ts.light.position,type:"number",length:ts.light.position.length,value:a.position,default:ts.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),le.jsx(Np,{label:t("Terrain source"),fieldSpec:ts.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:d.source,onChange:this.changeTerrainProperty.bind(this,"source")}),le.jsx(op,{label:t("Terrain exaggeration"),fieldSpec:ts.terrain.exaggeration,value:d.exaggeration,default:ts.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),le.jsx(op,{label:t("Transition delay"),fieldSpec:ts.transition.delay,value:o.delay,default:ts.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),le.jsx(op,{label:t("Transition duration"),fieldSpec:ts.transition.duration,value:o.duration,default:ts.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),le.jsx(a3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Fi().b[9][0]++,e["maputnik:renderer"]||(Fi().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const Vde=(Fi().s[27]++,$s()($de));var Tb={exports:{}},Hde=Tb.exports,OD;function Zde(){return OD||(OD=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",Hde,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),r=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function i(s,a){if(typeof s!="string")throw new Error("slugify: string argument expected");a=typeof a=="string"?{replacement:a}:a||{};var o=r[a.locale]||{},d=a.replacement===void 0?"-":a.replacement,g=a.trim===void 0?!0:a.trim,b=s.normalize().split("").reduce(function(E,S){var O=o[S];return O===void 0&&(O=t[S]),O===void 0&&(O=S),O===d&&(O=" "),E+O.replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return a.strict&&(b=b.replace(/[^A-Za-z0-9\s]/g,"")),g&&(b=b.trim()),b=b.replace(/\s+/g,d),a.lower&&(b=b.toLowerCase()),b}return i.extend=function(s){Object.assign(t,s)},i})}(Tb)),Tb.exports}var Xde=Zde();const Jde=La(Xde);var Pb={exports:{}},ehe=Pb.exports,ID;function the(){return ID||(ID=1,function(n,e){(function(t,r){r()})(ehe,function(){function t(g,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function r(g,b,E){var S=new XMLHttpRequest;S.open("GET",g),S.responseType="blob",S.onload=function(){d(S.response,b,E)},S.onerror=function(){console.error("could not download file")},S.send()}function i(g){var b=new XMLHttpRequest;b.open("HEAD",g,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function s(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(b)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(g,b,E){var S=a.URL||a.webkitURL,O=document.createElement("a");b=b||g.name||"download",O.download=b,O.rel="noopener",typeof g=="string"?(O.href=g,O.origin===location.origin?s(O):i(O.href)?r(g,b,E):s(O,O.target="_blank")):(O.href=S.createObjectURL(g),setTimeout(function(){S.revokeObjectURL(O.href)},4e4),setTimeout(function(){s(O)},0))}:"msSaveOrOpenBlob"in navigator?function(g,b,E){if(b=b||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(t(g,E),b);else if(i(g))r(g,b,E);else{var S=document.createElement("a");S.href=g,S.target="_blank",setTimeout(function(){s(S)})}}:function(g,b,E,S){if(S=S||open("","_blank"),S&&(S.document.title=S.document.body.innerText="downloading..."),typeof g=="string")return r(g,b,E);var O=g.type==="application/octet-stream",k=/constructor/i.test(a.HTMLElement)||a.safari,U=/CriOS\/[\d]+/.test(navigator.userAgent);if((U||O&&k||o)&&typeof FileReader<"u"){var z=new FileReader;z.onloadend=function(){var re=z.result;re=U?re:re.replace(/^data:[^;]*;/,"data:attachment/file;"),S?S.location.href=re:location=re,S=null},z.readAsDataURL(g)}else{var q=a.URL||a.webkitURL,Q=q.createObjectURL(g);S?S.location=Q:location.href=Q,S=null,setTimeout(function(){q.revokeObjectURL(Q)},4e4)}});a.saveAs=d.saveAs=d,n.exports=d})}(Pb)),Pb.exports}var kD=the();const nhe="5.0.1",rhe="get_your_own_OpIi9ZULNHzrESv6T2vL",ihe="b71f7f0ba4064f5eb9e903859a9cf5c6",PG={openmaptiles:rhe,thunderforest:ihe};function nr(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return nr=function(){return a},a}nr();const ohe=(nr().s[0]++,KG({version:8,sources:{},layers:[]}));function RG(){return nr().f[0]++,nr().s[1]++,Math.random().toString(36).substring(2,9)}function she(n){return nr().f[1]++,nr().s[2]++,nr().b[1][0]++,!("id"in n)||(nr().b[1][1]++,!n.id)?(nr().b[0][0]++,nr().s[3]++,n.id=RG(),nr().s[4]++,n):(nr().b[0][1]++,nr().s[5]++,n)}function ahe(n){nr().f[2]++;const e=(nr().s[6]++,n.layers.map(t=>{nr().f[3]++;const r=(nr().s[7]++,{...t});return nr().s[8]++,delete r.interactive,nr().s[9]++,r}));return nr().s[10]++,{...n,layers:e}}function lhe(n){return nr().f[4]++,nr().s[11]++,{...n,layers:vY(n.layers)}}function KG(n){return nr().f[5]++,nr().s[12]++,ahe(lhe(she(n)))}function uhe(n,e){nr().f[6]++,nr().s[13]++;for(let t=(nr().s[14]++,0);t<n.length;t++){if(nr().s[15]++,n[t].id===e)return nr().b[2][0]++,nr().s[16]++,t;nr().b[2][1]++}return nr().s[17]++,null}function $I(n,e,t){nr().f[7]++;const r=(nr().s[18]++,nr().b[3][0]++,e.metadata||(nr().b[3][1]++,{}));let i=(nr().s[19]++,r[`maputnik:${n}_access_token`]);return nr().s[20]++,nr().b[5][0]++,t.allowFallback&&(nr().b[5][1]++,!i)?(nr().b[4][0]++,nr().s[21]++,i=PG[n]):nr().b[4][1]++,nr().s[22]++,i}function Ahe(n,e,t=(nr().b[6][0]++,{})){var g;nr().f[8]++;const r=(nr().s[23]++,n.sources[e]);if(nr().s[24]++,r)nr().b[7][1]++;else return nr().b[7][0]++,nr().s[25]++,n;if(nr().s[26]++,nr().b[9][0]++,!("url"in r)||(nr().b[9][1]++,!r.url))return nr().b[8][0]++,nr().s[27]++,n;nr().b[8][1]++;let i=(nr().s[28]++,e);nr().s[29]++,nr().b[11][0]++,e==="thunderforest_transport"||(nr().b[11][1]++,e==="thunderforest_outdoors")?(nr().b[10][0]++,nr().s[30]++,i="thunderforest"):(nr().b[10][1]++,nr().s[31]++,nr().b[13][0]++,"url"in r&&(nr().b[13][1]++,(g=r.url)==null?void 0:g.match(/\.stadiamaps\.com/))?(nr().b[12][0]++,nr().s[32]++,i="stadia"):nr().b[12][1]++);const s=(nr().s[33]++,$I(i,n,t));if(nr().s[34]++,s)nr().b[14][1]++;else return nr().b[14][0]++,nr().s[35]++,n;let a;nr().s[36]++,i=="stadia"?(nr().b[15][0]++,nr().s[37]++,a=`${r.url}?api_key=${s}`):(nr().b[15][1]++,nr().s[38]++,a=r.url.replace("{key}",s));const o=(nr().s[39]++,{...n.sources,[e]:{...r,url:a}}),d=(nr().s[40]++,{...n,sources:o});return nr().s[41]++,d}function che(n,e=(nr().b[16][0]++,{})){nr().f[9]++;let t=(nr().s[42]++,n);if(nr().s[43]++,Object.keys(n.sources).forEach(r=>{nr().f[10]++,nr().s[44]++,t=Ahe(t,r,e)}),nr().s[45]++,nr().b[18][0]++,n.glyphs&&(nr().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(nr().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){nr().b[17][0]++;const r=(nr().s[46]++,$I("openmaptiles",n,e));nr().s[47]++,r?(nr().b[19][0]++,nr().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):nr().b[19][1]++}else nr().b[17][1]++;return nr().s[49]++,t}function dhe(n){nr().f[11]++;const e=(nr().s[50]++,{...n.metadata});return nr().s[51]++,delete e["maputnik:openmaptiles_access_token"],nr().s[52]++,delete e["maputnik:thunderforest_access_token"],nr().s[53]++,delete e["maputnik:stadia_access_token"],nr().s[54]++,{...n,metadata:e}}const cc={ensureStyleValidity:KG,emptyStyle:ohe,indexOfLayer:uhe,generateId:RG,getAccessToken:$I,replaceAccessTokens:che,stripAccessTokens:dhe};function Vr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Vr=function(){return a},a}Vr();const TD=(Vr().s[0]++,nhe),PD=(Vr().s[1]++,typeof window.showSaveFilePicker=="function");class hhe extends Zn.Component{tokenizedStyle(){return Vr().f[0]++,Vr().s[2]++,lU(cc.stripAccessTokens(cc.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Vr().f[1]++,Vr().s[3]++,this.props.mapStyle.name?(Vr().b[0][0]++,Vr().s[4]++,Jde(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Vr().b[0][1]++,Vr().s[5]++,this.props.mapStyle.id)}createHtml(){Vr().f[2]++;const e=(Vr().s[6]++,this.tokenizedStyle()),t=(Vr().s[7]++,Vr().b[1][0]++,this.props.mapStyle.name||(Vr().b[1][1]++,this.props.t("Map"))),r=(Vr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${TD}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${TD}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Vr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Vr().s[10]++,this.exportName());Vr().s[11]++,kD.saveAs(i,s+".html")}async saveStyle(){Vr().f[3]++;const e=(Vr().s[12]++,this.tokenizedStyle());if(Vr().s[13]++,PD)Vr().b[2][1]++;else{Vr().b[2][0]++;const i=(Vr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Vr().s[15]++,this.exportName());Vr().s[16]++,kD.saveAs(i,s+".json"),Vr().s[17]++;return}let t=(Vr().s[18]++,this.props.fileHandle);if(Vr().s[19]++,t==null)if(Vr().b[3][0]++,Vr().s[20]++,t=await this.createFileHandle(),Vr().s[21]++,this.props.onSetFileHandle(t),Vr().s[22]++,t==null){Vr().b[4][0]++,Vr().s[23]++;return}else Vr().b[4][1]++;else Vr().b[3][1]++;const r=(Vr().s[24]++,await t.createWritable());Vr().s[25]++,await r.write(e),Vr().s[26]++,await r.close(),Vr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Vr().f[4]++;const e=(Vr().s[28]++,this.tokenizedStyle()),t=(Vr().s[29]++,await this.createFileHandle());if(Vr().s[30]++,this.props.onSetFileHandle(t),Vr().s[31]++,t==null){Vr().b[5][0]++,Vr().s[32]++;return}else Vr().b[5][1]++;const r=(Vr().s[33]++,await t.createWritable());Vr().s[34]++,await r.write(e),Vr().s[35]++,await r.close(),Vr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Vr().f[5]++;const e=(Vr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Vr().s[38]++,await window.showSaveFilePicker(e));return Vr().s[39]++,this.props.onSetFileHandle(t),Vr().s[40]++,t}changeMetadataProperty(e,t){Vr().f[6]++;const r=(Vr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Vr().s[42]++,this.props.onStyleChanged(r)}render(){Vr().f[7]++;const e=(Vr().s[43]++,this.props.t),t=(Vr().s[44]++,TG(e));return Vr().s[45]++,le.jsx(L0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Save Style")}),le.jsx("p",{children:e("Save the JSON style to your computer.")}),le.jsxs("div",{children:[le.jsx(Np,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Vr().b[6][0]++,this.props.mapStyle.metadata||(Vr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(Np,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Vr().b[7][0]++,this.props.mapStyle.metadata||(Vr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(Np,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Vr().b[8][0]++,this.props.mapStyle.metadata||(Vr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),le.jsxs("div",{className:"maputnik-modal-export-buttons",children:[le.jsxs(Ha,{onClick:this.saveStyle.bind(this),children:[le.jsx(_6,{}),e("Save")]}),(Vr().b[9][0]++,PD&&(Vr().b[9][1]++,le.jsxs(Ha,{onClick:this.saveStyleAs.bind(this),children:[le.jsx(_6,{}),e("Save as")]}))),le.jsxs(Ha,{onClick:this.createHtml.bind(this),children:[le.jsx(MH,{}),e("Create HTML")]})]})]})})}}const fhe=(Vr().s[46]++,$s()(hhe));function Q2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Q2=function(){return a},a}Q2();class DG extends Zn.Component{render(){return Q2().f[0]++,Q2().s[0]++,le.jsx(S_,{label:this.props.label,children:le.jsx(_G,{...this.props})})}}function q2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return q2=function(){return a},a}q2();class phe extends Zn.Component{render(){return q2().f[0]++,q2().s[0]++,le.jsx(ga,{label:this.props.label,children:le.jsx(WI,{...this.props})})}}function Hn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="d4e14fa2f16e0b2ba5d431eb89d4dbe2e079b40d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:24},end:{line:259,column:5}},41:{start:{line:260,column:4},end:{line:322,column:5}},42:{start:{line:262,column:8},end:{line:262,column:79}},43:{start:{line:264,column:8},end:{line:264,column:85}},44:{start:{line:266,column:8},end:{line:266,column:77}},45:{start:{line:268,column:8},end:{line:268,column:76}},46:{start:{line:270,column:8},end:{line:270,column:77}},47:{start:{line:272,column:8},end:{line:284,column:13}},48:{start:{line:277,column:36},end:{line:280,column:14}},49:{start:{line:286,column:8},end:{line:286,column:77}},50:{start:{line:288,column:8},end:{line:315,column:13}},51:{start:{line:294,column:38},end:{line:297,column:16}},52:{start:{line:308,column:38},end:{line:311,column:16}},53:{start:{line:317,column:8},end:{line:317,column:74}},54:{start:{line:319,column:8},end:{line:319,column:74}},55:{start:{line:321,column:8},end:{line:321,column:20}},56:{start:{line:325,column:31},end:{line:325,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:323,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:277,column:22},end:{line:277,column:23}},loc:{start:{line:277,column:36},end:{line:280,column:14}},line:277},26:{name:"(anonymous_26)",decl:{start:{line:294,column:24},end:{line:294,column:25}},loc:{start:{line:294,column:38},end:{line:297,column:16}},line:294},27:{name:"(anonymous_27)",decl:{start:{line:308,column:24},end:{line:308,column:25}},loc:{start:{line:308,column:38},end:{line:311,column:16}},line:308}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:260,column:4},end:{line:322,column:5}},type:"switch",locations:[{start:{line:261,column:6},end:{line:262,column:79}},{start:{line:263,column:6},end:{line:264,column:85}},{start:{line:265,column:6},end:{line:266,column:77}},{start:{line:267,column:6},end:{line:268,column:76}},{start:{line:269,column:6},end:{line:270,column:77}},{start:{line:271,column:6},end:{line:284,column:13}},{start:{line:285,column:6},end:{line:286,column:77}},{start:{line:287,column:6},end:{line:315,column:13}},{start:{line:316,column:6},end:{line:317,column:74}},{start:{line:318,column:6},end:{line:319,column:74}},{start:{line:320,column:6},end:{line:321,column:20}}],line:260},4:{loc:{start:{line:281,column:19},end:{line:281,column:86}},type:"binary-expr",locations:[{start:{line:281,column:19},end:{line:281,column:45}},{start:{line:281,column:49},end:{line:281,column:86}}],line:281},5:{loc:{start:{line:298,column:21},end:{line:298,column:92}},type:"binary-expr",locations:[{start:{line:298,column:21},end:{line:298,column:47}},{start:{line:298,column:51},end:{line:298,column:92}}],line:298},6:{loc:{start:{line:312,column:21},end:{line:312,column:92}},type:"binary-expr",locations:[{start:{line:312,column:21},end:{line:312,column:47}},{start:{line:312,column:51},end:{line:312,column:92}}],line:312}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0,0,0,0,0,0,0,0,0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d4e14fa2f16e0b2ba5d431eb89d4dbe2e079b40d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Hn=function(){return a},a}Hn();class nE extends Zn.Component{render(){Hn().f[0]++;const e=(Hn().s[0]++,this.props.t);return Hn().s[1]++,le.jsxs("div",{children:[le.jsx(E_,{label:e("TileJSON URL"),fieldSpec:Ys.source_vector.url,value:this.props.source.url,onChange:t=>(Hn().f[1]++,Hn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class rE extends Zn.Component{changeTileUrls(e){Hn().f[2]++,Hn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Hn().f[3]++;const e=(Hn().s[4]++,Hn().b[0][0]++,this.props.source.tiles||(Hn().b[0][1]++,[]));return Hn().s[5]++,le.jsx(DG,{label:this.props.t("Tile URL"),fieldSpec:Ys.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Hn().f[4]++;const e=(Hn().s[6]++,this.props.t);return Hn().s[7]++,le.jsxs("div",{children:[this.renderTileUrls(),le.jsx(a3,{label:e("Scheme Type"),fieldSpec:Ys.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Hn().f[5]++,Hn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),le.jsx(op,{label:e("Min Zoom"),fieldSpec:Ys.source_vector.minzoom,value:(Hn().b[1][0]++,this.props.source.minzoom||(Hn().b[1][1]++,0)),onChange:t=>(Hn().f[6]++,Hn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),le.jsx(op,{label:e("Max Zoom"),fieldSpec:Ys.source_vector.maxzoom,value:(Hn().b[2][0]++,this.props.source.maxzoom||(Hn().b[2][1]++,22)),onChange:t=>(Hn().f[7]++,Hn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Hn().s[11]++;const LG=n=>(Hn().f[8]++,Hn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class mhe extends Zn.Component{render(){Hn().f[9]++;const e=(Hn().s[13]++,this.props.t);Hn().s[14]++;const t=(r,i)=>{Hn().f[10]++;const s=(Hn().s[15]++,this.props.source.coordinates.slice(0));Hn().s[16]++,s[r]=i,Hn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return Hn().s[18]++,le.jsxs("div",{children:[le.jsx(E_,{label:e("Image URL"),fieldSpec:Ys.source_image.url,value:this.props.source.url,onChange:r=>(Hn().f[11]++,Hn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),LG(e).map(({label:r,key:i},s)=>(Hn().f[12]++,Hn().s[20]++,le.jsx(F2,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:a=>(Hn().f[13]++,Hn().s[21]++,t(s,a))},i)))]})}}class ghe extends Zn.Component{render(){Hn().f[14]++;const e=(Hn().s[22]++,this.props.t);Hn().s[23]++;const t=(i,s)=>{Hn().f[15]++;const a=(Hn().s[24]++,this.props.source.coordinates.slice(0));Hn().s[25]++,a[i]=s,Hn().s[26]++,this.props.onChange({...this.props.source,coordinates:a})};Hn().s[27]++;const r=i=>{Hn().f[16]++,Hn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Hn().s[29]++,le.jsxs("div",{children:[le.jsx(DG,{label:e("Video URL"),fieldSpec:Ys.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),LG(e).map(({label:i,key:s},a)=>(Hn().f[17]++,Hn().s[30]++,le.jsx(F2,{label:i,length:2,type:"number",value:this.props.source.coordinates[a],default:[0,0],onChange:o=>(Hn().f[18]++,Hn().s[31]++,t(a,o))},s)))]})}}class yhe extends Zn.Component{render(){Hn().f[19]++;const e=(Hn().s[32]++,this.props.t);return Hn().s[33]++,le.jsx(E_,{label:e("GeoJSON URL"),fieldSpec:Ys.source_geojson.data,value:this.props.source.data,onChange:t=>(Hn().f[20]++,Hn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class vhe extends Zn.Component{render(){Hn().f[21]++;const e=(Hn().s[35]++,this.props.t);return Hn().s[36]++,le.jsxs("div",{children:[le.jsx(ga,{label:e("GeoJSON"),fieldSpec:Ys.source_geojson.data,children:le.jsx(xI,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Hn().f[22]++,Hn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),le.jsx(phe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Hn().f[23]++,Hn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class _he extends Zn.Component{render(){Hn().f[24]++;const e=(Hn().s[39]++,this.props.t),t=(Hn().s[40]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Hn().s[41]++,this.props.mode){case"geojson_url":return Hn().b[3][0]++,Hn().s[42]++,le.jsx(yhe,{...t});case"geojson_json":return Hn().b[3][1]++,Hn().s[43]++,le.jsx(vhe,{...t});case"tilejson_vector":return Hn().b[3][2]++,Hn().s[44]++,le.jsx(nE,{...t});case"tile_vector":return Hn().b[3][3]++,Hn().s[45]++,le.jsx(rE,{...t});case"tilejson_raster":return Hn().b[3][4]++,Hn().s[46]++,le.jsx(nE,{...t});case"tile_raster":return Hn().b[3][5]++,Hn().s[47]++,le.jsx(rE,{...t,children:le.jsx(op,{label:e("Tile Size"),fieldSpec:Ys.source_raster.tileSize,onChange:r=>(Hn().f[25]++,Hn().s[48]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Hn().b[4][0]++,this.props.source.tileSize||(Hn().b[4][1]++,Ys.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Hn().b[3][6]++,Hn().s[49]++,le.jsx(nE,{...t});case"tilexyz_raster-dem":return Hn().b[3][7]++,Hn().s[50]++,le.jsxs(rE,{...t,children:[le.jsx(op,{label:e("Tile Size"),fieldSpec:Ys.source_raster_dem.tileSize,onChange:r=>(Hn().f[26]++,Hn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Hn().b[5][0]++,this.props.source.tileSize||(Hn().b[5][1]++,Ys.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),le.jsx(a3,{label:e("Encoding"),fieldSpec:Ys.source_raster_dem.encoding,options:Object.keys(Ys.source_raster_dem.encoding.values),onChange:r=>(Hn().f[27]++,Hn().s[52]++,this.props.onChange({...this.props.source,encoding:r})),value:(Hn().b[6][0]++,this.props.source.encoding||(Hn().b[6][1]++,Ys.source_raster_dem.encoding.default))})]});case"image":return Hn().b[3][8]++,Hn().s[53]++,le.jsx(mhe,{...t});case"video":return Hn().b[3][9]++,Hn().s[54]++,le.jsx(ghe,{...t});default:return Hn().b[3][10]++,Hn().s[55]++,null}}}const FG=(Hn().s[56]++,$s()(_he));function up(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return up=function(){return a},a}up();function Che(n,e){up().f[0]++;const t=(up().s[0]++,{...n.sources});return up().s[1]++,delete t[e],up().s[2]++,{...n,sources:t}}function RD(n,e,t){return up().f[1]++,up().s[3]++,UG(n,e,t)}function UG(n,e,t){up().f[2]++;const r=(up().s[4]++,{...n.sources,[e]:t});return up().s[5]++,{...n,sources:r}}const bhe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},xhe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},whe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},Mhe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},KD={openmaptiles:bhe,thunderforest_transport:xhe,thunderforest_outdoors:whe,open_zoomstack:Mhe};function dn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="0667caa48c4612ae19edc85c8f2029433e2c75ea",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:48,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:29}},14:{start:{line:49,column:2},end:{line:55,column:3}},15:{start:{line:50,column:4},end:{line:54,column:5}},16:{start:{line:51,column:6},end:{line:51,column:27}},17:{start:{line:53,column:6},end:{line:53,column:28}},18:{start:{line:56,column:2},end:{line:58,column:3}},19:{start:{line:57,column:4},end:{line:57,column:19}},20:{start:{line:59,column:2},end:{line:61,column:3}},21:{start:{line:60,column:4},end:{line:60,column:19}},22:{start:{line:62,column:2},end:{line:62,column:14}},23:{start:{line:66,column:14},end:{line:66,column:26}},24:{start:{line:67,column:4},end:{line:93,column:9}},25:{start:{line:79,column:27},end:{line:79,column:67}},26:{start:{line:98,column:4},end:{line:98,column:17}},27:{start:{line:99,column:4},end:{line:103,column:6}},28:{start:{line:106,column:19},end:{line:106,column:50}},29:{start:{line:107,column:25},end:{line:107,column:40}},30:{start:{line:108,column:4},end:{line:186,column:5}},31:{start:{line:110,column:8},end:{line:113,column:10}},32:{start:{line:115,column:8},end:{line:119,column:10}},33:{start:{line:121,column:8},end:{line:124,column:10}},34:{start:{line:126,column:8},end:{line:132,column:10}},35:{start:{line:134,column:8},end:{line:137,column:10}},36:{start:{line:139,column:8},end:{line:146,column:10}},37:{start:{line:148,column:8},end:{line:151,column:10}},38:{start:{line:153,column:8},end:{line:159,column:10}},39:{start:{line:161,column:8},end:{line:170,column:10}},40:{start:{line:172,column:8},end:{line:183,column:10}},41:{start:{line:185,column:8},end:{line:185,column:18}},42:{start:{line:188,column:10},end:{line:191,column:3}},43:{start:{line:189,column:33},end:{line:189,column:43}},44:{start:{line:190,column:4},end:{line:190,column:39}},45:{start:{line:192,column:19},end:{line:194,column:3}},46:{start:{line:193,column:4},end:{line:193,column:30}},47:{start:{line:196,column:14},end:{line:196,column:26}},48:{start:{line:197,column:32},end:{line:199,column:5}},49:{start:{line:200,column:4},end:{line:250,column:9}},50:{start:{line:207,column:27},end:{line:207,column:57}},51:{start:{line:228,column:30},end:{line:228,column:87}},52:{start:{line:255,column:27},end:{line:255,column:40}},53:{start:{line:256,column:4},end:{line:256,column:35}},54:{start:{line:257,column:4},end:{line:257,column:26}},55:{start:{line:260,column:28},end:{line:260,column:38}},56:{start:{line:261,column:22},end:{line:261,column:77}},57:{start:{line:262,column:26},end:{line:275,column:6}},58:{start:{line:263,column:21},end:{line:263,column:47}},59:{start:{line:264,column:6},end:{line:274,column:8}},60:{start:{line:269,column:29},end:{line:269,column:93}},61:{start:{line:270,column:26},end:{line:270,column:85}},62:{start:{line:276,column:27},end:{line:288,column:6}},63:{start:{line:276,column:75},end:{line:276,column:106}},64:{start:{line:277,column:21},end:{line:277,column:44}},65:{start:{line:278,column:6},end:{line:287,column:8}},66:{start:{line:284,column:26},end:{line:284,column:107}},67:{start:{line:289,column:4},end:{line:319,column:6}},68:{start:{line:312,column:45},end:{line:312,column:109}},69:{start:{line:322,column:21},end:{line:322,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:63,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:65,column:2},end:{line:65,column:3}},loc:{start:{line:65,column:11},end:{line:94,column:3}},line:65},4:{name:"(anonymous_4)",decl:{start:{line:79,column:21},end:{line:79,column:22}},loc:{start:{line:79,column:27},end:{line:79,column:67}},line:79},5:{name:"(anonymous_5)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:21},end:{line:104,column:3}},line:97},6:{name:"(anonymous_6)",decl:{start:{line:105,column:2},end:{line:105,column:3}},loc:{start:{line:105,column:22},end:{line:187,column:3}},line:105},7:{name:"(anonymous_7)",decl:{start:{line:188,column:10},end:{line:188,column:11}},loc:{start:{line:188,column:16},end:{line:191,column:3}},line:188},8:{name:"(anonymous_8)",decl:{start:{line:192,column:19},end:{line:192,column:20}},loc:{start:{line:192,column:31},end:{line:194,column:3}},line:192},9:{name:"(anonymous_9)",decl:{start:{line:195,column:2},end:{line:195,column:3}},loc:{start:{line:195,column:11},end:{line:251,column:3}},line:195},10:{name:"(anonymous_10)",decl:{start:{line:207,column:20},end:{line:207,column:21}},loc:{start:{line:207,column:27},end:{line:207,column:57}},line:207},11:{name:"(anonymous_11)",decl:{start:{line:228,column:20},end:{line:228,column:21}},loc:{start:{line:228,column:30},end:{line:228,column:87}},line:228},12:{name:"(anonymous_12)",decl:{start:{line:254,column:2},end:{line:254,column:3}},loc:{start:{line:254,column:21},end:{line:258,column:3}},line:254},13:{name:"(anonymous_13)",decl:{start:{line:259,column:2},end:{line:259,column:3}},loc:{start:{line:259,column:11},end:{line:320,column:3}},line:259},14:{name:"(anonymous_14)",decl:{start:{line:262,column:60},end:{line:262,column:61}},loc:{start:{line:262,column:74},end:{line:275,column:5}},line:262},15:{name:"(anonymous_15)",decl:{start:{line:269,column:20},end:{line:269,column:21}},loc:{start:{line:269,column:29},end:{line:269,column:93}},line:269},16:{name:"(anonymous_16)",decl:{start:{line:270,column:20},end:{line:270,column:21}},loc:{start:{line:270,column:26},end:{line:270,column:85}},line:270},17:{name:"(anonymous_17)",decl:{start:{line:276,column:61},end:{line:276,column:62}},loc:{start:{line:276,column:75},end:{line:276,column:106}},line:276},18:{name:"(anonymous_18)",decl:{start:{line:276,column:112},end:{line:276,column:113}},loc:{start:{line:276,column:126},end:{line:288,column:5}},line:276},19:{name:"(anonymous_19)",decl:{start:{line:284,column:20},end:{line:284,column:21}},loc:{start:{line:284,column:26},end:{line:284,column:107}},line:284},20:{name:"(anonymous_20)",decl:{start:{line:312,column:23},end:{line:312,column:24}},loc:{start:{line:312,column:45},end:{line:312,column:109}},line:312}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:48,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:48,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:49,column:2},end:{line:55,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:55,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},7:{loc:{start:{line:50,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:54,column:5}},{start:{line:52,column:11},end:{line:54,column:5}}],line:50},8:{loc:{start:{line:56,column:2},end:{line:58,column:3}},type:"if",locations:[{start:{line:56,column:2},end:{line:58,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},9:{loc:{start:{line:59,column:2},end:{line:61,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:61,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},10:{loc:{start:{line:106,column:19},end:{line:106,column:50}},type:"binary-expr",locations:[{start:{line:106,column:19},end:{line:106,column:44}},{start:{line:106,column:48},end:{line:106,column:50}}],line:106},11:{loc:{start:{line:106,column:20},end:{line:106,column:36}},type:"binary-expr",locations:[{start:{line:106,column:20},end:{line:106,column:30}},{start:{line:106,column:34},end:{line:106,column:36}}],line:106},12:{loc:{start:{line:108,column:4},end:{line:186,column:5}},type:"switch",locations:[{start:{line:109,column:6},end:{line:113,column:10}},{start:{line:114,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:124,column:10}},{start:{line:125,column:6},end:{line:132,column:10}},{start:{line:133,column:6},end:{line:137,column:10}},{start:{line:138,column:6},end:{line:146,column:10}},{start:{line:147,column:6},end:{line:151,column:10}},{start:{line:152,column:6},end:{line:159,column:10}},{start:{line:160,column:6},end:{line:170,column:10}},{start:{line:171,column:6},end:{line:183,column:10}},{start:{line:184,column:6},end:{line:185,column:18}}],line:108},13:{loc:{start:{line:117,column:19},end:{line:117,column:42}},type:"binary-expr",locations:[{start:{line:117,column:19},end:{line:117,column:33}},{start:{line:117,column:37},end:{line:117,column:42}}],line:117},14:{loc:{start:{line:123,column:15},end:{line:123,column:72}},type:"binary-expr",locations:[{start:{line:123,column:15},end:{line:123,column:25}},{start:{line:123,column:29},end:{line:123,column:72}}],line:123},15:{loc:{start:{line:128,column:17},end:{line:128,column:80}},type:"binary-expr",locations:[{start:{line:128,column:17},end:{line:128,column:29}},{start:{line:128,column:33},end:{line:128,column:80}}],line:128},16:{loc:{start:{line:129,column:19},end:{line:129,column:38}},type:"binary-expr",locations:[{start:{line:129,column:19},end:{line:129,column:33}},{start:{line:129,column:37},end:{line:129,column:38}}],line:129},17:{loc:{start:{line:130,column:19},end:{line:130,column:39}},type:"binary-expr",locations:[{start:{line:130,column:19},end:{line:130,column:33}},{start:{line:130,column:37},end:{line:130,column:39}}],line:130},18:{loc:{start:{line:131,column:18},end:{line:131,column:40}},type:"binary-expr",locations:[{start:{line:131,column:18},end:{line:131,column:31}},{start:{line:131,column:35},end:{line:131,column:40}}],line:131},19:{loc:{start:{line:136,column:15},end:{line:136,column:72}},type:"binary-expr",locations:[{start:{line:136,column:15},end:{line:136,column:25}},{start:{line:136,column:29},end:{line:136,column:72}}],line:136},20:{loc:{start:{line:141,column:17},end:{line:141,column:80}},type:"binary-expr",locations:[{start:{line:141,column:17},end:{line:141,column:29}},{start:{line:141,column:33},end:{line:141,column:80}}],line:141},21:{loc:{start:{line:142,column:19},end:{line:142,column:38}},type:"binary-expr",locations:[{start:{line:142,column:19},end:{line:142,column:33}},{start:{line:142,column:37},end:{line:142,column:38}}],line:142},22:{loc:{start:{line:143,column:19},end:{line:143,column:39}},type:"binary-expr",locations:[{start:{line:143,column:19},end:{line:143,column:33}},{start:{line:143,column:37},end:{line:143,column:39}}],line:143},23:{loc:{start:{line:144,column:18},end:{line:144,column:40}},type:"binary-expr",locations:[{start:{line:144,column:18},end:{line:144,column:31}},{start:{line:144,column:35},end:{line:144,column:40}}],line:144},24:{loc:{start:{line:145,column:20},end:{line:145,column:42}},type:"binary-expr",locations:[{start:{line:145,column:20},end:{line:145,column:35}},{start:{line:145,column:39},end:{line:145,column:42}}],line:145},25:{loc:{start:{line:150,column:15},end:{line:150,column:72}},type:"binary-expr",locations:[{start:{line:150,column:15},end:{line:150,column:25}},{start:{line:150,column:29},end:{line:150,column:72}}],line:150},26:{loc:{start:{line:155,column:17},end:{line:155,column:80}},type:"binary-expr",locations:[{start:{line:155,column:17},end:{line:155,column:29}},{start:{line:155,column:33},end:{line:155,column:80}}],line:155},27:{loc:{start:{line:156,column:19},end:{line:156,column:38}},type:"binary-expr",locations:[{start:{line:156,column:19},end:{line:156,column:33}},{start:{line:156,column:37},end:{line:156,column:38}}],line:156},28:{loc:{start:{line:157,column:19},end:{line:157,column:39}},type:"binary-expr",locations:[{start:{line:157,column:19},end:{line:157,column:33}},{start:{line:157,column:37},end:{line:157,column:39}}],line:157},29:{loc:{start:{line:158,column:20},end:{line:158,column:42}},type:"binary-expr",locations:[{start:{line:158,column:20},end:{line:158,column:35}},{start:{line:158,column:39},end:{line:158,column:42}}],line:158}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0,0,0,0,0,0,0,0,0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0667caa48c4612ae19edc85c8f2029433e2c75ea"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return dn=function(){return a},a}dn();class She extends Zn.Component{render(){return dn().f[0]++,dn().s[0]++,le.jsx("div",{className:"maputnik-public-source",children:le.jsxs(Ha,{className:"maputnik-public-source-select",onClick:()=>(dn().f[1]++,dn().s[1]++,this.props.onSelect(this.props.id)),children:[le.jsxs("div",{className:"maputnik-public-source-info",children:[le.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),le.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(dU,{})]})})}}function Ehe(n){return dn().f[2]++,dn().s[2]++,n.type==="raster"?(dn().b[0][0]++,dn().s[3]++,n.tiles?(dn().b[1][0]++,dn().s[4]++,"tile_raster"):(dn().b[1][1]++,dn().s[5]++,"tilejson_raster")):(dn().b[0][1]++,dn().s[6]++,n.type==="raster-dem"?(dn().b[2][0]++,dn().s[7]++,n.tiles?(dn().b[3][0]++,dn().s[8]++,"tilexyz_raster-dem"):(dn().b[3][1]++,dn().s[9]++,"tilejson_raster-dem")):(dn().b[2][1]++,dn().s[10]++,n.type==="vector"?(dn().b[4][0]++,dn().s[11]++,n.tiles?(dn().b[5][0]++,dn().s[12]++,"tile_vector"):(dn().b[5][1]++,dn().s[13]++,"tilejson_vector")):(dn().b[4][1]++,dn().s[14]++,n.type==="geojson"?(dn().b[6][0]++,dn().s[15]++,typeof n.data=="string"?(dn().b[7][0]++,dn().s[16]++,"geojson_url"):(dn().b[7][1]++,dn().s[17]++,"geojson_json")):(dn().b[6][1]++,dn().s[18]++,n.type==="image"?(dn().b[8][0]++,dn().s[19]++,"image"):(dn().b[8][1]++,dn().s[20]++,n.type==="video"?(dn().b[9][0]++,dn().s[21]++,"video"):(dn().b[9][1]++,dn().s[22]++,null))))))}class Bhe extends Zn.Component{render(){dn().f[3]++;const e=(dn().s[23]++,this.props.t);return dn().s[24]++,le.jsxs("div",{className:"maputnik-active-source-type-editor",children:[le.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[le.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(Ha,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(dn().f[4]++,dn().s[25]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:le.jsx(ky,{})})]}),le.jsx("div",{className:"maputnik-active-source-type-editor-content",children:le.jsx(FG,{onChange:this.props.onChange,mode:Ehe(this.props.source),source:this.props.source})})]})}}class Ohe extends Zn.Component{constructor(t){dn().f[5]++,dn().s[26]++;super(t);On(this,"onAdd",(dn().s[42]++,()=>{dn().f[7]++;const{source:t,sourceId:r}=(dn().s[43]++,this.state);dn().s[44]++,this.props.onAdd(r,t)}));On(this,"onChangeSource",(dn().s[45]++,t=>{dn().f[8]++,dn().s[46]++,this.setState({source:t})}));dn().s[27]++,this.state={mode:"tilejson_vector",sourceId:cc.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){dn().f[6]++;const r=(dn().s[28]++,dn().b[10][0]++,(dn().b[11][0]++,this.state||(dn().b[11][1]++,{})).source||(dn().b[10][1]++,{})),{protocol:i}=(dn().s[29]++,window.location);switch(dn().s[30]++,t){case"geojson_url":return dn().b[12][0]++,dn().s[31]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return dn().b[12][1]++,dn().s[32]++,{type:"geojson",cluster:(dn().b[13][0]++,r.cluster||(dn().b[13][1]++,!1)),data:""};case"tilejson_vector":return dn().b[12][2]++,dn().s[33]++,{type:"vector",url:(dn().b[14][0]++,r.url||(dn().b[14][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return dn().b[12][3]++,dn().s[34]++,{type:"vector",tiles:(dn().b[15][0]++,r.tiles||(dn().b[15][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(dn().b[16][0]++,r.minzoom||(dn().b[16][1]++,0)),maxzoom:(dn().b[17][0]++,r.maxzoom||(dn().b[17][1]++,14)),scheme:(dn().b[18][0]++,r.scheme||(dn().b[18][1]++,"xyz"))};case"tilejson_raster":return dn().b[12][4]++,dn().s[35]++,{type:"raster",url:(dn().b[19][0]++,r.url||(dn().b[19][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return dn().b[12][5]++,dn().s[36]++,{type:"raster",tiles:(dn().b[20][0]++,r.tiles||(dn().b[20][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(dn().b[21][0]++,r.minzoom||(dn().b[21][1]++,0)),maxzoom:(dn().b[22][0]++,r.maxzoom||(dn().b[22][1]++,14)),scheme:(dn().b[23][0]++,r.scheme||(dn().b[23][1]++,"xyz")),tileSize:(dn().b[24][0]++,r.tileSize||(dn().b[24][1]++,512))};case"tilejson_raster-dem":return dn().b[12][6]++,dn().s[37]++,{type:"raster-dem",url:(dn().b[25][0]++,r.url||(dn().b[25][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return dn().b[12][7]++,dn().s[38]++,{type:"raster-dem",tiles:(dn().b[26][0]++,r.tiles||(dn().b[26][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(dn().b[27][0]++,r.minzoom||(dn().b[27][1]++,0)),maxzoom:(dn().b[28][0]++,r.maxzoom||(dn().b[28][1]++,14)),tileSize:(dn().b[29][0]++,r.tileSize||(dn().b[29][1]++,512))};case"image":return dn().b[12][8]++,dn().s[39]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return dn().b[12][9]++,dn().s[40]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return dn().b[12][10]++,dn().s[41]++,{}}}render(){dn().f[9]++;const t=(dn().s[47]++,this.props.t),r=(dn().s[48]++,{doc:ts.source_vector.type.doc});return dn().s[49]++,le.jsxs("div",{className:"maputnik-add-source",children:[le.jsx(Np,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(dn().f[10]++,dn().s[50]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),le.jsx(a3,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(dn().f[11]++,dn().s[51]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),le.jsx(FG,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),le.jsx(Ha,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class Ihe extends Zn.Component{stripTitle(e){dn().f[12]++;const t=(dn().s[52]++,{...e});return dn().s[53]++,delete t.title,dn().s[54]++,t}render(){dn().f[13]++;const{t:e,mapStyle:t}=(dn().s[55]++,this.props),r=(dn().s[56]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(dn().s[57]++,Object.keys(t.sources).map(a=>{dn().f[14]++;const o=(dn().s[58]++,t.sources[a]);return dn().s[59]++,le.jsx(Bhe,{sourceId:a,source:o,onChange:d=>(dn().f[15]++,dn().s[60]++,this.props.onStyleChanged(UG(t,a,d))),onDelete:()=>(dn().f[16]++,dn().s[61]++,this.props.onStyleChanged(Che(t,a))),...r},a)})),s=(dn().s[62]++,Object.keys(KD).filter(a=>(dn().f[17]++,dn().s[63]++,!(a in t.sources))).map(a=>{dn().f[18]++;const o=(dn().s[64]++,KD[a]);return dn().s[65]++,le.jsx(She,{id:a,type:o.type,title:o.title,onSelect:()=>(dn().f[19]++,dn().s[66]++,this.props.onStyleChanged(RD(t,a,this.stripTitle(o))))},a)}));return dn().s[67]++,le.jsxs(L0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Active Sources")}),i]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Choose Public Source")}),le.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),le.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Add New Source")}),le.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),le.jsx(Ohe,{onAdd:(a,o)=>(dn().f[20]++,dn().s[68]++,this.props.onStyleChanged(RD(t,a,o))),...r})]})]})}}const khe=(dn().s[69]++,$s()(Ihe));var gb={},DD;function The(){if(DD)return gb;DD=1,Object.defineProperty(gb,"__esModule",{value:!0});var n=Object.assign||function(k){for(var U=1;U<arguments.length;U++){var z=arguments[U];for(var q in z)Object.prototype.hasOwnProperty.call(z,q)&&(k[q]=z[q])}return k},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},t=function(){function k(U,z){for(var q=0;q<z.length;q++){var Q=z[q];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(U,Q.key,Q)}}return function(U,z,q){return z&&k(U.prototype,z),q&&k(U,q),U}}(),r=Fa(),i=d(r),s=I_(),a=o(s);function o(k){return k&&k.__esModule?k:{default:k}}function d(k){if(k&&k.__esModule)return k;var U={};if(k!=null)for(var z in k)Object.prototype.hasOwnProperty.call(k,z)&&(U[z]=k[z]);return U.default=k,U}function g(k,U){var z={};for(var q in k)U.indexOf(q)>=0||Object.prototype.hasOwnProperty.call(k,q)&&(z[q]=k[q]);return z}function b(k,U){if(!(k instanceof U))throw new TypeError("Cannot call a class as a function")}function E(k,U){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:k}function S(k,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);k.prototype=Object.create(U&&U.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(k,U):k.__proto__=U)}var O=function(k){S(U,k);function U(z){b(this,U);var q=E(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,z));q.handleChange=function(re){var X=Array.prototype.slice.call(re.target.files),Y=(q.props.as||"url").toLowerCase();Promise.all(X.map(function(J){return new Promise(function(N,ie){var he=new FileReader;switch(he.onload=function(de){N([de,J])},Y){case"binary":{he.readAsBinaryString(J);break}case"buffer":{he.readAsArrayBuffer(J);break}case"text":{he.readAsText(J);break}case"url":{he.readAsDataURL(J);break}}})})).then(function(J){q.props.onChange(re,J)})},q.triggerInput=function(){var re=a.default.findDOMNode(q._reactFileReaderInput);re&&re.click()};var Q=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!Q.File||!Q.FileReader||!Q.FileList||!Q.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),q}return t(U,[{key:"render",value:function(){var q=this,Q=this.props;Q.as;var re=Q.children,X=Q.style,Y=g(Q,["as","children","style"]),J=re?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:X},i.createElement("input",n({},Y,{type:"file",ref:function(ie){q._reactFileReaderInput=ie},onChange:this.handleChange,onClick:function(){q._reactFileReaderInput.value=null},style:J})),re)}}]),U}(i.Component);return gb.default=O,gb}var Phe=The();const Rhe=La(Phe);function ph(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return ph=function(){return a},a}ph();class Khe extends Zn.Component{underlayOnClick(e){ph().f[0]++,ph().s[0]++,e.stopPropagation()}render(){ph().f[1]++;const e=(ph().s[1]++,this.props.t);return ph().s[2]++,le.jsxs(L0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(ph().f[2]++,ph().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(ph().f[3]++,ph().s[4]++,this.props.onCancel()),children:[le.jsx("p",{children:this.props.message}),le.jsx("p",{className:"maputnik-dialog__buttons",children:le.jsx(Ha,{onClick:t=>(ph().f[4]++,ph().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const Dhe=(ph().s[6]++,$s()(Khe)),zG=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function tr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return tr=function(){return a},a}tr();class Lhe extends Zn.Component{render(){return tr().f[0]++,tr().s[0]++,le.jsx("div",{className:"maputnik-public-style",children:le.jsxs(Ha,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(tr().f[1]++,tr().s[1]++,this.props.onSelect(this.props.url)),children:[le.jsxs("div",{className:"maputnik-public-style-header",children:[le.jsx("div",{children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(dU,{})]}),le.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class Fhe extends Zn.Component{constructor(t){tr().f[2]++,tr().s[2]++;super(t);On(this,"onStyleSelect",(tr().s[10]++,t=>{tr().f[5]++,tr().s[11]++,this.clearError();let r=(tr().s[12]++,!1);tr().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return tr().f[6]++,tr().s[14]++,i.json()}).then(i=>{if(tr().f[7]++,tr().s[15]++,r){tr().b[2][0]++,tr().s[16]++;return}else tr().b[2][1]++;tr().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const s=(tr().s[18]++,cc.ensureStyleValidity(i));tr().s[19]++,console.log("Loaded style ",s.id),tr().s[20]++,this.props.onStyleOpen(s),tr().s[21]++,this.onOpenToggle()}).catch(i=>{tr().f[8]++,tr().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),tr().s[23]++,console.error(i),tr().s[24]++,console.warn("Could not open the style URL",t)}),tr().s[25]++,this.setState({activeRequest:{abort:function(){tr().f[9]++,tr().s[26]++,r=!0}},activeRequestUrl:t})}));On(this,"onSubmitUrl",(tr().s[27]++,t=>{tr().f[10]++,tr().s[28]++,t.preventDefault(),tr().s[29]++,this.onStyleSelect(this.state.styleUrl)}));On(this,"onOpenFile",(tr().s[30]++,async()=>{tr().f[11]++,tr().s[31]++,this.clearError();const t=(tr().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(tr().s[33]++,await window.showOpenFilePicker(t)),i=(tr().s[34]++,await r.getFile()),s=(tr().s[35]++,await i.text());let a;tr().s[36]++;try{tr().s[37]++,a=JSON.parse(s)}catch(o){tr().s[38]++,this.setState({error:o.toString()}),tr().s[39]++;return}return tr().s[40]++,a=cc.ensureStyleValidity(a),tr().s[41]++,this.props.onStyleOpen(a,r),tr().s[42]++,this.onOpenToggle(),tr().s[43]++,i}));On(this,"onFileChanged",(tr().s[44]++,async(t,r)=>{tr().f[12]++;const[,i]=(tr().s[45]++,r[0]),s=(tr().s[46]++,new FileReader);tr().s[47]++,this.clearError(),tr().s[48]++,s.readAsText(i,"UTF-8"),tr().s[49]++,s.onload=a=>{var d;tr().f[13]++;let o;tr().s[50]++;try{tr().s[51]++,o=JSON.parse((d=a.target)==null?void 0:d.result)}catch(g){tr().s[52]++,this.setState({error:g.toString()}),tr().s[53]++;return}tr().s[54]++,o=cc.ensureStyleValidity(o),tr().s[55]++,this.props.onStyleOpen(o),tr().s[56]++,this.onOpenToggle()},tr().s[57]++,s.onerror=a=>(tr().f[14]++,tr().s[58]++,console.log(a.target))}));On(this,"onChangeUrl",(tr().s[62]++,t=>{tr().f[16]++,tr().s[63]++,this.setState({styleUrl:t})}));tr().s[3]++,this.state={styleUrl:""}}clearError(){tr().f[3]++,tr().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){tr().f[4]++,tr().s[5]++,t?(tr().b[0][0]++,tr().s[6]++,t.stopPropagation()):tr().b[0][1]++,tr().s[7]++,this.state.activeRequest?(tr().b[1][0]++,tr().s[8]++,this.state.activeRequest.abort(),tr().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):tr().b[1][1]++}onOpenToggle(){tr().f[15]++,tr().s[59]++,this.setState({styleUrl:""}),tr().s[60]++,this.clearError(),tr().s[61]++,this.props.onOpenToggle()}render(){tr().f[17]++;const t=(tr().s[64]++,this.props.t),r=(tr().s[65]++,zG.map(s=>(tr().f[18]++,tr().s[66]++,le.jsx(Lhe,{url:s.url,title:s.title,thumbnailUrl:s.thumbnail,onSelect:this.onStyleSelect},s.id))));let i;return tr().s[67]++,this.state.error?(tr().b[3][0]++,tr().s[68]++,i=le.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,le.jsx("a",{href:"#",onClick:()=>(tr().f[19]++,tr().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):tr().b[3][1]++,tr().s[70]++,le.jsxs("div",{children:[le.jsxs(L0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(tr().f[20]++,tr().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:t("Open local Style")}),le.jsx("p",{children:t("Open a local JSON style from your computer.")}),le.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(tr().b[4][0]++,le.jsxs(Ha,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[le.jsx(E7,{})," ",t("Open Style")]})):(tr().b[4][1]++,le.jsx(Rhe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:le.jsxs(Ha,{className:"maputnik-upload-button",children:[le.jsx(E7,{})," ",t("Open Style")]})}))})]}),le.jsx("section",{className:"maputnik-modal-section",children:le.jsxs("form",{onSubmit:this.onSubmitUrl,children:[le.jsx("h1",{children:t("Load from URL")}),le.jsx("p",{children:le.jsxs(M0,{t,children:["Load from a URL. Note that the URL must have ",le.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),le.jsx(qI,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),le.jsx("div",{children:le.jsx(Ha,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[le.jsx("h1",{children:t("Gallery Styles")}),le.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),le.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),le.jsx(Dhe,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:s=>(tr().f[21]++,tr().s[72]++,this.onCancelActiveRequest(s)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const Uhe=(tr().s[73]++,$s()(Fhe));function bf(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return bf=function(){return a},a}bf();class zhe extends Zn.Component{render(){bf().f[0]++;const e=(bf().s[0]++,this.props.t),t=(bf().s[1]++,[{key:le.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:le.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:le.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:le.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:le.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:le.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:le.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:le.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(bf().s[2]++,[{key:le.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:le.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:le.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:le.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:le.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:le.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return bf().s[3]++,le.jsx(L0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("p",{children:le.jsxs(M0,{t:e,children:["Press ",le.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),le.jsx("dl",{children:t.map((i,s)=>(bf().f[1]++,bf().s[4]++,le.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[le.jsx("dt",{children:i.key},"dt"+s),le.jsx("dd",{children:i.text},"dd"+s)]},s)))}),le.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),le.jsx("ul",{children:r.map((i,s)=>(bf().f[2]++,bf().s[5]++,le.jsxs("li",{children:[le.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const jhe=(bf().s[6]++,$s()(zhe));function nA(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return nA=function(){return a},a}nA();class Nhe extends Zn.Component{render(){nA().f[0]++;const{t:e,mapView:t}=(nA().s[0]++,this.props),r=(nA().s[1]++,Math.round(t.zoom)+1),i=(nA().s[2]++,+t.center.lng.toFixed(5)),s=(nA().s[3]++,+t.center.lat.toFixed(5));return nA().s[4]++,le.jsxs(L0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("h1",{children:e("Options")}),(nA().b[0][0]++,this.props.renderer==="mlgljs"&&(nA().b[0][1]++,le.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([a,o])=>(nA().f[1]++,nA().s[5]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:d=>(nA().f[2]++,nA().s[6]++,this.props.onChangeMaplibreGlDebug(a,d.target.checked))})," ",a]})},a)))}))),(nA().b[1][0]++,this.props.renderer==="ol"&&(nA().b[1][1]++,le.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([a,o])=>(nA().f[3]++,nA().s[7]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:d=>(nA().f[4]++,nA().s[8]++,this.props.onChangeOpenlayersDebug(a,d.target.checked))})," ",a]})},a)))})))]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:"Links"}),le.jsx("p",{children:le.jsxs(M0,{t:e,children:[le.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"}),"  Opens the current view on openstreetmap.org"]})})]})]})}}const Ghe=(nA().s[9]++,$s()(Nhe));var sg={},Kv={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var Whe=Kv.exports,LD;function Qhe(){return LD||(LD=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var a,o=2147483647,d=36,g=1,b=26,E=38,S=700,O=72,k=128,U="-",z=/^xn--/,q=/[^\x20-\x7E]/,Q=/[\x2E\u3002\uFF0E\uFF61]/g,re={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=d-g,Y=Math.floor,J=String.fromCharCode,N;function ie(De){throw new RangeError(re[De])}function he(De,Ne){for(var at=De.length,wt=[];at--;)wt[at]=Ne(De[at]);return wt}function de(De,Ne){var at=De.split("@"),wt="";at.length>1&&(wt=at[0]+"@",De=at[1]),De=De.replace(Q,".");var Ct=De.split("."),ft=he(Ct,Ne).join(".");return wt+ft}function we(De){for(var Ne=[],at=0,wt=De.length,Ct,ft;at<wt;)Ct=De.charCodeAt(at++),Ct>=55296&&Ct<=56319&&at<wt?(ft=De.charCodeAt(at++),(ft&64512)==56320?Ne.push(((Ct&1023)<<10)+(ft&1023)+65536):(Ne.push(Ct),at--)):Ne.push(Ct);return Ne}function fe(De){return he(De,function(Ne){var at="";return Ne>65535&&(Ne-=65536,at+=J(Ne>>>10&1023|55296),Ne=56320|Ne&1023),at+=J(Ne),at}).join("")}function be(De){return De-48<10?De-22:De-65<26?De-65:De-97<26?De-97:d}function Pe(De,Ne){return De+22+75*(De<26)-((Ne!=0)<<5)}function pe(De,Ne,at){var wt=0;for(De=at?Y(De/S):De>>1,De+=Y(De/Ne);De>X*b>>1;wt+=d)De=Y(De/X);return Y(wt+(X+1)*De/(De+E))}function it(De){var Ne=[],at=De.length,wt,Ct=0,ft=k,Lt=O,Kt,Fe,Te,Se,Je,yt,dt,Ut,en;for(Kt=De.lastIndexOf(U),Kt<0&&(Kt=0),Fe=0;Fe<Kt;++Fe)De.charCodeAt(Fe)>=128&&ie("not-basic"),Ne.push(De.charCodeAt(Fe));for(Te=Kt>0?Kt+1:0;Te<at;){for(Se=Ct,Je=1,yt=d;Te>=at&&ie("invalid-input"),dt=be(De.charCodeAt(Te++)),(dt>=d||dt>Y((o-Ct)/Je))&&ie("overflow"),Ct+=dt*Je,Ut=yt<=Lt?g:yt>=Lt+b?b:yt-Lt,!(dt<Ut);yt+=d)en=d-Ut,Je>Y(o/en)&&ie("overflow"),Je*=en;wt=Ne.length+1,Lt=pe(Ct-Se,wt,Se==0),Y(Ct/wt)>o-ft&&ie("overflow"),ft+=Y(Ct/wt),Ct%=wt,Ne.splice(Ct++,0,ft)}return fe(Ne)}function We(De){var Ne,at,wt,Ct,ft,Lt,Kt,Fe,Te,Se,Je,yt=[],dt,Ut,en,Nt;for(De=we(De),dt=De.length,Ne=k,at=0,ft=O,Lt=0;Lt<dt;++Lt)Je=De[Lt],Je<128&&yt.push(J(Je));for(wt=Ct=yt.length,Ct&&yt.push(U);wt<dt;){for(Kt=o,Lt=0;Lt<dt;++Lt)Je=De[Lt],Je>=Ne&&Je<Kt&&(Kt=Je);for(Ut=wt+1,Kt-Ne>Y((o-at)/Ut)&&ie("overflow"),at+=(Kt-Ne)*Ut,Ne=Kt,Lt=0;Lt<dt;++Lt)if(Je=De[Lt],Je<Ne&&++at>o&&ie("overflow"),Je==Ne){for(Fe=at,Te=d;Se=Te<=ft?g:Te>=ft+b?b:Te-ft,!(Fe<Se);Te+=d)Nt=Fe-Se,en=d-Se,yt.push(J(Pe(Se+Nt%en,0))),Fe=Y(Nt/en);yt.push(J(Pe(Fe,0))),ft=pe(at,Ut,wt==Ct),at=0,++wt}++at,++Ne}return yt.join("")}function $e(De){return de(De,function(Ne){return z.test(Ne)?it(Ne.slice(4).toLowerCase()):Ne})}function ht(De){return de(De,function(Ne){return q.test(Ne)?"xn--"+We(Ne):Ne})}if(a={version:"1.4.1",ucs2:{decode:we,encode:fe},decode:it,encode:We,toASCII:ht,toUnicode:$e},r&&i)if(n.exports==r)i.exports=a;else for(N in a)a.hasOwnProperty(N)&&(r[N]=a[N]);else t.punycode=a})(Whe)}(Kv,Kv.exports)),Kv.exports}var iE,FD;function Ny(){return FD||(FD=1,iE=TypeError),iE}const qhe={},Yhe=Object.freeze(Object.defineProperty({__proto__:null,default:qhe},Symbol.toStringTag,{value:"Module"})),$he=_B(Yhe);var oE,UD;function l3(){if(UD)return oE;UD=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,a=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,d=typeof WeakMap=="function"&&WeakMap.prototype,g=d?WeakMap.prototype.has:null,b=typeof WeakSet=="function"&&WeakSet.prototype,E=b?WeakSet.prototype.has:null,S=typeof WeakRef=="function"&&WeakRef.prototype,O=S?WeakRef.prototype.deref:null,k=Boolean.prototype.valueOf,U=Object.prototype.toString,z=Function.prototype.toString,q=String.prototype.match,Q=String.prototype.slice,re=String.prototype.replace,X=String.prototype.toUpperCase,Y=String.prototype.toLowerCase,J=RegExp.prototype.test,N=Array.prototype.concat,ie=Array.prototype.join,he=Array.prototype.slice,de=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,fe=Object.getOwnPropertySymbols,be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Pe||!0)?Symbol.toStringTag:null,it=Object.prototype.propertyIsEnumerable,We=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ee){return Ee.__proto__}:null);function $e(Ee,oe){if(Ee===1/0||Ee===-1/0||Ee!==Ee||Ee&&Ee>-1e3&&Ee<1e3||J.call(/e/,oe))return oe;var ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ee=="number"){var p=Ee<0?-de(-Ee):de(Ee);if(p!==Ee){var ze=String(p),rt=Q.call(oe,ze.length+1);return re.call(ze,ve,"$&_")+"."+re.call(re.call(rt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return re.call(oe,ve,"$&_")}var ht=$he,De=ht.custom,Ne=dt(De)?De:null,at={__proto__:null,double:'"',single:"'"},wt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};oE=function Ee(oe,ve,p,ze){var rt=ve||{};if(Nt(rt,"quoteStyle")&&!Nt(at,rt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Nt(rt,"maxStringLength")&&(typeof rt.maxStringLength=="number"?rt.maxStringLength<0&&rt.maxStringLength!==1/0:rt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var pt=Nt(rt,"customInspect")?rt.customInspect:!0;if(typeof pt!="boolean"&&pt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Nt(rt,"indent")&&rt.indent!==null&&rt.indent!=="	"&&!(parseInt(rt.indent,10)===rt.indent&&rt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Nt(rt,"numericSeparator")&&typeof rt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Bt=rt.numericSeparator;if(typeof oe>"u")return"undefined";if(oe===null)return"null";if(typeof oe=="boolean")return oe?"true":"false";if(typeof oe=="string")return Er(oe,rt);if(typeof oe=="number"){if(oe===0)return 1/0/oe>0?"0":"-0";var vt=String(oe);return Bt?$e(oe,vt):vt}if(typeof oe=="bigint"){var Xt=String(oe)+"n";return Bt?$e(oe,Xt):Xt}var tn=typeof rt.depth>"u"?5:rt.depth;if(typeof p>"u"&&(p=0),p>=tn&&tn>0&&typeof oe=="object")return Lt(oe)?"[Array]":"[Object]";var zt=Yt(rt,p);if(typeof ze>"u")ze=[];else if(Rr(ze,oe)>=0)return"[Circular]";function _t(Mo,Ti,Ua){if(Ti&&(ze=he.call(ze),ze.push(Ti)),Ua){var Ea={depth:rt.depth};return Nt(rt,"quoteStyle")&&(Ea.quoteStyle=rt.quoteStyle),Ee(Mo,Ea,p+1,ze)}return Ee(Mo,rt,p+1,ze)}if(typeof oe=="function"&&!Fe(oe)){var Tn=jn(oe),Sn=rr(oe,_t);return"[Function"+(Tn?": "+Tn:" (anonymous)")+"]"+(Sn.length>0?" { "+ie.call(Sn,", ")+" }":"")}if(dt(oe)){var Ar=Pe?re.call(String(oe),/^(Symbol\(.*\))_[^)]*$/,"$1"):be.call(oe);return typeof oe=="object"&&!Pe?Ae(Ar):Ar}if(Qn(oe)){for(var wr="<"+Y.call(String(oe.nodeName)),rn=oe.attributes||[],Fn=0;Fn<rn.length;Fn++)wr+=" "+rn[Fn].name+"="+Ct(ft(rn[Fn].value),"double",rt);return wr+=">",oe.childNodes&&oe.childNodes.length&&(wr+="..."),wr+="</"+Y.call(String(oe.nodeName))+">",wr}if(Lt(oe)){if(oe.length===0)return"[]";var Rn=rr(oe,_t);return zt&&!Et(Rn)?"["+nn(Rn,zt)+"]":"[ "+ie.call(Rn,", ")+" ]"}if(Te(oe)){var Br=rr(oe,_t);return!("cause"in Error.prototype)&&"cause"in oe&&!it.call(oe,"cause")?"{ ["+String(oe)+"] "+ie.call(N.call("[cause]: "+_t(oe.cause),Br),", ")+" }":Br.length===0?"["+String(oe)+"]":"{ ["+String(oe)+"] "+ie.call(Br,", ")+" }"}if(typeof oe=="object"&&pt){if(Ne&&typeof oe[Ne]=="function"&&ht)return ht(oe,{depth:tn-p});if(pt!=="symbol"&&typeof oe.inspect=="function")return oe.inspect()}if(sr(oe)){var Mr=[];return r&&r.call(oe,function(Mo,Ti){Mr.push(_t(Ti,oe,!0)+" => "+_t(Mo,oe))}),Xe("Map",t.call(oe),Mr,zt)}if(pr(oe)){var Kr=[];return o&&o.call(oe,function(Mo){Kr.push(_t(Mo,oe))}),Xe("Set",a.call(oe),Kr,zt)}if(Jn(oe))return me("WeakMap");if(xr(oe))return me("WeakSet");if(mr(oe))return me("WeakRef");if(Je(oe))return Ae(_t(Number(oe)));if(Ut(oe))return Ae(_t(we.call(oe)));if(yt(oe))return Ae(k.call(oe));if(Se(oe))return Ae(_t(String(oe)));if(typeof window<"u"&&oe===window)return"{ [object Window] }";if(typeof globalThis<"u"&&oe===globalThis||typeof window<"u"&&oe===window)return"{ [object globalThis] }";if(!Kt(oe)&&!Fe(oe)){var ir=rr(oe,_t),co=We?We(oe)===Object.prototype:oe instanceof Object||oe.constructor===Object,Sa=oe instanceof Object?"":"null prototype",qi=!co&&pe&&Object(oe)===oe&&pe in oe?Q.call(yn(oe),8,-1):Sa?"Object":"",yi=co||typeof oe.constructor!="function"?"":oe.constructor.name?oe.constructor.name+" ":"",oo=yi+(qi||Sa?"["+ie.call(N.call([],qi||[],Sa||[]),": ")+"] ":"");return ir.length===0?oo+"{}":zt?oo+"{"+nn(ir,zt)+"}":oo+"{ "+ie.call(ir,", ")+" }"}return String(oe)};function Ct(Ee,oe,ve){var p=ve.quoteStyle||oe,ze=at[p];return ze+Ee+ze}function ft(Ee){return re.call(String(Ee),/"/g,"&quot;")}function Lt(Ee){return yn(Ee)==="[object Array]"&&(!pe||!(typeof Ee=="object"&&pe in Ee))}function Kt(Ee){return yn(Ee)==="[object Date]"&&(!pe||!(typeof Ee=="object"&&pe in Ee))}function Fe(Ee){return yn(Ee)==="[object RegExp]"&&(!pe||!(typeof Ee=="object"&&pe in Ee))}function Te(Ee){return yn(Ee)==="[object Error]"&&(!pe||!(typeof Ee=="object"&&pe in Ee))}function Se(Ee){return yn(Ee)==="[object String]"&&(!pe||!(typeof Ee=="object"&&pe in Ee))}function Je(Ee){return yn(Ee)==="[object Number]"&&(!pe||!(typeof Ee=="object"&&pe in Ee))}function yt(Ee){return yn(Ee)==="[object Boolean]"&&(!pe||!(typeof Ee=="object"&&pe in Ee))}function dt(Ee){if(Pe)return Ee&&typeof Ee=="object"&&Ee instanceof Symbol;if(typeof Ee=="symbol")return!0;if(!Ee||typeof Ee!="object"||!be)return!1;try{return be.call(Ee),!0}catch{}return!1}function Ut(Ee){if(!Ee||typeof Ee!="object"||!we)return!1;try{return we.call(Ee),!0}catch{}return!1}var en=Object.prototype.hasOwnProperty||function(Ee){return Ee in this};function Nt(Ee,oe){return en.call(Ee,oe)}function yn(Ee){return U.call(Ee)}function jn(Ee){if(Ee.name)return Ee.name;var oe=q.call(z.call(Ee),/^function\s*([\w$]+)/);return oe?oe[1]:null}function Rr(Ee,oe){if(Ee.indexOf)return Ee.indexOf(oe);for(var ve=0,p=Ee.length;ve<p;ve++)if(Ee[ve]===oe)return ve;return-1}function sr(Ee){if(!t||!Ee||typeof Ee!="object")return!1;try{t.call(Ee);try{a.call(Ee)}catch{return!0}return Ee instanceof Map}catch{}return!1}function Jn(Ee){if(!g||!Ee||typeof Ee!="object")return!1;try{g.call(Ee,g);try{E.call(Ee,E)}catch{return!0}return Ee instanceof WeakMap}catch{}return!1}function mr(Ee){if(!O||!Ee||typeof Ee!="object")return!1;try{return O.call(Ee),!0}catch{}return!1}function pr(Ee){if(!a||!Ee||typeof Ee!="object")return!1;try{a.call(Ee);try{t.call(Ee)}catch{return!0}return Ee instanceof Set}catch{}return!1}function xr(Ee){if(!E||!Ee||typeof Ee!="object")return!1;try{E.call(Ee,E);try{g.call(Ee,g)}catch{return!0}return Ee instanceof WeakSet}catch{}return!1}function Qn(Ee){return!Ee||typeof Ee!="object"?!1:typeof HTMLElement<"u"&&Ee instanceof HTMLElement?!0:typeof Ee.nodeName=="string"&&typeof Ee.getAttribute=="function"}function Er(Ee,oe){if(Ee.length>oe.maxStringLength){var ve=Ee.length-oe.maxStringLength,p="... "+ve+" more character"+(ve>1?"s":"");return Er(Q.call(Ee,0,oe.maxStringLength),oe)+p}var ze=wt[oe.quoteStyle||"single"];ze.lastIndex=0;var rt=re.call(re.call(Ee,ze,"\\$1"),/[\x00-\x1f]/g,Ge);return Ct(rt,"single",oe)}function Ge(Ee){var oe=Ee.charCodeAt(0),ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[oe];return ve?"\\"+ve:"\\x"+(oe<16?"0":"")+X.call(oe.toString(16))}function Ae(Ee){return"Object("+Ee+")"}function me(Ee){return Ee+" { ? }"}function Xe(Ee,oe,ve,p){var ze=p?nn(ve,p):ie.call(ve,", ");return Ee+" ("+oe+") {"+ze+"}"}function Et(Ee){for(var oe=0;oe<Ee.length;oe++)if(Rr(Ee[oe],`
`)>=0)return!1;return!0}function Yt(Ee,oe){var ve;if(Ee.indent==="	")ve="	";else if(typeof Ee.indent=="number"&&Ee.indent>0)ve=ie.call(Array(Ee.indent+1)," ");else return null;return{base:ve,prev:ie.call(Array(oe+1),ve)}}function nn(Ee,oe){if(Ee.length===0)return"";var ve=`
`+oe.prev+oe.base;return ve+ie.call(Ee,","+ve)+`
`+oe.prev}function rr(Ee,oe){var ve=Lt(Ee),p=[];if(ve){p.length=Ee.length;for(var ze=0;ze<Ee.length;ze++)p[ze]=Nt(Ee,ze)?oe(Ee[ze],Ee):""}var rt=typeof fe=="function"?fe(Ee):[],pt;if(Pe){pt={};for(var Bt=0;Bt<rt.length;Bt++)pt["$"+rt[Bt]]=rt[Bt]}for(var vt in Ee)Nt(Ee,vt)&&(ve&&String(Number(vt))===vt&&vt<Ee.length||Pe&&pt["$"+vt]instanceof Symbol||(J.call(/[^\w$]/,vt)?p.push(oe(vt,Ee)+": "+oe(Ee[vt],Ee)):p.push(vt+": "+oe(Ee[vt],Ee))));if(typeof fe=="function")for(var Xt=0;Xt<rt.length;Xt++)it.call(Ee,rt[Xt])&&p.push("["+oe(rt[Xt])+"]: "+oe(Ee[rt[Xt]],Ee));return p}return oE}var sE,zD;function Vhe(){if(zD)return sE;zD=1;var n=l3(),e=Ny(),t=function(o,d,g){for(var b=o,E;(E=b.next)!=null;b=E)if(E.key===d)return b.next=E.next,g||(E.next=o.next,o.next=E),E},r=function(o,d){if(o){var g=t(o,d);return g&&g.value}},i=function(o,d,g){var b=t(o,d);b?b.value=g:o.next={key:d,next:o.next,value:g}},s=function(o,d){return o?!!t(o,d):!1},a=function(o,d){if(o)return t(o,d,!0)};return sE=function(){var d,g={assert:function(b){if(!g.has(b))throw new e("Side channel does not contain "+n(b))},delete:function(b){var E=d&&d.next,S=a(d,b);return S&&E&&E===S&&(d=void 0),!!S},get:function(b){return r(d,b)},has:function(b){return s(d,b)},set:function(b,E){d||(d={next:void 0}),i(d,b,E)}};return g},sE}var aE,jD;function jG(){return jD||(jD=1,aE=Object),aE}var lE,ND;function Hhe(){return ND||(ND=1,lE=Error),lE}var uE,GD;function Zhe(){return GD||(GD=1,uE=EvalError),uE}var AE,WD;function Xhe(){return WD||(WD=1,AE=RangeError),AE}var cE,QD;function Jhe(){return QD||(QD=1,cE=ReferenceError),cE}var dE,qD;function efe(){return qD||(qD=1,dE=SyntaxError),dE}var hE,YD;function tfe(){return YD||(YD=1,hE=URIError),hE}var fE,$D;function nfe(){return $D||($D=1,fE=Math.abs),fE}var pE,VD;function rfe(){return VD||(VD=1,pE=Math.floor),pE}var mE,HD;function ife(){return HD||(HD=1,mE=Math.max),mE}var gE,ZD;function ofe(){return ZD||(ZD=1,gE=Math.min),gE}var yE,XD;function sfe(){return XD||(XD=1,yE=Math.pow),yE}var vE,JD;function afe(){return JD||(JD=1,vE=Math.round),vE}var _E,eL;function lfe(){return eL||(eL=1,_E=Number.isNaN||function(e){return e!==e}),_E}var CE,tL;function ufe(){if(tL)return CE;tL=1;var n=lfe();return CE=function(t){return n(t)||t===0?t:t<0?-1:1},CE}var bE,nL;function Afe(){return nL||(nL=1,bE=Object.getOwnPropertyDescriptor),bE}var xE,rL;function NG(){if(rL)return xE;rL=1;var n=Afe();if(n)try{n([],"length")}catch{n=null}return xE=n,xE}var wE,iL;function cfe(){if(iL)return wE;iL=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return wE=n,wE}var ME,oL;function dfe(){return oL||(oL=1,ME=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),ME}var SE,sL;function hfe(){if(sL)return SE;sL=1;var n=typeof Symbol<"u"&&Symbol,e=dfe();return SE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},SE}var EE,aL;function GG(){return aL||(aL=1,EE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),EE}var BE,lL;function WG(){if(lL)return BE;lL=1;var n=jG();return BE=n.getPrototypeOf||null,BE}var OE,uL;function ffe(){if(uL)return OE;uL=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(d,g){for(var b=[],E=0;E<d.length;E+=1)b[E]=d[E];for(var S=0;S<g.length;S+=1)b[S+d.length]=g[S];return b},s=function(d,g){for(var b=[],E=g,S=0;E<d.length;E+=1,S+=1)b[S]=d[E];return b},a=function(o,d){for(var g="",b=0;b<o.length;b+=1)g+=o[b],b+1<o.length&&(g+=d);return g};return OE=function(d){var g=this;if(typeof g!="function"||e.apply(g)!==r)throw new TypeError(n+g);for(var b=s(arguments,1),E,S=function(){if(this instanceof E){var q=g.apply(this,i(b,arguments));return Object(q)===q?q:this}return g.apply(d,i(b,arguments))},O=t(0,g.length-b.length),k=[],U=0;U<O;U++)k[U]="$"+U;if(E=Function("binder","return function ("+a(k,",")+"){ return binder.apply(this,arguments); }")(S),g.prototype){var z=function(){};z.prototype=g.prototype,E.prototype=new z,z.prototype=null}return E},OE}var IE,AL;function u3(){if(AL)return IE;AL=1;var n=ffe();return IE=Function.prototype.bind||n,IE}var kE,cL;function VI(){return cL||(cL=1,kE=Function.prototype.call),kE}var TE,dL;function QG(){return dL||(dL=1,TE=Function.prototype.apply),TE}var PE,hL;function pfe(){return hL||(hL=1,PE=typeof Reflect<"u"&&Reflect&&Reflect.apply),PE}var RE,fL;function mfe(){if(fL)return RE;fL=1;var n=u3(),e=QG(),t=VI(),r=pfe();return RE=r||n.call(t,e),RE}var KE,pL;function qG(){if(pL)return KE;pL=1;var n=u3(),e=Ny(),t=VI(),r=mfe();return KE=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},KE}var DE,mL;function gfe(){if(mL)return DE;mL=1;var n=qG(),e=NG(),t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return DE=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,DE}var LE,gL;function yfe(){if(gL)return LE;gL=1;var n=GG(),e=WG(),t=gfe();return LE=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,LE}var FE,yL;function vfe(){if(yL)return FE;yL=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=u3();return FE=t.call(n,e),FE}var UE,vL;function HI(){if(vL)return UE;vL=1;var n,e=jG(),t=Hhe(),r=Zhe(),i=Xhe(),s=Jhe(),a=efe(),o=Ny(),d=tfe(),g=nfe(),b=rfe(),E=ife(),S=ofe(),O=sfe(),k=afe(),U=ufe(),z=Function,q=function(Te){try{return z('"use strict"; return ('+Te+").constructor;")()}catch{}},Q=NG(),re=cfe(),X=function(){throw new o},Y=Q?function(){try{return arguments.callee,X}catch{try{return Q(arguments,"callee").get}catch{return X}}}():X,J=hfe()(),N=yfe(),ie=WG(),he=GG(),de=QG(),we=VI(),fe={},be=typeof Uint8Array>"u"||!N?n:N(Uint8Array),Pe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":J&&N?N([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":fe,"%AsyncGenerator%":fe,"%AsyncGeneratorFunction%":fe,"%AsyncIteratorPrototype%":fe,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":z,"%GeneratorFunction%":fe,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":J&&N?N(N([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!J||!N?n:N(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":Q,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!J||!N?n:N(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":J&&N?N(""[Symbol.iterator]()):n,"%Symbol%":J?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":Y,"%TypedArray%":be,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":we,"%Function.prototype.apply%":de,"%Object.defineProperty%":re,"%Object.getPrototypeOf%":ie,"%Math.abs%":g,"%Math.floor%":b,"%Math.max%":E,"%Math.min%":S,"%Math.pow%":O,"%Math.round%":k,"%Math.sign%":U,"%Reflect.getPrototypeOf%":he};if(N)try{null.error}catch(Te){var pe=N(N(Te));Pe["%Error.prototype%"]=pe}var it=function Te(Se){var Je;if(Se==="%AsyncFunction%")Je=q("async function () {}");else if(Se==="%GeneratorFunction%")Je=q("function* () {}");else if(Se==="%AsyncGeneratorFunction%")Je=q("async function* () {}");else if(Se==="%AsyncGenerator%"){var yt=Te("%AsyncGeneratorFunction%");yt&&(Je=yt.prototype)}else if(Se==="%AsyncIteratorPrototype%"){var dt=Te("%AsyncGenerator%");dt&&N&&(Je=N(dt.prototype))}return Pe[Se]=Je,Je},We={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$e=u3(),ht=vfe(),De=$e.call(we,Array.prototype.concat),Ne=$e.call(de,Array.prototype.splice),at=$e.call(we,String.prototype.replace),wt=$e.call(we,String.prototype.slice),Ct=$e.call(we,RegExp.prototype.exec),ft=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Lt=/\\(\\)?/g,Kt=function(Se){var Je=wt(Se,0,1),yt=wt(Se,-1);if(Je==="%"&&yt!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(yt==="%"&&Je!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var dt=[];return at(Se,ft,function(Ut,en,Nt,yn){dt[dt.length]=Nt?at(yn,Lt,"$1"):en||Ut}),dt},Fe=function(Se,Je){var yt=Se,dt;if(ht(We,yt)&&(dt=We[yt],yt="%"+dt[0]+"%"),ht(Pe,yt)){var Ut=Pe[yt];if(Ut===fe&&(Ut=it(yt)),typeof Ut>"u"&&!Je)throw new o("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:dt,name:yt,value:Ut}}throw new a("intrinsic "+Se+" does not exist!")};return UE=function(Se,Je){if(typeof Se!="string"||Se.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Je!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Ct(/^%?[^%]*%?$/,Se)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var yt=Kt(Se),dt=yt.length>0?yt[0]:"",Ut=Fe("%"+dt+"%",Je),en=Ut.name,Nt=Ut.value,yn=!1,jn=Ut.alias;jn&&(dt=jn[0],Ne(yt,De([0,1],jn)));for(var Rr=1,sr=!0;Rr<yt.length;Rr+=1){var Jn=yt[Rr],mr=wt(Jn,0,1),pr=wt(Jn,-1);if((mr==='"'||mr==="'"||mr==="`"||pr==='"'||pr==="'"||pr==="`")&&mr!==pr)throw new a("property names with quotes must have matching quotes");if((Jn==="constructor"||!sr)&&(yn=!0),dt+="."+Jn,en="%"+dt+"%",ht(Pe,en))Nt=Pe[en];else if(Nt!=null){if(!(Jn in Nt)){if(!Je)throw new o("base intrinsic for "+Se+" exists, but the property is not available.");return}if(Q&&Rr+1>=yt.length){var xr=Q(Nt,Jn);sr=!!xr,sr&&"get"in xr&&!("originalValue"in xr.get)?Nt=xr.get:Nt=Nt[Jn]}else sr=ht(Nt,Jn),Nt=Nt[Jn];sr&&!yn&&(Pe[en]=Nt)}}return Nt},UE}var zE,_L;function YG(){if(_L)return zE;_L=1;var n=HI(),e=qG(),t=e([n("%String.prototype.indexOf%")]);return zE=function(i,s){var a=n(i,!!s);return typeof a=="function"&&t(i,".prototype.")>-1?e([a]):a},zE}var jE,CL;function $G(){if(CL)return jE;CL=1;var n=HI(),e=YG(),t=l3(),r=Ny(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),a=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),d=e("Map.prototype.delete",!0),g=e("Map.prototype.size",!0);return jE=!!i&&function(){var E,S={assert:function(O){if(!S.has(O))throw new r("Side channel does not contain "+t(O))},delete:function(O){if(E){var k=d(E,O);return g(E)===0&&(E=void 0),k}return!1},get:function(O){if(E)return s(E,O)},has:function(O){return E?o(E,O):!1},set:function(O,k){E||(E=new i),a(E,O,k)}};return S},jE}var NE,bL;function _fe(){if(bL)return NE;bL=1;var n=HI(),e=YG(),t=l3(),r=$G(),i=Ny(),s=n("%WeakMap%",!0),a=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),d=e("WeakMap.prototype.has",!0),g=e("WeakMap.prototype.delete",!0);return NE=s?function(){var E,S,O={assert:function(k){if(!O.has(k))throw new i("Side channel does not contain "+t(k))},delete:function(k){if(s&&k&&(typeof k=="object"||typeof k=="function")){if(E)return g(E,k)}else if(r&&S)return S.delete(k);return!1},get:function(k){return s&&k&&(typeof k=="object"||typeof k=="function")&&E?a(E,k):S&&S.get(k)},has:function(k){return s&&k&&(typeof k=="object"||typeof k=="function")&&E?d(E,k):!!S&&S.has(k)},set:function(k,U){s&&k&&(typeof k=="object"||typeof k=="function")?(E||(E=new s),o(E,k,U)):r&&(S||(S=r()),S.set(k,U))}};return O}:r,NE}var GE,xL;function Cfe(){if(xL)return GE;xL=1;var n=Ny(),e=l3(),t=Vhe(),r=$G(),i=_fe(),s=i||r||t;return GE=function(){var o,d={assert:function(g){if(!d.has(g))throw new n("Side channel does not contain "+e(g))},delete:function(g){return!!o&&o.delete(g)},get:function(g){return o&&o.get(g)},has:function(g){return!!o&&o.has(g)},set:function(g,b){o||(o=s()),o.set(g,b)}};return d},GE}var WE,wL;function ZI(){if(wL)return WE;wL=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return WE={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},WE}var QE,ML;function VG(){if(ML)return QE;ML=1;var n=ZI(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var z=[],q=0;q<256;++q)z.push("%"+((q<16?"0":"")+q.toString(16)).toUpperCase());return z}(),i=function(q){for(;q.length>1;){var Q=q.pop(),re=Q.obj[Q.prop];if(t(re)){for(var X=[],Y=0;Y<re.length;++Y)typeof re[Y]<"u"&&X.push(re[Y]);Q.obj[Q.prop]=X}}},s=function(q,Q){for(var re=Q&&Q.plainObjects?{__proto__:null}:{},X=0;X<q.length;++X)typeof q[X]<"u"&&(re[X]=q[X]);return re},a=function z(q,Q,re){if(!Q)return q;if(typeof Q!="object"&&typeof Q!="function"){if(t(q))q.push(Q);else if(q&&typeof q=="object")(re&&(re.plainObjects||re.allowPrototypes)||!e.call(Object.prototype,Q))&&(q[Q]=!0);else return[q,Q];return q}if(!q||typeof q!="object")return[q].concat(Q);var X=q;return t(q)&&!t(Q)&&(X=s(q,re)),t(q)&&t(Q)?(Q.forEach(function(Y,J){if(e.call(q,J)){var N=q[J];N&&typeof N=="object"&&Y&&typeof Y=="object"?q[J]=z(N,Y,re):q.push(Y)}else q[J]=Y}),q):Object.keys(Q).reduce(function(Y,J){var N=Q[J];return e.call(Y,J)?Y[J]=z(Y[J],N,re):Y[J]=N,Y},X)},o=function(q,Q){return Object.keys(Q).reduce(function(re,X){return re[X]=Q[X],re},q)},d=function(z,q,Q){var re=z.replace(/\+/g," ");if(Q==="iso-8859-1")return re.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(re)}catch{return re}},g=1024,b=function(q,Q,re,X,Y){if(q.length===0)return q;var J=q;if(typeof q=="symbol"?J=Symbol.prototype.toString.call(q):typeof q!="string"&&(J=String(q)),re==="iso-8859-1")return escape(J).replace(/%u[0-9a-f]{4}/gi,function(be){return"%26%23"+parseInt(be.slice(2),16)+"%3B"});for(var N="",ie=0;ie<J.length;ie+=g){for(var he=J.length>=g?J.slice(ie,ie+g):J,de=[],we=0;we<he.length;++we){var fe=he.charCodeAt(we);if(fe===45||fe===46||fe===95||fe===126||fe>=48&&fe<=57||fe>=65&&fe<=90||fe>=97&&fe<=122||Y===n.RFC1738&&(fe===40||fe===41)){de[de.length]=he.charAt(we);continue}if(fe<128){de[de.length]=r[fe];continue}if(fe<2048){de[de.length]=r[192|fe>>6]+r[128|fe&63];continue}if(fe<55296||fe>=57344){de[de.length]=r[224|fe>>12]+r[128|fe>>6&63]+r[128|fe&63];continue}we+=1,fe=65536+((fe&1023)<<10|he.charCodeAt(we)&1023),de[de.length]=r[240|fe>>18]+r[128|fe>>12&63]+r[128|fe>>6&63]+r[128|fe&63]}N+=de.join("")}return N},E=function(q){for(var Q=[{obj:{o:q},prop:"o"}],re=[],X=0;X<Q.length;++X)for(var Y=Q[X],J=Y.obj[Y.prop],N=Object.keys(J),ie=0;ie<N.length;++ie){var he=N[ie],de=J[he];typeof de=="object"&&de!==null&&re.indexOf(de)===-1&&(Q.push({obj:J,prop:he}),re.push(de))}return i(Q),q},S=function(q){return Object.prototype.toString.call(q)==="[object RegExp]"},O=function(q){return!q||typeof q!="object"?!1:!!(q.constructor&&q.constructor.isBuffer&&q.constructor.isBuffer(q))},k=function(q,Q){return[].concat(q,Q)},U=function(q,Q){if(t(q)){for(var re=[],X=0;X<q.length;X+=1)re.push(Q(q[X]));return re}return Q(q)};return QE={arrayToObject:s,assign:o,combine:k,compact:E,decode:d,encode:b,isBuffer:O,isRegExp:S,maybeMap:U,merge:a},QE}var qE,SL;function bfe(){if(SL)return qE;SL=1;var n=Cfe(),e=VG(),t=ZI(),r=Object.prototype.hasOwnProperty,i={brackets:function(z){return z+"[]"},comma:"comma",indices:function(z,q){return z+"["+q+"]"},repeat:function(z){return z}},s=Array.isArray,a=Array.prototype.push,o=function(U,z){a.apply(U,s(z)?z:[z])},d=Date.prototype.toISOString,g=t.default,b={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:g,formatter:t.formatters[g],indices:!1,serializeDate:function(z){return d.call(z)},skipNulls:!1,strictNullHandling:!1},E=function(z){return typeof z=="string"||typeof z=="number"||typeof z=="boolean"||typeof z=="symbol"||typeof z=="bigint"},S={},O=function U(z,q,Q,re,X,Y,J,N,ie,he,de,we,fe,be,Pe,pe,it,We){for(var $e=z,ht=We,De=0,Ne=!1;(ht=ht.get(S))!==void 0&&!Ne;){var at=ht.get(z);if(De+=1,typeof at<"u"){if(at===De)throw new RangeError("Cyclic object value");Ne=!0}typeof ht.get(S)>"u"&&(De=0)}if(typeof he=="function"?$e=he(q,$e):$e instanceof Date?$e=fe($e):Q==="comma"&&s($e)&&($e=e.maybeMap($e,function(en){return en instanceof Date?fe(en):en})),$e===null){if(Y)return ie&&!pe?ie(q,b.encoder,it,"key",be):q;$e=""}if(E($e)||e.isBuffer($e)){if(ie){var wt=pe?q:ie(q,b.encoder,it,"key",be);return[Pe(wt)+"="+Pe(ie($e,b.encoder,it,"value",be))]}return[Pe(q)+"="+Pe(String($e))]}var Ct=[];if(typeof $e>"u")return Ct;var ft;if(Q==="comma"&&s($e))pe&&ie&&($e=e.maybeMap($e,ie)),ft=[{value:$e.length>0?$e.join(",")||null:void 0}];else if(s(he))ft=he;else{var Lt=Object.keys($e);ft=de?Lt.sort(de):Lt}var Kt=N?String(q).replace(/\./g,"%2E"):String(q),Fe=re&&s($e)&&$e.length===1?Kt+"[]":Kt;if(X&&s($e)&&$e.length===0)return Fe+"[]";for(var Te=0;Te<ft.length;++Te){var Se=ft[Te],Je=typeof Se=="object"&&Se&&typeof Se.value<"u"?Se.value:$e[Se];if(!(J&&Je===null)){var yt=we&&N?String(Se).replace(/\./g,"%2E"):String(Se),dt=s($e)?typeof Q=="function"?Q(Fe,yt):Fe:Fe+(we?"."+yt:"["+yt+"]");We.set(z,De);var Ut=n();Ut.set(S,We),o(Ct,U(Je,dt,Q,re,X,Y,J,N,Q==="comma"&&pe&&s($e)?null:ie,he,de,we,fe,be,Pe,pe,it,Ut))}}return Ct},k=function(z){if(!z)return b;if(typeof z.allowEmptyArrays<"u"&&typeof z.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof z.encodeDotInKeys<"u"&&typeof z.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(z.encoder!==null&&typeof z.encoder<"u"&&typeof z.encoder!="function")throw new TypeError("Encoder has to be a function.");var q=z.charset||b.charset;if(typeof z.charset<"u"&&z.charset!=="utf-8"&&z.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Q=t.default;if(typeof z.format<"u"){if(!r.call(t.formatters,z.format))throw new TypeError("Unknown format option provided.");Q=z.format}var re=t.formatters[Q],X=b.filter;(typeof z.filter=="function"||s(z.filter))&&(X=z.filter);var Y;if(z.arrayFormat in i?Y=z.arrayFormat:"indices"in z?Y=z.indices?"indices":"repeat":Y=b.arrayFormat,"commaRoundTrip"in z&&typeof z.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var J=typeof z.allowDots>"u"?z.encodeDotInKeys===!0?!0:b.allowDots:!!z.allowDots;return{addQueryPrefix:typeof z.addQueryPrefix=="boolean"?z.addQueryPrefix:b.addQueryPrefix,allowDots:J,allowEmptyArrays:typeof z.allowEmptyArrays=="boolean"?!!z.allowEmptyArrays:b.allowEmptyArrays,arrayFormat:Y,charset:q,charsetSentinel:typeof z.charsetSentinel=="boolean"?z.charsetSentinel:b.charsetSentinel,commaRoundTrip:!!z.commaRoundTrip,delimiter:typeof z.delimiter>"u"?b.delimiter:z.delimiter,encode:typeof z.encode=="boolean"?z.encode:b.encode,encodeDotInKeys:typeof z.encodeDotInKeys=="boolean"?z.encodeDotInKeys:b.encodeDotInKeys,encoder:typeof z.encoder=="function"?z.encoder:b.encoder,encodeValuesOnly:typeof z.encodeValuesOnly=="boolean"?z.encodeValuesOnly:b.encodeValuesOnly,filter:X,format:Q,formatter:re,serializeDate:typeof z.serializeDate=="function"?z.serializeDate:b.serializeDate,skipNulls:typeof z.skipNulls=="boolean"?z.skipNulls:b.skipNulls,sort:typeof z.sort=="function"?z.sort:null,strictNullHandling:typeof z.strictNullHandling=="boolean"?z.strictNullHandling:b.strictNullHandling}};return qE=function(U,z){var q=U,Q=k(z),re,X;typeof Q.filter=="function"?(X=Q.filter,q=X("",q)):s(Q.filter)&&(X=Q.filter,re=X);var Y=[];if(typeof q!="object"||q===null)return"";var J=i[Q.arrayFormat],N=J==="comma"&&Q.commaRoundTrip;re||(re=Object.keys(q)),Q.sort&&re.sort(Q.sort);for(var ie=n(),he=0;he<re.length;++he){var de=re[he],we=q[de];Q.skipNulls&&we===null||o(Y,O(we,de,J,N,Q.allowEmptyArrays,Q.strictNullHandling,Q.skipNulls,Q.encodeDotInKeys,Q.encode?Q.encoder:null,Q.filter,Q.sort,Q.allowDots,Q.serializeDate,Q.format,Q.formatter,Q.encodeValuesOnly,Q.charset,ie))}var fe=Y.join(Q.delimiter),be=Q.addQueryPrefix===!0?"?":"";return Q.charsetSentinel&&(Q.charset==="iso-8859-1"?be+="utf8=%26%2310003%3B&":be+="utf8=%E2%9C%93&"),fe.length>0?be+fe:""},qE}var YE,EL;function xfe(){if(EL)return YE;EL=1;var n=VG(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(S){return S.replace(/&#(\d+);/g,function(O,k){return String.fromCharCode(parseInt(k,10))})},s=function(S,O){return S&&typeof S=="string"&&O.comma&&S.indexOf(",")>-1?S.split(","):S},a="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",d=function(O,k){var U={__proto__:null},z=k.ignoreQueryPrefix?O.replace(/^\?/,""):O;z=z.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var q=k.parameterLimit===1/0?void 0:k.parameterLimit,Q=z.split(k.delimiter,q),re=-1,X,Y=k.charset;if(k.charsetSentinel)for(X=0;X<Q.length;++X)Q[X].indexOf("utf8=")===0&&(Q[X]===o?Y="utf-8":Q[X]===a&&(Y="iso-8859-1"),re=X,X=Q.length);for(X=0;X<Q.length;++X)if(X!==re){var J=Q[X],N=J.indexOf("]="),ie=N===-1?J.indexOf("="):N+1,he,de;ie===-1?(he=k.decoder(J,r.decoder,Y,"key"),de=k.strictNullHandling?null:""):(he=k.decoder(J.slice(0,ie),r.decoder,Y,"key"),de=n.maybeMap(s(J.slice(ie+1),k),function(fe){return k.decoder(fe,r.decoder,Y,"value")})),de&&k.interpretNumericEntities&&Y==="iso-8859-1"&&(de=i(String(de))),J.indexOf("[]=")>-1&&(de=t(de)?[de]:de);var we=e.call(U,he);we&&k.duplicates==="combine"?U[he]=n.combine(U[he],de):(!we||k.duplicates==="last")&&(U[he]=de)}return U},g=function(S,O,k,U){for(var z=U?O:s(O,k),q=S.length-1;q>=0;--q){var Q,re=S[q];if(re==="[]"&&k.parseArrays)Q=k.allowEmptyArrays&&(z===""||k.strictNullHandling&&z===null)?[]:[].concat(z);else{Q=k.plainObjects?{__proto__:null}:{};var X=re.charAt(0)==="["&&re.charAt(re.length-1)==="]"?re.slice(1,-1):re,Y=k.decodeDotInKeys?X.replace(/%2E/g,"."):X,J=parseInt(Y,10);!k.parseArrays&&Y===""?Q={0:z}:!isNaN(J)&&re!==Y&&String(J)===Y&&J>=0&&k.parseArrays&&J<=k.arrayLimit?(Q=[],Q[J]=z):Y!=="__proto__"&&(Q[Y]=z)}z=Q}return z},b=function(O,k,U,z){if(O){var q=U.allowDots?O.replace(/\.([^.[]+)/g,"[$1]"):O,Q=/(\[[^[\]]*])/,re=/(\[[^[\]]*])/g,X=U.depth>0&&Q.exec(q),Y=X?q.slice(0,X.index):q,J=[];if(Y){if(!U.plainObjects&&e.call(Object.prototype,Y)&&!U.allowPrototypes)return;J.push(Y)}for(var N=0;U.depth>0&&(X=re.exec(q))!==null&&N<U.depth;){if(N+=1,!U.plainObjects&&e.call(Object.prototype,X[1].slice(1,-1))&&!U.allowPrototypes)return;J.push(X[1])}if(X){if(U.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+U.depth+" and strictDepth is true");J.push("["+q.slice(X.index)+"]")}return g(J,k,U,z)}},E=function(O){if(!O)return r;if(typeof O.allowEmptyArrays<"u"&&typeof O.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof O.decodeDotInKeys<"u"&&typeof O.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(O.decoder!==null&&typeof O.decoder<"u"&&typeof O.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof O.charset<"u"&&O.charset!=="utf-8"&&O.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var k=typeof O.charset>"u"?r.charset:O.charset,U=typeof O.duplicates>"u"?r.duplicates:O.duplicates;if(U!=="combine"&&U!=="first"&&U!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var z=typeof O.allowDots>"u"?O.decodeDotInKeys===!0?!0:r.allowDots:!!O.allowDots;return{allowDots:z,allowEmptyArrays:typeof O.allowEmptyArrays=="boolean"?!!O.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof O.allowPrototypes=="boolean"?O.allowPrototypes:r.allowPrototypes,allowSparse:typeof O.allowSparse=="boolean"?O.allowSparse:r.allowSparse,arrayLimit:typeof O.arrayLimit=="number"?O.arrayLimit:r.arrayLimit,charset:k,charsetSentinel:typeof O.charsetSentinel=="boolean"?O.charsetSentinel:r.charsetSentinel,comma:typeof O.comma=="boolean"?O.comma:r.comma,decodeDotInKeys:typeof O.decodeDotInKeys=="boolean"?O.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof O.decoder=="function"?O.decoder:r.decoder,delimiter:typeof O.delimiter=="string"||n.isRegExp(O.delimiter)?O.delimiter:r.delimiter,depth:typeof O.depth=="number"||O.depth===!1?+O.depth:r.depth,duplicates:U,ignoreQueryPrefix:O.ignoreQueryPrefix===!0,interpretNumericEntities:typeof O.interpretNumericEntities=="boolean"?O.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof O.parameterLimit=="number"?O.parameterLimit:r.parameterLimit,parseArrays:O.parseArrays!==!1,plainObjects:typeof O.plainObjects=="boolean"?O.plainObjects:r.plainObjects,strictDepth:typeof O.strictDepth=="boolean"?!!O.strictDepth:r.strictDepth,strictNullHandling:typeof O.strictNullHandling=="boolean"?O.strictNullHandling:r.strictNullHandling}};return YE=function(S,O){var k=E(O);if(S===""||S===null||typeof S>"u")return k.plainObjects?{__proto__:null}:{};for(var U=typeof S=="string"?d(S,k):S,z=k.plainObjects?{__proto__:null}:{},q=Object.keys(U),Q=0;Q<q.length;++Q){var re=q[Q],X=b(re,U[re],k,typeof S=="string");z=n.merge(z,X,k)}return k.allowSparse===!0?z:n.compact(z)},YE}var $E,BL;function wfe(){if(BL)return $E;BL=1;var n=bfe(),e=xfe(),t=ZI();return $E={formats:t,parse:e,stringify:n},$E}var OL;function Mfe(){if(OL)return sg;OL=1;var n=Qhe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],a=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(a),d=["%","/","?",";","#"].concat(o),g=["/","?","#"],b=255,E=/^[+a-z0-9A-Z_-]{0,63}$/,S=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},U={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=wfe();function q(Y,J,N){if(Y&&typeof Y=="object"&&Y instanceof e)return Y;var ie=new e;return ie.parse(Y,J,N),ie}e.prototype.parse=function(Y,J,N){if(typeof Y!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof Y);var ie=Y.indexOf("?"),he=ie!==-1&&ie<Y.indexOf("#")?"?":"#",de=Y.split(he),we=/\\/g;de[0]=de[0].replace(we,"/"),Y=de.join(he);var fe=Y;if(fe=fe.trim(),!N&&Y.split("#").length===1){var be=i.exec(fe);if(be)return this.path=fe,this.href=fe,this.pathname=be[1],be[2]?(this.search=be[2],J?this.query=z.parse(this.search.substr(1)):this.query=this.search.substr(1)):J&&(this.search="",this.query={}),this}var Pe=t.exec(fe);if(Pe){Pe=Pe[0];var pe=Pe.toLowerCase();this.protocol=pe,fe=fe.substr(Pe.length)}if(N||Pe||fe.match(/^\/\/[^@/]+@[^@/]+/)){var it=fe.substr(0,2)==="//";it&&!(Pe&&k[Pe])&&(fe=fe.substr(2),this.slashes=!0)}if(!k[Pe]&&(it||Pe&&!U[Pe])){for(var We=-1,$e=0;$e<g.length;$e++){var ht=fe.indexOf(g[$e]);ht!==-1&&(We===-1||ht<We)&&(We=ht)}var De,Ne;We===-1?Ne=fe.lastIndexOf("@"):Ne=fe.lastIndexOf("@",We),Ne!==-1&&(De=fe.slice(0,Ne),fe=fe.slice(Ne+1),this.auth=decodeURIComponent(De)),We=-1;for(var $e=0;$e<d.length;$e++){var ht=fe.indexOf(d[$e]);ht!==-1&&(We===-1||ht<We)&&(We=ht)}We===-1&&(We=fe.length),this.host=fe.slice(0,We),fe=fe.slice(We),this.parseHost(),this.hostname=this.hostname||"";var at=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!at)for(var wt=this.hostname.split(/\./),$e=0,Ct=wt.length;$e<Ct;$e++){var ft=wt[$e];if(ft&&!ft.match(E)){for(var Lt="",Kt=0,Fe=ft.length;Kt<Fe;Kt++)ft.charCodeAt(Kt)>127?Lt+="x":Lt+=ft[Kt];if(!Lt.match(E)){var Te=wt.slice(0,$e),Se=wt.slice($e+1),Je=ft.match(S);Je&&(Te.push(Je[1]),Se.unshift(Je[2])),Se.length&&(fe="/"+Se.join(".")+fe),this.hostname=Te.join(".");break}}}this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),at||(this.hostname=n.toASCII(this.hostname));var yt=this.port?":"+this.port:"",dt=this.hostname||"";this.host=dt+yt,this.href+=this.host,at&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),fe[0]!=="/"&&(fe="/"+fe))}if(!O[pe])for(var $e=0,Ct=o.length;$e<Ct;$e++){var Ut=o[$e];if(fe.indexOf(Ut)!==-1){var en=encodeURIComponent(Ut);en===Ut&&(en=escape(Ut)),fe=fe.split(Ut).join(en)}}var Nt=fe.indexOf("#");Nt!==-1&&(this.hash=fe.substr(Nt),fe=fe.slice(0,Nt));var yn=fe.indexOf("?");if(yn!==-1?(this.search=fe.substr(yn),this.query=fe.substr(yn+1),J&&(this.query=z.parse(this.query)),fe=fe.slice(0,yn)):J&&(this.search="",this.query={}),fe&&(this.pathname=fe),U[pe]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var yt=this.pathname||"",jn=this.search||"";this.path=yt+jn}return this.href=this.format(),this};function Q(Y){return typeof Y=="string"&&(Y=q(Y)),Y instanceof e?Y.format():e.prototype.format.call(Y)}e.prototype.format=function(){var Y=this.auth||"";Y&&(Y=encodeURIComponent(Y),Y=Y.replace(/%3A/i,":"),Y+="@");var J=this.protocol||"",N=this.pathname||"",ie=this.hash||"",he=!1,de="";this.host?he=Y+this.host:this.hostname&&(he=Y+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(he+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(de=z.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var we=this.search||de&&"?"+de||"";return J&&J.substr(-1)!==":"&&(J+=":"),this.slashes||(!J||U[J])&&he!==!1?(he="//"+(he||""),N&&N.charAt(0)!=="/"&&(N="/"+N)):he||(he=""),ie&&ie.charAt(0)!=="#"&&(ie="#"+ie),we&&we.charAt(0)!=="?"&&(we="?"+we),N=N.replace(/[?#]/g,function(fe){return encodeURIComponent(fe)}),we=we.replace("#","%23"),J+he+N+we+ie};function re(Y,J){return q(Y,!1,!0).resolve(J)}e.prototype.resolve=function(Y){return this.resolveObject(q(Y,!1,!0)).format()};function X(Y,J){return Y?q(Y,!1,!0).resolveObject(J):J}return e.prototype.resolveObject=function(Y){if(typeof Y=="string"){var J=new e;J.parse(Y,!1,!0),Y=J}for(var N=new e,ie=Object.keys(this),he=0;he<ie.length;he++){var de=ie[he];N[de]=this[de]}if(N.hash=Y.hash,Y.href==="")return N.href=N.format(),N;if(Y.slashes&&!Y.protocol){for(var we=Object.keys(Y),fe=0;fe<we.length;fe++){var be=we[fe];be!=="protocol"&&(N[be]=Y[be])}return U[N.protocol]&&N.hostname&&!N.pathname&&(N.pathname="/",N.path=N.pathname),N.href=N.format(),N}if(Y.protocol&&Y.protocol!==N.protocol){if(!U[Y.protocol]){for(var Pe=Object.keys(Y),pe=0;pe<Pe.length;pe++){var it=Pe[pe];N[it]=Y[it]}return N.href=N.format(),N}if(N.protocol=Y.protocol,!Y.host&&!k[Y.protocol]){for(var Ct=(Y.pathname||"").split("/");Ct.length&&!(Y.host=Ct.shift()););Y.host||(Y.host=""),Y.hostname||(Y.hostname=""),Ct[0]!==""&&Ct.unshift(""),Ct.length<2&&Ct.unshift(""),N.pathname=Ct.join("/")}else N.pathname=Y.pathname;if(N.search=Y.search,N.query=Y.query,N.host=Y.host||"",N.auth=Y.auth,N.hostname=Y.hostname||Y.host,N.port=Y.port,N.pathname||N.search){var We=N.pathname||"",$e=N.search||"";N.path=We+$e}return N.slashes=N.slashes||Y.slashes,N.href=N.format(),N}var ht=N.pathname&&N.pathname.charAt(0)==="/",De=Y.host||Y.pathname&&Y.pathname.charAt(0)==="/",Ne=De||ht||N.host&&Y.pathname,at=Ne,wt=N.pathname&&N.pathname.split("/")||[],Ct=Y.pathname&&Y.pathname.split("/")||[],ft=N.protocol&&!U[N.protocol];if(ft&&(N.hostname="",N.port=null,N.host&&(wt[0]===""?wt[0]=N.host:wt.unshift(N.host)),N.host="",Y.protocol&&(Y.hostname=null,Y.port=null,Y.host&&(Ct[0]===""?Ct[0]=Y.host:Ct.unshift(Y.host)),Y.host=null),Ne=Ne&&(Ct[0]===""||wt[0]==="")),De)N.host=Y.host||Y.host===""?Y.host:N.host,N.hostname=Y.hostname||Y.hostname===""?Y.hostname:N.hostname,N.search=Y.search,N.query=Y.query,wt=Ct;else if(Ct.length)wt||(wt=[]),wt.pop(),wt=wt.concat(Ct),N.search=Y.search,N.query=Y.query;else if(Y.search!=null){if(ft){N.host=wt.shift(),N.hostname=N.host;var Lt=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;Lt&&(N.auth=Lt.shift(),N.hostname=Lt.shift(),N.host=N.hostname)}return N.search=Y.search,N.query=Y.query,(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.href=N.format(),N}if(!wt.length)return N.pathname=null,N.search?N.path="/"+N.search:N.path=null,N.href=N.format(),N;for(var Kt=wt.slice(-1)[0],Fe=(N.host||Y.host||wt.length>1)&&(Kt==="."||Kt==="..")||Kt==="",Te=0,Se=wt.length;Se>=0;Se--)Kt=wt[Se],Kt==="."?wt.splice(Se,1):Kt===".."?(wt.splice(Se,1),Te++):Te&&(wt.splice(Se,1),Te--);if(!Ne&&!at)for(;Te--;Te)wt.unshift("..");Ne&&wt[0]!==""&&(!wt[0]||wt[0].charAt(0)!=="/")&&wt.unshift(""),Fe&&wt.join("/").substr(-1)!=="/"&&wt.push("");var Je=wt[0]===""||wt[0]&&wt[0].charAt(0)==="/";if(ft){N.hostname=Je?"":wt.length?wt.shift():"",N.host=N.hostname;var Lt=N.host&&N.host.indexOf("@")>0?N.host.split("@"):!1;Lt&&(N.auth=Lt.shift(),N.hostname=Lt.shift(),N.host=N.hostname)}return Ne=Ne||N.host&&wt.length,Ne&&!Je&&wt.unshift(""),wt.length>0?N.pathname=wt.join("/"):(N.pathname=null,N.path=null),(N.pathname!==null||N.search!==null)&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.auth=Y.auth||N.auth,N.slashes=N.slashes||Y.slashes,N.href=N.format(),N},e.prototype.parseHost=function(){var Y=this.host,J=r.exec(Y);J&&(J=J[0],J!==":"&&(this.port=J.substr(1)),Y=Y.substr(0,Y.length-J.length)),Y&&(this.hostname=Y)},sg.parse=q,sg.resolve=re,sg.resolveObject=X,sg.format=Q,sg.Url=e,sg}var Sfe=Mfe();const IL=La(Sfe);function vs(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return vs=function(){return a},a}vs();function HG(n,e,t){vs().f[0]++,vs().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(vs().f[1]++,vs().s[1]++,r.ok)vs().b[0][1]++;else throw vs().b[0][0]++,vs().s[2]++,new Error("Failed to load metadata for "+n);return vs().s[3]++,r.json()}).then(r=>{vs().f[2]++,vs().s[4]++,t(r)}).catch(()=>{vs().f[3]++,vs().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),vs().s[6]++,t(e)})}function Efe(n,e){if(vs().f[4]++,vs().s[7]++,n)vs().b[1][1]++;else return vs().b[1][0]++,vs().s[8]++,e([]);const t=(vs().s[9]++,IL.parse(n)),r=(vs().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");vs().s[11]++,t.pathname===r?(vs().b[2][0]++,vs().s[12]++,t.pathname="/fontstacks.json"):(vs().b[2][1]++,vs().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(vs().s[14]++,IL.format(t));vs().s[15]++,HG(i,[],e)}function Bfe(n,e){if(vs().f[5]++,vs().s[16]++,n)vs().b[3][1]++;else return vs().b[3][0]++,vs().s[17]++,e([]);const t=(vs().s[18]++,n+".json");vs().s[19]++,HG(t,{},r=>(vs().f[6]++,vs().s[20]++,e(Object.keys(r))))}function jA(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="5d157b2ae65dbd5a5a7dfa0dbf76114e1399ceba",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AACA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5d157b2ae65dbd5a5a7dfa0dbf76114e1399ceba"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return jA=function(){return a},a}jA();function Ofe(){jA().f[0]++;const n=(jA().s[0]++,new URL(window.location.href));return jA().s[1]++,n.searchParams.get("style")}function ZG(n,e){jA().f[1]++,jA().s[2]++,console.log("Loading style",n),jA().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return jA().f[2]++,jA().s[4]++,t.json()}).then(function(t){jA().f[3]++,jA().s[5]++,e(cc.ensureStyleValidity(t))}).catch(function(){jA().f[4]++,jA().s[6]++,console.warn("Could not fetch default style",n),jA().s[7]++,e(cc.emptyStyle)})}function kL(){jA().f[5]++;const n=(jA().s[8]++,new URL(window.location.href));jA().s[9]++,n.searchParams.delete("style"),jA().s[10]++,window.history.replaceState({},document.title,n.toString())}function Gd(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Gd=function(){return a},a}Gd();function XG(n,e){Gd().f[0]++;const t=(Gd().s[0]++,wY(n,e));return Gd().s[1]++,t.map(r=>(Gd().f[1]++,Gd().s[2]++,r.command+" "+r.args.join(" ")))}function Ife(n,e){return Gd().f[2]++,Gd().s[3]++,XG(n,e).map(t=>(Gd().f[3]++,Gd().s[4]++,"Undo "+t))}function kfe(n,e){return Gd().f[4]++,Gd().s[5]++,XG(n,e).map(t=>(Gd().f[5]++,Gd().s[6]++,"Redo "+t))}function pi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return pi=function(){return a},a}pi();const O_=(pi().s[0]++,"maputnik"),JG=(pi().s[1]++,"style"),TL=(pi().s[2]++,{latest:[O_,"latest_style"].join(":"),accessToken:[O_,"access_token"].join(":")}),Tfe=(pi().s[3]++,zG[0].url);function PL(n){pi().f[0]++,pi().s[4]++,ZG(Tfe,n)}function Pfe(){pi().f[1]++;const n=(pi().s[5]++,[]);pi().s[6]++;for(let e=(pi().s[7]++,0);e<window.localStorage.length;e++){const t=(pi().s[8]++,window.localStorage.key(e));pi().s[9]++,eW(t)?(pi().b[0][0]++,pi().s[10]++,n.push(Rfe(t))):pi().b[0][1]++}return pi().s[11]++,n}function eW(n){pi().f[2]++;const e=(pi().s[12]++,n.split(":"));return pi().s[13]++,pi().b[1][0]++,e.length===3&&(pi().b[1][1]++,e[0]===O_)&&(pi().b[1][2]++,e[1]===JG)}function Rfe(n){if(pi().f[3]++,pi().s[14]++,eW(n))pi().b[2][1]++;else throw pi().b[2][0]++,pi().s[15]++,"Key is not a valid style key";const e=(pi().s[16]++,n.split(":")),t=(pi().s[17]++,e[2]);return pi().s[18]++,t}function RL(n){return pi().f[4]++,pi().s[19]++,[O_,JG,n].join(":")}class KL{constructor(){On(this,"mapStyles");pi().f[5]++,pi().s[20]++,this.mapStyles=Pfe()}init(e){pi().f[6]++,pi().s[21]++,e(null)}purge(){pi().f[7]++,pi().s[22]++;for(let e=(pi().s[23]++,0);e<window.localStorage.length;e++){const t=(pi().s[24]++,window.localStorage.key(e));pi().s[25]++,t.startsWith(O_)?(pi().b[3][0]++,pi().s[26]++,window.localStorage.removeItem(t)):pi().b[3][1]++}}latestStyle(e){if(pi().f[8]++,pi().s[27]++,this.mapStyles.length===0)return pi().b[4][0]++,pi().s[28]++,PL(e);pi().b[4][1]++;const t=(pi().s[29]++,window.localStorage.getItem(TL.latest)),r=(pi().s[30]++,window.localStorage.getItem(RL(t)));if(pi().s[31]++,r)return pi().b[5][0]++,pi().s[32]++,e(JSON.parse(r));pi().b[5][1]++,pi().s[33]++,PL(e)}save(e){pi().f[9]++,pi().s[34]++,e=cc.ensureStyleValidity(e);const t=(pi().s[35]++,RL(e.id));return pi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),pi().s[37]++,window.localStorage.setItem(TL.latest,e.id),pi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yB=function(n,e){return yB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},yB(n,e)};function tW(n,e){yB(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Kfe(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function Dfe(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}function Lfe(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Dfe(arguments[e]));return n}var nW=function(){function n(e,t){this.target=t,this.type=e}return n}(),Ffe=function(n){tW(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(nW),Ufe=function(n){tW(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(nW);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var zfe=function(){if(typeof WebSocket<"u")return WebSocket},jfe=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},ag={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Nfe=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var a=i._options.minUptime,o=a===void 0?ag.minUptime:a;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(d){return i._ws.send(d)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(d){return i._callEventListener(s,d)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(a){return i._callEventListener(s,a)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(a){return i._callEventListener(s,a)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(a){return i._callEventListener(s,a)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?ag.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=Kfe(i),a=s.next();!a.done;a=s.next()){var o=a.value;this._callEventListener(e,o)}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Lfe(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?ag.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?ag.minReconnectionDelay:i,a=e.maxReconnectionDelay,o=a===void 0?ag.maxReconnectionDelay:a,d=0;return this._retryCount>0&&(d=s*Math.pow(r,this._retryCount-1),d>o&&(d=o)),this._debug("next delay",d),d},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?ag.maxRetries:r,s=t.connectionTimeout,a=s===void 0?ag.connectionTimeout:s,o=t.WebSocket,d=o===void 0?zfe():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!jfe(d))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(g){e._closeCalled||(e._debug("connect",{url:g,protocols:e._protocols}),e._ws=e._protocols?new d(g,e._protocols):new d(g),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},a))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Ffe(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Ufe(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function mi(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return mi=function(){return a},a}mi();class Gfe{constructor(e){On(this,"localUrl");On(this,"websocketUrl");On(this,"latestStyleId",(mi().s[0]++,void 0));On(this,"onLocalStyleChange");mi().f[0]++,mi().s[1]++,this.onLocalStyleChange=(mi().b[0][0]++,e.onLocalStyleChange||(mi().b[0][1]++,()=>{mi().f[1]++}));const t=(mi().s[2]++,mi().b[1][0]++,e.port||(mi().b[1][1]++,"8000")),r=(mi().s[3]++,mi().b[2][0]++,e.host||(mi().b[2][1]++,"localhost"));mi().s[4]++,this.localUrl=`http://${r}:${t}`,mi().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,mi().s[6]++,this.init=this.init.bind(this)}init(e){mi().f[2]++,mi().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(mi().f[3]++,mi().s[8]++,t.json())).then(t=>{mi().f[4]++;const r=(mi().s[9]++,t);mi().s[10]++,this.latestStyleId=r[0],mi().s[11]++,this.notifyLocalChanges(),mi().s[12]++,e(null)}).catch(()=>{mi().f[5]++,mi().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){mi().f[6]++;const e=(mi().s[14]++,new Nfe(this.websocketUrl));mi().s[15]++,e.onmessage=t=>{if(mi().f[7]++,mi().s[16]++,t.data)mi().b[3][1]++;else{mi().b[3][0]++,mi().s[17]++;return}mi().s[18]++,console.log("Received style update from API");let r=(mi().s[19]++,cc.emptyStyle);mi().s[20]++;try{mi().s[21]++,r=JSON.parse(t.data)}catch(s){mi().s[22]++,console.error(s)}const i=(mi().s[23]++,cc.ensureStyleValidity(r));mi().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(mi().f[8]++,mi().s[25]++,this.latestStyleId)mi().b[4][0]++,mi().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return mi().f[9]++,mi().s[27]++,t.json()}).then(function(t){mi().f[10]++,mi().s[28]++,e(cc.ensureStyleValidity(t))});else throw mi().b[4][1]++,mi().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){mi().f[11]++;const t=(mi().s[30]++,lU(cc.stripAccessTokens(cc.replaceAccessTokens(e)))),r=(mi().s[31]++,e.id);return mi().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){mi().f[12]++,mi().s[33]++,i?(mi().b[5][0]++,mi().s[34]++,console.error(i)):mi().b[5][1]++}),mi().s[35]++,e}}function Ml(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Ml=function(){return a},a}Ml();class Wfe{constructor(e=(Ml().b[0][0]++,[])){On(this,"revisions");On(this,"currentIdx");Ml().f[0]++,Ml().s[0]++,this.revisions=e,Ml().s[1]++,this.currentIdx=e.length-1}get latest(){return Ml().f[1]++,Ml().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Ml().f[2]++,Ml().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Ml().f[3]++,Ml().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Ml().s[5]++,this.revisions.push(e),Ml().s[6]++,this.currentIdx++}undo(){return Ml().f[4]++,Ml().s[7]++,this.currentIdx>0?(Ml().b[1][0]++,Ml().s[8]++,this.currentIdx--):Ml().b[1][1]++,Ml().s[9]++,this.current}redo(){return Ml().f[5]++,Ml().s[10]++,this.currentIdx<this.revisions.length-1?(Ml().b[2][0]++,Ml().s[11]++,this.currentIdx++):Ml().b[2][1]++,Ml().s[12]++,this.current}}var VE,DL;function Qfe(){if(DL)return VE;DL=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,d=typeof window=="object"&&window&&window.Object===Object&&window,g=typeof self=="object"&&self&&self.Object===Object&&self,b=d||g||Function("return this")(),E=Object.prototype,S=E.toString,O=Math.max,k=Math.min,U=function(){return b.Date.now()};function z(J,N,ie){var he,de,we,fe,be,Pe,pe=0,it=!1,We=!1,$e=!0;if(typeof J!="function")throw new TypeError(n);N=Y(N)||0,Q(ie)&&(it=!!ie.leading,We="maxWait"in ie,we=We?O(Y(ie.maxWait)||0,N):we,$e="trailing"in ie?!!ie.trailing:$e);function ht(Fe){var Te=he,Se=de;return he=de=void 0,pe=Fe,fe=J.apply(Se,Te),fe}function De(Fe){return pe=Fe,be=setTimeout(wt,N),it?ht(Fe):fe}function Ne(Fe){var Te=Fe-Pe,Se=Fe-pe,Je=N-Te;return We?k(Je,we-Se):Je}function at(Fe){var Te=Fe-Pe,Se=Fe-pe;return Pe===void 0||Te>=N||Te<0||We&&Se>=we}function wt(){var Fe=U();if(at(Fe))return Ct(Fe);be=setTimeout(wt,Ne(Fe))}function Ct(Fe){return be=void 0,$e&&he?ht(Fe):(he=de=void 0,fe)}function ft(){be!==void 0&&clearTimeout(be),pe=0,he=Pe=de=be=void 0}function Lt(){return be===void 0?fe:Ct(U())}function Kt(){var Fe=U(),Te=at(Fe);if(he=arguments,de=this,Pe=Fe,Te){if(be===void 0)return De(Pe);if(We)return be=setTimeout(wt,N),ht(Pe)}return be===void 0&&(be=setTimeout(wt,N)),fe}return Kt.cancel=ft,Kt.flush=Lt,Kt}function q(J,N,ie){var he=!0,de=!0;if(typeof J!="function")throw new TypeError(n);return Q(ie)&&(he="leading"in ie?!!ie.leading:he,de="trailing"in ie?!!ie.trailing:de),z(J,N,{leading:he,maxWait:N,trailing:de})}function Q(J){var N=typeof J;return!!J&&(N=="object"||N=="function")}function re(J){return!!J&&typeof J=="object"}function X(J){return typeof J=="symbol"||re(J)&&S.call(J)==t}function Y(J){if(typeof J=="number")return J;if(X(J))return e;if(Q(J)){var N=typeof J.valueOf=="function"?J.valueOf():J;J=Q(N)?N+"":N}if(typeof J!="string")return J===0?J:+J;J=J.replace(r,"");var ie=s.test(J);return ie||a.test(J)?o(J.slice(2),ie?2:8):i.test(J)?e:+J}return VE=q,VE}var qfe=Qfe();const Yfe=La(qfe);var Dv={exports:{}};Dv.exports;var LL;function $fe(){return LL||(LL=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",d="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",E="[object Date]",S="[object Error]",O="[object Function]",k="[object GeneratorFunction]",U="[object Map]",z="[object Number]",q="[object Null]",Q="[object Object]",re="[object Promise]",X="[object Proxy]",Y="[object RegExp]",J="[object Set]",N="[object String]",ie="[object Symbol]",he="[object Undefined]",de="[object WeakMap]",we="[object ArrayBuffer]",fe="[object DataView]",be="[object Float32Array]",Pe="[object Float64Array]",pe="[object Int8Array]",it="[object Int16Array]",We="[object Int32Array]",$e="[object Uint8Array]",ht="[object Uint8ClampedArray]",De="[object Uint16Array]",Ne="[object Uint32Array]",at=/[\\^$.*+?()[\]{}|]/g,wt=/^\[object .+?Constructor\]$/,Ct=/^(?:0|[1-9]\d*)$/,ft={};ft[be]=ft[Pe]=ft[pe]=ft[it]=ft[We]=ft[$e]=ft[ht]=ft[De]=ft[Ne]=!0,ft[o]=ft[d]=ft[we]=ft[b]=ft[fe]=ft[E]=ft[S]=ft[O]=ft[U]=ft[z]=ft[Q]=ft[Y]=ft[J]=ft[N]=ft[de]=!1;var Lt=typeof window=="object"&&window&&window.Object===Object&&window,Kt=typeof self=="object"&&self&&self.Object===Object&&self,Fe=Lt||Kt||Function("return this")(),Te=e&&!e.nodeType&&e,Se=Te&&!0&&n&&!n.nodeType&&n,Je=Se&&Se.exports===Te,yt=Je&&Lt.process,dt=function(){try{return yt&&yt.binding&&yt.binding("util")}catch{}}(),Ut=dt&&dt.isTypedArray;function en(ee,Be){for(var tt=-1,qt=ee==null?0:ee.length,Or=0,Gn=[];++tt<qt;){var si=ee[tt];Be(si,tt,ee)&&(Gn[Or++]=si)}return Gn}function Nt(ee,Be){for(var tt=-1,qt=Be.length,Or=ee.length;++tt<qt;)ee[Or+tt]=Be[tt];return ee}function yn(ee,Be){for(var tt=-1,qt=ee==null?0:ee.length;++tt<qt;)if(Be(ee[tt],tt,ee))return!0;return!1}function jn(ee,Be){for(var tt=-1,qt=Array(ee);++tt<ee;)qt[tt]=Be(tt);return qt}function Rr(ee){return function(Be){return ee(Be)}}function sr(ee,Be){return ee.has(Be)}function Jn(ee,Be){return ee==null?void 0:ee[Be]}function mr(ee){var Be=-1,tt=Array(ee.size);return ee.forEach(function(qt,Or){tt[++Be]=[Or,qt]}),tt}function pr(ee,Be){return function(tt){return ee(Be(tt))}}function xr(ee){var Be=-1,tt=Array(ee.size);return ee.forEach(function(qt){tt[++Be]=qt}),tt}var Qn=Array.prototype,Er=Function.prototype,Ge=Object.prototype,Ae=Fe["__core-js_shared__"],me=Er.toString,Xe=Ge.hasOwnProperty,Et=function(){var ee=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Yt=Ge.toString,nn=RegExp("^"+me.call(Xe).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=Je?Fe.Buffer:void 0,Ee=Fe.Symbol,oe=Fe.Uint8Array,ve=Ge.propertyIsEnumerable,p=Qn.splice,ze=Ee?Ee.toStringTag:void 0,rt=Object.getOwnPropertySymbols,pt=rr?rr.isBuffer:void 0,Bt=pr(Object.keys,Object),vt=Ei(Fe,"DataView"),Xt=Ei(Fe,"Map"),tn=Ei(Fe,"Promise"),zt=Ei(Fe,"Set"),_t=Ei(Fe,"WeakMap"),Tn=Ei(Object,"create"),Sn=fo(vt),Ar=fo(Xt),wr=fo(tn),rn=fo(zt),Fn=fo(_t),Rn=Ee?Ee.prototype:void 0,Br=Rn?Rn.valueOf:void 0;function Mr(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function Kr(){this.__data__=Tn?Tn(null):{},this.size=0}function ir(ee){var Be=this.has(ee)&&delete this.__data__[ee];return this.size-=Be?1:0,Be}function co(ee){var Be=this.__data__;if(Tn){var tt=Be[ee];return tt===r?void 0:tt}return Xe.call(Be,ee)?Be[ee]:void 0}function Sa(ee){var Be=this.__data__;return Tn?Be[ee]!==void 0:Xe.call(Be,ee)}function qi(ee,Be){var tt=this.__data__;return this.size+=this.has(ee)?0:1,tt[ee]=Tn&&Be===void 0?r:Be,this}Mr.prototype.clear=Kr,Mr.prototype.delete=ir,Mr.prototype.get=co,Mr.prototype.has=Sa,Mr.prototype.set=qi;function yi(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function oo(){this.__data__=[],this.size=0}function Mo(ee){var Be=this.__data__,tt=er(Be,ee);if(tt<0)return!1;var qt=Be.length-1;return tt==qt?Be.pop():p.call(Be,tt,1),--this.size,!0}function Ti(ee){var Be=this.__data__,tt=er(Be,ee);return tt<0?void 0:Be[tt][1]}function Ua(ee){return er(this.__data__,ee)>-1}function Ea(ee,Be){var tt=this.__data__,qt=er(tt,ee);return qt<0?(++this.size,tt.push([ee,Be])):tt[qt][1]=Be,this}yi.prototype.clear=oo,yi.prototype.delete=Mo,yi.prototype.get=Ti,yi.prototype.has=Ua,yi.prototype.set=Ea;function ns(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.clear();++Be<tt;){var qt=ee[Be];this.set(qt[0],qt[1])}}function Aa(){this.size=0,this.__data__={hash:new Mr,map:new(Xt||yi),string:new Mr}}function Al(ee){var Be=Lr(this,ee).delete(ee);return this.size-=Be?1:0,Be}function ao(ee){return Lr(this,ee).get(ee)}function Pu(ee){return Lr(this,ee).has(ee)}function tu(ee,Be){var tt=Lr(this,ee),qt=tt.size;return tt.set(ee,Be),this.size+=tt.size==qt?0:1,this}ns.prototype.clear=Aa,ns.prototype.delete=Al,ns.prototype.get=ao,ns.prototype.has=Pu,ns.prototype.set=tu;function so(ee){var Be=-1,tt=ee==null?0:ee.length;for(this.__data__=new ns;++Be<tt;)this.add(ee[Be])}function Dr(ee){return this.__data__.set(ee,r),this}function Za(ee){return this.__data__.has(ee)}so.prototype.add=so.prototype.push=Dr,so.prototype.has=Za;function Ps(ee){var Be=this.__data__=new yi(ee);this.size=Be.size}function ia(){this.__data__=new yi,this.size=0}function Qe(ee){var Be=this.__data__,tt=Be.delete(ee);return this.size=Be.size,tt}function bt(ee){return this.__data__.get(ee)}function fn(ee){return this.__data__.has(ee)}function Nn(ee,Be){var tt=this.__data__;if(tt instanceof yi){var qt=tt.__data__;if(!Xt||qt.length<t-1)return qt.push([ee,Be]),this.size=++tt.size,this;tt=this.__data__=new ns(qt)}return tt.set(ee,Be),this.size=tt.size,this}Ps.prototype.clear=ia,Ps.prototype.delete=Qe,Ps.prototype.get=bt,Ps.prototype.has=fn,Ps.prototype.set=Nn;function un(ee,Be){var tt=el(ee),qt=!tt&&Ms(ee),Or=!tt&&!qt&&El(ee),Gn=!tt&&!qt&&!Or&&ru(ee),si=tt||qt||Or||Gn,ci=si?jn(ee.length,String):[],gr=ci.length;for(var Ir in ee)Xe.call(ee,Ir)&&!(si&&(Ir=="length"||Or&&(Ir=="offset"||Ir=="parent")||Gn&&(Ir=="buffer"||Ir=="byteLength"||Ir=="byteOffset")||Gs(Ir,gr)))&&ci.push(Ir);return ci}function er(ee,Be){for(var tt=ee.length;tt--;)if(ms(ee[tt][0],Be))return tt;return-1}function Pi(ee,Be,tt){var qt=Be(ee);return el(ee)?qt:Nt(qt,tt(ee))}function ho(ee){return ee==null?ee===void 0?he:q:ze&&ze in Object(ee)?Ja(ee):Vs(ee)}function _s(ee){return Jr(ee)&&ho(ee)==o}function Ns(ee,Be,tt,qt,Or){return ee===Be?!0:ee==null||Be==null||!Jr(ee)&&!Jr(Be)?ee!==ee&&Be!==Be:vA(ee,Be,tt,qt,Ns,Or)}function vA(ee,Be,tt,qt,Or,Gn){var si=el(ee),ci=el(Be),gr=si?d:So(ee),Ir=ci?d:So(Be);gr=gr==o?Q:gr,Ir=Ir==o?Q:Ir;var vi=gr==Q,Eo=Ir==Q,ki=gr==Ir;if(ki&&El(ee)){if(!El(Be))return!1;si=!0,vi=!1}if(ki&&!vi)return Gn||(Gn=new Ps),si||ru(ee)?Ai(ee,Be,tt,qt,Or,Gn):ca(ee,Be,gr,tt,qt,Or,Gn);if(!(tt&i)){var qr=vi&&Xe.call(ee,"__wrapped__"),Hi=Eo&&Xe.call(Be,"__wrapped__");if(qr||Hi){var Zi=qr?ee.value():ee,us=Hi?Be.value():Be;return Gn||(Gn=new Ps),Or(Zi,us,tt,qt,Gn)}}return ki?(Gn||(Gn=new Ps),iA(ee,Be,tt,qt,Or,Gn)):!1}function ri(ee){if(!Ui(ee)||zl(ee))return!1;var Be=Vi(ee)?nn:wt;return Be.test(fo(ee))}function wi(ee){return Jr(ee)&&nu(ee.length)&&!!ft[ho(ee)]}function Xa(ee){if(!rs(ee))return Bt(ee);var Be=[];for(var tt in Object(ee))Xe.call(ee,tt)&&tt!="constructor"&&Be.push(tt);return Be}function Ai(ee,Be,tt,qt,Or,Gn){var si=tt&i,ci=ee.length,gr=Be.length;if(ci!=gr&&!(si&&gr>ci))return!1;var Ir=Gn.get(ee);if(Ir&&Gn.get(Be))return Ir==Be;var vi=-1,Eo=!0,ki=tt&s?new so:void 0;for(Gn.set(ee,Be),Gn.set(Be,ee);++vi<ci;){var qr=ee[vi],Hi=Be[vi];if(qt)var Zi=si?qt(Hi,qr,vi,Be,ee,Gn):qt(qr,Hi,vi,ee,Be,Gn);if(Zi!==void 0){if(Zi)continue;Eo=!1;break}if(ki){if(!yn(Be,function(us,ya){if(!sr(ki,ya)&&(qr===us||Or(qr,us,tt,qt,Gn)))return ki.push(ya)})){Eo=!1;break}}else if(!(qr===Hi||Or(qr,Hi,tt,qt,Gn))){Eo=!1;break}}return Gn.delete(ee),Gn.delete(Be),Eo}function ca(ee,Be,tt,qt,Or,Gn,si){switch(tt){case fe:if(ee.byteLength!=Be.byteLength||ee.byteOffset!=Be.byteOffset)return!1;ee=ee.buffer,Be=Be.buffer;case we:return!(ee.byteLength!=Be.byteLength||!Gn(new oe(ee),new oe(Be)));case b:case E:case z:return ms(+ee,+Be);case S:return ee.name==Be.name&&ee.message==Be.message;case Y:case N:return ee==Be+"";case U:var ci=mr;case J:var gr=qt&i;if(ci||(ci=xr),ee.size!=Be.size&&!gr)return!1;var Ir=si.get(ee);if(Ir)return Ir==Be;qt|=s,si.set(ee,Be);var vi=Ai(ci(ee),ci(Be),qt,Or,Gn,si);return si.delete(ee),vi;case ie:if(Br)return Br.call(ee)==Br.call(Be)}return!1}function iA(ee,Be,tt,qt,Or,Gn){var si=tt&i,ci=ls(ee),gr=ci.length,Ir=ls(Be),vi=Ir.length;if(gr!=vi&&!si)return!1;for(var Eo=gr;Eo--;){var ki=ci[Eo];if(!(si?ki in Be:Xe.call(Be,ki)))return!1}var qr=Gn.get(ee);if(qr&&Gn.get(Be))return qr==Be;var Hi=!0;Gn.set(ee,Be),Gn.set(Be,ee);for(var Zi=si;++Eo<gr;){ki=ci[Eo];var us=ee[ki],ya=Be[ki];if(qt)var za=si?qt(ya,us,ki,Be,ee,Gn):qt(us,ya,ki,ee,Be,Gn);if(!(za===void 0?us===ya||Or(us,ya,tt,qt,Gn):za)){Hi=!1;break}Zi||(Zi=ki=="constructor")}if(Hi&&!Zi){var fu=ee.constructor,Hs=Be.constructor;fu!=Hs&&"constructor"in ee&&"constructor"in Be&&!(typeof fu=="function"&&fu instanceof fu&&typeof Hs=="function"&&Hs instanceof Hs)&&(Hi=!1)}return Gn.delete(ee),Gn.delete(Be),Hi}function ls(ee){return Pi(ee,Ni,Rs)}function Lr(ee,Be){var tt=ee.__data__;return hu(Be)?tt[typeof Be=="string"?"string":"hash"]:tt.map}function Ei(ee,Be){var tt=Jn(ee,Be);return ri(tt)?tt:void 0}function Ja(ee){var Be=Xe.call(ee,ze),tt=ee[ze];try{ee[ze]=void 0;var qt=!0}catch{}var Or=Yt.call(ee);return qt&&(Be?ee[ze]=tt:delete ee[ze]),Or}var Rs=rt?function(ee){return ee==null?[]:(ee=Object(ee),en(rt(ee),function(Be){return ve.call(ee,Be)}))}:lo,So=ho;(vt&&So(new vt(new ArrayBuffer(1)))!=fe||Xt&&So(new Xt)!=U||tn&&So(tn.resolve())!=re||zt&&So(new zt)!=J||_t&&So(new _t)!=de)&&(So=function(ee){var Be=ho(ee),tt=Be==Q?ee.constructor:void 0,qt=tt?fo(tt):"";if(qt)switch(qt){case Sn:return fe;case Ar:return U;case wr:return re;case rn:return J;case Fn:return de}return Be});function Gs(ee,Be){return Be=Be??a,!!Be&&(typeof ee=="number"||Ct.test(ee))&&ee>-1&&ee%1==0&&ee<Be}function hu(ee){var Be=typeof ee;return Be=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?ee!=="__proto__":ee===null}function zl(ee){return!!Et&&Et in ee}function rs(ee){var Be=ee&&ee.constructor,tt=typeof Be=="function"&&Be.prototype||Ge;return ee===tt}function Vs(ee){return Yt.call(ee)}function fo(ee){if(ee!=null){try{return me.call(ee)}catch{}try{return ee+""}catch{}}return""}function ms(ee,Be){return ee===Be||ee!==ee&&Be!==Be}var Ms=_s(function(){return arguments}())?_s:function(ee){return Jr(ee)&&Xe.call(ee,"callee")&&!ve.call(ee,"callee")},el=Array.isArray;function Ks(ee){return ee!=null&&nu(ee.length)&&!Vi(ee)}var El=pt||Ri;function oA(ee,Be){return Ns(ee,Be)}function Vi(ee){if(!Ui(ee))return!1;var Be=ho(ee);return Be==O||Be==k||Be==g||Be==X}function nu(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=a}function Ui(ee){var Be=typeof ee;return ee!=null&&(Be=="object"||Be=="function")}function Jr(ee){return ee!=null&&typeof ee=="object"}var ru=Ut?Rr(Ut):wi;function Ni(ee){return Ks(ee)?un(ee):Xa(ee)}function lo(){return[]}function Ri(){return!1}n.exports=oA}(Dv,Dv.exports)),Dv.exports}var Vfe=$fe();const vB=La(Vfe);function Li(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Li=function(){return a},a}Li();class Hfe{constructor(e=(Li().b[0][0]++,{})){On(this,"onSourcesChange");On(this,"onVectorLayersChange");On(this,"throttledAnalyzeVectorLayerFields");On(this,"_sources");On(this,"_vectorLayers");Li().f[0]++,Li().s[0]++,this.onSourcesChange=(Li().b[1][0]++,e.onSourcesChange||(Li().b[1][1]++,()=>{Li().f[1]++})),Li().s[1]++,this.onVectorLayersChange=(Li().b[2][0]++,e.onVectorLayersChange||(Li().b[2][1]++,()=>{Li().f[2]++})),Li().s[2]++,this._sources={},Li().s[3]++,this._vectorLayers={},Li().s[4]++,this.throttledAnalyzeVectorLayerFields=Yfe(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Li().f[3]++;const t=(Li().s[5]++,{...this._sources});Li().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Li().f[4]++,Li().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Li().s[8]++,vB(t,this._sources)?Li().b[3][1]++:(Li().b[3][0]++,Li().s[9]++,this.onSourcesChange(this._sources)),Li().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Li().f[5]++;const t=(Li().s[11]++,{...this._vectorLayers});Li().s[12]++,Object.keys(this._sources).forEach(r=>{Li().f[6]++,Li().s[13]++,(Li().b[4][0]++,this._sources[r]||(Li().b[4][1]++,[])).forEach(i=>{Li().f[7]++;const s=(Li().s[14]++,Li().b[5][0]++,this._vectorLayers[i]||(Li().b[5][1]++,{})),a=(Li().s[15]++,{sourceLayer:i});Li().s[16]++,e.querySourceFeatures(r,a).forEach(o=>{Li().f[8]++,Li().s[17]++,Object.keys(o.properties).forEach(d=>{Li().f[9]++;const g=(Li().s[18]++,Li().b[6][0]++,s[d]||(Li().b[6][1]++,{}));Li().s[19]++,g[o.properties[d]]={},Li().s[20]++,s[d]=g})}),Li().s[21]++,this._vectorLayers[i]=s})}),Li().s[22]++,vB(t,this._vectorLayers)?Li().b[7][1]++:(Li().b[7][0]++,Li().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Li().f[10]++,Li().s[24]++,this._sources}get vectorLayers(){return Li().f[11]++,Li().s[25]++,this._vectorLayers}}function na(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return na=function(){return a},a}na();const $v=(na().s[0]++,{});function XI(){na().f[0]++;const n=(na().s[1]++,new URL(window.location.href).searchParams),e=(na().s[2]++,n.get("debug"));return na().s[3]++,e?(na().b[0][0]++,na().s[4]++,!!e.match(/^(|1|true)$/)):(na().b[0][1]++,na().s[5]++,!1)}function rW(){return na().f[1]++,na().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function Zfe(n,e,t){if(na().f[2]++,na().s[7]++,XI())na().b[1][1]++;else throw na().b[1][0]++,na().s[8]++,rW();na().s[9]++,$v[n]=(na().b[2][0]++,$v[n]||(na().b[2][1]++,{})),na().s[10]++,$v[n][e]=t}function Xfe(n,e){if(na().f[3]++,na().s[11]++,XI())na().b[3][1]++;else throw na().b[3][0]++,na().s[12]++,rW();if(na().s[13]++,Object.prototype.hasOwnProperty.call($v,n))return na().b[4][0]++,na().s[14]++,$v[n][e];na().b[4][1]++}const Ag=(na().s[15]++,{enabled:XI,get:Xfe,set:Zfe});na().s[16]++;window.debug=Ag;function Me(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="b0d5f8ee8537ee2f4707fe123c0c222059f25ad2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:36,column:0},end:{line:36,column:30}},1:{start:{line:38,column:29},end:{line:38,column:60}},2:{start:{line:39,column:26},end:{line:39,column:54}},3:{start:{line:40,column:31},end:{line:40,column:64}},4:{start:{line:41,column:2},end:{line:53,column:3}},5:{start:{line:42,column:24},end:{line:42,column:95}},6:{start:{line:43,column:4},end:{line:45,column:5}},7:{start:{line:44,column:6},end:{line:44,column:47}},8:{start:{line:46,column:9},end:{line:53,column:3}},9:{start:{line:47,column:24},end:{line:47,column:96}},10:{start:{line:48,column:4},end:{line:50,column:5}},11:{start:{line:49,column:6},end:{line:49,column:47}},12:{start:{line:52,column:4},end:{line:52,column:15}},13:{start:{line:56,column:2},end:{line:65,column:4}},14:{start:{line:72,column:4},end:{line:72,column:17}},15:{start:{line:73,column:4},end:{line:73,column:19}},16:{start:{line:74,column:4},end:{line:74,column:45}},17:{start:{line:75,column:19},end:{line:75,column:75}},18:{start:{line:76,column:15},end:{line:76,column:38}},19:{start:{line:77,column:4},end:{line:79,column:5}},20:{start:{line:78,column:6},end:{line:78,column:34}},21:{start:{line:80,column:4},end:{line:84,column:7}},22:{start:{line:81,column:40},end:{line:81,column:86}},23:{start:{line:85,column:22},end:{line:136,column:5}},24:{start:{line:89,column:10},end:{line:89,column:40}},25:{start:{line:95,column:10},end:{line:95,column:35}},26:{start:{line:101,column:10},end:{line:101,column:37}},27:{start:{line:107,column:10},end:{line:107,column:38}},28:{start:{line:113,column:10},end:{line:113,column:39}},29:{start:{line:119,column:10},end:{line:121,column:12}},30:{start:{line:127,column:10},end:{line:127,column:63}},31:{start:{line:133,column:10},end:{line:133,column:36}},32:{start:{line:137,column:4},end:{line:150,column:7}},33:{start:{line:138,column:6},end:{line:149,column:7}},34:{start:{line:139,column:8},end:{line:139,column:24}},35:{start:{line:140,column:8},end:{line:140,column:30}},36:{start:{line:141,column:13},end:{line:149,column:7}},37:{start:{line:142,column:25},end:{line:144,column:10}},38:{start:{line:143,column:10},end:{line:143,column:41}},39:{start:{line:145,column:8},end:{line:148,column:9}},40:{start:{line:146,column:10},end:{line:146,column:44}},41:{start:{line:147,column:10},end:{line:147,column:29}},42:{start:{line:151,column:21},end:{line:151,column:38}},43:{start:{line:152,column:4},end:{line:171,column:5}},44:{start:{line:153,column:6},end:{line:153,column:41}},45:{start:{line:154,column:6},end:{line:154,column:74}},46:{start:{line:154,column:43},end:{line:154,column:72}},47:{start:{line:155,column:6},end:{line:155,column:31}},48:{start:{line:157,column:6},end:{line:159,column:7}},49:{start:{line:158,column:8},end:{line:158,column:33}},50:{start:{line:160,column:6},end:{line:170,column:9}},51:{start:{line:161,column:8},end:{line:164,column:9}},52:{start:{line:162,column:10},end:{line:162,column:74}},53:{start:{line:163,column:10},end:{line:163,column:45}},54:{start:{line:165,column:8},end:{line:165,column:104}},55:{start:{line:165,column:50},end:{line:165,column:102}},56:{start:{line:166,column:8},end:{line:169,column:9}},57:{start:{line:167,column:10},end:{line:167,column:63}},58:{start:{line:168,column:10},end:{line:168,column:69}},59:{start:{line:172,column:4},end:{line:175,column:5}},60:{start:{line:173,column:6},end:{line:173,column:65}},61:{start:{line:174,column:6},end:{line:174,column:59}},62:{start:{line:176,column:4},end:{line:210,column:6}},63:{start:{line:211,column:4},end:{line:213,column:7}},64:{start:{line:212,column:35},end:{line:212,column:69}},65:{start:{line:215,column:19},end:{line:233,column:3}},66:{start:{line:216,column:4},end:{line:232,column:5}},67:{start:{line:217,column:6},end:{line:223,column:7}},68:{start:{line:218,column:8},end:{line:218,column:27}},69:{start:{line:219,column:8},end:{line:219,column:22}},70:{start:{line:220,column:13},end:{line:223,column:7}},71:{start:{line:221,column:8},end:{line:221,column:27}},72:{start:{line:222,column:8},end:{line:222,column:22}},73:{start:{line:225,column:6},end:{line:231,column:7}},74:{start:{line:226,column:8},end:{line:226,column:27}},75:{start:{line:227,column:8},end:{line:227,column:22}},76:{start:{line:228,column:13},end:{line:231,column:7}},77:{start:{line:229,column:8},end:{line:229,column:27}},78:{start:{line:230,column:8},end:{line:230,column:22}},79:{start:{line:235,column:4},end:{line:235,column:60}},80:{start:{line:238,column:4},end:{line:238,column:63}},81:{start:{line:241,column:4},end:{line:241,column:40}},82:{start:{line:244,column:21},end:{line:244,column:55}},83:{start:{line:245,column:24},end:{line:245,column:93}},84:{start:{line:246,column:21},end:{line:246,column:110}},85:{start:{line:247,column:4},end:{line:249,column:7}},86:{start:{line:248,column:6},end:{line:248,column:80}},87:{start:{line:252,column:4},end:{line:254,column:7}},88:{start:{line:253,column:6},end:{line:253,column:80}},89:{start:{line:256,column:29},end:{line:270,column:3}},90:{start:{line:257,column:4},end:{line:261,column:5}},91:{start:{line:258,column:6},end:{line:260,column:9}},92:{start:{line:262,column:25},end:{line:268,column:5}},93:{start:{line:269,column:4},end:{line:269,column:38}},94:{start:{line:271,column:19},end:{line:383,column:3}},95:{start:{line:272,column:4},end:{line:277,column:6}},96:{start:{line:278,column:4},end:{line:280,column:5}},97:{start:{line:279,column:6},end:{line:279,column:44}},98:{start:{line:281,column:19},end:{line:281,column:51}},99:{start:{line:282,column:24},end:{line:282,column:26}},100:{start:{line:283,column:4},end:{line:294,column:5}},101:{start:{line:284,column:26},end:{line:284,column:42}},102:{start:{line:285,column:6},end:{line:293,column:9}},103:{start:{line:286,column:8},end:{line:291,column:9}},104:{start:{line:287,column:24},end:{line:289,column:11}},105:{start:{line:290,column:10},end:{line:290,column:34}},106:{start:{line:292,column:8},end:{line:292,column:40}},107:{start:{line:295,column:25},end:{line:346,column:6}},108:{start:{line:296,column:23},end:{line:296,column:109}},109:{start:{line:297,column:6},end:{line:310,column:7}},110:{start:{line:298,column:35},end:{line:298,column:43}},111:{start:{line:299,column:8},end:{line:309,column:10}},112:{start:{line:311,column:33},end:{line:311,column:100}},113:{start:{line:312,column:6},end:{line:325,column:7}},114:{start:{line:313,column:35},end:{line:313,column:53}},115:{start:{line:314,column:8},end:{line:324,column:10}},116:{start:{line:326,column:25},end:{line:326,column:88}},117:{start:{line:327,column:6},end:{line:345,column:7}},118:{start:{line:328,column:52},end:{line:328,column:62}},119:{start:{line:329,column:20},end:{line:329,column:78}},120:{start:{line:330,column:8},end:{line:340,column:10}},121:{start:{line:342,column:8},end:{line:344,column:10}},122:{start:{line:347,column:24},end:{line:347,column:30}},123:{start:{line:348,column:4},end:{line:362,column:5}},124:{start:{line:349,column:6},end:{line:349,column:42}},125:{start:{line:350,column:6},end:{line:361,column:9}},126:{start:{line:351,column:28},end:{line:351,column:33}},127:{start:{line:352,column:8},end:{line:360,column:9}},128:{start:{line:353,column:10},end:{line:359,column:11}},129:{start:{line:354,column:28},end:{line:354,column:49}},130:{start:{line:355,column:30},end:{line:355,column:69}},131:{start:{line:356,column:12},end:{line:356,column:44}},132:{start:{line:358,column:12},end:{line:358,column:30}},133:{start:{line:363,column:4},end:{line:365,column:5}},134:{start:{line:364,column:6},end:{line:364,column:40}},135:{start:{line:366,column:4},end:{line:368,column:5}},136:{start:{line:367,column:6},end:{line:367,column:40}},137:{start:{line:369,column:4},end:{line:371,column:5}},138:{start:{line:370,column:6},end:{line:370,column:47}},139:{start:{line:372,column:4},end:{line:374,column:5}},140:{start:{line:373,column:6},end:{line:373,column:31}},141:{start:{line:375,column:4},end:{line:382,column:7}},142:{start:{line:380,column:6},end:{line:380,column:26}},143:{start:{line:381,column:6},end:{line:381,column:27}},144:{start:{line:384,column:11},end:{line:391,column:3}},145:{start:{line:385,column:24},end:{line:385,column:49}},146:{start:{line:386,column:21},end:{line:386,column:67}},147:{start:{line:387,column:4},end:{line:387,column:61}},148:{start:{line:388,column:4},end:{line:390,column:7}},149:{start:{line:392,column:11},end:{line:399,column:3}},150:{start:{line:393,column:24},end:{line:393,column:49}},151:{start:{line:394,column:21},end:{line:394,column:67}},152:{start:{line:395,column:4},end:{line:395,column:61}},153:{start:{line:396,column:4},end:{line:398,column:7}},154:{start:{line:400,column:16},end:{line:414,column:3}},155:{start:{line:401,column:33},end:{line:401,column:37}},156:{start:{line:402,column:17},end:{line:402,column:43}},157:{start:{line:403,column:4},end:{line:403,column:53}},158:{start:{line:404,column:4},end:{line:404,column:53}},159:{start:{line:405,column:4},end:{line:405,column:38}},160:{start:{line:405,column:31},end:{line:405,column:38}},161:{start:{line:406,column:4},end:{line:410,column:5}},162:{start:{line:407,column:6},end:{line:409,column:9}},163:{start:{line:411,column:4},end:{line:411,column:29}},164:{start:{line:412,column:4},end:{line:412,column:49}},165:{start:{line:413,column:4},end:{line:413,column:32}},166:{start:{line:415,column:19},end:{line:421,column:3}},167:{start:{line:416,column:25},end:{line:419,column:5}},168:{start:{line:420,column:4},end:{line:420,column:38}},169:{start:{line:422,column:19},end:{line:427,column:3}},170:{start:{line:423,column:19},end:{line:423,column:45}},171:{start:{line:424,column:28},end:{line:424,column:43}},172:{start:{line:425,column:4},end:{line:425,column:37}},173:{start:{line:426,column:4},end:{line:426,column:41}},174:{start:{line:428,column:16},end:{line:435,column:3}},175:{start:{line:429,column:19},end:{line:429,column:45}},176:{start:{line:430,column:26},end:{line:430,column:41}},177:{start:{line:431,column:24},end:{line:431,column:55}},178:{start:{line:432,column:4},end:{line:432,column:46}},179:{start:{line:433,column:4},end:{line:433,column:48}},180:{start:{line:434,column:4},end:{line:434,column:39}},181:{start:{line:436,column:28},end:{line:445,column:3}},182:{start:{line:437,column:19},end:{line:437,column:45}},183:{start:{line:438,column:26},end:{line:438,column:41}},184:{start:{line:439,column:18},end:{line:439,column:45}},185:{start:{line:440,column:26},end:{line:440,column:70}},186:{start:{line:441,column:4},end:{line:441,column:88}},187:{start:{line:442,column:4},end:{line:442,column:33}},188:{start:{line:443,column:4},end:{line:443,column:33}},189:{start:{line:444,column:4},end:{line:444,column:39}},190:{start:{line:446,column:20},end:{line:453,column:3}},191:{start:{line:447,column:26},end:{line:447,column:61}},192:{start:{line:448,column:4},end:{line:451,column:6}},193:{start:{line:452,column:4},end:{line:452,column:39}},194:{start:{line:454,column:19},end:{line:458,column:3}},195:{start:{line:455,column:26},end:{line:455,column:61}},196:{start:{line:456,column:4},end:{line:456,column:33}},197:{start:{line:457,column:4},end:{line:457,column:39}},198:{start:{line:459,column:16},end:{line:463,column:3}},199:{start:{line:460,column:4},end:{line:462,column:27}},200:{start:{line:464,column:21},end:{line:478,column:3}},201:{start:{line:465,column:21},end:{line:465,column:44}},202:{start:{line:466,column:4},end:{line:477,column:5}},203:{start:{line:467,column:27},end:{line:473,column:7}},204:{start:{line:474,column:6},end:{line:474,column:26}},205:{start:{line:476,column:6},end:{line:476,column:22}},206:{start:{line:479,column:14},end:{line:483,column:3}},207:{start:{line:480,column:4},end:{line:480,column:34}},208:{start:{line:481,column:4},end:{line:481,column:47}},209:{start:{line:482,column:4},end:{line:482,column:34}},210:{start:{line:485,column:23},end:{line:485,column:25}},211:{start:{line:486,column:4},end:{line:520,column:5}},212:{start:{line:487,column:6},end:{line:519,column:7}},213:{start:{line:488,column:8},end:{line:491,column:10}},214:{start:{line:492,column:18},end:{line:492,column:25}},215:{start:{line:493,column:8},end:{line:497,column:9}},216:{start:{line:494,column:10},end:{line:494,column:62}},217:{start:{line:496,column:10},end:{line:496,column:63}},218:{start:{line:498,column:8},end:{line:516,column:11}},219:{start:{line:500,column:30},end:{line:500,column:45}},220:{start:{line:501,column:10},end:{line:503,column:11}},221:{start:{line:502,column:12},end:{line:502,column:19}},222:{start:{line:504,column:26},end:{line:506,column:12}},223:{start:{line:507,column:10},end:{line:509,column:11}},224:{start:{line:508,column:12},end:{line:508,column:47}},225:{start:{line:510,column:10},end:{line:510,column:51}},226:{start:{line:511,column:10},end:{line:513,column:13}},227:{start:{line:515,column:10},end:{line:515,column:72}},228:{start:{line:518,column:8},end:{line:518,column:86}},229:{start:{line:521,column:4},end:{line:526,column:5}},230:{start:{line:522,column:6},end:{line:522,column:39}},231:{start:{line:523,column:6},end:{line:525,column:9}},232:{start:{line:529,column:21},end:{line:529,column:55}},233:{start:{line:530,column:4},end:{line:530,column:53}},234:{start:{line:532,column:16},end:{line:536,column:3}},235:{start:{line:533,column:4},end:{line:535,column:7}},236:{start:{line:538,column:40},end:{line:538,column:50}},237:{start:{line:539,column:21},end:{line:550,column:5}},238:{start:{line:542,column:8},end:{line:544,column:11}},239:{start:{line:547,column:8},end:{line:547,column:44}},240:{start:{line:548,column:8},end:{line:548,column:28}},241:{start:{line:551,column:21},end:{line:551,column:40}},242:{start:{line:553,column:4},end:{line:575,column:5}},243:{start:{line:554,column:6},end:{line:562,column:8}},244:{start:{line:564,column:6},end:{line:574,column:8}},245:{start:{line:577,column:4},end:{line:579,column:5}},246:{start:{line:578,column:6},end:{line:578,column:63}},247:{start:{line:580,column:25},end:{line:580,column:27}},248:{start:{line:581,column:4},end:{line:583,column:5}},249:{start:{line:582,column:6},end:{line:582,column:52}},250:{start:{line:584,column:4},end:{line:584,column:160}},251:{start:{line:586,column:18},end:{line:604,column:3}},252:{start:{line:587,column:43},end:{line:587,column:53}},253:{start:{line:588,column:35},end:{line:588,column:45}},254:{start:{line:589,column:16},end:{line:589,column:38}},255:{start:{line:590,column:20},end:{line:590,column:50}},256:{start:{line:591,column:4},end:{line:591,column:70}},257:{start:{line:592,column:23},end:{line:592,column:122}},258:{start:{line:592,column:66},end:{line:592,column:91}},259:{start:{line:592,column:109},end:{line:592,column:121}},260:{start:{line:593,column:4},end:{line:597,column:5}},261:{start:{line:594,column:6},end:{line:594,column:58}},262:{start:{line:596,column:6},end:{line:596,column:39}},263:{start:{line:598,column:4},end:{line:602,column:5}},264:{start:{line:599,column:6},end:{line:599,column:38}},265:{start:{line:600,column:11},end:{line:602,column:5}},266:{start:{line:601,column:6},end:{line:601,column:46}},267:{start:{line:603,column:4},end:{line:603,column:71}},268:{start:{line:605,column:27},end:{line:650,column:3}},269:{start:{line:606,column:16},end:{line:606,column:38}},270:{start:{line:607,column:23},end:{line:607,column:52}},271:{start:{line:608,column:4},end:{line:620,column:5}},272:{start:{line:609,column:21},end:{line:609,column:42}},273:{start:{line:610,column:23},end:{line:610,column:25}},274:{start:{line:611,column:6},end:{line:613,column:9}},275:{start:{line:612,column:8},end:{line:612,column:35}},276:{start:{line:614,column:6},end:{line:619,column:9}},277:{start:{line:621,column:17},end:{line:621,column:45}},278:{start:{line:622,column:4},end:{line:624,column:5}},279:{start:{line:623,column:6},end:{line:623,column:29}},280:{start:{line:625,column:17},end:{line:625,column:46}},281:{start:{line:626,column:4},end:{line:649,column:5}},282:{start:{line:627,column:6},end:{line:648,column:7}},283:{start:{line:628,column:22},end:{line:628,column:37}},284:{start:{line:629,column:46},end:{line:632,column:9}},285:{start:{line:633,column:20},end:{line:633,column:24}},286:{start:{line:634,column:8},end:{line:639,column:9}},287:{start:{line:635,column:33},end:{line:635,column:63}},288:{start:{line:636,column:10},end:{line:638,column:11}},289:{start:{line:637,column:12},end:{line:637,column:26}},290:{start:{line:640,column:8},end:{line:645,column:9}},291:{start:{line:641,column:10},end:{line:644,column:13}},292:{start:{line:647,column:8},end:{line:647,column:26}},293:{start:{line:651,column:18},end:{line:656,column:3}},294:{start:{line:652,column:4},end:{line:655,column:27}},295:{start:{line:658,column:4},end:{line:663,column:27}},296:{start:{line:666,column:4},end:{line:666,column:60}},297:{start:{line:669,column:4},end:{line:669,column:34}},298:{start:{line:671,column:28},end:{line:678,column:3}},299:{start:{line:672,column:4},end:{line:677,column:7}},300:{start:{line:679,column:28},end:{line:686,column:3}},301:{start:{line:680,column:4},end:{line:685,column:7}},302:{start:{line:688,column:19},end:{line:688,column:51}},303:{start:{line:689,column:26},end:{line:689,column:92}},304:{start:{line:690,column:36},end:{line:703,column:5}},305:{start:{line:704,column:38},end:{line:718,column:5}},306:{start:{line:719,column:24},end:{line:738,column:14}},307:{start:{line:739,column:24},end:{line:749,column:14}},308:{start:{line:750,column:35},end:{line:810,column:8}},309:{start:{line:811,column:4},end:{line:821,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:37,column:9},end:{line:37,column:28}},loc:{start:{line:37,column:44},end:{line:54,column:1}},line:37},1:{name:"updateRootSpec",decl:{start:{line:55,column:9},end:{line:55,column:23}},loc:{start:{line:55,column:52},end:{line:66,column:1}},line:55},2:{name:"(anonymous_2)",decl:{start:{line:71,column:2},end:{line:71,column:3}},loc:{start:{line:71,column:21},end:{line:214,column:3}},line:71},3:{name:"(anonymous_3)",decl:{start:{line:81,column:26},end:{line:81,column:27}},loc:{start:{line:81,column:40},end:{line:81,column:86}},line:81},4:{name:"(anonymous_4)",decl:{start:{line:88,column:17},end:{line:88,column:18}},loc:{start:{line:88,column:23},end:{line:90,column:9}},line:88},5:{name:"(anonymous_5)",decl:{start:{line:94,column:17},end:{line:94,column:18}},loc:{start:{line:94,column:23},end:{line:96,column:9}},line:94},6:{name:"(anonymous_6)",decl:{start:{line:100,column:17},end:{line:100,column:18}},loc:{start:{line:100,column:23},end:{line:102,column:9}},line:100},7:{name:"(anonymous_7)",decl:{start:{line:106,column:17},end:{line:106,column:18}},loc:{start:{line:106,column:23},end:{line:108,column:9}},line:106},8:{name:"(anonymous_8)",decl:{start:{line:112,column:17},end:{line:112,column:18}},loc:{start:{line:112,column:23},end:{line:114,column:9}},line:112},9:{name:"(anonymous_9)",decl:{start:{line:118,column:17},end:{line:118,column:18}},loc:{start:{line:118,column:23},end:{line:122,column:9}},line:118},10:{name:"(anonymous_10)",decl:{start:{line:126,column:17},end:{line:126,column:18}},loc:{start:{line:126,column:23},end:{line:128,column:9}},line:126},11:{name:"(anonymous_11)",decl:{start:{line:132,column:17},end:{line:132,column:18}},loc:{start:{line:132,column:23},end:{line:134,column:9}},line:132},12:{name:"(anonymous_12)",decl:{start:{line:137,column:44},end:{line:137,column:45}},loc:{start:{line:137,column:51},end:{line:150,column:5}},line:137},13:{name:"(anonymous_13)",decl:{start:{line:142,column:40},end:{line:142,column:41}},loc:{start:{line:142,column:55},end:{line:144,column:9}},line:142},14:{name:"(anonymous_14)",decl:{start:{line:154,column:29},end:{line:154,column:30}},loc:{start:{line:154,column:43},end:{line:154,column:72}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:160,column:27},end:{line:160,column:28}},loc:{start:{line:160,column:36},end:{line:170,column:7}},line:160},16:{name:"(anonymous_16)",decl:{start:{line:165,column:36},end:{line:165,column:37}},loc:{start:{line:165,column:50},end:{line:165,column:102}},line:165},17:{name:"(anonymous_17)",decl:{start:{line:212,column:28},end:{line:212,column:29}},loc:{start:{line:212,column:35},end:{line:212,column:69}},line:212},18:{name:"(anonymous_18)",decl:{start:{line:215,column:19},end:{line:215,column:20}},loc:{start:{line:215,column:26},end:{line:233,column:3}},line:215},19:{name:"(anonymous_19)",decl:{start:{line:234,column:2},end:{line:234,column:3}},loc:{start:{line:234,column:22},end:{line:236,column:3}},line:234},20:{name:"(anonymous_20)",decl:{start:{line:237,column:2},end:{line:237,column:3}},loc:{start:{line:237,column:25},end:{line:239,column:3}},line:237},21:{name:"(anonymous_21)",decl:{start:{line:240,column:2},end:{line:240,column:3}},loc:{start:{line:240,column:27},end:{line:242,column:3}},line:240},22:{name:"(anonymous_22)",decl:{start:{line:243,column:2},end:{line:243,column:3}},loc:{start:{line:243,column:27},end:{line:250,column:3}},line:243},23:{name:"(anonymous_23)",decl:{start:{line:247,column:37},end:{line:247,column:38}},loc:{start:{line:247,column:48},end:{line:249,column:5}},line:247},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:23},end:{line:255,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:252,column:36},end:{line:252,column:37}},loc:{start:{line:252,column:47},end:{line:254,column:5}},line:252},26:{name:"(anonymous_26)",decl:{start:{line:256,column:29},end:{line:256,column:30}},loc:{start:{line:256,column:50},end:{line:270,column:3}},line:256},27:{name:"(anonymous_27)",decl:{start:{line:271,column:19},end:{line:271,column:20}},loc:{start:{line:271,column:44},end:{line:383,column:3}},line:271},28:{name:"(anonymous_28)",decl:{start:{line:285,column:30},end:{line:285,column:31}},loc:{start:{line:285,column:48},end:{line:293,column:7}},line:285},29:{name:"(anonymous_29)",decl:{start:{line:295,column:56},end:{line:295,column:57}},loc:{start:{line:295,column:67},end:{line:346,column:5}},line:295},30:{name:"(anonymous_30)",decl:{start:{line:350,column:21},end:{line:350,column:22}},loc:{start:{line:350,column:32},end:{line:361,column:7}},line:350},31:{name:"(anonymous_31)",decl:{start:{line:379,column:7},end:{line:379,column:8}},loc:{start:{line:379,column:13},end:{line:382,column:5}},line:379},32:{name:"(anonymous_32)",decl:{start:{line:384,column:11},end:{line:384,column:12}},loc:{start:{line:384,column:17},end:{line:391,column:3}},line:384},33:{name:"(anonymous_33)",decl:{start:{line:392,column:11},end:{line:392,column:12}},loc:{start:{line:392,column:17},end:{line:399,column:3}},line:392},34:{name:"(anonymous_34)",decl:{start:{line:400,column:16},end:{line:400,column:17}},loc:{start:{line:400,column:26},end:{line:414,column:3}},line:400},35:{name:"(anonymous_35)",decl:{start:{line:415,column:19},end:{line:415,column:20}},loc:{start:{line:415,column:38},end:{line:421,column:3}},line:415},36:{name:"(anonymous_36)",decl:{start:{line:422,column:19},end:{line:422,column:20}},loc:{start:{line:422,column:30},end:{line:427,column:3}},line:422},37:{name:"(anonymous_37)",decl:{start:{line:428,column:16},end:{line:428,column:17}},loc:{start:{line:428,column:27},end:{line:435,column:3}},line:428},38:{name:"(anonymous_38)",decl:{start:{line:436,column:28},end:{line:436,column:29}},loc:{start:{line:436,column:39},end:{line:445,column:3}},line:436},39:{name:"(anonymous_39)",decl:{start:{line:446,column:20},end:{line:446,column:21}},loc:{start:{line:446,column:46},end:{line:453,column:3}},line:446},40:{name:"(anonymous_40)",decl:{start:{line:454,column:19},end:{line:454,column:20}},loc:{start:{line:454,column:37},end:{line:458,column:3}},line:454},41:{name:"(anonymous_41)",decl:{start:{line:459,column:16},end:{line:459,column:17}},loc:{start:{line:459,column:30},end:{line:463,column:3}},line:459},42:{name:"(anonymous_42)",decl:{start:{line:464,column:21},end:{line:464,column:22}},loc:{start:{line:464,column:35},end:{line:478,column:3}},line:464},43:{name:"(anonymous_43)",decl:{start:{line:479,column:14},end:{line:479,column:15}},loc:{start:{line:479,column:40},end:{line:483,column:3}},line:479},44:{name:"(anonymous_44)",decl:{start:{line:484,column:2},end:{line:484,column:3}},loc:{start:{line:484,column:17},end:{line:527,column:3}},line:484},45:{name:"(anonymous_45)",decl:{start:{line:500,column:16},end:{line:500,column:17}},loc:{start:{line:500,column:30},end:{line:500,column:45}},line:500},46:{name:"(anonymous_46)",decl:{start:{line:500,column:52},end:{line:500,column:53}},loc:{start:{line:500,column:62},end:{line:514,column:9}},line:500},47:{name:"(anonymous_47)",decl:{start:{line:514,column:17},end:{line:514,column:18}},loc:{start:{line:514,column:26},end:{line:516,column:9}},line:514},48:{name:"(anonymous_48)",decl:{start:{line:528,column:2},end:{line:528,column:3}},loc:{start:{line:528,column:17},end:{line:531,column:3}},line:528},49:{name:"(anonymous_49)",decl:{start:{line:532,column:16},end:{line:532,column:17}},loc:{start:{line:532,column:29},end:{line:536,column:3}},line:532},50:{name:"(anonymous_50)",decl:{start:{line:537,column:2},end:{line:537,column:3}},loc:{start:{line:537,column:16},end:{line:585,column:3}},line:537},51:{name:"(anonymous_51)",decl:{start:{line:541,column:27},end:{line:541,column:28}},loc:{start:{line:541,column:42},end:{line:545,column:7}},line:541},52:{name:"(anonymous_52)",decl:{start:{line:546,column:20},end:{line:546,column:21}},loc:{start:{line:546,column:27},end:{line:549,column:7}},line:546},53:{name:"(anonymous_53)",decl:{start:{line:586,column:18},end:{line:586,column:19}},loc:{start:{line:586,column:24},end:{line:604,column:3}},line:586},54:{name:"(anonymous_54)",decl:{start:{line:592,column:50},end:{line:592,column:51}},loc:{start:{line:592,column:66},end:{line:592,column:91}},line:592},55:{name:"(anonymous_55)",decl:{start:{line:592,column:100},end:{line:592,column:101}},loc:{start:{line:592,column:109},end:{line:592,column:121}},line:592},56:{name:"(anonymous_56)",decl:{start:{line:605,column:27},end:{line:605,column:28}},loc:{start:{line:605,column:41},end:{line:650,column:3}},line:605},57:{name:"(anonymous_57)",decl:{start:{line:611,column:21},end:{line:611,column:22}},loc:{start:{line:611,column:36},end:{line:613,column:7}},line:611},58:{name:"(anonymous_58)",decl:{start:{line:651,column:18},end:{line:651,column:19}},loc:{start:{line:651,column:29},end:{line:656,column:3}},line:651},59:{name:"(anonymous_59)",decl:{start:{line:657,column:2},end:{line:657,column:3}},loc:{start:{line:657,column:29},end:{line:664,column:3}},line:657},60:{name:"(anonymous_60)",decl:{start:{line:665,column:2},end:{line:665,column:3}},loc:{start:{line:665,column:25},end:{line:667,column:3}},line:665},61:{name:"(anonymous_61)",decl:{start:{line:668,column:2},end:{line:668,column:3}},loc:{start:{line:668,column:30},end:{line:670,column:3}},line:668},62:{name:"(anonymous_62)",decl:{start:{line:671,column:28},end:{line:671,column:29}},loc:{start:{line:671,column:44},end:{line:678,column:3}},line:671},63:{name:"(anonymous_63)",decl:{start:{line:679,column:28},end:{line:679,column:29}},loc:{start:{line:679,column:44},end:{line:686,column:3}},line:679},64:{name:"(anonymous_64)",decl:{start:{line:687,column:2},end:{line:687,column:3}},loc:{start:{line:687,column:11},end:{line:822,column:3}},line:687}},branchMap:{0:{loc:{start:{line:41,column:2},end:{line:53,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:53,column:3}},{start:{line:46,column:9},end:{line:53,column:3}}],line:41},1:{loc:{start:{line:41,column:6},end:{line:41,column:43}},type:"binary-expr",locations:[{start:{line:41,column:6},end:{line:41,column:24}},{start:{line:41,column:28},end:{line:41,column:43}}],line:41},2:{loc:{start:{line:43,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:45,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:43},3:{loc:{start:{line:46,column:9},end:{line:53,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:53,column:3}},{start:{line:51,column:9},end:{line:53,column:3}}],line:46},4:{loc:{start:{line:48,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:50,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:77,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:79,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},6:{loc:{start:{line:77,column:8},end:{line:77,column:89}},type:"binary-expr",locations:[{start:{line:77,column:8},end:{line:77,column:20}},{start:{line:77,column:25},end:{line:77,column:54}},{start:{line:77,column:58},end:{line:77,column:88}}],line:77},7:{loc:{start:{line:120,column:12},end:{line:120,column:61}},type:"cond-expr",locations:[{start:{line:120,column:44},end:{line:120,column:53}},{start:{line:120,column:56},end:{line:120,column:61}}],line:120},8:{loc:{start:{line:138,column:6},end:{line:149,column:7}},type:"if",locations:[{start:{line:138,column:6},end:{line:149,column:7}},{start:{line:141,column:13},end:{line:149,column:7}}],line:138},9:{loc:{start:{line:141,column:13},end:{line:149,column:7}},type:"if",locations:[{start:{line:141,column:13},end:{line:149,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:141},10:{loc:{start:{line:141,column:17},end:{line:141,column:88}},type:"binary-expr",locations:[{start:{line:141,column:17},end:{line:141,column:44}},{start:{line:141,column:48},end:{line:141,column:88}}],line:141},11:{loc:{start:{line:145,column:8},end:{line:148,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:148,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:145},12:{loc:{start:{line:152,column:4},end:{line:171,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:171,column:5}},{start:{line:156,column:11},end:{line:171,column:5}}],line:152},13:{loc:{start:{line:152,column:8},end:{line:152,column:104}},type:"binary-expr",locations:[{start:{line:152,column:8},end:{line:152,column:16}},{start:{line:152,column:20},end:{line:152,column:104}}],line:152},14:{loc:{start:{line:157,column:6},end:{line:159,column:7}},type:"if",locations:[{start:{line:157,column:6},end:{line:159,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:157},15:{loc:{start:{line:161,column:8},end:{line:164,column:9}},type:"if",locations:[{start:{line:161,column:8},end:{line:164,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},16:{loc:{start:{line:166,column:8},end:{line:169,column:9}},type:"if",locations:[{start:{line:166,column:8},end:{line:169,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:166},17:{loc:{start:{line:172,column:4},end:{line:175,column:5}},type:"if",locations:[{start:{line:172,column:4},end:{line:175,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:172},18:{loc:{start:{line:216,column:4},end:{line:232,column:5}},type:"if",locations:[{start:{line:216,column:4},end:{line:232,column:5}},{start:{line:224,column:11},end:{line:232,column:5}}],line:216},19:{loc:{start:{line:217,column:6},end:{line:223,column:7}},type:"if",locations:[{start:{line:217,column:6},end:{line:223,column:7}},{start:{line:220,column:13},end:{line:223,column:7}}],line:217},20:{loc:{start:{line:217,column:10},end:{line:217,column:53}},type:"binary-expr",locations:[{start:{line:217,column:10},end:{line:217,column:19}},{start:{line:217,column:23},end:{line:217,column:33}},{start:{line:217,column:37},end:{line:217,column:53}}],line:217},21:{loc:{start:{line:220,column:13},end:{line:223,column:7}},type:"if",locations:[{start:{line:220,column:13},end:{line:223,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:220},22:{loc:{start:{line:220,column:17},end:{line:220,column:46}},type:"binary-expr",locations:[{start:{line:220,column:17},end:{line:220,column:26}},{start:{line:220,column:30},end:{line:220,column:46}}],line:220},23:{loc:{start:{line:225,column:6},end:{line:231,column:7}},type:"if",locations:[{start:{line:225,column:6},end:{line:231,column:7}},{start:{line:228,column:13},end:{line:231,column:7}}],line:225},24:{loc:{start:{line:225,column:10},end:{line:225,column:39}},type:"binary-expr",locations:[{start:{line:225,column:10},end:{line:225,column:19}},{start:{line:225,column:23},end:{line:225,column:39}}],line:225},25:{loc:{start:{line:228,column:13},end:{line:231,column:7}},type:"if",locations:[{start:{line:228,column:13},end:{line:231,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:228},26:{loc:{start:{line:228,column:17},end:{line:228,column:46}},type:"binary-expr",locations:[{start:{line:228,column:17},end:{line:228,column:26}},{start:{line:228,column:30},end:{line:228,column:46}}],line:228},27:{loc:{start:{line:244,column:21},end:{line:244,column:55}},type:"binary-expr",locations:[{start:{line:244,column:21},end:{line:244,column:49}},{start:{line:244,column:53},end:{line:244,column:55}}],line:244},28:{loc:{start:{line:245,column:24},end:{line:245,column:93}},type:"binary-expr",locations:[{start:{line:245,column:24},end:{line:245,column:70}},{start:{line:245,column:74},end:{line:245,column:93}}],line:245},29:{loc:{start:{line:246,column:21},end:{line:246,column:110}},type:"cond-expr",locations:[{start:{line:246,column:55},end:{line:246,column:96}},{start:{line:246,column:99},end:{line:246,column:110}}],line:246},30:{loc:{start:{line:257,column:4},end:{line:261,column:5}},type:"if",locations:[{start:{line:257,column:4},end:{line:261,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:257},31:{loc:{start:{line:257,column:8},end:{line:257,column:123}},type:"binary-expr",locations:[{start:{line:257,column:8},end:{line:257,column:40}},{start:{line:257,column:44},end:{line:257,column:123}}],line:257},32:{loc:{start:{line:271,column:30},end:{line:271,column:39}},type:"default-arg",locations:[{start:{line:271,column:37},end:{line:271,column:39}}],line:271},33:{loc:{start:{line:278,column:4},end:{line:280,column:5}},type:"if",locations:[{start:{line:278,column:4},end:{line:280,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:278},34:{loc:{start:{line:281,column:19},end:{line:281,column:51}},type:"binary-expr",locations:[{start:{line:281,column:19},end:{line:281,column:45}},{start:{line:281,column:49},end:{line:281,column:51}}],line:281},35:{loc:{start:{line:283,column:4},end:{line:294,column:5}},type:"if",locations:[{start:{line:283,column:4},end:{line:294,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:283},36:{loc:{start:{line:283,column:8},end:{line:283,column:35}},type:"binary-expr",locations:[{start:{line:283,column:8},end:{line:283,column:16}},{start:{line:283,column:20},end:{line:283,column:35}}],line:283},37:{loc:{start:{line:286,column:8},end:{line:291,column:9}},type:"if",locations:[{start:{line:286,column:8},end:{line:291,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:12},end:{line:286,column:56}},type:"binary-expr",locations:[{start:{line:286,column:12},end:{line:286,column:27}},{start:{line:286,column:31},end:{line:286,column:56}}],line:286},39:{loc:{start:{line:297,column:6},end:{line:310,column:7}},type:"if",locations:[{start:{line:297,column:6},end:{line:310,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:297},40:{loc:{start:{line:312,column:6},end:{line:325,column:7}},type:"if",locations:[{start:{line:312,column:6},end:{line:325,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:312},41:{loc:{start:{line:327,column:6},end:{line:345,column:7}},type:"if",locations:[{start:{line:327,column:6},end:{line:345,column:7}},{start:{line:341,column:13},end:{line:345,column:7}}],line:327},42:{loc:{start:{line:329,column:20},end:{line:329,column:78}},type:"cond-expr",locations:[{start:{line:329,column:40},end:{line:329,column:67}},{start:{line:329,column:70},end:{line:329,column:78}}],line:329},43:{loc:{start:{line:329,column:20},end:{line:329,column:37}},type:"binary-expr",locations:[{start:{line:329,column:20},end:{line:329,column:25}},{start:{line:329,column:29},end:{line:329,column:37}}],line:329},44:{loc:{start:{line:348,column:4},end:{line:362,column:5}},type:"if",locations:[{start:{line:348,column:4},end:{line:362,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:348},45:{loc:{start:{line:352,column:8},end:{line:360,column:9}},type:"if",locations:[{start:{line:352,column:8},end:{line:360,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:352},46:{loc:{start:{line:363,column:4},end:{line:365,column:5}},type:"if",locations:[{start:{line:363,column:4},end:{line:365,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:363},47:{loc:{start:{line:366,column:4},end:{line:368,column:5}},type:"if",locations:[{start:{line:366,column:4},end:{line:368,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:366},48:{loc:{start:{line:369,column:4},end:{line:371,column:5}},type:"if",locations:[{start:{line:369,column:4},end:{line:371,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:369},49:{loc:{start:{line:372,column:4},end:{line:374,column:5}},type:"if",locations:[{start:{line:372,column:4},end:{line:374,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:372},50:{loc:{start:{line:405,column:4},end:{line:405,column:38}},type:"if",locations:[{start:{line:405,column:4},end:{line:405,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:405},51:{loc:{start:{line:406,column:4},end:{line:410,column:5}},type:"if",locations:[{start:{line:406,column:4},end:{line:410,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:406},52:{loc:{start:{line:440,column:26},end:{line:440,column:70}},type:"cond-expr",locations:[{start:{line:440,column:46},end:{line:440,column:65}},{start:{line:440,column:68},end:{line:440,column:70}}],line:440},53:{loc:{start:{line:441,column:31},end:{line:441,column:87}},type:"cond-expr",locations:[{start:{line:441,column:69},end:{line:441,column:78}},{start:{line:441,column:81},end:{line:441,column:87}}],line:441},54:{loc:{start:{line:465,column:21},end:{line:465,column:44}},type:"binary-expr",locations:[{start:{line:465,column:21},end:{line:465,column:38}},{start:{line:465,column:42},end:{line:465,column:44}}],line:465},55:{loc:{start:{line:466,column:4},end:{line:477,column:5}},type:"if",locations:[{start:{line:466,column:4},end:{line:477,column:5}},{start:{line:475,column:11},end:{line:477,column:5}}],line:466},56:{loc:{start:{line:487,column:6},end:{line:519,column:7}},type:"if",locations:[{start:{line:487,column:6},end:{line:519,column:7}},{start:{line:517,column:13},end:{line:519,column:7}}],line:487},57:{loc:{start:{line:487,column:10},end:{line:487,column:149}},type:"binary-expr",locations:[{start:{line:487,column:10},end:{line:487,column:72}},{start:{line:487,column:76},end:{line:487,column:97}},{start:{line:487,column:101},end:{line:487,column:149}}],line:487},58:{loc:{start:{line:501,column:10},end:{line:503,column:11}},type:"if",locations:[{start:{line:501,column:10},end:{line:503,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:501},59:{loc:{start:{line:518,column:26},end:{line:518,column:85}},type:"binary-expr",locations:[{start:{line:518,column:26},end:{line:518,column:49}},{start:{line:518,column:53},end:{line:518,column:85}}],line:518},60:{loc:{start:{line:521,column:4},end:{line:526,column:5}},type:"if",locations:[{start:{line:521,column:4},end:{line:526,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:521},61:{loc:{start:{line:529,column:21},end:{line:529,column:55}},type:"binary-expr",locations:[{start:{line:529,column:21},end:{line:529,column:49}},{start:{line:529,column:53},end:{line:529,column:55}}],line:529},62:{loc:{start:{line:530,column:11},end:{line:530,column:52}},type:"binary-expr",locations:[{start:{line:530,column:11},end:{line:530,column:40}},{start:{line:530,column:44},end:{line:530,column:52}}],line:530},63:{loc:{start:{line:540,column:16},end:{line:540,column:41}},type:"binary-expr",locations:[{start:{line:540,column:16},end:{line:540,column:29}},{start:{line:540,column:33},end:{line:540,column:41}}],line:540},64:{loc:{start:{line:553,column:4},end:{line:575,column:5}},type:"if",locations:[{start:{line:553,column:4},end:{line:575,column:5}},{start:{line:563,column:11},end:{line:575,column:5}}],line:553},65:{loc:{start:{line:577,column:4},end:{line:579,column:5}},type:"if",locations:[{start:{line:577,column:4},end:{line:579,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:577},66:{loc:{start:{line:581,column:4},end:{line:583,column:5}},type:"if",locations:[{start:{line:581,column:4},end:{line:583,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:581},67:{loc:{start:{line:592,column:66},end:{line:592,column:91}},type:"cond-expr",locations:[{start:{line:592,column:81},end:{line:592,column:84}},{start:{line:592,column:87},end:{line:592,column:91}}],line:592},68:{loc:{start:{line:593,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:593,column:4},end:{line:597,column:5}},{start:{line:595,column:11},end:{line:597,column:5}}],line:593},69:{loc:{start:{line:598,column:4},end:{line:602,column:5}},type:"if",locations:[{start:{line:598,column:4},end:{line:602,column:5}},{start:{line:600,column:11},end:{line:602,column:5}}],line:598},70:{loc:{start:{line:600,column:11},end:{line:602,column:5}},type:"if",locations:[{start:{line:600,column:11},end:{line:602,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:600},71:{loc:{start:{line:608,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:608,column:4},end:{line:620,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:608},72:{loc:{start:{line:608,column:8},end:{line:608,column:39}},type:"binary-expr",locations:[{start:{line:608,column:8},end:{line:608,column:18}},{start:{line:608,column:22},end:{line:608,column:39}}],line:608},73:{loc:{start:{line:622,column:4},end:{line:624,column:5}},type:"if",locations:[{start:{line:622,column:4},end:{line:624,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:622},74:{loc:{start:{line:622,column:8},end:{line:622,column:27}},type:"binary-expr",locations:[{start:{line:622,column:8},end:{line:622,column:12}},{start:{line:622,column:16},end:{line:622,column:27}}],line:622},75:{loc:{start:{line:626,column:4},end:{line:649,column:5}},type:"if",locations:[{start:{line:626,column:4},end:{line:649,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},76:{loc:{start:{line:634,column:8},end:{line:639,column:9}},type:"if",locations:[{start:{line:634,column:8},end:{line:639,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:634},77:{loc:{start:{line:636,column:10},end:{line:638,column:11}},type:"if",locations:[{start:{line:636,column:10},end:{line:638,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:636},78:{loc:{start:{line:640,column:8},end:{line:645,column:9}},type:"if",locations:[{start:{line:640,column:8},end:{line:645,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:640},79:{loc:{start:{line:688,column:19},end:{line:688,column:51}},type:"binary-expr",locations:[{start:{line:688,column:19},end:{line:688,column:45}},{start:{line:688,column:49},end:{line:688,column:51}}],line:688},80:{loc:{start:{line:689,column:26},end:{line:689,column:92}},type:"cond-expr",locations:[{start:{line:689,column:46},end:{line:689,column:83}},{start:{line:689,column:86},end:{line:689,column:92}}],line:689},81:{loc:{start:{line:719,column:24},end:{line:738,column:14}},type:"cond-expr",locations:[{start:{line:719,column:56},end:{line:738,column:5}},{start:{line:738,column:8},end:{line:738,column:14}}],line:719},82:{loc:{start:{line:739,column:24},end:{line:749,column:14}},type:"cond-expr",locations:[{start:{line:739,column:97},end:{line:749,column:5}},{start:{line:749,column:8},end:{line:749,column:14}}],line:739}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AAmtBmB,SAAA,KAgNA,YAhNA;AAltBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AAEjB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAEA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEA,cAAM,KAAM;AAAA,UACV,MAAM;AAAA,QACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,CAAQ,SAAA;AAEZ,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEQ,kBAAA,MAAM,sBAAoB,GAAG;AACrC,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH,CAAC,EACA,MAAM,CAAO,QAAA;AACJ,kBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,QAC9D,CAAC;AAAA,MACL,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AACQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAC3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b0d5f8ee8537ee2f4707fe123c0c222059f25ad2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var a=s[n];return Me=function(){return a},a}Me();Me().s[0]++;window.Buffer=bq.Buffer;function Jfe(n,e){Me().f[0]++;const t=(Me().s[1]++,n.match(/\.tilehosting\.com/)),r=(Me().s[2]++,n.match(/\.maptiler\.com/)),i=(Me().s[3]++,n.match(/\.thunderforest\.com/));if(Me().s[4]++,Me().b[1][0]++,t||(Me().b[1][1]++,r)){Me().b[0][0]++;const s=(Me().s[5]++,cc.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(Me().s[6]++,s)return Me().b[2][0]++,Me().s[7]++,n.replace("{key}",s);Me().b[2][1]++}else if(Me().b[0][1]++,Me().s[8]++,i){Me().b[3][0]++;const s=(Me().s[9]++,cc.getAccessToken("thunderforest",e,{allowFallback:!0}));if(Me().s[10]++,s)return Me().b[4][0]++,Me().s[11]++,n.replace("{key}",s);Me().b[4][1]++}else return Me().b[3][1]++,Me().s[12]++,n}function FL(n,e,t){return Me().f[1]++,Me().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class epe extends Zn.Component{constructor(t){Me().f[2]++,Me().s[14]++;super(t);On(this,"revisionStore");On(this,"styleStore");On(this,"layerWatcher");On(this,"handleKeyPress",(Me().s[65]++,t=>{Me().f[18]++,Me().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(Me().b[18][0]++,Me().s[67]++,Me().b[20][0]++,t.metaKey&&(Me().b[20][1]++,t.shiftKey)&&(Me().b[20][2]++,t.keyCode===90)?(Me().b[19][0]++,Me().s[68]++,t.preventDefault(),Me().s[69]++,this.onRedo()):(Me().b[19][1]++,Me().s[70]++,Me().b[22][0]++,t.metaKey&&(Me().b[22][1]++,t.keyCode===90)?(Me().b[21][0]++,Me().s[71]++,t.preventDefault(),Me().s[72]++,this.onUndo()):Me().b[21][1]++)):(Me().b[18][1]++,Me().s[73]++,Me().b[24][0]++,t.ctrlKey&&(Me().b[24][1]++,t.keyCode===90)?(Me().b[23][0]++,Me().s[74]++,t.preventDefault(),Me().s[75]++,this.onUndo()):(Me().b[23][1]++,Me().s[76]++,Me().b[26][0]++,t.ctrlKey&&(Me().b[26][1]++,t.keyCode===89)?(Me().b[25][0]++,Me().s[77]++,t.preventDefault(),Me().s[78]++,this.onRedo()):Me().b[25][1]++))}));On(this,"onChangeMetadataProperty",(Me().s[89]++,(t,r)=>{Me().f[26]++,Me().s[90]++,Me().b[31][0]++,t==="maputnik:renderer"&&(Me().b[31][1]++,r!==Mq(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(Me().b[30][0]++,Me().s[91]++,this.setState({mapState:"map"})):Me().b[30][1]++;const i=(Me().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});Me().s[93]++,this.onStyleChanged(i)}));On(this,"onStyleChanged",(Me().s[94]++,(t,r=(Me().b[32][0]++,{}))=>{Me().f[27]++,Me().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},Me().s[96]++,r.initialLoad?(Me().b[33][0]++,Me().s[97]++,this.getInitialStateFromUrl(t)):Me().b[33][1]++;const i=(Me().s[98]++,Me().b[34][0]++,Tf(t)||(Me().b[34][1]++,[])),s=(Me().s[99]++,[]);if(Me().s[100]++,Me().b[36][0]++,t&&(Me().b[36][1]++,t.layers)){Me().b[35][0]++;const d=(Me().s[101]++,new window.Map);Me().s[102]++,t.layers.forEach((g,b)=>{if(Me().f[28]++,Me().s[103]++,Me().b[38][0]++,g.id===""&&(Me().b[38][1]++,d.has(g.id))){Me().b[37][0]++;const E=(Me().s[104]++,new Error(`layers[${b}]: duplicate layer id [empty_string], previously used`));Me().s[105]++,s.push(E)}else Me().b[37][1]++;Me().s[106]++,d.set(g.id,!0)})}else Me().b[35][1]++;const a=(Me().s[107]++,s.concat(i).map(d=>{Me().f[29]++;const g=(Me().s[108]++,d.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(Me().s[109]++,g){Me().b[39][0]++;const[,S,O]=(Me().s[110]++,g);return Me().s[111]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"id",message:O}}}}else Me().b[39][1]++;const b=(Me().s[112]++,d.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(Me().s[113]++,b){Me().b[40][0]++;const[,S,O]=(Me().s[114]++,b);return Me().s[115]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:"source",message:O}}}}else Me().b[40][1]++;const E=(Me().s[116]++,d.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(Me().s[117]++,E){Me().b[41][0]++;const[,S,O,k,U]=(Me().s[118]++,E),z=(Me().s[119]++,Me().b[43][0]++,O&&(Me().b[43][1]++,k)?(Me().b[42][0]++,[O,k].join(".")):(Me().b[42][1]++,k));return Me().s[120]++,{message:d.message,parsed:{type:"layer",data:{index:parseInt(S,10),key:z,message:U}}}}else return Me().b[41][1]++,Me().s[121]++,{message:d.message}}));let o=(Me().s[122]++,void 0);Me().s[123]++,i.length>0?(Me().b[44][0]++,Me().s[124]++,o=K8(t),Me().s[125]++,i.forEach(d=>{Me().f[30]++;const{message:g}=(Me().s[126]++,d);if(Me().s[127]++,g){Me().b[45][0]++,Me().s[128]++;try{const b=(Me().s[129]++,g.split(":")[0]),E=(Me().s[130]++,b.match(/^\S+?\[\d+\]\.[^[]+/)[0]);Me().s[131]++,$2.unset(o,E)}catch(b){Me().s[132]++,console.warn(b)}}else Me().b[45][1]++})):Me().b[44][1]++,Me().s[133]++,t.glyphs!==this.state.mapStyle.glyphs?(Me().b[46][0]++,Me().s[134]++,this.updateFonts(t.glyphs)):Me().b[46][1]++,Me().s[135]++,t.sprite!==this.state.mapStyle.sprite?(Me().b[47][0]++,Me().s[136]++,this.updateIcons(t.sprite)):Me().b[47][1]++,Me().s[137]++,r.addRevision?(Me().b[48][0]++,Me().s[138]++,this.revisionStore.addRevision(t)):Me().b[48][1]++,Me().s[139]++,r.save?(Me().b[49][0]++,Me().s[140]++,this.saveStyle(t)):Me().b[49][1]++,Me().s[141]++,this.setState({mapStyle:t,dirtyMapStyle:o,errors:a},()=>{Me().f[31]++,Me().s[142]++,this.fetchSources(),Me().s[143]++,this.setStateInUrl()})}));On(this,"onUndo",(Me().s[144]++,()=>{Me().f[32]++;const t=(Me().s[145]++,this.revisionStore.undo()),r=(Me().s[146]++,Ife(this.state.mapStyle,t));Me().s[147]++,this.onStyleChanged(t,{addRevision:!1}),Me().s[148]++,this.setState({infos:r})}));On(this,"onRedo",(Me().s[149]++,()=>{Me().f[33]++;const t=(Me().s[150]++,this.revisionStore.redo()),r=(Me().s[151]++,kfe(this.state.mapStyle,t));Me().s[152]++,this.onStyleChanged(t,{addRevision:!1}),Me().s[153]++,this.setState({infos:r})}));On(this,"onMoveLayer",(Me().s[154]++,t=>{Me().f[34]++;let{oldIndex:r,newIndex:i}=(Me().s[155]++,t),s=(Me().s[156]++,this.state.mapStyle.layers);if(Me().s[157]++,r=L8(r,0,s.length-1),Me().s[158]++,i=L8(i,0,s.length-1),Me().s[159]++,r===i){Me().b[50][0]++,Me().s[160]++;return}else Me().b[50][1]++;Me().s[161]++,r===this.state.selectedLayerIndex?(Me().b[51][0]++,Me().s[162]++,this.setState({selectedLayerIndex:i})):Me().b[51][1]++,Me().s[163]++,s=s.slice(0),Me().s[164]++,Bq(s,r,i),Me().s[165]++,this.onLayersChange(s)}));On(this,"onLayersChange",(Me().s[166]++,t=>{Me().f[35]++;const r=(Me().s[167]++,{...this.state.mapStyle,layers:t});Me().s[168]++,this.onStyleChanged(r)}));On(this,"onLayerDestroy",(Me().s[169]++,t=>{Me().f[36]++;const r=(Me().s[170]++,this.state.mapStyle.layers),i=(Me().s[171]++,r.slice(0));Me().s[172]++,i.splice(t,1),Me().s[173]++,this.onLayersChange(i)}));On(this,"onLayerCopy",(Me().s[174]++,t=>{Me().f[37]++;const r=(Me().s[175]++,this.state.mapStyle.layers),i=(Me().s[176]++,r.slice(0)),s=(Me().s[177]++,K8(i[t]));Me().s[178]++,s.id=s.id+"-copy",Me().s[179]++,i.splice(t,0,s),Me().s[180]++,this.onLayersChange(i)}));On(this,"onLayerVisibilityToggle",(Me().s[181]++,t=>{Me().f[38]++;const r=(Me().s[182]++,this.state.mapStyle.layers),i=(Me().s[183]++,r.slice(0)),s=(Me().s[184]++,{...i[t]}),a=(Me().s[185]++,"layout"in s?(Me().b[52][0]++,{...s.layout}):(Me().b[52][1]++,{}));Me().s[186]++,a.visibility=a.visibility==="none"?(Me().b[53][0]++,"visible"):(Me().b[53][1]++,"none"),Me().s[187]++,s.layout=a,Me().s[188]++,i[t]=s,Me().s[189]++,this.onLayersChange(i)}));On(this,"onLayerIdChange",(Me().s[190]++,(t,r,i)=>{Me().f[39]++;const s=(Me().s[191]++,this.state.mapStyle.layers.slice(0));Me().s[192]++,s[t]={...s[t],id:i},Me().s[193]++,this.onLayersChange(s)}));On(this,"onLayerChanged",(Me().s[194]++,(t,r)=>{Me().f[40]++;const i=(Me().s[195]++,this.state.mapStyle.layers.slice(0));Me().s[196]++,i[t]=r,Me().s[197]++,this.onLayersChange(i)}));On(this,"setMapState",(Me().s[198]++,t=>{Me().f[41]++,Me().s[199]++,this.setState({mapState:t},this.setStateInUrl)}));On(this,"setDefaultValues",(Me().s[200]++,t=>{Me().f[42]++;const r=(Me().s[201]++,Me().b[54][0]++,t.metadata||(Me().b[54][1]++,{}));if(Me().s[202]++,r["maputnik:renderer"]===void 0){Me().b[55][0]++;const i=(Me().s[203]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return Me().s[204]++,i}else return Me().b[55][1]++,Me().s[205]++,t}));On(this,"openStyle",(Me().s[206]++,(t,r)=>{Me().f[43]++,Me().s[207]++,this.setState({fileHandle:r}),Me().s[208]++,t=this.setDefaultValues(t),Me().s[209]++,this.onStyleChanged(t)}));On(this,"onMapChange",(Me().s[234]++,t=>{Me().f[49]++,Me().s[235]++,this.setState({mapView:t})}));On(this,"setStateInUrl",(Me().s[251]++,()=>{Me().f[53]++;const{mapState:t,mapStyle:r,isOpen:i}=(Me().s[252]++,this.state),{selectedLayerIndex:s}=(Me().s[253]++,this.state),a=(Me().s[254]++,new URL(location.href)),o=(Me().s[255]++,W8(JSON.stringify(r)));Me().s[256]++,a.searchParams.set("layer",`${o}~${s}`);const d=(Me().s[257]++,Object.entries(i).map(([g,b])=>(Me().f[54]++,Me().s[258]++,b===!0?(Me().b[67][0]++,g):(Me().b[67][1]++,null))).filter(g=>(Me().f[55]++,Me().s[259]++,g!==null)));Me().s[260]++,d.length>0?(Me().b[68][0]++,Me().s[261]++,a.searchParams.set("modal",d.join(","))):(Me().b[68][1]++,Me().s[262]++,a.searchParams.delete("modal")),Me().s[263]++,t==="map"?(Me().b[69][0]++,Me().s[264]++,a.searchParams.delete("view")):(Me().b[69][1]++,Me().s[265]++,t==="inspect"?(Me().b[70][0]++,Me().s[266]++,a.searchParams.set("view","inspect")):Me().b[70][1]++),Me().s[267]++,history.replaceState({selectedLayerIndex:s},"Maputnik",a.href)}));On(this,"getInitialStateFromUrl",(Me().s[268]++,t=>{Me().f[56]++;const r=(Me().s[269]++,new URL(location.href)),i=(Me().s[270]++,r.searchParams.get("modal"));if(Me().s[271]++,Me().b[72][0]++,i&&(Me().b[72][1]++,i!=="")){Me().b[71][0]++;const o=(Me().s[272]++,i.split(",")),d=(Me().s[273]++,{});Me().s[274]++,o.forEach(g=>{Me().f[57]++,Me().s[275]++,d[g]=!0}),Me().s[276]++,this.setState({isOpen:{...this.state.isOpen,...d}})}else Me().b[71][1]++;const s=(Me().s[277]++,r.searchParams.get("view"));Me().s[278]++,Me().b[74][0]++,s&&(Me().b[74][1]++,s!=="")?(Me().b[73][0]++,Me().s[279]++,this.setMapState(s)):Me().b[73][1]++;const a=(Me().s[280]++,r.searchParams.get("layer"));if(Me().s[281]++,a){Me().b[75][0]++,Me().s[282]++;try{const o=(Me().s[283]++,a.split("~")),[d,g]=(Me().s[284]++,[o[0],parseInt(o[1],10)]);let b=(Me().s[285]++,!0);if(Me().s[286]++,d!=="-"){Me().b[76][0]++;const E=(Me().s[287]++,W8(JSON.stringify(t)));Me().s[288]++,E!==parseInt(d,10)?(Me().b[77][0]++,Me().s[289]++,b=!1):Me().b[77][1]++}else Me().b[76][1]++;Me().s[290]++,b?(Me().b[78][0]++,Me().s[291]++,this.setState({selectedLayerIndex:g,selectedLayerOriginalId:t.layers[g].id})):Me().b[78][1]++}catch(o){Me().s[292]++,console.warn(o)}}else Me().b[75][1]++}));On(this,"onLayerSelect",(Me().s[293]++,t=>{Me().f[58]++,Me().s[294]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));On(this,"onChangeOpenlayersDebug",(Me().s[298]++,(t,r)=>{Me().f[62]++,Me().s[299]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));On(this,"onChangeMaplibreGlDebug",(Me().s[300]++,(t,r)=>{Me().f[63]++,Me().s[301]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));Me().s[15]++,hq(this),Me().s[16]++,this.revisionStore=new Wfe;const r=(Me().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(Me().s[18]++,r.get("localport"));Me().s[19]++,Me().b[6][0]++,i==null&&(Me().b[6][1]++,window.location.port!=="80")&&(Me().b[6][2]++,window.location.port!=="443")?(Me().b[5][0]++,Me().s[20]++,i=window.location.port):Me().b[5][1]++,Me().s[21]++,this.styleStore=new Gfe({onLocalStyleChange:o=>(Me().f[3]++,Me().s[22]++,this.onStyleChanged(o,{save:!1})),port:i,host:r.get("localhost")});const s=(Me().s[23]++,[{key:"?",handler:()=>{Me().f[4]++,Me().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{Me().f[5]++,Me().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{Me().f[6]++,Me().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{Me().f[7]++,Me().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{Me().f[8]++,Me().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{Me().f[9]++,Me().s[29]++,this.setMapState(this.state.mapState==="map"?(Me().b[7][0]++,"inspect"):(Me().b[7][1]++,"map"))}},{key:"m",handler:()=>{Me().f[10]++,Me().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{Me().f[11]++,Me().s[31]++,this.toggleModal("debug")}}]);Me().s[32]++,document.body.addEventListener("keyup",o=>{if(Me().f[12]++,Me().s[33]++,o.key==="Escape")Me().b[8][0]++,Me().s[34]++,o.target.blur(),Me().s[35]++,document.body.focus();else if(Me().b[8][1]++,Me().s[36]++,Me().b[10][0]++,this.state.isOpen.shortcuts||(Me().b[10][1]++,document.activeElement===document.body)){Me().b[9][0]++;const d=(Me().s[37]++,s.find(g=>(Me().f[13]++,Me().s[38]++,g.key===o.key)));Me().s[39]++,d?(Me().b[11][0]++,Me().s[40]++,this.setModal("shortcuts",!1),Me().s[41]++,d.handler()):Me().b[11][1]++}else Me().b[9][1]++});const a=(Me().s[42]++,Ofe());Me().s[43]++,Me().b[13][0]++,a&&(Me().b[13][1]++,window.confirm("Load style from URL: "+a+" and discard current changes?"))?(Me().b[12][0]++,Me().s[44]++,this.styleStore=new KL,Me().s[45]++,ZG(a,o=>(Me().f[14]++,Me().s[46]++,this.onStyleChanged(o))),Me().s[47]++,kL()):(Me().b[12][1]++,Me().s[48]++,a?(Me().b[14][0]++,Me().s[49]++,kL()):Me().b[14][1]++,Me().s[50]++,this.styleStore.init(o=>{Me().f[15]++,Me().s[51]++,o?(Me().b[15][0]++,Me().s[52]++,console.log("Falling back to local storage for storing styles"),Me().s[53]++,this.styleStore=new KL):Me().b[15][1]++,Me().s[54]++,this.styleStore.latestStyle(d=>(Me().f[16]++,Me().s[55]++,this.onStyleChanged(d,{initialLoad:!0}))),Me().s[56]++,Ag.enabled()?(Me().b[16][0]++,Me().s[57]++,Ag.set("maputnik","styleStore",this.styleStore),Me().s[58]++,Ag.set("maputnik","revisionStore",this.revisionStore)):Me().b[16][1]++})),Me().s[59]++,Ag.enabled()?(Me().b[17][0]++,Me().s[60]++,Ag.set("maputnik","revisionStore",this.revisionStore),Me().s[61]++,Ag.set("maputnik","styleStore",this.styleStore)):Me().b[17][1]++,Me().s[62]++,this.state={errors:[],infos:[],mapStyle:cc.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:Ys,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},Me().s[63]++,this.layerWatcher=new Hfe({onVectorLayersChange:o=>(Me().f[17]++,Me().s[64]++,this.setState({vectorLayers:o}))})}componentDidMount(){Me().f[19]++,Me().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){Me().f[20]++,Me().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){Me().f[21]++,Me().s[81]++,this.styleStore.save(t)}updateFonts(t){Me().f[22]++;const r=(Me().s[82]++,Me().b[27][0]++,this.state.mapStyle.metadata||(Me().b[27][1]++,{})),i=(Me().s[83]++,Me().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(Me().b[28][1]++,PG.openmaptiles)),s=(Me().s[84]++,typeof t=="string"?(Me().b[29][0]++,t.replace("{key}",i)):(Me().b[29][1]++,t));Me().s[85]++,Efe(s,a=>{Me().f[23]++,Me().s[86]++,this.setState({spec:FL(this.state.spec,"glyphs",a)})})}updateIcons(t){Me().f[24]++,Me().s[87]++,Bfe(t,r=>{Me().f[25]++,Me().s[88]++,this.setState({spec:FL(this.state.spec,"sprite",r)})})}fetchSources(){Me().f[44]++;const t=(Me().s[210]++,{});Me().s[211]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(Me().s[212]++,Me().b[57][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(Me().b[57][1]++,i.type==="vector")&&(Me().b[57][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){Me().b[56][0]++,Me().s[213]++,t[r]={type:i.type,layers:[]};let s=(Me().s[214]++,i.url);Me().s[215]++;try{Me().s[216]++,s=Jfe(s,this.state.mapStyle)}catch(a){Me().s[217]++,console.warn("Failed to setFetchAccessToken: ",a)}Me().s[218]++,fetch(s,{mode:"cors"}).then(a=>(Me().f[45]++,Me().s[219]++,a.json())).then(a=>{if(Me().f[46]++,Me().s[220]++,Object.prototype.hasOwnProperty.call(a,"vector_layers"))Me().b[58][1]++;else{Me().b[58][0]++,Me().s[221]++;return}const o=(Me().s[222]++,Object.assign({},{[r]:this.state.sources[r]}));Me().s[223]++;for(const d of a.vector_layers)Me().s[224]++,o[r].layers.push(d.id);Me().s[225]++,console.debug("Updating source: "+r),Me().s[226]++,this.setState({sources:o})}).catch(a=>{Me().f[47]++,Me().s[227]++,console.error("Failed to process sources for '%s'",s,a)})}else Me().b[56][1]++,Me().s[228]++,t[r]=(Me().b[59][0]++,this.state.sources[r]||(Me().b[59][1]++,this.state.mapStyle.sources[r]));Me().s[229]++,vB(this.state.sources,t)?Me().b[60][1]++:(Me().b[60][0]++,Me().s[230]++,console.debug("Setting sources"),Me().s[231]++,this.setState({sources:t}))}_getRenderer(){Me().f[48]++;const t=(Me().s[232]++,Me().b[61][0]++,this.state.mapStyle.metadata||(Me().b[61][1]++,{}));return Me().s[233]++,Me().b[62][0]++,t["maputnik:renderer"]||(Me().b[62][1]++,"mlgljs")}mapRenderer(){Me().f[50]++;const{mapStyle:t,dirtyMapStyle:r}=(Me().s[236]++,this.state),i=(Me().s[237]++,{mapStyle:(Me().b[63][0]++,r||(Me().b[63][1]++,t)),replaceAccessTokens:g=>(Me().f[51]++,Me().s[238]++,cc.replaceAccessTokens(g,{allowFallback:!0})),onDataChange:g=>{Me().f[52]++,Me().s[239]++,this.layerWatcher.analyzeMap(g.map),Me().s[240]++,this.fetchSources()}}),s=(Me().s[241]++,this._getRenderer());let a;Me().s[242]++,s==="ol"?(Me().b[64][0]++,Me().s[243]++,a=le.jsx(foe,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(Me().b[64][1]++,Me().s[244]++,a=le.jsx(hZ,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let o;Me().s[245]++,this.state.mapState.match(/^filter-/)?(Me().b[65][0]++,Me().s[246]++,o=this.state.mapState.replace(/^filter-/,"")):Me().b[65][1]++;const d=(Me().s[247]++,{});return Me().s[248]++,o?(Me().b[66][0]++,Me().s[249]++,d.filter=`url('#${o}')`):Me().b[66][1]++,Me().s[250]++,le.jsx("div",{style:d,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:a})}setModal(t,r){Me().f[59]++,Me().s[295]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){Me().f[60]++,Me().s[296]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){Me().f[61]++,Me().s[297]++,this.setState({fileHandle:t})}render(){Me().f[64]++;const t=(Me().s[302]++,Me().b[79][0]++,this.state.mapStyle.layers||(Me().b[79][1]++,[])),r=(Me().s[303]++,t.length>0?(Me().b[80][0]++,t[this.state.selectedLayerIndex]):(Me().b[80][1]++,void 0)),i=(Me().s[304]++,le.jsx(Nde,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),s=(Me().s[305]++,le.jsx(kae,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),a=(Me().s[306]++,r?(Me().b[81][0]++,le.jsx(ude,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(Me().b[81][1]++,void 0)),o=(Me().s[307]++,this.state.errors.length+this.state.infos.length>0?(Me().b[82][0]++,le.jsx(Qde,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(Me().b[82][1]++,void 0)),d=(Me().s[308]++,le.jsxs("div",{children:[le.jsx(Ghe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),le.jsx(jhe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),le.jsx(Vde,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),le.jsx(fhe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),le.jsx(Uhe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),le.jsx(khe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return Me().s[309]++,le.jsx(Wde,{toolbar:i,layerList:s,layerEditor:a,map:this.mapRenderer(),bottom:o,modals:d})}}const tpe=eQ.createRoot(document.querySelector("#app"));tpe.render(le.jsx(ZE.Provider,{value:{className:"react-icons"},children:le.jsx(epe,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-CmHbCPm6.js.map
